import { e as defineComponent, bq as shallowRef, aI as inject, br as toRefs, ah as computed, g as getCurrentInstance, S as watch, bs as watchEffect, aL as onMounted, at as onBeforeUnmount, h, G as unref, ao as nextTick, _ as _export_sfc, l as debug, aP as provide, O as useDataStore, bc as reactive, M as _$1, bp as hooks, R as storeToRefs, a as axios, q as openBlock, s as createBlock, w as withCtx, E as createBaseVNode, f as createVNode, D as QCardSection, U as QCard, C as QPage, J as pushScopeId, K as popScopeId } from "./index.8f8ca0f3.js";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var extendStatics = function(d, b2) {
  extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b3) {
    d2.__proto__ = b3;
  } || function(d2, b3) {
    for (var p in b3)
      if (Object.prototype.hasOwnProperty.call(b3, p))
        d2[p] = b3[p];
  };
  return extendStatics(d, b2);
};
function __extends(d, b2) {
  if (typeof b2 !== "function" && b2 !== null)
    throw new TypeError("Class extends value " + String(b2) + " is not a constructor or null");
  extendStatics(d, b2);
  function __() {
    this.constructor = d;
  }
  d.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
}
var Browser = function() {
  function Browser2() {
    this.firefox = false;
    this.ie = false;
    this.edge = false;
    this.newEdge = false;
    this.weChat = false;
  }
  return Browser2;
}();
var Env = function() {
  function Env2() {
    this.browser = new Browser();
    this.node = false;
    this.wxa = false;
    this.worker = false;
    this.svgSupported = false;
    this.touchEventsSupported = false;
    this.pointerEventsSupported = false;
    this.domSupported = false;
    this.transformSupported = false;
    this.transform3dSupported = false;
    this.hasGlobalWindow = typeof window !== "undefined";
  }
  return Env2;
}();
var env = new Env();
if (typeof wx === "object" && typeof wx.getSystemInfoSync === "function") {
  env.wxa = true;
  env.touchEventsSupported = true;
} else if (typeof document === "undefined" && typeof self !== "undefined") {
  env.worker = true;
} else if (typeof navigator === "undefined") {
  env.node = true;
  env.svgSupported = true;
} else {
  detect(navigator.userAgent, env);
}
function detect(ua, env2) {
  var browser = env2.browser;
  var firefox = ua.match(/Firefox\/([\d.]+)/);
  var ie = ua.match(/MSIE\s([\d.]+)/) || ua.match(/Trident\/.+?rv:(([\d.]+))/);
  var edge = ua.match(/Edge?\/([\d.]+)/);
  var weChat = /micromessenger/i.test(ua);
  if (firefox) {
    browser.firefox = true;
    browser.version = firefox[1];
  }
  if (ie) {
    browser.ie = true;
    browser.version = ie[1];
  }
  if (edge) {
    browser.edge = true;
    browser.version = edge[1];
    browser.newEdge = +edge[1].split(".")[0] > 18;
  }
  if (weChat) {
    browser.weChat = true;
  }
  env2.svgSupported = typeof SVGRect !== "undefined";
  env2.touchEventsSupported = "ontouchstart" in window && !browser.ie && !browser.edge;
  env2.pointerEventsSupported = "onpointerdown" in window && (browser.edge || browser.ie && +browser.version >= 11);
  env2.domSupported = typeof document !== "undefined";
  var style2 = document.documentElement.style;
  env2.transform3dSupported = (browser.ie && "transition" in style2 || browser.edge || "WebKitCSSMatrix" in window && "m11" in new WebKitCSSMatrix() || "MozPerspective" in style2) && !("OTransition" in style2);
  env2.transformSupported = env2.transform3dSupported || browser.ie && +browser.version >= 9;
}
var env$1 = env;
var DEFAULT_FONT_SIZE = 12;
var DEFAULT_FONT_FAMILY = "sans-serif";
var DEFAULT_FONT = DEFAULT_FONT_SIZE + "px " + DEFAULT_FONT_FAMILY;
var OFFSET = 20;
var SCALE = 100;
var defaultWidthMapStr = "007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";
function getTextWidthMap(mapStr) {
  var map2 = {};
  if (typeof JSON === "undefined") {
    return map2;
  }
  for (var i = 0; i < mapStr.length; i++) {
    var char = String.fromCharCode(i + 32);
    var size = (mapStr.charCodeAt(i) - OFFSET) / SCALE;
    map2[char] = size;
  }
  return map2;
}
var DEFAULT_TEXT_WIDTH_MAP = getTextWidthMap(defaultWidthMapStr);
var platformApi = {
  createCanvas: function() {
    return typeof document !== "undefined" && document.createElement("canvas");
  },
  measureText: function() {
    var _ctx;
    var _cachedFont;
    return function(text, font) {
      if (!_ctx) {
        var canvas = platformApi.createCanvas();
        _ctx = canvas && canvas.getContext("2d");
      }
      if (_ctx) {
        if (_cachedFont !== font) {
          _cachedFont = _ctx.font = font || DEFAULT_FONT;
        }
        return _ctx.measureText(text);
      } else {
        text = text || "";
        font = font || DEFAULT_FONT;
        var res = /(\d+)px/.exec(font);
        var fontSize = res && +res[1] || DEFAULT_FONT_SIZE;
        var width = 0;
        if (font.indexOf("mono") >= 0) {
          width = fontSize * text.length;
        } else {
          for (var i = 0; i < text.length; i++) {
            var preCalcWidth = DEFAULT_TEXT_WIDTH_MAP[text[i]];
            width += preCalcWidth == null ? fontSize : preCalcWidth * fontSize;
          }
        }
        return { width };
      }
    };
  }(),
  loadImage: function(src, onload, onerror) {
    var image = new Image();
    image.onload = onload;
    image.onerror = onerror;
    image.src = src;
    return image;
  }
};
var BUILTIN_OBJECT = reduce([
  "Function",
  "RegExp",
  "Date",
  "Error",
  "CanvasGradient",
  "CanvasPattern",
  "Image",
  "Canvas"
], function(obj, val) {
  obj["[object " + val + "]"] = true;
  return obj;
}, {});
var TYPED_ARRAY = reduce([
  "Int8",
  "Uint8",
  "Uint8Clamped",
  "Int16",
  "Uint16",
  "Int32",
  "Uint32",
  "Float32",
  "Float64"
], function(obj, val) {
  obj["[object " + val + "Array]"] = true;
  return obj;
}, {});
var objToString = Object.prototype.toString;
var arrayProto = Array.prototype;
var nativeForEach = arrayProto.forEach;
var nativeFilter = arrayProto.filter;
var nativeSlice = arrayProto.slice;
var nativeMap = arrayProto.map;
var ctorFunction = function() {
}.constructor;
var protoFunction = ctorFunction ? ctorFunction.prototype : null;
var protoKey = "__proto__";
var idStart = 2311;
function guid() {
  return idStart++;
}
function logError() {
  var args = [];
  for (var _i = 0; _i < arguments.length; _i++) {
    args[_i] = arguments[_i];
  }
  if (typeof console !== "undefined") {
    console.error.apply(console, args);
  }
}
function clone$2(source) {
  if (source == null || typeof source !== "object") {
    return source;
  }
  var result = source;
  var typeStr = objToString.call(source);
  if (typeStr === "[object Array]") {
    if (!isPrimitive(source)) {
      result = [];
      for (var i = 0, len2 = source.length; i < len2; i++) {
        result[i] = clone$2(source[i]);
      }
    }
  } else if (TYPED_ARRAY[typeStr]) {
    if (!isPrimitive(source)) {
      var Ctor = source.constructor;
      if (Ctor.from) {
        result = Ctor.from(source);
      } else {
        result = new Ctor(source.length);
        for (var i = 0, len2 = source.length; i < len2; i++) {
          result[i] = source[i];
        }
      }
    }
  } else if (!BUILTIN_OBJECT[typeStr] && !isPrimitive(source) && !isDom(source)) {
    result = {};
    for (var key in source) {
      if (source.hasOwnProperty(key) && key !== protoKey) {
        result[key] = clone$2(source[key]);
      }
    }
  }
  return result;
}
function merge(target, source, overwrite) {
  if (!isObject$2(source) || !isObject$2(target)) {
    return overwrite ? clone$2(source) : target;
  }
  for (var key in source) {
    if (source.hasOwnProperty(key) && key !== protoKey) {
      var targetProp = target[key];
      var sourceProp = source[key];
      if (isObject$2(sourceProp) && isObject$2(targetProp) && !isArray(sourceProp) && !isArray(targetProp) && !isDom(sourceProp) && !isDom(targetProp) && !isBuiltInObject(sourceProp) && !isBuiltInObject(targetProp) && !isPrimitive(sourceProp) && !isPrimitive(targetProp)) {
        merge(targetProp, sourceProp, overwrite);
      } else if (overwrite || !(key in target)) {
        target[key] = clone$2(source[key]);
      }
    }
  }
  return target;
}
function extend(target, source) {
  if (Object.assign) {
    Object.assign(target, source);
  } else {
    for (var key in source) {
      if (source.hasOwnProperty(key) && key !== protoKey) {
        target[key] = source[key];
      }
    }
  }
  return target;
}
function defaults(target, source, overlay) {
  var keysArr = keys(source);
  for (var i = 0; i < keysArr.length; i++) {
    var key = keysArr[i];
    if (overlay ? source[key] != null : target[key] == null) {
      target[key] = source[key];
    }
  }
  return target;
}
platformApi.createCanvas;
function indexOf(array, value) {
  if (array) {
    if (array.indexOf) {
      return array.indexOf(value);
    }
    for (var i = 0, len2 = array.length; i < len2; i++) {
      if (array[i] === value) {
        return i;
      }
    }
  }
  return -1;
}
function inherits(clazz, baseClazz) {
  var clazzPrototype = clazz.prototype;
  function F() {
  }
  F.prototype = baseClazz.prototype;
  clazz.prototype = new F();
  for (var prop in clazzPrototype) {
    if (clazzPrototype.hasOwnProperty(prop)) {
      clazz.prototype[prop] = clazzPrototype[prop];
    }
  }
  clazz.prototype.constructor = clazz;
  clazz.superClass = baseClazz;
}
function mixin(target, source, override) {
  target = "prototype" in target ? target.prototype : target;
  source = "prototype" in source ? source.prototype : source;
  if (Object.getOwnPropertyNames) {
    var keyList = Object.getOwnPropertyNames(source);
    for (var i = 0; i < keyList.length; i++) {
      var key = keyList[i];
      if (key !== "constructor") {
        if (override ? source[key] != null : target[key] == null) {
          target[key] = source[key];
        }
      }
    }
  } else {
    defaults(target, source, override);
  }
}
function isArrayLike(data) {
  if (!data) {
    return false;
  }
  if (typeof data === "string") {
    return false;
  }
  return typeof data.length === "number";
}
function each$4(arr, cb, context) {
  if (!(arr && cb)) {
    return;
  }
  if (arr.forEach && arr.forEach === nativeForEach) {
    arr.forEach(cb, context);
  } else if (arr.length === +arr.length) {
    for (var i = 0, len2 = arr.length; i < len2; i++) {
      cb.call(context, arr[i], i, arr);
    }
  } else {
    for (var key in arr) {
      if (arr.hasOwnProperty(key)) {
        cb.call(context, arr[key], key, arr);
      }
    }
  }
}
function map$1(arr, cb, context) {
  if (!arr) {
    return [];
  }
  if (!cb) {
    return slice(arr);
  }
  if (arr.map && arr.map === nativeMap) {
    return arr.map(cb, context);
  } else {
    var result = [];
    for (var i = 0, len2 = arr.length; i < len2; i++) {
      result.push(cb.call(context, arr[i], i, arr));
    }
    return result;
  }
}
function reduce(arr, cb, memo, context) {
  if (!(arr && cb)) {
    return;
  }
  for (var i = 0, len2 = arr.length; i < len2; i++) {
    memo = cb.call(context, memo, arr[i], i, arr);
  }
  return memo;
}
function filter(arr, cb, context) {
  if (!arr) {
    return [];
  }
  if (!cb) {
    return slice(arr);
  }
  if (arr.filter && arr.filter === nativeFilter) {
    return arr.filter(cb, context);
  } else {
    var result = [];
    for (var i = 0, len2 = arr.length; i < len2; i++) {
      if (cb.call(context, arr[i], i, arr)) {
        result.push(arr[i]);
      }
    }
    return result;
  }
}
function keys(obj) {
  if (!obj) {
    return [];
  }
  if (Object.keys) {
    return Object.keys(obj);
  }
  var keyList = [];
  for (var key in obj) {
    if (obj.hasOwnProperty(key)) {
      keyList.push(key);
    }
  }
  return keyList;
}
function bindPolyfill(func, context) {
  var args = [];
  for (var _i = 2; _i < arguments.length; _i++) {
    args[_i - 2] = arguments[_i];
  }
  return function() {
    return func.apply(context, args.concat(nativeSlice.call(arguments)));
  };
}
var bind$1 = protoFunction && isFunction(protoFunction.bind) ? protoFunction.call.bind(protoFunction.bind) : bindPolyfill;
function curry$1(func) {
  var args = [];
  for (var _i = 1; _i < arguments.length; _i++) {
    args[_i - 1] = arguments[_i];
  }
  return function() {
    return func.apply(this, args.concat(nativeSlice.call(arguments)));
  };
}
function isArray(value) {
  if (Array.isArray) {
    return Array.isArray(value);
  }
  return objToString.call(value) === "[object Array]";
}
function isFunction(value) {
  return typeof value === "function";
}
function isString(value) {
  return typeof value === "string";
}
function isStringSafe(value) {
  return objToString.call(value) === "[object String]";
}
function isNumber(value) {
  return typeof value === "number";
}
function isObject$2(value) {
  var type = typeof value;
  return type === "function" || !!value && type === "object";
}
function isBuiltInObject(value) {
  return !!BUILTIN_OBJECT[objToString.call(value)];
}
function isTypedArray(value) {
  return !!TYPED_ARRAY[objToString.call(value)];
}
function isDom(value) {
  return typeof value === "object" && typeof value.nodeType === "number" && typeof value.ownerDocument === "object";
}
function isGradientObject(value) {
  return value.colorStops != null;
}
function isImagePatternObject(value) {
  return value.image != null;
}
function eqNaN(value) {
  return value !== value;
}
function retrieve() {
  var args = [];
  for (var _i = 0; _i < arguments.length; _i++) {
    args[_i] = arguments[_i];
  }
  for (var i = 0, len2 = args.length; i < len2; i++) {
    if (args[i] != null) {
      return args[i];
    }
  }
}
function retrieve2(value0, value1) {
  return value0 != null ? value0 : value1;
}
function retrieve3(value0, value1, value2) {
  return value0 != null ? value0 : value1 != null ? value1 : value2;
}
function slice(arr) {
  var args = [];
  for (var _i = 1; _i < arguments.length; _i++) {
    args[_i - 1] = arguments[_i];
  }
  return nativeSlice.apply(arr, args);
}
function normalizeCssArray$1(val) {
  if (typeof val === "number") {
    return [val, val, val, val];
  }
  var len2 = val.length;
  if (len2 === 2) {
    return [val[0], val[1], val[0], val[1]];
  } else if (len2 === 3) {
    return [val[0], val[1], val[2], val[1]];
  }
  return val;
}
function assert(condition, message) {
  if (!condition) {
    throw new Error(message);
  }
}
function trim(str) {
  if (str == null) {
    return null;
  } else if (typeof str.trim === "function") {
    return str.trim();
  } else {
    return str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "");
  }
}
var primitiveKey = "__ec_primitive__";
function setAsPrimitive(obj) {
  obj[primitiveKey] = true;
}
function isPrimitive(obj) {
  return obj[primitiveKey];
}
var MapPolyfill = function() {
  function MapPolyfill2() {
    this.data = {};
  }
  MapPolyfill2.prototype["delete"] = function(key) {
    var existed = this.has(key);
    if (existed) {
      delete this.data[key];
    }
    return existed;
  };
  MapPolyfill2.prototype.has = function(key) {
    return this.data.hasOwnProperty(key);
  };
  MapPolyfill2.prototype.get = function(key) {
    return this.data[key];
  };
  MapPolyfill2.prototype.set = function(key, value) {
    this.data[key] = value;
    return this;
  };
  MapPolyfill2.prototype.keys = function() {
    return keys(this.data);
  };
  MapPolyfill2.prototype.forEach = function(callback) {
    var data = this.data;
    for (var key in data) {
      if (data.hasOwnProperty(key)) {
        callback(data[key], key);
      }
    }
  };
  return MapPolyfill2;
}();
var isNativeMapSupported = typeof Map === "function";
function maybeNativeMap() {
  return isNativeMapSupported ? /* @__PURE__ */ new Map() : new MapPolyfill();
}
var HashMap = function() {
  function HashMap2(obj) {
    var isArr = isArray(obj);
    this.data = maybeNativeMap();
    var thisMap = this;
    obj instanceof HashMap2 ? obj.each(visit) : obj && each$4(obj, visit);
    function visit(value, key) {
      isArr ? thisMap.set(value, key) : thisMap.set(key, value);
    }
  }
  HashMap2.prototype.hasKey = function(key) {
    return this.data.has(key);
  };
  HashMap2.prototype.get = function(key) {
    return this.data.get(key);
  };
  HashMap2.prototype.set = function(key, value) {
    this.data.set(key, value);
    return value;
  };
  HashMap2.prototype.each = function(cb, context) {
    this.data.forEach(function(value, key) {
      cb.call(context, value, key);
    });
  };
  HashMap2.prototype.keys = function() {
    var keys2 = this.data.keys();
    return isNativeMapSupported ? Array.from(keys2) : keys2;
  };
  HashMap2.prototype.removeKey = function(key) {
    this.data["delete"](key);
  };
  return HashMap2;
}();
function createHashMap(obj) {
  return new HashMap(obj);
}
function concatArray(a, b2) {
  var newArray = new a.constructor(a.length + b2.length);
  for (var i = 0; i < a.length; i++) {
    newArray[i] = a[i];
  }
  var offset = a.length;
  for (var i = 0; i < b2.length; i++) {
    newArray[i + offset] = b2[i];
  }
  return newArray;
}
function createObject(proto, properties) {
  var obj;
  if (Object.create) {
    obj = Object.create(proto);
  } else {
    var StyleCtor = function() {
    };
    StyleCtor.prototype = proto;
    obj = new StyleCtor();
  }
  if (properties) {
    extend(obj, properties);
  }
  return obj;
}
function disableUserSelect(dom) {
  var domStyle = dom.style;
  domStyle.webkitUserSelect = "none";
  domStyle.userSelect = "none";
  domStyle.webkitTapHighlightColor = "rgba(0,0,0,0)";
  domStyle["-webkit-touch-callout"] = "none";
}
function hasOwn(own, prop) {
  return own.hasOwnProperty(prop);
}
function noop() {
}
var RADIAN_TO_DEGREE = 180 / Math.PI;
function create$1(x2, y2) {
  if (x2 == null) {
    x2 = 0;
  }
  if (y2 == null) {
    y2 = 0;
  }
  return [x2, y2];
}
function clone$1(v) {
  return [v[0], v[1]];
}
function add(out2, v1, v2) {
  out2[0] = v1[0] + v2[0];
  out2[1] = v1[1] + v2[1];
  return out2;
}
function sub(out2, v1, v2) {
  out2[0] = v1[0] - v2[0];
  out2[1] = v1[1] - v2[1];
  return out2;
}
function len(v) {
  return Math.sqrt(lenSquare(v));
}
function lenSquare(v) {
  return v[0] * v[0] + v[1] * v[1];
}
function scale$1(out2, v, s) {
  out2[0] = v[0] * s;
  out2[1] = v[1] * s;
  return out2;
}
function normalize(out2, v) {
  var d = len(v);
  if (d === 0) {
    out2[0] = 0;
    out2[1] = 0;
  } else {
    out2[0] = v[0] / d;
    out2[1] = v[1] / d;
  }
  return out2;
}
function distance(v1, v2) {
  return Math.sqrt((v1[0] - v2[0]) * (v1[0] - v2[0]) + (v1[1] - v2[1]) * (v1[1] - v2[1]));
}
var dist$1 = distance;
function distanceSquare(v1, v2) {
  return (v1[0] - v2[0]) * (v1[0] - v2[0]) + (v1[1] - v2[1]) * (v1[1] - v2[1]);
}
var distSquare = distanceSquare;
function lerp(out2, v1, v2, t) {
  out2[0] = v1[0] + t * (v2[0] - v1[0]);
  out2[1] = v1[1] + t * (v2[1] - v1[1]);
  return out2;
}
function applyTransform$1(out2, v, m2) {
  var x2 = v[0];
  var y2 = v[1];
  out2[0] = m2[0] * x2 + m2[2] * y2 + m2[4];
  out2[1] = m2[1] * x2 + m2[3] * y2 + m2[5];
  return out2;
}
function min$1(out2, v1, v2) {
  out2[0] = Math.min(v1[0], v2[0]);
  out2[1] = Math.min(v1[1], v2[1]);
  return out2;
}
function max$1(out2, v1, v2) {
  out2[0] = Math.max(v1[0], v2[0]);
  out2[1] = Math.max(v1[1], v2[1]);
  return out2;
}
var Param = function() {
  function Param2(target, e2) {
    this.target = target;
    this.topTarget = e2 && e2.topTarget;
  }
  return Param2;
}();
var Draggable = function() {
  function Draggable2(handler) {
    this.handler = handler;
    handler.on("mousedown", this._dragStart, this);
    handler.on("mousemove", this._drag, this);
    handler.on("mouseup", this._dragEnd, this);
  }
  Draggable2.prototype._dragStart = function(e2) {
    var draggingTarget = e2.target;
    while (draggingTarget && !draggingTarget.draggable) {
      draggingTarget = draggingTarget.parent || draggingTarget.__hostTarget;
    }
    if (draggingTarget) {
      this._draggingTarget = draggingTarget;
      draggingTarget.dragging = true;
      this._x = e2.offsetX;
      this._y = e2.offsetY;
      this.handler.dispatchToElement(new Param(draggingTarget, e2), "dragstart", e2.event);
    }
  };
  Draggable2.prototype._drag = function(e2) {
    var draggingTarget = this._draggingTarget;
    if (draggingTarget) {
      var x2 = e2.offsetX;
      var y2 = e2.offsetY;
      var dx = x2 - this._x;
      var dy = y2 - this._y;
      this._x = x2;
      this._y = y2;
      draggingTarget.drift(dx, dy, e2);
      this.handler.dispatchToElement(new Param(draggingTarget, e2), "drag", e2.event);
      var dropTarget = this.handler.findHover(x2, y2, draggingTarget).target;
      var lastDropTarget = this._dropTarget;
      this._dropTarget = dropTarget;
      if (draggingTarget !== dropTarget) {
        if (lastDropTarget && dropTarget !== lastDropTarget) {
          this.handler.dispatchToElement(new Param(lastDropTarget, e2), "dragleave", e2.event);
        }
        if (dropTarget && dropTarget !== lastDropTarget) {
          this.handler.dispatchToElement(new Param(dropTarget, e2), "dragenter", e2.event);
        }
      }
    }
  };
  Draggable2.prototype._dragEnd = function(e2) {
    var draggingTarget = this._draggingTarget;
    if (draggingTarget) {
      draggingTarget.dragging = false;
    }
    this.handler.dispatchToElement(new Param(draggingTarget, e2), "dragend", e2.event);
    if (this._dropTarget) {
      this.handler.dispatchToElement(new Param(this._dropTarget, e2), "drop", e2.event);
    }
    this._draggingTarget = null;
    this._dropTarget = null;
  };
  return Draggable2;
}();
var Draggable$1 = Draggable;
var Eventful = function() {
  function Eventful2(eventProcessors) {
    if (eventProcessors) {
      this._$eventProcessor = eventProcessors;
    }
  }
  Eventful2.prototype.on = function(event, query, handler, context) {
    if (!this._$handlers) {
      this._$handlers = {};
    }
    var _h = this._$handlers;
    if (typeof query === "function") {
      context = handler;
      handler = query;
      query = null;
    }
    if (!handler || !event) {
      return this;
    }
    var eventProcessor = this._$eventProcessor;
    if (query != null && eventProcessor && eventProcessor.normalizeQuery) {
      query = eventProcessor.normalizeQuery(query);
    }
    if (!_h[event]) {
      _h[event] = [];
    }
    for (var i = 0; i < _h[event].length; i++) {
      if (_h[event][i].h === handler) {
        return this;
      }
    }
    var wrap = {
      h: handler,
      query,
      ctx: context || this,
      callAtLast: handler.zrEventfulCallAtLast
    };
    var lastIndex = _h[event].length - 1;
    var lastWrap = _h[event][lastIndex];
    lastWrap && lastWrap.callAtLast ? _h[event].splice(lastIndex, 0, wrap) : _h[event].push(wrap);
    return this;
  };
  Eventful2.prototype.isSilent = function(eventName) {
    var _h = this._$handlers;
    return !_h || !_h[eventName] || !_h[eventName].length;
  };
  Eventful2.prototype.off = function(eventType, handler) {
    var _h = this._$handlers;
    if (!_h) {
      return this;
    }
    if (!eventType) {
      this._$handlers = {};
      return this;
    }
    if (handler) {
      if (_h[eventType]) {
        var newList = [];
        for (var i = 0, l = _h[eventType].length; i < l; i++) {
          if (_h[eventType][i].h !== handler) {
            newList.push(_h[eventType][i]);
          }
        }
        _h[eventType] = newList;
      }
      if (_h[eventType] && _h[eventType].length === 0) {
        delete _h[eventType];
      }
    } else {
      delete _h[eventType];
    }
    return this;
  };
  Eventful2.prototype.trigger = function(eventType) {
    var args = [];
    for (var _i = 1; _i < arguments.length; _i++) {
      args[_i - 1] = arguments[_i];
    }
    if (!this._$handlers) {
      return this;
    }
    var _h = this._$handlers[eventType];
    var eventProcessor = this._$eventProcessor;
    if (_h) {
      var argLen = args.length;
      var len2 = _h.length;
      for (var i = 0; i < len2; i++) {
        var hItem = _h[i];
        if (eventProcessor && eventProcessor.filter && hItem.query != null && !eventProcessor.filter(eventType, hItem.query)) {
          continue;
        }
        switch (argLen) {
          case 0:
            hItem.h.call(hItem.ctx);
            break;
          case 1:
            hItem.h.call(hItem.ctx, args[0]);
            break;
          case 2:
            hItem.h.call(hItem.ctx, args[0], args[1]);
            break;
          default:
            hItem.h.apply(hItem.ctx, args);
            break;
        }
      }
    }
    eventProcessor && eventProcessor.afterTrigger && eventProcessor.afterTrigger(eventType);
    return this;
  };
  Eventful2.prototype.triggerWithContext = function(type) {
    var args = [];
    for (var _i = 1; _i < arguments.length; _i++) {
      args[_i - 1] = arguments[_i];
    }
    if (!this._$handlers) {
      return this;
    }
    var _h = this._$handlers[type];
    var eventProcessor = this._$eventProcessor;
    if (_h) {
      var argLen = args.length;
      var ctx = args[argLen - 1];
      var len2 = _h.length;
      for (var i = 0; i < len2; i++) {
        var hItem = _h[i];
        if (eventProcessor && eventProcessor.filter && hItem.query != null && !eventProcessor.filter(type, hItem.query)) {
          continue;
        }
        switch (argLen) {
          case 0:
            hItem.h.call(ctx);
            break;
          case 1:
            hItem.h.call(ctx, args[0]);
            break;
          case 2:
            hItem.h.call(ctx, args[0], args[1]);
            break;
          default:
            hItem.h.apply(ctx, args.slice(1, argLen - 1));
            break;
        }
      }
    }
    eventProcessor && eventProcessor.afterTrigger && eventProcessor.afterTrigger(type);
    return this;
  };
  return Eventful2;
}();
var Eventful$1 = Eventful;
var LN2 = Math.log(2);
function determinant(rows, rank, rowStart, rowMask, colMask, detCache) {
  var cacheKey = rowMask + "-" + colMask;
  var fullRank = rows.length;
  if (detCache.hasOwnProperty(cacheKey)) {
    return detCache[cacheKey];
  }
  if (rank === 1) {
    var colStart = Math.round(Math.log((1 << fullRank) - 1 & ~colMask) / LN2);
    return rows[rowStart][colStart];
  }
  var subRowMask = rowMask | 1 << rowStart;
  var subRowStart = rowStart + 1;
  while (rowMask & 1 << subRowStart) {
    subRowStart++;
  }
  var sum = 0;
  for (var j2 = 0, colLocalIdx = 0; j2 < fullRank; j2++) {
    var colTag = 1 << j2;
    if (!(colTag & colMask)) {
      sum += (colLocalIdx % 2 ? -1 : 1) * rows[rowStart][j2] * determinant(rows, rank - 1, subRowStart, subRowMask, colMask | colTag, detCache);
      colLocalIdx++;
    }
  }
  detCache[cacheKey] = sum;
  return sum;
}
function buildTransformer(src, dest) {
  var mA = [
    [src[0], src[1], 1, 0, 0, 0, -dest[0] * src[0], -dest[0] * src[1]],
    [0, 0, 0, src[0], src[1], 1, -dest[1] * src[0], -dest[1] * src[1]],
    [src[2], src[3], 1, 0, 0, 0, -dest[2] * src[2], -dest[2] * src[3]],
    [0, 0, 0, src[2], src[3], 1, -dest[3] * src[2], -dest[3] * src[3]],
    [src[4], src[5], 1, 0, 0, 0, -dest[4] * src[4], -dest[4] * src[5]],
    [0, 0, 0, src[4], src[5], 1, -dest[5] * src[4], -dest[5] * src[5]],
    [src[6], src[7], 1, 0, 0, 0, -dest[6] * src[6], -dest[6] * src[7]],
    [0, 0, 0, src[6], src[7], 1, -dest[7] * src[6], -dest[7] * src[7]]
  ];
  var detCache = {};
  var det = determinant(mA, 8, 0, 0, 0, detCache);
  if (det === 0) {
    return;
  }
  var vh = [];
  for (var i = 0; i < 8; i++) {
    for (var j2 = 0; j2 < 8; j2++) {
      vh[j2] == null && (vh[j2] = 0);
      vh[j2] += ((i + j2) % 2 ? -1 : 1) * determinant(mA, 7, i === 0 ? 1 : 0, 1 << i, 1 << j2, detCache) / det * dest[i];
    }
  }
  return function(out2, srcPointX, srcPointY) {
    var pk = srcPointX * vh[6] + srcPointY * vh[7] + 1;
    out2[0] = (srcPointX * vh[0] + srcPointY * vh[1] + vh[2]) / pk;
    out2[1] = (srcPointX * vh[3] + srcPointY * vh[4] + vh[5]) / pk;
  };
}
var EVENT_SAVED_PROP = "___zrEVENTSAVED";
var _calcOut$1 = [];
function transformLocalCoord(out2, elFrom, elTarget, inX, inY) {
  return transformCoordWithViewport(_calcOut$1, elFrom, inX, inY, true) && transformCoordWithViewport(out2, elTarget, _calcOut$1[0], _calcOut$1[1]);
}
function transformCoordWithViewport(out2, el, inX, inY, inverse) {
  if (el.getBoundingClientRect && env$1.domSupported && !isCanvasEl(el)) {
    var saved = el[EVENT_SAVED_PROP] || (el[EVENT_SAVED_PROP] = {});
    var markers = prepareCoordMarkers(el, saved);
    var transformer = preparePointerTransformer(markers, saved, inverse);
    if (transformer) {
      transformer(out2, inX, inY);
      return true;
    }
  }
  return false;
}
function prepareCoordMarkers(el, saved) {
  var markers = saved.markers;
  if (markers) {
    return markers;
  }
  markers = saved.markers = [];
  var propLR = ["left", "right"];
  var propTB = ["top", "bottom"];
  for (var i = 0; i < 4; i++) {
    var marker = document.createElement("div");
    var stl = marker.style;
    var idxLR = i % 2;
    var idxTB = (i >> 1) % 2;
    stl.cssText = [
      "position: absolute",
      "visibility: hidden",
      "padding: 0",
      "margin: 0",
      "border-width: 0",
      "user-select: none",
      "width:0",
      "height:0",
      propLR[idxLR] + ":0",
      propTB[idxTB] + ":0",
      propLR[1 - idxLR] + ":auto",
      propTB[1 - idxTB] + ":auto",
      ""
    ].join("!important;");
    el.appendChild(marker);
    markers.push(marker);
  }
  return markers;
}
function preparePointerTransformer(markers, saved, inverse) {
  var transformerName = inverse ? "invTrans" : "trans";
  var transformer = saved[transformerName];
  var oldSrcCoords = saved.srcCoords;
  var srcCoords = [];
  var destCoords = [];
  var oldCoordTheSame = true;
  for (var i = 0; i < 4; i++) {
    var rect = markers[i].getBoundingClientRect();
    var ii = 2 * i;
    var x2 = rect.left;
    var y2 = rect.top;
    srcCoords.push(x2, y2);
    oldCoordTheSame = oldCoordTheSame && oldSrcCoords && x2 === oldSrcCoords[ii] && y2 === oldSrcCoords[ii + 1];
    destCoords.push(markers[i].offsetLeft, markers[i].offsetTop);
  }
  return oldCoordTheSame && transformer ? transformer : (saved.srcCoords = srcCoords, saved[transformerName] = inverse ? buildTransformer(destCoords, srcCoords) : buildTransformer(srcCoords, destCoords));
}
function isCanvasEl(el) {
  return el.nodeName.toUpperCase() === "CANVAS";
}
var replaceReg = /([&<>"'])/g;
var replaceMap = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "'": "&#39;"
};
function encodeHTML(source) {
  return source == null ? "" : (source + "").replace(replaceReg, function(str, c) {
    return replaceMap[c];
  });
}
var MOUSE_EVENT_REG = /^(?:mouse|pointer|contextmenu|drag|drop)|click/;
var _calcOut = [];
var firefoxNotSupportOffsetXY = env$1.browser.firefox && +env$1.browser.version.split(".")[0] < 39;
function clientToLocal(el, e2, out2, calculate) {
  out2 = out2 || {};
  if (calculate) {
    calculateZrXY(el, e2, out2);
  } else if (firefoxNotSupportOffsetXY && e2.layerX != null && e2.layerX !== e2.offsetX) {
    out2.zrX = e2.layerX;
    out2.zrY = e2.layerY;
  } else if (e2.offsetX != null) {
    out2.zrX = e2.offsetX;
    out2.zrY = e2.offsetY;
  } else {
    calculateZrXY(el, e2, out2);
  }
  return out2;
}
function calculateZrXY(el, e2, out2) {
  if (env$1.domSupported && el.getBoundingClientRect) {
    var ex = e2.clientX;
    var ey = e2.clientY;
    if (isCanvasEl(el)) {
      var box2 = el.getBoundingClientRect();
      out2.zrX = ex - box2.left;
      out2.zrY = ey - box2.top;
      return;
    } else {
      if (transformCoordWithViewport(_calcOut, el, ex, ey)) {
        out2.zrX = _calcOut[0];
        out2.zrY = _calcOut[1];
        return;
      }
    }
  }
  out2.zrX = out2.zrY = 0;
}
function getNativeEvent(e2) {
  return e2 || window.event;
}
function normalizeEvent(el, e2, calculate) {
  e2 = getNativeEvent(e2);
  if (e2.zrX != null) {
    return e2;
  }
  var eventType = e2.type;
  var isTouch = eventType && eventType.indexOf("touch") >= 0;
  if (!isTouch) {
    clientToLocal(el, e2, e2, calculate);
    var wheelDelta = getWheelDeltaMayPolyfill(e2);
    e2.zrDelta = wheelDelta ? wheelDelta / 120 : -(e2.detail || 0) / 3;
  } else {
    var touch = eventType !== "touchend" ? e2.targetTouches[0] : e2.changedTouches[0];
    touch && clientToLocal(el, touch, e2, calculate);
  }
  var button = e2.button;
  if (e2.which == null && button !== void 0 && MOUSE_EVENT_REG.test(e2.type)) {
    e2.which = button & 1 ? 1 : button & 2 ? 3 : button & 4 ? 2 : 0;
  }
  return e2;
}
function getWheelDeltaMayPolyfill(e2) {
  var rawWheelDelta = e2.wheelDelta;
  if (rawWheelDelta) {
    return rawWheelDelta;
  }
  var deltaX = e2.deltaX;
  var deltaY = e2.deltaY;
  if (deltaX == null || deltaY == null) {
    return rawWheelDelta;
  }
  var delta = deltaY !== 0 ? Math.abs(deltaY) : Math.abs(deltaX);
  var sign = deltaY > 0 ? -1 : deltaY < 0 ? 1 : deltaX > 0 ? -1 : 1;
  return 3 * delta * sign;
}
function addEventListener(el, name, handler, opt) {
  el.addEventListener(name, handler, opt);
}
function removeEventListener(el, name, handler, opt) {
  el.removeEventListener(name, handler, opt);
}
var stop = function(e2) {
  e2.preventDefault();
  e2.stopPropagation();
  e2.cancelBubble = true;
};
var GestureMgr = function() {
  function GestureMgr2() {
    this._track = [];
  }
  GestureMgr2.prototype.recognize = function(event, target, root) {
    this._doTrack(event, target, root);
    return this._recognize(event);
  };
  GestureMgr2.prototype.clear = function() {
    this._track.length = 0;
    return this;
  };
  GestureMgr2.prototype._doTrack = function(event, target, root) {
    var touches = event.touches;
    if (!touches) {
      return;
    }
    var trackItem = {
      points: [],
      touches: [],
      target,
      event
    };
    for (var i = 0, len2 = touches.length; i < len2; i++) {
      var touch = touches[i];
      var pos = clientToLocal(root, touch, {});
      trackItem.points.push([pos.zrX, pos.zrY]);
      trackItem.touches.push(touch);
    }
    this._track.push(trackItem);
  };
  GestureMgr2.prototype._recognize = function(event) {
    for (var eventName in recognizers) {
      if (recognizers.hasOwnProperty(eventName)) {
        var gestureInfo = recognizers[eventName](this._track, event);
        if (gestureInfo) {
          return gestureInfo;
        }
      }
    }
  };
  return GestureMgr2;
}();
function dist(pointPair) {
  var dx = pointPair[1][0] - pointPair[0][0];
  var dy = pointPair[1][1] - pointPair[0][1];
  return Math.sqrt(dx * dx + dy * dy);
}
function center(pointPair) {
  return [
    (pointPair[0][0] + pointPair[1][0]) / 2,
    (pointPair[0][1] + pointPair[1][1]) / 2
  ];
}
var recognizers = {
  pinch: function(tracks, event) {
    var trackLen = tracks.length;
    if (!trackLen) {
      return;
    }
    var pinchEnd = (tracks[trackLen - 1] || {}).points;
    var pinchPre = (tracks[trackLen - 2] || {}).points || pinchEnd;
    if (pinchPre && pinchPre.length > 1 && pinchEnd && pinchEnd.length > 1) {
      var pinchScale = dist(pinchEnd) / dist(pinchPre);
      !isFinite(pinchScale) && (pinchScale = 1);
      event.pinchScale = pinchScale;
      var pinchCenter = center(pinchEnd);
      event.pinchX = pinchCenter[0];
      event.pinchY = pinchCenter[1];
      return {
        type: "pinch",
        target: tracks[0].target,
        event
      };
    }
  }
};
function create() {
  return [1, 0, 0, 1, 0, 0];
}
function identity(out2) {
  out2[0] = 1;
  out2[1] = 0;
  out2[2] = 0;
  out2[3] = 1;
  out2[4] = 0;
  out2[5] = 0;
  return out2;
}
function copy(out2, m2) {
  out2[0] = m2[0];
  out2[1] = m2[1];
  out2[2] = m2[2];
  out2[3] = m2[3];
  out2[4] = m2[4];
  out2[5] = m2[5];
  return out2;
}
function mul(out2, m1, m2) {
  var out0 = m1[0] * m2[0] + m1[2] * m2[1];
  var out1 = m1[1] * m2[0] + m1[3] * m2[1];
  var out22 = m1[0] * m2[2] + m1[2] * m2[3];
  var out3 = m1[1] * m2[2] + m1[3] * m2[3];
  var out4 = m1[0] * m2[4] + m1[2] * m2[5] + m1[4];
  var out5 = m1[1] * m2[4] + m1[3] * m2[5] + m1[5];
  out2[0] = out0;
  out2[1] = out1;
  out2[2] = out22;
  out2[3] = out3;
  out2[4] = out4;
  out2[5] = out5;
  return out2;
}
function translate(out2, a, v) {
  out2[0] = a[0];
  out2[1] = a[1];
  out2[2] = a[2];
  out2[3] = a[3];
  out2[4] = a[4] + v[0];
  out2[5] = a[5] + v[1];
  return out2;
}
function rotate(out2, a, rad) {
  var aa = a[0];
  var ac = a[2];
  var atx = a[4];
  var ab = a[1];
  var ad = a[3];
  var aty = a[5];
  var st = Math.sin(rad);
  var ct = Math.cos(rad);
  out2[0] = aa * ct + ab * st;
  out2[1] = -aa * st + ab * ct;
  out2[2] = ac * ct + ad * st;
  out2[3] = -ac * st + ct * ad;
  out2[4] = ct * atx + st * aty;
  out2[5] = ct * aty - st * atx;
  return out2;
}
function scale(out2, a, v) {
  var vx = v[0];
  var vy = v[1];
  out2[0] = a[0] * vx;
  out2[1] = a[1] * vy;
  out2[2] = a[2] * vx;
  out2[3] = a[3] * vy;
  out2[4] = a[4] * vx;
  out2[5] = a[5] * vy;
  return out2;
}
function invert(out2, a) {
  var aa = a[0];
  var ac = a[2];
  var atx = a[4];
  var ab = a[1];
  var ad = a[3];
  var aty = a[5];
  var det = aa * ad - ab * ac;
  if (!det) {
    return null;
  }
  det = 1 / det;
  out2[0] = ad * det;
  out2[1] = -ab * det;
  out2[2] = -ac * det;
  out2[3] = aa * det;
  out2[4] = (ac * aty - ad * atx) * det;
  out2[5] = (ab * atx - aa * aty) * det;
  return out2;
}
var Point = function() {
  function Point2(x2, y2) {
    this.x = x2 || 0;
    this.y = y2 || 0;
  }
  Point2.prototype.copy = function(other) {
    this.x = other.x;
    this.y = other.y;
    return this;
  };
  Point2.prototype.clone = function() {
    return new Point2(this.x, this.y);
  };
  Point2.prototype.set = function(x2, y2) {
    this.x = x2;
    this.y = y2;
    return this;
  };
  Point2.prototype.equal = function(other) {
    return other.x === this.x && other.y === this.y;
  };
  Point2.prototype.add = function(other) {
    this.x += other.x;
    this.y += other.y;
    return this;
  };
  Point2.prototype.scale = function(scalar) {
    this.x *= scalar;
    this.y *= scalar;
  };
  Point2.prototype.scaleAndAdd = function(other, scalar) {
    this.x += other.x * scalar;
    this.y += other.y * scalar;
  };
  Point2.prototype.sub = function(other) {
    this.x -= other.x;
    this.y -= other.y;
    return this;
  };
  Point2.prototype.dot = function(other) {
    return this.x * other.x + this.y * other.y;
  };
  Point2.prototype.len = function() {
    return Math.sqrt(this.x * this.x + this.y * this.y);
  };
  Point2.prototype.lenSquare = function() {
    return this.x * this.x + this.y * this.y;
  };
  Point2.prototype.normalize = function() {
    var len2 = this.len();
    this.x /= len2;
    this.y /= len2;
    return this;
  };
  Point2.prototype.distance = function(other) {
    var dx = this.x - other.x;
    var dy = this.y - other.y;
    return Math.sqrt(dx * dx + dy * dy);
  };
  Point2.prototype.distanceSquare = function(other) {
    var dx = this.x - other.x;
    var dy = this.y - other.y;
    return dx * dx + dy * dy;
  };
  Point2.prototype.negate = function() {
    this.x = -this.x;
    this.y = -this.y;
    return this;
  };
  Point2.prototype.transform = function(m2) {
    if (!m2) {
      return;
    }
    var x2 = this.x;
    var y2 = this.y;
    this.x = m2[0] * x2 + m2[2] * y2 + m2[4];
    this.y = m2[1] * x2 + m2[3] * y2 + m2[5];
    return this;
  };
  Point2.prototype.toArray = function(out2) {
    out2[0] = this.x;
    out2[1] = this.y;
    return out2;
  };
  Point2.prototype.fromArray = function(input) {
    this.x = input[0];
    this.y = input[1];
  };
  Point2.set = function(p, x2, y2) {
    p.x = x2;
    p.y = y2;
  };
  Point2.copy = function(p, p2) {
    p.x = p2.x;
    p.y = p2.y;
  };
  Point2.len = function(p) {
    return Math.sqrt(p.x * p.x + p.y * p.y);
  };
  Point2.lenSquare = function(p) {
    return p.x * p.x + p.y * p.y;
  };
  Point2.dot = function(p0, p1) {
    return p0.x * p1.x + p0.y * p1.y;
  };
  Point2.add = function(out2, p0, p1) {
    out2.x = p0.x + p1.x;
    out2.y = p0.y + p1.y;
  };
  Point2.sub = function(out2, p0, p1) {
    out2.x = p0.x - p1.x;
    out2.y = p0.y - p1.y;
  };
  Point2.scale = function(out2, p0, scalar) {
    out2.x = p0.x * scalar;
    out2.y = p0.y * scalar;
  };
  Point2.scaleAndAdd = function(out2, p0, p1, scalar) {
    out2.x = p0.x + p1.x * scalar;
    out2.y = p0.y + p1.y * scalar;
  };
  Point2.lerp = function(out2, p0, p1, t) {
    var onet = 1 - t;
    out2.x = onet * p0.x + t * p1.x;
    out2.y = onet * p0.y + t * p1.y;
  };
  return Point2;
}();
var Point$1 = Point;
var mathMin$4 = Math.min;
var mathMax$4 = Math.max;
var lt = new Point$1();
var rb = new Point$1();
var lb = new Point$1();
var rt = new Point$1();
var minTv$1 = new Point$1();
var maxTv$1 = new Point$1();
var BoundingRect = function() {
  function BoundingRect2(x2, y2, width, height) {
    if (width < 0) {
      x2 = x2 + width;
      width = -width;
    }
    if (height < 0) {
      y2 = y2 + height;
      height = -height;
    }
    this.x = x2;
    this.y = y2;
    this.width = width;
    this.height = height;
  }
  BoundingRect2.prototype.union = function(other) {
    var x2 = mathMin$4(other.x, this.x);
    var y2 = mathMin$4(other.y, this.y);
    if (isFinite(this.x) && isFinite(this.width)) {
      this.width = mathMax$4(other.x + other.width, this.x + this.width) - x2;
    } else {
      this.width = other.width;
    }
    if (isFinite(this.y) && isFinite(this.height)) {
      this.height = mathMax$4(other.y + other.height, this.y + this.height) - y2;
    } else {
      this.height = other.height;
    }
    this.x = x2;
    this.y = y2;
  };
  BoundingRect2.prototype.applyTransform = function(m2) {
    BoundingRect2.applyTransform(this, this, m2);
  };
  BoundingRect2.prototype.calculateTransform = function(b2) {
    var a = this;
    var sx = b2.width / a.width;
    var sy = b2.height / a.height;
    var m2 = create();
    translate(m2, m2, [-a.x, -a.y]);
    scale(m2, m2, [sx, sy]);
    translate(m2, m2, [b2.x, b2.y]);
    return m2;
  };
  BoundingRect2.prototype.intersect = function(b2, mtv) {
    if (!b2) {
      return false;
    }
    if (!(b2 instanceof BoundingRect2)) {
      b2 = BoundingRect2.create(b2);
    }
    var a = this;
    var ax0 = a.x;
    var ax1 = a.x + a.width;
    var ay0 = a.y;
    var ay1 = a.y + a.height;
    var bx0 = b2.x;
    var bx1 = b2.x + b2.width;
    var by0 = b2.y;
    var by1 = b2.y + b2.height;
    var overlap = !(ax1 < bx0 || bx1 < ax0 || ay1 < by0 || by1 < ay0);
    if (mtv) {
      var dMin = Infinity;
      var dMax = 0;
      var d0 = Math.abs(ax1 - bx0);
      var d1 = Math.abs(bx1 - ax0);
      var d2 = Math.abs(ay1 - by0);
      var d3 = Math.abs(by1 - ay0);
      var dx = Math.min(d0, d1);
      var dy = Math.min(d2, d3);
      if (ax1 < bx0 || bx1 < ax0) {
        if (dx > dMax) {
          dMax = dx;
          if (d0 < d1) {
            Point$1.set(maxTv$1, -d0, 0);
          } else {
            Point$1.set(maxTv$1, d1, 0);
          }
        }
      } else {
        if (dx < dMin) {
          dMin = dx;
          if (d0 < d1) {
            Point$1.set(minTv$1, d0, 0);
          } else {
            Point$1.set(minTv$1, -d1, 0);
          }
        }
      }
      if (ay1 < by0 || by1 < ay0) {
        if (dy > dMax) {
          dMax = dy;
          if (d2 < d3) {
            Point$1.set(maxTv$1, 0, -d2);
          } else {
            Point$1.set(maxTv$1, 0, d3);
          }
        }
      } else {
        if (dx < dMin) {
          dMin = dx;
          if (d2 < d3) {
            Point$1.set(minTv$1, 0, d2);
          } else {
            Point$1.set(minTv$1, 0, -d3);
          }
        }
      }
    }
    if (mtv) {
      Point$1.copy(mtv, overlap ? minTv$1 : maxTv$1);
    }
    return overlap;
  };
  BoundingRect2.prototype.contain = function(x2, y2) {
    var rect = this;
    return x2 >= rect.x && x2 <= rect.x + rect.width && y2 >= rect.y && y2 <= rect.y + rect.height;
  };
  BoundingRect2.prototype.clone = function() {
    return new BoundingRect2(this.x, this.y, this.width, this.height);
  };
  BoundingRect2.prototype.copy = function(other) {
    BoundingRect2.copy(this, other);
  };
  BoundingRect2.prototype.plain = function() {
    return {
      x: this.x,
      y: this.y,
      width: this.width,
      height: this.height
    };
  };
  BoundingRect2.prototype.isFinite = function() {
    return isFinite(this.x) && isFinite(this.y) && isFinite(this.width) && isFinite(this.height);
  };
  BoundingRect2.prototype.isZero = function() {
    return this.width === 0 || this.height === 0;
  };
  BoundingRect2.create = function(rect) {
    return new BoundingRect2(rect.x, rect.y, rect.width, rect.height);
  };
  BoundingRect2.copy = function(target, source) {
    target.x = source.x;
    target.y = source.y;
    target.width = source.width;
    target.height = source.height;
  };
  BoundingRect2.applyTransform = function(target, source, m2) {
    if (!m2) {
      if (target !== source) {
        BoundingRect2.copy(target, source);
      }
      return;
    }
    if (m2[1] < 1e-5 && m2[1] > -1e-5 && m2[2] < 1e-5 && m2[2] > -1e-5) {
      var sx = m2[0];
      var sy = m2[3];
      var tx = m2[4];
      var ty = m2[5];
      target.x = source.x * sx + tx;
      target.y = source.y * sy + ty;
      target.width = source.width * sx;
      target.height = source.height * sy;
      if (target.width < 0) {
        target.x += target.width;
        target.width = -target.width;
      }
      if (target.height < 0) {
        target.y += target.height;
        target.height = -target.height;
      }
      return;
    }
    lt.x = lb.x = source.x;
    lt.y = rt.y = source.y;
    rb.x = rt.x = source.x + source.width;
    rb.y = lb.y = source.y + source.height;
    lt.transform(m2);
    rt.transform(m2);
    rb.transform(m2);
    lb.transform(m2);
    target.x = mathMin$4(lt.x, rb.x, lb.x, rt.x);
    target.y = mathMin$4(lt.y, rb.y, lb.y, rt.y);
    var maxX = mathMax$4(lt.x, rb.x, lb.x, rt.x);
    var maxY = mathMax$4(lt.y, rb.y, lb.y, rt.y);
    target.width = maxX - target.x;
    target.height = maxY - target.y;
  };
  return BoundingRect2;
}();
var BoundingRect$1 = BoundingRect;
var SILENT = "silent";
function makeEventPacket(eveType, targetInfo, event) {
  return {
    type: eveType,
    event,
    target: targetInfo.target,
    topTarget: targetInfo.topTarget,
    cancelBubble: false,
    offsetX: event.zrX,
    offsetY: event.zrY,
    gestureEvent: event.gestureEvent,
    pinchX: event.pinchX,
    pinchY: event.pinchY,
    pinchScale: event.pinchScale,
    wheelDelta: event.zrDelta,
    zrByTouch: event.zrByTouch,
    which: event.which,
    stop: stopEvent
  };
}
function stopEvent() {
  stop(this.event);
}
var EmptyProxy = function(_super) {
  __extends(EmptyProxy2, _super);
  function EmptyProxy2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.handler = null;
    return _this;
  }
  EmptyProxy2.prototype.dispose = function() {
  };
  EmptyProxy2.prototype.setCursor = function() {
  };
  return EmptyProxy2;
}(Eventful$1);
var HoveredResult = function() {
  function HoveredResult2(x2, y2) {
    this.x = x2;
    this.y = y2;
  }
  return HoveredResult2;
}();
var handlerNames = [
  "click",
  "dblclick",
  "mousewheel",
  "mouseout",
  "mouseup",
  "mousedown",
  "mousemove",
  "contextmenu"
];
var tmpRect$1 = new BoundingRect$1(0, 0, 0, 0);
var Handler = function(_super) {
  __extends(Handler2, _super);
  function Handler2(storage, painter, proxy, painterRoot, pointerSize) {
    var _this = _super.call(this) || this;
    _this._hovered = new HoveredResult(0, 0);
    _this.storage = storage;
    _this.painter = painter;
    _this.painterRoot = painterRoot;
    _this._pointerSize = pointerSize;
    proxy = proxy || new EmptyProxy();
    _this.proxy = null;
    _this.setHandlerProxy(proxy);
    _this._draggingMgr = new Draggable$1(_this);
    return _this;
  }
  Handler2.prototype.setHandlerProxy = function(proxy) {
    if (this.proxy) {
      this.proxy.dispose();
    }
    if (proxy) {
      each$4(handlerNames, function(name) {
        proxy.on && proxy.on(name, this[name], this);
      }, this);
      proxy.handler = this;
    }
    this.proxy = proxy;
  };
  Handler2.prototype.mousemove = function(event) {
    var x2 = event.zrX;
    var y2 = event.zrY;
    var isOutside = isOutsideBoundary(this, x2, y2);
    var lastHovered = this._hovered;
    var lastHoveredTarget = lastHovered.target;
    if (lastHoveredTarget && !lastHoveredTarget.__zr) {
      lastHovered = this.findHover(lastHovered.x, lastHovered.y);
      lastHoveredTarget = lastHovered.target;
    }
    var hovered = this._hovered = isOutside ? new HoveredResult(x2, y2) : this.findHover(x2, y2);
    var hoveredTarget = hovered.target;
    var proxy = this.proxy;
    proxy.setCursor && proxy.setCursor(hoveredTarget ? hoveredTarget.cursor : "default");
    if (lastHoveredTarget && hoveredTarget !== lastHoveredTarget) {
      this.dispatchToElement(lastHovered, "mouseout", event);
    }
    this.dispatchToElement(hovered, "mousemove", event);
    if (hoveredTarget && hoveredTarget !== lastHoveredTarget) {
      this.dispatchToElement(hovered, "mouseover", event);
    }
  };
  Handler2.prototype.mouseout = function(event) {
    var eventControl = event.zrEventControl;
    if (eventControl !== "only_globalout") {
      this.dispatchToElement(this._hovered, "mouseout", event);
    }
    if (eventControl !== "no_globalout") {
      this.trigger("globalout", { type: "globalout", event });
    }
  };
  Handler2.prototype.resize = function() {
    this._hovered = new HoveredResult(0, 0);
  };
  Handler2.prototype.dispatch = function(eventName, eventArgs) {
    var handler = this[eventName];
    handler && handler.call(this, eventArgs);
  };
  Handler2.prototype.dispose = function() {
    this.proxy.dispose();
    this.storage = null;
    this.proxy = null;
    this.painter = null;
  };
  Handler2.prototype.setCursorStyle = function(cursorStyle) {
    var proxy = this.proxy;
    proxy.setCursor && proxy.setCursor(cursorStyle);
  };
  Handler2.prototype.dispatchToElement = function(targetInfo, eventName, event) {
    targetInfo = targetInfo || {};
    var el = targetInfo.target;
    if (el && el.silent) {
      return;
    }
    var eventKey = "on" + eventName;
    var eventPacket = makeEventPacket(eventName, targetInfo, event);
    while (el) {
      el[eventKey] && (eventPacket.cancelBubble = !!el[eventKey].call(el, eventPacket));
      el.trigger(eventName, eventPacket);
      el = el.__hostTarget ? el.__hostTarget : el.parent;
      if (eventPacket.cancelBubble) {
        break;
      }
    }
    if (!eventPacket.cancelBubble) {
      this.trigger(eventName, eventPacket);
      if (this.painter && this.painter.eachOtherLayer) {
        this.painter.eachOtherLayer(function(layer) {
          if (typeof layer[eventKey] === "function") {
            layer[eventKey].call(layer, eventPacket);
          }
          if (layer.trigger) {
            layer.trigger(eventName, eventPacket);
          }
        });
      }
    }
  };
  Handler2.prototype.findHover = function(x2, y2, exclude) {
    var list = this.storage.getDisplayList();
    var out2 = new HoveredResult(x2, y2);
    setHoverTarget(list, out2, x2, y2, exclude);
    if (this._pointerSize && !out2.target) {
      var candidates = [];
      var pointerSize = this._pointerSize;
      var targetSizeHalf = pointerSize / 2;
      var pointerRect = new BoundingRect$1(x2 - targetSizeHalf, y2 - targetSizeHalf, pointerSize, pointerSize);
      for (var i = list.length - 1; i >= 0; i--) {
        var el = list[i];
        if (el !== exclude && !el.ignore && !el.ignoreCoarsePointer && (!el.parent || !el.parent.ignoreCoarsePointer)) {
          tmpRect$1.copy(el.getBoundingRect());
          if (el.transform) {
            tmpRect$1.applyTransform(el.transform);
          }
          if (tmpRect$1.intersect(pointerRect)) {
            candidates.push(el);
          }
        }
      }
      if (candidates.length) {
        var rStep = 4;
        var thetaStep = Math.PI / 12;
        var PI22 = Math.PI * 2;
        for (var r = 0; r < targetSizeHalf; r += rStep) {
          for (var theta = 0; theta < PI22; theta += thetaStep) {
            var x1 = x2 + r * Math.cos(theta);
            var y1 = y2 + r * Math.sin(theta);
            setHoverTarget(candidates, out2, x1, y1, exclude);
            if (out2.target) {
              return out2;
            }
          }
        }
      }
    }
    return out2;
  };
  Handler2.prototype.processGesture = function(event, stage) {
    if (!this._gestureMgr) {
      this._gestureMgr = new GestureMgr();
    }
    var gestureMgr = this._gestureMgr;
    stage === "start" && gestureMgr.clear();
    var gestureInfo = gestureMgr.recognize(event, this.findHover(event.zrX, event.zrY, null).target, this.proxy.dom);
    stage === "end" && gestureMgr.clear();
    if (gestureInfo) {
      var type = gestureInfo.type;
      event.gestureEvent = type;
      var res = new HoveredResult();
      res.target = gestureInfo.target;
      this.dispatchToElement(res, type, gestureInfo.event);
    }
  };
  return Handler2;
}(Eventful$1);
each$4(["click", "mousedown", "mouseup", "mousewheel", "dblclick", "contextmenu"], function(name) {
  Handler.prototype[name] = function(event) {
    var x2 = event.zrX;
    var y2 = event.zrY;
    var isOutside = isOutsideBoundary(this, x2, y2);
    var hovered;
    var hoveredTarget;
    if (name !== "mouseup" || !isOutside) {
      hovered = this.findHover(x2, y2);
      hoveredTarget = hovered.target;
    }
    if (name === "mousedown") {
      this._downEl = hoveredTarget;
      this._downPoint = [event.zrX, event.zrY];
      this._upEl = hoveredTarget;
    } else if (name === "mouseup") {
      this._upEl = hoveredTarget;
    } else if (name === "click") {
      if (this._downEl !== this._upEl || !this._downPoint || dist$1(this._downPoint, [event.zrX, event.zrY]) > 4) {
        return;
      }
      this._downPoint = null;
    }
    this.dispatchToElement(hovered, name, event);
  };
});
function isHover(displayable, x2, y2) {
  if (displayable[displayable.rectHover ? "rectContain" : "contain"](x2, y2)) {
    var el = displayable;
    var isSilent = void 0;
    var ignoreClip = false;
    while (el) {
      if (el.ignoreClip) {
        ignoreClip = true;
      }
      if (!ignoreClip) {
        var clipPath = el.getClipPath();
        if (clipPath && !clipPath.contain(x2, y2)) {
          return false;
        }
        if (el.silent) {
          isSilent = true;
        }
      }
      var hostEl = el.__hostTarget;
      el = hostEl ? hostEl : el.parent;
    }
    return isSilent ? SILENT : true;
  }
  return false;
}
function setHoverTarget(list, out2, x2, y2, exclude) {
  for (var i = list.length - 1; i >= 0; i--) {
    var el = list[i];
    var hoverCheckResult = void 0;
    if (el !== exclude && !el.ignore && (hoverCheckResult = isHover(el, x2, y2))) {
      !out2.topTarget && (out2.topTarget = el);
      if (hoverCheckResult !== SILENT) {
        out2.target = el;
        break;
      }
    }
  }
}
function isOutsideBoundary(handlerInstance, x2, y2) {
  var painter = handlerInstance.painter;
  return x2 < 0 || x2 > painter.getWidth() || y2 < 0 || y2 > painter.getHeight();
}
var Handler$1 = Handler;
var DEFAULT_MIN_MERGE = 32;
var DEFAULT_MIN_GALLOPING = 7;
function minRunLength(n) {
  var r = 0;
  while (n >= DEFAULT_MIN_MERGE) {
    r |= n & 1;
    n >>= 1;
  }
  return n + r;
}
function makeAscendingRun(array, lo, hi, compare2) {
  var runHi = lo + 1;
  if (runHi === hi) {
    return 1;
  }
  if (compare2(array[runHi++], array[lo]) < 0) {
    while (runHi < hi && compare2(array[runHi], array[runHi - 1]) < 0) {
      runHi++;
    }
    reverseRun(array, lo, runHi);
  } else {
    while (runHi < hi && compare2(array[runHi], array[runHi - 1]) >= 0) {
      runHi++;
    }
  }
  return runHi - lo;
}
function reverseRun(array, lo, hi) {
  hi--;
  while (lo < hi) {
    var t = array[lo];
    array[lo++] = array[hi];
    array[hi--] = t;
  }
}
function binaryInsertionSort(array, lo, hi, start2, compare2) {
  if (start2 === lo) {
    start2++;
  }
  for (; start2 < hi; start2++) {
    var pivot = array[start2];
    var left = lo;
    var right = start2;
    var mid;
    while (left < right) {
      mid = left + right >>> 1;
      if (compare2(pivot, array[mid]) < 0) {
        right = mid;
      } else {
        left = mid + 1;
      }
    }
    var n = start2 - left;
    switch (n) {
      case 3:
        array[left + 3] = array[left + 2];
      case 2:
        array[left + 2] = array[left + 1];
      case 1:
        array[left + 1] = array[left];
        break;
      default:
        while (n > 0) {
          array[left + n] = array[left + n - 1];
          n--;
        }
    }
    array[left] = pivot;
  }
}
function gallopLeft(value, array, start2, length, hint, compare2) {
  var lastOffset = 0;
  var maxOffset = 0;
  var offset = 1;
  if (compare2(value, array[start2 + hint]) > 0) {
    maxOffset = length - hint;
    while (offset < maxOffset && compare2(value, array[start2 + hint + offset]) > 0) {
      lastOffset = offset;
      offset = (offset << 1) + 1;
      if (offset <= 0) {
        offset = maxOffset;
      }
    }
    if (offset > maxOffset) {
      offset = maxOffset;
    }
    lastOffset += hint;
    offset += hint;
  } else {
    maxOffset = hint + 1;
    while (offset < maxOffset && compare2(value, array[start2 + hint - offset]) <= 0) {
      lastOffset = offset;
      offset = (offset << 1) + 1;
      if (offset <= 0) {
        offset = maxOffset;
      }
    }
    if (offset > maxOffset) {
      offset = maxOffset;
    }
    var tmp = lastOffset;
    lastOffset = hint - offset;
    offset = hint - tmp;
  }
  lastOffset++;
  while (lastOffset < offset) {
    var m2 = lastOffset + (offset - lastOffset >>> 1);
    if (compare2(value, array[start2 + m2]) > 0) {
      lastOffset = m2 + 1;
    } else {
      offset = m2;
    }
  }
  return offset;
}
function gallopRight(value, array, start2, length, hint, compare2) {
  var lastOffset = 0;
  var maxOffset = 0;
  var offset = 1;
  if (compare2(value, array[start2 + hint]) < 0) {
    maxOffset = hint + 1;
    while (offset < maxOffset && compare2(value, array[start2 + hint - offset]) < 0) {
      lastOffset = offset;
      offset = (offset << 1) + 1;
      if (offset <= 0) {
        offset = maxOffset;
      }
    }
    if (offset > maxOffset) {
      offset = maxOffset;
    }
    var tmp = lastOffset;
    lastOffset = hint - offset;
    offset = hint - tmp;
  } else {
    maxOffset = length - hint;
    while (offset < maxOffset && compare2(value, array[start2 + hint + offset]) >= 0) {
      lastOffset = offset;
      offset = (offset << 1) + 1;
      if (offset <= 0) {
        offset = maxOffset;
      }
    }
    if (offset > maxOffset) {
      offset = maxOffset;
    }
    lastOffset += hint;
    offset += hint;
  }
  lastOffset++;
  while (lastOffset < offset) {
    var m2 = lastOffset + (offset - lastOffset >>> 1);
    if (compare2(value, array[start2 + m2]) < 0) {
      offset = m2;
    } else {
      lastOffset = m2 + 1;
    }
  }
  return offset;
}
function TimSort(array, compare2) {
  var minGallop = DEFAULT_MIN_GALLOPING;
  var runStart;
  var runLength;
  var stackSize = 0;
  array.length;
  var tmp = [];
  runStart = [];
  runLength = [];
  function pushRun(_runStart, _runLength) {
    runStart[stackSize] = _runStart;
    runLength[stackSize] = _runLength;
    stackSize += 1;
  }
  function mergeRuns() {
    while (stackSize > 1) {
      var n = stackSize - 2;
      if (n >= 1 && runLength[n - 1] <= runLength[n] + runLength[n + 1] || n >= 2 && runLength[n - 2] <= runLength[n] + runLength[n - 1]) {
        if (runLength[n - 1] < runLength[n + 1]) {
          n--;
        }
      } else if (runLength[n] > runLength[n + 1]) {
        break;
      }
      mergeAt(n);
    }
  }
  function forceMergeRuns() {
    while (stackSize > 1) {
      var n = stackSize - 2;
      if (n > 0 && runLength[n - 1] < runLength[n + 1]) {
        n--;
      }
      mergeAt(n);
    }
  }
  function mergeAt(i) {
    var start1 = runStart[i];
    var length1 = runLength[i];
    var start2 = runStart[i + 1];
    var length2 = runLength[i + 1];
    runLength[i] = length1 + length2;
    if (i === stackSize - 3) {
      runStart[i + 1] = runStart[i + 2];
      runLength[i + 1] = runLength[i + 2];
    }
    stackSize--;
    var k2 = gallopRight(array[start2], array, start1, length1, 0, compare2);
    start1 += k2;
    length1 -= k2;
    if (length1 === 0) {
      return;
    }
    length2 = gallopLeft(array[start1 + length1 - 1], array, start2, length2, length2 - 1, compare2);
    if (length2 === 0) {
      return;
    }
    if (length1 <= length2) {
      mergeLow(start1, length1, start2, length2);
    } else {
      mergeHigh(start1, length1, start2, length2);
    }
  }
  function mergeLow(start1, length1, start2, length2) {
    var i = 0;
    for (i = 0; i < length1; i++) {
      tmp[i] = array[start1 + i];
    }
    var cursor1 = 0;
    var cursor2 = start2;
    var dest = start1;
    array[dest++] = array[cursor2++];
    if (--length2 === 0) {
      for (i = 0; i < length1; i++) {
        array[dest + i] = tmp[cursor1 + i];
      }
      return;
    }
    if (length1 === 1) {
      for (i = 0; i < length2; i++) {
        array[dest + i] = array[cursor2 + i];
      }
      array[dest + length2] = tmp[cursor1];
      return;
    }
    var _minGallop = minGallop;
    var count1;
    var count2;
    var exit;
    while (1) {
      count1 = 0;
      count2 = 0;
      exit = false;
      do {
        if (compare2(array[cursor2], tmp[cursor1]) < 0) {
          array[dest++] = array[cursor2++];
          count2++;
          count1 = 0;
          if (--length2 === 0) {
            exit = true;
            break;
          }
        } else {
          array[dest++] = tmp[cursor1++];
          count1++;
          count2 = 0;
          if (--length1 === 1) {
            exit = true;
            break;
          }
        }
      } while ((count1 | count2) < _minGallop);
      if (exit) {
        break;
      }
      do {
        count1 = gallopRight(array[cursor2], tmp, cursor1, length1, 0, compare2);
        if (count1 !== 0) {
          for (i = 0; i < count1; i++) {
            array[dest + i] = tmp[cursor1 + i];
          }
          dest += count1;
          cursor1 += count1;
          length1 -= count1;
          if (length1 <= 1) {
            exit = true;
            break;
          }
        }
        array[dest++] = array[cursor2++];
        if (--length2 === 0) {
          exit = true;
          break;
        }
        count2 = gallopLeft(tmp[cursor1], array, cursor2, length2, 0, compare2);
        if (count2 !== 0) {
          for (i = 0; i < count2; i++) {
            array[dest + i] = array[cursor2 + i];
          }
          dest += count2;
          cursor2 += count2;
          length2 -= count2;
          if (length2 === 0) {
            exit = true;
            break;
          }
        }
        array[dest++] = tmp[cursor1++];
        if (--length1 === 1) {
          exit = true;
          break;
        }
        _minGallop--;
      } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);
      if (exit) {
        break;
      }
      if (_minGallop < 0) {
        _minGallop = 0;
      }
      _minGallop += 2;
    }
    minGallop = _minGallop;
    minGallop < 1 && (minGallop = 1);
    if (length1 === 1) {
      for (i = 0; i < length2; i++) {
        array[dest + i] = array[cursor2 + i];
      }
      array[dest + length2] = tmp[cursor1];
    } else if (length1 === 0) {
      throw new Error();
    } else {
      for (i = 0; i < length1; i++) {
        array[dest + i] = tmp[cursor1 + i];
      }
    }
  }
  function mergeHigh(start1, length1, start2, length2) {
    var i = 0;
    for (i = 0; i < length2; i++) {
      tmp[i] = array[start2 + i];
    }
    var cursor1 = start1 + length1 - 1;
    var cursor2 = length2 - 1;
    var dest = start2 + length2 - 1;
    var customCursor = 0;
    var customDest = 0;
    array[dest--] = array[cursor1--];
    if (--length1 === 0) {
      customCursor = dest - (length2 - 1);
      for (i = 0; i < length2; i++) {
        array[customCursor + i] = tmp[i];
      }
      return;
    }
    if (length2 === 1) {
      dest -= length1;
      cursor1 -= length1;
      customDest = dest + 1;
      customCursor = cursor1 + 1;
      for (i = length1 - 1; i >= 0; i--) {
        array[customDest + i] = array[customCursor + i];
      }
      array[dest] = tmp[cursor2];
      return;
    }
    var _minGallop = minGallop;
    while (true) {
      var count1 = 0;
      var count2 = 0;
      var exit = false;
      do {
        if (compare2(tmp[cursor2], array[cursor1]) < 0) {
          array[dest--] = array[cursor1--];
          count1++;
          count2 = 0;
          if (--length1 === 0) {
            exit = true;
            break;
          }
        } else {
          array[dest--] = tmp[cursor2--];
          count2++;
          count1 = 0;
          if (--length2 === 1) {
            exit = true;
            break;
          }
        }
      } while ((count1 | count2) < _minGallop);
      if (exit) {
        break;
      }
      do {
        count1 = length1 - gallopRight(tmp[cursor2], array, start1, length1, length1 - 1, compare2);
        if (count1 !== 0) {
          dest -= count1;
          cursor1 -= count1;
          length1 -= count1;
          customDest = dest + 1;
          customCursor = cursor1 + 1;
          for (i = count1 - 1; i >= 0; i--) {
            array[customDest + i] = array[customCursor + i];
          }
          if (length1 === 0) {
            exit = true;
            break;
          }
        }
        array[dest--] = tmp[cursor2--];
        if (--length2 === 1) {
          exit = true;
          break;
        }
        count2 = length2 - gallopLeft(array[cursor1], tmp, 0, length2, length2 - 1, compare2);
        if (count2 !== 0) {
          dest -= count2;
          cursor2 -= count2;
          length2 -= count2;
          customDest = dest + 1;
          customCursor = cursor2 + 1;
          for (i = 0; i < count2; i++) {
            array[customDest + i] = tmp[customCursor + i];
          }
          if (length2 <= 1) {
            exit = true;
            break;
          }
        }
        array[dest--] = array[cursor1--];
        if (--length1 === 0) {
          exit = true;
          break;
        }
        _minGallop--;
      } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);
      if (exit) {
        break;
      }
      if (_minGallop < 0) {
        _minGallop = 0;
      }
      _minGallop += 2;
    }
    minGallop = _minGallop;
    if (minGallop < 1) {
      minGallop = 1;
    }
    if (length2 === 1) {
      dest -= length1;
      cursor1 -= length1;
      customDest = dest + 1;
      customCursor = cursor1 + 1;
      for (i = length1 - 1; i >= 0; i--) {
        array[customDest + i] = array[customCursor + i];
      }
      array[dest] = tmp[cursor2];
    } else if (length2 === 0) {
      throw new Error();
    } else {
      customCursor = dest - (length2 - 1);
      for (i = 0; i < length2; i++) {
        array[customCursor + i] = tmp[i];
      }
    }
  }
  return {
    mergeRuns,
    forceMergeRuns,
    pushRun
  };
}
function sort(array, compare2, lo, hi) {
  if (!lo) {
    lo = 0;
  }
  if (!hi) {
    hi = array.length;
  }
  var remaining = hi - lo;
  if (remaining < 2) {
    return;
  }
  var runLength = 0;
  if (remaining < DEFAULT_MIN_MERGE) {
    runLength = makeAscendingRun(array, lo, hi, compare2);
    binaryInsertionSort(array, lo, hi, lo + runLength, compare2);
    return;
  }
  var ts = TimSort(array, compare2);
  var minRun = minRunLength(remaining);
  do {
    runLength = makeAscendingRun(array, lo, hi, compare2);
    if (runLength < minRun) {
      var force = remaining;
      if (force > minRun) {
        force = minRun;
      }
      binaryInsertionSort(array, lo, lo + force, lo + runLength, compare2);
      runLength = force;
    }
    ts.pushRun(lo, runLength);
    ts.mergeRuns();
    remaining -= runLength;
    lo += runLength;
  } while (remaining !== 0);
  ts.forceMergeRuns();
}
var REDRAW_BIT = 1;
var STYLE_CHANGED_BIT = 2;
var SHAPE_CHANGED_BIT = 4;
var invalidZErrorLogged = false;
function logInvalidZError() {
  if (invalidZErrorLogged) {
    return;
  }
  invalidZErrorLogged = true;
  console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors");
}
function shapeCompareFunc(a, b2) {
  if (a.zlevel === b2.zlevel) {
    if (a.z === b2.z) {
      return a.z2 - b2.z2;
    }
    return a.z - b2.z;
  }
  return a.zlevel - b2.zlevel;
}
var Storage = function() {
  function Storage2() {
    this._roots = [];
    this._displayList = [];
    this._displayListLen = 0;
    this.displayableSortFunc = shapeCompareFunc;
  }
  Storage2.prototype.traverse = function(cb, context) {
    for (var i = 0; i < this._roots.length; i++) {
      this._roots[i].traverse(cb, context);
    }
  };
  Storage2.prototype.getDisplayList = function(update, includeIgnore) {
    includeIgnore = includeIgnore || false;
    var displayList = this._displayList;
    if (update || !displayList.length) {
      this.updateDisplayList(includeIgnore);
    }
    return displayList;
  };
  Storage2.prototype.updateDisplayList = function(includeIgnore) {
    this._displayListLen = 0;
    var roots2 = this._roots;
    var displayList = this._displayList;
    for (var i = 0, len2 = roots2.length; i < len2; i++) {
      this._updateAndAddDisplayable(roots2[i], null, includeIgnore);
    }
    displayList.length = this._displayListLen;
    sort(displayList, shapeCompareFunc);
  };
  Storage2.prototype._updateAndAddDisplayable = function(el, clipPaths, includeIgnore) {
    if (el.ignore && !includeIgnore) {
      return;
    }
    el.beforeUpdate();
    el.update();
    el.afterUpdate();
    var userSetClipPath = el.getClipPath();
    if (el.ignoreClip) {
      clipPaths = null;
    } else if (userSetClipPath) {
      if (clipPaths) {
        clipPaths = clipPaths.slice();
      } else {
        clipPaths = [];
      }
      var currentClipPath = userSetClipPath;
      var parentClipPath = el;
      while (currentClipPath) {
        currentClipPath.parent = parentClipPath;
        currentClipPath.updateTransform();
        clipPaths.push(currentClipPath);
        parentClipPath = currentClipPath;
        currentClipPath = currentClipPath.getClipPath();
      }
    }
    if (el.childrenRef) {
      var children = el.childrenRef();
      for (var i = 0; i < children.length; i++) {
        var child = children[i];
        if (el.__dirty) {
          child.__dirty |= REDRAW_BIT;
        }
        this._updateAndAddDisplayable(child, clipPaths, includeIgnore);
      }
      el.__dirty = 0;
    } else {
      var disp = el;
      if (clipPaths && clipPaths.length) {
        disp.__clipPaths = clipPaths;
      } else if (disp.__clipPaths && disp.__clipPaths.length > 0) {
        disp.__clipPaths = [];
      }
      if (isNaN(disp.z)) {
        logInvalidZError();
        disp.z = 0;
      }
      if (isNaN(disp.z2)) {
        logInvalidZError();
        disp.z2 = 0;
      }
      if (isNaN(disp.zlevel)) {
        logInvalidZError();
        disp.zlevel = 0;
      }
      this._displayList[this._displayListLen++] = disp;
    }
    var decalEl = el.getDecalElement && el.getDecalElement();
    if (decalEl) {
      this._updateAndAddDisplayable(decalEl, clipPaths, includeIgnore);
    }
    var textGuide = el.getTextGuideLine();
    if (textGuide) {
      this._updateAndAddDisplayable(textGuide, clipPaths, includeIgnore);
    }
    var textEl = el.getTextContent();
    if (textEl) {
      this._updateAndAddDisplayable(textEl, clipPaths, includeIgnore);
    }
  };
  Storage2.prototype.addRoot = function(el) {
    if (el.__zr && el.__zr.storage === this) {
      return;
    }
    this._roots.push(el);
  };
  Storage2.prototype.delRoot = function(el) {
    if (el instanceof Array) {
      for (var i = 0, l = el.length; i < l; i++) {
        this.delRoot(el[i]);
      }
      return;
    }
    var idx = indexOf(this._roots, el);
    if (idx >= 0) {
      this._roots.splice(idx, 1);
    }
  };
  Storage2.prototype.delAllRoots = function() {
    this._roots = [];
    this._displayList = [];
    this._displayListLen = 0;
    return;
  };
  Storage2.prototype.getRoots = function() {
    return this._roots;
  };
  Storage2.prototype.dispose = function() {
    this._displayList = null;
    this._roots = null;
  };
  return Storage2;
}();
var Storage$1 = Storage;
var requestAnimationFrame$1;
requestAnimationFrame$1 = env$1.hasGlobalWindow && (window.requestAnimationFrame && window.requestAnimationFrame.bind(window) || window.msRequestAnimationFrame && window.msRequestAnimationFrame.bind(window) || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame) || function(func) {
  return setTimeout(func, 16);
};
var requestAnimationFrame$2 = requestAnimationFrame$1;
var easingFuncs = {
  linear: function(k2) {
    return k2;
  },
  quadraticIn: function(k2) {
    return k2 * k2;
  },
  quadraticOut: function(k2) {
    return k2 * (2 - k2);
  },
  quadraticInOut: function(k2) {
    if ((k2 *= 2) < 1) {
      return 0.5 * k2 * k2;
    }
    return -0.5 * (--k2 * (k2 - 2) - 1);
  },
  cubicIn: function(k2) {
    return k2 * k2 * k2;
  },
  cubicOut: function(k2) {
    return --k2 * k2 * k2 + 1;
  },
  cubicInOut: function(k2) {
    if ((k2 *= 2) < 1) {
      return 0.5 * k2 * k2 * k2;
    }
    return 0.5 * ((k2 -= 2) * k2 * k2 + 2);
  },
  quarticIn: function(k2) {
    return k2 * k2 * k2 * k2;
  },
  quarticOut: function(k2) {
    return 1 - --k2 * k2 * k2 * k2;
  },
  quarticInOut: function(k2) {
    if ((k2 *= 2) < 1) {
      return 0.5 * k2 * k2 * k2 * k2;
    }
    return -0.5 * ((k2 -= 2) * k2 * k2 * k2 - 2);
  },
  quinticIn: function(k2) {
    return k2 * k2 * k2 * k2 * k2;
  },
  quinticOut: function(k2) {
    return --k2 * k2 * k2 * k2 * k2 + 1;
  },
  quinticInOut: function(k2) {
    if ((k2 *= 2) < 1) {
      return 0.5 * k2 * k2 * k2 * k2 * k2;
    }
    return 0.5 * ((k2 -= 2) * k2 * k2 * k2 * k2 + 2);
  },
  sinusoidalIn: function(k2) {
    return 1 - Math.cos(k2 * Math.PI / 2);
  },
  sinusoidalOut: function(k2) {
    return Math.sin(k2 * Math.PI / 2);
  },
  sinusoidalInOut: function(k2) {
    return 0.5 * (1 - Math.cos(Math.PI * k2));
  },
  exponentialIn: function(k2) {
    return k2 === 0 ? 0 : Math.pow(1024, k2 - 1);
  },
  exponentialOut: function(k2) {
    return k2 === 1 ? 1 : 1 - Math.pow(2, -10 * k2);
  },
  exponentialInOut: function(k2) {
    if (k2 === 0) {
      return 0;
    }
    if (k2 === 1) {
      return 1;
    }
    if ((k2 *= 2) < 1) {
      return 0.5 * Math.pow(1024, k2 - 1);
    }
    return 0.5 * (-Math.pow(2, -10 * (k2 - 1)) + 2);
  },
  circularIn: function(k2) {
    return 1 - Math.sqrt(1 - k2 * k2);
  },
  circularOut: function(k2) {
    return Math.sqrt(1 - --k2 * k2);
  },
  circularInOut: function(k2) {
    if ((k2 *= 2) < 1) {
      return -0.5 * (Math.sqrt(1 - k2 * k2) - 1);
    }
    return 0.5 * (Math.sqrt(1 - (k2 -= 2) * k2) + 1);
  },
  elasticIn: function(k2) {
    var s;
    var a = 0.1;
    var p = 0.4;
    if (k2 === 0) {
      return 0;
    }
    if (k2 === 1) {
      return 1;
    }
    if (!a || a < 1) {
      a = 1;
      s = p / 4;
    } else {
      s = p * Math.asin(1 / a) / (2 * Math.PI);
    }
    return -(a * Math.pow(2, 10 * (k2 -= 1)) * Math.sin((k2 - s) * (2 * Math.PI) / p));
  },
  elasticOut: function(k2) {
    var s;
    var a = 0.1;
    var p = 0.4;
    if (k2 === 0) {
      return 0;
    }
    if (k2 === 1) {
      return 1;
    }
    if (!a || a < 1) {
      a = 1;
      s = p / 4;
    } else {
      s = p * Math.asin(1 / a) / (2 * Math.PI);
    }
    return a * Math.pow(2, -10 * k2) * Math.sin((k2 - s) * (2 * Math.PI) / p) + 1;
  },
  elasticInOut: function(k2) {
    var s;
    var a = 0.1;
    var p = 0.4;
    if (k2 === 0) {
      return 0;
    }
    if (k2 === 1) {
      return 1;
    }
    if (!a || a < 1) {
      a = 1;
      s = p / 4;
    } else {
      s = p * Math.asin(1 / a) / (2 * Math.PI);
    }
    if ((k2 *= 2) < 1) {
      return -0.5 * (a * Math.pow(2, 10 * (k2 -= 1)) * Math.sin((k2 - s) * (2 * Math.PI) / p));
    }
    return a * Math.pow(2, -10 * (k2 -= 1)) * Math.sin((k2 - s) * (2 * Math.PI) / p) * 0.5 + 1;
  },
  backIn: function(k2) {
    var s = 1.70158;
    return k2 * k2 * ((s + 1) * k2 - s);
  },
  backOut: function(k2) {
    var s = 1.70158;
    return --k2 * k2 * ((s + 1) * k2 + s) + 1;
  },
  backInOut: function(k2) {
    var s = 1.70158 * 1.525;
    if ((k2 *= 2) < 1) {
      return 0.5 * (k2 * k2 * ((s + 1) * k2 - s));
    }
    return 0.5 * ((k2 -= 2) * k2 * ((s + 1) * k2 + s) + 2);
  },
  bounceIn: function(k2) {
    return 1 - easingFuncs.bounceOut(1 - k2);
  },
  bounceOut: function(k2) {
    if (k2 < 1 / 2.75) {
      return 7.5625 * k2 * k2;
    } else if (k2 < 2 / 2.75) {
      return 7.5625 * (k2 -= 1.5 / 2.75) * k2 + 0.75;
    } else if (k2 < 2.5 / 2.75) {
      return 7.5625 * (k2 -= 2.25 / 2.75) * k2 + 0.9375;
    } else {
      return 7.5625 * (k2 -= 2.625 / 2.75) * k2 + 0.984375;
    }
  },
  bounceInOut: function(k2) {
    if (k2 < 0.5) {
      return easingFuncs.bounceIn(k2 * 2) * 0.5;
    }
    return easingFuncs.bounceOut(k2 * 2 - 1) * 0.5 + 0.5;
  }
};
var easingFuncs$1 = easingFuncs;
var mathPow = Math.pow;
var mathSqrt$3 = Math.sqrt;
var EPSILON$2 = 1e-8;
var EPSILON_NUMERIC = 1e-4;
var THREE_SQRT = mathSqrt$3(3);
var ONE_THIRD = 1 / 3;
var _v0 = create$1();
var _v1 = create$1();
var _v2 = create$1();
function isAroundZero(val) {
  return val > -EPSILON$2 && val < EPSILON$2;
}
function isNotAroundZero$1(val) {
  return val > EPSILON$2 || val < -EPSILON$2;
}
function cubicAt(p0, p1, p2, p3, t) {
  var onet = 1 - t;
  return onet * onet * (onet * p0 + 3 * t * p1) + t * t * (t * p3 + 3 * onet * p2);
}
function cubicDerivativeAt(p0, p1, p2, p3, t) {
  var onet = 1 - t;
  return 3 * (((p1 - p0) * onet + 2 * (p2 - p1) * t) * onet + (p3 - p2) * t * t);
}
function cubicRootAt(p0, p1, p2, p3, val, roots2) {
  var a = p3 + 3 * (p1 - p2) - p0;
  var b2 = 3 * (p2 - p1 * 2 + p0);
  var c = 3 * (p1 - p0);
  var d = p0 - val;
  var A2 = b2 * b2 - 3 * a * c;
  var B2 = b2 * c - 9 * a * d;
  var C2 = c * c - 3 * b2 * d;
  var n = 0;
  if (isAroundZero(A2) && isAroundZero(B2)) {
    if (isAroundZero(b2)) {
      roots2[0] = 0;
    } else {
      var t1 = -c / b2;
      if (t1 >= 0 && t1 <= 1) {
        roots2[n++] = t1;
      }
    }
  } else {
    var disc = B2 * B2 - 4 * A2 * C2;
    if (isAroundZero(disc)) {
      var K = B2 / A2;
      var t1 = -b2 / a + K;
      var t2 = -K / 2;
      if (t1 >= 0 && t1 <= 1) {
        roots2[n++] = t1;
      }
      if (t2 >= 0 && t2 <= 1) {
        roots2[n++] = t2;
      }
    } else if (disc > 0) {
      var discSqrt = mathSqrt$3(disc);
      var Y1 = A2 * b2 + 1.5 * a * (-B2 + discSqrt);
      var Y2 = A2 * b2 + 1.5 * a * (-B2 - discSqrt);
      if (Y1 < 0) {
        Y1 = -mathPow(-Y1, ONE_THIRD);
      } else {
        Y1 = mathPow(Y1, ONE_THIRD);
      }
      if (Y2 < 0) {
        Y2 = -mathPow(-Y2, ONE_THIRD);
      } else {
        Y2 = mathPow(Y2, ONE_THIRD);
      }
      var t1 = (-b2 - (Y1 + Y2)) / (3 * a);
      if (t1 >= 0 && t1 <= 1) {
        roots2[n++] = t1;
      }
    } else {
      var T2 = (2 * A2 * b2 - 3 * a * B2) / (2 * mathSqrt$3(A2 * A2 * A2));
      var theta = Math.acos(T2) / 3;
      var ASqrt = mathSqrt$3(A2);
      var tmp = Math.cos(theta);
      var t1 = (-b2 - 2 * ASqrt * tmp) / (3 * a);
      var t2 = (-b2 + ASqrt * (tmp + THREE_SQRT * Math.sin(theta))) / (3 * a);
      var t3 = (-b2 + ASqrt * (tmp - THREE_SQRT * Math.sin(theta))) / (3 * a);
      if (t1 >= 0 && t1 <= 1) {
        roots2[n++] = t1;
      }
      if (t2 >= 0 && t2 <= 1) {
        roots2[n++] = t2;
      }
      if (t3 >= 0 && t3 <= 1) {
        roots2[n++] = t3;
      }
    }
  }
  return n;
}
function cubicExtrema(p0, p1, p2, p3, extrema2) {
  var b2 = 6 * p2 - 12 * p1 + 6 * p0;
  var a = 9 * p1 + 3 * p3 - 3 * p0 - 9 * p2;
  var c = 3 * p1 - 3 * p0;
  var n = 0;
  if (isAroundZero(a)) {
    if (isNotAroundZero$1(b2)) {
      var t1 = -c / b2;
      if (t1 >= 0 && t1 <= 1) {
        extrema2[n++] = t1;
      }
    }
  } else {
    var disc = b2 * b2 - 4 * a * c;
    if (isAroundZero(disc)) {
      extrema2[0] = -b2 / (2 * a);
    } else if (disc > 0) {
      var discSqrt = mathSqrt$3(disc);
      var t1 = (-b2 + discSqrt) / (2 * a);
      var t2 = (-b2 - discSqrt) / (2 * a);
      if (t1 >= 0 && t1 <= 1) {
        extrema2[n++] = t1;
      }
      if (t2 >= 0 && t2 <= 1) {
        extrema2[n++] = t2;
      }
    }
  }
  return n;
}
function cubicSubdivide(p0, p1, p2, p3, t, out2) {
  var p01 = (p1 - p0) * t + p0;
  var p12 = (p2 - p1) * t + p1;
  var p23 = (p3 - p2) * t + p2;
  var p012 = (p12 - p01) * t + p01;
  var p123 = (p23 - p12) * t + p12;
  var p0123 = (p123 - p012) * t + p012;
  out2[0] = p0;
  out2[1] = p01;
  out2[2] = p012;
  out2[3] = p0123;
  out2[4] = p0123;
  out2[5] = p123;
  out2[6] = p23;
  out2[7] = p3;
}
function cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x4, y4, out2) {
  var t;
  var interval = 5e-3;
  var d = Infinity;
  var prev;
  var next;
  var d1;
  var d2;
  _v0[0] = x4;
  _v0[1] = y4;
  for (var _t = 0; _t < 1; _t += 0.05) {
    _v1[0] = cubicAt(x0, x1, x2, x3, _t);
    _v1[1] = cubicAt(y0, y1, y2, y3, _t);
    d1 = distSquare(_v0, _v1);
    if (d1 < d) {
      t = _t;
      d = d1;
    }
  }
  d = Infinity;
  for (var i = 0; i < 32; i++) {
    if (interval < EPSILON_NUMERIC) {
      break;
    }
    prev = t - interval;
    next = t + interval;
    _v1[0] = cubicAt(x0, x1, x2, x3, prev);
    _v1[1] = cubicAt(y0, y1, y2, y3, prev);
    d1 = distSquare(_v1, _v0);
    if (prev >= 0 && d1 < d) {
      t = prev;
      d = d1;
    } else {
      _v2[0] = cubicAt(x0, x1, x2, x3, next);
      _v2[1] = cubicAt(y0, y1, y2, y3, next);
      d2 = distSquare(_v2, _v0);
      if (next <= 1 && d2 < d) {
        t = next;
        d = d2;
      } else {
        interval *= 0.5;
      }
    }
  }
  if (out2) {
    out2[0] = cubicAt(x0, x1, x2, x3, t);
    out2[1] = cubicAt(y0, y1, y2, y3, t);
  }
  return mathSqrt$3(d);
}
function cubicLength(x0, y0, x1, y1, x2, y2, x3, y3, iteration) {
  var px = x0;
  var py = y0;
  var d = 0;
  var step = 1 / iteration;
  for (var i = 1; i <= iteration; i++) {
    var t = i * step;
    var x4 = cubicAt(x0, x1, x2, x3, t);
    var y4 = cubicAt(y0, y1, y2, y3, t);
    var dx = x4 - px;
    var dy = y4 - py;
    d += Math.sqrt(dx * dx + dy * dy);
    px = x4;
    py = y4;
  }
  return d;
}
function quadraticAt(p0, p1, p2, t) {
  var onet = 1 - t;
  return onet * (onet * p0 + 2 * t * p1) + t * t * p2;
}
function quadraticDerivativeAt(p0, p1, p2, t) {
  return 2 * ((1 - t) * (p1 - p0) + t * (p2 - p1));
}
function quadraticRootAt(p0, p1, p2, val, roots2) {
  var a = p0 - 2 * p1 + p2;
  var b2 = 2 * (p1 - p0);
  var c = p0 - val;
  var n = 0;
  if (isAroundZero(a)) {
    if (isNotAroundZero$1(b2)) {
      var t1 = -c / b2;
      if (t1 >= 0 && t1 <= 1) {
        roots2[n++] = t1;
      }
    }
  } else {
    var disc = b2 * b2 - 4 * a * c;
    if (isAroundZero(disc)) {
      var t1 = -b2 / (2 * a);
      if (t1 >= 0 && t1 <= 1) {
        roots2[n++] = t1;
      }
    } else if (disc > 0) {
      var discSqrt = mathSqrt$3(disc);
      var t1 = (-b2 + discSqrt) / (2 * a);
      var t2 = (-b2 - discSqrt) / (2 * a);
      if (t1 >= 0 && t1 <= 1) {
        roots2[n++] = t1;
      }
      if (t2 >= 0 && t2 <= 1) {
        roots2[n++] = t2;
      }
    }
  }
  return n;
}
function quadraticExtremum(p0, p1, p2) {
  var divider = p0 + p2 - 2 * p1;
  if (divider === 0) {
    return 0.5;
  } else {
    return (p0 - p1) / divider;
  }
}
function quadraticSubdivide(p0, p1, p2, t, out2) {
  var p01 = (p1 - p0) * t + p0;
  var p12 = (p2 - p1) * t + p1;
  var p012 = (p12 - p01) * t + p01;
  out2[0] = p0;
  out2[1] = p01;
  out2[2] = p012;
  out2[3] = p012;
  out2[4] = p12;
  out2[5] = p2;
}
function quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, out2) {
  var t;
  var interval = 5e-3;
  var d = Infinity;
  _v0[0] = x3;
  _v0[1] = y3;
  for (var _t = 0; _t < 1; _t += 0.05) {
    _v1[0] = quadraticAt(x0, x1, x2, _t);
    _v1[1] = quadraticAt(y0, y1, y2, _t);
    var d1 = distSquare(_v0, _v1);
    if (d1 < d) {
      t = _t;
      d = d1;
    }
  }
  d = Infinity;
  for (var i = 0; i < 32; i++) {
    if (interval < EPSILON_NUMERIC) {
      break;
    }
    var prev = t - interval;
    var next = t + interval;
    _v1[0] = quadraticAt(x0, x1, x2, prev);
    _v1[1] = quadraticAt(y0, y1, y2, prev);
    var d1 = distSquare(_v1, _v0);
    if (prev >= 0 && d1 < d) {
      t = prev;
      d = d1;
    } else {
      _v2[0] = quadraticAt(x0, x1, x2, next);
      _v2[1] = quadraticAt(y0, y1, y2, next);
      var d2 = distSquare(_v2, _v0);
      if (next <= 1 && d2 < d) {
        t = next;
        d = d2;
      } else {
        interval *= 0.5;
      }
    }
  }
  if (out2) {
    out2[0] = quadraticAt(x0, x1, x2, t);
    out2[1] = quadraticAt(y0, y1, y2, t);
  }
  return mathSqrt$3(d);
}
function quadraticLength(x0, y0, x1, y1, x2, y2, iteration) {
  var px = x0;
  var py = y0;
  var d = 0;
  var step = 1 / iteration;
  for (var i = 1; i <= iteration; i++) {
    var t = i * step;
    var x3 = quadraticAt(x0, x1, x2, t);
    var y3 = quadraticAt(y0, y1, y2, t);
    var dx = x3 - px;
    var dy = y3 - py;
    d += Math.sqrt(dx * dx + dy * dy);
    px = x3;
    py = y3;
  }
  return d;
}
var regexp = /cubic-bezier\(([0-9,\.e ]+)\)/;
function createCubicEasingFunc(cubicEasingStr) {
  var cubic = cubicEasingStr && regexp.exec(cubicEasingStr);
  if (cubic) {
    var points2 = cubic[1].split(",");
    var a_1 = +trim(points2[0]);
    var b_1 = +trim(points2[1]);
    var c_1 = +trim(points2[2]);
    var d_1 = +trim(points2[3]);
    if (isNaN(a_1 + b_1 + c_1 + d_1)) {
      return;
    }
    var roots_1 = [];
    return function(p) {
      return p <= 0 ? 0 : p >= 1 ? 1 : cubicRootAt(0, a_1, c_1, 1, p, roots_1) && cubicAt(0, b_1, d_1, 1, roots_1[0]);
    };
  }
}
var Clip = function() {
  function Clip2(opts) {
    this._inited = false;
    this._startTime = 0;
    this._pausedTime = 0;
    this._paused = false;
    this._life = opts.life || 1e3;
    this._delay = opts.delay || 0;
    this.loop = opts.loop || false;
    this.onframe = opts.onframe || noop;
    this.ondestroy = opts.ondestroy || noop;
    this.onrestart = opts.onrestart || noop;
    opts.easing && this.setEasing(opts.easing);
  }
  Clip2.prototype.step = function(globalTime, deltaTime) {
    if (!this._inited) {
      this._startTime = globalTime + this._delay;
      this._inited = true;
    }
    if (this._paused) {
      this._pausedTime += deltaTime;
      return;
    }
    var life = this._life;
    var elapsedTime = globalTime - this._startTime - this._pausedTime;
    var percent = elapsedTime / life;
    if (percent < 0) {
      percent = 0;
    }
    percent = Math.min(percent, 1);
    var easingFunc = this.easingFunc;
    var schedule = easingFunc ? easingFunc(percent) : percent;
    this.onframe(schedule);
    if (percent === 1) {
      if (this.loop) {
        var remainder = elapsedTime % life;
        this._startTime = globalTime - remainder;
        this._pausedTime = 0;
        this.onrestart();
      } else {
        return true;
      }
    }
    return false;
  };
  Clip2.prototype.pause = function() {
    this._paused = true;
  };
  Clip2.prototype.resume = function() {
    this._paused = false;
  };
  Clip2.prototype.setEasing = function(easing) {
    this.easing = easing;
    this.easingFunc = isFunction(easing) ? easing : easingFuncs$1[easing] || createCubicEasingFunc(easing);
  };
  return Clip2;
}();
var Clip$1 = Clip;
var Entry = function() {
  function Entry2(val) {
    this.value = val;
  }
  return Entry2;
}();
var LinkedList = function() {
  function LinkedList2() {
    this._len = 0;
  }
  LinkedList2.prototype.insert = function(val) {
    var entry = new Entry(val);
    this.insertEntry(entry);
    return entry;
  };
  LinkedList2.prototype.insertEntry = function(entry) {
    if (!this.head) {
      this.head = this.tail = entry;
    } else {
      this.tail.next = entry;
      entry.prev = this.tail;
      entry.next = null;
      this.tail = entry;
    }
    this._len++;
  };
  LinkedList2.prototype.remove = function(entry) {
    var prev = entry.prev;
    var next = entry.next;
    if (prev) {
      prev.next = next;
    } else {
      this.head = next;
    }
    if (next) {
      next.prev = prev;
    } else {
      this.tail = prev;
    }
    entry.next = entry.prev = null;
    this._len--;
  };
  LinkedList2.prototype.len = function() {
    return this._len;
  };
  LinkedList2.prototype.clear = function() {
    this.head = this.tail = null;
    this._len = 0;
  };
  return LinkedList2;
}();
var LRU = function() {
  function LRU2(maxSize) {
    this._list = new LinkedList();
    this._maxSize = 10;
    this._map = {};
    this._maxSize = maxSize;
  }
  LRU2.prototype.put = function(key, value) {
    var list = this._list;
    var map2 = this._map;
    var removed = null;
    if (map2[key] == null) {
      var len2 = list.len();
      var entry = this._lastRemovedEntry;
      if (len2 >= this._maxSize && len2 > 0) {
        var leastUsedEntry = list.head;
        list.remove(leastUsedEntry);
        delete map2[leastUsedEntry.key];
        removed = leastUsedEntry.value;
        this._lastRemovedEntry = leastUsedEntry;
      }
      if (entry) {
        entry.value = value;
      } else {
        entry = new Entry(value);
      }
      entry.key = key;
      list.insertEntry(entry);
      map2[key] = entry;
    }
    return removed;
  };
  LRU2.prototype.get = function(key) {
    var entry = this._map[key];
    var list = this._list;
    if (entry != null) {
      if (entry !== list.tail) {
        list.remove(entry);
        list.insertEntry(entry);
      }
      return entry.value;
    }
  };
  LRU2.prototype.clear = function() {
    this._list.clear();
    this._map = {};
  };
  LRU2.prototype.len = function() {
    return this._list.len();
  };
  return LRU2;
}();
var LRU$1 = LRU;
var kCSSColorTable = {
  "transparent": [0, 0, 0, 0],
  "aliceblue": [240, 248, 255, 1],
  "antiquewhite": [250, 235, 215, 1],
  "aqua": [0, 255, 255, 1],
  "aquamarine": [127, 255, 212, 1],
  "azure": [240, 255, 255, 1],
  "beige": [245, 245, 220, 1],
  "bisque": [255, 228, 196, 1],
  "black": [0, 0, 0, 1],
  "blanchedalmond": [255, 235, 205, 1],
  "blue": [0, 0, 255, 1],
  "blueviolet": [138, 43, 226, 1],
  "brown": [165, 42, 42, 1],
  "burlywood": [222, 184, 135, 1],
  "cadetblue": [95, 158, 160, 1],
  "chartreuse": [127, 255, 0, 1],
  "chocolate": [210, 105, 30, 1],
  "coral": [255, 127, 80, 1],
  "cornflowerblue": [100, 149, 237, 1],
  "cornsilk": [255, 248, 220, 1],
  "crimson": [220, 20, 60, 1],
  "cyan": [0, 255, 255, 1],
  "darkblue": [0, 0, 139, 1],
  "darkcyan": [0, 139, 139, 1],
  "darkgoldenrod": [184, 134, 11, 1],
  "darkgray": [169, 169, 169, 1],
  "darkgreen": [0, 100, 0, 1],
  "darkgrey": [169, 169, 169, 1],
  "darkkhaki": [189, 183, 107, 1],
  "darkmagenta": [139, 0, 139, 1],
  "darkolivegreen": [85, 107, 47, 1],
  "darkorange": [255, 140, 0, 1],
  "darkorchid": [153, 50, 204, 1],
  "darkred": [139, 0, 0, 1],
  "darksalmon": [233, 150, 122, 1],
  "darkseagreen": [143, 188, 143, 1],
  "darkslateblue": [72, 61, 139, 1],
  "darkslategray": [47, 79, 79, 1],
  "darkslategrey": [47, 79, 79, 1],
  "darkturquoise": [0, 206, 209, 1],
  "darkviolet": [148, 0, 211, 1],
  "deeppink": [255, 20, 147, 1],
  "deepskyblue": [0, 191, 255, 1],
  "dimgray": [105, 105, 105, 1],
  "dimgrey": [105, 105, 105, 1],
  "dodgerblue": [30, 144, 255, 1],
  "firebrick": [178, 34, 34, 1],
  "floralwhite": [255, 250, 240, 1],
  "forestgreen": [34, 139, 34, 1],
  "fuchsia": [255, 0, 255, 1],
  "gainsboro": [220, 220, 220, 1],
  "ghostwhite": [248, 248, 255, 1],
  "gold": [255, 215, 0, 1],
  "goldenrod": [218, 165, 32, 1],
  "gray": [128, 128, 128, 1],
  "green": [0, 128, 0, 1],
  "greenyellow": [173, 255, 47, 1],
  "grey": [128, 128, 128, 1],
  "honeydew": [240, 255, 240, 1],
  "hotpink": [255, 105, 180, 1],
  "indianred": [205, 92, 92, 1],
  "indigo": [75, 0, 130, 1],
  "ivory": [255, 255, 240, 1],
  "khaki": [240, 230, 140, 1],
  "lavender": [230, 230, 250, 1],
  "lavenderblush": [255, 240, 245, 1],
  "lawngreen": [124, 252, 0, 1],
  "lemonchiffon": [255, 250, 205, 1],
  "lightblue": [173, 216, 230, 1],
  "lightcoral": [240, 128, 128, 1],
  "lightcyan": [224, 255, 255, 1],
  "lightgoldenrodyellow": [250, 250, 210, 1],
  "lightgray": [211, 211, 211, 1],
  "lightgreen": [144, 238, 144, 1],
  "lightgrey": [211, 211, 211, 1],
  "lightpink": [255, 182, 193, 1],
  "lightsalmon": [255, 160, 122, 1],
  "lightseagreen": [32, 178, 170, 1],
  "lightskyblue": [135, 206, 250, 1],
  "lightslategray": [119, 136, 153, 1],
  "lightslategrey": [119, 136, 153, 1],
  "lightsteelblue": [176, 196, 222, 1],
  "lightyellow": [255, 255, 224, 1],
  "lime": [0, 255, 0, 1],
  "limegreen": [50, 205, 50, 1],
  "linen": [250, 240, 230, 1],
  "magenta": [255, 0, 255, 1],
  "maroon": [128, 0, 0, 1],
  "mediumaquamarine": [102, 205, 170, 1],
  "mediumblue": [0, 0, 205, 1],
  "mediumorchid": [186, 85, 211, 1],
  "mediumpurple": [147, 112, 219, 1],
  "mediumseagreen": [60, 179, 113, 1],
  "mediumslateblue": [123, 104, 238, 1],
  "mediumspringgreen": [0, 250, 154, 1],
  "mediumturquoise": [72, 209, 204, 1],
  "mediumvioletred": [199, 21, 133, 1],
  "midnightblue": [25, 25, 112, 1],
  "mintcream": [245, 255, 250, 1],
  "mistyrose": [255, 228, 225, 1],
  "moccasin": [255, 228, 181, 1],
  "navajowhite": [255, 222, 173, 1],
  "navy": [0, 0, 128, 1],
  "oldlace": [253, 245, 230, 1],
  "olive": [128, 128, 0, 1],
  "olivedrab": [107, 142, 35, 1],
  "orange": [255, 165, 0, 1],
  "orangered": [255, 69, 0, 1],
  "orchid": [218, 112, 214, 1],
  "palegoldenrod": [238, 232, 170, 1],
  "palegreen": [152, 251, 152, 1],
  "paleturquoise": [175, 238, 238, 1],
  "palevioletred": [219, 112, 147, 1],
  "papayawhip": [255, 239, 213, 1],
  "peachpuff": [255, 218, 185, 1],
  "peru": [205, 133, 63, 1],
  "pink": [255, 192, 203, 1],
  "plum": [221, 160, 221, 1],
  "powderblue": [176, 224, 230, 1],
  "purple": [128, 0, 128, 1],
  "red": [255, 0, 0, 1],
  "rosybrown": [188, 143, 143, 1],
  "royalblue": [65, 105, 225, 1],
  "saddlebrown": [139, 69, 19, 1],
  "salmon": [250, 128, 114, 1],
  "sandybrown": [244, 164, 96, 1],
  "seagreen": [46, 139, 87, 1],
  "seashell": [255, 245, 238, 1],
  "sienna": [160, 82, 45, 1],
  "silver": [192, 192, 192, 1],
  "skyblue": [135, 206, 235, 1],
  "slateblue": [106, 90, 205, 1],
  "slategray": [112, 128, 144, 1],
  "slategrey": [112, 128, 144, 1],
  "snow": [255, 250, 250, 1],
  "springgreen": [0, 255, 127, 1],
  "steelblue": [70, 130, 180, 1],
  "tan": [210, 180, 140, 1],
  "teal": [0, 128, 128, 1],
  "thistle": [216, 191, 216, 1],
  "tomato": [255, 99, 71, 1],
  "turquoise": [64, 224, 208, 1],
  "violet": [238, 130, 238, 1],
  "wheat": [245, 222, 179, 1],
  "white": [255, 255, 255, 1],
  "whitesmoke": [245, 245, 245, 1],
  "yellow": [255, 255, 0, 1],
  "yellowgreen": [154, 205, 50, 1]
};
function clampCssByte(i) {
  i = Math.round(i);
  return i < 0 ? 0 : i > 255 ? 255 : i;
}
function clampCssFloat(f) {
  return f < 0 ? 0 : f > 1 ? 1 : f;
}
function parseCssInt(val) {
  var str = val;
  if (str.length && str.charAt(str.length - 1) === "%") {
    return clampCssByte(parseFloat(str) / 100 * 255);
  }
  return clampCssByte(parseInt(str, 10));
}
function parseCssFloat(val) {
  var str = val;
  if (str.length && str.charAt(str.length - 1) === "%") {
    return clampCssFloat(parseFloat(str) / 100);
  }
  return clampCssFloat(parseFloat(str));
}
function cssHueToRgb(m1, m2, h2) {
  if (h2 < 0) {
    h2 += 1;
  } else if (h2 > 1) {
    h2 -= 1;
  }
  if (h2 * 6 < 1) {
    return m1 + (m2 - m1) * h2 * 6;
  }
  if (h2 * 2 < 1) {
    return m2;
  }
  if (h2 * 3 < 2) {
    return m1 + (m2 - m1) * (2 / 3 - h2) * 6;
  }
  return m1;
}
function setRgba(out2, r, g, b2, a) {
  out2[0] = r;
  out2[1] = g;
  out2[2] = b2;
  out2[3] = a;
  return out2;
}
function copyRgba(out2, a) {
  out2[0] = a[0];
  out2[1] = a[1];
  out2[2] = a[2];
  out2[3] = a[3];
  return out2;
}
var colorCache = new LRU$1(20);
var lastRemovedArr = null;
function putToCache(colorStr, rgbaArr) {
  if (lastRemovedArr) {
    copyRgba(lastRemovedArr, rgbaArr);
  }
  lastRemovedArr = colorCache.put(colorStr, lastRemovedArr || rgbaArr.slice());
}
function parse(colorStr, rgbaArr) {
  if (!colorStr) {
    return;
  }
  rgbaArr = rgbaArr || [];
  var cached = colorCache.get(colorStr);
  if (cached) {
    return copyRgba(rgbaArr, cached);
  }
  colorStr = colorStr + "";
  var str = colorStr.replace(/ /g, "").toLowerCase();
  if (str in kCSSColorTable) {
    copyRgba(rgbaArr, kCSSColorTable[str]);
    putToCache(colorStr, rgbaArr);
    return rgbaArr;
  }
  var strLen = str.length;
  if (str.charAt(0) === "#") {
    if (strLen === 4 || strLen === 5) {
      var iv = parseInt(str.slice(1, 4), 16);
      if (!(iv >= 0 && iv <= 4095)) {
        setRgba(rgbaArr, 0, 0, 0, 1);
        return;
      }
      setRgba(rgbaArr, (iv & 3840) >> 4 | (iv & 3840) >> 8, iv & 240 | (iv & 240) >> 4, iv & 15 | (iv & 15) << 4, strLen === 5 ? parseInt(str.slice(4), 16) / 15 : 1);
      putToCache(colorStr, rgbaArr);
      return rgbaArr;
    } else if (strLen === 7 || strLen === 9) {
      var iv = parseInt(str.slice(1, 7), 16);
      if (!(iv >= 0 && iv <= 16777215)) {
        setRgba(rgbaArr, 0, 0, 0, 1);
        return;
      }
      setRgba(rgbaArr, (iv & 16711680) >> 16, (iv & 65280) >> 8, iv & 255, strLen === 9 ? parseInt(str.slice(7), 16) / 255 : 1);
      putToCache(colorStr, rgbaArr);
      return rgbaArr;
    }
    return;
  }
  var op = str.indexOf("(");
  var ep = str.indexOf(")");
  if (op !== -1 && ep + 1 === strLen) {
    var fname = str.substr(0, op);
    var params = str.substr(op + 1, ep - (op + 1)).split(",");
    var alpha = 1;
    switch (fname) {
      case "rgba":
        if (params.length !== 4) {
          return params.length === 3 ? setRgba(rgbaArr, +params[0], +params[1], +params[2], 1) : setRgba(rgbaArr, 0, 0, 0, 1);
        }
        alpha = parseCssFloat(params.pop());
      case "rgb":
        if (params.length >= 3) {
          setRgba(rgbaArr, parseCssInt(params[0]), parseCssInt(params[1]), parseCssInt(params[2]), params.length === 3 ? alpha : parseCssFloat(params[3]));
          putToCache(colorStr, rgbaArr);
          return rgbaArr;
        } else {
          setRgba(rgbaArr, 0, 0, 0, 1);
          return;
        }
      case "hsla":
        if (params.length !== 4) {
          setRgba(rgbaArr, 0, 0, 0, 1);
          return;
        }
        params[3] = parseCssFloat(params[3]);
        hsla2rgba(params, rgbaArr);
        putToCache(colorStr, rgbaArr);
        return rgbaArr;
      case "hsl":
        if (params.length !== 3) {
          setRgba(rgbaArr, 0, 0, 0, 1);
          return;
        }
        hsla2rgba(params, rgbaArr);
        putToCache(colorStr, rgbaArr);
        return rgbaArr;
      default:
        return;
    }
  }
  setRgba(rgbaArr, 0, 0, 0, 1);
  return;
}
function hsla2rgba(hsla, rgba) {
  var h2 = (parseFloat(hsla[0]) % 360 + 360) % 360 / 360;
  var s = parseCssFloat(hsla[1]);
  var l = parseCssFloat(hsla[2]);
  var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;
  var m1 = l * 2 - m2;
  rgba = rgba || [];
  setRgba(rgba, clampCssByte(cssHueToRgb(m1, m2, h2 + 1 / 3) * 255), clampCssByte(cssHueToRgb(m1, m2, h2) * 255), clampCssByte(cssHueToRgb(m1, m2, h2 - 1 / 3) * 255), 1);
  if (hsla.length === 4) {
    rgba[3] = hsla[3];
  }
  return rgba;
}
function lift(color, level) {
  var colorArr = parse(color);
  if (colorArr) {
    for (var i = 0; i < 3; i++) {
      if (level < 0) {
        colorArr[i] = colorArr[i] * (1 - level) | 0;
      } else {
        colorArr[i] = (255 - colorArr[i]) * level + colorArr[i] | 0;
      }
      if (colorArr[i] > 255) {
        colorArr[i] = 255;
      } else if (colorArr[i] < 0) {
        colorArr[i] = 0;
      }
    }
    return stringify(colorArr, colorArr.length === 4 ? "rgba" : "rgb");
  }
}
function stringify(arrColor, type) {
  if (!arrColor || !arrColor.length) {
    return;
  }
  var colorStr = arrColor[0] + "," + arrColor[1] + "," + arrColor[2];
  if (type === "rgba" || type === "hsva" || type === "hsla") {
    colorStr += "," + arrColor[3];
  }
  return type + "(" + colorStr + ")";
}
function lum(color, backgroundLum) {
  var arr = parse(color);
  return arr ? (0.299 * arr[0] + 0.587 * arr[1] + 0.114 * arr[2]) * arr[3] / 255 + (1 - arr[3]) * backgroundLum : 0;
}
function isLinearGradient(val) {
  return val.type === "linear";
}
function isRadialGradient(val) {
  return val.type === "radial";
}
(function() {
  if (env$1.hasGlobalWindow && isFunction(window.btoa)) {
    return function(str) {
      return window.btoa(unescape(encodeURIComponent(str)));
    };
  }
  if (typeof Buffer !== "undefined") {
    return function(str) {
      return Buffer.from(str).toString("base64");
    };
  }
  return function(str) {
    return null;
  };
})();
var arraySlice = Array.prototype.slice;
function interpolateNumber(p0, p1, percent) {
  return (p1 - p0) * percent + p0;
}
function interpolate1DArray(out2, p0, p1, percent) {
  var len2 = p0.length;
  for (var i = 0; i < len2; i++) {
    out2[i] = interpolateNumber(p0[i], p1[i], percent);
  }
  return out2;
}
function interpolate2DArray(out2, p0, p1, percent) {
  var len2 = p0.length;
  var len22 = len2 && p0[0].length;
  for (var i = 0; i < len2; i++) {
    if (!out2[i]) {
      out2[i] = [];
    }
    for (var j2 = 0; j2 < len22; j2++) {
      out2[i][j2] = interpolateNumber(p0[i][j2], p1[i][j2], percent);
    }
  }
  return out2;
}
function add1DArray(out2, p0, p1, sign) {
  var len2 = p0.length;
  for (var i = 0; i < len2; i++) {
    out2[i] = p0[i] + p1[i] * sign;
  }
  return out2;
}
function add2DArray(out2, p0, p1, sign) {
  var len2 = p0.length;
  var len22 = len2 && p0[0].length;
  for (var i = 0; i < len2; i++) {
    if (!out2[i]) {
      out2[i] = [];
    }
    for (var j2 = 0; j2 < len22; j2++) {
      out2[i][j2] = p0[i][j2] + p1[i][j2] * sign;
    }
  }
  return out2;
}
function fillColorStops(val0, val1) {
  var len0 = val0.length;
  var len1 = val1.length;
  var shorterArr = len0 > len1 ? val1 : val0;
  var shorterLen = Math.min(len0, len1);
  var last = shorterArr[shorterLen - 1] || { color: [0, 0, 0, 0], offset: 0 };
  for (var i = shorterLen; i < Math.max(len0, len1); i++) {
    shorterArr.push({
      offset: last.offset,
      color: last.color.slice()
    });
  }
}
function fillArray(val0, val1, arrDim) {
  var arr0 = val0;
  var arr1 = val1;
  if (!arr0.push || !arr1.push) {
    return;
  }
  var arr0Len = arr0.length;
  var arr1Len = arr1.length;
  if (arr0Len !== arr1Len) {
    var isPreviousLarger = arr0Len > arr1Len;
    if (isPreviousLarger) {
      arr0.length = arr1Len;
    } else {
      for (var i = arr0Len; i < arr1Len; i++) {
        arr0.push(arrDim === 1 ? arr1[i] : arraySlice.call(arr1[i]));
      }
    }
  }
  var len2 = arr0[0] && arr0[0].length;
  for (var i = 0; i < arr0.length; i++) {
    if (arrDim === 1) {
      if (isNaN(arr0[i])) {
        arr0[i] = arr1[i];
      }
    } else {
      for (var j2 = 0; j2 < len2; j2++) {
        if (isNaN(arr0[i][j2])) {
          arr0[i][j2] = arr1[i][j2];
        }
      }
    }
  }
}
function cloneValue(value) {
  if (isArrayLike(value)) {
    var len2 = value.length;
    if (isArrayLike(value[0])) {
      var ret = [];
      for (var i = 0; i < len2; i++) {
        ret.push(arraySlice.call(value[i]));
      }
      return ret;
    }
    return arraySlice.call(value);
  }
  return value;
}
function rgba2String(rgba) {
  rgba[0] = Math.floor(rgba[0]) || 0;
  rgba[1] = Math.floor(rgba[1]) || 0;
  rgba[2] = Math.floor(rgba[2]) || 0;
  rgba[3] = rgba[3] == null ? 1 : rgba[3];
  return "rgba(" + rgba.join(",") + ")";
}
function guessArrayDim(value) {
  return isArrayLike(value && value[0]) ? 2 : 1;
}
var VALUE_TYPE_NUMBER = 0;
var VALUE_TYPE_1D_ARRAY = 1;
var VALUE_TYPE_2D_ARRAY = 2;
var VALUE_TYPE_COLOR = 3;
var VALUE_TYPE_LINEAR_GRADIENT = 4;
var VALUE_TYPE_RADIAL_GRADIENT = 5;
var VALUE_TYPE_UNKOWN = 6;
function isGradientValueType(valType) {
  return valType === VALUE_TYPE_LINEAR_GRADIENT || valType === VALUE_TYPE_RADIAL_GRADIENT;
}
function isArrayValueType(valType) {
  return valType === VALUE_TYPE_1D_ARRAY || valType === VALUE_TYPE_2D_ARRAY;
}
var tmpRgba = [0, 0, 0, 0];
var Track = function() {
  function Track2(propName) {
    this.keyframes = [];
    this.discrete = false;
    this._invalid = false;
    this._needsSort = false;
    this._lastFr = 0;
    this._lastFrP = 0;
    this.propName = propName;
  }
  Track2.prototype.isFinished = function() {
    return this._finished;
  };
  Track2.prototype.setFinished = function() {
    this._finished = true;
    if (this._additiveTrack) {
      this._additiveTrack.setFinished();
    }
  };
  Track2.prototype.needsAnimate = function() {
    return this.keyframes.length >= 1;
  };
  Track2.prototype.getAdditiveTrack = function() {
    return this._additiveTrack;
  };
  Track2.prototype.addKeyframe = function(time, rawValue, easing) {
    this._needsSort = true;
    var keyframes = this.keyframes;
    var len2 = keyframes.length;
    var discrete = false;
    var valType = VALUE_TYPE_UNKOWN;
    var value = rawValue;
    if (isArrayLike(rawValue)) {
      var arrayDim = guessArrayDim(rawValue);
      valType = arrayDim;
      if (arrayDim === 1 && !isNumber(rawValue[0]) || arrayDim === 2 && !isNumber(rawValue[0][0])) {
        discrete = true;
      }
    } else {
      if (isNumber(rawValue) && !eqNaN(rawValue)) {
        valType = VALUE_TYPE_NUMBER;
      } else if (isString(rawValue)) {
        if (!isNaN(+rawValue)) {
          valType = VALUE_TYPE_NUMBER;
        } else {
          var colorArray = parse(rawValue);
          if (colorArray) {
            value = colorArray;
            valType = VALUE_TYPE_COLOR;
          }
        }
      } else if (isGradientObject(rawValue)) {
        var parsedGradient = extend({}, value);
        parsedGradient.colorStops = map$1(rawValue.colorStops, function(colorStop) {
          return {
            offset: colorStop.offset,
            color: parse(colorStop.color)
          };
        });
        if (isLinearGradient(rawValue)) {
          valType = VALUE_TYPE_LINEAR_GRADIENT;
        } else if (isRadialGradient(rawValue)) {
          valType = VALUE_TYPE_RADIAL_GRADIENT;
        }
        value = parsedGradient;
      }
    }
    if (len2 === 0) {
      this.valType = valType;
    } else if (valType !== this.valType || valType === VALUE_TYPE_UNKOWN) {
      discrete = true;
    }
    this.discrete = this.discrete || discrete;
    var kf = {
      time,
      value,
      rawValue,
      percent: 0
    };
    if (easing) {
      kf.easing = easing;
      kf.easingFunc = isFunction(easing) ? easing : easingFuncs$1[easing] || createCubicEasingFunc(easing);
    }
    keyframes.push(kf);
    return kf;
  };
  Track2.prototype.prepare = function(maxTime, additiveTrack) {
    var kfs = this.keyframes;
    if (this._needsSort) {
      kfs.sort(function(a, b2) {
        return a.time - b2.time;
      });
    }
    var valType = this.valType;
    var kfsLen = kfs.length;
    var lastKf = kfs[kfsLen - 1];
    var isDiscrete = this.discrete;
    var isArr = isArrayValueType(valType);
    var isGradient = isGradientValueType(valType);
    for (var i = 0; i < kfsLen; i++) {
      var kf = kfs[i];
      var value = kf.value;
      var lastValue = lastKf.value;
      kf.percent = kf.time / maxTime;
      if (!isDiscrete) {
        if (isArr && i !== kfsLen - 1) {
          fillArray(value, lastValue, valType);
        } else if (isGradient) {
          fillColorStops(value.colorStops, lastValue.colorStops);
        }
      }
    }
    if (!isDiscrete && valType !== VALUE_TYPE_RADIAL_GRADIENT && additiveTrack && this.needsAnimate() && additiveTrack.needsAnimate() && valType === additiveTrack.valType && !additiveTrack._finished) {
      this._additiveTrack = additiveTrack;
      var startValue = kfs[0].value;
      for (var i = 0; i < kfsLen; i++) {
        if (valType === VALUE_TYPE_NUMBER) {
          kfs[i].additiveValue = kfs[i].value - startValue;
        } else if (valType === VALUE_TYPE_COLOR) {
          kfs[i].additiveValue = add1DArray([], kfs[i].value, startValue, -1);
        } else if (isArrayValueType(valType)) {
          kfs[i].additiveValue = valType === VALUE_TYPE_1D_ARRAY ? add1DArray([], kfs[i].value, startValue, -1) : add2DArray([], kfs[i].value, startValue, -1);
        }
      }
    }
  };
  Track2.prototype.step = function(target, percent) {
    if (this._finished) {
      return;
    }
    if (this._additiveTrack && this._additiveTrack._finished) {
      this._additiveTrack = null;
    }
    var isAdditive = this._additiveTrack != null;
    var valueKey = isAdditive ? "additiveValue" : "value";
    var valType = this.valType;
    var keyframes = this.keyframes;
    var kfsNum = keyframes.length;
    var propName = this.propName;
    var isValueColor = valType === VALUE_TYPE_COLOR;
    var frameIdx;
    var lastFrame = this._lastFr;
    var mathMin2 = Math.min;
    var frame;
    var nextFrame;
    if (kfsNum === 1) {
      frame = nextFrame = keyframes[0];
    } else {
      if (percent < 0) {
        frameIdx = 0;
      } else if (percent < this._lastFrP) {
        var start2 = mathMin2(lastFrame + 1, kfsNum - 1);
        for (frameIdx = start2; frameIdx >= 0; frameIdx--) {
          if (keyframes[frameIdx].percent <= percent) {
            break;
          }
        }
        frameIdx = mathMin2(frameIdx, kfsNum - 2);
      } else {
        for (frameIdx = lastFrame; frameIdx < kfsNum; frameIdx++) {
          if (keyframes[frameIdx].percent > percent) {
            break;
          }
        }
        frameIdx = mathMin2(frameIdx - 1, kfsNum - 2);
      }
      nextFrame = keyframes[frameIdx + 1];
      frame = keyframes[frameIdx];
    }
    if (!(frame && nextFrame)) {
      return;
    }
    this._lastFr = frameIdx;
    this._lastFrP = percent;
    var interval = nextFrame.percent - frame.percent;
    var w2 = interval === 0 ? 1 : mathMin2((percent - frame.percent) / interval, 1);
    if (nextFrame.easingFunc) {
      w2 = nextFrame.easingFunc(w2);
    }
    var targetArr = isAdditive ? this._additiveValue : isValueColor ? tmpRgba : target[propName];
    if ((isArrayValueType(valType) || isValueColor) && !targetArr) {
      targetArr = this._additiveValue = [];
    }
    if (this.discrete) {
      target[propName] = w2 < 1 ? frame.rawValue : nextFrame.rawValue;
    } else if (isArrayValueType(valType)) {
      valType === VALUE_TYPE_1D_ARRAY ? interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w2) : interpolate2DArray(targetArr, frame[valueKey], nextFrame[valueKey], w2);
    } else if (isGradientValueType(valType)) {
      var val = frame[valueKey];
      var nextVal_1 = nextFrame[valueKey];
      var isLinearGradient_1 = valType === VALUE_TYPE_LINEAR_GRADIENT;
      target[propName] = {
        type: isLinearGradient_1 ? "linear" : "radial",
        x: interpolateNumber(val.x, nextVal_1.x, w2),
        y: interpolateNumber(val.y, nextVal_1.y, w2),
        colorStops: map$1(val.colorStops, function(colorStop, idx) {
          var nextColorStop = nextVal_1.colorStops[idx];
          return {
            offset: interpolateNumber(colorStop.offset, nextColorStop.offset, w2),
            color: rgba2String(interpolate1DArray([], colorStop.color, nextColorStop.color, w2))
          };
        }),
        global: nextVal_1.global
      };
      if (isLinearGradient_1) {
        target[propName].x2 = interpolateNumber(val.x2, nextVal_1.x2, w2);
        target[propName].y2 = interpolateNumber(val.y2, nextVal_1.y2, w2);
      } else {
        target[propName].r = interpolateNumber(val.r, nextVal_1.r, w2);
      }
    } else if (isValueColor) {
      interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w2);
      if (!isAdditive) {
        target[propName] = rgba2String(targetArr);
      }
    } else {
      var value = interpolateNumber(frame[valueKey], nextFrame[valueKey], w2);
      if (isAdditive) {
        this._additiveValue = value;
      } else {
        target[propName] = value;
      }
    }
    if (isAdditive) {
      this._addToTarget(target);
    }
  };
  Track2.prototype._addToTarget = function(target) {
    var valType = this.valType;
    var propName = this.propName;
    var additiveValue = this._additiveValue;
    if (valType === VALUE_TYPE_NUMBER) {
      target[propName] = target[propName] + additiveValue;
    } else if (valType === VALUE_TYPE_COLOR) {
      parse(target[propName], tmpRgba);
      add1DArray(tmpRgba, tmpRgba, additiveValue, 1);
      target[propName] = rgba2String(tmpRgba);
    } else if (valType === VALUE_TYPE_1D_ARRAY) {
      add1DArray(target[propName], target[propName], additiveValue, 1);
    } else if (valType === VALUE_TYPE_2D_ARRAY) {
      add2DArray(target[propName], target[propName], additiveValue, 1);
    }
  };
  return Track2;
}();
var Animator = function() {
  function Animator2(target, loop, allowDiscreteAnimation, additiveTo) {
    this._tracks = {};
    this._trackKeys = [];
    this._maxTime = 0;
    this._started = 0;
    this._clip = null;
    this._target = target;
    this._loop = loop;
    if (loop && additiveTo) {
      logError("Can' use additive animation on looped animation.");
      return;
    }
    this._additiveAnimators = additiveTo;
    this._allowDiscrete = allowDiscreteAnimation;
  }
  Animator2.prototype.getMaxTime = function() {
    return this._maxTime;
  };
  Animator2.prototype.getDelay = function() {
    return this._delay;
  };
  Animator2.prototype.getLoop = function() {
    return this._loop;
  };
  Animator2.prototype.getTarget = function() {
    return this._target;
  };
  Animator2.prototype.changeTarget = function(target) {
    this._target = target;
  };
  Animator2.prototype.when = function(time, props, easing) {
    return this.whenWithKeys(time, props, keys(props), easing);
  };
  Animator2.prototype.whenWithKeys = function(time, props, propNames, easing) {
    var tracks = this._tracks;
    for (var i = 0; i < propNames.length; i++) {
      var propName = propNames[i];
      var track = tracks[propName];
      if (!track) {
        track = tracks[propName] = new Track(propName);
        var initialValue = void 0;
        var additiveTrack = this._getAdditiveTrack(propName);
        if (additiveTrack) {
          var addtiveTrackKfs = additiveTrack.keyframes;
          var lastFinalKf = addtiveTrackKfs[addtiveTrackKfs.length - 1];
          initialValue = lastFinalKf && lastFinalKf.value;
          if (additiveTrack.valType === VALUE_TYPE_COLOR && initialValue) {
            initialValue = rgba2String(initialValue);
          }
        } else {
          initialValue = this._target[propName];
        }
        if (initialValue == null) {
          continue;
        }
        if (time > 0) {
          track.addKeyframe(0, cloneValue(initialValue), easing);
        }
        this._trackKeys.push(propName);
      }
      track.addKeyframe(time, cloneValue(props[propName]), easing);
    }
    this._maxTime = Math.max(this._maxTime, time);
    return this;
  };
  Animator2.prototype.pause = function() {
    this._clip.pause();
    this._paused = true;
  };
  Animator2.prototype.resume = function() {
    this._clip.resume();
    this._paused = false;
  };
  Animator2.prototype.isPaused = function() {
    return !!this._paused;
  };
  Animator2.prototype.duration = function(duration) {
    this._maxTime = duration;
    this._force = true;
    return this;
  };
  Animator2.prototype._doneCallback = function() {
    this._setTracksFinished();
    this._clip = null;
    var doneList = this._doneCbs;
    if (doneList) {
      var len2 = doneList.length;
      for (var i = 0; i < len2; i++) {
        doneList[i].call(this);
      }
    }
  };
  Animator2.prototype._abortedCallback = function() {
    this._setTracksFinished();
    var animation = this.animation;
    var abortedList = this._abortedCbs;
    if (animation) {
      animation.removeClip(this._clip);
    }
    this._clip = null;
    if (abortedList) {
      for (var i = 0; i < abortedList.length; i++) {
        abortedList[i].call(this);
      }
    }
  };
  Animator2.prototype._setTracksFinished = function() {
    var tracks = this._tracks;
    var tracksKeys = this._trackKeys;
    for (var i = 0; i < tracksKeys.length; i++) {
      tracks[tracksKeys[i]].setFinished();
    }
  };
  Animator2.prototype._getAdditiveTrack = function(trackName) {
    var additiveTrack;
    var additiveAnimators = this._additiveAnimators;
    if (additiveAnimators) {
      for (var i = 0; i < additiveAnimators.length; i++) {
        var track = additiveAnimators[i].getTrack(trackName);
        if (track) {
          additiveTrack = track;
        }
      }
    }
    return additiveTrack;
  };
  Animator2.prototype.start = function(easing) {
    if (this._started > 0) {
      return;
    }
    this._started = 1;
    var self2 = this;
    var tracks = [];
    var maxTime = this._maxTime || 0;
    for (var i = 0; i < this._trackKeys.length; i++) {
      var propName = this._trackKeys[i];
      var track = this._tracks[propName];
      var additiveTrack = this._getAdditiveTrack(propName);
      var kfs = track.keyframes;
      var kfsNum = kfs.length;
      track.prepare(maxTime, additiveTrack);
      if (track.needsAnimate()) {
        if (!this._allowDiscrete && track.discrete) {
          var lastKf = kfs[kfsNum - 1];
          if (lastKf) {
            self2._target[track.propName] = lastKf.rawValue;
          }
          track.setFinished();
        } else {
          tracks.push(track);
        }
      }
    }
    if (tracks.length || this._force) {
      var clip = new Clip$1({
        life: maxTime,
        loop: this._loop,
        delay: this._delay || 0,
        onframe: function(percent) {
          self2._started = 2;
          var additiveAnimators = self2._additiveAnimators;
          if (additiveAnimators) {
            var stillHasAdditiveAnimator = false;
            for (var i2 = 0; i2 < additiveAnimators.length; i2++) {
              if (additiveAnimators[i2]._clip) {
                stillHasAdditiveAnimator = true;
                break;
              }
            }
            if (!stillHasAdditiveAnimator) {
              self2._additiveAnimators = null;
            }
          }
          for (var i2 = 0; i2 < tracks.length; i2++) {
            tracks[i2].step(self2._target, percent);
          }
          var onframeList = self2._onframeCbs;
          if (onframeList) {
            for (var i2 = 0; i2 < onframeList.length; i2++) {
              onframeList[i2](self2._target, percent);
            }
          }
        },
        ondestroy: function() {
          self2._doneCallback();
        }
      });
      this._clip = clip;
      if (this.animation) {
        this.animation.addClip(clip);
      }
      if (easing) {
        clip.setEasing(easing);
      }
    } else {
      this._doneCallback();
    }
    return this;
  };
  Animator2.prototype.stop = function(forwardToLast) {
    if (!this._clip) {
      return;
    }
    var clip = this._clip;
    if (forwardToLast) {
      clip.onframe(1);
    }
    this._abortedCallback();
  };
  Animator2.prototype.delay = function(time) {
    this._delay = time;
    return this;
  };
  Animator2.prototype.during = function(cb) {
    if (cb) {
      if (!this._onframeCbs) {
        this._onframeCbs = [];
      }
      this._onframeCbs.push(cb);
    }
    return this;
  };
  Animator2.prototype.done = function(cb) {
    if (cb) {
      if (!this._doneCbs) {
        this._doneCbs = [];
      }
      this._doneCbs.push(cb);
    }
    return this;
  };
  Animator2.prototype.aborted = function(cb) {
    if (cb) {
      if (!this._abortedCbs) {
        this._abortedCbs = [];
      }
      this._abortedCbs.push(cb);
    }
    return this;
  };
  Animator2.prototype.getClip = function() {
    return this._clip;
  };
  Animator2.prototype.getTrack = function(propName) {
    return this._tracks[propName];
  };
  Animator2.prototype.getTracks = function() {
    var _this = this;
    return map$1(this._trackKeys, function(key) {
      return _this._tracks[key];
    });
  };
  Animator2.prototype.stopTracks = function(propNames, forwardToLast) {
    if (!propNames.length || !this._clip) {
      return true;
    }
    var tracks = this._tracks;
    var tracksKeys = this._trackKeys;
    for (var i = 0; i < propNames.length; i++) {
      var track = tracks[propNames[i]];
      if (track && !track.isFinished()) {
        if (forwardToLast) {
          track.step(this._target, 1);
        } else if (this._started === 1) {
          track.step(this._target, 0);
        }
        track.setFinished();
      }
    }
    var allAborted = true;
    for (var i = 0; i < tracksKeys.length; i++) {
      if (!tracks[tracksKeys[i]].isFinished()) {
        allAborted = false;
        break;
      }
    }
    if (allAborted) {
      this._abortedCallback();
    }
    return allAborted;
  };
  Animator2.prototype.saveTo = function(target, trackKeys, firstOrLast) {
    if (!target) {
      return;
    }
    trackKeys = trackKeys || this._trackKeys;
    for (var i = 0; i < trackKeys.length; i++) {
      var propName = trackKeys[i];
      var track = this._tracks[propName];
      if (!track || track.isFinished()) {
        continue;
      }
      var kfs = track.keyframes;
      var kf = kfs[firstOrLast ? 0 : kfs.length - 1];
      if (kf) {
        target[propName] = cloneValue(kf.rawValue);
      }
    }
  };
  Animator2.prototype.__changeFinalValue = function(finalProps, trackKeys) {
    trackKeys = trackKeys || keys(finalProps);
    for (var i = 0; i < trackKeys.length; i++) {
      var propName = trackKeys[i];
      var track = this._tracks[propName];
      if (!track) {
        continue;
      }
      var kfs = track.keyframes;
      if (kfs.length > 1) {
        var lastKf = kfs.pop();
        track.addKeyframe(lastKf.time, finalProps[propName]);
        track.prepare(this._maxTime, track.getAdditiveTrack());
      }
    }
  };
  return Animator2;
}();
var Animator$1 = Animator;
function getTime() {
  return new Date().getTime();
}
var Animation = function(_super) {
  __extends(Animation2, _super);
  function Animation2(opts) {
    var _this = _super.call(this) || this;
    _this._running = false;
    _this._time = 0;
    _this._pausedTime = 0;
    _this._pauseStart = 0;
    _this._paused = false;
    opts = opts || {};
    _this.stage = opts.stage || {};
    return _this;
  }
  Animation2.prototype.addClip = function(clip) {
    if (clip.animation) {
      this.removeClip(clip);
    }
    if (!this._head) {
      this._head = this._tail = clip;
    } else {
      this._tail.next = clip;
      clip.prev = this._tail;
      clip.next = null;
      this._tail = clip;
    }
    clip.animation = this;
  };
  Animation2.prototype.addAnimator = function(animator) {
    animator.animation = this;
    var clip = animator.getClip();
    if (clip) {
      this.addClip(clip);
    }
  };
  Animation2.prototype.removeClip = function(clip) {
    if (!clip.animation) {
      return;
    }
    var prev = clip.prev;
    var next = clip.next;
    if (prev) {
      prev.next = next;
    } else {
      this._head = next;
    }
    if (next) {
      next.prev = prev;
    } else {
      this._tail = prev;
    }
    clip.next = clip.prev = clip.animation = null;
  };
  Animation2.prototype.removeAnimator = function(animator) {
    var clip = animator.getClip();
    if (clip) {
      this.removeClip(clip);
    }
    animator.animation = null;
  };
  Animation2.prototype.update = function(notTriggerFrameAndStageUpdate) {
    var time = getTime() - this._pausedTime;
    var delta = time - this._time;
    var clip = this._head;
    while (clip) {
      var nextClip = clip.next;
      var finished = clip.step(time, delta);
      if (finished) {
        clip.ondestroy();
        this.removeClip(clip);
        clip = nextClip;
      } else {
        clip = nextClip;
      }
    }
    this._time = time;
    if (!notTriggerFrameAndStageUpdate) {
      this.trigger("frame", delta);
      this.stage.update && this.stage.update();
    }
  };
  Animation2.prototype._startLoop = function() {
    var self2 = this;
    this._running = true;
    function step() {
      if (self2._running) {
        requestAnimationFrame$2(step);
        !self2._paused && self2.update();
      }
    }
    requestAnimationFrame$2(step);
  };
  Animation2.prototype.start = function() {
    if (this._running) {
      return;
    }
    this._time = getTime();
    this._pausedTime = 0;
    this._startLoop();
  };
  Animation2.prototype.stop = function() {
    this._running = false;
  };
  Animation2.prototype.pause = function() {
    if (!this._paused) {
      this._pauseStart = getTime();
      this._paused = true;
    }
  };
  Animation2.prototype.resume = function() {
    if (this._paused) {
      this._pausedTime += getTime() - this._pauseStart;
      this._paused = false;
    }
  };
  Animation2.prototype.clear = function() {
    var clip = this._head;
    while (clip) {
      var nextClip = clip.next;
      clip.prev = clip.next = clip.animation = null;
      clip = nextClip;
    }
    this._head = this._tail = null;
  };
  Animation2.prototype.isFinished = function() {
    return this._head == null;
  };
  Animation2.prototype.animate = function(target, options) {
    options = options || {};
    this.start();
    var animator = new Animator$1(target, options.loop);
    this.addAnimator(animator);
    return animator;
  };
  return Animation2;
}(Eventful$1);
var Animation$1 = Animation;
var TOUCH_CLICK_DELAY = 300;
var globalEventSupported = env$1.domSupported;
var localNativeListenerNames = function() {
  var mouseHandlerNames = [
    "click",
    "dblclick",
    "mousewheel",
    "wheel",
    "mouseout",
    "mouseup",
    "mousedown",
    "mousemove",
    "contextmenu"
  ];
  var touchHandlerNames = [
    "touchstart",
    "touchend",
    "touchmove"
  ];
  var pointerEventNameMap = {
    pointerdown: 1,
    pointerup: 1,
    pointermove: 1,
    pointerout: 1
  };
  var pointerHandlerNames = map$1(mouseHandlerNames, function(name) {
    var nm = name.replace("mouse", "pointer");
    return pointerEventNameMap.hasOwnProperty(nm) ? nm : name;
  });
  return {
    mouse: mouseHandlerNames,
    touch: touchHandlerNames,
    pointer: pointerHandlerNames
  };
}();
var globalNativeListenerNames = {
  mouse: ["mousemove", "mouseup"],
  pointer: ["pointermove", "pointerup"]
};
var wheelEventSupported = false;
function isPointerFromTouch(event) {
  var pointerType = event.pointerType;
  return pointerType === "pen" || pointerType === "touch";
}
function setTouchTimer(scope) {
  scope.touching = true;
  if (scope.touchTimer != null) {
    clearTimeout(scope.touchTimer);
    scope.touchTimer = null;
  }
  scope.touchTimer = setTimeout(function() {
    scope.touching = false;
    scope.touchTimer = null;
  }, 700);
}
function markTouch(event) {
  event && (event.zrByTouch = true);
}
function normalizeGlobalEvent(instance, event) {
  return normalizeEvent(instance.dom, new FakeGlobalEvent(instance, event), true);
}
function isLocalEl(instance, el) {
  var elTmp = el;
  var isLocal = false;
  while (elTmp && elTmp.nodeType !== 9 && !(isLocal = elTmp.domBelongToZr || elTmp !== el && elTmp === instance.painterRoot)) {
    elTmp = elTmp.parentNode;
  }
  return isLocal;
}
var FakeGlobalEvent = function() {
  function FakeGlobalEvent2(instance, event) {
    this.stopPropagation = noop;
    this.stopImmediatePropagation = noop;
    this.preventDefault = noop;
    this.type = event.type;
    this.target = this.currentTarget = instance.dom;
    this.pointerType = event.pointerType;
    this.clientX = event.clientX;
    this.clientY = event.clientY;
  }
  return FakeGlobalEvent2;
}();
var localDOMHandlers = {
  mousedown: function(event) {
    event = normalizeEvent(this.dom, event);
    this.__mayPointerCapture = [event.zrX, event.zrY];
    this.trigger("mousedown", event);
  },
  mousemove: function(event) {
    event = normalizeEvent(this.dom, event);
    var downPoint = this.__mayPointerCapture;
    if (downPoint && (event.zrX !== downPoint[0] || event.zrY !== downPoint[1])) {
      this.__togglePointerCapture(true);
    }
    this.trigger("mousemove", event);
  },
  mouseup: function(event) {
    event = normalizeEvent(this.dom, event);
    this.__togglePointerCapture(false);
    this.trigger("mouseup", event);
  },
  mouseout: function(event) {
    event = normalizeEvent(this.dom, event);
    var element = event.toElement || event.relatedTarget;
    if (!isLocalEl(this, element)) {
      if (this.__pointerCapturing) {
        event.zrEventControl = "no_globalout";
      }
      this.trigger("mouseout", event);
    }
  },
  wheel: function(event) {
    wheelEventSupported = true;
    event = normalizeEvent(this.dom, event);
    this.trigger("mousewheel", event);
  },
  mousewheel: function(event) {
    if (wheelEventSupported) {
      return;
    }
    event = normalizeEvent(this.dom, event);
    this.trigger("mousewheel", event);
  },
  touchstart: function(event) {
    event = normalizeEvent(this.dom, event);
    markTouch(event);
    this.__lastTouchMoment = new Date();
    this.handler.processGesture(event, "start");
    localDOMHandlers.mousemove.call(this, event);
    localDOMHandlers.mousedown.call(this, event);
  },
  touchmove: function(event) {
    event = normalizeEvent(this.dom, event);
    markTouch(event);
    this.handler.processGesture(event, "change");
    localDOMHandlers.mousemove.call(this, event);
  },
  touchend: function(event) {
    event = normalizeEvent(this.dom, event);
    markTouch(event);
    this.handler.processGesture(event, "end");
    localDOMHandlers.mouseup.call(this, event);
    if (+new Date() - +this.__lastTouchMoment < TOUCH_CLICK_DELAY) {
      localDOMHandlers.click.call(this, event);
    }
  },
  pointerdown: function(event) {
    localDOMHandlers.mousedown.call(this, event);
  },
  pointermove: function(event) {
    if (!isPointerFromTouch(event)) {
      localDOMHandlers.mousemove.call(this, event);
    }
  },
  pointerup: function(event) {
    localDOMHandlers.mouseup.call(this, event);
  },
  pointerout: function(event) {
    if (!isPointerFromTouch(event)) {
      localDOMHandlers.mouseout.call(this, event);
    }
  }
};
each$4(["click", "dblclick", "contextmenu"], function(name) {
  localDOMHandlers[name] = function(event) {
    event = normalizeEvent(this.dom, event);
    this.trigger(name, event);
  };
});
var globalDOMHandlers = {
  pointermove: function(event) {
    if (!isPointerFromTouch(event)) {
      globalDOMHandlers.mousemove.call(this, event);
    }
  },
  pointerup: function(event) {
    globalDOMHandlers.mouseup.call(this, event);
  },
  mousemove: function(event) {
    this.trigger("mousemove", event);
  },
  mouseup: function(event) {
    var pointerCaptureReleasing = this.__pointerCapturing;
    this.__togglePointerCapture(false);
    this.trigger("mouseup", event);
    if (pointerCaptureReleasing) {
      event.zrEventControl = "only_globalout";
      this.trigger("mouseout", event);
    }
  }
};
function mountLocalDOMEventListeners(instance, scope) {
  var domHandlers = scope.domHandlers;
  if (env$1.pointerEventsSupported) {
    each$4(localNativeListenerNames.pointer, function(nativeEventName) {
      mountSingleDOMEventListener(scope, nativeEventName, function(event) {
        domHandlers[nativeEventName].call(instance, event);
      });
    });
  } else {
    if (env$1.touchEventsSupported) {
      each$4(localNativeListenerNames.touch, function(nativeEventName) {
        mountSingleDOMEventListener(scope, nativeEventName, function(event) {
          domHandlers[nativeEventName].call(instance, event);
          setTouchTimer(scope);
        });
      });
    }
    each$4(localNativeListenerNames.mouse, function(nativeEventName) {
      mountSingleDOMEventListener(scope, nativeEventName, function(event) {
        event = getNativeEvent(event);
        if (!scope.touching) {
          domHandlers[nativeEventName].call(instance, event);
        }
      });
    });
  }
}
function mountGlobalDOMEventListeners(instance, scope) {
  if (env$1.pointerEventsSupported) {
    each$4(globalNativeListenerNames.pointer, mount);
  } else if (!env$1.touchEventsSupported) {
    each$4(globalNativeListenerNames.mouse, mount);
  }
  function mount(nativeEventName) {
    function nativeEventListener(event) {
      event = getNativeEvent(event);
      if (!isLocalEl(instance, event.target)) {
        event = normalizeGlobalEvent(instance, event);
        scope.domHandlers[nativeEventName].call(instance, event);
      }
    }
    mountSingleDOMEventListener(scope, nativeEventName, nativeEventListener, { capture: true });
  }
}
function mountSingleDOMEventListener(scope, nativeEventName, listener, opt) {
  scope.mounted[nativeEventName] = listener;
  scope.listenerOpts[nativeEventName] = opt;
  addEventListener(scope.domTarget, nativeEventName, listener, opt);
}
function unmountDOMEventListeners(scope) {
  var mounted = scope.mounted;
  for (var nativeEventName in mounted) {
    if (mounted.hasOwnProperty(nativeEventName)) {
      removeEventListener(scope.domTarget, nativeEventName, mounted[nativeEventName], scope.listenerOpts[nativeEventName]);
    }
  }
  scope.mounted = {};
}
var DOMHandlerScope = function() {
  function DOMHandlerScope2(domTarget, domHandlers) {
    this.mounted = {};
    this.listenerOpts = {};
    this.touching = false;
    this.domTarget = domTarget;
    this.domHandlers = domHandlers;
  }
  return DOMHandlerScope2;
}();
var HandlerDomProxy = function(_super) {
  __extends(HandlerDomProxy2, _super);
  function HandlerDomProxy2(dom, painterRoot) {
    var _this = _super.call(this) || this;
    _this.__pointerCapturing = false;
    _this.dom = dom;
    _this.painterRoot = painterRoot;
    _this._localHandlerScope = new DOMHandlerScope(dom, localDOMHandlers);
    if (globalEventSupported) {
      _this._globalHandlerScope = new DOMHandlerScope(document, globalDOMHandlers);
    }
    mountLocalDOMEventListeners(_this, _this._localHandlerScope);
    return _this;
  }
  HandlerDomProxy2.prototype.dispose = function() {
    unmountDOMEventListeners(this._localHandlerScope);
    if (globalEventSupported) {
      unmountDOMEventListeners(this._globalHandlerScope);
    }
  };
  HandlerDomProxy2.prototype.setCursor = function(cursorStyle) {
    this.dom.style && (this.dom.style.cursor = cursorStyle || "default");
  };
  HandlerDomProxy2.prototype.__togglePointerCapture = function(isPointerCapturing) {
    this.__mayPointerCapture = null;
    if (globalEventSupported && +this.__pointerCapturing ^ +isPointerCapturing) {
      this.__pointerCapturing = isPointerCapturing;
      var globalHandlerScope = this._globalHandlerScope;
      isPointerCapturing ? mountGlobalDOMEventListeners(this, globalHandlerScope) : unmountDOMEventListeners(globalHandlerScope);
    }
  };
  return HandlerDomProxy2;
}(Eventful$1);
var HandlerProxy = HandlerDomProxy;
var dpr = 1;
if (env$1.hasGlobalWindow) {
  dpr = Math.max(window.devicePixelRatio || window.screen && window.screen.deviceXDPI / window.screen.logicalXDPI || 1, 1);
}
var devicePixelRatio = dpr;
var DARK_MODE_THRESHOLD = 0.4;
var DARK_LABEL_COLOR = "#333";
var LIGHT_LABEL_COLOR = "#ccc";
var LIGHTER_LABEL_COLOR = "#eee";
var mIdentity = identity;
var EPSILON$1 = 5e-5;
function isNotAroundZero(val) {
  return val > EPSILON$1 || val < -EPSILON$1;
}
var scaleTmp = [];
var tmpTransform = [];
var originTransform = create();
var abs = Math.abs;
var Transformable = function() {
  function Transformable2() {
  }
  Transformable2.prototype.getLocalTransform = function(m2) {
    return Transformable2.getLocalTransform(this, m2);
  };
  Transformable2.prototype.setPosition = function(arr) {
    this.x = arr[0];
    this.y = arr[1];
  };
  Transformable2.prototype.setScale = function(arr) {
    this.scaleX = arr[0];
    this.scaleY = arr[1];
  };
  Transformable2.prototype.setSkew = function(arr) {
    this.skewX = arr[0];
    this.skewY = arr[1];
  };
  Transformable2.prototype.setOrigin = function(arr) {
    this.originX = arr[0];
    this.originY = arr[1];
  };
  Transformable2.prototype.needLocalTransform = function() {
    return isNotAroundZero(this.rotation) || isNotAroundZero(this.x) || isNotAroundZero(this.y) || isNotAroundZero(this.scaleX - 1) || isNotAroundZero(this.scaleY - 1) || isNotAroundZero(this.skewX) || isNotAroundZero(this.skewY);
  };
  Transformable2.prototype.updateTransform = function() {
    var parentTransform = this.parent && this.parent.transform;
    var needLocalTransform = this.needLocalTransform();
    var m2 = this.transform;
    if (!(needLocalTransform || parentTransform)) {
      if (m2) {
        mIdentity(m2);
        this.invTransform = null;
      }
      return;
    }
    m2 = m2 || create();
    if (needLocalTransform) {
      this.getLocalTransform(m2);
    } else {
      mIdentity(m2);
    }
    if (parentTransform) {
      if (needLocalTransform) {
        mul(m2, parentTransform, m2);
      } else {
        copy(m2, parentTransform);
      }
    }
    this.transform = m2;
    this._resolveGlobalScaleRatio(m2);
  };
  Transformable2.prototype._resolveGlobalScaleRatio = function(m2) {
    var globalScaleRatio = this.globalScaleRatio;
    if (globalScaleRatio != null && globalScaleRatio !== 1) {
      this.getGlobalScale(scaleTmp);
      var relX = scaleTmp[0] < 0 ? -1 : 1;
      var relY = scaleTmp[1] < 0 ? -1 : 1;
      var sx = ((scaleTmp[0] - relX) * globalScaleRatio + relX) / scaleTmp[0] || 0;
      var sy = ((scaleTmp[1] - relY) * globalScaleRatio + relY) / scaleTmp[1] || 0;
      m2[0] *= sx;
      m2[1] *= sx;
      m2[2] *= sy;
      m2[3] *= sy;
    }
    this.invTransform = this.invTransform || create();
    invert(this.invTransform, m2);
  };
  Transformable2.prototype.getComputedTransform = function() {
    var transformNode = this;
    var ancestors = [];
    while (transformNode) {
      ancestors.push(transformNode);
      transformNode = transformNode.parent;
    }
    while (transformNode = ancestors.pop()) {
      transformNode.updateTransform();
    }
    return this.transform;
  };
  Transformable2.prototype.setLocalTransform = function(m2) {
    if (!m2) {
      return;
    }
    var sx = m2[0] * m2[0] + m2[1] * m2[1];
    var sy = m2[2] * m2[2] + m2[3] * m2[3];
    var rotation = Math.atan2(m2[1], m2[0]);
    var shearX = Math.PI / 2 + rotation - Math.atan2(m2[3], m2[2]);
    sy = Math.sqrt(sy) * Math.cos(shearX);
    sx = Math.sqrt(sx);
    this.skewX = shearX;
    this.skewY = 0;
    this.rotation = -rotation;
    this.x = +m2[4];
    this.y = +m2[5];
    this.scaleX = sx;
    this.scaleY = sy;
    this.originX = 0;
    this.originY = 0;
  };
  Transformable2.prototype.decomposeTransform = function() {
    if (!this.transform) {
      return;
    }
    var parent = this.parent;
    var m2 = this.transform;
    if (parent && parent.transform) {
      mul(tmpTransform, parent.invTransform, m2);
      m2 = tmpTransform;
    }
    var ox = this.originX;
    var oy = this.originY;
    if (ox || oy) {
      originTransform[4] = ox;
      originTransform[5] = oy;
      mul(tmpTransform, m2, originTransform);
      tmpTransform[4] -= ox;
      tmpTransform[5] -= oy;
      m2 = tmpTransform;
    }
    this.setLocalTransform(m2);
  };
  Transformable2.prototype.getGlobalScale = function(out2) {
    var m2 = this.transform;
    out2 = out2 || [];
    if (!m2) {
      out2[0] = 1;
      out2[1] = 1;
      return out2;
    }
    out2[0] = Math.sqrt(m2[0] * m2[0] + m2[1] * m2[1]);
    out2[1] = Math.sqrt(m2[2] * m2[2] + m2[3] * m2[3]);
    if (m2[0] < 0) {
      out2[0] = -out2[0];
    }
    if (m2[3] < 0) {
      out2[1] = -out2[1];
    }
    return out2;
  };
  Transformable2.prototype.transformCoordToLocal = function(x2, y2) {
    var v2 = [x2, y2];
    var invTransform = this.invTransform;
    if (invTransform) {
      applyTransform$1(v2, v2, invTransform);
    }
    return v2;
  };
  Transformable2.prototype.transformCoordToGlobal = function(x2, y2) {
    var v2 = [x2, y2];
    var transform = this.transform;
    if (transform) {
      applyTransform$1(v2, v2, transform);
    }
    return v2;
  };
  Transformable2.prototype.getLineScale = function() {
    var m2 = this.transform;
    return m2 && abs(m2[0] - 1) > 1e-10 && abs(m2[3] - 1) > 1e-10 ? Math.sqrt(abs(m2[0] * m2[3] - m2[2] * m2[1])) : 1;
  };
  Transformable2.prototype.copyTransform = function(source) {
    copyTransform(this, source);
  };
  Transformable2.getLocalTransform = function(target, m2) {
    m2 = m2 || [];
    var ox = target.originX || 0;
    var oy = target.originY || 0;
    var sx = target.scaleX;
    var sy = target.scaleY;
    var ax = target.anchorX;
    var ay = target.anchorY;
    var rotation = target.rotation || 0;
    var x2 = target.x;
    var y2 = target.y;
    var skewX = target.skewX ? Math.tan(target.skewX) : 0;
    var skewY = target.skewY ? Math.tan(-target.skewY) : 0;
    if (ox || oy || ax || ay) {
      var dx = ox + ax;
      var dy = oy + ay;
      m2[4] = -dx * sx - skewX * dy * sy;
      m2[5] = -dy * sy - skewY * dx * sx;
    } else {
      m2[4] = m2[5] = 0;
    }
    m2[0] = sx;
    m2[3] = sy;
    m2[1] = skewY * sx;
    m2[2] = skewX * sy;
    rotation && rotate(m2, m2, rotation);
    m2[4] += ox + x2;
    m2[5] += oy + y2;
    return m2;
  };
  Transformable2.initDefaultProps = function() {
    var proto = Transformable2.prototype;
    proto.scaleX = proto.scaleY = proto.globalScaleRatio = 1;
    proto.x = proto.y = proto.originX = proto.originY = proto.skewX = proto.skewY = proto.rotation = proto.anchorX = proto.anchorY = 0;
  }();
  return Transformable2;
}();
var TRANSFORMABLE_PROPS = [
  "x",
  "y",
  "originX",
  "originY",
  "anchorX",
  "anchorY",
  "rotation",
  "scaleX",
  "scaleY",
  "skewX",
  "skewY"
];
function copyTransform(target, source) {
  for (var i = 0; i < TRANSFORMABLE_PROPS.length; i++) {
    var propName = TRANSFORMABLE_PROPS[i];
    target[propName] = source[propName];
  }
}
var textWidthCache = {};
function getWidth(text, font) {
  font = font || DEFAULT_FONT;
  var cacheOfFont = textWidthCache[font];
  if (!cacheOfFont) {
    cacheOfFont = textWidthCache[font] = new LRU$1(500);
  }
  var width = cacheOfFont.get(text);
  if (width == null) {
    width = platformApi.measureText(text, font).width;
    cacheOfFont.put(text, width);
  }
  return width;
}
function innerGetBoundingRect(text, font, textAlign, textBaseline) {
  var width = getWidth(text, font);
  var height = getLineHeight(font);
  var x2 = adjustTextX(0, width, textAlign);
  var y2 = adjustTextY(0, height, textBaseline);
  var rect = new BoundingRect$1(x2, y2, width, height);
  return rect;
}
function getBoundingRect(text, font, textAlign, textBaseline) {
  var textLines = ((text || "") + "").split("\n");
  var len2 = textLines.length;
  if (len2 === 1) {
    return innerGetBoundingRect(textLines[0], font, textAlign, textBaseline);
  } else {
    var uniondRect = new BoundingRect$1(0, 0, 0, 0);
    for (var i = 0; i < textLines.length; i++) {
      var rect = innerGetBoundingRect(textLines[i], font, textAlign, textBaseline);
      i === 0 ? uniondRect.copy(rect) : uniondRect.union(rect);
    }
    return uniondRect;
  }
}
function adjustTextX(x2, width, textAlign) {
  if (textAlign === "right") {
    x2 -= width;
  } else if (textAlign === "center") {
    x2 -= width / 2;
  }
  return x2;
}
function adjustTextY(y2, height, verticalAlign) {
  if (verticalAlign === "middle") {
    y2 -= height / 2;
  } else if (verticalAlign === "bottom") {
    y2 -= height;
  }
  return y2;
}
function getLineHeight(font) {
  return getWidth("\u56FD", font);
}
function parsePercent$1(value, maxValue) {
  if (typeof value === "string") {
    if (value.lastIndexOf("%") >= 0) {
      return parseFloat(value) / 100 * maxValue;
    }
    return parseFloat(value);
  }
  return value;
}
function calculateTextPosition(out2, opts, rect) {
  var textPosition = opts.position || "inside";
  var distance2 = opts.distance != null ? opts.distance : 5;
  var height = rect.height;
  var width = rect.width;
  var halfHeight = height / 2;
  var x2 = rect.x;
  var y2 = rect.y;
  var textAlign = "left";
  var textVerticalAlign = "top";
  if (textPosition instanceof Array) {
    x2 += parsePercent$1(textPosition[0], rect.width);
    y2 += parsePercent$1(textPosition[1], rect.height);
    textAlign = null;
    textVerticalAlign = null;
  } else {
    switch (textPosition) {
      case "left":
        x2 -= distance2;
        y2 += halfHeight;
        textAlign = "right";
        textVerticalAlign = "middle";
        break;
      case "right":
        x2 += distance2 + width;
        y2 += halfHeight;
        textVerticalAlign = "middle";
        break;
      case "top":
        x2 += width / 2;
        y2 -= distance2;
        textAlign = "center";
        textVerticalAlign = "bottom";
        break;
      case "bottom":
        x2 += width / 2;
        y2 += height + distance2;
        textAlign = "center";
        break;
      case "inside":
        x2 += width / 2;
        y2 += halfHeight;
        textAlign = "center";
        textVerticalAlign = "middle";
        break;
      case "insideLeft":
        x2 += distance2;
        y2 += halfHeight;
        textVerticalAlign = "middle";
        break;
      case "insideRight":
        x2 += width - distance2;
        y2 += halfHeight;
        textAlign = "right";
        textVerticalAlign = "middle";
        break;
      case "insideTop":
        x2 += width / 2;
        y2 += distance2;
        textAlign = "center";
        break;
      case "insideBottom":
        x2 += width / 2;
        y2 += height - distance2;
        textAlign = "center";
        textVerticalAlign = "bottom";
        break;
      case "insideTopLeft":
        x2 += distance2;
        y2 += distance2;
        break;
      case "insideTopRight":
        x2 += width - distance2;
        y2 += distance2;
        textAlign = "right";
        break;
      case "insideBottomLeft":
        x2 += distance2;
        y2 += height - distance2;
        textVerticalAlign = "bottom";
        break;
      case "insideBottomRight":
        x2 += width - distance2;
        y2 += height - distance2;
        textAlign = "right";
        textVerticalAlign = "bottom";
        break;
    }
  }
  out2 = out2 || {};
  out2.x = x2;
  out2.y = y2;
  out2.align = textAlign;
  out2.verticalAlign = textVerticalAlign;
  return out2;
}
var PRESERVED_NORMAL_STATE = "__zr_normal__";
var PRIMARY_STATES_KEYS$1 = TRANSFORMABLE_PROPS.concat(["ignore"]);
var DEFAULT_ANIMATABLE_MAP = reduce(TRANSFORMABLE_PROPS, function(obj, key) {
  obj[key] = true;
  return obj;
}, { ignore: false });
var tmpTextPosCalcRes = {};
var tmpBoundingRect = new BoundingRect$1(0, 0, 0, 0);
var Element = function() {
  function Element2(props) {
    this.id = guid();
    this.animators = [];
    this.currentStates = [];
    this.states = {};
    this._init(props);
  }
  Element2.prototype._init = function(props) {
    this.attr(props);
  };
  Element2.prototype.drift = function(dx, dy, e2) {
    switch (this.draggable) {
      case "horizontal":
        dy = 0;
        break;
      case "vertical":
        dx = 0;
        break;
    }
    var m2 = this.transform;
    if (!m2) {
      m2 = this.transform = [1, 0, 0, 1, 0, 0];
    }
    m2[4] += dx;
    m2[5] += dy;
    this.decomposeTransform();
    this.markRedraw();
  };
  Element2.prototype.beforeUpdate = function() {
  };
  Element2.prototype.afterUpdate = function() {
  };
  Element2.prototype.update = function() {
    this.updateTransform();
    if (this.__dirty) {
      this.updateInnerText();
    }
  };
  Element2.prototype.updateInnerText = function(forceUpdate) {
    var textEl = this._textContent;
    if (textEl && (!textEl.ignore || forceUpdate)) {
      if (!this.textConfig) {
        this.textConfig = {};
      }
      var textConfig = this.textConfig;
      var isLocal = textConfig.local;
      var innerTransformable = textEl.innerTransformable;
      var textAlign = void 0;
      var textVerticalAlign = void 0;
      var textStyleChanged = false;
      innerTransformable.parent = isLocal ? this : null;
      var innerOrigin = false;
      innerTransformable.copyTransform(textEl);
      if (textConfig.position != null) {
        var layoutRect = tmpBoundingRect;
        if (textConfig.layoutRect) {
          layoutRect.copy(textConfig.layoutRect);
        } else {
          layoutRect.copy(this.getBoundingRect());
        }
        if (!isLocal) {
          layoutRect.applyTransform(this.transform);
        }
        if (this.calculateTextPosition) {
          this.calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);
        } else {
          calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);
        }
        innerTransformable.x = tmpTextPosCalcRes.x;
        innerTransformable.y = tmpTextPosCalcRes.y;
        textAlign = tmpTextPosCalcRes.align;
        textVerticalAlign = tmpTextPosCalcRes.verticalAlign;
        var textOrigin = textConfig.origin;
        if (textOrigin && textConfig.rotation != null) {
          var relOriginX = void 0;
          var relOriginY = void 0;
          if (textOrigin === "center") {
            relOriginX = layoutRect.width * 0.5;
            relOriginY = layoutRect.height * 0.5;
          } else {
            relOriginX = parsePercent$1(textOrigin[0], layoutRect.width);
            relOriginY = parsePercent$1(textOrigin[1], layoutRect.height);
          }
          innerOrigin = true;
          innerTransformable.originX = -innerTransformable.x + relOriginX + (isLocal ? 0 : layoutRect.x);
          innerTransformable.originY = -innerTransformable.y + relOriginY + (isLocal ? 0 : layoutRect.y);
        }
      }
      if (textConfig.rotation != null) {
        innerTransformable.rotation = textConfig.rotation;
      }
      var textOffset = textConfig.offset;
      if (textOffset) {
        innerTransformable.x += textOffset[0];
        innerTransformable.y += textOffset[1];
        if (!innerOrigin) {
          innerTransformable.originX = -textOffset[0];
          innerTransformable.originY = -textOffset[1];
        }
      }
      var isInside = textConfig.inside == null ? typeof textConfig.position === "string" && textConfig.position.indexOf("inside") >= 0 : textConfig.inside;
      var innerTextDefaultStyle = this._innerTextDefaultStyle || (this._innerTextDefaultStyle = {});
      var textFill = void 0;
      var textStroke = void 0;
      var autoStroke = void 0;
      if (isInside && this.canBeInsideText()) {
        textFill = textConfig.insideFill;
        textStroke = textConfig.insideStroke;
        if (textFill == null || textFill === "auto") {
          textFill = this.getInsideTextFill();
        }
        if (textStroke == null || textStroke === "auto") {
          textStroke = this.getInsideTextStroke(textFill);
          autoStroke = true;
        }
      } else {
        textFill = textConfig.outsideFill;
        textStroke = textConfig.outsideStroke;
        if (textFill == null || textFill === "auto") {
          textFill = this.getOutsideFill();
        }
        if (textStroke == null || textStroke === "auto") {
          textStroke = this.getOutsideStroke(textFill);
          autoStroke = true;
        }
      }
      textFill = textFill || "#000";
      if (textFill !== innerTextDefaultStyle.fill || textStroke !== innerTextDefaultStyle.stroke || autoStroke !== innerTextDefaultStyle.autoStroke || textAlign !== innerTextDefaultStyle.align || textVerticalAlign !== innerTextDefaultStyle.verticalAlign) {
        textStyleChanged = true;
        innerTextDefaultStyle.fill = textFill;
        innerTextDefaultStyle.stroke = textStroke;
        innerTextDefaultStyle.autoStroke = autoStroke;
        innerTextDefaultStyle.align = textAlign;
        innerTextDefaultStyle.verticalAlign = textVerticalAlign;
        textEl.setDefaultTextStyle(innerTextDefaultStyle);
      }
      textEl.__dirty |= REDRAW_BIT;
      if (textStyleChanged) {
        textEl.dirtyStyle(true);
      }
    }
  };
  Element2.prototype.canBeInsideText = function() {
    return true;
  };
  Element2.prototype.getInsideTextFill = function() {
    return "#fff";
  };
  Element2.prototype.getInsideTextStroke = function(textFill) {
    return "#000";
  };
  Element2.prototype.getOutsideFill = function() {
    return this.__zr && this.__zr.isDarkMode() ? LIGHT_LABEL_COLOR : DARK_LABEL_COLOR;
  };
  Element2.prototype.getOutsideStroke = function(textFill) {
    var backgroundColor2 = this.__zr && this.__zr.getBackgroundColor();
    var colorArr = typeof backgroundColor2 === "string" && parse(backgroundColor2);
    if (!colorArr) {
      colorArr = [255, 255, 255, 1];
    }
    var alpha = colorArr[3];
    var isDark = this.__zr.isDarkMode();
    for (var i = 0; i < 3; i++) {
      colorArr[i] = colorArr[i] * alpha + (isDark ? 0 : 255) * (1 - alpha);
    }
    colorArr[3] = 1;
    return stringify(colorArr, "rgba");
  };
  Element2.prototype.traverse = function(cb, context) {
  };
  Element2.prototype.attrKV = function(key, value) {
    if (key === "textConfig") {
      this.setTextConfig(value);
    } else if (key === "textContent") {
      this.setTextContent(value);
    } else if (key === "clipPath") {
      this.setClipPath(value);
    } else if (key === "extra") {
      this.extra = this.extra || {};
      extend(this.extra, value);
    } else {
      this[key] = value;
    }
  };
  Element2.prototype.hide = function() {
    this.ignore = true;
    this.markRedraw();
  };
  Element2.prototype.show = function() {
    this.ignore = false;
    this.markRedraw();
  };
  Element2.prototype.attr = function(keyOrObj, value) {
    if (typeof keyOrObj === "string") {
      this.attrKV(keyOrObj, value);
    } else if (isObject$2(keyOrObj)) {
      var obj = keyOrObj;
      var keysArr = keys(obj);
      for (var i = 0; i < keysArr.length; i++) {
        var key = keysArr[i];
        this.attrKV(key, keyOrObj[key]);
      }
    }
    this.markRedraw();
    return this;
  };
  Element2.prototype.saveCurrentToNormalState = function(toState) {
    this._innerSaveToNormal(toState);
    var normalState = this._normalState;
    for (var i = 0; i < this.animators.length; i++) {
      var animator = this.animators[i];
      var fromStateTransition = animator.__fromStateTransition;
      if (animator.getLoop() || fromStateTransition && fromStateTransition !== PRESERVED_NORMAL_STATE) {
        continue;
      }
      var targetName = animator.targetName;
      var target = targetName ? normalState[targetName] : normalState;
      animator.saveTo(target);
    }
  };
  Element2.prototype._innerSaveToNormal = function(toState) {
    var normalState = this._normalState;
    if (!normalState) {
      normalState = this._normalState = {};
    }
    if (toState.textConfig && !normalState.textConfig) {
      normalState.textConfig = this.textConfig;
    }
    this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS$1);
  };
  Element2.prototype._savePrimaryToNormal = function(toState, normalState, primaryKeys) {
    for (var i = 0; i < primaryKeys.length; i++) {
      var key = primaryKeys[i];
      if (toState[key] != null && !(key in normalState)) {
        normalState[key] = this[key];
      }
    }
  };
  Element2.prototype.hasState = function() {
    return this.currentStates.length > 0;
  };
  Element2.prototype.getState = function(name) {
    return this.states[name];
  };
  Element2.prototype.ensureState = function(name) {
    var states = this.states;
    if (!states[name]) {
      states[name] = {};
    }
    return states[name];
  };
  Element2.prototype.clearStates = function(noAnimation) {
    this.useState(PRESERVED_NORMAL_STATE, false, noAnimation);
  };
  Element2.prototype.useState = function(stateName, keepCurrentStates, noAnimation, forceUseHoverLayer) {
    var toNormalState = stateName === PRESERVED_NORMAL_STATE;
    var hasStates = this.hasState();
    if (!hasStates && toNormalState) {
      return;
    }
    var currentStates = this.currentStates;
    var animationCfg = this.stateTransition;
    if (indexOf(currentStates, stateName) >= 0 && (keepCurrentStates || currentStates.length === 1)) {
      return;
    }
    var state;
    if (this.stateProxy && !toNormalState) {
      state = this.stateProxy(stateName);
    }
    if (!state) {
      state = this.states && this.states[stateName];
    }
    if (!state && !toNormalState) {
      logError("State " + stateName + " not exists.");
      return;
    }
    if (!toNormalState) {
      this.saveCurrentToNormalState(state);
    }
    var useHoverLayer = !!(state && state.hoverLayer || forceUseHoverLayer);
    if (useHoverLayer) {
      this._toggleHoverLayerFlag(true);
    }
    this._applyStateObj(stateName, state, this._normalState, keepCurrentStates, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);
    var textContent = this._textContent;
    var textGuide = this._textGuide;
    if (textContent) {
      textContent.useState(stateName, keepCurrentStates, noAnimation, useHoverLayer);
    }
    if (textGuide) {
      textGuide.useState(stateName, keepCurrentStates, noAnimation, useHoverLayer);
    }
    if (toNormalState) {
      this.currentStates = [];
      this._normalState = {};
    } else {
      if (!keepCurrentStates) {
        this.currentStates = [stateName];
      } else {
        this.currentStates.push(stateName);
      }
    }
    this._updateAnimationTargets();
    this.markRedraw();
    if (!useHoverLayer && this.__inHover) {
      this._toggleHoverLayerFlag(false);
      this.__dirty &= ~REDRAW_BIT;
    }
    return state;
  };
  Element2.prototype.useStates = function(states, noAnimation, forceUseHoverLayer) {
    if (!states.length) {
      this.clearStates();
    } else {
      var stateObjects = [];
      var currentStates = this.currentStates;
      var len2 = states.length;
      var notChange = len2 === currentStates.length;
      if (notChange) {
        for (var i = 0; i < len2; i++) {
          if (states[i] !== currentStates[i]) {
            notChange = false;
            break;
          }
        }
      }
      if (notChange) {
        return;
      }
      for (var i = 0; i < len2; i++) {
        var stateName = states[i];
        var stateObj = void 0;
        if (this.stateProxy) {
          stateObj = this.stateProxy(stateName, states);
        }
        if (!stateObj) {
          stateObj = this.states[stateName];
        }
        if (stateObj) {
          stateObjects.push(stateObj);
        }
      }
      var lastStateObj = stateObjects[len2 - 1];
      var useHoverLayer = !!(lastStateObj && lastStateObj.hoverLayer || forceUseHoverLayer);
      if (useHoverLayer) {
        this._toggleHoverLayerFlag(true);
      }
      var mergedState = this._mergeStates(stateObjects);
      var animationCfg = this.stateTransition;
      this.saveCurrentToNormalState(mergedState);
      this._applyStateObj(states.join(","), mergedState, this._normalState, false, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);
      var textContent = this._textContent;
      var textGuide = this._textGuide;
      if (textContent) {
        textContent.useStates(states, noAnimation, useHoverLayer);
      }
      if (textGuide) {
        textGuide.useStates(states, noAnimation, useHoverLayer);
      }
      this._updateAnimationTargets();
      this.currentStates = states.slice();
      this.markRedraw();
      if (!useHoverLayer && this.__inHover) {
        this._toggleHoverLayerFlag(false);
        this.__dirty &= ~REDRAW_BIT;
      }
    }
  };
  Element2.prototype._updateAnimationTargets = function() {
    for (var i = 0; i < this.animators.length; i++) {
      var animator = this.animators[i];
      if (animator.targetName) {
        animator.changeTarget(this[animator.targetName]);
      }
    }
  };
  Element2.prototype.removeState = function(state) {
    var idx = indexOf(this.currentStates, state);
    if (idx >= 0) {
      var currentStates = this.currentStates.slice();
      currentStates.splice(idx, 1);
      this.useStates(currentStates);
    }
  };
  Element2.prototype.replaceState = function(oldState, newState, forceAdd) {
    var currentStates = this.currentStates.slice();
    var idx = indexOf(currentStates, oldState);
    var newStateExists = indexOf(currentStates, newState) >= 0;
    if (idx >= 0) {
      if (!newStateExists) {
        currentStates[idx] = newState;
      } else {
        currentStates.splice(idx, 1);
      }
    } else if (forceAdd && !newStateExists) {
      currentStates.push(newState);
    }
    this.useStates(currentStates);
  };
  Element2.prototype.toggleState = function(state, enable) {
    if (enable) {
      this.useState(state, true);
    } else {
      this.removeState(state);
    }
  };
  Element2.prototype._mergeStates = function(states) {
    var mergedState = {};
    var mergedTextConfig;
    for (var i = 0; i < states.length; i++) {
      var state = states[i];
      extend(mergedState, state);
      if (state.textConfig) {
        mergedTextConfig = mergedTextConfig || {};
        extend(mergedTextConfig, state.textConfig);
      }
    }
    if (mergedTextConfig) {
      mergedState.textConfig = mergedTextConfig;
    }
    return mergedState;
  };
  Element2.prototype._applyStateObj = function(stateName, state, normalState, keepCurrentStates, transition, animationCfg) {
    var needsRestoreToNormal = !(state && keepCurrentStates);
    if (state && state.textConfig) {
      this.textConfig = extend({}, keepCurrentStates ? this.textConfig : normalState.textConfig);
      extend(this.textConfig, state.textConfig);
    } else if (needsRestoreToNormal) {
      if (normalState.textConfig) {
        this.textConfig = normalState.textConfig;
      }
    }
    var transitionTarget = {};
    var hasTransition = false;
    for (var i = 0; i < PRIMARY_STATES_KEYS$1.length; i++) {
      var key = PRIMARY_STATES_KEYS$1[i];
      var propNeedsTransition = transition && DEFAULT_ANIMATABLE_MAP[key];
      if (state && state[key] != null) {
        if (propNeedsTransition) {
          hasTransition = true;
          transitionTarget[key] = state[key];
        } else {
          this[key] = state[key];
        }
      } else if (needsRestoreToNormal) {
        if (normalState[key] != null) {
          if (propNeedsTransition) {
            hasTransition = true;
            transitionTarget[key] = normalState[key];
          } else {
            this[key] = normalState[key];
          }
        }
      }
    }
    if (!transition) {
      for (var i = 0; i < this.animators.length; i++) {
        var animator = this.animators[i];
        var targetName = animator.targetName;
        if (!animator.getLoop()) {
          animator.__changeFinalValue(targetName ? (state || normalState)[targetName] : state || normalState);
        }
      }
    }
    if (hasTransition) {
      this._transitionState(stateName, transitionTarget, animationCfg);
    }
  };
  Element2.prototype._attachComponent = function(componentEl) {
    if (componentEl.__zr && !componentEl.__hostTarget) {
      return;
    }
    if (componentEl === this) {
      return;
    }
    var zr = this.__zr;
    if (zr) {
      componentEl.addSelfToZr(zr);
    }
    componentEl.__zr = zr;
    componentEl.__hostTarget = this;
  };
  Element2.prototype._detachComponent = function(componentEl) {
    if (componentEl.__zr) {
      componentEl.removeSelfFromZr(componentEl.__zr);
    }
    componentEl.__zr = null;
    componentEl.__hostTarget = null;
  };
  Element2.prototype.getClipPath = function() {
    return this._clipPath;
  };
  Element2.prototype.setClipPath = function(clipPath) {
    if (this._clipPath && this._clipPath !== clipPath) {
      this.removeClipPath();
    }
    this._attachComponent(clipPath);
    this._clipPath = clipPath;
    this.markRedraw();
  };
  Element2.prototype.removeClipPath = function() {
    var clipPath = this._clipPath;
    if (clipPath) {
      this._detachComponent(clipPath);
      this._clipPath = null;
      this.markRedraw();
    }
  };
  Element2.prototype.getTextContent = function() {
    return this._textContent;
  };
  Element2.prototype.setTextContent = function(textEl) {
    var previousTextContent = this._textContent;
    if (previousTextContent === textEl) {
      return;
    }
    if (previousTextContent && previousTextContent !== textEl) {
      this.removeTextContent();
    }
    textEl.innerTransformable = new Transformable();
    this._attachComponent(textEl);
    this._textContent = textEl;
    this.markRedraw();
  };
  Element2.prototype.setTextConfig = function(cfg) {
    if (!this.textConfig) {
      this.textConfig = {};
    }
    extend(this.textConfig, cfg);
    this.markRedraw();
  };
  Element2.prototype.removeTextConfig = function() {
    this.textConfig = null;
    this.markRedraw();
  };
  Element2.prototype.removeTextContent = function() {
    var textEl = this._textContent;
    if (textEl) {
      textEl.innerTransformable = null;
      this._detachComponent(textEl);
      this._textContent = null;
      this._innerTextDefaultStyle = null;
      this.markRedraw();
    }
  };
  Element2.prototype.getTextGuideLine = function() {
    return this._textGuide;
  };
  Element2.prototype.setTextGuideLine = function(guideLine) {
    if (this._textGuide && this._textGuide !== guideLine) {
      this.removeTextGuideLine();
    }
    this._attachComponent(guideLine);
    this._textGuide = guideLine;
    this.markRedraw();
  };
  Element2.prototype.removeTextGuideLine = function() {
    var textGuide = this._textGuide;
    if (textGuide) {
      this._detachComponent(textGuide);
      this._textGuide = null;
      this.markRedraw();
    }
  };
  Element2.prototype.markRedraw = function() {
    this.__dirty |= REDRAW_BIT;
    var zr = this.__zr;
    if (zr) {
      if (this.__inHover) {
        zr.refreshHover();
      } else {
        zr.refresh();
      }
    }
    if (this.__hostTarget) {
      this.__hostTarget.markRedraw();
    }
  };
  Element2.prototype.dirty = function() {
    this.markRedraw();
  };
  Element2.prototype._toggleHoverLayerFlag = function(inHover) {
    this.__inHover = inHover;
    var textContent = this._textContent;
    var textGuide = this._textGuide;
    if (textContent) {
      textContent.__inHover = inHover;
    }
    if (textGuide) {
      textGuide.__inHover = inHover;
    }
  };
  Element2.prototype.addSelfToZr = function(zr) {
    if (this.__zr === zr) {
      return;
    }
    this.__zr = zr;
    var animators = this.animators;
    if (animators) {
      for (var i = 0; i < animators.length; i++) {
        zr.animation.addAnimator(animators[i]);
      }
    }
    if (this._clipPath) {
      this._clipPath.addSelfToZr(zr);
    }
    if (this._textContent) {
      this._textContent.addSelfToZr(zr);
    }
    if (this._textGuide) {
      this._textGuide.addSelfToZr(zr);
    }
  };
  Element2.prototype.removeSelfFromZr = function(zr) {
    if (!this.__zr) {
      return;
    }
    this.__zr = null;
    var animators = this.animators;
    if (animators) {
      for (var i = 0; i < animators.length; i++) {
        zr.animation.removeAnimator(animators[i]);
      }
    }
    if (this._clipPath) {
      this._clipPath.removeSelfFromZr(zr);
    }
    if (this._textContent) {
      this._textContent.removeSelfFromZr(zr);
    }
    if (this._textGuide) {
      this._textGuide.removeSelfFromZr(zr);
    }
  };
  Element2.prototype.animate = function(key, loop, allowDiscreteAnimation) {
    var target = key ? this[key] : this;
    var animator = new Animator$1(target, loop, allowDiscreteAnimation);
    key && (animator.targetName = key);
    this.addAnimator(animator, key);
    return animator;
  };
  Element2.prototype.addAnimator = function(animator, key) {
    var zr = this.__zr;
    var el = this;
    animator.during(function() {
      el.updateDuringAnimation(key);
    }).done(function() {
      var animators = el.animators;
      var idx = indexOf(animators, animator);
      if (idx >= 0) {
        animators.splice(idx, 1);
      }
    });
    this.animators.push(animator);
    if (zr) {
      zr.animation.addAnimator(animator);
    }
    zr && zr.wakeUp();
  };
  Element2.prototype.updateDuringAnimation = function(key) {
    this.markRedraw();
  };
  Element2.prototype.stopAnimation = function(scope, forwardToLast) {
    var animators = this.animators;
    var len2 = animators.length;
    var leftAnimators = [];
    for (var i = 0; i < len2; i++) {
      var animator = animators[i];
      if (!scope || scope === animator.scope) {
        animator.stop(forwardToLast);
      } else {
        leftAnimators.push(animator);
      }
    }
    this.animators = leftAnimators;
    return this;
  };
  Element2.prototype.animateTo = function(target, cfg, animationProps) {
    animateTo(this, target, cfg, animationProps);
  };
  Element2.prototype.animateFrom = function(target, cfg, animationProps) {
    animateTo(this, target, cfg, animationProps, true);
  };
  Element2.prototype._transitionState = function(stateName, target, cfg, animationProps) {
    var animators = animateTo(this, target, cfg, animationProps);
    for (var i = 0; i < animators.length; i++) {
      animators[i].__fromStateTransition = stateName;
    }
  };
  Element2.prototype.getBoundingRect = function() {
    return null;
  };
  Element2.prototype.getPaintRect = function() {
    return null;
  };
  Element2.initDefaultProps = function() {
    var elProto = Element2.prototype;
    elProto.type = "element";
    elProto.name = "";
    elProto.ignore = elProto.silent = elProto.isGroup = elProto.draggable = elProto.dragging = elProto.ignoreClip = elProto.__inHover = false;
    elProto.__dirty = REDRAW_BIT;
    function createLegacyProperty(key, privateKey, xKey, yKey) {
      Object.defineProperty(elProto, key, {
        get: function() {
          if (!this[privateKey]) {
            var pos = this[privateKey] = [];
            enhanceArray(this, pos);
          }
          return this[privateKey];
        },
        set: function(pos) {
          this[xKey] = pos[0];
          this[yKey] = pos[1];
          this[privateKey] = pos;
          enhanceArray(this, pos);
        }
      });
      function enhanceArray(self2, pos) {
        Object.defineProperty(pos, 0, {
          get: function() {
            return self2[xKey];
          },
          set: function(val) {
            self2[xKey] = val;
          }
        });
        Object.defineProperty(pos, 1, {
          get: function() {
            return self2[yKey];
          },
          set: function(val) {
            self2[yKey] = val;
          }
        });
      }
    }
    if (Object.defineProperty) {
      createLegacyProperty("position", "_legacyPos", "x", "y");
      createLegacyProperty("scale", "_legacyScale", "scaleX", "scaleY");
      createLegacyProperty("origin", "_legacyOrigin", "originX", "originY");
    }
  }();
  return Element2;
}();
mixin(Element, Eventful$1);
mixin(Element, Transformable);
function animateTo(animatable, target, cfg, animationProps, reverse) {
  cfg = cfg || {};
  var animators = [];
  animateToShallow(animatable, "", animatable, target, cfg, animationProps, animators, reverse);
  var finishCount = animators.length;
  var doneHappened = false;
  var cfgDone = cfg.done;
  var cfgAborted = cfg.aborted;
  var doneCb = function() {
    doneHappened = true;
    finishCount--;
    if (finishCount <= 0) {
      doneHappened ? cfgDone && cfgDone() : cfgAborted && cfgAborted();
    }
  };
  var abortedCb = function() {
    finishCount--;
    if (finishCount <= 0) {
      doneHappened ? cfgDone && cfgDone() : cfgAborted && cfgAborted();
    }
  };
  if (!finishCount) {
    cfgDone && cfgDone();
  }
  if (animators.length > 0 && cfg.during) {
    animators[0].during(function(target2, percent) {
      cfg.during(percent);
    });
  }
  for (var i = 0; i < animators.length; i++) {
    var animator = animators[i];
    if (doneCb) {
      animator.done(doneCb);
    }
    if (abortedCb) {
      animator.aborted(abortedCb);
    }
    if (cfg.force) {
      animator.duration(cfg.duration);
    }
    animator.start(cfg.easing);
  }
  return animators;
}
function copyArrShallow(source, target, len2) {
  for (var i = 0; i < len2; i++) {
    source[i] = target[i];
  }
}
function is2DArray(value) {
  return isArrayLike(value[0]);
}
function copyValue(target, source, key) {
  if (isArrayLike(source[key])) {
    if (!isArrayLike(target[key])) {
      target[key] = [];
    }
    if (isTypedArray(source[key])) {
      var len2 = source[key].length;
      if (target[key].length !== len2) {
        target[key] = new source[key].constructor(len2);
        copyArrShallow(target[key], source[key], len2);
      }
    } else {
      var sourceArr = source[key];
      var targetArr = target[key];
      var len0 = sourceArr.length;
      if (is2DArray(sourceArr)) {
        var len1 = sourceArr[0].length;
        for (var i = 0; i < len0; i++) {
          if (!targetArr[i]) {
            targetArr[i] = Array.prototype.slice.call(sourceArr[i]);
          } else {
            copyArrShallow(targetArr[i], sourceArr[i], len1);
          }
        }
      } else {
        copyArrShallow(targetArr, sourceArr, len0);
      }
      targetArr.length = sourceArr.length;
    }
  } else {
    target[key] = source[key];
  }
}
function isValueSame(val1, val2) {
  return val1 === val2 || isArrayLike(val1) && isArrayLike(val2) && is1DArraySame(val1, val2);
}
function is1DArraySame(arr0, arr1) {
  var len2 = arr0.length;
  if (len2 !== arr1.length) {
    return false;
  }
  for (var i = 0; i < len2; i++) {
    if (arr0[i] !== arr1[i]) {
      return false;
    }
  }
  return true;
}
function animateToShallow(animatable, topKey, animateObj, target, cfg, animationProps, animators, reverse) {
  var targetKeys = keys(target);
  var duration = cfg.duration;
  var delay = cfg.delay;
  var additive = cfg.additive;
  var setToFinal = cfg.setToFinal;
  var animateAll = !isObject$2(animationProps);
  var existsAnimators = animatable.animators;
  var animationKeys = [];
  for (var k2 = 0; k2 < targetKeys.length; k2++) {
    var innerKey = targetKeys[k2];
    var targetVal = target[innerKey];
    if (targetVal != null && animateObj[innerKey] != null && (animateAll || animationProps[innerKey])) {
      if (isObject$2(targetVal) && !isArrayLike(targetVal) && !isGradientObject(targetVal)) {
        if (topKey) {
          if (!reverse) {
            animateObj[innerKey] = targetVal;
            animatable.updateDuringAnimation(topKey);
          }
          continue;
        }
        animateToShallow(animatable, innerKey, animateObj[innerKey], targetVal, cfg, animationProps && animationProps[innerKey], animators, reverse);
      } else {
        animationKeys.push(innerKey);
      }
    } else if (!reverse) {
      animateObj[innerKey] = targetVal;
      animatable.updateDuringAnimation(topKey);
      animationKeys.push(innerKey);
    }
  }
  var keyLen = animationKeys.length;
  if (!additive && keyLen) {
    for (var i = 0; i < existsAnimators.length; i++) {
      var animator = existsAnimators[i];
      if (animator.targetName === topKey) {
        var allAborted = animator.stopTracks(animationKeys);
        if (allAborted) {
          var idx = indexOf(existsAnimators, animator);
          existsAnimators.splice(idx, 1);
        }
      }
    }
  }
  if (!cfg.force) {
    animationKeys = filter(animationKeys, function(key) {
      return !isValueSame(target[key], animateObj[key]);
    });
    keyLen = animationKeys.length;
  }
  if (keyLen > 0 || cfg.force && !animators.length) {
    var revertedSource = void 0;
    var reversedTarget = void 0;
    var sourceClone = void 0;
    if (reverse) {
      reversedTarget = {};
      if (setToFinal) {
        revertedSource = {};
      }
      for (var i = 0; i < keyLen; i++) {
        var innerKey = animationKeys[i];
        reversedTarget[innerKey] = animateObj[innerKey];
        if (setToFinal) {
          revertedSource[innerKey] = target[innerKey];
        } else {
          animateObj[innerKey] = target[innerKey];
        }
      }
    } else if (setToFinal) {
      sourceClone = {};
      for (var i = 0; i < keyLen; i++) {
        var innerKey = animationKeys[i];
        sourceClone[innerKey] = cloneValue(animateObj[innerKey]);
        copyValue(animateObj, target, innerKey);
      }
    }
    var animator = new Animator$1(animateObj, false, false, additive ? filter(existsAnimators, function(animator2) {
      return animator2.targetName === topKey;
    }) : null);
    animator.targetName = topKey;
    if (cfg.scope) {
      animator.scope = cfg.scope;
    }
    if (setToFinal && revertedSource) {
      animator.whenWithKeys(0, revertedSource, animationKeys);
    }
    if (sourceClone) {
      animator.whenWithKeys(0, sourceClone, animationKeys);
    }
    animator.whenWithKeys(duration == null ? 500 : duration, reverse ? reversedTarget : target, animationKeys).delay(delay || 0);
    animatable.addAnimator(animator, topKey);
    animators.push(animator);
  }
}
var Element$1 = Element;
var Group$2 = function(_super) {
  __extends(Group2, _super);
  function Group2(opts) {
    var _this = _super.call(this) || this;
    _this.isGroup = true;
    _this._children = [];
    _this.attr(opts);
    return _this;
  }
  Group2.prototype.childrenRef = function() {
    return this._children;
  };
  Group2.prototype.children = function() {
    return this._children.slice();
  };
  Group2.prototype.childAt = function(idx) {
    return this._children[idx];
  };
  Group2.prototype.childOfName = function(name) {
    var children = this._children;
    for (var i = 0; i < children.length; i++) {
      if (children[i].name === name) {
        return children[i];
      }
    }
  };
  Group2.prototype.childCount = function() {
    return this._children.length;
  };
  Group2.prototype.add = function(child) {
    if (child) {
      if (child !== this && child.parent !== this) {
        this._children.push(child);
        this._doAdd(child);
      }
    }
    return this;
  };
  Group2.prototype.addBefore = function(child, nextSibling) {
    if (child && child !== this && child.parent !== this && nextSibling && nextSibling.parent === this) {
      var children = this._children;
      var idx = children.indexOf(nextSibling);
      if (idx >= 0) {
        children.splice(idx, 0, child);
        this._doAdd(child);
      }
    }
    return this;
  };
  Group2.prototype.replace = function(oldChild, newChild) {
    var idx = indexOf(this._children, oldChild);
    if (idx >= 0) {
      this.replaceAt(newChild, idx);
    }
    return this;
  };
  Group2.prototype.replaceAt = function(child, index) {
    var children = this._children;
    var old = children[index];
    if (child && child !== this && child.parent !== this && child !== old) {
      children[index] = child;
      old.parent = null;
      var zr = this.__zr;
      if (zr) {
        old.removeSelfFromZr(zr);
      }
      this._doAdd(child);
    }
    return this;
  };
  Group2.prototype._doAdd = function(child) {
    if (child.parent) {
      child.parent.remove(child);
    }
    child.parent = this;
    var zr = this.__zr;
    if (zr && zr !== child.__zr) {
      child.addSelfToZr(zr);
    }
    zr && zr.refresh();
  };
  Group2.prototype.remove = function(child) {
    var zr = this.__zr;
    var children = this._children;
    var idx = indexOf(children, child);
    if (idx < 0) {
      return this;
    }
    children.splice(idx, 1);
    child.parent = null;
    if (zr) {
      child.removeSelfFromZr(zr);
    }
    zr && zr.refresh();
    return this;
  };
  Group2.prototype.removeAll = function() {
    var children = this._children;
    var zr = this.__zr;
    for (var i = 0; i < children.length; i++) {
      var child = children[i];
      if (zr) {
        child.removeSelfFromZr(zr);
      }
      child.parent = null;
    }
    children.length = 0;
    return this;
  };
  Group2.prototype.eachChild = function(cb, context) {
    var children = this._children;
    for (var i = 0; i < children.length; i++) {
      var child = children[i];
      cb.call(context, child, i);
    }
    return this;
  };
  Group2.prototype.traverse = function(cb, context) {
    for (var i = 0; i < this._children.length; i++) {
      var child = this._children[i];
      var stopped = cb.call(context, child);
      if (child.isGroup && !stopped) {
        child.traverse(cb, context);
      }
    }
    return this;
  };
  Group2.prototype.addSelfToZr = function(zr) {
    _super.prototype.addSelfToZr.call(this, zr);
    for (var i = 0; i < this._children.length; i++) {
      var child = this._children[i];
      child.addSelfToZr(zr);
    }
  };
  Group2.prototype.removeSelfFromZr = function(zr) {
    _super.prototype.removeSelfFromZr.call(this, zr);
    for (var i = 0; i < this._children.length; i++) {
      var child = this._children[i];
      child.removeSelfFromZr(zr);
    }
  };
  Group2.prototype.getBoundingRect = function(includeChildren) {
    var tmpRect2 = new BoundingRect$1(0, 0, 0, 0);
    var children = includeChildren || this._children;
    var tmpMat = [];
    var rect = null;
    for (var i = 0; i < children.length; i++) {
      var child = children[i];
      if (child.ignore || child.invisible) {
        continue;
      }
      var childRect = child.getBoundingRect();
      var transform = child.getLocalTransform(tmpMat);
      if (transform) {
        BoundingRect$1.applyTransform(tmpRect2, childRect, transform);
        rect = rect || tmpRect2.clone();
        rect.union(tmpRect2);
      } else {
        rect = rect || childRect.clone();
        rect.union(childRect);
      }
    }
    return rect || tmpRect2;
  };
  return Group2;
}(Element$1);
Group$2.prototype.type = "group";
var Group$3 = Group$2;
/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/
var painterCtors = {};
var instances$1 = {};
function delInstance(id) {
  delete instances$1[id];
}
function isDarkMode(backgroundColor2) {
  if (!backgroundColor2) {
    return false;
  }
  if (typeof backgroundColor2 === "string") {
    return lum(backgroundColor2, 1) < DARK_MODE_THRESHOLD;
  } else if (backgroundColor2.colorStops) {
    var colorStops = backgroundColor2.colorStops;
    var totalLum = 0;
    var len2 = colorStops.length;
    for (var i = 0; i < len2; i++) {
      totalLum += lum(colorStops[i].color, 1);
    }
    totalLum /= len2;
    return totalLum < DARK_MODE_THRESHOLD;
  }
  return false;
}
var ZRender = function() {
  function ZRender2(id, dom, opts) {
    var _this = this;
    this._sleepAfterStill = 10;
    this._stillFrameAccum = 0;
    this._needsRefresh = true;
    this._needsRefreshHover = true;
    this._darkMode = false;
    opts = opts || {};
    this.dom = dom;
    this.id = id;
    var storage = new Storage$1();
    var rendererType = opts.renderer || "canvas";
    if (!painterCtors[rendererType]) {
      rendererType = keys(painterCtors)[0];
    }
    opts.useDirtyRect = opts.useDirtyRect == null ? false : opts.useDirtyRect;
    var painter = new painterCtors[rendererType](dom, storage, opts, id);
    var ssrMode = opts.ssr || painter.ssrOnly;
    this.storage = storage;
    this.painter = painter;
    var handerProxy = !env$1.node && !env$1.worker && !ssrMode ? new HandlerProxy(painter.getViewportRoot(), painter.root) : null;
    var useCoarsePointer = opts.useCoarsePointer;
    var usePointerSize = useCoarsePointer == null || useCoarsePointer === "auto" ? env$1.touchEventsSupported : !!useCoarsePointer;
    var defaultPointerSize = 44;
    var pointerSize;
    if (usePointerSize) {
      pointerSize = retrieve2(opts.pointerSize, defaultPointerSize);
    }
    this.handler = new Handler$1(storage, painter, handerProxy, painter.root, pointerSize);
    this.animation = new Animation$1({
      stage: {
        update: ssrMode ? null : function() {
          return _this._flush(true);
        }
      }
    });
    if (!ssrMode) {
      this.animation.start();
    }
  }
  ZRender2.prototype.add = function(el) {
    if (!el) {
      return;
    }
    this.storage.addRoot(el);
    el.addSelfToZr(this);
    this.refresh();
  };
  ZRender2.prototype.remove = function(el) {
    if (!el) {
      return;
    }
    this.storage.delRoot(el);
    el.removeSelfFromZr(this);
    this.refresh();
  };
  ZRender2.prototype.configLayer = function(zLevel, config) {
    if (this.painter.configLayer) {
      this.painter.configLayer(zLevel, config);
    }
    this.refresh();
  };
  ZRender2.prototype.setBackgroundColor = function(backgroundColor2) {
    if (this.painter.setBackgroundColor) {
      this.painter.setBackgroundColor(backgroundColor2);
    }
    this.refresh();
    this._backgroundColor = backgroundColor2;
    this._darkMode = isDarkMode(backgroundColor2);
  };
  ZRender2.prototype.getBackgroundColor = function() {
    return this._backgroundColor;
  };
  ZRender2.prototype.setDarkMode = function(darkMode) {
    this._darkMode = darkMode;
  };
  ZRender2.prototype.isDarkMode = function() {
    return this._darkMode;
  };
  ZRender2.prototype.refreshImmediately = function(fromInside) {
    if (!fromInside) {
      this.animation.update(true);
    }
    this._needsRefresh = false;
    this.painter.refresh();
    this._needsRefresh = false;
  };
  ZRender2.prototype.refresh = function() {
    this._needsRefresh = true;
    this.animation.start();
  };
  ZRender2.prototype.flush = function() {
    this._flush(false);
  };
  ZRender2.prototype._flush = function(fromInside) {
    var triggerRendered;
    var start2 = getTime();
    if (this._needsRefresh) {
      triggerRendered = true;
      this.refreshImmediately(fromInside);
    }
    if (this._needsRefreshHover) {
      triggerRendered = true;
      this.refreshHoverImmediately();
    }
    var end2 = getTime();
    if (triggerRendered) {
      this._stillFrameAccum = 0;
      this.trigger("rendered", {
        elapsedTime: end2 - start2
      });
    } else if (this._sleepAfterStill > 0) {
      this._stillFrameAccum++;
      if (this._stillFrameAccum > this._sleepAfterStill) {
        this.animation.stop();
      }
    }
  };
  ZRender2.prototype.setSleepAfterStill = function(stillFramesCount) {
    this._sleepAfterStill = stillFramesCount;
  };
  ZRender2.prototype.wakeUp = function() {
    this.animation.start();
    this._stillFrameAccum = 0;
  };
  ZRender2.prototype.refreshHover = function() {
    this._needsRefreshHover = true;
  };
  ZRender2.prototype.refreshHoverImmediately = function() {
    this._needsRefreshHover = false;
    if (this.painter.refreshHover && this.painter.getType() === "canvas") {
      this.painter.refreshHover();
    }
  };
  ZRender2.prototype.resize = function(opts) {
    opts = opts || {};
    this.painter.resize(opts.width, opts.height);
    this.handler.resize();
  };
  ZRender2.prototype.clearAnimation = function() {
    this.animation.clear();
  };
  ZRender2.prototype.getWidth = function() {
    return this.painter.getWidth();
  };
  ZRender2.prototype.getHeight = function() {
    return this.painter.getHeight();
  };
  ZRender2.prototype.setCursorStyle = function(cursorStyle) {
    this.handler.setCursorStyle(cursorStyle);
  };
  ZRender2.prototype.findHover = function(x2, y2) {
    return this.handler.findHover(x2, y2);
  };
  ZRender2.prototype.on = function(eventName, eventHandler, context) {
    this.handler.on(eventName, eventHandler, context);
    return this;
  };
  ZRender2.prototype.off = function(eventName, eventHandler) {
    this.handler.off(eventName, eventHandler);
  };
  ZRender2.prototype.trigger = function(eventName, event) {
    this.handler.trigger(eventName, event);
  };
  ZRender2.prototype.clear = function() {
    var roots2 = this.storage.getRoots();
    for (var i = 0; i < roots2.length; i++) {
      if (roots2[i] instanceof Group$3) {
        roots2[i].removeSelfFromZr(this);
      }
    }
    this.storage.delAllRoots();
    this.painter.clear();
  };
  ZRender2.prototype.dispose = function() {
    this.animation.stop();
    this.clear();
    this.storage.dispose();
    this.painter.dispose();
    this.handler.dispose();
    this.animation = this.storage = this.painter = this.handler = null;
    delInstance(this.id);
  };
  return ZRender2;
}();
function init$1(dom, opts) {
  var zr = new ZRender(guid(), dom, opts);
  instances$1[zr.id] = zr;
  return zr;
}
function registerPainter(name, Ctor) {
  painterCtors[name] = Ctor;
}
var RADIAN_EPSILON = 1e-4;
var ROUND_SUPPORTED_PRECISION_MAX = 20;
function _trim(str) {
  return str.replace(/^\s+|\s+$/g, "");
}
function linearMap(val, domain, range, clamp) {
  var d0 = domain[0];
  var d1 = domain[1];
  var r0 = range[0];
  var r1 = range[1];
  var subDomain = d1 - d0;
  var subRange = r1 - r0;
  if (subDomain === 0) {
    return subRange === 0 ? r0 : (r0 + r1) / 2;
  }
  if (clamp) {
    if (subDomain > 0) {
      if (val <= d0) {
        return r0;
      } else if (val >= d1) {
        return r1;
      }
    } else {
      if (val >= d0) {
        return r0;
      } else if (val <= d1) {
        return r1;
      }
    }
  } else {
    if (val === d0) {
      return r0;
    }
    if (val === d1) {
      return r1;
    }
  }
  return (val - d0) / subDomain * subRange + r0;
}
function parsePercent(percent, all) {
  switch (percent) {
    case "center":
    case "middle":
      percent = "50%";
      break;
    case "left":
    case "top":
      percent = "0%";
      break;
    case "right":
    case "bottom":
      percent = "100%";
      break;
  }
  if (isString(percent)) {
    if (_trim(percent).match(/%$/)) {
      return parseFloat(percent) / 100 * all;
    }
    return parseFloat(percent);
  }
  return percent == null ? NaN : +percent;
}
function round$1(x2, precision, returnStr) {
  if (precision == null) {
    precision = 10;
  }
  precision = Math.min(Math.max(0, precision), ROUND_SUPPORTED_PRECISION_MAX);
  x2 = (+x2).toFixed(precision);
  return returnStr ? x2 : +x2;
}
function getPrecision(val) {
  val = +val;
  if (isNaN(val)) {
    return 0;
  }
  if (val > 1e-14) {
    var e2 = 1;
    for (var i = 0; i < 15; i++, e2 *= 10) {
      if (Math.round(val * e2) / e2 === val) {
        return i;
      }
    }
  }
  return getPrecisionSafe(val);
}
function getPrecisionSafe(val) {
  var str = val.toString().toLowerCase();
  var eIndex = str.indexOf("e");
  var exp = eIndex > 0 ? +str.slice(eIndex + 1) : 0;
  var significandPartLen = eIndex > 0 ? eIndex : str.length;
  var dotIndex = str.indexOf(".");
  var decimalPartLen = dotIndex < 0 ? 0 : significandPartLen - 1 - dotIndex;
  return Math.max(0, decimalPartLen - exp);
}
function getPercentSeats(valueList, precision) {
  var sum = reduce(valueList, function(acc, val) {
    return acc + (isNaN(val) ? 0 : val);
  }, 0);
  if (sum === 0) {
    return [];
  }
  var digits = Math.pow(10, precision);
  var votesPerQuota = map$1(valueList, function(val) {
    return (isNaN(val) ? 0 : val) / sum * digits * 100;
  });
  var targetSeats = digits * 100;
  var seats = map$1(votesPerQuota, function(votes) {
    return Math.floor(votes);
  });
  var currentSum = reduce(seats, function(acc, val) {
    return acc + val;
  }, 0);
  var remainder = map$1(votesPerQuota, function(votes, idx) {
    return votes - seats[idx];
  });
  while (currentSum < targetSeats) {
    var max3 = Number.NEGATIVE_INFINITY;
    var maxId = null;
    for (var i = 0, len2 = remainder.length; i < len2; ++i) {
      if (remainder[i] > max3) {
        max3 = remainder[i];
        maxId = i;
      }
    }
    ++seats[maxId];
    remainder[maxId] = 0;
    ++currentSum;
  }
  return map$1(seats, function(seat) {
    return seat / digits;
  });
}
function addSafe(val0, val1) {
  var maxPrecision = Math.max(getPrecision(val0), getPrecision(val1));
  var sum = val0 + val1;
  return maxPrecision > ROUND_SUPPORTED_PRECISION_MAX ? sum : round$1(sum, maxPrecision);
}
function remRadian(radian) {
  var pi2 = Math.PI * 2;
  return (radian % pi2 + pi2) % pi2;
}
function isRadianAroundZero(val) {
  return val > -RADIAN_EPSILON && val < RADIAN_EPSILON;
}
var TIME_REG = /^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;
function parseDate(value) {
  if (value instanceof Date) {
    return value;
  } else if (isString(value)) {
    var match = TIME_REG.exec(value);
    if (!match) {
      return new Date(NaN);
    }
    if (!match[8]) {
      return new Date(+match[1], +(match[2] || 1) - 1, +match[3] || 1, +match[4] || 0, +(match[5] || 0), +match[6] || 0, match[7] ? +match[7].substring(0, 3) : 0);
    } else {
      var hour = +match[4] || 0;
      if (match[8].toUpperCase() !== "Z") {
        hour -= +match[8].slice(0, 3);
      }
      return new Date(Date.UTC(+match[1], +(match[2] || 1) - 1, +match[3] || 1, hour, +(match[5] || 0), +match[6] || 0, match[7] ? +match[7].substring(0, 3) : 0));
    }
  } else if (value == null) {
    return new Date(NaN);
  }
  return new Date(Math.round(value));
}
function numericToNumber(val) {
  var valFloat = parseFloat(val);
  return valFloat == val && (valFloat !== 0 || !isString(val) || val.indexOf("x") <= 0) ? valFloat : NaN;
}
function isNumeric(val) {
  return !isNaN(numericToNumber(val));
}
function getRandomIdBase() {
  return Math.round(Math.random() * 9);
}
function getGreatestCommonDividor(a, b2) {
  if (b2 === 0) {
    return a;
  }
  return getGreatestCommonDividor(b2, a % b2);
}
function getLeastCommonMultiple(a, b2) {
  if (a == null) {
    return b2;
  }
  if (b2 == null) {
    return a;
  }
  return a * b2 / getGreatestCommonDividor(a, b2);
}
function throwError(msg) {
  throw new Error(msg);
}
var DUMMY_COMPONENT_NAME_PREFIX = "series\0";
var INTERNAL_COMPONENT_ID_PREFIX = "\0_ec_\0";
function normalizeToArray(value) {
  return value instanceof Array ? value : value == null ? [] : [value];
}
function defaultEmphasis(opt, key, subOpts) {
  if (opt) {
    opt[key] = opt[key] || {};
    opt.emphasis = opt.emphasis || {};
    opt.emphasis[key] = opt.emphasis[key] || {};
    for (var i = 0, len2 = subOpts.length; i < len2; i++) {
      var subOptName = subOpts[i];
      if (!opt.emphasis[key].hasOwnProperty(subOptName) && opt[key].hasOwnProperty(subOptName)) {
        opt.emphasis[key][subOptName] = opt[key][subOptName];
      }
    }
  }
}
var TEXT_STYLE_OPTIONS = ["fontStyle", "fontWeight", "fontSize", "fontFamily", "rich", "tag", "color", "textBorderColor", "textBorderWidth", "width", "height", "lineHeight", "align", "verticalAlign", "baseline", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "textShadowColor", "textShadowBlur", "textShadowOffsetX", "textShadowOffsetY", "backgroundColor", "borderColor", "borderWidth", "borderRadius", "padding"];
function getDataItemValue(dataItem) {
  return isObject$2(dataItem) && !isArray(dataItem) && !(dataItem instanceof Date) ? dataItem.value : dataItem;
}
function isDataItemOption(dataItem) {
  return isObject$2(dataItem) && !(dataItem instanceof Array);
}
function mappingToExists(existings, newCmptOptions, mode) {
  var isNormalMergeMode = mode === "normalMerge";
  var isReplaceMergeMode = mode === "replaceMerge";
  var isReplaceAllMode = mode === "replaceAll";
  existings = existings || [];
  newCmptOptions = (newCmptOptions || []).slice();
  var existingIdIdxMap = createHashMap();
  each$4(newCmptOptions, function(cmptOption, index) {
    if (!isObject$2(cmptOption)) {
      newCmptOptions[index] = null;
      return;
    }
  });
  var result = prepareResult(existings, existingIdIdxMap, mode);
  if (isNormalMergeMode || isReplaceMergeMode) {
    mappingById(result, existings, existingIdIdxMap, newCmptOptions);
  }
  if (isNormalMergeMode) {
    mappingByName(result, newCmptOptions);
  }
  if (isNormalMergeMode || isReplaceMergeMode) {
    mappingByIndex(result, newCmptOptions, isReplaceMergeMode);
  } else if (isReplaceAllMode) {
    mappingInReplaceAllMode(result, newCmptOptions);
  }
  makeIdAndName(result);
  return result;
}
function prepareResult(existings, existingIdIdxMap, mode) {
  var result = [];
  if (mode === "replaceAll") {
    return result;
  }
  for (var index = 0; index < existings.length; index++) {
    var existing = existings[index];
    if (existing && existing.id != null) {
      existingIdIdxMap.set(existing.id, index);
    }
    result.push({
      existing: mode === "replaceMerge" || isComponentIdInternal(existing) ? null : existing,
      newOption: null,
      keyInfo: null,
      brandNew: null
    });
  }
  return result;
}
function mappingById(result, existings, existingIdIdxMap, newCmptOptions) {
  each$4(newCmptOptions, function(cmptOption, index) {
    if (!cmptOption || cmptOption.id == null) {
      return;
    }
    var optionId = makeComparableKey(cmptOption.id);
    var existingIdx = existingIdIdxMap.get(optionId);
    if (existingIdx != null) {
      var resultItem = result[existingIdx];
      assert(!resultItem.newOption, 'Duplicated option on id "' + optionId + '".');
      resultItem.newOption = cmptOption;
      resultItem.existing = existings[existingIdx];
      newCmptOptions[index] = null;
    }
  });
}
function mappingByName(result, newCmptOptions) {
  each$4(newCmptOptions, function(cmptOption, index) {
    if (!cmptOption || cmptOption.name == null) {
      return;
    }
    for (var i = 0; i < result.length; i++) {
      var existing = result[i].existing;
      if (!result[i].newOption && existing && (existing.id == null || cmptOption.id == null) && !isComponentIdInternal(cmptOption) && !isComponentIdInternal(existing) && keyExistAndEqual("name", existing, cmptOption)) {
        result[i].newOption = cmptOption;
        newCmptOptions[index] = null;
        return;
      }
    }
  });
}
function mappingByIndex(result, newCmptOptions, brandNew) {
  each$4(newCmptOptions, function(cmptOption) {
    if (!cmptOption) {
      return;
    }
    var resultItem;
    var nextIdx = 0;
    while ((resultItem = result[nextIdx]) && (resultItem.newOption || isComponentIdInternal(resultItem.existing) || resultItem.existing && cmptOption.id != null && !keyExistAndEqual("id", cmptOption, resultItem.existing))) {
      nextIdx++;
    }
    if (resultItem) {
      resultItem.newOption = cmptOption;
      resultItem.brandNew = brandNew;
    } else {
      result.push({
        newOption: cmptOption,
        brandNew,
        existing: null,
        keyInfo: null
      });
    }
    nextIdx++;
  });
}
function mappingInReplaceAllMode(result, newCmptOptions) {
  each$4(newCmptOptions, function(cmptOption) {
    result.push({
      newOption: cmptOption,
      brandNew: true,
      existing: null,
      keyInfo: null
    });
  });
}
function makeIdAndName(mapResult) {
  var idMap = createHashMap();
  each$4(mapResult, function(item) {
    var existing = item.existing;
    existing && idMap.set(existing.id, item);
  });
  each$4(mapResult, function(item) {
    var opt = item.newOption;
    assert(!opt || opt.id == null || !idMap.get(opt.id) || idMap.get(opt.id) === item, "id duplicates: " + (opt && opt.id));
    opt && opt.id != null && idMap.set(opt.id, item);
    !item.keyInfo && (item.keyInfo = {});
  });
  each$4(mapResult, function(item, index) {
    var existing = item.existing;
    var opt = item.newOption;
    var keyInfo = item.keyInfo;
    if (!isObject$2(opt)) {
      return;
    }
    keyInfo.name = opt.name != null ? makeComparableKey(opt.name) : existing ? existing.name : DUMMY_COMPONENT_NAME_PREFIX + index;
    if (existing) {
      keyInfo.id = makeComparableKey(existing.id);
    } else if (opt.id != null) {
      keyInfo.id = makeComparableKey(opt.id);
    } else {
      var idNum = 0;
      do {
        keyInfo.id = "\0" + keyInfo.name + "\0" + idNum++;
      } while (idMap.get(keyInfo.id));
    }
    idMap.set(keyInfo.id, item);
  });
}
function keyExistAndEqual(attr, obj1, obj2) {
  var key1 = convertOptionIdName(obj1[attr], null);
  var key2 = convertOptionIdName(obj2[attr], null);
  return key1 != null && key2 != null && key1 === key2;
}
function makeComparableKey(val) {
  return convertOptionIdName(val, "");
}
function convertOptionIdName(idOrName, defaultValue) {
  if (idOrName == null) {
    return defaultValue;
  }
  return isString(idOrName) ? idOrName : isNumber(idOrName) || isStringSafe(idOrName) ? idOrName + "" : defaultValue;
}
function isNameSpecified(componentModel) {
  var name = componentModel.name;
  return !!(name && name.indexOf(DUMMY_COMPONENT_NAME_PREFIX));
}
function isComponentIdInternal(cmptOption) {
  return cmptOption && cmptOption.id != null && makeComparableKey(cmptOption.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX) === 0;
}
function setComponentTypeToKeyInfo(mappingResult, mainType, componentModelCtor) {
  each$4(mappingResult, function(item) {
    var newOption = item.newOption;
    if (isObject$2(newOption)) {
      item.keyInfo.mainType = mainType;
      item.keyInfo.subType = determineSubType(mainType, newOption, item.existing, componentModelCtor);
    }
  });
}
function determineSubType(mainType, newCmptOption, existComponent, componentModelCtor) {
  var subType = newCmptOption.type ? newCmptOption.type : existComponent ? existComponent.subType : componentModelCtor.determineSubType(mainType, newCmptOption);
  return subType;
}
function queryDataIndex(data, payload) {
  if (payload.dataIndexInside != null) {
    return payload.dataIndexInside;
  } else if (payload.dataIndex != null) {
    return isArray(payload.dataIndex) ? map$1(payload.dataIndex, function(value) {
      return data.indexOfRawIndex(value);
    }) : data.indexOfRawIndex(payload.dataIndex);
  } else if (payload.name != null) {
    return isArray(payload.name) ? map$1(payload.name, function(value) {
      return data.indexOfName(value);
    }) : data.indexOfName(payload.name);
  }
}
function makeInner() {
  var key = "__ec_inner_" + innerUniqueIndex++;
  return function(hostObj) {
    return hostObj[key] || (hostObj[key] = {});
  };
}
var innerUniqueIndex = getRandomIdBase();
function parseFinder(ecModel, finderInput, opt) {
  var _a2 = preParseFinder(finderInput, opt), mainTypeSpecified = _a2.mainTypeSpecified, queryOptionMap = _a2.queryOptionMap, others = _a2.others;
  var result = others;
  var defaultMainType = opt ? opt.defaultMainType : null;
  if (!mainTypeSpecified && defaultMainType) {
    queryOptionMap.set(defaultMainType, {});
  }
  queryOptionMap.each(function(queryOption, mainType) {
    var queryResult = queryReferringComponents(ecModel, mainType, queryOption, {
      useDefault: defaultMainType === mainType,
      enableAll: opt && opt.enableAll != null ? opt.enableAll : true,
      enableNone: opt && opt.enableNone != null ? opt.enableNone : true
    });
    result[mainType + "Models"] = queryResult.models;
    result[mainType + "Model"] = queryResult.models[0];
  });
  return result;
}
function preParseFinder(finderInput, opt) {
  var finder;
  if (isString(finderInput)) {
    var obj = {};
    obj[finderInput + "Index"] = 0;
    finder = obj;
  } else {
    finder = finderInput;
  }
  var queryOptionMap = createHashMap();
  var others = {};
  var mainTypeSpecified = false;
  each$4(finder, function(value, key) {
    if (key === "dataIndex" || key === "dataIndexInside") {
      others[key] = value;
      return;
    }
    var parsedKey = key.match(/^(\w+)(Index|Id|Name)$/) || [];
    var mainType = parsedKey[1];
    var queryType = (parsedKey[2] || "").toLowerCase();
    if (!mainType || !queryType || opt && opt.includeMainTypes && indexOf(opt.includeMainTypes, mainType) < 0) {
      return;
    }
    mainTypeSpecified = mainTypeSpecified || !!mainType;
    var queryOption = queryOptionMap.get(mainType) || queryOptionMap.set(mainType, {});
    queryOption[queryType] = value;
  });
  return {
    mainTypeSpecified,
    queryOptionMap,
    others
  };
}
var SINGLE_REFERRING = {
  useDefault: true,
  enableAll: false,
  enableNone: false
};
function queryReferringComponents(ecModel, mainType, userOption, opt) {
  opt = opt || SINGLE_REFERRING;
  var indexOption = userOption.index;
  var idOption = userOption.id;
  var nameOption = userOption.name;
  var result = {
    models: null,
    specified: indexOption != null || idOption != null || nameOption != null
  };
  if (!result.specified) {
    var firstCmpt = void 0;
    result.models = opt.useDefault && (firstCmpt = ecModel.getComponent(mainType)) ? [firstCmpt] : [];
    return result;
  }
  if (indexOption === "none" || indexOption === false) {
    assert(opt.enableNone, '`"none"` or `false` is not a valid value on index option.');
    result.models = [];
    return result;
  }
  if (indexOption === "all") {
    assert(opt.enableAll, '`"all"` is not a valid value on index option.');
    indexOption = idOption = nameOption = null;
  }
  result.models = ecModel.queryComponents({
    mainType,
    index: indexOption,
    id: idOption,
    name: nameOption
  });
  return result;
}
function setAttribute(dom, key, value) {
  dom.setAttribute ? dom.setAttribute(key, value) : dom[key] = value;
}
function getAttribute(dom, key) {
  return dom.getAttribute ? dom.getAttribute(key) : dom[key];
}
function getTooltipRenderMode(renderModeOption) {
  if (renderModeOption === "auto") {
    return env$1.domSupported ? "html" : "richText";
  } else {
    return renderModeOption || "html";
  }
}
var TYPE_DELIMITER = ".";
var IS_CONTAINER = "___EC__COMPONENT__CONTAINER___";
var IS_EXTENDED_CLASS = "___EC__EXTENDED_CLASS___";
function parseClassType(componentType) {
  var ret = {
    main: "",
    sub: ""
  };
  if (componentType) {
    var typeArr = componentType.split(TYPE_DELIMITER);
    ret.main = typeArr[0] || "";
    ret.sub = typeArr[1] || "";
  }
  return ret;
}
function checkClassType(componentType) {
  assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(componentType), 'componentType "' + componentType + '" illegal');
}
function isExtendedClass(clz) {
  return !!(clz && clz[IS_EXTENDED_CLASS]);
}
function enableClassExtend(rootClz, mandatoryMethods) {
  rootClz.$constructor = rootClz;
  rootClz.extend = function(proto) {
    var superClass = this;
    var ExtendedClass;
    if (isESClass(superClass)) {
      ExtendedClass = function(_super) {
        __extends(class_1, _super);
        function class_1() {
          return _super.apply(this, arguments) || this;
        }
        return class_1;
      }(superClass);
    } else {
      ExtendedClass = function() {
        (proto.$constructor || superClass).apply(this, arguments);
      };
      inherits(ExtendedClass, this);
    }
    extend(ExtendedClass.prototype, proto);
    ExtendedClass[IS_EXTENDED_CLASS] = true;
    ExtendedClass.extend = this.extend;
    ExtendedClass.superCall = superCall;
    ExtendedClass.superApply = superApply;
    ExtendedClass.superClass = superClass;
    return ExtendedClass;
  };
}
function isESClass(fn) {
  return isFunction(fn) && /^class\s/.test(Function.prototype.toString.call(fn));
}
function mountExtend(SubClz, SupperClz) {
  SubClz.extend = SupperClz.extend;
}
var classBase = Math.round(Math.random() * 10);
function enableClassCheck(target) {
  var classAttr = ["__\0is_clz", classBase++].join("_");
  target.prototype[classAttr] = true;
  target.isInstance = function(obj) {
    return !!(obj && obj[classAttr]);
  };
}
function superCall(context, methodName) {
  var args = [];
  for (var _i = 2; _i < arguments.length; _i++) {
    args[_i - 2] = arguments[_i];
  }
  return this.superClass.prototype[methodName].apply(context, args);
}
function superApply(context, methodName, args) {
  return this.superClass.prototype[methodName].apply(context, args);
}
function enableClassManagement(target) {
  var storage = {};
  target.registerClass = function(clz) {
    var componentFullType = clz.type || clz.prototype.type;
    if (componentFullType) {
      checkClassType(componentFullType);
      clz.prototype.type = componentFullType;
      var componentTypeInfo = parseClassType(componentFullType);
      if (!componentTypeInfo.sub) {
        storage[componentTypeInfo.main] = clz;
      } else if (componentTypeInfo.sub !== IS_CONTAINER) {
        var container = makeContainer(componentTypeInfo);
        container[componentTypeInfo.sub] = clz;
      }
    }
    return clz;
  };
  target.getClass = function(mainType, subType, throwWhenNotFound) {
    var clz = storage[mainType];
    if (clz && clz[IS_CONTAINER]) {
      clz = subType ? clz[subType] : null;
    }
    if (throwWhenNotFound && !clz) {
      throw new Error(!subType ? mainType + ".type should be specified." : "Component " + mainType + "." + (subType || "") + " is used but not imported.");
    }
    return clz;
  };
  target.getClassesByMainType = function(componentType) {
    var componentTypeInfo = parseClassType(componentType);
    var result = [];
    var obj = storage[componentTypeInfo.main];
    if (obj && obj[IS_CONTAINER]) {
      each$4(obj, function(o, type) {
        type !== IS_CONTAINER && result.push(o);
      });
    } else {
      result.push(obj);
    }
    return result;
  };
  target.hasClass = function(componentType) {
    var componentTypeInfo = parseClassType(componentType);
    return !!storage[componentTypeInfo.main];
  };
  target.getAllClassMainTypes = function() {
    var types = [];
    each$4(storage, function(obj, type) {
      types.push(type);
    });
    return types;
  };
  target.hasSubTypes = function(componentType) {
    var componentTypeInfo = parseClassType(componentType);
    var obj = storage[componentTypeInfo.main];
    return obj && obj[IS_CONTAINER];
  };
  function makeContainer(componentTypeInfo) {
    var container = storage[componentTypeInfo.main];
    if (!container || !container[IS_CONTAINER]) {
      container = storage[componentTypeInfo.main] = {};
      container[IS_CONTAINER] = true;
    }
    return container;
  }
}
function makeStyleMapper(properties, ignoreParent) {
  for (var i = 0; i < properties.length; i++) {
    if (!properties[i][1]) {
      properties[i][1] = properties[i][0];
    }
  }
  ignoreParent = ignoreParent || false;
  return function(model, excludes, includes) {
    var style2 = {};
    for (var i2 = 0; i2 < properties.length; i2++) {
      var propName = properties[i2][1];
      if (excludes && indexOf(excludes, propName) >= 0 || includes && indexOf(includes, propName) < 0) {
        continue;
      }
      var val = model.getShallow(propName, ignoreParent);
      if (val != null) {
        style2[properties[i2][0]] = val;
      }
    }
    return style2;
  };
}
var AREA_STYLE_KEY_MAP = [
  ["fill", "color"],
  ["shadowBlur"],
  ["shadowOffsetX"],
  ["shadowOffsetY"],
  ["opacity"],
  ["shadowColor"]
];
var getAreaStyle = makeStyleMapper(AREA_STYLE_KEY_MAP);
var AreaStyleMixin = function() {
  function AreaStyleMixin2() {
  }
  AreaStyleMixin2.prototype.getAreaStyle = function(excludes, includes) {
    return getAreaStyle(this, excludes, includes);
  };
  return AreaStyleMixin2;
}();
var globalImageCache = new LRU$1(50);
function findExistImage(newImageOrSrc) {
  if (typeof newImageOrSrc === "string") {
    var cachedImgObj = globalImageCache.get(newImageOrSrc);
    return cachedImgObj && cachedImgObj.image;
  } else {
    return newImageOrSrc;
  }
}
function createOrUpdateImage(newImageOrSrc, image, hostEl, onload, cbPayload) {
  if (!newImageOrSrc) {
    return image;
  } else if (typeof newImageOrSrc === "string") {
    if (image && image.__zrImageSrc === newImageOrSrc || !hostEl) {
      return image;
    }
    var cachedImgObj = globalImageCache.get(newImageOrSrc);
    var pendingWrap = { hostEl, cb: onload, cbPayload };
    if (cachedImgObj) {
      image = cachedImgObj.image;
      !isImageReady(image) && cachedImgObj.pending.push(pendingWrap);
    } else {
      image = platformApi.loadImage(newImageOrSrc, imageOnLoad, imageOnLoad);
      image.__zrImageSrc = newImageOrSrc;
      globalImageCache.put(newImageOrSrc, image.__cachedImgObj = {
        image,
        pending: [pendingWrap]
      });
    }
    return image;
  } else {
    return newImageOrSrc;
  }
}
function imageOnLoad() {
  var cachedImgObj = this.__cachedImgObj;
  this.onload = this.onerror = this.__cachedImgObj = null;
  for (var i = 0; i < cachedImgObj.pending.length; i++) {
    var pendingWrap = cachedImgObj.pending[i];
    var cb = pendingWrap.cb;
    cb && cb(this, pendingWrap.cbPayload);
    pendingWrap.hostEl.dirty();
  }
  cachedImgObj.pending.length = 0;
}
function isImageReady(image) {
  return image && image.width && image.height;
}
var STYLE_REG = /\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;
function truncateText(text, containerWidth, font, ellipsis, options) {
  if (!containerWidth) {
    return "";
  }
  var textLines = (text + "").split("\n");
  options = prepareTruncateOptions(containerWidth, font, ellipsis, options);
  for (var i = 0, len2 = textLines.length; i < len2; i++) {
    textLines[i] = truncateSingleLine(textLines[i], options);
  }
  return textLines.join("\n");
}
function prepareTruncateOptions(containerWidth, font, ellipsis, options) {
  options = options || {};
  var preparedOpts = extend({}, options);
  preparedOpts.font = font;
  ellipsis = retrieve2(ellipsis, "...");
  preparedOpts.maxIterations = retrieve2(options.maxIterations, 2);
  var minChar = preparedOpts.minChar = retrieve2(options.minChar, 0);
  preparedOpts.cnCharWidth = getWidth("\u56FD", font);
  var ascCharWidth = preparedOpts.ascCharWidth = getWidth("a", font);
  preparedOpts.placeholder = retrieve2(options.placeholder, "");
  var contentWidth = containerWidth = Math.max(0, containerWidth - 1);
  for (var i = 0; i < minChar && contentWidth >= ascCharWidth; i++) {
    contentWidth -= ascCharWidth;
  }
  var ellipsisWidth = getWidth(ellipsis, font);
  if (ellipsisWidth > contentWidth) {
    ellipsis = "";
    ellipsisWidth = 0;
  }
  contentWidth = containerWidth - ellipsisWidth;
  preparedOpts.ellipsis = ellipsis;
  preparedOpts.ellipsisWidth = ellipsisWidth;
  preparedOpts.contentWidth = contentWidth;
  preparedOpts.containerWidth = containerWidth;
  return preparedOpts;
}
function truncateSingleLine(textLine, options) {
  var containerWidth = options.containerWidth;
  var font = options.font;
  var contentWidth = options.contentWidth;
  if (!containerWidth) {
    return "";
  }
  var lineWidth = getWidth(textLine, font);
  if (lineWidth <= containerWidth) {
    return textLine;
  }
  for (var j2 = 0; ; j2++) {
    if (lineWidth <= contentWidth || j2 >= options.maxIterations) {
      textLine += options.ellipsis;
      break;
    }
    var subLength = j2 === 0 ? estimateLength(textLine, contentWidth, options.ascCharWidth, options.cnCharWidth) : lineWidth > 0 ? Math.floor(textLine.length * contentWidth / lineWidth) : 0;
    textLine = textLine.substr(0, subLength);
    lineWidth = getWidth(textLine, font);
  }
  if (textLine === "") {
    textLine = options.placeholder;
  }
  return textLine;
}
function estimateLength(text, contentWidth, ascCharWidth, cnCharWidth) {
  var width = 0;
  var i = 0;
  for (var len2 = text.length; i < len2 && width < contentWidth; i++) {
    var charCode = text.charCodeAt(i);
    width += 0 <= charCode && charCode <= 127 ? ascCharWidth : cnCharWidth;
  }
  return i;
}
function parsePlainText(text, style2) {
  text != null && (text += "");
  var overflow = style2.overflow;
  var padding = style2.padding;
  var font = style2.font;
  var truncate = overflow === "truncate";
  var calculatedLineHeight = getLineHeight(font);
  var lineHeight = retrieve2(style2.lineHeight, calculatedLineHeight);
  var bgColorDrawn = !!style2.backgroundColor;
  var truncateLineOverflow = style2.lineOverflow === "truncate";
  var width = style2.width;
  var lines;
  if (width != null && (overflow === "break" || overflow === "breakAll")) {
    lines = text ? wrapText(text, style2.font, width, overflow === "breakAll", 0).lines : [];
  } else {
    lines = text ? text.split("\n") : [];
  }
  var contentHeight = lines.length * lineHeight;
  var height = retrieve2(style2.height, contentHeight);
  if (contentHeight > height && truncateLineOverflow) {
    var lineCount = Math.floor(height / lineHeight);
    lines = lines.slice(0, lineCount);
  }
  if (text && truncate && width != null) {
    var options = prepareTruncateOptions(width, font, style2.ellipsis, {
      minChar: style2.truncateMinChar,
      placeholder: style2.placeholder
    });
    for (var i = 0; i < lines.length; i++) {
      lines[i] = truncateSingleLine(lines[i], options);
    }
  }
  var outerHeight = height;
  var contentWidth = 0;
  for (var i = 0; i < lines.length; i++) {
    contentWidth = Math.max(getWidth(lines[i], font), contentWidth);
  }
  if (width == null) {
    width = contentWidth;
  }
  var outerWidth = contentWidth;
  if (padding) {
    outerHeight += padding[0] + padding[2];
    outerWidth += padding[1] + padding[3];
    width += padding[1] + padding[3];
  }
  if (bgColorDrawn) {
    outerWidth = width;
  }
  return {
    lines,
    height,
    outerWidth,
    outerHeight,
    lineHeight,
    calculatedLineHeight,
    contentWidth,
    contentHeight,
    width
  };
}
var RichTextToken = function() {
  function RichTextToken2() {
  }
  return RichTextToken2;
}();
var RichTextLine = function() {
  function RichTextLine2(tokens) {
    this.tokens = [];
    if (tokens) {
      this.tokens = tokens;
    }
  }
  return RichTextLine2;
}();
var RichTextContentBlock = function() {
  function RichTextContentBlock2() {
    this.width = 0;
    this.height = 0;
    this.contentWidth = 0;
    this.contentHeight = 0;
    this.outerWidth = 0;
    this.outerHeight = 0;
    this.lines = [];
  }
  return RichTextContentBlock2;
}();
function parseRichText(text, style2) {
  var contentBlock = new RichTextContentBlock();
  text != null && (text += "");
  if (!text) {
    return contentBlock;
  }
  var topWidth = style2.width;
  var topHeight = style2.height;
  var overflow = style2.overflow;
  var wrapInfo = (overflow === "break" || overflow === "breakAll") && topWidth != null ? { width: topWidth, accumWidth: 0, breakAll: overflow === "breakAll" } : null;
  var lastIndex = STYLE_REG.lastIndex = 0;
  var result;
  while ((result = STYLE_REG.exec(text)) != null) {
    var matchedIndex = result.index;
    if (matchedIndex > lastIndex) {
      pushTokens(contentBlock, text.substring(lastIndex, matchedIndex), style2, wrapInfo);
    }
    pushTokens(contentBlock, result[2], style2, wrapInfo, result[1]);
    lastIndex = STYLE_REG.lastIndex;
  }
  if (lastIndex < text.length) {
    pushTokens(contentBlock, text.substring(lastIndex, text.length), style2, wrapInfo);
  }
  var pendingList = [];
  var calculatedHeight = 0;
  var calculatedWidth = 0;
  var stlPadding = style2.padding;
  var truncate = overflow === "truncate";
  var truncateLine = style2.lineOverflow === "truncate";
  function finishLine(line2, lineWidth2, lineHeight2) {
    line2.width = lineWidth2;
    line2.lineHeight = lineHeight2;
    calculatedHeight += lineHeight2;
    calculatedWidth = Math.max(calculatedWidth, lineWidth2);
  }
  outer:
    for (var i = 0; i < contentBlock.lines.length; i++) {
      var line = contentBlock.lines[i];
      var lineHeight = 0;
      var lineWidth = 0;
      for (var j2 = 0; j2 < line.tokens.length; j2++) {
        var token = line.tokens[j2];
        var tokenStyle = token.styleName && style2.rich[token.styleName] || {};
        var textPadding = token.textPadding = tokenStyle.padding;
        var paddingH = textPadding ? textPadding[1] + textPadding[3] : 0;
        var font = token.font = tokenStyle.font || style2.font;
        token.contentHeight = getLineHeight(font);
        var tokenHeight = retrieve2(tokenStyle.height, token.contentHeight);
        token.innerHeight = tokenHeight;
        textPadding && (tokenHeight += textPadding[0] + textPadding[2]);
        token.height = tokenHeight;
        token.lineHeight = retrieve3(tokenStyle.lineHeight, style2.lineHeight, tokenHeight);
        token.align = tokenStyle && tokenStyle.align || style2.align;
        token.verticalAlign = tokenStyle && tokenStyle.verticalAlign || "middle";
        if (truncateLine && topHeight != null && calculatedHeight + token.lineHeight > topHeight) {
          if (j2 > 0) {
            line.tokens = line.tokens.slice(0, j2);
            finishLine(line, lineWidth, lineHeight);
            contentBlock.lines = contentBlock.lines.slice(0, i + 1);
          } else {
            contentBlock.lines = contentBlock.lines.slice(0, i);
          }
          break outer;
        }
        var styleTokenWidth = tokenStyle.width;
        var tokenWidthNotSpecified = styleTokenWidth == null || styleTokenWidth === "auto";
        if (typeof styleTokenWidth === "string" && styleTokenWidth.charAt(styleTokenWidth.length - 1) === "%") {
          token.percentWidth = styleTokenWidth;
          pendingList.push(token);
          token.contentWidth = getWidth(token.text, font);
        } else {
          if (tokenWidthNotSpecified) {
            var textBackgroundColor = tokenStyle.backgroundColor;
            var bgImg = textBackgroundColor && textBackgroundColor.image;
            if (bgImg) {
              bgImg = findExistImage(bgImg);
              if (isImageReady(bgImg)) {
                token.width = Math.max(token.width, bgImg.width * tokenHeight / bgImg.height);
              }
            }
          }
          var remainTruncWidth = truncate && topWidth != null ? topWidth - lineWidth : null;
          if (remainTruncWidth != null && remainTruncWidth < token.width) {
            if (!tokenWidthNotSpecified || remainTruncWidth < paddingH) {
              token.text = "";
              token.width = token.contentWidth = 0;
            } else {
              token.text = truncateText(token.text, remainTruncWidth - paddingH, font, style2.ellipsis, { minChar: style2.truncateMinChar });
              token.width = token.contentWidth = getWidth(token.text, font);
            }
          } else {
            token.contentWidth = getWidth(token.text, font);
          }
        }
        token.width += paddingH;
        lineWidth += token.width;
        tokenStyle && (lineHeight = Math.max(lineHeight, token.lineHeight));
      }
      finishLine(line, lineWidth, lineHeight);
    }
  contentBlock.outerWidth = contentBlock.width = retrieve2(topWidth, calculatedWidth);
  contentBlock.outerHeight = contentBlock.height = retrieve2(topHeight, calculatedHeight);
  contentBlock.contentHeight = calculatedHeight;
  contentBlock.contentWidth = calculatedWidth;
  if (stlPadding) {
    contentBlock.outerWidth += stlPadding[1] + stlPadding[3];
    contentBlock.outerHeight += stlPadding[0] + stlPadding[2];
  }
  for (var i = 0; i < pendingList.length; i++) {
    var token = pendingList[i];
    var percentWidth = token.percentWidth;
    token.width = parseInt(percentWidth, 10) / 100 * contentBlock.width;
  }
  return contentBlock;
}
function pushTokens(block, str, style2, wrapInfo, styleName) {
  var isEmptyStr = str === "";
  var tokenStyle = styleName && style2.rich[styleName] || {};
  var lines = block.lines;
  var font = tokenStyle.font || style2.font;
  var newLine = false;
  var strLines;
  var linesWidths;
  if (wrapInfo) {
    var tokenPadding = tokenStyle.padding;
    var tokenPaddingH = tokenPadding ? tokenPadding[1] + tokenPadding[3] : 0;
    if (tokenStyle.width != null && tokenStyle.width !== "auto") {
      var outerWidth_1 = parsePercent$1(tokenStyle.width, wrapInfo.width) + tokenPaddingH;
      if (lines.length > 0) {
        if (outerWidth_1 + wrapInfo.accumWidth > wrapInfo.width) {
          strLines = str.split("\n");
          newLine = true;
        }
      }
      wrapInfo.accumWidth = outerWidth_1;
    } else {
      var res = wrapText(str, font, wrapInfo.width, wrapInfo.breakAll, wrapInfo.accumWidth);
      wrapInfo.accumWidth = res.accumWidth + tokenPaddingH;
      linesWidths = res.linesWidths;
      strLines = res.lines;
    }
  } else {
    strLines = str.split("\n");
  }
  for (var i = 0; i < strLines.length; i++) {
    var text = strLines[i];
    var token = new RichTextToken();
    token.styleName = styleName;
    token.text = text;
    token.isLineHolder = !text && !isEmptyStr;
    if (typeof tokenStyle.width === "number") {
      token.width = tokenStyle.width;
    } else {
      token.width = linesWidths ? linesWidths[i] : getWidth(text, font);
    }
    if (!i && !newLine) {
      var tokens = (lines[lines.length - 1] || (lines[0] = new RichTextLine())).tokens;
      var tokensLen = tokens.length;
      tokensLen === 1 && tokens[0].isLineHolder ? tokens[0] = token : (text || !tokensLen || isEmptyStr) && tokens.push(token);
    } else {
      lines.push(new RichTextLine([token]));
    }
  }
}
function isAlphabeticLetter(ch) {
  var code = ch.charCodeAt(0);
  return code >= 32 && code <= 591 || code >= 880 && code <= 4351 || code >= 4608 && code <= 5119 || code >= 7680 && code <= 8303;
}
var breakCharMap = reduce(",&?/;] ".split(""), function(obj, ch) {
  obj[ch] = true;
  return obj;
}, {});
function isWordBreakChar(ch) {
  if (isAlphabeticLetter(ch)) {
    if (breakCharMap[ch]) {
      return true;
    }
    return false;
  }
  return true;
}
function wrapText(text, font, lineWidth, isBreakAll, lastAccumWidth) {
  var lines = [];
  var linesWidths = [];
  var line = "";
  var currentWord = "";
  var currentWordWidth = 0;
  var accumWidth = 0;
  for (var i = 0; i < text.length; i++) {
    var ch = text.charAt(i);
    if (ch === "\n") {
      if (currentWord) {
        line += currentWord;
        accumWidth += currentWordWidth;
      }
      lines.push(line);
      linesWidths.push(accumWidth);
      line = "";
      currentWord = "";
      currentWordWidth = 0;
      accumWidth = 0;
      continue;
    }
    var chWidth = getWidth(ch, font);
    var inWord = isBreakAll ? false : !isWordBreakChar(ch);
    if (!lines.length ? lastAccumWidth + accumWidth + chWidth > lineWidth : accumWidth + chWidth > lineWidth) {
      if (!accumWidth) {
        if (inWord) {
          lines.push(currentWord);
          linesWidths.push(currentWordWidth);
          currentWord = ch;
          currentWordWidth = chWidth;
        } else {
          lines.push(ch);
          linesWidths.push(chWidth);
        }
      } else if (line || currentWord) {
        if (inWord) {
          if (!line) {
            line = currentWord;
            currentWord = "";
            currentWordWidth = 0;
            accumWidth = currentWordWidth;
          }
          lines.push(line);
          linesWidths.push(accumWidth - currentWordWidth);
          currentWord += ch;
          currentWordWidth += chWidth;
          line = "";
          accumWidth = currentWordWidth;
        } else {
          if (currentWord) {
            line += currentWord;
            currentWord = "";
            currentWordWidth = 0;
          }
          lines.push(line);
          linesWidths.push(accumWidth);
          line = ch;
          accumWidth = chWidth;
        }
      }
      continue;
    }
    accumWidth += chWidth;
    if (inWord) {
      currentWord += ch;
      currentWordWidth += chWidth;
    } else {
      if (currentWord) {
        line += currentWord;
        currentWord = "";
        currentWordWidth = 0;
      }
      line += ch;
    }
  }
  if (!lines.length && !line) {
    line = text;
    currentWord = "";
    currentWordWidth = 0;
  }
  if (currentWord) {
    line += currentWord;
  }
  if (line) {
    lines.push(line);
    linesWidths.push(accumWidth);
  }
  if (lines.length === 1) {
    accumWidth += lastAccumWidth;
  }
  return {
    accumWidth,
    lines,
    linesWidths
  };
}
var STYLE_MAGIC_KEY = "__zr_style_" + Math.round(Math.random() * 10);
var DEFAULT_COMMON_STYLE = {
  shadowBlur: 0,
  shadowOffsetX: 0,
  shadowOffsetY: 0,
  shadowColor: "#000",
  opacity: 1,
  blend: "source-over"
};
var DEFAULT_COMMON_ANIMATION_PROPS = {
  style: {
    shadowBlur: true,
    shadowOffsetX: true,
    shadowOffsetY: true,
    shadowColor: true,
    opacity: true
  }
};
DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY] = true;
var PRIMARY_STATES_KEYS = ["z", "z2", "invisible"];
var PRIMARY_STATES_KEYS_IN_HOVER_LAYER = ["invisible"];
var Displayable = function(_super) {
  __extends(Displayable2, _super);
  function Displayable2(props) {
    return _super.call(this, props) || this;
  }
  Displayable2.prototype._init = function(props) {
    var keysArr = keys(props);
    for (var i = 0; i < keysArr.length; i++) {
      var key = keysArr[i];
      if (key === "style") {
        this.useStyle(props[key]);
      } else {
        _super.prototype.attrKV.call(this, key, props[key]);
      }
    }
    if (!this.style) {
      this.useStyle({});
    }
  };
  Displayable2.prototype.beforeBrush = function() {
  };
  Displayable2.prototype.afterBrush = function() {
  };
  Displayable2.prototype.innerBeforeBrush = function() {
  };
  Displayable2.prototype.innerAfterBrush = function() {
  };
  Displayable2.prototype.shouldBePainted = function(viewWidth, viewHeight, considerClipPath, considerAncestors) {
    var m2 = this.transform;
    if (this.ignore || this.invisible || this.style.opacity === 0 || this.culling && isDisplayableCulled(this, viewWidth, viewHeight) || m2 && !m2[0] && !m2[3]) {
      return false;
    }
    if (considerClipPath && this.__clipPaths) {
      for (var i = 0; i < this.__clipPaths.length; ++i) {
        if (this.__clipPaths[i].isZeroArea()) {
          return false;
        }
      }
    }
    if (considerAncestors && this.parent) {
      var parent_1 = this.parent;
      while (parent_1) {
        if (parent_1.ignore) {
          return false;
        }
        parent_1 = parent_1.parent;
      }
    }
    return true;
  };
  Displayable2.prototype.contain = function(x2, y2) {
    return this.rectContain(x2, y2);
  };
  Displayable2.prototype.traverse = function(cb, context) {
    cb.call(context, this);
  };
  Displayable2.prototype.rectContain = function(x2, y2) {
    var coord = this.transformCoordToLocal(x2, y2);
    var rect = this.getBoundingRect();
    return rect.contain(coord[0], coord[1]);
  };
  Displayable2.prototype.getPaintRect = function() {
    var rect = this._paintRect;
    if (!this._paintRect || this.__dirty) {
      var transform = this.transform;
      var elRect = this.getBoundingRect();
      var style2 = this.style;
      var shadowSize = style2.shadowBlur || 0;
      var shadowOffsetX = style2.shadowOffsetX || 0;
      var shadowOffsetY = style2.shadowOffsetY || 0;
      rect = this._paintRect || (this._paintRect = new BoundingRect$1(0, 0, 0, 0));
      if (transform) {
        BoundingRect$1.applyTransform(rect, elRect, transform);
      } else {
        rect.copy(elRect);
      }
      if (shadowSize || shadowOffsetX || shadowOffsetY) {
        rect.width += shadowSize * 2 + Math.abs(shadowOffsetX);
        rect.height += shadowSize * 2 + Math.abs(shadowOffsetY);
        rect.x = Math.min(rect.x, rect.x + shadowOffsetX - shadowSize);
        rect.y = Math.min(rect.y, rect.y + shadowOffsetY - shadowSize);
      }
      var tolerance = this.dirtyRectTolerance;
      if (!rect.isZero()) {
        rect.x = Math.floor(rect.x - tolerance);
        rect.y = Math.floor(rect.y - tolerance);
        rect.width = Math.ceil(rect.width + 1 + tolerance * 2);
        rect.height = Math.ceil(rect.height + 1 + tolerance * 2);
      }
    }
    return rect;
  };
  Displayable2.prototype.setPrevPaintRect = function(paintRect) {
    if (paintRect) {
      this._prevPaintRect = this._prevPaintRect || new BoundingRect$1(0, 0, 0, 0);
      this._prevPaintRect.copy(paintRect);
    } else {
      this._prevPaintRect = null;
    }
  };
  Displayable2.prototype.getPrevPaintRect = function() {
    return this._prevPaintRect;
  };
  Displayable2.prototype.animateStyle = function(loop) {
    return this.animate("style", loop);
  };
  Displayable2.prototype.updateDuringAnimation = function(targetKey) {
    if (targetKey === "style") {
      this.dirtyStyle();
    } else {
      this.markRedraw();
    }
  };
  Displayable2.prototype.attrKV = function(key, value) {
    if (key !== "style") {
      _super.prototype.attrKV.call(this, key, value);
    } else {
      if (!this.style) {
        this.useStyle(value);
      } else {
        this.setStyle(value);
      }
    }
  };
  Displayable2.prototype.setStyle = function(keyOrObj, value) {
    if (typeof keyOrObj === "string") {
      this.style[keyOrObj] = value;
    } else {
      extend(this.style, keyOrObj);
    }
    this.dirtyStyle();
    return this;
  };
  Displayable2.prototype.dirtyStyle = function(notRedraw) {
    if (!notRedraw) {
      this.markRedraw();
    }
    this.__dirty |= STYLE_CHANGED_BIT;
    if (this._rect) {
      this._rect = null;
    }
  };
  Displayable2.prototype.dirty = function() {
    this.dirtyStyle();
  };
  Displayable2.prototype.styleChanged = function() {
    return !!(this.__dirty & STYLE_CHANGED_BIT);
  };
  Displayable2.prototype.styleUpdated = function() {
    this.__dirty &= ~STYLE_CHANGED_BIT;
  };
  Displayable2.prototype.createStyle = function(obj) {
    return createObject(DEFAULT_COMMON_STYLE, obj);
  };
  Displayable2.prototype.useStyle = function(obj) {
    if (!obj[STYLE_MAGIC_KEY]) {
      obj = this.createStyle(obj);
    }
    if (this.__inHover) {
      this.__hoverStyle = obj;
    } else {
      this.style = obj;
    }
    this.dirtyStyle();
  };
  Displayable2.prototype.isStyleObject = function(obj) {
    return obj[STYLE_MAGIC_KEY];
  };
  Displayable2.prototype._innerSaveToNormal = function(toState) {
    _super.prototype._innerSaveToNormal.call(this, toState);
    var normalState = this._normalState;
    if (toState.style && !normalState.style) {
      normalState.style = this._mergeStyle(this.createStyle(), this.style);
    }
    this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS);
  };
  Displayable2.prototype._applyStateObj = function(stateName, state, normalState, keepCurrentStates, transition, animationCfg) {
    _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);
    var needsRestoreToNormal = !(state && keepCurrentStates);
    var targetStyle;
    if (state && state.style) {
      if (transition) {
        if (keepCurrentStates) {
          targetStyle = state.style;
        } else {
          targetStyle = this._mergeStyle(this.createStyle(), normalState.style);
          this._mergeStyle(targetStyle, state.style);
        }
      } else {
        targetStyle = this._mergeStyle(this.createStyle(), keepCurrentStates ? this.style : normalState.style);
        this._mergeStyle(targetStyle, state.style);
      }
    } else if (needsRestoreToNormal) {
      targetStyle = normalState.style;
    }
    if (targetStyle) {
      if (transition) {
        var sourceStyle = this.style;
        this.style = this.createStyle(needsRestoreToNormal ? {} : sourceStyle);
        if (needsRestoreToNormal) {
          var changedKeys = keys(sourceStyle);
          for (var i = 0; i < changedKeys.length; i++) {
            var key = changedKeys[i];
            if (key in targetStyle) {
              targetStyle[key] = targetStyle[key];
              this.style[key] = sourceStyle[key];
            }
          }
        }
        var targetKeys = keys(targetStyle);
        for (var i = 0; i < targetKeys.length; i++) {
          var key = targetKeys[i];
          this.style[key] = this.style[key];
        }
        this._transitionState(stateName, {
          style: targetStyle
        }, animationCfg, this.getAnimationStyleProps());
      } else {
        this.useStyle(targetStyle);
      }
    }
    var statesKeys = this.__inHover ? PRIMARY_STATES_KEYS_IN_HOVER_LAYER : PRIMARY_STATES_KEYS;
    for (var i = 0; i < statesKeys.length; i++) {
      var key = statesKeys[i];
      if (state && state[key] != null) {
        this[key] = state[key];
      } else if (needsRestoreToNormal) {
        if (normalState[key] != null) {
          this[key] = normalState[key];
        }
      }
    }
  };
  Displayable2.prototype._mergeStates = function(states) {
    var mergedState = _super.prototype._mergeStates.call(this, states);
    var mergedStyle;
    for (var i = 0; i < states.length; i++) {
      var state = states[i];
      if (state.style) {
        mergedStyle = mergedStyle || {};
        this._mergeStyle(mergedStyle, state.style);
      }
    }
    if (mergedStyle) {
      mergedState.style = mergedStyle;
    }
    return mergedState;
  };
  Displayable2.prototype._mergeStyle = function(targetStyle, sourceStyle) {
    extend(targetStyle, sourceStyle);
    return targetStyle;
  };
  Displayable2.prototype.getAnimationStyleProps = function() {
    return DEFAULT_COMMON_ANIMATION_PROPS;
  };
  Displayable2.initDefaultProps = function() {
    var dispProto = Displayable2.prototype;
    dispProto.type = "displayable";
    dispProto.invisible = false;
    dispProto.z = 0;
    dispProto.z2 = 0;
    dispProto.zlevel = 0;
    dispProto.culling = false;
    dispProto.cursor = "pointer";
    dispProto.rectHover = false;
    dispProto.incremental = false;
    dispProto._rect = null;
    dispProto.dirtyRectTolerance = 0;
    dispProto.__dirty = REDRAW_BIT | STYLE_CHANGED_BIT;
  }();
  return Displayable2;
}(Element$1);
var tmpRect = new BoundingRect$1(0, 0, 0, 0);
var viewRect = new BoundingRect$1(0, 0, 0, 0);
function isDisplayableCulled(el, width, height) {
  tmpRect.copy(el.getBoundingRect());
  if (el.transform) {
    tmpRect.applyTransform(el.transform);
  }
  viewRect.width = width;
  viewRect.height = height;
  return !tmpRect.intersect(viewRect);
}
var Displayable$1 = Displayable;
var mathMin$3 = Math.min;
var mathMax$3 = Math.max;
var mathSin$3 = Math.sin;
var mathCos$3 = Math.cos;
var PI2$6 = Math.PI * 2;
var start = create$1();
var end = create$1();
var extremity = create$1();
function fromLine(x0, y0, x1, y1, min3, max3) {
  min3[0] = mathMin$3(x0, x1);
  min3[1] = mathMin$3(y0, y1);
  max3[0] = mathMax$3(x0, x1);
  max3[1] = mathMax$3(y0, y1);
}
var xDim = [];
var yDim = [];
function fromCubic(x0, y0, x1, y1, x2, y2, x3, y3, min3, max3) {
  var cubicExtrema$1 = cubicExtrema;
  var cubicAt$1 = cubicAt;
  var n = cubicExtrema$1(x0, x1, x2, x3, xDim);
  min3[0] = Infinity;
  min3[1] = Infinity;
  max3[0] = -Infinity;
  max3[1] = -Infinity;
  for (var i = 0; i < n; i++) {
    var x4 = cubicAt$1(x0, x1, x2, x3, xDim[i]);
    min3[0] = mathMin$3(x4, min3[0]);
    max3[0] = mathMax$3(x4, max3[0]);
  }
  n = cubicExtrema$1(y0, y1, y2, y3, yDim);
  for (var i = 0; i < n; i++) {
    var y4 = cubicAt$1(y0, y1, y2, y3, yDim[i]);
    min3[1] = mathMin$3(y4, min3[1]);
    max3[1] = mathMax$3(y4, max3[1]);
  }
  min3[0] = mathMin$3(x0, min3[0]);
  max3[0] = mathMax$3(x0, max3[0]);
  min3[0] = mathMin$3(x3, min3[0]);
  max3[0] = mathMax$3(x3, max3[0]);
  min3[1] = mathMin$3(y0, min3[1]);
  max3[1] = mathMax$3(y0, max3[1]);
  min3[1] = mathMin$3(y3, min3[1]);
  max3[1] = mathMax$3(y3, max3[1]);
}
function fromQuadratic(x0, y0, x1, y1, x2, y2, min3, max3) {
  var quadraticExtremum$1 = quadraticExtremum;
  var quadraticAt$1 = quadraticAt;
  var tx = mathMax$3(mathMin$3(quadraticExtremum$1(x0, x1, x2), 1), 0);
  var ty = mathMax$3(mathMin$3(quadraticExtremum$1(y0, y1, y2), 1), 0);
  var x3 = quadraticAt$1(x0, x1, x2, tx);
  var y3 = quadraticAt$1(y0, y1, y2, ty);
  min3[0] = mathMin$3(x0, x2, x3);
  min3[1] = mathMin$3(y0, y2, y3);
  max3[0] = mathMax$3(x0, x2, x3);
  max3[1] = mathMax$3(y0, y2, y3);
}
function fromArc(x2, y2, rx, ry, startAngle, endAngle, anticlockwise, min3, max3) {
  var vec2Min = min$1;
  var vec2Max = max$1;
  var diff = Math.abs(startAngle - endAngle);
  if (diff % PI2$6 < 1e-4 && diff > 1e-4) {
    min3[0] = x2 - rx;
    min3[1] = y2 - ry;
    max3[0] = x2 + rx;
    max3[1] = y2 + ry;
    return;
  }
  start[0] = mathCos$3(startAngle) * rx + x2;
  start[1] = mathSin$3(startAngle) * ry + y2;
  end[0] = mathCos$3(endAngle) * rx + x2;
  end[1] = mathSin$3(endAngle) * ry + y2;
  vec2Min(min3, start, end);
  vec2Max(max3, start, end);
  startAngle = startAngle % PI2$6;
  if (startAngle < 0) {
    startAngle = startAngle + PI2$6;
  }
  endAngle = endAngle % PI2$6;
  if (endAngle < 0) {
    endAngle = endAngle + PI2$6;
  }
  if (startAngle > endAngle && !anticlockwise) {
    endAngle += PI2$6;
  } else if (startAngle < endAngle && anticlockwise) {
    startAngle += PI2$6;
  }
  if (anticlockwise) {
    var tmp = endAngle;
    endAngle = startAngle;
    startAngle = tmp;
  }
  for (var angle = 0; angle < endAngle; angle += Math.PI / 2) {
    if (angle > startAngle) {
      extremity[0] = mathCos$3(angle) * rx + x2;
      extremity[1] = mathSin$3(angle) * ry + y2;
      vec2Min(min3, extremity, min3);
      vec2Max(max3, extremity, max3);
    }
  }
}
var CMD$2 = {
  M: 1,
  L: 2,
  C: 3,
  Q: 4,
  A: 5,
  Z: 6,
  R: 7
};
var tmpOutX = [];
var tmpOutY = [];
var min = [];
var max = [];
var min2 = [];
var max2 = [];
var mathMin$2 = Math.min;
var mathMax$2 = Math.max;
var mathCos$2 = Math.cos;
var mathSin$2 = Math.sin;
var mathAbs$1 = Math.abs;
var PI$4 = Math.PI;
var PI2$5 = PI$4 * 2;
var hasTypedArray = typeof Float32Array !== "undefined";
var tmpAngles = [];
function modPI2(radian) {
  var n = Math.round(radian / PI$4 * 1e8) / 1e8;
  return n % 2 * PI$4;
}
function normalizeArcAngles(angles, anticlockwise) {
  var newStartAngle = modPI2(angles[0]);
  if (newStartAngle < 0) {
    newStartAngle += PI2$5;
  }
  var delta = newStartAngle - angles[0];
  var newEndAngle = angles[1];
  newEndAngle += delta;
  if (!anticlockwise && newEndAngle - newStartAngle >= PI2$5) {
    newEndAngle = newStartAngle + PI2$5;
  } else if (anticlockwise && newStartAngle - newEndAngle >= PI2$5) {
    newEndAngle = newStartAngle - PI2$5;
  } else if (!anticlockwise && newStartAngle > newEndAngle) {
    newEndAngle = newStartAngle + (PI2$5 - modPI2(newStartAngle - newEndAngle));
  } else if (anticlockwise && newStartAngle < newEndAngle) {
    newEndAngle = newStartAngle - (PI2$5 - modPI2(newEndAngle - newStartAngle));
  }
  angles[0] = newStartAngle;
  angles[1] = newEndAngle;
}
var PathProxy = function() {
  function PathProxy2(notSaveData) {
    this.dpr = 1;
    this._xi = 0;
    this._yi = 0;
    this._x0 = 0;
    this._y0 = 0;
    this._len = 0;
    if (notSaveData) {
      this._saveData = false;
    }
    if (this._saveData) {
      this.data = [];
    }
  }
  PathProxy2.prototype.increaseVersion = function() {
    this._version++;
  };
  PathProxy2.prototype.getVersion = function() {
    return this._version;
  };
  PathProxy2.prototype.setScale = function(sx, sy, segmentIgnoreThreshold) {
    segmentIgnoreThreshold = segmentIgnoreThreshold || 0;
    if (segmentIgnoreThreshold > 0) {
      this._ux = mathAbs$1(segmentIgnoreThreshold / devicePixelRatio / sx) || 0;
      this._uy = mathAbs$1(segmentIgnoreThreshold / devicePixelRatio / sy) || 0;
    }
  };
  PathProxy2.prototype.setDPR = function(dpr2) {
    this.dpr = dpr2;
  };
  PathProxy2.prototype.setContext = function(ctx) {
    this._ctx = ctx;
  };
  PathProxy2.prototype.getContext = function() {
    return this._ctx;
  };
  PathProxy2.prototype.beginPath = function() {
    this._ctx && this._ctx.beginPath();
    this.reset();
    return this;
  };
  PathProxy2.prototype.reset = function() {
    if (this._saveData) {
      this._len = 0;
    }
    if (this._pathSegLen) {
      this._pathSegLen = null;
      this._pathLen = 0;
    }
    this._version++;
  };
  PathProxy2.prototype.moveTo = function(x2, y2) {
    this._drawPendingPt();
    this.addData(CMD$2.M, x2, y2);
    this._ctx && this._ctx.moveTo(x2, y2);
    this._x0 = x2;
    this._y0 = y2;
    this._xi = x2;
    this._yi = y2;
    return this;
  };
  PathProxy2.prototype.lineTo = function(x2, y2) {
    var dx = mathAbs$1(x2 - this._xi);
    var dy = mathAbs$1(y2 - this._yi);
    var exceedUnit = dx > this._ux || dy > this._uy;
    this.addData(CMD$2.L, x2, y2);
    if (this._ctx && exceedUnit) {
      this._ctx.lineTo(x2, y2);
    }
    if (exceedUnit) {
      this._xi = x2;
      this._yi = y2;
      this._pendingPtDist = 0;
    } else {
      var d2 = dx * dx + dy * dy;
      if (d2 > this._pendingPtDist) {
        this._pendingPtX = x2;
        this._pendingPtY = y2;
        this._pendingPtDist = d2;
      }
    }
    return this;
  };
  PathProxy2.prototype.bezierCurveTo = function(x1, y1, x2, y2, x3, y3) {
    this._drawPendingPt();
    this.addData(CMD$2.C, x1, y1, x2, y2, x3, y3);
    if (this._ctx) {
      this._ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);
    }
    this._xi = x3;
    this._yi = y3;
    return this;
  };
  PathProxy2.prototype.quadraticCurveTo = function(x1, y1, x2, y2) {
    this._drawPendingPt();
    this.addData(CMD$2.Q, x1, y1, x2, y2);
    if (this._ctx) {
      this._ctx.quadraticCurveTo(x1, y1, x2, y2);
    }
    this._xi = x2;
    this._yi = y2;
    return this;
  };
  PathProxy2.prototype.arc = function(cx, cy, r, startAngle, endAngle, anticlockwise) {
    this._drawPendingPt();
    tmpAngles[0] = startAngle;
    tmpAngles[1] = endAngle;
    normalizeArcAngles(tmpAngles, anticlockwise);
    startAngle = tmpAngles[0];
    endAngle = tmpAngles[1];
    var delta = endAngle - startAngle;
    this.addData(CMD$2.A, cx, cy, r, r, startAngle, delta, 0, anticlockwise ? 0 : 1);
    this._ctx && this._ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);
    this._xi = mathCos$2(endAngle) * r + cx;
    this._yi = mathSin$2(endAngle) * r + cy;
    return this;
  };
  PathProxy2.prototype.arcTo = function(x1, y1, x2, y2, radius) {
    this._drawPendingPt();
    if (this._ctx) {
      this._ctx.arcTo(x1, y1, x2, y2, radius);
    }
    return this;
  };
  PathProxy2.prototype.rect = function(x2, y2, w2, h2) {
    this._drawPendingPt();
    this._ctx && this._ctx.rect(x2, y2, w2, h2);
    this.addData(CMD$2.R, x2, y2, w2, h2);
    return this;
  };
  PathProxy2.prototype.closePath = function() {
    this._drawPendingPt();
    this.addData(CMD$2.Z);
    var ctx = this._ctx;
    var x0 = this._x0;
    var y0 = this._y0;
    if (ctx) {
      ctx.closePath();
    }
    this._xi = x0;
    this._yi = y0;
    return this;
  };
  PathProxy2.prototype.fill = function(ctx) {
    ctx && ctx.fill();
    this.toStatic();
  };
  PathProxy2.prototype.stroke = function(ctx) {
    ctx && ctx.stroke();
    this.toStatic();
  };
  PathProxy2.prototype.len = function() {
    return this._len;
  };
  PathProxy2.prototype.setData = function(data) {
    var len2 = data.length;
    if (!(this.data && this.data.length === len2) && hasTypedArray) {
      this.data = new Float32Array(len2);
    }
    for (var i = 0; i < len2; i++) {
      this.data[i] = data[i];
    }
    this._len = len2;
  };
  PathProxy2.prototype.appendPath = function(path) {
    if (!(path instanceof Array)) {
      path = [path];
    }
    var len2 = path.length;
    var appendSize = 0;
    var offset = this._len;
    for (var i = 0; i < len2; i++) {
      appendSize += path[i].len();
    }
    if (hasTypedArray && this.data instanceof Float32Array) {
      this.data = new Float32Array(offset + appendSize);
    }
    for (var i = 0; i < len2; i++) {
      var appendPathData = path[i].data;
      for (var k2 = 0; k2 < appendPathData.length; k2++) {
        this.data[offset++] = appendPathData[k2];
      }
    }
    this._len = offset;
  };
  PathProxy2.prototype.addData = function(cmd, a, b2, c, d, e2, f, g, h2) {
    if (!this._saveData) {
      return;
    }
    var data = this.data;
    if (this._len + arguments.length > data.length) {
      this._expandData();
      data = this.data;
    }
    for (var i = 0; i < arguments.length; i++) {
      data[this._len++] = arguments[i];
    }
  };
  PathProxy2.prototype._drawPendingPt = function() {
    if (this._pendingPtDist > 0) {
      this._ctx && this._ctx.lineTo(this._pendingPtX, this._pendingPtY);
      this._pendingPtDist = 0;
    }
  };
  PathProxy2.prototype._expandData = function() {
    if (!(this.data instanceof Array)) {
      var newData = [];
      for (var i = 0; i < this._len; i++) {
        newData[i] = this.data[i];
      }
      this.data = newData;
    }
  };
  PathProxy2.prototype.toStatic = function() {
    if (!this._saveData) {
      return;
    }
    this._drawPendingPt();
    var data = this.data;
    if (data instanceof Array) {
      data.length = this._len;
      if (hasTypedArray && this._len > 11) {
        this.data = new Float32Array(data);
      }
    }
  };
  PathProxy2.prototype.getBoundingRect = function() {
    min[0] = min[1] = min2[0] = min2[1] = Number.MAX_VALUE;
    max[0] = max[1] = max2[0] = max2[1] = -Number.MAX_VALUE;
    var data = this.data;
    var xi = 0;
    var yi = 0;
    var x0 = 0;
    var y0 = 0;
    var i;
    for (i = 0; i < this._len; ) {
      var cmd = data[i++];
      var isFirst = i === 1;
      if (isFirst) {
        xi = data[i];
        yi = data[i + 1];
        x0 = xi;
        y0 = yi;
      }
      switch (cmd) {
        case CMD$2.M:
          xi = x0 = data[i++];
          yi = y0 = data[i++];
          min2[0] = x0;
          min2[1] = y0;
          max2[0] = x0;
          max2[1] = y0;
          break;
        case CMD$2.L:
          fromLine(xi, yi, data[i], data[i + 1], min2, max2);
          xi = data[i++];
          yi = data[i++];
          break;
        case CMD$2.C:
          fromCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], min2, max2);
          xi = data[i++];
          yi = data[i++];
          break;
        case CMD$2.Q:
          fromQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], min2, max2);
          xi = data[i++];
          yi = data[i++];
          break;
        case CMD$2.A:
          var cx = data[i++];
          var cy = data[i++];
          var rx = data[i++];
          var ry = data[i++];
          var startAngle = data[i++];
          var endAngle = data[i++] + startAngle;
          i += 1;
          var anticlockwise = !data[i++];
          if (isFirst) {
            x0 = mathCos$2(startAngle) * rx + cx;
            y0 = mathSin$2(startAngle) * ry + cy;
          }
          fromArc(cx, cy, rx, ry, startAngle, endAngle, anticlockwise, min2, max2);
          xi = mathCos$2(endAngle) * rx + cx;
          yi = mathSin$2(endAngle) * ry + cy;
          break;
        case CMD$2.R:
          x0 = xi = data[i++];
          y0 = yi = data[i++];
          var width = data[i++];
          var height = data[i++];
          fromLine(x0, y0, x0 + width, y0 + height, min2, max2);
          break;
        case CMD$2.Z:
          xi = x0;
          yi = y0;
          break;
      }
      min$1(min, min, min2);
      max$1(max, max, max2);
    }
    if (i === 0) {
      min[0] = min[1] = max[0] = max[1] = 0;
    }
    return new BoundingRect$1(min[0], min[1], max[0] - min[0], max[1] - min[1]);
  };
  PathProxy2.prototype._calculateLength = function() {
    var data = this.data;
    var len2 = this._len;
    var ux = this._ux;
    var uy = this._uy;
    var xi = 0;
    var yi = 0;
    var x0 = 0;
    var y0 = 0;
    if (!this._pathSegLen) {
      this._pathSegLen = [];
    }
    var pathSegLen = this._pathSegLen;
    var pathTotalLen = 0;
    var segCount = 0;
    for (var i = 0; i < len2; ) {
      var cmd = data[i++];
      var isFirst = i === 1;
      if (isFirst) {
        xi = data[i];
        yi = data[i + 1];
        x0 = xi;
        y0 = yi;
      }
      var l = -1;
      switch (cmd) {
        case CMD$2.M:
          xi = x0 = data[i++];
          yi = y0 = data[i++];
          break;
        case CMD$2.L: {
          var x2 = data[i++];
          var y2 = data[i++];
          var dx = x2 - xi;
          var dy = y2 - yi;
          if (mathAbs$1(dx) > ux || mathAbs$1(dy) > uy || i === len2 - 1) {
            l = Math.sqrt(dx * dx + dy * dy);
            xi = x2;
            yi = y2;
          }
          break;
        }
        case CMD$2.C: {
          var x1 = data[i++];
          var y1 = data[i++];
          var x2 = data[i++];
          var y2 = data[i++];
          var x3 = data[i++];
          var y3 = data[i++];
          l = cubicLength(xi, yi, x1, y1, x2, y2, x3, y3, 10);
          xi = x3;
          yi = y3;
          break;
        }
        case CMD$2.Q: {
          var x1 = data[i++];
          var y1 = data[i++];
          var x2 = data[i++];
          var y2 = data[i++];
          l = quadraticLength(xi, yi, x1, y1, x2, y2, 10);
          xi = x2;
          yi = y2;
          break;
        }
        case CMD$2.A:
          var cx = data[i++];
          var cy = data[i++];
          var rx = data[i++];
          var ry = data[i++];
          var startAngle = data[i++];
          var delta = data[i++];
          var endAngle = delta + startAngle;
          i += 1;
          !data[i++];
          if (isFirst) {
            x0 = mathCos$2(startAngle) * rx + cx;
            y0 = mathSin$2(startAngle) * ry + cy;
          }
          l = mathMax$2(rx, ry) * mathMin$2(PI2$5, Math.abs(delta));
          xi = mathCos$2(endAngle) * rx + cx;
          yi = mathSin$2(endAngle) * ry + cy;
          break;
        case CMD$2.R: {
          x0 = xi = data[i++];
          y0 = yi = data[i++];
          var width = data[i++];
          var height = data[i++];
          l = width * 2 + height * 2;
          break;
        }
        case CMD$2.Z: {
          var dx = x0 - xi;
          var dy = y0 - yi;
          l = Math.sqrt(dx * dx + dy * dy);
          xi = x0;
          yi = y0;
          break;
        }
      }
      if (l >= 0) {
        pathSegLen[segCount++] = l;
        pathTotalLen += l;
      }
    }
    this._pathLen = pathTotalLen;
    return pathTotalLen;
  };
  PathProxy2.prototype.rebuildPath = function(ctx, percent) {
    var d = this.data;
    var ux = this._ux;
    var uy = this._uy;
    var len2 = this._len;
    var x0;
    var y0;
    var xi;
    var yi;
    var x2;
    var y2;
    var drawPart = percent < 1;
    var pathSegLen;
    var pathTotalLen;
    var accumLength = 0;
    var segCount = 0;
    var displayedLength;
    var pendingPtDist = 0;
    var pendingPtX;
    var pendingPtY;
    if (drawPart) {
      if (!this._pathSegLen) {
        this._calculateLength();
      }
      pathSegLen = this._pathSegLen;
      pathTotalLen = this._pathLen;
      displayedLength = percent * pathTotalLen;
      if (!displayedLength) {
        return;
      }
    }
    lo:
      for (var i = 0; i < len2; ) {
        var cmd = d[i++];
        var isFirst = i === 1;
        if (isFirst) {
          xi = d[i];
          yi = d[i + 1];
          x0 = xi;
          y0 = yi;
        }
        if (cmd !== CMD$2.L && pendingPtDist > 0) {
          ctx.lineTo(pendingPtX, pendingPtY);
          pendingPtDist = 0;
        }
        switch (cmd) {
          case CMD$2.M:
            x0 = xi = d[i++];
            y0 = yi = d[i++];
            ctx.moveTo(xi, yi);
            break;
          case CMD$2.L: {
            x2 = d[i++];
            y2 = d[i++];
            var dx = mathAbs$1(x2 - xi);
            var dy = mathAbs$1(y2 - yi);
            if (dx > ux || dy > uy) {
              if (drawPart) {
                var l = pathSegLen[segCount++];
                if (accumLength + l > displayedLength) {
                  var t = (displayedLength - accumLength) / l;
                  ctx.lineTo(xi * (1 - t) + x2 * t, yi * (1 - t) + y2 * t);
                  break lo;
                }
                accumLength += l;
              }
              ctx.lineTo(x2, y2);
              xi = x2;
              yi = y2;
              pendingPtDist = 0;
            } else {
              var d2 = dx * dx + dy * dy;
              if (d2 > pendingPtDist) {
                pendingPtX = x2;
                pendingPtY = y2;
                pendingPtDist = d2;
              }
            }
            break;
          }
          case CMD$2.C: {
            var x1 = d[i++];
            var y1 = d[i++];
            var x22 = d[i++];
            var y22 = d[i++];
            var x3 = d[i++];
            var y3 = d[i++];
            if (drawPart) {
              var l = pathSegLen[segCount++];
              if (accumLength + l > displayedLength) {
                var t = (displayedLength - accumLength) / l;
                cubicSubdivide(xi, x1, x22, x3, t, tmpOutX);
                cubicSubdivide(yi, y1, y22, y3, t, tmpOutY);
                ctx.bezierCurveTo(tmpOutX[1], tmpOutY[1], tmpOutX[2], tmpOutY[2], tmpOutX[3], tmpOutY[3]);
                break lo;
              }
              accumLength += l;
            }
            ctx.bezierCurveTo(x1, y1, x22, y22, x3, y3);
            xi = x3;
            yi = y3;
            break;
          }
          case CMD$2.Q: {
            var x1 = d[i++];
            var y1 = d[i++];
            var x22 = d[i++];
            var y22 = d[i++];
            if (drawPart) {
              var l = pathSegLen[segCount++];
              if (accumLength + l > displayedLength) {
                var t = (displayedLength - accumLength) / l;
                quadraticSubdivide(xi, x1, x22, t, tmpOutX);
                quadraticSubdivide(yi, y1, y22, t, tmpOutY);
                ctx.quadraticCurveTo(tmpOutX[1], tmpOutY[1], tmpOutX[2], tmpOutY[2]);
                break lo;
              }
              accumLength += l;
            }
            ctx.quadraticCurveTo(x1, y1, x22, y22);
            xi = x22;
            yi = y22;
            break;
          }
          case CMD$2.A:
            var cx = d[i++];
            var cy = d[i++];
            var rx = d[i++];
            var ry = d[i++];
            var startAngle = d[i++];
            var delta = d[i++];
            var psi = d[i++];
            var anticlockwise = !d[i++];
            var r = rx > ry ? rx : ry;
            var isEllipse = mathAbs$1(rx - ry) > 1e-3;
            var endAngle = startAngle + delta;
            var breakBuild = false;
            if (drawPart) {
              var l = pathSegLen[segCount++];
              if (accumLength + l > displayedLength) {
                endAngle = startAngle + delta * (displayedLength - accumLength) / l;
                breakBuild = true;
              }
              accumLength += l;
            }
            if (isEllipse && ctx.ellipse) {
              ctx.ellipse(cx, cy, rx, ry, psi, startAngle, endAngle, anticlockwise);
            } else {
              ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);
            }
            if (breakBuild) {
              break lo;
            }
            if (isFirst) {
              x0 = mathCos$2(startAngle) * rx + cx;
              y0 = mathSin$2(startAngle) * ry + cy;
            }
            xi = mathCos$2(endAngle) * rx + cx;
            yi = mathSin$2(endAngle) * ry + cy;
            break;
          case CMD$2.R:
            x0 = xi = d[i];
            y0 = yi = d[i + 1];
            x2 = d[i++];
            y2 = d[i++];
            var width = d[i++];
            var height = d[i++];
            if (drawPart) {
              var l = pathSegLen[segCount++];
              if (accumLength + l > displayedLength) {
                var d_1 = displayedLength - accumLength;
                ctx.moveTo(x2, y2);
                ctx.lineTo(x2 + mathMin$2(d_1, width), y2);
                d_1 -= width;
                if (d_1 > 0) {
                  ctx.lineTo(x2 + width, y2 + mathMin$2(d_1, height));
                }
                d_1 -= height;
                if (d_1 > 0) {
                  ctx.lineTo(x2 + mathMax$2(width - d_1, 0), y2 + height);
                }
                d_1 -= width;
                if (d_1 > 0) {
                  ctx.lineTo(x2, y2 + mathMax$2(height - d_1, 0));
                }
                break lo;
              }
              accumLength += l;
            }
            ctx.rect(x2, y2, width, height);
            break;
          case CMD$2.Z:
            if (drawPart) {
              var l = pathSegLen[segCount++];
              if (accumLength + l > displayedLength) {
                var t = (displayedLength - accumLength) / l;
                ctx.lineTo(xi * (1 - t) + x0 * t, yi * (1 - t) + y0 * t);
                break lo;
              }
              accumLength += l;
            }
            ctx.closePath();
            xi = x0;
            yi = y0;
        }
      }
  };
  PathProxy2.prototype.clone = function() {
    var newProxy = new PathProxy2();
    var data = this.data;
    newProxy.data = data.slice ? data.slice() : Array.prototype.slice.call(data);
    newProxy._len = this._len;
    return newProxy;
  };
  PathProxy2.CMD = CMD$2;
  PathProxy2.initDefaultProps = function() {
    var proto = PathProxy2.prototype;
    proto._saveData = true;
    proto._ux = 0;
    proto._uy = 0;
    proto._pendingPtDist = 0;
    proto._version = 0;
  }();
  return PathProxy2;
}();
var PathProxy$1 = PathProxy;
function containStroke$4(x0, y0, x1, y1, lineWidth, x2, y2) {
  if (lineWidth === 0) {
    return false;
  }
  var _l = lineWidth;
  var _a2 = 0;
  var _b2 = x0;
  if (y2 > y0 + _l && y2 > y1 + _l || y2 < y0 - _l && y2 < y1 - _l || x2 > x0 + _l && x2 > x1 + _l || x2 < x0 - _l && x2 < x1 - _l) {
    return false;
  }
  if (x0 !== x1) {
    _a2 = (y0 - y1) / (x0 - x1);
    _b2 = (x0 * y1 - x1 * y0) / (x0 - x1);
  } else {
    return Math.abs(x2 - x0) <= _l / 2;
  }
  var tmp = _a2 * x2 - y2 + _b2;
  var _s = tmp * tmp / (_a2 * _a2 + 1);
  return _s <= _l / 2 * _l / 2;
}
function containStroke$3(x0, y0, x1, y1, x2, y2, x3, y3, lineWidth, x4, y4) {
  if (lineWidth === 0) {
    return false;
  }
  var _l = lineWidth;
  if (y4 > y0 + _l && y4 > y1 + _l && y4 > y2 + _l && y4 > y3 + _l || y4 < y0 - _l && y4 < y1 - _l && y4 < y2 - _l && y4 < y3 - _l || x4 > x0 + _l && x4 > x1 + _l && x4 > x2 + _l && x4 > x3 + _l || x4 < x0 - _l && x4 < x1 - _l && x4 < x2 - _l && x4 < x3 - _l) {
    return false;
  }
  var d = cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x4, y4, null);
  return d <= _l / 2;
}
function containStroke$2(x0, y0, x1, y1, x2, y2, lineWidth, x3, y3) {
  if (lineWidth === 0) {
    return false;
  }
  var _l = lineWidth;
  if (y3 > y0 + _l && y3 > y1 + _l && y3 > y2 + _l || y3 < y0 - _l && y3 < y1 - _l && y3 < y2 - _l || x3 > x0 + _l && x3 > x1 + _l && x3 > x2 + _l || x3 < x0 - _l && x3 < x1 - _l && x3 < x2 - _l) {
    return false;
  }
  var d = quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, null);
  return d <= _l / 2;
}
var PI2$4 = Math.PI * 2;
function normalizeRadian(angle) {
  angle %= PI2$4;
  if (angle < 0) {
    angle += PI2$4;
  }
  return angle;
}
var PI2$3 = Math.PI * 2;
function containStroke$1(cx, cy, r, startAngle, endAngle, anticlockwise, lineWidth, x2, y2) {
  if (lineWidth === 0) {
    return false;
  }
  var _l = lineWidth;
  x2 -= cx;
  y2 -= cy;
  var d = Math.sqrt(x2 * x2 + y2 * y2);
  if (d - _l > r || d + _l < r) {
    return false;
  }
  if (Math.abs(startAngle - endAngle) % PI2$3 < 1e-4) {
    return true;
  }
  if (anticlockwise) {
    var tmp = startAngle;
    startAngle = normalizeRadian(endAngle);
    endAngle = normalizeRadian(tmp);
  } else {
    startAngle = normalizeRadian(startAngle);
    endAngle = normalizeRadian(endAngle);
  }
  if (startAngle > endAngle) {
    endAngle += PI2$3;
  }
  var angle = Math.atan2(y2, x2);
  if (angle < 0) {
    angle += PI2$3;
  }
  return angle >= startAngle && angle <= endAngle || angle + PI2$3 >= startAngle && angle + PI2$3 <= endAngle;
}
function windingLine(x0, y0, x1, y1, x2, y2) {
  if (y2 > y0 && y2 > y1 || y2 < y0 && y2 < y1) {
    return 0;
  }
  if (y1 === y0) {
    return 0;
  }
  var t = (y2 - y0) / (y1 - y0);
  var dir3 = y1 < y0 ? 1 : -1;
  if (t === 1 || t === 0) {
    dir3 = y1 < y0 ? 0.5 : -0.5;
  }
  var x_ = t * (x1 - x0) + x0;
  return x_ === x2 ? Infinity : x_ > x2 ? dir3 : 0;
}
var CMD$1 = PathProxy$1.CMD;
var PI2$2 = Math.PI * 2;
var EPSILON = 1e-4;
function isAroundEqual(a, b2) {
  return Math.abs(a - b2) < EPSILON;
}
var roots = [-1, -1, -1];
var extrema = [-1, -1];
function swapExtrema() {
  var tmp = extrema[0];
  extrema[0] = extrema[1];
  extrema[1] = tmp;
}
function windingCubic(x0, y0, x1, y1, x2, y2, x3, y3, x4, y4) {
  if (y4 > y0 && y4 > y1 && y4 > y2 && y4 > y3 || y4 < y0 && y4 < y1 && y4 < y2 && y4 < y3) {
    return 0;
  }
  var nRoots = cubicRootAt(y0, y1, y2, y3, y4, roots);
  if (nRoots === 0) {
    return 0;
  } else {
    var w2 = 0;
    var nExtrema = -1;
    var y0_ = void 0;
    var y1_ = void 0;
    for (var i = 0; i < nRoots; i++) {
      var t = roots[i];
      var unit = t === 0 || t === 1 ? 0.5 : 1;
      var x_ = cubicAt(x0, x1, x2, x3, t);
      if (x_ < x4) {
        continue;
      }
      if (nExtrema < 0) {
        nExtrema = cubicExtrema(y0, y1, y2, y3, extrema);
        if (extrema[1] < extrema[0] && nExtrema > 1) {
          swapExtrema();
        }
        y0_ = cubicAt(y0, y1, y2, y3, extrema[0]);
        if (nExtrema > 1) {
          y1_ = cubicAt(y0, y1, y2, y3, extrema[1]);
        }
      }
      if (nExtrema === 2) {
        if (t < extrema[0]) {
          w2 += y0_ < y0 ? unit : -unit;
        } else if (t < extrema[1]) {
          w2 += y1_ < y0_ ? unit : -unit;
        } else {
          w2 += y3 < y1_ ? unit : -unit;
        }
      } else {
        if (t < extrema[0]) {
          w2 += y0_ < y0 ? unit : -unit;
        } else {
          w2 += y3 < y0_ ? unit : -unit;
        }
      }
    }
    return w2;
  }
}
function windingQuadratic(x0, y0, x1, y1, x2, y2, x3, y3) {
  if (y3 > y0 && y3 > y1 && y3 > y2 || y3 < y0 && y3 < y1 && y3 < y2) {
    return 0;
  }
  var nRoots = quadraticRootAt(y0, y1, y2, y3, roots);
  if (nRoots === 0) {
    return 0;
  } else {
    var t = quadraticExtremum(y0, y1, y2);
    if (t >= 0 && t <= 1) {
      var w2 = 0;
      var y_ = quadraticAt(y0, y1, y2, t);
      for (var i = 0; i < nRoots; i++) {
        var unit = roots[i] === 0 || roots[i] === 1 ? 0.5 : 1;
        var x_ = quadraticAt(x0, x1, x2, roots[i]);
        if (x_ < x3) {
          continue;
        }
        if (roots[i] < t) {
          w2 += y_ < y0 ? unit : -unit;
        } else {
          w2 += y2 < y_ ? unit : -unit;
        }
      }
      return w2;
    } else {
      var unit = roots[0] === 0 || roots[0] === 1 ? 0.5 : 1;
      var x_ = quadraticAt(x0, x1, x2, roots[0]);
      if (x_ < x3) {
        return 0;
      }
      return y2 < y0 ? unit : -unit;
    }
  }
}
function windingArc(cx, cy, r, startAngle, endAngle, anticlockwise, x2, y2) {
  y2 -= cy;
  if (y2 > r || y2 < -r) {
    return 0;
  }
  var tmp = Math.sqrt(r * r - y2 * y2);
  roots[0] = -tmp;
  roots[1] = tmp;
  var dTheta = Math.abs(startAngle - endAngle);
  if (dTheta < 1e-4) {
    return 0;
  }
  if (dTheta >= PI2$2 - 1e-4) {
    startAngle = 0;
    endAngle = PI2$2;
    var dir3 = anticlockwise ? 1 : -1;
    if (x2 >= roots[0] + cx && x2 <= roots[1] + cx) {
      return dir3;
    } else {
      return 0;
    }
  }
  if (startAngle > endAngle) {
    var tmp_1 = startAngle;
    startAngle = endAngle;
    endAngle = tmp_1;
  }
  if (startAngle < 0) {
    startAngle += PI2$2;
    endAngle += PI2$2;
  }
  var w2 = 0;
  for (var i = 0; i < 2; i++) {
    var x_ = roots[i];
    if (x_ + cx > x2) {
      var angle = Math.atan2(y2, x_);
      var dir3 = anticlockwise ? 1 : -1;
      if (angle < 0) {
        angle = PI2$2 + angle;
      }
      if (angle >= startAngle && angle <= endAngle || angle + PI2$2 >= startAngle && angle + PI2$2 <= endAngle) {
        if (angle > Math.PI / 2 && angle < Math.PI * 1.5) {
          dir3 = -dir3;
        }
        w2 += dir3;
      }
    }
  }
  return w2;
}
function containPath(path, lineWidth, isStroke, x2, y2) {
  var data = path.data;
  var len2 = path.len();
  var w2 = 0;
  var xi = 0;
  var yi = 0;
  var x0 = 0;
  var y0 = 0;
  var x1;
  var y1;
  for (var i = 0; i < len2; ) {
    var cmd = data[i++];
    var isFirst = i === 1;
    if (cmd === CMD$1.M && i > 1) {
      if (!isStroke) {
        w2 += windingLine(xi, yi, x0, y0, x2, y2);
      }
    }
    if (isFirst) {
      xi = data[i];
      yi = data[i + 1];
      x0 = xi;
      y0 = yi;
    }
    switch (cmd) {
      case CMD$1.M:
        x0 = data[i++];
        y0 = data[i++];
        xi = x0;
        yi = y0;
        break;
      case CMD$1.L:
        if (isStroke) {
          if (containStroke$4(xi, yi, data[i], data[i + 1], lineWidth, x2, y2)) {
            return true;
          }
        } else {
          w2 += windingLine(xi, yi, data[i], data[i + 1], x2, y2) || 0;
        }
        xi = data[i++];
        yi = data[i++];
        break;
      case CMD$1.C:
        if (isStroke) {
          if (containStroke$3(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], lineWidth, x2, y2)) {
            return true;
          }
        } else {
          w2 += windingCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], x2, y2) || 0;
        }
        xi = data[i++];
        yi = data[i++];
        break;
      case CMD$1.Q:
        if (isStroke) {
          if (containStroke$2(xi, yi, data[i++], data[i++], data[i], data[i + 1], lineWidth, x2, y2)) {
            return true;
          }
        } else {
          w2 += windingQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], x2, y2) || 0;
        }
        xi = data[i++];
        yi = data[i++];
        break;
      case CMD$1.A:
        var cx = data[i++];
        var cy = data[i++];
        var rx = data[i++];
        var ry = data[i++];
        var theta = data[i++];
        var dTheta = data[i++];
        i += 1;
        var anticlockwise = !!(1 - data[i++]);
        x1 = Math.cos(theta) * rx + cx;
        y1 = Math.sin(theta) * ry + cy;
        if (!isFirst) {
          w2 += windingLine(xi, yi, x1, y1, x2, y2);
        } else {
          x0 = x1;
          y0 = y1;
        }
        var _x = (x2 - cx) * ry / rx + cx;
        if (isStroke) {
          if (containStroke$1(cx, cy, ry, theta, theta + dTheta, anticlockwise, lineWidth, _x, y2)) {
            return true;
          }
        } else {
          w2 += windingArc(cx, cy, ry, theta, theta + dTheta, anticlockwise, _x, y2);
        }
        xi = Math.cos(theta + dTheta) * rx + cx;
        yi = Math.sin(theta + dTheta) * ry + cy;
        break;
      case CMD$1.R:
        x0 = xi = data[i++];
        y0 = yi = data[i++];
        var width = data[i++];
        var height = data[i++];
        x1 = x0 + width;
        y1 = y0 + height;
        if (isStroke) {
          if (containStroke$4(x0, y0, x1, y0, lineWidth, x2, y2) || containStroke$4(x1, y0, x1, y1, lineWidth, x2, y2) || containStroke$4(x1, y1, x0, y1, lineWidth, x2, y2) || containStroke$4(x0, y1, x0, y0, lineWidth, x2, y2)) {
            return true;
          }
        } else {
          w2 += windingLine(x1, y0, x1, y1, x2, y2);
          w2 += windingLine(x0, y1, x0, y0, x2, y2);
        }
        break;
      case CMD$1.Z:
        if (isStroke) {
          if (containStroke$4(xi, yi, x0, y0, lineWidth, x2, y2)) {
            return true;
          }
        } else {
          w2 += windingLine(xi, yi, x0, y0, x2, y2);
        }
        xi = x0;
        yi = y0;
        break;
    }
  }
  if (!isStroke && !isAroundEqual(yi, y0)) {
    w2 += windingLine(xi, yi, x0, y0, x2, y2) || 0;
  }
  return w2 !== 0;
}
function contain(pathProxy, x2, y2) {
  return containPath(pathProxy, 0, false, x2, y2);
}
function containStroke(pathProxy, lineWidth, x2, y2) {
  return containPath(pathProxy, lineWidth, true, x2, y2);
}
var DEFAULT_PATH_STYLE = defaults({
  fill: "#000",
  stroke: null,
  strokePercent: 1,
  fillOpacity: 1,
  strokeOpacity: 1,
  lineDashOffset: 0,
  lineWidth: 1,
  lineCap: "butt",
  miterLimit: 10,
  strokeNoScale: false,
  strokeFirst: false
}, DEFAULT_COMMON_STYLE);
var DEFAULT_PATH_ANIMATION_PROPS = {
  style: defaults({
    fill: true,
    stroke: true,
    strokePercent: true,
    fillOpacity: true,
    strokeOpacity: true,
    lineDashOffset: true,
    lineWidth: true,
    miterLimit: true
  }, DEFAULT_COMMON_ANIMATION_PROPS.style)
};
var pathCopyParams = TRANSFORMABLE_PROPS.concat([
  "invisible",
  "culling",
  "z",
  "z2",
  "zlevel",
  "parent"
]);
var Path = function(_super) {
  __extends(Path2, _super);
  function Path2(opts) {
    return _super.call(this, opts) || this;
  }
  Path2.prototype.update = function() {
    var _this = this;
    _super.prototype.update.call(this);
    var style2 = this.style;
    if (style2.decal) {
      var decalEl = this._decalEl = this._decalEl || new Path2();
      if (decalEl.buildPath === Path2.prototype.buildPath) {
        decalEl.buildPath = function(ctx) {
          _this.buildPath(ctx, _this.shape);
        };
      }
      decalEl.silent = true;
      var decalElStyle = decalEl.style;
      for (var key in style2) {
        if (decalElStyle[key] !== style2[key]) {
          decalElStyle[key] = style2[key];
        }
      }
      decalElStyle.fill = style2.fill ? style2.decal : null;
      decalElStyle.decal = null;
      decalElStyle.shadowColor = null;
      style2.strokeFirst && (decalElStyle.stroke = null);
      for (var i = 0; i < pathCopyParams.length; ++i) {
        decalEl[pathCopyParams[i]] = this[pathCopyParams[i]];
      }
      decalEl.__dirty |= REDRAW_BIT;
    } else if (this._decalEl) {
      this._decalEl = null;
    }
  };
  Path2.prototype.getDecalElement = function() {
    return this._decalEl;
  };
  Path2.prototype._init = function(props) {
    var keysArr = keys(props);
    this.shape = this.getDefaultShape();
    var defaultStyle = this.getDefaultStyle();
    if (defaultStyle) {
      this.useStyle(defaultStyle);
    }
    for (var i = 0; i < keysArr.length; i++) {
      var key = keysArr[i];
      var value = props[key];
      if (key === "style") {
        if (!this.style) {
          this.useStyle(value);
        } else {
          extend(this.style, value);
        }
      } else if (key === "shape") {
        extend(this.shape, value);
      } else {
        _super.prototype.attrKV.call(this, key, value);
      }
    }
    if (!this.style) {
      this.useStyle({});
    }
  };
  Path2.prototype.getDefaultStyle = function() {
    return null;
  };
  Path2.prototype.getDefaultShape = function() {
    return {};
  };
  Path2.prototype.canBeInsideText = function() {
    return this.hasFill();
  };
  Path2.prototype.getInsideTextFill = function() {
    var pathFill = this.style.fill;
    if (pathFill !== "none") {
      if (isString(pathFill)) {
        var fillLum = lum(pathFill, 0);
        if (fillLum > 0.5) {
          return DARK_LABEL_COLOR;
        } else if (fillLum > 0.2) {
          return LIGHTER_LABEL_COLOR;
        }
        return LIGHT_LABEL_COLOR;
      } else if (pathFill) {
        return LIGHT_LABEL_COLOR;
      }
    }
    return DARK_LABEL_COLOR;
  };
  Path2.prototype.getInsideTextStroke = function(textFill) {
    var pathFill = this.style.fill;
    if (isString(pathFill)) {
      var zr = this.__zr;
      var isDarkMode2 = !!(zr && zr.isDarkMode());
      var isDarkLabel = lum(textFill, 0) < DARK_MODE_THRESHOLD;
      if (isDarkMode2 === isDarkLabel) {
        return pathFill;
      }
    }
  };
  Path2.prototype.buildPath = function(ctx, shapeCfg, inBatch) {
  };
  Path2.prototype.pathUpdated = function() {
    this.__dirty &= ~SHAPE_CHANGED_BIT;
  };
  Path2.prototype.getUpdatedPathProxy = function(inBatch) {
    !this.path && this.createPathProxy();
    this.path.beginPath();
    this.buildPath(this.path, this.shape, inBatch);
    return this.path;
  };
  Path2.prototype.createPathProxy = function() {
    this.path = new PathProxy$1(false);
  };
  Path2.prototype.hasStroke = function() {
    var style2 = this.style;
    var stroke = style2.stroke;
    return !(stroke == null || stroke === "none" || !(style2.lineWidth > 0));
  };
  Path2.prototype.hasFill = function() {
    var style2 = this.style;
    var fill = style2.fill;
    return fill != null && fill !== "none";
  };
  Path2.prototype.getBoundingRect = function() {
    var rect = this._rect;
    var style2 = this.style;
    var needsUpdateRect = !rect;
    if (needsUpdateRect) {
      var firstInvoke = false;
      if (!this.path) {
        firstInvoke = true;
        this.createPathProxy();
      }
      var path = this.path;
      if (firstInvoke || this.__dirty & SHAPE_CHANGED_BIT) {
        path.beginPath();
        this.buildPath(path, this.shape, false);
        this.pathUpdated();
      }
      rect = path.getBoundingRect();
    }
    this._rect = rect;
    if (this.hasStroke() && this.path && this.path.len() > 0) {
      var rectStroke = this._rectStroke || (this._rectStroke = rect.clone());
      if (this.__dirty || needsUpdateRect) {
        rectStroke.copy(rect);
        var lineScale = style2.strokeNoScale ? this.getLineScale() : 1;
        var w2 = style2.lineWidth;
        if (!this.hasFill()) {
          var strokeContainThreshold = this.strokeContainThreshold;
          w2 = Math.max(w2, strokeContainThreshold == null ? 4 : strokeContainThreshold);
        }
        if (lineScale > 1e-10) {
          rectStroke.width += w2 / lineScale;
          rectStroke.height += w2 / lineScale;
          rectStroke.x -= w2 / lineScale / 2;
          rectStroke.y -= w2 / lineScale / 2;
        }
      }
      return rectStroke;
    }
    return rect;
  };
  Path2.prototype.contain = function(x2, y2) {
    var localPos = this.transformCoordToLocal(x2, y2);
    var rect = this.getBoundingRect();
    var style2 = this.style;
    x2 = localPos[0];
    y2 = localPos[1];
    if (rect.contain(x2, y2)) {
      var pathProxy = this.path;
      if (this.hasStroke()) {
        var lineWidth = style2.lineWidth;
        var lineScale = style2.strokeNoScale ? this.getLineScale() : 1;
        if (lineScale > 1e-10) {
          if (!this.hasFill()) {
            lineWidth = Math.max(lineWidth, this.strokeContainThreshold);
          }
          if (containStroke(pathProxy, lineWidth / lineScale, x2, y2)) {
            return true;
          }
        }
      }
      if (this.hasFill()) {
        return contain(pathProxy, x2, y2);
      }
    }
    return false;
  };
  Path2.prototype.dirtyShape = function() {
    this.__dirty |= SHAPE_CHANGED_BIT;
    if (this._rect) {
      this._rect = null;
    }
    if (this._decalEl) {
      this._decalEl.dirtyShape();
    }
    this.markRedraw();
  };
  Path2.prototype.dirty = function() {
    this.dirtyStyle();
    this.dirtyShape();
  };
  Path2.prototype.animateShape = function(loop) {
    return this.animate("shape", loop);
  };
  Path2.prototype.updateDuringAnimation = function(targetKey) {
    if (targetKey === "style") {
      this.dirtyStyle();
    } else if (targetKey === "shape") {
      this.dirtyShape();
    } else {
      this.markRedraw();
    }
  };
  Path2.prototype.attrKV = function(key, value) {
    if (key === "shape") {
      this.setShape(value);
    } else {
      _super.prototype.attrKV.call(this, key, value);
    }
  };
  Path2.prototype.setShape = function(keyOrObj, value) {
    var shape = this.shape;
    if (!shape) {
      shape = this.shape = {};
    }
    if (typeof keyOrObj === "string") {
      shape[keyOrObj] = value;
    } else {
      extend(shape, keyOrObj);
    }
    this.dirtyShape();
    return this;
  };
  Path2.prototype.shapeChanged = function() {
    return !!(this.__dirty & SHAPE_CHANGED_BIT);
  };
  Path2.prototype.createStyle = function(obj) {
    return createObject(DEFAULT_PATH_STYLE, obj);
  };
  Path2.prototype._innerSaveToNormal = function(toState) {
    _super.prototype._innerSaveToNormal.call(this, toState);
    var normalState = this._normalState;
    if (toState.shape && !normalState.shape) {
      normalState.shape = extend({}, this.shape);
    }
  };
  Path2.prototype._applyStateObj = function(stateName, state, normalState, keepCurrentStates, transition, animationCfg) {
    _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);
    var needsRestoreToNormal = !(state && keepCurrentStates);
    var targetShape;
    if (state && state.shape) {
      if (transition) {
        if (keepCurrentStates) {
          targetShape = state.shape;
        } else {
          targetShape = extend({}, normalState.shape);
          extend(targetShape, state.shape);
        }
      } else {
        targetShape = extend({}, keepCurrentStates ? this.shape : normalState.shape);
        extend(targetShape, state.shape);
      }
    } else if (needsRestoreToNormal) {
      targetShape = normalState.shape;
    }
    if (targetShape) {
      if (transition) {
        this.shape = extend({}, this.shape);
        var targetShapePrimaryProps = {};
        var shapeKeys = keys(targetShape);
        for (var i = 0; i < shapeKeys.length; i++) {
          var key = shapeKeys[i];
          if (typeof targetShape[key] === "object") {
            this.shape[key] = targetShape[key];
          } else {
            targetShapePrimaryProps[key] = targetShape[key];
          }
        }
        this._transitionState(stateName, {
          shape: targetShapePrimaryProps
        }, animationCfg);
      } else {
        this.shape = targetShape;
        this.dirtyShape();
      }
    }
  };
  Path2.prototype._mergeStates = function(states) {
    var mergedState = _super.prototype._mergeStates.call(this, states);
    var mergedShape;
    for (var i = 0; i < states.length; i++) {
      var state = states[i];
      if (state.shape) {
        mergedShape = mergedShape || {};
        this._mergeStyle(mergedShape, state.shape);
      }
    }
    if (mergedShape) {
      mergedState.shape = mergedShape;
    }
    return mergedState;
  };
  Path2.prototype.getAnimationStyleProps = function() {
    return DEFAULT_PATH_ANIMATION_PROPS;
  };
  Path2.prototype.isZeroArea = function() {
    return false;
  };
  Path2.extend = function(defaultProps) {
    var Sub = function(_super2) {
      __extends(Sub2, _super2);
      function Sub2(opts) {
        var _this = _super2.call(this, opts) || this;
        defaultProps.init && defaultProps.init.call(_this, opts);
        return _this;
      }
      Sub2.prototype.getDefaultStyle = function() {
        return clone$2(defaultProps.style);
      };
      Sub2.prototype.getDefaultShape = function() {
        return clone$2(defaultProps.shape);
      };
      return Sub2;
    }(Path2);
    for (var key in defaultProps) {
      if (typeof defaultProps[key] === "function") {
        Sub.prototype[key] = defaultProps[key];
      }
    }
    return Sub;
  };
  Path2.initDefaultProps = function() {
    var pathProto = Path2.prototype;
    pathProto.type = "path";
    pathProto.strokeContainThreshold = 5;
    pathProto.segmentIgnoreThreshold = 0;
    pathProto.subPixelOptimize = false;
    pathProto.autoBatch = false;
    pathProto.__dirty = REDRAW_BIT | STYLE_CHANGED_BIT | SHAPE_CHANGED_BIT;
  }();
  return Path2;
}(Displayable$1);
var Path$1 = Path;
var DEFAULT_TSPAN_STYLE = defaults({
  strokeFirst: true,
  font: DEFAULT_FONT,
  x: 0,
  y: 0,
  textAlign: "left",
  textBaseline: "top",
  miterLimit: 2
}, DEFAULT_PATH_STYLE);
var TSpan = function(_super) {
  __extends(TSpan2, _super);
  function TSpan2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  TSpan2.prototype.hasStroke = function() {
    var style2 = this.style;
    var stroke = style2.stroke;
    return stroke != null && stroke !== "none" && style2.lineWidth > 0;
  };
  TSpan2.prototype.hasFill = function() {
    var style2 = this.style;
    var fill = style2.fill;
    return fill != null && fill !== "none";
  };
  TSpan2.prototype.createStyle = function(obj) {
    return createObject(DEFAULT_TSPAN_STYLE, obj);
  };
  TSpan2.prototype.setBoundingRect = function(rect) {
    this._rect = rect;
  };
  TSpan2.prototype.getBoundingRect = function() {
    var style2 = this.style;
    if (!this._rect) {
      var text = style2.text;
      text != null ? text += "" : text = "";
      var rect = getBoundingRect(text, style2.font, style2.textAlign, style2.textBaseline);
      rect.x += style2.x || 0;
      rect.y += style2.y || 0;
      if (this.hasStroke()) {
        var w2 = style2.lineWidth;
        rect.x -= w2 / 2;
        rect.y -= w2 / 2;
        rect.width += w2;
        rect.height += w2;
      }
      this._rect = rect;
    }
    return this._rect;
  };
  TSpan2.initDefaultProps = function() {
    var tspanProto = TSpan2.prototype;
    tspanProto.dirtyRectTolerance = 10;
  }();
  return TSpan2;
}(Displayable$1);
TSpan.prototype.type = "tspan";
var TSpan$1 = TSpan;
var DEFAULT_IMAGE_STYLE = defaults({
  x: 0,
  y: 0
}, DEFAULT_COMMON_STYLE);
var DEFAULT_IMAGE_ANIMATION_PROPS = {
  style: defaults({
    x: true,
    y: true,
    width: true,
    height: true,
    sx: true,
    sy: true,
    sWidth: true,
    sHeight: true
  }, DEFAULT_COMMON_ANIMATION_PROPS.style)
};
function isImageLike(source) {
  return !!(source && typeof source !== "string" && source.width && source.height);
}
var ZRImage = function(_super) {
  __extends(ZRImage2, _super);
  function ZRImage2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  ZRImage2.prototype.createStyle = function(obj) {
    return createObject(DEFAULT_IMAGE_STYLE, obj);
  };
  ZRImage2.prototype._getSize = function(dim) {
    var style2 = this.style;
    var size = style2[dim];
    if (size != null) {
      return size;
    }
    var imageSource = isImageLike(style2.image) ? style2.image : this.__image;
    if (!imageSource) {
      return 0;
    }
    var otherDim = dim === "width" ? "height" : "width";
    var otherDimSize = style2[otherDim];
    if (otherDimSize == null) {
      return imageSource[dim];
    } else {
      return imageSource[dim] / imageSource[otherDim] * otherDimSize;
    }
  };
  ZRImage2.prototype.getWidth = function() {
    return this._getSize("width");
  };
  ZRImage2.prototype.getHeight = function() {
    return this._getSize("height");
  };
  ZRImage2.prototype.getAnimationStyleProps = function() {
    return DEFAULT_IMAGE_ANIMATION_PROPS;
  };
  ZRImage2.prototype.getBoundingRect = function() {
    var style2 = this.style;
    if (!this._rect) {
      this._rect = new BoundingRect$1(style2.x || 0, style2.y || 0, this.getWidth(), this.getHeight());
    }
    return this._rect;
  };
  return ZRImage2;
}(Displayable$1);
ZRImage.prototype.type = "image";
var ZRImage$1 = ZRImage;
function buildPath$2(ctx, shape) {
  var x2 = shape.x;
  var y2 = shape.y;
  var width = shape.width;
  var height = shape.height;
  var r = shape.r;
  var r1;
  var r2;
  var r3;
  var r4;
  if (width < 0) {
    x2 = x2 + width;
    width = -width;
  }
  if (height < 0) {
    y2 = y2 + height;
    height = -height;
  }
  if (typeof r === "number") {
    r1 = r2 = r3 = r4 = r;
  } else if (r instanceof Array) {
    if (r.length === 1) {
      r1 = r2 = r3 = r4 = r[0];
    } else if (r.length === 2) {
      r1 = r3 = r[0];
      r2 = r4 = r[1];
    } else if (r.length === 3) {
      r1 = r[0];
      r2 = r4 = r[1];
      r3 = r[2];
    } else {
      r1 = r[0];
      r2 = r[1];
      r3 = r[2];
      r4 = r[3];
    }
  } else {
    r1 = r2 = r3 = r4 = 0;
  }
  var total2;
  if (r1 + r2 > width) {
    total2 = r1 + r2;
    r1 *= width / total2;
    r2 *= width / total2;
  }
  if (r3 + r4 > width) {
    total2 = r3 + r4;
    r3 *= width / total2;
    r4 *= width / total2;
  }
  if (r2 + r3 > height) {
    total2 = r2 + r3;
    r2 *= height / total2;
    r3 *= height / total2;
  }
  if (r1 + r4 > height) {
    total2 = r1 + r4;
    r1 *= height / total2;
    r4 *= height / total2;
  }
  ctx.moveTo(x2 + r1, y2);
  ctx.lineTo(x2 + width - r2, y2);
  r2 !== 0 && ctx.arc(x2 + width - r2, y2 + r2, r2, -Math.PI / 2, 0);
  ctx.lineTo(x2 + width, y2 + height - r3);
  r3 !== 0 && ctx.arc(x2 + width - r3, y2 + height - r3, r3, 0, Math.PI / 2);
  ctx.lineTo(x2 + r4, y2 + height);
  r4 !== 0 && ctx.arc(x2 + r4, y2 + height - r4, r4, Math.PI / 2, Math.PI);
  ctx.lineTo(x2, y2 + r1);
  r1 !== 0 && ctx.arc(x2 + r1, y2 + r1, r1, Math.PI, Math.PI * 1.5);
}
var round = Math.round;
function subPixelOptimizeLine$1(outputShape, inputShape, style2) {
  if (!inputShape) {
    return;
  }
  var x1 = inputShape.x1;
  var x2 = inputShape.x2;
  var y1 = inputShape.y1;
  var y2 = inputShape.y2;
  outputShape.x1 = x1;
  outputShape.x2 = x2;
  outputShape.y1 = y1;
  outputShape.y2 = y2;
  var lineWidth = style2 && style2.lineWidth;
  if (!lineWidth) {
    return outputShape;
  }
  if (round(x1 * 2) === round(x2 * 2)) {
    outputShape.x1 = outputShape.x2 = subPixelOptimize$1(x1, lineWidth, true);
  }
  if (round(y1 * 2) === round(y2 * 2)) {
    outputShape.y1 = outputShape.y2 = subPixelOptimize$1(y1, lineWidth, true);
  }
  return outputShape;
}
function subPixelOptimizeRect$1(outputShape, inputShape, style2) {
  if (!inputShape) {
    return;
  }
  var originX = inputShape.x;
  var originY = inputShape.y;
  var originWidth = inputShape.width;
  var originHeight = inputShape.height;
  outputShape.x = originX;
  outputShape.y = originY;
  outputShape.width = originWidth;
  outputShape.height = originHeight;
  var lineWidth = style2 && style2.lineWidth;
  if (!lineWidth) {
    return outputShape;
  }
  outputShape.x = subPixelOptimize$1(originX, lineWidth, true);
  outputShape.y = subPixelOptimize$1(originY, lineWidth, true);
  outputShape.width = Math.max(subPixelOptimize$1(originX + originWidth, lineWidth, false) - outputShape.x, originWidth === 0 ? 0 : 1);
  outputShape.height = Math.max(subPixelOptimize$1(originY + originHeight, lineWidth, false) - outputShape.y, originHeight === 0 ? 0 : 1);
  return outputShape;
}
function subPixelOptimize$1(position, lineWidth, positiveOrNegative) {
  if (!lineWidth) {
    return position;
  }
  var doubledPosition = round(position * 2);
  return (doubledPosition + round(lineWidth)) % 2 === 0 ? doubledPosition / 2 : (doubledPosition + (positiveOrNegative ? 1 : -1)) / 2;
}
var RectShape = function() {
  function RectShape2() {
    this.x = 0;
    this.y = 0;
    this.width = 0;
    this.height = 0;
  }
  return RectShape2;
}();
var subPixelOptimizeOutputShape$1 = {};
var Rect = function(_super) {
  __extends(Rect2, _super);
  function Rect2(opts) {
    return _super.call(this, opts) || this;
  }
  Rect2.prototype.getDefaultShape = function() {
    return new RectShape();
  };
  Rect2.prototype.buildPath = function(ctx, shape) {
    var x2;
    var y2;
    var width;
    var height;
    if (this.subPixelOptimize) {
      var optimizedShape = subPixelOptimizeRect$1(subPixelOptimizeOutputShape$1, shape, this.style);
      x2 = optimizedShape.x;
      y2 = optimizedShape.y;
      width = optimizedShape.width;
      height = optimizedShape.height;
      optimizedShape.r = shape.r;
      shape = optimizedShape;
    } else {
      x2 = shape.x;
      y2 = shape.y;
      width = shape.width;
      height = shape.height;
    }
    if (!shape.r) {
      ctx.rect(x2, y2, width, height);
    } else {
      buildPath$2(ctx, shape);
    }
  };
  Rect2.prototype.isZeroArea = function() {
    return !this.shape.width || !this.shape.height;
  };
  return Rect2;
}(Path$1);
Rect.prototype.type = "rect";
var Rect$1 = Rect;
var DEFAULT_RICH_TEXT_COLOR = {
  fill: "#000"
};
var DEFAULT_STROKE_LINE_WIDTH = 2;
var DEFAULT_TEXT_ANIMATION_PROPS = {
  style: defaults({
    fill: true,
    stroke: true,
    fillOpacity: true,
    strokeOpacity: true,
    lineWidth: true,
    fontSize: true,
    lineHeight: true,
    width: true,
    height: true,
    textShadowColor: true,
    textShadowBlur: true,
    textShadowOffsetX: true,
    textShadowOffsetY: true,
    backgroundColor: true,
    padding: true,
    borderColor: true,
    borderWidth: true,
    borderRadius: true
  }, DEFAULT_COMMON_ANIMATION_PROPS.style)
};
var ZRText = function(_super) {
  __extends(ZRText2, _super);
  function ZRText2(opts) {
    var _this = _super.call(this) || this;
    _this.type = "text";
    _this._children = [];
    _this._defaultStyle = DEFAULT_RICH_TEXT_COLOR;
    _this.attr(opts);
    return _this;
  }
  ZRText2.prototype.childrenRef = function() {
    return this._children;
  };
  ZRText2.prototype.update = function() {
    _super.prototype.update.call(this);
    if (this.styleChanged()) {
      this._updateSubTexts();
    }
    for (var i = 0; i < this._children.length; i++) {
      var child = this._children[i];
      child.zlevel = this.zlevel;
      child.z = this.z;
      child.z2 = this.z2;
      child.culling = this.culling;
      child.cursor = this.cursor;
      child.invisible = this.invisible;
    }
  };
  ZRText2.prototype.updateTransform = function() {
    var innerTransformable = this.innerTransformable;
    if (innerTransformable) {
      innerTransformable.updateTransform();
      if (innerTransformable.transform) {
        this.transform = innerTransformable.transform;
      }
    } else {
      _super.prototype.updateTransform.call(this);
    }
  };
  ZRText2.prototype.getLocalTransform = function(m2) {
    var innerTransformable = this.innerTransformable;
    return innerTransformable ? innerTransformable.getLocalTransform(m2) : _super.prototype.getLocalTransform.call(this, m2);
  };
  ZRText2.prototype.getComputedTransform = function() {
    if (this.__hostTarget) {
      this.__hostTarget.getComputedTransform();
      this.__hostTarget.updateInnerText(true);
    }
    return _super.prototype.getComputedTransform.call(this);
  };
  ZRText2.prototype._updateSubTexts = function() {
    this._childCursor = 0;
    normalizeTextStyle(this.style);
    this.style.rich ? this._updateRichTexts() : this._updatePlainTexts();
    this._children.length = this._childCursor;
    this.styleUpdated();
  };
  ZRText2.prototype.addSelfToZr = function(zr) {
    _super.prototype.addSelfToZr.call(this, zr);
    for (var i = 0; i < this._children.length; i++) {
      this._children[i].__zr = zr;
    }
  };
  ZRText2.prototype.removeSelfFromZr = function(zr) {
    _super.prototype.removeSelfFromZr.call(this, zr);
    for (var i = 0; i < this._children.length; i++) {
      this._children[i].__zr = null;
    }
  };
  ZRText2.prototype.getBoundingRect = function() {
    if (this.styleChanged()) {
      this._updateSubTexts();
    }
    if (!this._rect) {
      var tmpRect2 = new BoundingRect$1(0, 0, 0, 0);
      var children = this._children;
      var tmpMat = [];
      var rect = null;
      for (var i = 0; i < children.length; i++) {
        var child = children[i];
        var childRect = child.getBoundingRect();
        var transform = child.getLocalTransform(tmpMat);
        if (transform) {
          tmpRect2.copy(childRect);
          tmpRect2.applyTransform(transform);
          rect = rect || tmpRect2.clone();
          rect.union(tmpRect2);
        } else {
          rect = rect || childRect.clone();
          rect.union(childRect);
        }
      }
      this._rect = rect || tmpRect2;
    }
    return this._rect;
  };
  ZRText2.prototype.setDefaultTextStyle = function(defaultTextStyle) {
    this._defaultStyle = defaultTextStyle || DEFAULT_RICH_TEXT_COLOR;
  };
  ZRText2.prototype.setTextContent = function(textContent) {
  };
  ZRText2.prototype._mergeStyle = function(targetStyle, sourceStyle) {
    if (!sourceStyle) {
      return targetStyle;
    }
    var sourceRich = sourceStyle.rich;
    var targetRich = targetStyle.rich || sourceRich && {};
    extend(targetStyle, sourceStyle);
    if (sourceRich && targetRich) {
      this._mergeRich(targetRich, sourceRich);
      targetStyle.rich = targetRich;
    } else if (targetRich) {
      targetStyle.rich = targetRich;
    }
    return targetStyle;
  };
  ZRText2.prototype._mergeRich = function(targetRich, sourceRich) {
    var richNames = keys(sourceRich);
    for (var i = 0; i < richNames.length; i++) {
      var richName = richNames[i];
      targetRich[richName] = targetRich[richName] || {};
      extend(targetRich[richName], sourceRich[richName]);
    }
  };
  ZRText2.prototype.getAnimationStyleProps = function() {
    return DEFAULT_TEXT_ANIMATION_PROPS;
  };
  ZRText2.prototype._getOrCreateChild = function(Ctor) {
    var child = this._children[this._childCursor];
    if (!child || !(child instanceof Ctor)) {
      child = new Ctor();
    }
    this._children[this._childCursor++] = child;
    child.__zr = this.__zr;
    child.parent = this;
    return child;
  };
  ZRText2.prototype._updatePlainTexts = function() {
    var style2 = this.style;
    var textFont = style2.font || DEFAULT_FONT;
    var textPadding = style2.padding;
    var text = getStyleText(style2);
    var contentBlock = parsePlainText(text, style2);
    var needDrawBg = needDrawBackground(style2);
    var bgColorDrawn = !!style2.backgroundColor;
    var outerHeight = contentBlock.outerHeight;
    var outerWidth = contentBlock.outerWidth;
    var contentWidth = contentBlock.contentWidth;
    var textLines = contentBlock.lines;
    var lineHeight = contentBlock.lineHeight;
    var defaultStyle = this._defaultStyle;
    var baseX = style2.x || 0;
    var baseY = style2.y || 0;
    var textAlign = style2.align || defaultStyle.align || "left";
    var verticalAlign = style2.verticalAlign || defaultStyle.verticalAlign || "top";
    var textX = baseX;
    var textY = adjustTextY(baseY, contentBlock.contentHeight, verticalAlign);
    if (needDrawBg || textPadding) {
      var boxX = adjustTextX(baseX, outerWidth, textAlign);
      var boxY = adjustTextY(baseY, outerHeight, verticalAlign);
      needDrawBg && this._renderBackground(style2, style2, boxX, boxY, outerWidth, outerHeight);
    }
    textY += lineHeight / 2;
    if (textPadding) {
      textX = getTextXForPadding(baseX, textAlign, textPadding);
      if (verticalAlign === "top") {
        textY += textPadding[0];
      } else if (verticalAlign === "bottom") {
        textY -= textPadding[2];
      }
    }
    var defaultLineWidth = 0;
    var useDefaultFill = false;
    var textFill = getFill("fill" in style2 ? style2.fill : (useDefaultFill = true, defaultStyle.fill));
    var textStroke = getStroke("stroke" in style2 ? style2.stroke : !bgColorDrawn && (!defaultStyle.autoStroke || useDefaultFill) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke) : null);
    var hasShadow = style2.textShadowBlur > 0;
    var fixedBoundingRect = style2.width != null && (style2.overflow === "truncate" || style2.overflow === "break" || style2.overflow === "breakAll");
    var calculatedLineHeight = contentBlock.calculatedLineHeight;
    for (var i = 0; i < textLines.length; i++) {
      var el = this._getOrCreateChild(TSpan$1);
      var subElStyle = el.createStyle();
      el.useStyle(subElStyle);
      subElStyle.text = textLines[i];
      subElStyle.x = textX;
      subElStyle.y = textY;
      if (textAlign) {
        subElStyle.textAlign = textAlign;
      }
      subElStyle.textBaseline = "middle";
      subElStyle.opacity = style2.opacity;
      subElStyle.strokeFirst = true;
      if (hasShadow) {
        subElStyle.shadowBlur = style2.textShadowBlur || 0;
        subElStyle.shadowColor = style2.textShadowColor || "transparent";
        subElStyle.shadowOffsetX = style2.textShadowOffsetX || 0;
        subElStyle.shadowOffsetY = style2.textShadowOffsetY || 0;
      }
      subElStyle.stroke = textStroke;
      subElStyle.fill = textFill;
      if (textStroke) {
        subElStyle.lineWidth = style2.lineWidth || defaultLineWidth;
        subElStyle.lineDash = style2.lineDash;
        subElStyle.lineDashOffset = style2.lineDashOffset || 0;
      }
      subElStyle.font = textFont;
      setSeparateFont(subElStyle, style2);
      textY += lineHeight;
      if (fixedBoundingRect) {
        el.setBoundingRect(new BoundingRect$1(adjustTextX(subElStyle.x, style2.width, subElStyle.textAlign), adjustTextY(subElStyle.y, calculatedLineHeight, subElStyle.textBaseline), contentWidth, calculatedLineHeight));
      }
    }
  };
  ZRText2.prototype._updateRichTexts = function() {
    var style2 = this.style;
    var text = getStyleText(style2);
    var contentBlock = parseRichText(text, style2);
    var contentWidth = contentBlock.width;
    var outerWidth = contentBlock.outerWidth;
    var outerHeight = contentBlock.outerHeight;
    var textPadding = style2.padding;
    var baseX = style2.x || 0;
    var baseY = style2.y || 0;
    var defaultStyle = this._defaultStyle;
    var textAlign = style2.align || defaultStyle.align;
    var verticalAlign = style2.verticalAlign || defaultStyle.verticalAlign;
    var boxX = adjustTextX(baseX, outerWidth, textAlign);
    var boxY = adjustTextY(baseY, outerHeight, verticalAlign);
    var xLeft = boxX;
    var lineTop = boxY;
    if (textPadding) {
      xLeft += textPadding[3];
      lineTop += textPadding[0];
    }
    var xRight = xLeft + contentWidth;
    if (needDrawBackground(style2)) {
      this._renderBackground(style2, style2, boxX, boxY, outerWidth, outerHeight);
    }
    var bgColorDrawn = !!style2.backgroundColor;
    for (var i = 0; i < contentBlock.lines.length; i++) {
      var line = contentBlock.lines[i];
      var tokens = line.tokens;
      var tokenCount = tokens.length;
      var lineHeight = line.lineHeight;
      var remainedWidth = line.width;
      var leftIndex = 0;
      var lineXLeft = xLeft;
      var lineXRight = xRight;
      var rightIndex = tokenCount - 1;
      var token = void 0;
      while (leftIndex < tokenCount && (token = tokens[leftIndex], !token.align || token.align === "left")) {
        this._placeToken(token, style2, lineHeight, lineTop, lineXLeft, "left", bgColorDrawn);
        remainedWidth -= token.width;
        lineXLeft += token.width;
        leftIndex++;
      }
      while (rightIndex >= 0 && (token = tokens[rightIndex], token.align === "right")) {
        this._placeToken(token, style2, lineHeight, lineTop, lineXRight, "right", bgColorDrawn);
        remainedWidth -= token.width;
        lineXRight -= token.width;
        rightIndex--;
      }
      lineXLeft += (contentWidth - (lineXLeft - xLeft) - (xRight - lineXRight) - remainedWidth) / 2;
      while (leftIndex <= rightIndex) {
        token = tokens[leftIndex];
        this._placeToken(token, style2, lineHeight, lineTop, lineXLeft + token.width / 2, "center", bgColorDrawn);
        lineXLeft += token.width;
        leftIndex++;
      }
      lineTop += lineHeight;
    }
  };
  ZRText2.prototype._placeToken = function(token, style2, lineHeight, lineTop, x2, textAlign, parentBgColorDrawn) {
    var tokenStyle = style2.rich[token.styleName] || {};
    tokenStyle.text = token.text;
    var verticalAlign = token.verticalAlign;
    var y2 = lineTop + lineHeight / 2;
    if (verticalAlign === "top") {
      y2 = lineTop + token.height / 2;
    } else if (verticalAlign === "bottom") {
      y2 = lineTop + lineHeight - token.height / 2;
    }
    var needDrawBg = !token.isLineHolder && needDrawBackground(tokenStyle);
    needDrawBg && this._renderBackground(tokenStyle, style2, textAlign === "right" ? x2 - token.width : textAlign === "center" ? x2 - token.width / 2 : x2, y2 - token.height / 2, token.width, token.height);
    var bgColorDrawn = !!tokenStyle.backgroundColor;
    var textPadding = token.textPadding;
    if (textPadding) {
      x2 = getTextXForPadding(x2, textAlign, textPadding);
      y2 -= token.height / 2 - textPadding[0] - token.innerHeight / 2;
    }
    var el = this._getOrCreateChild(TSpan$1);
    var subElStyle = el.createStyle();
    el.useStyle(subElStyle);
    var defaultStyle = this._defaultStyle;
    var useDefaultFill = false;
    var defaultLineWidth = 0;
    var textFill = getFill("fill" in tokenStyle ? tokenStyle.fill : "fill" in style2 ? style2.fill : (useDefaultFill = true, defaultStyle.fill));
    var textStroke = getStroke("stroke" in tokenStyle ? tokenStyle.stroke : "stroke" in style2 ? style2.stroke : !bgColorDrawn && !parentBgColorDrawn && (!defaultStyle.autoStroke || useDefaultFill) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke) : null);
    var hasShadow = tokenStyle.textShadowBlur > 0 || style2.textShadowBlur > 0;
    subElStyle.text = token.text;
    subElStyle.x = x2;
    subElStyle.y = y2;
    if (hasShadow) {
      subElStyle.shadowBlur = tokenStyle.textShadowBlur || style2.textShadowBlur || 0;
      subElStyle.shadowColor = tokenStyle.textShadowColor || style2.textShadowColor || "transparent";
      subElStyle.shadowOffsetX = tokenStyle.textShadowOffsetX || style2.textShadowOffsetX || 0;
      subElStyle.shadowOffsetY = tokenStyle.textShadowOffsetY || style2.textShadowOffsetY || 0;
    }
    subElStyle.textAlign = textAlign;
    subElStyle.textBaseline = "middle";
    subElStyle.font = token.font || DEFAULT_FONT;
    subElStyle.opacity = retrieve3(tokenStyle.opacity, style2.opacity, 1);
    setSeparateFont(subElStyle, tokenStyle);
    if (textStroke) {
      subElStyle.lineWidth = retrieve3(tokenStyle.lineWidth, style2.lineWidth, defaultLineWidth);
      subElStyle.lineDash = retrieve2(tokenStyle.lineDash, style2.lineDash);
      subElStyle.lineDashOffset = style2.lineDashOffset || 0;
      subElStyle.stroke = textStroke;
    }
    if (textFill) {
      subElStyle.fill = textFill;
    }
    var textWidth = token.contentWidth;
    var textHeight = token.contentHeight;
    el.setBoundingRect(new BoundingRect$1(adjustTextX(subElStyle.x, textWidth, subElStyle.textAlign), adjustTextY(subElStyle.y, textHeight, subElStyle.textBaseline), textWidth, textHeight));
  };
  ZRText2.prototype._renderBackground = function(style2, topStyle, x2, y2, width, height) {
    var textBackgroundColor = style2.backgroundColor;
    var textBorderWidth = style2.borderWidth;
    var textBorderColor = style2.borderColor;
    var isImageBg = textBackgroundColor && textBackgroundColor.image;
    var isPlainOrGradientBg = textBackgroundColor && !isImageBg;
    var textBorderRadius = style2.borderRadius;
    var self2 = this;
    var rectEl;
    var imgEl;
    if (isPlainOrGradientBg || style2.lineHeight || textBorderWidth && textBorderColor) {
      rectEl = this._getOrCreateChild(Rect$1);
      rectEl.useStyle(rectEl.createStyle());
      rectEl.style.fill = null;
      var rectShape = rectEl.shape;
      rectShape.x = x2;
      rectShape.y = y2;
      rectShape.width = width;
      rectShape.height = height;
      rectShape.r = textBorderRadius;
      rectEl.dirtyShape();
    }
    if (isPlainOrGradientBg) {
      var rectStyle = rectEl.style;
      rectStyle.fill = textBackgroundColor || null;
      rectStyle.fillOpacity = retrieve2(style2.fillOpacity, 1);
    } else if (isImageBg) {
      imgEl = this._getOrCreateChild(ZRImage$1);
      imgEl.onload = function() {
        self2.dirtyStyle();
      };
      var imgStyle = imgEl.style;
      imgStyle.image = textBackgroundColor.image;
      imgStyle.x = x2;
      imgStyle.y = y2;
      imgStyle.width = width;
      imgStyle.height = height;
    }
    if (textBorderWidth && textBorderColor) {
      var rectStyle = rectEl.style;
      rectStyle.lineWidth = textBorderWidth;
      rectStyle.stroke = textBorderColor;
      rectStyle.strokeOpacity = retrieve2(style2.strokeOpacity, 1);
      rectStyle.lineDash = style2.borderDash;
      rectStyle.lineDashOffset = style2.borderDashOffset || 0;
      rectEl.strokeContainThreshold = 0;
      if (rectEl.hasFill() && rectEl.hasStroke()) {
        rectStyle.strokeFirst = true;
        rectStyle.lineWidth *= 2;
      }
    }
    var commonStyle = (rectEl || imgEl).style;
    commonStyle.shadowBlur = style2.shadowBlur || 0;
    commonStyle.shadowColor = style2.shadowColor || "transparent";
    commonStyle.shadowOffsetX = style2.shadowOffsetX || 0;
    commonStyle.shadowOffsetY = style2.shadowOffsetY || 0;
    commonStyle.opacity = retrieve3(style2.opacity, topStyle.opacity, 1);
  };
  ZRText2.makeFont = function(style2) {
    var font = "";
    if (hasSeparateFont(style2)) {
      font = [
        style2.fontStyle,
        style2.fontWeight,
        parseFontSize(style2.fontSize),
        style2.fontFamily || "sans-serif"
      ].join(" ");
    }
    return font && trim(font) || style2.textFont || style2.font;
  };
  return ZRText2;
}(Displayable$1);
var VALID_TEXT_ALIGN = { left: true, right: 1, center: 1 };
var VALID_TEXT_VERTICAL_ALIGN = { top: 1, bottom: 1, middle: 1 };
var FONT_PARTS = ["fontStyle", "fontWeight", "fontSize", "fontFamily"];
function parseFontSize(fontSize) {
  if (typeof fontSize === "string" && (fontSize.indexOf("px") !== -1 || fontSize.indexOf("rem") !== -1 || fontSize.indexOf("em") !== -1)) {
    return fontSize;
  } else if (!isNaN(+fontSize)) {
    return fontSize + "px";
  } else {
    return DEFAULT_FONT_SIZE + "px";
  }
}
function setSeparateFont(targetStyle, sourceStyle) {
  for (var i = 0; i < FONT_PARTS.length; i++) {
    var fontProp = FONT_PARTS[i];
    var val = sourceStyle[fontProp];
    if (val != null) {
      targetStyle[fontProp] = val;
    }
  }
}
function hasSeparateFont(style2) {
  return style2.fontSize != null || style2.fontFamily || style2.fontWeight;
}
function normalizeTextStyle(style2) {
  normalizeStyle(style2);
  each$4(style2.rich, normalizeStyle);
  return style2;
}
function normalizeStyle(style2) {
  if (style2) {
    style2.font = ZRText.makeFont(style2);
    var textAlign = style2.align;
    textAlign === "middle" && (textAlign = "center");
    style2.align = textAlign == null || VALID_TEXT_ALIGN[textAlign] ? textAlign : "left";
    var verticalAlign = style2.verticalAlign;
    verticalAlign === "center" && (verticalAlign = "middle");
    style2.verticalAlign = verticalAlign == null || VALID_TEXT_VERTICAL_ALIGN[verticalAlign] ? verticalAlign : "top";
    var textPadding = style2.padding;
    if (textPadding) {
      style2.padding = normalizeCssArray$1(style2.padding);
    }
  }
}
function getStroke(stroke, lineWidth) {
  return stroke == null || lineWidth <= 0 || stroke === "transparent" || stroke === "none" ? null : stroke.image || stroke.colorStops ? "#000" : stroke;
}
function getFill(fill) {
  return fill == null || fill === "none" ? null : fill.image || fill.colorStops ? "#000" : fill;
}
function getTextXForPadding(x2, textAlign, textPadding) {
  return textAlign === "right" ? x2 - textPadding[1] : textAlign === "center" ? x2 + textPadding[3] / 2 - textPadding[1] / 2 : x2 + textPadding[3];
}
function getStyleText(style2) {
  var text = style2.text;
  text != null && (text += "");
  return text;
}
function needDrawBackground(style2) {
  return !!(style2.backgroundColor || style2.lineHeight || style2.borderWidth && style2.borderColor);
}
var ZRText$1 = ZRText;
var getECData = makeInner();
var setCommonECData = function(seriesIndex, dataType, dataIdx, el) {
  if (el) {
    var ecData = getECData(el);
    ecData.dataIndex = dataIdx;
    ecData.dataType = dataType;
    ecData.seriesIndex = seriesIndex;
    if (el.type === "group") {
      el.traverse(function(child) {
        var childECData = getECData(child);
        childECData.seriesIndex = seriesIndex;
        childECData.dataIndex = dataIdx;
        childECData.dataType = dataType;
      });
    }
  }
};
var _highlightNextDigit = 1;
var _highlightKeyMap = {};
var getSavedStates = makeInner();
var getComponentStates = makeInner();
var HOVER_STATE_NORMAL = 0;
var HOVER_STATE_BLUR = 1;
var HOVER_STATE_EMPHASIS = 2;
var SPECIAL_STATES = ["emphasis", "blur", "select"];
var DISPLAY_STATES = ["normal", "emphasis", "blur", "select"];
var Z2_EMPHASIS_LIFT = 10;
var Z2_SELECT_LIFT = 9;
var HIGHLIGHT_ACTION_TYPE = "highlight";
var DOWNPLAY_ACTION_TYPE = "downplay";
var SELECT_ACTION_TYPE = "select";
var UNSELECT_ACTION_TYPE = "unselect";
var TOGGLE_SELECT_ACTION_TYPE = "toggleSelect";
function hasFillOrStroke(fillOrStroke) {
  return fillOrStroke != null && fillOrStroke !== "none";
}
var liftedColorCache = new LRU$1(100);
function liftColor(color) {
  if (isString(color)) {
    var liftedColor = liftedColorCache.get(color);
    if (!liftedColor) {
      liftedColor = lift(color, -0.1);
      liftedColorCache.put(color, liftedColor);
    }
    return liftedColor;
  } else if (isGradientObject(color)) {
    var ret = extend({}, color);
    ret.colorStops = map$1(color.colorStops, function(stop2) {
      return {
        offset: stop2.offset,
        color: lift(stop2.color, -0.1)
      };
    });
    return ret;
  }
  return color;
}
function doChangeHoverState(el, stateName, hoverStateEnum) {
  if (el.onHoverStateChange && (el.hoverState || 0) !== hoverStateEnum) {
    el.onHoverStateChange(stateName);
  }
  el.hoverState = hoverStateEnum;
}
function singleEnterEmphasis(el) {
  doChangeHoverState(el, "emphasis", HOVER_STATE_EMPHASIS);
}
function singleLeaveEmphasis(el) {
  if (el.hoverState === HOVER_STATE_EMPHASIS) {
    doChangeHoverState(el, "normal", HOVER_STATE_NORMAL);
  }
}
function singleEnterBlur(el) {
  doChangeHoverState(el, "blur", HOVER_STATE_BLUR);
}
function singleLeaveBlur(el) {
  if (el.hoverState === HOVER_STATE_BLUR) {
    doChangeHoverState(el, "normal", HOVER_STATE_NORMAL);
  }
}
function singleEnterSelect(el) {
  el.selected = true;
}
function singleLeaveSelect(el) {
  el.selected = false;
}
function updateElementState(el, updater, commonParam) {
  updater(el, commonParam);
}
function traverseUpdateState(el, updater, commonParam) {
  updateElementState(el, updater, commonParam);
  el.isGroup && el.traverse(function(child) {
    updateElementState(child, updater, commonParam);
  });
}
function getFromStateStyle(el, props, toStateName, defaultValue) {
  var style2 = el.style;
  var fromState = {};
  for (var i = 0; i < props.length; i++) {
    var propName = props[i];
    var val = style2[propName];
    fromState[propName] = val == null ? defaultValue && defaultValue[propName] : val;
  }
  for (var i = 0; i < el.animators.length; i++) {
    var animator = el.animators[i];
    if (animator.__fromStateTransition && animator.__fromStateTransition.indexOf(toStateName) < 0 && animator.targetName === "style") {
      animator.saveTo(fromState, props);
    }
  }
  return fromState;
}
function createEmphasisDefaultState(el, stateName, targetStates, state) {
  var hasSelect = targetStates && indexOf(targetStates, "select") >= 0;
  var cloned = false;
  if (el instanceof Path$1) {
    var store = getSavedStates(el);
    var fromFill = hasSelect ? store.selectFill || store.normalFill : store.normalFill;
    var fromStroke = hasSelect ? store.selectStroke || store.normalStroke : store.normalStroke;
    if (hasFillOrStroke(fromFill) || hasFillOrStroke(fromStroke)) {
      state = state || {};
      var emphasisStyle = state.style || {};
      if (emphasisStyle.fill === "inherit") {
        cloned = true;
        state = extend({}, state);
        emphasisStyle = extend({}, emphasisStyle);
        emphasisStyle.fill = fromFill;
      } else if (!hasFillOrStroke(emphasisStyle.fill) && hasFillOrStroke(fromFill)) {
        cloned = true;
        state = extend({}, state);
        emphasisStyle = extend({}, emphasisStyle);
        emphasisStyle.fill = liftColor(fromFill);
      } else if (!hasFillOrStroke(emphasisStyle.stroke) && hasFillOrStroke(fromStroke)) {
        if (!cloned) {
          state = extend({}, state);
          emphasisStyle = extend({}, emphasisStyle);
        }
        emphasisStyle.stroke = liftColor(fromStroke);
      }
      state.style = emphasisStyle;
    }
  }
  if (state) {
    if (state.z2 == null) {
      if (!cloned) {
        state = extend({}, state);
      }
      var z2EmphasisLift = el.z2EmphasisLift;
      state.z2 = el.z2 + (z2EmphasisLift != null ? z2EmphasisLift : Z2_EMPHASIS_LIFT);
    }
  }
  return state;
}
function createSelectDefaultState(el, stateName, state) {
  if (state) {
    if (state.z2 == null) {
      state = extend({}, state);
      var z2SelectLift = el.z2SelectLift;
      state.z2 = el.z2 + (z2SelectLift != null ? z2SelectLift : Z2_SELECT_LIFT);
    }
  }
  return state;
}
function createBlurDefaultState(el, stateName, state) {
  var hasBlur = indexOf(el.currentStates, stateName) >= 0;
  var currentOpacity = el.style.opacity;
  var fromState = !hasBlur ? getFromStateStyle(el, ["opacity"], stateName, {
    opacity: 1
  }) : null;
  state = state || {};
  var blurStyle = state.style || {};
  if (blurStyle.opacity == null) {
    state = extend({}, state);
    blurStyle = extend({
      opacity: hasBlur ? currentOpacity : fromState.opacity * 0.1
    }, blurStyle);
    state.style = blurStyle;
  }
  return state;
}
function elementStateProxy(stateName, targetStates) {
  var state = this.states[stateName];
  if (this.style) {
    if (stateName === "emphasis") {
      return createEmphasisDefaultState(this, stateName, targetStates, state);
    } else if (stateName === "blur") {
      return createBlurDefaultState(this, stateName, state);
    } else if (stateName === "select") {
      return createSelectDefaultState(this, stateName, state);
    }
  }
  return state;
}
function setDefaultStateProxy(el) {
  el.stateProxy = elementStateProxy;
  var textContent = el.getTextContent();
  var textGuide = el.getTextGuideLine();
  if (textContent) {
    textContent.stateProxy = elementStateProxy;
  }
  if (textGuide) {
    textGuide.stateProxy = elementStateProxy;
  }
}
function enterEmphasisWhenMouseOver(el, e2) {
  !shouldSilent(el, e2) && !el.__highByOuter && traverseUpdateState(el, singleEnterEmphasis);
}
function leaveEmphasisWhenMouseOut(el, e2) {
  !shouldSilent(el, e2) && !el.__highByOuter && traverseUpdateState(el, singleLeaveEmphasis);
}
function enterEmphasis(el, highlightDigit) {
  el.__highByOuter |= 1 << (highlightDigit || 0);
  traverseUpdateState(el, singleEnterEmphasis);
}
function leaveEmphasis(el, highlightDigit) {
  !(el.__highByOuter &= ~(1 << (highlightDigit || 0))) && traverseUpdateState(el, singleLeaveEmphasis);
}
function enterBlur(el) {
  traverseUpdateState(el, singleEnterBlur);
}
function leaveBlur(el) {
  traverseUpdateState(el, singleLeaveBlur);
}
function enterSelect(el) {
  traverseUpdateState(el, singleEnterSelect);
}
function leaveSelect(el) {
  traverseUpdateState(el, singleLeaveSelect);
}
function shouldSilent(el, e2) {
  return el.__highDownSilentOnTouch && e2.zrByTouch;
}
function allLeaveBlur(api) {
  var model = api.getModel();
  var leaveBlurredSeries = [];
  var allComponentViews = [];
  model.eachComponent(function(componentType, componentModel) {
    var componentStates = getComponentStates(componentModel);
    var isSeries2 = componentType === "series";
    var view = isSeries2 ? api.getViewOfSeriesModel(componentModel) : api.getViewOfComponentModel(componentModel);
    !isSeries2 && allComponentViews.push(view);
    if (componentStates.isBlured) {
      view.group.traverse(function(child) {
        singleLeaveBlur(child);
      });
      isSeries2 && leaveBlurredSeries.push(componentModel);
    }
    componentStates.isBlured = false;
  });
  each$4(allComponentViews, function(view) {
    if (view && view.toggleBlurSeries) {
      view.toggleBlurSeries(leaveBlurredSeries, false, model);
    }
  });
}
function blurSeries(targetSeriesIndex, focus, blurScope, api) {
  var ecModel = api.getModel();
  blurScope = blurScope || "coordinateSystem";
  function leaveBlurOfIndices(data, dataIndices) {
    for (var i = 0; i < dataIndices.length; i++) {
      var itemEl = data.getItemGraphicEl(dataIndices[i]);
      itemEl && leaveBlur(itemEl);
    }
  }
  if (targetSeriesIndex == null) {
    return;
  }
  if (!focus || focus === "none") {
    return;
  }
  var targetSeriesModel = ecModel.getSeriesByIndex(targetSeriesIndex);
  var targetCoordSys = targetSeriesModel.coordinateSystem;
  if (targetCoordSys && targetCoordSys.master) {
    targetCoordSys = targetCoordSys.master;
  }
  var blurredSeries = [];
  ecModel.eachSeries(function(seriesModel) {
    var sameSeries = targetSeriesModel === seriesModel;
    var coordSys = seriesModel.coordinateSystem;
    if (coordSys && coordSys.master) {
      coordSys = coordSys.master;
    }
    var sameCoordSys = coordSys && targetCoordSys ? coordSys === targetCoordSys : sameSeries;
    if (!(blurScope === "series" && !sameSeries || blurScope === "coordinateSystem" && !sameCoordSys || focus === "series" && sameSeries)) {
      var view = api.getViewOfSeriesModel(seriesModel);
      view.group.traverse(function(child) {
        if (child.__highByOuter && sameSeries && focus === "self") {
          return;
        }
        singleEnterBlur(child);
      });
      if (isArrayLike(focus)) {
        leaveBlurOfIndices(seriesModel.getData(), focus);
      } else if (isObject$2(focus)) {
        var dataTypes = keys(focus);
        for (var d = 0; d < dataTypes.length; d++) {
          leaveBlurOfIndices(seriesModel.getData(dataTypes[d]), focus[dataTypes[d]]);
        }
      }
      blurredSeries.push(seriesModel);
      getComponentStates(seriesModel).isBlured = true;
    }
  });
  ecModel.eachComponent(function(componentType, componentModel) {
    if (componentType === "series") {
      return;
    }
    var view = api.getViewOfComponentModel(componentModel);
    if (view && view.toggleBlurSeries) {
      view.toggleBlurSeries(blurredSeries, true, ecModel);
    }
  });
}
function blurComponent(componentMainType, componentIndex, api) {
  if (componentMainType == null || componentIndex == null) {
    return;
  }
  var componentModel = api.getModel().getComponent(componentMainType, componentIndex);
  if (!componentModel) {
    return;
  }
  getComponentStates(componentModel).isBlured = true;
  var view = api.getViewOfComponentModel(componentModel);
  if (!view || !view.focusBlurEnabled) {
    return;
  }
  view.group.traverse(function(child) {
    singleEnterBlur(child);
  });
}
function blurSeriesFromHighlightPayload(seriesModel, payload, api) {
  var seriesIndex = seriesModel.seriesIndex;
  var data = seriesModel.getData(payload.dataType);
  if (!data) {
    return;
  }
  var dataIndex = queryDataIndex(data, payload);
  dataIndex = (isArray(dataIndex) ? dataIndex[0] : dataIndex) || 0;
  var el = data.getItemGraphicEl(dataIndex);
  if (!el) {
    var count = data.count();
    var current = 0;
    while (!el && current < count) {
      el = data.getItemGraphicEl(current++);
    }
  }
  if (el) {
    var ecData = getECData(el);
    blurSeries(seriesIndex, ecData.focus, ecData.blurScope, api);
  } else {
    var focus_1 = seriesModel.get(["emphasis", "focus"]);
    var blurScope = seriesModel.get(["emphasis", "blurScope"]);
    if (focus_1 != null) {
      blurSeries(seriesIndex, focus_1, blurScope, api);
    }
  }
}
function findComponentHighDownDispatchers(componentMainType, componentIndex, name, api) {
  var ret = {
    focusSelf: false,
    dispatchers: null
  };
  if (componentMainType == null || componentMainType === "series" || componentIndex == null || name == null) {
    return ret;
  }
  var componentModel = api.getModel().getComponent(componentMainType, componentIndex);
  if (!componentModel) {
    return ret;
  }
  var view = api.getViewOfComponentModel(componentModel);
  if (!view || !view.findHighDownDispatchers) {
    return ret;
  }
  var dispatchers = view.findHighDownDispatchers(name);
  var focusSelf;
  for (var i = 0; i < dispatchers.length; i++) {
    if (getECData(dispatchers[i]).focus === "self") {
      focusSelf = true;
      break;
    }
  }
  return {
    focusSelf,
    dispatchers
  };
}
function handleGlobalMouseOverForHighDown(dispatcher, e2, api) {
  var ecData = getECData(dispatcher);
  var _a2 = findComponentHighDownDispatchers(ecData.componentMainType, ecData.componentIndex, ecData.componentHighDownName, api), dispatchers = _a2.dispatchers, focusSelf = _a2.focusSelf;
  if (dispatchers) {
    if (focusSelf) {
      blurComponent(ecData.componentMainType, ecData.componentIndex, api);
    }
    each$4(dispatchers, function(dispatcher2) {
      return enterEmphasisWhenMouseOver(dispatcher2, e2);
    });
  } else {
    blurSeries(ecData.seriesIndex, ecData.focus, ecData.blurScope, api);
    if (ecData.focus === "self") {
      blurComponent(ecData.componentMainType, ecData.componentIndex, api);
    }
    enterEmphasisWhenMouseOver(dispatcher, e2);
  }
}
function handleGlobalMouseOutForHighDown(dispatcher, e2, api) {
  allLeaveBlur(api);
  var ecData = getECData(dispatcher);
  var dispatchers = findComponentHighDownDispatchers(ecData.componentMainType, ecData.componentIndex, ecData.componentHighDownName, api).dispatchers;
  if (dispatchers) {
    each$4(dispatchers, function(dispatcher2) {
      return leaveEmphasisWhenMouseOut(dispatcher2, e2);
    });
  } else {
    leaveEmphasisWhenMouseOut(dispatcher, e2);
  }
}
function toggleSelectionFromPayload(seriesModel, payload, api) {
  if (!isSelectChangePayload(payload)) {
    return;
  }
  var dataType = payload.dataType;
  var data = seriesModel.getData(dataType);
  var dataIndex = queryDataIndex(data, payload);
  if (!isArray(dataIndex)) {
    dataIndex = [dataIndex];
  }
  seriesModel[payload.type === TOGGLE_SELECT_ACTION_TYPE ? "toggleSelect" : payload.type === SELECT_ACTION_TYPE ? "select" : "unselect"](dataIndex, dataType);
}
function updateSeriesElementSelection(seriesModel) {
  var allData = seriesModel.getAllData();
  each$4(allData, function(_a2) {
    var data = _a2.data, type = _a2.type;
    data.eachItemGraphicEl(function(el, idx) {
      seriesModel.isSelected(idx, type) ? enterSelect(el) : leaveSelect(el);
    });
  });
}
function getAllSelectedIndices(ecModel) {
  var ret = [];
  ecModel.eachSeries(function(seriesModel) {
    var allData = seriesModel.getAllData();
    each$4(allData, function(_a2) {
      _a2.data;
      var type = _a2.type;
      var dataIndices = seriesModel.getSelectedDataIndices();
      if (dataIndices.length > 0) {
        var item = {
          dataIndex: dataIndices,
          seriesIndex: seriesModel.seriesIndex
        };
        if (type != null) {
          item.dataType = type;
        }
        ret.push(item);
      }
    });
  });
  return ret;
}
function enableHoverEmphasis(el, focus, blurScope) {
  setAsHighDownDispatcher(el, true);
  traverseUpdateState(el, setDefaultStateProxy);
  enableHoverFocus(el, focus, blurScope);
}
function disableHoverEmphasis(el) {
  setAsHighDownDispatcher(el, false);
}
function toggleHoverEmphasis(el, focus, blurScope, isDisabled) {
  isDisabled ? disableHoverEmphasis(el) : enableHoverEmphasis(el, focus, blurScope);
}
function enableHoverFocus(el, focus, blurScope) {
  var ecData = getECData(el);
  if (focus != null) {
    ecData.focus = focus;
    ecData.blurScope = blurScope;
  } else if (ecData.focus) {
    ecData.focus = null;
  }
}
var OTHER_STATES = ["emphasis", "blur", "select"];
var defaultStyleGetterMap = {
  itemStyle: "getItemStyle",
  lineStyle: "getLineStyle",
  areaStyle: "getAreaStyle"
};
function setStatesStylesFromModel(el, itemModel, styleType, getter) {
  styleType = styleType || "itemStyle";
  for (var i = 0; i < OTHER_STATES.length; i++) {
    var stateName = OTHER_STATES[i];
    var model = itemModel.getModel([stateName, styleType]);
    var state = el.ensureState(stateName);
    state.style = getter ? getter(model) : model[defaultStyleGetterMap[styleType]]();
  }
}
function setAsHighDownDispatcher(el, asDispatcher) {
  var disable = asDispatcher === false;
  var extendedEl = el;
  if (el.highDownSilentOnTouch) {
    extendedEl.__highDownSilentOnTouch = el.highDownSilentOnTouch;
  }
  if (!disable || extendedEl.__highDownDispatcher) {
    extendedEl.__highByOuter = extendedEl.__highByOuter || 0;
    extendedEl.__highDownDispatcher = !disable;
  }
}
function isHighDownDispatcher(el) {
  return !!(el && el.__highDownDispatcher);
}
function getHighlightDigit(highlightKey) {
  var highlightDigit = _highlightKeyMap[highlightKey];
  if (highlightDigit == null && _highlightNextDigit <= 32) {
    highlightDigit = _highlightKeyMap[highlightKey] = _highlightNextDigit++;
  }
  return highlightDigit;
}
function isSelectChangePayload(payload) {
  var payloadType = payload.type;
  return payloadType === SELECT_ACTION_TYPE || payloadType === UNSELECT_ACTION_TYPE || payloadType === TOGGLE_SELECT_ACTION_TYPE;
}
function isHighDownPayload(payload) {
  var payloadType = payload.type;
  return payloadType === HIGHLIGHT_ACTION_TYPE || payloadType === DOWNPLAY_ACTION_TYPE;
}
function savePathStates(el) {
  var store = getSavedStates(el);
  store.normalFill = el.style.fill;
  store.normalStroke = el.style.stroke;
  var selectState = el.states.select || {};
  store.selectFill = selectState.style && selectState.style.fill || null;
  store.selectStroke = selectState.style && selectState.style.stroke || null;
}
var CMD = PathProxy$1.CMD;
var points = [[], [], []];
var mathSqrt$2 = Math.sqrt;
var mathAtan2 = Math.atan2;
function transformPath(path, m2) {
  if (!m2) {
    return;
  }
  var data = path.data;
  var len2 = path.len();
  var cmd;
  var nPoint;
  var i;
  var j2;
  var k2;
  var p;
  var M = CMD.M;
  var C2 = CMD.C;
  var L2 = CMD.L;
  var R = CMD.R;
  var A2 = CMD.A;
  var Q = CMD.Q;
  for (i = 0, j2 = 0; i < len2; ) {
    cmd = data[i++];
    j2 = i;
    nPoint = 0;
    switch (cmd) {
      case M:
        nPoint = 1;
        break;
      case L2:
        nPoint = 1;
        break;
      case C2:
        nPoint = 3;
        break;
      case Q:
        nPoint = 2;
        break;
      case A2:
        var x2 = m2[4];
        var y2 = m2[5];
        var sx = mathSqrt$2(m2[0] * m2[0] + m2[1] * m2[1]);
        var sy = mathSqrt$2(m2[2] * m2[2] + m2[3] * m2[3]);
        var angle = mathAtan2(-m2[1] / sy, m2[0] / sx);
        data[i] *= sx;
        data[i++] += x2;
        data[i] *= sy;
        data[i++] += y2;
        data[i++] *= sx;
        data[i++] *= sy;
        data[i++] += angle;
        data[i++] += angle;
        i += 2;
        j2 = i;
        break;
      case R:
        p[0] = data[i++];
        p[1] = data[i++];
        applyTransform$1(p, p, m2);
        data[j2++] = p[0];
        data[j2++] = p[1];
        p[0] += data[i++];
        p[1] += data[i++];
        applyTransform$1(p, p, m2);
        data[j2++] = p[0];
        data[j2++] = p[1];
    }
    for (k2 = 0; k2 < nPoint; k2++) {
      var p_1 = points[k2];
      p_1[0] = data[i++];
      p_1[1] = data[i++];
      applyTransform$1(p_1, p_1, m2);
      data[j2++] = p_1[0];
      data[j2++] = p_1[1];
    }
  }
  path.increaseVersion();
}
var mathSqrt$1 = Math.sqrt;
var mathSin$1 = Math.sin;
var mathCos$1 = Math.cos;
var PI$3 = Math.PI;
function vMag(v) {
  return Math.sqrt(v[0] * v[0] + v[1] * v[1]);
}
function vRatio(u, v) {
  return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));
}
function vAngle(u, v) {
  return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));
}
function processArc(x1, y1, x2, y2, fa, fs, rx, ry, psiDeg, cmd, path) {
  var psi = psiDeg * (PI$3 / 180);
  var xp = mathCos$1(psi) * (x1 - x2) / 2 + mathSin$1(psi) * (y1 - y2) / 2;
  var yp = -1 * mathSin$1(psi) * (x1 - x2) / 2 + mathCos$1(psi) * (y1 - y2) / 2;
  var lambda = xp * xp / (rx * rx) + yp * yp / (ry * ry);
  if (lambda > 1) {
    rx *= mathSqrt$1(lambda);
    ry *= mathSqrt$1(lambda);
  }
  var f = (fa === fs ? -1 : 1) * mathSqrt$1((rx * rx * (ry * ry) - rx * rx * (yp * yp) - ry * ry * (xp * xp)) / (rx * rx * (yp * yp) + ry * ry * (xp * xp))) || 0;
  var cxp = f * rx * yp / ry;
  var cyp = f * -ry * xp / rx;
  var cx = (x1 + x2) / 2 + mathCos$1(psi) * cxp - mathSin$1(psi) * cyp;
  var cy = (y1 + y2) / 2 + mathSin$1(psi) * cxp + mathCos$1(psi) * cyp;
  var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);
  var u = [(xp - cxp) / rx, (yp - cyp) / ry];
  var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];
  var dTheta = vAngle(u, v);
  if (vRatio(u, v) <= -1) {
    dTheta = PI$3;
  }
  if (vRatio(u, v) >= 1) {
    dTheta = 0;
  }
  if (dTheta < 0) {
    var n = Math.round(dTheta / PI$3 * 1e6) / 1e6;
    dTheta = PI$3 * 2 + n % 2 * PI$3;
  }
  path.addData(cmd, cx, cy, rx, ry, theta, dTheta, psi, fs);
}
var commandReg = /([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig;
var numberReg = /-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;
function createPathProxyFromString(data) {
  var path = new PathProxy$1();
  if (!data) {
    return path;
  }
  var cpx = 0;
  var cpy = 0;
  var subpathX = cpx;
  var subpathY = cpy;
  var prevCmd;
  var CMD2 = PathProxy$1.CMD;
  var cmdList = data.match(commandReg);
  if (!cmdList) {
    return path;
  }
  for (var l = 0; l < cmdList.length; l++) {
    var cmdText = cmdList[l];
    var cmdStr = cmdText.charAt(0);
    var cmd = void 0;
    var p = cmdText.match(numberReg) || [];
    var pLen = p.length;
    for (var i = 0; i < pLen; i++) {
      p[i] = parseFloat(p[i]);
    }
    var off = 0;
    while (off < pLen) {
      var ctlPtx = void 0;
      var ctlPty = void 0;
      var rx = void 0;
      var ry = void 0;
      var psi = void 0;
      var fa = void 0;
      var fs = void 0;
      var x1 = cpx;
      var y1 = cpy;
      var len2 = void 0;
      var pathData = void 0;
      switch (cmdStr) {
        case "l":
          cpx += p[off++];
          cpy += p[off++];
          cmd = CMD2.L;
          path.addData(cmd, cpx, cpy);
          break;
        case "L":
          cpx = p[off++];
          cpy = p[off++];
          cmd = CMD2.L;
          path.addData(cmd, cpx, cpy);
          break;
        case "m":
          cpx += p[off++];
          cpy += p[off++];
          cmd = CMD2.M;
          path.addData(cmd, cpx, cpy);
          subpathX = cpx;
          subpathY = cpy;
          cmdStr = "l";
          break;
        case "M":
          cpx = p[off++];
          cpy = p[off++];
          cmd = CMD2.M;
          path.addData(cmd, cpx, cpy);
          subpathX = cpx;
          subpathY = cpy;
          cmdStr = "L";
          break;
        case "h":
          cpx += p[off++];
          cmd = CMD2.L;
          path.addData(cmd, cpx, cpy);
          break;
        case "H":
          cpx = p[off++];
          cmd = CMD2.L;
          path.addData(cmd, cpx, cpy);
          break;
        case "v":
          cpy += p[off++];
          cmd = CMD2.L;
          path.addData(cmd, cpx, cpy);
          break;
        case "V":
          cpy = p[off++];
          cmd = CMD2.L;
          path.addData(cmd, cpx, cpy);
          break;
        case "C":
          cmd = CMD2.C;
          path.addData(cmd, p[off++], p[off++], p[off++], p[off++], p[off++], p[off++]);
          cpx = p[off - 2];
          cpy = p[off - 1];
          break;
        case "c":
          cmd = CMD2.C;
          path.addData(cmd, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy);
          cpx += p[off - 2];
          cpy += p[off - 1];
          break;
        case "S":
          ctlPtx = cpx;
          ctlPty = cpy;
          len2 = path.len();
          pathData = path.data;
          if (prevCmd === CMD2.C) {
            ctlPtx += cpx - pathData[len2 - 4];
            ctlPty += cpy - pathData[len2 - 3];
          }
          cmd = CMD2.C;
          x1 = p[off++];
          y1 = p[off++];
          cpx = p[off++];
          cpy = p[off++];
          path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);
          break;
        case "s":
          ctlPtx = cpx;
          ctlPty = cpy;
          len2 = path.len();
          pathData = path.data;
          if (prevCmd === CMD2.C) {
            ctlPtx += cpx - pathData[len2 - 4];
            ctlPty += cpy - pathData[len2 - 3];
          }
          cmd = CMD2.C;
          x1 = cpx + p[off++];
          y1 = cpy + p[off++];
          cpx += p[off++];
          cpy += p[off++];
          path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);
          break;
        case "Q":
          x1 = p[off++];
          y1 = p[off++];
          cpx = p[off++];
          cpy = p[off++];
          cmd = CMD2.Q;
          path.addData(cmd, x1, y1, cpx, cpy);
          break;
        case "q":
          x1 = p[off++] + cpx;
          y1 = p[off++] + cpy;
          cpx += p[off++];
          cpy += p[off++];
          cmd = CMD2.Q;
          path.addData(cmd, x1, y1, cpx, cpy);
          break;
        case "T":
          ctlPtx = cpx;
          ctlPty = cpy;
          len2 = path.len();
          pathData = path.data;
          if (prevCmd === CMD2.Q) {
            ctlPtx += cpx - pathData[len2 - 4];
            ctlPty += cpy - pathData[len2 - 3];
          }
          cpx = p[off++];
          cpy = p[off++];
          cmd = CMD2.Q;
          path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);
          break;
        case "t":
          ctlPtx = cpx;
          ctlPty = cpy;
          len2 = path.len();
          pathData = path.data;
          if (prevCmd === CMD2.Q) {
            ctlPtx += cpx - pathData[len2 - 4];
            ctlPty += cpy - pathData[len2 - 3];
          }
          cpx += p[off++];
          cpy += p[off++];
          cmd = CMD2.Q;
          path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);
          break;
        case "A":
          rx = p[off++];
          ry = p[off++];
          psi = p[off++];
          fa = p[off++];
          fs = p[off++];
          x1 = cpx, y1 = cpy;
          cpx = p[off++];
          cpy = p[off++];
          cmd = CMD2.A;
          processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);
          break;
        case "a":
          rx = p[off++];
          ry = p[off++];
          psi = p[off++];
          fa = p[off++];
          fs = p[off++];
          x1 = cpx, y1 = cpy;
          cpx += p[off++];
          cpy += p[off++];
          cmd = CMD2.A;
          processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);
          break;
      }
    }
    if (cmdStr === "z" || cmdStr === "Z") {
      cmd = CMD2.Z;
      path.addData(cmd);
      cpx = subpathX;
      cpy = subpathY;
    }
    prevCmd = cmd;
  }
  path.toStatic();
  return path;
}
var SVGPath = function(_super) {
  __extends(SVGPath2, _super);
  function SVGPath2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  SVGPath2.prototype.applyTransform = function(m2) {
  };
  return SVGPath2;
}(Path$1);
function isPathProxy(path) {
  return path.setData != null;
}
function createPathOptions(str, opts) {
  var pathProxy = createPathProxyFromString(str);
  var innerOpts = extend({}, opts);
  innerOpts.buildPath = function(path) {
    if (isPathProxy(path)) {
      path.setData(pathProxy.data);
      var ctx = path.getContext();
      if (ctx) {
        path.rebuildPath(ctx, 1);
      }
    } else {
      var ctx = path;
      pathProxy.rebuildPath(ctx, 1);
    }
  };
  innerOpts.applyTransform = function(m2) {
    transformPath(pathProxy, m2);
    this.dirtyShape();
  };
  return innerOpts;
}
function createFromString(str, opts) {
  return new SVGPath(createPathOptions(str, opts));
}
function extendFromString(str, defaultOpts) {
  var innerOpts = createPathOptions(str, defaultOpts);
  var Sub = function(_super) {
    __extends(Sub2, _super);
    function Sub2(opts) {
      var _this = _super.call(this, opts) || this;
      _this.applyTransform = innerOpts.applyTransform;
      _this.buildPath = innerOpts.buildPath;
      return _this;
    }
    return Sub2;
  }(SVGPath);
  return Sub;
}
function mergePath$1(pathEls, opts) {
  var pathList = [];
  var len2 = pathEls.length;
  for (var i = 0; i < len2; i++) {
    var pathEl = pathEls[i];
    pathList.push(pathEl.getUpdatedPathProxy(true));
  }
  var pathBundle = new Path$1(opts);
  pathBundle.createPathProxy();
  pathBundle.buildPath = function(path) {
    if (isPathProxy(path)) {
      path.appendPath(pathList);
      var ctx = path.getContext();
      if (ctx) {
        path.rebuildPath(ctx, 1);
      }
    }
  };
  return pathBundle;
}
var CircleShape = function() {
  function CircleShape2() {
    this.cx = 0;
    this.cy = 0;
    this.r = 0;
  }
  return CircleShape2;
}();
var Circle = function(_super) {
  __extends(Circle2, _super);
  function Circle2(opts) {
    return _super.call(this, opts) || this;
  }
  Circle2.prototype.getDefaultShape = function() {
    return new CircleShape();
  };
  Circle2.prototype.buildPath = function(ctx, shape) {
    ctx.moveTo(shape.cx + shape.r, shape.cy);
    ctx.arc(shape.cx, shape.cy, shape.r, 0, Math.PI * 2);
  };
  return Circle2;
}(Path$1);
Circle.prototype.type = "circle";
var Circle$1 = Circle;
var EllipseShape = function() {
  function EllipseShape2() {
    this.cx = 0;
    this.cy = 0;
    this.rx = 0;
    this.ry = 0;
  }
  return EllipseShape2;
}();
var Ellipse = function(_super) {
  __extends(Ellipse2, _super);
  function Ellipse2(opts) {
    return _super.call(this, opts) || this;
  }
  Ellipse2.prototype.getDefaultShape = function() {
    return new EllipseShape();
  };
  Ellipse2.prototype.buildPath = function(ctx, shape) {
    var k2 = 0.5522848;
    var x2 = shape.cx;
    var y2 = shape.cy;
    var a = shape.rx;
    var b2 = shape.ry;
    var ox = a * k2;
    var oy = b2 * k2;
    ctx.moveTo(x2 - a, y2);
    ctx.bezierCurveTo(x2 - a, y2 - oy, x2 - ox, y2 - b2, x2, y2 - b2);
    ctx.bezierCurveTo(x2 + ox, y2 - b2, x2 + a, y2 - oy, x2 + a, y2);
    ctx.bezierCurveTo(x2 + a, y2 + oy, x2 + ox, y2 + b2, x2, y2 + b2);
    ctx.bezierCurveTo(x2 - ox, y2 + b2, x2 - a, y2 + oy, x2 - a, y2);
    ctx.closePath();
  };
  return Ellipse2;
}(Path$1);
Ellipse.prototype.type = "ellipse";
var Ellipse$1 = Ellipse;
var PI$2 = Math.PI;
var PI2$1 = PI$2 * 2;
var mathSin = Math.sin;
var mathCos = Math.cos;
var mathACos = Math.acos;
var mathATan2 = Math.atan2;
var mathAbs = Math.abs;
var mathSqrt = Math.sqrt;
var mathMax$1 = Math.max;
var mathMin$1 = Math.min;
var e = 1e-4;
function intersect(x0, y0, x1, y1, x2, y2, x3, y3) {
  var dx10 = x1 - x0;
  var dy10 = y1 - y0;
  var dx32 = x3 - x2;
  var dy32 = y3 - y2;
  var t = dy32 * dx10 - dx32 * dy10;
  if (t * t < e) {
    return;
  }
  t = (dx32 * (y0 - y2) - dy32 * (x0 - x2)) / t;
  return [x0 + t * dx10, y0 + t * dy10];
}
function computeCornerTangents(x0, y0, x1, y1, radius, cr, clockwise) {
  var x01 = x0 - x1;
  var y01 = y0 - y1;
  var lo = (clockwise ? cr : -cr) / mathSqrt(x01 * x01 + y01 * y01);
  var ox = lo * y01;
  var oy = -lo * x01;
  var x11 = x0 + ox;
  var y11 = y0 + oy;
  var x10 = x1 + ox;
  var y10 = y1 + oy;
  var x00 = (x11 + x10) / 2;
  var y00 = (y11 + y10) / 2;
  var dx = x10 - x11;
  var dy = y10 - y11;
  var d2 = dx * dx + dy * dy;
  var r = radius - cr;
  var s = x11 * y10 - x10 * y11;
  var d = (dy < 0 ? -1 : 1) * mathSqrt(mathMax$1(0, r * r * d2 - s * s));
  var cx0 = (s * dy - dx * d) / d2;
  var cy0 = (-s * dx - dy * d) / d2;
  var cx1 = (s * dy + dx * d) / d2;
  var cy1 = (-s * dx + dy * d) / d2;
  var dx0 = cx0 - x00;
  var dy0 = cy0 - y00;
  var dx1 = cx1 - x00;
  var dy1 = cy1 - y00;
  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) {
    cx0 = cx1;
    cy0 = cy1;
  }
  return {
    cx: cx0,
    cy: cy0,
    x0: -ox,
    y0: -oy,
    x1: cx0 * (radius / r - 1),
    y1: cy0 * (radius / r - 1)
  };
}
function normalizeCornerRadius(cr) {
  var arr;
  if (isArray(cr)) {
    var len2 = cr.length;
    if (!len2) {
      return cr;
    }
    if (len2 === 1) {
      arr = [cr[0], cr[0], 0, 0];
    } else if (len2 === 2) {
      arr = [cr[0], cr[0], cr[1], cr[1]];
    } else if (len2 === 3) {
      arr = cr.concat(cr[2]);
    } else {
      arr = cr;
    }
  } else {
    arr = [cr, cr, cr, cr];
  }
  return arr;
}
function buildPath$1(ctx, shape) {
  var _a2;
  var radius = mathMax$1(shape.r, 0);
  var innerRadius = mathMax$1(shape.r0 || 0, 0);
  var hasRadius = radius > 0;
  var hasInnerRadius = innerRadius > 0;
  if (!hasRadius && !hasInnerRadius) {
    return;
  }
  if (!hasRadius) {
    radius = innerRadius;
    innerRadius = 0;
  }
  if (innerRadius > radius) {
    var tmp = radius;
    radius = innerRadius;
    innerRadius = tmp;
  }
  var startAngle = shape.startAngle, endAngle = shape.endAngle;
  if (isNaN(startAngle) || isNaN(endAngle)) {
    return;
  }
  var cx = shape.cx, cy = shape.cy;
  var clockwise = !!shape.clockwise;
  var arc = mathAbs(endAngle - startAngle);
  var mod = arc > PI2$1 && arc % PI2$1;
  mod > e && (arc = mod);
  if (!(radius > e)) {
    ctx.moveTo(cx, cy);
  } else if (arc > PI2$1 - e) {
    ctx.moveTo(cx + radius * mathCos(startAngle), cy + radius * mathSin(startAngle));
    ctx.arc(cx, cy, radius, startAngle, endAngle, !clockwise);
    if (innerRadius > e) {
      ctx.moveTo(cx + innerRadius * mathCos(endAngle), cy + innerRadius * mathSin(endAngle));
      ctx.arc(cx, cy, innerRadius, endAngle, startAngle, clockwise);
    }
  } else {
    var icrStart = void 0;
    var icrEnd = void 0;
    var ocrStart = void 0;
    var ocrEnd = void 0;
    var ocrs = void 0;
    var ocre = void 0;
    var icrs = void 0;
    var icre = void 0;
    var ocrMax = void 0;
    var icrMax = void 0;
    var limitedOcrMax = void 0;
    var limitedIcrMax = void 0;
    var xre = void 0;
    var yre = void 0;
    var xirs = void 0;
    var yirs = void 0;
    var xrs = radius * mathCos(startAngle);
    var yrs = radius * mathSin(startAngle);
    var xire = innerRadius * mathCos(endAngle);
    var yire = innerRadius * mathSin(endAngle);
    var hasArc = arc > e;
    if (hasArc) {
      var cornerRadius = shape.cornerRadius;
      if (cornerRadius) {
        _a2 = normalizeCornerRadius(cornerRadius), icrStart = _a2[0], icrEnd = _a2[1], ocrStart = _a2[2], ocrEnd = _a2[3];
      }
      var halfRd = mathAbs(radius - innerRadius) / 2;
      ocrs = mathMin$1(halfRd, ocrStart);
      ocre = mathMin$1(halfRd, ocrEnd);
      icrs = mathMin$1(halfRd, icrStart);
      icre = mathMin$1(halfRd, icrEnd);
      limitedOcrMax = ocrMax = mathMax$1(ocrs, ocre);
      limitedIcrMax = icrMax = mathMax$1(icrs, icre);
      if (ocrMax > e || icrMax > e) {
        xre = radius * mathCos(endAngle);
        yre = radius * mathSin(endAngle);
        xirs = innerRadius * mathCos(startAngle);
        yirs = innerRadius * mathSin(startAngle);
        if (arc < PI$2) {
          var it_1 = intersect(xrs, yrs, xirs, yirs, xre, yre, xire, yire);
          if (it_1) {
            var x0 = xrs - it_1[0];
            var y0 = yrs - it_1[1];
            var x1 = xre - it_1[0];
            var y1 = yre - it_1[1];
            var a = 1 / mathSin(mathACos((x0 * x1 + y0 * y1) / (mathSqrt(x0 * x0 + y0 * y0) * mathSqrt(x1 * x1 + y1 * y1))) / 2);
            var b2 = mathSqrt(it_1[0] * it_1[0] + it_1[1] * it_1[1]);
            limitedOcrMax = mathMin$1(ocrMax, (radius - b2) / (a + 1));
            limitedIcrMax = mathMin$1(icrMax, (innerRadius - b2) / (a - 1));
          }
        }
      }
    }
    if (!hasArc) {
      ctx.moveTo(cx + xrs, cy + yrs);
    } else if (limitedOcrMax > e) {
      var crStart = mathMin$1(ocrStart, limitedOcrMax);
      var crEnd = mathMin$1(ocrEnd, limitedOcrMax);
      var ct0 = computeCornerTangents(xirs, yirs, xrs, yrs, radius, crStart, clockwise);
      var ct1 = computeCornerTangents(xre, yre, xire, yire, radius, crEnd, clockwise);
      ctx.moveTo(cx + ct0.cx + ct0.x0, cy + ct0.cy + ct0.y0);
      if (limitedOcrMax < ocrMax && crStart === crEnd) {
        ctx.arc(cx + ct0.cx, cy + ct0.cy, limitedOcrMax, mathATan2(ct0.y0, ct0.x0), mathATan2(ct1.y0, ct1.x0), !clockwise);
      } else {
        crStart > 0 && ctx.arc(cx + ct0.cx, cy + ct0.cy, crStart, mathATan2(ct0.y0, ct0.x0), mathATan2(ct0.y1, ct0.x1), !clockwise);
        ctx.arc(cx, cy, radius, mathATan2(ct0.cy + ct0.y1, ct0.cx + ct0.x1), mathATan2(ct1.cy + ct1.y1, ct1.cx + ct1.x1), !clockwise);
        crEnd > 0 && ctx.arc(cx + ct1.cx, cy + ct1.cy, crEnd, mathATan2(ct1.y1, ct1.x1), mathATan2(ct1.y0, ct1.x0), !clockwise);
      }
    } else {
      ctx.moveTo(cx + xrs, cy + yrs);
      ctx.arc(cx, cy, radius, startAngle, endAngle, !clockwise);
    }
    if (!(innerRadius > e) || !hasArc) {
      ctx.lineTo(cx + xire, cy + yire);
    } else if (limitedIcrMax > e) {
      var crStart = mathMin$1(icrStart, limitedIcrMax);
      var crEnd = mathMin$1(icrEnd, limitedIcrMax);
      var ct0 = computeCornerTangents(xire, yire, xre, yre, innerRadius, -crEnd, clockwise);
      var ct1 = computeCornerTangents(xrs, yrs, xirs, yirs, innerRadius, -crStart, clockwise);
      ctx.lineTo(cx + ct0.cx + ct0.x0, cy + ct0.cy + ct0.y0);
      if (limitedIcrMax < icrMax && crStart === crEnd) {
        ctx.arc(cx + ct0.cx, cy + ct0.cy, limitedIcrMax, mathATan2(ct0.y0, ct0.x0), mathATan2(ct1.y0, ct1.x0), !clockwise);
      } else {
        crEnd > 0 && ctx.arc(cx + ct0.cx, cy + ct0.cy, crEnd, mathATan2(ct0.y0, ct0.x0), mathATan2(ct0.y1, ct0.x1), !clockwise);
        ctx.arc(cx, cy, innerRadius, mathATan2(ct0.cy + ct0.y1, ct0.cx + ct0.x1), mathATan2(ct1.cy + ct1.y1, ct1.cx + ct1.x1), clockwise);
        crStart > 0 && ctx.arc(cx + ct1.cx, cy + ct1.cy, crStart, mathATan2(ct1.y1, ct1.x1), mathATan2(ct1.y0, ct1.x0), !clockwise);
      }
    } else {
      ctx.lineTo(cx + xire, cy + yire);
      ctx.arc(cx, cy, innerRadius, endAngle, startAngle, clockwise);
    }
  }
  ctx.closePath();
}
var SectorShape = function() {
  function SectorShape2() {
    this.cx = 0;
    this.cy = 0;
    this.r0 = 0;
    this.r = 0;
    this.startAngle = 0;
    this.endAngle = Math.PI * 2;
    this.clockwise = true;
    this.cornerRadius = 0;
  }
  return SectorShape2;
}();
var Sector = function(_super) {
  __extends(Sector2, _super);
  function Sector2(opts) {
    return _super.call(this, opts) || this;
  }
  Sector2.prototype.getDefaultShape = function() {
    return new SectorShape();
  };
  Sector2.prototype.buildPath = function(ctx, shape) {
    buildPath$1(ctx, shape);
  };
  Sector2.prototype.isZeroArea = function() {
    return this.shape.startAngle === this.shape.endAngle || this.shape.r === this.shape.r0;
  };
  return Sector2;
}(Path$1);
Sector.prototype.type = "sector";
var Sector$1 = Sector;
var RingShape = function() {
  function RingShape2() {
    this.cx = 0;
    this.cy = 0;
    this.r = 0;
    this.r0 = 0;
  }
  return RingShape2;
}();
var Ring = function(_super) {
  __extends(Ring2, _super);
  function Ring2(opts) {
    return _super.call(this, opts) || this;
  }
  Ring2.prototype.getDefaultShape = function() {
    return new RingShape();
  };
  Ring2.prototype.buildPath = function(ctx, shape) {
    var x2 = shape.cx;
    var y2 = shape.cy;
    var PI22 = Math.PI * 2;
    ctx.moveTo(x2 + shape.r, y2);
    ctx.arc(x2, y2, shape.r, 0, PI22, false);
    ctx.moveTo(x2 + shape.r0, y2);
    ctx.arc(x2, y2, shape.r0, 0, PI22, true);
  };
  return Ring2;
}(Path$1);
Ring.prototype.type = "ring";
var Ring$1 = Ring;
function smoothBezier(points2, smooth, isLoop, constraint) {
  var cps = [];
  var v = [];
  var v1 = [];
  var v2 = [];
  var prevPoint;
  var nextPoint;
  var min3;
  var max3;
  if (constraint) {
    min3 = [Infinity, Infinity];
    max3 = [-Infinity, -Infinity];
    for (var i = 0, len2 = points2.length; i < len2; i++) {
      min$1(min3, min3, points2[i]);
      max$1(max3, max3, points2[i]);
    }
    min$1(min3, min3, constraint[0]);
    max$1(max3, max3, constraint[1]);
  }
  for (var i = 0, len2 = points2.length; i < len2; i++) {
    var point = points2[i];
    if (isLoop) {
      prevPoint = points2[i ? i - 1 : len2 - 1];
      nextPoint = points2[(i + 1) % len2];
    } else {
      if (i === 0 || i === len2 - 1) {
        cps.push(clone$1(points2[i]));
        continue;
      } else {
        prevPoint = points2[i - 1];
        nextPoint = points2[i + 1];
      }
    }
    sub(v, nextPoint, prevPoint);
    scale$1(v, v, smooth);
    var d0 = distance(point, prevPoint);
    var d1 = distance(point, nextPoint);
    var sum = d0 + d1;
    if (sum !== 0) {
      d0 /= sum;
      d1 /= sum;
    }
    scale$1(v1, v, -d0);
    scale$1(v2, v, d1);
    var cp0 = add([], point, v1);
    var cp1 = add([], point, v2);
    if (constraint) {
      max$1(cp0, cp0, min3);
      min$1(cp0, cp0, max3);
      max$1(cp1, cp1, min3);
      min$1(cp1, cp1, max3);
    }
    cps.push(cp0);
    cps.push(cp1);
  }
  if (isLoop) {
    cps.push(cps.shift());
  }
  return cps;
}
function buildPath(ctx, shape, closePath) {
  var smooth = shape.smooth;
  var points2 = shape.points;
  if (points2 && points2.length >= 2) {
    if (smooth) {
      var controlPoints = smoothBezier(points2, smooth, closePath, shape.smoothConstraint);
      ctx.moveTo(points2[0][0], points2[0][1]);
      var len2 = points2.length;
      for (var i = 0; i < (closePath ? len2 : len2 - 1); i++) {
        var cp1 = controlPoints[i * 2];
        var cp2 = controlPoints[i * 2 + 1];
        var p = points2[(i + 1) % len2];
        ctx.bezierCurveTo(cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]);
      }
    } else {
      ctx.moveTo(points2[0][0], points2[0][1]);
      for (var i = 1, l = points2.length; i < l; i++) {
        ctx.lineTo(points2[i][0], points2[i][1]);
      }
    }
    closePath && ctx.closePath();
  }
}
var PolygonShape = function() {
  function PolygonShape2() {
    this.points = null;
    this.smooth = 0;
    this.smoothConstraint = null;
  }
  return PolygonShape2;
}();
var Polygon = function(_super) {
  __extends(Polygon2, _super);
  function Polygon2(opts) {
    return _super.call(this, opts) || this;
  }
  Polygon2.prototype.getDefaultShape = function() {
    return new PolygonShape();
  };
  Polygon2.prototype.buildPath = function(ctx, shape) {
    buildPath(ctx, shape, true);
  };
  return Polygon2;
}(Path$1);
Polygon.prototype.type = "polygon";
var Polygon$1 = Polygon;
var PolylineShape = function() {
  function PolylineShape2() {
    this.points = null;
    this.percent = 1;
    this.smooth = 0;
    this.smoothConstraint = null;
  }
  return PolylineShape2;
}();
var Polyline = function(_super) {
  __extends(Polyline2, _super);
  function Polyline2(opts) {
    return _super.call(this, opts) || this;
  }
  Polyline2.prototype.getDefaultStyle = function() {
    return {
      stroke: "#000",
      fill: null
    };
  };
  Polyline2.prototype.getDefaultShape = function() {
    return new PolylineShape();
  };
  Polyline2.prototype.buildPath = function(ctx, shape) {
    buildPath(ctx, shape, false);
  };
  return Polyline2;
}(Path$1);
Polyline.prototype.type = "polyline";
var Polyline$1 = Polyline;
var subPixelOptimizeOutputShape = {};
var LineShape = function() {
  function LineShape2() {
    this.x1 = 0;
    this.y1 = 0;
    this.x2 = 0;
    this.y2 = 0;
    this.percent = 1;
  }
  return LineShape2;
}();
var Line = function(_super) {
  __extends(Line2, _super);
  function Line2(opts) {
    return _super.call(this, opts) || this;
  }
  Line2.prototype.getDefaultStyle = function() {
    return {
      stroke: "#000",
      fill: null
    };
  };
  Line2.prototype.getDefaultShape = function() {
    return new LineShape();
  };
  Line2.prototype.buildPath = function(ctx, shape) {
    var x1;
    var y1;
    var x2;
    var y2;
    if (this.subPixelOptimize) {
      var optimizedShape = subPixelOptimizeLine$1(subPixelOptimizeOutputShape, shape, this.style);
      x1 = optimizedShape.x1;
      y1 = optimizedShape.y1;
      x2 = optimizedShape.x2;
      y2 = optimizedShape.y2;
    } else {
      x1 = shape.x1;
      y1 = shape.y1;
      x2 = shape.x2;
      y2 = shape.y2;
    }
    var percent = shape.percent;
    if (percent === 0) {
      return;
    }
    ctx.moveTo(x1, y1);
    if (percent < 1) {
      x2 = x1 * (1 - percent) + x2 * percent;
      y2 = y1 * (1 - percent) + y2 * percent;
    }
    ctx.lineTo(x2, y2);
  };
  Line2.prototype.pointAt = function(p) {
    var shape = this.shape;
    return [
      shape.x1 * (1 - p) + shape.x2 * p,
      shape.y1 * (1 - p) + shape.y2 * p
    ];
  };
  return Line2;
}(Path$1);
Line.prototype.type = "line";
var Line$1 = Line;
var out = [];
var BezierCurveShape = function() {
  function BezierCurveShape2() {
    this.x1 = 0;
    this.y1 = 0;
    this.x2 = 0;
    this.y2 = 0;
    this.cpx1 = 0;
    this.cpy1 = 0;
    this.percent = 1;
  }
  return BezierCurveShape2;
}();
function someVectorAt(shape, t, isTangent) {
  var cpx2 = shape.cpx2;
  var cpy2 = shape.cpy2;
  if (cpx2 != null || cpy2 != null) {
    return [
      (isTangent ? cubicDerivativeAt : cubicAt)(shape.x1, shape.cpx1, shape.cpx2, shape.x2, t),
      (isTangent ? cubicDerivativeAt : cubicAt)(shape.y1, shape.cpy1, shape.cpy2, shape.y2, t)
    ];
  } else {
    return [
      (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.x1, shape.cpx1, shape.x2, t),
      (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.y1, shape.cpy1, shape.y2, t)
    ];
  }
}
var BezierCurve = function(_super) {
  __extends(BezierCurve2, _super);
  function BezierCurve2(opts) {
    return _super.call(this, opts) || this;
  }
  BezierCurve2.prototype.getDefaultStyle = function() {
    return {
      stroke: "#000",
      fill: null
    };
  };
  BezierCurve2.prototype.getDefaultShape = function() {
    return new BezierCurveShape();
  };
  BezierCurve2.prototype.buildPath = function(ctx, shape) {
    var x1 = shape.x1;
    var y1 = shape.y1;
    var x2 = shape.x2;
    var y2 = shape.y2;
    var cpx1 = shape.cpx1;
    var cpy1 = shape.cpy1;
    var cpx2 = shape.cpx2;
    var cpy2 = shape.cpy2;
    var percent = shape.percent;
    if (percent === 0) {
      return;
    }
    ctx.moveTo(x1, y1);
    if (cpx2 == null || cpy2 == null) {
      if (percent < 1) {
        quadraticSubdivide(x1, cpx1, x2, percent, out);
        cpx1 = out[1];
        x2 = out[2];
        quadraticSubdivide(y1, cpy1, y2, percent, out);
        cpy1 = out[1];
        y2 = out[2];
      }
      ctx.quadraticCurveTo(cpx1, cpy1, x2, y2);
    } else {
      if (percent < 1) {
        cubicSubdivide(x1, cpx1, cpx2, x2, percent, out);
        cpx1 = out[1];
        cpx2 = out[2];
        x2 = out[3];
        cubicSubdivide(y1, cpy1, cpy2, y2, percent, out);
        cpy1 = out[1];
        cpy2 = out[2];
        y2 = out[3];
      }
      ctx.bezierCurveTo(cpx1, cpy1, cpx2, cpy2, x2, y2);
    }
  };
  BezierCurve2.prototype.pointAt = function(t) {
    return someVectorAt(this.shape, t, false);
  };
  BezierCurve2.prototype.tangentAt = function(t) {
    var p = someVectorAt(this.shape, t, true);
    return normalize(p, p);
  };
  return BezierCurve2;
}(Path$1);
BezierCurve.prototype.type = "bezier-curve";
var BezierCurve$1 = BezierCurve;
var ArcShape = function() {
  function ArcShape2() {
    this.cx = 0;
    this.cy = 0;
    this.r = 0;
    this.startAngle = 0;
    this.endAngle = Math.PI * 2;
    this.clockwise = true;
  }
  return ArcShape2;
}();
var Arc = function(_super) {
  __extends(Arc2, _super);
  function Arc2(opts) {
    return _super.call(this, opts) || this;
  }
  Arc2.prototype.getDefaultStyle = function() {
    return {
      stroke: "#000",
      fill: null
    };
  };
  Arc2.prototype.getDefaultShape = function() {
    return new ArcShape();
  };
  Arc2.prototype.buildPath = function(ctx, shape) {
    var x2 = shape.cx;
    var y2 = shape.cy;
    var r = Math.max(shape.r, 0);
    var startAngle = shape.startAngle;
    var endAngle = shape.endAngle;
    var clockwise = shape.clockwise;
    var unitX = Math.cos(startAngle);
    var unitY = Math.sin(startAngle);
    ctx.moveTo(unitX * r + x2, unitY * r + y2);
    ctx.arc(x2, y2, r, startAngle, endAngle, !clockwise);
  };
  return Arc2;
}(Path$1);
Arc.prototype.type = "arc";
var Arc$1 = Arc;
var CompoundPath = function(_super) {
  __extends(CompoundPath2, _super);
  function CompoundPath2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.type = "compound";
    return _this;
  }
  CompoundPath2.prototype._updatePathDirty = function() {
    var paths = this.shape.paths;
    var dirtyPath = this.shapeChanged();
    for (var i = 0; i < paths.length; i++) {
      dirtyPath = dirtyPath || paths[i].shapeChanged();
    }
    if (dirtyPath) {
      this.dirtyShape();
    }
  };
  CompoundPath2.prototype.beforeBrush = function() {
    this._updatePathDirty();
    var paths = this.shape.paths || [];
    var scale2 = this.getGlobalScale();
    for (var i = 0; i < paths.length; i++) {
      if (!paths[i].path) {
        paths[i].createPathProxy();
      }
      paths[i].path.setScale(scale2[0], scale2[1], paths[i].segmentIgnoreThreshold);
    }
  };
  CompoundPath2.prototype.buildPath = function(ctx, shape) {
    var paths = shape.paths || [];
    for (var i = 0; i < paths.length; i++) {
      paths[i].buildPath(ctx, paths[i].shape, true);
    }
  };
  CompoundPath2.prototype.afterBrush = function() {
    var paths = this.shape.paths || [];
    for (var i = 0; i < paths.length; i++) {
      paths[i].pathUpdated();
    }
  };
  CompoundPath2.prototype.getBoundingRect = function() {
    this._updatePathDirty.call(this);
    return Path$1.prototype.getBoundingRect.call(this);
  };
  return CompoundPath2;
}(Path$1);
var CompoundPath$1 = CompoundPath;
var Gradient = function() {
  function Gradient2(colorStops) {
    this.colorStops = colorStops || [];
  }
  Gradient2.prototype.addColorStop = function(offset, color) {
    this.colorStops.push({
      offset,
      color
    });
  };
  return Gradient2;
}();
var Gradient$1 = Gradient;
var LinearGradient = function(_super) {
  __extends(LinearGradient2, _super);
  function LinearGradient2(x2, y2, x22, y22, colorStops, globalCoord) {
    var _this = _super.call(this, colorStops) || this;
    _this.x = x2 == null ? 0 : x2;
    _this.y = y2 == null ? 0 : y2;
    _this.x2 = x22 == null ? 1 : x22;
    _this.y2 = y22 == null ? 0 : y22;
    _this.type = "linear";
    _this.global = globalCoord || false;
    return _this;
  }
  return LinearGradient2;
}(Gradient$1);
var LinearGradient$1 = LinearGradient;
var RadialGradient = function(_super) {
  __extends(RadialGradient2, _super);
  function RadialGradient2(x2, y2, r, colorStops, globalCoord) {
    var _this = _super.call(this, colorStops) || this;
    _this.x = x2 == null ? 0.5 : x2;
    _this.y = y2 == null ? 0.5 : y2;
    _this.r = r == null ? 0.5 : r;
    _this.type = "radial";
    _this.global = globalCoord || false;
    return _this;
  }
  return RadialGradient2;
}(Gradient$1);
var RadialGradient$1 = RadialGradient;
var extent = [0, 0];
var extent2 = [0, 0];
var minTv = new Point$1();
var maxTv = new Point$1();
var OrientedBoundingRect = function() {
  function OrientedBoundingRect2(rect, transform) {
    this._corners = [];
    this._axes = [];
    this._origin = [0, 0];
    for (var i = 0; i < 4; i++) {
      this._corners[i] = new Point$1();
    }
    for (var i = 0; i < 2; i++) {
      this._axes[i] = new Point$1();
    }
    if (rect) {
      this.fromBoundingRect(rect, transform);
    }
  }
  OrientedBoundingRect2.prototype.fromBoundingRect = function(rect, transform) {
    var corners = this._corners;
    var axes = this._axes;
    var x2 = rect.x;
    var y2 = rect.y;
    var x22 = x2 + rect.width;
    var y22 = y2 + rect.height;
    corners[0].set(x2, y2);
    corners[1].set(x22, y2);
    corners[2].set(x22, y22);
    corners[3].set(x2, y22);
    if (transform) {
      for (var i = 0; i < 4; i++) {
        corners[i].transform(transform);
      }
    }
    Point$1.sub(axes[0], corners[1], corners[0]);
    Point$1.sub(axes[1], corners[3], corners[0]);
    axes[0].normalize();
    axes[1].normalize();
    for (var i = 0; i < 2; i++) {
      this._origin[i] = axes[i].dot(corners[0]);
    }
  };
  OrientedBoundingRect2.prototype.intersect = function(other, mtv) {
    var overlapped = true;
    var noMtv = !mtv;
    minTv.set(Infinity, Infinity);
    maxTv.set(0, 0);
    if (!this._intersectCheckOneSide(this, other, minTv, maxTv, noMtv, 1)) {
      overlapped = false;
      if (noMtv) {
        return overlapped;
      }
    }
    if (!this._intersectCheckOneSide(other, this, minTv, maxTv, noMtv, -1)) {
      overlapped = false;
      if (noMtv) {
        return overlapped;
      }
    }
    if (!noMtv) {
      Point$1.copy(mtv, overlapped ? minTv : maxTv);
    }
    return overlapped;
  };
  OrientedBoundingRect2.prototype._intersectCheckOneSide = function(self2, other, minTv2, maxTv2, noMtv, inverse) {
    var overlapped = true;
    for (var i = 0; i < 2; i++) {
      var axis = this._axes[i];
      this._getProjMinMaxOnAxis(i, self2._corners, extent);
      this._getProjMinMaxOnAxis(i, other._corners, extent2);
      if (extent[1] < extent2[0] || extent[0] > extent2[1]) {
        overlapped = false;
        if (noMtv) {
          return overlapped;
        }
        var dist0 = Math.abs(extent2[0] - extent[1]);
        var dist1 = Math.abs(extent[0] - extent2[1]);
        if (Math.min(dist0, dist1) > maxTv2.len()) {
          if (dist0 < dist1) {
            Point$1.scale(maxTv2, axis, -dist0 * inverse);
          } else {
            Point$1.scale(maxTv2, axis, dist1 * inverse);
          }
        }
      } else if (minTv2) {
        var dist0 = Math.abs(extent2[0] - extent[1]);
        var dist1 = Math.abs(extent[0] - extent2[1]);
        if (Math.min(dist0, dist1) < minTv2.len()) {
          if (dist0 < dist1) {
            Point$1.scale(minTv2, axis, dist0 * inverse);
          } else {
            Point$1.scale(minTv2, axis, -dist1 * inverse);
          }
        }
      }
    }
    return overlapped;
  };
  OrientedBoundingRect2.prototype._getProjMinMaxOnAxis = function(dim, corners, out2) {
    var axis = this._axes[dim];
    var origin = this._origin;
    var proj = corners[0].dot(axis) + origin[dim];
    var min3 = proj;
    var max3 = proj;
    for (var i = 1; i < corners.length; i++) {
      var proj_1 = corners[i].dot(axis) + origin[dim];
      min3 = Math.min(proj_1, min3);
      max3 = Math.max(proj_1, max3);
    }
    out2[0] = min3;
    out2[1] = max3;
  };
  return OrientedBoundingRect2;
}();
var OrientedBoundingRect$1 = OrientedBoundingRect;
var m = [];
var IncrementalDisplayable = function(_super) {
  __extends(IncrementalDisplayable2, _super);
  function IncrementalDisplayable2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.notClear = true;
    _this.incremental = true;
    _this._displayables = [];
    _this._temporaryDisplayables = [];
    _this._cursor = 0;
    return _this;
  }
  IncrementalDisplayable2.prototype.traverse = function(cb, context) {
    cb.call(context, this);
  };
  IncrementalDisplayable2.prototype.useStyle = function() {
    this.style = {};
  };
  IncrementalDisplayable2.prototype.getCursor = function() {
    return this._cursor;
  };
  IncrementalDisplayable2.prototype.innerAfterBrush = function() {
    this._cursor = this._displayables.length;
  };
  IncrementalDisplayable2.prototype.clearDisplaybles = function() {
    this._displayables = [];
    this._temporaryDisplayables = [];
    this._cursor = 0;
    this.markRedraw();
    this.notClear = false;
  };
  IncrementalDisplayable2.prototype.clearTemporalDisplayables = function() {
    this._temporaryDisplayables = [];
  };
  IncrementalDisplayable2.prototype.addDisplayable = function(displayable, notPersistent) {
    if (notPersistent) {
      this._temporaryDisplayables.push(displayable);
    } else {
      this._displayables.push(displayable);
    }
    this.markRedraw();
  };
  IncrementalDisplayable2.prototype.addDisplayables = function(displayables, notPersistent) {
    notPersistent = notPersistent || false;
    for (var i = 0; i < displayables.length; i++) {
      this.addDisplayable(displayables[i], notPersistent);
    }
  };
  IncrementalDisplayable2.prototype.getDisplayables = function() {
    return this._displayables;
  };
  IncrementalDisplayable2.prototype.getTemporalDisplayables = function() {
    return this._temporaryDisplayables;
  };
  IncrementalDisplayable2.prototype.eachPendingDisplayable = function(cb) {
    for (var i = this._cursor; i < this._displayables.length; i++) {
      cb && cb(this._displayables[i]);
    }
    for (var i = 0; i < this._temporaryDisplayables.length; i++) {
      cb && cb(this._temporaryDisplayables[i]);
    }
  };
  IncrementalDisplayable2.prototype.update = function() {
    this.updateTransform();
    for (var i = this._cursor; i < this._displayables.length; i++) {
      var displayable = this._displayables[i];
      displayable.parent = this;
      displayable.update();
      displayable.parent = null;
    }
    for (var i = 0; i < this._temporaryDisplayables.length; i++) {
      var displayable = this._temporaryDisplayables[i];
      displayable.parent = this;
      displayable.update();
      displayable.parent = null;
    }
  };
  IncrementalDisplayable2.prototype.getBoundingRect = function() {
    if (!this._rect) {
      var rect = new BoundingRect$1(Infinity, Infinity, -Infinity, -Infinity);
      for (var i = 0; i < this._displayables.length; i++) {
        var displayable = this._displayables[i];
        var childRect = displayable.getBoundingRect().clone();
        if (displayable.needLocalTransform()) {
          childRect.applyTransform(displayable.getLocalTransform(m));
        }
        rect.union(childRect);
      }
      this._rect = rect;
    }
    return this._rect;
  };
  IncrementalDisplayable2.prototype.contain = function(x2, y2) {
    var localPos = this.transformCoordToLocal(x2, y2);
    var rect = this.getBoundingRect();
    if (rect.contain(localPos[0], localPos[1])) {
      for (var i = 0; i < this._displayables.length; i++) {
        var displayable = this._displayables[i];
        if (displayable.contain(x2, y2)) {
          return true;
        }
      }
    }
    return false;
  };
  return IncrementalDisplayable2;
}(Displayable$1);
var IncrementalDisplayable$1 = IncrementalDisplayable;
var transitionStore = makeInner();
function getAnimationConfig(animationType, animatableModel, dataIndex, extraOpts, extraDelayParams) {
  var animationPayload;
  if (animatableModel && animatableModel.ecModel) {
    var updatePayload = animatableModel.ecModel.getUpdatePayload();
    animationPayload = updatePayload && updatePayload.animation;
  }
  var animationEnabled = animatableModel && animatableModel.isAnimationEnabled();
  var isUpdate = animationType === "update";
  if (animationEnabled) {
    var duration = void 0;
    var easing = void 0;
    var delay = void 0;
    if (extraOpts) {
      duration = retrieve2(extraOpts.duration, 200);
      easing = retrieve2(extraOpts.easing, "cubicOut");
      delay = 0;
    } else {
      duration = animatableModel.getShallow(isUpdate ? "animationDurationUpdate" : "animationDuration");
      easing = animatableModel.getShallow(isUpdate ? "animationEasingUpdate" : "animationEasing");
      delay = animatableModel.getShallow(isUpdate ? "animationDelayUpdate" : "animationDelay");
    }
    if (animationPayload) {
      animationPayload.duration != null && (duration = animationPayload.duration);
      animationPayload.easing != null && (easing = animationPayload.easing);
      animationPayload.delay != null && (delay = animationPayload.delay);
    }
    if (isFunction(delay)) {
      delay = delay(dataIndex, extraDelayParams);
    }
    if (isFunction(duration)) {
      duration = duration(dataIndex);
    }
    var config = {
      duration: duration || 0,
      delay,
      easing
    };
    return config;
  } else {
    return null;
  }
}
function animateOrSetProps(animationType, el, props, animatableModel, dataIndex, cb, during) {
  var isFrom = false;
  var removeOpt;
  if (isFunction(dataIndex)) {
    during = cb;
    cb = dataIndex;
    dataIndex = null;
  } else if (isObject$2(dataIndex)) {
    cb = dataIndex.cb;
    during = dataIndex.during;
    isFrom = dataIndex.isFrom;
    removeOpt = dataIndex.removeOpt;
    dataIndex = dataIndex.dataIndex;
  }
  var isRemove = animationType === "leave";
  if (!isRemove) {
    el.stopAnimation("leave");
  }
  var animationConfig = getAnimationConfig(animationType, animatableModel, dataIndex, isRemove ? removeOpt || {} : null, animatableModel && animatableModel.getAnimationDelayParams ? animatableModel.getAnimationDelayParams(el, dataIndex) : null);
  if (animationConfig && animationConfig.duration > 0) {
    var duration = animationConfig.duration;
    var animationDelay = animationConfig.delay;
    var animationEasing = animationConfig.easing;
    var animateConfig = {
      duration,
      delay: animationDelay || 0,
      easing: animationEasing,
      done: cb,
      force: !!cb || !!during,
      setToFinal: !isRemove,
      scope: animationType,
      during
    };
    isFrom ? el.animateFrom(props, animateConfig) : el.animateTo(props, animateConfig);
  } else {
    el.stopAnimation();
    !isFrom && el.attr(props);
    during && during(1);
    cb && cb();
  }
}
function updateProps$1(el, props, animatableModel, dataIndex, cb, during) {
  animateOrSetProps("update", el, props, animatableModel, dataIndex, cb, during);
}
function initProps(el, props, animatableModel, dataIndex, cb, during) {
  animateOrSetProps("enter", el, props, animatableModel, dataIndex, cb, during);
}
function isElementRemoved(el) {
  if (!el.__zr) {
    return true;
  }
  for (var i = 0; i < el.animators.length; i++) {
    var animator = el.animators[i];
    if (animator.scope === "leave") {
      return true;
    }
  }
  return false;
}
function removeElement(el, props, animatableModel, dataIndex, cb, during) {
  if (isElementRemoved(el)) {
    return;
  }
  animateOrSetProps("leave", el, props, animatableModel, dataIndex, cb, during);
}
function fadeOutDisplayable(el, animatableModel, dataIndex, done) {
  el.removeTextContent();
  el.removeTextGuideLine();
  removeElement(el, {
    style: {
      opacity: 0
    }
  }, animatableModel, dataIndex, done);
}
function removeElementWithFadeOut(el, animatableModel, dataIndex) {
  function doRemove() {
    el.parent && el.parent.remove(el);
  }
  if (!el.isGroup) {
    fadeOutDisplayable(el, animatableModel, dataIndex, doRemove);
  } else {
    el.traverse(function(disp) {
      if (!disp.isGroup) {
        fadeOutDisplayable(disp, animatableModel, dataIndex, doRemove);
      }
    });
  }
}
function saveOldStyle(el) {
  transitionStore(el).oldStyle = el.style;
}
var mathMax = Math.max;
var mathMin = Math.min;
var _customShapeMap = {};
function extendShape(opts) {
  return Path$1.extend(opts);
}
var extendPathFromString = extendFromString;
function extendPath(pathData, opts) {
  return extendPathFromString(pathData, opts);
}
function registerShape(name, ShapeClass) {
  _customShapeMap[name] = ShapeClass;
}
function getShapeClass(name) {
  if (_customShapeMap.hasOwnProperty(name)) {
    return _customShapeMap[name];
  }
}
function makePath(pathData, opts, rect, layout2) {
  var path = createFromString(pathData, opts);
  if (rect) {
    if (layout2 === "center") {
      rect = centerGraphic(rect, path.getBoundingRect());
    }
    resizePath(path, rect);
  }
  return path;
}
function makeImage(imageUrl, rect, layout2) {
  var zrImg = new ZRImage$1({
    style: {
      image: imageUrl,
      x: rect.x,
      y: rect.y,
      width: rect.width,
      height: rect.height
    },
    onload: function(img) {
      if (layout2 === "center") {
        var boundingRect = {
          width: img.width,
          height: img.height
        };
        zrImg.setStyle(centerGraphic(rect, boundingRect));
      }
    }
  });
  return zrImg;
}
function centerGraphic(rect, boundingRect) {
  var aspect = boundingRect.width / boundingRect.height;
  var width = rect.height * aspect;
  var height;
  if (width <= rect.width) {
    height = rect.height;
  } else {
    width = rect.width;
    height = width / aspect;
  }
  var cx = rect.x + rect.width / 2;
  var cy = rect.y + rect.height / 2;
  return {
    x: cx - width / 2,
    y: cy - height / 2,
    width,
    height
  };
}
var mergePath = mergePath$1;
function resizePath(path, rect) {
  if (!path.applyTransform) {
    return;
  }
  var pathRect = path.getBoundingRect();
  var m2 = pathRect.calculateTransform(rect);
  path.applyTransform(m2);
}
function subPixelOptimizeLine(shape, lineWidth) {
  subPixelOptimizeLine$1(shape, shape, {
    lineWidth
  });
  return shape;
}
function subPixelOptimizeRect(param) {
  subPixelOptimizeRect$1(param.shape, param.shape, param.style);
  return param;
}
var subPixelOptimize = subPixelOptimize$1;
function getTransform(target, ancestor) {
  var mat = identity([]);
  while (target && target !== ancestor) {
    mul(mat, target.getLocalTransform(), mat);
    target = target.parent;
  }
  return mat;
}
function applyTransform(target, transform, invert$1) {
  if (transform && !isArrayLike(transform)) {
    transform = Transformable.getLocalTransform(transform);
  }
  if (invert$1) {
    transform = invert([], transform);
  }
  return applyTransform$1([], target, transform);
}
function transformDirection(direction, transform, invert2) {
  var hBase = transform[4] === 0 || transform[5] === 0 || transform[0] === 0 ? 1 : Math.abs(2 * transform[4] / transform[0]);
  var vBase = transform[4] === 0 || transform[5] === 0 || transform[2] === 0 ? 1 : Math.abs(2 * transform[4] / transform[2]);
  var vertex = [direction === "left" ? -hBase : direction === "right" ? hBase : 0, direction === "top" ? -vBase : direction === "bottom" ? vBase : 0];
  vertex = applyTransform(vertex, transform, invert2);
  return Math.abs(vertex[0]) > Math.abs(vertex[1]) ? vertex[0] > 0 ? "right" : "left" : vertex[1] > 0 ? "bottom" : "top";
}
function isNotGroup(el) {
  return !el.isGroup;
}
function isPath(el) {
  return el.shape != null;
}
function groupTransition(g1, g2, animatableModel) {
  if (!g1 || !g2) {
    return;
  }
  function getElMap(g) {
    var elMap = {};
    g.traverse(function(el) {
      if (isNotGroup(el) && el.anid) {
        elMap[el.anid] = el;
      }
    });
    return elMap;
  }
  function getAnimatableProps(el) {
    var obj = {
      x: el.x,
      y: el.y,
      rotation: el.rotation
    };
    if (isPath(el)) {
      obj.shape = extend({}, el.shape);
    }
    return obj;
  }
  var elMap1 = getElMap(g1);
  g2.traverse(function(el) {
    if (isNotGroup(el) && el.anid) {
      var oldEl = elMap1[el.anid];
      if (oldEl) {
        var newProp = getAnimatableProps(el);
        el.attr(getAnimatableProps(oldEl));
        updateProps$1(el, newProp, animatableModel, getECData(el).dataIndex);
      }
    }
  });
}
function clipPointsByRect(points2, rect) {
  return map$1(points2, function(point) {
    var x2 = point[0];
    x2 = mathMax(x2, rect.x);
    x2 = mathMin(x2, rect.x + rect.width);
    var y2 = point[1];
    y2 = mathMax(y2, rect.y);
    y2 = mathMin(y2, rect.y + rect.height);
    return [x2, y2];
  });
}
function clipRectByRect(targetRect, rect) {
  var x2 = mathMax(targetRect.x, rect.x);
  var x22 = mathMin(targetRect.x + targetRect.width, rect.x + rect.width);
  var y2 = mathMax(targetRect.y, rect.y);
  var y22 = mathMin(targetRect.y + targetRect.height, rect.y + rect.height);
  if (x22 >= x2 && y22 >= y2) {
    return {
      x: x2,
      y: y2,
      width: x22 - x2,
      height: y22 - y2
    };
  }
}
function createIcon(iconStr, opt, rect) {
  var innerOpts = extend({
    rectHover: true
  }, opt);
  var style2 = innerOpts.style = {
    strokeNoScale: true
  };
  rect = rect || {
    x: -1,
    y: -1,
    width: 2,
    height: 2
  };
  if (iconStr) {
    return iconStr.indexOf("image://") === 0 ? (style2.image = iconStr.slice(8), defaults(style2, rect), new ZRImage$1(innerOpts)) : makePath(iconStr.replace("path://", ""), innerOpts, rect, "center");
  }
}
function linePolygonIntersect(a1x, a1y, a2x, a2y, points2) {
  for (var i = 0, p2 = points2[points2.length - 1]; i < points2.length; i++) {
    var p = points2[i];
    if (lineLineIntersect(a1x, a1y, a2x, a2y, p[0], p[1], p2[0], p2[1])) {
      return true;
    }
    p2 = p;
  }
}
function lineLineIntersect(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y) {
  var mx = a2x - a1x;
  var my = a2y - a1y;
  var nx = b2x - b1x;
  var ny = b2y - b1y;
  var nmCrossProduct = crossProduct2d(nx, ny, mx, my);
  if (nearZero(nmCrossProduct)) {
    return false;
  }
  var b1a1x = a1x - b1x;
  var b1a1y = a1y - b1y;
  var q = crossProduct2d(b1a1x, b1a1y, mx, my) / nmCrossProduct;
  if (q < 0 || q > 1) {
    return false;
  }
  var p = crossProduct2d(b1a1x, b1a1y, nx, ny) / nmCrossProduct;
  if (p < 0 || p > 1) {
    return false;
  }
  return true;
}
function crossProduct2d(x1, y1, x2, y2) {
  return x1 * y2 - x2 * y1;
}
function nearZero(val) {
  return val <= 1e-6 && val >= -1e-6;
}
function setTooltipConfig(opt) {
  var itemTooltipOption = opt.itemTooltipOption;
  var componentModel = opt.componentModel;
  var itemName = opt.itemName;
  var itemTooltipOptionObj = isString(itemTooltipOption) ? {
    formatter: itemTooltipOption
  } : itemTooltipOption;
  var mainType = componentModel.mainType;
  var componentIndex = componentModel.componentIndex;
  var formatterParams = {
    componentType: mainType,
    name: itemName,
    $vars: ["name"]
  };
  formatterParams[mainType + "Index"] = componentIndex;
  var formatterParamsExtra = opt.formatterParamsExtra;
  if (formatterParamsExtra) {
    each$4(keys(formatterParamsExtra), function(key) {
      if (!hasOwn(formatterParams, key)) {
        formatterParams[key] = formatterParamsExtra[key];
        formatterParams.$vars.push(key);
      }
    });
  }
  var ecData = getECData(opt.el);
  ecData.componentMainType = mainType;
  ecData.componentIndex = componentIndex;
  ecData.tooltipConfig = {
    name: itemName,
    option: defaults({
      content: itemName,
      formatterParams
    }, itemTooltipOptionObj)
  };
}
function traverseElement(el, cb) {
  var stopped;
  if (el.isGroup) {
    stopped = cb(el);
  }
  if (!stopped) {
    el.traverse(cb);
  }
}
function traverseElements(els, cb) {
  if (els) {
    if (isArray(els)) {
      for (var i = 0; i < els.length; i++) {
        traverseElement(els[i], cb);
      }
    } else {
      traverseElement(els, cb);
    }
  }
}
registerShape("circle", Circle$1);
registerShape("ellipse", Ellipse$1);
registerShape("sector", Sector$1);
registerShape("ring", Ring$1);
registerShape("polygon", Polygon$1);
registerShape("polyline", Polyline$1);
registerShape("rect", Rect$1);
registerShape("line", Line$1);
registerShape("bezierCurve", BezierCurve$1);
registerShape("arc", Arc$1);
var graphic = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  updateProps: updateProps$1,
  initProps,
  removeElement,
  removeElementWithFadeOut,
  isElementRemoved,
  extendShape,
  extendPath,
  registerShape,
  getShapeClass,
  makePath,
  makeImage,
  mergePath,
  resizePath,
  subPixelOptimizeLine,
  subPixelOptimizeRect,
  subPixelOptimize,
  getTransform,
  applyTransform,
  transformDirection,
  groupTransition,
  clipPointsByRect,
  clipRectByRect,
  createIcon,
  linePolygonIntersect,
  lineLineIntersect,
  setTooltipConfig,
  traverseElements,
  Group: Group$3,
  Image: ZRImage$1,
  Text: ZRText$1,
  Circle: Circle$1,
  Ellipse: Ellipse$1,
  Sector: Sector$1,
  Ring: Ring$1,
  Polygon: Polygon$1,
  Polyline: Polyline$1,
  Rect: Rect$1,
  Line: Line$1,
  BezierCurve: BezierCurve$1,
  Arc: Arc$1,
  IncrementalDisplayable: IncrementalDisplayable$1,
  CompoundPath: CompoundPath$1,
  LinearGradient: LinearGradient$1,
  RadialGradient: RadialGradient$1,
  BoundingRect: BoundingRect$1,
  OrientedBoundingRect: OrientedBoundingRect$1,
  Point: Point$1,
  Path: Path$1
}, Symbol.toStringTag, { value: "Module" }));
var EMPTY_OBJ = {};
function setLabelText(label, labelTexts) {
  for (var i = 0; i < SPECIAL_STATES.length; i++) {
    var stateName = SPECIAL_STATES[i];
    var text = labelTexts[stateName];
    var state = label.ensureState(stateName);
    state.style = state.style || {};
    state.style.text = text;
  }
  var oldStates = label.currentStates.slice();
  label.clearStates(true);
  label.setStyle({
    text: labelTexts.normal
  });
  label.useStates(oldStates, true);
}
function getLabelText(opt, stateModels, interpolatedValue) {
  var labelFetcher = opt.labelFetcher;
  var labelDataIndex = opt.labelDataIndex;
  var labelDimIndex = opt.labelDimIndex;
  var normalModel = stateModels.normal;
  var baseText;
  if (labelFetcher) {
    baseText = labelFetcher.getFormattedLabel(labelDataIndex, "normal", null, labelDimIndex, normalModel && normalModel.get("formatter"), interpolatedValue != null ? {
      interpolatedValue
    } : null);
  }
  if (baseText == null) {
    baseText = isFunction(opt.defaultText) ? opt.defaultText(labelDataIndex, opt, interpolatedValue) : opt.defaultText;
  }
  var statesText = {
    normal: baseText
  };
  for (var i = 0; i < SPECIAL_STATES.length; i++) {
    var stateName = SPECIAL_STATES[i];
    var stateModel = stateModels[stateName];
    statesText[stateName] = retrieve2(labelFetcher ? labelFetcher.getFormattedLabel(labelDataIndex, stateName, null, labelDimIndex, stateModel && stateModel.get("formatter")) : null, baseText);
  }
  return statesText;
}
function setLabelStyle(targetEl, labelStatesModels, opt, stateSpecified) {
  opt = opt || EMPTY_OBJ;
  var isSetOnText = targetEl instanceof ZRText$1;
  var needsCreateText = false;
  for (var i = 0; i < DISPLAY_STATES.length; i++) {
    var stateModel = labelStatesModels[DISPLAY_STATES[i]];
    if (stateModel && stateModel.getShallow("show")) {
      needsCreateText = true;
      break;
    }
  }
  var textContent = isSetOnText ? targetEl : targetEl.getTextContent();
  if (needsCreateText) {
    if (!isSetOnText) {
      if (!textContent) {
        textContent = new ZRText$1();
        targetEl.setTextContent(textContent);
      }
      if (targetEl.stateProxy) {
        textContent.stateProxy = targetEl.stateProxy;
      }
    }
    var labelStatesTexts = getLabelText(opt, labelStatesModels);
    var normalModel = labelStatesModels.normal;
    var showNormal = !!normalModel.getShallow("show");
    var normalStyle = createTextStyle(normalModel, stateSpecified && stateSpecified.normal, opt, false, !isSetOnText);
    normalStyle.text = labelStatesTexts.normal;
    if (!isSetOnText) {
      targetEl.setTextConfig(createTextConfig(normalModel, opt, false));
    }
    for (var i = 0; i < SPECIAL_STATES.length; i++) {
      var stateName = SPECIAL_STATES[i];
      var stateModel = labelStatesModels[stateName];
      if (stateModel) {
        var stateObj = textContent.ensureState(stateName);
        var stateShow = !!retrieve2(stateModel.getShallow("show"), showNormal);
        if (stateShow !== showNormal) {
          stateObj.ignore = !stateShow;
        }
        stateObj.style = createTextStyle(stateModel, stateSpecified && stateSpecified[stateName], opt, true, !isSetOnText);
        stateObj.style.text = labelStatesTexts[stateName];
        if (!isSetOnText) {
          var targetElEmphasisState = targetEl.ensureState(stateName);
          targetElEmphasisState.textConfig = createTextConfig(stateModel, opt, true);
        }
      }
    }
    textContent.silent = !!normalModel.getShallow("silent");
    if (textContent.style.x != null) {
      normalStyle.x = textContent.style.x;
    }
    if (textContent.style.y != null) {
      normalStyle.y = textContent.style.y;
    }
    textContent.ignore = !showNormal;
    textContent.useStyle(normalStyle);
    textContent.dirty();
    if (opt.enableTextSetter) {
      labelInner(textContent).setLabelText = function(interpolatedValue) {
        var labelStatesTexts2 = getLabelText(opt, labelStatesModels, interpolatedValue);
        setLabelText(textContent, labelStatesTexts2);
      };
    }
  } else if (textContent) {
    textContent.ignore = true;
  }
  targetEl.dirty();
}
function getLabelStatesModels(itemModel, labelName) {
  labelName = labelName || "label";
  var statesModels = {
    normal: itemModel.getModel(labelName)
  };
  for (var i = 0; i < SPECIAL_STATES.length; i++) {
    var stateName = SPECIAL_STATES[i];
    statesModels[stateName] = itemModel.getModel([stateName, labelName]);
  }
  return statesModels;
}
function createTextStyle(textStyleModel, specifiedTextStyle, opt, isNotNormal, isAttached) {
  var textStyle = {};
  setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached);
  specifiedTextStyle && extend(textStyle, specifiedTextStyle);
  return textStyle;
}
function createTextConfig(textStyleModel, opt, isNotNormal) {
  opt = opt || {};
  var textConfig = {};
  var labelPosition;
  var labelRotate = textStyleModel.getShallow("rotate");
  var labelDistance = retrieve2(textStyleModel.getShallow("distance"), isNotNormal ? null : 5);
  var labelOffset = textStyleModel.getShallow("offset");
  labelPosition = textStyleModel.getShallow("position") || (isNotNormal ? null : "inside");
  labelPosition === "outside" && (labelPosition = opt.defaultOutsidePosition || "top");
  if (labelPosition != null) {
    textConfig.position = labelPosition;
  }
  if (labelOffset != null) {
    textConfig.offset = labelOffset;
  }
  if (labelRotate != null) {
    labelRotate *= Math.PI / 180;
    textConfig.rotation = labelRotate;
  }
  if (labelDistance != null) {
    textConfig.distance = labelDistance;
  }
  textConfig.outsideFill = textStyleModel.get("color") === "inherit" ? opt.inheritColor || null : "auto";
  return textConfig;
}
function setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached) {
  opt = opt || EMPTY_OBJ;
  var ecModel = textStyleModel.ecModel;
  var globalTextStyle = ecModel && ecModel.option.textStyle;
  var richItemNames = getRichItemNames(textStyleModel);
  var richResult;
  if (richItemNames) {
    richResult = {};
    for (var name_1 in richItemNames) {
      if (richItemNames.hasOwnProperty(name_1)) {
        var richTextStyle = textStyleModel.getModel(["rich", name_1]);
        setTokenTextStyle(richResult[name_1] = {}, richTextStyle, globalTextStyle, opt, isNotNormal, isAttached, false, true);
      }
    }
  }
  if (richResult) {
    textStyle.rich = richResult;
  }
  var overflow = textStyleModel.get("overflow");
  if (overflow) {
    textStyle.overflow = overflow;
  }
  var margin = textStyleModel.get("minMargin");
  if (margin != null) {
    textStyle.margin = margin;
  }
  setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, true, false);
}
function getRichItemNames(textStyleModel) {
  var richItemNameMap;
  while (textStyleModel && textStyleModel !== textStyleModel.ecModel) {
    var rich = (textStyleModel.option || EMPTY_OBJ).rich;
    if (rich) {
      richItemNameMap = richItemNameMap || {};
      var richKeys = keys(rich);
      for (var i = 0; i < richKeys.length; i++) {
        var richKey = richKeys[i];
        richItemNameMap[richKey] = 1;
      }
    }
    textStyleModel = textStyleModel.parentModel;
  }
  return richItemNameMap;
}
var TEXT_PROPS_WITH_GLOBAL = ["fontStyle", "fontWeight", "fontSize", "fontFamily", "textShadowColor", "textShadowBlur", "textShadowOffsetX", "textShadowOffsetY"];
var TEXT_PROPS_SELF = ["align", "lineHeight", "width", "height", "tag", "verticalAlign", "ellipsis"];
var TEXT_PROPS_BOX = ["padding", "borderWidth", "borderRadius", "borderDashOffset", "backgroundColor", "borderColor", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY"];
function setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, isBlock, inRich) {
  globalTextStyle = !isNotNormal && globalTextStyle || EMPTY_OBJ;
  var inheritColor = opt && opt.inheritColor;
  var fillColor = textStyleModel.getShallow("color");
  var strokeColor = textStyleModel.getShallow("textBorderColor");
  var opacity = retrieve2(textStyleModel.getShallow("opacity"), globalTextStyle.opacity);
  if (fillColor === "inherit" || fillColor === "auto") {
    if (inheritColor) {
      fillColor = inheritColor;
    } else {
      fillColor = null;
    }
  }
  if (strokeColor === "inherit" || strokeColor === "auto") {
    if (inheritColor) {
      strokeColor = inheritColor;
    } else {
      strokeColor = null;
    }
  }
  if (!isAttached) {
    fillColor = fillColor || globalTextStyle.color;
    strokeColor = strokeColor || globalTextStyle.textBorderColor;
  }
  if (fillColor != null) {
    textStyle.fill = fillColor;
  }
  if (strokeColor != null) {
    textStyle.stroke = strokeColor;
  }
  var textBorderWidth = retrieve2(textStyleModel.getShallow("textBorderWidth"), globalTextStyle.textBorderWidth);
  if (textBorderWidth != null) {
    textStyle.lineWidth = textBorderWidth;
  }
  var textBorderType = retrieve2(textStyleModel.getShallow("textBorderType"), globalTextStyle.textBorderType);
  if (textBorderType != null) {
    textStyle.lineDash = textBorderType;
  }
  var textBorderDashOffset = retrieve2(textStyleModel.getShallow("textBorderDashOffset"), globalTextStyle.textBorderDashOffset);
  if (textBorderDashOffset != null) {
    textStyle.lineDashOffset = textBorderDashOffset;
  }
  if (!isNotNormal && opacity == null && !inRich) {
    opacity = opt && opt.defaultOpacity;
  }
  if (opacity != null) {
    textStyle.opacity = opacity;
  }
  if (!isNotNormal && !isAttached) {
    if (textStyle.fill == null && opt.inheritColor) {
      textStyle.fill = opt.inheritColor;
    }
  }
  for (var i = 0; i < TEXT_PROPS_WITH_GLOBAL.length; i++) {
    var key = TEXT_PROPS_WITH_GLOBAL[i];
    var val = retrieve2(textStyleModel.getShallow(key), globalTextStyle[key]);
    if (val != null) {
      textStyle[key] = val;
    }
  }
  for (var i = 0; i < TEXT_PROPS_SELF.length; i++) {
    var key = TEXT_PROPS_SELF[i];
    var val = textStyleModel.getShallow(key);
    if (val != null) {
      textStyle[key] = val;
    }
  }
  if (textStyle.verticalAlign == null) {
    var baseline = textStyleModel.getShallow("baseline");
    if (baseline != null) {
      textStyle.verticalAlign = baseline;
    }
  }
  if (!isBlock || !opt.disableBox) {
    for (var i = 0; i < TEXT_PROPS_BOX.length; i++) {
      var key = TEXT_PROPS_BOX[i];
      var val = textStyleModel.getShallow(key);
      if (val != null) {
        textStyle[key] = val;
      }
    }
    var borderType = textStyleModel.getShallow("borderType");
    if (borderType != null) {
      textStyle.borderDash = borderType;
    }
    if ((textStyle.backgroundColor === "auto" || textStyle.backgroundColor === "inherit") && inheritColor) {
      textStyle.backgroundColor = inheritColor;
    }
    if ((textStyle.borderColor === "auto" || textStyle.borderColor === "inherit") && inheritColor) {
      textStyle.borderColor = inheritColor;
    }
  }
}
function getFont(opt, ecModel) {
  var gTextStyleModel = ecModel && ecModel.getModel("textStyle");
  return trim([
    opt.fontStyle || gTextStyleModel && gTextStyleModel.getShallow("fontStyle") || "",
    opt.fontWeight || gTextStyleModel && gTextStyleModel.getShallow("fontWeight") || "",
    (opt.fontSize || gTextStyleModel && gTextStyleModel.getShallow("fontSize") || 12) + "px",
    opt.fontFamily || gTextStyleModel && gTextStyleModel.getShallow("fontFamily") || "sans-serif"
  ].join(" "));
}
var labelInner = makeInner();
var PATH_COLOR = ["textStyle", "color"];
var textStyleParams = ["fontStyle", "fontWeight", "fontSize", "fontFamily", "padding", "lineHeight", "rich", "width", "height", "overflow"];
var tmpText = new ZRText$1();
var TextStyleMixin = function() {
  function TextStyleMixin2() {
  }
  TextStyleMixin2.prototype.getTextColor = function(isEmphasis) {
    var ecModel = this.ecModel;
    return this.getShallow("color") || (!isEmphasis && ecModel ? ecModel.get(PATH_COLOR) : null);
  };
  TextStyleMixin2.prototype.getFont = function() {
    return getFont({
      fontStyle: this.getShallow("fontStyle"),
      fontWeight: this.getShallow("fontWeight"),
      fontSize: this.getShallow("fontSize"),
      fontFamily: this.getShallow("fontFamily")
    }, this.ecModel);
  };
  TextStyleMixin2.prototype.getTextRect = function(text) {
    var style2 = {
      text,
      verticalAlign: this.getShallow("verticalAlign") || this.getShallow("baseline")
    };
    for (var i = 0; i < textStyleParams.length; i++) {
      style2[textStyleParams[i]] = this.getShallow(textStyleParams[i]);
    }
    tmpText.useStyle(style2);
    tmpText.update();
    return tmpText.getBoundingRect();
  };
  return TextStyleMixin2;
}();
var TextStyleMixin$1 = TextStyleMixin;
var LINE_STYLE_KEY_MAP = [
  ["lineWidth", "width"],
  ["stroke", "color"],
  ["opacity"],
  ["shadowBlur"],
  ["shadowOffsetX"],
  ["shadowOffsetY"],
  ["shadowColor"],
  ["lineDash", "type"],
  ["lineDashOffset", "dashOffset"],
  ["lineCap", "cap"],
  ["lineJoin", "join"],
  ["miterLimit"]
];
var getLineStyle = makeStyleMapper(LINE_STYLE_KEY_MAP);
var LineStyleMixin = function() {
  function LineStyleMixin2() {
  }
  LineStyleMixin2.prototype.getLineStyle = function(excludes) {
    return getLineStyle(this, excludes);
  };
  return LineStyleMixin2;
}();
var ITEM_STYLE_KEY_MAP = [
  ["fill", "color"],
  ["stroke", "borderColor"],
  ["lineWidth", "borderWidth"],
  ["opacity"],
  ["shadowBlur"],
  ["shadowOffsetX"],
  ["shadowOffsetY"],
  ["shadowColor"],
  ["lineDash", "borderType"],
  ["lineDashOffset", "borderDashOffset"],
  ["lineCap", "borderCap"],
  ["lineJoin", "borderJoin"],
  ["miterLimit", "borderMiterLimit"]
];
var getItemStyle = makeStyleMapper(ITEM_STYLE_KEY_MAP);
var ItemStyleMixin = function() {
  function ItemStyleMixin2() {
  }
  ItemStyleMixin2.prototype.getItemStyle = function(excludes, includes) {
    return getItemStyle(this, excludes, includes);
  };
  return ItemStyleMixin2;
}();
var Model = function() {
  function Model2(option, parentModel, ecModel) {
    this.parentModel = parentModel;
    this.ecModel = ecModel;
    this.option = option;
  }
  Model2.prototype.init = function(option, parentModel, ecModel) {
  };
  Model2.prototype.mergeOption = function(option, ecModel) {
    merge(this.option, option, true);
  };
  Model2.prototype.get = function(path, ignoreParent) {
    if (path == null) {
      return this.option;
    }
    return this._doGet(this.parsePath(path), !ignoreParent && this.parentModel);
  };
  Model2.prototype.getShallow = function(key, ignoreParent) {
    var option = this.option;
    var val = option == null ? option : option[key];
    if (val == null && !ignoreParent) {
      var parentModel = this.parentModel;
      if (parentModel) {
        val = parentModel.getShallow(key);
      }
    }
    return val;
  };
  Model2.prototype.getModel = function(path, parentModel) {
    var hasPath = path != null;
    var pathFinal = hasPath ? this.parsePath(path) : null;
    var obj = hasPath ? this._doGet(pathFinal) : this.option;
    parentModel = parentModel || this.parentModel && this.parentModel.getModel(this.resolveParentPath(pathFinal));
    return new Model2(obj, parentModel, this.ecModel);
  };
  Model2.prototype.isEmpty = function() {
    return this.option == null;
  };
  Model2.prototype.restoreData = function() {
  };
  Model2.prototype.clone = function() {
    var Ctor = this.constructor;
    return new Ctor(clone$2(this.option));
  };
  Model2.prototype.parsePath = function(path) {
    if (typeof path === "string") {
      return path.split(".");
    }
    return path;
  };
  Model2.prototype.resolveParentPath = function(path) {
    return path;
  };
  Model2.prototype.isAnimationEnabled = function() {
    if (!env$1.node && this.option) {
      if (this.option.animation != null) {
        return !!this.option.animation;
      } else if (this.parentModel) {
        return this.parentModel.isAnimationEnabled();
      }
    }
  };
  Model2.prototype._doGet = function(pathArr, parentModel) {
    var obj = this.option;
    if (!pathArr) {
      return obj;
    }
    for (var i = 0; i < pathArr.length; i++) {
      if (!pathArr[i]) {
        continue;
      }
      obj = obj && typeof obj === "object" ? obj[pathArr[i]] : null;
      if (obj == null) {
        break;
      }
    }
    if (obj == null && parentModel) {
      obj = parentModel._doGet(this.resolveParentPath(pathArr), parentModel.parentModel);
    }
    return obj;
  };
  return Model2;
}();
enableClassExtend(Model);
enableClassCheck(Model);
mixin(Model, LineStyleMixin);
mixin(Model, ItemStyleMixin);
mixin(Model, AreaStyleMixin);
mixin(Model, TextStyleMixin$1);
var Model$1 = Model;
var base = Math.round(Math.random() * 10);
function getUID(type) {
  return [type || "", base++].join("_");
}
function enableSubTypeDefaulter(target) {
  var subTypeDefaulters = {};
  target.registerSubTypeDefaulter = function(componentType, defaulter) {
    var componentTypeInfo = parseClassType(componentType);
    subTypeDefaulters[componentTypeInfo.main] = defaulter;
  };
  target.determineSubType = function(componentType, option) {
    var type = option.type;
    if (!type) {
      var componentTypeMain = parseClassType(componentType).main;
      if (target.hasSubTypes(componentType) && subTypeDefaulters[componentTypeMain]) {
        type = subTypeDefaulters[componentTypeMain](option);
      }
    }
    return type;
  };
}
function enableTopologicalTravel(entity, dependencyGetter) {
  entity.topologicalTravel = function(targetNameList, fullNameList, callback, context) {
    if (!targetNameList.length) {
      return;
    }
    var result = makeDepndencyGraph(fullNameList);
    var graph = result.graph;
    var noEntryList = result.noEntryList;
    var targetNameSet = {};
    each$4(targetNameList, function(name) {
      targetNameSet[name] = true;
    });
    while (noEntryList.length) {
      var currComponentType = noEntryList.pop();
      var currVertex = graph[currComponentType];
      var isInTargetNameSet = !!targetNameSet[currComponentType];
      if (isInTargetNameSet) {
        callback.call(context, currComponentType, currVertex.originalDeps.slice());
        delete targetNameSet[currComponentType];
      }
      each$4(currVertex.successor, isInTargetNameSet ? removeEdgeAndAdd : removeEdge);
    }
    each$4(targetNameSet, function() {
      var errMsg = "";
      throw new Error(errMsg);
    });
    function removeEdge(succComponentType) {
      graph[succComponentType].entryCount--;
      if (graph[succComponentType].entryCount === 0) {
        noEntryList.push(succComponentType);
      }
    }
    function removeEdgeAndAdd(succComponentType) {
      targetNameSet[succComponentType] = true;
      removeEdge(succComponentType);
    }
  };
  function makeDepndencyGraph(fullNameList) {
    var graph = {};
    var noEntryList = [];
    each$4(fullNameList, function(name) {
      var thisItem = createDependencyGraphItem(graph, name);
      var originalDeps = thisItem.originalDeps = dependencyGetter(name);
      var availableDeps = getAvailableDependencies(originalDeps, fullNameList);
      thisItem.entryCount = availableDeps.length;
      if (thisItem.entryCount === 0) {
        noEntryList.push(name);
      }
      each$4(availableDeps, function(dependentName) {
        if (indexOf(thisItem.predecessor, dependentName) < 0) {
          thisItem.predecessor.push(dependentName);
        }
        var thatItem = createDependencyGraphItem(graph, dependentName);
        if (indexOf(thatItem.successor, dependentName) < 0) {
          thatItem.successor.push(name);
        }
      });
    });
    return {
      graph,
      noEntryList
    };
  }
  function createDependencyGraphItem(graph, name) {
    if (!graph[name]) {
      graph[name] = {
        predecessor: [],
        successor: []
      };
    }
    return graph[name];
  }
  function getAvailableDependencies(originalDeps, fullNameList) {
    var availableDeps = [];
    each$4(originalDeps, function(dep) {
      indexOf(fullNameList, dep) >= 0 && availableDeps.push(dep);
    });
    return availableDeps;
  }
}
function inheritDefaultOption(superOption, subOption) {
  return merge(merge({}, superOption, true), subOption, true);
}
var langEN = {
  time: {
    month: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
    monthAbbr: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
    dayOfWeek: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
    dayOfWeekAbbr: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"]
  },
  legend: {
    selector: {
      all: "All",
      inverse: "Inv"
    }
  },
  toolbox: {
    brush: {
      title: {
        rect: "Box Select",
        polygon: "Lasso Select",
        lineX: "Horizontally Select",
        lineY: "Vertically Select",
        keep: "Keep Selections",
        clear: "Clear Selections"
      }
    },
    dataView: {
      title: "Data View",
      lang: ["Data View", "Close", "Refresh"]
    },
    dataZoom: {
      title: {
        zoom: "Zoom",
        back: "Zoom Reset"
      }
    },
    magicType: {
      title: {
        line: "Switch to Line Chart",
        bar: "Switch to Bar Chart",
        stack: "Stack",
        tiled: "Tile"
      }
    },
    restore: {
      title: "Restore"
    },
    saveAsImage: {
      title: "Save as Image",
      lang: ["Right Click to Save Image"]
    }
  },
  series: {
    typeNames: {
      pie: "Pie chart",
      bar: "Bar chart",
      line: "Line chart",
      scatter: "Scatter plot",
      effectScatter: "Ripple scatter plot",
      radar: "Radar chart",
      tree: "Tree",
      treemap: "Treemap",
      boxplot: "Boxplot",
      candlestick: "Candlestick",
      k: "K line chart",
      heatmap: "Heat map",
      map: "Map",
      parallel: "Parallel coordinate map",
      lines: "Line graph",
      graph: "Relationship graph",
      sankey: "Sankey diagram",
      funnel: "Funnel chart",
      gauge: "Gauge",
      pictorialBar: "Pictorial bar",
      themeRiver: "Theme River Map",
      sunburst: "Sunburst"
    }
  },
  aria: {
    general: {
      withTitle: 'This is a chart about "{title}"',
      withoutTitle: "This is a chart"
    },
    series: {
      single: {
        prefix: "",
        withName: " with type {seriesType} named {seriesName}.",
        withoutName: " with type {seriesType}."
      },
      multiple: {
        prefix: ". It consists of {seriesCount} series count.",
        withName: " The {seriesId} series is a {seriesType} representing {seriesName}.",
        withoutName: " The {seriesId} series is a {seriesType}.",
        separator: {
          middle: "",
          end: ""
        }
      }
    },
    data: {
      allData: "The data is as follows: ",
      partialData: "The first {displayCnt} items are: ",
      withName: "the data for {name} is {value}",
      withoutName: "{value}",
      separator: {
        middle: ", ",
        end: ". "
      }
    }
  }
};
var langZH = {
  time: {
    month: ["\u4E00\u6708", "\u4E8C\u6708", "\u4E09\u6708", "\u56DB\u6708", "\u4E94\u6708", "\u516D\u6708", "\u4E03\u6708", "\u516B\u6708", "\u4E5D\u6708", "\u5341\u6708", "\u5341\u4E00\u6708", "\u5341\u4E8C\u6708"],
    monthAbbr: ["1\u6708", "2\u6708", "3\u6708", "4\u6708", "5\u6708", "6\u6708", "7\u6708", "8\u6708", "9\u6708", "10\u6708", "11\u6708", "12\u6708"],
    dayOfWeek: ["\u661F\u671F\u65E5", "\u661F\u671F\u4E00", "\u661F\u671F\u4E8C", "\u661F\u671F\u4E09", "\u661F\u671F\u56DB", "\u661F\u671F\u4E94", "\u661F\u671F\u516D"],
    dayOfWeekAbbr: ["\u65E5", "\u4E00", "\u4E8C", "\u4E09", "\u56DB", "\u4E94", "\u516D"]
  },
  legend: {
    selector: {
      all: "\u5168\u9009",
      inverse: "\u53CD\u9009"
    }
  },
  toolbox: {
    brush: {
      title: {
        rect: "\u77E9\u5F62\u9009\u62E9",
        polygon: "\u5708\u9009",
        lineX: "\u6A2A\u5411\u9009\u62E9",
        lineY: "\u7EB5\u5411\u9009\u62E9",
        keep: "\u4FDD\u6301\u9009\u62E9",
        clear: "\u6E05\u9664\u9009\u62E9"
      }
    },
    dataView: {
      title: "\u6570\u636E\u89C6\u56FE",
      lang: ["\u6570\u636E\u89C6\u56FE", "\u5173\u95ED", "\u5237\u65B0"]
    },
    dataZoom: {
      title: {
        zoom: "\u533A\u57DF\u7F29\u653E",
        back: "\u533A\u57DF\u7F29\u653E\u8FD8\u539F"
      }
    },
    magicType: {
      title: {
        line: "\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",
        bar: "\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",
        stack: "\u5207\u6362\u4E3A\u5806\u53E0",
        tiled: "\u5207\u6362\u4E3A\u5E73\u94FA"
      }
    },
    restore: {
      title: "\u8FD8\u539F"
    },
    saveAsImage: {
      title: "\u4FDD\u5B58\u4E3A\u56FE\u7247",
      lang: ["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]
    }
  },
  series: {
    typeNames: {
      pie: "\u997C\u56FE",
      bar: "\u67F1\u72B6\u56FE",
      line: "\u6298\u7EBF\u56FE",
      scatter: "\u6563\u70B9\u56FE",
      effectScatter: "\u6D9F\u6F2A\u6563\u70B9\u56FE",
      radar: "\u96F7\u8FBE\u56FE",
      tree: "\u6811\u56FE",
      treemap: "\u77E9\u5F62\u6811\u56FE",
      boxplot: "\u7BB1\u578B\u56FE",
      candlestick: "K\u7EBF\u56FE",
      k: "K\u7EBF\u56FE",
      heatmap: "\u70ED\u529B\u56FE",
      map: "\u5730\u56FE",
      parallel: "\u5E73\u884C\u5750\u6807\u56FE",
      lines: "\u7EBF\u56FE",
      graph: "\u5173\u7CFB\u56FE",
      sankey: "\u6851\u57FA\u56FE",
      funnel: "\u6F0F\u6597\u56FE",
      gauge: "\u4EEA\u8868\u76D8\u56FE",
      pictorialBar: "\u8C61\u5F62\u67F1\u56FE",
      themeRiver: "\u4E3B\u9898\u6CB3\u6D41\u56FE",
      sunburst: "\u65ED\u65E5\u56FE"
    }
  },
  aria: {
    general: {
      withTitle: "\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",
      withoutTitle: "\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"
    },
    series: {
      single: {
        prefix: "",
        withName: "\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",
        withoutName: "\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"
      },
      multiple: {
        prefix: "\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",
        withName: "\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",
        withoutName: "\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",
        separator: {
          middle: "\uFF1B",
          end: "\u3002"
        }
      }
    },
    data: {
      allData: "\u5176\u6570\u636E\u662F\u2014\u2014",
      partialData: "\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",
      withName: "{name}\u7684\u6570\u636E\u662F{value}",
      withoutName: "{value}",
      separator: {
        middle: "\uFF0C",
        end: ""
      }
    }
  }
};
var LOCALE_ZH = "ZH";
var LOCALE_EN = "EN";
var DEFAULT_LOCALE = LOCALE_EN;
var localeStorage = {};
var localeModels = {};
var SYSTEM_LANG = !env$1.domSupported ? DEFAULT_LOCALE : function() {
  var langStr = (document.documentElement.lang || navigator.language || navigator.browserLanguage).toUpperCase();
  return langStr.indexOf(LOCALE_ZH) > -1 ? LOCALE_ZH : DEFAULT_LOCALE;
}();
function registerLocale(locale, localeObj) {
  locale = locale.toUpperCase();
  localeModels[locale] = new Model$1(localeObj);
  localeStorage[locale] = localeObj;
}
function createLocaleObject(locale) {
  if (isString(locale)) {
    var localeObj = localeStorage[locale.toUpperCase()] || {};
    if (locale === LOCALE_ZH || locale === LOCALE_EN) {
      return clone$2(localeObj);
    } else {
      return merge(clone$2(localeObj), clone$2(localeStorage[DEFAULT_LOCALE]), false);
    }
  } else {
    return merge(clone$2(locale), clone$2(localeStorage[DEFAULT_LOCALE]), false);
  }
}
function getLocaleModel(lang) {
  return localeModels[lang];
}
function getDefaultLocaleModel() {
  return localeModels[DEFAULT_LOCALE];
}
registerLocale(LOCALE_EN, langEN);
registerLocale(LOCALE_ZH, langZH);
function pad(str, len2) {
  str += "";
  return "0000".substr(0, len2 - str.length) + str;
}
function format(time, template, isUTC, lang) {
  var date = parseDate(time);
  var y2 = date[fullYearGetterName(isUTC)]();
  var M = date[monthGetterName(isUTC)]() + 1;
  var q = Math.floor((M - 1) / 3) + 1;
  var d = date[dateGetterName(isUTC)]();
  var e2 = date["get" + (isUTC ? "UTC" : "") + "Day"]();
  var H = date[hoursGetterName(isUTC)]();
  var h2 = (H - 1) % 12 + 1;
  var m2 = date[minutesGetterName(isUTC)]();
  var s = date[secondsGetterName(isUTC)]();
  var S2 = date[millisecondsGetterName(isUTC)]();
  var localeModel = lang instanceof Model$1 ? lang : getLocaleModel(lang || SYSTEM_LANG) || getDefaultLocaleModel();
  var timeModel = localeModel.getModel("time");
  var month = timeModel.get("month");
  var monthAbbr = timeModel.get("monthAbbr");
  var dayOfWeek = timeModel.get("dayOfWeek");
  var dayOfWeekAbbr = timeModel.get("dayOfWeekAbbr");
  return (template || "").replace(/{yyyy}/g, y2 + "").replace(/{yy}/g, pad(y2 % 100 + "", 2)).replace(/{Q}/g, q + "").replace(/{MMMM}/g, month[M - 1]).replace(/{MMM}/g, monthAbbr[M - 1]).replace(/{MM}/g, pad(M, 2)).replace(/{M}/g, M + "").replace(/{dd}/g, pad(d, 2)).replace(/{d}/g, d + "").replace(/{eeee}/g, dayOfWeek[e2]).replace(/{ee}/g, dayOfWeekAbbr[e2]).replace(/{e}/g, e2 + "").replace(/{HH}/g, pad(H, 2)).replace(/{H}/g, H + "").replace(/{hh}/g, pad(h2 + "", 2)).replace(/{h}/g, h2 + "").replace(/{mm}/g, pad(m2, 2)).replace(/{m}/g, m2 + "").replace(/{ss}/g, pad(s, 2)).replace(/{s}/g, s + "").replace(/{SSS}/g, pad(S2, 3)).replace(/{S}/g, S2 + "");
}
function fullYearGetterName(isUTC) {
  return isUTC ? "getUTCFullYear" : "getFullYear";
}
function monthGetterName(isUTC) {
  return isUTC ? "getUTCMonth" : "getMonth";
}
function dateGetterName(isUTC) {
  return isUTC ? "getUTCDate" : "getDate";
}
function hoursGetterName(isUTC) {
  return isUTC ? "getUTCHours" : "getHours";
}
function minutesGetterName(isUTC) {
  return isUTC ? "getUTCMinutes" : "getMinutes";
}
function secondsGetterName(isUTC) {
  return isUTC ? "getUTCSeconds" : "getSeconds";
}
function millisecondsGetterName(isUTC) {
  return isUTC ? "getUTCMilliseconds" : "getMilliseconds";
}
function addCommas(x2) {
  if (!isNumeric(x2)) {
    return isString(x2) ? x2 : "-";
  }
  var parts = (x2 + "").split(".");
  return parts[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g, "$1,") + (parts.length > 1 ? "." + parts[1] : "");
}
function toCamelCase(str, upperCaseFirst) {
  str = (str || "").toLowerCase().replace(/-(.)/g, function(match, group1) {
    return group1.toUpperCase();
  });
  if (upperCaseFirst && str) {
    str = str.charAt(0).toUpperCase() + str.slice(1);
  }
  return str;
}
var normalizeCssArray = normalizeCssArray$1;
function makeValueReadable(value, valueType, useUTC) {
  var USER_READABLE_DEFUALT_TIME_PATTERN = "{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";
  function stringToUserReadable(str) {
    return str && trim(str) ? str : "-";
  }
  function isNumberUserReadable(num) {
    return !!(num != null && !isNaN(num) && isFinite(num));
  }
  var isTypeTime = valueType === "time";
  var isValueDate = value instanceof Date;
  if (isTypeTime || isValueDate) {
    var date = isTypeTime ? parseDate(value) : value;
    if (!isNaN(+date)) {
      return format(date, USER_READABLE_DEFUALT_TIME_PATTERN, useUTC);
    } else if (isValueDate) {
      return "-";
    }
  }
  if (valueType === "ordinal") {
    return isStringSafe(value) ? stringToUserReadable(value) : isNumber(value) ? isNumberUserReadable(value) ? value + "" : "-" : "-";
  }
  var numericResult = numericToNumber(value);
  return isNumberUserReadable(numericResult) ? addCommas(numericResult) : isStringSafe(value) ? stringToUserReadable(value) : typeof value === "boolean" ? value + "" : "-";
}
var TPL_VAR_ALIAS = ["a", "b", "c", "d", "e", "f", "g"];
var wrapVar = function(varName, seriesIdx) {
  return "{" + varName + (seriesIdx == null ? "" : seriesIdx) + "}";
};
function formatTpl(tpl, paramsList, encode) {
  if (!isArray(paramsList)) {
    paramsList = [paramsList];
  }
  var seriesLen = paramsList.length;
  if (!seriesLen) {
    return "";
  }
  var $vars = paramsList[0].$vars || [];
  for (var i = 0; i < $vars.length; i++) {
    var alias = TPL_VAR_ALIAS[i];
    tpl = tpl.replace(wrapVar(alias), wrapVar(alias, 0));
  }
  for (var seriesIdx = 0; seriesIdx < seriesLen; seriesIdx++) {
    for (var k2 = 0; k2 < $vars.length; k2++) {
      var val = paramsList[seriesIdx][$vars[k2]];
      tpl = tpl.replace(wrapVar(TPL_VAR_ALIAS[k2], seriesIdx), encode ? encodeHTML(val) : val);
    }
  }
  return tpl;
}
function getTooltipMarker(inOpt, extraCssText) {
  var opt = isString(inOpt) ? {
    color: inOpt,
    extraCssText
  } : inOpt || {};
  var color = opt.color;
  var type = opt.type;
  extraCssText = opt.extraCssText;
  var renderMode = opt.renderMode || "html";
  if (!color) {
    return "";
  }
  if (renderMode === "html") {
    return type === "subItem" ? '<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:' + encodeHTML(color) + ";" + (extraCssText || "") + '"></span>' : '<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:' + encodeHTML(color) + ";" + (extraCssText || "") + '"></span>';
  } else {
    var markerId = opt.markerId || "markerX";
    return {
      renderMode,
      content: "{" + markerId + "|}  ",
      style: type === "subItem" ? {
        width: 4,
        height: 4,
        borderRadius: 2,
        backgroundColor: color
      } : {
        width: 10,
        height: 10,
        borderRadius: 5,
        backgroundColor: color
      }
    };
  }
}
function convertToColorString(color, defaultColor) {
  defaultColor = defaultColor || "transparent";
  return isString(color) ? color : isObject$2(color) ? color.colorStops && (color.colorStops[0] || {}).color || defaultColor : defaultColor;
}
function windowOpen(link, target) {
  if (target === "_blank" || target === "blank") {
    var blank = window.open();
    blank.opener = null;
    blank.location.href = link;
  } else {
    window.open(link, target);
  }
}
var each$3 = each$4;
var LOCATION_PARAMS = ["left", "right", "top", "bottom", "width", "height"];
var HV_NAMES = [["width", "left", "right"], ["height", "top", "bottom"]];
function boxLayout(orient, group, gap, maxWidth, maxHeight) {
  var x2 = 0;
  var y2 = 0;
  if (maxWidth == null) {
    maxWidth = Infinity;
  }
  if (maxHeight == null) {
    maxHeight = Infinity;
  }
  var currentLineMaxSize = 0;
  group.eachChild(function(child, idx) {
    var rect = child.getBoundingRect();
    var nextChild = group.childAt(idx + 1);
    var nextChildRect = nextChild && nextChild.getBoundingRect();
    var nextX;
    var nextY;
    if (orient === "horizontal") {
      var moveX = rect.width + (nextChildRect ? -nextChildRect.x + rect.x : 0);
      nextX = x2 + moveX;
      if (nextX > maxWidth || child.newline) {
        x2 = 0;
        nextX = moveX;
        y2 += currentLineMaxSize + gap;
        currentLineMaxSize = rect.height;
      } else {
        currentLineMaxSize = Math.max(currentLineMaxSize, rect.height);
      }
    } else {
      var moveY = rect.height + (nextChildRect ? -nextChildRect.y + rect.y : 0);
      nextY = y2 + moveY;
      if (nextY > maxHeight || child.newline) {
        x2 += currentLineMaxSize + gap;
        y2 = 0;
        nextY = moveY;
        currentLineMaxSize = rect.width;
      } else {
        currentLineMaxSize = Math.max(currentLineMaxSize, rect.width);
      }
    }
    if (child.newline) {
      return;
    }
    child.x = x2;
    child.y = y2;
    child.markRedraw();
    orient === "horizontal" ? x2 = nextX + gap : y2 = nextY + gap;
  });
}
var box = boxLayout;
curry$1(boxLayout, "vertical");
curry$1(boxLayout, "horizontal");
function getLayoutRect(positionInfo, containerRect, margin) {
  margin = normalizeCssArray(margin || 0);
  var containerWidth = containerRect.width;
  var containerHeight = containerRect.height;
  var left = parsePercent(positionInfo.left, containerWidth);
  var top = parsePercent(positionInfo.top, containerHeight);
  var right = parsePercent(positionInfo.right, containerWidth);
  var bottom = parsePercent(positionInfo.bottom, containerHeight);
  var width = parsePercent(positionInfo.width, containerWidth);
  var height = parsePercent(positionInfo.height, containerHeight);
  var verticalMargin = margin[2] + margin[0];
  var horizontalMargin = margin[1] + margin[3];
  var aspect = positionInfo.aspect;
  if (isNaN(width)) {
    width = containerWidth - right - horizontalMargin - left;
  }
  if (isNaN(height)) {
    height = containerHeight - bottom - verticalMargin - top;
  }
  if (aspect != null) {
    if (isNaN(width) && isNaN(height)) {
      if (aspect > containerWidth / containerHeight) {
        width = containerWidth * 0.8;
      } else {
        height = containerHeight * 0.8;
      }
    }
    if (isNaN(width)) {
      width = aspect * height;
    }
    if (isNaN(height)) {
      height = width / aspect;
    }
  }
  if (isNaN(left)) {
    left = containerWidth - right - width - horizontalMargin;
  }
  if (isNaN(top)) {
    top = containerHeight - bottom - height - verticalMargin;
  }
  switch (positionInfo.left || positionInfo.right) {
    case "center":
      left = containerWidth / 2 - width / 2 - margin[3];
      break;
    case "right":
      left = containerWidth - width - horizontalMargin;
      break;
  }
  switch (positionInfo.top || positionInfo.bottom) {
    case "middle":
    case "center":
      top = containerHeight / 2 - height / 2 - margin[0];
      break;
    case "bottom":
      top = containerHeight - height - verticalMargin;
      break;
  }
  left = left || 0;
  top = top || 0;
  if (isNaN(width)) {
    width = containerWidth - horizontalMargin - left - (right || 0);
  }
  if (isNaN(height)) {
    height = containerHeight - verticalMargin - top - (bottom || 0);
  }
  var rect = new BoundingRect$1(left + margin[3], top + margin[0], width, height);
  rect.margin = margin;
  return rect;
}
function fetchLayoutMode(ins) {
  var layoutMode = ins.layoutMode || ins.constructor.layoutMode;
  return isObject$2(layoutMode) ? layoutMode : layoutMode ? {
    type: layoutMode
  } : null;
}
function mergeLayoutParam(targetOption, newOption, opt) {
  var ignoreSize = opt && opt.ignoreSize;
  !isArray(ignoreSize) && (ignoreSize = [ignoreSize, ignoreSize]);
  var hResult = merge2(HV_NAMES[0], 0);
  var vResult = merge2(HV_NAMES[1], 1);
  copy2(HV_NAMES[0], targetOption, hResult);
  copy2(HV_NAMES[1], targetOption, vResult);
  function merge2(names, hvIdx) {
    var newParams = {};
    var newValueCount = 0;
    var merged = {};
    var mergedValueCount = 0;
    var enoughParamNumber = 2;
    each$3(names, function(name) {
      merged[name] = targetOption[name];
    });
    each$3(names, function(name) {
      hasProp(newOption, name) && (newParams[name] = merged[name] = newOption[name]);
      hasValue(newParams, name) && newValueCount++;
      hasValue(merged, name) && mergedValueCount++;
    });
    if (ignoreSize[hvIdx]) {
      if (hasValue(newOption, names[1])) {
        merged[names[2]] = null;
      } else if (hasValue(newOption, names[2])) {
        merged[names[1]] = null;
      }
      return merged;
    }
    if (mergedValueCount === enoughParamNumber || !newValueCount) {
      return merged;
    } else if (newValueCount >= enoughParamNumber) {
      return newParams;
    } else {
      for (var i = 0; i < names.length; i++) {
        var name_1 = names[i];
        if (!hasProp(newParams, name_1) && hasProp(targetOption, name_1)) {
          newParams[name_1] = targetOption[name_1];
          break;
        }
      }
      return newParams;
    }
  }
  function hasProp(obj, name) {
    return obj.hasOwnProperty(name);
  }
  function hasValue(obj, name) {
    return obj[name] != null && obj[name] !== "auto";
  }
  function copy2(names, target, source) {
    each$3(names, function(name) {
      target[name] = source[name];
    });
  }
}
function getLayoutParams(source) {
  return copyLayoutParams({}, source);
}
function copyLayoutParams(target, source) {
  source && target && each$3(LOCATION_PARAMS, function(name) {
    source.hasOwnProperty(name) && (target[name] = source[name]);
  });
  return target;
}
var inner$7 = makeInner();
var ComponentModel = function(_super) {
  __extends(ComponentModel2, _super);
  function ComponentModel2(option, parentModel, ecModel) {
    var _this = _super.call(this, option, parentModel, ecModel) || this;
    _this.uid = getUID("ec_cpt_model");
    return _this;
  }
  ComponentModel2.prototype.init = function(option, parentModel, ecModel) {
    this.mergeDefaultAndTheme(option, ecModel);
  };
  ComponentModel2.prototype.mergeDefaultAndTheme = function(option, ecModel) {
    var layoutMode = fetchLayoutMode(this);
    var inputPositionParams = layoutMode ? getLayoutParams(option) : {};
    var themeModel = ecModel.getTheme();
    merge(option, themeModel.get(this.mainType));
    merge(option, this.getDefaultOption());
    if (layoutMode) {
      mergeLayoutParam(option, inputPositionParams, layoutMode);
    }
  };
  ComponentModel2.prototype.mergeOption = function(option, ecModel) {
    merge(this.option, option, true);
    var layoutMode = fetchLayoutMode(this);
    if (layoutMode) {
      mergeLayoutParam(this.option, option, layoutMode);
    }
  };
  ComponentModel2.prototype.optionUpdated = function(newCptOption, isInit) {
  };
  ComponentModel2.prototype.getDefaultOption = function() {
    var ctor = this.constructor;
    if (!isExtendedClass(ctor)) {
      return ctor.defaultOption;
    }
    var fields = inner$7(this);
    if (!fields.defaultOption) {
      var optList = [];
      var clz = ctor;
      while (clz) {
        var opt = clz.prototype.defaultOption;
        opt && optList.push(opt);
        clz = clz.superClass;
      }
      var defaultOption = {};
      for (var i = optList.length - 1; i >= 0; i--) {
        defaultOption = merge(defaultOption, optList[i], true);
      }
      fields.defaultOption = defaultOption;
    }
    return fields.defaultOption;
  };
  ComponentModel2.prototype.getReferringComponents = function(mainType, opt) {
    var indexKey = mainType + "Index";
    var idKey = mainType + "Id";
    return queryReferringComponents(this.ecModel, mainType, {
      index: this.get(indexKey, true),
      id: this.get(idKey, true)
    }, opt);
  };
  ComponentModel2.prototype.getBoxLayoutParams = function() {
    var boxLayoutModel = this;
    return {
      left: boxLayoutModel.get("left"),
      top: boxLayoutModel.get("top"),
      right: boxLayoutModel.get("right"),
      bottom: boxLayoutModel.get("bottom"),
      width: boxLayoutModel.get("width"),
      height: boxLayoutModel.get("height")
    };
  };
  ComponentModel2.prototype.getZLevelKey = function() {
    return "";
  };
  ComponentModel2.prototype.setZLevel = function(zlevel) {
    this.option.zlevel = zlevel;
  };
  ComponentModel2.protoInitialize = function() {
    var proto = ComponentModel2.prototype;
    proto.type = "component";
    proto.id = "";
    proto.name = "";
    proto.mainType = "";
    proto.subType = "";
    proto.componentIndex = 0;
  }();
  return ComponentModel2;
}(Model$1);
mountExtend(ComponentModel, Model$1);
enableClassManagement(ComponentModel);
enableSubTypeDefaulter(ComponentModel);
enableTopologicalTravel(ComponentModel, getDependencies);
function getDependencies(componentType) {
  var deps = [];
  each$4(ComponentModel.getClassesByMainType(componentType), function(clz) {
    deps = deps.concat(clz.dependencies || clz.prototype.dependencies || []);
  });
  deps = map$1(deps, function(type) {
    return parseClassType(type).main;
  });
  if (componentType !== "dataset" && indexOf(deps, "dataset") <= 0) {
    deps.unshift("dataset");
  }
  return deps;
}
var ComponentModel$1 = ComponentModel;
var platform = "";
if (typeof navigator !== "undefined") {
  platform = navigator.platform || "";
}
var decalColor = "rgba(0, 0, 0, 0.2)";
var globalDefault = {
  darkMode: "auto",
  colorBy: "series",
  color: ["#5470c6", "#91cc75", "#fac858", "#ee6666", "#73c0de", "#3ba272", "#fc8452", "#9a60b4", "#ea7ccc"],
  gradientColor: ["#f6efa6", "#d88273", "#bf444c"],
  aria: {
    decal: {
      decals: [{
        color: decalColor,
        dashArrayX: [1, 0],
        dashArrayY: [2, 5],
        symbolSize: 1,
        rotation: Math.PI / 6
      }, {
        color: decalColor,
        symbol: "circle",
        dashArrayX: [[8, 8], [0, 8, 8, 0]],
        dashArrayY: [6, 0],
        symbolSize: 0.8
      }, {
        color: decalColor,
        dashArrayX: [1, 0],
        dashArrayY: [4, 3],
        rotation: -Math.PI / 4
      }, {
        color: decalColor,
        dashArrayX: [[6, 6], [0, 6, 6, 0]],
        dashArrayY: [6, 0]
      }, {
        color: decalColor,
        dashArrayX: [[1, 0], [1, 6]],
        dashArrayY: [1, 0, 6, 0],
        rotation: Math.PI / 4
      }, {
        color: decalColor,
        symbol: "triangle",
        dashArrayX: [[9, 9], [0, 9, 9, 0]],
        dashArrayY: [7, 2],
        symbolSize: 0.75
      }]
    }
  },
  textStyle: {
    fontFamily: platform.match(/^Win/) ? "Microsoft YaHei" : "sans-serif",
    fontSize: 12,
    fontStyle: "normal",
    fontWeight: "normal"
  },
  blendMode: null,
  stateAnimation: {
    duration: 300,
    easing: "cubicOut"
  },
  animation: "auto",
  animationDuration: 1e3,
  animationDurationUpdate: 500,
  animationEasing: "cubicInOut",
  animationEasingUpdate: "cubicInOut",
  animationThreshold: 2e3,
  progressiveThreshold: 3e3,
  progressive: 400,
  hoverLayerThreshold: 3e3,
  useUTC: false
};
var VISUAL_DIMENSIONS = createHashMap(["tooltip", "label", "itemName", "itemId", "itemGroupId", "seriesName"]);
var SOURCE_FORMAT_ORIGINAL = "original";
var SOURCE_FORMAT_ARRAY_ROWS = "arrayRows";
var SOURCE_FORMAT_OBJECT_ROWS = "objectRows";
var SOURCE_FORMAT_KEYED_COLUMNS = "keyedColumns";
var SOURCE_FORMAT_TYPED_ARRAY = "typedArray";
var SOURCE_FORMAT_UNKNOWN = "unknown";
var SERIES_LAYOUT_BY_COLUMN = "column";
var SERIES_LAYOUT_BY_ROW = "row";
var BE_ORDINAL = {
  Must: 1,
  Might: 2,
  Not: 3
};
var innerGlobalModel = makeInner();
function resetSourceDefaulter(ecModel) {
  innerGlobalModel(ecModel).datasetMap = createHashMap();
}
function makeSeriesEncodeForNameBased(seriesModel, source, dimCount) {
  var encode = {};
  var datasetModel = querySeriesUpstreamDatasetModel(seriesModel);
  if (!datasetModel) {
    return encode;
  }
  var sourceFormat = source.sourceFormat;
  var dimensionsDefine = source.dimensionsDefine;
  var potentialNameDimIndex;
  if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS || sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {
    each$4(dimensionsDefine, function(dim, idx) {
      if ((isObject$2(dim) ? dim.name : dim) === "name") {
        potentialNameDimIndex = idx;
      }
    });
  }
  var idxResult = function() {
    var idxRes0 = {};
    var idxRes1 = {};
    var guessRecords = [];
    for (var i = 0, len2 = Math.min(5, dimCount); i < len2; i++) {
      var guessResult = doGuessOrdinal(source.data, sourceFormat, source.seriesLayoutBy, dimensionsDefine, source.startIndex, i);
      guessRecords.push(guessResult);
      var isPureNumber = guessResult === BE_ORDINAL.Not;
      if (isPureNumber && idxRes0.v == null && i !== potentialNameDimIndex) {
        idxRes0.v = i;
      }
      if (idxRes0.n == null || idxRes0.n === idxRes0.v || !isPureNumber && guessRecords[idxRes0.n] === BE_ORDINAL.Not) {
        idxRes0.n = i;
      }
      if (fulfilled(idxRes0) && guessRecords[idxRes0.n] !== BE_ORDINAL.Not) {
        return idxRes0;
      }
      if (!isPureNumber) {
        if (guessResult === BE_ORDINAL.Might && idxRes1.v == null && i !== potentialNameDimIndex) {
          idxRes1.v = i;
        }
        if (idxRes1.n == null || idxRes1.n === idxRes1.v) {
          idxRes1.n = i;
        }
      }
    }
    function fulfilled(idxResult2) {
      return idxResult2.v != null && idxResult2.n != null;
    }
    return fulfilled(idxRes0) ? idxRes0 : fulfilled(idxRes1) ? idxRes1 : null;
  }();
  if (idxResult) {
    encode.value = [idxResult.v];
    var nameDimIndex = potentialNameDimIndex != null ? potentialNameDimIndex : idxResult.n;
    encode.itemName = [nameDimIndex];
    encode.seriesName = [nameDimIndex];
  }
  return encode;
}
function querySeriesUpstreamDatasetModel(seriesModel) {
  var thisData = seriesModel.get("data", true);
  if (!thisData) {
    return queryReferringComponents(seriesModel.ecModel, "dataset", {
      index: seriesModel.get("datasetIndex", true),
      id: seriesModel.get("datasetId", true)
    }, SINGLE_REFERRING).models[0];
  }
}
function queryDatasetUpstreamDatasetModels(datasetModel) {
  if (!datasetModel.get("transform", true) && !datasetModel.get("fromTransformResult", true)) {
    return [];
  }
  return queryReferringComponents(datasetModel.ecModel, "dataset", {
    index: datasetModel.get("fromDatasetIndex", true),
    id: datasetModel.get("fromDatasetId", true)
  }, SINGLE_REFERRING).models;
}
function guessOrdinal(source, dimIndex) {
  return doGuessOrdinal(source.data, source.sourceFormat, source.seriesLayoutBy, source.dimensionsDefine, source.startIndex, dimIndex);
}
function doGuessOrdinal(data, sourceFormat, seriesLayoutBy, dimensionsDefine, startIndex, dimIndex) {
  var result;
  var maxLoop = 5;
  if (isTypedArray(data)) {
    return BE_ORDINAL.Not;
  }
  var dimName;
  var dimType;
  if (dimensionsDefine) {
    var dimDefItem = dimensionsDefine[dimIndex];
    if (isObject$2(dimDefItem)) {
      dimName = dimDefItem.name;
      dimType = dimDefItem.type;
    } else if (isString(dimDefItem)) {
      dimName = dimDefItem;
    }
  }
  if (dimType != null) {
    return dimType === "ordinal" ? BE_ORDINAL.Must : BE_ORDINAL.Not;
  }
  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {
    var dataArrayRows = data;
    if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {
      var sample = dataArrayRows[dimIndex];
      for (var i = 0; i < (sample || []).length && i < maxLoop; i++) {
        if ((result = detectValue(sample[startIndex + i])) != null) {
          return result;
        }
      }
    } else {
      for (var i = 0; i < dataArrayRows.length && i < maxLoop; i++) {
        var row = dataArrayRows[startIndex + i];
        if (row && (result = detectValue(row[dimIndex])) != null) {
          return result;
        }
      }
    }
  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {
    var dataObjectRows = data;
    if (!dimName) {
      return BE_ORDINAL.Not;
    }
    for (var i = 0; i < dataObjectRows.length && i < maxLoop; i++) {
      var item = dataObjectRows[i];
      if (item && (result = detectValue(item[dimName])) != null) {
        return result;
      }
    }
  } else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {
    var dataKeyedColumns = data;
    if (!dimName) {
      return BE_ORDINAL.Not;
    }
    var sample = dataKeyedColumns[dimName];
    if (!sample || isTypedArray(sample)) {
      return BE_ORDINAL.Not;
    }
    for (var i = 0; i < sample.length && i < maxLoop; i++) {
      if ((result = detectValue(sample[i])) != null) {
        return result;
      }
    }
  } else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {
    var dataOriginal = data;
    for (var i = 0; i < dataOriginal.length && i < maxLoop; i++) {
      var item = dataOriginal[i];
      var val = getDataItemValue(item);
      if (!isArray(val)) {
        return BE_ORDINAL.Not;
      }
      if ((result = detectValue(val[dimIndex])) != null) {
        return result;
      }
    }
  }
  function detectValue(val2) {
    var beStr = isString(val2);
    if (val2 != null && isFinite(val2) && val2 !== "") {
      return beStr ? BE_ORDINAL.Might : BE_ORDINAL.Not;
    } else if (beStr && val2 !== "-") {
      return BE_ORDINAL.Must;
    }
  }
  return BE_ORDINAL.Not;
}
var internalOptionCreatorMap = createHashMap();
function concatInternalOptions(ecModel, mainType, newCmptOptionList) {
  var internalOptionCreator = internalOptionCreatorMap.get(mainType);
  if (!internalOptionCreator) {
    return newCmptOptionList;
  }
  var internalOptions = internalOptionCreator(ecModel);
  if (!internalOptions) {
    return newCmptOptionList;
  }
  return newCmptOptionList.concat(internalOptions);
}
var innerColor = makeInner();
makeInner();
var PaletteMixin = function() {
  function PaletteMixin2() {
  }
  PaletteMixin2.prototype.getColorFromPalette = function(name, scope, requestNum) {
    var defaultPalette = normalizeToArray(this.get("color", true));
    var layeredPalette = this.get("colorLayer", true);
    return getFromPalette(this, innerColor, defaultPalette, layeredPalette, name, scope, requestNum);
  };
  PaletteMixin2.prototype.clearColorPalette = function() {
    clearPalette(this, innerColor);
  };
  return PaletteMixin2;
}();
function getNearestPalette(palettes, requestColorNum) {
  var paletteNum = palettes.length;
  for (var i = 0; i < paletteNum; i++) {
    if (palettes[i].length > requestColorNum) {
      return palettes[i];
    }
  }
  return palettes[paletteNum - 1];
}
function getFromPalette(that, inner2, defaultPalette, layeredPalette, name, scope, requestNum) {
  scope = scope || that;
  var scopeFields = inner2(scope);
  var paletteIdx = scopeFields.paletteIdx || 0;
  var paletteNameMap = scopeFields.paletteNameMap = scopeFields.paletteNameMap || {};
  if (paletteNameMap.hasOwnProperty(name)) {
    return paletteNameMap[name];
  }
  var palette = requestNum == null || !layeredPalette ? defaultPalette : getNearestPalette(layeredPalette, requestNum);
  palette = palette || defaultPalette;
  if (!palette || !palette.length) {
    return;
  }
  var pickedPaletteItem = palette[paletteIdx];
  if (name) {
    paletteNameMap[name] = pickedPaletteItem;
  }
  scopeFields.paletteIdx = (paletteIdx + 1) % palette.length;
  return pickedPaletteItem;
}
function clearPalette(that, inner2) {
  inner2(that).paletteIdx = 0;
  inner2(that).paletteNameMap = {};
}
var reCreateSeriesIndices;
var assertSeriesInitialized;
var initBase;
var OPTION_INNER_KEY = "\0_ec_inner";
var OPTION_INNER_VALUE = 1;
var GlobalModel = function(_super) {
  __extends(GlobalModel2, _super);
  function GlobalModel2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  GlobalModel2.prototype.init = function(option, parentModel, ecModel, theme2, locale, optionManager) {
    theme2 = theme2 || {};
    this.option = null;
    this._theme = new Model$1(theme2);
    this._locale = new Model$1(locale);
    this._optionManager = optionManager;
  };
  GlobalModel2.prototype.setOption = function(option, opts, optionPreprocessorFuncs2) {
    var innerOpt = normalizeSetOptionInput(opts);
    this._optionManager.setOption(option, optionPreprocessorFuncs2, innerOpt);
    this._resetOption(null, innerOpt);
  };
  GlobalModel2.prototype.resetOption = function(type, opt) {
    return this._resetOption(type, normalizeSetOptionInput(opt));
  };
  GlobalModel2.prototype._resetOption = function(type, opt) {
    var optionChanged = false;
    var optionManager = this._optionManager;
    if (!type || type === "recreate") {
      var baseOption = optionManager.mountOption(type === "recreate");
      if (!this.option || type === "recreate") {
        initBase(this, baseOption);
      } else {
        this.restoreData();
        this._mergeOption(baseOption, opt);
      }
      optionChanged = true;
    }
    if (type === "timeline" || type === "media") {
      this.restoreData();
    }
    if (!type || type === "recreate" || type === "timeline") {
      var timelineOption = optionManager.getTimelineOption(this);
      if (timelineOption) {
        optionChanged = true;
        this._mergeOption(timelineOption, opt);
      }
    }
    if (!type || type === "recreate" || type === "media") {
      var mediaOptions = optionManager.getMediaOption(this);
      if (mediaOptions.length) {
        each$4(mediaOptions, function(mediaOption) {
          optionChanged = true;
          this._mergeOption(mediaOption, opt);
        }, this);
      }
    }
    return optionChanged;
  };
  GlobalModel2.prototype.mergeOption = function(option) {
    this._mergeOption(option, null);
  };
  GlobalModel2.prototype._mergeOption = function(newOption, opt) {
    var option = this.option;
    var componentsMap = this._componentsMap;
    var componentsCount = this._componentsCount;
    var newCmptTypes = [];
    var newCmptTypeMap = createHashMap();
    var replaceMergeMainTypeMap = opt && opt.replaceMergeMainTypeMap;
    resetSourceDefaulter(this);
    each$4(newOption, function(componentOption, mainType) {
      if (componentOption == null) {
        return;
      }
      if (!ComponentModel$1.hasClass(mainType)) {
        option[mainType] = option[mainType] == null ? clone$2(componentOption) : merge(option[mainType], componentOption, true);
      } else if (mainType) {
        newCmptTypes.push(mainType);
        newCmptTypeMap.set(mainType, true);
      }
    });
    if (replaceMergeMainTypeMap) {
      replaceMergeMainTypeMap.each(function(val, mainTypeInReplaceMerge) {
        if (ComponentModel$1.hasClass(mainTypeInReplaceMerge) && !newCmptTypeMap.get(mainTypeInReplaceMerge)) {
          newCmptTypes.push(mainTypeInReplaceMerge);
          newCmptTypeMap.set(mainTypeInReplaceMerge, true);
        }
      });
    }
    ComponentModel$1.topologicalTravel(newCmptTypes, ComponentModel$1.getAllClassMainTypes(), visitComponent, this);
    function visitComponent(mainType) {
      var newCmptOptionList = concatInternalOptions(this, mainType, normalizeToArray(newOption[mainType]));
      var oldCmptList = componentsMap.get(mainType);
      var mergeMode = !oldCmptList ? "replaceAll" : replaceMergeMainTypeMap && replaceMergeMainTypeMap.get(mainType) ? "replaceMerge" : "normalMerge";
      var mappingResult = mappingToExists(oldCmptList, newCmptOptionList, mergeMode);
      setComponentTypeToKeyInfo(mappingResult, mainType, ComponentModel$1);
      option[mainType] = null;
      componentsMap.set(mainType, null);
      componentsCount.set(mainType, 0);
      var optionsByMainType = [];
      var cmptsByMainType = [];
      var cmptsCountByMainType = 0;
      var tooltipExists;
      each$4(mappingResult, function(resultItem, index) {
        var componentModel = resultItem.existing;
        var newCmptOption = resultItem.newOption;
        if (!newCmptOption) {
          if (componentModel) {
            componentModel.mergeOption({}, this);
            componentModel.optionUpdated({}, false);
          }
        } else {
          var isSeriesType = mainType === "series";
          var ComponentModelClass = ComponentModel$1.getClass(
            mainType,
            resultItem.keyInfo.subType,
            !isSeriesType
          );
          if (!ComponentModelClass) {
            return;
          }
          if (mainType === "tooltip") {
            if (tooltipExists) {
              return;
            }
            tooltipExists = true;
          }
          if (componentModel && componentModel.constructor === ComponentModelClass) {
            componentModel.name = resultItem.keyInfo.name;
            componentModel.mergeOption(newCmptOption, this);
            componentModel.optionUpdated(newCmptOption, false);
          } else {
            var extraOpt = extend({
              componentIndex: index
            }, resultItem.keyInfo);
            componentModel = new ComponentModelClass(newCmptOption, this, this, extraOpt);
            extend(componentModel, extraOpt);
            if (resultItem.brandNew) {
              componentModel.__requireNewView = true;
            }
            componentModel.init(newCmptOption, this, this);
            componentModel.optionUpdated(null, true);
          }
        }
        if (componentModel) {
          optionsByMainType.push(componentModel.option);
          cmptsByMainType.push(componentModel);
          cmptsCountByMainType++;
        } else {
          optionsByMainType.push(void 0);
          cmptsByMainType.push(void 0);
        }
      }, this);
      option[mainType] = optionsByMainType;
      componentsMap.set(mainType, cmptsByMainType);
      componentsCount.set(mainType, cmptsCountByMainType);
      if (mainType === "series") {
        reCreateSeriesIndices(this);
      }
    }
    if (!this._seriesIndices) {
      reCreateSeriesIndices(this);
    }
  };
  GlobalModel2.prototype.getOption = function() {
    var option = clone$2(this.option);
    each$4(option, function(optInMainType, mainType) {
      if (ComponentModel$1.hasClass(mainType)) {
        var opts = normalizeToArray(optInMainType);
        var realLen = opts.length;
        var metNonInner = false;
        for (var i = realLen - 1; i >= 0; i--) {
          if (opts[i] && !isComponentIdInternal(opts[i])) {
            metNonInner = true;
          } else {
            opts[i] = null;
            !metNonInner && realLen--;
          }
        }
        opts.length = realLen;
        option[mainType] = opts;
      }
    });
    delete option[OPTION_INNER_KEY];
    return option;
  };
  GlobalModel2.prototype.getTheme = function() {
    return this._theme;
  };
  GlobalModel2.prototype.getLocaleModel = function() {
    return this._locale;
  };
  GlobalModel2.prototype.setUpdatePayload = function(payload) {
    this._payload = payload;
  };
  GlobalModel2.prototype.getUpdatePayload = function() {
    return this._payload;
  };
  GlobalModel2.prototype.getComponent = function(mainType, idx) {
    var list = this._componentsMap.get(mainType);
    if (list) {
      var cmpt = list[idx || 0];
      if (cmpt) {
        return cmpt;
      } else if (idx == null) {
        for (var i = 0; i < list.length; i++) {
          if (list[i]) {
            return list[i];
          }
        }
      }
    }
  };
  GlobalModel2.prototype.queryComponents = function(condition) {
    var mainType = condition.mainType;
    if (!mainType) {
      return [];
    }
    var index = condition.index;
    var id = condition.id;
    var name = condition.name;
    var cmpts = this._componentsMap.get(mainType);
    if (!cmpts || !cmpts.length) {
      return [];
    }
    var result;
    if (index != null) {
      result = [];
      each$4(normalizeToArray(index), function(idx) {
        cmpts[idx] && result.push(cmpts[idx]);
      });
    } else if (id != null) {
      result = queryByIdOrName("id", id, cmpts);
    } else if (name != null) {
      result = queryByIdOrName("name", name, cmpts);
    } else {
      result = filter(cmpts, function(cmpt) {
        return !!cmpt;
      });
    }
    return filterBySubType(result, condition);
  };
  GlobalModel2.prototype.findComponents = function(condition) {
    var query = condition.query;
    var mainType = condition.mainType;
    var queryCond = getQueryCond(query);
    var result = queryCond ? this.queryComponents(queryCond) : filter(this._componentsMap.get(mainType), function(cmpt) {
      return !!cmpt;
    });
    return doFilter(filterBySubType(result, condition));
    function getQueryCond(q) {
      var indexAttr = mainType + "Index";
      var idAttr = mainType + "Id";
      var nameAttr = mainType + "Name";
      return q && (q[indexAttr] != null || q[idAttr] != null || q[nameAttr] != null) ? {
        mainType,
        index: q[indexAttr],
        id: q[idAttr],
        name: q[nameAttr]
      } : null;
    }
    function doFilter(res) {
      return condition.filter ? filter(res, condition.filter) : res;
    }
  };
  GlobalModel2.prototype.eachComponent = function(mainType, cb, context) {
    var componentsMap = this._componentsMap;
    if (isFunction(mainType)) {
      var ctxForAll_1 = cb;
      var cbForAll_1 = mainType;
      componentsMap.each(function(cmpts2, componentType) {
        for (var i2 = 0; cmpts2 && i2 < cmpts2.length; i2++) {
          var cmpt2 = cmpts2[i2];
          cmpt2 && cbForAll_1.call(ctxForAll_1, componentType, cmpt2, cmpt2.componentIndex);
        }
      });
    } else {
      var cmpts = isString(mainType) ? componentsMap.get(mainType) : isObject$2(mainType) ? this.findComponents(mainType) : null;
      for (var i = 0; cmpts && i < cmpts.length; i++) {
        var cmpt = cmpts[i];
        cmpt && cb.call(context, cmpt, cmpt.componentIndex);
      }
    }
  };
  GlobalModel2.prototype.getSeriesByName = function(name) {
    var nameStr = convertOptionIdName(name, null);
    return filter(this._componentsMap.get("series"), function(oneSeries) {
      return !!oneSeries && nameStr != null && oneSeries.name === nameStr;
    });
  };
  GlobalModel2.prototype.getSeriesByIndex = function(seriesIndex) {
    return this._componentsMap.get("series")[seriesIndex];
  };
  GlobalModel2.prototype.getSeriesByType = function(subType) {
    return filter(this._componentsMap.get("series"), function(oneSeries) {
      return !!oneSeries && oneSeries.subType === subType;
    });
  };
  GlobalModel2.prototype.getSeries = function() {
    return filter(this._componentsMap.get("series"), function(oneSeries) {
      return !!oneSeries;
    });
  };
  GlobalModel2.prototype.getSeriesCount = function() {
    return this._componentsCount.get("series");
  };
  GlobalModel2.prototype.eachSeries = function(cb, context) {
    assertSeriesInitialized(this);
    each$4(this._seriesIndices, function(rawSeriesIndex) {
      var series = this._componentsMap.get("series")[rawSeriesIndex];
      cb.call(context, series, rawSeriesIndex);
    }, this);
  };
  GlobalModel2.prototype.eachRawSeries = function(cb, context) {
    each$4(this._componentsMap.get("series"), function(series) {
      series && cb.call(context, series, series.componentIndex);
    });
  };
  GlobalModel2.prototype.eachSeriesByType = function(subType, cb, context) {
    assertSeriesInitialized(this);
    each$4(this._seriesIndices, function(rawSeriesIndex) {
      var series = this._componentsMap.get("series")[rawSeriesIndex];
      if (series.subType === subType) {
        cb.call(context, series, rawSeriesIndex);
      }
    }, this);
  };
  GlobalModel2.prototype.eachRawSeriesByType = function(subType, cb, context) {
    return each$4(this.getSeriesByType(subType), cb, context);
  };
  GlobalModel2.prototype.isSeriesFiltered = function(seriesModel) {
    assertSeriesInitialized(this);
    return this._seriesIndicesMap.get(seriesModel.componentIndex) == null;
  };
  GlobalModel2.prototype.getCurrentSeriesIndices = function() {
    return (this._seriesIndices || []).slice();
  };
  GlobalModel2.prototype.filterSeries = function(cb, context) {
    assertSeriesInitialized(this);
    var newSeriesIndices = [];
    each$4(this._seriesIndices, function(seriesRawIdx) {
      var series = this._componentsMap.get("series")[seriesRawIdx];
      cb.call(context, series, seriesRawIdx) && newSeriesIndices.push(seriesRawIdx);
    }, this);
    this._seriesIndices = newSeriesIndices;
    this._seriesIndicesMap = createHashMap(newSeriesIndices);
  };
  GlobalModel2.prototype.restoreData = function(payload) {
    reCreateSeriesIndices(this);
    var componentsMap = this._componentsMap;
    var componentTypes = [];
    componentsMap.each(function(components, componentType) {
      if (ComponentModel$1.hasClass(componentType)) {
        componentTypes.push(componentType);
      }
    });
    ComponentModel$1.topologicalTravel(componentTypes, ComponentModel$1.getAllClassMainTypes(), function(componentType) {
      each$4(componentsMap.get(componentType), function(component) {
        if (component && (componentType !== "series" || !isNotTargetSeries(component, payload))) {
          component.restoreData();
        }
      });
    });
  };
  GlobalModel2.internalField = function() {
    reCreateSeriesIndices = function(ecModel) {
      var seriesIndices = ecModel._seriesIndices = [];
      each$4(ecModel._componentsMap.get("series"), function(series) {
        series && seriesIndices.push(series.componentIndex);
      });
      ecModel._seriesIndicesMap = createHashMap(seriesIndices);
    };
    assertSeriesInitialized = function(ecModel) {
    };
    initBase = function(ecModel, baseOption) {
      ecModel.option = {};
      ecModel.option[OPTION_INNER_KEY] = OPTION_INNER_VALUE;
      ecModel._componentsMap = createHashMap({
        series: []
      });
      ecModel._componentsCount = createHashMap();
      var airaOption = baseOption.aria;
      if (isObject$2(airaOption) && airaOption.enabled == null) {
        airaOption.enabled = true;
      }
      mergeTheme(baseOption, ecModel._theme.option);
      merge(baseOption, globalDefault, false);
      ecModel._mergeOption(baseOption, null);
    };
  }();
  return GlobalModel2;
}(Model$1);
function isNotTargetSeries(seriesModel, payload) {
  if (payload) {
    var index = payload.seriesIndex;
    var id = payload.seriesId;
    var name_1 = payload.seriesName;
    return index != null && seriesModel.componentIndex !== index || id != null && seriesModel.id !== id || name_1 != null && seriesModel.name !== name_1;
  }
}
function mergeTheme(option, theme2) {
  var notMergeColorLayer = option.color && !option.colorLayer;
  each$4(theme2, function(themeItem, name) {
    if (name === "colorLayer" && notMergeColorLayer) {
      return;
    }
    if (!ComponentModel$1.hasClass(name)) {
      if (typeof themeItem === "object") {
        option[name] = !option[name] ? clone$2(themeItem) : merge(option[name], themeItem, false);
      } else {
        if (option[name] == null) {
          option[name] = themeItem;
        }
      }
    }
  });
}
function queryByIdOrName(attr, idOrName, cmpts) {
  if (isArray(idOrName)) {
    var keyMap_1 = createHashMap();
    each$4(idOrName, function(idOrNameItem) {
      if (idOrNameItem != null) {
        var idName = convertOptionIdName(idOrNameItem, null);
        idName != null && keyMap_1.set(idOrNameItem, true);
      }
    });
    return filter(cmpts, function(cmpt) {
      return cmpt && keyMap_1.get(cmpt[attr]);
    });
  } else {
    var idName_1 = convertOptionIdName(idOrName, null);
    return filter(cmpts, function(cmpt) {
      return cmpt && idName_1 != null && cmpt[attr] === idName_1;
    });
  }
}
function filterBySubType(components, condition) {
  return condition.hasOwnProperty("subType") ? filter(components, function(cmpt) {
    return cmpt && cmpt.subType === condition.subType;
  }) : components;
}
function normalizeSetOptionInput(opts) {
  var replaceMergeMainTypeMap = createHashMap();
  opts && each$4(normalizeToArray(opts.replaceMerge), function(mainType) {
    replaceMergeMainTypeMap.set(mainType, true);
  });
  return {
    replaceMergeMainTypeMap
  };
}
mixin(GlobalModel, PaletteMixin);
var GlobalModel$1 = GlobalModel;
var availableMethods = [
  "getDom",
  "getZr",
  "getWidth",
  "getHeight",
  "getDevicePixelRatio",
  "dispatchAction",
  "isSSR",
  "isDisposed",
  "on",
  "off",
  "getDataURL",
  "getConnectedDataURL",
  "getOption",
  "getId",
  "updateLabelLayout"
];
var ExtensionAPI = function() {
  function ExtensionAPI2(ecInstance) {
    each$4(availableMethods, function(methodName) {
      this[methodName] = bind$1(ecInstance[methodName], ecInstance);
    }, this);
  }
  return ExtensionAPI2;
}();
var ExtensionAPI$1 = ExtensionAPI;
var coordinateSystemCreators = {};
var CoordinateSystemManager = function() {
  function CoordinateSystemManager2() {
    this._coordinateSystems = [];
  }
  CoordinateSystemManager2.prototype.create = function(ecModel, api) {
    var coordinateSystems = [];
    each$4(coordinateSystemCreators, function(creator, type) {
      var list = creator.create(ecModel, api);
      coordinateSystems = coordinateSystems.concat(list || []);
    });
    this._coordinateSystems = coordinateSystems;
  };
  CoordinateSystemManager2.prototype.update = function(ecModel, api) {
    each$4(this._coordinateSystems, function(coordSys) {
      coordSys.update && coordSys.update(ecModel, api);
    });
  };
  CoordinateSystemManager2.prototype.getCoordinateSystems = function() {
    return this._coordinateSystems.slice();
  };
  CoordinateSystemManager2.register = function(type, creator) {
    coordinateSystemCreators[type] = creator;
  };
  CoordinateSystemManager2.get = function(type) {
    return coordinateSystemCreators[type];
  };
  return CoordinateSystemManager2;
}();
var CoordinateSystem = CoordinateSystemManager;
var QUERY_REG = /^(min|max)?(.+)$/;
var OptionManager = function() {
  function OptionManager2(api) {
    this._timelineOptions = [];
    this._mediaList = [];
    this._currentMediaIndices = [];
    this._api = api;
  }
  OptionManager2.prototype.setOption = function(rawOption, optionPreprocessorFuncs2, opt) {
    if (rawOption) {
      each$4(normalizeToArray(rawOption.series), function(series) {
        series && series.data && isTypedArray(series.data) && setAsPrimitive(series.data);
      });
      each$4(normalizeToArray(rawOption.dataset), function(dataset) {
        dataset && dataset.source && isTypedArray(dataset.source) && setAsPrimitive(dataset.source);
      });
    }
    rawOption = clone$2(rawOption);
    var optionBackup = this._optionBackup;
    var newParsedOption = parseRawOption(rawOption, optionPreprocessorFuncs2, !optionBackup);
    this._newBaseOption = newParsedOption.baseOption;
    if (optionBackup) {
      if (newParsedOption.timelineOptions.length) {
        optionBackup.timelineOptions = newParsedOption.timelineOptions;
      }
      if (newParsedOption.mediaList.length) {
        optionBackup.mediaList = newParsedOption.mediaList;
      }
      if (newParsedOption.mediaDefault) {
        optionBackup.mediaDefault = newParsedOption.mediaDefault;
      }
    } else {
      this._optionBackup = newParsedOption;
    }
  };
  OptionManager2.prototype.mountOption = function(isRecreate) {
    var optionBackup = this._optionBackup;
    this._timelineOptions = optionBackup.timelineOptions;
    this._mediaList = optionBackup.mediaList;
    this._mediaDefault = optionBackup.mediaDefault;
    this._currentMediaIndices = [];
    return clone$2(isRecreate ? optionBackup.baseOption : this._newBaseOption);
  };
  OptionManager2.prototype.getTimelineOption = function(ecModel) {
    var option;
    var timelineOptions = this._timelineOptions;
    if (timelineOptions.length) {
      var timelineModel = ecModel.getComponent("timeline");
      if (timelineModel) {
        option = clone$2(
          timelineOptions[timelineModel.getCurrentIndex()]
        );
      }
    }
    return option;
  };
  OptionManager2.prototype.getMediaOption = function(ecModel) {
    var ecWidth = this._api.getWidth();
    var ecHeight = this._api.getHeight();
    var mediaList = this._mediaList;
    var mediaDefault = this._mediaDefault;
    var indices = [];
    var result = [];
    if (!mediaList.length && !mediaDefault) {
      return result;
    }
    for (var i = 0, len2 = mediaList.length; i < len2; i++) {
      if (applyMediaQuery(mediaList[i].query, ecWidth, ecHeight)) {
        indices.push(i);
      }
    }
    if (!indices.length && mediaDefault) {
      indices = [-1];
    }
    if (indices.length && !indicesEquals(indices, this._currentMediaIndices)) {
      result = map$1(indices, function(index) {
        return clone$2(index === -1 ? mediaDefault.option : mediaList[index].option);
      });
    }
    this._currentMediaIndices = indices;
    return result;
  };
  return OptionManager2;
}();
function parseRawOption(rawOption, optionPreprocessorFuncs2, isNew) {
  var mediaList = [];
  var mediaDefault;
  var baseOption;
  var declaredBaseOption = rawOption.baseOption;
  var timelineOnRoot = rawOption.timeline;
  var timelineOptionsOnRoot = rawOption.options;
  var mediaOnRoot = rawOption.media;
  var hasMedia = !!rawOption.media;
  var hasTimeline = !!(timelineOptionsOnRoot || timelineOnRoot || declaredBaseOption && declaredBaseOption.timeline);
  if (declaredBaseOption) {
    baseOption = declaredBaseOption;
    if (!baseOption.timeline) {
      baseOption.timeline = timelineOnRoot;
    }
  } else {
    if (hasTimeline || hasMedia) {
      rawOption.options = rawOption.media = null;
    }
    baseOption = rawOption;
  }
  if (hasMedia) {
    if (isArray(mediaOnRoot)) {
      each$4(mediaOnRoot, function(singleMedia) {
        if (singleMedia && singleMedia.option) {
          if (singleMedia.query) {
            mediaList.push(singleMedia);
          } else if (!mediaDefault) {
            mediaDefault = singleMedia;
          }
        }
      });
    }
  }
  doPreprocess(baseOption);
  each$4(timelineOptionsOnRoot, function(option) {
    return doPreprocess(option);
  });
  each$4(mediaList, function(media) {
    return doPreprocess(media.option);
  });
  function doPreprocess(option) {
    each$4(optionPreprocessorFuncs2, function(preProcess) {
      preProcess(option, isNew);
    });
  }
  return {
    baseOption,
    timelineOptions: timelineOptionsOnRoot || [],
    mediaDefault,
    mediaList
  };
}
function applyMediaQuery(query, ecWidth, ecHeight) {
  var realMap = {
    width: ecWidth,
    height: ecHeight,
    aspectratio: ecWidth / ecHeight
  };
  var applicable = true;
  each$4(query, function(value, attr) {
    var matched = attr.match(QUERY_REG);
    if (!matched || !matched[1] || !matched[2]) {
      return;
    }
    var operator = matched[1];
    var realAttr = matched[2].toLowerCase();
    if (!compare(realMap[realAttr], value, operator)) {
      applicable = false;
    }
  });
  return applicable;
}
function compare(real, expect, operator) {
  if (operator === "min") {
    return real >= expect;
  } else if (operator === "max") {
    return real <= expect;
  } else {
    return real === expect;
  }
}
function indicesEquals(indices1, indices2) {
  return indices1.join(",") === indices2.join(",");
}
var OptionManager$1 = OptionManager;
var each$2 = each$4;
var isObject$1 = isObject$2;
var POSSIBLE_STYLES = ["areaStyle", "lineStyle", "nodeStyle", "linkStyle", "chordStyle", "label", "labelLine"];
function compatEC2ItemStyle(opt) {
  var itemStyleOpt = opt && opt.itemStyle;
  if (!itemStyleOpt) {
    return;
  }
  for (var i = 0, len2 = POSSIBLE_STYLES.length; i < len2; i++) {
    var styleName = POSSIBLE_STYLES[i];
    var normalItemStyleOpt = itemStyleOpt.normal;
    var emphasisItemStyleOpt = itemStyleOpt.emphasis;
    if (normalItemStyleOpt && normalItemStyleOpt[styleName]) {
      opt[styleName] = opt[styleName] || {};
      if (!opt[styleName].normal) {
        opt[styleName].normal = normalItemStyleOpt[styleName];
      } else {
        merge(opt[styleName].normal, normalItemStyleOpt[styleName]);
      }
      normalItemStyleOpt[styleName] = null;
    }
    if (emphasisItemStyleOpt && emphasisItemStyleOpt[styleName]) {
      opt[styleName] = opt[styleName] || {};
      if (!opt[styleName].emphasis) {
        opt[styleName].emphasis = emphasisItemStyleOpt[styleName];
      } else {
        merge(opt[styleName].emphasis, emphasisItemStyleOpt[styleName]);
      }
      emphasisItemStyleOpt[styleName] = null;
    }
  }
}
function convertNormalEmphasis(opt, optType, useExtend) {
  if (opt && opt[optType] && (opt[optType].normal || opt[optType].emphasis)) {
    var normalOpt = opt[optType].normal;
    var emphasisOpt = opt[optType].emphasis;
    if (normalOpt) {
      if (useExtend) {
        opt[optType].normal = opt[optType].emphasis = null;
        defaults(opt[optType], normalOpt);
      } else {
        opt[optType] = normalOpt;
      }
    }
    if (emphasisOpt) {
      opt.emphasis = opt.emphasis || {};
      opt.emphasis[optType] = emphasisOpt;
      if (emphasisOpt.focus) {
        opt.emphasis.focus = emphasisOpt.focus;
      }
      if (emphasisOpt.blurScope) {
        opt.emphasis.blurScope = emphasisOpt.blurScope;
      }
    }
  }
}
function removeEC3NormalStatus(opt) {
  convertNormalEmphasis(opt, "itemStyle");
  convertNormalEmphasis(opt, "lineStyle");
  convertNormalEmphasis(opt, "areaStyle");
  convertNormalEmphasis(opt, "label");
  convertNormalEmphasis(opt, "labelLine");
  convertNormalEmphasis(opt, "upperLabel");
  convertNormalEmphasis(opt, "edgeLabel");
}
function compatTextStyle(opt, propName) {
  var labelOptSingle = isObject$1(opt) && opt[propName];
  var textStyle = isObject$1(labelOptSingle) && labelOptSingle.textStyle;
  if (textStyle) {
    for (var i = 0, len2 = TEXT_STYLE_OPTIONS.length; i < len2; i++) {
      var textPropName = TEXT_STYLE_OPTIONS[i];
      if (textStyle.hasOwnProperty(textPropName)) {
        labelOptSingle[textPropName] = textStyle[textPropName];
      }
    }
  }
}
function compatEC3CommonStyles(opt) {
  if (opt) {
    removeEC3NormalStatus(opt);
    compatTextStyle(opt, "label");
    opt.emphasis && compatTextStyle(opt.emphasis, "label");
  }
}
function processSeries(seriesOpt) {
  if (!isObject$1(seriesOpt)) {
    return;
  }
  compatEC2ItemStyle(seriesOpt);
  removeEC3NormalStatus(seriesOpt);
  compatTextStyle(seriesOpt, "label");
  compatTextStyle(seriesOpt, "upperLabel");
  compatTextStyle(seriesOpt, "edgeLabel");
  if (seriesOpt.emphasis) {
    compatTextStyle(seriesOpt.emphasis, "label");
    compatTextStyle(seriesOpt.emphasis, "upperLabel");
    compatTextStyle(seriesOpt.emphasis, "edgeLabel");
  }
  var markPoint = seriesOpt.markPoint;
  if (markPoint) {
    compatEC2ItemStyle(markPoint);
    compatEC3CommonStyles(markPoint);
  }
  var markLine = seriesOpt.markLine;
  if (markLine) {
    compatEC2ItemStyle(markLine);
    compatEC3CommonStyles(markLine);
  }
  var markArea = seriesOpt.markArea;
  if (markArea) {
    compatEC3CommonStyles(markArea);
  }
  var data = seriesOpt.data;
  if (seriesOpt.type === "graph") {
    data = data || seriesOpt.nodes;
    var edgeData = seriesOpt.links || seriesOpt.edges;
    if (edgeData && !isTypedArray(edgeData)) {
      for (var i = 0; i < edgeData.length; i++) {
        compatEC3CommonStyles(edgeData[i]);
      }
    }
    each$4(seriesOpt.categories, function(opt) {
      removeEC3NormalStatus(opt);
    });
  }
  if (data && !isTypedArray(data)) {
    for (var i = 0; i < data.length; i++) {
      compatEC3CommonStyles(data[i]);
    }
  }
  markPoint = seriesOpt.markPoint;
  if (markPoint && markPoint.data) {
    var mpData = markPoint.data;
    for (var i = 0; i < mpData.length; i++) {
      compatEC3CommonStyles(mpData[i]);
    }
  }
  markLine = seriesOpt.markLine;
  if (markLine && markLine.data) {
    var mlData = markLine.data;
    for (var i = 0; i < mlData.length; i++) {
      if (isArray(mlData[i])) {
        compatEC3CommonStyles(mlData[i][0]);
        compatEC3CommonStyles(mlData[i][1]);
      } else {
        compatEC3CommonStyles(mlData[i]);
      }
    }
  }
  if (seriesOpt.type === "gauge") {
    compatTextStyle(seriesOpt, "axisLabel");
    compatTextStyle(seriesOpt, "title");
    compatTextStyle(seriesOpt, "detail");
  } else if (seriesOpt.type === "treemap") {
    convertNormalEmphasis(seriesOpt.breadcrumb, "itemStyle");
    each$4(seriesOpt.levels, function(opt) {
      removeEC3NormalStatus(opt);
    });
  } else if (seriesOpt.type === "tree") {
    removeEC3NormalStatus(seriesOpt.leaves);
  }
}
function toArr(o) {
  return isArray(o) ? o : o ? [o] : [];
}
function toObj(o) {
  return (isArray(o) ? o[0] : o) || {};
}
function globalCompatStyle(option, isTheme) {
  each$2(toArr(option.series), function(seriesOpt) {
    isObject$1(seriesOpt) && processSeries(seriesOpt);
  });
  var axes = ["xAxis", "yAxis", "radiusAxis", "angleAxis", "singleAxis", "parallelAxis", "radar"];
  isTheme && axes.push("valueAxis", "categoryAxis", "logAxis", "timeAxis");
  each$2(axes, function(axisName) {
    each$2(toArr(option[axisName]), function(axisOpt) {
      if (axisOpt) {
        compatTextStyle(axisOpt, "axisLabel");
        compatTextStyle(axisOpt.axisPointer, "label");
      }
    });
  });
  each$2(toArr(option.parallel), function(parallelOpt) {
    var parallelAxisDefault = parallelOpt && parallelOpt.parallelAxisDefault;
    compatTextStyle(parallelAxisDefault, "axisLabel");
    compatTextStyle(parallelAxisDefault && parallelAxisDefault.axisPointer, "label");
  });
  each$2(toArr(option.calendar), function(calendarOpt) {
    convertNormalEmphasis(calendarOpt, "itemStyle");
    compatTextStyle(calendarOpt, "dayLabel");
    compatTextStyle(calendarOpt, "monthLabel");
    compatTextStyle(calendarOpt, "yearLabel");
  });
  each$2(toArr(option.radar), function(radarOpt) {
    compatTextStyle(radarOpt, "name");
    if (radarOpt.name && radarOpt.axisName == null) {
      radarOpt.axisName = radarOpt.name;
      delete radarOpt.name;
    }
    if (radarOpt.nameGap != null && radarOpt.axisNameGap == null) {
      radarOpt.axisNameGap = radarOpt.nameGap;
      delete radarOpt.nameGap;
    }
  });
  each$2(toArr(option.geo), function(geoOpt) {
    if (isObject$1(geoOpt)) {
      compatEC3CommonStyles(geoOpt);
      each$2(toArr(geoOpt.regions), function(regionObj) {
        compatEC3CommonStyles(regionObj);
      });
    }
  });
  each$2(toArr(option.timeline), function(timelineOpt) {
    compatEC3CommonStyles(timelineOpt);
    convertNormalEmphasis(timelineOpt, "label");
    convertNormalEmphasis(timelineOpt, "itemStyle");
    convertNormalEmphasis(timelineOpt, "controlStyle", true);
    var data = timelineOpt.data;
    isArray(data) && each$4(data, function(item) {
      if (isObject$2(item)) {
        convertNormalEmphasis(item, "label");
        convertNormalEmphasis(item, "itemStyle");
      }
    });
  });
  each$2(toArr(option.toolbox), function(toolboxOpt) {
    convertNormalEmphasis(toolboxOpt, "iconStyle");
    each$2(toolboxOpt.feature, function(featureOpt) {
      convertNormalEmphasis(featureOpt, "iconStyle");
    });
  });
  compatTextStyle(toObj(option.axisPointer), "label");
  compatTextStyle(toObj(option.tooltip).axisPointer, "label");
}
function get(opt, path) {
  var pathArr = path.split(",");
  var obj = opt;
  for (var i = 0; i < pathArr.length; i++) {
    obj = obj && obj[pathArr[i]];
    if (obj == null) {
      break;
    }
  }
  return obj;
}
function set(opt, path, val, overwrite) {
  var pathArr = path.split(",");
  var obj = opt;
  var key;
  var i = 0;
  for (; i < pathArr.length - 1; i++) {
    key = pathArr[i];
    if (obj[key] == null) {
      obj[key] = {};
    }
    obj = obj[key];
  }
  if (overwrite || obj[pathArr[i]] == null) {
    obj[pathArr[i]] = val;
  }
}
function compatLayoutProperties(option) {
  option && each$4(LAYOUT_PROPERTIES, function(prop) {
    if (prop[0] in option && !(prop[1] in option)) {
      option[prop[1]] = option[prop[0]];
    }
  });
}
var LAYOUT_PROPERTIES = [["x", "left"], ["y", "top"], ["x2", "right"], ["y2", "bottom"]];
var COMPATITABLE_COMPONENTS = ["grid", "geo", "parallel", "legend", "toolbox", "title", "visualMap", "dataZoom", "timeline"];
var BAR_ITEM_STYLE_MAP = [["borderRadius", "barBorderRadius"], ["borderColor", "barBorderColor"], ["borderWidth", "barBorderWidth"]];
function compatBarItemStyle(option) {
  var itemStyle = option && option.itemStyle;
  if (itemStyle) {
    for (var i = 0; i < BAR_ITEM_STYLE_MAP.length; i++) {
      var oldName = BAR_ITEM_STYLE_MAP[i][1];
      var newName = BAR_ITEM_STYLE_MAP[i][0];
      if (itemStyle[oldName] != null) {
        itemStyle[newName] = itemStyle[oldName];
      }
    }
  }
}
function compatPieLabel(option) {
  if (!option) {
    return;
  }
  if (option.alignTo === "edge" && option.margin != null && option.edgeDistance == null) {
    option.edgeDistance = option.margin;
  }
}
function compatSunburstState(option) {
  if (!option) {
    return;
  }
  if (option.downplay && !option.blur) {
    option.blur = option.downplay;
  }
}
function compatGraphFocus(option) {
  if (!option) {
    return;
  }
  if (option.focusNodeAdjacency != null) {
    option.emphasis = option.emphasis || {};
    if (option.emphasis.focus == null) {
      option.emphasis.focus = "adjacency";
    }
  }
}
function traverseTree(data, cb) {
  if (data) {
    for (var i = 0; i < data.length; i++) {
      cb(data[i]);
      data[i] && traverseTree(data[i].children, cb);
    }
  }
}
function globalBackwardCompat(option, isTheme) {
  globalCompatStyle(option, isTheme);
  option.series = normalizeToArray(option.series);
  each$4(option.series, function(seriesOpt) {
    if (!isObject$2(seriesOpt)) {
      return;
    }
    var seriesType2 = seriesOpt.type;
    if (seriesType2 === "line") {
      if (seriesOpt.clipOverflow != null) {
        seriesOpt.clip = seriesOpt.clipOverflow;
      }
    } else if (seriesType2 === "pie" || seriesType2 === "gauge") {
      if (seriesOpt.clockWise != null) {
        seriesOpt.clockwise = seriesOpt.clockWise;
      }
      compatPieLabel(seriesOpt.label);
      var data = seriesOpt.data;
      if (data && !isTypedArray(data)) {
        for (var i = 0; i < data.length; i++) {
          compatPieLabel(data[i]);
        }
      }
      if (seriesOpt.hoverOffset != null) {
        seriesOpt.emphasis = seriesOpt.emphasis || {};
        if (seriesOpt.emphasis.scaleSize = null) {
          seriesOpt.emphasis.scaleSize = seriesOpt.hoverOffset;
        }
      }
    } else if (seriesType2 === "gauge") {
      var pointerColor = get(seriesOpt, "pointer.color");
      pointerColor != null && set(seriesOpt, "itemStyle.color", pointerColor);
    } else if (seriesType2 === "bar") {
      compatBarItemStyle(seriesOpt);
      compatBarItemStyle(seriesOpt.backgroundStyle);
      compatBarItemStyle(seriesOpt.emphasis);
      var data = seriesOpt.data;
      if (data && !isTypedArray(data)) {
        for (var i = 0; i < data.length; i++) {
          if (typeof data[i] === "object") {
            compatBarItemStyle(data[i]);
            compatBarItemStyle(data[i] && data[i].emphasis);
          }
        }
      }
    } else if (seriesType2 === "sunburst") {
      var highlightPolicy = seriesOpt.highlightPolicy;
      if (highlightPolicy) {
        seriesOpt.emphasis = seriesOpt.emphasis || {};
        if (!seriesOpt.emphasis.focus) {
          seriesOpt.emphasis.focus = highlightPolicy;
        }
      }
      compatSunburstState(seriesOpt);
      traverseTree(seriesOpt.data, compatSunburstState);
    } else if (seriesType2 === "graph" || seriesType2 === "sankey") {
      compatGraphFocus(seriesOpt);
    } else if (seriesType2 === "map") {
      if (seriesOpt.mapType && !seriesOpt.map) {
        seriesOpt.map = seriesOpt.mapType;
      }
      if (seriesOpt.mapLocation) {
        defaults(seriesOpt, seriesOpt.mapLocation);
      }
    }
    if (seriesOpt.hoverAnimation != null) {
      seriesOpt.emphasis = seriesOpt.emphasis || {};
      if (seriesOpt.emphasis && seriesOpt.emphasis.scale == null) {
        seriesOpt.emphasis.scale = seriesOpt.hoverAnimation;
      }
    }
    compatLayoutProperties(seriesOpt);
  });
  if (option.dataRange) {
    option.visualMap = option.dataRange;
  }
  each$4(COMPATITABLE_COMPONENTS, function(componentName) {
    var options = option[componentName];
    if (options) {
      if (!isArray(options)) {
        options = [options];
      }
      each$4(options, function(option2) {
        compatLayoutProperties(option2);
      });
    }
  });
}
function dataStack(ecModel) {
  var stackInfoMap = createHashMap();
  ecModel.eachSeries(function(seriesModel) {
    var stack = seriesModel.get("stack");
    if (stack) {
      var stackInfoList = stackInfoMap.get(stack) || stackInfoMap.set(stack, []);
      var data = seriesModel.getData();
      var stackInfo = {
        stackResultDimension: data.getCalculationInfo("stackResultDimension"),
        stackedOverDimension: data.getCalculationInfo("stackedOverDimension"),
        stackedDimension: data.getCalculationInfo("stackedDimension"),
        stackedByDimension: data.getCalculationInfo("stackedByDimension"),
        isStackedByIndex: data.getCalculationInfo("isStackedByIndex"),
        data,
        seriesModel
      };
      if (!stackInfo.stackedDimension || !(stackInfo.isStackedByIndex || stackInfo.stackedByDimension)) {
        return;
      }
      stackInfoList.length && data.setCalculationInfo("stackedOnSeries", stackInfoList[stackInfoList.length - 1].seriesModel);
      stackInfoList.push(stackInfo);
    }
  });
  stackInfoMap.each(calculateStack);
}
function calculateStack(stackInfoList) {
  each$4(stackInfoList, function(targetStackInfo, idxInStack) {
    var resultVal = [];
    var resultNaN = [NaN, NaN];
    var dims = [targetStackInfo.stackResultDimension, targetStackInfo.stackedOverDimension];
    var targetData = targetStackInfo.data;
    var isStackedByIndex = targetStackInfo.isStackedByIndex;
    var stackStrategy = targetStackInfo.seriesModel.get("stackStrategy") || "samesign";
    targetData.modify(dims, function(v0, v1, dataIndex) {
      var sum = targetData.get(targetStackInfo.stackedDimension, dataIndex);
      if (isNaN(sum)) {
        return resultNaN;
      }
      var byValue;
      var stackedDataRawIndex;
      if (isStackedByIndex) {
        stackedDataRawIndex = targetData.getRawIndex(dataIndex);
      } else {
        byValue = targetData.get(targetStackInfo.stackedByDimension, dataIndex);
      }
      var stackedOver = NaN;
      for (var j2 = idxInStack - 1; j2 >= 0; j2--) {
        var stackInfo = stackInfoList[j2];
        if (!isStackedByIndex) {
          stackedDataRawIndex = stackInfo.data.rawIndexOf(stackInfo.stackedByDimension, byValue);
        }
        if (stackedDataRawIndex >= 0) {
          var val = stackInfo.data.getByRawIndex(stackInfo.stackResultDimension, stackedDataRawIndex);
          if (stackStrategy === "all" || stackStrategy === "positive" && val > 0 || stackStrategy === "negative" && val < 0 || stackStrategy === "samesign" && sum >= 0 && val > 0 || stackStrategy === "samesign" && sum <= 0 && val < 0) {
            sum = addSafe(sum, val);
            stackedOver = val;
            break;
          }
        }
      }
      resultVal[0] = sum;
      resultVal[1] = stackedOver;
      return resultVal;
    });
  });
}
var SourceImpl = function() {
  function SourceImpl2(fields) {
    this.data = fields.data || (fields.sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS ? {} : []);
    this.sourceFormat = fields.sourceFormat || SOURCE_FORMAT_UNKNOWN;
    this.seriesLayoutBy = fields.seriesLayoutBy || SERIES_LAYOUT_BY_COLUMN;
    this.startIndex = fields.startIndex || 0;
    this.dimensionsDetectedCount = fields.dimensionsDetectedCount;
    this.metaRawOption = fields.metaRawOption;
    var dimensionsDefine = this.dimensionsDefine = fields.dimensionsDefine;
    if (dimensionsDefine) {
      for (var i = 0; i < dimensionsDefine.length; i++) {
        var dim = dimensionsDefine[i];
        if (dim.type == null) {
          if (guessOrdinal(this, i) === BE_ORDINAL.Must) {
            dim.type = "ordinal";
          }
        }
      }
    }
  }
  return SourceImpl2;
}();
function isSourceInstance(val) {
  return val instanceof SourceImpl;
}
function createSource(sourceData, thisMetaRawOption, sourceFormat) {
  sourceFormat = sourceFormat || detectSourceFormat(sourceData);
  var seriesLayoutBy = thisMetaRawOption.seriesLayoutBy;
  var determined = determineSourceDimensions(sourceData, sourceFormat, seriesLayoutBy, thisMetaRawOption.sourceHeader, thisMetaRawOption.dimensions);
  var source = new SourceImpl({
    data: sourceData,
    sourceFormat,
    seriesLayoutBy,
    dimensionsDefine: determined.dimensionsDefine,
    startIndex: determined.startIndex,
    dimensionsDetectedCount: determined.dimensionsDetectedCount,
    metaRawOption: clone$2(thisMetaRawOption)
  });
  return source;
}
function createSourceFromSeriesDataOption(data) {
  return new SourceImpl({
    data,
    sourceFormat: isTypedArray(data) ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL
  });
}
function cloneSourceShallow(source) {
  return new SourceImpl({
    data: source.data,
    sourceFormat: source.sourceFormat,
    seriesLayoutBy: source.seriesLayoutBy,
    dimensionsDefine: clone$2(source.dimensionsDefine),
    startIndex: source.startIndex,
    dimensionsDetectedCount: source.dimensionsDetectedCount
  });
}
function detectSourceFormat(data) {
  var sourceFormat = SOURCE_FORMAT_UNKNOWN;
  if (isTypedArray(data)) {
    sourceFormat = SOURCE_FORMAT_TYPED_ARRAY;
  } else if (isArray(data)) {
    if (data.length === 0) {
      sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;
    }
    for (var i = 0, len2 = data.length; i < len2; i++) {
      var item = data[i];
      if (item == null) {
        continue;
      } else if (isArray(item)) {
        sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;
        break;
      } else if (isObject$2(item)) {
        sourceFormat = SOURCE_FORMAT_OBJECT_ROWS;
        break;
      }
    }
  } else if (isObject$2(data)) {
    for (var key in data) {
      if (hasOwn(data, key) && isArrayLike(data[key])) {
        sourceFormat = SOURCE_FORMAT_KEYED_COLUMNS;
        break;
      }
    }
  }
  return sourceFormat;
}
function determineSourceDimensions(data, sourceFormat, seriesLayoutBy, sourceHeader, dimensionsDefine) {
  var dimensionsDetectedCount;
  var startIndex;
  if (!data) {
    return {
      dimensionsDefine: normalizeDimensionsOption(dimensionsDefine),
      startIndex,
      dimensionsDetectedCount
    };
  }
  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {
    var dataArrayRows = data;
    if (sourceHeader === "auto" || sourceHeader == null) {
      arrayRowsTravelFirst(function(val) {
        if (val != null && val !== "-") {
          if (isString(val)) {
            startIndex == null && (startIndex = 1);
          } else {
            startIndex = 0;
          }
        }
      }, seriesLayoutBy, dataArrayRows, 10);
    } else {
      startIndex = isNumber(sourceHeader) ? sourceHeader : sourceHeader ? 1 : 0;
    }
    if (!dimensionsDefine && startIndex === 1) {
      dimensionsDefine = [];
      arrayRowsTravelFirst(function(val, index) {
        dimensionsDefine[index] = val != null ? val + "" : "";
      }, seriesLayoutBy, dataArrayRows, Infinity);
    }
    dimensionsDetectedCount = dimensionsDefine ? dimensionsDefine.length : seriesLayoutBy === SERIES_LAYOUT_BY_ROW ? dataArrayRows.length : dataArrayRows[0] ? dataArrayRows[0].length : null;
  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {
    if (!dimensionsDefine) {
      dimensionsDefine = objectRowsCollectDimensions(data);
    }
  } else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {
    if (!dimensionsDefine) {
      dimensionsDefine = [];
      each$4(data, function(colArr, key) {
        dimensionsDefine.push(key);
      });
    }
  } else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {
    var value0 = getDataItemValue(data[0]);
    dimensionsDetectedCount = isArray(value0) && value0.length || 1;
  } else
    ;
  return {
    startIndex,
    dimensionsDefine: normalizeDimensionsOption(dimensionsDefine),
    dimensionsDetectedCount
  };
}
function objectRowsCollectDimensions(data) {
  var firstIndex = 0;
  var obj;
  while (firstIndex < data.length && !(obj = data[firstIndex++])) {
  }
  if (obj) {
    return keys(obj);
  }
}
function normalizeDimensionsOption(dimensionsDefine) {
  if (!dimensionsDefine) {
    return;
  }
  var nameMap = createHashMap();
  return map$1(dimensionsDefine, function(rawItem, index) {
    rawItem = isObject$2(rawItem) ? rawItem : {
      name: rawItem
    };
    var item = {
      name: rawItem.name,
      displayName: rawItem.displayName,
      type: rawItem.type
    };
    if (item.name == null) {
      return item;
    }
    item.name += "";
    if (item.displayName == null) {
      item.displayName = item.name;
    }
    var exist = nameMap.get(item.name);
    if (!exist) {
      nameMap.set(item.name, {
        count: 1
      });
    } else {
      item.name += "-" + exist.count++;
    }
    return item;
  });
}
function arrayRowsTravelFirst(cb, seriesLayoutBy, data, maxLoop) {
  if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {
    for (var i = 0; i < data.length && i < maxLoop; i++) {
      cb(data[i] ? data[i][0] : null, i);
    }
  } else {
    var value0 = data[0] || [];
    for (var i = 0; i < value0.length && i < maxLoop; i++) {
      cb(value0[i], i);
    }
  }
}
function shouldRetrieveDataByName(source) {
  var sourceFormat = source.sourceFormat;
  return sourceFormat === SOURCE_FORMAT_OBJECT_ROWS || sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS;
}
var _a, _b, _c;
var providerMethods;
var mountMethods;
var DefaultDataProvider = function() {
  function DefaultDataProvider2(sourceParam, dimSize) {
    var source = !isSourceInstance(sourceParam) ? createSourceFromSeriesDataOption(sourceParam) : sourceParam;
    this._source = source;
    var data = this._data = source.data;
    if (source.sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {
      this._offset = 0;
      this._dimSize = dimSize;
      this._data = data;
    }
    mountMethods(this, data, source);
  }
  DefaultDataProvider2.prototype.getSource = function() {
    return this._source;
  };
  DefaultDataProvider2.prototype.count = function() {
    return 0;
  };
  DefaultDataProvider2.prototype.getItem = function(idx, out2) {
    return;
  };
  DefaultDataProvider2.prototype.appendData = function(newData) {
  };
  DefaultDataProvider2.prototype.clean = function() {
  };
  DefaultDataProvider2.protoInitialize = function() {
    var proto = DefaultDataProvider2.prototype;
    proto.pure = false;
    proto.persistent = true;
  }();
  DefaultDataProvider2.internalField = function() {
    var _a2;
    mountMethods = function(provider, data, source) {
      var sourceFormat = source.sourceFormat;
      var seriesLayoutBy = source.seriesLayoutBy;
      var startIndex = source.startIndex;
      var dimsDef = source.dimensionsDefine;
      var methods = providerMethods[getMethodMapKey(sourceFormat, seriesLayoutBy)];
      extend(provider, methods);
      if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {
        provider.getItem = getItemForTypedArray;
        provider.count = countForTypedArray;
        provider.fillStorage = fillStorageForTypedArray;
      } else {
        var rawItemGetter = getRawSourceItemGetter(sourceFormat, seriesLayoutBy);
        provider.getItem = bind$1(rawItemGetter, null, data, startIndex, dimsDef);
        var rawCounter = getRawSourceDataCounter(sourceFormat, seriesLayoutBy);
        provider.count = bind$1(rawCounter, null, data, startIndex, dimsDef);
      }
    };
    var getItemForTypedArray = function(idx, out2) {
      idx = idx - this._offset;
      out2 = out2 || [];
      var data = this._data;
      var dimSize = this._dimSize;
      var offset = dimSize * idx;
      for (var i = 0; i < dimSize; i++) {
        out2[i] = data[offset + i];
      }
      return out2;
    };
    var fillStorageForTypedArray = function(start2, end2, storage, extent3) {
      var data = this._data;
      var dimSize = this._dimSize;
      for (var dim = 0; dim < dimSize; dim++) {
        var dimExtent = extent3[dim];
        var min3 = dimExtent[0] == null ? Infinity : dimExtent[0];
        var max3 = dimExtent[1] == null ? -Infinity : dimExtent[1];
        var count = end2 - start2;
        var arr = storage[dim];
        for (var i = 0; i < count; i++) {
          var val = data[i * dimSize + dim];
          arr[start2 + i] = val;
          val < min3 && (min3 = val);
          val > max3 && (max3 = val);
        }
        dimExtent[0] = min3;
        dimExtent[1] = max3;
      }
    };
    var countForTypedArray = function() {
      return this._data ? this._data.length / this._dimSize : 0;
    };
    providerMethods = (_a2 = {}, _a2[SOURCE_FORMAT_ARRAY_ROWS + "_" + SERIES_LAYOUT_BY_COLUMN] = {
      pure: true,
      appendData: appendDataSimply
    }, _a2[SOURCE_FORMAT_ARRAY_ROWS + "_" + SERIES_LAYOUT_BY_ROW] = {
      pure: true,
      appendData: function() {
        throw new Error('Do not support appendData when set seriesLayoutBy: "row".');
      }
    }, _a2[SOURCE_FORMAT_OBJECT_ROWS] = {
      pure: true,
      appendData: appendDataSimply
    }, _a2[SOURCE_FORMAT_KEYED_COLUMNS] = {
      pure: true,
      appendData: function(newData) {
        var data = this._data;
        each$4(newData, function(newCol, key) {
          var oldCol = data[key] || (data[key] = []);
          for (var i = 0; i < (newCol || []).length; i++) {
            oldCol.push(newCol[i]);
          }
        });
      }
    }, _a2[SOURCE_FORMAT_ORIGINAL] = {
      appendData: appendDataSimply
    }, _a2[SOURCE_FORMAT_TYPED_ARRAY] = {
      persistent: false,
      pure: true,
      appendData: function(newData) {
        this._data = newData;
      },
      clean: function() {
        this._offset += this.count();
        this._data = null;
      }
    }, _a2);
    function appendDataSimply(newData) {
      for (var i = 0; i < newData.length; i++) {
        this._data.push(newData[i]);
      }
    }
  }();
  return DefaultDataProvider2;
}();
var getItemSimply = function(rawData, startIndex, dimsDef, idx) {
  return rawData[idx];
};
var rawSourceItemGetterMap = (_a = {}, _a[SOURCE_FORMAT_ARRAY_ROWS + "_" + SERIES_LAYOUT_BY_COLUMN] = function(rawData, startIndex, dimsDef, idx) {
  return rawData[idx + startIndex];
}, _a[SOURCE_FORMAT_ARRAY_ROWS + "_" + SERIES_LAYOUT_BY_ROW] = function(rawData, startIndex, dimsDef, idx, out2) {
  idx += startIndex;
  var item = out2 || [];
  var data = rawData;
  for (var i = 0; i < data.length; i++) {
    var row = data[i];
    item[i] = row ? row[idx] : null;
  }
  return item;
}, _a[SOURCE_FORMAT_OBJECT_ROWS] = getItemSimply, _a[SOURCE_FORMAT_KEYED_COLUMNS] = function(rawData, startIndex, dimsDef, idx, out2) {
  var item = out2 || [];
  for (var i = 0; i < dimsDef.length; i++) {
    var dimName = dimsDef[i].name;
    var col = rawData[dimName];
    item[i] = col ? col[idx] : null;
  }
  return item;
}, _a[SOURCE_FORMAT_ORIGINAL] = getItemSimply, _a);
function getRawSourceItemGetter(sourceFormat, seriesLayoutBy) {
  var method = rawSourceItemGetterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];
  return method;
}
var countSimply = function(rawData, startIndex, dimsDef) {
  return rawData.length;
};
var rawSourceDataCounterMap = (_b = {}, _b[SOURCE_FORMAT_ARRAY_ROWS + "_" + SERIES_LAYOUT_BY_COLUMN] = function(rawData, startIndex, dimsDef) {
  return Math.max(0, rawData.length - startIndex);
}, _b[SOURCE_FORMAT_ARRAY_ROWS + "_" + SERIES_LAYOUT_BY_ROW] = function(rawData, startIndex, dimsDef) {
  var row = rawData[0];
  return row ? Math.max(0, row.length - startIndex) : 0;
}, _b[SOURCE_FORMAT_OBJECT_ROWS] = countSimply, _b[SOURCE_FORMAT_KEYED_COLUMNS] = function(rawData, startIndex, dimsDef) {
  var dimName = dimsDef[0].name;
  var col = rawData[dimName];
  return col ? col.length : 0;
}, _b[SOURCE_FORMAT_ORIGINAL] = countSimply, _b);
function getRawSourceDataCounter(sourceFormat, seriesLayoutBy) {
  var method = rawSourceDataCounterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];
  return method;
}
var getRawValueSimply = function(dataItem, dimIndex, property) {
  return dataItem[dimIndex];
};
var rawSourceValueGetterMap = (_c = {}, _c[SOURCE_FORMAT_ARRAY_ROWS] = getRawValueSimply, _c[SOURCE_FORMAT_OBJECT_ROWS] = function(dataItem, dimIndex, property) {
  return dataItem[property];
}, _c[SOURCE_FORMAT_KEYED_COLUMNS] = getRawValueSimply, _c[SOURCE_FORMAT_ORIGINAL] = function(dataItem, dimIndex, property) {
  var value = getDataItemValue(dataItem);
  return !(value instanceof Array) ? value : value[dimIndex];
}, _c[SOURCE_FORMAT_TYPED_ARRAY] = getRawValueSimply, _c);
function getRawSourceValueGetter(sourceFormat) {
  var method = rawSourceValueGetterMap[sourceFormat];
  return method;
}
function getMethodMapKey(sourceFormat, seriesLayoutBy) {
  return sourceFormat === SOURCE_FORMAT_ARRAY_ROWS ? sourceFormat + "_" + seriesLayoutBy : sourceFormat;
}
function retrieveRawValue(data, dataIndex, dim) {
  if (!data) {
    return;
  }
  var dataItem = data.getRawDataItem(dataIndex);
  if (dataItem == null) {
    return;
  }
  var store = data.getStore();
  var sourceFormat = store.getSource().sourceFormat;
  if (dim != null) {
    var dimIndex = data.getDimensionIndex(dim);
    var property = store.getDimensionProperty(dimIndex);
    return getRawSourceValueGetter(sourceFormat)(dataItem, dimIndex, property);
  } else {
    var result = dataItem;
    if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {
      result = getDataItemValue(dataItem);
    }
    return result;
  }
}
var DIMENSION_LABEL_REG = /\{@(.+?)\}/g;
var DataFormatMixin = function() {
  function DataFormatMixin2() {
  }
  DataFormatMixin2.prototype.getDataParams = function(dataIndex, dataType) {
    var data = this.getData(dataType);
    var rawValue = this.getRawValue(dataIndex, dataType);
    var rawDataIndex = data.getRawIndex(dataIndex);
    var name = data.getName(dataIndex);
    var itemOpt = data.getRawDataItem(dataIndex);
    var style2 = data.getItemVisual(dataIndex, "style");
    var color = style2 && style2[data.getItemVisual(dataIndex, "drawType") || "fill"];
    var borderColor = style2 && style2.stroke;
    var mainType = this.mainType;
    var isSeries2 = mainType === "series";
    var userOutput = data.userOutput && data.userOutput.get();
    return {
      componentType: mainType,
      componentSubType: this.subType,
      componentIndex: this.componentIndex,
      seriesType: isSeries2 ? this.subType : null,
      seriesIndex: this.seriesIndex,
      seriesId: isSeries2 ? this.id : null,
      seriesName: isSeries2 ? this.name : null,
      name,
      dataIndex: rawDataIndex,
      data: itemOpt,
      dataType,
      value: rawValue,
      color,
      borderColor,
      dimensionNames: userOutput ? userOutput.fullDimensions : null,
      encode: userOutput ? userOutput.encode : null,
      $vars: ["seriesName", "name", "value"]
    };
  };
  DataFormatMixin2.prototype.getFormattedLabel = function(dataIndex, status, dataType, labelDimIndex, formatter, extendParams) {
    status = status || "normal";
    var data = this.getData(dataType);
    var params = this.getDataParams(dataIndex, dataType);
    if (extendParams) {
      params.value = extendParams.interpolatedValue;
    }
    if (labelDimIndex != null && isArray(params.value)) {
      params.value = params.value[labelDimIndex];
    }
    if (!formatter) {
      var itemModel = data.getItemModel(dataIndex);
      formatter = itemModel.get(status === "normal" ? ["label", "formatter"] : [status, "label", "formatter"]);
    }
    if (isFunction(formatter)) {
      params.status = status;
      params.dimensionIndex = labelDimIndex;
      return formatter(params);
    } else if (isString(formatter)) {
      var str = formatTpl(formatter, params);
      return str.replace(DIMENSION_LABEL_REG, function(origin, dimStr) {
        var len2 = dimStr.length;
        var dimLoose = dimStr;
        if (dimLoose.charAt(0) === "[" && dimLoose.charAt(len2 - 1) === "]") {
          dimLoose = +dimLoose.slice(1, len2 - 1);
        }
        var val = retrieveRawValue(data, dataIndex, dimLoose);
        if (extendParams && isArray(extendParams.interpolatedValue)) {
          var dimIndex = data.getDimensionIndex(dimLoose);
          if (dimIndex >= 0) {
            val = extendParams.interpolatedValue[dimIndex];
          }
        }
        return val != null ? val + "" : "";
      });
    }
  };
  DataFormatMixin2.prototype.getRawValue = function(idx, dataType) {
    return retrieveRawValue(this.getData(dataType), idx);
  };
  DataFormatMixin2.prototype.formatTooltip = function(dataIndex, multipleSeries, dataType) {
    return;
  };
  return DataFormatMixin2;
}();
function normalizeTooltipFormatResult(result) {
  var markupText;
  var markupFragment;
  if (isObject$2(result)) {
    if (result.type) {
      markupFragment = result;
    }
  } else {
    markupText = result;
  }
  return {
    text: markupText,
    frag: markupFragment
  };
}
function createTask(define) {
  return new Task(define);
}
var Task = function() {
  function Task2(define) {
    define = define || {};
    this._reset = define.reset;
    this._plan = define.plan;
    this._count = define.count;
    this._onDirty = define.onDirty;
    this._dirty = true;
  }
  Task2.prototype.perform = function(performArgs) {
    var upTask = this._upstream;
    var skip = performArgs && performArgs.skip;
    if (this._dirty && upTask) {
      var context = this.context;
      context.data = context.outputData = upTask.context.outputData;
    }
    if (this.__pipeline) {
      this.__pipeline.currentTask = this;
    }
    var planResult;
    if (this._plan && !skip) {
      planResult = this._plan(this.context);
    }
    var lastModBy = normalizeModBy(this._modBy);
    var lastModDataCount = this._modDataCount || 0;
    var modBy = normalizeModBy(performArgs && performArgs.modBy);
    var modDataCount = performArgs && performArgs.modDataCount || 0;
    if (lastModBy !== modBy || lastModDataCount !== modDataCount) {
      planResult = "reset";
    }
    function normalizeModBy(val) {
      !(val >= 1) && (val = 1);
      return val;
    }
    var forceFirstProgress;
    if (this._dirty || planResult === "reset") {
      this._dirty = false;
      forceFirstProgress = this._doReset(skip);
    }
    this._modBy = modBy;
    this._modDataCount = modDataCount;
    var step = performArgs && performArgs.step;
    if (upTask) {
      this._dueEnd = upTask._outputDueEnd;
    } else {
      this._dueEnd = this._count ? this._count(this.context) : Infinity;
    }
    if (this._progress) {
      var start2 = this._dueIndex;
      var end2 = Math.min(step != null ? this._dueIndex + step : Infinity, this._dueEnd);
      if (!skip && (forceFirstProgress || start2 < end2)) {
        var progress = this._progress;
        if (isArray(progress)) {
          for (var i = 0; i < progress.length; i++) {
            this._doProgress(progress[i], start2, end2, modBy, modDataCount);
          }
        } else {
          this._doProgress(progress, start2, end2, modBy, modDataCount);
        }
      }
      this._dueIndex = end2;
      var outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : end2;
      this._outputDueEnd = outputDueEnd;
    } else {
      this._dueIndex = this._outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : this._dueEnd;
    }
    return this.unfinished();
  };
  Task2.prototype.dirty = function() {
    this._dirty = true;
    this._onDirty && this._onDirty(this.context);
  };
  Task2.prototype._doProgress = function(progress, start2, end2, modBy, modDataCount) {
    iterator.reset(start2, end2, modBy, modDataCount);
    this._callingProgress = progress;
    this._callingProgress({
      start: start2,
      end: end2,
      count: end2 - start2,
      next: iterator.next
    }, this.context);
  };
  Task2.prototype._doReset = function(skip) {
    this._dueIndex = this._outputDueEnd = this._dueEnd = 0;
    this._settedOutputEnd = null;
    var progress;
    var forceFirstProgress;
    if (!skip && this._reset) {
      progress = this._reset(this.context);
      if (progress && progress.progress) {
        forceFirstProgress = progress.forceFirstProgress;
        progress = progress.progress;
      }
      if (isArray(progress) && !progress.length) {
        progress = null;
      }
    }
    this._progress = progress;
    this._modBy = this._modDataCount = null;
    var downstream = this._downstream;
    downstream && downstream.dirty();
    return forceFirstProgress;
  };
  Task2.prototype.unfinished = function() {
    return this._progress && this._dueIndex < this._dueEnd;
  };
  Task2.prototype.pipe = function(downTask) {
    if (this._downstream !== downTask || this._dirty) {
      this._downstream = downTask;
      downTask._upstream = this;
      downTask.dirty();
    }
  };
  Task2.prototype.dispose = function() {
    if (this._disposed) {
      return;
    }
    this._upstream && (this._upstream._downstream = null);
    this._downstream && (this._downstream._upstream = null);
    this._dirty = false;
    this._disposed = true;
  };
  Task2.prototype.getUpstream = function() {
    return this._upstream;
  };
  Task2.prototype.getDownstream = function() {
    return this._downstream;
  };
  Task2.prototype.setOutputEnd = function(end2) {
    this._outputDueEnd = this._settedOutputEnd = end2;
  };
  return Task2;
}();
var iterator = function() {
  var end2;
  var current;
  var modBy;
  var modDataCount;
  var winCount;
  var it = {
    reset: function(s, e2, sStep, sCount) {
      current = s;
      end2 = e2;
      modBy = sStep;
      modDataCount = sCount;
      winCount = Math.ceil(modDataCount / modBy);
      it.next = modBy > 1 && modDataCount > 0 ? modNext : sequentialNext;
    }
  };
  return it;
  function sequentialNext() {
    return current < end2 ? current++ : null;
  }
  function modNext() {
    var dataIndex = current % winCount * modBy + Math.ceil(current / winCount);
    var result = current >= end2 ? null : dataIndex < modDataCount ? dataIndex : current;
    current++;
    return result;
  }
}();
function parseDataValue(value, opt) {
  var dimType = opt && opt.type;
  if (dimType === "ordinal") {
    return value;
  }
  if (dimType === "time" && !isNumber(value) && value != null && value !== "-") {
    value = +parseDate(value);
  }
  return value == null || value === "" ? NaN : +value;
}
createHashMap({
  "number": function(val) {
    return parseFloat(val);
  },
  "time": function(val) {
    return +parseDate(val);
  },
  "trim": function(val) {
    return isString(val) ? trim(val) : val;
  }
});
var SortOrderComparator = function() {
  function SortOrderComparator2(order, incomparable) {
    var isDesc = order === "desc";
    this._resultLT = isDesc ? 1 : -1;
    if (incomparable == null) {
      incomparable = isDesc ? "min" : "max";
    }
    this._incomparable = incomparable === "min" ? -Infinity : Infinity;
  }
  SortOrderComparator2.prototype.evaluate = function(lval, rval) {
    var lvalFloat = isNumber(lval) ? lval : numericToNumber(lval);
    var rvalFloat = isNumber(rval) ? rval : numericToNumber(rval);
    var lvalNotNumeric = isNaN(lvalFloat);
    var rvalNotNumeric = isNaN(rvalFloat);
    if (lvalNotNumeric) {
      lvalFloat = this._incomparable;
    }
    if (rvalNotNumeric) {
      rvalFloat = this._incomparable;
    }
    if (lvalNotNumeric && rvalNotNumeric) {
      var lvalIsStr = isString(lval);
      var rvalIsStr = isString(rval);
      if (lvalIsStr) {
        lvalFloat = rvalIsStr ? lval : 0;
      }
      if (rvalIsStr) {
        rvalFloat = lvalIsStr ? rval : 0;
      }
    }
    return lvalFloat < rvalFloat ? this._resultLT : lvalFloat > rvalFloat ? -this._resultLT : 0;
  };
  return SortOrderComparator2;
}();
var ExternalSource = function() {
  function ExternalSource2() {
  }
  ExternalSource2.prototype.getRawData = function() {
    throw new Error("not supported");
  };
  ExternalSource2.prototype.getRawDataItem = function(dataIndex) {
    throw new Error("not supported");
  };
  ExternalSource2.prototype.cloneRawData = function() {
    return;
  };
  ExternalSource2.prototype.getDimensionInfo = function(dim) {
    return;
  };
  ExternalSource2.prototype.cloneAllDimensionInfo = function() {
    return;
  };
  ExternalSource2.prototype.count = function() {
    return;
  };
  ExternalSource2.prototype.retrieveValue = function(dataIndex, dimIndex) {
    return;
  };
  ExternalSource2.prototype.retrieveValueFromItem = function(dataItem, dimIndex) {
    return;
  };
  ExternalSource2.prototype.convertValue = function(rawVal, dimInfo) {
    return parseDataValue(rawVal, dimInfo);
  };
  return ExternalSource2;
}();
function createExternalSource(internalSource, externalTransform) {
  var extSource = new ExternalSource();
  var data = internalSource.data;
  var sourceFormat = extSource.sourceFormat = internalSource.sourceFormat;
  var sourceHeaderCount = internalSource.startIndex;
  var errMsg = "";
  if (internalSource.seriesLayoutBy !== SERIES_LAYOUT_BY_COLUMN) {
    throwError(errMsg);
  }
  var dimensions = [];
  var dimsByName = {};
  var dimsDef = internalSource.dimensionsDefine;
  if (dimsDef) {
    each$4(dimsDef, function(dimDef, idx) {
      var name = dimDef.name;
      var dimDefExt = {
        index: idx,
        name,
        displayName: dimDef.displayName
      };
      dimensions.push(dimDefExt);
      if (name != null) {
        var errMsg_1 = "";
        if (hasOwn(dimsByName, name)) {
          throwError(errMsg_1);
        }
        dimsByName[name] = dimDefExt;
      }
    });
  } else {
    for (var i = 0; i < internalSource.dimensionsDetectedCount || 0; i++) {
      dimensions.push({
        index: i
      });
    }
  }
  var rawItemGetter = getRawSourceItemGetter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);
  if (externalTransform.__isBuiltIn) {
    extSource.getRawDataItem = function(dataIndex) {
      return rawItemGetter(data, sourceHeaderCount, dimensions, dataIndex);
    };
    extSource.getRawData = bind$1(getRawData, null, internalSource);
  }
  extSource.cloneRawData = bind$1(cloneRawData, null, internalSource);
  var rawCounter = getRawSourceDataCounter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);
  extSource.count = bind$1(rawCounter, null, data, sourceHeaderCount, dimensions);
  var rawValueGetter = getRawSourceValueGetter(sourceFormat);
  extSource.retrieveValue = function(dataIndex, dimIndex) {
    var rawItem = rawItemGetter(data, sourceHeaderCount, dimensions, dataIndex);
    return retrieveValueFromItem(rawItem, dimIndex);
  };
  var retrieveValueFromItem = extSource.retrieveValueFromItem = function(dataItem, dimIndex) {
    if (dataItem == null) {
      return;
    }
    var dimDef = dimensions[dimIndex];
    if (dimDef) {
      return rawValueGetter(dataItem, dimIndex, dimDef.name);
    }
  };
  extSource.getDimensionInfo = bind$1(getDimensionInfo, null, dimensions, dimsByName);
  extSource.cloneAllDimensionInfo = bind$1(cloneAllDimensionInfo, null, dimensions);
  return extSource;
}
function getRawData(upstream) {
  var sourceFormat = upstream.sourceFormat;
  if (!isSupportedSourceFormat(sourceFormat)) {
    var errMsg = "";
    throwError(errMsg);
  }
  return upstream.data;
}
function cloneRawData(upstream) {
  var sourceFormat = upstream.sourceFormat;
  var data = upstream.data;
  if (!isSupportedSourceFormat(sourceFormat)) {
    var errMsg = "";
    throwError(errMsg);
  }
  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {
    var result = [];
    for (var i = 0, len2 = data.length; i < len2; i++) {
      result.push(data[i].slice());
    }
    return result;
  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {
    var result = [];
    for (var i = 0, len2 = data.length; i < len2; i++) {
      result.push(extend({}, data[i]));
    }
    return result;
  }
}
function getDimensionInfo(dimensions, dimsByName, dim) {
  if (dim == null) {
    return;
  }
  if (isNumber(dim) || !isNaN(dim) && !hasOwn(dimsByName, dim)) {
    return dimensions[dim];
  } else if (hasOwn(dimsByName, dim)) {
    return dimsByName[dim];
  }
}
function cloneAllDimensionInfo(dimensions) {
  return clone$2(dimensions);
}
var externalTransformMap = createHashMap();
function registerExternalTransform(externalTransform) {
  externalTransform = clone$2(externalTransform);
  var type = externalTransform.type;
  var errMsg = "";
  if (!type) {
    throwError(errMsg);
  }
  var typeParsed = type.split(":");
  if (typeParsed.length !== 2) {
    throwError(errMsg);
  }
  var isBuiltIn = false;
  if (typeParsed[0] === "echarts") {
    type = typeParsed[1];
    isBuiltIn = true;
  }
  externalTransform.__isBuiltIn = isBuiltIn;
  externalTransformMap.set(type, externalTransform);
}
function applyDataTransform(rawTransOption, sourceList, infoForPrint) {
  var pipedTransOption = normalizeToArray(rawTransOption);
  var pipeLen = pipedTransOption.length;
  var errMsg = "";
  if (!pipeLen) {
    throwError(errMsg);
  }
  for (var i = 0, len2 = pipeLen; i < len2; i++) {
    var transOption = pipedTransOption[i];
    sourceList = applySingleDataTransform(transOption, sourceList);
    if (i !== len2 - 1) {
      sourceList.length = Math.max(sourceList.length, 1);
    }
  }
  return sourceList;
}
function applySingleDataTransform(transOption, upSourceList, infoForPrint, pipeIndex) {
  var errMsg = "";
  if (!upSourceList.length) {
    throwError(errMsg);
  }
  if (!isObject$2(transOption)) {
    throwError(errMsg);
  }
  var transType = transOption.type;
  var externalTransform = externalTransformMap.get(transType);
  if (!externalTransform) {
    throwError(errMsg);
  }
  var extUpSourceList = map$1(upSourceList, function(upSource) {
    return createExternalSource(upSource, externalTransform);
  });
  var resultList = normalizeToArray(externalTransform.transform({
    upstream: extUpSourceList[0],
    upstreamList: extUpSourceList,
    config: clone$2(transOption.config)
  }));
  return map$1(resultList, function(result, resultIndex) {
    var errMsg2 = "";
    if (!isObject$2(result)) {
      throwError(errMsg2);
    }
    if (!result.data) {
      throwError(errMsg2);
    }
    var sourceFormat = detectSourceFormat(result.data);
    if (!isSupportedSourceFormat(sourceFormat)) {
      throwError(errMsg2);
    }
    var resultMetaRawOption;
    var firstUpSource = upSourceList[0];
    if (firstUpSource && resultIndex === 0 && !result.dimensions) {
      var startIndex = firstUpSource.startIndex;
      if (startIndex) {
        result.data = firstUpSource.data.slice(0, startIndex).concat(result.data);
      }
      resultMetaRawOption = {
        seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,
        sourceHeader: startIndex,
        dimensions: firstUpSource.metaRawOption.dimensions
      };
    } else {
      resultMetaRawOption = {
        seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,
        sourceHeader: 0,
        dimensions: result.dimensions
      };
    }
    return createSource(result.data, resultMetaRawOption, null);
  });
}
function isSupportedSourceFormat(sourceFormat) {
  return sourceFormat === SOURCE_FORMAT_ARRAY_ROWS || sourceFormat === SOURCE_FORMAT_OBJECT_ROWS;
}
var UNDEFINED = "undefined";
var CtorUint32Array = typeof Uint32Array === UNDEFINED ? Array : Uint32Array;
var CtorUint16Array = typeof Uint16Array === UNDEFINED ? Array : Uint16Array;
var CtorInt32Array$1 = typeof Int32Array === UNDEFINED ? Array : Int32Array;
var CtorFloat64Array = typeof Float64Array === UNDEFINED ? Array : Float64Array;
var dataCtors = {
  "float": CtorFloat64Array,
  "int": CtorInt32Array$1,
  "ordinal": Array,
  "number": Array,
  "time": CtorFloat64Array
};
var defaultDimValueGetters;
function getIndicesCtor(rawCount) {
  return rawCount > 65535 ? CtorUint32Array : CtorUint16Array;
}
function getInitialExtent() {
  return [Infinity, -Infinity];
}
function cloneChunk(originalChunk) {
  var Ctor = originalChunk.constructor;
  return Ctor === Array ? originalChunk.slice() : new Ctor(originalChunk);
}
function prepareStore(store, dimIdx, dimType, end2, append) {
  var DataCtor = dataCtors[dimType || "float"];
  if (append) {
    var oldStore = store[dimIdx];
    var oldLen = oldStore && oldStore.length;
    if (!(oldLen === end2)) {
      var newStore = new DataCtor(end2);
      for (var j2 = 0; j2 < oldLen; j2++) {
        newStore[j2] = oldStore[j2];
      }
      store[dimIdx] = newStore;
    }
  } else {
    store[dimIdx] = new DataCtor(end2);
  }
}
var DataStore = function() {
  function DataStore2() {
    this._chunks = [];
    this._rawExtent = [];
    this._extent = [];
    this._count = 0;
    this._rawCount = 0;
    this._calcDimNameToIdx = createHashMap();
  }
  DataStore2.prototype.initData = function(provider, inputDimensions, dimValueGetter) {
    this._provider = provider;
    this._chunks = [];
    this._indices = null;
    this.getRawIndex = this._getRawIdxIdentity;
    var source = provider.getSource();
    var defaultGetter = this.defaultDimValueGetter = defaultDimValueGetters[source.sourceFormat];
    this._dimValueGetter = dimValueGetter || defaultGetter;
    this._rawExtent = [];
    shouldRetrieveDataByName(source);
    this._dimensions = map$1(inputDimensions, function(dim) {
      return {
        type: dim.type,
        property: dim.property
      };
    });
    this._initDataFromProvider(0, provider.count());
  };
  DataStore2.prototype.getProvider = function() {
    return this._provider;
  };
  DataStore2.prototype.getSource = function() {
    return this._provider.getSource();
  };
  DataStore2.prototype.ensureCalculationDimension = function(dimName, type) {
    var calcDimNameToIdx = this._calcDimNameToIdx;
    var dimensions = this._dimensions;
    var calcDimIdx = calcDimNameToIdx.get(dimName);
    if (calcDimIdx != null) {
      if (dimensions[calcDimIdx].type === type) {
        return calcDimIdx;
      }
    } else {
      calcDimIdx = dimensions.length;
    }
    dimensions[calcDimIdx] = {
      type
    };
    calcDimNameToIdx.set(dimName, calcDimIdx);
    this._chunks[calcDimIdx] = new dataCtors[type || "float"](this._rawCount);
    this._rawExtent[calcDimIdx] = getInitialExtent();
    return calcDimIdx;
  };
  DataStore2.prototype.collectOrdinalMeta = function(dimIdx, ordinalMeta) {
    var chunk = this._chunks[dimIdx];
    var dim = this._dimensions[dimIdx];
    var rawExtents = this._rawExtent;
    var offset = dim.ordinalOffset || 0;
    var len2 = chunk.length;
    if (offset === 0) {
      rawExtents[dimIdx] = getInitialExtent();
    }
    var dimRawExtent = rawExtents[dimIdx];
    for (var i = offset; i < len2; i++) {
      var val = chunk[i] = ordinalMeta.parseAndCollect(chunk[i]);
      if (!isNaN(val)) {
        dimRawExtent[0] = Math.min(val, dimRawExtent[0]);
        dimRawExtent[1] = Math.max(val, dimRawExtent[1]);
      }
    }
    dim.ordinalMeta = ordinalMeta;
    dim.ordinalOffset = len2;
    dim.type = "ordinal";
  };
  DataStore2.prototype.getOrdinalMeta = function(dimIdx) {
    var dimInfo = this._dimensions[dimIdx];
    var ordinalMeta = dimInfo.ordinalMeta;
    return ordinalMeta;
  };
  DataStore2.prototype.getDimensionProperty = function(dimIndex) {
    var item = this._dimensions[dimIndex];
    return item && item.property;
  };
  DataStore2.prototype.appendData = function(data) {
    var provider = this._provider;
    var start2 = this.count();
    provider.appendData(data);
    var end2 = provider.count();
    if (!provider.persistent) {
      end2 += start2;
    }
    if (start2 < end2) {
      this._initDataFromProvider(start2, end2, true);
    }
    return [start2, end2];
  };
  DataStore2.prototype.appendValues = function(values, minFillLen) {
    var chunks = this._chunks;
    var dimensions = this._dimensions;
    var dimLen = dimensions.length;
    var rawExtent = this._rawExtent;
    var start2 = this.count();
    var end2 = start2 + Math.max(values.length, minFillLen || 0);
    for (var i = 0; i < dimLen; i++) {
      var dim = dimensions[i];
      prepareStore(chunks, i, dim.type, end2, true);
    }
    var emptyDataItem = [];
    for (var idx = start2; idx < end2; idx++) {
      var sourceIdx = idx - start2;
      for (var dimIdx = 0; dimIdx < dimLen; dimIdx++) {
        var dim = dimensions[dimIdx];
        var val = defaultDimValueGetters.arrayRows.call(this, values[sourceIdx] || emptyDataItem, dim.property, sourceIdx, dimIdx);
        chunks[dimIdx][idx] = val;
        var dimRawExtent = rawExtent[dimIdx];
        val < dimRawExtent[0] && (dimRawExtent[0] = val);
        val > dimRawExtent[1] && (dimRawExtent[1] = val);
      }
    }
    this._rawCount = this._count = end2;
    return {
      start: start2,
      end: end2
    };
  };
  DataStore2.prototype._initDataFromProvider = function(start2, end2, append) {
    var provider = this._provider;
    var chunks = this._chunks;
    var dimensions = this._dimensions;
    var dimLen = dimensions.length;
    var rawExtent = this._rawExtent;
    var dimNames = map$1(dimensions, function(dim2) {
      return dim2.property;
    });
    for (var i = 0; i < dimLen; i++) {
      var dim = dimensions[i];
      if (!rawExtent[i]) {
        rawExtent[i] = getInitialExtent();
      }
      prepareStore(chunks, i, dim.type, end2, append);
    }
    if (provider.fillStorage) {
      provider.fillStorage(start2, end2, chunks, rawExtent);
    } else {
      var dataItem = [];
      for (var idx = start2; idx < end2; idx++) {
        dataItem = provider.getItem(idx, dataItem);
        for (var dimIdx = 0; dimIdx < dimLen; dimIdx++) {
          var dimStorage = chunks[dimIdx];
          var val = this._dimValueGetter(dataItem, dimNames[dimIdx], idx, dimIdx);
          dimStorage[idx] = val;
          var dimRawExtent = rawExtent[dimIdx];
          val < dimRawExtent[0] && (dimRawExtent[0] = val);
          val > dimRawExtent[1] && (dimRawExtent[1] = val);
        }
      }
    }
    if (!provider.persistent && provider.clean) {
      provider.clean();
    }
    this._rawCount = this._count = end2;
    this._extent = [];
  };
  DataStore2.prototype.count = function() {
    return this._count;
  };
  DataStore2.prototype.get = function(dim, idx) {
    if (!(idx >= 0 && idx < this._count)) {
      return NaN;
    }
    var dimStore = this._chunks[dim];
    return dimStore ? dimStore[this.getRawIndex(idx)] : NaN;
  };
  DataStore2.prototype.getValues = function(dimensions, idx) {
    var values = [];
    var dimArr = [];
    if (idx == null) {
      idx = dimensions;
      dimensions = [];
      for (var i = 0; i < this._dimensions.length; i++) {
        dimArr.push(i);
      }
    } else {
      dimArr = dimensions;
    }
    for (var i = 0, len2 = dimArr.length; i < len2; i++) {
      values.push(this.get(dimArr[i], idx));
    }
    return values;
  };
  DataStore2.prototype.getByRawIndex = function(dim, rawIdx) {
    if (!(rawIdx >= 0 && rawIdx < this._rawCount)) {
      return NaN;
    }
    var dimStore = this._chunks[dim];
    return dimStore ? dimStore[rawIdx] : NaN;
  };
  DataStore2.prototype.getSum = function(dim) {
    var dimData = this._chunks[dim];
    var sum = 0;
    if (dimData) {
      for (var i = 0, len2 = this.count(); i < len2; i++) {
        var value = this.get(dim, i);
        if (!isNaN(value)) {
          sum += value;
        }
      }
    }
    return sum;
  };
  DataStore2.prototype.getMedian = function(dim) {
    var dimDataArray = [];
    this.each([dim], function(val) {
      if (!isNaN(val)) {
        dimDataArray.push(val);
      }
    });
    var sortedDimDataArray = dimDataArray.sort(function(a, b2) {
      return a - b2;
    });
    var len2 = this.count();
    return len2 === 0 ? 0 : len2 % 2 === 1 ? sortedDimDataArray[(len2 - 1) / 2] : (sortedDimDataArray[len2 / 2] + sortedDimDataArray[len2 / 2 - 1]) / 2;
  };
  DataStore2.prototype.indexOfRawIndex = function(rawIndex) {
    if (rawIndex >= this._rawCount || rawIndex < 0) {
      return -1;
    }
    if (!this._indices) {
      return rawIndex;
    }
    var indices = this._indices;
    var rawDataIndex = indices[rawIndex];
    if (rawDataIndex != null && rawDataIndex < this._count && rawDataIndex === rawIndex) {
      return rawIndex;
    }
    var left = 0;
    var right = this._count - 1;
    while (left <= right) {
      var mid = (left + right) / 2 | 0;
      if (indices[mid] < rawIndex) {
        left = mid + 1;
      } else if (indices[mid] > rawIndex) {
        right = mid - 1;
      } else {
        return mid;
      }
    }
    return -1;
  };
  DataStore2.prototype.indicesOfNearest = function(dim, value, maxDistance) {
    var chunks = this._chunks;
    var dimData = chunks[dim];
    var nearestIndices = [];
    if (!dimData) {
      return nearestIndices;
    }
    if (maxDistance == null) {
      maxDistance = Infinity;
    }
    var minDist = Infinity;
    var minDiff = -1;
    var nearestIndicesLen = 0;
    for (var i = 0, len2 = this.count(); i < len2; i++) {
      var dataIndex = this.getRawIndex(i);
      var diff = value - dimData[dataIndex];
      var dist2 = Math.abs(diff);
      if (dist2 <= maxDistance) {
        if (dist2 < minDist || dist2 === minDist && diff >= 0 && minDiff < 0) {
          minDist = dist2;
          minDiff = diff;
          nearestIndicesLen = 0;
        }
        if (diff === minDiff) {
          nearestIndices[nearestIndicesLen++] = i;
        }
      }
    }
    nearestIndices.length = nearestIndicesLen;
    return nearestIndices;
  };
  DataStore2.prototype.getIndices = function() {
    var newIndices;
    var indices = this._indices;
    if (indices) {
      var Ctor = indices.constructor;
      var thisCount = this._count;
      if (Ctor === Array) {
        newIndices = new Ctor(thisCount);
        for (var i = 0; i < thisCount; i++) {
          newIndices[i] = indices[i];
        }
      } else {
        newIndices = new Ctor(indices.buffer, 0, thisCount);
      }
    } else {
      var Ctor = getIndicesCtor(this._rawCount);
      newIndices = new Ctor(this.count());
      for (var i = 0; i < newIndices.length; i++) {
        newIndices[i] = i;
      }
    }
    return newIndices;
  };
  DataStore2.prototype.filter = function(dims, cb) {
    if (!this._count) {
      return this;
    }
    var newStore = this.clone();
    var count = newStore.count();
    var Ctor = getIndicesCtor(newStore._rawCount);
    var newIndices = new Ctor(count);
    var value = [];
    var dimSize = dims.length;
    var offset = 0;
    var dim0 = dims[0];
    var chunks = newStore._chunks;
    for (var i = 0; i < count; i++) {
      var keep = void 0;
      var rawIdx = newStore.getRawIndex(i);
      if (dimSize === 0) {
        keep = cb(i);
      } else if (dimSize === 1) {
        var val = chunks[dim0][rawIdx];
        keep = cb(val, i);
      } else {
        var k2 = 0;
        for (; k2 < dimSize; k2++) {
          value[k2] = chunks[dims[k2]][rawIdx];
        }
        value[k2] = i;
        keep = cb.apply(null, value);
      }
      if (keep) {
        newIndices[offset++] = rawIdx;
      }
    }
    if (offset < count) {
      newStore._indices = newIndices;
    }
    newStore._count = offset;
    newStore._extent = [];
    newStore._updateGetRawIdx();
    return newStore;
  };
  DataStore2.prototype.selectRange = function(range) {
    var newStore = this.clone();
    var len2 = newStore._count;
    if (!len2) {
      return this;
    }
    var dims = keys(range);
    var dimSize = dims.length;
    if (!dimSize) {
      return this;
    }
    var originalCount = newStore.count();
    var Ctor = getIndicesCtor(newStore._rawCount);
    var newIndices = new Ctor(originalCount);
    var offset = 0;
    var dim0 = dims[0];
    var min3 = range[dim0][0];
    var max3 = range[dim0][1];
    var storeArr = newStore._chunks;
    var quickFinished = false;
    if (!newStore._indices) {
      var idx = 0;
      if (dimSize === 1) {
        var dimStorage = storeArr[dims[0]];
        for (var i = 0; i < len2; i++) {
          var val = dimStorage[i];
          if (val >= min3 && val <= max3 || isNaN(val)) {
            newIndices[offset++] = idx;
          }
          idx++;
        }
        quickFinished = true;
      } else if (dimSize === 2) {
        var dimStorage = storeArr[dims[0]];
        var dimStorage2 = storeArr[dims[1]];
        var min22 = range[dims[1]][0];
        var max22 = range[dims[1]][1];
        for (var i = 0; i < len2; i++) {
          var val = dimStorage[i];
          var val2 = dimStorage2[i];
          if ((val >= min3 && val <= max3 || isNaN(val)) && (val2 >= min22 && val2 <= max22 || isNaN(val2))) {
            newIndices[offset++] = idx;
          }
          idx++;
        }
        quickFinished = true;
      }
    }
    if (!quickFinished) {
      if (dimSize === 1) {
        for (var i = 0; i < originalCount; i++) {
          var rawIndex = newStore.getRawIndex(i);
          var val = storeArr[dims[0]][rawIndex];
          if (val >= min3 && val <= max3 || isNaN(val)) {
            newIndices[offset++] = rawIndex;
          }
        }
      } else {
        for (var i = 0; i < originalCount; i++) {
          var keep = true;
          var rawIndex = newStore.getRawIndex(i);
          for (var k2 = 0; k2 < dimSize; k2++) {
            var dimk = dims[k2];
            var val = storeArr[dimk][rawIndex];
            if (val < range[dimk][0] || val > range[dimk][1]) {
              keep = false;
            }
          }
          if (keep) {
            newIndices[offset++] = newStore.getRawIndex(i);
          }
        }
      }
    }
    if (offset < originalCount) {
      newStore._indices = newIndices;
    }
    newStore._count = offset;
    newStore._extent = [];
    newStore._updateGetRawIdx();
    return newStore;
  };
  DataStore2.prototype.map = function(dims, cb) {
    var target = this.clone(dims);
    this._updateDims(target, dims, cb);
    return target;
  };
  DataStore2.prototype.modify = function(dims, cb) {
    this._updateDims(this, dims, cb);
  };
  DataStore2.prototype._updateDims = function(target, dims, cb) {
    var targetChunks = target._chunks;
    var tmpRetValue = [];
    var dimSize = dims.length;
    var dataCount = target.count();
    var values = [];
    var rawExtent = target._rawExtent;
    for (var i = 0; i < dims.length; i++) {
      rawExtent[dims[i]] = getInitialExtent();
    }
    for (var dataIndex = 0; dataIndex < dataCount; dataIndex++) {
      var rawIndex = target.getRawIndex(dataIndex);
      for (var k2 = 0; k2 < dimSize; k2++) {
        values[k2] = targetChunks[dims[k2]][rawIndex];
      }
      values[dimSize] = dataIndex;
      var retValue = cb && cb.apply(null, values);
      if (retValue != null) {
        if (typeof retValue !== "object") {
          tmpRetValue[0] = retValue;
          retValue = tmpRetValue;
        }
        for (var i = 0; i < retValue.length; i++) {
          var dim = dims[i];
          var val = retValue[i];
          var rawExtentOnDim = rawExtent[dim];
          var dimStore = targetChunks[dim];
          if (dimStore) {
            dimStore[rawIndex] = val;
          }
          if (val < rawExtentOnDim[0]) {
            rawExtentOnDim[0] = val;
          }
          if (val > rawExtentOnDim[1]) {
            rawExtentOnDim[1] = val;
          }
        }
      }
    }
  };
  DataStore2.prototype.lttbDownSample = function(valueDimension, rate) {
    var target = this.clone([valueDimension], true);
    var targetStorage = target._chunks;
    var dimStore = targetStorage[valueDimension];
    var len2 = this.count();
    var sampledIndex = 0;
    var frameSize = Math.floor(1 / rate);
    var currentRawIndex = this.getRawIndex(0);
    var maxArea;
    var area;
    var nextRawIndex;
    var newIndices = new (getIndicesCtor(this._rawCount))(Math.min((Math.ceil(len2 / frameSize) + 2) * 2, len2));
    newIndices[sampledIndex++] = currentRawIndex;
    for (var i = 1; i < len2 - 1; i += frameSize) {
      var nextFrameStart = Math.min(i + frameSize, len2 - 1);
      var nextFrameEnd = Math.min(i + frameSize * 2, len2);
      var avgX = (nextFrameEnd + nextFrameStart) / 2;
      var avgY = 0;
      for (var idx = nextFrameStart; idx < nextFrameEnd; idx++) {
        var rawIndex = this.getRawIndex(idx);
        var y2 = dimStore[rawIndex];
        if (isNaN(y2)) {
          continue;
        }
        avgY += y2;
      }
      avgY /= nextFrameEnd - nextFrameStart;
      var frameStart = i;
      var frameEnd = Math.min(i + frameSize, len2);
      var pointAX = i - 1;
      var pointAY = dimStore[currentRawIndex];
      maxArea = -1;
      nextRawIndex = frameStart;
      var firstNaNIndex = -1;
      var countNaN = 0;
      for (var idx = frameStart; idx < frameEnd; idx++) {
        var rawIndex = this.getRawIndex(idx);
        var y2 = dimStore[rawIndex];
        if (isNaN(y2)) {
          countNaN++;
          if (firstNaNIndex < 0) {
            firstNaNIndex = rawIndex;
          }
          continue;
        }
        area = Math.abs((pointAX - avgX) * (y2 - pointAY) - (pointAX - idx) * (avgY - pointAY));
        if (area > maxArea) {
          maxArea = area;
          nextRawIndex = rawIndex;
        }
      }
      if (countNaN > 0 && countNaN < frameEnd - frameStart) {
        newIndices[sampledIndex++] = Math.min(firstNaNIndex, nextRawIndex);
        nextRawIndex = Math.max(firstNaNIndex, nextRawIndex);
      }
      newIndices[sampledIndex++] = nextRawIndex;
      currentRawIndex = nextRawIndex;
    }
    newIndices[sampledIndex++] = this.getRawIndex(len2 - 1);
    target._count = sampledIndex;
    target._indices = newIndices;
    target.getRawIndex = this._getRawIdx;
    return target;
  };
  DataStore2.prototype.downSample = function(dimension, rate, sampleValue, sampleIndex) {
    var target = this.clone([dimension], true);
    var targetStorage = target._chunks;
    var frameValues = [];
    var frameSize = Math.floor(1 / rate);
    var dimStore = targetStorage[dimension];
    var len2 = this.count();
    var rawExtentOnDim = target._rawExtent[dimension] = getInitialExtent();
    var newIndices = new (getIndicesCtor(this._rawCount))(Math.ceil(len2 / frameSize));
    var offset = 0;
    for (var i = 0; i < len2; i += frameSize) {
      if (frameSize > len2 - i) {
        frameSize = len2 - i;
        frameValues.length = frameSize;
      }
      for (var k2 = 0; k2 < frameSize; k2++) {
        var dataIdx = this.getRawIndex(i + k2);
        frameValues[k2] = dimStore[dataIdx];
      }
      var value = sampleValue(frameValues);
      var sampleFrameIdx = this.getRawIndex(Math.min(i + sampleIndex(frameValues, value) || 0, len2 - 1));
      dimStore[sampleFrameIdx] = value;
      if (value < rawExtentOnDim[0]) {
        rawExtentOnDim[0] = value;
      }
      if (value > rawExtentOnDim[1]) {
        rawExtentOnDim[1] = value;
      }
      newIndices[offset++] = sampleFrameIdx;
    }
    target._count = offset;
    target._indices = newIndices;
    target._updateGetRawIdx();
    return target;
  };
  DataStore2.prototype.each = function(dims, cb) {
    if (!this._count) {
      return;
    }
    var dimSize = dims.length;
    var chunks = this._chunks;
    for (var i = 0, len2 = this.count(); i < len2; i++) {
      var rawIdx = this.getRawIndex(i);
      switch (dimSize) {
        case 0:
          cb(i);
          break;
        case 1:
          cb(chunks[dims[0]][rawIdx], i);
          break;
        case 2:
          cb(chunks[dims[0]][rawIdx], chunks[dims[1]][rawIdx], i);
          break;
        default:
          var k2 = 0;
          var value = [];
          for (; k2 < dimSize; k2++) {
            value[k2] = chunks[dims[k2]][rawIdx];
          }
          value[k2] = i;
          cb.apply(null, value);
      }
    }
  };
  DataStore2.prototype.getDataExtent = function(dim) {
    var dimData = this._chunks[dim];
    var initialExtent = getInitialExtent();
    if (!dimData) {
      return initialExtent;
    }
    var currEnd = this.count();
    var useRaw = !this._indices;
    var dimExtent;
    if (useRaw) {
      return this._rawExtent[dim].slice();
    }
    dimExtent = this._extent[dim];
    if (dimExtent) {
      return dimExtent.slice();
    }
    dimExtent = initialExtent;
    var min3 = dimExtent[0];
    var max3 = dimExtent[1];
    for (var i = 0; i < currEnd; i++) {
      var rawIdx = this.getRawIndex(i);
      var value = dimData[rawIdx];
      value < min3 && (min3 = value);
      value > max3 && (max3 = value);
    }
    dimExtent = [min3, max3];
    this._extent[dim] = dimExtent;
    return dimExtent;
  };
  DataStore2.prototype.getRawDataItem = function(idx) {
    var rawIdx = this.getRawIndex(idx);
    if (!this._provider.persistent) {
      var val = [];
      var chunks = this._chunks;
      for (var i = 0; i < chunks.length; i++) {
        val.push(chunks[i][rawIdx]);
      }
      return val;
    } else {
      return this._provider.getItem(rawIdx);
    }
  };
  DataStore2.prototype.clone = function(clonedDims, ignoreIndices) {
    var target = new DataStore2();
    var chunks = this._chunks;
    var clonedDimsMap = clonedDims && reduce(clonedDims, function(obj, dimIdx) {
      obj[dimIdx] = true;
      return obj;
    }, {});
    if (clonedDimsMap) {
      for (var i = 0; i < chunks.length; i++) {
        target._chunks[i] = !clonedDimsMap[i] ? chunks[i] : cloneChunk(chunks[i]);
      }
    } else {
      target._chunks = chunks;
    }
    this._copyCommonProps(target);
    if (!ignoreIndices) {
      target._indices = this._cloneIndices();
    }
    target._updateGetRawIdx();
    return target;
  };
  DataStore2.prototype._copyCommonProps = function(target) {
    target._count = this._count;
    target._rawCount = this._rawCount;
    target._provider = this._provider;
    target._dimensions = this._dimensions;
    target._extent = clone$2(this._extent);
    target._rawExtent = clone$2(this._rawExtent);
  };
  DataStore2.prototype._cloneIndices = function() {
    if (this._indices) {
      var Ctor = this._indices.constructor;
      var indices = void 0;
      if (Ctor === Array) {
        var thisCount = this._indices.length;
        indices = new Ctor(thisCount);
        for (var i = 0; i < thisCount; i++) {
          indices[i] = this._indices[i];
        }
      } else {
        indices = new Ctor(this._indices);
      }
      return indices;
    }
    return null;
  };
  DataStore2.prototype._getRawIdxIdentity = function(idx) {
    return idx;
  };
  DataStore2.prototype._getRawIdx = function(idx) {
    if (idx < this._count && idx >= 0) {
      return this._indices[idx];
    }
    return -1;
  };
  DataStore2.prototype._updateGetRawIdx = function() {
    this.getRawIndex = this._indices ? this._getRawIdx : this._getRawIdxIdentity;
  };
  DataStore2.internalField = function() {
    function getDimValueSimply(dataItem, property, dataIndex, dimIndex) {
      return parseDataValue(dataItem[dimIndex], this._dimensions[dimIndex]);
    }
    defaultDimValueGetters = {
      arrayRows: getDimValueSimply,
      objectRows: function(dataItem, property, dataIndex, dimIndex) {
        return parseDataValue(dataItem[property], this._dimensions[dimIndex]);
      },
      keyedColumns: getDimValueSimply,
      original: function(dataItem, property, dataIndex, dimIndex) {
        var value = dataItem && (dataItem.value == null ? dataItem : dataItem.value);
        return parseDataValue(value instanceof Array ? value[dimIndex] : value, this._dimensions[dimIndex]);
      },
      typedArray: function(dataItem, property, dataIndex, dimIndex) {
        return dataItem[dimIndex];
      }
    };
  }();
  return DataStore2;
}();
var SourceManager = function() {
  function SourceManager2(sourceHost) {
    this._sourceList = [];
    this._storeList = [];
    this._upstreamSignList = [];
    this._versionSignBase = 0;
    this._dirty = true;
    this._sourceHost = sourceHost;
  }
  SourceManager2.prototype.dirty = function() {
    this._setLocalSource([], []);
    this._storeList = [];
    this._dirty = true;
  };
  SourceManager2.prototype._setLocalSource = function(sourceList, upstreamSignList) {
    this._sourceList = sourceList;
    this._upstreamSignList = upstreamSignList;
    this._versionSignBase++;
    if (this._versionSignBase > 9e10) {
      this._versionSignBase = 0;
    }
  };
  SourceManager2.prototype._getVersionSign = function() {
    return this._sourceHost.uid + "_" + this._versionSignBase;
  };
  SourceManager2.prototype.prepareSource = function() {
    if (this._isDirty()) {
      this._createSource();
      this._dirty = false;
    }
  };
  SourceManager2.prototype._createSource = function() {
    this._setLocalSource([], []);
    var sourceHost = this._sourceHost;
    var upSourceMgrList = this._getUpstreamSourceManagers();
    var hasUpstream = !!upSourceMgrList.length;
    var resultSourceList;
    var upstreamSignList;
    if (isSeries(sourceHost)) {
      var seriesModel = sourceHost;
      var data = void 0;
      var sourceFormat = void 0;
      var upSource = void 0;
      if (hasUpstream) {
        var upSourceMgr = upSourceMgrList[0];
        upSourceMgr.prepareSource();
        upSource = upSourceMgr.getSource();
        data = upSource.data;
        sourceFormat = upSource.sourceFormat;
        upstreamSignList = [upSourceMgr._getVersionSign()];
      } else {
        data = seriesModel.get("data", true);
        sourceFormat = isTypedArray(data) ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL;
        upstreamSignList = [];
      }
      var newMetaRawOption = this._getSourceMetaRawOption() || {};
      var upMetaRawOption = upSource && upSource.metaRawOption || {};
      var seriesLayoutBy = retrieve2(newMetaRawOption.seriesLayoutBy, upMetaRawOption.seriesLayoutBy) || null;
      var sourceHeader = retrieve2(newMetaRawOption.sourceHeader, upMetaRawOption.sourceHeader);
      var dimensions = retrieve2(newMetaRawOption.dimensions, upMetaRawOption.dimensions);
      var needsCreateSource = seriesLayoutBy !== upMetaRawOption.seriesLayoutBy || !!sourceHeader !== !!upMetaRawOption.sourceHeader || dimensions;
      resultSourceList = needsCreateSource ? [createSource(data, {
        seriesLayoutBy,
        sourceHeader,
        dimensions
      }, sourceFormat)] : [];
    } else {
      var datasetModel = sourceHost;
      if (hasUpstream) {
        var result = this._applyTransform(upSourceMgrList);
        resultSourceList = result.sourceList;
        upstreamSignList = result.upstreamSignList;
      } else {
        var sourceData = datasetModel.get("source", true);
        resultSourceList = [createSource(sourceData, this._getSourceMetaRawOption(), null)];
        upstreamSignList = [];
      }
    }
    this._setLocalSource(resultSourceList, upstreamSignList);
  };
  SourceManager2.prototype._applyTransform = function(upMgrList) {
    var datasetModel = this._sourceHost;
    var transformOption = datasetModel.get("transform", true);
    var fromTransformResult = datasetModel.get("fromTransformResult", true);
    if (fromTransformResult != null) {
      var errMsg = "";
      if (upMgrList.length !== 1) {
        doThrow(errMsg);
      }
    }
    var sourceList;
    var upSourceList = [];
    var upstreamSignList = [];
    each$4(upMgrList, function(upMgr) {
      upMgr.prepareSource();
      var upSource = upMgr.getSource(fromTransformResult || 0);
      var errMsg2 = "";
      if (fromTransformResult != null && !upSource) {
        doThrow(errMsg2);
      }
      upSourceList.push(upSource);
      upstreamSignList.push(upMgr._getVersionSign());
    });
    if (transformOption) {
      sourceList = applyDataTransform(transformOption, upSourceList, {
        datasetIndex: datasetModel.componentIndex
      });
    } else if (fromTransformResult != null) {
      sourceList = [cloneSourceShallow(upSourceList[0])];
    }
    return {
      sourceList,
      upstreamSignList
    };
  };
  SourceManager2.prototype._isDirty = function() {
    if (this._dirty) {
      return true;
    }
    var upSourceMgrList = this._getUpstreamSourceManagers();
    for (var i = 0; i < upSourceMgrList.length; i++) {
      var upSrcMgr = upSourceMgrList[i];
      if (upSrcMgr._isDirty() || this._upstreamSignList[i] !== upSrcMgr._getVersionSign()) {
        return true;
      }
    }
  };
  SourceManager2.prototype.getSource = function(sourceIndex) {
    sourceIndex = sourceIndex || 0;
    var source = this._sourceList[sourceIndex];
    if (!source) {
      var upSourceMgrList = this._getUpstreamSourceManagers();
      return upSourceMgrList[0] && upSourceMgrList[0].getSource(sourceIndex);
    }
    return source;
  };
  SourceManager2.prototype.getSharedDataStore = function(seriesDimRequest) {
    var schema = seriesDimRequest.makeStoreSchema();
    return this._innerGetDataStore(schema.dimensions, seriesDimRequest.source, schema.hash);
  };
  SourceManager2.prototype._innerGetDataStore = function(storeDims, seriesSource, sourceReadKey) {
    var sourceIndex = 0;
    var storeList = this._storeList;
    var cachedStoreMap = storeList[sourceIndex];
    if (!cachedStoreMap) {
      cachedStoreMap = storeList[sourceIndex] = {};
    }
    var cachedStore = cachedStoreMap[sourceReadKey];
    if (!cachedStore) {
      var upSourceMgr = this._getUpstreamSourceManagers()[0];
      if (isSeries(this._sourceHost) && upSourceMgr) {
        cachedStore = upSourceMgr._innerGetDataStore(storeDims, seriesSource, sourceReadKey);
      } else {
        cachedStore = new DataStore();
        cachedStore.initData(new DefaultDataProvider(seriesSource, storeDims.length), storeDims);
      }
      cachedStoreMap[sourceReadKey] = cachedStore;
    }
    return cachedStore;
  };
  SourceManager2.prototype._getUpstreamSourceManagers = function() {
    var sourceHost = this._sourceHost;
    if (isSeries(sourceHost)) {
      var datasetModel = querySeriesUpstreamDatasetModel(sourceHost);
      return !datasetModel ? [] : [datasetModel.getSourceManager()];
    } else {
      return map$1(queryDatasetUpstreamDatasetModels(sourceHost), function(datasetModel2) {
        return datasetModel2.getSourceManager();
      });
    }
  };
  SourceManager2.prototype._getSourceMetaRawOption = function() {
    var sourceHost = this._sourceHost;
    var seriesLayoutBy;
    var sourceHeader;
    var dimensions;
    if (isSeries(sourceHost)) {
      seriesLayoutBy = sourceHost.get("seriesLayoutBy", true);
      sourceHeader = sourceHost.get("sourceHeader", true);
      dimensions = sourceHost.get("dimensions", true);
    } else if (!this._getUpstreamSourceManagers().length) {
      var model = sourceHost;
      seriesLayoutBy = model.get("seriesLayoutBy", true);
      sourceHeader = model.get("sourceHeader", true);
      dimensions = model.get("dimensions", true);
    }
    return {
      seriesLayoutBy,
      sourceHeader,
      dimensions
    };
  };
  return SourceManager2;
}();
function isSeries(sourceHost) {
  return sourceHost.mainType === "series";
}
function doThrow(errMsg) {
  throw new Error(errMsg);
}
var TOOLTIP_LINE_HEIGHT_CSS = "line-height:1";
function getTooltipTextStyle(textStyle, renderMode) {
  var nameFontColor = textStyle.color || "#6e7079";
  var nameFontSize = textStyle.fontSize || 12;
  var nameFontWeight = textStyle.fontWeight || "400";
  var valueFontColor = textStyle.color || "#464646";
  var valueFontSize = textStyle.fontSize || 14;
  var valueFontWeight = textStyle.fontWeight || "900";
  if (renderMode === "html") {
    return {
      nameStyle: "font-size:" + encodeHTML(nameFontSize + "") + "px;color:" + encodeHTML(nameFontColor) + ";font-weight:" + encodeHTML(nameFontWeight + ""),
      valueStyle: "font-size:" + encodeHTML(valueFontSize + "") + "px;color:" + encodeHTML(valueFontColor) + ";font-weight:" + encodeHTML(valueFontWeight + "")
    };
  } else {
    return {
      nameStyle: {
        fontSize: nameFontSize,
        fill: nameFontColor,
        fontWeight: nameFontWeight
      },
      valueStyle: {
        fontSize: valueFontSize,
        fill: valueFontColor,
        fontWeight: valueFontWeight
      }
    };
  }
}
var HTML_GAPS = [0, 10, 20, 30];
var RICH_TEXT_GAPS = ["", "\n", "\n\n", "\n\n\n"];
function createTooltipMarkup(type, option) {
  option.type = type;
  return option;
}
function isSectionFragment(frag) {
  return frag.type === "section";
}
function getBuilder(frag) {
  return isSectionFragment(frag) ? buildSection : buildNameValue;
}
function getBlockGapLevel(frag) {
  if (isSectionFragment(frag)) {
    var gapLevel_1 = 0;
    var subBlockLen = frag.blocks.length;
    var hasInnerGap_1 = subBlockLen > 1 || subBlockLen > 0 && !frag.noHeader;
    each$4(frag.blocks, function(subBlock) {
      var subGapLevel = getBlockGapLevel(subBlock);
      if (subGapLevel >= gapLevel_1) {
        gapLevel_1 = subGapLevel + +(hasInnerGap_1 && (!subGapLevel || isSectionFragment(subBlock) && !subBlock.noHeader));
      }
    });
    return gapLevel_1;
  }
  return 0;
}
function buildSection(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {
  var noHeader = fragment.noHeader;
  var gaps = getGap(getBlockGapLevel(fragment));
  var subMarkupTextList = [];
  var subBlocks = fragment.blocks || [];
  assert(!subBlocks || isArray(subBlocks));
  subBlocks = subBlocks || [];
  var orderMode = ctx.orderMode;
  if (fragment.sortBlocks && orderMode) {
    subBlocks = subBlocks.slice();
    var orderMap = {
      valueAsc: "asc",
      valueDesc: "desc"
    };
    if (hasOwn(orderMap, orderMode)) {
      var comparator_1 = new SortOrderComparator(orderMap[orderMode], null);
      subBlocks.sort(function(a, b2) {
        return comparator_1.evaluate(a.sortParam, b2.sortParam);
      });
    } else if (orderMode === "seriesDesc") {
      subBlocks.reverse();
    }
  }
  each$4(subBlocks, function(subBlock, idx) {
    var valueFormatter = fragment.valueFormatter;
    var subMarkupText2 = getBuilder(subBlock)(
      valueFormatter ? extend(extend({}, ctx), {
        valueFormatter
      }) : ctx,
      subBlock,
      idx > 0 ? gaps.html : 0,
      toolTipTextStyle
    );
    subMarkupText2 != null && subMarkupTextList.push(subMarkupText2);
  });
  var subMarkupText = ctx.renderMode === "richText" ? subMarkupTextList.join(gaps.richText) : wrapBlockHTML(subMarkupTextList.join(""), noHeader ? topMarginForOuterGap : gaps.html);
  if (noHeader) {
    return subMarkupText;
  }
  var displayableHeader = makeValueReadable(fragment.header, "ordinal", ctx.useUTC);
  var nameStyle = getTooltipTextStyle(toolTipTextStyle, ctx.renderMode).nameStyle;
  if (ctx.renderMode === "richText") {
    return wrapInlineNameRichText(ctx, displayableHeader, nameStyle) + gaps.richText + subMarkupText;
  } else {
    return wrapBlockHTML('<div style="' + nameStyle + ";" + TOOLTIP_LINE_HEIGHT_CSS + ';">' + encodeHTML(displayableHeader) + "</div>" + subMarkupText, topMarginForOuterGap);
  }
}
function buildNameValue(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {
  var renderMode = ctx.renderMode;
  var noName = fragment.noName;
  var noValue = fragment.noValue;
  var noMarker = !fragment.markerType;
  var name = fragment.name;
  var useUTC = ctx.useUTC;
  var valueFormatter = fragment.valueFormatter || ctx.valueFormatter || function(value) {
    value = isArray(value) ? value : [value];
    return map$1(value, function(val, idx) {
      return makeValueReadable(val, isArray(valueTypeOption) ? valueTypeOption[idx] : valueTypeOption, useUTC);
    });
  };
  if (noName && noValue) {
    return;
  }
  var markerStr = noMarker ? "" : ctx.markupStyleCreator.makeTooltipMarker(fragment.markerType, fragment.markerColor || "#333", renderMode);
  var readableName = noName ? "" : makeValueReadable(name, "ordinal", useUTC);
  var valueTypeOption = fragment.valueType;
  var readableValueList = noValue ? [] : valueFormatter(fragment.value);
  var valueAlignRight = !noMarker || !noName;
  var valueCloseToMarker = !noMarker && noName;
  var _a2 = getTooltipTextStyle(toolTipTextStyle, renderMode), nameStyle = _a2.nameStyle, valueStyle = _a2.valueStyle;
  return renderMode === "richText" ? (noMarker ? "" : markerStr) + (noName ? "" : wrapInlineNameRichText(ctx, readableName, nameStyle)) + (noValue ? "" : wrapInlineValueRichText(ctx, readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)) : wrapBlockHTML((noMarker ? "" : markerStr) + (noName ? "" : wrapInlineNameHTML(readableName, !noMarker, nameStyle)) + (noValue ? "" : wrapInlineValueHTML(readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)), topMarginForOuterGap);
}
function buildTooltipMarkup(fragment, markupStyleCreator, renderMode, orderMode, useUTC, toolTipTextStyle) {
  if (!fragment) {
    return;
  }
  var builder = getBuilder(fragment);
  var ctx = {
    useUTC,
    renderMode,
    orderMode,
    markupStyleCreator,
    valueFormatter: fragment.valueFormatter
  };
  return builder(ctx, fragment, 0, toolTipTextStyle);
}
function getGap(gapLevel) {
  return {
    html: HTML_GAPS[gapLevel],
    richText: RICH_TEXT_GAPS[gapLevel]
  };
}
function wrapBlockHTML(encodedContent, topGap) {
  var clearfix = '<div style="clear:both"></div>';
  var marginCSS = "margin: " + topGap + "px 0 0";
  return '<div style="' + marginCSS + ";" + TOOLTIP_LINE_HEIGHT_CSS + ';">' + encodedContent + clearfix + "</div>";
}
function wrapInlineNameHTML(name, leftHasMarker, style2) {
  var marginCss = leftHasMarker ? "margin-left:2px" : "";
  return '<span style="' + style2 + ";" + marginCss + '">' + encodeHTML(name) + "</span>";
}
function wrapInlineValueHTML(valueList, alignRight, valueCloseToMarker, style2) {
  var paddingStr = valueCloseToMarker ? "10px" : "20px";
  var alignCSS = alignRight ? "float:right;margin-left:" + paddingStr : "";
  valueList = isArray(valueList) ? valueList : [valueList];
  return '<span style="' + alignCSS + ";" + style2 + '">' + map$1(valueList, function(value) {
    return encodeHTML(value);
  }).join("&nbsp;&nbsp;") + "</span>";
}
function wrapInlineNameRichText(ctx, name, style2) {
  return ctx.markupStyleCreator.wrapRichTextStyle(name, style2);
}
function wrapInlineValueRichText(ctx, values, alignRight, valueCloseToMarker, style2) {
  var styles = [style2];
  var paddingLeft = valueCloseToMarker ? 10 : 20;
  alignRight && styles.push({
    padding: [0, 0, 0, paddingLeft],
    align: "right"
  });
  return ctx.markupStyleCreator.wrapRichTextStyle(isArray(values) ? values.join("  ") : values, styles);
}
function retrieveVisualColorForTooltipMarker(series, dataIndex) {
  var style2 = series.getData().getItemVisual(dataIndex, "style");
  var color = style2[series.visualDrawType];
  return convertToColorString(color);
}
function getPaddingFromTooltipModel(model, renderMode) {
  var padding = model.get("padding");
  return padding != null ? padding : renderMode === "richText" ? [8, 10] : 10;
}
var TooltipMarkupStyleCreator = function() {
  function TooltipMarkupStyleCreator2() {
    this.richTextStyles = {};
    this._nextStyleNameId = getRandomIdBase();
  }
  TooltipMarkupStyleCreator2.prototype._generateStyleName = function() {
    return "__EC_aUTo_" + this._nextStyleNameId++;
  };
  TooltipMarkupStyleCreator2.prototype.makeTooltipMarker = function(markerType, colorStr, renderMode) {
    var markerId = renderMode === "richText" ? this._generateStyleName() : null;
    var marker = getTooltipMarker({
      color: colorStr,
      type: markerType,
      renderMode,
      markerId
    });
    if (isString(marker)) {
      return marker;
    } else {
      this.richTextStyles[markerId] = marker.style;
      return marker.content;
    }
  };
  TooltipMarkupStyleCreator2.prototype.wrapRichTextStyle = function(text, styles) {
    var finalStl = {};
    if (isArray(styles)) {
      each$4(styles, function(stl) {
        return extend(finalStl, stl);
      });
    } else {
      extend(finalStl, styles);
    }
    var styleName = this._generateStyleName();
    this.richTextStyles[styleName] = finalStl;
    return "{" + styleName + "|" + text + "}";
  };
  return TooltipMarkupStyleCreator2;
}();
function defaultSeriesFormatTooltip(opt) {
  var series = opt.series;
  var dataIndex = opt.dataIndex;
  var multipleSeries = opt.multipleSeries;
  var data = series.getData();
  var tooltipDims = data.mapDimensionsAll("defaultedTooltip");
  var tooltipDimLen = tooltipDims.length;
  var value = series.getRawValue(dataIndex);
  var isValueArr = isArray(value);
  var markerColor = retrieveVisualColorForTooltipMarker(series, dataIndex);
  var inlineValue;
  var inlineValueType;
  var subBlocks;
  var sortParam;
  if (tooltipDimLen > 1 || isValueArr && !tooltipDimLen) {
    var formatArrResult = formatTooltipArrayValue(value, series, dataIndex, tooltipDims, markerColor);
    inlineValue = formatArrResult.inlineValues;
    inlineValueType = formatArrResult.inlineValueTypes;
    subBlocks = formatArrResult.blocks;
    sortParam = formatArrResult.inlineValues[0];
  } else if (tooltipDimLen) {
    var dimInfo = data.getDimensionInfo(tooltipDims[0]);
    sortParam = inlineValue = retrieveRawValue(data, dataIndex, tooltipDims[0]);
    inlineValueType = dimInfo.type;
  } else {
    sortParam = inlineValue = isValueArr ? value[0] : value;
  }
  var seriesNameSpecified = isNameSpecified(series);
  var seriesName = seriesNameSpecified && series.name || "";
  var itemName = data.getName(dataIndex);
  var inlineName = multipleSeries ? seriesName : itemName;
  return createTooltipMarkup("section", {
    header: seriesName,
    noHeader: multipleSeries || !seriesNameSpecified,
    sortParam,
    blocks: [createTooltipMarkup("nameValue", {
      markerType: "item",
      markerColor,
      name: inlineName,
      noName: !trim(inlineName),
      value: inlineValue,
      valueType: inlineValueType
    })].concat(subBlocks || [])
  });
}
function formatTooltipArrayValue(value, series, dataIndex, tooltipDims, colorStr) {
  var data = series.getData();
  var isValueMultipleLine = reduce(value, function(isValueMultipleLine2, val, idx) {
    var dimItem = data.getDimensionInfo(idx);
    return isValueMultipleLine2 = isValueMultipleLine2 || dimItem && dimItem.tooltip !== false && dimItem.displayName != null;
  }, false);
  var inlineValues = [];
  var inlineValueTypes = [];
  var blocks = [];
  tooltipDims.length ? each$4(tooltipDims, function(dim) {
    setEachItem(retrieveRawValue(data, dataIndex, dim), dim);
  }) : each$4(value, setEachItem);
  function setEachItem(val, dim) {
    var dimInfo = data.getDimensionInfo(dim);
    if (!dimInfo || dimInfo.otherDims.tooltip === false) {
      return;
    }
    if (isValueMultipleLine) {
      blocks.push(createTooltipMarkup("nameValue", {
        markerType: "subItem",
        markerColor: colorStr,
        name: dimInfo.displayName,
        value: val,
        valueType: dimInfo.type
      }));
    } else {
      inlineValues.push(val);
      inlineValueTypes.push(dimInfo.type);
    }
  }
  return {
    inlineValues,
    inlineValueTypes,
    blocks
  };
}
var inner$6 = makeInner();
function getSelectionKey(data, dataIndex) {
  return data.getName(dataIndex) || data.getId(dataIndex);
}
var SERIES_UNIVERSAL_TRANSITION_PROP = "__universalTransitionEnabled";
var SeriesModel = function(_super) {
  __extends(SeriesModel2, _super);
  function SeriesModel2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this._selectedDataIndicesMap = {};
    return _this;
  }
  SeriesModel2.prototype.init = function(option, parentModel, ecModel) {
    this.seriesIndex = this.componentIndex;
    this.dataTask = createTask({
      count: dataTaskCount,
      reset: dataTaskReset
    });
    this.dataTask.context = {
      model: this
    };
    this.mergeDefaultAndTheme(option, ecModel);
    var sourceManager = inner$6(this).sourceManager = new SourceManager(this);
    sourceManager.prepareSource();
    var data = this.getInitialData(option, ecModel);
    wrapData(data, this);
    this.dataTask.context.data = data;
    inner$6(this).dataBeforeProcessed = data;
    autoSeriesName(this);
    this._initSelectedMapFromData(data);
  };
  SeriesModel2.prototype.mergeDefaultAndTheme = function(option, ecModel) {
    var layoutMode = fetchLayoutMode(this);
    var inputPositionParams = layoutMode ? getLayoutParams(option) : {};
    var themeSubType = this.subType;
    if (ComponentModel$1.hasClass(themeSubType)) {
      themeSubType += "Series";
    }
    merge(option, ecModel.getTheme().get(this.subType));
    merge(option, this.getDefaultOption());
    defaultEmphasis(option, "label", ["show"]);
    this.fillDataTextStyle(option.data);
    if (layoutMode) {
      mergeLayoutParam(option, inputPositionParams, layoutMode);
    }
  };
  SeriesModel2.prototype.mergeOption = function(newSeriesOption, ecModel) {
    newSeriesOption = merge(this.option, newSeriesOption, true);
    this.fillDataTextStyle(newSeriesOption.data);
    var layoutMode = fetchLayoutMode(this);
    if (layoutMode) {
      mergeLayoutParam(this.option, newSeriesOption, layoutMode);
    }
    var sourceManager = inner$6(this).sourceManager;
    sourceManager.dirty();
    sourceManager.prepareSource();
    var data = this.getInitialData(newSeriesOption, ecModel);
    wrapData(data, this);
    this.dataTask.dirty();
    this.dataTask.context.data = data;
    inner$6(this).dataBeforeProcessed = data;
    autoSeriesName(this);
    this._initSelectedMapFromData(data);
  };
  SeriesModel2.prototype.fillDataTextStyle = function(data) {
    if (data && !isTypedArray(data)) {
      var props = ["show"];
      for (var i = 0; i < data.length; i++) {
        if (data[i] && data[i].label) {
          defaultEmphasis(data[i], "label", props);
        }
      }
    }
  };
  SeriesModel2.prototype.getInitialData = function(option, ecModel) {
    return;
  };
  SeriesModel2.prototype.appendData = function(params) {
    var data = this.getRawData();
    data.appendData(params.data);
  };
  SeriesModel2.prototype.getData = function(dataType) {
    var task = getCurrentTask(this);
    if (task) {
      var data = task.context.data;
      return dataType == null ? data : data.getLinkedData(dataType);
    } else {
      return inner$6(this).data;
    }
  };
  SeriesModel2.prototype.getAllData = function() {
    var mainData = this.getData();
    return mainData && mainData.getLinkedDataAll ? mainData.getLinkedDataAll() : [{
      data: mainData
    }];
  };
  SeriesModel2.prototype.setData = function(data) {
    var task = getCurrentTask(this);
    if (task) {
      var context = task.context;
      context.outputData = data;
      if (task !== this.dataTask) {
        context.data = data;
      }
    }
    inner$6(this).data = data;
  };
  SeriesModel2.prototype.getEncode = function() {
    var encode = this.get("encode", true);
    if (encode) {
      return createHashMap(encode);
    }
  };
  SeriesModel2.prototype.getSourceManager = function() {
    return inner$6(this).sourceManager;
  };
  SeriesModel2.prototype.getSource = function() {
    return this.getSourceManager().getSource();
  };
  SeriesModel2.prototype.getRawData = function() {
    return inner$6(this).dataBeforeProcessed;
  };
  SeriesModel2.prototype.getColorBy = function() {
    var colorBy = this.get("colorBy");
    return colorBy || "series";
  };
  SeriesModel2.prototype.isColorBySeries = function() {
    return this.getColorBy() === "series";
  };
  SeriesModel2.prototype.getBaseAxis = function() {
    var coordSys = this.coordinateSystem;
    return coordSys && coordSys.getBaseAxis && coordSys.getBaseAxis();
  };
  SeriesModel2.prototype.formatTooltip = function(dataIndex, multipleSeries, dataType) {
    return defaultSeriesFormatTooltip({
      series: this,
      dataIndex,
      multipleSeries
    });
  };
  SeriesModel2.prototype.isAnimationEnabled = function() {
    var ecModel = this.ecModel;
    if (env$1.node && !(ecModel && ecModel.ssr)) {
      return false;
    }
    var animationEnabled = this.getShallow("animation");
    if (animationEnabled) {
      if (this.getData().count() > this.getShallow("animationThreshold")) {
        animationEnabled = false;
      }
    }
    return !!animationEnabled;
  };
  SeriesModel2.prototype.restoreData = function() {
    this.dataTask.dirty();
  };
  SeriesModel2.prototype.getColorFromPalette = function(name, scope, requestColorNum) {
    var ecModel = this.ecModel;
    var color = PaletteMixin.prototype.getColorFromPalette.call(this, name, scope, requestColorNum);
    if (!color) {
      color = ecModel.getColorFromPalette(name, scope, requestColorNum);
    }
    return color;
  };
  SeriesModel2.prototype.coordDimToDataDim = function(coordDim) {
    return this.getRawData().mapDimensionsAll(coordDim);
  };
  SeriesModel2.prototype.getProgressive = function() {
    return this.get("progressive");
  };
  SeriesModel2.prototype.getProgressiveThreshold = function() {
    return this.get("progressiveThreshold");
  };
  SeriesModel2.prototype.select = function(innerDataIndices, dataType) {
    this._innerSelect(this.getData(dataType), innerDataIndices);
  };
  SeriesModel2.prototype.unselect = function(innerDataIndices, dataType) {
    var selectedMap = this.option.selectedMap;
    if (!selectedMap) {
      return;
    }
    var selectedMode = this.option.selectedMode;
    var data = this.getData(dataType);
    if (selectedMode === "series" || selectedMap === "all") {
      this.option.selectedMap = {};
      this._selectedDataIndicesMap = {};
      return;
    }
    for (var i = 0; i < innerDataIndices.length; i++) {
      var dataIndex = innerDataIndices[i];
      var nameOrId = getSelectionKey(data, dataIndex);
      selectedMap[nameOrId] = false;
      this._selectedDataIndicesMap[nameOrId] = -1;
    }
  };
  SeriesModel2.prototype.toggleSelect = function(innerDataIndices, dataType) {
    var tmpArr2 = [];
    for (var i = 0; i < innerDataIndices.length; i++) {
      tmpArr2[0] = innerDataIndices[i];
      this.isSelected(innerDataIndices[i], dataType) ? this.unselect(tmpArr2, dataType) : this.select(tmpArr2, dataType);
    }
  };
  SeriesModel2.prototype.getSelectedDataIndices = function() {
    if (this.option.selectedMap === "all") {
      return [].slice.call(this.getData().getIndices());
    }
    var selectedDataIndicesMap = this._selectedDataIndicesMap;
    var nameOrIds = keys(selectedDataIndicesMap);
    var dataIndices = [];
    for (var i = 0; i < nameOrIds.length; i++) {
      var dataIndex = selectedDataIndicesMap[nameOrIds[i]];
      if (dataIndex >= 0) {
        dataIndices.push(dataIndex);
      }
    }
    return dataIndices;
  };
  SeriesModel2.prototype.isSelected = function(dataIndex, dataType) {
    var selectedMap = this.option.selectedMap;
    if (!selectedMap) {
      return false;
    }
    var data = this.getData(dataType);
    return (selectedMap === "all" || selectedMap[getSelectionKey(data, dataIndex)]) && !data.getItemModel(dataIndex).get(["select", "disabled"]);
  };
  SeriesModel2.prototype.isUniversalTransitionEnabled = function() {
    if (this[SERIES_UNIVERSAL_TRANSITION_PROP]) {
      return true;
    }
    var universalTransitionOpt = this.option.universalTransition;
    if (!universalTransitionOpt) {
      return false;
    }
    if (universalTransitionOpt === true) {
      return true;
    }
    return universalTransitionOpt && universalTransitionOpt.enabled;
  };
  SeriesModel2.prototype._innerSelect = function(data, innerDataIndices) {
    var _a2, _b2;
    var option = this.option;
    var selectedMode = option.selectedMode;
    var len2 = innerDataIndices.length;
    if (!selectedMode || !len2) {
      return;
    }
    if (selectedMode === "series") {
      option.selectedMap = "all";
    } else if (selectedMode === "multiple") {
      if (!isObject$2(option.selectedMap)) {
        option.selectedMap = {};
      }
      var selectedMap = option.selectedMap;
      for (var i = 0; i < len2; i++) {
        var dataIndex = innerDataIndices[i];
        var nameOrId = getSelectionKey(data, dataIndex);
        selectedMap[nameOrId] = true;
        this._selectedDataIndicesMap[nameOrId] = data.getRawIndex(dataIndex);
      }
    } else if (selectedMode === "single" || selectedMode === true) {
      var lastDataIndex = innerDataIndices[len2 - 1];
      var nameOrId = getSelectionKey(data, lastDataIndex);
      option.selectedMap = (_a2 = {}, _a2[nameOrId] = true, _a2);
      this._selectedDataIndicesMap = (_b2 = {}, _b2[nameOrId] = data.getRawIndex(lastDataIndex), _b2);
    }
  };
  SeriesModel2.prototype._initSelectedMapFromData = function(data) {
    if (this.option.selectedMap) {
      return;
    }
    var dataIndices = [];
    if (data.hasItemOption) {
      data.each(function(idx) {
        var rawItem = data.getRawDataItem(idx);
        if (rawItem && rawItem.selected) {
          dataIndices.push(idx);
        }
      });
    }
    if (dataIndices.length > 0) {
      this._innerSelect(data, dataIndices);
    }
  };
  SeriesModel2.registerClass = function(clz) {
    return ComponentModel$1.registerClass(clz);
  };
  SeriesModel2.protoInitialize = function() {
    var proto = SeriesModel2.prototype;
    proto.type = "series.__base__";
    proto.seriesIndex = 0;
    proto.ignoreStyleOnData = false;
    proto.hasSymbolVisual = false;
    proto.defaultSymbol = "circle";
    proto.visualStyleAccessPath = "itemStyle";
    proto.visualDrawType = "fill";
  }();
  return SeriesModel2;
}(ComponentModel$1);
mixin(SeriesModel, DataFormatMixin);
mixin(SeriesModel, PaletteMixin);
mountExtend(SeriesModel, ComponentModel$1);
function autoSeriesName(seriesModel) {
  var name = seriesModel.name;
  if (!isNameSpecified(seriesModel)) {
    seriesModel.name = getSeriesAutoName(seriesModel) || name;
  }
}
function getSeriesAutoName(seriesModel) {
  var data = seriesModel.getRawData();
  var dataDims = data.mapDimensionsAll("seriesName");
  var nameArr = [];
  each$4(dataDims, function(dataDim) {
    var dimInfo = data.getDimensionInfo(dataDim);
    dimInfo.displayName && nameArr.push(dimInfo.displayName);
  });
  return nameArr.join(" ");
}
function dataTaskCount(context) {
  return context.model.getRawData().count();
}
function dataTaskReset(context) {
  var seriesModel = context.model;
  seriesModel.setData(seriesModel.getRawData().cloneShallow());
  return dataTaskProgress;
}
function dataTaskProgress(param, context) {
  if (context.outputData && param.end > context.outputData.count()) {
    context.model.getRawData().cloneShallow(context.outputData);
  }
}
function wrapData(data, seriesModel) {
  each$4(concatArray(data.CHANGABLE_METHODS, data.DOWNSAMPLE_METHODS), function(methodName) {
    data.wrapMethod(methodName, curry$1(onDataChange, seriesModel));
  });
}
function onDataChange(seriesModel, newList) {
  var task = getCurrentTask(seriesModel);
  if (task) {
    task.setOutputEnd((newList || this).count());
  }
  return newList;
}
function getCurrentTask(seriesModel) {
  var scheduler = (seriesModel.ecModel || {}).scheduler;
  var pipeline = scheduler && scheduler.getPipeline(seriesModel.uid);
  if (pipeline) {
    var task = pipeline.currentTask;
    if (task) {
      var agentStubMap = task.agentStubMap;
      if (agentStubMap) {
        task = agentStubMap.get(seriesModel.uid);
      }
    }
    return task;
  }
}
var SeriesModel$1 = SeriesModel;
var ComponentView = function() {
  function ComponentView2() {
    this.group = new Group$3();
    this.uid = getUID("viewComponent");
  }
  ComponentView2.prototype.init = function(ecModel, api) {
  };
  ComponentView2.prototype.render = function(model, ecModel, api, payload) {
  };
  ComponentView2.prototype.dispose = function(ecModel, api) {
  };
  ComponentView2.prototype.updateView = function(model, ecModel, api, payload) {
  };
  ComponentView2.prototype.updateLayout = function(model, ecModel, api, payload) {
  };
  ComponentView2.prototype.updateVisual = function(model, ecModel, api, payload) {
  };
  ComponentView2.prototype.toggleBlurSeries = function(seriesModels, isBlur, ecModel) {
  };
  ComponentView2.prototype.eachRendered = function(cb) {
    var group = this.group;
    if (group) {
      group.traverse(cb);
    }
  };
  return ComponentView2;
}();
enableClassExtend(ComponentView);
enableClassManagement(ComponentView);
var ComponentView$1 = ComponentView;
function createRenderPlanner() {
  var inner2 = makeInner();
  return function(seriesModel) {
    var fields = inner2(seriesModel);
    var pipelineContext = seriesModel.pipelineContext;
    var originalLarge = !!fields.large;
    var originalProgressive = !!fields.progressiveRender;
    var large = fields.large = !!(pipelineContext && pipelineContext.large);
    var progressive = fields.progressiveRender = !!(pipelineContext && pipelineContext.progressiveRender);
    return !!(originalLarge !== large || originalProgressive !== progressive) && "reset";
  };
}
var inner$5 = makeInner();
var renderPlanner = createRenderPlanner();
var ChartView = function() {
  function ChartView2() {
    this.group = new Group$3();
    this.uid = getUID("viewChart");
    this.renderTask = createTask({
      plan: renderTaskPlan,
      reset: renderTaskReset
    });
    this.renderTask.context = {
      view: this
    };
  }
  ChartView2.prototype.init = function(ecModel, api) {
  };
  ChartView2.prototype.render = function(seriesModel, ecModel, api, payload) {
  };
  ChartView2.prototype.highlight = function(seriesModel, ecModel, api, payload) {
    var data = seriesModel.getData(payload && payload.dataType);
    if (!data) {
      return;
    }
    toggleHighlight(data, payload, "emphasis");
  };
  ChartView2.prototype.downplay = function(seriesModel, ecModel, api, payload) {
    var data = seriesModel.getData(payload && payload.dataType);
    if (!data) {
      return;
    }
    toggleHighlight(data, payload, "normal");
  };
  ChartView2.prototype.remove = function(ecModel, api) {
    this.group.removeAll();
  };
  ChartView2.prototype.dispose = function(ecModel, api) {
  };
  ChartView2.prototype.updateView = function(seriesModel, ecModel, api, payload) {
    this.render(seriesModel, ecModel, api, payload);
  };
  ChartView2.prototype.updateLayout = function(seriesModel, ecModel, api, payload) {
    this.render(seriesModel, ecModel, api, payload);
  };
  ChartView2.prototype.updateVisual = function(seriesModel, ecModel, api, payload) {
    this.render(seriesModel, ecModel, api, payload);
  };
  ChartView2.prototype.eachRendered = function(cb) {
    traverseElements(this.group, cb);
  };
  ChartView2.markUpdateMethod = function(payload, methodName) {
    inner$5(payload).updateMethod = methodName;
  };
  ChartView2.protoInitialize = function() {
    var proto = ChartView2.prototype;
    proto.type = "chart";
  }();
  return ChartView2;
}();
function elSetState(el, state, highlightDigit) {
  if (el && isHighDownDispatcher(el)) {
    (state === "emphasis" ? enterEmphasis : leaveEmphasis)(el, highlightDigit);
  }
}
function toggleHighlight(data, payload, state) {
  var dataIndex = queryDataIndex(data, payload);
  var highlightDigit = payload && payload.highlightKey != null ? getHighlightDigit(payload.highlightKey) : null;
  if (dataIndex != null) {
    each$4(normalizeToArray(dataIndex), function(dataIdx) {
      elSetState(data.getItemGraphicEl(dataIdx), state, highlightDigit);
    });
  } else {
    data.eachItemGraphicEl(function(el) {
      elSetState(el, state, highlightDigit);
    });
  }
}
enableClassExtend(ChartView);
enableClassManagement(ChartView);
function renderTaskPlan(context) {
  return renderPlanner(context.model);
}
function renderTaskReset(context) {
  var seriesModel = context.model;
  var ecModel = context.ecModel;
  var api = context.api;
  var payload = context.payload;
  var progressiveRender = seriesModel.pipelineContext.progressiveRender;
  var view = context.view;
  var updateMethod = payload && inner$5(payload).updateMethod;
  var methodName = progressiveRender ? "incrementalPrepareRender" : updateMethod && view[updateMethod] ? updateMethod : "render";
  if (methodName !== "render") {
    view[methodName](seriesModel, ecModel, api, payload);
  }
  return progressMethodMap[methodName];
}
var progressMethodMap = {
  incrementalPrepareRender: {
    progress: function(params, context) {
      context.view.incrementalRender(params, context.model, context.ecModel, context.api, context.payload);
    }
  },
  render: {
    forceFirstProgress: true,
    progress: function(params, context) {
      context.view.render(context.model, context.ecModel, context.api, context.payload);
    }
  }
};
var ChartView$1 = ChartView;
var ORIGIN_METHOD = "\0__throttleOriginMethod";
var RATE = "\0__throttleRate";
var THROTTLE_TYPE = "\0__throttleType";
function throttle(fn, delay, debounce) {
  var currCall;
  var lastCall = 0;
  var lastExec = 0;
  var timer = null;
  var diff;
  var scope;
  var args;
  var debounceNextCall;
  delay = delay || 0;
  function exec() {
    lastExec = new Date().getTime();
    timer = null;
    fn.apply(scope, args || []);
  }
  var cb = function() {
    var cbArgs = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      cbArgs[_i] = arguments[_i];
    }
    currCall = new Date().getTime();
    scope = this;
    args = cbArgs;
    var thisDelay = debounceNextCall || delay;
    var thisDebounce = debounceNextCall || debounce;
    debounceNextCall = null;
    diff = currCall - (thisDebounce ? lastCall : lastExec) - thisDelay;
    clearTimeout(timer);
    if (thisDebounce) {
      timer = setTimeout(exec, thisDelay);
    } else {
      if (diff >= 0) {
        exec();
      } else {
        timer = setTimeout(exec, -diff);
      }
    }
    lastCall = currCall;
  };
  cb.clear = function() {
    if (timer) {
      clearTimeout(timer);
      timer = null;
    }
  };
  cb.debounceNextCall = function(debounceDelay) {
    debounceNextCall = debounceDelay;
  };
  return cb;
}
function createOrUpdate(obj, fnAttr, rate, throttleType) {
  var fn = obj[fnAttr];
  if (!fn) {
    return;
  }
  var originFn = fn[ORIGIN_METHOD] || fn;
  var lastThrottleType = fn[THROTTLE_TYPE];
  var lastRate = fn[RATE];
  if (lastRate !== rate || lastThrottleType !== throttleType) {
    if (rate == null || !throttleType) {
      return obj[fnAttr] = originFn;
    }
    fn = obj[fnAttr] = throttle(originFn, rate, throttleType === "debounce");
    fn[ORIGIN_METHOD] = originFn;
    fn[THROTTLE_TYPE] = throttleType;
    fn[RATE] = rate;
  }
  return fn;
}
function clear(obj, fnAttr) {
  var fn = obj[fnAttr];
  if (fn && fn[ORIGIN_METHOD]) {
    fn.clear && fn.clear();
    obj[fnAttr] = fn[ORIGIN_METHOD];
  }
}
var inner$4 = makeInner();
var defaultStyleMappers = {
  itemStyle: makeStyleMapper(ITEM_STYLE_KEY_MAP, true),
  lineStyle: makeStyleMapper(LINE_STYLE_KEY_MAP, true)
};
var defaultColorKey = {
  lineStyle: "stroke",
  itemStyle: "fill"
};
function getStyleMapper(seriesModel, stylePath) {
  var styleMapper = seriesModel.visualStyleMapper || defaultStyleMappers[stylePath];
  if (!styleMapper) {
    console.warn("Unknown style type '" + stylePath + "'.");
    return defaultStyleMappers.itemStyle;
  }
  return styleMapper;
}
function getDefaultColorKey(seriesModel, stylePath) {
  var colorKey = seriesModel.visualDrawType || defaultColorKey[stylePath];
  if (!colorKey) {
    console.warn("Unknown style type '" + stylePath + "'.");
    return "fill";
  }
  return colorKey;
}
var seriesStyleTask = {
  createOnAllSeries: true,
  performRawSeries: true,
  reset: function(seriesModel, ecModel) {
    var data = seriesModel.getData();
    var stylePath = seriesModel.visualStyleAccessPath || "itemStyle";
    var styleModel = seriesModel.getModel(stylePath);
    var getStyle2 = getStyleMapper(seriesModel, stylePath);
    var globalStyle = getStyle2(styleModel);
    var decalOption = styleModel.getShallow("decal");
    if (decalOption) {
      data.setVisual("decal", decalOption);
      decalOption.dirty = true;
    }
    var colorKey = getDefaultColorKey(seriesModel, stylePath);
    var color = globalStyle[colorKey];
    var colorCallback = isFunction(color) ? color : null;
    var hasAutoColor = globalStyle.fill === "auto" || globalStyle.stroke === "auto";
    if (!globalStyle[colorKey] || colorCallback || hasAutoColor) {
      var colorPalette2 = seriesModel.getColorFromPalette(
        seriesModel.name,
        null,
        ecModel.getSeriesCount()
      );
      if (!globalStyle[colorKey]) {
        globalStyle[colorKey] = colorPalette2;
        data.setVisual("colorFromPalette", true);
      }
      globalStyle.fill = globalStyle.fill === "auto" || isFunction(globalStyle.fill) ? colorPalette2 : globalStyle.fill;
      globalStyle.stroke = globalStyle.stroke === "auto" || isFunction(globalStyle.stroke) ? colorPalette2 : globalStyle.stroke;
    }
    data.setVisual("style", globalStyle);
    data.setVisual("drawType", colorKey);
    if (!ecModel.isSeriesFiltered(seriesModel) && colorCallback) {
      data.setVisual("colorFromPalette", false);
      return {
        dataEach: function(data2, idx) {
          var dataParams = seriesModel.getDataParams(idx);
          var itemStyle = extend({}, globalStyle);
          itemStyle[colorKey] = colorCallback(dataParams);
          data2.setItemVisual(idx, "style", itemStyle);
        }
      };
    }
  }
};
var sharedModel = new Model$1();
var dataStyleTask = {
  createOnAllSeries: true,
  performRawSeries: true,
  reset: function(seriesModel, ecModel) {
    if (seriesModel.ignoreStyleOnData || ecModel.isSeriesFiltered(seriesModel)) {
      return;
    }
    var data = seriesModel.getData();
    var stylePath = seriesModel.visualStyleAccessPath || "itemStyle";
    var getStyle2 = getStyleMapper(seriesModel, stylePath);
    var colorKey = data.getVisual("drawType");
    return {
      dataEach: data.hasItemOption ? function(data2, idx) {
        var rawItem = data2.getRawDataItem(idx);
        if (rawItem && rawItem[stylePath]) {
          sharedModel.option = rawItem[stylePath];
          var style2 = getStyle2(sharedModel);
          var existsStyle = data2.ensureUniqueItemVisual(idx, "style");
          extend(existsStyle, style2);
          if (sharedModel.option.decal) {
            data2.setItemVisual(idx, "decal", sharedModel.option.decal);
            sharedModel.option.decal.dirty = true;
          }
          if (colorKey in style2) {
            data2.setItemVisual(idx, "colorFromPalette", false);
          }
        }
      } : null
    };
  }
};
var dataColorPaletteTask = {
  performRawSeries: true,
  overallReset: function(ecModel) {
    var paletteScopeGroupByType = createHashMap();
    ecModel.eachSeries(function(seriesModel) {
      var colorBy = seriesModel.getColorBy();
      if (seriesModel.isColorBySeries()) {
        return;
      }
      var key = seriesModel.type + "-" + colorBy;
      var colorScope = paletteScopeGroupByType.get(key);
      if (!colorScope) {
        colorScope = {};
        paletteScopeGroupByType.set(key, colorScope);
      }
      inner$4(seriesModel).scope = colorScope;
    });
    ecModel.eachSeries(function(seriesModel) {
      if (seriesModel.isColorBySeries() || ecModel.isSeriesFiltered(seriesModel)) {
        return;
      }
      var dataAll = seriesModel.getRawData();
      var idxMap = {};
      var data = seriesModel.getData();
      var colorScope = inner$4(seriesModel).scope;
      var stylePath = seriesModel.visualStyleAccessPath || "itemStyle";
      var colorKey = getDefaultColorKey(seriesModel, stylePath);
      data.each(function(idx) {
        var rawIdx = data.getRawIndex(idx);
        idxMap[rawIdx] = idx;
      });
      dataAll.each(function(rawIdx) {
        var idx = idxMap[rawIdx];
        var fromPalette = data.getItemVisual(idx, "colorFromPalette");
        if (fromPalette) {
          var itemStyle = data.ensureUniqueItemVisual(idx, "style");
          var name_1 = dataAll.getName(rawIdx) || rawIdx + "";
          var dataCount = dataAll.count();
          itemStyle[colorKey] = seriesModel.getColorFromPalette(name_1, colorScope, dataCount);
        }
      });
    });
  }
};
var PI$1 = Math.PI;
function defaultLoading(api, opts) {
  opts = opts || {};
  defaults(opts, {
    text: "loading",
    textColor: "#000",
    fontSize: 12,
    fontWeight: "normal",
    fontStyle: "normal",
    fontFamily: "sans-serif",
    maskColor: "rgba(255, 255, 255, 0.8)",
    showSpinner: true,
    color: "#5470c6",
    spinnerRadius: 10,
    lineWidth: 5,
    zlevel: 0
  });
  var group = new Group$3();
  var mask = new Rect$1({
    style: {
      fill: opts.maskColor
    },
    zlevel: opts.zlevel,
    z: 1e4
  });
  group.add(mask);
  var textContent = new ZRText$1({
    style: {
      text: opts.text,
      fill: opts.textColor,
      fontSize: opts.fontSize,
      fontWeight: opts.fontWeight,
      fontStyle: opts.fontStyle,
      fontFamily: opts.fontFamily
    },
    zlevel: opts.zlevel,
    z: 10001
  });
  var labelRect = new Rect$1({
    style: {
      fill: "none"
    },
    textContent,
    textConfig: {
      position: "right",
      distance: 10
    },
    zlevel: opts.zlevel,
    z: 10001
  });
  group.add(labelRect);
  var arc;
  if (opts.showSpinner) {
    arc = new Arc$1({
      shape: {
        startAngle: -PI$1 / 2,
        endAngle: -PI$1 / 2 + 0.1,
        r: opts.spinnerRadius
      },
      style: {
        stroke: opts.color,
        lineCap: "round",
        lineWidth: opts.lineWidth
      },
      zlevel: opts.zlevel,
      z: 10001
    });
    arc.animateShape(true).when(1e3, {
      endAngle: PI$1 * 3 / 2
    }).start("circularInOut");
    arc.animateShape(true).when(1e3, {
      startAngle: PI$1 * 3 / 2
    }).delay(300).start("circularInOut");
    group.add(arc);
  }
  group.resize = function() {
    var textWidth = textContent.getBoundingRect().width;
    var r = opts.showSpinner ? opts.spinnerRadius : 0;
    var cx = (api.getWidth() - r * 2 - (opts.showSpinner && textWidth ? 10 : 0) - textWidth) / 2 - (opts.showSpinner && textWidth ? 0 : 5 + textWidth / 2) + (opts.showSpinner ? 0 : textWidth / 2) + (textWidth ? 0 : r);
    var cy = api.getHeight() / 2;
    opts.showSpinner && arc.setShape({
      cx,
      cy
    });
    labelRect.setShape({
      x: cx - r,
      y: cy - r,
      width: r * 2,
      height: r * 2
    });
    mask.setShape({
      x: 0,
      y: 0,
      width: api.getWidth(),
      height: api.getHeight()
    });
  };
  group.resize();
  return group;
}
var Scheduler = function() {
  function Scheduler2(ecInstance, api, dataProcessorHandlers, visualHandlers) {
    this._stageTaskMap = createHashMap();
    this.ecInstance = ecInstance;
    this.api = api;
    dataProcessorHandlers = this._dataProcessorHandlers = dataProcessorHandlers.slice();
    visualHandlers = this._visualHandlers = visualHandlers.slice();
    this._allHandlers = dataProcessorHandlers.concat(visualHandlers);
  }
  Scheduler2.prototype.restoreData = function(ecModel, payload) {
    ecModel.restoreData(payload);
    this._stageTaskMap.each(function(taskRecord) {
      var overallTask = taskRecord.overallTask;
      overallTask && overallTask.dirty();
    });
  };
  Scheduler2.prototype.getPerformArgs = function(task, isBlock) {
    if (!task.__pipeline) {
      return;
    }
    var pipeline = this._pipelineMap.get(task.__pipeline.id);
    var pCtx = pipeline.context;
    var incremental = !isBlock && pipeline.progressiveEnabled && (!pCtx || pCtx.progressiveRender) && task.__idxInPipeline > pipeline.blockIndex;
    var step = incremental ? pipeline.step : null;
    var modDataCount = pCtx && pCtx.modDataCount;
    var modBy = modDataCount != null ? Math.ceil(modDataCount / step) : null;
    return {
      step,
      modBy,
      modDataCount
    };
  };
  Scheduler2.prototype.getPipeline = function(pipelineId) {
    return this._pipelineMap.get(pipelineId);
  };
  Scheduler2.prototype.updateStreamModes = function(seriesModel, view) {
    var pipeline = this._pipelineMap.get(seriesModel.uid);
    var data = seriesModel.getData();
    var dataLen = data.count();
    var progressiveRender = pipeline.progressiveEnabled && view.incrementalPrepareRender && dataLen >= pipeline.threshold;
    var large = seriesModel.get("large") && dataLen >= seriesModel.get("largeThreshold");
    var modDataCount = seriesModel.get("progressiveChunkMode") === "mod" ? dataLen : null;
    seriesModel.pipelineContext = pipeline.context = {
      progressiveRender,
      modDataCount,
      large
    };
  };
  Scheduler2.prototype.restorePipelines = function(ecModel) {
    var scheduler = this;
    var pipelineMap = scheduler._pipelineMap = createHashMap();
    ecModel.eachSeries(function(seriesModel) {
      var progressive = seriesModel.getProgressive();
      var pipelineId = seriesModel.uid;
      pipelineMap.set(pipelineId, {
        id: pipelineId,
        head: null,
        tail: null,
        threshold: seriesModel.getProgressiveThreshold(),
        progressiveEnabled: progressive && !(seriesModel.preventIncremental && seriesModel.preventIncremental()),
        blockIndex: -1,
        step: Math.round(progressive || 700),
        count: 0
      });
      scheduler._pipe(seriesModel, seriesModel.dataTask);
    });
  };
  Scheduler2.prototype.prepareStageTasks = function() {
    var stageTaskMap = this._stageTaskMap;
    var ecModel = this.api.getModel();
    var api = this.api;
    each$4(this._allHandlers, function(handler) {
      var record = stageTaskMap.get(handler.uid) || stageTaskMap.set(handler.uid, {});
      var errMsg = "";
      assert(!(handler.reset && handler.overallReset), errMsg);
      handler.reset && this._createSeriesStageTask(handler, record, ecModel, api);
      handler.overallReset && this._createOverallStageTask(handler, record, ecModel, api);
    }, this);
  };
  Scheduler2.prototype.prepareView = function(view, model, ecModel, api) {
    var renderTask = view.renderTask;
    var context = renderTask.context;
    context.model = model;
    context.ecModel = ecModel;
    context.api = api;
    renderTask.__block = !view.incrementalPrepareRender;
    this._pipe(model, renderTask);
  };
  Scheduler2.prototype.performDataProcessorTasks = function(ecModel, payload) {
    this._performStageTasks(this._dataProcessorHandlers, ecModel, payload, {
      block: true
    });
  };
  Scheduler2.prototype.performVisualTasks = function(ecModel, payload, opt) {
    this._performStageTasks(this._visualHandlers, ecModel, payload, opt);
  };
  Scheduler2.prototype._performStageTasks = function(stageHandlers, ecModel, payload, opt) {
    opt = opt || {};
    var unfinished = false;
    var scheduler = this;
    each$4(stageHandlers, function(stageHandler, idx) {
      if (opt.visualType && opt.visualType !== stageHandler.visualType) {
        return;
      }
      var stageHandlerRecord = scheduler._stageTaskMap.get(stageHandler.uid);
      var seriesTaskMap = stageHandlerRecord.seriesTaskMap;
      var overallTask = stageHandlerRecord.overallTask;
      if (overallTask) {
        var overallNeedDirty_1;
        var agentStubMap = overallTask.agentStubMap;
        agentStubMap.each(function(stub) {
          if (needSetDirty(opt, stub)) {
            stub.dirty();
            overallNeedDirty_1 = true;
          }
        });
        overallNeedDirty_1 && overallTask.dirty();
        scheduler.updatePayload(overallTask, payload);
        var performArgs_1 = scheduler.getPerformArgs(overallTask, opt.block);
        agentStubMap.each(function(stub) {
          stub.perform(performArgs_1);
        });
        if (overallTask.perform(performArgs_1)) {
          unfinished = true;
        }
      } else if (seriesTaskMap) {
        seriesTaskMap.each(function(task, pipelineId) {
          if (needSetDirty(opt, task)) {
            task.dirty();
          }
          var performArgs = scheduler.getPerformArgs(task, opt.block);
          performArgs.skip = !stageHandler.performRawSeries && ecModel.isSeriesFiltered(task.context.model);
          scheduler.updatePayload(task, payload);
          if (task.perform(performArgs)) {
            unfinished = true;
          }
        });
      }
    });
    function needSetDirty(opt2, task) {
      return opt2.setDirty && (!opt2.dirtyMap || opt2.dirtyMap.get(task.__pipeline.id));
    }
    this.unfinished = unfinished || this.unfinished;
  };
  Scheduler2.prototype.performSeriesTasks = function(ecModel) {
    var unfinished;
    ecModel.eachSeries(function(seriesModel) {
      unfinished = seriesModel.dataTask.perform() || unfinished;
    });
    this.unfinished = unfinished || this.unfinished;
  };
  Scheduler2.prototype.plan = function() {
    this._pipelineMap.each(function(pipeline) {
      var task = pipeline.tail;
      do {
        if (task.__block) {
          pipeline.blockIndex = task.__idxInPipeline;
          break;
        }
        task = task.getUpstream();
      } while (task);
    });
  };
  Scheduler2.prototype.updatePayload = function(task, payload) {
    payload !== "remain" && (task.context.payload = payload);
  };
  Scheduler2.prototype._createSeriesStageTask = function(stageHandler, stageHandlerRecord, ecModel, api) {
    var scheduler = this;
    var oldSeriesTaskMap = stageHandlerRecord.seriesTaskMap;
    var newSeriesTaskMap = stageHandlerRecord.seriesTaskMap = createHashMap();
    var seriesType2 = stageHandler.seriesType;
    var getTargetSeries = stageHandler.getTargetSeries;
    if (stageHandler.createOnAllSeries) {
      ecModel.eachRawSeries(create2);
    } else if (seriesType2) {
      ecModel.eachRawSeriesByType(seriesType2, create2);
    } else if (getTargetSeries) {
      getTargetSeries(ecModel, api).each(create2);
    }
    function create2(seriesModel) {
      var pipelineId = seriesModel.uid;
      var task = newSeriesTaskMap.set(pipelineId, oldSeriesTaskMap && oldSeriesTaskMap.get(pipelineId) || createTask({
        plan: seriesTaskPlan,
        reset: seriesTaskReset,
        count: seriesTaskCount
      }));
      task.context = {
        model: seriesModel,
        ecModel,
        api,
        useClearVisual: stageHandler.isVisual && !stageHandler.isLayout,
        plan: stageHandler.plan,
        reset: stageHandler.reset,
        scheduler
      };
      scheduler._pipe(seriesModel, task);
    }
  };
  Scheduler2.prototype._createOverallStageTask = function(stageHandler, stageHandlerRecord, ecModel, api) {
    var scheduler = this;
    var overallTask = stageHandlerRecord.overallTask = stageHandlerRecord.overallTask || createTask({
      reset: overallTaskReset
    });
    overallTask.context = {
      ecModel,
      api,
      overallReset: stageHandler.overallReset,
      scheduler
    };
    var oldAgentStubMap = overallTask.agentStubMap;
    var newAgentStubMap = overallTask.agentStubMap = createHashMap();
    var seriesType2 = stageHandler.seriesType;
    var getTargetSeries = stageHandler.getTargetSeries;
    var overallProgress = true;
    var shouldOverallTaskDirty = false;
    var errMsg = "";
    assert(!stageHandler.createOnAllSeries, errMsg);
    if (seriesType2) {
      ecModel.eachRawSeriesByType(seriesType2, createStub);
    } else if (getTargetSeries) {
      getTargetSeries(ecModel, api).each(createStub);
    } else {
      overallProgress = false;
      each$4(ecModel.getSeries(), createStub);
    }
    function createStub(seriesModel) {
      var pipelineId = seriesModel.uid;
      var stub = newAgentStubMap.set(pipelineId, oldAgentStubMap && oldAgentStubMap.get(pipelineId) || (shouldOverallTaskDirty = true, createTask({
        reset: stubReset,
        onDirty: stubOnDirty
      })));
      stub.context = {
        model: seriesModel,
        overallProgress
      };
      stub.agent = overallTask;
      stub.__block = overallProgress;
      scheduler._pipe(seriesModel, stub);
    }
    if (shouldOverallTaskDirty) {
      overallTask.dirty();
    }
  };
  Scheduler2.prototype._pipe = function(seriesModel, task) {
    var pipelineId = seriesModel.uid;
    var pipeline = this._pipelineMap.get(pipelineId);
    !pipeline.head && (pipeline.head = task);
    pipeline.tail && pipeline.tail.pipe(task);
    pipeline.tail = task;
    task.__idxInPipeline = pipeline.count++;
    task.__pipeline = pipeline;
  };
  Scheduler2.wrapStageHandler = function(stageHandler, visualType) {
    if (isFunction(stageHandler)) {
      stageHandler = {
        overallReset: stageHandler,
        seriesType: detectSeriseType(stageHandler)
      };
    }
    stageHandler.uid = getUID("stageHandler");
    visualType && (stageHandler.visualType = visualType);
    return stageHandler;
  };
  return Scheduler2;
}();
function overallTaskReset(context) {
  context.overallReset(context.ecModel, context.api, context.payload);
}
function stubReset(context) {
  return context.overallProgress && stubProgress;
}
function stubProgress() {
  this.agent.dirty();
  this.getDownstream().dirty();
}
function stubOnDirty() {
  this.agent && this.agent.dirty();
}
function seriesTaskPlan(context) {
  return context.plan ? context.plan(context.model, context.ecModel, context.api, context.payload) : null;
}
function seriesTaskReset(context) {
  if (context.useClearVisual) {
    context.data.clearAllVisual();
  }
  var resetDefines = context.resetDefines = normalizeToArray(context.reset(context.model, context.ecModel, context.api, context.payload));
  return resetDefines.length > 1 ? map$1(resetDefines, function(v, idx) {
    return makeSeriesTaskProgress(idx);
  }) : singleSeriesTaskProgress;
}
var singleSeriesTaskProgress = makeSeriesTaskProgress(0);
function makeSeriesTaskProgress(resetDefineIdx) {
  return function(params, context) {
    var data = context.data;
    var resetDefine = context.resetDefines[resetDefineIdx];
    if (resetDefine && resetDefine.dataEach) {
      for (var i = params.start; i < params.end; i++) {
        resetDefine.dataEach(data, i);
      }
    } else if (resetDefine && resetDefine.progress) {
      resetDefine.progress(params, data);
    }
  };
}
function seriesTaskCount(context) {
  return context.data.count();
}
function detectSeriseType(legacyFunc) {
  seriesType = null;
  try {
    legacyFunc(ecModelMock, apiMock);
  } catch (e2) {
  }
  return seriesType;
}
var ecModelMock = {};
var apiMock = {};
var seriesType;
mockMethods(ecModelMock, GlobalModel$1);
mockMethods(apiMock, ExtensionAPI$1);
ecModelMock.eachSeriesByType = ecModelMock.eachRawSeriesByType = function(type) {
  seriesType = type;
};
ecModelMock.eachComponent = function(cond) {
  if (cond.mainType === "series" && cond.subType) {
    seriesType = cond.subType;
  }
};
function mockMethods(target, Clz) {
  for (var name_1 in Clz.prototype) {
    target[name_1] = noop;
  }
}
var Scheduler$1 = Scheduler;
var colorAll = ["#37A2DA", "#32C5E9", "#67E0E3", "#9FE6B8", "#FFDB5C", "#ff9f7f", "#fb7293", "#E062AE", "#E690D1", "#e7bcf3", "#9d96f5", "#8378EA", "#96BFFF"];
var lightTheme = {
  color: colorAll,
  colorLayer: [["#37A2DA", "#ffd85c", "#fd7b5f"], ["#37A2DA", "#67E0E3", "#FFDB5C", "#ff9f7f", "#E062AE", "#9d96f5"], ["#37A2DA", "#32C5E9", "#9FE6B8", "#FFDB5C", "#ff9f7f", "#fb7293", "#e7bcf3", "#8378EA", "#96BFFF"], colorAll]
};
var contrastColor = "#B9B8CE";
var backgroundColor = "#100C2A";
var axisCommon = function() {
  return {
    axisLine: {
      lineStyle: {
        color: contrastColor
      }
    },
    splitLine: {
      lineStyle: {
        color: "#484753"
      }
    },
    splitArea: {
      areaStyle: {
        color: ["rgba(255,255,255,0.02)", "rgba(255,255,255,0.05)"]
      }
    },
    minorSplitLine: {
      lineStyle: {
        color: "#20203B"
      }
    }
  };
};
var colorPalette = ["#4992ff", "#7cffb2", "#fddd60", "#ff6e76", "#58d9f9", "#05c091", "#ff8a45", "#8d48e3", "#dd79ff"];
var theme = {
  darkMode: true,
  color: colorPalette,
  backgroundColor,
  axisPointer: {
    lineStyle: {
      color: "#817f91"
    },
    crossStyle: {
      color: "#817f91"
    },
    label: {
      color: "#fff"
    }
  },
  legend: {
    textStyle: {
      color: contrastColor
    }
  },
  textStyle: {
    color: contrastColor
  },
  title: {
    textStyle: {
      color: "#EEF1FA"
    },
    subtextStyle: {
      color: "#B9B8CE"
    }
  },
  toolbox: {
    iconStyle: {
      borderColor: contrastColor
    }
  },
  dataZoom: {
    borderColor: "#71708A",
    textStyle: {
      color: contrastColor
    },
    brushStyle: {
      color: "rgba(135,163,206,0.3)"
    },
    handleStyle: {
      color: "#353450",
      borderColor: "#C5CBE3"
    },
    moveHandleStyle: {
      color: "#B0B6C3",
      opacity: 0.3
    },
    fillerColor: "rgba(135,163,206,0.2)",
    emphasis: {
      handleStyle: {
        borderColor: "#91B7F2",
        color: "#4D587D"
      },
      moveHandleStyle: {
        color: "#636D9A",
        opacity: 0.7
      }
    },
    dataBackground: {
      lineStyle: {
        color: "#71708A",
        width: 1
      },
      areaStyle: {
        color: "#71708A"
      }
    },
    selectedDataBackground: {
      lineStyle: {
        color: "#87A3CE"
      },
      areaStyle: {
        color: "#87A3CE"
      }
    }
  },
  visualMap: {
    textStyle: {
      color: contrastColor
    }
  },
  timeline: {
    lineStyle: {
      color: contrastColor
    },
    label: {
      color: contrastColor
    },
    controlStyle: {
      color: contrastColor,
      borderColor: contrastColor
    }
  },
  calendar: {
    itemStyle: {
      color: backgroundColor
    },
    dayLabel: {
      color: contrastColor
    },
    monthLabel: {
      color: contrastColor
    },
    yearLabel: {
      color: contrastColor
    }
  },
  timeAxis: axisCommon(),
  logAxis: axisCommon(),
  valueAxis: axisCommon(),
  categoryAxis: axisCommon(),
  line: {
    symbol: "circle"
  },
  graph: {
    color: colorPalette
  },
  gauge: {
    title: {
      color: contrastColor
    },
    axisLine: {
      lineStyle: {
        color: [[1, "rgba(207,212,219,0.2)"]]
      }
    },
    axisLabel: {
      color: contrastColor
    },
    detail: {
      color: "#EEF1FA"
    }
  },
  candlestick: {
    itemStyle: {
      color: "#f64e56",
      color0: "#54ea92",
      borderColor: "#f64e56",
      borderColor0: "#54ea92"
    }
  }
};
theme.categoryAxis.splitLine.show = false;
var darkTheme = theme;
var ECEventProcessor = function() {
  function ECEventProcessor2() {
  }
  ECEventProcessor2.prototype.normalizeQuery = function(query) {
    var cptQuery = {};
    var dataQuery = {};
    var otherQuery = {};
    if (isString(query)) {
      var condCptType = parseClassType(query);
      cptQuery.mainType = condCptType.main || null;
      cptQuery.subType = condCptType.sub || null;
    } else {
      var suffixes_1 = ["Index", "Name", "Id"];
      var dataKeys_1 = {
        name: 1,
        dataIndex: 1,
        dataType: 1
      };
      each$4(query, function(val, key) {
        var reserved = false;
        for (var i = 0; i < suffixes_1.length; i++) {
          var propSuffix = suffixes_1[i];
          var suffixPos = key.lastIndexOf(propSuffix);
          if (suffixPos > 0 && suffixPos === key.length - propSuffix.length) {
            var mainType = key.slice(0, suffixPos);
            if (mainType !== "data") {
              cptQuery.mainType = mainType;
              cptQuery[propSuffix.toLowerCase()] = val;
              reserved = true;
            }
          }
        }
        if (dataKeys_1.hasOwnProperty(key)) {
          dataQuery[key] = val;
          reserved = true;
        }
        if (!reserved) {
          otherQuery[key] = val;
        }
      });
    }
    return {
      cptQuery,
      dataQuery,
      otherQuery
    };
  };
  ECEventProcessor2.prototype.filter = function(eventType, query) {
    var eventInfo = this.eventInfo;
    if (!eventInfo) {
      return true;
    }
    var targetEl = eventInfo.targetEl;
    var packedEvent = eventInfo.packedEvent;
    var model = eventInfo.model;
    var view = eventInfo.view;
    if (!model || !view) {
      return true;
    }
    var cptQuery = query.cptQuery;
    var dataQuery = query.dataQuery;
    return check(cptQuery, model, "mainType") && check(cptQuery, model, "subType") && check(cptQuery, model, "index", "componentIndex") && check(cptQuery, model, "name") && check(cptQuery, model, "id") && check(dataQuery, packedEvent, "name") && check(dataQuery, packedEvent, "dataIndex") && check(dataQuery, packedEvent, "dataType") && (!view.filterForExposedEvent || view.filterForExposedEvent(eventType, query.otherQuery, targetEl, packedEvent));
    function check(query2, host, prop, propOnHost) {
      return query2[prop] == null || host[propOnHost || prop] === query2[prop];
    }
  };
  ECEventProcessor2.prototype.afterTrigger = function() {
    this.eventInfo = null;
  };
  return ECEventProcessor2;
}();
var SYMBOL_PROPS_WITH_CB = ["symbol", "symbolSize", "symbolRotate", "symbolOffset"];
var SYMBOL_PROPS = SYMBOL_PROPS_WITH_CB.concat(["symbolKeepAspect"]);
var seriesSymbolTask = {
  createOnAllSeries: true,
  performRawSeries: true,
  reset: function(seriesModel, ecModel) {
    var data = seriesModel.getData();
    if (seriesModel.legendIcon) {
      data.setVisual("legendIcon", seriesModel.legendIcon);
    }
    if (!seriesModel.hasSymbolVisual) {
      return;
    }
    var symbolOptions = {};
    var symbolOptionsCb = {};
    var hasCallback = false;
    for (var i = 0; i < SYMBOL_PROPS_WITH_CB.length; i++) {
      var symbolPropName = SYMBOL_PROPS_WITH_CB[i];
      var val = seriesModel.get(symbolPropName);
      if (isFunction(val)) {
        hasCallback = true;
        symbolOptionsCb[symbolPropName] = val;
      } else {
        symbolOptions[symbolPropName] = val;
      }
    }
    symbolOptions.symbol = symbolOptions.symbol || seriesModel.defaultSymbol;
    data.setVisual(extend({
      legendIcon: seriesModel.legendIcon || symbolOptions.symbol,
      symbolKeepAspect: seriesModel.get("symbolKeepAspect")
    }, symbolOptions));
    if (ecModel.isSeriesFiltered(seriesModel)) {
      return;
    }
    var symbolPropsCb = keys(symbolOptionsCb);
    function dataEach(data2, idx) {
      var rawValue = seriesModel.getRawValue(idx);
      var params = seriesModel.getDataParams(idx);
      for (var i2 = 0; i2 < symbolPropsCb.length; i2++) {
        var symbolPropName2 = symbolPropsCb[i2];
        data2.setItemVisual(idx, symbolPropName2, symbolOptionsCb[symbolPropName2](rawValue, params));
      }
    }
    return {
      dataEach: hasCallback ? dataEach : null
    };
  }
};
var dataSymbolTask = {
  createOnAllSeries: true,
  performRawSeries: true,
  reset: function(seriesModel, ecModel) {
    if (!seriesModel.hasSymbolVisual) {
      return;
    }
    if (ecModel.isSeriesFiltered(seriesModel)) {
      return;
    }
    var data = seriesModel.getData();
    function dataEach(data2, idx) {
      var itemModel = data2.getItemModel(idx);
      for (var i = 0; i < SYMBOL_PROPS.length; i++) {
        var symbolPropName = SYMBOL_PROPS[i];
        var val = itemModel.getShallow(symbolPropName, true);
        if (val != null) {
          data2.setItemVisual(idx, symbolPropName, val);
        }
      }
    }
    return {
      dataEach: data.hasItemOption ? dataEach : null
    };
  }
};
function getItemVisualFromData(data, dataIndex, key) {
  switch (key) {
    case "color":
      var style2 = data.getItemVisual(dataIndex, "style");
      return style2[data.getVisual("drawType")];
    case "opacity":
      return data.getItemVisual(dataIndex, "style").opacity;
    case "symbol":
    case "symbolSize":
    case "liftZ":
      return data.getItemVisual(dataIndex, key);
  }
}
function getVisualFromData(data, key) {
  switch (key) {
    case "color":
      var style2 = data.getVisual("style");
      return style2[data.getVisual("drawType")];
    case "opacity":
      return data.getVisual("style").opacity;
    case "symbol":
    case "symbolSize":
    case "liftZ":
      return data.getVisual(key);
  }
}
function createLegacyDataSelectAction(seriesType2, ecRegisterAction) {
  function getSeriesIndices(ecModel, payload) {
    var seriesIndices = [];
    ecModel.eachComponent({
      mainType: "series",
      subType: seriesType2,
      query: payload
    }, function(seriesModel) {
      seriesIndices.push(seriesModel.seriesIndex);
    });
    return seriesIndices;
  }
  each$4([[seriesType2 + "ToggleSelect", "toggleSelect"], [seriesType2 + "Select", "select"], [seriesType2 + "UnSelect", "unselect"]], function(eventsMap) {
    ecRegisterAction(eventsMap[0], function(payload, ecModel, api) {
      payload = extend({}, payload);
      api.dispatchAction(extend(payload, {
        type: eventsMap[1],
        seriesIndex: getSeriesIndices(ecModel, payload)
      }));
    });
  });
}
function handleSeriesLegacySelectEvents(type, eventPostfix, ecIns, ecModel, payload) {
  var legacyEventName = type + eventPostfix;
  if (!ecIns.isSilent(legacyEventName)) {
    ecModel.eachComponent({
      mainType: "series",
      subType: "pie"
    }, function(seriesModel) {
      var seriesIndex = seriesModel.seriesIndex;
      var selectedMap = seriesModel.option.selectedMap;
      var selected = payload.selected;
      for (var i = 0; i < selected.length; i++) {
        if (selected[i].seriesIndex === seriesIndex) {
          var data = seriesModel.getData();
          var dataIndex = queryDataIndex(data, payload.fromActionPayload);
          ecIns.trigger(legacyEventName, {
            type: legacyEventName,
            seriesId: seriesModel.id,
            name: isArray(dataIndex) ? data.getName(dataIndex[0]) : data.getName(dataIndex),
            selected: isString(selectedMap) ? selectedMap : extend({}, selectedMap)
          });
        }
      }
    });
  }
}
function handleLegacySelectEvents(messageCenter, ecIns, api) {
  messageCenter.on("selectchanged", function(params) {
    var ecModel = api.getModel();
    if (params.isFromClick) {
      handleSeriesLegacySelectEvents("map", "selectchanged", ecIns, ecModel, params);
      handleSeriesLegacySelectEvents("pie", "selectchanged", ecIns, ecModel, params);
    } else if (params.fromAction === "select") {
      handleSeriesLegacySelectEvents("map", "selected", ecIns, ecModel, params);
      handleSeriesLegacySelectEvents("pie", "selected", ecIns, ecModel, params);
    } else if (params.fromAction === "unselect") {
      handleSeriesLegacySelectEvents("map", "unselected", ecIns, ecModel, params);
      handleSeriesLegacySelectEvents("pie", "unselected", ecIns, ecModel, params);
    }
  });
}
function findEventDispatcher(target, det, returnFirstMatch) {
  var found;
  while (target) {
    if (det(target)) {
      found = target;
      if (returnFirstMatch) {
        break;
      }
    }
    target = target.__hostTarget || target.parent;
  }
  return found;
}
var wmUniqueIndex = Math.round(Math.random() * 9);
var supportDefineProperty = typeof Object.defineProperty === "function";
var WeakMap = function() {
  function WeakMap2() {
    this._id = "__ec_inner_" + wmUniqueIndex++;
  }
  WeakMap2.prototype.get = function(key) {
    return this._guard(key)[this._id];
  };
  WeakMap2.prototype.set = function(key, value) {
    var target = this._guard(key);
    if (supportDefineProperty) {
      Object.defineProperty(target, this._id, {
        value,
        enumerable: false,
        configurable: true
      });
    } else {
      target[this._id] = value;
    }
    return this;
  };
  WeakMap2.prototype["delete"] = function(key) {
    if (this.has(key)) {
      delete this._guard(key)[this._id];
      return true;
    }
    return false;
  };
  WeakMap2.prototype.has = function(key) {
    return !!this._guard(key)[this._id];
  };
  WeakMap2.prototype._guard = function(key) {
    if (key !== Object(key)) {
      throw TypeError("Value of WeakMap is not a non-null object.");
    }
    return key;
  };
  return WeakMap2;
}();
var WeakMap$1 = WeakMap;
var Triangle = Path$1.extend({
  type: "triangle",
  shape: {
    cx: 0,
    cy: 0,
    width: 0,
    height: 0
  },
  buildPath: function(path, shape) {
    var cx = shape.cx;
    var cy = shape.cy;
    var width = shape.width / 2;
    var height = shape.height / 2;
    path.moveTo(cx, cy - height);
    path.lineTo(cx + width, cy + height);
    path.lineTo(cx - width, cy + height);
    path.closePath();
  }
});
var Diamond = Path$1.extend({
  type: "diamond",
  shape: {
    cx: 0,
    cy: 0,
    width: 0,
    height: 0
  },
  buildPath: function(path, shape) {
    var cx = shape.cx;
    var cy = shape.cy;
    var width = shape.width / 2;
    var height = shape.height / 2;
    path.moveTo(cx, cy - height);
    path.lineTo(cx + width, cy);
    path.lineTo(cx, cy + height);
    path.lineTo(cx - width, cy);
    path.closePath();
  }
});
var Pin = Path$1.extend({
  type: "pin",
  shape: {
    x: 0,
    y: 0,
    width: 0,
    height: 0
  },
  buildPath: function(path, shape) {
    var x2 = shape.x;
    var y2 = shape.y;
    var w2 = shape.width / 5 * 3;
    var h2 = Math.max(w2, shape.height);
    var r = w2 / 2;
    var dy = r * r / (h2 - r);
    var cy = y2 - h2 + r + dy;
    var angle = Math.asin(dy / r);
    var dx = Math.cos(angle) * r;
    var tanX = Math.sin(angle);
    var tanY = Math.cos(angle);
    var cpLen = r * 0.6;
    var cpLen2 = r * 0.7;
    path.moveTo(x2 - dx, cy + dy);
    path.arc(x2, cy, r, Math.PI - angle, Math.PI * 2 + angle);
    path.bezierCurveTo(x2 + dx - tanX * cpLen, cy + dy + tanY * cpLen, x2, y2 - cpLen2, x2, y2);
    path.bezierCurveTo(x2, y2 - cpLen2, x2 - dx + tanX * cpLen, cy + dy + tanY * cpLen, x2 - dx, cy + dy);
    path.closePath();
  }
});
var Arrow = Path$1.extend({
  type: "arrow",
  shape: {
    x: 0,
    y: 0,
    width: 0,
    height: 0
  },
  buildPath: function(ctx, shape) {
    var height = shape.height;
    var width = shape.width;
    var x2 = shape.x;
    var y2 = shape.y;
    var dx = width / 3 * 2;
    ctx.moveTo(x2, y2);
    ctx.lineTo(x2 + dx, y2 + height);
    ctx.lineTo(x2, y2 + height / 4 * 3);
    ctx.lineTo(x2 - dx, y2 + height);
    ctx.lineTo(x2, y2);
    ctx.closePath();
  }
});
var symbolCtors = {
  line: Line$1,
  rect: Rect$1,
  roundRect: Rect$1,
  square: Rect$1,
  circle: Circle$1,
  diamond: Diamond,
  pin: Pin,
  arrow: Arrow,
  triangle: Triangle
};
var symbolShapeMakers = {
  line: function(x2, y2, w2, h2, shape) {
    shape.x1 = x2;
    shape.y1 = y2 + h2 / 2;
    shape.x2 = x2 + w2;
    shape.y2 = y2 + h2 / 2;
  },
  rect: function(x2, y2, w2, h2, shape) {
    shape.x = x2;
    shape.y = y2;
    shape.width = w2;
    shape.height = h2;
  },
  roundRect: function(x2, y2, w2, h2, shape) {
    shape.x = x2;
    shape.y = y2;
    shape.width = w2;
    shape.height = h2;
    shape.r = Math.min(w2, h2) / 4;
  },
  square: function(x2, y2, w2, h2, shape) {
    var size = Math.min(w2, h2);
    shape.x = x2;
    shape.y = y2;
    shape.width = size;
    shape.height = size;
  },
  circle: function(x2, y2, w2, h2, shape) {
    shape.cx = x2 + w2 / 2;
    shape.cy = y2 + h2 / 2;
    shape.r = Math.min(w2, h2) / 2;
  },
  diamond: function(x2, y2, w2, h2, shape) {
    shape.cx = x2 + w2 / 2;
    shape.cy = y2 + h2 / 2;
    shape.width = w2;
    shape.height = h2;
  },
  pin: function(x2, y2, w2, h2, shape) {
    shape.x = x2 + w2 / 2;
    shape.y = y2 + h2 / 2;
    shape.width = w2;
    shape.height = h2;
  },
  arrow: function(x2, y2, w2, h2, shape) {
    shape.x = x2 + w2 / 2;
    shape.y = y2 + h2 / 2;
    shape.width = w2;
    shape.height = h2;
  },
  triangle: function(x2, y2, w2, h2, shape) {
    shape.cx = x2 + w2 / 2;
    shape.cy = y2 + h2 / 2;
    shape.width = w2;
    shape.height = h2;
  }
};
var symbolBuildProxies = {};
each$4(symbolCtors, function(Ctor, name) {
  symbolBuildProxies[name] = new Ctor();
});
var SymbolClz = Path$1.extend({
  type: "symbol",
  shape: {
    symbolType: "",
    x: 0,
    y: 0,
    width: 0,
    height: 0
  },
  calculateTextPosition: function(out2, config, rect) {
    var res = calculateTextPosition(out2, config, rect);
    var shape = this.shape;
    if (shape && shape.symbolType === "pin" && config.position === "inside") {
      res.y = rect.y + rect.height * 0.4;
    }
    return res;
  },
  buildPath: function(ctx, shape, inBundle) {
    var symbolType = shape.symbolType;
    if (symbolType !== "none") {
      var proxySymbol = symbolBuildProxies[symbolType];
      if (!proxySymbol) {
        symbolType = "rect";
        proxySymbol = symbolBuildProxies[symbolType];
      }
      symbolShapeMakers[symbolType](shape.x, shape.y, shape.width, shape.height, proxySymbol.shape);
      proxySymbol.buildPath(ctx, proxySymbol.shape, inBundle);
    }
  }
});
function symbolPathSetColor(color, innerColor2) {
  if (this.type !== "image") {
    var symbolStyle = this.style;
    if (this.__isEmptyBrush) {
      symbolStyle.stroke = color;
      symbolStyle.fill = innerColor2 || "#fff";
      symbolStyle.lineWidth = 2;
    } else if (this.shape.symbolType === "line") {
      symbolStyle.stroke = color;
    } else {
      symbolStyle.fill = color;
    }
    this.markRedraw();
  }
}
function createSymbol(symbolType, x2, y2, w2, h2, color, keepAspect) {
  var isEmpty = symbolType.indexOf("empty") === 0;
  if (isEmpty) {
    symbolType = symbolType.substr(5, 1).toLowerCase() + symbolType.substr(6);
  }
  var symbolPath;
  if (symbolType.indexOf("image://") === 0) {
    symbolPath = makeImage(symbolType.slice(8), new BoundingRect$1(x2, y2, w2, h2), keepAspect ? "center" : "cover");
  } else if (symbolType.indexOf("path://") === 0) {
    symbolPath = makePath(symbolType.slice(7), {}, new BoundingRect$1(x2, y2, w2, h2), keepAspect ? "center" : "cover");
  } else {
    symbolPath = new SymbolClz({
      shape: {
        symbolType,
        x: x2,
        y: y2,
        width: w2,
        height: h2
      }
    });
  }
  symbolPath.__isEmptyBrush = isEmpty;
  symbolPath.setColor = symbolPathSetColor;
  if (color) {
    symbolPath.setColor(color);
  }
  return symbolPath;
}
function normalizeSymbolOffset(symbolOffset, symbolSize) {
  if (symbolOffset == null) {
    return;
  }
  if (!isArray(symbolOffset)) {
    symbolOffset = [symbolOffset, symbolOffset];
  }
  return [parsePercent(symbolOffset[0], symbolSize[0]) || 0, parsePercent(retrieve2(symbolOffset[1], symbolOffset[0]), symbolSize[1]) || 0];
}
function isSafeNum(num) {
  return isFinite(num);
}
function createLinearGradient(ctx, obj, rect) {
  var x2 = obj.x == null ? 0 : obj.x;
  var x22 = obj.x2 == null ? 1 : obj.x2;
  var y2 = obj.y == null ? 0 : obj.y;
  var y22 = obj.y2 == null ? 0 : obj.y2;
  if (!obj.global) {
    x2 = x2 * rect.width + rect.x;
    x22 = x22 * rect.width + rect.x;
    y2 = y2 * rect.height + rect.y;
    y22 = y22 * rect.height + rect.y;
  }
  x2 = isSafeNum(x2) ? x2 : 0;
  x22 = isSafeNum(x22) ? x22 : 1;
  y2 = isSafeNum(y2) ? y2 : 0;
  y22 = isSafeNum(y22) ? y22 : 0;
  var canvasGradient = ctx.createLinearGradient(x2, y2, x22, y22);
  return canvasGradient;
}
function createRadialGradient(ctx, obj, rect) {
  var width = rect.width;
  var height = rect.height;
  var min3 = Math.min(width, height);
  var x2 = obj.x == null ? 0.5 : obj.x;
  var y2 = obj.y == null ? 0.5 : obj.y;
  var r = obj.r == null ? 0.5 : obj.r;
  if (!obj.global) {
    x2 = x2 * width + rect.x;
    y2 = y2 * height + rect.y;
    r = r * min3;
  }
  x2 = isSafeNum(x2) ? x2 : 0.5;
  y2 = isSafeNum(y2) ? y2 : 0.5;
  r = r >= 0 && isSafeNum(r) ? r : 0.5;
  var canvasGradient = ctx.createRadialGradient(x2, y2, 0, x2, y2, r);
  return canvasGradient;
}
function getCanvasGradient(ctx, obj, rect) {
  var canvasGradient = obj.type === "radial" ? createRadialGradient(ctx, obj, rect) : createLinearGradient(ctx, obj, rect);
  var colorStops = obj.colorStops;
  for (var i = 0; i < colorStops.length; i++) {
    canvasGradient.addColorStop(colorStops[i].offset, colorStops[i].color);
  }
  return canvasGradient;
}
function isClipPathChanged(clipPaths, prevClipPaths) {
  if (clipPaths === prevClipPaths || !clipPaths && !prevClipPaths) {
    return false;
  }
  if (!clipPaths || !prevClipPaths || clipPaths.length !== prevClipPaths.length) {
    return true;
  }
  for (var i = 0; i < clipPaths.length; i++) {
    if (clipPaths[i] !== prevClipPaths[i]) {
      return true;
    }
  }
  return false;
}
function parseInt10(val) {
  return parseInt(val, 10);
}
function getSize(root, whIdx, opts) {
  var wh = ["width", "height"][whIdx];
  var cwh = ["clientWidth", "clientHeight"][whIdx];
  var plt = ["paddingLeft", "paddingTop"][whIdx];
  var prb = ["paddingRight", "paddingBottom"][whIdx];
  if (opts[wh] != null && opts[wh] !== "auto") {
    return parseFloat(opts[wh]);
  }
  var stl = document.defaultView.getComputedStyle(root);
  return (root[cwh] || parseInt10(stl[wh]) || parseInt10(root.style[wh])) - (parseInt10(stl[plt]) || 0) - (parseInt10(stl[prb]) || 0) | 0;
}
function normalizeLineDash(lineType, lineWidth) {
  if (!lineType || lineType === "solid" || !(lineWidth > 0)) {
    return null;
  }
  return lineType === "dashed" ? [4 * lineWidth, 2 * lineWidth] : lineType === "dotted" ? [lineWidth] : isNumber(lineType) ? [lineType] : isArray(lineType) ? lineType : null;
}
function getLineDash(el) {
  var style2 = el.style;
  var lineDash = style2.lineDash && style2.lineWidth > 0 && normalizeLineDash(style2.lineDash, style2.lineWidth);
  var lineDashOffset = style2.lineDashOffset;
  if (lineDash) {
    var lineScale_1 = style2.strokeNoScale && el.getLineScale ? el.getLineScale() : 1;
    if (lineScale_1 && lineScale_1 !== 1) {
      lineDash = map$1(lineDash, function(rawVal) {
        return rawVal / lineScale_1;
      });
      lineDashOffset /= lineScale_1;
    }
  }
  return [lineDash, lineDashOffset];
}
var pathProxyForDraw = new PathProxy$1(true);
function styleHasStroke(style2) {
  var stroke = style2.stroke;
  return !(stroke == null || stroke === "none" || !(style2.lineWidth > 0));
}
function isValidStrokeFillStyle(strokeOrFill) {
  return typeof strokeOrFill === "string" && strokeOrFill !== "none";
}
function styleHasFill(style2) {
  var fill = style2.fill;
  return fill != null && fill !== "none";
}
function doFillPath(ctx, style2) {
  if (style2.fillOpacity != null && style2.fillOpacity !== 1) {
    var originalGlobalAlpha = ctx.globalAlpha;
    ctx.globalAlpha = style2.fillOpacity * style2.opacity;
    ctx.fill();
    ctx.globalAlpha = originalGlobalAlpha;
  } else {
    ctx.fill();
  }
}
function doStrokePath(ctx, style2) {
  if (style2.strokeOpacity != null && style2.strokeOpacity !== 1) {
    var originalGlobalAlpha = ctx.globalAlpha;
    ctx.globalAlpha = style2.strokeOpacity * style2.opacity;
    ctx.stroke();
    ctx.globalAlpha = originalGlobalAlpha;
  } else {
    ctx.stroke();
  }
}
function createCanvasPattern(ctx, pattern, el) {
  var image = createOrUpdateImage(pattern.image, pattern.__image, el);
  if (isImageReady(image)) {
    var canvasPattern = ctx.createPattern(image, pattern.repeat || "repeat");
    if (typeof DOMMatrix === "function" && canvasPattern && canvasPattern.setTransform) {
      var matrix = new DOMMatrix();
      matrix.translateSelf(pattern.x || 0, pattern.y || 0);
      matrix.rotateSelf(0, 0, (pattern.rotation || 0) * RADIAN_TO_DEGREE);
      matrix.scaleSelf(pattern.scaleX || 1, pattern.scaleY || 1);
      canvasPattern.setTransform(matrix);
    }
    return canvasPattern;
  }
}
function brushPath(ctx, el, style2, inBatch) {
  var _a2;
  var hasStroke = styleHasStroke(style2);
  var hasFill = styleHasFill(style2);
  var strokePercent = style2.strokePercent;
  var strokePart = strokePercent < 1;
  var firstDraw = !el.path;
  if ((!el.silent || strokePart) && firstDraw) {
    el.createPathProxy();
  }
  var path = el.path || pathProxyForDraw;
  var dirtyFlag = el.__dirty;
  if (!inBatch) {
    var fill = style2.fill;
    var stroke = style2.stroke;
    var hasFillGradient = hasFill && !!fill.colorStops;
    var hasStrokeGradient = hasStroke && !!stroke.colorStops;
    var hasFillPattern = hasFill && !!fill.image;
    var hasStrokePattern = hasStroke && !!stroke.image;
    var fillGradient = void 0;
    var strokeGradient = void 0;
    var fillPattern = void 0;
    var strokePattern = void 0;
    var rect = void 0;
    if (hasFillGradient || hasStrokeGradient) {
      rect = el.getBoundingRect();
    }
    if (hasFillGradient) {
      fillGradient = dirtyFlag ? getCanvasGradient(ctx, fill, rect) : el.__canvasFillGradient;
      el.__canvasFillGradient = fillGradient;
    }
    if (hasStrokeGradient) {
      strokeGradient = dirtyFlag ? getCanvasGradient(ctx, stroke, rect) : el.__canvasStrokeGradient;
      el.__canvasStrokeGradient = strokeGradient;
    }
    if (hasFillPattern) {
      fillPattern = dirtyFlag || !el.__canvasFillPattern ? createCanvasPattern(ctx, fill, el) : el.__canvasFillPattern;
      el.__canvasFillPattern = fillPattern;
    }
    if (hasStrokePattern) {
      strokePattern = dirtyFlag || !el.__canvasStrokePattern ? createCanvasPattern(ctx, stroke, el) : el.__canvasStrokePattern;
      el.__canvasStrokePattern = fillPattern;
    }
    if (hasFillGradient) {
      ctx.fillStyle = fillGradient;
    } else if (hasFillPattern) {
      if (fillPattern) {
        ctx.fillStyle = fillPattern;
      } else {
        hasFill = false;
      }
    }
    if (hasStrokeGradient) {
      ctx.strokeStyle = strokeGradient;
    } else if (hasStrokePattern) {
      if (strokePattern) {
        ctx.strokeStyle = strokePattern;
      } else {
        hasStroke = false;
      }
    }
  }
  var scale2 = el.getGlobalScale();
  path.setScale(scale2[0], scale2[1], el.segmentIgnoreThreshold);
  var lineDash;
  var lineDashOffset;
  if (ctx.setLineDash && style2.lineDash) {
    _a2 = getLineDash(el), lineDash = _a2[0], lineDashOffset = _a2[1];
  }
  var needsRebuild = true;
  if (firstDraw || dirtyFlag & SHAPE_CHANGED_BIT) {
    path.setDPR(ctx.dpr);
    if (strokePart) {
      path.setContext(null);
    } else {
      path.setContext(ctx);
      needsRebuild = false;
    }
    path.reset();
    el.buildPath(path, el.shape, inBatch);
    path.toStatic();
    el.pathUpdated();
  }
  if (needsRebuild) {
    path.rebuildPath(ctx, strokePart ? strokePercent : 1);
  }
  if (lineDash) {
    ctx.setLineDash(lineDash);
    ctx.lineDashOffset = lineDashOffset;
  }
  if (!inBatch) {
    if (style2.strokeFirst) {
      if (hasStroke) {
        doStrokePath(ctx, style2);
      }
      if (hasFill) {
        doFillPath(ctx, style2);
      }
    } else {
      if (hasFill) {
        doFillPath(ctx, style2);
      }
      if (hasStroke) {
        doStrokePath(ctx, style2);
      }
    }
  }
  if (lineDash) {
    ctx.setLineDash([]);
  }
}
function brushImage(ctx, el, style2) {
  var image = el.__image = createOrUpdateImage(style2.image, el.__image, el, el.onload);
  if (!image || !isImageReady(image)) {
    return;
  }
  var x2 = style2.x || 0;
  var y2 = style2.y || 0;
  var width = el.getWidth();
  var height = el.getHeight();
  var aspect = image.width / image.height;
  if (width == null && height != null) {
    width = height * aspect;
  } else if (height == null && width != null) {
    height = width / aspect;
  } else if (width == null && height == null) {
    width = image.width;
    height = image.height;
  }
  if (style2.sWidth && style2.sHeight) {
    var sx = style2.sx || 0;
    var sy = style2.sy || 0;
    ctx.drawImage(image, sx, sy, style2.sWidth, style2.sHeight, x2, y2, width, height);
  } else if (style2.sx && style2.sy) {
    var sx = style2.sx;
    var sy = style2.sy;
    var sWidth = width - sx;
    var sHeight = height - sy;
    ctx.drawImage(image, sx, sy, sWidth, sHeight, x2, y2, width, height);
  } else {
    ctx.drawImage(image, x2, y2, width, height);
  }
}
function brushText(ctx, el, style2) {
  var _a2;
  var text = style2.text;
  text != null && (text += "");
  if (text) {
    ctx.font = style2.font || DEFAULT_FONT;
    ctx.textAlign = style2.textAlign;
    ctx.textBaseline = style2.textBaseline;
    var lineDash = void 0;
    var lineDashOffset = void 0;
    if (ctx.setLineDash && style2.lineDash) {
      _a2 = getLineDash(el), lineDash = _a2[0], lineDashOffset = _a2[1];
    }
    if (lineDash) {
      ctx.setLineDash(lineDash);
      ctx.lineDashOffset = lineDashOffset;
    }
    if (style2.strokeFirst) {
      if (styleHasStroke(style2)) {
        ctx.strokeText(text, style2.x, style2.y);
      }
      if (styleHasFill(style2)) {
        ctx.fillText(text, style2.x, style2.y);
      }
    } else {
      if (styleHasFill(style2)) {
        ctx.fillText(text, style2.x, style2.y);
      }
      if (styleHasStroke(style2)) {
        ctx.strokeText(text, style2.x, style2.y);
      }
    }
    if (lineDash) {
      ctx.setLineDash([]);
    }
  }
}
var SHADOW_NUMBER_PROPS = ["shadowBlur", "shadowOffsetX", "shadowOffsetY"];
var STROKE_PROPS = [
  ["lineCap", "butt"],
  ["lineJoin", "miter"],
  ["miterLimit", 10]
];
function bindCommonProps(ctx, style2, prevStyle, forceSetAll, scope) {
  var styleChanged = false;
  if (!forceSetAll) {
    prevStyle = prevStyle || {};
    if (style2 === prevStyle) {
      return false;
    }
  }
  if (forceSetAll || style2.opacity !== prevStyle.opacity) {
    flushPathDrawn(ctx, scope);
    styleChanged = true;
    var opacity = Math.max(Math.min(style2.opacity, 1), 0);
    ctx.globalAlpha = isNaN(opacity) ? DEFAULT_COMMON_STYLE.opacity : opacity;
  }
  if (forceSetAll || style2.blend !== prevStyle.blend) {
    if (!styleChanged) {
      flushPathDrawn(ctx, scope);
      styleChanged = true;
    }
    ctx.globalCompositeOperation = style2.blend || DEFAULT_COMMON_STYLE.blend;
  }
  for (var i = 0; i < SHADOW_NUMBER_PROPS.length; i++) {
    var propName = SHADOW_NUMBER_PROPS[i];
    if (forceSetAll || style2[propName] !== prevStyle[propName]) {
      if (!styleChanged) {
        flushPathDrawn(ctx, scope);
        styleChanged = true;
      }
      ctx[propName] = ctx.dpr * (style2[propName] || 0);
    }
  }
  if (forceSetAll || style2.shadowColor !== prevStyle.shadowColor) {
    if (!styleChanged) {
      flushPathDrawn(ctx, scope);
      styleChanged = true;
    }
    ctx.shadowColor = style2.shadowColor || DEFAULT_COMMON_STYLE.shadowColor;
  }
  return styleChanged;
}
function bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetAll, scope) {
  var style2 = getStyle(el, scope.inHover);
  var prevStyle = forceSetAll ? null : prevEl && getStyle(prevEl, scope.inHover) || {};
  if (style2 === prevStyle) {
    return false;
  }
  var styleChanged = bindCommonProps(ctx, style2, prevStyle, forceSetAll, scope);
  if (forceSetAll || style2.fill !== prevStyle.fill) {
    if (!styleChanged) {
      flushPathDrawn(ctx, scope);
      styleChanged = true;
    }
    isValidStrokeFillStyle(style2.fill) && (ctx.fillStyle = style2.fill);
  }
  if (forceSetAll || style2.stroke !== prevStyle.stroke) {
    if (!styleChanged) {
      flushPathDrawn(ctx, scope);
      styleChanged = true;
    }
    isValidStrokeFillStyle(style2.stroke) && (ctx.strokeStyle = style2.stroke);
  }
  if (forceSetAll || style2.opacity !== prevStyle.opacity) {
    if (!styleChanged) {
      flushPathDrawn(ctx, scope);
      styleChanged = true;
    }
    ctx.globalAlpha = style2.opacity == null ? 1 : style2.opacity;
  }
  if (el.hasStroke()) {
    var lineWidth = style2.lineWidth;
    var newLineWidth = lineWidth / (style2.strokeNoScale && el.getLineScale ? el.getLineScale() : 1);
    if (ctx.lineWidth !== newLineWidth) {
      if (!styleChanged) {
        flushPathDrawn(ctx, scope);
        styleChanged = true;
      }
      ctx.lineWidth = newLineWidth;
    }
  }
  for (var i = 0; i < STROKE_PROPS.length; i++) {
    var prop = STROKE_PROPS[i];
    var propName = prop[0];
    if (forceSetAll || style2[propName] !== prevStyle[propName]) {
      if (!styleChanged) {
        flushPathDrawn(ctx, scope);
        styleChanged = true;
      }
      ctx[propName] = style2[propName] || prop[1];
    }
  }
  return styleChanged;
}
function bindImageStyle(ctx, el, prevEl, forceSetAll, scope) {
  return bindCommonProps(ctx, getStyle(el, scope.inHover), prevEl && getStyle(prevEl, scope.inHover), forceSetAll, scope);
}
function setContextTransform(ctx, el) {
  var m2 = el.transform;
  var dpr2 = ctx.dpr || 1;
  if (m2) {
    ctx.setTransform(dpr2 * m2[0], dpr2 * m2[1], dpr2 * m2[2], dpr2 * m2[3], dpr2 * m2[4], dpr2 * m2[5]);
  } else {
    ctx.setTransform(dpr2, 0, 0, dpr2, 0, 0);
  }
}
function updateClipStatus(clipPaths, ctx, scope) {
  var allClipped = false;
  for (var i = 0; i < clipPaths.length; i++) {
    var clipPath = clipPaths[i];
    allClipped = allClipped || clipPath.isZeroArea();
    setContextTransform(ctx, clipPath);
    ctx.beginPath();
    clipPath.buildPath(ctx, clipPath.shape);
    ctx.clip();
  }
  scope.allClipped = allClipped;
}
function isTransformChanged(m0, m1) {
  if (m0 && m1) {
    return m0[0] !== m1[0] || m0[1] !== m1[1] || m0[2] !== m1[2] || m0[3] !== m1[3] || m0[4] !== m1[4] || m0[5] !== m1[5];
  } else if (!m0 && !m1) {
    return false;
  }
  return true;
}
var DRAW_TYPE_PATH = 1;
var DRAW_TYPE_IMAGE = 2;
var DRAW_TYPE_TEXT = 3;
var DRAW_TYPE_INCREMENTAL = 4;
function canPathBatch(style2) {
  var hasFill = styleHasFill(style2);
  var hasStroke = styleHasStroke(style2);
  return !(style2.lineDash || !(+hasFill ^ +hasStroke) || hasFill && typeof style2.fill !== "string" || hasStroke && typeof style2.stroke !== "string" || style2.strokePercent < 1 || style2.strokeOpacity < 1 || style2.fillOpacity < 1);
}
function flushPathDrawn(ctx, scope) {
  scope.batchFill && ctx.fill();
  scope.batchStroke && ctx.stroke();
  scope.batchFill = "";
  scope.batchStroke = "";
}
function getStyle(el, inHover) {
  return inHover ? el.__hoverStyle || el.style : el.style;
}
function brushSingle(ctx, el) {
  brush(ctx, el, { inHover: false, viewWidth: 0, viewHeight: 0 }, true);
}
function brush(ctx, el, scope, isLast) {
  var m2 = el.transform;
  if (!el.shouldBePainted(scope.viewWidth, scope.viewHeight, false, false)) {
    el.__dirty &= ~REDRAW_BIT;
    el.__isRendered = false;
    return;
  }
  var clipPaths = el.__clipPaths;
  var prevElClipPaths = scope.prevElClipPaths;
  var forceSetTransform = false;
  var forceSetStyle = false;
  if (!prevElClipPaths || isClipPathChanged(clipPaths, prevElClipPaths)) {
    if (prevElClipPaths && prevElClipPaths.length) {
      flushPathDrawn(ctx, scope);
      ctx.restore();
      forceSetStyle = forceSetTransform = true;
      scope.prevElClipPaths = null;
      scope.allClipped = false;
      scope.prevEl = null;
    }
    if (clipPaths && clipPaths.length) {
      flushPathDrawn(ctx, scope);
      ctx.save();
      updateClipStatus(clipPaths, ctx, scope);
      forceSetTransform = true;
    }
    scope.prevElClipPaths = clipPaths;
  }
  if (scope.allClipped) {
    el.__isRendered = false;
    return;
  }
  el.beforeBrush && el.beforeBrush();
  el.innerBeforeBrush();
  var prevEl = scope.prevEl;
  if (!prevEl) {
    forceSetStyle = forceSetTransform = true;
  }
  var canBatchPath = el instanceof Path$1 && el.autoBatch && canPathBatch(el.style);
  if (forceSetTransform || isTransformChanged(m2, prevEl.transform)) {
    flushPathDrawn(ctx, scope);
    setContextTransform(ctx, el);
  } else if (!canBatchPath) {
    flushPathDrawn(ctx, scope);
  }
  var style2 = getStyle(el, scope.inHover);
  if (el instanceof Path$1) {
    if (scope.lastDrawType !== DRAW_TYPE_PATH) {
      forceSetStyle = true;
      scope.lastDrawType = DRAW_TYPE_PATH;
    }
    bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);
    if (!canBatchPath || !scope.batchFill && !scope.batchStroke) {
      ctx.beginPath();
    }
    brushPath(ctx, el, style2, canBatchPath);
    if (canBatchPath) {
      scope.batchFill = style2.fill || "";
      scope.batchStroke = style2.stroke || "";
    }
  } else {
    if (el instanceof TSpan$1) {
      if (scope.lastDrawType !== DRAW_TYPE_TEXT) {
        forceSetStyle = true;
        scope.lastDrawType = DRAW_TYPE_TEXT;
      }
      bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);
      brushText(ctx, el, style2);
    } else if (el instanceof ZRImage$1) {
      if (scope.lastDrawType !== DRAW_TYPE_IMAGE) {
        forceSetStyle = true;
        scope.lastDrawType = DRAW_TYPE_IMAGE;
      }
      bindImageStyle(ctx, el, prevEl, forceSetStyle, scope);
      brushImage(ctx, el, style2);
    } else if (el.getTemporalDisplayables) {
      if (scope.lastDrawType !== DRAW_TYPE_INCREMENTAL) {
        forceSetStyle = true;
        scope.lastDrawType = DRAW_TYPE_INCREMENTAL;
      }
      brushIncremental(ctx, el, scope);
    }
  }
  if (canBatchPath && isLast) {
    flushPathDrawn(ctx, scope);
  }
  el.innerAfterBrush();
  el.afterBrush && el.afterBrush();
  scope.prevEl = el;
  el.__dirty = 0;
  el.__isRendered = true;
}
function brushIncremental(ctx, el, scope) {
  var displayables = el.getDisplayables();
  var temporalDisplayables = el.getTemporalDisplayables();
  ctx.save();
  var innerScope = {
    prevElClipPaths: null,
    prevEl: null,
    allClipped: false,
    viewWidth: scope.viewWidth,
    viewHeight: scope.viewHeight,
    inHover: scope.inHover
  };
  var i;
  var len2;
  for (i = el.getCursor(), len2 = displayables.length; i < len2; i++) {
    var displayable = displayables[i];
    displayable.beforeBrush && displayable.beforeBrush();
    displayable.innerBeforeBrush();
    brush(ctx, displayable, innerScope, i === len2 - 1);
    displayable.innerAfterBrush();
    displayable.afterBrush && displayable.afterBrush();
    innerScope.prevEl = displayable;
  }
  for (var i_1 = 0, len_1 = temporalDisplayables.length; i_1 < len_1; i_1++) {
    var displayable = temporalDisplayables[i_1];
    displayable.beforeBrush && displayable.beforeBrush();
    displayable.innerBeforeBrush();
    brush(ctx, displayable, innerScope, i_1 === len_1 - 1);
    displayable.innerAfterBrush();
    displayable.afterBrush && displayable.afterBrush();
    innerScope.prevEl = displayable;
  }
  el.clearTemporalDisplayables();
  el.notClear = true;
  ctx.restore();
}
var decalMap = new WeakMap$1();
var decalCache = new LRU$1(100);
var decalKeys = ["symbol", "symbolSize", "symbolKeepAspect", "color", "backgroundColor", "dashArrayX", "dashArrayY", "maxTileWidth", "maxTileHeight"];
function createOrUpdatePatternFromDecal(decalObject, api) {
  if (decalObject === "none") {
    return null;
  }
  var dpr2 = api.getDevicePixelRatio();
  var zr = api.getZr();
  var isSVG = zr.painter.type === "svg";
  if (decalObject.dirty) {
    decalMap["delete"](decalObject);
  }
  var oldPattern = decalMap.get(decalObject);
  if (oldPattern) {
    return oldPattern;
  }
  var decalOpt = defaults(decalObject, {
    symbol: "rect",
    symbolSize: 1,
    symbolKeepAspect: true,
    color: "rgba(0, 0, 0, 0.2)",
    backgroundColor: null,
    dashArrayX: 5,
    dashArrayY: 5,
    rotation: 0,
    maxTileWidth: 512,
    maxTileHeight: 512
  });
  if (decalOpt.backgroundColor === "none") {
    decalOpt.backgroundColor = null;
  }
  var pattern = {
    repeat: "repeat"
  };
  setPatternnSource(pattern);
  pattern.rotation = decalOpt.rotation;
  pattern.scaleX = pattern.scaleY = isSVG ? 1 : 1 / dpr2;
  decalMap.set(decalObject, pattern);
  decalObject.dirty = false;
  return pattern;
  function setPatternnSource(pattern2) {
    var keys2 = [dpr2];
    var isValidKey = true;
    for (var i = 0; i < decalKeys.length; ++i) {
      var value = decalOpt[decalKeys[i]];
      if (value != null && !isArray(value) && !isString(value) && !isNumber(value) && typeof value !== "boolean") {
        isValidKey = false;
        break;
      }
      keys2.push(value);
    }
    var cacheKey;
    if (isValidKey) {
      cacheKey = keys2.join(",") + (isSVG ? "-svg" : "");
      var cache = decalCache.get(cacheKey);
      if (cache) {
        isSVG ? pattern2.svgElement = cache : pattern2.image = cache;
      }
    }
    var dashArrayX = normalizeDashArrayX(decalOpt.dashArrayX);
    var dashArrayY = normalizeDashArrayY(decalOpt.dashArrayY);
    var symbolArray = normalizeSymbolArray(decalOpt.symbol);
    var lineBlockLengthsX = getLineBlockLengthX(dashArrayX);
    var lineBlockLengthY = getLineBlockLengthY(dashArrayY);
    var canvas = !isSVG && platformApi.createCanvas();
    var svgRoot = isSVG && {
      tag: "g",
      attrs: {},
      key: "dcl",
      children: []
    };
    var pSize = getPatternSize();
    var ctx;
    if (canvas) {
      canvas.width = pSize.width * dpr2;
      canvas.height = pSize.height * dpr2;
      ctx = canvas.getContext("2d");
    }
    brushDecal();
    if (isValidKey) {
      decalCache.put(cacheKey, canvas || svgRoot);
    }
    pattern2.image = canvas;
    pattern2.svgElement = svgRoot;
    pattern2.svgWidth = pSize.width;
    pattern2.svgHeight = pSize.height;
    function getPatternSize() {
      var width = 1;
      for (var i2 = 0, xlen = lineBlockLengthsX.length; i2 < xlen; ++i2) {
        width = getLeastCommonMultiple(width, lineBlockLengthsX[i2]);
      }
      var symbolRepeats = 1;
      for (var i2 = 0, xlen = symbolArray.length; i2 < xlen; ++i2) {
        symbolRepeats = getLeastCommonMultiple(symbolRepeats, symbolArray[i2].length);
      }
      width *= symbolRepeats;
      var height = lineBlockLengthY * lineBlockLengthsX.length * symbolArray.length;
      return {
        width: Math.max(1, Math.min(width, decalOpt.maxTileWidth)),
        height: Math.max(1, Math.min(height, decalOpt.maxTileHeight))
      };
    }
    function brushDecal() {
      if (ctx) {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        if (decalOpt.backgroundColor) {
          ctx.fillStyle = decalOpt.backgroundColor;
          ctx.fillRect(0, 0, canvas.width, canvas.height);
        }
      }
      var ySum = 0;
      for (var i2 = 0; i2 < dashArrayY.length; ++i2) {
        ySum += dashArrayY[i2];
      }
      if (ySum <= 0) {
        return;
      }
      var y2 = -lineBlockLengthY;
      var yId = 0;
      var yIdTotal = 0;
      var xId0 = 0;
      while (y2 < pSize.height) {
        if (yId % 2 === 0) {
          var symbolYId = yIdTotal / 2 % symbolArray.length;
          var x2 = 0;
          var xId1 = 0;
          var xId1Total = 0;
          while (x2 < pSize.width * 2) {
            var xSum = 0;
            for (var i2 = 0; i2 < dashArrayX[xId0].length; ++i2) {
              xSum += dashArrayX[xId0][i2];
            }
            if (xSum <= 0) {
              break;
            }
            if (xId1 % 2 === 0) {
              var size = (1 - decalOpt.symbolSize) * 0.5;
              var left = x2 + dashArrayX[xId0][xId1] * size;
              var top_1 = y2 + dashArrayY[yId] * size;
              var width = dashArrayX[xId0][xId1] * decalOpt.symbolSize;
              var height = dashArrayY[yId] * decalOpt.symbolSize;
              var symbolXId = xId1Total / 2 % symbolArray[symbolYId].length;
              brushSymbol(left, top_1, width, height, symbolArray[symbolYId][symbolXId]);
            }
            x2 += dashArrayX[xId0][xId1];
            ++xId1Total;
            ++xId1;
            if (xId1 === dashArrayX[xId0].length) {
              xId1 = 0;
            }
          }
          ++xId0;
          if (xId0 === dashArrayX.length) {
            xId0 = 0;
          }
        }
        y2 += dashArrayY[yId];
        ++yIdTotal;
        ++yId;
        if (yId === dashArrayY.length) {
          yId = 0;
        }
      }
      function brushSymbol(x3, y3, width2, height2, symbolType) {
        var scale2 = isSVG ? 1 : dpr2;
        var symbol = createSymbol(symbolType, x3 * scale2, y3 * scale2, width2 * scale2, height2 * scale2, decalOpt.color, decalOpt.symbolKeepAspect);
        if (isSVG) {
          var symbolVNode = zr.painter.renderOneToVNode(symbol);
          if (symbolVNode) {
            svgRoot.children.push(symbolVNode);
          }
        } else {
          brushSingle(ctx, symbol);
        }
      }
    }
  }
}
function normalizeSymbolArray(symbol) {
  if (!symbol || symbol.length === 0) {
    return [["rect"]];
  }
  if (isString(symbol)) {
    return [[symbol]];
  }
  var isAllString = true;
  for (var i = 0; i < symbol.length; ++i) {
    if (!isString(symbol[i])) {
      isAllString = false;
      break;
    }
  }
  if (isAllString) {
    return normalizeSymbolArray([symbol]);
  }
  var result = [];
  for (var i = 0; i < symbol.length; ++i) {
    if (isString(symbol[i])) {
      result.push([symbol[i]]);
    } else {
      result.push(symbol[i]);
    }
  }
  return result;
}
function normalizeDashArrayX(dash) {
  if (!dash || dash.length === 0) {
    return [[0, 0]];
  }
  if (isNumber(dash)) {
    var dashValue = Math.ceil(dash);
    return [[dashValue, dashValue]];
  }
  var isAllNumber = true;
  for (var i = 0; i < dash.length; ++i) {
    if (!isNumber(dash[i])) {
      isAllNumber = false;
      break;
    }
  }
  if (isAllNumber) {
    return normalizeDashArrayX([dash]);
  }
  var result = [];
  for (var i = 0; i < dash.length; ++i) {
    if (isNumber(dash[i])) {
      var dashValue = Math.ceil(dash[i]);
      result.push([dashValue, dashValue]);
    } else {
      var dashValue = map$1(dash[i], function(n) {
        return Math.ceil(n);
      });
      if (dashValue.length % 2 === 1) {
        result.push(dashValue.concat(dashValue));
      } else {
        result.push(dashValue);
      }
    }
  }
  return result;
}
function normalizeDashArrayY(dash) {
  if (!dash || typeof dash === "object" && dash.length === 0) {
    return [0, 0];
  }
  if (isNumber(dash)) {
    var dashValue_1 = Math.ceil(dash);
    return [dashValue_1, dashValue_1];
  }
  var dashValue = map$1(dash, function(n) {
    return Math.ceil(n);
  });
  return dash.length % 2 ? dashValue.concat(dashValue) : dashValue;
}
function getLineBlockLengthX(dash) {
  return map$1(dash, function(line) {
    return getLineBlockLengthY(line);
  });
}
function getLineBlockLengthY(dash) {
  var blockLength = 0;
  for (var i = 0; i < dash.length; ++i) {
    blockLength += dash[i];
  }
  if (dash.length % 2 === 1) {
    return blockLength * 2;
  }
  return blockLength;
}
function decalVisual(ecModel, api) {
  ecModel.eachRawSeries(function(seriesModel) {
    if (ecModel.isSeriesFiltered(seriesModel)) {
      return;
    }
    var data = seriesModel.getData();
    if (data.hasItemVisual()) {
      data.each(function(idx) {
        var decal2 = data.getItemVisual(idx, "decal");
        if (decal2) {
          var itemStyle = data.ensureUniqueItemVisual(idx, "style");
          itemStyle.decal = createOrUpdatePatternFromDecal(decal2, api);
        }
      });
    }
    var decal = data.getVisual("decal");
    if (decal) {
      var style2 = data.getVisual("style");
      style2.decal = createOrUpdatePatternFromDecal(decal, api);
    }
  });
}
var lifecycle = new Eventful$1();
var lifecycle$1 = lifecycle;
var implsStore = {};
function registerImpl(name, impl) {
  implsStore[name] = impl;
}
function getImpl(name) {
  return implsStore[name];
}
var TEST_FRAME_REMAIN_TIME = 1;
var PRIORITY_PROCESSOR_SERIES_FILTER = 800;
var PRIORITY_PROCESSOR_DATASTACK = 900;
var PRIORITY_PROCESSOR_FILTER = 1e3;
var PRIORITY_PROCESSOR_DEFAULT = 2e3;
var PRIORITY_PROCESSOR_STATISTIC = 5e3;
var PRIORITY_VISUAL_LAYOUT = 1e3;
var PRIORITY_VISUAL_PROGRESSIVE_LAYOUT = 1100;
var PRIORITY_VISUAL_GLOBAL = 2e3;
var PRIORITY_VISUAL_CHART = 3e3;
var PRIORITY_VISUAL_COMPONENT = 4e3;
var PRIORITY_VISUAL_CHART_DATA_CUSTOM = 4500;
var PRIORITY_VISUAL_POST_CHART_LAYOUT = 4600;
var PRIORITY_VISUAL_BRUSH = 5e3;
var PRIORITY_VISUAL_ARIA = 6e3;
var PRIORITY_VISUAL_DECAL = 7e3;
var PRIORITY = {
  PROCESSOR: {
    FILTER: PRIORITY_PROCESSOR_FILTER,
    SERIES_FILTER: PRIORITY_PROCESSOR_SERIES_FILTER,
    STATISTIC: PRIORITY_PROCESSOR_STATISTIC
  },
  VISUAL: {
    LAYOUT: PRIORITY_VISUAL_LAYOUT,
    PROGRESSIVE_LAYOUT: PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,
    GLOBAL: PRIORITY_VISUAL_GLOBAL,
    CHART: PRIORITY_VISUAL_CHART,
    POST_CHART_LAYOUT: PRIORITY_VISUAL_POST_CHART_LAYOUT,
    COMPONENT: PRIORITY_VISUAL_COMPONENT,
    BRUSH: PRIORITY_VISUAL_BRUSH,
    CHART_ITEM: PRIORITY_VISUAL_CHART_DATA_CUSTOM,
    ARIA: PRIORITY_VISUAL_ARIA,
    DECAL: PRIORITY_VISUAL_DECAL
  }
};
var IN_MAIN_PROCESS_KEY = "__flagInMainProcess";
var PENDING_UPDATE = "__pendingUpdate";
var STATUS_NEEDS_UPDATE_KEY = "__needsUpdateStatus";
var ACTION_REG = /^[a-zA-Z0-9_]+$/;
var CONNECT_STATUS_KEY = "__connectUpdateStatus";
var CONNECT_STATUS_PENDING = 0;
var CONNECT_STATUS_UPDATING = 1;
var CONNECT_STATUS_UPDATED = 2;
function createRegisterEventWithLowercaseECharts(method) {
  return function() {
    var args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      args[_i] = arguments[_i];
    }
    if (this.isDisposed()) {
      disposedWarning(this.id);
      return;
    }
    return toLowercaseNameAndCallEventful(this, method, args);
  };
}
function createRegisterEventWithLowercaseMessageCenter(method) {
  return function() {
    var args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      args[_i] = arguments[_i];
    }
    return toLowercaseNameAndCallEventful(this, method, args);
  };
}
function toLowercaseNameAndCallEventful(host, method, args) {
  args[0] = args[0] && args[0].toLowerCase();
  return Eventful$1.prototype[method].apply(host, args);
}
var MessageCenter = function(_super) {
  __extends(MessageCenter2, _super);
  function MessageCenter2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  return MessageCenter2;
}(Eventful$1);
var messageCenterProto = MessageCenter.prototype;
messageCenterProto.on = createRegisterEventWithLowercaseMessageCenter("on");
messageCenterProto.off = createRegisterEventWithLowercaseMessageCenter("off");
var prepare;
var prepareView;
var updateDirectly;
var updateMethods;
var doConvertPixel;
var updateStreamModes;
var doDispatchAction;
var flushPendingActions;
var triggerUpdatedEvent;
var bindRenderedEvent;
var bindMouseEvent;
var render;
var renderComponents;
var renderSeries;
var createExtensionAPI;
var enableConnect;
var markStatusToUpdate;
var applyChangedStates;
var ECharts = function(_super) {
  __extends(ECharts2, _super);
  function ECharts2(dom, theme2, opts) {
    var _this = _super.call(this, new ECEventProcessor()) || this;
    _this._chartsViews = [];
    _this._chartsMap = {};
    _this._componentsViews = [];
    _this._componentsMap = {};
    _this._pendingActions = [];
    opts = opts || {};
    if (isString(theme2)) {
      theme2 = themeStorage[theme2];
    }
    _this._dom = dom;
    var defaultRenderer = "canvas";
    var defaultCoarsePointer = "auto";
    var defaultUseDirtyRect = false;
    var zr = _this._zr = init$1(dom, {
      renderer: opts.renderer || defaultRenderer,
      devicePixelRatio: opts.devicePixelRatio,
      width: opts.width,
      height: opts.height,
      ssr: opts.ssr,
      useDirtyRect: retrieve2(opts.useDirtyRect, defaultUseDirtyRect),
      useCoarsePointer: retrieve2(opts.useCoarsePointer, defaultCoarsePointer),
      pointerSize: opts.pointerSize
    });
    _this._ssr = opts.ssr;
    _this._throttledZrFlush = throttle(bind$1(zr.flush, zr), 17);
    theme2 = clone$2(theme2);
    theme2 && globalBackwardCompat(theme2, true);
    _this._theme = theme2;
    _this._locale = createLocaleObject(opts.locale || SYSTEM_LANG);
    _this._coordSysMgr = new CoordinateSystem();
    var api = _this._api = createExtensionAPI(_this);
    function prioritySortFunc(a, b2) {
      return a.__prio - b2.__prio;
    }
    sort(visualFuncs, prioritySortFunc);
    sort(dataProcessorFuncs, prioritySortFunc);
    _this._scheduler = new Scheduler$1(_this, api, dataProcessorFuncs, visualFuncs);
    _this._messageCenter = new MessageCenter();
    _this._initEvents();
    _this.resize = bind$1(_this.resize, _this);
    zr.animation.on("frame", _this._onframe, _this);
    bindRenderedEvent(zr, _this);
    bindMouseEvent(zr, _this);
    setAsPrimitive(_this);
    return _this;
  }
  ECharts2.prototype._onframe = function() {
    if (this._disposed) {
      return;
    }
    applyChangedStates(this);
    var scheduler = this._scheduler;
    if (this[PENDING_UPDATE]) {
      var silent = this[PENDING_UPDATE].silent;
      this[IN_MAIN_PROCESS_KEY] = true;
      try {
        prepare(this);
        updateMethods.update.call(this, null, this[PENDING_UPDATE].updateParams);
      } catch (e2) {
        this[IN_MAIN_PROCESS_KEY] = false;
        this[PENDING_UPDATE] = null;
        throw e2;
      }
      this._zr.flush();
      this[IN_MAIN_PROCESS_KEY] = false;
      this[PENDING_UPDATE] = null;
      flushPendingActions.call(this, silent);
      triggerUpdatedEvent.call(this, silent);
    } else if (scheduler.unfinished) {
      var remainTime = TEST_FRAME_REMAIN_TIME;
      var ecModel = this._model;
      var api = this._api;
      scheduler.unfinished = false;
      do {
        var startTime = +new Date();
        scheduler.performSeriesTasks(ecModel);
        scheduler.performDataProcessorTasks(ecModel);
        updateStreamModes(this, ecModel);
        scheduler.performVisualTasks(ecModel);
        renderSeries(this, this._model, api, "remain", {});
        remainTime -= +new Date() - startTime;
      } while (remainTime > 0 && scheduler.unfinished);
      if (!scheduler.unfinished) {
        this._zr.flush();
      }
    }
  };
  ECharts2.prototype.getDom = function() {
    return this._dom;
  };
  ECharts2.prototype.getId = function() {
    return this.id;
  };
  ECharts2.prototype.getZr = function() {
    return this._zr;
  };
  ECharts2.prototype.isSSR = function() {
    return this._ssr;
  };
  ECharts2.prototype.setOption = function(option, notMerge, lazyUpdate) {
    if (this[IN_MAIN_PROCESS_KEY]) {
      return;
    }
    if (this._disposed) {
      disposedWarning(this.id);
      return;
    }
    var silent;
    var replaceMerge;
    var transitionOpt;
    if (isObject$2(notMerge)) {
      lazyUpdate = notMerge.lazyUpdate;
      silent = notMerge.silent;
      replaceMerge = notMerge.replaceMerge;
      transitionOpt = notMerge.transition;
      notMerge = notMerge.notMerge;
    }
    this[IN_MAIN_PROCESS_KEY] = true;
    if (!this._model || notMerge) {
      var optionManager = new OptionManager$1(this._api);
      var theme2 = this._theme;
      var ecModel = this._model = new GlobalModel$1();
      ecModel.scheduler = this._scheduler;
      ecModel.ssr = this._ssr;
      ecModel.init(null, null, null, theme2, this._locale, optionManager);
    }
    this._model.setOption(option, {
      replaceMerge
    }, optionPreprocessorFuncs);
    var updateParams = {
      seriesTransition: transitionOpt,
      optionChanged: true
    };
    if (lazyUpdate) {
      this[PENDING_UPDATE] = {
        silent,
        updateParams
      };
      this[IN_MAIN_PROCESS_KEY] = false;
      this.getZr().wakeUp();
    } else {
      try {
        prepare(this);
        updateMethods.update.call(this, null, updateParams);
      } catch (e2) {
        this[PENDING_UPDATE] = null;
        this[IN_MAIN_PROCESS_KEY] = false;
        throw e2;
      }
      if (!this._ssr) {
        this._zr.flush();
      }
      this[PENDING_UPDATE] = null;
      this[IN_MAIN_PROCESS_KEY] = false;
      flushPendingActions.call(this, silent);
      triggerUpdatedEvent.call(this, silent);
    }
  };
  ECharts2.prototype.setTheme = function() {
  };
  ECharts2.prototype.getModel = function() {
    return this._model;
  };
  ECharts2.prototype.getOption = function() {
    return this._model && this._model.getOption();
  };
  ECharts2.prototype.getWidth = function() {
    return this._zr.getWidth();
  };
  ECharts2.prototype.getHeight = function() {
    return this._zr.getHeight();
  };
  ECharts2.prototype.getDevicePixelRatio = function() {
    return this._zr.painter.dpr || env$1.hasGlobalWindow && window.devicePixelRatio || 1;
  };
  ECharts2.prototype.getRenderedCanvas = function(opts) {
    return this.renderToCanvas(opts);
  };
  ECharts2.prototype.renderToCanvas = function(opts) {
    opts = opts || {};
    var painter = this._zr.painter;
    return painter.getRenderedCanvas({
      backgroundColor: opts.backgroundColor || this._model.get("backgroundColor"),
      pixelRatio: opts.pixelRatio || this.getDevicePixelRatio()
    });
  };
  ECharts2.prototype.renderToSVGString = function(opts) {
    opts = opts || {};
    var painter = this._zr.painter;
    return painter.renderToString({
      useViewBox: opts.useViewBox
    });
  };
  ECharts2.prototype.getSvgDataURL = function() {
    if (!env$1.svgSupported) {
      return;
    }
    var zr = this._zr;
    var list = zr.storage.getDisplayList();
    each$4(list, function(el) {
      el.stopAnimation(null, true);
    });
    return zr.painter.toDataURL();
  };
  ECharts2.prototype.getDataURL = function(opts) {
    if (this._disposed) {
      disposedWarning(this.id);
      return;
    }
    opts = opts || {};
    var excludeComponents = opts.excludeComponents;
    var ecModel = this._model;
    var excludesComponentViews = [];
    var self2 = this;
    each$4(excludeComponents, function(componentType) {
      ecModel.eachComponent({
        mainType: componentType
      }, function(component) {
        var view = self2._componentsMap[component.__viewId];
        if (!view.group.ignore) {
          excludesComponentViews.push(view);
          view.group.ignore = true;
        }
      });
    });
    var url = this._zr.painter.getType() === "svg" ? this.getSvgDataURL() : this.renderToCanvas(opts).toDataURL("image/" + (opts && opts.type || "png"));
    each$4(excludesComponentViews, function(view) {
      view.group.ignore = false;
    });
    return url;
  };
  ECharts2.prototype.getConnectedDataURL = function(opts) {
    if (this._disposed) {
      disposedWarning(this.id);
      return;
    }
    var isSvg = opts.type === "svg";
    var groupId = this.group;
    var mathMin2 = Math.min;
    var mathMax2 = Math.max;
    var MAX_NUMBER = Infinity;
    if (connectedGroups[groupId]) {
      var left_1 = MAX_NUMBER;
      var top_1 = MAX_NUMBER;
      var right_1 = -MAX_NUMBER;
      var bottom_1 = -MAX_NUMBER;
      var canvasList_1 = [];
      var dpr_1 = opts && opts.pixelRatio || this.getDevicePixelRatio();
      each$4(instances, function(chart, id) {
        if (chart.group === groupId) {
          var canvas = isSvg ? chart.getZr().painter.getSvgDom().innerHTML : chart.renderToCanvas(clone$2(opts));
          var boundingRect = chart.getDom().getBoundingClientRect();
          left_1 = mathMin2(boundingRect.left, left_1);
          top_1 = mathMin2(boundingRect.top, top_1);
          right_1 = mathMax2(boundingRect.right, right_1);
          bottom_1 = mathMax2(boundingRect.bottom, bottom_1);
          canvasList_1.push({
            dom: canvas,
            left: boundingRect.left,
            top: boundingRect.top
          });
        }
      });
      left_1 *= dpr_1;
      top_1 *= dpr_1;
      right_1 *= dpr_1;
      bottom_1 *= dpr_1;
      var width = right_1 - left_1;
      var height = bottom_1 - top_1;
      var targetCanvas = platformApi.createCanvas();
      var zr_1 = init$1(targetCanvas, {
        renderer: isSvg ? "svg" : "canvas"
      });
      zr_1.resize({
        width,
        height
      });
      if (isSvg) {
        var content_1 = "";
        each$4(canvasList_1, function(item) {
          var x2 = item.left - left_1;
          var y2 = item.top - top_1;
          content_1 += '<g transform="translate(' + x2 + "," + y2 + ')">' + item.dom + "</g>";
        });
        zr_1.painter.getSvgRoot().innerHTML = content_1;
        if (opts.connectedBackgroundColor) {
          zr_1.painter.setBackgroundColor(opts.connectedBackgroundColor);
        }
        zr_1.refreshImmediately();
        return zr_1.painter.toDataURL();
      } else {
        if (opts.connectedBackgroundColor) {
          zr_1.add(new Rect$1({
            shape: {
              x: 0,
              y: 0,
              width,
              height
            },
            style: {
              fill: opts.connectedBackgroundColor
            }
          }));
        }
        each$4(canvasList_1, function(item) {
          var img = new ZRImage$1({
            style: {
              x: item.left * dpr_1 - left_1,
              y: item.top * dpr_1 - top_1,
              image: item.dom
            }
          });
          zr_1.add(img);
        });
        zr_1.refreshImmediately();
        return targetCanvas.toDataURL("image/" + (opts && opts.type || "png"));
      }
    } else {
      return this.getDataURL(opts);
    }
  };
  ECharts2.prototype.convertToPixel = function(finder, value) {
    return doConvertPixel(this, "convertToPixel", finder, value);
  };
  ECharts2.prototype.convertFromPixel = function(finder, value) {
    return doConvertPixel(this, "convertFromPixel", finder, value);
  };
  ECharts2.prototype.containPixel = function(finder, value) {
    if (this._disposed) {
      disposedWarning(this.id);
      return;
    }
    var ecModel = this._model;
    var result;
    var findResult = parseFinder(ecModel, finder);
    each$4(findResult, function(models, key) {
      key.indexOf("Models") >= 0 && each$4(models, function(model) {
        var coordSys = model.coordinateSystem;
        if (coordSys && coordSys.containPoint) {
          result = result || !!coordSys.containPoint(value);
        } else if (key === "seriesModels") {
          var view = this._chartsMap[model.__viewId];
          if (view && view.containPoint) {
            result = result || view.containPoint(value, model);
          }
        } else
          ;
      }, this);
    }, this);
    return !!result;
  };
  ECharts2.prototype.getVisual = function(finder, visualType) {
    var ecModel = this._model;
    var parsedFinder = parseFinder(ecModel, finder, {
      defaultMainType: "series"
    });
    var seriesModel = parsedFinder.seriesModel;
    var data = seriesModel.getData();
    var dataIndexInside = parsedFinder.hasOwnProperty("dataIndexInside") ? parsedFinder.dataIndexInside : parsedFinder.hasOwnProperty("dataIndex") ? data.indexOfRawIndex(parsedFinder.dataIndex) : null;
    return dataIndexInside != null ? getItemVisualFromData(data, dataIndexInside, visualType) : getVisualFromData(data, visualType);
  };
  ECharts2.prototype.getViewOfComponentModel = function(componentModel) {
    return this._componentsMap[componentModel.__viewId];
  };
  ECharts2.prototype.getViewOfSeriesModel = function(seriesModel) {
    return this._chartsMap[seriesModel.__viewId];
  };
  ECharts2.prototype._initEvents = function() {
    var _this = this;
    each$4(MOUSE_EVENT_NAMES, function(eveName) {
      var handler = function(e2) {
        var ecModel = _this.getModel();
        var el = e2.target;
        var params;
        var isGlobalOut = eveName === "globalout";
        if (isGlobalOut) {
          params = {};
        } else {
          el && findEventDispatcher(el, function(parent) {
            var ecData = getECData(parent);
            if (ecData && ecData.dataIndex != null) {
              var dataModel = ecData.dataModel || ecModel.getSeriesByIndex(ecData.seriesIndex);
              params = dataModel && dataModel.getDataParams(ecData.dataIndex, ecData.dataType, el) || {};
              return true;
            } else if (ecData.eventData) {
              params = extend({}, ecData.eventData);
              return true;
            }
          }, true);
        }
        if (params) {
          var componentType = params.componentType;
          var componentIndex = params.componentIndex;
          if (componentType === "markLine" || componentType === "markPoint" || componentType === "markArea") {
            componentType = "series";
            componentIndex = params.seriesIndex;
          }
          var model = componentType && componentIndex != null && ecModel.getComponent(componentType, componentIndex);
          var view = model && _this[model.mainType === "series" ? "_chartsMap" : "_componentsMap"][model.__viewId];
          params.event = e2;
          params.type = eveName;
          _this._$eventProcessor.eventInfo = {
            targetEl: el,
            packedEvent: params,
            model,
            view
          };
          _this.trigger(eveName, params);
        }
      };
      handler.zrEventfulCallAtLast = true;
      _this._zr.on(eveName, handler, _this);
    });
    each$4(eventActionMap, function(actionType, eventType) {
      _this._messageCenter.on(eventType, function(event) {
        this.trigger(eventType, event);
      }, _this);
    });
    each$4(["selectchanged"], function(eventType) {
      _this._messageCenter.on(eventType, function(event) {
        this.trigger(eventType, event);
      }, _this);
    });
    handleLegacySelectEvents(this._messageCenter, this, this._api);
  };
  ECharts2.prototype.isDisposed = function() {
    return this._disposed;
  };
  ECharts2.prototype.clear = function() {
    if (this._disposed) {
      disposedWarning(this.id);
      return;
    }
    this.setOption({
      series: []
    }, true);
  };
  ECharts2.prototype.dispose = function() {
    if (this._disposed) {
      disposedWarning(this.id);
      return;
    }
    this._disposed = true;
    var dom = this.getDom();
    if (dom) {
      setAttribute(this.getDom(), DOM_ATTRIBUTE_KEY, "");
    }
    var chart = this;
    var api = chart._api;
    var ecModel = chart._model;
    each$4(chart._componentsViews, function(component) {
      component.dispose(ecModel, api);
    });
    each$4(chart._chartsViews, function(chart2) {
      chart2.dispose(ecModel, api);
    });
    chart._zr.dispose();
    chart._dom = chart._model = chart._chartsMap = chart._componentsMap = chart._chartsViews = chart._componentsViews = chart._scheduler = chart._api = chart._zr = chart._throttledZrFlush = chart._theme = chart._coordSysMgr = chart._messageCenter = null;
    delete instances[chart.id];
  };
  ECharts2.prototype.resize = function(opts) {
    if (this[IN_MAIN_PROCESS_KEY]) {
      return;
    }
    if (this._disposed) {
      disposedWarning(this.id);
      return;
    }
    this._zr.resize(opts);
    var ecModel = this._model;
    this._loadingFX && this._loadingFX.resize();
    if (!ecModel) {
      return;
    }
    var needPrepare = ecModel.resetOption("media");
    var silent = opts && opts.silent;
    if (this[PENDING_UPDATE]) {
      if (silent == null) {
        silent = this[PENDING_UPDATE].silent;
      }
      needPrepare = true;
      this[PENDING_UPDATE] = null;
    }
    this[IN_MAIN_PROCESS_KEY] = true;
    try {
      needPrepare && prepare(this);
      updateMethods.update.call(this, {
        type: "resize",
        animation: extend({
          duration: 0
        }, opts && opts.animation)
      });
    } catch (e2) {
      this[IN_MAIN_PROCESS_KEY] = false;
      throw e2;
    }
    this[IN_MAIN_PROCESS_KEY] = false;
    flushPendingActions.call(this, silent);
    triggerUpdatedEvent.call(this, silent);
  };
  ECharts2.prototype.showLoading = function(name, cfg) {
    if (this._disposed) {
      disposedWarning(this.id);
      return;
    }
    if (isObject$2(name)) {
      cfg = name;
      name = "";
    }
    name = name || "default";
    this.hideLoading();
    if (!loadingEffects[name]) {
      return;
    }
    var el = loadingEffects[name](this._api, cfg);
    var zr = this._zr;
    this._loadingFX = el;
    zr.add(el);
  };
  ECharts2.prototype.hideLoading = function() {
    if (this._disposed) {
      disposedWarning(this.id);
      return;
    }
    this._loadingFX && this._zr.remove(this._loadingFX);
    this._loadingFX = null;
  };
  ECharts2.prototype.makeActionFromEvent = function(eventObj) {
    var payload = extend({}, eventObj);
    payload.type = eventActionMap[eventObj.type];
    return payload;
  };
  ECharts2.prototype.dispatchAction = function(payload, opt) {
    if (this._disposed) {
      disposedWarning(this.id);
      return;
    }
    if (!isObject$2(opt)) {
      opt = {
        silent: !!opt
      };
    }
    if (!actions[payload.type]) {
      return;
    }
    if (!this._model) {
      return;
    }
    if (this[IN_MAIN_PROCESS_KEY]) {
      this._pendingActions.push(payload);
      return;
    }
    var silent = opt.silent;
    doDispatchAction.call(this, payload, silent);
    var flush = opt.flush;
    if (flush) {
      this._zr.flush();
    } else if (flush !== false && env$1.browser.weChat) {
      this._throttledZrFlush();
    }
    flushPendingActions.call(this, silent);
    triggerUpdatedEvent.call(this, silent);
  };
  ECharts2.prototype.updateLabelLayout = function() {
    lifecycle$1.trigger("series:layoutlabels", this._model, this._api, {
      updatedSeries: []
    });
  };
  ECharts2.prototype.appendData = function(params) {
    if (this._disposed) {
      disposedWarning(this.id);
      return;
    }
    var seriesIndex = params.seriesIndex;
    var ecModel = this.getModel();
    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);
    seriesModel.appendData(params);
    this._scheduler.unfinished = true;
    this.getZr().wakeUp();
  };
  ECharts2.internalField = function() {
    prepare = function(ecIns) {
      var scheduler = ecIns._scheduler;
      scheduler.restorePipelines(ecIns._model);
      scheduler.prepareStageTasks();
      prepareView(ecIns, true);
      prepareView(ecIns, false);
      scheduler.plan();
    };
    prepareView = function(ecIns, isComponent) {
      var ecModel = ecIns._model;
      var scheduler = ecIns._scheduler;
      var viewList = isComponent ? ecIns._componentsViews : ecIns._chartsViews;
      var viewMap = isComponent ? ecIns._componentsMap : ecIns._chartsMap;
      var zr = ecIns._zr;
      var api = ecIns._api;
      for (var i = 0; i < viewList.length; i++) {
        viewList[i].__alive = false;
      }
      isComponent ? ecModel.eachComponent(function(componentType, model) {
        componentType !== "series" && doPrepare(model);
      }) : ecModel.eachSeries(doPrepare);
      function doPrepare(model) {
        var requireNewView = model.__requireNewView;
        model.__requireNewView = false;
        var viewId = "_ec_" + model.id + "_" + model.type;
        var view2 = !requireNewView && viewMap[viewId];
        if (!view2) {
          var classType = parseClassType(model.type);
          var Clazz = isComponent ? ComponentView$1.getClass(classType.main, classType.sub) : ChartView$1.getClass(classType.sub);
          view2 = new Clazz();
          view2.init(ecModel, api);
          viewMap[viewId] = view2;
          viewList.push(view2);
          zr.add(view2.group);
        }
        model.__viewId = view2.__id = viewId;
        view2.__alive = true;
        view2.__model = model;
        view2.group.__ecComponentInfo = {
          mainType: model.mainType,
          index: model.componentIndex
        };
        !isComponent && scheduler.prepareView(view2, model, ecModel, api);
      }
      for (var i = 0; i < viewList.length; ) {
        var view = viewList[i];
        if (!view.__alive) {
          !isComponent && view.renderTask.dispose();
          zr.remove(view.group);
          view.dispose(ecModel, api);
          viewList.splice(i, 1);
          if (viewMap[view.__id] === view) {
            delete viewMap[view.__id];
          }
          view.__id = view.group.__ecComponentInfo = null;
        } else {
          i++;
        }
      }
    };
    updateDirectly = function(ecIns, method, payload, mainType, subType) {
      var ecModel = ecIns._model;
      ecModel.setUpdatePayload(payload);
      if (!mainType) {
        each$4([].concat(ecIns._componentsViews).concat(ecIns._chartsViews), callView);
        return;
      }
      var query = {};
      query[mainType + "Id"] = payload[mainType + "Id"];
      query[mainType + "Index"] = payload[mainType + "Index"];
      query[mainType + "Name"] = payload[mainType + "Name"];
      var condition = {
        mainType,
        query
      };
      subType && (condition.subType = subType);
      var excludeSeriesId = payload.excludeSeriesId;
      var excludeSeriesIdMap;
      if (excludeSeriesId != null) {
        excludeSeriesIdMap = createHashMap();
        each$4(normalizeToArray(excludeSeriesId), function(id) {
          var modelId = convertOptionIdName(id, null);
          if (modelId != null) {
            excludeSeriesIdMap.set(modelId, true);
          }
        });
      }
      ecModel && ecModel.eachComponent(condition, function(model) {
        var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) != null;
        if (isExcluded) {
          return;
        }
        if (isHighDownPayload(payload)) {
          if (model instanceof SeriesModel$1) {
            if (payload.type === HIGHLIGHT_ACTION_TYPE && !payload.notBlur && !model.get(["emphasis", "disabled"])) {
              blurSeriesFromHighlightPayload(model, payload, ecIns._api);
            }
          } else {
            var _a2 = findComponentHighDownDispatchers(model.mainType, model.componentIndex, payload.name, ecIns._api), focusSelf = _a2.focusSelf, dispatchers = _a2.dispatchers;
            if (payload.type === HIGHLIGHT_ACTION_TYPE && focusSelf && !payload.notBlur) {
              blurComponent(model.mainType, model.componentIndex, ecIns._api);
            }
            if (dispatchers) {
              each$4(dispatchers, function(dispatcher) {
                payload.type === HIGHLIGHT_ACTION_TYPE ? enterEmphasis(dispatcher) : leaveEmphasis(dispatcher);
              });
            }
          }
        } else if (isSelectChangePayload(payload)) {
          if (model instanceof SeriesModel$1) {
            toggleSelectionFromPayload(model, payload, ecIns._api);
            updateSeriesElementSelection(model);
            markStatusToUpdate(ecIns);
          }
        }
      }, ecIns);
      ecModel && ecModel.eachComponent(condition, function(model) {
        var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) != null;
        if (isExcluded) {
          return;
        }
        callView(ecIns[mainType === "series" ? "_chartsMap" : "_componentsMap"][model.__viewId]);
      }, ecIns);
      function callView(view) {
        view && view.__alive && view[method] && view[method](view.__model, ecModel, ecIns._api, payload);
      }
    };
    updateMethods = {
      prepareAndUpdate: function(payload) {
        prepare(this);
        updateMethods.update.call(this, payload, {
          optionChanged: payload.newOption != null
        });
      },
      update: function(payload, updateParams) {
        var ecModel = this._model;
        var api = this._api;
        var zr = this._zr;
        var coordSysMgr = this._coordSysMgr;
        var scheduler = this._scheduler;
        if (!ecModel) {
          return;
        }
        ecModel.setUpdatePayload(payload);
        scheduler.restoreData(ecModel, payload);
        scheduler.performSeriesTasks(ecModel);
        coordSysMgr.create(ecModel, api);
        scheduler.performDataProcessorTasks(ecModel, payload);
        updateStreamModes(this, ecModel);
        coordSysMgr.update(ecModel, api);
        clearColorPalette(ecModel);
        scheduler.performVisualTasks(ecModel, payload);
        render(this, ecModel, api, payload, updateParams);
        var backgroundColor2 = ecModel.get("backgroundColor") || "transparent";
        var darkMode = ecModel.get("darkMode");
        zr.setBackgroundColor(backgroundColor2);
        if (darkMode != null && darkMode !== "auto") {
          zr.setDarkMode(darkMode);
        }
        lifecycle$1.trigger("afterupdate", ecModel, api);
      },
      updateTransform: function(payload) {
        var _this = this;
        var ecModel = this._model;
        var api = this._api;
        if (!ecModel) {
          return;
        }
        ecModel.setUpdatePayload(payload);
        var componentDirtyList = [];
        ecModel.eachComponent(function(componentType, componentModel) {
          if (componentType === "series") {
            return;
          }
          var componentView = _this.getViewOfComponentModel(componentModel);
          if (componentView && componentView.__alive) {
            if (componentView.updateTransform) {
              var result = componentView.updateTransform(componentModel, ecModel, api, payload);
              result && result.update && componentDirtyList.push(componentView);
            } else {
              componentDirtyList.push(componentView);
            }
          }
        });
        var seriesDirtyMap = createHashMap();
        ecModel.eachSeries(function(seriesModel) {
          var chartView = _this._chartsMap[seriesModel.__viewId];
          if (chartView.updateTransform) {
            var result = chartView.updateTransform(seriesModel, ecModel, api, payload);
            result && result.update && seriesDirtyMap.set(seriesModel.uid, 1);
          } else {
            seriesDirtyMap.set(seriesModel.uid, 1);
          }
        });
        clearColorPalette(ecModel);
        this._scheduler.performVisualTasks(ecModel, payload, {
          setDirty: true,
          dirtyMap: seriesDirtyMap
        });
        renderSeries(this, ecModel, api, payload, {}, seriesDirtyMap);
        lifecycle$1.trigger("afterupdate", ecModel, api);
      },
      updateView: function(payload) {
        var ecModel = this._model;
        if (!ecModel) {
          return;
        }
        ecModel.setUpdatePayload(payload);
        ChartView$1.markUpdateMethod(payload, "updateView");
        clearColorPalette(ecModel);
        this._scheduler.performVisualTasks(ecModel, payload, {
          setDirty: true
        });
        render(this, ecModel, this._api, payload, {});
        lifecycle$1.trigger("afterupdate", ecModel, this._api);
      },
      updateVisual: function(payload) {
        var _this = this;
        var ecModel = this._model;
        if (!ecModel) {
          return;
        }
        ecModel.setUpdatePayload(payload);
        ecModel.eachSeries(function(seriesModel) {
          seriesModel.getData().clearAllVisual();
        });
        ChartView$1.markUpdateMethod(payload, "updateVisual");
        clearColorPalette(ecModel);
        this._scheduler.performVisualTasks(ecModel, payload, {
          visualType: "visual",
          setDirty: true
        });
        ecModel.eachComponent(function(componentType, componentModel) {
          if (componentType !== "series") {
            var componentView = _this.getViewOfComponentModel(componentModel);
            componentView && componentView.__alive && componentView.updateVisual(componentModel, ecModel, _this._api, payload);
          }
        });
        ecModel.eachSeries(function(seriesModel) {
          var chartView = _this._chartsMap[seriesModel.__viewId];
          chartView.updateVisual(seriesModel, ecModel, _this._api, payload);
        });
        lifecycle$1.trigger("afterupdate", ecModel, this._api);
      },
      updateLayout: function(payload) {
        updateMethods.update.call(this, payload);
      }
    };
    doConvertPixel = function(ecIns, methodName, finder, value) {
      if (ecIns._disposed) {
        disposedWarning(ecIns.id);
        return;
      }
      var ecModel = ecIns._model;
      var coordSysList = ecIns._coordSysMgr.getCoordinateSystems();
      var result;
      var parsedFinder = parseFinder(ecModel, finder);
      for (var i = 0; i < coordSysList.length; i++) {
        var coordSys = coordSysList[i];
        if (coordSys[methodName] && (result = coordSys[methodName](ecModel, parsedFinder, value)) != null) {
          return result;
        }
      }
    };
    updateStreamModes = function(ecIns, ecModel) {
      var chartsMap = ecIns._chartsMap;
      var scheduler = ecIns._scheduler;
      ecModel.eachSeries(function(seriesModel) {
        scheduler.updateStreamModes(seriesModel, chartsMap[seriesModel.__viewId]);
      });
    };
    doDispatchAction = function(payload, silent) {
      var _this = this;
      var ecModel = this.getModel();
      var payloadType = payload.type;
      var escapeConnect = payload.escapeConnect;
      var actionWrap = actions[payloadType];
      var actionInfo = actionWrap.actionInfo;
      var cptTypeTmp = (actionInfo.update || "update").split(":");
      var updateMethod = cptTypeTmp.pop();
      var cptType = cptTypeTmp[0] != null && parseClassType(cptTypeTmp[0]);
      this[IN_MAIN_PROCESS_KEY] = true;
      var payloads = [payload];
      var batched = false;
      if (payload.batch) {
        batched = true;
        payloads = map$1(payload.batch, function(item) {
          item = defaults(extend({}, item), payload);
          item.batch = null;
          return item;
        });
      }
      var eventObjBatch = [];
      var eventObj;
      var isSelectChange = isSelectChangePayload(payload);
      var isHighDown = isHighDownPayload(payload);
      if (isHighDown) {
        allLeaveBlur(this._api);
      }
      each$4(payloads, function(batchItem) {
        eventObj = actionWrap.action(batchItem, _this._model, _this._api);
        eventObj = eventObj || extend({}, batchItem);
        eventObj.type = actionInfo.event || eventObj.type;
        eventObjBatch.push(eventObj);
        if (isHighDown) {
          var _a2 = preParseFinder(payload), queryOptionMap = _a2.queryOptionMap, mainTypeSpecified = _a2.mainTypeSpecified;
          var componentMainType = mainTypeSpecified ? queryOptionMap.keys()[0] : "series";
          updateDirectly(_this, updateMethod, batchItem, componentMainType);
          markStatusToUpdate(_this);
        } else if (isSelectChange) {
          updateDirectly(_this, updateMethod, batchItem, "series");
          markStatusToUpdate(_this);
        } else if (cptType) {
          updateDirectly(_this, updateMethod, batchItem, cptType.main, cptType.sub);
        }
      });
      if (updateMethod !== "none" && !isHighDown && !isSelectChange && !cptType) {
        try {
          if (this[PENDING_UPDATE]) {
            prepare(this);
            updateMethods.update.call(this, payload);
            this[PENDING_UPDATE] = null;
          } else {
            updateMethods[updateMethod].call(this, payload);
          }
        } catch (e2) {
          this[IN_MAIN_PROCESS_KEY] = false;
          throw e2;
        }
      }
      if (batched) {
        eventObj = {
          type: actionInfo.event || payloadType,
          escapeConnect,
          batch: eventObjBatch
        };
      } else {
        eventObj = eventObjBatch[0];
      }
      this[IN_MAIN_PROCESS_KEY] = false;
      if (!silent) {
        var messageCenter = this._messageCenter;
        messageCenter.trigger(eventObj.type, eventObj);
        if (isSelectChange) {
          var newObj = {
            type: "selectchanged",
            escapeConnect,
            selected: getAllSelectedIndices(ecModel),
            isFromClick: payload.isFromClick || false,
            fromAction: payload.type,
            fromActionPayload: payload
          };
          messageCenter.trigger(newObj.type, newObj);
        }
      }
    };
    flushPendingActions = function(silent) {
      var pendingActions = this._pendingActions;
      while (pendingActions.length) {
        var payload = pendingActions.shift();
        doDispatchAction.call(this, payload, silent);
      }
    };
    triggerUpdatedEvent = function(silent) {
      !silent && this.trigger("updated");
    };
    bindRenderedEvent = function(zr, ecIns) {
      zr.on("rendered", function(params) {
        ecIns.trigger("rendered", params);
        if (zr.animation.isFinished() && !ecIns[PENDING_UPDATE] && !ecIns._scheduler.unfinished && !ecIns._pendingActions.length) {
          ecIns.trigger("finished");
        }
      });
    };
    bindMouseEvent = function(zr, ecIns) {
      zr.on("mouseover", function(e2) {
        var el = e2.target;
        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);
        if (dispatcher) {
          handleGlobalMouseOverForHighDown(dispatcher, e2, ecIns._api);
          markStatusToUpdate(ecIns);
        }
      }).on("mouseout", function(e2) {
        var el = e2.target;
        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);
        if (dispatcher) {
          handleGlobalMouseOutForHighDown(dispatcher, e2, ecIns._api);
          markStatusToUpdate(ecIns);
        }
      }).on("click", function(e2) {
        var el = e2.target;
        var dispatcher = findEventDispatcher(el, function(target) {
          return getECData(target).dataIndex != null;
        }, true);
        if (dispatcher) {
          var actionType = dispatcher.selected ? "unselect" : "select";
          var ecData = getECData(dispatcher);
          ecIns._api.dispatchAction({
            type: actionType,
            dataType: ecData.dataType,
            dataIndexInside: ecData.dataIndex,
            seriesIndex: ecData.seriesIndex,
            isFromClick: true
          });
        }
      });
    };
    function clearColorPalette(ecModel) {
      ecModel.clearColorPalette();
      ecModel.eachSeries(function(seriesModel) {
        seriesModel.clearColorPalette();
      });
    }
    function allocateZlevels(ecModel) {
      var componentZLevels = [];
      var seriesZLevels = [];
      var hasSeperateZLevel = false;
      ecModel.eachComponent(function(componentType, componentModel) {
        var zlevel = componentModel.get("zlevel") || 0;
        var z2 = componentModel.get("z") || 0;
        var zlevelKey = componentModel.getZLevelKey();
        hasSeperateZLevel = hasSeperateZLevel || !!zlevelKey;
        (componentType === "series" ? seriesZLevels : componentZLevels).push({
          zlevel,
          z: z2,
          idx: componentModel.componentIndex,
          type: componentType,
          key: zlevelKey
        });
      });
      if (hasSeperateZLevel) {
        var zLevels = componentZLevels.concat(seriesZLevels);
        var lastSeriesZLevel_1;
        var lastSeriesKey_1;
        sort(zLevels, function(a, b2) {
          if (a.zlevel === b2.zlevel) {
            return a.z - b2.z;
          }
          return a.zlevel - b2.zlevel;
        });
        each$4(zLevels, function(item) {
          var componentModel = ecModel.getComponent(item.type, item.idx);
          var zlevel = item.zlevel;
          var key = item.key;
          if (lastSeriesZLevel_1 != null) {
            zlevel = Math.max(lastSeriesZLevel_1, zlevel);
          }
          if (key) {
            if (zlevel === lastSeriesZLevel_1 && key !== lastSeriesKey_1) {
              zlevel++;
            }
            lastSeriesKey_1 = key;
          } else if (lastSeriesKey_1) {
            if (zlevel === lastSeriesZLevel_1) {
              zlevel++;
            }
            lastSeriesKey_1 = "";
          }
          lastSeriesZLevel_1 = zlevel;
          componentModel.setZLevel(zlevel);
        });
      }
    }
    render = function(ecIns, ecModel, api, payload, updateParams) {
      allocateZlevels(ecModel);
      renderComponents(ecIns, ecModel, api, payload, updateParams);
      each$4(ecIns._chartsViews, function(chart) {
        chart.__alive = false;
      });
      renderSeries(ecIns, ecModel, api, payload, updateParams);
      each$4(ecIns._chartsViews, function(chart) {
        if (!chart.__alive) {
          chart.remove(ecModel, api);
        }
      });
    };
    renderComponents = function(ecIns, ecModel, api, payload, updateParams, dirtyList) {
      each$4(dirtyList || ecIns._componentsViews, function(componentView) {
        var componentModel = componentView.__model;
        clearStates(componentModel, componentView);
        componentView.render(componentModel, ecModel, api, payload);
        updateZ(componentModel, componentView);
        updateStates(componentModel, componentView);
      });
    };
    renderSeries = function(ecIns, ecModel, api, payload, updateParams, dirtyMap) {
      var scheduler = ecIns._scheduler;
      updateParams = extend(updateParams || {}, {
        updatedSeries: ecModel.getSeries()
      });
      lifecycle$1.trigger("series:beforeupdate", ecModel, api, updateParams);
      var unfinished = false;
      ecModel.eachSeries(function(seriesModel) {
        var chartView = ecIns._chartsMap[seriesModel.__viewId];
        chartView.__alive = true;
        var renderTask = chartView.renderTask;
        scheduler.updatePayload(renderTask, payload);
        clearStates(seriesModel, chartView);
        if (dirtyMap && dirtyMap.get(seriesModel.uid)) {
          renderTask.dirty();
        }
        if (renderTask.perform(scheduler.getPerformArgs(renderTask))) {
          unfinished = true;
        }
        chartView.group.silent = !!seriesModel.get("silent");
        updateBlend(seriesModel, chartView);
        updateSeriesElementSelection(seriesModel);
      });
      scheduler.unfinished = unfinished || scheduler.unfinished;
      lifecycle$1.trigger("series:layoutlabels", ecModel, api, updateParams);
      lifecycle$1.trigger("series:transition", ecModel, api, updateParams);
      ecModel.eachSeries(function(seriesModel) {
        var chartView = ecIns._chartsMap[seriesModel.__viewId];
        updateZ(seriesModel, chartView);
        updateStates(seriesModel, chartView);
      });
      updateHoverLayerStatus(ecIns, ecModel);
      lifecycle$1.trigger("series:afterupdate", ecModel, api, updateParams);
    };
    markStatusToUpdate = function(ecIns) {
      ecIns[STATUS_NEEDS_UPDATE_KEY] = true;
      ecIns.getZr().wakeUp();
    };
    applyChangedStates = function(ecIns) {
      if (!ecIns[STATUS_NEEDS_UPDATE_KEY]) {
        return;
      }
      ecIns.getZr().storage.traverse(function(el) {
        if (isElementRemoved(el)) {
          return;
        }
        applyElementStates(el);
      });
      ecIns[STATUS_NEEDS_UPDATE_KEY] = false;
    };
    function applyElementStates(el) {
      var newStates = [];
      var oldStates = el.currentStates;
      for (var i = 0; i < oldStates.length; i++) {
        var stateName = oldStates[i];
        if (!(stateName === "emphasis" || stateName === "blur" || stateName === "select")) {
          newStates.push(stateName);
        }
      }
      if (el.selected && el.states.select) {
        newStates.push("select");
      }
      if (el.hoverState === HOVER_STATE_EMPHASIS && el.states.emphasis) {
        newStates.push("emphasis");
      } else if (el.hoverState === HOVER_STATE_BLUR && el.states.blur) {
        newStates.push("blur");
      }
      el.useStates(newStates);
    }
    function updateHoverLayerStatus(ecIns, ecModel) {
      var zr = ecIns._zr;
      var storage = zr.storage;
      var elCount = 0;
      storage.traverse(function(el) {
        if (!el.isGroup) {
          elCount++;
        }
      });
      if (elCount > ecModel.get("hoverLayerThreshold") && !env$1.node && !env$1.worker) {
        ecModel.eachSeries(function(seriesModel) {
          if (seriesModel.preventUsingHoverLayer) {
            return;
          }
          var chartView = ecIns._chartsMap[seriesModel.__viewId];
          if (chartView.__alive) {
            chartView.eachRendered(function(el) {
              if (el.states.emphasis) {
                el.states.emphasis.hoverLayer = true;
              }
            });
          }
        });
      }
    }
    function updateBlend(seriesModel, chartView) {
      var blendMode = seriesModel.get("blendMode") || null;
      chartView.eachRendered(function(el) {
        if (!el.isGroup) {
          el.style.blend = blendMode;
        }
      });
    }
    function updateZ(model, view) {
      if (model.preventAutoZ) {
        return;
      }
      var z2 = model.get("z") || 0;
      var zlevel = model.get("zlevel") || 0;
      view.eachRendered(function(el) {
        doUpdateZ(el, z2, zlevel, -Infinity);
        return true;
      });
    }
    function doUpdateZ(el, z2, zlevel, maxZ2) {
      var label = el.getTextContent();
      var labelLine = el.getTextGuideLine();
      var isGroup = el.isGroup;
      if (isGroup) {
        var children = el.childrenRef();
        for (var i = 0; i < children.length; i++) {
          maxZ2 = Math.max(doUpdateZ(children[i], z2, zlevel, maxZ2), maxZ2);
        }
      } else {
        el.z = z2;
        el.zlevel = zlevel;
        maxZ2 = Math.max(el.z2, maxZ2);
      }
      if (label) {
        label.z = z2;
        label.zlevel = zlevel;
        isFinite(maxZ2) && (label.z2 = maxZ2 + 2);
      }
      if (labelLine) {
        var textGuideLineConfig = el.textGuideLineConfig;
        labelLine.z = z2;
        labelLine.zlevel = zlevel;
        isFinite(maxZ2) && (labelLine.z2 = maxZ2 + (textGuideLineConfig && textGuideLineConfig.showAbove ? 1 : -1));
      }
      return maxZ2;
    }
    function clearStates(model, view) {
      view.eachRendered(function(el) {
        if (isElementRemoved(el)) {
          return;
        }
        var textContent = el.getTextContent();
        var textGuide = el.getTextGuideLine();
        if (el.stateTransition) {
          el.stateTransition = null;
        }
        if (textContent && textContent.stateTransition) {
          textContent.stateTransition = null;
        }
        if (textGuide && textGuide.stateTransition) {
          textGuide.stateTransition = null;
        }
        if (el.hasState()) {
          el.prevStates = el.currentStates;
          el.clearStates();
        } else if (el.prevStates) {
          el.prevStates = null;
        }
      });
    }
    function updateStates(model, view) {
      var stateAnimationModel = model.getModel("stateAnimation");
      var enableAnimation = model.isAnimationEnabled();
      var duration = stateAnimationModel.get("duration");
      var stateTransition = duration > 0 ? {
        duration,
        delay: stateAnimationModel.get("delay"),
        easing: stateAnimationModel.get("easing")
      } : null;
      view.eachRendered(function(el) {
        if (el.states && el.states.emphasis) {
          if (isElementRemoved(el)) {
            return;
          }
          if (el instanceof Path$1) {
            savePathStates(el);
          }
          if (el.__dirty) {
            var prevStates = el.prevStates;
            if (prevStates) {
              el.useStates(prevStates);
            }
          }
          if (enableAnimation) {
            el.stateTransition = stateTransition;
            var textContent = el.getTextContent();
            var textGuide = el.getTextGuideLine();
            if (textContent) {
              textContent.stateTransition = stateTransition;
            }
            if (textGuide) {
              textGuide.stateTransition = stateTransition;
            }
          }
          if (el.__dirty) {
            applyElementStates(el);
          }
        }
      });
    }
    createExtensionAPI = function(ecIns) {
      return new (function(_super2) {
        __extends(class_1, _super2);
        function class_1() {
          return _super2 !== null && _super2.apply(this, arguments) || this;
        }
        class_1.prototype.getCoordinateSystems = function() {
          return ecIns._coordSysMgr.getCoordinateSystems();
        };
        class_1.prototype.getComponentByElement = function(el) {
          while (el) {
            var modelInfo = el.__ecComponentInfo;
            if (modelInfo != null) {
              return ecIns._model.getComponent(modelInfo.mainType, modelInfo.index);
            }
            el = el.parent;
          }
        };
        class_1.prototype.enterEmphasis = function(el, highlightDigit) {
          enterEmphasis(el, highlightDigit);
          markStatusToUpdate(ecIns);
        };
        class_1.prototype.leaveEmphasis = function(el, highlightDigit) {
          leaveEmphasis(el, highlightDigit);
          markStatusToUpdate(ecIns);
        };
        class_1.prototype.enterBlur = function(el) {
          enterBlur(el);
          markStatusToUpdate(ecIns);
        };
        class_1.prototype.leaveBlur = function(el) {
          leaveBlur(el);
          markStatusToUpdate(ecIns);
        };
        class_1.prototype.enterSelect = function(el) {
          enterSelect(el);
          markStatusToUpdate(ecIns);
        };
        class_1.prototype.leaveSelect = function(el) {
          leaveSelect(el);
          markStatusToUpdate(ecIns);
        };
        class_1.prototype.getModel = function() {
          return ecIns.getModel();
        };
        class_1.prototype.getViewOfComponentModel = function(componentModel) {
          return ecIns.getViewOfComponentModel(componentModel);
        };
        class_1.prototype.getViewOfSeriesModel = function(seriesModel) {
          return ecIns.getViewOfSeriesModel(seriesModel);
        };
        return class_1;
      }(ExtensionAPI$1))(ecIns);
    };
    enableConnect = function(chart) {
      function updateConnectedChartsStatus(charts, status) {
        for (var i = 0; i < charts.length; i++) {
          var otherChart = charts[i];
          otherChart[CONNECT_STATUS_KEY] = status;
        }
      }
      each$4(eventActionMap, function(actionType, eventType) {
        chart._messageCenter.on(eventType, function(event) {
          if (connectedGroups[chart.group] && chart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_PENDING) {
            if (event && event.escapeConnect) {
              return;
            }
            var action_1 = chart.makeActionFromEvent(event);
            var otherCharts_1 = [];
            each$4(instances, function(otherChart) {
              if (otherChart !== chart && otherChart.group === chart.group) {
                otherCharts_1.push(otherChart);
              }
            });
            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_PENDING);
            each$4(otherCharts_1, function(otherChart) {
              if (otherChart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_UPDATING) {
                otherChart.dispatchAction(action_1);
              }
            });
            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_UPDATED);
          }
        });
      });
    };
  }();
  return ECharts2;
}(Eventful$1);
var echartsProto = ECharts.prototype;
echartsProto.on = createRegisterEventWithLowercaseECharts("on");
echartsProto.off = createRegisterEventWithLowercaseECharts("off");
echartsProto.one = function(eventName, cb, ctx) {
  var self2 = this;
  function wrapped() {
    var args2 = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      args2[_i] = arguments[_i];
    }
    cb && cb.apply && cb.apply(this, args2);
    self2.off(eventName, wrapped);
  }
  this.on.call(this, eventName, wrapped, ctx);
};
var MOUSE_EVENT_NAMES = ["click", "dblclick", "mouseover", "mouseout", "mousemove", "mousedown", "mouseup", "globalout", "contextmenu"];
function disposedWarning(id) {
}
var actions = {};
var eventActionMap = {};
var dataProcessorFuncs = [];
var optionPreprocessorFuncs = [];
var visualFuncs = [];
var themeStorage = {};
var loadingEffects = {};
var instances = {};
var connectedGroups = {};
var idBase = +new Date() - 0;
var DOM_ATTRIBUTE_KEY = "_echarts_instance_";
function init(dom, theme2, opts) {
  var isClient = !(opts && opts.ssr);
  if (isClient) {
    var existInstance = getInstanceByDom(dom);
    if (existInstance) {
      return existInstance;
    }
  }
  var chart = new ECharts(dom, theme2, opts);
  chart.id = "ec_" + idBase++;
  instances[chart.id] = chart;
  isClient && setAttribute(dom, DOM_ATTRIBUTE_KEY, chart.id);
  enableConnect(chart);
  lifecycle$1.trigger("afterinit", chart);
  return chart;
}
function getInstanceByDom(dom) {
  return instances[getAttribute(dom, DOM_ATTRIBUTE_KEY)];
}
function registerTheme(name, theme2) {
  themeStorage[name] = theme2;
}
function registerPreprocessor(preprocessorFunc) {
  if (indexOf(optionPreprocessorFuncs, preprocessorFunc) < 0) {
    optionPreprocessorFuncs.push(preprocessorFunc);
  }
}
function registerProcessor(priority, processor) {
  normalizeRegister(dataProcessorFuncs, priority, processor, PRIORITY_PROCESSOR_DEFAULT);
}
function registerPostInit(postInitFunc) {
  registerUpdateLifecycle("afterinit", postInitFunc);
}
function registerPostUpdate(postUpdateFunc) {
  registerUpdateLifecycle("afterupdate", postUpdateFunc);
}
function registerUpdateLifecycle(name, cb) {
  lifecycle$1.on(name, cb);
}
function registerAction(actionInfo, eventName, action) {
  if (isFunction(eventName)) {
    action = eventName;
    eventName = "";
  }
  var actionType = isObject$2(actionInfo) ? actionInfo.type : [actionInfo, actionInfo = {
    event: eventName
  }][0];
  actionInfo.event = (actionInfo.event || actionType).toLowerCase();
  eventName = actionInfo.event;
  if (eventActionMap[eventName]) {
    return;
  }
  assert(ACTION_REG.test(actionType) && ACTION_REG.test(eventName));
  if (!actions[actionType]) {
    actions[actionType] = {
      action,
      actionInfo
    };
  }
  eventActionMap[eventName] = actionType;
}
function registerCoordinateSystem(type, coordSysCreator) {
  CoordinateSystem.register(type, coordSysCreator);
}
function registerLayout(priority, layoutTask) {
  normalizeRegister(visualFuncs, priority, layoutTask, PRIORITY_VISUAL_LAYOUT, "layout");
}
function registerVisual(priority, visualTask) {
  normalizeRegister(visualFuncs, priority, visualTask, PRIORITY_VISUAL_CHART, "visual");
}
var registeredTasks = [];
function normalizeRegister(targetList, priority, fn, defaultPriority, visualType) {
  if (isFunction(priority) || isObject$2(priority)) {
    fn = priority;
    priority = defaultPriority;
  }
  if (indexOf(registeredTasks, fn) >= 0) {
    return;
  }
  registeredTasks.push(fn);
  var stageHandler = Scheduler$1.wrapStageHandler(fn, visualType);
  stageHandler.__prio = priority;
  stageHandler.__raw = fn;
  targetList.push(stageHandler);
}
function registerLoading(name, loadingFx) {
  loadingEffects[name] = loadingFx;
}
function registerMap(mapName, geoJson, specialAreas) {
  var registerMap2 = getImpl("registerMap");
  registerMap2 && registerMap2(mapName, geoJson, specialAreas);
}
var registerTransform = registerExternalTransform;
registerVisual(PRIORITY_VISUAL_GLOBAL, seriesStyleTask);
registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataStyleTask);
registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataColorPaletteTask);
registerVisual(PRIORITY_VISUAL_GLOBAL, seriesSymbolTask);
registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataSymbolTask);
registerVisual(PRIORITY_VISUAL_DECAL, decalVisual);
registerPreprocessor(globalBackwardCompat);
registerProcessor(PRIORITY_PROCESSOR_DATASTACK, dataStack);
registerLoading("default", defaultLoading);
registerAction({
  type: HIGHLIGHT_ACTION_TYPE,
  event: HIGHLIGHT_ACTION_TYPE,
  update: HIGHLIGHT_ACTION_TYPE
}, noop);
registerAction({
  type: DOWNPLAY_ACTION_TYPE,
  event: DOWNPLAY_ACTION_TYPE,
  update: DOWNPLAY_ACTION_TYPE
}, noop);
registerAction({
  type: SELECT_ACTION_TYPE,
  event: SELECT_ACTION_TYPE,
  update: SELECT_ACTION_TYPE
}, noop);
registerAction({
  type: UNSELECT_ACTION_TYPE,
  event: UNSELECT_ACTION_TYPE,
  update: UNSELECT_ACTION_TYPE
}, noop);
registerAction({
  type: TOGGLE_SELECT_ACTION_TYPE,
  event: TOGGLE_SELECT_ACTION_TYPE,
  update: TOGGLE_SELECT_ACTION_TYPE
}, noop);
registerTheme("light", lightTheme);
registerTheme("dark", darkTheme);
function dataIndexMapValueLength(valNumOrArrLengthMoreThan2) {
  return valNumOrArrLengthMoreThan2 == null ? 0 : valNumOrArrLengthMoreThan2.length || 1;
}
function defaultKeyGetter(item) {
  return item;
}
var DataDiffer = function() {
  function DataDiffer2(oldArr, newArr, oldKeyGetter, newKeyGetter, context, diffMode) {
    this._old = oldArr;
    this._new = newArr;
    this._oldKeyGetter = oldKeyGetter || defaultKeyGetter;
    this._newKeyGetter = newKeyGetter || defaultKeyGetter;
    this.context = context;
    this._diffModeMultiple = diffMode === "multiple";
  }
  DataDiffer2.prototype.add = function(func) {
    this._add = func;
    return this;
  };
  DataDiffer2.prototype.update = function(func) {
    this._update = func;
    return this;
  };
  DataDiffer2.prototype.updateManyToOne = function(func) {
    this._updateManyToOne = func;
    return this;
  };
  DataDiffer2.prototype.updateOneToMany = function(func) {
    this._updateOneToMany = func;
    return this;
  };
  DataDiffer2.prototype.updateManyToMany = function(func) {
    this._updateManyToMany = func;
    return this;
  };
  DataDiffer2.prototype.remove = function(func) {
    this._remove = func;
    return this;
  };
  DataDiffer2.prototype.execute = function() {
    this[this._diffModeMultiple ? "_executeMultiple" : "_executeOneToOne"]();
  };
  DataDiffer2.prototype._executeOneToOne = function() {
    var oldArr = this._old;
    var newArr = this._new;
    var newDataIndexMap = {};
    var oldDataKeyArr = new Array(oldArr.length);
    var newDataKeyArr = new Array(newArr.length);
    this._initIndexMap(oldArr, null, oldDataKeyArr, "_oldKeyGetter");
    this._initIndexMap(newArr, newDataIndexMap, newDataKeyArr, "_newKeyGetter");
    for (var i = 0; i < oldArr.length; i++) {
      var oldKey = oldDataKeyArr[i];
      var newIdxMapVal = newDataIndexMap[oldKey];
      var newIdxMapValLen = dataIndexMapValueLength(newIdxMapVal);
      if (newIdxMapValLen > 1) {
        var newIdx = newIdxMapVal.shift();
        if (newIdxMapVal.length === 1) {
          newDataIndexMap[oldKey] = newIdxMapVal[0];
        }
        this._update && this._update(newIdx, i);
      } else if (newIdxMapValLen === 1) {
        newDataIndexMap[oldKey] = null;
        this._update && this._update(newIdxMapVal, i);
      } else {
        this._remove && this._remove(i);
      }
    }
    this._performRestAdd(newDataKeyArr, newDataIndexMap);
  };
  DataDiffer2.prototype._executeMultiple = function() {
    var oldArr = this._old;
    var newArr = this._new;
    var oldDataIndexMap = {};
    var newDataIndexMap = {};
    var oldDataKeyArr = [];
    var newDataKeyArr = [];
    this._initIndexMap(oldArr, oldDataIndexMap, oldDataKeyArr, "_oldKeyGetter");
    this._initIndexMap(newArr, newDataIndexMap, newDataKeyArr, "_newKeyGetter");
    for (var i = 0; i < oldDataKeyArr.length; i++) {
      var oldKey = oldDataKeyArr[i];
      var oldIdxMapVal = oldDataIndexMap[oldKey];
      var newIdxMapVal = newDataIndexMap[oldKey];
      var oldIdxMapValLen = dataIndexMapValueLength(oldIdxMapVal);
      var newIdxMapValLen = dataIndexMapValueLength(newIdxMapVal);
      if (oldIdxMapValLen > 1 && newIdxMapValLen === 1) {
        this._updateManyToOne && this._updateManyToOne(newIdxMapVal, oldIdxMapVal);
        newDataIndexMap[oldKey] = null;
      } else if (oldIdxMapValLen === 1 && newIdxMapValLen > 1) {
        this._updateOneToMany && this._updateOneToMany(newIdxMapVal, oldIdxMapVal);
        newDataIndexMap[oldKey] = null;
      } else if (oldIdxMapValLen === 1 && newIdxMapValLen === 1) {
        this._update && this._update(newIdxMapVal, oldIdxMapVal);
        newDataIndexMap[oldKey] = null;
      } else if (oldIdxMapValLen > 1 && newIdxMapValLen > 1) {
        this._updateManyToMany && this._updateManyToMany(newIdxMapVal, oldIdxMapVal);
        newDataIndexMap[oldKey] = null;
      } else if (oldIdxMapValLen > 1) {
        for (var i_1 = 0; i_1 < oldIdxMapValLen; i_1++) {
          this._remove && this._remove(oldIdxMapVal[i_1]);
        }
      } else {
        this._remove && this._remove(oldIdxMapVal);
      }
    }
    this._performRestAdd(newDataKeyArr, newDataIndexMap);
  };
  DataDiffer2.prototype._performRestAdd = function(newDataKeyArr, newDataIndexMap) {
    for (var i = 0; i < newDataKeyArr.length; i++) {
      var newKey = newDataKeyArr[i];
      var newIdxMapVal = newDataIndexMap[newKey];
      var idxMapValLen = dataIndexMapValueLength(newIdxMapVal);
      if (idxMapValLen > 1) {
        for (var j2 = 0; j2 < idxMapValLen; j2++) {
          this._add && this._add(newIdxMapVal[j2]);
        }
      } else if (idxMapValLen === 1) {
        this._add && this._add(newIdxMapVal);
      }
      newDataIndexMap[newKey] = null;
    }
  };
  DataDiffer2.prototype._initIndexMap = function(arr, map2, keyArr, keyGetterName) {
    var cbModeMultiple = this._diffModeMultiple;
    for (var i = 0; i < arr.length; i++) {
      var key = "_ec_" + this[keyGetterName](arr[i], i);
      if (!cbModeMultiple) {
        keyArr[i] = key;
      }
      if (!map2) {
        continue;
      }
      var idxMapVal = map2[key];
      var idxMapValLen = dataIndexMapValueLength(idxMapVal);
      if (idxMapValLen === 0) {
        map2[key] = i;
        if (cbModeMultiple) {
          keyArr.push(key);
        }
      } else if (idxMapValLen === 1) {
        map2[key] = [idxMapVal, i];
      } else {
        idxMapVal.push(i);
      }
    }
  };
  return DataDiffer2;
}();
var DataDiffer$1 = DataDiffer;
var DimensionUserOuput = function() {
  function DimensionUserOuput2(encode, dimRequest) {
    this._encode = encode;
    this._schema = dimRequest;
  }
  DimensionUserOuput2.prototype.get = function() {
    return {
      fullDimensions: this._getFullDimensionNames(),
      encode: this._encode
    };
  };
  DimensionUserOuput2.prototype._getFullDimensionNames = function() {
    if (!this._cachedDimNames) {
      this._cachedDimNames = this._schema ? this._schema.makeOutputDimensionNames() : [];
    }
    return this._cachedDimNames;
  };
  return DimensionUserOuput2;
}();
function summarizeDimensions(data, schema) {
  var summary = {};
  var encode = summary.encode = {};
  var notExtraCoordDimMap = createHashMap();
  var defaultedLabel = [];
  var defaultedTooltip = [];
  var userOutputEncode = {};
  each$4(data.dimensions, function(dimName) {
    var dimItem = data.getDimensionInfo(dimName);
    var coordDim = dimItem.coordDim;
    if (coordDim) {
      var coordDimIndex = dimItem.coordDimIndex;
      getOrCreateEncodeArr(encode, coordDim)[coordDimIndex] = dimName;
      if (!dimItem.isExtraCoord) {
        notExtraCoordDimMap.set(coordDim, 1);
        if (mayLabelDimType(dimItem.type)) {
          defaultedLabel[0] = dimName;
        }
        getOrCreateEncodeArr(userOutputEncode, coordDim)[coordDimIndex] = data.getDimensionIndex(dimItem.name);
      }
      if (dimItem.defaultTooltip) {
        defaultedTooltip.push(dimName);
      }
    }
    VISUAL_DIMENSIONS.each(function(v, otherDim) {
      var encodeArr = getOrCreateEncodeArr(encode, otherDim);
      var dimIndex = dimItem.otherDims[otherDim];
      if (dimIndex != null && dimIndex !== false) {
        encodeArr[dimIndex] = dimItem.name;
      }
    });
  });
  var dataDimsOnCoord = [];
  var encodeFirstDimNotExtra = {};
  notExtraCoordDimMap.each(function(v, coordDim) {
    var dimArr = encode[coordDim];
    encodeFirstDimNotExtra[coordDim] = dimArr[0];
    dataDimsOnCoord = dataDimsOnCoord.concat(dimArr);
  });
  summary.dataDimsOnCoord = dataDimsOnCoord;
  summary.dataDimIndicesOnCoord = map$1(dataDimsOnCoord, function(dimName) {
    return data.getDimensionInfo(dimName).storeDimIndex;
  });
  summary.encodeFirstDimNotExtra = encodeFirstDimNotExtra;
  var encodeLabel = encode.label;
  if (encodeLabel && encodeLabel.length) {
    defaultedLabel = encodeLabel.slice();
  }
  var encodeTooltip = encode.tooltip;
  if (encodeTooltip && encodeTooltip.length) {
    defaultedTooltip = encodeTooltip.slice();
  } else if (!defaultedTooltip.length) {
    defaultedTooltip = defaultedLabel.slice();
  }
  encode.defaultedLabel = defaultedLabel;
  encode.defaultedTooltip = defaultedTooltip;
  summary.userOutput = new DimensionUserOuput(userOutputEncode, schema);
  return summary;
}
function getOrCreateEncodeArr(encode, dim) {
  if (!encode.hasOwnProperty(dim)) {
    encode[dim] = [];
  }
  return encode[dim];
}
function mayLabelDimType(dimType) {
  return !(dimType === "ordinal" || dimType === "time");
}
var SeriesDimensionDefine = function() {
  function SeriesDimensionDefine2(opt) {
    this.otherDims = {};
    if (opt != null) {
      extend(this, opt);
    }
  }
  return SeriesDimensionDefine2;
}();
var SeriesDimensionDefine$1 = SeriesDimensionDefine;
var inner$3 = makeInner();
var dimTypeShort = {
  float: "f",
  int: "i",
  ordinal: "o",
  number: "n",
  time: "t"
};
var SeriesDataSchema = function() {
  function SeriesDataSchema2(opt) {
    this.dimensions = opt.dimensions;
    this._dimOmitted = opt.dimensionOmitted;
    this.source = opt.source;
    this._fullDimCount = opt.fullDimensionCount;
    this._updateDimOmitted(opt.dimensionOmitted);
  }
  SeriesDataSchema2.prototype.isDimensionOmitted = function() {
    return this._dimOmitted;
  };
  SeriesDataSchema2.prototype._updateDimOmitted = function(dimensionOmitted) {
    this._dimOmitted = dimensionOmitted;
    if (!dimensionOmitted) {
      return;
    }
    if (!this._dimNameMap) {
      this._dimNameMap = ensureSourceDimNameMap(this.source);
    }
  };
  SeriesDataSchema2.prototype.getSourceDimensionIndex = function(dimName) {
    return retrieve2(this._dimNameMap.get(dimName), -1);
  };
  SeriesDataSchema2.prototype.getSourceDimension = function(dimIndex) {
    var dimensionsDefine = this.source.dimensionsDefine;
    if (dimensionsDefine) {
      return dimensionsDefine[dimIndex];
    }
  };
  SeriesDataSchema2.prototype.makeStoreSchema = function() {
    var dimCount = this._fullDimCount;
    var willRetrieveDataByName = shouldRetrieveDataByName(this.source);
    var makeHashStrict = !shouldOmitUnusedDimensions(dimCount);
    var dimHash = "";
    var dims = [];
    for (var fullDimIdx = 0, seriesDimIdx = 0; fullDimIdx < dimCount; fullDimIdx++) {
      var property = void 0;
      var type = void 0;
      var ordinalMeta = void 0;
      var seriesDimDef = this.dimensions[seriesDimIdx];
      if (seriesDimDef && seriesDimDef.storeDimIndex === fullDimIdx) {
        property = willRetrieveDataByName ? seriesDimDef.name : null;
        type = seriesDimDef.type;
        ordinalMeta = seriesDimDef.ordinalMeta;
        seriesDimIdx++;
      } else {
        var sourceDimDef = this.getSourceDimension(fullDimIdx);
        if (sourceDimDef) {
          property = willRetrieveDataByName ? sourceDimDef.name : null;
          type = sourceDimDef.type;
        }
      }
      dims.push({
        property,
        type,
        ordinalMeta
      });
      if (willRetrieveDataByName && property != null && (!seriesDimDef || !seriesDimDef.isCalculationCoord)) {
        dimHash += makeHashStrict ? property.replace(/\`/g, "`1").replace(/\$/g, "`2") : property;
      }
      dimHash += "$";
      dimHash += dimTypeShort[type] || "f";
      if (ordinalMeta) {
        dimHash += ordinalMeta.uid;
      }
      dimHash += "$";
    }
    var source = this.source;
    var hash = [source.seriesLayoutBy, source.startIndex, dimHash].join("$$");
    return {
      dimensions: dims,
      hash
    };
  };
  SeriesDataSchema2.prototype.makeOutputDimensionNames = function() {
    var result = [];
    for (var fullDimIdx = 0, seriesDimIdx = 0; fullDimIdx < this._fullDimCount; fullDimIdx++) {
      var name_1 = void 0;
      var seriesDimDef = this.dimensions[seriesDimIdx];
      if (seriesDimDef && seriesDimDef.storeDimIndex === fullDimIdx) {
        if (!seriesDimDef.isCalculationCoord) {
          name_1 = seriesDimDef.name;
        }
        seriesDimIdx++;
      } else {
        var sourceDimDef = this.getSourceDimension(fullDimIdx);
        if (sourceDimDef) {
          name_1 = sourceDimDef.name;
        }
      }
      result.push(name_1);
    }
    return result;
  };
  SeriesDataSchema2.prototype.appendCalculationDimension = function(dimDef) {
    this.dimensions.push(dimDef);
    dimDef.isCalculationCoord = true;
    this._fullDimCount++;
    this._updateDimOmitted(true);
  };
  return SeriesDataSchema2;
}();
function isSeriesDataSchema(schema) {
  return schema instanceof SeriesDataSchema;
}
function createDimNameMap(dimsDef) {
  var dataDimNameMap = createHashMap();
  for (var i = 0; i < (dimsDef || []).length; i++) {
    var dimDefItemRaw = dimsDef[i];
    var userDimName = isObject$2(dimDefItemRaw) ? dimDefItemRaw.name : dimDefItemRaw;
    if (userDimName != null && dataDimNameMap.get(userDimName) == null) {
      dataDimNameMap.set(userDimName, i);
    }
  }
  return dataDimNameMap;
}
function ensureSourceDimNameMap(source) {
  var innerSource = inner$3(source);
  return innerSource.dimNameMap || (innerSource.dimNameMap = createDimNameMap(source.dimensionsDefine));
}
function shouldOmitUnusedDimensions(dimCount) {
  return dimCount > 30;
}
var isObject = isObject$2;
var map = map$1;
var CtorInt32Array = typeof Int32Array === "undefined" ? Array : Int32Array;
var ID_PREFIX = "e\0\0";
var INDEX_NOT_FOUND = -1;
var TRANSFERABLE_PROPERTIES = ["hasItemOption", "_nameList", "_idList", "_invertedIndicesMap", "_dimSummary", "userOutput", "_rawData", "_dimValueGetter", "_nameDimIdx", "_idDimIdx", "_nameRepeatCount"];
var CLONE_PROPERTIES = ["_approximateExtent"];
var prepareInvertedIndex;
var getId;
var getIdNameFromStore;
var normalizeDimensions;
var transferProperties;
var cloneListForMapAndSample;
var makeIdFromName;
var SeriesData = function() {
  function SeriesData2(dimensionsInput, hostModel) {
    this.type = "list";
    this._dimOmitted = false;
    this._nameList = [];
    this._idList = [];
    this._visual = {};
    this._layout = {};
    this._itemVisuals = [];
    this._itemLayouts = [];
    this._graphicEls = [];
    this._approximateExtent = {};
    this._calculationInfo = {};
    this.hasItemOption = false;
    this.TRANSFERABLE_METHODS = ["cloneShallow", "downSample", "lttbDownSample", "map"];
    this.CHANGABLE_METHODS = ["filterSelf", "selectRange"];
    this.DOWNSAMPLE_METHODS = ["downSample", "lttbDownSample"];
    var dimensions;
    var assignStoreDimIdx = false;
    if (isSeriesDataSchema(dimensionsInput)) {
      dimensions = dimensionsInput.dimensions;
      this._dimOmitted = dimensionsInput.isDimensionOmitted();
      this._schema = dimensionsInput;
    } else {
      assignStoreDimIdx = true;
      dimensions = dimensionsInput;
    }
    dimensions = dimensions || ["x", "y"];
    var dimensionInfos = {};
    var dimensionNames = [];
    var invertedIndicesMap = {};
    var needsHasOwn = false;
    var emptyObj = {};
    for (var i = 0; i < dimensions.length; i++) {
      var dimInfoInput = dimensions[i];
      var dimensionInfo = isString(dimInfoInput) ? new SeriesDimensionDefine$1({
        name: dimInfoInput
      }) : !(dimInfoInput instanceof SeriesDimensionDefine$1) ? new SeriesDimensionDefine$1(dimInfoInput) : dimInfoInput;
      var dimensionName = dimensionInfo.name;
      dimensionInfo.type = dimensionInfo.type || "float";
      if (!dimensionInfo.coordDim) {
        dimensionInfo.coordDim = dimensionName;
        dimensionInfo.coordDimIndex = 0;
      }
      var otherDims = dimensionInfo.otherDims = dimensionInfo.otherDims || {};
      dimensionNames.push(dimensionName);
      dimensionInfos[dimensionName] = dimensionInfo;
      if (emptyObj[dimensionName] != null) {
        needsHasOwn = true;
      }
      if (dimensionInfo.createInvertedIndices) {
        invertedIndicesMap[dimensionName] = [];
      }
      if (otherDims.itemName === 0) {
        this._nameDimIdx = i;
      }
      if (otherDims.itemId === 0) {
        this._idDimIdx = i;
      }
      if (assignStoreDimIdx) {
        dimensionInfo.storeDimIndex = i;
      }
    }
    this.dimensions = dimensionNames;
    this._dimInfos = dimensionInfos;
    this._initGetDimensionInfo(needsHasOwn);
    this.hostModel = hostModel;
    this._invertedIndicesMap = invertedIndicesMap;
    if (this._dimOmitted) {
      var dimIdxToName_1 = this._dimIdxToName = createHashMap();
      each$4(dimensionNames, function(dimName) {
        dimIdxToName_1.set(dimensionInfos[dimName].storeDimIndex, dimName);
      });
    }
  }
  SeriesData2.prototype.getDimension = function(dim) {
    var dimIdx = this._recognizeDimIndex(dim);
    if (dimIdx == null) {
      return dim;
    }
    dimIdx = dim;
    if (!this._dimOmitted) {
      return this.dimensions[dimIdx];
    }
    var dimName = this._dimIdxToName.get(dimIdx);
    if (dimName != null) {
      return dimName;
    }
    var sourceDimDef = this._schema.getSourceDimension(dimIdx);
    if (sourceDimDef) {
      return sourceDimDef.name;
    }
  };
  SeriesData2.prototype.getDimensionIndex = function(dim) {
    var dimIdx = this._recognizeDimIndex(dim);
    if (dimIdx != null) {
      return dimIdx;
    }
    if (dim == null) {
      return -1;
    }
    var dimInfo = this._getDimInfo(dim);
    return dimInfo ? dimInfo.storeDimIndex : this._dimOmitted ? this._schema.getSourceDimensionIndex(dim) : -1;
  };
  SeriesData2.prototype._recognizeDimIndex = function(dim) {
    if (isNumber(dim) || dim != null && !isNaN(dim) && !this._getDimInfo(dim) && (!this._dimOmitted || this._schema.getSourceDimensionIndex(dim) < 0)) {
      return +dim;
    }
  };
  SeriesData2.prototype._getStoreDimIndex = function(dim) {
    var dimIdx = this.getDimensionIndex(dim);
    return dimIdx;
  };
  SeriesData2.prototype.getDimensionInfo = function(dim) {
    return this._getDimInfo(this.getDimension(dim));
  };
  SeriesData2.prototype._initGetDimensionInfo = function(needsHasOwn) {
    var dimensionInfos = this._dimInfos;
    this._getDimInfo = needsHasOwn ? function(dimName) {
      return dimensionInfos.hasOwnProperty(dimName) ? dimensionInfos[dimName] : void 0;
    } : function(dimName) {
      return dimensionInfos[dimName];
    };
  };
  SeriesData2.prototype.getDimensionsOnCoord = function() {
    return this._dimSummary.dataDimsOnCoord.slice();
  };
  SeriesData2.prototype.mapDimension = function(coordDim, idx) {
    var dimensionsSummary = this._dimSummary;
    if (idx == null) {
      return dimensionsSummary.encodeFirstDimNotExtra[coordDim];
    }
    var dims = dimensionsSummary.encode[coordDim];
    return dims ? dims[idx] : null;
  };
  SeriesData2.prototype.mapDimensionsAll = function(coordDim) {
    var dimensionsSummary = this._dimSummary;
    var dims = dimensionsSummary.encode[coordDim];
    return (dims || []).slice();
  };
  SeriesData2.prototype.getStore = function() {
    return this._store;
  };
  SeriesData2.prototype.initData = function(data, nameList, dimValueGetter) {
    var _this = this;
    var store;
    if (data instanceof DataStore) {
      store = data;
    }
    if (!store) {
      var dimensions = this.dimensions;
      var provider = isSourceInstance(data) || isArrayLike(data) ? new DefaultDataProvider(data, dimensions.length) : data;
      store = new DataStore();
      var dimensionInfos = map(dimensions, function(dimName) {
        return {
          type: _this._dimInfos[dimName].type,
          property: dimName
        };
      });
      store.initData(provider, dimensionInfos, dimValueGetter);
    }
    this._store = store;
    this._nameList = (nameList || []).slice();
    this._idList = [];
    this._nameRepeatCount = {};
    this._doInit(0, store.count());
    this._dimSummary = summarizeDimensions(this, this._schema);
    this.userOutput = this._dimSummary.userOutput;
  };
  SeriesData2.prototype.appendData = function(data) {
    var range = this._store.appendData(data);
    this._doInit(range[0], range[1]);
  };
  SeriesData2.prototype.appendValues = function(values, names) {
    var _a2 = this._store.appendValues(values, names.length), start2 = _a2.start, end2 = _a2.end;
    var shouldMakeIdFromName = this._shouldMakeIdFromName();
    this._updateOrdinalMeta();
    if (names) {
      for (var idx = start2; idx < end2; idx++) {
        var sourceIdx = idx - start2;
        this._nameList[idx] = names[sourceIdx];
        if (shouldMakeIdFromName) {
          makeIdFromName(this, idx);
        }
      }
    }
  };
  SeriesData2.prototype._updateOrdinalMeta = function() {
    var store = this._store;
    var dimensions = this.dimensions;
    for (var i = 0; i < dimensions.length; i++) {
      var dimInfo = this._dimInfos[dimensions[i]];
      if (dimInfo.ordinalMeta) {
        store.collectOrdinalMeta(dimInfo.storeDimIndex, dimInfo.ordinalMeta);
      }
    }
  };
  SeriesData2.prototype._shouldMakeIdFromName = function() {
    var provider = this._store.getProvider();
    return this._idDimIdx == null && provider.getSource().sourceFormat !== SOURCE_FORMAT_TYPED_ARRAY && !provider.fillStorage;
  };
  SeriesData2.prototype._doInit = function(start2, end2) {
    if (start2 >= end2) {
      return;
    }
    var store = this._store;
    var provider = store.getProvider();
    this._updateOrdinalMeta();
    var nameList = this._nameList;
    var idList = this._idList;
    var sourceFormat = provider.getSource().sourceFormat;
    var isFormatOriginal = sourceFormat === SOURCE_FORMAT_ORIGINAL;
    if (isFormatOriginal && !provider.pure) {
      var sharedDataItem = [];
      for (var idx = start2; idx < end2; idx++) {
        var dataItem = provider.getItem(idx, sharedDataItem);
        if (!this.hasItemOption && isDataItemOption(dataItem)) {
          this.hasItemOption = true;
        }
        if (dataItem) {
          var itemName = dataItem.name;
          if (nameList[idx] == null && itemName != null) {
            nameList[idx] = convertOptionIdName(itemName, null);
          }
          var itemId = dataItem.id;
          if (idList[idx] == null && itemId != null) {
            idList[idx] = convertOptionIdName(itemId, null);
          }
        }
      }
    }
    if (this._shouldMakeIdFromName()) {
      for (var idx = start2; idx < end2; idx++) {
        makeIdFromName(this, idx);
      }
    }
    prepareInvertedIndex(this);
  };
  SeriesData2.prototype.getApproximateExtent = function(dim) {
    return this._approximateExtent[dim] || this._store.getDataExtent(this._getStoreDimIndex(dim));
  };
  SeriesData2.prototype.setApproximateExtent = function(extent3, dim) {
    dim = this.getDimension(dim);
    this._approximateExtent[dim] = extent3.slice();
  };
  SeriesData2.prototype.getCalculationInfo = function(key) {
    return this._calculationInfo[key];
  };
  SeriesData2.prototype.setCalculationInfo = function(key, value) {
    isObject(key) ? extend(this._calculationInfo, key) : this._calculationInfo[key] = value;
  };
  SeriesData2.prototype.getName = function(idx) {
    var rawIndex = this.getRawIndex(idx);
    var name = this._nameList[rawIndex];
    if (name == null && this._nameDimIdx != null) {
      name = getIdNameFromStore(this, this._nameDimIdx, rawIndex);
    }
    if (name == null) {
      name = "";
    }
    return name;
  };
  SeriesData2.prototype._getCategory = function(dimIdx, idx) {
    var ordinal = this._store.get(dimIdx, idx);
    var ordinalMeta = this._store.getOrdinalMeta(dimIdx);
    if (ordinalMeta) {
      return ordinalMeta.categories[ordinal];
    }
    return ordinal;
  };
  SeriesData2.prototype.getId = function(idx) {
    return getId(this, this.getRawIndex(idx));
  };
  SeriesData2.prototype.count = function() {
    return this._store.count();
  };
  SeriesData2.prototype.get = function(dim, idx) {
    var store = this._store;
    var dimInfo = this._dimInfos[dim];
    if (dimInfo) {
      return store.get(dimInfo.storeDimIndex, idx);
    }
  };
  SeriesData2.prototype.getByRawIndex = function(dim, rawIdx) {
    var store = this._store;
    var dimInfo = this._dimInfos[dim];
    if (dimInfo) {
      return store.getByRawIndex(dimInfo.storeDimIndex, rawIdx);
    }
  };
  SeriesData2.prototype.getIndices = function() {
    return this._store.getIndices();
  };
  SeriesData2.prototype.getDataExtent = function(dim) {
    return this._store.getDataExtent(this._getStoreDimIndex(dim));
  };
  SeriesData2.prototype.getSum = function(dim) {
    return this._store.getSum(this._getStoreDimIndex(dim));
  };
  SeriesData2.prototype.getMedian = function(dim) {
    return this._store.getMedian(this._getStoreDimIndex(dim));
  };
  SeriesData2.prototype.getValues = function(dimensions, idx) {
    var _this = this;
    var store = this._store;
    return isArray(dimensions) ? store.getValues(map(dimensions, function(dim) {
      return _this._getStoreDimIndex(dim);
    }), idx) : store.getValues(dimensions);
  };
  SeriesData2.prototype.hasValue = function(idx) {
    var dataDimIndicesOnCoord = this._dimSummary.dataDimIndicesOnCoord;
    for (var i = 0, len2 = dataDimIndicesOnCoord.length; i < len2; i++) {
      if (isNaN(this._store.get(dataDimIndicesOnCoord[i], idx))) {
        return false;
      }
    }
    return true;
  };
  SeriesData2.prototype.indexOfName = function(name) {
    for (var i = 0, len2 = this._store.count(); i < len2; i++) {
      if (this.getName(i) === name) {
        return i;
      }
    }
    return -1;
  };
  SeriesData2.prototype.getRawIndex = function(idx) {
    return this._store.getRawIndex(idx);
  };
  SeriesData2.prototype.indexOfRawIndex = function(rawIndex) {
    return this._store.indexOfRawIndex(rawIndex);
  };
  SeriesData2.prototype.rawIndexOf = function(dim, value) {
    var invertedIndices = dim && this._invertedIndicesMap[dim];
    var rawIndex = invertedIndices[value];
    if (rawIndex == null || isNaN(rawIndex)) {
      return INDEX_NOT_FOUND;
    }
    return rawIndex;
  };
  SeriesData2.prototype.indicesOfNearest = function(dim, value, maxDistance) {
    return this._store.indicesOfNearest(this._getStoreDimIndex(dim), value, maxDistance);
  };
  SeriesData2.prototype.each = function(dims, cb, ctx) {
    if (isFunction(dims)) {
      ctx = cb;
      cb = dims;
      dims = [];
    }
    var fCtx = ctx || this;
    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);
    this._store.each(dimIndices, fCtx ? bind$1(cb, fCtx) : cb);
  };
  SeriesData2.prototype.filterSelf = function(dims, cb, ctx) {
    if (isFunction(dims)) {
      ctx = cb;
      cb = dims;
      dims = [];
    }
    var fCtx = ctx || this;
    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);
    this._store = this._store.filter(dimIndices, fCtx ? bind$1(cb, fCtx) : cb);
    return this;
  };
  SeriesData2.prototype.selectRange = function(range) {
    var _this = this;
    var innerRange = {};
    var dims = keys(range);
    each$4(dims, function(dim) {
      var dimIdx = _this._getStoreDimIndex(dim);
      innerRange[dimIdx] = range[dim];
    });
    this._store = this._store.selectRange(innerRange);
    return this;
  };
  SeriesData2.prototype.mapArray = function(dims, cb, ctx) {
    if (isFunction(dims)) {
      ctx = cb;
      cb = dims;
      dims = [];
    }
    ctx = ctx || this;
    var result = [];
    this.each(dims, function() {
      result.push(cb && cb.apply(this, arguments));
    }, ctx);
    return result;
  };
  SeriesData2.prototype.map = function(dims, cb, ctx, ctxCompat) {
    var fCtx = ctx || ctxCompat || this;
    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);
    var list = cloneListForMapAndSample(this);
    list._store = this._store.map(dimIndices, fCtx ? bind$1(cb, fCtx) : cb);
    return list;
  };
  SeriesData2.prototype.modify = function(dims, cb, ctx, ctxCompat) {
    var fCtx = ctx || ctxCompat || this;
    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);
    this._store.modify(dimIndices, fCtx ? bind$1(cb, fCtx) : cb);
  };
  SeriesData2.prototype.downSample = function(dimension, rate, sampleValue, sampleIndex) {
    var list = cloneListForMapAndSample(this);
    list._store = this._store.downSample(this._getStoreDimIndex(dimension), rate, sampleValue, sampleIndex);
    return list;
  };
  SeriesData2.prototype.lttbDownSample = function(valueDimension, rate) {
    var list = cloneListForMapAndSample(this);
    list._store = this._store.lttbDownSample(this._getStoreDimIndex(valueDimension), rate);
    return list;
  };
  SeriesData2.prototype.getRawDataItem = function(idx) {
    return this._store.getRawDataItem(idx);
  };
  SeriesData2.prototype.getItemModel = function(idx) {
    var hostModel = this.hostModel;
    var dataItem = this.getRawDataItem(idx);
    return new Model$1(dataItem, hostModel, hostModel && hostModel.ecModel);
  };
  SeriesData2.prototype.diff = function(otherList) {
    var thisList = this;
    return new DataDiffer$1(otherList ? otherList.getStore().getIndices() : [], this.getStore().getIndices(), function(idx) {
      return getId(otherList, idx);
    }, function(idx) {
      return getId(thisList, idx);
    });
  };
  SeriesData2.prototype.getVisual = function(key) {
    var visual = this._visual;
    return visual && visual[key];
  };
  SeriesData2.prototype.setVisual = function(kvObj, val) {
    this._visual = this._visual || {};
    if (isObject(kvObj)) {
      extend(this._visual, kvObj);
    } else {
      this._visual[kvObj] = val;
    }
  };
  SeriesData2.prototype.getItemVisual = function(idx, key) {
    var itemVisual = this._itemVisuals[idx];
    var val = itemVisual && itemVisual[key];
    if (val == null) {
      return this.getVisual(key);
    }
    return val;
  };
  SeriesData2.prototype.hasItemVisual = function() {
    return this._itemVisuals.length > 0;
  };
  SeriesData2.prototype.ensureUniqueItemVisual = function(idx, key) {
    var itemVisuals = this._itemVisuals;
    var itemVisual = itemVisuals[idx];
    if (!itemVisual) {
      itemVisual = itemVisuals[idx] = {};
    }
    var val = itemVisual[key];
    if (val == null) {
      val = this.getVisual(key);
      if (isArray(val)) {
        val = val.slice();
      } else if (isObject(val)) {
        val = extend({}, val);
      }
      itemVisual[key] = val;
    }
    return val;
  };
  SeriesData2.prototype.setItemVisual = function(idx, key, value) {
    var itemVisual = this._itemVisuals[idx] || {};
    this._itemVisuals[idx] = itemVisual;
    if (isObject(key)) {
      extend(itemVisual, key);
    } else {
      itemVisual[key] = value;
    }
  };
  SeriesData2.prototype.clearAllVisual = function() {
    this._visual = {};
    this._itemVisuals = [];
  };
  SeriesData2.prototype.setLayout = function(key, val) {
    isObject(key) ? extend(this._layout, key) : this._layout[key] = val;
  };
  SeriesData2.prototype.getLayout = function(key) {
    return this._layout[key];
  };
  SeriesData2.prototype.getItemLayout = function(idx) {
    return this._itemLayouts[idx];
  };
  SeriesData2.prototype.setItemLayout = function(idx, layout2, merge2) {
    this._itemLayouts[idx] = merge2 ? extend(this._itemLayouts[idx] || {}, layout2) : layout2;
  };
  SeriesData2.prototype.clearItemLayouts = function() {
    this._itemLayouts.length = 0;
  };
  SeriesData2.prototype.setItemGraphicEl = function(idx, el) {
    var seriesIndex = this.hostModel && this.hostModel.seriesIndex;
    setCommonECData(seriesIndex, this.dataType, idx, el);
    this._graphicEls[idx] = el;
  };
  SeriesData2.prototype.getItemGraphicEl = function(idx) {
    return this._graphicEls[idx];
  };
  SeriesData2.prototype.eachItemGraphicEl = function(cb, context) {
    each$4(this._graphicEls, function(el, idx) {
      if (el) {
        cb && cb.call(context, el, idx);
      }
    });
  };
  SeriesData2.prototype.cloneShallow = function(list) {
    if (!list) {
      list = new SeriesData2(this._schema ? this._schema : map(this.dimensions, this._getDimInfo, this), this.hostModel);
    }
    transferProperties(list, this);
    list._store = this._store;
    return list;
  };
  SeriesData2.prototype.wrapMethod = function(methodName, injectFunction) {
    var originalMethod = this[methodName];
    if (!isFunction(originalMethod)) {
      return;
    }
    this.__wrappedMethods = this.__wrappedMethods || [];
    this.__wrappedMethods.push(methodName);
    this[methodName] = function() {
      var res = originalMethod.apply(this, arguments);
      return injectFunction.apply(this, [res].concat(slice(arguments)));
    };
  };
  SeriesData2.internalField = function() {
    prepareInvertedIndex = function(data) {
      var invertedIndicesMap = data._invertedIndicesMap;
      each$4(invertedIndicesMap, function(invertedIndices, dim) {
        var dimInfo = data._dimInfos[dim];
        var ordinalMeta = dimInfo.ordinalMeta;
        var store = data._store;
        if (ordinalMeta) {
          invertedIndices = invertedIndicesMap[dim] = new CtorInt32Array(ordinalMeta.categories.length);
          for (var i = 0; i < invertedIndices.length; i++) {
            invertedIndices[i] = INDEX_NOT_FOUND;
          }
          for (var i = 0; i < store.count(); i++) {
            invertedIndices[store.get(dimInfo.storeDimIndex, i)] = i;
          }
        }
      });
    };
    getIdNameFromStore = function(data, dimIdx, idx) {
      return convertOptionIdName(data._getCategory(dimIdx, idx), null);
    };
    getId = function(data, rawIndex) {
      var id = data._idList[rawIndex];
      if (id == null && data._idDimIdx != null) {
        id = getIdNameFromStore(data, data._idDimIdx, rawIndex);
      }
      if (id == null) {
        id = ID_PREFIX + rawIndex;
      }
      return id;
    };
    normalizeDimensions = function(dimensions) {
      if (!isArray(dimensions)) {
        dimensions = dimensions != null ? [dimensions] : [];
      }
      return dimensions;
    };
    cloneListForMapAndSample = function(original) {
      var list = new SeriesData2(original._schema ? original._schema : map(original.dimensions, original._getDimInfo, original), original.hostModel);
      transferProperties(list, original);
      return list;
    };
    transferProperties = function(target, source) {
      each$4(TRANSFERABLE_PROPERTIES.concat(source.__wrappedMethods || []), function(propName) {
        if (source.hasOwnProperty(propName)) {
          target[propName] = source[propName];
        }
      });
      target.__wrappedMethods = source.__wrappedMethods;
      each$4(CLONE_PROPERTIES, function(propName) {
        target[propName] = clone$2(source[propName]);
      });
      target._calculationInfo = extend({}, source._calculationInfo);
    };
    makeIdFromName = function(data, idx) {
      var nameList = data._nameList;
      var idList = data._idList;
      var nameDimIdx = data._nameDimIdx;
      var idDimIdx = data._idDimIdx;
      var name = nameList[idx];
      var id = idList[idx];
      if (name == null && nameDimIdx != null) {
        nameList[idx] = name = getIdNameFromStore(data, nameDimIdx, idx);
      }
      if (id == null && idDimIdx != null) {
        idList[idx] = id = getIdNameFromStore(data, idDimIdx, idx);
      }
      if (id == null && name != null) {
        var nameRepeatCount = data._nameRepeatCount;
        var nmCnt = nameRepeatCount[name] = (nameRepeatCount[name] || 0) + 1;
        id = name;
        if (nmCnt > 1) {
          id += "__ec__" + nmCnt;
        }
        idList[idx] = id;
      }
    };
  }();
  return SeriesData2;
}();
var SeriesData$1 = SeriesData;
function prepareSeriesDataSchema(source, opt) {
  if (!isSourceInstance(source)) {
    source = createSourceFromSeriesDataOption(source);
  }
  opt = opt || {};
  var sysDims = opt.coordDimensions || [];
  var dimsDef = opt.dimensionsDefine || source.dimensionsDefine || [];
  var coordDimNameMap = createHashMap();
  var resultList = [];
  var dimCount = getDimCount(source, sysDims, dimsDef, opt.dimensionsCount);
  var omitUnusedDimensions = opt.canOmitUnusedDimensions && shouldOmitUnusedDimensions(dimCount);
  var isUsingSourceDimensionsDef = dimsDef === source.dimensionsDefine;
  var dataDimNameMap = isUsingSourceDimensionsDef ? ensureSourceDimNameMap(source) : createDimNameMap(dimsDef);
  var encodeDef = opt.encodeDefine;
  if (!encodeDef && opt.encodeDefaulter) {
    encodeDef = opt.encodeDefaulter(source, dimCount);
  }
  var encodeDefMap = createHashMap(encodeDef);
  var indicesMap = new CtorInt32Array$1(dimCount);
  for (var i = 0; i < indicesMap.length; i++) {
    indicesMap[i] = -1;
  }
  function getResultItem(dimIdx) {
    var idx = indicesMap[dimIdx];
    if (idx < 0) {
      var dimDefItemRaw = dimsDef[dimIdx];
      var dimDefItem = isObject$2(dimDefItemRaw) ? dimDefItemRaw : {
        name: dimDefItemRaw
      };
      var resultItem2 = new SeriesDimensionDefine$1();
      var userDimName = dimDefItem.name;
      if (userDimName != null && dataDimNameMap.get(userDimName) != null) {
        resultItem2.name = resultItem2.displayName = userDimName;
      }
      dimDefItem.type != null && (resultItem2.type = dimDefItem.type);
      dimDefItem.displayName != null && (resultItem2.displayName = dimDefItem.displayName);
      var newIdx = resultList.length;
      indicesMap[dimIdx] = newIdx;
      resultItem2.storeDimIndex = dimIdx;
      resultList.push(resultItem2);
      return resultItem2;
    }
    return resultList[idx];
  }
  if (!omitUnusedDimensions) {
    for (var i = 0; i < dimCount; i++) {
      getResultItem(i);
    }
  }
  encodeDefMap.each(function(dataDimsRaw, coordDim2) {
    var dataDims = normalizeToArray(dataDimsRaw).slice();
    if (dataDims.length === 1 && !isString(dataDims[0]) && dataDims[0] < 0) {
      encodeDefMap.set(coordDim2, false);
      return;
    }
    var validDataDims = encodeDefMap.set(coordDim2, []);
    each$4(dataDims, function(resultDimIdxOrName, idx) {
      var resultDimIdx2 = isString(resultDimIdxOrName) ? dataDimNameMap.get(resultDimIdxOrName) : resultDimIdxOrName;
      if (resultDimIdx2 != null && resultDimIdx2 < dimCount) {
        validDataDims[idx] = resultDimIdx2;
        applyDim(getResultItem(resultDimIdx2), coordDim2, idx);
      }
    });
  });
  var availDimIdx = 0;
  each$4(sysDims, function(sysDimItemRaw) {
    var coordDim2;
    var sysDimItemDimsDef;
    var sysDimItemOtherDims;
    var sysDimItem;
    if (isString(sysDimItemRaw)) {
      coordDim2 = sysDimItemRaw;
      sysDimItem = {};
    } else {
      sysDimItem = sysDimItemRaw;
      coordDim2 = sysDimItem.name;
      var ordinalMeta = sysDimItem.ordinalMeta;
      sysDimItem.ordinalMeta = null;
      sysDimItem = extend({}, sysDimItem);
      sysDimItem.ordinalMeta = ordinalMeta;
      sysDimItemDimsDef = sysDimItem.dimsDef;
      sysDimItemOtherDims = sysDimItem.otherDims;
      sysDimItem.name = sysDimItem.coordDim = sysDimItem.coordDimIndex = sysDimItem.dimsDef = sysDimItem.otherDims = null;
    }
    var dataDims = encodeDefMap.get(coordDim2);
    if (dataDims === false) {
      return;
    }
    dataDims = normalizeToArray(dataDims);
    if (!dataDims.length) {
      for (var i2 = 0; i2 < (sysDimItemDimsDef && sysDimItemDimsDef.length || 1); i2++) {
        while (availDimIdx < dimCount && getResultItem(availDimIdx).coordDim != null) {
          availDimIdx++;
        }
        availDimIdx < dimCount && dataDims.push(availDimIdx++);
      }
    }
    each$4(dataDims, function(resultDimIdx2, coordDimIndex) {
      var resultItem2 = getResultItem(resultDimIdx2);
      if (isUsingSourceDimensionsDef && sysDimItem.type != null) {
        resultItem2.type = sysDimItem.type;
      }
      applyDim(defaults(resultItem2, sysDimItem), coordDim2, coordDimIndex);
      if (resultItem2.name == null && sysDimItemDimsDef) {
        var sysDimItemDimsDefItem = sysDimItemDimsDef[coordDimIndex];
        !isObject$2(sysDimItemDimsDefItem) && (sysDimItemDimsDefItem = {
          name: sysDimItemDimsDefItem
        });
        resultItem2.name = resultItem2.displayName = sysDimItemDimsDefItem.name;
        resultItem2.defaultTooltip = sysDimItemDimsDefItem.defaultTooltip;
      }
      sysDimItemOtherDims && defaults(resultItem2.otherDims, sysDimItemOtherDims);
    });
  });
  function applyDim(resultItem2, coordDim2, coordDimIndex) {
    if (VISUAL_DIMENSIONS.get(coordDim2) != null) {
      resultItem2.otherDims[coordDim2] = coordDimIndex;
    } else {
      resultItem2.coordDim = coordDim2;
      resultItem2.coordDimIndex = coordDimIndex;
      coordDimNameMap.set(coordDim2, true);
    }
  }
  var generateCoord = opt.generateCoord;
  var generateCoordCount = opt.generateCoordCount;
  var fromZero = generateCoordCount != null;
  generateCoordCount = generateCoord ? generateCoordCount || 1 : 0;
  var extra = generateCoord || "value";
  function ifNoNameFillWithCoordName(resultItem2) {
    if (resultItem2.name == null) {
      resultItem2.name = resultItem2.coordDim;
    }
  }
  if (!omitUnusedDimensions) {
    for (var resultDimIdx = 0; resultDimIdx < dimCount; resultDimIdx++) {
      var resultItem = getResultItem(resultDimIdx);
      var coordDim = resultItem.coordDim;
      if (coordDim == null) {
        resultItem.coordDim = genCoordDimName(extra, coordDimNameMap, fromZero);
        resultItem.coordDimIndex = 0;
        if (!generateCoord || generateCoordCount <= 0) {
          resultItem.isExtraCoord = true;
        }
        generateCoordCount--;
      }
      ifNoNameFillWithCoordName(resultItem);
      if (resultItem.type == null && (guessOrdinal(source, resultDimIdx) === BE_ORDINAL.Must || resultItem.isExtraCoord && (resultItem.otherDims.itemName != null || resultItem.otherDims.seriesName != null))) {
        resultItem.type = "ordinal";
      }
    }
  } else {
    each$4(resultList, function(resultItem2) {
      ifNoNameFillWithCoordName(resultItem2);
    });
    resultList.sort(function(item0, item1) {
      return item0.storeDimIndex - item1.storeDimIndex;
    });
  }
  removeDuplication(resultList);
  return new SeriesDataSchema({
    source,
    dimensions: resultList,
    fullDimensionCount: dimCount,
    dimensionOmitted: omitUnusedDimensions
  });
}
function removeDuplication(result) {
  var duplicationMap = createHashMap();
  for (var i = 0; i < result.length; i++) {
    var dim = result[i];
    var dimOriginalName = dim.name;
    var count = duplicationMap.get(dimOriginalName) || 0;
    if (count > 0) {
      dim.name = dimOriginalName + (count - 1);
    }
    count++;
    duplicationMap.set(dimOriginalName, count);
  }
}
function getDimCount(source, sysDims, dimsDef, optDimCount) {
  var dimCount = Math.max(source.dimensionsDetectedCount || 1, sysDims.length, dimsDef.length, optDimCount || 0);
  each$4(sysDims, function(sysDimItem) {
    var sysDimItemDimsDef;
    if (isObject$2(sysDimItem) && (sysDimItemDimsDef = sysDimItem.dimsDef)) {
      dimCount = Math.max(dimCount, sysDimItemDimsDef.length);
    }
  });
  return dimCount;
}
function genCoordDimName(name, map2, fromZero) {
  if (fromZero || map2.hasKey(name)) {
    var i = 0;
    while (map2.hasKey(name + i)) {
      i++;
    }
    name += i;
  }
  map2.set(name, true);
  return name;
}
function getAxisRawValue(axis, tick) {
  return axis.type === "category" ? axis.scale.getLabel(tick) : tick.value;
}
function getOptionCategoryInterval(model) {
  var interval = model.get("interval");
  return interval == null ? "auto" : interval;
}
function shouldShowAllLabels(axis) {
  return axis.type === "category" && getOptionCategoryInterval(axis.getLabelModel()) === 0;
}
var extensions = [];
var extensionRegisters = {
  registerPreprocessor,
  registerProcessor,
  registerPostInit,
  registerPostUpdate,
  registerUpdateLifecycle,
  registerAction,
  registerCoordinateSystem,
  registerLayout,
  registerVisual,
  registerTransform,
  registerLoading,
  registerMap,
  registerImpl,
  PRIORITY,
  ComponentModel: ComponentModel$1,
  ComponentView: ComponentView$1,
  SeriesModel: SeriesModel$1,
  ChartView: ChartView$1,
  registerComponentModel: function(ComponentModelClass) {
    ComponentModel$1.registerClass(ComponentModelClass);
  },
  registerComponentView: function(ComponentViewClass) {
    ComponentView$1.registerClass(ComponentViewClass);
  },
  registerSeriesModel: function(SeriesModelClass) {
    SeriesModel$1.registerClass(SeriesModelClass);
  },
  registerChartView: function(ChartViewClass) {
    ChartView$1.registerClass(ChartViewClass);
  },
  registerSubTypeDefaulter: function(componentType, defaulter) {
    ComponentModel$1.registerSubTypeDefaulter(componentType, defaulter);
  },
  registerPainter: function(painterType, PainterCtor) {
    registerPainter(painterType, PainterCtor);
  }
};
function use(ext) {
  if (isArray(ext)) {
    each$4(ext, function(singleExt) {
      use(singleExt);
    });
    return;
  }
  if (indexOf(extensions, ext) >= 0) {
    return;
  }
  extensions.push(ext);
  if (isFunction(ext)) {
    ext = {
      install: ext
    };
  }
  ext.install(extensionRegisters);
}
PathProxy$1.CMD;
function projectPointToLine(x1, y1, x2, y2, x3, y3, out2, limitToEnds) {
  var dx = x3 - x1;
  var dy = y3 - y1;
  var dx1 = x2 - x1;
  var dy1 = y2 - y1;
  var lineLen = Math.sqrt(dx1 * dx1 + dy1 * dy1);
  dx1 /= lineLen;
  dy1 /= lineLen;
  var projectedLen = dx * dx1 + dy * dy1;
  var t = projectedLen / lineLen;
  if (limitToEnds) {
    t = Math.min(Math.max(t, 0), 1);
  }
  t *= lineLen;
  var ox = out2[0] = x1 + t * dx1;
  var oy = out2[1] = y1 + t * dy1;
  return Math.sqrt((ox - x3) * (ox - x3) + (oy - y3) * (oy - y3));
}
var pt0 = new Point$1();
var pt1 = new Point$1();
var pt2 = new Point$1();
var dir = new Point$1();
var dir2 = new Point$1();
var tmpArr = [];
var tmpProjPoint = new Point$1();
function limitTurnAngle(linePoints, minTurnAngle) {
  if (!(minTurnAngle <= 180 && minTurnAngle > 0)) {
    return;
  }
  minTurnAngle = minTurnAngle / 180 * Math.PI;
  pt0.fromArray(linePoints[0]);
  pt1.fromArray(linePoints[1]);
  pt2.fromArray(linePoints[2]);
  Point$1.sub(dir, pt0, pt1);
  Point$1.sub(dir2, pt2, pt1);
  var len1 = dir.len();
  var len2 = dir2.len();
  if (len1 < 1e-3 || len2 < 1e-3) {
    return;
  }
  dir.scale(1 / len1);
  dir2.scale(1 / len2);
  var angleCos = dir.dot(dir2);
  var minTurnAngleCos = Math.cos(minTurnAngle);
  if (minTurnAngleCos < angleCos) {
    var d = projectPointToLine(pt1.x, pt1.y, pt2.x, pt2.y, pt0.x, pt0.y, tmpArr, false);
    tmpProjPoint.fromArray(tmpArr);
    tmpProjPoint.scaleAndAdd(dir2, d / Math.tan(Math.PI - minTurnAngle));
    var t = pt2.x !== pt1.x ? (tmpProjPoint.x - pt1.x) / (pt2.x - pt1.x) : (tmpProjPoint.y - pt1.y) / (pt2.y - pt1.y);
    if (isNaN(t)) {
      return;
    }
    if (t < 0) {
      Point$1.copy(tmpProjPoint, pt1);
    } else if (t > 1) {
      Point$1.copy(tmpProjPoint, pt2);
    }
    tmpProjPoint.toArray(linePoints[1]);
  }
}
function limitSurfaceAngle(linePoints, surfaceNormal, maxSurfaceAngle) {
  if (!(maxSurfaceAngle <= 180 && maxSurfaceAngle > 0)) {
    return;
  }
  maxSurfaceAngle = maxSurfaceAngle / 180 * Math.PI;
  pt0.fromArray(linePoints[0]);
  pt1.fromArray(linePoints[1]);
  pt2.fromArray(linePoints[2]);
  Point$1.sub(dir, pt1, pt0);
  Point$1.sub(dir2, pt2, pt1);
  var len1 = dir.len();
  var len2 = dir2.len();
  if (len1 < 1e-3 || len2 < 1e-3) {
    return;
  }
  dir.scale(1 / len1);
  dir2.scale(1 / len2);
  var angleCos = dir.dot(surfaceNormal);
  var maxSurfaceAngleCos = Math.cos(maxSurfaceAngle);
  if (angleCos < maxSurfaceAngleCos) {
    var d = projectPointToLine(pt1.x, pt1.y, pt2.x, pt2.y, pt0.x, pt0.y, tmpArr, false);
    tmpProjPoint.fromArray(tmpArr);
    var HALF_PI = Math.PI / 2;
    var angle2 = Math.acos(dir2.dot(surfaceNormal));
    var newAngle = HALF_PI + angle2 - maxSurfaceAngle;
    if (newAngle >= HALF_PI) {
      Point$1.copy(tmpProjPoint, pt2);
    } else {
      tmpProjPoint.scaleAndAdd(dir2, d / Math.tan(Math.PI / 2 - newAngle));
      var t = pt2.x !== pt1.x ? (tmpProjPoint.x - pt1.x) / (pt2.x - pt1.x) : (tmpProjPoint.y - pt1.y) / (pt2.y - pt1.y);
      if (isNaN(t)) {
        return;
      }
      if (t < 0) {
        Point$1.copy(tmpProjPoint, pt1);
      } else if (t > 1) {
        Point$1.copy(tmpProjPoint, pt2);
      }
    }
    tmpProjPoint.toArray(linePoints[1]);
  }
}
function setLabelLineState(labelLine, ignore, stateName, stateModel) {
  var isNormal = stateName === "normal";
  var stateObj = isNormal ? labelLine : labelLine.ensureState(stateName);
  stateObj.ignore = ignore;
  var smooth = stateModel.get("smooth");
  if (smooth && smooth === true) {
    smooth = 0.3;
  }
  stateObj.shape = stateObj.shape || {};
  if (smooth > 0) {
    stateObj.shape.smooth = smooth;
  }
  var styleObj = stateModel.getModel("lineStyle").getLineStyle();
  isNormal ? labelLine.useStyle(styleObj) : stateObj.style = styleObj;
}
function buildLabelLinePath(path, shape) {
  var smooth = shape.smooth;
  var points2 = shape.points;
  if (!points2) {
    return;
  }
  path.moveTo(points2[0][0], points2[0][1]);
  if (smooth > 0 && points2.length >= 3) {
    var len1 = dist$1(points2[0], points2[1]);
    var len2 = dist$1(points2[1], points2[2]);
    if (!len1 || !len2) {
      path.lineTo(points2[1][0], points2[1][1]);
      path.lineTo(points2[2][0], points2[2][1]);
      return;
    }
    var moveLen = Math.min(len1, len2) * smooth;
    var midPoint0 = lerp([], points2[1], points2[0], moveLen / len1);
    var midPoint2 = lerp([], points2[1], points2[2], moveLen / len2);
    var midPoint1 = lerp([], midPoint0, midPoint2, 0.5);
    path.bezierCurveTo(midPoint0[0], midPoint0[1], midPoint0[0], midPoint0[1], midPoint1[0], midPoint1[1]);
    path.bezierCurveTo(midPoint2[0], midPoint2[1], midPoint2[0], midPoint2[1], points2[2][0], points2[2][1]);
  } else {
    for (var i = 1; i < points2.length; i++) {
      path.lineTo(points2[i][0], points2[i][1]);
    }
  }
}
function setLabelLineStyle(targetEl, statesModels, defaultStyle) {
  var labelLine = targetEl.getTextGuideLine();
  var label = targetEl.getTextContent();
  if (!label) {
    if (labelLine) {
      targetEl.removeTextGuideLine();
    }
    return;
  }
  var normalModel = statesModels.normal;
  var showNormal = normalModel.get("show");
  var labelIgnoreNormal = label.ignore;
  for (var i = 0; i < DISPLAY_STATES.length; i++) {
    var stateName = DISPLAY_STATES[i];
    var stateModel = statesModels[stateName];
    var isNormal = stateName === "normal";
    if (stateModel) {
      var stateShow = stateModel.get("show");
      var isLabelIgnored = isNormal ? labelIgnoreNormal : retrieve2(label.states[stateName] && label.states[stateName].ignore, labelIgnoreNormal);
      if (isLabelIgnored || !retrieve2(stateShow, showNormal)) {
        var stateObj = isNormal ? labelLine : labelLine && labelLine.states[stateName];
        if (stateObj) {
          stateObj.ignore = true;
        }
        continue;
      }
      if (!labelLine) {
        labelLine = new Polyline$1();
        targetEl.setTextGuideLine(labelLine);
        if (!isNormal && (labelIgnoreNormal || !showNormal)) {
          setLabelLineState(labelLine, true, "normal", statesModels.normal);
        }
        if (targetEl.stateProxy) {
          labelLine.stateProxy = targetEl.stateProxy;
        }
      }
      setLabelLineState(labelLine, false, stateName, stateModel);
    }
  }
  if (labelLine) {
    defaults(labelLine.style, defaultStyle);
    labelLine.style.fill = null;
    var showAbove = normalModel.get("showAbove");
    var labelLineConfig = targetEl.textGuideLineConfig = targetEl.textGuideLineConfig || {};
    labelLineConfig.showAbove = showAbove || false;
    labelLine.buildPath = buildLabelLinePath;
  }
}
function getLabelLineStatesModels(itemModel, labelLineName) {
  labelLineName = labelLineName || "labelLine";
  var statesModels = {
    normal: itemModel.getModel(labelLineName)
  };
  for (var i = 0; i < SPECIAL_STATES.length; i++) {
    var stateName = SPECIAL_STATES[i];
    statesModels[stateName] = itemModel.getModel([stateName, labelLineName]);
  }
  return statesModels;
}
function prepareLayoutList(input) {
  var list = [];
  for (var i = 0; i < input.length; i++) {
    var rawItem = input[i];
    if (rawItem.defaultAttr.ignore) {
      continue;
    }
    var label = rawItem.label;
    var transform = label.getComputedTransform();
    var localRect = label.getBoundingRect();
    var isAxisAligned = !transform || transform[1] < 1e-5 && transform[2] < 1e-5;
    var minMargin = label.style.margin || 0;
    var globalRect = localRect.clone();
    globalRect.applyTransform(transform);
    globalRect.x -= minMargin / 2;
    globalRect.y -= minMargin / 2;
    globalRect.width += minMargin;
    globalRect.height += minMargin;
    var obb = isAxisAligned ? new OrientedBoundingRect$1(localRect, transform) : null;
    list.push({
      label,
      labelLine: rawItem.labelLine,
      rect: globalRect,
      localRect,
      obb,
      priority: rawItem.priority,
      defaultAttr: rawItem.defaultAttr,
      layoutOption: rawItem.computedLayoutOption,
      axisAligned: isAxisAligned,
      transform
    });
  }
  return list;
}
function shiftLayout(list, xyDim, sizeDim, minBound, maxBound, balanceShift) {
  var len2 = list.length;
  if (len2 < 2) {
    return;
  }
  list.sort(function(a, b2) {
    return a.rect[xyDim] - b2.rect[xyDim];
  });
  var lastPos = 0;
  var delta;
  var adjusted = false;
  var totalShifts = 0;
  for (var i = 0; i < len2; i++) {
    var item = list[i];
    var rect = item.rect;
    delta = rect[xyDim] - lastPos;
    if (delta < 0) {
      rect[xyDim] -= delta;
      item.label[xyDim] -= delta;
      adjusted = true;
    }
    var shift = Math.max(-delta, 0);
    totalShifts += shift;
    lastPos = rect[xyDim] + rect[sizeDim];
  }
  if (totalShifts > 0 && balanceShift) {
    shiftList(-totalShifts / len2, 0, len2);
  }
  var first = list[0];
  var last = list[len2 - 1];
  var minGap;
  var maxGap;
  updateMinMaxGap();
  minGap < 0 && squeezeGaps(-minGap, 0.8);
  maxGap < 0 && squeezeGaps(maxGap, 0.8);
  updateMinMaxGap();
  takeBoundsGap(minGap, maxGap, 1);
  takeBoundsGap(maxGap, minGap, -1);
  updateMinMaxGap();
  if (minGap < 0) {
    squeezeWhenBailout(-minGap);
  }
  if (maxGap < 0) {
    squeezeWhenBailout(maxGap);
  }
  function updateMinMaxGap() {
    minGap = first.rect[xyDim] - minBound;
    maxGap = maxBound - last.rect[xyDim] - last.rect[sizeDim];
  }
  function takeBoundsGap(gapThisBound, gapOtherBound, moveDir) {
    if (gapThisBound < 0) {
      var moveFromMaxGap = Math.min(gapOtherBound, -gapThisBound);
      if (moveFromMaxGap > 0) {
        shiftList(moveFromMaxGap * moveDir, 0, len2);
        var remained = moveFromMaxGap + gapThisBound;
        if (remained < 0) {
          squeezeGaps(-remained * moveDir, 1);
        }
      } else {
        squeezeGaps(-gapThisBound * moveDir, 1);
      }
    }
  }
  function shiftList(delta2, start2, end2) {
    if (delta2 !== 0) {
      adjusted = true;
    }
    for (var i2 = start2; i2 < end2; i2++) {
      var item2 = list[i2];
      var rect2 = item2.rect;
      rect2[xyDim] += delta2;
      item2.label[xyDim] += delta2;
    }
  }
  function squeezeGaps(delta2, maxSqeezePercent) {
    var gaps = [];
    var totalGaps = 0;
    for (var i2 = 1; i2 < len2; i2++) {
      var prevItemRect = list[i2 - 1].rect;
      var gap = Math.max(list[i2].rect[xyDim] - prevItemRect[xyDim] - prevItemRect[sizeDim], 0);
      gaps.push(gap);
      totalGaps += gap;
    }
    if (!totalGaps) {
      return;
    }
    var squeezePercent = Math.min(Math.abs(delta2) / totalGaps, maxSqeezePercent);
    if (delta2 > 0) {
      for (var i2 = 0; i2 < len2 - 1; i2++) {
        var movement = gaps[i2] * squeezePercent;
        shiftList(movement, 0, i2 + 1);
      }
    } else {
      for (var i2 = len2 - 1; i2 > 0; i2--) {
        var movement = gaps[i2 - 1] * squeezePercent;
        shiftList(-movement, i2, len2);
      }
    }
  }
  function squeezeWhenBailout(delta2) {
    var dir3 = delta2 < 0 ? -1 : 1;
    delta2 = Math.abs(delta2);
    var moveForEachLabel = Math.ceil(delta2 / (len2 - 1));
    for (var i2 = 0; i2 < len2 - 1; i2++) {
      if (dir3 > 0) {
        shiftList(moveForEachLabel, 0, i2 + 1);
      } else {
        shiftList(-moveForEachLabel, len2 - i2 - 1, len2);
      }
      delta2 -= moveForEachLabel;
      if (delta2 <= 0) {
        return;
      }
    }
  }
  return adjusted;
}
function shiftLayoutOnY(list, topBound, bottomBound, balanceShift) {
  return shiftLayout(list, "y", "height", topBound, bottomBound, balanceShift);
}
function hideOverlap(labelList) {
  var displayedLabels = [];
  labelList.sort(function(a, b2) {
    return b2.priority - a.priority;
  });
  var globalRect = new BoundingRect$1(0, 0, 0, 0);
  function hideEl(el) {
    if (!el.ignore) {
      var emphasisState = el.ensureState("emphasis");
      if (emphasisState.ignore == null) {
        emphasisState.ignore = false;
      }
    }
    el.ignore = true;
  }
  for (var i = 0; i < labelList.length; i++) {
    var labelItem = labelList[i];
    var isAxisAligned = labelItem.axisAligned;
    var localRect = labelItem.localRect;
    var transform = labelItem.transform;
    var label = labelItem.label;
    var labelLine = labelItem.labelLine;
    globalRect.copy(labelItem.rect);
    globalRect.width -= 0.1;
    globalRect.height -= 0.1;
    globalRect.x += 0.05;
    globalRect.y += 0.05;
    var obb = labelItem.obb;
    var overlapped = false;
    for (var j2 = 0; j2 < displayedLabels.length; j2++) {
      var existsTextCfg = displayedLabels[j2];
      if (!globalRect.intersect(existsTextCfg.rect)) {
        continue;
      }
      if (isAxisAligned && existsTextCfg.axisAligned) {
        overlapped = true;
        break;
      }
      if (!existsTextCfg.obb) {
        existsTextCfg.obb = new OrientedBoundingRect$1(existsTextCfg.localRect, existsTextCfg.transform);
      }
      if (!obb) {
        obb = new OrientedBoundingRect$1(localRect, transform);
      }
      if (obb.intersect(existsTextCfg.obb)) {
        overlapped = true;
        break;
      }
    }
    if (overlapped) {
      hideEl(label);
      labelLine && hideEl(labelLine);
    } else {
      label.attr("ignore", labelItem.defaultAttr.ignore);
      labelLine && labelLine.attr("ignore", labelItem.defaultAttr.labelGuideIgnore);
      displayedLabels.push(labelItem);
    }
  }
}
function createDom(id, painter, dpr2) {
  var newDom = platformApi.createCanvas();
  var width = painter.getWidth();
  var height = painter.getHeight();
  var newDomStyle = newDom.style;
  if (newDomStyle) {
    newDomStyle.position = "absolute";
    newDomStyle.left = "0";
    newDomStyle.top = "0";
    newDomStyle.width = width + "px";
    newDomStyle.height = height + "px";
    newDom.setAttribute("data-zr-dom-id", id);
  }
  newDom.width = width * dpr2;
  newDom.height = height * dpr2;
  return newDom;
}
var Layer = function(_super) {
  __extends(Layer2, _super);
  function Layer2(id, painter, dpr2) {
    var _this = _super.call(this) || this;
    _this.motionBlur = false;
    _this.lastFrameAlpha = 0.7;
    _this.dpr = 1;
    _this.virtual = false;
    _this.config = {};
    _this.incremental = false;
    _this.zlevel = 0;
    _this.maxRepaintRectCount = 5;
    _this.__dirty = true;
    _this.__firstTimePaint = true;
    _this.__used = false;
    _this.__drawIndex = 0;
    _this.__startIndex = 0;
    _this.__endIndex = 0;
    _this.__prevStartIndex = null;
    _this.__prevEndIndex = null;
    var dom;
    dpr2 = dpr2 || devicePixelRatio;
    if (typeof id === "string") {
      dom = createDom(id, painter, dpr2);
    } else if (isObject$2(id)) {
      dom = id;
      id = dom.id;
    }
    _this.id = id;
    _this.dom = dom;
    var domStyle = dom.style;
    if (domStyle) {
      disableUserSelect(dom);
      dom.onselectstart = function() {
        return false;
      };
      domStyle.padding = "0";
      domStyle.margin = "0";
      domStyle.borderWidth = "0";
    }
    _this.painter = painter;
    _this.dpr = dpr2;
    return _this;
  }
  Layer2.prototype.getElementCount = function() {
    return this.__endIndex - this.__startIndex;
  };
  Layer2.prototype.afterBrush = function() {
    this.__prevStartIndex = this.__startIndex;
    this.__prevEndIndex = this.__endIndex;
  };
  Layer2.prototype.initContext = function() {
    this.ctx = this.dom.getContext("2d");
    this.ctx.dpr = this.dpr;
  };
  Layer2.prototype.setUnpainted = function() {
    this.__firstTimePaint = true;
  };
  Layer2.prototype.createBackBuffer = function() {
    var dpr2 = this.dpr;
    this.domBack = createDom("back-" + this.id, this.painter, dpr2);
    this.ctxBack = this.domBack.getContext("2d");
    if (dpr2 !== 1) {
      this.ctxBack.scale(dpr2, dpr2);
    }
  };
  Layer2.prototype.createRepaintRects = function(displayList, prevList, viewWidth, viewHeight) {
    if (this.__firstTimePaint) {
      this.__firstTimePaint = false;
      return null;
    }
    var mergedRepaintRects = [];
    var maxRepaintRectCount = this.maxRepaintRectCount;
    var full = false;
    var pendingRect = new BoundingRect$1(0, 0, 0, 0);
    function addRectToMergePool(rect) {
      if (!rect.isFinite() || rect.isZero()) {
        return;
      }
      if (mergedRepaintRects.length === 0) {
        var boundingRect = new BoundingRect$1(0, 0, 0, 0);
        boundingRect.copy(rect);
        mergedRepaintRects.push(boundingRect);
      } else {
        var isMerged = false;
        var minDeltaArea = Infinity;
        var bestRectToMergeIdx = 0;
        for (var i2 = 0; i2 < mergedRepaintRects.length; ++i2) {
          var mergedRect = mergedRepaintRects[i2];
          if (mergedRect.intersect(rect)) {
            var pendingRect_1 = new BoundingRect$1(0, 0, 0, 0);
            pendingRect_1.copy(mergedRect);
            pendingRect_1.union(rect);
            mergedRepaintRects[i2] = pendingRect_1;
            isMerged = true;
            break;
          } else if (full) {
            pendingRect.copy(rect);
            pendingRect.union(mergedRect);
            var aArea = rect.width * rect.height;
            var bArea = mergedRect.width * mergedRect.height;
            var pendingArea = pendingRect.width * pendingRect.height;
            var deltaArea = pendingArea - aArea - bArea;
            if (deltaArea < minDeltaArea) {
              minDeltaArea = deltaArea;
              bestRectToMergeIdx = i2;
            }
          }
        }
        if (full) {
          mergedRepaintRects[bestRectToMergeIdx].union(rect);
          isMerged = true;
        }
        if (!isMerged) {
          var boundingRect = new BoundingRect$1(0, 0, 0, 0);
          boundingRect.copy(rect);
          mergedRepaintRects.push(boundingRect);
        }
        if (!full) {
          full = mergedRepaintRects.length >= maxRepaintRectCount;
        }
      }
    }
    for (var i = this.__startIndex; i < this.__endIndex; ++i) {
      var el = displayList[i];
      if (el) {
        var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);
        var prevRect = el.__isRendered && (el.__dirty & REDRAW_BIT || !shouldPaint) ? el.getPrevPaintRect() : null;
        if (prevRect) {
          addRectToMergePool(prevRect);
        }
        var curRect = shouldPaint && (el.__dirty & REDRAW_BIT || !el.__isRendered) ? el.getPaintRect() : null;
        if (curRect) {
          addRectToMergePool(curRect);
        }
      }
    }
    for (var i = this.__prevStartIndex; i < this.__prevEndIndex; ++i) {
      var el = prevList[i];
      var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);
      if (el && (!shouldPaint || !el.__zr) && el.__isRendered) {
        var prevRect = el.getPrevPaintRect();
        if (prevRect) {
          addRectToMergePool(prevRect);
        }
      }
    }
    var hasIntersections;
    do {
      hasIntersections = false;
      for (var i = 0; i < mergedRepaintRects.length; ) {
        if (mergedRepaintRects[i].isZero()) {
          mergedRepaintRects.splice(i, 1);
          continue;
        }
        for (var j2 = i + 1; j2 < mergedRepaintRects.length; ) {
          if (mergedRepaintRects[i].intersect(mergedRepaintRects[j2])) {
            hasIntersections = true;
            mergedRepaintRects[i].union(mergedRepaintRects[j2]);
            mergedRepaintRects.splice(j2, 1);
          } else {
            j2++;
          }
        }
        i++;
      }
    } while (hasIntersections);
    this._paintRects = mergedRepaintRects;
    return mergedRepaintRects;
  };
  Layer2.prototype.debugGetPaintRects = function() {
    return (this._paintRects || []).slice();
  };
  Layer2.prototype.resize = function(width, height) {
    var dpr2 = this.dpr;
    var dom = this.dom;
    var domStyle = dom.style;
    var domBack = this.domBack;
    if (domStyle) {
      domStyle.width = width + "px";
      domStyle.height = height + "px";
    }
    dom.width = width * dpr2;
    dom.height = height * dpr2;
    if (domBack) {
      domBack.width = width * dpr2;
      domBack.height = height * dpr2;
      if (dpr2 !== 1) {
        this.ctxBack.scale(dpr2, dpr2);
      }
    }
  };
  Layer2.prototype.clear = function(clearAll, clearColor, repaintRects) {
    var dom = this.dom;
    var ctx = this.ctx;
    var width = dom.width;
    var height = dom.height;
    clearColor = clearColor || this.clearColor;
    var haveMotionBLur = this.motionBlur && !clearAll;
    var lastFrameAlpha = this.lastFrameAlpha;
    var dpr2 = this.dpr;
    var self2 = this;
    if (haveMotionBLur) {
      if (!this.domBack) {
        this.createBackBuffer();
      }
      this.ctxBack.globalCompositeOperation = "copy";
      this.ctxBack.drawImage(dom, 0, 0, width / dpr2, height / dpr2);
    }
    var domBack = this.domBack;
    function doClear(x2, y2, width2, height2) {
      ctx.clearRect(x2, y2, width2, height2);
      if (clearColor && clearColor !== "transparent") {
        var clearColorGradientOrPattern = void 0;
        if (isGradientObject(clearColor)) {
          var shouldCache = clearColor.global || clearColor.__width === width2 && clearColor.__height === height2;
          clearColorGradientOrPattern = shouldCache && clearColor.__canvasGradient || getCanvasGradient(ctx, clearColor, {
            x: 0,
            y: 0,
            width: width2,
            height: height2
          });
          clearColor.__canvasGradient = clearColorGradientOrPattern;
          clearColor.__width = width2;
          clearColor.__height = height2;
        } else if (isImagePatternObject(clearColor)) {
          clearColor.scaleX = clearColor.scaleX || dpr2;
          clearColor.scaleY = clearColor.scaleY || dpr2;
          clearColorGradientOrPattern = createCanvasPattern(ctx, clearColor, {
            dirty: function() {
              self2.setUnpainted();
              self2.__painter.refresh();
            }
          });
        }
        ctx.save();
        ctx.fillStyle = clearColorGradientOrPattern || clearColor;
        ctx.fillRect(x2, y2, width2, height2);
        ctx.restore();
      }
      if (haveMotionBLur) {
        ctx.save();
        ctx.globalAlpha = lastFrameAlpha;
        ctx.drawImage(domBack, x2, y2, width2, height2);
        ctx.restore();
      }
    }
    if (!repaintRects || haveMotionBLur) {
      doClear(0, 0, width, height);
    } else if (repaintRects.length) {
      each$4(repaintRects, function(rect) {
        doClear(rect.x * dpr2, rect.y * dpr2, rect.width * dpr2, rect.height * dpr2);
      });
    }
  };
  return Layer2;
}(Eventful$1);
var Layer$1 = Layer;
var HOVER_LAYER_ZLEVEL = 1e5;
var CANVAS_ZLEVEL = 314159;
var EL_AFTER_INCREMENTAL_INC = 0.01;
var INCREMENTAL_INC = 1e-3;
function isLayerValid(layer) {
  if (!layer) {
    return false;
  }
  if (layer.__builtin__) {
    return true;
  }
  if (typeof layer.resize !== "function" || typeof layer.refresh !== "function") {
    return false;
  }
  return true;
}
function createRoot(width, height) {
  var domRoot = document.createElement("div");
  domRoot.style.cssText = [
    "position:relative",
    "width:" + width + "px",
    "height:" + height + "px",
    "padding:0",
    "margin:0",
    "border-width:0"
  ].join(";") + ";";
  return domRoot;
}
var CanvasPainter = function() {
  function CanvasPainter2(root, storage, opts, id) {
    this.type = "canvas";
    this._zlevelList = [];
    this._prevDisplayList = [];
    this._layers = {};
    this._layerConfig = {};
    this._needsManuallyCompositing = false;
    this.type = "canvas";
    var singleCanvas = !root.nodeName || root.nodeName.toUpperCase() === "CANVAS";
    this._opts = opts = extend({}, opts || {});
    this.dpr = opts.devicePixelRatio || devicePixelRatio;
    this._singleCanvas = singleCanvas;
    this.root = root;
    var rootStyle = root.style;
    if (rootStyle) {
      disableUserSelect(root);
      root.innerHTML = "";
    }
    this.storage = storage;
    var zlevelList = this._zlevelList;
    this._prevDisplayList = [];
    var layers = this._layers;
    if (!singleCanvas) {
      this._width = getSize(root, 0, opts);
      this._height = getSize(root, 1, opts);
      var domRoot = this._domRoot = createRoot(this._width, this._height);
      root.appendChild(domRoot);
    } else {
      var rootCanvas = root;
      var width = rootCanvas.width;
      var height = rootCanvas.height;
      if (opts.width != null) {
        width = opts.width;
      }
      if (opts.height != null) {
        height = opts.height;
      }
      this.dpr = opts.devicePixelRatio || 1;
      rootCanvas.width = width * this.dpr;
      rootCanvas.height = height * this.dpr;
      this._width = width;
      this._height = height;
      var mainLayer = new Layer$1(rootCanvas, this, this.dpr);
      mainLayer.__builtin__ = true;
      mainLayer.initContext();
      layers[CANVAS_ZLEVEL] = mainLayer;
      mainLayer.zlevel = CANVAS_ZLEVEL;
      zlevelList.push(CANVAS_ZLEVEL);
      this._domRoot = root;
    }
  }
  CanvasPainter2.prototype.getType = function() {
    return "canvas";
  };
  CanvasPainter2.prototype.isSingleCanvas = function() {
    return this._singleCanvas;
  };
  CanvasPainter2.prototype.getViewportRoot = function() {
    return this._domRoot;
  };
  CanvasPainter2.prototype.getViewportRootOffset = function() {
    var viewportRoot = this.getViewportRoot();
    if (viewportRoot) {
      return {
        offsetLeft: viewportRoot.offsetLeft || 0,
        offsetTop: viewportRoot.offsetTop || 0
      };
    }
  };
  CanvasPainter2.prototype.refresh = function(paintAll) {
    var list = this.storage.getDisplayList(true);
    var prevList = this._prevDisplayList;
    var zlevelList = this._zlevelList;
    this._redrawId = Math.random();
    this._paintList(list, prevList, paintAll, this._redrawId);
    for (var i = 0; i < zlevelList.length; i++) {
      var z2 = zlevelList[i];
      var layer = this._layers[z2];
      if (!layer.__builtin__ && layer.refresh) {
        var clearColor = i === 0 ? this._backgroundColor : null;
        layer.refresh(clearColor);
      }
    }
    if (this._opts.useDirtyRect) {
      this._prevDisplayList = list.slice();
    }
    return this;
  };
  CanvasPainter2.prototype.refreshHover = function() {
    this._paintHoverList(this.storage.getDisplayList(false));
  };
  CanvasPainter2.prototype._paintHoverList = function(list) {
    var len2 = list.length;
    var hoverLayer = this._hoverlayer;
    hoverLayer && hoverLayer.clear();
    if (!len2) {
      return;
    }
    var scope = {
      inHover: true,
      viewWidth: this._width,
      viewHeight: this._height
    };
    var ctx;
    for (var i = 0; i < len2; i++) {
      var el = list[i];
      if (el.__inHover) {
        if (!hoverLayer) {
          hoverLayer = this._hoverlayer = this.getLayer(HOVER_LAYER_ZLEVEL);
        }
        if (!ctx) {
          ctx = hoverLayer.ctx;
          ctx.save();
        }
        brush(ctx, el, scope, i === len2 - 1);
      }
    }
    if (ctx) {
      ctx.restore();
    }
  };
  CanvasPainter2.prototype.getHoverLayer = function() {
    return this.getLayer(HOVER_LAYER_ZLEVEL);
  };
  CanvasPainter2.prototype.paintOne = function(ctx, el) {
    brushSingle(ctx, el);
  };
  CanvasPainter2.prototype._paintList = function(list, prevList, paintAll, redrawId) {
    if (this._redrawId !== redrawId) {
      return;
    }
    paintAll = paintAll || false;
    this._updateLayerStatus(list);
    var _a2 = this._doPaintList(list, prevList, paintAll), finished = _a2.finished, needsRefreshHover = _a2.needsRefreshHover;
    if (this._needsManuallyCompositing) {
      this._compositeManually();
    }
    if (needsRefreshHover) {
      this._paintHoverList(list);
    }
    if (!finished) {
      var self_1 = this;
      requestAnimationFrame$2(function() {
        self_1._paintList(list, prevList, paintAll, redrawId);
      });
    } else {
      this.eachLayer(function(layer) {
        layer.afterBrush && layer.afterBrush();
      });
    }
  };
  CanvasPainter2.prototype._compositeManually = function() {
    var ctx = this.getLayer(CANVAS_ZLEVEL).ctx;
    var width = this._domRoot.width;
    var height = this._domRoot.height;
    ctx.clearRect(0, 0, width, height);
    this.eachBuiltinLayer(function(layer) {
      if (layer.virtual) {
        ctx.drawImage(layer.dom, 0, 0, width, height);
      }
    });
  };
  CanvasPainter2.prototype._doPaintList = function(list, prevList, paintAll) {
    var _this = this;
    var layerList = [];
    var useDirtyRect = this._opts.useDirtyRect;
    for (var zi = 0; zi < this._zlevelList.length; zi++) {
      var zlevel = this._zlevelList[zi];
      var layer = this._layers[zlevel];
      if (layer.__builtin__ && layer !== this._hoverlayer && (layer.__dirty || paintAll)) {
        layerList.push(layer);
      }
    }
    var finished = true;
    var needsRefreshHover = false;
    var _loop_1 = function(k3) {
      var layer2 = layerList[k3];
      var ctx = layer2.ctx;
      var repaintRects = useDirtyRect && layer2.createRepaintRects(list, prevList, this_1._width, this_1._height);
      var start2 = paintAll ? layer2.__startIndex : layer2.__drawIndex;
      var useTimer = !paintAll && layer2.incremental && Date.now;
      var startTime = useTimer && Date.now();
      var clearColor = layer2.zlevel === this_1._zlevelList[0] ? this_1._backgroundColor : null;
      if (layer2.__startIndex === layer2.__endIndex) {
        layer2.clear(false, clearColor, repaintRects);
      } else if (start2 === layer2.__startIndex) {
        var firstEl = list[start2];
        if (!firstEl.incremental || !firstEl.notClear || paintAll) {
          layer2.clear(false, clearColor, repaintRects);
        }
      }
      if (start2 === -1) {
        console.error("For some unknown reason. drawIndex is -1");
        start2 = layer2.__startIndex;
      }
      var i;
      var repaint = function(repaintRect) {
        var scope = {
          inHover: false,
          allClipped: false,
          prevEl: null,
          viewWidth: _this._width,
          viewHeight: _this._height
        };
        for (i = start2; i < layer2.__endIndex; i++) {
          var el = list[i];
          if (el.__inHover) {
            needsRefreshHover = true;
          }
          _this._doPaintEl(el, layer2, useDirtyRect, repaintRect, scope, i === layer2.__endIndex - 1);
          if (useTimer) {
            var dTime = Date.now() - startTime;
            if (dTime > 15) {
              break;
            }
          }
        }
        if (scope.prevElClipPaths) {
          ctx.restore();
        }
      };
      if (repaintRects) {
        if (repaintRects.length === 0) {
          i = layer2.__endIndex;
        } else {
          var dpr2 = this_1.dpr;
          for (var r = 0; r < repaintRects.length; ++r) {
            var rect = repaintRects[r];
            ctx.save();
            ctx.beginPath();
            ctx.rect(rect.x * dpr2, rect.y * dpr2, rect.width * dpr2, rect.height * dpr2);
            ctx.clip();
            repaint(rect);
            ctx.restore();
          }
        }
      } else {
        ctx.save();
        repaint();
        ctx.restore();
      }
      layer2.__drawIndex = i;
      if (layer2.__drawIndex < layer2.__endIndex) {
        finished = false;
      }
    };
    var this_1 = this;
    for (var k2 = 0; k2 < layerList.length; k2++) {
      _loop_1(k2);
    }
    if (env$1.wxa) {
      each$4(this._layers, function(layer2) {
        if (layer2 && layer2.ctx && layer2.ctx.draw) {
          layer2.ctx.draw();
        }
      });
    }
    return {
      finished,
      needsRefreshHover
    };
  };
  CanvasPainter2.prototype._doPaintEl = function(el, currentLayer, useDirtyRect, repaintRect, scope, isLast) {
    var ctx = currentLayer.ctx;
    if (useDirtyRect) {
      var paintRect = el.getPaintRect();
      if (!repaintRect || paintRect && paintRect.intersect(repaintRect)) {
        brush(ctx, el, scope, isLast);
        el.setPrevPaintRect(paintRect);
      }
    } else {
      brush(ctx, el, scope, isLast);
    }
  };
  CanvasPainter2.prototype.getLayer = function(zlevel, virtual) {
    if (this._singleCanvas && !this._needsManuallyCompositing) {
      zlevel = CANVAS_ZLEVEL;
    }
    var layer = this._layers[zlevel];
    if (!layer) {
      layer = new Layer$1("zr_" + zlevel, this, this.dpr);
      layer.zlevel = zlevel;
      layer.__builtin__ = true;
      if (this._layerConfig[zlevel]) {
        merge(layer, this._layerConfig[zlevel], true);
      } else if (this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC]) {
        merge(layer, this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC], true);
      }
      if (virtual) {
        layer.virtual = virtual;
      }
      this.insertLayer(zlevel, layer);
      layer.initContext();
    }
    return layer;
  };
  CanvasPainter2.prototype.insertLayer = function(zlevel, layer) {
    var layersMap = this._layers;
    var zlevelList = this._zlevelList;
    var len2 = zlevelList.length;
    var domRoot = this._domRoot;
    var prevLayer = null;
    var i = -1;
    if (layersMap[zlevel]) {
      return;
    }
    if (!isLayerValid(layer)) {
      return;
    }
    if (len2 > 0 && zlevel > zlevelList[0]) {
      for (i = 0; i < len2 - 1; i++) {
        if (zlevelList[i] < zlevel && zlevelList[i + 1] > zlevel) {
          break;
        }
      }
      prevLayer = layersMap[zlevelList[i]];
    }
    zlevelList.splice(i + 1, 0, zlevel);
    layersMap[zlevel] = layer;
    if (!layer.virtual) {
      if (prevLayer) {
        var prevDom = prevLayer.dom;
        if (prevDom.nextSibling) {
          domRoot.insertBefore(layer.dom, prevDom.nextSibling);
        } else {
          domRoot.appendChild(layer.dom);
        }
      } else {
        if (domRoot.firstChild) {
          domRoot.insertBefore(layer.dom, domRoot.firstChild);
        } else {
          domRoot.appendChild(layer.dom);
        }
      }
    }
    layer.__painter = this;
  };
  CanvasPainter2.prototype.eachLayer = function(cb, context) {
    var zlevelList = this._zlevelList;
    for (var i = 0; i < zlevelList.length; i++) {
      var z2 = zlevelList[i];
      cb.call(context, this._layers[z2], z2);
    }
  };
  CanvasPainter2.prototype.eachBuiltinLayer = function(cb, context) {
    var zlevelList = this._zlevelList;
    for (var i = 0; i < zlevelList.length; i++) {
      var z2 = zlevelList[i];
      var layer = this._layers[z2];
      if (layer.__builtin__) {
        cb.call(context, layer, z2);
      }
    }
  };
  CanvasPainter2.prototype.eachOtherLayer = function(cb, context) {
    var zlevelList = this._zlevelList;
    for (var i = 0; i < zlevelList.length; i++) {
      var z2 = zlevelList[i];
      var layer = this._layers[z2];
      if (!layer.__builtin__) {
        cb.call(context, layer, z2);
      }
    }
  };
  CanvasPainter2.prototype.getLayers = function() {
    return this._layers;
  };
  CanvasPainter2.prototype._updateLayerStatus = function(list) {
    this.eachBuiltinLayer(function(layer2, z2) {
      layer2.__dirty = layer2.__used = false;
    });
    function updatePrevLayer(idx) {
      if (prevLayer) {
        if (prevLayer.__endIndex !== idx) {
          prevLayer.__dirty = true;
        }
        prevLayer.__endIndex = idx;
      }
    }
    if (this._singleCanvas) {
      for (var i_1 = 1; i_1 < list.length; i_1++) {
        var el = list[i_1];
        if (el.zlevel !== list[i_1 - 1].zlevel || el.incremental) {
          this._needsManuallyCompositing = true;
          break;
        }
      }
    }
    var prevLayer = null;
    var incrementalLayerCount = 0;
    var prevZlevel;
    var i;
    for (i = 0; i < list.length; i++) {
      var el = list[i];
      var zlevel = el.zlevel;
      var layer = void 0;
      if (prevZlevel !== zlevel) {
        prevZlevel = zlevel;
        incrementalLayerCount = 0;
      }
      if (el.incremental) {
        layer = this.getLayer(zlevel + INCREMENTAL_INC, this._needsManuallyCompositing);
        layer.incremental = true;
        incrementalLayerCount = 1;
      } else {
        layer = this.getLayer(zlevel + (incrementalLayerCount > 0 ? EL_AFTER_INCREMENTAL_INC : 0), this._needsManuallyCompositing);
      }
      if (!layer.__builtin__) {
        logError("ZLevel " + zlevel + " has been used by unkown layer " + layer.id);
      }
      if (layer !== prevLayer) {
        layer.__used = true;
        if (layer.__startIndex !== i) {
          layer.__dirty = true;
        }
        layer.__startIndex = i;
        if (!layer.incremental) {
          layer.__drawIndex = i;
        } else {
          layer.__drawIndex = -1;
        }
        updatePrevLayer(i);
        prevLayer = layer;
      }
      if (el.__dirty & REDRAW_BIT && !el.__inHover) {
        layer.__dirty = true;
        if (layer.incremental && layer.__drawIndex < 0) {
          layer.__drawIndex = i;
        }
      }
    }
    updatePrevLayer(i);
    this.eachBuiltinLayer(function(layer2, z2) {
      if (!layer2.__used && layer2.getElementCount() > 0) {
        layer2.__dirty = true;
        layer2.__startIndex = layer2.__endIndex = layer2.__drawIndex = 0;
      }
      if (layer2.__dirty && layer2.__drawIndex < 0) {
        layer2.__drawIndex = layer2.__startIndex;
      }
    });
  };
  CanvasPainter2.prototype.clear = function() {
    this.eachBuiltinLayer(this._clearLayer);
    return this;
  };
  CanvasPainter2.prototype._clearLayer = function(layer) {
    layer.clear();
  };
  CanvasPainter2.prototype.setBackgroundColor = function(backgroundColor2) {
    this._backgroundColor = backgroundColor2;
    each$4(this._layers, function(layer) {
      layer.setUnpainted();
    });
  };
  CanvasPainter2.prototype.configLayer = function(zlevel, config) {
    if (config) {
      var layerConfig = this._layerConfig;
      if (!layerConfig[zlevel]) {
        layerConfig[zlevel] = config;
      } else {
        merge(layerConfig[zlevel], config, true);
      }
      for (var i = 0; i < this._zlevelList.length; i++) {
        var _zlevel = this._zlevelList[i];
        if (_zlevel === zlevel || _zlevel === zlevel + EL_AFTER_INCREMENTAL_INC) {
          var layer = this._layers[_zlevel];
          merge(layer, layerConfig[zlevel], true);
        }
      }
    }
  };
  CanvasPainter2.prototype.delLayer = function(zlevel) {
    var layers = this._layers;
    var zlevelList = this._zlevelList;
    var layer = layers[zlevel];
    if (!layer) {
      return;
    }
    layer.dom.parentNode.removeChild(layer.dom);
    delete layers[zlevel];
    zlevelList.splice(indexOf(zlevelList, zlevel), 1);
  };
  CanvasPainter2.prototype.resize = function(width, height) {
    if (!this._domRoot.style) {
      if (width == null || height == null) {
        return;
      }
      this._width = width;
      this._height = height;
      this.getLayer(CANVAS_ZLEVEL).resize(width, height);
    } else {
      var domRoot = this._domRoot;
      domRoot.style.display = "none";
      var opts = this._opts;
      var root = this.root;
      width != null && (opts.width = width);
      height != null && (opts.height = height);
      width = getSize(root, 0, opts);
      height = getSize(root, 1, opts);
      domRoot.style.display = "";
      if (this._width !== width || height !== this._height) {
        domRoot.style.width = width + "px";
        domRoot.style.height = height + "px";
        for (var id in this._layers) {
          if (this._layers.hasOwnProperty(id)) {
            this._layers[id].resize(width, height);
          }
        }
        this.refresh(true);
      }
      this._width = width;
      this._height = height;
    }
    return this;
  };
  CanvasPainter2.prototype.clearLayer = function(zlevel) {
    var layer = this._layers[zlevel];
    if (layer) {
      layer.clear();
    }
  };
  CanvasPainter2.prototype.dispose = function() {
    this.root.innerHTML = "";
    this.root = this.storage = this._domRoot = this._layers = null;
  };
  CanvasPainter2.prototype.getRenderedCanvas = function(opts) {
    opts = opts || {};
    if (this._singleCanvas && !this._compositeManually) {
      return this._layers[CANVAS_ZLEVEL].dom;
    }
    var imageLayer = new Layer$1("image", this, opts.pixelRatio || this.dpr);
    imageLayer.initContext();
    imageLayer.clear(false, opts.backgroundColor || this._backgroundColor);
    var ctx = imageLayer.ctx;
    if (opts.pixelRatio <= this.dpr) {
      this.refresh();
      var width_1 = imageLayer.dom.width;
      var height_1 = imageLayer.dom.height;
      this.eachLayer(function(layer) {
        if (layer.__builtin__) {
          ctx.drawImage(layer.dom, 0, 0, width_1, height_1);
        } else if (layer.renderToCanvas) {
          ctx.save();
          layer.renderToCanvas(ctx);
          ctx.restore();
        }
      });
    } else {
      var scope = {
        inHover: false,
        viewWidth: this._width,
        viewHeight: this._height
      };
      var displayList = this.storage.getDisplayList(true);
      for (var i = 0, len2 = displayList.length; i < len2; i++) {
        var el = displayList[i];
        brush(ctx, el, scope, i === len2 - 1);
      }
    }
    return imageLayer.dom;
  };
  CanvasPainter2.prototype.getWidth = function() {
    return this._width;
  };
  CanvasPainter2.prototype.getHeight = function() {
    return this._height;
  };
  return CanvasPainter2;
}();
var CanvasPainter$1 = CanvasPainter;
function install$7(registers) {
  registers.registerPainter("canvas", CanvasPainter$1);
}
function getSectorCornerRadius(model, shape, zeroIfNull) {
  var cornerRadius = model.get("borderRadius");
  if (cornerRadius == null) {
    return zeroIfNull ? {
      cornerRadius: 0
    } : null;
  }
  if (!isArray(cornerRadius)) {
    cornerRadius = [cornerRadius, cornerRadius, cornerRadius, cornerRadius];
  }
  var dr = Math.abs(shape.r || 0 - shape.r0 || 0);
  return {
    cornerRadius: map$1(cornerRadius, function(cr) {
      return parsePercent$1(cr, dr);
    })
  };
}
var PI2 = Math.PI * 2;
var RADIAN$1 = Math.PI / 180;
function getViewRect(seriesModel, api) {
  return getLayoutRect(seriesModel.getBoxLayoutParams(), {
    width: api.getWidth(),
    height: api.getHeight()
  });
}
function getBasicPieLayout(seriesModel, api) {
  var viewRect2 = getViewRect(seriesModel, api);
  var center2 = seriesModel.get("center");
  var radius = seriesModel.get("radius");
  if (!isArray(radius)) {
    radius = [0, radius];
  }
  var width = parsePercent(viewRect2.width, api.getWidth());
  var height = parsePercent(viewRect2.height, api.getHeight());
  var size = Math.min(width, height);
  var r0 = parsePercent(radius[0], size / 2);
  var r = parsePercent(radius[1], size / 2);
  var cx;
  var cy;
  var coordSys = seriesModel.coordinateSystem;
  if (coordSys) {
    var point = coordSys.dataToPoint(center2);
    cx = point[0] || 0;
    cy = point[1] || 0;
  } else {
    if (!isArray(center2)) {
      center2 = [center2, center2];
    }
    cx = parsePercent(center2[0], width) + viewRect2.x;
    cy = parsePercent(center2[1], height) + viewRect2.y;
  }
  return {
    cx,
    cy,
    r0,
    r
  };
}
function pieLayout(seriesType2, ecModel, api) {
  ecModel.eachSeriesByType(seriesType2, function(seriesModel) {
    var data = seriesModel.getData();
    var valueDim = data.mapDimension("value");
    var viewRect2 = getViewRect(seriesModel, api);
    var _a2 = getBasicPieLayout(seriesModel, api), cx = _a2.cx, cy = _a2.cy, r = _a2.r, r0 = _a2.r0;
    var startAngle = -seriesModel.get("startAngle") * RADIAN$1;
    var minAngle = seriesModel.get("minAngle") * RADIAN$1;
    var validDataCount = 0;
    data.each(valueDim, function(value) {
      !isNaN(value) && validDataCount++;
    });
    var sum = data.getSum(valueDim);
    var unitRadian = Math.PI / (sum || validDataCount) * 2;
    var clockwise = seriesModel.get("clockwise");
    var roseType = seriesModel.get("roseType");
    var stillShowZeroSum = seriesModel.get("stillShowZeroSum");
    var extent3 = data.getDataExtent(valueDim);
    extent3[0] = 0;
    var restAngle = PI2;
    var valueSumLargerThanMinAngle = 0;
    var currentAngle = startAngle;
    var dir3 = clockwise ? 1 : -1;
    data.setLayout({
      viewRect: viewRect2,
      r
    });
    data.each(valueDim, function(value, idx) {
      var angle;
      if (isNaN(value)) {
        data.setItemLayout(idx, {
          angle: NaN,
          startAngle: NaN,
          endAngle: NaN,
          clockwise,
          cx,
          cy,
          r0,
          r: roseType ? NaN : r
        });
        return;
      }
      if (roseType !== "area") {
        angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;
      } else {
        angle = PI2 / validDataCount;
      }
      if (angle < minAngle) {
        angle = minAngle;
        restAngle -= minAngle;
      } else {
        valueSumLargerThanMinAngle += value;
      }
      var endAngle = currentAngle + dir3 * angle;
      data.setItemLayout(idx, {
        angle,
        startAngle: currentAngle,
        endAngle,
        clockwise,
        cx,
        cy,
        r0,
        r: roseType ? linearMap(value, extent3, [r0, r]) : r
      });
      currentAngle = endAngle;
    });
    if (restAngle < PI2 && validDataCount) {
      if (restAngle <= 1e-3) {
        var angle_1 = PI2 / validDataCount;
        data.each(valueDim, function(value, idx) {
          if (!isNaN(value)) {
            var layout_1 = data.getItemLayout(idx);
            layout_1.angle = angle_1;
            layout_1.startAngle = startAngle + dir3 * idx * angle_1;
            layout_1.endAngle = startAngle + dir3 * (idx + 1) * angle_1;
          }
        });
      } else {
        unitRadian = restAngle / valueSumLargerThanMinAngle;
        currentAngle = startAngle;
        data.each(valueDim, function(value, idx) {
          if (!isNaN(value)) {
            var layout_2 = data.getItemLayout(idx);
            var angle = layout_2.angle === minAngle ? minAngle : value * unitRadian;
            layout_2.startAngle = currentAngle;
            layout_2.endAngle = currentAngle + dir3 * angle;
            currentAngle += dir3 * angle;
          }
        });
      }
    }
  });
}
function dataFilter(seriesType2) {
  return {
    seriesType: seriesType2,
    reset: function(seriesModel, ecModel) {
      var legendModels = ecModel.findComponents({
        mainType: "legend"
      });
      if (!legendModels || !legendModels.length) {
        return;
      }
      var data = seriesModel.getData();
      data.filterSelf(function(idx) {
        var name = data.getName(idx);
        for (var i = 0; i < legendModels.length; i++) {
          if (!legendModels[i].isSelected(name)) {
            return false;
          }
        }
        return true;
      });
    }
  };
}
var RADIAN = Math.PI / 180;
function adjustSingleSide(list, cx, cy, r, dir3, viewWidth, viewHeight, viewLeft, viewTop, farthestX) {
  if (list.length < 2) {
    return;
  }
  function recalculateXOnSemiToAlignOnEllipseCurve(semi) {
    var rB = semi.rB;
    var rB2 = rB * rB;
    for (var i2 = 0; i2 < semi.list.length; i2++) {
      var item = semi.list[i2];
      var dy = Math.abs(item.label.y - cy);
      var rA = r + item.len;
      var rA2 = rA * rA;
      var dx2 = Math.sqrt((1 - Math.abs(dy * dy / rB2)) * rA2);
      var newX = cx + (dx2 + item.len2) * dir3;
      var deltaX = newX - item.label.x;
      var newTargetWidth = item.targetTextWidth - deltaX * dir3;
      constrainTextWidth(item, newTargetWidth, true);
      item.label.x = newX;
    }
  }
  function recalculateX(items) {
    var topSemi = {
      list: [],
      maxY: 0
    };
    var bottomSemi = {
      list: [],
      maxY: 0
    };
    for (var i2 = 0; i2 < items.length; i2++) {
      if (items[i2].labelAlignTo !== "none") {
        continue;
      }
      var item = items[i2];
      var semi = item.label.y > cy ? bottomSemi : topSemi;
      var dy = Math.abs(item.label.y - cy);
      if (dy >= semi.maxY) {
        var dx2 = item.label.x - cx - item.len2 * dir3;
        var rA = r + item.len;
        var rB = Math.abs(dx2) < rA ? Math.sqrt(dy * dy / (1 - dx2 * dx2 / rA / rA)) : rA;
        semi.rB = rB;
        semi.maxY = dy;
      }
      semi.list.push(item);
    }
    recalculateXOnSemiToAlignOnEllipseCurve(topSemi);
    recalculateXOnSemiToAlignOnEllipseCurve(bottomSemi);
  }
  var len2 = list.length;
  for (var i = 0; i < len2; i++) {
    if (list[i].position === "outer" && list[i].labelAlignTo === "labelLine") {
      var dx = list[i].label.x - farthestX;
      list[i].linePoints[1][0] += dx;
      list[i].label.x = farthestX;
    }
  }
  if (shiftLayoutOnY(list, viewTop, viewTop + viewHeight)) {
    recalculateX(list);
  }
}
function avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop) {
  var leftList = [];
  var rightList = [];
  var leftmostX = Number.MAX_VALUE;
  var rightmostX = -Number.MAX_VALUE;
  for (var i = 0; i < labelLayoutList.length; i++) {
    var label = labelLayoutList[i].label;
    if (isPositionCenter(labelLayoutList[i])) {
      continue;
    }
    if (label.x < cx) {
      leftmostX = Math.min(leftmostX, label.x);
      leftList.push(labelLayoutList[i]);
    } else {
      rightmostX = Math.max(rightmostX, label.x);
      rightList.push(labelLayoutList[i]);
    }
  }
  for (var i = 0; i < labelLayoutList.length; i++) {
    var layout2 = labelLayoutList[i];
    if (!isPositionCenter(layout2) && layout2.linePoints) {
      if (layout2.labelStyleWidth != null) {
        continue;
      }
      var label = layout2.label;
      var linePoints = layout2.linePoints;
      var targetTextWidth = void 0;
      if (layout2.labelAlignTo === "edge") {
        if (label.x < cx) {
          targetTextWidth = linePoints[2][0] - layout2.labelDistance - viewLeft - layout2.edgeDistance;
        } else {
          targetTextWidth = viewLeft + viewWidth - layout2.edgeDistance - linePoints[2][0] - layout2.labelDistance;
        }
      } else if (layout2.labelAlignTo === "labelLine") {
        if (label.x < cx) {
          targetTextWidth = leftmostX - viewLeft - layout2.bleedMargin;
        } else {
          targetTextWidth = viewLeft + viewWidth - rightmostX - layout2.bleedMargin;
        }
      } else {
        if (label.x < cx) {
          targetTextWidth = label.x - viewLeft - layout2.bleedMargin;
        } else {
          targetTextWidth = viewLeft + viewWidth - label.x - layout2.bleedMargin;
        }
      }
      layout2.targetTextWidth = targetTextWidth;
      constrainTextWidth(layout2, targetTextWidth);
    }
  }
  adjustSingleSide(rightList, cx, cy, r, 1, viewWidth, viewHeight, viewLeft, viewTop, rightmostX);
  adjustSingleSide(leftList, cx, cy, r, -1, viewWidth, viewHeight, viewLeft, viewTop, leftmostX);
  for (var i = 0; i < labelLayoutList.length; i++) {
    var layout2 = labelLayoutList[i];
    if (!isPositionCenter(layout2) && layout2.linePoints) {
      var label = layout2.label;
      var linePoints = layout2.linePoints;
      var isAlignToEdge = layout2.labelAlignTo === "edge";
      var padding = label.style.padding;
      var paddingH = padding ? padding[1] + padding[3] : 0;
      var extraPaddingH = label.style.backgroundColor ? 0 : paddingH;
      var realTextWidth = layout2.rect.width + extraPaddingH;
      var dist2 = linePoints[1][0] - linePoints[2][0];
      if (isAlignToEdge) {
        if (label.x < cx) {
          linePoints[2][0] = viewLeft + layout2.edgeDistance + realTextWidth + layout2.labelDistance;
        } else {
          linePoints[2][0] = viewLeft + viewWidth - layout2.edgeDistance - realTextWidth - layout2.labelDistance;
        }
      } else {
        if (label.x < cx) {
          linePoints[2][0] = label.x + layout2.labelDistance;
        } else {
          linePoints[2][0] = label.x - layout2.labelDistance;
        }
        linePoints[1][0] = linePoints[2][0] + dist2;
      }
      linePoints[1][1] = linePoints[2][1] = label.y;
    }
  }
}
function constrainTextWidth(layout2, availableWidth, forceRecalculate) {
  if (forceRecalculate === void 0) {
    forceRecalculate = false;
  }
  if (layout2.labelStyleWidth != null) {
    return;
  }
  var label = layout2.label;
  var style2 = label.style;
  var textRect = layout2.rect;
  var bgColor = style2.backgroundColor;
  var padding = style2.padding;
  var paddingH = padding ? padding[1] + padding[3] : 0;
  var overflow = style2.overflow;
  var oldOuterWidth = textRect.width + (bgColor ? 0 : paddingH);
  if (availableWidth < oldOuterWidth || forceRecalculate) {
    var oldHeight = textRect.height;
    if (overflow && overflow.match("break")) {
      label.setStyle("backgroundColor", null);
      label.setStyle("width", availableWidth - paddingH);
      var innerRect = label.getBoundingRect();
      label.setStyle("width", Math.ceil(innerRect.width));
      label.setStyle("backgroundColor", bgColor);
    } else {
      var availableInnerWidth = availableWidth - paddingH;
      var newWidth = availableWidth < oldOuterWidth ? availableInnerWidth : forceRecalculate ? availableInnerWidth > layout2.unconstrainedWidth ? null : availableInnerWidth : null;
      label.setStyle("width", newWidth);
    }
    var newRect = label.getBoundingRect();
    textRect.width = newRect.width;
    var margin = (label.style.margin || 0) + 2.1;
    textRect.height = newRect.height + margin;
    textRect.y -= (textRect.height - oldHeight) / 2;
  }
}
function isPositionCenter(sectorShape) {
  return sectorShape.position === "center";
}
function pieLabelLayout(seriesModel) {
  var data = seriesModel.getData();
  var labelLayoutList = [];
  var cx;
  var cy;
  var hasLabelRotate = false;
  var minShowLabelRadian = (seriesModel.get("minShowLabelAngle") || 0) * RADIAN;
  var viewRect2 = data.getLayout("viewRect");
  var r = data.getLayout("r");
  var viewWidth = viewRect2.width;
  var viewLeft = viewRect2.x;
  var viewTop = viewRect2.y;
  var viewHeight = viewRect2.height;
  function setNotShow(el) {
    el.ignore = true;
  }
  function isLabelShown(label2) {
    if (!label2.ignore) {
      return true;
    }
    for (var key in label2.states) {
      if (label2.states[key].ignore === false) {
        return true;
      }
    }
    return false;
  }
  data.each(function(idx) {
    var sector = data.getItemGraphicEl(idx);
    var sectorShape = sector.shape;
    var label2 = sector.getTextContent();
    var labelLine2 = sector.getTextGuideLine();
    var itemModel = data.getItemModel(idx);
    var labelModel = itemModel.getModel("label");
    var labelPosition = labelModel.get("position") || itemModel.get(["emphasis", "label", "position"]);
    var labelDistance = labelModel.get("distanceToLabelLine");
    var labelAlignTo = labelModel.get("alignTo");
    var edgeDistance = parsePercent(labelModel.get("edgeDistance"), viewWidth);
    var bleedMargin = labelModel.get("bleedMargin");
    var labelLineModel = itemModel.getModel("labelLine");
    var labelLineLen = labelLineModel.get("length");
    labelLineLen = parsePercent(labelLineLen, viewWidth);
    var labelLineLen2 = labelLineModel.get("length2");
    labelLineLen2 = parsePercent(labelLineLen2, viewWidth);
    if (Math.abs(sectorShape.endAngle - sectorShape.startAngle) < minShowLabelRadian) {
      each$4(label2.states, setNotShow);
      label2.ignore = true;
      if (labelLine2) {
        each$4(labelLine2.states, setNotShow);
        labelLine2.ignore = true;
      }
      return;
    }
    if (!isLabelShown(label2)) {
      return;
    }
    var midAngle = (sectorShape.startAngle + sectorShape.endAngle) / 2;
    var nx = Math.cos(midAngle);
    var ny = Math.sin(midAngle);
    var textX;
    var textY;
    var linePoints2;
    var textAlign;
    cx = sectorShape.cx;
    cy = sectorShape.cy;
    var isLabelInside = labelPosition === "inside" || labelPosition === "inner";
    if (labelPosition === "center") {
      textX = sectorShape.cx;
      textY = sectorShape.cy;
      textAlign = "center";
    } else {
      var x1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * nx : sectorShape.r * nx) + cx;
      var y1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * ny : sectorShape.r * ny) + cy;
      textX = x1 + nx * 3;
      textY = y1 + ny * 3;
      if (!isLabelInside) {
        var x2 = x1 + nx * (labelLineLen + r - sectorShape.r);
        var y2 = y1 + ny * (labelLineLen + r - sectorShape.r);
        var x3 = x2 + (nx < 0 ? -1 : 1) * labelLineLen2;
        var y3 = y2;
        if (labelAlignTo === "edge") {
          textX = nx < 0 ? viewLeft + edgeDistance : viewLeft + viewWidth - edgeDistance;
        } else {
          textX = x3 + (nx < 0 ? -labelDistance : labelDistance);
        }
        textY = y3;
        linePoints2 = [[x1, y1], [x2, y2], [x3, y3]];
      }
      textAlign = isLabelInside ? "center" : labelAlignTo === "edge" ? nx > 0 ? "right" : "left" : nx > 0 ? "left" : "right";
    }
    var PI3 = Math.PI;
    var labelRotate = 0;
    var rotate2 = labelModel.get("rotate");
    if (isNumber(rotate2)) {
      labelRotate = rotate2 * (PI3 / 180);
    } else if (labelPosition === "center") {
      labelRotate = 0;
    } else if (rotate2 === "radial" || rotate2 === true) {
      var radialAngle = nx < 0 ? -midAngle + PI3 : -midAngle;
      labelRotate = radialAngle;
    } else if (rotate2 === "tangential" && labelPosition !== "outside" && labelPosition !== "outer") {
      var rad = Math.atan2(nx, ny);
      if (rad < 0) {
        rad = PI3 * 2 + rad;
      }
      var isDown = ny > 0;
      if (isDown) {
        rad = PI3 + rad;
      }
      labelRotate = rad - PI3;
    }
    hasLabelRotate = !!labelRotate;
    label2.x = textX;
    label2.y = textY;
    label2.rotation = labelRotate;
    label2.setStyle({
      verticalAlign: "middle"
    });
    if (!isLabelInside) {
      var textRect = label2.getBoundingRect().clone();
      textRect.applyTransform(label2.getComputedTransform());
      var margin = (label2.style.margin || 0) + 2.1;
      textRect.y -= margin / 2;
      textRect.height += margin;
      labelLayoutList.push({
        label: label2,
        labelLine: labelLine2,
        position: labelPosition,
        len: labelLineLen,
        len2: labelLineLen2,
        minTurnAngle: labelLineModel.get("minTurnAngle"),
        maxSurfaceAngle: labelLineModel.get("maxSurfaceAngle"),
        surfaceNormal: new Point$1(nx, ny),
        linePoints: linePoints2,
        textAlign,
        labelDistance,
        labelAlignTo,
        edgeDistance,
        bleedMargin,
        rect: textRect,
        unconstrainedWidth: textRect.width,
        labelStyleWidth: label2.style.width
      });
    } else {
      label2.setStyle({
        align: textAlign
      });
      var selectState2 = label2.states.select;
      if (selectState2) {
        selectState2.x += label2.x;
        selectState2.y += label2.y;
      }
    }
    sector.setTextConfig({
      inside: isLabelInside
    });
  });
  if (!hasLabelRotate && seriesModel.get("avoidLabelOverlap")) {
    avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop);
  }
  for (var i = 0; i < labelLayoutList.length; i++) {
    var layout2 = labelLayoutList[i];
    var label = layout2.label;
    var labelLine = layout2.labelLine;
    var notShowLabel = isNaN(label.x) || isNaN(label.y);
    if (label) {
      label.setStyle({
        align: layout2.textAlign
      });
      if (notShowLabel) {
        each$4(label.states, setNotShow);
        label.ignore = true;
      }
      var selectState = label.states.select;
      if (selectState) {
        selectState.x += label.x;
        selectState.y += label.y;
      }
    }
    if (labelLine) {
      var linePoints = layout2.linePoints;
      if (notShowLabel || !linePoints) {
        each$4(labelLine.states, setNotShow);
        labelLine.ignore = true;
      } else {
        limitTurnAngle(linePoints, layout2.minTurnAngle);
        limitSurfaceAngle(linePoints, layout2.surfaceNormal, layout2.maxSurfaceAngle);
        labelLine.setShape({
          points: linePoints
        });
        label.__hostTarget.textGuideLineConfig = {
          anchor: new Point$1(linePoints[0][0], linePoints[0][1])
        };
      }
    }
  }
}
var PiePiece = function(_super) {
  __extends(PiePiece2, _super);
  function PiePiece2(data, idx, startAngle) {
    var _this = _super.call(this) || this;
    _this.z2 = 2;
    var text = new ZRText$1();
    _this.setTextContent(text);
    _this.updateData(data, idx, startAngle, true);
    return _this;
  }
  PiePiece2.prototype.updateData = function(data, idx, startAngle, firstCreate) {
    var sector = this;
    var seriesModel = data.hostModel;
    var itemModel = data.getItemModel(idx);
    var emphasisModel = itemModel.getModel("emphasis");
    var layout2 = data.getItemLayout(idx);
    var sectorShape = extend(getSectorCornerRadius(itemModel.getModel("itemStyle"), layout2, true), layout2);
    if (isNaN(sectorShape.startAngle)) {
      sector.setShape(sectorShape);
      return;
    }
    if (firstCreate) {
      sector.setShape(sectorShape);
      var animationType = seriesModel.getShallow("animationType");
      if (seriesModel.ecModel.ssr) {
        initProps(sector, {
          scaleX: 0,
          scaleY: 0
        }, seriesModel, {
          dataIndex: idx,
          isFrom: true
        });
        sector.originX = sectorShape.cx;
        sector.originY = sectorShape.cy;
      } else if (animationType === "scale") {
        sector.shape.r = layout2.r0;
        initProps(sector, {
          shape: {
            r: layout2.r
          }
        }, seriesModel, idx);
      } else {
        if (startAngle != null) {
          sector.setShape({
            startAngle,
            endAngle: startAngle
          });
          initProps(sector, {
            shape: {
              startAngle: layout2.startAngle,
              endAngle: layout2.endAngle
            }
          }, seriesModel, idx);
        } else {
          sector.shape.endAngle = layout2.startAngle;
          updateProps$1(sector, {
            shape: {
              endAngle: layout2.endAngle
            }
          }, seriesModel, idx);
        }
      }
    } else {
      saveOldStyle(sector);
      updateProps$1(sector, {
        shape: sectorShape
      }, seriesModel, idx);
    }
    sector.useStyle(data.getItemVisual(idx, "style"));
    setStatesStylesFromModel(sector, itemModel);
    var midAngle = (layout2.startAngle + layout2.endAngle) / 2;
    var offset = seriesModel.get("selectedOffset");
    var dx = Math.cos(midAngle) * offset;
    var dy = Math.sin(midAngle) * offset;
    var cursorStyle = itemModel.getShallow("cursor");
    cursorStyle && sector.attr("cursor", cursorStyle);
    this._updateLabel(seriesModel, data, idx);
    sector.ensureState("emphasis").shape = extend({
      r: layout2.r + (emphasisModel.get("scale") ? emphasisModel.get("scaleSize") || 0 : 0)
    }, getSectorCornerRadius(emphasisModel.getModel("itemStyle"), layout2));
    extend(sector.ensureState("select"), {
      x: dx,
      y: dy,
      shape: getSectorCornerRadius(itemModel.getModel(["select", "itemStyle"]), layout2)
    });
    extend(sector.ensureState("blur"), {
      shape: getSectorCornerRadius(itemModel.getModel(["blur", "itemStyle"]), layout2)
    });
    var labelLine = sector.getTextGuideLine();
    var labelText = sector.getTextContent();
    labelLine && extend(labelLine.ensureState("select"), {
      x: dx,
      y: dy
    });
    extend(labelText.ensureState("select"), {
      x: dx,
      y: dy
    });
    toggleHoverEmphasis(this, emphasisModel.get("focus"), emphasisModel.get("blurScope"), emphasisModel.get("disabled"));
  };
  PiePiece2.prototype._updateLabel = function(seriesModel, data, idx) {
    var sector = this;
    var itemModel = data.getItemModel(idx);
    var labelLineModel = itemModel.getModel("labelLine");
    var style2 = data.getItemVisual(idx, "style");
    var visualColor = style2 && style2.fill;
    var visualOpacity = style2 && style2.opacity;
    setLabelStyle(sector, getLabelStatesModels(itemModel), {
      labelFetcher: data.hostModel,
      labelDataIndex: idx,
      inheritColor: visualColor,
      defaultOpacity: visualOpacity,
      defaultText: seriesModel.getFormattedLabel(idx, "normal") || data.getName(idx)
    });
    var labelText = sector.getTextContent();
    sector.setTextConfig({
      position: null,
      rotation: null
    });
    labelText.attr({
      z2: 10
    });
    var labelPosition = seriesModel.get(["label", "position"]);
    if (labelPosition !== "outside" && labelPosition !== "outer") {
      sector.removeTextGuideLine();
    } else {
      var polyline = this.getTextGuideLine();
      if (!polyline) {
        polyline = new Polyline$1();
        this.setTextGuideLine(polyline);
      }
      setLabelLineStyle(this, getLabelLineStatesModels(itemModel), {
        stroke: visualColor,
        opacity: retrieve3(labelLineModel.get(["lineStyle", "opacity"]), visualOpacity, 1)
      });
    }
  };
  return PiePiece2;
}(Sector$1);
var PieView = function(_super) {
  __extends(PieView2, _super);
  function PieView2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.ignoreLabelLineUpdate = true;
    return _this;
  }
  PieView2.prototype.render = function(seriesModel, ecModel, api, payload) {
    var data = seriesModel.getData();
    var oldData = this._data;
    var group = this.group;
    var startAngle;
    if (!oldData && data.count() > 0) {
      var shape = data.getItemLayout(0);
      for (var s = 1; isNaN(shape && shape.startAngle) && s < data.count(); ++s) {
        shape = data.getItemLayout(s);
      }
      if (shape) {
        startAngle = shape.startAngle;
      }
    }
    if (this._emptyCircleSector) {
      group.remove(this._emptyCircleSector);
    }
    if (data.count() === 0 && seriesModel.get("showEmptyCircle")) {
      var sector = new Sector$1({
        shape: getBasicPieLayout(seriesModel, api)
      });
      sector.useStyle(seriesModel.getModel("emptyCircleStyle").getItemStyle());
      this._emptyCircleSector = sector;
      group.add(sector);
    }
    data.diff(oldData).add(function(idx) {
      var piePiece = new PiePiece(data, idx, startAngle);
      data.setItemGraphicEl(idx, piePiece);
      group.add(piePiece);
    }).update(function(newIdx, oldIdx) {
      var piePiece = oldData.getItemGraphicEl(oldIdx);
      piePiece.updateData(data, newIdx, startAngle);
      piePiece.off("click");
      group.add(piePiece);
      data.setItemGraphicEl(newIdx, piePiece);
    }).remove(function(idx) {
      var piePiece = oldData.getItemGraphicEl(idx);
      removeElementWithFadeOut(piePiece, seriesModel, idx);
    }).execute();
    pieLabelLayout(seriesModel);
    if (seriesModel.get("animationTypeUpdate") !== "expansion") {
      this._data = data;
    }
  };
  PieView2.prototype.dispose = function() {
  };
  PieView2.prototype.containPoint = function(point, seriesModel) {
    var data = seriesModel.getData();
    var itemLayout = data.getItemLayout(0);
    if (itemLayout) {
      var dx = point[0] - itemLayout.cx;
      var dy = point[1] - itemLayout.cy;
      var radius = Math.sqrt(dx * dx + dy * dy);
      return radius <= itemLayout.r && radius >= itemLayout.r0;
    }
  };
  PieView2.type = "pie";
  return PieView2;
}(ChartView$1);
var PieView$1 = PieView;
function createSeriesDataSimply(seriesModel, opt, nameList) {
  opt = isArray(opt) && {
    coordDimensions: opt
  } || extend({
    encodeDefine: seriesModel.getEncode()
  }, opt);
  var source = seriesModel.getSource();
  var dimensions = prepareSeriesDataSchema(source, opt).dimensions;
  var list = new SeriesData$1(dimensions, seriesModel);
  list.initData(source, nameList);
  return list;
}
var LegendVisualProvider = function() {
  function LegendVisualProvider2(getDataWithEncodedVisual, getRawData2) {
    this._getDataWithEncodedVisual = getDataWithEncodedVisual;
    this._getRawData = getRawData2;
  }
  LegendVisualProvider2.prototype.getAllNames = function() {
    var rawData = this._getRawData();
    return rawData.mapArray(rawData.getName);
  };
  LegendVisualProvider2.prototype.containName = function(name) {
    var rawData = this._getRawData();
    return rawData.indexOfName(name) >= 0;
  };
  LegendVisualProvider2.prototype.indexOfName = function(name) {
    var dataWithEncodedVisual = this._getDataWithEncodedVisual();
    return dataWithEncodedVisual.indexOfName(name);
  };
  LegendVisualProvider2.prototype.getItemVisual = function(dataIndex, key) {
    var dataWithEncodedVisual = this._getDataWithEncodedVisual();
    return dataWithEncodedVisual.getItemVisual(dataIndex, key);
  };
  return LegendVisualProvider2;
}();
var LegendVisualProvider$1 = LegendVisualProvider;
var innerData = makeInner();
var PieSeriesModel = function(_super) {
  __extends(PieSeriesModel2, _super);
  function PieSeriesModel2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  PieSeriesModel2.prototype.init = function(option) {
    _super.prototype.init.apply(this, arguments);
    this.legendVisualProvider = new LegendVisualProvider$1(bind$1(this.getData, this), bind$1(this.getRawData, this));
    this._defaultLabelLine(option);
  };
  PieSeriesModel2.prototype.mergeOption = function() {
    _super.prototype.mergeOption.apply(this, arguments);
  };
  PieSeriesModel2.prototype.getInitialData = function() {
    return createSeriesDataSimply(this, {
      coordDimensions: ["value"],
      encodeDefaulter: curry$1(makeSeriesEncodeForNameBased, this)
    });
  };
  PieSeriesModel2.prototype.getDataParams = function(dataIndex) {
    var data = this.getData();
    var dataInner = innerData(data);
    var seats = dataInner.seats;
    if (!seats) {
      var valueList_1 = [];
      data.each(data.mapDimension("value"), function(value) {
        valueList_1.push(value);
      });
      seats = dataInner.seats = getPercentSeats(valueList_1, data.hostModel.get("percentPrecision"));
    }
    var params = _super.prototype.getDataParams.call(this, dataIndex);
    params.percent = seats[dataIndex] || 0;
    params.$vars.push("percent");
    return params;
  };
  PieSeriesModel2.prototype._defaultLabelLine = function(option) {
    defaultEmphasis(option, "labelLine", ["show"]);
    var labelLineNormalOpt = option.labelLine;
    var labelLineEmphasisOpt = option.emphasis.labelLine;
    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;
    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;
  };
  PieSeriesModel2.type = "series.pie";
  PieSeriesModel2.defaultOption = {
    z: 2,
    legendHoverLink: true,
    colorBy: "data",
    center: ["50%", "50%"],
    radius: [0, "75%"],
    clockwise: true,
    startAngle: 90,
    minAngle: 0,
    minShowLabelAngle: 0,
    selectedOffset: 10,
    percentPrecision: 2,
    stillShowZeroSum: true,
    left: 0,
    top: 0,
    right: 0,
    bottom: 0,
    width: null,
    height: null,
    label: {
      rotate: 0,
      show: true,
      overflow: "truncate",
      position: "outer",
      alignTo: "none",
      edgeDistance: "25%",
      bleedMargin: 10,
      distanceToLabelLine: 5
    },
    labelLine: {
      show: true,
      length: 15,
      length2: 15,
      smooth: false,
      minTurnAngle: 90,
      maxSurfaceAngle: 90,
      lineStyle: {
        width: 1,
        type: "solid"
      }
    },
    itemStyle: {
      borderWidth: 1,
      borderJoin: "round"
    },
    showEmptyCircle: true,
    emptyCircleStyle: {
      color: "lightgray",
      opacity: 1
    },
    labelLayout: {
      hideOverlap: true
    },
    emphasis: {
      scale: true,
      scaleSize: 5
    },
    avoidLabelOverlap: true,
    animationType: "expansion",
    animationDuration: 1e3,
    animationTypeUpdate: "transition",
    animationEasingUpdate: "cubicInOut",
    animationDurationUpdate: 500,
    animationEasing: "cubicInOut"
  };
  return PieSeriesModel2;
}(SeriesModel$1);
var PieSeriesModel$1 = PieSeriesModel;
function negativeDataFilter(seriesType2) {
  return {
    seriesType: seriesType2,
    reset: function(seriesModel, ecModel) {
      var data = seriesModel.getData();
      data.filterSelf(function(idx) {
        var valueDim = data.mapDimension("value");
        var curValue = data.get(valueDim, idx);
        if (isNumber(curValue) && !isNaN(curValue) && curValue < 0) {
          return false;
        }
        return true;
      });
    }
  };
}
function install$6(registers) {
  registers.registerChartView(PieView$1);
  registers.registerSeriesModel(PieSeriesModel$1);
  createLegacyDataSelectAction("pie", registers.registerAction);
  registers.registerLayout(curry$1(pieLayout, "pie"));
  registers.registerProcessor(dataFilter("pie"));
  registers.registerProcessor(negativeDataFilter("pie"));
}
function layout(gridModel, axisModel, opt) {
  opt = opt || {};
  var grid = gridModel.coordinateSystem;
  var axis = axisModel.axis;
  var layout2 = {};
  var otherAxisOnZeroOf = axis.getAxesOnZeroOf()[0];
  var rawAxisPosition = axis.position;
  var axisPosition = otherAxisOnZeroOf ? "onZero" : rawAxisPosition;
  var axisDim = axis.dim;
  var rect = grid.getRect();
  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];
  var idx = {
    left: 0,
    right: 1,
    top: 0,
    bottom: 1,
    onZero: 2
  };
  var axisOffset = axisModel.get("offset") || 0;
  var posBound = axisDim === "x" ? [rectBound[2] - axisOffset, rectBound[3] + axisOffset] : [rectBound[0] - axisOffset, rectBound[1] + axisOffset];
  if (otherAxisOnZeroOf) {
    var onZeroCoord = otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));
    posBound[idx.onZero] = Math.max(Math.min(onZeroCoord, posBound[1]), posBound[0]);
  }
  layout2.position = [axisDim === "y" ? posBound[idx[axisPosition]] : rectBound[0], axisDim === "x" ? posBound[idx[axisPosition]] : rectBound[3]];
  layout2.rotation = Math.PI / 2 * (axisDim === "x" ? 0 : 1);
  var dirMap = {
    top: -1,
    bottom: 1,
    left: -1,
    right: 1
  };
  layout2.labelDirection = layout2.tickDirection = layout2.nameDirection = dirMap[rawAxisPosition];
  layout2.labelOffset = otherAxisOnZeroOf ? posBound[idx[rawAxisPosition]] - posBound[idx.onZero] : 0;
  if (axisModel.get(["axisTick", "inside"])) {
    layout2.tickDirection = -layout2.tickDirection;
  }
  if (retrieve(opt.labelInside, axisModel.get(["axisLabel", "inside"]))) {
    layout2.labelDirection = -layout2.labelDirection;
  }
  var labelRotate = axisModel.get(["axisLabel", "rotate"]);
  layout2.labelRotate = axisPosition === "top" ? -labelRotate : labelRotate;
  layout2.z2 = 1;
  return layout2;
}
var PI = Math.PI;
var AxisBuilder = function() {
  function AxisBuilder2(axisModel, opt) {
    this.group = new Group$3();
    this.opt = opt;
    this.axisModel = axisModel;
    defaults(opt, {
      labelOffset: 0,
      nameDirection: 1,
      tickDirection: 1,
      labelDirection: 1,
      silent: true,
      handleAutoShown: function() {
        return true;
      }
    });
    var transformGroup = new Group$3({
      x: opt.position[0],
      y: opt.position[1],
      rotation: opt.rotation
    });
    transformGroup.updateTransform();
    this._transformGroup = transformGroup;
  }
  AxisBuilder2.prototype.hasBuilder = function(name) {
    return !!builders[name];
  };
  AxisBuilder2.prototype.add = function(name) {
    builders[name](this.opt, this.axisModel, this.group, this._transformGroup);
  };
  AxisBuilder2.prototype.getGroup = function() {
    return this.group;
  };
  AxisBuilder2.innerTextLayout = function(axisRotation, textRotation, direction) {
    var rotationDiff = remRadian(textRotation - axisRotation);
    var textAlign;
    var textVerticalAlign;
    if (isRadianAroundZero(rotationDiff)) {
      textVerticalAlign = direction > 0 ? "top" : "bottom";
      textAlign = "center";
    } else if (isRadianAroundZero(rotationDiff - PI)) {
      textVerticalAlign = direction > 0 ? "bottom" : "top";
      textAlign = "center";
    } else {
      textVerticalAlign = "middle";
      if (rotationDiff > 0 && rotationDiff < PI) {
        textAlign = direction > 0 ? "right" : "left";
      } else {
        textAlign = direction > 0 ? "left" : "right";
      }
    }
    return {
      rotation: rotationDiff,
      textAlign,
      textVerticalAlign
    };
  };
  AxisBuilder2.makeAxisEventDataBase = function(axisModel) {
    var eventData = {
      componentType: axisModel.mainType,
      componentIndex: axisModel.componentIndex
    };
    eventData[axisModel.mainType + "Index"] = axisModel.componentIndex;
    return eventData;
  };
  AxisBuilder2.isLabelSilent = function(axisModel) {
    var tooltipOpt = axisModel.get("tooltip");
    return axisModel.get("silent") || !(axisModel.get("triggerEvent") || tooltipOpt && tooltipOpt.show);
  };
  return AxisBuilder2;
}();
var builders = {
  axisLine: function(opt, axisModel, group, transformGroup) {
    var shown = axisModel.get(["axisLine", "show"]);
    if (shown === "auto" && opt.handleAutoShown) {
      shown = opt.handleAutoShown("axisLine");
    }
    if (!shown) {
      return;
    }
    var extent3 = axisModel.axis.getExtent();
    var matrix = transformGroup.transform;
    var pt12 = [extent3[0], 0];
    var pt22 = [extent3[1], 0];
    var inverse = pt12[0] > pt22[0];
    if (matrix) {
      applyTransform$1(pt12, pt12, matrix);
      applyTransform$1(pt22, pt22, matrix);
    }
    var lineStyle = extend({
      lineCap: "round"
    }, axisModel.getModel(["axisLine", "lineStyle"]).getLineStyle());
    var line = new Line$1({
      shape: {
        x1: pt12[0],
        y1: pt12[1],
        x2: pt22[0],
        y2: pt22[1]
      },
      style: lineStyle,
      strokeContainThreshold: opt.strokeContainThreshold || 5,
      silent: true,
      z2: 1
    });
    subPixelOptimizeLine(line.shape, line.style.lineWidth);
    line.anid = "line";
    group.add(line);
    var arrows = axisModel.get(["axisLine", "symbol"]);
    if (arrows != null) {
      var arrowSize = axisModel.get(["axisLine", "symbolSize"]);
      if (isString(arrows)) {
        arrows = [arrows, arrows];
      }
      if (isString(arrowSize) || isNumber(arrowSize)) {
        arrowSize = [arrowSize, arrowSize];
      }
      var arrowOffset = normalizeSymbolOffset(axisModel.get(["axisLine", "symbolOffset"]) || 0, arrowSize);
      var symbolWidth_1 = arrowSize[0];
      var symbolHeight_1 = arrowSize[1];
      each$4([{
        rotate: opt.rotation + Math.PI / 2,
        offset: arrowOffset[0],
        r: 0
      }, {
        rotate: opt.rotation - Math.PI / 2,
        offset: arrowOffset[1],
        r: Math.sqrt((pt12[0] - pt22[0]) * (pt12[0] - pt22[0]) + (pt12[1] - pt22[1]) * (pt12[1] - pt22[1]))
      }], function(point, index) {
        if (arrows[index] !== "none" && arrows[index] != null) {
          var symbol = createSymbol(arrows[index], -symbolWidth_1 / 2, -symbolHeight_1 / 2, symbolWidth_1, symbolHeight_1, lineStyle.stroke, true);
          var r = point.r + point.offset;
          var pt = inverse ? pt22 : pt12;
          symbol.attr({
            rotation: point.rotate,
            x: pt[0] + r * Math.cos(opt.rotation),
            y: pt[1] - r * Math.sin(opt.rotation),
            silent: true,
            z2: 11
          });
          group.add(symbol);
        }
      });
    }
  },
  axisTickLabel: function(opt, axisModel, group, transformGroup) {
    var ticksEls = buildAxisMajorTicks(group, transformGroup, axisModel, opt);
    var labelEls = buildAxisLabel(group, transformGroup, axisModel, opt);
    fixMinMaxLabelShow(axisModel, labelEls, ticksEls);
    buildAxisMinorTicks(group, transformGroup, axisModel, opt.tickDirection);
    if (axisModel.get(["axisLabel", "hideOverlap"])) {
      var labelList = prepareLayoutList(map$1(labelEls, function(label) {
        return {
          label,
          priority: label.z2,
          defaultAttr: {
            ignore: label.ignore
          }
        };
      }));
      hideOverlap(labelList);
    }
  },
  axisName: function(opt, axisModel, group, transformGroup) {
    var name = retrieve(opt.axisName, axisModel.get("name"));
    if (!name) {
      return;
    }
    var nameLocation = axisModel.get("nameLocation");
    var nameDirection = opt.nameDirection;
    var textStyleModel = axisModel.getModel("nameTextStyle");
    var gap = axisModel.get("nameGap") || 0;
    var extent3 = axisModel.axis.getExtent();
    var gapSignal = extent3[0] > extent3[1] ? -1 : 1;
    var pos = [
      nameLocation === "start" ? extent3[0] - gapSignal * gap : nameLocation === "end" ? extent3[1] + gapSignal * gap : (extent3[0] + extent3[1]) / 2,
      isNameLocationCenter(nameLocation) ? opt.labelOffset + nameDirection * gap : 0
    ];
    var labelLayout;
    var nameRotation = axisModel.get("nameRotate");
    if (nameRotation != null) {
      nameRotation = nameRotation * PI / 180;
    }
    var axisNameAvailableWidth;
    if (isNameLocationCenter(nameLocation)) {
      labelLayout = AxisBuilder.innerTextLayout(
        opt.rotation,
        nameRotation != null ? nameRotation : opt.rotation,
        nameDirection
      );
    } else {
      labelLayout = endTextLayout(opt.rotation, nameLocation, nameRotation || 0, extent3);
      axisNameAvailableWidth = opt.axisNameAvailableWidth;
      if (axisNameAvailableWidth != null) {
        axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));
        !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);
      }
    }
    var textFont = textStyleModel.getFont();
    var truncateOpt = axisModel.get("nameTruncate", true) || {};
    var ellipsis = truncateOpt.ellipsis;
    var maxWidth = retrieve(opt.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth);
    var textEl = new ZRText$1({
      x: pos[0],
      y: pos[1],
      rotation: labelLayout.rotation,
      silent: AxisBuilder.isLabelSilent(axisModel),
      style: createTextStyle(textStyleModel, {
        text: name,
        font: textFont,
        overflow: "truncate",
        width: maxWidth,
        ellipsis,
        fill: textStyleModel.getTextColor() || axisModel.get(["axisLine", "lineStyle", "color"]),
        align: textStyleModel.get("align") || labelLayout.textAlign,
        verticalAlign: textStyleModel.get("verticalAlign") || labelLayout.textVerticalAlign
      }),
      z2: 1
    });
    setTooltipConfig({
      el: textEl,
      componentModel: axisModel,
      itemName: name
    });
    textEl.__fullText = name;
    textEl.anid = "name";
    if (axisModel.get("triggerEvent")) {
      var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);
      eventData.targetType = "axisName";
      eventData.name = name;
      getECData(textEl).eventData = eventData;
    }
    transformGroup.add(textEl);
    textEl.updateTransform();
    group.add(textEl);
    textEl.decomposeTransform();
  }
};
function endTextLayout(rotation, textPosition, textRotate, extent3) {
  var rotationDiff = remRadian(textRotate - rotation);
  var textAlign;
  var textVerticalAlign;
  var inverse = extent3[0] > extent3[1];
  var onLeft = textPosition === "start" && !inverse || textPosition !== "start" && inverse;
  if (isRadianAroundZero(rotationDiff - PI / 2)) {
    textVerticalAlign = onLeft ? "bottom" : "top";
    textAlign = "center";
  } else if (isRadianAroundZero(rotationDiff - PI * 1.5)) {
    textVerticalAlign = onLeft ? "top" : "bottom";
    textAlign = "center";
  } else {
    textVerticalAlign = "middle";
    if (rotationDiff < PI * 1.5 && rotationDiff > PI / 2) {
      textAlign = onLeft ? "left" : "right";
    } else {
      textAlign = onLeft ? "right" : "left";
    }
  }
  return {
    rotation: rotationDiff,
    textAlign,
    textVerticalAlign
  };
}
function fixMinMaxLabelShow(axisModel, labelEls, tickEls) {
  if (shouldShowAllLabels(axisModel.axis)) {
    return;
  }
  var showMinLabel = axisModel.get(["axisLabel", "showMinLabel"]);
  var showMaxLabel = axisModel.get(["axisLabel", "showMaxLabel"]);
  labelEls = labelEls || [];
  tickEls = tickEls || [];
  var firstLabel = labelEls[0];
  var nextLabel = labelEls[1];
  var lastLabel = labelEls[labelEls.length - 1];
  var prevLabel = labelEls[labelEls.length - 2];
  var firstTick = tickEls[0];
  var nextTick2 = tickEls[1];
  var lastTick = tickEls[tickEls.length - 1];
  var prevTick = tickEls[tickEls.length - 2];
  if (showMinLabel === false) {
    ignoreEl(firstLabel);
    ignoreEl(firstTick);
  } else if (isTwoLabelOverlapped(firstLabel, nextLabel)) {
    if (showMinLabel) {
      ignoreEl(nextLabel);
      ignoreEl(nextTick2);
    } else {
      ignoreEl(firstLabel);
      ignoreEl(firstTick);
    }
  }
  if (showMaxLabel === false) {
    ignoreEl(lastLabel);
    ignoreEl(lastTick);
  } else if (isTwoLabelOverlapped(prevLabel, lastLabel)) {
    if (showMaxLabel) {
      ignoreEl(prevLabel);
      ignoreEl(prevTick);
    } else {
      ignoreEl(lastLabel);
      ignoreEl(lastTick);
    }
  }
}
function ignoreEl(el) {
  el && (el.ignore = true);
}
function isTwoLabelOverlapped(current, next) {
  var firstRect = current && current.getBoundingRect().clone();
  var nextRect = next && next.getBoundingRect().clone();
  if (!firstRect || !nextRect) {
    return;
  }
  var mRotationBack = identity([]);
  rotate(mRotationBack, mRotationBack, -current.rotation);
  firstRect.applyTransform(mul([], mRotationBack, current.getLocalTransform()));
  nextRect.applyTransform(mul([], mRotationBack, next.getLocalTransform()));
  return firstRect.intersect(nextRect);
}
function isNameLocationCenter(nameLocation) {
  return nameLocation === "middle" || nameLocation === "center";
}
function createTicks(ticksCoords, tickTransform, tickEndCoord, tickLineStyle, anidPrefix) {
  var tickEls = [];
  var pt12 = [];
  var pt22 = [];
  for (var i = 0; i < ticksCoords.length; i++) {
    var tickCoord = ticksCoords[i].coord;
    pt12[0] = tickCoord;
    pt12[1] = 0;
    pt22[0] = tickCoord;
    pt22[1] = tickEndCoord;
    if (tickTransform) {
      applyTransform$1(pt12, pt12, tickTransform);
      applyTransform$1(pt22, pt22, tickTransform);
    }
    var tickEl = new Line$1({
      shape: {
        x1: pt12[0],
        y1: pt12[1],
        x2: pt22[0],
        y2: pt22[1]
      },
      style: tickLineStyle,
      z2: 2,
      autoBatch: true,
      silent: true
    });
    subPixelOptimizeLine(tickEl.shape, tickEl.style.lineWidth);
    tickEl.anid = anidPrefix + "_" + ticksCoords[i].tickValue;
    tickEls.push(tickEl);
  }
  return tickEls;
}
function buildAxisMajorTicks(group, transformGroup, axisModel, opt) {
  var axis = axisModel.axis;
  var tickModel = axisModel.getModel("axisTick");
  var shown = tickModel.get("show");
  if (shown === "auto" && opt.handleAutoShown) {
    shown = opt.handleAutoShown("axisTick");
  }
  if (!shown || axis.scale.isBlank()) {
    return;
  }
  var lineStyleModel = tickModel.getModel("lineStyle");
  var tickEndCoord = opt.tickDirection * tickModel.get("length");
  var ticksCoords = axis.getTicksCoords();
  var ticksEls = createTicks(ticksCoords, transformGroup.transform, tickEndCoord, defaults(lineStyleModel.getLineStyle(), {
    stroke: axisModel.get(["axisLine", "lineStyle", "color"])
  }), "ticks");
  for (var i = 0; i < ticksEls.length; i++) {
    group.add(ticksEls[i]);
  }
  return ticksEls;
}
function buildAxisMinorTicks(group, transformGroup, axisModel, tickDirection) {
  var axis = axisModel.axis;
  var minorTickModel = axisModel.getModel("minorTick");
  if (!minorTickModel.get("show") || axis.scale.isBlank()) {
    return;
  }
  var minorTicksCoords = axis.getMinorTicksCoords();
  if (!minorTicksCoords.length) {
    return;
  }
  var lineStyleModel = minorTickModel.getModel("lineStyle");
  var tickEndCoord = tickDirection * minorTickModel.get("length");
  var minorTickLineStyle = defaults(lineStyleModel.getLineStyle(), defaults(axisModel.getModel("axisTick").getLineStyle(), {
    stroke: axisModel.get(["axisLine", "lineStyle", "color"])
  }));
  for (var i = 0; i < minorTicksCoords.length; i++) {
    var minorTicksEls = createTicks(minorTicksCoords[i], transformGroup.transform, tickEndCoord, minorTickLineStyle, "minorticks_" + i);
    for (var k2 = 0; k2 < minorTicksEls.length; k2++) {
      group.add(minorTicksEls[k2]);
    }
  }
}
function buildAxisLabel(group, transformGroup, axisModel, opt) {
  var axis = axisModel.axis;
  var show = retrieve(opt.axisLabelShow, axisModel.get(["axisLabel", "show"]));
  if (!show || axis.scale.isBlank()) {
    return;
  }
  var labelModel = axisModel.getModel("axisLabel");
  var labelMargin = labelModel.get("margin");
  var labels = axis.getViewLabels();
  var labelRotation = (retrieve(opt.labelRotate, labelModel.get("rotate")) || 0) * PI / 180;
  var labelLayout = AxisBuilder.innerTextLayout(opt.rotation, labelRotation, opt.labelDirection);
  var rawCategoryData = axisModel.getCategories && axisModel.getCategories(true);
  var labelEls = [];
  var silent = AxisBuilder.isLabelSilent(axisModel);
  var triggerEvent = axisModel.get("triggerEvent");
  each$4(labels, function(labelItem, index) {
    var tickValue = axis.scale.type === "ordinal" ? axis.scale.getRawOrdinalNumber(labelItem.tickValue) : labelItem.tickValue;
    var formattedLabel = labelItem.formattedLabel;
    var rawLabel = labelItem.rawLabel;
    var itemLabelModel = labelModel;
    if (rawCategoryData && rawCategoryData[tickValue]) {
      var rawCategoryItem = rawCategoryData[tickValue];
      if (isObject$2(rawCategoryItem) && rawCategoryItem.textStyle) {
        itemLabelModel = new Model$1(rawCategoryItem.textStyle, labelModel, axisModel.ecModel);
      }
    }
    var textColor = itemLabelModel.getTextColor() || axisModel.get(["axisLine", "lineStyle", "color"]);
    var tickCoord = axis.dataToCoord(tickValue);
    var textEl = new ZRText$1({
      x: tickCoord,
      y: opt.labelOffset + opt.labelDirection * labelMargin,
      rotation: labelLayout.rotation,
      silent,
      z2: 10 + (labelItem.level || 0),
      style: createTextStyle(itemLabelModel, {
        text: formattedLabel,
        align: itemLabelModel.getShallow("align", true) || labelLayout.textAlign,
        verticalAlign: itemLabelModel.getShallow("verticalAlign", true) || itemLabelModel.getShallow("baseline", true) || labelLayout.textVerticalAlign,
        fill: isFunction(textColor) ? textColor(
          axis.type === "category" ? rawLabel : axis.type === "value" ? tickValue + "" : tickValue,
          index
        ) : textColor
      })
    });
    textEl.anid = "label_" + tickValue;
    if (triggerEvent) {
      var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);
      eventData.targetType = "axisLabel";
      eventData.value = rawLabel;
      eventData.tickIndex = index;
      if (axis.type === "category") {
        eventData.dataIndex = tickValue;
      }
      getECData(textEl).eventData = eventData;
    }
    transformGroup.add(textEl);
    textEl.updateTransform();
    labelEls.push(textEl);
    group.add(textEl);
    textEl.decomposeTransform();
  });
  return labelEls;
}
var AxisBuilder$1 = AxisBuilder;
function collect(ecModel, api) {
  var result = {
    axesInfo: {},
    seriesInvolved: false,
    coordSysAxesInfo: {},
    coordSysMap: {}
  };
  collectAxesInfo(result, ecModel, api);
  result.seriesInvolved && collectSeriesInfo(result, ecModel);
  return result;
}
function collectAxesInfo(result, ecModel, api) {
  var globalTooltipModel = ecModel.getComponent("tooltip");
  var globalAxisPointerModel = ecModel.getComponent("axisPointer");
  var linksOption = globalAxisPointerModel.get("link", true) || [];
  var linkGroups = [];
  each$4(api.getCoordinateSystems(), function(coordSys) {
    if (!coordSys.axisPointerEnabled) {
      return;
    }
    var coordSysKey = makeKey(coordSys.model);
    var axesInfoInCoordSys = result.coordSysAxesInfo[coordSysKey] = {};
    result.coordSysMap[coordSysKey] = coordSys;
    var coordSysModel = coordSys.model;
    var baseTooltipModel = coordSysModel.getModel("tooltip", globalTooltipModel);
    each$4(coordSys.getAxes(), curry$1(saveTooltipAxisInfo, false, null));
    if (coordSys.getTooltipAxes && globalTooltipModel && baseTooltipModel.get("show")) {
      var triggerAxis = baseTooltipModel.get("trigger") === "axis";
      var cross = baseTooltipModel.get(["axisPointer", "type"]) === "cross";
      var tooltipAxes = coordSys.getTooltipAxes(baseTooltipModel.get(["axisPointer", "axis"]));
      if (triggerAxis || cross) {
        each$4(tooltipAxes.baseAxes, curry$1(saveTooltipAxisInfo, cross ? "cross" : true, triggerAxis));
      }
      if (cross) {
        each$4(tooltipAxes.otherAxes, curry$1(saveTooltipAxisInfo, "cross", false));
      }
    }
    function saveTooltipAxisInfo(fromTooltip, triggerTooltip, axis) {
      var axisPointerModel = axis.model.getModel("axisPointer", globalAxisPointerModel);
      var axisPointerShow = axisPointerModel.get("show");
      if (!axisPointerShow || axisPointerShow === "auto" && !fromTooltip && !isHandleTrigger(axisPointerModel)) {
        return;
      }
      if (triggerTooltip == null) {
        triggerTooltip = axisPointerModel.get("triggerTooltip");
      }
      axisPointerModel = fromTooltip ? makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) : axisPointerModel;
      var snap = axisPointerModel.get("snap");
      var triggerEmphasis = axisPointerModel.get("triggerEmphasis");
      var axisKey = makeKey(axis.model);
      var involveSeries = triggerTooltip || snap || axis.type === "category";
      var axisInfo = result.axesInfo[axisKey] = {
        key: axisKey,
        axis,
        coordSys,
        axisPointerModel,
        triggerTooltip,
        triggerEmphasis,
        involveSeries,
        snap,
        useHandle: isHandleTrigger(axisPointerModel),
        seriesModels: [],
        linkGroup: null
      };
      axesInfoInCoordSys[axisKey] = axisInfo;
      result.seriesInvolved = result.seriesInvolved || involveSeries;
      var groupIndex = getLinkGroupIndex(linksOption, axis);
      if (groupIndex != null) {
        var linkGroup = linkGroups[groupIndex] || (linkGroups[groupIndex] = {
          axesInfo: {}
        });
        linkGroup.axesInfo[axisKey] = axisInfo;
        linkGroup.mapper = linksOption[groupIndex].mapper;
        axisInfo.linkGroup = linkGroup;
      }
    }
  });
}
function makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) {
  var tooltipAxisPointerModel = baseTooltipModel.getModel("axisPointer");
  var fields = ["type", "snap", "lineStyle", "shadowStyle", "label", "animation", "animationDurationUpdate", "animationEasingUpdate", "z"];
  var volatileOption = {};
  each$4(fields, function(field) {
    volatileOption[field] = clone$2(tooltipAxisPointerModel.get(field));
  });
  volatileOption.snap = axis.type !== "category" && !!triggerTooltip;
  if (tooltipAxisPointerModel.get("type") === "cross") {
    volatileOption.type = "line";
  }
  var labelOption = volatileOption.label || (volatileOption.label = {});
  labelOption.show == null && (labelOption.show = false);
  if (fromTooltip === "cross") {
    var tooltipAxisPointerLabelShow = tooltipAxisPointerModel.get(["label", "show"]);
    labelOption.show = tooltipAxisPointerLabelShow != null ? tooltipAxisPointerLabelShow : true;
    if (!triggerTooltip) {
      var crossStyle = volatileOption.lineStyle = tooltipAxisPointerModel.get("crossStyle");
      crossStyle && defaults(labelOption, crossStyle.textStyle);
    }
  }
  return axis.model.getModel("axisPointer", new Model$1(volatileOption, globalAxisPointerModel, ecModel));
}
function collectSeriesInfo(result, ecModel) {
  ecModel.eachSeries(function(seriesModel) {
    var coordSys = seriesModel.coordinateSystem;
    var seriesTooltipTrigger = seriesModel.get(["tooltip", "trigger"], true);
    var seriesTooltipShow = seriesModel.get(["tooltip", "show"], true);
    if (!coordSys || seriesTooltipTrigger === "none" || seriesTooltipTrigger === false || seriesTooltipTrigger === "item" || seriesTooltipShow === false || seriesModel.get(["axisPointer", "show"], true) === false) {
      return;
    }
    each$4(result.coordSysAxesInfo[makeKey(coordSys.model)], function(axisInfo) {
      var axis = axisInfo.axis;
      if (coordSys.getAxis(axis.dim) === axis) {
        axisInfo.seriesModels.push(seriesModel);
        axisInfo.seriesDataCount == null && (axisInfo.seriesDataCount = 0);
        axisInfo.seriesDataCount += seriesModel.getData().count();
      }
    });
  });
}
function getLinkGroupIndex(linksOption, axis) {
  var axisModel = axis.model;
  var dim = axis.dim;
  for (var i = 0; i < linksOption.length; i++) {
    var linkOption = linksOption[i] || {};
    if (checkPropInLink(linkOption[dim + "AxisId"], axisModel.id) || checkPropInLink(linkOption[dim + "AxisIndex"], axisModel.componentIndex) || checkPropInLink(linkOption[dim + "AxisName"], axisModel.name)) {
      return i;
    }
  }
}
function checkPropInLink(linkPropValue, axisPropValue) {
  return linkPropValue === "all" || isArray(linkPropValue) && indexOf(linkPropValue, axisPropValue) >= 0 || linkPropValue === axisPropValue;
}
function fixValue(axisModel) {
  var axisInfo = getAxisInfo(axisModel);
  if (!axisInfo) {
    return;
  }
  var axisPointerModel = axisInfo.axisPointerModel;
  var scale2 = axisInfo.axis.scale;
  var option = axisPointerModel.option;
  var status = axisPointerModel.get("status");
  var value = axisPointerModel.get("value");
  if (value != null) {
    value = scale2.parse(value);
  }
  var useHandle = isHandleTrigger(axisPointerModel);
  if (status == null) {
    option.status = useHandle ? "show" : "hide";
  }
  var extent3 = scale2.getExtent().slice();
  extent3[0] > extent3[1] && extent3.reverse();
  if (value == null || value > extent3[1]) {
    value = extent3[1];
  }
  if (value < extent3[0]) {
    value = extent3[0];
  }
  option.value = value;
  if (useHandle) {
    option.status = axisInfo.axis.scale.isBlank() ? "hide" : "show";
  }
}
function getAxisInfo(axisModel) {
  var coordSysAxesInfo = (axisModel.ecModel.getComponent("axisPointer") || {}).coordSysAxesInfo;
  return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];
}
function getAxisPointerModel(axisModel) {
  var axisInfo = getAxisInfo(axisModel);
  return axisInfo && axisInfo.axisPointerModel;
}
function isHandleTrigger(axisPointerModel) {
  return !!axisPointerModel.get(["handle", "show"]);
}
function makeKey(model) {
  return model.type + "||" + model.id;
}
var axisPointerClazz = {};
var AxisView = function(_super) {
  __extends(AxisView2, _super);
  function AxisView2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.type = AxisView2.type;
    return _this;
  }
  AxisView2.prototype.render = function(axisModel, ecModel, api, payload) {
    this.axisPointerClass && fixValue(axisModel);
    _super.prototype.render.apply(this, arguments);
    this._doUpdateAxisPointerClass(axisModel, api, true);
  };
  AxisView2.prototype.updateAxisPointer = function(axisModel, ecModel, api, payload) {
    this._doUpdateAxisPointerClass(axisModel, api, false);
  };
  AxisView2.prototype.remove = function(ecModel, api) {
    var axisPointer = this._axisPointer;
    axisPointer && axisPointer.remove(api);
  };
  AxisView2.prototype.dispose = function(ecModel, api) {
    this._disposeAxisPointer(api);
    _super.prototype.dispose.apply(this, arguments);
  };
  AxisView2.prototype._doUpdateAxisPointerClass = function(axisModel, api, forceRender) {
    var Clazz = AxisView2.getAxisPointerClass(this.axisPointerClass);
    if (!Clazz) {
      return;
    }
    var axisPointerModel = getAxisPointerModel(axisModel);
    axisPointerModel ? (this._axisPointer || (this._axisPointer = new Clazz())).render(axisModel, axisPointerModel, api, forceRender) : this._disposeAxisPointer(api);
  };
  AxisView2.prototype._disposeAxisPointer = function(api) {
    this._axisPointer && this._axisPointer.dispose(api);
    this._axisPointer = null;
  };
  AxisView2.registerAxisPointerClass = function(type, clazz) {
    axisPointerClazz[type] = clazz;
  };
  AxisView2.getAxisPointerClass = function(type) {
    return type && axisPointerClazz[type];
  };
  AxisView2.type = "axis";
  return AxisView2;
}(ComponentView$1);
var AxisView$1 = AxisView;
var inner$2 = makeInner();
var clone = clone$2;
var bind = bind$1;
var BaseAxisPointer = function() {
  function BaseAxisPointer2() {
    this._dragging = false;
    this.animationThreshold = 15;
  }
  BaseAxisPointer2.prototype.render = function(axisModel, axisPointerModel, api, forceRender) {
    var value = axisPointerModel.get("value");
    var status = axisPointerModel.get("status");
    this._axisModel = axisModel;
    this._axisPointerModel = axisPointerModel;
    this._api = api;
    if (!forceRender && this._lastValue === value && this._lastStatus === status) {
      return;
    }
    this._lastValue = value;
    this._lastStatus = status;
    var group = this._group;
    var handle = this._handle;
    if (!status || status === "hide") {
      group && group.hide();
      handle && handle.hide();
      return;
    }
    group && group.show();
    handle && handle.show();
    var elOption = {};
    this.makeElOption(elOption, value, axisModel, axisPointerModel, api);
    var graphicKey = elOption.graphicKey;
    if (graphicKey !== this._lastGraphicKey) {
      this.clear(api);
    }
    this._lastGraphicKey = graphicKey;
    var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);
    if (!group) {
      group = this._group = new Group$3();
      this.createPointerEl(group, elOption, axisModel, axisPointerModel);
      this.createLabelEl(group, elOption, axisModel, axisPointerModel);
      api.getZr().add(group);
    } else {
      var doUpdateProps = curry$1(updateProps, axisPointerModel, moveAnimation);
      this.updatePointerEl(group, elOption, doUpdateProps);
      this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);
    }
    updateMandatoryProps(group, axisPointerModel, true);
    this._renderHandle(value);
  };
  BaseAxisPointer2.prototype.remove = function(api) {
    this.clear(api);
  };
  BaseAxisPointer2.prototype.dispose = function(api) {
    this.clear(api);
  };
  BaseAxisPointer2.prototype.determineAnimation = function(axisModel, axisPointerModel) {
    var animation = axisPointerModel.get("animation");
    var axis = axisModel.axis;
    var isCategoryAxis = axis.type === "category";
    var useSnap = axisPointerModel.get("snap");
    if (!useSnap && !isCategoryAxis) {
      return false;
    }
    if (animation === "auto" || animation == null) {
      var animationThreshold = this.animationThreshold;
      if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {
        return true;
      }
      if (useSnap) {
        var seriesDataCount = getAxisInfo(axisModel).seriesDataCount;
        var axisExtent = axis.getExtent();
        return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;
      }
      return false;
    }
    return animation === true;
  };
  BaseAxisPointer2.prototype.makeElOption = function(elOption, value, axisModel, axisPointerModel, api) {
  };
  BaseAxisPointer2.prototype.createPointerEl = function(group, elOption, axisModel, axisPointerModel) {
    var pointerOption = elOption.pointer;
    if (pointerOption) {
      var pointerEl = inner$2(group).pointerEl = new graphic[pointerOption.type](clone(elOption.pointer));
      group.add(pointerEl);
    }
  };
  BaseAxisPointer2.prototype.createLabelEl = function(group, elOption, axisModel, axisPointerModel) {
    if (elOption.label) {
      var labelEl = inner$2(group).labelEl = new ZRText$1(clone(elOption.label));
      group.add(labelEl);
      updateLabelShowHide(labelEl, axisPointerModel);
    }
  };
  BaseAxisPointer2.prototype.updatePointerEl = function(group, elOption, updateProps2) {
    var pointerEl = inner$2(group).pointerEl;
    if (pointerEl && elOption.pointer) {
      pointerEl.setStyle(elOption.pointer.style);
      updateProps2(pointerEl, {
        shape: elOption.pointer.shape
      });
    }
  };
  BaseAxisPointer2.prototype.updateLabelEl = function(group, elOption, updateProps2, axisPointerModel) {
    var labelEl = inner$2(group).labelEl;
    if (labelEl) {
      labelEl.setStyle(elOption.label.style);
      updateProps2(labelEl, {
        x: elOption.label.x,
        y: elOption.label.y
      });
      updateLabelShowHide(labelEl, axisPointerModel);
    }
  };
  BaseAxisPointer2.prototype._renderHandle = function(value) {
    if (this._dragging || !this.updateHandleTransform) {
      return;
    }
    var axisPointerModel = this._axisPointerModel;
    var zr = this._api.getZr();
    var handle = this._handle;
    var handleModel = axisPointerModel.getModel("handle");
    var status = axisPointerModel.get("status");
    if (!handleModel.get("show") || !status || status === "hide") {
      handle && zr.remove(handle);
      this._handle = null;
      return;
    }
    var isInit;
    if (!this._handle) {
      isInit = true;
      handle = this._handle = createIcon(handleModel.get("icon"), {
        cursor: "move",
        draggable: true,
        onmousemove: function(e2) {
          stop(e2.event);
        },
        onmousedown: bind(this._onHandleDragMove, this, 0, 0),
        drift: bind(this._onHandleDragMove, this),
        ondragend: bind(this._onHandleDragEnd, this)
      });
      zr.add(handle);
    }
    updateMandatoryProps(handle, axisPointerModel, false);
    handle.setStyle(handleModel.getItemStyle(null, ["color", "borderColor", "borderWidth", "opacity", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY"]));
    var handleSize = handleModel.get("size");
    if (!isArray(handleSize)) {
      handleSize = [handleSize, handleSize];
    }
    handle.scaleX = handleSize[0] / 2;
    handle.scaleY = handleSize[1] / 2;
    createOrUpdate(this, "_doDispatchAxisPointer", handleModel.get("throttle") || 0, "fixRate");
    this._moveHandleToValue(value, isInit);
  };
  BaseAxisPointer2.prototype._moveHandleToValue = function(value, isInit) {
    updateProps(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));
  };
  BaseAxisPointer2.prototype._onHandleDragMove = function(dx, dy) {
    var handle = this._handle;
    if (!handle) {
      return;
    }
    this._dragging = true;
    var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);
    this._payloadInfo = trans;
    handle.stopAnimation();
    handle.attr(getHandleTransProps(trans));
    inner$2(handle).lastProp = null;
    this._doDispatchAxisPointer();
  };
  BaseAxisPointer2.prototype._doDispatchAxisPointer = function() {
    var handle = this._handle;
    if (!handle) {
      return;
    }
    var payloadInfo = this._payloadInfo;
    var axisModel = this._axisModel;
    this._api.dispatchAction({
      type: "updateAxisPointer",
      x: payloadInfo.cursorPoint[0],
      y: payloadInfo.cursorPoint[1],
      tooltipOption: payloadInfo.tooltipOption,
      axesInfo: [{
        axisDim: axisModel.axis.dim,
        axisIndex: axisModel.componentIndex
      }]
    });
  };
  BaseAxisPointer2.prototype._onHandleDragEnd = function() {
    this._dragging = false;
    var handle = this._handle;
    if (!handle) {
      return;
    }
    var value = this._axisPointerModel.get("value");
    this._moveHandleToValue(value);
    this._api.dispatchAction({
      type: "hideTip"
    });
  };
  BaseAxisPointer2.prototype.clear = function(api) {
    this._lastValue = null;
    this._lastStatus = null;
    var zr = api.getZr();
    var group = this._group;
    var handle = this._handle;
    if (zr && group) {
      this._lastGraphicKey = null;
      group && zr.remove(group);
      handle && zr.remove(handle);
      this._group = null;
      this._handle = null;
      this._payloadInfo = null;
    }
    clear(this, "_doDispatchAxisPointer");
  };
  BaseAxisPointer2.prototype.doClear = function() {
  };
  BaseAxisPointer2.prototype.buildLabel = function(xy, wh, xDimIndex) {
    xDimIndex = xDimIndex || 0;
    return {
      x: xy[xDimIndex],
      y: xy[1 - xDimIndex],
      width: wh[xDimIndex],
      height: wh[1 - xDimIndex]
    };
  };
  return BaseAxisPointer2;
}();
function updateProps(animationModel, moveAnimation, el, props) {
  if (!propsEqual(inner$2(el).lastProp, props)) {
    inner$2(el).lastProp = props;
    moveAnimation ? updateProps$1(el, props, animationModel) : (el.stopAnimation(), el.attr(props));
  }
}
function propsEqual(lastProps, newProps) {
  if (isObject$2(lastProps) && isObject$2(newProps)) {
    var equals_1 = true;
    each$4(newProps, function(item, key) {
      equals_1 = equals_1 && propsEqual(lastProps[key], item);
    });
    return !!equals_1;
  } else {
    return lastProps === newProps;
  }
}
function updateLabelShowHide(labelEl, axisPointerModel) {
  labelEl[axisPointerModel.get(["label", "show"]) ? "show" : "hide"]();
}
function getHandleTransProps(trans) {
  return {
    x: trans.x || 0,
    y: trans.y || 0,
    rotation: trans.rotation || 0
  };
}
function updateMandatoryProps(group, axisPointerModel, silent) {
  var z2 = axisPointerModel.get("z");
  var zlevel = axisPointerModel.get("zlevel");
  group && group.traverse(function(el) {
    if (el.type !== "group") {
      z2 != null && (el.z = z2);
      zlevel != null && (el.zlevel = zlevel);
      el.silent = silent;
    }
  });
}
var BaseAxisPointer$1 = BaseAxisPointer;
function buildElStyle(axisPointerModel) {
  var axisPointerType = axisPointerModel.get("type");
  var styleModel = axisPointerModel.getModel(axisPointerType + "Style");
  var style2;
  if (axisPointerType === "line") {
    style2 = styleModel.getLineStyle();
    style2.fill = null;
  } else if (axisPointerType === "shadow") {
    style2 = styleModel.getAreaStyle();
    style2.stroke = null;
  }
  return style2;
}
function buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {
  var value = axisPointerModel.get("value");
  var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get("seriesDataIndices"), {
    precision: axisPointerModel.get(["label", "precision"]),
    formatter: axisPointerModel.get(["label", "formatter"])
  });
  var labelModel = axisPointerModel.getModel("label");
  var paddings = normalizeCssArray(labelModel.get("padding") || 0);
  var font = labelModel.getFont();
  var textRect = getBoundingRect(text, font);
  var position = labelPos.position;
  var width = textRect.width + paddings[1] + paddings[3];
  var height = textRect.height + paddings[0] + paddings[2];
  var align = labelPos.align;
  align === "right" && (position[0] -= width);
  align === "center" && (position[0] -= width / 2);
  var verticalAlign = labelPos.verticalAlign;
  verticalAlign === "bottom" && (position[1] -= height);
  verticalAlign === "middle" && (position[1] -= height / 2);
  confineInContainer(position, width, height, api);
  var bgColor = labelModel.get("backgroundColor");
  if (!bgColor || bgColor === "auto") {
    bgColor = axisModel.get(["axisLine", "lineStyle", "color"]);
  }
  elOption.label = {
    x: position[0],
    y: position[1],
    style: createTextStyle(labelModel, {
      text,
      font,
      fill: labelModel.getTextColor(),
      padding: paddings,
      backgroundColor: bgColor
    }),
    z2: 10
  };
}
function confineInContainer(position, width, height, api) {
  var viewWidth = api.getWidth();
  var viewHeight = api.getHeight();
  position[0] = Math.min(position[0] + width, viewWidth) - width;
  position[1] = Math.min(position[1] + height, viewHeight) - height;
  position[0] = Math.max(position[0], 0);
  position[1] = Math.max(position[1], 0);
}
function getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {
  value = axis.scale.parse(value);
  var text = axis.scale.getLabel({
    value
  }, {
    precision: opt.precision
  });
  var formatter = opt.formatter;
  if (formatter) {
    var params_1 = {
      value: getAxisRawValue(axis, {
        value
      }),
      axisDimension: axis.dim,
      axisIndex: axis.index,
      seriesData: []
    };
    each$4(seriesDataIndices, function(idxItem) {
      var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);
      var dataIndex = idxItem.dataIndexInside;
      var dataParams = series && series.getDataParams(dataIndex);
      dataParams && params_1.seriesData.push(dataParams);
    });
    if (isString(formatter)) {
      text = formatter.replace("{value}", text);
    } else if (isFunction(formatter)) {
      text = formatter(params_1);
    }
  }
  return text;
}
function getTransformedPosition(axis, value, layoutInfo) {
  var transform = create();
  rotate(transform, transform, layoutInfo.rotation);
  translate(transform, transform, layoutInfo.position);
  return applyTransform([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);
}
function buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {
  var textLayout = AxisBuilder$1.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);
  layoutInfo.labelMargin = axisPointerModel.get(["label", "margin"]);
  buildLabelElOption(elOption, axisModel, axisPointerModel, api, {
    position: getTransformedPosition(axisModel.axis, value, layoutInfo),
    align: textLayout.textAlign,
    verticalAlign: textLayout.textVerticalAlign
  });
}
function makeLineShape(p1, p2, xDimIndex) {
  xDimIndex = xDimIndex || 0;
  return {
    x1: p1[xDimIndex],
    y1: p1[1 - xDimIndex],
    x2: p2[xDimIndex],
    y2: p2[1 - xDimIndex]
  };
}
function makeRectShape(xy, wh, xDimIndex) {
  xDimIndex = xDimIndex || 0;
  return {
    x: xy[xDimIndex],
    y: xy[1 - xDimIndex],
    width: wh[xDimIndex],
    height: wh[1 - xDimIndex]
  };
}
var CartesianAxisPointer = function(_super) {
  __extends(CartesianAxisPointer2, _super);
  function CartesianAxisPointer2() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  CartesianAxisPointer2.prototype.makeElOption = function(elOption, value, axisModel, axisPointerModel, api) {
    var axis = axisModel.axis;
    var grid = axis.grid;
    var axisPointerType = axisPointerModel.get("type");
    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();
    var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));
    if (axisPointerType && axisPointerType !== "none") {
      var elStyle = buildElStyle(axisPointerModel);
      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);
      pointerOption.style = elStyle;
      elOption.graphicKey = pointerOption.type;
      elOption.pointer = pointerOption;
    }
    var layoutInfo = layout(grid.model, axisModel);
    buildCartesianSingleLabelElOption(
      value,
      elOption,
      layoutInfo,
      axisModel,
      axisPointerModel,
      api
    );
  };
  CartesianAxisPointer2.prototype.getHandleTransform = function(value, axisModel, axisPointerModel) {
    var layoutInfo = layout(axisModel.axis.grid.model, axisModel, {
      labelInside: false
    });
    layoutInfo.labelMargin = axisPointerModel.get(["handle", "margin"]);
    var pos = getTransformedPosition(axisModel.axis, value, layoutInfo);
    return {
      x: pos[0],
      y: pos[1],
      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)
    };
  };
  CartesianAxisPointer2.prototype.updateHandleTransform = function(transform, delta, axisModel, axisPointerModel) {
    var axis = axisModel.axis;
    var grid = axis.grid;
    var axisExtent = axis.getGlobalExtent(true);
    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();
    var dimIndex = axis.dim === "x" ? 0 : 1;
    var currPosition = [transform.x, transform.y];
    currPosition[dimIndex] += delta[dimIndex];
    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);
    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);
    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;
    var cursorPoint = [cursorOtherValue, cursorOtherValue];
    cursorPoint[dimIndex] = currPosition[dimIndex];
    var tooltipOptions = [{
      verticalAlign: "middle"
    }, {
      align: "center"
    }];
    return {
      x: currPosition[0],
      y: currPosition[1],
      rotation: transform.rotation,
      cursorPoint,
      tooltipOption: tooltipOptions[dimIndex]
    };
  };
  return CartesianAxisPointer2;
}(BaseAxisPointer$1);
function getCartesian(grid, axis) {
  var opt = {};
  opt[axis.dim + "AxisIndex"] = axis.index;
  return grid.getCartesian(opt);
}
var pointerShapeBuilder = {
  line: function(axis, pixelValue, otherExtent) {
    var targetShape = makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));
    return {
      type: "Line",
      subPixelOptimize: true,
      shape: targetShape
    };
  },
  shadow: function(axis, pixelValue, otherExtent) {
    var bandWidth = Math.max(1, axis.getBandWidth());
    var span = otherExtent[1] - otherExtent[0];
    return {
      type: "Rect",
      shape: makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))
    };
  }
};
function getAxisDimIndex(axis) {
  return axis.dim === "x" ? 0 : 1;
}
var CartesianAxisPointer$1 = CartesianAxisPointer;
var AxisPointerModel = function(_super) {
  __extends(AxisPointerModel2, _super);
  function AxisPointerModel2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.type = AxisPointerModel2.type;
    return _this;
  }
  AxisPointerModel2.type = "axisPointer";
  AxisPointerModel2.defaultOption = {
    show: "auto",
    z: 50,
    type: "line",
    snap: false,
    triggerTooltip: true,
    triggerEmphasis: true,
    value: null,
    status: null,
    link: [],
    animation: null,
    animationDurationUpdate: 200,
    lineStyle: {
      color: "#B9BEC9",
      width: 1,
      type: "dashed"
    },
    shadowStyle: {
      color: "rgba(210,219,238,0.2)"
    },
    label: {
      show: true,
      formatter: null,
      precision: "auto",
      margin: 3,
      color: "#fff",
      padding: [5, 7, 5, 7],
      backgroundColor: "auto",
      borderColor: null,
      borderWidth: 0,
      borderRadius: 3
    },
    handle: {
      show: false,
      icon: "M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",
      size: 45,
      margin: 50,
      color: "#333",
      shadowBlur: 3,
      shadowColor: "#aaa",
      shadowOffsetX: 0,
      shadowOffsetY: 2,
      throttle: 40
    }
  };
  return AxisPointerModel2;
}(ComponentModel$1);
var AxisPointerModel$1 = AxisPointerModel;
var inner$1 = makeInner();
var each$1 = each$4;
function register(key, api, handler) {
  if (env$1.node) {
    return;
  }
  var zr = api.getZr();
  inner$1(zr).records || (inner$1(zr).records = {});
  initGlobalListeners(zr, api);
  var record = inner$1(zr).records[key] || (inner$1(zr).records[key] = {});
  record.handler = handler;
}
function initGlobalListeners(zr, api) {
  if (inner$1(zr).initialized) {
    return;
  }
  inner$1(zr).initialized = true;
  useHandler("click", curry$1(doEnter, "click"));
  useHandler("mousemove", curry$1(doEnter, "mousemove"));
  useHandler("globalout", onLeave);
  function useHandler(eventType, cb) {
    zr.on(eventType, function(e2) {
      var dis = makeDispatchAction$1(api);
      each$1(inner$1(zr).records, function(record) {
        record && cb(record, e2, dis.dispatchAction);
      });
      dispatchTooltipFinally(dis.pendings, api);
    });
  }
}
function dispatchTooltipFinally(pendings, api) {
  var showLen = pendings.showTip.length;
  var hideLen = pendings.hideTip.length;
  var actuallyPayload;
  if (showLen) {
    actuallyPayload = pendings.showTip[showLen - 1];
  } else if (hideLen) {
    actuallyPayload = pendings.hideTip[hideLen - 1];
  }
  if (actuallyPayload) {
    actuallyPayload.dispatchAction = null;
    api.dispatchAction(actuallyPayload);
  }
}
function onLeave(record, e2, dispatchAction) {
  record.handler("leave", null, dispatchAction);
}
function doEnter(currTrigger, record, e2, dispatchAction) {
  record.handler(currTrigger, e2, dispatchAction);
}
function makeDispatchAction$1(api) {
  var pendings = {
    showTip: [],
    hideTip: []
  };
  var dispatchAction = function(payload) {
    var pendingList = pendings[payload.type];
    if (pendingList) {
      pendingList.push(payload);
    } else {
      payload.dispatchAction = dispatchAction;
      api.dispatchAction(payload);
    }
  };
  return {
    dispatchAction,
    pendings
  };
}
function unregister(key, api) {
  if (env$1.node) {
    return;
  }
  var zr = api.getZr();
  var record = (inner$1(zr).records || {})[key];
  if (record) {
    inner$1(zr).records[key] = null;
  }
}
var AxisPointerView = function(_super) {
  __extends(AxisPointerView2, _super);
  function AxisPointerView2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.type = AxisPointerView2.type;
    return _this;
  }
  AxisPointerView2.prototype.render = function(globalAxisPointerModel, ecModel, api) {
    var globalTooltipModel = ecModel.getComponent("tooltip");
    var triggerOn = globalAxisPointerModel.get("triggerOn") || globalTooltipModel && globalTooltipModel.get("triggerOn") || "mousemove|click";
    register("axisPointer", api, function(currTrigger, e2, dispatchAction) {
      if (triggerOn !== "none" && (currTrigger === "leave" || triggerOn.indexOf(currTrigger) >= 0)) {
        dispatchAction({
          type: "updateAxisPointer",
          currTrigger,
          x: e2 && e2.offsetX,
          y: e2 && e2.offsetY
        });
      }
    });
  };
  AxisPointerView2.prototype.remove = function(ecModel, api) {
    unregister("axisPointer", api);
  };
  AxisPointerView2.prototype.dispose = function(ecModel, api) {
    unregister("axisPointer", api);
  };
  AxisPointerView2.type = "axisPointer";
  return AxisPointerView2;
}(ComponentView$1);
var AxisPointerView$1 = AxisPointerView;
function findPointFromSeries(finder, ecModel) {
  var point = [];
  var seriesIndex = finder.seriesIndex;
  var seriesModel;
  if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {
    return {
      point: []
    };
  }
  var data = seriesModel.getData();
  var dataIndex = queryDataIndex(data, finder);
  if (dataIndex == null || dataIndex < 0 || isArray(dataIndex)) {
    return {
      point: []
    };
  }
  var el = data.getItemGraphicEl(dataIndex);
  var coordSys = seriesModel.coordinateSystem;
  if (seriesModel.getTooltipPosition) {
    point = seriesModel.getTooltipPosition(dataIndex) || [];
  } else if (coordSys && coordSys.dataToPoint) {
    if (finder.isStacked) {
      var baseAxis = coordSys.getBaseAxis();
      var valueAxis = coordSys.getOtherAxis(baseAxis);
      var valueAxisDim = valueAxis.dim;
      var baseAxisDim = baseAxis.dim;
      var baseDataOffset = valueAxisDim === "x" || valueAxisDim === "radius" ? 1 : 0;
      var baseDim = data.mapDimension(baseAxisDim);
      var stackedData = [];
      stackedData[baseDataOffset] = data.get(baseDim, dataIndex);
      stackedData[1 - baseDataOffset] = data.get(data.getCalculationInfo("stackResultDimension"), dataIndex);
      point = coordSys.dataToPoint(stackedData) || [];
    } else {
      point = coordSys.dataToPoint(data.getValues(map$1(coordSys.dimensions, function(dim) {
        return data.mapDimension(dim);
      }), dataIndex)) || [];
    }
  } else if (el) {
    var rect = el.getBoundingRect().clone();
    rect.applyTransform(el.transform);
    point = [rect.x + rect.width / 2, rect.y + rect.height / 2];
  }
  return {
    point,
    el
  };
}
var inner = makeInner();
function axisTrigger(payload, ecModel, api) {
  var currTrigger = payload.currTrigger;
  var point = [payload.x, payload.y];
  var finder = payload;
  var dispatchAction = payload.dispatchAction || bind$1(api.dispatchAction, api);
  var coordSysAxesInfo = ecModel.getComponent("axisPointer").coordSysAxesInfo;
  if (!coordSysAxesInfo) {
    return;
  }
  if (illegalPoint(point)) {
    point = findPointFromSeries({
      seriesIndex: finder.seriesIndex,
      dataIndex: finder.dataIndex
    }, ecModel).point;
  }
  var isIllegalPoint = illegalPoint(point);
  var inputAxesInfo = finder.axesInfo;
  var axesInfo = coordSysAxesInfo.axesInfo;
  var shouldHide = currTrigger === "leave" || illegalPoint(point);
  var outputPayload = {};
  var showValueMap = {};
  var dataByCoordSys = {
    list: [],
    map: {}
  };
  var updaters = {
    showPointer: curry$1(showPointer, showValueMap),
    showTooltip: curry$1(showTooltip, dataByCoordSys)
  };
  each$4(coordSysAxesInfo.coordSysMap, function(coordSys, coordSysKey) {
    var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);
    each$4(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function(axisInfo, key) {
      var axis = axisInfo.axis;
      var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo);
      if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {
        var val = inputAxisInfo && inputAxisInfo.value;
        if (val == null && !isIllegalPoint) {
          val = axis.pointToData(point);
        }
        val != null && processOnAxis(axisInfo, val, updaters, false, outputPayload);
      }
    });
  });
  var linkTriggers = {};
  each$4(axesInfo, function(tarAxisInfo, tarKey) {
    var linkGroup = tarAxisInfo.linkGroup;
    if (linkGroup && !showValueMap[tarKey]) {
      each$4(linkGroup.axesInfo, function(srcAxisInfo, srcKey) {
        var srcValItem = showValueMap[srcKey];
        if (srcAxisInfo !== tarAxisInfo && srcValItem) {
          var val = srcValItem.value;
          linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));
          linkTriggers[tarAxisInfo.key] = val;
        }
      });
    }
  });
  each$4(linkTriggers, function(val, tarKey) {
    processOnAxis(axesInfo[tarKey], val, updaters, true, outputPayload);
  });
  updateModelActually(showValueMap, axesInfo, outputPayload);
  dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);
  dispatchHighDownActually(axesInfo, dispatchAction, api);
  return outputPayload;
}
function processOnAxis(axisInfo, newValue, updaters, noSnap, outputFinder) {
  var axis = axisInfo.axis;
  if (axis.scale.isBlank() || !axis.containData(newValue)) {
    return;
  }
  if (!axisInfo.involveSeries) {
    updaters.showPointer(axisInfo, newValue);
    return;
  }
  var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);
  var payloadBatch = payloadInfo.payloadBatch;
  var snapToValue = payloadInfo.snapToValue;
  if (payloadBatch[0] && outputFinder.seriesIndex == null) {
    extend(outputFinder, payloadBatch[0]);
  }
  if (!noSnap && axisInfo.snap) {
    if (axis.containData(snapToValue) && snapToValue != null) {
      newValue = snapToValue;
    }
  }
  updaters.showPointer(axisInfo, newValue, payloadBatch);
  updaters.showTooltip(axisInfo, payloadInfo, snapToValue);
}
function buildPayloadsBySeries(value, axisInfo) {
  var axis = axisInfo.axis;
  var dim = axis.dim;
  var snapToValue = value;
  var payloadBatch = [];
  var minDist = Number.MAX_VALUE;
  var minDiff = -1;
  each$4(axisInfo.seriesModels, function(series, idx) {
    var dataDim = series.getData().mapDimensionsAll(dim);
    var seriesNestestValue;
    var dataIndices;
    if (series.getAxisTooltipData) {
      var result = series.getAxisTooltipData(dataDim, value, axis);
      dataIndices = result.dataIndices;
      seriesNestestValue = result.nestestValue;
    } else {
      dataIndices = series.getData().indicesOfNearest(
        dataDim[0],
        value,
        axis.type === "category" ? 0.5 : null
      );
      if (!dataIndices.length) {
        return;
      }
      seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);
    }
    if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {
      return;
    }
    var diff = value - seriesNestestValue;
    var dist2 = Math.abs(diff);
    if (dist2 <= minDist) {
      if (dist2 < minDist || diff >= 0 && minDiff < 0) {
        minDist = dist2;
        minDiff = diff;
        snapToValue = seriesNestestValue;
        payloadBatch.length = 0;
      }
      each$4(dataIndices, function(dataIndex) {
        payloadBatch.push({
          seriesIndex: series.seriesIndex,
          dataIndexInside: dataIndex,
          dataIndex: series.getData().getRawIndex(dataIndex)
        });
      });
    }
  });
  return {
    payloadBatch,
    snapToValue
  };
}
function showPointer(showValueMap, axisInfo, value, payloadBatch) {
  showValueMap[axisInfo.key] = {
    value,
    payloadBatch
  };
}
function showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {
  var payloadBatch = payloadInfo.payloadBatch;
  var axis = axisInfo.axis;
  var axisModel = axis.model;
  var axisPointerModel = axisInfo.axisPointerModel;
  if (!axisInfo.triggerTooltip || !payloadBatch.length) {
    return;
  }
  var coordSysModel = axisInfo.coordSys.model;
  var coordSysKey = makeKey(coordSysModel);
  var coordSysItem = dataByCoordSys.map[coordSysKey];
  if (!coordSysItem) {
    coordSysItem = dataByCoordSys.map[coordSysKey] = {
      coordSysId: coordSysModel.id,
      coordSysIndex: coordSysModel.componentIndex,
      coordSysType: coordSysModel.type,
      coordSysMainType: coordSysModel.mainType,
      dataByAxis: []
    };
    dataByCoordSys.list.push(coordSysItem);
  }
  coordSysItem.dataByAxis.push({
    axisDim: axis.dim,
    axisIndex: axisModel.componentIndex,
    axisType: axisModel.type,
    axisId: axisModel.id,
    value,
    valueLabelOpt: {
      precision: axisPointerModel.get(["label", "precision"]),
      formatter: axisPointerModel.get(["label", "formatter"])
    },
    seriesDataIndices: payloadBatch.slice()
  });
}
function updateModelActually(showValueMap, axesInfo, outputPayload) {
  var outputAxesInfo = outputPayload.axesInfo = [];
  each$4(axesInfo, function(axisInfo, key) {
    var option = axisInfo.axisPointerModel.option;
    var valItem = showValueMap[key];
    if (valItem) {
      !axisInfo.useHandle && (option.status = "show");
      option.value = valItem.value;
      option.seriesDataIndices = (valItem.payloadBatch || []).slice();
    } else {
      !axisInfo.useHandle && (option.status = "hide");
    }
    option.status === "show" && outputAxesInfo.push({
      axisDim: axisInfo.axis.dim,
      axisIndex: axisInfo.axis.model.componentIndex,
      value: option.value
    });
  });
}
function dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {
  if (illegalPoint(point) || !dataByCoordSys.list.length) {
    dispatchAction({
      type: "hideTip"
    });
    return;
  }
  var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};
  dispatchAction({
    type: "showTip",
    escapeConnect: true,
    x: point[0],
    y: point[1],
    tooltipOption: payload.tooltipOption,
    position: payload.position,
    dataIndexInside: sampleItem.dataIndexInside,
    dataIndex: sampleItem.dataIndex,
    seriesIndex: sampleItem.seriesIndex,
    dataByCoordSys: dataByCoordSys.list
  });
}
function dispatchHighDownActually(axesInfo, dispatchAction, api) {
  var zr = api.getZr();
  var highDownKey = "axisPointerLastHighlights";
  var lastHighlights = inner(zr)[highDownKey] || {};
  var newHighlights = inner(zr)[highDownKey] = {};
  each$4(axesInfo, function(axisInfo, key) {
    var option = axisInfo.axisPointerModel.option;
    option.status === "show" && axisInfo.triggerEmphasis && each$4(option.seriesDataIndices, function(batchItem) {
      var key2 = batchItem.seriesIndex + " | " + batchItem.dataIndex;
      newHighlights[key2] = batchItem;
    });
  });
  var toHighlight = [];
  var toDownplay = [];
  each$4(lastHighlights, function(batchItem, key) {
    !newHighlights[key] && toDownplay.push(batchItem);
  });
  each$4(newHighlights, function(batchItem, key) {
    !lastHighlights[key] && toHighlight.push(batchItem);
  });
  toDownplay.length && api.dispatchAction({
    type: "downplay",
    escapeConnect: true,
    notBlur: true,
    batch: toDownplay
  });
  toHighlight.length && api.dispatchAction({
    type: "highlight",
    escapeConnect: true,
    notBlur: true,
    batch: toHighlight
  });
}
function findInputAxisInfo(inputAxesInfo, axisInfo) {
  for (var i = 0; i < (inputAxesInfo || []).length; i++) {
    var inputAxisInfo = inputAxesInfo[i];
    if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {
      return inputAxisInfo;
    }
  }
}
function makeMapperParam(axisInfo) {
  var axisModel = axisInfo.axis.model;
  var item = {};
  var dim = item.axisDim = axisInfo.axis.dim;
  item.axisIndex = item[dim + "AxisIndex"] = axisModel.componentIndex;
  item.axisName = item[dim + "AxisName"] = axisModel.name;
  item.axisId = item[dim + "AxisId"] = axisModel.id;
  return item;
}
function illegalPoint(point) {
  return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);
}
function install$5(registers) {
  AxisView$1.registerAxisPointerClass("CartesianAxisPointer", CartesianAxisPointer$1);
  registers.registerComponentModel(AxisPointerModel$1);
  registers.registerComponentView(AxisPointerView$1);
  registers.registerPreprocessor(function(option) {
    if (option) {
      (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});
      var link = option.axisPointer.link;
      if (link && !isArray(link)) {
        option.axisPointer.link = [link];
      }
    }
  });
  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, function(ecModel, api) {
    ecModel.getComponent("axisPointer").coordSysAxesInfo = collect(ecModel, api);
  });
  registers.registerAction({
    type: "updateAxisPointer",
    event: "updateAxisPointer",
    update: ":updateAxisPointer"
  }, axisTrigger);
}
function makeBackground(rect, componentModel) {
  var padding = normalizeCssArray(componentModel.get("padding"));
  var style2 = componentModel.getItemStyle(["color", "opacity"]);
  style2.fill = componentModel.get("backgroundColor");
  rect = new Rect$1({
    shape: {
      x: rect.x - padding[3],
      y: rect.y - padding[0],
      width: rect.width + padding[1] + padding[3],
      height: rect.height + padding[0] + padding[2],
      r: componentModel.get("borderRadius")
    },
    style: style2,
    silent: true,
    z2: -1
  });
  return rect;
}
var TooltipModel = function(_super) {
  __extends(TooltipModel2, _super);
  function TooltipModel2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.type = TooltipModel2.type;
    return _this;
  }
  TooltipModel2.type = "tooltip";
  TooltipModel2.dependencies = ["axisPointer"];
  TooltipModel2.defaultOption = {
    z: 60,
    show: true,
    showContent: true,
    trigger: "item",
    triggerOn: "mousemove|click",
    alwaysShowContent: false,
    displayMode: "single",
    renderMode: "auto",
    confine: null,
    showDelay: 0,
    hideDelay: 100,
    transitionDuration: 0.4,
    enterable: false,
    backgroundColor: "#fff",
    shadowBlur: 10,
    shadowColor: "rgba(0, 0, 0, .2)",
    shadowOffsetX: 1,
    shadowOffsetY: 2,
    borderRadius: 4,
    borderWidth: 1,
    padding: null,
    extraCssText: "",
    axisPointer: {
      type: "line",
      axis: "auto",
      animation: "auto",
      animationDurationUpdate: 200,
      animationEasingUpdate: "exponentialOut",
      crossStyle: {
        color: "#999",
        width: 1,
        type: "dashed",
        textStyle: {}
      }
    },
    textStyle: {
      color: "#666",
      fontSize: 14
    }
  };
  return TooltipModel2;
}(ComponentModel$1);
var TooltipModel$1 = TooltipModel;
function shouldTooltipConfine(tooltipModel) {
  var confineOption = tooltipModel.get("confine");
  return confineOption != null ? !!confineOption : tooltipModel.get("renderMode") === "richText";
}
function testStyle(styleProps) {
  if (!env$1.domSupported) {
    return;
  }
  var style2 = document.documentElement.style;
  for (var i = 0, len2 = styleProps.length; i < len2; i++) {
    if (styleProps[i] in style2) {
      return styleProps[i];
    }
  }
}
var TRANSFORM_VENDOR = testStyle(["transform", "webkitTransform", "OTransform", "MozTransform", "msTransform"]);
var TRANSITION_VENDOR = testStyle(["webkitTransition", "transition", "OTransition", "MozTransition", "msTransition"]);
function toCSSVendorPrefix(styleVendor, styleProp) {
  if (!styleVendor) {
    return styleProp;
  }
  styleProp = toCamelCase(styleProp, true);
  var idx = styleVendor.indexOf(styleProp);
  styleVendor = idx === -1 ? styleProp : "-" + styleVendor.slice(0, idx) + "-" + styleProp;
  return styleVendor.toLowerCase();
}
function getComputedStyle$1(el, style2) {
  var stl = el.currentStyle || document.defaultView && document.defaultView.getComputedStyle(el);
  return stl ? style2 ? stl[style2] : stl : null;
}
var CSS_TRANSITION_VENDOR = toCSSVendorPrefix(TRANSITION_VENDOR, "transition");
var CSS_TRANSFORM_VENDOR = toCSSVendorPrefix(TRANSFORM_VENDOR, "transform");
var gCssText = "position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;" + (env$1.transform3dSupported ? "will-change:transform;" : "");
function mirrorPos(pos) {
  pos = pos === "left" ? "right" : pos === "right" ? "left" : pos === "top" ? "bottom" : "top";
  return pos;
}
function assembleArrow(tooltipModel, borderColor, arrowPosition) {
  if (!isString(arrowPosition) || arrowPosition === "inside") {
    return "";
  }
  var backgroundColor2 = tooltipModel.get("backgroundColor");
  var borderWidth = tooltipModel.get("borderWidth");
  borderColor = convertToColorString(borderColor);
  var arrowPos = mirrorPos(arrowPosition);
  var arrowSize = Math.max(Math.round(borderWidth) * 1.5, 6);
  var positionStyle = "";
  var transformStyle = CSS_TRANSFORM_VENDOR + ":";
  var rotateDeg;
  if (indexOf(["left", "right"], arrowPos) > -1) {
    positionStyle += "top:50%";
    transformStyle += "translateY(-50%) rotate(" + (rotateDeg = arrowPos === "left" ? -225 : -45) + "deg)";
  } else {
    positionStyle += "left:50%";
    transformStyle += "translateX(-50%) rotate(" + (rotateDeg = arrowPos === "top" ? 225 : 45) + "deg)";
  }
  var rotateRadian = rotateDeg * Math.PI / 180;
  var arrowWH = arrowSize + borderWidth;
  var rotatedWH = arrowWH * Math.abs(Math.cos(rotateRadian)) + arrowWH * Math.abs(Math.sin(rotateRadian));
  var arrowOffset = Math.round(((rotatedWH - Math.SQRT2 * borderWidth) / 2 + Math.SQRT2 * borderWidth - (rotatedWH - arrowWH) / 2) * 100) / 100;
  positionStyle += ";" + arrowPos + ":-" + arrowOffset + "px";
  var borderStyle = borderColor + " solid " + borderWidth + "px;";
  var styleCss = ["position:absolute;width:" + arrowSize + "px;height:" + arrowSize + "px;z-index:-1;", positionStyle + ";" + transformStyle + ";", "border-bottom:" + borderStyle, "border-right:" + borderStyle, "background-color:" + backgroundColor2 + ";"];
  return '<div style="' + styleCss.join("") + '"></div>';
}
function assembleTransition(duration, onlyFade) {
  var transitionCurve = "cubic-bezier(0.23,1,0.32,1)";
  var transitionOption = " " + duration / 2 + "s " + transitionCurve;
  var transitionText = "opacity" + transitionOption + ",visibility" + transitionOption;
  if (!onlyFade) {
    transitionOption = " " + duration + "s " + transitionCurve;
    transitionText += env$1.transformSupported ? "," + CSS_TRANSFORM_VENDOR + transitionOption : ",left" + transitionOption + ",top" + transitionOption;
  }
  return CSS_TRANSITION_VENDOR + ":" + transitionText;
}
function assembleTransform(x2, y2, toString) {
  var x0 = x2.toFixed(0) + "px";
  var y0 = y2.toFixed(0) + "px";
  if (!env$1.transformSupported) {
    return toString ? "top:" + y0 + ";left:" + x0 + ";" : [["top", y0], ["left", x0]];
  }
  var is3d = env$1.transform3dSupported;
  var translate2 = "translate" + (is3d ? "3d" : "") + "(" + x0 + "," + y0 + (is3d ? ",0" : "") + ")";
  return toString ? "top:0;left:0;" + CSS_TRANSFORM_VENDOR + ":" + translate2 + ";" : [["top", 0], ["left", 0], [TRANSFORM_VENDOR, translate2]];
}
function assembleFont(textStyleModel) {
  var cssText = [];
  var fontSize = textStyleModel.get("fontSize");
  var color = textStyleModel.getTextColor();
  color && cssText.push("color:" + color);
  cssText.push("font:" + textStyleModel.getFont());
  fontSize && cssText.push("line-height:" + Math.round(fontSize * 3 / 2) + "px");
  var shadowColor = textStyleModel.get("textShadowColor");
  var shadowBlur = textStyleModel.get("textShadowBlur") || 0;
  var shadowOffsetX = textStyleModel.get("textShadowOffsetX") || 0;
  var shadowOffsetY = textStyleModel.get("textShadowOffsetY") || 0;
  shadowColor && shadowBlur && cssText.push("text-shadow:" + shadowOffsetX + "px " + shadowOffsetY + "px " + shadowBlur + "px " + shadowColor);
  each$4(["decoration", "align"], function(name) {
    var val = textStyleModel.get(name);
    val && cssText.push("text-" + name + ":" + val);
  });
  return cssText.join(";");
}
function assembleCssText(tooltipModel, enableTransition, onlyFade) {
  var cssText = [];
  var transitionDuration = tooltipModel.get("transitionDuration");
  var backgroundColor2 = tooltipModel.get("backgroundColor");
  var shadowBlur = tooltipModel.get("shadowBlur");
  var shadowColor = tooltipModel.get("shadowColor");
  var shadowOffsetX = tooltipModel.get("shadowOffsetX");
  var shadowOffsetY = tooltipModel.get("shadowOffsetY");
  var textStyleModel = tooltipModel.getModel("textStyle");
  var padding = getPaddingFromTooltipModel(tooltipModel, "html");
  var boxShadow = shadowOffsetX + "px " + shadowOffsetY + "px " + shadowBlur + "px " + shadowColor;
  cssText.push("box-shadow:" + boxShadow);
  enableTransition && transitionDuration && cssText.push(assembleTransition(transitionDuration, onlyFade));
  if (backgroundColor2) {
    cssText.push("background-color:" + backgroundColor2);
  }
  each$4(["width", "color", "radius"], function(name) {
    var borderName = "border-" + name;
    var camelCase = toCamelCase(borderName);
    var val = tooltipModel.get(camelCase);
    val != null && cssText.push(borderName + ":" + val + (name === "color" ? "" : "px"));
  });
  cssText.push(assembleFont(textStyleModel));
  if (padding != null) {
    cssText.push("padding:" + normalizeCssArray(padding).join("px ") + "px");
  }
  return cssText.join(";") + ";";
}
function makeStyleCoord$1(out2, zr, appendToBody, zrX, zrY) {
  var zrPainter = zr && zr.painter;
  if (appendToBody) {
    var zrViewportRoot = zrPainter && zrPainter.getViewportRoot();
    if (zrViewportRoot) {
      transformLocalCoord(out2, zrViewportRoot, document.body, zrX, zrY);
    }
  } else {
    out2[0] = zrX;
    out2[1] = zrY;
    var viewportRootOffset = zrPainter && zrPainter.getViewportRootOffset();
    if (viewportRootOffset) {
      out2[0] += viewportRootOffset.offsetLeft;
      out2[1] += viewportRootOffset.offsetTop;
    }
  }
  out2[2] = out2[0] / zr.getWidth();
  out2[3] = out2[1] / zr.getHeight();
}
var TooltipHTMLContent = function() {
  function TooltipHTMLContent2(container, api, opt) {
    this._show = false;
    this._styleCoord = [0, 0, 0, 0];
    this._enterable = true;
    this._alwaysShowContent = false;
    this._firstShow = true;
    this._longHide = true;
    if (env$1.wxa) {
      return null;
    }
    var el = document.createElement("div");
    el.domBelongToZr = true;
    this.el = el;
    var zr = this._zr = api.getZr();
    var appendToBody = this._appendToBody = opt && opt.appendToBody;
    makeStyleCoord$1(this._styleCoord, zr, appendToBody, api.getWidth() / 2, api.getHeight() / 2);
    if (appendToBody) {
      document.body.appendChild(el);
    } else {
      container.appendChild(el);
    }
    this._container = container;
    var self2 = this;
    el.onmouseenter = function() {
      if (self2._enterable) {
        clearTimeout(self2._hideTimeout);
        self2._show = true;
      }
      self2._inContent = true;
    };
    el.onmousemove = function(e2) {
      e2 = e2 || window.event;
      if (!self2._enterable) {
        var handler = zr.handler;
        var zrViewportRoot = zr.painter.getViewportRoot();
        normalizeEvent(zrViewportRoot, e2, true);
        handler.dispatch("mousemove", e2);
      }
    };
    el.onmouseleave = function() {
      self2._inContent = false;
      if (self2._enterable) {
        if (self2._show) {
          self2.hideLater(self2._hideDelay);
        }
      }
    };
  }
  TooltipHTMLContent2.prototype.update = function(tooltipModel) {
    var container = this._container;
    var position = getComputedStyle$1(container, "position");
    var domStyle = container.style;
    if (domStyle.position !== "absolute" && position !== "absolute") {
      domStyle.position = "relative";
    }
    var alwaysShowContent = tooltipModel.get("alwaysShowContent");
    alwaysShowContent && this._moveIfResized();
    this._alwaysShowContent = alwaysShowContent;
    this.el.className = tooltipModel.get("className") || "";
  };
  TooltipHTMLContent2.prototype.show = function(tooltipModel, nearPointColor) {
    clearTimeout(this._hideTimeout);
    clearTimeout(this._longHideTimeout);
    var el = this.el;
    var style2 = el.style;
    var styleCoord = this._styleCoord;
    if (!el.innerHTML) {
      style2.display = "none";
    } else {
      style2.cssText = gCssText + assembleCssText(tooltipModel, !this._firstShow, this._longHide) + assembleTransform(styleCoord[0], styleCoord[1], true) + ("border-color:" + convertToColorString(nearPointColor) + ";") + (tooltipModel.get("extraCssText") || "") + (";pointer-events:" + (this._enterable ? "auto" : "none"));
    }
    this._show = true;
    this._firstShow = false;
    this._longHide = false;
  };
  TooltipHTMLContent2.prototype.setContent = function(content, markers, tooltipModel, borderColor, arrowPosition) {
    var el = this.el;
    if (content == null) {
      el.innerHTML = "";
      return;
    }
    var arrow = "";
    if (isString(arrowPosition) && tooltipModel.get("trigger") === "item" && !shouldTooltipConfine(tooltipModel)) {
      arrow = assembleArrow(tooltipModel, borderColor, arrowPosition);
    }
    if (isString(content)) {
      el.innerHTML = content + arrow;
    } else if (content) {
      el.innerHTML = "";
      if (!isArray(content)) {
        content = [content];
      }
      for (var i = 0; i < content.length; i++) {
        if (isDom(content[i]) && content[i].parentNode !== el) {
          el.appendChild(content[i]);
        }
      }
      if (arrow && el.childNodes.length) {
        var arrowEl = document.createElement("div");
        arrowEl.innerHTML = arrow;
        el.appendChild(arrowEl);
      }
    }
  };
  TooltipHTMLContent2.prototype.setEnterable = function(enterable) {
    this._enterable = enterable;
  };
  TooltipHTMLContent2.prototype.getSize = function() {
    var el = this.el;
    return [el.offsetWidth, el.offsetHeight];
  };
  TooltipHTMLContent2.prototype.moveTo = function(zrX, zrY) {
    var styleCoord = this._styleCoord;
    makeStyleCoord$1(styleCoord, this._zr, this._appendToBody, zrX, zrY);
    if (styleCoord[0] != null && styleCoord[1] != null) {
      var style_1 = this.el.style;
      var transforms = assembleTransform(styleCoord[0], styleCoord[1]);
      each$4(transforms, function(transform) {
        style_1[transform[0]] = transform[1];
      });
    }
  };
  TooltipHTMLContent2.prototype._moveIfResized = function() {
    var ratioX = this._styleCoord[2];
    var ratioY = this._styleCoord[3];
    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());
  };
  TooltipHTMLContent2.prototype.hide = function() {
    var _this = this;
    var style2 = this.el.style;
    style2.visibility = "hidden";
    style2.opacity = "0";
    env$1.transform3dSupported && (style2.willChange = "");
    this._show = false;
    this._longHideTimeout = setTimeout(function() {
      return _this._longHide = true;
    }, 500);
  };
  TooltipHTMLContent2.prototype.hideLater = function(time) {
    if (this._show && !(this._inContent && this._enterable) && !this._alwaysShowContent) {
      if (time) {
        this._hideDelay = time;
        this._show = false;
        this._hideTimeout = setTimeout(bind$1(this.hide, this), time);
      } else {
        this.hide();
      }
    }
  };
  TooltipHTMLContent2.prototype.isShow = function() {
    return this._show;
  };
  TooltipHTMLContent2.prototype.dispose = function() {
    this.el.parentNode.removeChild(this.el);
  };
  return TooltipHTMLContent2;
}();
var TooltipHTMLContent$1 = TooltipHTMLContent;
var TooltipRichContent = function() {
  function TooltipRichContent2(api) {
    this._show = false;
    this._styleCoord = [0, 0, 0, 0];
    this._alwaysShowContent = false;
    this._enterable = true;
    this._zr = api.getZr();
    makeStyleCoord(this._styleCoord, this._zr, api.getWidth() / 2, api.getHeight() / 2);
  }
  TooltipRichContent2.prototype.update = function(tooltipModel) {
    var alwaysShowContent = tooltipModel.get("alwaysShowContent");
    alwaysShowContent && this._moveIfResized();
    this._alwaysShowContent = alwaysShowContent;
  };
  TooltipRichContent2.prototype.show = function() {
    if (this._hideTimeout) {
      clearTimeout(this._hideTimeout);
    }
    this.el.show();
    this._show = true;
  };
  TooltipRichContent2.prototype.setContent = function(content, markupStyleCreator, tooltipModel, borderColor, arrowPosition) {
    var _this = this;
    if (isObject$2(content)) {
      throwError("");
    }
    if (this.el) {
      this._zr.remove(this.el);
    }
    var textStyleModel = tooltipModel.getModel("textStyle");
    this.el = new ZRText$1({
      style: {
        rich: markupStyleCreator.richTextStyles,
        text: content,
        lineHeight: 22,
        borderWidth: 1,
        borderColor,
        textShadowColor: textStyleModel.get("textShadowColor"),
        fill: tooltipModel.get(["textStyle", "color"]),
        padding: getPaddingFromTooltipModel(tooltipModel, "richText"),
        verticalAlign: "top",
        align: "left"
      },
      z: tooltipModel.get("z")
    });
    each$4(["backgroundColor", "borderRadius", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY"], function(propName) {
      _this.el.style[propName] = tooltipModel.get(propName);
    });
    each$4(["textShadowBlur", "textShadowOffsetX", "textShadowOffsetY"], function(propName) {
      _this.el.style[propName] = textStyleModel.get(propName) || 0;
    });
    this._zr.add(this.el);
    var self2 = this;
    this.el.on("mouseover", function() {
      if (self2._enterable) {
        clearTimeout(self2._hideTimeout);
        self2._show = true;
      }
      self2._inContent = true;
    });
    this.el.on("mouseout", function() {
      if (self2._enterable) {
        if (self2._show) {
          self2.hideLater(self2._hideDelay);
        }
      }
      self2._inContent = false;
    });
  };
  TooltipRichContent2.prototype.setEnterable = function(enterable) {
    this._enterable = enterable;
  };
  TooltipRichContent2.prototype.getSize = function() {
    var el = this.el;
    var bounding = this.el.getBoundingRect();
    var shadowOuterSize = calcShadowOuterSize(el.style);
    return [bounding.width + shadowOuterSize.left + shadowOuterSize.right, bounding.height + shadowOuterSize.top + shadowOuterSize.bottom];
  };
  TooltipRichContent2.prototype.moveTo = function(x2, y2) {
    var el = this.el;
    if (el) {
      var styleCoord = this._styleCoord;
      makeStyleCoord(styleCoord, this._zr, x2, y2);
      x2 = styleCoord[0];
      y2 = styleCoord[1];
      var style2 = el.style;
      var borderWidth = mathMaxWith0(style2.borderWidth || 0);
      var shadowOuterSize = calcShadowOuterSize(style2);
      el.x = x2 + borderWidth + shadowOuterSize.left;
      el.y = y2 + borderWidth + shadowOuterSize.top;
      el.markRedraw();
    }
  };
  TooltipRichContent2.prototype._moveIfResized = function() {
    var ratioX = this._styleCoord[2];
    var ratioY = this._styleCoord[3];
    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());
  };
  TooltipRichContent2.prototype.hide = function() {
    if (this.el) {
      this.el.hide();
    }
    this._show = false;
  };
  TooltipRichContent2.prototype.hideLater = function(time) {
    if (this._show && !(this._inContent && this._enterable) && !this._alwaysShowContent) {
      if (time) {
        this._hideDelay = time;
        this._show = false;
        this._hideTimeout = setTimeout(bind$1(this.hide, this), time);
      } else {
        this.hide();
      }
    }
  };
  TooltipRichContent2.prototype.isShow = function() {
    return this._show;
  };
  TooltipRichContent2.prototype.dispose = function() {
    this._zr.remove(this.el);
  };
  return TooltipRichContent2;
}();
function mathMaxWith0(val) {
  return Math.max(0, val);
}
function calcShadowOuterSize(style2) {
  var shadowBlur = mathMaxWith0(style2.shadowBlur || 0);
  var shadowOffsetX = mathMaxWith0(style2.shadowOffsetX || 0);
  var shadowOffsetY = mathMaxWith0(style2.shadowOffsetY || 0);
  return {
    left: mathMaxWith0(shadowBlur - shadowOffsetX),
    right: mathMaxWith0(shadowBlur + shadowOffsetX),
    top: mathMaxWith0(shadowBlur - shadowOffsetY),
    bottom: mathMaxWith0(shadowBlur + shadowOffsetY)
  };
}
function makeStyleCoord(out2, zr, zrX, zrY) {
  out2[0] = zrX;
  out2[1] = zrY;
  out2[2] = out2[0] / zr.getWidth();
  out2[3] = out2[1] / zr.getHeight();
}
var TooltipRichContent$1 = TooltipRichContent;
var proxyRect = new Rect$1({
  shape: {
    x: -1,
    y: -1,
    width: 2,
    height: 2
  }
});
var TooltipView = function(_super) {
  __extends(TooltipView2, _super);
  function TooltipView2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.type = TooltipView2.type;
    return _this;
  }
  TooltipView2.prototype.init = function(ecModel, api) {
    if (env$1.node || !api.getDom()) {
      return;
    }
    var tooltipModel = ecModel.getComponent("tooltip");
    var renderMode = this._renderMode = getTooltipRenderMode(tooltipModel.get("renderMode"));
    this._tooltipContent = renderMode === "richText" ? new TooltipRichContent$1(api) : new TooltipHTMLContent$1(api.getDom(), api, {
      appendToBody: tooltipModel.get("appendToBody", true)
    });
  };
  TooltipView2.prototype.render = function(tooltipModel, ecModel, api) {
    if (env$1.node || !api.getDom()) {
      return;
    }
    this.group.removeAll();
    this._tooltipModel = tooltipModel;
    this._ecModel = ecModel;
    this._api = api;
    var tooltipContent = this._tooltipContent;
    tooltipContent.update(tooltipModel);
    tooltipContent.setEnterable(tooltipModel.get("enterable"));
    this._initGlobalListener();
    this._keepShow();
    if (this._renderMode !== "richText" && tooltipModel.get("transitionDuration")) {
      createOrUpdate(this, "_updatePosition", 50, "fixRate");
    } else {
      clear(this, "_updatePosition");
    }
  };
  TooltipView2.prototype._initGlobalListener = function() {
    var tooltipModel = this._tooltipModel;
    var triggerOn = tooltipModel.get("triggerOn");
    register("itemTooltip", this._api, bind$1(function(currTrigger, e2, dispatchAction) {
      if (triggerOn !== "none") {
        if (triggerOn.indexOf(currTrigger) >= 0) {
          this._tryShow(e2, dispatchAction);
        } else if (currTrigger === "leave") {
          this._hide(dispatchAction);
        }
      }
    }, this));
  };
  TooltipView2.prototype._keepShow = function() {
    var tooltipModel = this._tooltipModel;
    var ecModel = this._ecModel;
    var api = this._api;
    var triggerOn = tooltipModel.get("triggerOn");
    if (this._lastX != null && this._lastY != null && triggerOn !== "none" && triggerOn !== "click") {
      var self_1 = this;
      clearTimeout(this._refreshUpdateTimeout);
      this._refreshUpdateTimeout = setTimeout(function() {
        !api.isDisposed() && self_1.manuallyShowTip(tooltipModel, ecModel, api, {
          x: self_1._lastX,
          y: self_1._lastY,
          dataByCoordSys: self_1._lastDataByCoordSys
        });
      });
    }
  };
  TooltipView2.prototype.manuallyShowTip = function(tooltipModel, ecModel, api, payload) {
    if (payload.from === this.uid || env$1.node || !api.getDom()) {
      return;
    }
    var dispatchAction = makeDispatchAction(payload, api);
    this._ticket = "";
    var dataByCoordSys = payload.dataByCoordSys;
    var cmptRef = findComponentReference(payload, ecModel, api);
    if (cmptRef) {
      var rect = cmptRef.el.getBoundingRect().clone();
      rect.applyTransform(cmptRef.el.transform);
      this._tryShow({
        offsetX: rect.x + rect.width / 2,
        offsetY: rect.y + rect.height / 2,
        target: cmptRef.el,
        position: payload.position,
        positionDefault: "bottom"
      }, dispatchAction);
    } else if (payload.tooltip && payload.x != null && payload.y != null) {
      var el = proxyRect;
      el.x = payload.x;
      el.y = payload.y;
      el.update();
      getECData(el).tooltipConfig = {
        name: null,
        option: payload.tooltip
      };
      this._tryShow({
        offsetX: payload.x,
        offsetY: payload.y,
        target: el
      }, dispatchAction);
    } else if (dataByCoordSys) {
      this._tryShow({
        offsetX: payload.x,
        offsetY: payload.y,
        position: payload.position,
        dataByCoordSys,
        tooltipOption: payload.tooltipOption
      }, dispatchAction);
    } else if (payload.seriesIndex != null) {
      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {
        return;
      }
      var pointInfo = findPointFromSeries(payload, ecModel);
      var cx = pointInfo.point[0];
      var cy = pointInfo.point[1];
      if (cx != null && cy != null) {
        this._tryShow({
          offsetX: cx,
          offsetY: cy,
          target: pointInfo.el,
          position: payload.position,
          positionDefault: "bottom"
        }, dispatchAction);
      }
    } else if (payload.x != null && payload.y != null) {
      api.dispatchAction({
        type: "updateAxisPointer",
        x: payload.x,
        y: payload.y
      });
      this._tryShow({
        offsetX: payload.x,
        offsetY: payload.y,
        position: payload.position,
        target: api.getZr().findHover(payload.x, payload.y).target
      }, dispatchAction);
    }
  };
  TooltipView2.prototype.manuallyHideTip = function(tooltipModel, ecModel, api, payload) {
    var tooltipContent = this._tooltipContent;
    if (this._tooltipModel) {
      tooltipContent.hideLater(this._tooltipModel.get("hideDelay"));
    }
    this._lastX = this._lastY = this._lastDataByCoordSys = null;
    if (payload.from !== this.uid) {
      this._hide(makeDispatchAction(payload, api));
    }
  };
  TooltipView2.prototype._manuallyAxisShowTip = function(tooltipModel, ecModel, api, payload) {
    var seriesIndex = payload.seriesIndex;
    var dataIndex = payload.dataIndex;
    var coordSysAxesInfo = ecModel.getComponent("axisPointer").coordSysAxesInfo;
    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {
      return;
    }
    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);
    if (!seriesModel) {
      return;
    }
    var data = seriesModel.getData();
    var tooltipCascadedModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model], this._tooltipModel);
    if (tooltipCascadedModel.get("trigger") !== "axis") {
      return;
    }
    api.dispatchAction({
      type: "updateAxisPointer",
      seriesIndex,
      dataIndex,
      position: payload.position
    });
    return true;
  };
  TooltipView2.prototype._tryShow = function(e2, dispatchAction) {
    var el = e2.target;
    var tooltipModel = this._tooltipModel;
    if (!tooltipModel) {
      return;
    }
    this._lastX = e2.offsetX;
    this._lastY = e2.offsetY;
    var dataByCoordSys = e2.dataByCoordSys;
    if (dataByCoordSys && dataByCoordSys.length) {
      this._showAxisTooltip(dataByCoordSys, e2);
    } else if (el) {
      this._lastDataByCoordSys = null;
      var seriesDispatcher_1;
      var cmptDispatcher_1;
      findEventDispatcher(el, function(target) {
        if (getECData(target).dataIndex != null) {
          seriesDispatcher_1 = target;
          return true;
        }
        if (getECData(target).tooltipConfig != null) {
          cmptDispatcher_1 = target;
          return true;
        }
      }, true);
      if (seriesDispatcher_1) {
        this._showSeriesItemTooltip(e2, seriesDispatcher_1, dispatchAction);
      } else if (cmptDispatcher_1) {
        this._showComponentItemTooltip(e2, cmptDispatcher_1, dispatchAction);
      } else {
        this._hide(dispatchAction);
      }
    } else {
      this._lastDataByCoordSys = null;
      this._hide(dispatchAction);
    }
  };
  TooltipView2.prototype._showOrMove = function(tooltipModel, cb) {
    var delay = tooltipModel.get("showDelay");
    cb = bind$1(cb, this);
    clearTimeout(this._showTimout);
    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();
  };
  TooltipView2.prototype._showAxisTooltip = function(dataByCoordSys, e2) {
    var ecModel = this._ecModel;
    var globalTooltipModel = this._tooltipModel;
    var point = [e2.offsetX, e2.offsetY];
    var singleTooltipModel = buildTooltipModel([e2.tooltipOption], globalTooltipModel);
    var renderMode = this._renderMode;
    var cbParamsList = [];
    var articleMarkup = createTooltipMarkup("section", {
      blocks: [],
      noHeader: true
    });
    var markupTextArrLegacy = [];
    var markupStyleCreator = new TooltipMarkupStyleCreator();
    each$4(dataByCoordSys, function(itemCoordSys) {
      each$4(itemCoordSys.dataByAxis, function(axisItem) {
        var axisModel = ecModel.getComponent(axisItem.axisDim + "Axis", axisItem.axisIndex);
        var axisValue = axisItem.value;
        if (!axisModel || axisValue == null) {
          return;
        }
        var axisValueLabel = getValueLabel(axisValue, axisModel.axis, ecModel, axisItem.seriesDataIndices, axisItem.valueLabelOpt);
        var axisSectionMarkup = createTooltipMarkup("section", {
          header: axisValueLabel,
          noHeader: !trim(axisValueLabel),
          sortBlocks: true,
          blocks: []
        });
        articleMarkup.blocks.push(axisSectionMarkup);
        each$4(axisItem.seriesDataIndices, function(idxItem) {
          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);
          var dataIndex = idxItem.dataIndexInside;
          var cbParams = series.getDataParams(dataIndex);
          if (cbParams.dataIndex < 0) {
            return;
          }
          cbParams.axisDim = axisItem.axisDim;
          cbParams.axisIndex = axisItem.axisIndex;
          cbParams.axisType = axisItem.axisType;
          cbParams.axisId = axisItem.axisId;
          cbParams.axisValue = getAxisRawValue(axisModel.axis, {
            value: axisValue
          });
          cbParams.axisValueLabel = axisValueLabel;
          cbParams.marker = markupStyleCreator.makeTooltipMarker("item", convertToColorString(cbParams.color), renderMode);
          var seriesTooltipResult = normalizeTooltipFormatResult(series.formatTooltip(dataIndex, true, null));
          var frag = seriesTooltipResult.frag;
          if (frag) {
            var valueFormatter = buildTooltipModel([series], globalTooltipModel).get("valueFormatter");
            axisSectionMarkup.blocks.push(valueFormatter ? extend({
              valueFormatter
            }, frag) : frag);
          }
          if (seriesTooltipResult.text) {
            markupTextArrLegacy.push(seriesTooltipResult.text);
          }
          cbParamsList.push(cbParams);
        });
      });
    });
    articleMarkup.blocks.reverse();
    markupTextArrLegacy.reverse();
    var positionExpr = e2.position;
    var orderMode = singleTooltipModel.get("order");
    var builtMarkupText = buildTooltipMarkup(articleMarkup, markupStyleCreator, renderMode, orderMode, ecModel.get("useUTC"), singleTooltipModel.get("textStyle"));
    builtMarkupText && markupTextArrLegacy.unshift(builtMarkupText);
    var blockBreak = renderMode === "richText" ? "\n\n" : "<br/>";
    var allMarkupText = markupTextArrLegacy.join(blockBreak);
    this._showOrMove(singleTooltipModel, function() {
      if (this._updateContentNotChangedOnAxis(dataByCoordSys, cbParamsList)) {
        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, cbParamsList);
      } else {
        this._showTooltipContent(singleTooltipModel, allMarkupText, cbParamsList, Math.random() + "", point[0], point[1], positionExpr, null, markupStyleCreator);
      }
    });
  };
  TooltipView2.prototype._showSeriesItemTooltip = function(e2, dispatcher, dispatchAction) {
    var ecModel = this._ecModel;
    var ecData = getECData(dispatcher);
    var seriesIndex = ecData.seriesIndex;
    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);
    var dataModel = ecData.dataModel || seriesModel;
    var dataIndex = ecData.dataIndex;
    var dataType = ecData.dataType;
    var data = dataModel.getData(dataType);
    var renderMode = this._renderMode;
    var positionDefault = e2.positionDefault;
    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model], this._tooltipModel, positionDefault ? {
      position: positionDefault
    } : null);
    var tooltipTrigger = tooltipModel.get("trigger");
    if (tooltipTrigger != null && tooltipTrigger !== "item") {
      return;
    }
    var params = dataModel.getDataParams(dataIndex, dataType);
    var markupStyleCreator = new TooltipMarkupStyleCreator();
    params.marker = markupStyleCreator.makeTooltipMarker("item", convertToColorString(params.color), renderMode);
    var seriesTooltipResult = normalizeTooltipFormatResult(dataModel.formatTooltip(dataIndex, false, dataType));
    var orderMode = tooltipModel.get("order");
    var valueFormatter = tooltipModel.get("valueFormatter");
    var frag = seriesTooltipResult.frag;
    var markupText = frag ? buildTooltipMarkup(valueFormatter ? extend({
      valueFormatter
    }, frag) : frag, markupStyleCreator, renderMode, orderMode, ecModel.get("useUTC"), tooltipModel.get("textStyle")) : seriesTooltipResult.text;
    var asyncTicket = "item_" + dataModel.name + "_" + dataIndex;
    this._showOrMove(tooltipModel, function() {
      this._showTooltipContent(tooltipModel, markupText, params, asyncTicket, e2.offsetX, e2.offsetY, e2.position, e2.target, markupStyleCreator);
    });
    dispatchAction({
      type: "showTip",
      dataIndexInside: dataIndex,
      dataIndex: data.getRawIndex(dataIndex),
      seriesIndex,
      from: this.uid
    });
  };
  TooltipView2.prototype._showComponentItemTooltip = function(e2, el, dispatchAction) {
    var ecData = getECData(el);
    var tooltipConfig = ecData.tooltipConfig;
    var tooltipOpt = tooltipConfig.option || {};
    if (isString(tooltipOpt)) {
      var content = tooltipOpt;
      tooltipOpt = {
        content,
        formatter: content
      };
    }
    var tooltipModelCascade = [tooltipOpt];
    var cmpt = this._ecModel.getComponent(ecData.componentMainType, ecData.componentIndex);
    if (cmpt) {
      tooltipModelCascade.push(cmpt);
    }
    tooltipModelCascade.push({
      formatter: tooltipOpt.content
    });
    var positionDefault = e2.positionDefault;
    var subTooltipModel = buildTooltipModel(tooltipModelCascade, this._tooltipModel, positionDefault ? {
      position: positionDefault
    } : null);
    var defaultHtml = subTooltipModel.get("content");
    var asyncTicket = Math.random() + "";
    var markupStyleCreator = new TooltipMarkupStyleCreator();
    this._showOrMove(subTooltipModel, function() {
      var formatterParams = clone$2(subTooltipModel.get("formatterParams") || {});
      this._showTooltipContent(subTooltipModel, defaultHtml, formatterParams, asyncTicket, e2.offsetX, e2.offsetY, e2.position, el, markupStyleCreator);
    });
    dispatchAction({
      type: "showTip",
      from: this.uid
    });
  };
  TooltipView2.prototype._showTooltipContent = function(tooltipModel, defaultHtml, params, asyncTicket, x2, y2, positionExpr, el, markupStyleCreator) {
    this._ticket = "";
    if (!tooltipModel.get("showContent") || !tooltipModel.get("show")) {
      return;
    }
    var tooltipContent = this._tooltipContent;
    tooltipContent.setEnterable(tooltipModel.get("enterable"));
    var formatter = tooltipModel.get("formatter");
    positionExpr = positionExpr || tooltipModel.get("position");
    var html = defaultHtml;
    var nearPoint = this._getNearestPoint([x2, y2], params, tooltipModel.get("trigger"), tooltipModel.get("borderColor"));
    var nearPointColor = nearPoint.color;
    if (formatter) {
      if (isString(formatter)) {
        var useUTC = tooltipModel.ecModel.get("useUTC");
        var params0 = isArray(params) ? params[0] : params;
        var isTimeAxis = params0 && params0.axisType && params0.axisType.indexOf("time") >= 0;
        html = formatter;
        if (isTimeAxis) {
          html = format(params0.axisValue, html, useUTC);
        }
        html = formatTpl(html, params, true);
      } else if (isFunction(formatter)) {
        var callback = bind$1(function(cbTicket, html2) {
          if (cbTicket === this._ticket) {
            tooltipContent.setContent(html2, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);
            this._updatePosition(tooltipModel, positionExpr, x2, y2, tooltipContent, params, el);
          }
        }, this);
        this._ticket = asyncTicket;
        html = formatter(params, asyncTicket, callback);
      } else {
        html = formatter;
      }
    }
    tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);
    tooltipContent.show(tooltipModel, nearPointColor);
    this._updatePosition(tooltipModel, positionExpr, x2, y2, tooltipContent, params, el);
  };
  TooltipView2.prototype._getNearestPoint = function(point, tooltipDataParams, trigger, borderColor) {
    if (trigger === "axis" || isArray(tooltipDataParams)) {
      return {
        color: borderColor || (this._renderMode === "html" ? "#fff" : "none")
      };
    }
    if (!isArray(tooltipDataParams)) {
      return {
        color: borderColor || tooltipDataParams.color || tooltipDataParams.borderColor
      };
    }
  };
  TooltipView2.prototype._updatePosition = function(tooltipModel, positionExpr, x2, y2, content, params, el) {
    var viewWidth = this._api.getWidth();
    var viewHeight = this._api.getHeight();
    positionExpr = positionExpr || tooltipModel.get("position");
    var contentSize = content.getSize();
    var align = tooltipModel.get("align");
    var vAlign = tooltipModel.get("verticalAlign");
    var rect = el && el.getBoundingRect().clone();
    el && rect.applyTransform(el.transform);
    if (isFunction(positionExpr)) {
      positionExpr = positionExpr([x2, y2], params, content.el, rect, {
        viewSize: [viewWidth, viewHeight],
        contentSize: contentSize.slice()
      });
    }
    if (isArray(positionExpr)) {
      x2 = parsePercent(positionExpr[0], viewWidth);
      y2 = parsePercent(positionExpr[1], viewHeight);
    } else if (isObject$2(positionExpr)) {
      var boxLayoutPosition = positionExpr;
      boxLayoutPosition.width = contentSize[0];
      boxLayoutPosition.height = contentSize[1];
      var layoutRect = getLayoutRect(boxLayoutPosition, {
        width: viewWidth,
        height: viewHeight
      });
      x2 = layoutRect.x;
      y2 = layoutRect.y;
      align = null;
      vAlign = null;
    } else if (isString(positionExpr) && el) {
      var pos = calcTooltipPosition(positionExpr, rect, contentSize, tooltipModel.get("borderWidth"));
      x2 = pos[0];
      y2 = pos[1];
    } else {
      var pos = refixTooltipPosition(x2, y2, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);
      x2 = pos[0];
      y2 = pos[1];
    }
    align && (x2 -= isCenterAlign(align) ? contentSize[0] / 2 : align === "right" ? contentSize[0] : 0);
    vAlign && (y2 -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === "bottom" ? contentSize[1] : 0);
    if (shouldTooltipConfine(tooltipModel)) {
      var pos = confineTooltipPosition(x2, y2, content, viewWidth, viewHeight);
      x2 = pos[0];
      y2 = pos[1];
    }
    content.moveTo(x2, y2);
  };
  TooltipView2.prototype._updateContentNotChangedOnAxis = function(dataByCoordSys, cbParamsList) {
    var lastCoordSys = this._lastDataByCoordSys;
    var lastCbParamsList = this._cbParamsList;
    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;
    contentNotChanged && each$4(lastCoordSys, function(lastItemCoordSys, indexCoordSys) {
      var lastDataByAxis = lastItemCoordSys.dataByAxis || [];
      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};
      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];
      contentNotChanged = contentNotChanged && lastDataByAxis.length === thisDataByAxis.length;
      contentNotChanged && each$4(lastDataByAxis, function(lastItem, indexAxis) {
        var thisItem = thisDataByAxis[indexAxis] || {};
        var lastIndices = lastItem.seriesDataIndices || [];
        var newIndices = thisItem.seriesDataIndices || [];
        contentNotChanged = contentNotChanged && lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;
        contentNotChanged && each$4(lastIndices, function(lastIdxItem, j2) {
          var newIdxItem = newIndices[j2];
          contentNotChanged = contentNotChanged && lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;
        });
        lastCbParamsList && each$4(lastItem.seriesDataIndices, function(idxItem) {
          var seriesIdx = idxItem.seriesIndex;
          var cbParams = cbParamsList[seriesIdx];
          var lastCbParams = lastCbParamsList[seriesIdx];
          if (cbParams && lastCbParams && lastCbParams.data !== cbParams.data) {
            contentNotChanged = false;
          }
        });
      });
    });
    this._lastDataByCoordSys = dataByCoordSys;
    this._cbParamsList = cbParamsList;
    return !!contentNotChanged;
  };
  TooltipView2.prototype._hide = function(dispatchAction) {
    this._lastDataByCoordSys = null;
    dispatchAction({
      type: "hideTip",
      from: this.uid
    });
  };
  TooltipView2.prototype.dispose = function(ecModel, api) {
    if (env$1.node || !api.getDom()) {
      return;
    }
    clear(this, "_updatePosition");
    this._tooltipContent.dispose();
    unregister("itemTooltip", api);
  };
  TooltipView2.type = "tooltip";
  return TooltipView2;
}(ComponentView$1);
function buildTooltipModel(modelCascade, globalTooltipModel, defaultTooltipOption) {
  var ecModel = globalTooltipModel.ecModel;
  var resultModel;
  if (defaultTooltipOption) {
    resultModel = new Model$1(defaultTooltipOption, ecModel, ecModel);
    resultModel = new Model$1(globalTooltipModel.option, resultModel, ecModel);
  } else {
    resultModel = globalTooltipModel;
  }
  for (var i = modelCascade.length - 1; i >= 0; i--) {
    var tooltipOpt = modelCascade[i];
    if (tooltipOpt) {
      if (tooltipOpt instanceof Model$1) {
        tooltipOpt = tooltipOpt.get("tooltip", true);
      }
      if (isString(tooltipOpt)) {
        tooltipOpt = {
          formatter: tooltipOpt
        };
      }
      if (tooltipOpt) {
        resultModel = new Model$1(tooltipOpt, resultModel, ecModel);
      }
    }
  }
  return resultModel;
}
function makeDispatchAction(payload, api) {
  return payload.dispatchAction || bind$1(api.dispatchAction, api);
}
function refixTooltipPosition(x2, y2, content, viewWidth, viewHeight, gapH, gapV) {
  var size = content.getSize();
  var width = size[0];
  var height = size[1];
  if (gapH != null) {
    if (x2 + width + gapH + 2 > viewWidth) {
      x2 -= width + gapH;
    } else {
      x2 += gapH;
    }
  }
  if (gapV != null) {
    if (y2 + height + gapV > viewHeight) {
      y2 -= height + gapV;
    } else {
      y2 += gapV;
    }
  }
  return [x2, y2];
}
function confineTooltipPosition(x2, y2, content, viewWidth, viewHeight) {
  var size = content.getSize();
  var width = size[0];
  var height = size[1];
  x2 = Math.min(x2 + width, viewWidth) - width;
  y2 = Math.min(y2 + height, viewHeight) - height;
  x2 = Math.max(x2, 0);
  y2 = Math.max(y2, 0);
  return [x2, y2];
}
function calcTooltipPosition(position, rect, contentSize, borderWidth) {
  var domWidth = contentSize[0];
  var domHeight = contentSize[1];
  var offset = Math.ceil(Math.SQRT2 * borderWidth) + 8;
  var x2 = 0;
  var y2 = 0;
  var rectWidth = rect.width;
  var rectHeight = rect.height;
  switch (position) {
    case "inside":
      x2 = rect.x + rectWidth / 2 - domWidth / 2;
      y2 = rect.y + rectHeight / 2 - domHeight / 2;
      break;
    case "top":
      x2 = rect.x + rectWidth / 2 - domWidth / 2;
      y2 = rect.y - domHeight - offset;
      break;
    case "bottom":
      x2 = rect.x + rectWidth / 2 - domWidth / 2;
      y2 = rect.y + rectHeight + offset;
      break;
    case "left":
      x2 = rect.x - domWidth - offset;
      y2 = rect.y + rectHeight / 2 - domHeight / 2;
      break;
    case "right":
      x2 = rect.x + rectWidth + offset;
      y2 = rect.y + rectHeight / 2 - domHeight / 2;
  }
  return [x2, y2];
}
function isCenterAlign(align) {
  return align === "center" || align === "middle";
}
function findComponentReference(payload, ecModel, api) {
  var queryOptionMap = preParseFinder(payload).queryOptionMap;
  var componentMainType = queryOptionMap.keys()[0];
  if (!componentMainType || componentMainType === "series") {
    return;
  }
  var queryResult = queryReferringComponents(ecModel, componentMainType, queryOptionMap.get(componentMainType), {
    useDefault: false,
    enableAll: false,
    enableNone: false
  });
  var model = queryResult.models[0];
  if (!model) {
    return;
  }
  var view = api.getViewOfComponentModel(model);
  var el;
  view.group.traverse(function(subEl) {
    var tooltipConfig = getECData(subEl).tooltipConfig;
    if (tooltipConfig && tooltipConfig.name === payload.name) {
      el = subEl;
      return true;
    }
  });
  if (el) {
    return {
      componentMainType,
      componentIndex: model.componentIndex,
      el
    };
  }
}
var TooltipView$1 = TooltipView;
function install$4(registers) {
  use(install$5);
  registers.registerComponentModel(TooltipModel$1);
  registers.registerComponentView(TooltipView$1);
  registers.registerAction({
    type: "showTip",
    event: "showTip",
    update: "tooltip:manuallyShowTip"
  }, noop);
  registers.registerAction({
    type: "hideTip",
    event: "hideTip",
    update: "tooltip:manuallyHideTip"
  }, noop);
}
var TitleModel = function(_super) {
  __extends(TitleModel2, _super);
  function TitleModel2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.type = TitleModel2.type;
    _this.layoutMode = {
      type: "box",
      ignoreSize: true
    };
    return _this;
  }
  TitleModel2.type = "title";
  TitleModel2.defaultOption = {
    z: 6,
    show: true,
    text: "",
    target: "blank",
    subtext: "",
    subtarget: "blank",
    left: 0,
    top: 0,
    backgroundColor: "rgba(0,0,0,0)",
    borderColor: "#ccc",
    borderWidth: 0,
    padding: 5,
    itemGap: 10,
    textStyle: {
      fontSize: 18,
      fontWeight: "bold",
      color: "#464646"
    },
    subtextStyle: {
      fontSize: 12,
      color: "#6E7079"
    }
  };
  return TitleModel2;
}(ComponentModel$1);
var TitleView = function(_super) {
  __extends(TitleView2, _super);
  function TitleView2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.type = TitleView2.type;
    return _this;
  }
  TitleView2.prototype.render = function(titleModel, ecModel, api) {
    this.group.removeAll();
    if (!titleModel.get("show")) {
      return;
    }
    var group = this.group;
    var textStyleModel = titleModel.getModel("textStyle");
    var subtextStyleModel = titleModel.getModel("subtextStyle");
    var textAlign = titleModel.get("textAlign");
    var textVerticalAlign = retrieve2(titleModel.get("textBaseline"), titleModel.get("textVerticalAlign"));
    var textEl = new ZRText$1({
      style: createTextStyle(textStyleModel, {
        text: titleModel.get("text"),
        fill: textStyleModel.getTextColor()
      }, {
        disableBox: true
      }),
      z2: 10
    });
    var textRect = textEl.getBoundingRect();
    var subText = titleModel.get("subtext");
    var subTextEl = new ZRText$1({
      style: createTextStyle(subtextStyleModel, {
        text: subText,
        fill: subtextStyleModel.getTextColor(),
        y: textRect.height + titleModel.get("itemGap"),
        verticalAlign: "top"
      }, {
        disableBox: true
      }),
      z2: 10
    });
    var link = titleModel.get("link");
    var sublink = titleModel.get("sublink");
    var triggerEvent = titleModel.get("triggerEvent", true);
    textEl.silent = !link && !triggerEvent;
    subTextEl.silent = !sublink && !triggerEvent;
    if (link) {
      textEl.on("click", function() {
        windowOpen(link, "_" + titleModel.get("target"));
      });
    }
    if (sublink) {
      subTextEl.on("click", function() {
        windowOpen(sublink, "_" + titleModel.get("subtarget"));
      });
    }
    getECData(textEl).eventData = getECData(subTextEl).eventData = triggerEvent ? {
      componentType: "title",
      componentIndex: titleModel.componentIndex
    } : null;
    group.add(textEl);
    subText && group.add(subTextEl);
    var groupRect = group.getBoundingRect();
    var layoutOption = titleModel.getBoxLayoutParams();
    layoutOption.width = groupRect.width;
    layoutOption.height = groupRect.height;
    var layoutRect = getLayoutRect(layoutOption, {
      width: api.getWidth(),
      height: api.getHeight()
    }, titleModel.get("padding"));
    if (!textAlign) {
      textAlign = titleModel.get("left") || titleModel.get("right");
      if (textAlign === "middle") {
        textAlign = "center";
      }
      if (textAlign === "right") {
        layoutRect.x += layoutRect.width;
      } else if (textAlign === "center") {
        layoutRect.x += layoutRect.width / 2;
      }
    }
    if (!textVerticalAlign) {
      textVerticalAlign = titleModel.get("top") || titleModel.get("bottom");
      if (textVerticalAlign === "center") {
        textVerticalAlign = "middle";
      }
      if (textVerticalAlign === "bottom") {
        layoutRect.y += layoutRect.height;
      } else if (textVerticalAlign === "middle") {
        layoutRect.y += layoutRect.height / 2;
      }
      textVerticalAlign = textVerticalAlign || "top";
    }
    group.x = layoutRect.x;
    group.y = layoutRect.y;
    group.markRedraw();
    var alignStyle = {
      align: textAlign,
      verticalAlign: textVerticalAlign
    };
    textEl.setStyle(alignStyle);
    subTextEl.setStyle(alignStyle);
    groupRect = group.getBoundingRect();
    var padding = layoutRect.margin;
    var style2 = titleModel.getItemStyle(["color", "opacity"]);
    style2.fill = titleModel.get("backgroundColor");
    var rect = new Rect$1({
      shape: {
        x: groupRect.x - padding[3],
        y: groupRect.y - padding[0],
        width: groupRect.width + padding[1] + padding[3],
        height: groupRect.height + padding[0] + padding[2],
        r: titleModel.get("borderRadius")
      },
      style: style2,
      subPixelOptimize: true,
      silent: true
    });
    group.add(rect);
  };
  TitleView2.type = "title";
  return TitleView2;
}(ComponentView$1);
function install$3(registers) {
  registers.registerComponentModel(TitleModel);
  registers.registerComponentView(TitleView);
}
var getDefaultSelectorOptions = function(ecModel, type) {
  if (type === "all") {
    return {
      type: "all",
      title: ecModel.getLocaleModel().get(["legend", "selector", "all"])
    };
  } else if (type === "inverse") {
    return {
      type: "inverse",
      title: ecModel.getLocaleModel().get(["legend", "selector", "inverse"])
    };
  }
};
var LegendModel = function(_super) {
  __extends(LegendModel2, _super);
  function LegendModel2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.type = LegendModel2.type;
    _this.layoutMode = {
      type: "box",
      ignoreSize: true
    };
    return _this;
  }
  LegendModel2.prototype.init = function(option, parentModel, ecModel) {
    this.mergeDefaultAndTheme(option, ecModel);
    option.selected = option.selected || {};
    this._updateSelector(option);
  };
  LegendModel2.prototype.mergeOption = function(option, ecModel) {
    _super.prototype.mergeOption.call(this, option, ecModel);
    this._updateSelector(option);
  };
  LegendModel2.prototype._updateSelector = function(option) {
    var selector = option.selector;
    var ecModel = this.ecModel;
    if (selector === true) {
      selector = option.selector = ["all", "inverse"];
    }
    if (isArray(selector)) {
      each$4(selector, function(item, index) {
        isString(item) && (item = {
          type: item
        });
        selector[index] = merge(item, getDefaultSelectorOptions(ecModel, item.type));
      });
    }
  };
  LegendModel2.prototype.optionUpdated = function() {
    this._updateData(this.ecModel);
    var legendData = this._data;
    if (legendData[0] && this.get("selectedMode") === "single") {
      var hasSelected = false;
      for (var i = 0; i < legendData.length; i++) {
        var name_1 = legendData[i].get("name");
        if (this.isSelected(name_1)) {
          this.select(name_1);
          hasSelected = true;
          break;
        }
      }
      !hasSelected && this.select(legendData[0].get("name"));
    }
  };
  LegendModel2.prototype._updateData = function(ecModel) {
    var potentialData = [];
    var availableNames = [];
    ecModel.eachRawSeries(function(seriesModel) {
      var seriesName = seriesModel.name;
      availableNames.push(seriesName);
      var isPotential;
      if (seriesModel.legendVisualProvider) {
        var provider = seriesModel.legendVisualProvider;
        var names = provider.getAllNames();
        if (!ecModel.isSeriesFiltered(seriesModel)) {
          availableNames = availableNames.concat(names);
        }
        if (names.length) {
          potentialData = potentialData.concat(names);
        } else {
          isPotential = true;
        }
      } else {
        isPotential = true;
      }
      if (isPotential && isNameSpecified(seriesModel)) {
        potentialData.push(seriesModel.name);
      }
    });
    this._availableNames = availableNames;
    var rawData = this.get("data") || potentialData;
    var legendNameMap = createHashMap();
    var legendData = map$1(rawData, function(dataItem) {
      if (isString(dataItem) || isNumber(dataItem)) {
        dataItem = {
          name: dataItem
        };
      }
      if (legendNameMap.get(dataItem.name)) {
        return null;
      }
      legendNameMap.set(dataItem.name, true);
      return new Model$1(dataItem, this, this.ecModel);
    }, this);
    this._data = filter(legendData, function(item) {
      return !!item;
    });
  };
  LegendModel2.prototype.getData = function() {
    return this._data;
  };
  LegendModel2.prototype.select = function(name) {
    var selected = this.option.selected;
    var selectedMode = this.get("selectedMode");
    if (selectedMode === "single") {
      var data = this._data;
      each$4(data, function(dataItem) {
        selected[dataItem.get("name")] = false;
      });
    }
    selected[name] = true;
  };
  LegendModel2.prototype.unSelect = function(name) {
    if (this.get("selectedMode") !== "single") {
      this.option.selected[name] = false;
    }
  };
  LegendModel2.prototype.toggleSelected = function(name) {
    var selected = this.option.selected;
    if (!selected.hasOwnProperty(name)) {
      selected[name] = true;
    }
    this[selected[name] ? "unSelect" : "select"](name);
  };
  LegendModel2.prototype.allSelect = function() {
    var data = this._data;
    var selected = this.option.selected;
    each$4(data, function(dataItem) {
      selected[dataItem.get("name", true)] = true;
    });
  };
  LegendModel2.prototype.inverseSelect = function() {
    var data = this._data;
    var selected = this.option.selected;
    each$4(data, function(dataItem) {
      var name = dataItem.get("name", true);
      if (!selected.hasOwnProperty(name)) {
        selected[name] = true;
      }
      selected[name] = !selected[name];
    });
  };
  LegendModel2.prototype.isSelected = function(name) {
    var selected = this.option.selected;
    return !(selected.hasOwnProperty(name) && !selected[name]) && indexOf(this._availableNames, name) >= 0;
  };
  LegendModel2.prototype.getOrient = function() {
    return this.get("orient") === "vertical" ? {
      index: 1,
      name: "vertical"
    } : {
      index: 0,
      name: "horizontal"
    };
  };
  LegendModel2.type = "legend.plain";
  LegendModel2.dependencies = ["series"];
  LegendModel2.defaultOption = {
    z: 4,
    show: true,
    orient: "horizontal",
    left: "center",
    top: 0,
    align: "auto",
    backgroundColor: "rgba(0,0,0,0)",
    borderColor: "#ccc",
    borderRadius: 0,
    borderWidth: 0,
    padding: 5,
    itemGap: 10,
    itemWidth: 25,
    itemHeight: 14,
    symbolRotate: "inherit",
    symbolKeepAspect: true,
    inactiveColor: "#ccc",
    inactiveBorderColor: "#ccc",
    inactiveBorderWidth: "auto",
    itemStyle: {
      color: "inherit",
      opacity: "inherit",
      borderColor: "inherit",
      borderWidth: "auto",
      borderCap: "inherit",
      borderJoin: "inherit",
      borderDashOffset: "inherit",
      borderMiterLimit: "inherit"
    },
    lineStyle: {
      width: "auto",
      color: "inherit",
      inactiveColor: "#ccc",
      inactiveWidth: 2,
      opacity: "inherit",
      type: "inherit",
      cap: "inherit",
      join: "inherit",
      dashOffset: "inherit",
      miterLimit: "inherit"
    },
    textStyle: {
      color: "#333"
    },
    selectedMode: true,
    selector: false,
    selectorLabel: {
      show: true,
      borderRadius: 10,
      padding: [3, 5, 3, 5],
      fontSize: 12,
      fontFamily: "sans-serif",
      color: "#666",
      borderWidth: 1,
      borderColor: "#666"
    },
    emphasis: {
      selectorLabel: {
        show: true,
        color: "#eee",
        backgroundColor: "#666"
      }
    },
    selectorPosition: "auto",
    selectorItemGap: 7,
    selectorButtonGap: 10,
    tooltip: {
      show: false
    }
  };
  return LegendModel2;
}(ComponentModel$1);
var LegendModel$1 = LegendModel;
var curry = curry$1;
var each = each$4;
var Group$1 = Group$3;
var LegendView = function(_super) {
  __extends(LegendView2, _super);
  function LegendView2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.type = LegendView2.type;
    _this.newlineDisabled = false;
    return _this;
  }
  LegendView2.prototype.init = function() {
    this.group.add(this._contentGroup = new Group$1());
    this.group.add(this._selectorGroup = new Group$1());
    this._isFirstRender = true;
  };
  LegendView2.prototype.getContentGroup = function() {
    return this._contentGroup;
  };
  LegendView2.prototype.getSelectorGroup = function() {
    return this._selectorGroup;
  };
  LegendView2.prototype.render = function(legendModel, ecModel, api) {
    var isFirstRender = this._isFirstRender;
    this._isFirstRender = false;
    this.resetInner();
    if (!legendModel.get("show", true)) {
      return;
    }
    var itemAlign = legendModel.get("align");
    var orient = legendModel.get("orient");
    if (!itemAlign || itemAlign === "auto") {
      itemAlign = legendModel.get("left") === "right" && orient === "vertical" ? "right" : "left";
    }
    var selector = legendModel.get("selector", true);
    var selectorPosition = legendModel.get("selectorPosition", true);
    if (selector && (!selectorPosition || selectorPosition === "auto")) {
      selectorPosition = orient === "horizontal" ? "end" : "start";
    }
    this.renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition);
    var positionInfo = legendModel.getBoxLayoutParams();
    var viewportSize = {
      width: api.getWidth(),
      height: api.getHeight()
    };
    var padding = legendModel.get("padding");
    var maxSize = getLayoutRect(positionInfo, viewportSize, padding);
    var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition);
    var layoutRect = getLayoutRect(defaults({
      width: mainRect.width,
      height: mainRect.height
    }, positionInfo), viewportSize, padding);
    this.group.x = layoutRect.x - mainRect.x;
    this.group.y = layoutRect.y - mainRect.y;
    this.group.markRedraw();
    this.group.add(this._backgroundEl = makeBackground(mainRect, legendModel));
  };
  LegendView2.prototype.resetInner = function() {
    this.getContentGroup().removeAll();
    this._backgroundEl && this.group.remove(this._backgroundEl);
    this.getSelectorGroup().removeAll();
  };
  LegendView2.prototype.renderInner = function(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {
    var contentGroup = this.getContentGroup();
    var legendDrawnMap = createHashMap();
    var selectMode = legendModel.get("selectedMode");
    var excludeSeriesId = [];
    ecModel.eachRawSeries(function(seriesModel) {
      !seriesModel.get("legendHoverLink") && excludeSeriesId.push(seriesModel.id);
    });
    each(legendModel.getData(), function(legendItemModel, dataIndex) {
      var name = legendItemModel.get("name");
      if (!this.newlineDisabled && (name === "" || name === "\n")) {
        var g = new Group$1();
        g.newline = true;
        contentGroup.add(g);
        return;
      }
      var seriesModel = ecModel.getSeriesByName(name)[0];
      if (legendDrawnMap.get(name)) {
        return;
      }
      if (seriesModel) {
        var data = seriesModel.getData();
        var lineVisualStyle = data.getVisual("legendLineStyle") || {};
        var legendIcon = data.getVisual("legendIcon");
        var style2 = data.getVisual("style");
        var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, style2, legendIcon, selectMode, api);
        itemGroup.on("click", curry(dispatchSelectAction, name, null, api, excludeSeriesId)).on("mouseover", curry(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId)).on("mouseout", curry(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));
        legendDrawnMap.set(name, true);
      } else {
        ecModel.eachRawSeries(function(seriesModel2) {
          if (legendDrawnMap.get(name)) {
            return;
          }
          if (seriesModel2.legendVisualProvider) {
            var provider = seriesModel2.legendVisualProvider;
            if (!provider.containName(name)) {
              return;
            }
            var idx = provider.indexOfName(name);
            var style3 = provider.getItemVisual(idx, "style");
            var legendIcon2 = provider.getItemVisual(idx, "legendIcon");
            var colorArr = parse(style3.fill);
            if (colorArr && colorArr[3] === 0) {
              colorArr[3] = 0.2;
              style3 = extend(extend({}, style3), {
                fill: stringify(colorArr, "rgba")
              });
            }
            var itemGroup2 = this._createItem(seriesModel2, name, dataIndex, legendItemModel, legendModel, itemAlign, {}, style3, legendIcon2, selectMode, api);
            itemGroup2.on("click", curry(dispatchSelectAction, null, name, api, excludeSeriesId)).on("mouseover", curry(dispatchHighlightAction, null, name, api, excludeSeriesId)).on("mouseout", curry(dispatchDownplayAction, null, name, api, excludeSeriesId));
            legendDrawnMap.set(name, true);
          }
        }, this);
      }
    }, this);
    if (selector) {
      this._createSelector(selector, legendModel, api, orient, selectorPosition);
    }
  };
  LegendView2.prototype._createSelector = function(selector, legendModel, api, orient, selectorPosition) {
    var selectorGroup = this.getSelectorGroup();
    each(selector, function createSelectorButton(selectorItem) {
      var type = selectorItem.type;
      var labelText = new ZRText$1({
        style: {
          x: 0,
          y: 0,
          align: "center",
          verticalAlign: "middle"
        },
        onclick: function() {
          api.dispatchAction({
            type: type === "all" ? "legendAllSelect" : "legendInverseSelect"
          });
        }
      });
      selectorGroup.add(labelText);
      var labelModel = legendModel.getModel("selectorLabel");
      var emphasisLabelModel = legendModel.getModel(["emphasis", "selectorLabel"]);
      setLabelStyle(labelText, {
        normal: labelModel,
        emphasis: emphasisLabelModel
      }, {
        defaultText: selectorItem.title
      });
      enableHoverEmphasis(labelText);
    });
  };
  LegendView2.prototype._createItem = function(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, itemVisualStyle, legendIcon, selectMode, api) {
    var drawType = seriesModel.visualDrawType;
    var itemWidth = legendModel.get("itemWidth");
    var itemHeight = legendModel.get("itemHeight");
    var isSelected = legendModel.isSelected(name);
    var iconRotate = legendItemModel.get("symbolRotate");
    var symbolKeepAspect = legendItemModel.get("symbolKeepAspect");
    var legendIconType = legendItemModel.get("icon");
    legendIcon = legendIconType || legendIcon || "roundRect";
    var style2 = getLegendStyle(legendIcon, legendItemModel, lineVisualStyle, itemVisualStyle, drawType, isSelected, api);
    var itemGroup = new Group$1();
    var textStyleModel = legendItemModel.getModel("textStyle");
    if (isFunction(seriesModel.getLegendIcon) && (!legendIconType || legendIconType === "inherit")) {
      itemGroup.add(seriesModel.getLegendIcon({
        itemWidth,
        itemHeight,
        icon: legendIcon,
        iconRotate,
        itemStyle: style2.itemStyle,
        lineStyle: style2.lineStyle,
        symbolKeepAspect
      }));
    } else {
      var rotate2 = legendIconType === "inherit" && seriesModel.getData().getVisual("symbol") ? iconRotate === "inherit" ? seriesModel.getData().getVisual("symbolRotate") : iconRotate : 0;
      itemGroup.add(getDefaultLegendIcon({
        itemWidth,
        itemHeight,
        icon: legendIcon,
        iconRotate: rotate2,
        itemStyle: style2.itemStyle,
        lineStyle: style2.lineStyle,
        symbolKeepAspect
      }));
    }
    var textX = itemAlign === "left" ? itemWidth + 5 : -5;
    var textAlign = itemAlign;
    var formatter = legendModel.get("formatter");
    var content = name;
    if (isString(formatter) && formatter) {
      content = formatter.replace("{name}", name != null ? name : "");
    } else if (isFunction(formatter)) {
      content = formatter(name);
    }
    var textColor = isSelected ? textStyleModel.getTextColor() : legendItemModel.get("inactiveColor");
    itemGroup.add(new ZRText$1({
      style: createTextStyle(textStyleModel, {
        text: content,
        x: textX,
        y: itemHeight / 2,
        fill: textColor,
        align: textAlign,
        verticalAlign: "middle"
      }, {
        inheritColor: textColor
      })
    }));
    var hitRect = new Rect$1({
      shape: itemGroup.getBoundingRect(),
      invisible: true
    });
    var tooltipModel = legendItemModel.getModel("tooltip");
    if (tooltipModel.get("show")) {
      setTooltipConfig({
        el: hitRect,
        componentModel: legendModel,
        itemName: name,
        itemTooltipOption: tooltipModel.option
      });
    }
    itemGroup.add(hitRect);
    itemGroup.eachChild(function(child) {
      child.silent = true;
    });
    hitRect.silent = !selectMode;
    this.getContentGroup().add(itemGroup);
    enableHoverEmphasis(itemGroup);
    itemGroup.__legendDataIndex = dataIndex;
    return itemGroup;
  };
  LegendView2.prototype.layoutInner = function(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {
    var contentGroup = this.getContentGroup();
    var selectorGroup = this.getSelectorGroup();
    box(legendModel.get("orient"), contentGroup, legendModel.get("itemGap"), maxSize.width, maxSize.height);
    var contentRect = contentGroup.getBoundingRect();
    var contentPos = [-contentRect.x, -contentRect.y];
    selectorGroup.markRedraw();
    contentGroup.markRedraw();
    if (selector) {
      box(
        "horizontal",
        selectorGroup,
        legendModel.get("selectorItemGap", true)
      );
      var selectorRect = selectorGroup.getBoundingRect();
      var selectorPos = [-selectorRect.x, -selectorRect.y];
      var selectorButtonGap = legendModel.get("selectorButtonGap", true);
      var orientIdx = legendModel.getOrient().index;
      var wh = orientIdx === 0 ? "width" : "height";
      var hw = orientIdx === 0 ? "height" : "width";
      var yx = orientIdx === 0 ? "y" : "x";
      if (selectorPosition === "end") {
        selectorPos[orientIdx] += contentRect[wh] + selectorButtonGap;
      } else {
        contentPos[orientIdx] += selectorRect[wh] + selectorButtonGap;
      }
      selectorPos[1 - orientIdx] += contentRect[hw] / 2 - selectorRect[hw] / 2;
      selectorGroup.x = selectorPos[0];
      selectorGroup.y = selectorPos[1];
      contentGroup.x = contentPos[0];
      contentGroup.y = contentPos[1];
      var mainRect = {
        x: 0,
        y: 0
      };
      mainRect[wh] = contentRect[wh] + selectorButtonGap + selectorRect[wh];
      mainRect[hw] = Math.max(contentRect[hw], selectorRect[hw]);
      mainRect[yx] = Math.min(0, selectorRect[yx] + selectorPos[1 - orientIdx]);
      return mainRect;
    } else {
      contentGroup.x = contentPos[0];
      contentGroup.y = contentPos[1];
      return this.group.getBoundingRect();
    }
  };
  LegendView2.prototype.remove = function() {
    this.getContentGroup().removeAll();
    this._isFirstRender = true;
  };
  LegendView2.type = "legend.plain";
  return LegendView2;
}(ComponentView$1);
function getLegendStyle(iconType, legendItemModel, lineVisualStyle, itemVisualStyle, drawType, isSelected, api) {
  function handleCommonProps(style2, visualStyle) {
    if (style2.lineWidth === "auto") {
      style2.lineWidth = visualStyle.lineWidth > 0 ? 2 : 0;
    }
    each(style2, function(propVal, propName) {
      style2[propName] === "inherit" && (style2[propName] = visualStyle[propName]);
    });
  }
  var itemStyleModel = legendItemModel.getModel("itemStyle");
  var itemStyle = itemStyleModel.getItemStyle();
  var iconBrushType = iconType.lastIndexOf("empty", 0) === 0 ? "fill" : "stroke";
  var decalStyle = itemStyleModel.getShallow("decal");
  itemStyle.decal = !decalStyle || decalStyle === "inherit" ? itemVisualStyle.decal : createOrUpdatePatternFromDecal(decalStyle, api);
  if (itemStyle.fill === "inherit") {
    itemStyle.fill = itemVisualStyle[drawType];
  }
  if (itemStyle.stroke === "inherit") {
    itemStyle.stroke = itemVisualStyle[iconBrushType];
  }
  if (itemStyle.opacity === "inherit") {
    itemStyle.opacity = (drawType === "fill" ? itemVisualStyle : lineVisualStyle).opacity;
  }
  handleCommonProps(itemStyle, itemVisualStyle);
  var legendLineModel = legendItemModel.getModel("lineStyle");
  var lineStyle = legendLineModel.getLineStyle();
  handleCommonProps(lineStyle, lineVisualStyle);
  itemStyle.fill === "auto" && (itemStyle.fill = itemVisualStyle.fill);
  itemStyle.stroke === "auto" && (itemStyle.stroke = itemVisualStyle.fill);
  lineStyle.stroke === "auto" && (lineStyle.stroke = itemVisualStyle.fill);
  if (!isSelected) {
    var borderWidth = legendItemModel.get("inactiveBorderWidth");
    var visualHasBorder = itemStyle[iconBrushType];
    itemStyle.lineWidth = borderWidth === "auto" ? itemVisualStyle.lineWidth > 0 && visualHasBorder ? 2 : 0 : itemStyle.lineWidth;
    itemStyle.fill = legendItemModel.get("inactiveColor");
    itemStyle.stroke = legendItemModel.get("inactiveBorderColor");
    lineStyle.stroke = legendLineModel.get("inactiveColor");
    lineStyle.lineWidth = legendLineModel.get("inactiveWidth");
  }
  return {
    itemStyle,
    lineStyle
  };
}
function getDefaultLegendIcon(opt) {
  var symboType = opt.icon || "roundRect";
  var icon = createSymbol(symboType, 0, 0, opt.itemWidth, opt.itemHeight, opt.itemStyle.fill, opt.symbolKeepAspect);
  icon.setStyle(opt.itemStyle);
  icon.rotation = (opt.iconRotate || 0) * Math.PI / 180;
  icon.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);
  if (symboType.indexOf("empty") > -1) {
    icon.style.stroke = icon.style.fill;
    icon.style.fill = "#fff";
    icon.style.lineWidth = 2;
  }
  return icon;
}
function dispatchSelectAction(seriesName, dataName, api, excludeSeriesId) {
  dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId);
  api.dispatchAction({
    type: "legendToggleSelect",
    name: seriesName != null ? seriesName : dataName
  });
  dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId);
}
function isUseHoverLayer(api) {
  var list = api.getZr().storage.getDisplayList();
  var emphasisState;
  var i = 0;
  var len2 = list.length;
  while (i < len2 && !(emphasisState = list[i].states.emphasis)) {
    i++;
  }
  return emphasisState && emphasisState.hoverLayer;
}
function dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {
  if (!isUseHoverLayer(api)) {
    api.dispatchAction({
      type: "highlight",
      seriesName,
      name: dataName,
      excludeSeriesId
    });
  }
}
function dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {
  if (!isUseHoverLayer(api)) {
    api.dispatchAction({
      type: "downplay",
      seriesName,
      name: dataName,
      excludeSeriesId
    });
  }
}
var LegendView$1 = LegendView;
function legendFilter(ecModel) {
  var legendModels = ecModel.findComponents({
    mainType: "legend"
  });
  if (legendModels && legendModels.length) {
    ecModel.filterSeries(function(series) {
      for (var i = 0; i < legendModels.length; i++) {
        if (!legendModels[i].isSelected(series.name)) {
          return false;
        }
      }
      return true;
    });
  }
}
function legendSelectActionHandler(methodName, payload, ecModel) {
  var selectedMap = {};
  var isToggleSelect = methodName === "toggleSelected";
  var isSelected;
  ecModel.eachComponent("legend", function(legendModel) {
    if (isToggleSelect && isSelected != null) {
      legendModel[isSelected ? "select" : "unSelect"](payload.name);
    } else if (methodName === "allSelect" || methodName === "inverseSelect") {
      legendModel[methodName]();
    } else {
      legendModel[methodName](payload.name);
      isSelected = legendModel.isSelected(payload.name);
    }
    var legendData = legendModel.getData();
    each$4(legendData, function(model) {
      var name = model.get("name");
      if (name === "\n" || name === "") {
        return;
      }
      var isItemSelected = legendModel.isSelected(name);
      if (selectedMap.hasOwnProperty(name)) {
        selectedMap[name] = selectedMap[name] && isItemSelected;
      } else {
        selectedMap[name] = isItemSelected;
      }
    });
  });
  return methodName === "allSelect" || methodName === "inverseSelect" ? {
    selected: selectedMap
  } : {
    name: payload.name,
    selected: selectedMap
  };
}
function installLegendAction(registers) {
  registers.registerAction("legendToggleSelect", "legendselectchanged", curry$1(legendSelectActionHandler, "toggleSelected"));
  registers.registerAction("legendAllSelect", "legendselectall", curry$1(legendSelectActionHandler, "allSelect"));
  registers.registerAction("legendInverseSelect", "legendinverseselect", curry$1(legendSelectActionHandler, "inverseSelect"));
  registers.registerAction("legendSelect", "legendselected", curry$1(legendSelectActionHandler, "select"));
  registers.registerAction("legendUnSelect", "legendunselected", curry$1(legendSelectActionHandler, "unSelect"));
}
function install$2(registers) {
  registers.registerComponentModel(LegendModel$1);
  registers.registerComponentView(LegendView$1);
  registers.registerProcessor(registers.PRIORITY.PROCESSOR.SERIES_FILTER, legendFilter);
  registers.registerSubTypeDefaulter("legend", function() {
    return "plain";
  });
  installLegendAction(registers);
}
var ScrollableLegendModel = function(_super) {
  __extends(ScrollableLegendModel2, _super);
  function ScrollableLegendModel2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.type = ScrollableLegendModel2.type;
    return _this;
  }
  ScrollableLegendModel2.prototype.setScrollDataIndex = function(scrollDataIndex) {
    this.option.scrollDataIndex = scrollDataIndex;
  };
  ScrollableLegendModel2.prototype.init = function(option, parentModel, ecModel) {
    var inputPositionParams = getLayoutParams(option);
    _super.prototype.init.call(this, option, parentModel, ecModel);
    mergeAndNormalizeLayoutParams(this, option, inputPositionParams);
  };
  ScrollableLegendModel2.prototype.mergeOption = function(option, ecModel) {
    _super.prototype.mergeOption.call(this, option, ecModel);
    mergeAndNormalizeLayoutParams(this, this.option, option);
  };
  ScrollableLegendModel2.type = "legend.scroll";
  ScrollableLegendModel2.defaultOption = inheritDefaultOption(LegendModel$1.defaultOption, {
    scrollDataIndex: 0,
    pageButtonItemGap: 5,
    pageButtonGap: null,
    pageButtonPosition: "end",
    pageFormatter: "{current}/{total}",
    pageIcons: {
      horizontal: ["M0,0L12,-10L12,10z", "M0,0L-12,-10L-12,10z"],
      vertical: ["M0,0L20,0L10,-20z", "M0,0L20,0L10,20z"]
    },
    pageIconColor: "#2f4554",
    pageIconInactiveColor: "#aaa",
    pageIconSize: 15,
    pageTextStyle: {
      color: "#333"
    },
    animationDurationUpdate: 800
  });
  return ScrollableLegendModel2;
}(LegendModel$1);
function mergeAndNormalizeLayoutParams(legendModel, target, raw) {
  var orient = legendModel.getOrient();
  var ignoreSize = [1, 1];
  ignoreSize[orient.index] = 0;
  mergeLayoutParam(target, raw, {
    type: "box",
    ignoreSize: !!ignoreSize
  });
}
var ScrollableLegendModel$1 = ScrollableLegendModel;
var Group = Group$3;
var WH = ["width", "height"];
var XY = ["x", "y"];
var ScrollableLegendView = function(_super) {
  __extends(ScrollableLegendView2, _super);
  function ScrollableLegendView2() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    _this.type = ScrollableLegendView2.type;
    _this.newlineDisabled = true;
    _this._currentIndex = 0;
    return _this;
  }
  ScrollableLegendView2.prototype.init = function() {
    _super.prototype.init.call(this);
    this.group.add(this._containerGroup = new Group());
    this._containerGroup.add(this.getContentGroup());
    this.group.add(this._controllerGroup = new Group());
  };
  ScrollableLegendView2.prototype.resetInner = function() {
    _super.prototype.resetInner.call(this);
    this._controllerGroup.removeAll();
    this._containerGroup.removeClipPath();
    this._containerGroup.__rectSize = null;
  };
  ScrollableLegendView2.prototype.renderInner = function(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {
    var self2 = this;
    _super.prototype.renderInner.call(this, itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition);
    var controllerGroup = this._controllerGroup;
    var pageIconSize = legendModel.get("pageIconSize", true);
    var pageIconSizeArr = isArray(pageIconSize) ? pageIconSize : [pageIconSize, pageIconSize];
    createPageButton("pagePrev", 0);
    var pageTextStyleModel = legendModel.getModel("pageTextStyle");
    controllerGroup.add(new ZRText$1({
      name: "pageText",
      style: {
        text: "xx/xx",
        fill: pageTextStyleModel.getTextColor(),
        font: pageTextStyleModel.getFont(),
        verticalAlign: "middle",
        align: "center"
      },
      silent: true
    }));
    createPageButton("pageNext", 1);
    function createPageButton(name, iconIdx) {
      var pageDataIndexName = name + "DataIndex";
      var icon = createIcon(legendModel.get("pageIcons", true)[legendModel.getOrient().name][iconIdx], {
        onclick: bind$1(self2._pageGo, self2, pageDataIndexName, legendModel, api)
      }, {
        x: -pageIconSizeArr[0] / 2,
        y: -pageIconSizeArr[1] / 2,
        width: pageIconSizeArr[0],
        height: pageIconSizeArr[1]
      });
      icon.name = name;
      controllerGroup.add(icon);
    }
  };
  ScrollableLegendView2.prototype.layoutInner = function(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {
    var selectorGroup = this.getSelectorGroup();
    var orientIdx = legendModel.getOrient().index;
    var wh = WH[orientIdx];
    var xy = XY[orientIdx];
    var hw = WH[1 - orientIdx];
    var yx = XY[1 - orientIdx];
    selector && box(
      "horizontal",
      selectorGroup,
      legendModel.get("selectorItemGap", true)
    );
    var selectorButtonGap = legendModel.get("selectorButtonGap", true);
    var selectorRect = selectorGroup.getBoundingRect();
    var selectorPos = [-selectorRect.x, -selectorRect.y];
    var processMaxSize = clone$2(maxSize);
    selector && (processMaxSize[wh] = maxSize[wh] - selectorRect[wh] - selectorButtonGap);
    var mainRect = this._layoutContentAndController(legendModel, isFirstRender, processMaxSize, orientIdx, wh, hw, yx, xy);
    if (selector) {
      if (selectorPosition === "end") {
        selectorPos[orientIdx] += mainRect[wh] + selectorButtonGap;
      } else {
        var offset = selectorRect[wh] + selectorButtonGap;
        selectorPos[orientIdx] -= offset;
        mainRect[xy] -= offset;
      }
      mainRect[wh] += selectorRect[wh] + selectorButtonGap;
      selectorPos[1 - orientIdx] += mainRect[yx] + mainRect[hw] / 2 - selectorRect[hw] / 2;
      mainRect[hw] = Math.max(mainRect[hw], selectorRect[hw]);
      mainRect[yx] = Math.min(mainRect[yx], selectorRect[yx] + selectorPos[1 - orientIdx]);
      selectorGroup.x = selectorPos[0];
      selectorGroup.y = selectorPos[1];
      selectorGroup.markRedraw();
    }
    return mainRect;
  };
  ScrollableLegendView2.prototype._layoutContentAndController = function(legendModel, isFirstRender, maxSize, orientIdx, wh, hw, yx, xy) {
    var contentGroup = this.getContentGroup();
    var containerGroup = this._containerGroup;
    var controllerGroup = this._controllerGroup;
    box(legendModel.get("orient"), contentGroup, legendModel.get("itemGap"), !orientIdx ? null : maxSize.width, orientIdx ? null : maxSize.height);
    box(
      "horizontal",
      controllerGroup,
      legendModel.get("pageButtonItemGap", true)
    );
    var contentRect = contentGroup.getBoundingRect();
    var controllerRect = controllerGroup.getBoundingRect();
    var showController = this._showController = contentRect[wh] > maxSize[wh];
    var contentPos = [-contentRect.x, -contentRect.y];
    if (!isFirstRender) {
      contentPos[orientIdx] = contentGroup[xy];
    }
    var containerPos = [0, 0];
    var controllerPos = [-controllerRect.x, -controllerRect.y];
    var pageButtonGap = retrieve2(legendModel.get("pageButtonGap", true), legendModel.get("itemGap", true));
    if (showController) {
      var pageButtonPosition = legendModel.get("pageButtonPosition", true);
      if (pageButtonPosition === "end") {
        controllerPos[orientIdx] += maxSize[wh] - controllerRect[wh];
      } else {
        containerPos[orientIdx] += controllerRect[wh] + pageButtonGap;
      }
    }
    controllerPos[1 - orientIdx] += contentRect[hw] / 2 - controllerRect[hw] / 2;
    contentGroup.setPosition(contentPos);
    containerGroup.setPosition(containerPos);
    controllerGroup.setPosition(controllerPos);
    var mainRect = {
      x: 0,
      y: 0
    };
    mainRect[wh] = showController ? maxSize[wh] : contentRect[wh];
    mainRect[hw] = Math.max(contentRect[hw], controllerRect[hw]);
    mainRect[yx] = Math.min(0, controllerRect[yx] + controllerPos[1 - orientIdx]);
    containerGroup.__rectSize = maxSize[wh];
    if (showController) {
      var clipShape = {
        x: 0,
        y: 0
      };
      clipShape[wh] = Math.max(maxSize[wh] - controllerRect[wh] - pageButtonGap, 0);
      clipShape[hw] = mainRect[hw];
      containerGroup.setClipPath(new Rect$1({
        shape: clipShape
      }));
      containerGroup.__rectSize = clipShape[wh];
    } else {
      controllerGroup.eachChild(function(child) {
        child.attr({
          invisible: true,
          silent: true
        });
      });
    }
    var pageInfo = this._getPageInfo(legendModel);
    pageInfo.pageIndex != null && updateProps$1(
      contentGroup,
      {
        x: pageInfo.contentPosition[0],
        y: pageInfo.contentPosition[1]
      },
      showController ? legendModel : null
    );
    this._updatePageInfoView(legendModel, pageInfo);
    return mainRect;
  };
  ScrollableLegendView2.prototype._pageGo = function(to, legendModel, api) {
    var scrollDataIndex = this._getPageInfo(legendModel)[to];
    scrollDataIndex != null && api.dispatchAction({
      type: "legendScroll",
      scrollDataIndex,
      legendId: legendModel.id
    });
  };
  ScrollableLegendView2.prototype._updatePageInfoView = function(legendModel, pageInfo) {
    var controllerGroup = this._controllerGroup;
    each$4(["pagePrev", "pageNext"], function(name) {
      var key = name + "DataIndex";
      var canJump = pageInfo[key] != null;
      var icon = controllerGroup.childOfName(name);
      if (icon) {
        icon.setStyle("fill", canJump ? legendModel.get("pageIconColor", true) : legendModel.get("pageIconInactiveColor", true));
        icon.cursor = canJump ? "pointer" : "default";
      }
    });
    var pageText = controllerGroup.childOfName("pageText");
    var pageFormatter = legendModel.get("pageFormatter");
    var pageIndex = pageInfo.pageIndex;
    var current = pageIndex != null ? pageIndex + 1 : 0;
    var total2 = pageInfo.pageCount;
    pageText && pageFormatter && pageText.setStyle("text", isString(pageFormatter) ? pageFormatter.replace("{current}", current == null ? "" : current + "").replace("{total}", total2 == null ? "" : total2 + "") : pageFormatter({
      current,
      total: total2
    }));
  };
  ScrollableLegendView2.prototype._getPageInfo = function(legendModel) {
    var scrollDataIndex = legendModel.get("scrollDataIndex", true);
    var contentGroup = this.getContentGroup();
    var containerRectSize = this._containerGroup.__rectSize;
    var orientIdx = legendModel.getOrient().index;
    var wh = WH[orientIdx];
    var xy = XY[orientIdx];
    var targetItemIndex = this._findTargetItemIndex(scrollDataIndex);
    var children = contentGroup.children();
    var targetItem = children[targetItemIndex];
    var itemCount = children.length;
    var pCount = !itemCount ? 0 : 1;
    var result = {
      contentPosition: [contentGroup.x, contentGroup.y],
      pageCount: pCount,
      pageIndex: pCount - 1,
      pagePrevDataIndex: null,
      pageNextDataIndex: null
    };
    if (!targetItem) {
      return result;
    }
    var targetItemInfo = getItemInfo(targetItem);
    result.contentPosition[orientIdx] = -targetItemInfo.s;
    for (var i = targetItemIndex + 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i <= itemCount; ++i) {
      currItemInfo = getItemInfo(children[i]);
      if (!currItemInfo && winEndItemInfo.e > winStartItemInfo.s + containerRectSize || currItemInfo && !intersect2(currItemInfo, winStartItemInfo.s)) {
        if (winEndItemInfo.i > winStartItemInfo.i) {
          winStartItemInfo = winEndItemInfo;
        } else {
          winStartItemInfo = currItemInfo;
        }
        if (winStartItemInfo) {
          if (result.pageNextDataIndex == null) {
            result.pageNextDataIndex = winStartItemInfo.i;
          }
          ++result.pageCount;
        }
      }
      winEndItemInfo = currItemInfo;
    }
    for (var i = targetItemIndex - 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i >= -1; --i) {
      currItemInfo = getItemInfo(children[i]);
      if ((!currItemInfo || !intersect2(winEndItemInfo, currItemInfo.s)) && winStartItemInfo.i < winEndItemInfo.i) {
        winEndItemInfo = winStartItemInfo;
        if (result.pagePrevDataIndex == null) {
          result.pagePrevDataIndex = winStartItemInfo.i;
        }
        ++result.pageCount;
        ++result.pageIndex;
      }
      winStartItemInfo = currItemInfo;
    }
    return result;
    function getItemInfo(el) {
      if (el) {
        var itemRect = el.getBoundingRect();
        var start2 = itemRect[xy] + el[xy];
        return {
          s: start2,
          e: start2 + itemRect[wh],
          i: el.__legendDataIndex
        };
      }
    }
    function intersect2(itemInfo, winStart) {
      return itemInfo.e >= winStart && itemInfo.s <= winStart + containerRectSize;
    }
  };
  ScrollableLegendView2.prototype._findTargetItemIndex = function(targetDataIndex) {
    if (!this._showController) {
      return 0;
    }
    var index;
    var contentGroup = this.getContentGroup();
    var defaultIndex;
    contentGroup.eachChild(function(child, idx) {
      var legendDataIdx = child.__legendDataIndex;
      if (defaultIndex == null && legendDataIdx != null) {
        defaultIndex = idx;
      }
      if (legendDataIdx === targetDataIndex) {
        index = idx;
      }
    });
    return index != null ? index : defaultIndex;
  };
  ScrollableLegendView2.type = "legend.scroll";
  return ScrollableLegendView2;
}(LegendView$1);
var ScrollableLegendView$1 = ScrollableLegendView;
function installScrollableLegendAction(registers) {
  registers.registerAction("legendScroll", "legendscroll", function(payload, ecModel) {
    var scrollDataIndex = payload.scrollDataIndex;
    scrollDataIndex != null && ecModel.eachComponent({
      mainType: "legend",
      subType: "scroll",
      query: payload
    }, function(legendModel) {
      legendModel.setScrollDataIndex(scrollDataIndex);
    });
  });
}
function install$1(registers) {
  use(install$2);
  registers.registerComponentModel(ScrollableLegendModel$1);
  registers.registerComponentView(ScrollableLegendView$1);
  installScrollableLegendAction(registers);
}
function install(registers) {
  use(install$2);
  use(install$1);
}
var raf = null;
function requestAnimationFrame(callback) {
  if (!raf) {
    raf = (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function(callback2) {
      return setTimeout(callback2, 16);
    }).bind(window);
  }
  return raf(callback);
}
var caf = null;
function cancelAnimationFrame(id) {
  if (!caf) {
    caf = (window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || function(id2) {
      clearTimeout(id2);
    }).bind(window);
  }
  caf(id);
}
function createStyles(styleText) {
  var style2 = document.createElement("style");
  if (style2.styleSheet) {
    style2.styleSheet.cssText = styleText;
  } else {
    style2.appendChild(document.createTextNode(styleText));
  }
  (document.querySelector("head") || document.body).appendChild(style2);
  return style2;
}
function createElement(tagName, props) {
  if (props === void 0)
    props = {};
  var elem = document.createElement(tagName);
  Object.keys(props).forEach(function(key) {
    elem[key] = props[key];
  });
  return elem;
}
function getComputedStyle(elem, prop, pseudo) {
  var computedStyle = window.getComputedStyle(elem, pseudo || null) || {
    display: "none"
  };
  return computedStyle[prop];
}
function getRenderInfo(elem) {
  if (!document.documentElement.contains(elem)) {
    return {
      detached: true,
      rendered: false
    };
  }
  var current = elem;
  while (current !== document) {
    if (getComputedStyle(current, "display") === "none") {
      return {
        detached: false,
        rendered: false
      };
    }
    current = current.parentNode;
  }
  return {
    detached: false,
    rendered: true
  };
}
var css_248z = '.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}';
var total = 0;
var style = null;
function addListener(elem, callback) {
  if (!elem.__resize_mutation_handler__) {
    elem.__resize_mutation_handler__ = handleMutation.bind(elem);
  }
  var listeners = elem.__resize_listeners__;
  if (!listeners) {
    elem.__resize_listeners__ = [];
    if (window.ResizeObserver) {
      var offsetWidth = elem.offsetWidth;
      var offsetHeight = elem.offsetHeight;
      var ro = new ResizeObserver(function() {
        if (!elem.__resize_observer_triggered__) {
          elem.__resize_observer_triggered__ = true;
          if (elem.offsetWidth === offsetWidth && elem.offsetHeight === offsetHeight) {
            return;
          }
        }
        runCallbacks(elem);
      });
      var ref = getRenderInfo(elem);
      var detached = ref.detached;
      var rendered = ref.rendered;
      elem.__resize_observer_triggered__ = detached === false && rendered === false;
      elem.__resize_observer__ = ro;
      ro.observe(elem);
    } else if (elem.attachEvent && elem.addEventListener) {
      elem.__resize_legacy_resize_handler__ = function handleLegacyResize() {
        runCallbacks(elem);
      };
      elem.attachEvent("onresize", elem.__resize_legacy_resize_handler__);
      document.addEventListener("DOMSubtreeModified", elem.__resize_mutation_handler__);
    } else {
      if (!total) {
        style = createStyles(css_248z);
      }
      initTriggers(elem);
      elem.__resize_rendered__ = getRenderInfo(elem).rendered;
      if (window.MutationObserver) {
        var mo = new MutationObserver(elem.__resize_mutation_handler__);
        mo.observe(document, {
          attributes: true,
          childList: true,
          characterData: true,
          subtree: true
        });
        elem.__resize_mutation_observer__ = mo;
      }
    }
  }
  elem.__resize_listeners__.push(callback);
  total++;
}
function removeListener(elem, callback) {
  var listeners = elem.__resize_listeners__;
  if (!listeners) {
    return;
  }
  if (callback) {
    listeners.splice(listeners.indexOf(callback), 1);
  }
  if (!listeners.length || !callback) {
    if (elem.detachEvent && elem.removeEventListener) {
      elem.detachEvent("onresize", elem.__resize_legacy_resize_handler__);
      document.removeEventListener("DOMSubtreeModified", elem.__resize_mutation_handler__);
      return;
    }
    if (elem.__resize_observer__) {
      elem.__resize_observer__.unobserve(elem);
      elem.__resize_observer__.disconnect();
      elem.__resize_observer__ = null;
    } else {
      if (elem.__resize_mutation_observer__) {
        elem.__resize_mutation_observer__.disconnect();
        elem.__resize_mutation_observer__ = null;
      }
      elem.removeEventListener("scroll", handleScroll);
      elem.removeChild(elem.__resize_triggers__.triggers);
      elem.__resize_triggers__ = null;
    }
    elem.__resize_listeners__ = null;
  }
  if (!--total && style) {
    style.parentNode.removeChild(style);
  }
}
function getUpdatedSize(elem) {
  var ref = elem.__resize_last__;
  var width = ref.width;
  var height = ref.height;
  var offsetWidth = elem.offsetWidth;
  var offsetHeight = elem.offsetHeight;
  if (offsetWidth !== width || offsetHeight !== height) {
    return {
      width: offsetWidth,
      height: offsetHeight
    };
  }
  return null;
}
function handleMutation() {
  var ref = getRenderInfo(this);
  var rendered = ref.rendered;
  var detached = ref.detached;
  if (rendered !== this.__resize_rendered__) {
    if (!detached && this.__resize_triggers__) {
      resetTriggers(this);
      this.addEventListener("scroll", handleScroll, true);
    }
    this.__resize_rendered__ = rendered;
    runCallbacks(this);
  }
}
function handleScroll() {
  var this$1$1 = this;
  resetTriggers(this);
  if (this.__resize_raf__) {
    cancelAnimationFrame(this.__resize_raf__);
  }
  this.__resize_raf__ = requestAnimationFrame(function() {
    var updated = getUpdatedSize(this$1$1);
    if (updated) {
      this$1$1.__resize_last__ = updated;
      runCallbacks(this$1$1);
    }
  });
}
function runCallbacks(elem) {
  if (!elem || !elem.__resize_listeners__) {
    return;
  }
  elem.__resize_listeners__.forEach(function(callback) {
    callback.call(elem, elem);
  });
}
function initTriggers(elem) {
  var position = getComputedStyle(elem, "position");
  if (!position || position === "static") {
    elem.style.position = "relative";
  }
  elem.__resize_old_position__ = position;
  elem.__resize_last__ = {};
  var triggers = createElement("div", {
    className: "resize-triggers"
  });
  var expand = createElement("div", {
    className: "resize-expand-trigger"
  });
  var expandChild = createElement("div");
  var contract = createElement("div", {
    className: "resize-contract-trigger"
  });
  expand.appendChild(expandChild);
  triggers.appendChild(expand);
  triggers.appendChild(contract);
  elem.appendChild(triggers);
  elem.__resize_triggers__ = {
    triggers,
    expand,
    expandChild,
    contract
  };
  resetTriggers(elem);
  elem.addEventListener("scroll", handleScroll, true);
  elem.__resize_last__ = {
    width: elem.offsetWidth,
    height: elem.offsetHeight
  };
}
function resetTriggers(elem) {
  var ref = elem.__resize_triggers__;
  var expand = ref.expand;
  var expandChild = ref.expandChild;
  var contract = ref.contract;
  var csw = contract.scrollWidth;
  var csh = contract.scrollHeight;
  var eow = expand.offsetWidth;
  var eoh = expand.offsetHeight;
  var esw = expand.scrollWidth;
  var esh = expand.scrollHeight;
  contract.scrollLeft = csw;
  contract.scrollTop = csh;
  expandChild.style.width = eow + 1 + "px";
  expandChild.style.height = eoh + 1 + "px";
  expand.scrollLeft = esw;
  expand.scrollTop = esh;
}
var O = function() {
  return O = Object.assign || function(e2) {
    for (var t, n = 1, r = arguments.length; n < r; n++)
      for (var o in t = arguments[n])
        Object.prototype.hasOwnProperty.call(t, o) && (e2[o] = t[o]);
    return e2;
  }, O.apply(this, arguments);
};
"function" == typeof SuppressedError && SuppressedError;
var b = ["getWidth", "getHeight", "getDom", "getOption", "resize", "dispatchAction", "convertToPixel", "convertFromPixel", "containPixel", "getDataURL", "getConnectedDataURL", "appendData", "clear", "isDisposed", "dispose"];
function y(e2) {
  return t = /* @__PURE__ */ Object.create(null), b.forEach(function(n) {
    t[n] = function(t2) {
      return function() {
        for (var n2 = [], r = 0; r < arguments.length; r++)
          n2[r] = arguments[r];
        if (!e2.value)
          throw new Error("ECharts is not initialized yet.");
        return e2.value[t2].apply(e2.value, n2);
      };
    }(n);
  }), t;
  var t;
}
var E = { autoresize: [Boolean, Object] }, _ = /^on[^a-z]/, j = function(e2) {
  return _.test(e2);
};
function x(e2, n) {
  var r = unref(e2);
  return r && "object" == typeof r && "value" in r ? r.value || n : r || n;
}
var A = "ecLoadingOptions";
var z = { loading: Boolean, loadingOptions: Object }, w = null, C = "x-vue-echarts";
var L = [], T = [];
!function(e2, t) {
  if (e2 && "undefined" != typeof document) {
    var n, r = true === t.prepend ? "prepend" : "append", o = true === t.singleTag, i = "string" == typeof t.container ? document.querySelector(t.container) : document.getElementsByTagName("head")[0];
    if (o) {
      var a = L.indexOf(i);
      -1 === a && (a = L.push(i) - 1, T[a] = {}), n = T[a] && T[a][r] ? T[a][r] : T[a][r] = u();
    } else
      n = u();
    65279 === e2.charCodeAt(0) && (e2 = e2.substring(1)), n.styleSheet ? n.styleSheet.cssText += e2 : n.appendChild(document.createTextNode(e2));
  }
  function u() {
    var e3 = document.createElement("style");
    if (e3.setAttribute("type", "text/css"), t.attributes)
      for (var n2 = Object.keys(t.attributes), o2 = 0; o2 < n2.length; o2++)
        e3.setAttribute(n2[o2], t.attributes[n2[o2]]);
    var a2 = "prepend" === r ? "afterbegin" : "beforeend";
    return i.insertAdjacentElement(a2, e3), e3;
  }
}("x-vue-echarts,.echarts-inner{display:block;width:100%;height:100%;min-width:0}\n", {});
var S = function() {
  if (null != w)
    return w;
  if ("undefined" == typeof HTMLElement || "undefined" == typeof customElements)
    return w = false;
  try {
    new Function("tag", "class EChartsElement extends HTMLElement {\n  __dispose = null;\n\n  disconnectedCallback() {\n    if (this.__dispose) {\n      this.__dispose();\n      this.__dispose = null;\n    }\n  }\n}\n\nif (customElements.get(tag) == null) {\n  customElements.define(tag, EChartsElement);\n}\n")(C);
  } catch (e2) {
    return w = false;
  }
  return w = true;
}();
var D = "ecTheme", U = "ecInitOptions", k = "ecUpdateOptions", B = defineComponent({ name: "echarts", props: O(O({ option: Object, theme: { type: [Object, String] }, initOptions: Object, updateOptions: Object, group: String, manualUpdate: Boolean }, E), z), emits: {}, inheritAttrs: false, setup: function(t, i) {
  var a = i.attrs, p = shallowRef(), b2 = shallowRef(), E2 = shallowRef(), _2 = shallowRef(), z2 = inject(D, null), w2 = inject(U, null), C2 = inject(k, null), L2 = toRefs(t), T2 = L2.autoresize, B2 = L2.manualUpdate, P = L2.loading, H = L2.loadingOptions, M = computed(function() {
    return _2.value || t.option || null;
  }), R = computed(function() {
    return t.theme || x(z2, {});
  }), F = computed(function() {
    return t.initOptions || x(w2, {});
  }), N = computed(function() {
    return t.updateOptions || x(C2, {});
  }), q = computed(function() {
    return function(e2) {
      var t2 = {};
      for (var n in e2)
        j(n) || (t2[n] = e2[n]);
      return t2;
    }(a);
  }), I = getCurrentInstance().proxy.$listeners;
  function W(e2) {
    if (b2.value) {
      var n = E2.value = init(b2.value, R.value, F.value);
      t.group && (n.group = t.group);
      var r = I;
      r || (r = {}, Object.keys(a).filter(function(e3) {
        return 0 === e3.indexOf("on") && e3.length > 2;
      }).forEach(function(e3) {
        var t2 = e3.charAt(2).toLowerCase() + e3.slice(3);
        "Once" === t2.substring(t2.length - 4) && (t2 = "~".concat(t2.substring(0, t2.length - 4))), r[t2] = a[e3];
      })), Object.keys(r).forEach(function(e3) {
        var t2 = r[e3];
        if (t2) {
          var o2 = e3.toLowerCase();
          "~" === o2.charAt(0) && (o2 = o2.substring(1), t2.__once__ = true);
          var i2 = n;
          if (0 === o2.indexOf("zr:") && (i2 = n.getZr(), o2 = o2.substring(3)), t2.__once__) {
            delete t2.__once__;
            var a2 = t2;
            t2 = function() {
              for (var e4 = [], n2 = 0; n2 < arguments.length; n2++)
                e4[n2] = arguments[n2];
              a2.apply(void 0, e4), i2.off(o2, t2);
            };
          }
          i2.on(o2, t2);
        }
      }), T2.value ? nextTick(function() {
        n && !n.isDisposed() && n.resize(), o();
      }) : o();
    }
    function o() {
      var t2 = e2 || M.value;
      t2 && n.setOption(t2, N.value);
    }
  }
  function Z() {
    E2.value && (E2.value.dispose(), E2.value = void 0);
  }
  var $ = null;
  watch(B2, function(n) {
    "function" == typeof $ && ($(), $ = null), n || ($ = watch(function() {
      return t.option;
    }, function(e2, t2) {
      e2 && (E2.value ? E2.value.setOption(e2, O({ notMerge: e2 !== t2 }, N.value)) : W());
    }, { deep: true }));
  }, { immediate: true }), watch([R, F], function() {
    Z(), W();
  }, { deep: true }), watchEffect(function() {
    t.group && E2.value && (E2.value.group = t.group);
  });
  var G = y(E2);
  return function(e2, t2, i2) {
    var a2 = inject(A, {}), u = computed(function() {
      return O(O({}, x(a2, {})), null == i2 ? void 0 : i2.value);
    });
    watchEffect(function() {
      var n = e2.value;
      n && (t2.value ? n.showLoading(u.value) : n.hideLoading());
    });
  }(E2, P, H), function(t2, n, r) {
    var o = null;
    watch([r, t2, n], function(e2, t3, n2) {
      var r2 = e2[0], i2 = e2[1], a2 = e2[2];
      if (r2 && i2 && a2) {
        var u = true === a2 ? {} : a2, s = u.throttle, c = void 0 === s ? 100 : s, l = u.onResize, f = function() {
          i2.resize(), null == l || l();
        };
        o = c ? throttle(f, c) : f, addListener(r2, o);
      }
      n2(function() {
        r2 && o && removeListener(r2, o);
      });
    });
  }(E2, T2, b2), onMounted(function() {
    W();
  }), onBeforeUnmount(function() {
    S && p.value ? p.value.__dispose = Z : Z();
  }), O({ chart: E2, root: p, inner: b2, setOption: function(e2, n) {
    t.manualUpdate && (_2.value = e2), E2.value ? E2.value.setOption(e2, n || {}) : W(e2);
  }, nonEventAttrs: q }, G);
}, render: function() {
  var e2 = O({}, this.nonEventAttrs);
  return e2.ref = "root", e2.class = e2.class ? ["echarts"].concat(e2.class) : "echarts", h(C, e2, [h("div", { ref: "inner", class: "echarts-inner" })]);
} });
var Statistics_vue_vue_type_style_index_0_scoped_true_lang = "";
const _withScopeId = (n) => (pushScopeId("data-v-3be6be4e"), n = n(), popScopeId(), n);
const _hoisted_1 = { class: "row" };
const _hoisted_2 = { class: "col-6" };
const _hoisted_3 = /* @__PURE__ */ _withScopeId(() => /* @__PURE__ */ createBaseVNode("div", { class: "text-h6" }, " Leads / Woche je Portal ", -1));
const _hoisted_4 = { class: "col-6" };
const _hoisted_5 = /* @__PURE__ */ _withScopeId(() => /* @__PURE__ */ createBaseVNode("div", { class: "text-h6" }, " Leads / Woche je Kategorie ", -1));
const _sfc_main = defineComponent({
  __name: "Statistics",
  setup(__props) {
    const log = debug("app:statistics");
    log("start");
    use([
      install$7,
      install$6,
      install$3,
      install$4,
      install
    ]);
    provide(D, "dark");
    const portalStore = useDataStore("portal", "portal");
    const categoryStore = useDataStore("categories", "categories");
    const leadPortal = reactive({
      series: [],
      grid: {
        bottom: "10%"
      },
      legend: {},
      dataset: {},
      tooltip: {},
      xAxis: { type: "category" },
      axisLabel: {},
      yAxis: {}
    }), leadCategory = reactive({
      series: [],
      grid: {
        bottom: "10%"
      },
      legend: {
        formatter: (name) => {
          const cat = _$1.find(categories.value, (item) => item.name === name);
          return cat ? cat.desc : name;
        }
      },
      dataset: {},
      tooltip: {},
      xAxis: { type: "category" },
      axisLabel: {},
      yAxis: {}
    }), firstDay = hooks().subtract(15, "weeks");
    const { data: portals } = storeToRefs(portalStore);
    const { data: categories } = storeToRefs(categoryStore);
    (async () => {
      Promise.all([
        axios.post("/custom/getView/leadPortal", {
          filter: {
            date: { $gte: firstDay.format("YYYY-MM-DD") }
          }
        }),
        axios.post("/custom/getView/leadCategory", {
          filter: {
            date: { $gte: firstDay.format("YYYY-MM-DD") }
          }
        }),
        portalStore.getStore(),
        categoryStore.getStore()
      ]).then((result) => {
        const dimPortal = ["week", ..._$1.map(portals.value, (item) => item.name)], dimCat = ["week", ..._$1.map(categories.value, (item) => item.name)];
        leadPortal.series = _$1.map(portals.value, (item) => ({ type: "line" }));
        leadPortal.dataset = {
          dimensions: dimPortal,
          source: _$1.map(result[0].data, (item) => {
            return {
              week: item.week,
              ...item.dim
            };
          })
        };
        leadCategory.series = _$1.map(categories.value, (item) => ({ type: "line" }));
        leadCategory.dataset = {
          dimensions: dimCat,
          source: _$1.map(result[1].data, (item) => {
            return {
              week: item.week,
              ...item.dim
            };
          })
        };
      });
    })();
    return (_ctx, _cache) => {
      return openBlock(), createBlock(QPage, { class: "q-pa-sm" }, {
        default: withCtx(() => [
          createBaseVNode("div", _hoisted_1, [
            createBaseVNode("div", _hoisted_2, [
              createVNode(QCard, null, {
                default: withCtx(() => [
                  createVNode(QCardSection, null, {
                    default: withCtx(() => [
                      _hoisted_3
                    ]),
                    _: 1
                  }),
                  createVNode(QCardSection, { class: "echarts" }, {
                    default: withCtx(() => [
                      createVNode(unref(B), { option: unref(leadPortal) }, null, 8, ["option"])
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              })
            ]),
            createBaseVNode("div", _hoisted_4, [
              createVNode(QCard, null, {
                default: withCtx(() => [
                  createVNode(QCardSection, null, {
                    default: withCtx(() => [
                      _hoisted_5
                    ]),
                    _: 1
                  }),
                  createVNode(QCardSection, { class: "echarts" }, {
                    default: withCtx(() => [
                      createVNode(unref(B), { option: unref(leadCategory) }, null, 8, ["option"])
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              })
            ])
          ])
        ]),
        _: 1
      });
    };
  }
});
var Statistics = /* @__PURE__ */ _export_sfc(_sfc_main, [["__scopeId", "data-v-3be6be4e"], ["__file", "Statistics.vue"]]);
export { Statistics as default };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3RhdGlzdGljcy4xNzQ4ZjA5OS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9jb3JlL2Vudi5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9jb3JlL3BsYXRmb3JtLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9jb3JlL3ZlY3Rvci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9taXhpbi9EcmFnZ2FibGUuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvY29yZS9FdmVudGZ1bC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9jb3JlL2ZvdXJQb2ludHNUcmFuc2Zvcm0uanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvY29yZS9kb20uanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvY29yZS9ldmVudC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9jb3JlL0dlc3R1cmVNZ3IuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvY29yZS9tYXRyaXguanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvY29yZS9Qb2ludC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9jb3JlL0JvdW5kaW5nUmVjdC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9IYW5kbGVyLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL2NvcmUvdGltc29ydC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9ncmFwaGljL2NvbnN0YW50cy5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9TdG9yYWdlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL2FuaW1hdGlvbi9yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvYW5pbWF0aW9uL2Vhc2luZy5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9jb3JlL2N1cnZlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL2FuaW1hdGlvbi9jdWJpY0Vhc2luZy5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9hbmltYXRpb24vQ2xpcC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9jb3JlL0xSVS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi90b29sL2NvbG9yLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL3N2Zy9oZWxwZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvYW5pbWF0aW9uL0FuaW1hdG9yLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL2FuaW1hdGlvbi9BbmltYXRpb24uanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvZG9tL0hhbmRsZXJQcm94eS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9jb25maWcuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvY29yZS9UcmFuc2Zvcm1hYmxlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL2NvbnRhaW4vdGV4dC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9FbGVtZW50LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL2dyYXBoaWMvR3JvdXAuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvenJlbmRlci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi91dGlsL251bWJlci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi91dGlsL2xvZy5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi91dGlsL21vZGVsLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL3V0aWwvY2xhenouanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvbW9kZWwvbWl4aW4vbWFrZVN0eWxlTWFwcGVyLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL21vZGVsL21peGluL2FyZWFTdHlsZS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9ncmFwaGljL2hlbHBlci9pbWFnZS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9ncmFwaGljL2hlbHBlci9wYXJzZVRleHQuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvZ3JhcGhpYy9EaXNwbGF5YWJsZS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9jb3JlL2Jib3guanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvY29yZS9QYXRoUHJveHkuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvY29udGFpbi9saW5lLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL2NvbnRhaW4vY3ViaWMuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvY29udGFpbi9xdWFkcmF0aWMuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvY29udGFpbi91dGlsLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL2NvbnRhaW4vYXJjLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL2NvbnRhaW4vd2luZGluZ0xpbmUuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvY29udGFpbi9wYXRoLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL2dyYXBoaWMvUGF0aC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9ncmFwaGljL1RTcGFuLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL2dyYXBoaWMvSW1hZ2UuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvZ3JhcGhpYy9oZWxwZXIvcm91bmRSZWN0LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL2dyYXBoaWMvaGVscGVyL3N1YlBpeGVsT3B0aW1pemUuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvZ3JhcGhpYy9zaGFwZS9SZWN0LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL2dyYXBoaWMvVGV4dC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi91dGlsL2lubmVyU3RvcmUuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvdXRpbC9zdGF0ZXMuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvdG9vbC90cmFuc2Zvcm1QYXRoLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL3Rvb2wvcGF0aC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9ncmFwaGljL3NoYXBlL0NpcmNsZS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9ncmFwaGljL3NoYXBlL0VsbGlwc2UuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvZ3JhcGhpYy9oZWxwZXIvcm91bmRTZWN0b3IuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvZ3JhcGhpYy9zaGFwZS9TZWN0b3IuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvZ3JhcGhpYy9zaGFwZS9SaW5nLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL2dyYXBoaWMvaGVscGVyL3Ntb290aEJlemllci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9ncmFwaGljL2hlbHBlci9wb2x5LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL2dyYXBoaWMvc2hhcGUvUG9seWdvbi5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9ncmFwaGljL3NoYXBlL1BvbHlsaW5lLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL2dyYXBoaWMvc2hhcGUvTGluZS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9ncmFwaGljL3NoYXBlL0JlemllckN1cnZlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL2dyYXBoaWMvc2hhcGUvQXJjLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL2dyYXBoaWMvQ29tcG91bmRQYXRoLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL2dyYXBoaWMvR3JhZGllbnQuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvZ3JhcGhpYy9MaW5lYXJHcmFkaWVudC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9ncmFwaGljL1JhZGlhbEdyYWRpZW50LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL2NvcmUvT3JpZW50ZWRCb3VuZGluZ1JlY3QuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvZ3JhcGhpYy9JbmNyZW1lbnRhbERpc3BsYXlhYmxlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2FuaW1hdGlvbi9iYXNpY1RyYW5zaXRpb24uanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvdXRpbC9ncmFwaGljLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2xhYmVsL2xhYmVsU3R5bGUuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvbW9kZWwvbWl4aW4vdGV4dFN0eWxlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL21vZGVsL21peGluL2xpbmVTdHlsZS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9tb2RlbC9taXhpbi9pdGVtU3R5bGUuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvbW9kZWwvTW9kZWwuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvdXRpbC9jb21wb25lbnQuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvaTE4bi9sYW5nRU4uanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvaTE4bi9sYW5nWkguanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvY29yZS9sb2NhbGUuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvdXRpbC90aW1lLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL3V0aWwvZm9ybWF0LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL3V0aWwvbGF5b3V0LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL21vZGVsL0NvbXBvbmVudC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9tb2RlbC9nbG9iYWxEZWZhdWx0LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL3V0aWwvdHlwZXMuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvZGF0YS9oZWxwZXIvc291cmNlSGVscGVyLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL21vZGVsL2ludGVybmFsQ29tcG9uZW50Q3JlYXRvci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9tb2RlbC9taXhpbi9wYWxldHRlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL21vZGVsL0dsb2JhbC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9jb3JlL0V4dGVuc2lvbkFQSS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9jb3JlL0Nvb3JkaW5hdGVTeXN0ZW0uanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvbW9kZWwvT3B0aW9uTWFuYWdlci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9wcmVwcm9jZXNzb3IvaGVscGVyL2NvbXBhdFN0eWxlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL3ByZXByb2Nlc3Nvci9iYWNrd2FyZENvbXBhdC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9wcm9jZXNzb3IvZGF0YVN0YWNrLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2RhdGEvU291cmNlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2RhdGEvaGVscGVyL2RhdGFQcm92aWRlci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9tb2RlbC9taXhpbi9kYXRhRm9ybWF0LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2NvcmUvdGFzay5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9kYXRhL2hlbHBlci9kYXRhVmFsdWVIZWxwZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvZGF0YS9oZWxwZXIvdHJhbnNmb3JtLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2RhdGEvRGF0YVN0b3JlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2RhdGEvaGVscGVyL3NvdXJjZU1hbmFnZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvY29tcG9uZW50L3Rvb2x0aXAvdG9vbHRpcE1hcmt1cC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9jb21wb25lbnQvdG9vbHRpcC9zZXJpZXNGb3JtYXRUb29sdGlwLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL21vZGVsL1Nlcmllcy5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi92aWV3L0NvbXBvbmVudC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9jaGFydC9oZWxwZXIvY3JlYXRlUmVuZGVyUGxhbm5lci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi92aWV3L0NoYXJ0LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL3V0aWwvdGhyb3R0bGUuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvdmlzdWFsL3N0eWxlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2xvYWRpbmcvZGVmYXVsdC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9jb3JlL1NjaGVkdWxlci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi90aGVtZS9saWdodC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi90aGVtZS9kYXJrLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL3V0aWwvRUNFdmVudFByb2Nlc3Nvci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi92aXN1YWwvc3ltYm9sLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL3Zpc3VhbC9oZWxwZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvbGVnYWN5L2RhdGFTZWxlY3RBY3Rpb24uanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvdXRpbC9ldmVudC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9jb3JlL1dlYWtNYXAuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvdXRpbC9zeW1ib2wuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvY2FudmFzL2hlbHBlci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy96cmVuZGVyL2xpYi9jYW52YXMvZGFzaFN0eWxlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL2NhbnZhcy9ncmFwaGljLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL3V0aWwvZGVjYWwuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvdmlzdWFsL2RlY2FsLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2NvcmUvbGlmZWN5Y2xlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2NvcmUvaW1wbC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9jb3JlL2VjaGFydHMuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvZGF0YS9EYXRhRGlmZmVyLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2RhdGEvaGVscGVyL2RpbWVuc2lvbkhlbHBlci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9kYXRhL1Nlcmllc0RpbWVuc2lvbkRlZmluZS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9kYXRhL2hlbHBlci9TZXJpZXNEYXRhU2NoZW1hLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2RhdGEvU2VyaWVzRGF0YS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9kYXRhL2hlbHBlci9jcmVhdGVEaW1lbnNpb25zLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2Nvb3JkL2F4aXNIZWxwZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvZXh0ZW5zaW9uLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2xhYmVsL2xhYmVsR3VpZGVIZWxwZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvbGFiZWwvbGFiZWxMYXlvdXRIZWxwZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvenJlbmRlci9saWIvY2FudmFzL0xheWVyLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvbGliL2NhbnZhcy9QYWludGVyLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL3JlbmRlcmVyL2luc3RhbGxDYW52YXNSZW5kZXJlci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9jaGFydC9oZWxwZXIvc2VjdG9ySGVscGVyLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2NoYXJ0L3BpZS9waWVMYXlvdXQuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvcHJvY2Vzc29yL2RhdGFGaWx0ZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvY2hhcnQvcGllL2xhYmVsTGF5b3V0LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2NoYXJ0L3BpZS9QaWVWaWV3LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2NoYXJ0L2hlbHBlci9jcmVhdGVTZXJpZXNEYXRhU2ltcGx5LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL3Zpc3VhbC9MZWdlbmRWaXN1YWxQcm92aWRlci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9jaGFydC9waWUvUGllU2VyaWVzLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL3Byb2Nlc3Nvci9uZWdhdGl2ZURhdGFGaWx0ZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvY2hhcnQvcGllL2luc3RhbGwuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvY29vcmQvY2FydGVzaWFuL2NhcnRlc2lhbkF4aXNIZWxwZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvY29tcG9uZW50L2F4aXMvQXhpc0J1aWxkZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvY29tcG9uZW50L2F4aXNQb2ludGVyL21vZGVsSGVscGVyLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2NvbXBvbmVudC9heGlzL0F4aXNWaWV3LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2NvbXBvbmVudC9heGlzUG9pbnRlci9CYXNlQXhpc1BvaW50ZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvY29tcG9uZW50L2F4aXNQb2ludGVyL3ZpZXdIZWxwZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvY29tcG9uZW50L2F4aXNQb2ludGVyL0NhcnRlc2lhbkF4aXNQb2ludGVyLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2NvbXBvbmVudC9heGlzUG9pbnRlci9BeGlzUG9pbnRlck1vZGVsLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2NvbXBvbmVudC9heGlzUG9pbnRlci9nbG9iYWxMaXN0ZW5lci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9jb21wb25lbnQvYXhpc1BvaW50ZXIvQXhpc1BvaW50ZXJWaWV3LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2NvbXBvbmVudC9heGlzUG9pbnRlci9maW5kUG9pbnRGcm9tU2VyaWVzLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2NvbXBvbmVudC9heGlzUG9pbnRlci9heGlzVHJpZ2dlci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9jb21wb25lbnQvYXhpc1BvaW50ZXIvaW5zdGFsbC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9jb21wb25lbnQvaGVscGVyL2xpc3RDb21wb25lbnQuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvY29tcG9uZW50L3Rvb2x0aXAvVG9vbHRpcE1vZGVsLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2NvbXBvbmVudC90b29sdGlwL2hlbHBlci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9jb21wb25lbnQvdG9vbHRpcC9Ub29sdGlwSFRNTENvbnRlbnQuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvY29tcG9uZW50L3Rvb2x0aXAvVG9vbHRpcFJpY2hDb250ZW50LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2NvbXBvbmVudC90b29sdGlwL1Rvb2x0aXBWaWV3LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2NvbXBvbmVudC90b29sdGlwL2luc3RhbGwuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvY29tcG9uZW50L3RpdGxlL2luc3RhbGwuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvY29tcG9uZW50L2xlZ2VuZC9MZWdlbmRNb2RlbC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9jb21wb25lbnQvbGVnZW5kL0xlZ2VuZFZpZXcuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvY29tcG9uZW50L2xlZ2VuZC9sZWdlbmRGaWx0ZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvY29tcG9uZW50L2xlZ2VuZC9sZWdlbmRBY3Rpb24uanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvY29tcG9uZW50L2xlZ2VuZC9pbnN0YWxsTGVnZW5kUGxhaW4uanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvY29tcG9uZW50L2xlZ2VuZC9TY3JvbGxhYmxlTGVnZW5kTW9kZWwuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvY29tcG9uZW50L2xlZ2VuZC9TY3JvbGxhYmxlTGVnZW5kVmlldy5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9lY2hhcnRzL2xpYi9jb21wb25lbnQvbGVnZW5kL3Njcm9sbGFibGVMZWdlbmRBY3Rpb24uanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvZWNoYXJ0cy9saWIvY29tcG9uZW50L2xlZ2VuZC9pbnN0YWxsTGVnZW5kU2Nyb2xsLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2VjaGFydHMvbGliL2NvbXBvbmVudC9sZWdlbmQvaW5zdGFsbC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9yZXNpemUtZGV0ZWN0b3IvZXNtL2luZGV4LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1lY2hhcnRzL2Rpc3QvaW5kZXguZXNtLm1pbi5qcyIsIi4uLy4uLy4uL3NyYy9wYWdlcy9TdGF0aXN0aWNzLnZ1ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2NyZWF0ZUJpbmRpbmcgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xyXG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufSk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIG8pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobywgcCkpIF9fY3JlYXRlQmluZGluZyhvLCBtLCBwKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheSh0bywgZnJvbSwgcGFjaykge1xyXG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XHJcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XHJcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IGZyb20pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XHJcbn0pIDogZnVuY3Rpb24obywgdikge1xyXG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XHJcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XHJcbn1cclxuIiwidmFyIEJyb3dzZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJyb3dzZXIoKSB7XG4gICAgICAgIHRoaXMuZmlyZWZveCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmllID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZWRnZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLm5ld0VkZ2UgPSBmYWxzZTtcbiAgICAgICAgdGhpcy53ZUNoYXQgPSBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIEJyb3dzZXI7XG59KCkpO1xudmFyIEVudiA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRW52KCkge1xuICAgICAgICB0aGlzLmJyb3dzZXIgPSBuZXcgQnJvd3NlcigpO1xuICAgICAgICB0aGlzLm5vZGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy53eGEgPSBmYWxzZTtcbiAgICAgICAgdGhpcy53b3JrZXIgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zdmdTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50b3VjaEV2ZW50c1N1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnBvaW50ZXJFdmVudHNTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kb21TdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1TdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0zZFN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhhc0dsb2JhbFdpbmRvdyA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xuICAgIH1cbiAgICByZXR1cm4gRW52O1xufSgpKTtcbnZhciBlbnYgPSBuZXcgRW52KCk7XG5pZiAodHlwZW9mIHd4ID09PSAnb2JqZWN0JyAmJiB0eXBlb2Ygd3guZ2V0U3lzdGVtSW5mb1N5bmMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBlbnYud3hhID0gdHJ1ZTtcbiAgICBlbnYudG91Y2hFdmVudHNTdXBwb3J0ZWQgPSB0cnVlO1xufVxuZWxzZSBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBlbnYud29ya2VyID0gdHJ1ZTtcbn1cbmVsc2UgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgZW52Lm5vZGUgPSB0cnVlO1xuICAgIGVudi5zdmdTdXBwb3J0ZWQgPSB0cnVlO1xufVxuZWxzZSB7XG4gICAgZGV0ZWN0KG5hdmlnYXRvci51c2VyQWdlbnQsIGVudik7XG59XG5mdW5jdGlvbiBkZXRlY3QodWEsIGVudikge1xuICAgIHZhciBicm93c2VyID0gZW52LmJyb3dzZXI7XG4gICAgdmFyIGZpcmVmb3ggPSB1YS5tYXRjaCgvRmlyZWZveFxcLyhbXFxkLl0rKS8pO1xuICAgIHZhciBpZSA9IHVhLm1hdGNoKC9NU0lFXFxzKFtcXGQuXSspLylcbiAgICAgICAgfHwgdWEubWF0Y2goL1RyaWRlbnRcXC8uKz9ydjooKFtcXGQuXSspKS8pO1xuICAgIHZhciBlZGdlID0gdWEubWF0Y2goL0VkZ2U/XFwvKFtcXGQuXSspLyk7XG4gICAgdmFyIHdlQ2hhdCA9ICgvbWljcm9tZXNzZW5nZXIvaSkudGVzdCh1YSk7XG4gICAgaWYgKGZpcmVmb3gpIHtcbiAgICAgICAgYnJvd3Nlci5maXJlZm94ID0gdHJ1ZTtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gZmlyZWZveFsxXTtcbiAgICB9XG4gICAgaWYgKGllKSB7XG4gICAgICAgIGJyb3dzZXIuaWUgPSB0cnVlO1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSBpZVsxXTtcbiAgICB9XG4gICAgaWYgKGVkZ2UpIHtcbiAgICAgICAgYnJvd3Nlci5lZGdlID0gdHJ1ZTtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gZWRnZVsxXTtcbiAgICAgICAgYnJvd3Nlci5uZXdFZGdlID0gK2VkZ2VbMV0uc3BsaXQoJy4nKVswXSA+IDE4O1xuICAgIH1cbiAgICBpZiAod2VDaGF0KSB7XG4gICAgICAgIGJyb3dzZXIud2VDaGF0ID0gdHJ1ZTtcbiAgICB9XG4gICAgZW52LnN2Z1N1cHBvcnRlZCA9IHR5cGVvZiBTVkdSZWN0ICE9PSAndW5kZWZpbmVkJztcbiAgICBlbnYudG91Y2hFdmVudHNTdXBwb3J0ZWQgPSAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cgJiYgIWJyb3dzZXIuaWUgJiYgIWJyb3dzZXIuZWRnZTtcbiAgICBlbnYucG9pbnRlckV2ZW50c1N1cHBvcnRlZCA9ICdvbnBvaW50ZXJkb3duJyBpbiB3aW5kb3dcbiAgICAgICAgJiYgKGJyb3dzZXIuZWRnZSB8fCAoYnJvd3Nlci5pZSAmJiArYnJvd3Nlci52ZXJzaW9uID49IDExKSk7XG4gICAgZW52LmRvbVN1cHBvcnRlZCA9IHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCc7XG4gICAgdmFyIHN0eWxlID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlO1xuICAgIGVudi50cmFuc2Zvcm0zZFN1cHBvcnRlZCA9ICgoYnJvd3Nlci5pZSAmJiAndHJhbnNpdGlvbicgaW4gc3R5bGUpXG4gICAgICAgIHx8IGJyb3dzZXIuZWRnZVxuICAgICAgICB8fCAoKCdXZWJLaXRDU1NNYXRyaXgnIGluIHdpbmRvdykgJiYgKCdtMTEnIGluIG5ldyBXZWJLaXRDU1NNYXRyaXgoKSkpXG4gICAgICAgIHx8ICdNb3pQZXJzcGVjdGl2ZScgaW4gc3R5bGUpXG4gICAgICAgICYmICEoJ09UcmFuc2l0aW9uJyBpbiBzdHlsZSk7XG4gICAgZW52LnRyYW5zZm9ybVN1cHBvcnRlZCA9IGVudi50cmFuc2Zvcm0zZFN1cHBvcnRlZFxuICAgICAgICB8fCAoYnJvd3Nlci5pZSAmJiArYnJvd3Nlci52ZXJzaW9uID49IDkpO1xufVxuZXhwb3J0IGRlZmF1bHQgZW52O1xuIiwiZXhwb3J0IHZhciBERUZBVUxUX0ZPTlRfU0laRSA9IDEyO1xuZXhwb3J0IHZhciBERUZBVUxUX0ZPTlRfRkFNSUxZID0gJ3NhbnMtc2VyaWYnO1xuZXhwb3J0IHZhciBERUZBVUxUX0ZPTlQgPSBERUZBVUxUX0ZPTlRfU0laRSArIFwicHggXCIgKyBERUZBVUxUX0ZPTlRfRkFNSUxZO1xudmFyIE9GRlNFVCA9IDIwO1xudmFyIFNDQUxFID0gMTAwO1xudmFyIGRlZmF1bHRXaWR0aE1hcFN0ciA9IFwiMDA3TExtVyc1NTtOMDUwMExMTExMTExMTEwwME5OTkx6V1dcXFxcXFxcXFdRYlxcXFwwRldMZ1xcXFxiV2JcXFxcV1FcXFxcV3JXV1EwMDBDTDVMTEZMTDBMTCoqRipnTExMTDVGMExGXFxcXEZGRjUuNU5cIjtcbmZ1bmN0aW9uIGdldFRleHRXaWR0aE1hcChtYXBTdHIpIHtcbiAgICB2YXIgbWFwID0ge307XG4gICAgaWYgKHR5cGVvZiBKU09OID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gbWFwO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcFN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgY2hhciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoaSArIDMyKTtcbiAgICAgICAgdmFyIHNpemUgPSAobWFwU3RyLmNoYXJDb2RlQXQoaSkgLSBPRkZTRVQpIC8gU0NBTEU7XG4gICAgICAgIG1hcFtjaGFyXSA9IHNpemU7XG4gICAgfVxuICAgIHJldHVybiBtYXA7XG59XG5leHBvcnQgdmFyIERFRkFVTFRfVEVYVF9XSURUSF9NQVAgPSBnZXRUZXh0V2lkdGhNYXAoZGVmYXVsdFdpZHRoTWFwU3RyKTtcbmV4cG9ydCB2YXIgcGxhdGZvcm1BcGkgPSB7XG4gICAgY3JlYXRlQ2FudmFzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAmJiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICB9LFxuICAgIG1lYXN1cmVUZXh0OiAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2N0eDtcbiAgICAgICAgdmFyIF9jYWNoZWRGb250O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRleHQsIGZvbnQpIHtcbiAgICAgICAgICAgIGlmICghX2N0eCkge1xuICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBwbGF0Zm9ybUFwaS5jcmVhdGVDYW52YXMoKTtcbiAgICAgICAgICAgICAgICBfY3R4ID0gY2FudmFzICYmIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKF9jdHgpIHtcbiAgICAgICAgICAgICAgICBpZiAoX2NhY2hlZEZvbnQgIT09IGZvbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgX2NhY2hlZEZvbnQgPSBfY3R4LmZvbnQgPSBmb250IHx8IERFRkFVTFRfRk9OVDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jdHgubWVhc3VyZVRleHQodGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0ZXh0ID0gdGV4dCB8fCAnJztcbiAgICAgICAgICAgICAgICBmb250ID0gZm9udCB8fCBERUZBVUxUX0ZPTlQ7XG4gICAgICAgICAgICAgICAgdmFyIHJlcyA9IC8oXFxkKylweC8uZXhlYyhmb250KTtcbiAgICAgICAgICAgICAgICB2YXIgZm9udFNpemUgPSByZXMgJiYgK3Jlc1sxXSB8fCBERUZBVUxUX0ZPTlRfU0laRTtcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSAwO1xuICAgICAgICAgICAgICAgIGlmIChmb250LmluZGV4T2YoJ21vbm8nKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoID0gZm9udFNpemUgKiB0ZXh0Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZUNhbGNXaWR0aCA9IERFRkFVTFRfVEVYVF9XSURUSF9NQVBbdGV4dFtpXV07XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCArPSBwcmVDYWxjV2lkdGggPT0gbnVsbCA/IGZvbnRTaXplIDogKHByZUNhbGNXaWR0aCAqIGZvbnRTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyB3aWR0aDogd2lkdGggfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KSgpLFxuICAgIGxvYWRJbWFnZTogZnVuY3Rpb24gKHNyYywgb25sb2FkLCBvbmVycm9yKSB7XG4gICAgICAgIHZhciBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpbWFnZS5vbmxvYWQgPSBvbmxvYWQ7XG4gICAgICAgIGltYWdlLm9uZXJyb3IgPSBvbmVycm9yO1xuICAgICAgICBpbWFnZS5zcmMgPSBzcmM7XG4gICAgICAgIHJldHVybiBpbWFnZTtcbiAgICB9XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHNldFBsYXRmb3JtQVBJKG5ld1BsYXRmb3JtQXBpcykge1xuICAgIGZvciAodmFyIGtleSBpbiBwbGF0Zm9ybUFwaSkge1xuICAgICAgICBpZiAobmV3UGxhdGZvcm1BcGlzW2tleV0pIHtcbiAgICAgICAgICAgIHBsYXRmb3JtQXBpW2tleV0gPSBuZXdQbGF0Zm9ybUFwaXNba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IHBsYXRmb3JtQXBpIH0gZnJvbSAnLi9wbGF0Zm9ybS5qcyc7XG52YXIgQlVJTFRJTl9PQkpFQ1QgPSByZWR1Y2UoW1xuICAgICdGdW5jdGlvbicsXG4gICAgJ1JlZ0V4cCcsXG4gICAgJ0RhdGUnLFxuICAgICdFcnJvcicsXG4gICAgJ0NhbnZhc0dyYWRpZW50JyxcbiAgICAnQ2FudmFzUGF0dGVybicsXG4gICAgJ0ltYWdlJyxcbiAgICAnQ2FudmFzJ1xuXSwgZnVuY3Rpb24gKG9iaiwgdmFsKSB7XG4gICAgb2JqWydbb2JqZWN0ICcgKyB2YWwgKyAnXSddID0gdHJ1ZTtcbiAgICByZXR1cm4gb2JqO1xufSwge30pO1xudmFyIFRZUEVEX0FSUkFZID0gcmVkdWNlKFtcbiAgICAnSW50OCcsXG4gICAgJ1VpbnQ4JyxcbiAgICAnVWludDhDbGFtcGVkJyxcbiAgICAnSW50MTYnLFxuICAgICdVaW50MTYnLFxuICAgICdJbnQzMicsXG4gICAgJ1VpbnQzMicsXG4gICAgJ0Zsb2F0MzInLFxuICAgICdGbG9hdDY0J1xuXSwgZnVuY3Rpb24gKG9iaiwgdmFsKSB7XG4gICAgb2JqWydbb2JqZWN0ICcgKyB2YWwgKyAnQXJyYXldJ10gPSB0cnVlO1xuICAgIHJldHVybiBvYmo7XG59LCB7fSk7XG52YXIgb2JqVG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xudmFyIGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7XG52YXIgbmF0aXZlRm9yRWFjaCA9IGFycmF5UHJvdG8uZm9yRWFjaDtcbnZhciBuYXRpdmVGaWx0ZXIgPSBhcnJheVByb3RvLmZpbHRlcjtcbnZhciBuYXRpdmVTbGljZSA9IGFycmF5UHJvdG8uc2xpY2U7XG52YXIgbmF0aXZlTWFwID0gYXJyYXlQcm90by5tYXA7XG52YXIgY3RvckZ1bmN0aW9uID0gZnVuY3Rpb24gKCkgeyB9LmNvbnN0cnVjdG9yO1xudmFyIHByb3RvRnVuY3Rpb24gPSBjdG9yRnVuY3Rpb24gPyBjdG9yRnVuY3Rpb24ucHJvdG90eXBlIDogbnVsbDtcbnZhciBwcm90b0tleSA9ICdfX3Byb3RvX18nO1xudmFyIGlkU3RhcnQgPSAweDA5MDc7XG5leHBvcnQgZnVuY3Rpb24gZ3VpZCgpIHtcbiAgICByZXR1cm4gaWRTdGFydCsrO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGxvZ0Vycm9yKCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IuYXBwbHkoY29uc29sZSwgYXJncyk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lKHNvdXJjZSkge1xuICAgIGlmIChzb3VyY2UgPT0gbnVsbCB8fCB0eXBlb2Ygc291cmNlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gc291cmNlO1xuICAgIH1cbiAgICB2YXIgcmVzdWx0ID0gc291cmNlO1xuICAgIHZhciB0eXBlU3RyID0gb2JqVG9TdHJpbmcuY2FsbChzb3VyY2UpO1xuICAgIGlmICh0eXBlU3RyID09PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgICAgIGlmICghaXNQcmltaXRpdmUoc291cmNlKSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc291cmNlLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W2ldID0gY2xvbmUoc291cmNlW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChUWVBFRF9BUlJBWVt0eXBlU3RyXSkge1xuICAgICAgICBpZiAoIWlzUHJpbWl0aXZlKHNvdXJjZSkpIHtcbiAgICAgICAgICAgIHZhciBDdG9yID0gc291cmNlLmNvbnN0cnVjdG9yO1xuICAgICAgICAgICAgaWYgKEN0b3IuZnJvbSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IEN0b3IuZnJvbShzb3VyY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IEN0b3Ioc291cmNlLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHNvdXJjZS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbaV0gPSBzb3VyY2VbaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKCFCVUlMVElOX09CSkVDVFt0eXBlU3RyXSAmJiAhaXNQcmltaXRpdmUoc291cmNlKSAmJiAhaXNEb20oc291cmNlKSkge1xuICAgICAgICByZXN1bHQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGtleSAhPT0gcHJvdG9LZXkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IGNsb25lKHNvdXJjZVtrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlKHRhcmdldCwgc291cmNlLCBvdmVyd3JpdGUpIHtcbiAgICBpZiAoIWlzT2JqZWN0KHNvdXJjZSkgfHwgIWlzT2JqZWN0KHRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuIG92ZXJ3cml0ZSA/IGNsb25lKHNvdXJjZSkgOiB0YXJnZXQ7XG4gICAgfVxuICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGtleSAhPT0gcHJvdG9LZXkpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXRQcm9wID0gdGFyZ2V0W2tleV07XG4gICAgICAgICAgICB2YXIgc291cmNlUHJvcCA9IHNvdXJjZVtrZXldO1xuICAgICAgICAgICAgaWYgKGlzT2JqZWN0KHNvdXJjZVByb3ApXG4gICAgICAgICAgICAgICAgJiYgaXNPYmplY3QodGFyZ2V0UHJvcClcbiAgICAgICAgICAgICAgICAmJiAhaXNBcnJheShzb3VyY2VQcm9wKVxuICAgICAgICAgICAgICAgICYmICFpc0FycmF5KHRhcmdldFByb3ApXG4gICAgICAgICAgICAgICAgJiYgIWlzRG9tKHNvdXJjZVByb3ApXG4gICAgICAgICAgICAgICAgJiYgIWlzRG9tKHRhcmdldFByb3ApXG4gICAgICAgICAgICAgICAgJiYgIWlzQnVpbHRJbk9iamVjdChzb3VyY2VQcm9wKVxuICAgICAgICAgICAgICAgICYmICFpc0J1aWx0SW5PYmplY3QodGFyZ2V0UHJvcClcbiAgICAgICAgICAgICAgICAmJiAhaXNQcmltaXRpdmUoc291cmNlUHJvcClcbiAgICAgICAgICAgICAgICAmJiAhaXNQcmltaXRpdmUodGFyZ2V0UHJvcCkpIHtcbiAgICAgICAgICAgICAgICBtZXJnZSh0YXJnZXRQcm9wLCBzb3VyY2VQcm9wLCBvdmVyd3JpdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAob3ZlcndyaXRlIHx8ICEoa2V5IGluIHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRba2V5XSA9IGNsb25lKHNvdXJjZVtrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlQWxsKHRhcmdldEFuZFNvdXJjZXMsIG92ZXJ3cml0ZSkge1xuICAgIHZhciByZXN1bHQgPSB0YXJnZXRBbmRTb3VyY2VzWzBdO1xuICAgIGZvciAodmFyIGkgPSAxLCBsZW4gPSB0YXJnZXRBbmRTb3VyY2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHJlc3VsdCA9IG1lcmdlKHJlc3VsdCwgdGFyZ2V0QW5kU291cmNlc1tpXSwgb3ZlcndyaXRlKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmQodGFyZ2V0LCBzb3VyY2UpIHtcbiAgICBpZiAoT2JqZWN0LmFzc2lnbikge1xuICAgICAgICBPYmplY3QuYXNzaWduKHRhcmdldCwgc291cmNlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBrZXkgIT09IHByb3RvS2V5KSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRzKHRhcmdldCwgc291cmNlLCBvdmVybGF5KSB7XG4gICAgdmFyIGtleXNBcnIgPSBrZXlzKHNvdXJjZSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzQXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBrZXkgPSBrZXlzQXJyW2ldO1xuICAgICAgICBpZiAoKG92ZXJsYXkgPyBzb3VyY2Vba2V5XSAhPSBudWxsIDogdGFyZ2V0W2tleV0gPT0gbnVsbCkpIHtcbiAgICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cbmV4cG9ydCB2YXIgY3JlYXRlQ2FudmFzID0gcGxhdGZvcm1BcGkuY3JlYXRlQ2FudmFzO1xuZXhwb3J0IGZ1bmN0aW9uIGluZGV4T2YoYXJyYXksIHZhbHVlKSB7XG4gICAgaWYgKGFycmF5KSB7XG4gICAgICAgIGlmIChhcnJheS5pbmRleE9mKSB7XG4gICAgICAgICAgICByZXR1cm4gYXJyYXkuaW5kZXhPZih2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoYXJyYXlbaV0gPT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIC0xO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGluaGVyaXRzKGNsYXp6LCBiYXNlQ2xhenopIHtcbiAgICB2YXIgY2xhenpQcm90b3R5cGUgPSBjbGF6ei5wcm90b3R5cGU7XG4gICAgZnVuY3Rpb24gRigpIHsgfVxuICAgIEYucHJvdG90eXBlID0gYmFzZUNsYXp6LnByb3RvdHlwZTtcbiAgICBjbGF6ei5wcm90b3R5cGUgPSBuZXcgRigpO1xuICAgIGZvciAodmFyIHByb3AgaW4gY2xhenpQcm90b3R5cGUpIHtcbiAgICAgICAgaWYgKGNsYXp6UHJvdG90eXBlLmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICAgICAgICBjbGF6ei5wcm90b3R5cGVbcHJvcF0gPSBjbGF6elByb3RvdHlwZVtwcm9wXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbGF6ei5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjbGF6ejtcbiAgICBjbGF6ei5zdXBlckNsYXNzID0gYmFzZUNsYXp6O1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1peGluKHRhcmdldCwgc291cmNlLCBvdmVycmlkZSkge1xuICAgIHRhcmdldCA9ICdwcm90b3R5cGUnIGluIHRhcmdldCA/IHRhcmdldC5wcm90b3R5cGUgOiB0YXJnZXQ7XG4gICAgc291cmNlID0gJ3Byb3RvdHlwZScgaW4gc291cmNlID8gc291cmNlLnByb3RvdHlwZSA6IHNvdXJjZTtcbiAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMpIHtcbiAgICAgICAgdmFyIGtleUxpc3QgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhzb3VyY2UpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleUxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlMaXN0W2ldO1xuICAgICAgICAgICAgaWYgKGtleSAhPT0gJ2NvbnN0cnVjdG9yJykge1xuICAgICAgICAgICAgICAgIGlmICgob3ZlcnJpZGUgPyBzb3VyY2Vba2V5XSAhPSBudWxsIDogdGFyZ2V0W2tleV0gPT0gbnVsbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGRlZmF1bHRzKHRhcmdldCwgc291cmNlLCBvdmVycmlkZSk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQXJyYXlMaWtlKGRhdGEpIHtcbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGVvZiBkYXRhLmxlbmd0aCA9PT0gJ251bWJlcic7XG59XG5leHBvcnQgZnVuY3Rpb24gZWFjaChhcnIsIGNiLCBjb250ZXh0KSB7XG4gICAgaWYgKCEoYXJyICYmIGNiKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChhcnIuZm9yRWFjaCAmJiBhcnIuZm9yRWFjaCA9PT0gbmF0aXZlRm9yRWFjaCkge1xuICAgICAgICBhcnIuZm9yRWFjaChjYiwgY29udGV4dCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFyci5sZW5ndGggPT09ICthcnIubGVuZ3RoKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhcnIubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGNiLmNhbGwoY29udGV4dCwgYXJyW2ldLCBpLCBhcnIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gYXJyKSB7XG4gICAgICAgICAgICBpZiAoYXJyLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICBjYi5jYWxsKGNvbnRleHQsIGFycltrZXldLCBrZXksIGFycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gbWFwKGFyciwgY2IsIGNvbnRleHQpIHtcbiAgICBpZiAoIWFycikge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGlmICghY2IpIHtcbiAgICAgICAgcmV0dXJuIHNsaWNlKGFycik7XG4gICAgfVxuICAgIGlmIChhcnIubWFwICYmIGFyci5tYXAgPT09IG5hdGl2ZU1hcCkge1xuICAgICAgICByZXR1cm4gYXJyLm1hcChjYiwgY29udGV4dCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhcnIubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGNiLmNhbGwoY29udGV4dCwgYXJyW2ldLCBpLCBhcnIpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2UoYXJyLCBjYiwgbWVtbywgY29udGV4dCkge1xuICAgIGlmICghKGFyciAmJiBjYikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYXJyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIG1lbW8gPSBjYi5jYWxsKGNvbnRleHQsIG1lbW8sIGFycltpXSwgaSwgYXJyKTtcbiAgICB9XG4gICAgcmV0dXJuIG1lbW87XG59XG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyKGFyciwgY2IsIGNvbnRleHQpIHtcbiAgICBpZiAoIWFycikge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGlmICghY2IpIHtcbiAgICAgICAgcmV0dXJuIHNsaWNlKGFycik7XG4gICAgfVxuICAgIGlmIChhcnIuZmlsdGVyICYmIGFyci5maWx0ZXIgPT09IG5hdGl2ZUZpbHRlcikge1xuICAgICAgICByZXR1cm4gYXJyLmZpbHRlcihjYiwgY29udGV4dCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhcnIubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChjYi5jYWxsKGNvbnRleHQsIGFycltpXSwgaSwgYXJyKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGFycltpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZmluZChhcnIsIGNiLCBjb250ZXh0KSB7XG4gICAgaWYgKCEoYXJyICYmIGNiKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhcnIubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgaWYgKGNiLmNhbGwoY29udGV4dCwgYXJyW2ldLCBpLCBhcnIpKSB7XG4gICAgICAgICAgICByZXR1cm4gYXJyW2ldO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGtleXMob2JqKSB7XG4gICAgaWYgKCFvYmopIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXMpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaik7XG4gICAgfVxuICAgIHZhciBrZXlMaXN0ID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIGtleUxpc3QucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBrZXlMaXN0O1xufVxuZnVuY3Rpb24gYmluZFBvbHlmaWxsKGZ1bmMsIGNvbnRleHQpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2kgLSAyXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MuY29uY2F0KG5hdGl2ZVNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO1xuICAgIH07XG59XG5leHBvcnQgdmFyIGJpbmQgPSAocHJvdG9GdW5jdGlvbiAmJiBpc0Z1bmN0aW9uKHByb3RvRnVuY3Rpb24uYmluZCkpXG4gICAgPyBwcm90b0Z1bmN0aW9uLmNhbGwuYmluZChwcm90b0Z1bmN0aW9uLmJpbmQpXG4gICAgOiBiaW5kUG9seWZpbGw7XG5mdW5jdGlvbiBjdXJyeShmdW5jKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzLCBhcmdzLmNvbmNhdChuYXRpdmVTbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcbiAgICB9O1xufVxuZXhwb3J0IHsgY3VycnkgfTtcbmV4cG9ydCBmdW5jdGlvbiBpc0FycmF5KHZhbHVlKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbic7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNTdHJpbmcodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1N0cmluZ1NhZmUodmFsdWUpIHtcbiAgICByZXR1cm4gb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IFN0cmluZ10nO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzTnVtYmVyKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcic7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgICByZXR1cm4gdHlwZSA9PT0gJ2Z1bmN0aW9uJyB8fCAoISF2YWx1ZSAmJiB0eXBlID09PSAnb2JqZWN0Jyk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNCdWlsdEluT2JqZWN0KHZhbHVlKSB7XG4gICAgcmV0dXJuICEhQlVJTFRJTl9PQkpFQ1Rbb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSldO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzVHlwZWRBcnJheSh2YWx1ZSkge1xuICAgIHJldHVybiAhIVRZUEVEX0FSUkFZW29ialRvU3RyaW5nLmNhbGwodmFsdWUpXTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0RvbSh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnXG4gICAgICAgICYmIHR5cGVvZiB2YWx1ZS5ub2RlVHlwZSA9PT0gJ251bWJlcidcbiAgICAgICAgJiYgdHlwZW9mIHZhbHVlLm93bmVyRG9jdW1lbnQgPT09ICdvYmplY3QnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzR3JhZGllbnRPYmplY3QodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUuY29sb3JTdG9wcyAhPSBudWxsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzSW1hZ2VQYXR0ZXJuT2JqZWN0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlLmltYWdlICE9IG51bGw7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNSZWdFeHAodmFsdWUpIHtcbiAgICByZXR1cm4gb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGVxTmFOKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICE9PSB2YWx1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZXRyaWV2ZSgpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFyZ3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgaWYgKGFyZ3NbaV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGFyZ3NbaV07XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gcmV0cmlldmUyKHZhbHVlMCwgdmFsdWUxKSB7XG4gICAgcmV0dXJuIHZhbHVlMCAhPSBudWxsXG4gICAgICAgID8gdmFsdWUwXG4gICAgICAgIDogdmFsdWUxO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJldHJpZXZlMyh2YWx1ZTAsIHZhbHVlMSwgdmFsdWUyKSB7XG4gICAgcmV0dXJuIHZhbHVlMCAhPSBudWxsXG4gICAgICAgID8gdmFsdWUwXG4gICAgICAgIDogdmFsdWUxICE9IG51bGxcbiAgICAgICAgICAgID8gdmFsdWUxXG4gICAgICAgICAgICA6IHZhbHVlMjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzbGljZShhcnIpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBuYXRpdmVTbGljZS5hcHBseShhcnIsIGFyZ3MpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZUNzc0FycmF5KHZhbCkge1xuICAgIGlmICh0eXBlb2YgKHZhbCkgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiBbdmFsLCB2YWwsIHZhbCwgdmFsXTtcbiAgICB9XG4gICAgdmFyIGxlbiA9IHZhbC5sZW5ndGg7XG4gICAgaWYgKGxlbiA9PT0gMikge1xuICAgICAgICByZXR1cm4gW3ZhbFswXSwgdmFsWzFdLCB2YWxbMF0sIHZhbFsxXV07XG4gICAgfVxuICAgIGVsc2UgaWYgKGxlbiA9PT0gMykge1xuICAgICAgICByZXR1cm4gW3ZhbFswXSwgdmFsWzFdLCB2YWxbMl0sIHZhbFsxXV07XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0KGNvbmRpdGlvbiwgbWVzc2FnZSkge1xuICAgIGlmICghY29uZGl0aW9uKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gdHJpbShzdHIpIHtcbiAgICBpZiAoc3RyID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBzdHIudHJpbSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gc3RyLnRyaW0oKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csICcnKTtcbiAgICB9XG59XG52YXIgcHJpbWl0aXZlS2V5ID0gJ19fZWNfcHJpbWl0aXZlX18nO1xuZXhwb3J0IGZ1bmN0aW9uIHNldEFzUHJpbWl0aXZlKG9iaikge1xuICAgIG9ialtwcmltaXRpdmVLZXldID0gdHJ1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1ByaW1pdGl2ZShvYmopIHtcbiAgICByZXR1cm4gb2JqW3ByaW1pdGl2ZUtleV07XG59XG52YXIgTWFwUG9seWZpbGwgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1hcFBvbHlmaWxsKCkge1xuICAgICAgICB0aGlzLmRhdGEgPSB7fTtcbiAgICB9XG4gICAgTWFwUG9seWZpbGwucHJvdG90eXBlW1wiZGVsZXRlXCJdID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgZXhpc3RlZCA9IHRoaXMuaGFzKGtleSk7XG4gICAgICAgIGlmIChleGlzdGVkKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5kYXRhW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4aXN0ZWQ7XG4gICAgfTtcbiAgICBNYXBQb2x5ZmlsbC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmhhc093blByb3BlcnR5KGtleSk7XG4gICAgfTtcbiAgICBNYXBQb2x5ZmlsbC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhW2tleV07XG4gICAgfTtcbiAgICBNYXBQb2x5ZmlsbC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5kYXRhW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBNYXBQb2x5ZmlsbC5wcm90b3R5cGUua2V5cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGtleXModGhpcy5kYXRhKTtcbiAgICB9O1xuICAgIE1hcFBvbHlmaWxsLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBkYXRhID0gdGhpcy5kYXRhO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgICAgICAgaWYgKGRhdGEuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGFba2V5XSwga2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIE1hcFBvbHlmaWxsO1xufSgpKTtcbnZhciBpc05hdGl2ZU1hcFN1cHBvcnRlZCA9IHR5cGVvZiBNYXAgPT09ICdmdW5jdGlvbic7XG5mdW5jdGlvbiBtYXliZU5hdGl2ZU1hcCgpIHtcbiAgICByZXR1cm4gKGlzTmF0aXZlTWFwU3VwcG9ydGVkID8gbmV3IE1hcCgpIDogbmV3IE1hcFBvbHlmaWxsKCkpO1xufVxudmFyIEhhc2hNYXAgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEhhc2hNYXAob2JqKSB7XG4gICAgICAgIHZhciBpc0FyciA9IGlzQXJyYXkob2JqKTtcbiAgICAgICAgdGhpcy5kYXRhID0gbWF5YmVOYXRpdmVNYXAoKTtcbiAgICAgICAgdmFyIHRoaXNNYXAgPSB0aGlzO1xuICAgICAgICAob2JqIGluc3RhbmNlb2YgSGFzaE1hcClcbiAgICAgICAgICAgID8gb2JqLmVhY2godmlzaXQpXG4gICAgICAgICAgICA6IChvYmogJiYgZWFjaChvYmosIHZpc2l0KSk7XG4gICAgICAgIGZ1bmN0aW9uIHZpc2l0KHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgIGlzQXJyID8gdGhpc01hcC5zZXQodmFsdWUsIGtleSkgOiB0aGlzTWFwLnNldChrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBIYXNoTWFwLnByb3RvdHlwZS5oYXNLZXkgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuaGFzKGtleSk7XG4gICAgfTtcbiAgICBIYXNoTWFwLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuZ2V0KGtleSk7XG4gICAgfTtcbiAgICBIYXNoTWFwLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICB0aGlzLmRhdGEuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbiAgICBIYXNoTWFwLnByb3RvdHlwZS5lYWNoID0gZnVuY3Rpb24gKGNiLCBjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICBjYi5jYWxsKGNvbnRleHQsIHZhbHVlLCBrZXkpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEhhc2hNYXAucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBrZXlzID0gdGhpcy5kYXRhLmtleXMoKTtcbiAgICAgICAgcmV0dXJuIGlzTmF0aXZlTWFwU3VwcG9ydGVkXG4gICAgICAgICAgICA/IEFycmF5LmZyb20oa2V5cylcbiAgICAgICAgICAgIDoga2V5cztcbiAgICB9O1xuICAgIEhhc2hNYXAucHJvdG90eXBlLnJlbW92ZUtleSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdGhpcy5kYXRhW1wiZGVsZXRlXCJdKGtleSk7XG4gICAgfTtcbiAgICByZXR1cm4gSGFzaE1hcDtcbn0oKSk7XG5leHBvcnQgeyBIYXNoTWFwIH07XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSGFzaE1hcChvYmopIHtcbiAgICByZXR1cm4gbmV3IEhhc2hNYXAob2JqKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXRBcnJheShhLCBiKSB7XG4gICAgdmFyIG5ld0FycmF5ID0gbmV3IGEuY29uc3RydWN0b3IoYS5sZW5ndGggKyBiLmxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG5ld0FycmF5W2ldID0gYVtpXTtcbiAgICB9XG4gICAgdmFyIG9mZnNldCA9IGEubGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykge1xuICAgICAgICBuZXdBcnJheVtpICsgb2Zmc2V0XSA9IGJbaV07XG4gICAgfVxuICAgIHJldHVybiBuZXdBcnJheTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPYmplY3QocHJvdG8sIHByb3BlcnRpZXMpIHtcbiAgICB2YXIgb2JqO1xuICAgIGlmIChPYmplY3QuY3JlYXRlKSB7XG4gICAgICAgIG9iaiA9IE9iamVjdC5jcmVhdGUocHJvdG8pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIFN0eWxlQ3RvciA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICAgICAgU3R5bGVDdG9yLnByb3RvdHlwZSA9IHByb3RvO1xuICAgICAgICBvYmogPSBuZXcgU3R5bGVDdG9yKCk7XG4gICAgfVxuICAgIGlmIChwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGV4dGVuZChvYmosIHByb3BlcnRpZXMpO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGVVc2VyU2VsZWN0KGRvbSkge1xuICAgIHZhciBkb21TdHlsZSA9IGRvbS5zdHlsZTtcbiAgICBkb21TdHlsZS53ZWJraXRVc2VyU2VsZWN0ID0gJ25vbmUnO1xuICAgIGRvbVN0eWxlLnVzZXJTZWxlY3QgPSAnbm9uZSc7XG4gICAgZG9tU3R5bGUud2Via2l0VGFwSGlnaGxpZ2h0Q29sb3IgPSAncmdiYSgwLDAsMCwwKSc7XG4gICAgZG9tU3R5bGVbJy13ZWJraXQtdG91Y2gtY2FsbG91dCddID0gJ25vbmUnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhhc093bihvd24sIHByb3ApIHtcbiAgICByZXR1cm4gb3duLmhhc093blByb3BlcnR5KHByb3ApO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG5vb3AoKSB7IH1cbmV4cG9ydCB2YXIgUkFESUFOX1RPX0RFR1JFRSA9IDE4MCAvIE1hdGguUEk7XG4iLCJleHBvcnQgZnVuY3Rpb24gY3JlYXRlKHgsIHkpIHtcbiAgICBpZiAoeCA9PSBudWxsKSB7XG4gICAgICAgIHggPSAwO1xuICAgIH1cbiAgICBpZiAoeSA9PSBudWxsKSB7XG4gICAgICAgIHkgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gW3gsIHldO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNvcHkob3V0LCB2KSB7XG4gICAgb3V0WzBdID0gdlswXTtcbiAgICBvdXRbMV0gPSB2WzFdO1xuICAgIHJldHVybiBvdXQ7XG59XG5leHBvcnQgZnVuY3Rpb24gY2xvbmUodikge1xuICAgIHJldHVybiBbdlswXSwgdlsxXV07XG59XG5leHBvcnQgZnVuY3Rpb24gc2V0KG91dCwgYSwgYikge1xuICAgIG91dFswXSA9IGE7XG4gICAgb3V0WzFdID0gYjtcbiAgICByZXR1cm4gb3V0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFkZChvdXQsIHYxLCB2Mikge1xuICAgIG91dFswXSA9IHYxWzBdICsgdjJbMF07XG4gICAgb3V0WzFdID0gdjFbMV0gKyB2MlsxXTtcbiAgICByZXR1cm4gb3V0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlQW5kQWRkKG91dCwgdjEsIHYyLCBhKSB7XG4gICAgb3V0WzBdID0gdjFbMF0gKyB2MlswXSAqIGE7XG4gICAgb3V0WzFdID0gdjFbMV0gKyB2MlsxXSAqIGE7XG4gICAgcmV0dXJuIG91dDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzdWIob3V0LCB2MSwgdjIpIHtcbiAgICBvdXRbMF0gPSB2MVswXSAtIHYyWzBdO1xuICAgIG91dFsxXSA9IHYxWzFdIC0gdjJbMV07XG4gICAgcmV0dXJuIG91dDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBsZW4odikge1xuICAgIHJldHVybiBNYXRoLnNxcnQobGVuU3F1YXJlKHYpKTtcbn1cbmV4cG9ydCB2YXIgbGVuZ3RoID0gbGVuO1xuZXhwb3J0IGZ1bmN0aW9uIGxlblNxdWFyZSh2KSB7XG4gICAgcmV0dXJuIHZbMF0gKiB2WzBdICsgdlsxXSAqIHZbMV07XG59XG5leHBvcnQgdmFyIGxlbmd0aFNxdWFyZSA9IGxlblNxdWFyZTtcbmV4cG9ydCBmdW5jdGlvbiBtdWwob3V0LCB2MSwgdjIpIHtcbiAgICBvdXRbMF0gPSB2MVswXSAqIHYyWzBdO1xuICAgIG91dFsxXSA9IHYxWzFdICogdjJbMV07XG4gICAgcmV0dXJuIG91dDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkaXYob3V0LCB2MSwgdjIpIHtcbiAgICBvdXRbMF0gPSB2MVswXSAvIHYyWzBdO1xuICAgIG91dFsxXSA9IHYxWzFdIC8gdjJbMV07XG4gICAgcmV0dXJuIG91dDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkb3QodjEsIHYyKSB7XG4gICAgcmV0dXJuIHYxWzBdICogdjJbMF0gKyB2MVsxXSAqIHYyWzFdO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKG91dCwgdiwgcykge1xuICAgIG91dFswXSA9IHZbMF0gKiBzO1xuICAgIG91dFsxXSA9IHZbMV0gKiBzO1xuICAgIHJldHVybiBvdXQ7XG59XG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplKG91dCwgdikge1xuICAgIHZhciBkID0gbGVuKHYpO1xuICAgIGlmIChkID09PSAwKSB7XG4gICAgICAgIG91dFswXSA9IDA7XG4gICAgICAgIG91dFsxXSA9IDA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBvdXRbMF0gPSB2WzBdIC8gZDtcbiAgICAgICAgb3V0WzFdID0gdlsxXSAvIGQ7XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG59XG5leHBvcnQgZnVuY3Rpb24gZGlzdGFuY2UodjEsIHYyKSB7XG4gICAgcmV0dXJuIE1hdGguc3FydCgodjFbMF0gLSB2MlswXSkgKiAodjFbMF0gLSB2MlswXSlcbiAgICAgICAgKyAodjFbMV0gLSB2MlsxXSkgKiAodjFbMV0gLSB2MlsxXSkpO1xufVxuZXhwb3J0IHZhciBkaXN0ID0gZGlzdGFuY2U7XG5leHBvcnQgZnVuY3Rpb24gZGlzdGFuY2VTcXVhcmUodjEsIHYyKSB7XG4gICAgcmV0dXJuICh2MVswXSAtIHYyWzBdKSAqICh2MVswXSAtIHYyWzBdKVxuICAgICAgICArICh2MVsxXSAtIHYyWzFdKSAqICh2MVsxXSAtIHYyWzFdKTtcbn1cbmV4cG9ydCB2YXIgZGlzdFNxdWFyZSA9IGRpc3RhbmNlU3F1YXJlO1xuZXhwb3J0IGZ1bmN0aW9uIG5lZ2F0ZShvdXQsIHYpIHtcbiAgICBvdXRbMF0gPSAtdlswXTtcbiAgICBvdXRbMV0gPSAtdlsxXTtcbiAgICByZXR1cm4gb3V0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGxlcnAob3V0LCB2MSwgdjIsIHQpIHtcbiAgICBvdXRbMF0gPSB2MVswXSArIHQgKiAodjJbMF0gLSB2MVswXSk7XG4gICAgb3V0WzFdID0gdjFbMV0gKyB0ICogKHYyWzFdIC0gdjFbMV0pO1xuICAgIHJldHVybiBvdXQ7XG59XG5leHBvcnQgZnVuY3Rpb24gYXBwbHlUcmFuc2Zvcm0ob3V0LCB2LCBtKSB7XG4gICAgdmFyIHggPSB2WzBdO1xuICAgIHZhciB5ID0gdlsxXTtcbiAgICBvdXRbMF0gPSBtWzBdICogeCArIG1bMl0gKiB5ICsgbVs0XTtcbiAgICBvdXRbMV0gPSBtWzFdICogeCArIG1bM10gKiB5ICsgbVs1XTtcbiAgICByZXR1cm4gb3V0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1pbihvdXQsIHYxLCB2Mikge1xuICAgIG91dFswXSA9IE1hdGgubWluKHYxWzBdLCB2MlswXSk7XG4gICAgb3V0WzFdID0gTWF0aC5taW4odjFbMV0sIHYyWzFdKTtcbiAgICByZXR1cm4gb3V0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1heChvdXQsIHYxLCB2Mikge1xuICAgIG91dFswXSA9IE1hdGgubWF4KHYxWzBdLCB2MlswXSk7XG4gICAgb3V0WzFdID0gTWF0aC5tYXgodjFbMV0sIHYyWzFdKTtcbiAgICByZXR1cm4gb3V0O1xufVxuIiwidmFyIFBhcmFtID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBQYXJhbSh0YXJnZXQsIGUpIHtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIHRoaXMudG9wVGFyZ2V0ID0gZSAmJiBlLnRvcFRhcmdldDtcbiAgICB9XG4gICAgcmV0dXJuIFBhcmFtO1xufSgpKTtcbnZhciBEcmFnZ2FibGUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERyYWdnYWJsZShoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlciA9IGhhbmRsZXI7XG4gICAgICAgIGhhbmRsZXIub24oJ21vdXNlZG93bicsIHRoaXMuX2RyYWdTdGFydCwgdGhpcyk7XG4gICAgICAgIGhhbmRsZXIub24oJ21vdXNlbW92ZScsIHRoaXMuX2RyYWcsIHRoaXMpO1xuICAgICAgICBoYW5kbGVyLm9uKCdtb3VzZXVwJywgdGhpcy5fZHJhZ0VuZCwgdGhpcyk7XG4gICAgfVxuICAgIERyYWdnYWJsZS5wcm90b3R5cGUuX2RyYWdTdGFydCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBkcmFnZ2luZ1RhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICB3aGlsZSAoZHJhZ2dpbmdUYXJnZXQgJiYgIWRyYWdnaW5nVGFyZ2V0LmRyYWdnYWJsZSkge1xuICAgICAgICAgICAgZHJhZ2dpbmdUYXJnZXQgPSBkcmFnZ2luZ1RhcmdldC5wYXJlbnQgfHwgZHJhZ2dpbmdUYXJnZXQuX19ob3N0VGFyZ2V0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChkcmFnZ2luZ1RhcmdldCkge1xuICAgICAgICAgICAgdGhpcy5fZHJhZ2dpbmdUYXJnZXQgPSBkcmFnZ2luZ1RhcmdldDtcbiAgICAgICAgICAgIGRyYWdnaW5nVGFyZ2V0LmRyYWdnaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX3ggPSBlLm9mZnNldFg7XG4gICAgICAgICAgICB0aGlzLl95ID0gZS5vZmZzZXRZO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVyLmRpc3BhdGNoVG9FbGVtZW50KG5ldyBQYXJhbShkcmFnZ2luZ1RhcmdldCwgZSksICdkcmFnc3RhcnQnLCBlLmV2ZW50KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRHJhZ2dhYmxlLnByb3RvdHlwZS5fZHJhZyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBkcmFnZ2luZ1RhcmdldCA9IHRoaXMuX2RyYWdnaW5nVGFyZ2V0O1xuICAgICAgICBpZiAoZHJhZ2dpbmdUYXJnZXQpIHtcbiAgICAgICAgICAgIHZhciB4ID0gZS5vZmZzZXRYO1xuICAgICAgICAgICAgdmFyIHkgPSBlLm9mZnNldFk7XG4gICAgICAgICAgICB2YXIgZHggPSB4IC0gdGhpcy5feDtcbiAgICAgICAgICAgIHZhciBkeSA9IHkgLSB0aGlzLl95O1xuICAgICAgICAgICAgdGhpcy5feCA9IHg7XG4gICAgICAgICAgICB0aGlzLl95ID0geTtcbiAgICAgICAgICAgIGRyYWdnaW5nVGFyZ2V0LmRyaWZ0KGR4LCBkeSwgZSk7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZXIuZGlzcGF0Y2hUb0VsZW1lbnQobmV3IFBhcmFtKGRyYWdnaW5nVGFyZ2V0LCBlKSwgJ2RyYWcnLCBlLmV2ZW50KTtcbiAgICAgICAgICAgIHZhciBkcm9wVGFyZ2V0ID0gdGhpcy5oYW5kbGVyLmZpbmRIb3Zlcih4LCB5LCBkcmFnZ2luZ1RhcmdldCkudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGxhc3REcm9wVGFyZ2V0ID0gdGhpcy5fZHJvcFRhcmdldDtcbiAgICAgICAgICAgIHRoaXMuX2Ryb3BUYXJnZXQgPSBkcm9wVGFyZ2V0O1xuICAgICAgICAgICAgaWYgKGRyYWdnaW5nVGFyZ2V0ICE9PSBkcm9wVGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGxhc3REcm9wVGFyZ2V0ICYmIGRyb3BUYXJnZXQgIT09IGxhc3REcm9wVGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlci5kaXNwYXRjaFRvRWxlbWVudChuZXcgUGFyYW0obGFzdERyb3BUYXJnZXQsIGUpLCAnZHJhZ2xlYXZlJywgZS5ldmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkcm9wVGFyZ2V0ICYmIGRyb3BUYXJnZXQgIT09IGxhc3REcm9wVGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlci5kaXNwYXRjaFRvRWxlbWVudChuZXcgUGFyYW0oZHJvcFRhcmdldCwgZSksICdkcmFnZW50ZXInLCBlLmV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERyYWdnYWJsZS5wcm90b3R5cGUuX2RyYWdFbmQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgZHJhZ2dpbmdUYXJnZXQgPSB0aGlzLl9kcmFnZ2luZ1RhcmdldDtcbiAgICAgICAgaWYgKGRyYWdnaW5nVGFyZ2V0KSB7XG4gICAgICAgICAgICBkcmFnZ2luZ1RhcmdldC5kcmFnZ2luZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGFuZGxlci5kaXNwYXRjaFRvRWxlbWVudChuZXcgUGFyYW0oZHJhZ2dpbmdUYXJnZXQsIGUpLCAnZHJhZ2VuZCcsIGUuZXZlbnQpO1xuICAgICAgICBpZiAodGhpcy5fZHJvcFRhcmdldCkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVyLmRpc3BhdGNoVG9FbGVtZW50KG5ldyBQYXJhbSh0aGlzLl9kcm9wVGFyZ2V0LCBlKSwgJ2Ryb3AnLCBlLmV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9kcmFnZ2luZ1RhcmdldCA9IG51bGw7XG4gICAgICAgIHRoaXMuX2Ryb3BUYXJnZXQgPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIERyYWdnYWJsZTtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBEcmFnZ2FibGU7XG4iLCJ2YXIgRXZlbnRmdWwgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEV2ZW50ZnVsKGV2ZW50UHJvY2Vzc29ycykge1xuICAgICAgICBpZiAoZXZlbnRQcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICB0aGlzLl8kZXZlbnRQcm9jZXNzb3IgPSBldmVudFByb2Nlc3NvcnM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgRXZlbnRmdWwucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2ZW50LCBxdWVyeSwgaGFuZGxlciwgY29udGV4dCkge1xuICAgICAgICBpZiAoIXRoaXMuXyRoYW5kbGVycykge1xuICAgICAgICAgICAgdGhpcy5fJGhhbmRsZXJzID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdmFyIF9oID0gdGhpcy5fJGhhbmRsZXJzO1xuICAgICAgICBpZiAodHlwZW9mIHF1ZXJ5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjb250ZXh0ID0gaGFuZGxlcjtcbiAgICAgICAgICAgIGhhbmRsZXIgPSBxdWVyeTtcbiAgICAgICAgICAgIHF1ZXJ5ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWhhbmRsZXIgfHwgIWV2ZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICB2YXIgZXZlbnRQcm9jZXNzb3IgPSB0aGlzLl8kZXZlbnRQcm9jZXNzb3I7XG4gICAgICAgIGlmIChxdWVyeSAhPSBudWxsICYmIGV2ZW50UHJvY2Vzc29yICYmIGV2ZW50UHJvY2Vzc29yLm5vcm1hbGl6ZVF1ZXJ5KSB7XG4gICAgICAgICAgICBxdWVyeSA9IGV2ZW50UHJvY2Vzc29yLm5vcm1hbGl6ZVF1ZXJ5KHF1ZXJ5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIV9oW2V2ZW50XSkge1xuICAgICAgICAgICAgX2hbZXZlbnRdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfaFtldmVudF0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChfaFtldmVudF1baV0uaCA9PT0gaGFuZGxlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciB3cmFwID0ge1xuICAgICAgICAgICAgaDogaGFuZGxlcixcbiAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAgICAgIGN0eDogKGNvbnRleHQgfHwgdGhpcyksXG4gICAgICAgICAgICBjYWxsQXRMYXN0OiBoYW5kbGVyLnpyRXZlbnRmdWxDYWxsQXRMYXN0XG4gICAgICAgIH07XG4gICAgICAgIHZhciBsYXN0SW5kZXggPSBfaFtldmVudF0ubGVuZ3RoIC0gMTtcbiAgICAgICAgdmFyIGxhc3RXcmFwID0gX2hbZXZlbnRdW2xhc3RJbmRleF07XG4gICAgICAgIChsYXN0V3JhcCAmJiBsYXN0V3JhcC5jYWxsQXRMYXN0KVxuICAgICAgICAgICAgPyBfaFtldmVudF0uc3BsaWNlKGxhc3RJbmRleCwgMCwgd3JhcClcbiAgICAgICAgICAgIDogX2hbZXZlbnRdLnB1c2god3JhcCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgRXZlbnRmdWwucHJvdG90eXBlLmlzU2lsZW50ID0gZnVuY3Rpb24gKGV2ZW50TmFtZSkge1xuICAgICAgICB2YXIgX2ggPSB0aGlzLl8kaGFuZGxlcnM7XG4gICAgICAgIHJldHVybiAhX2ggfHwgIV9oW2V2ZW50TmFtZV0gfHwgIV9oW2V2ZW50TmFtZV0ubGVuZ3RoO1xuICAgIH07XG4gICAgRXZlbnRmdWwucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uIChldmVudFR5cGUsIGhhbmRsZXIpIHtcbiAgICAgICAgdmFyIF9oID0gdGhpcy5fJGhhbmRsZXJzO1xuICAgICAgICBpZiAoIV9oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWV2ZW50VHlwZSkge1xuICAgICAgICAgICAgdGhpcy5fJGhhbmRsZXJzID0ge307XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFuZGxlcikge1xuICAgICAgICAgICAgaWYgKF9oW2V2ZW50VHlwZV0pIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV3TGlzdCA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gX2hbZXZlbnRUeXBlXS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9oW2V2ZW50VHlwZV1baV0uaCAhPT0gaGFuZGxlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3TGlzdC5wdXNoKF9oW2V2ZW50VHlwZV1baV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF9oW2V2ZW50VHlwZV0gPSBuZXdMaXN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKF9oW2V2ZW50VHlwZV0gJiYgX2hbZXZlbnRUeXBlXS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgX2hbZXZlbnRUeXBlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRlbGV0ZSBfaFtldmVudFR5cGVdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgRXZlbnRmdWwucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbiAoZXZlbnRUeXBlKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fJGhhbmRsZXJzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICB2YXIgX2ggPSB0aGlzLl8kaGFuZGxlcnNbZXZlbnRUeXBlXTtcbiAgICAgICAgdmFyIGV2ZW50UHJvY2Vzc29yID0gdGhpcy5fJGV2ZW50UHJvY2Vzc29yO1xuICAgICAgICBpZiAoX2gpIHtcbiAgICAgICAgICAgIHZhciBhcmdMZW4gPSBhcmdzLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBsZW4gPSBfaC5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGhJdGVtID0gX2hbaV07XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50UHJvY2Vzc29yXG4gICAgICAgICAgICAgICAgICAgICYmIGV2ZW50UHJvY2Vzc29yLmZpbHRlclxuICAgICAgICAgICAgICAgICAgICAmJiBoSXRlbS5xdWVyeSAhPSBudWxsXG4gICAgICAgICAgICAgICAgICAgICYmICFldmVudFByb2Nlc3Nvci5maWx0ZXIoZXZlbnRUeXBlLCBoSXRlbS5xdWVyeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN3aXRjaCAoYXJnTGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGhJdGVtLmguY2FsbChoSXRlbS5jdHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGhJdGVtLmguY2FsbChoSXRlbS5jdHgsIGFyZ3NbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGhJdGVtLmguY2FsbChoSXRlbS5jdHgsIGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBoSXRlbS5oLmFwcGx5KGhJdGVtLmN0eCwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZXZlbnRQcm9jZXNzb3IgJiYgZXZlbnRQcm9jZXNzb3IuYWZ0ZXJUcmlnZ2VyXG4gICAgICAgICAgICAmJiBldmVudFByb2Nlc3Nvci5hZnRlclRyaWdnZXIoZXZlbnRUeXBlKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBFdmVudGZ1bC5wcm90b3R5cGUudHJpZ2dlcldpdGhDb250ZXh0ID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl8kaGFuZGxlcnMpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfaCA9IHRoaXMuXyRoYW5kbGVyc1t0eXBlXTtcbiAgICAgICAgdmFyIGV2ZW50UHJvY2Vzc29yID0gdGhpcy5fJGV2ZW50UHJvY2Vzc29yO1xuICAgICAgICBpZiAoX2gpIHtcbiAgICAgICAgICAgIHZhciBhcmdMZW4gPSBhcmdzLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBjdHggPSBhcmdzW2FyZ0xlbiAtIDFdO1xuICAgICAgICAgICAgdmFyIGxlbiA9IF9oLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaEl0ZW0gPSBfaFtpXTtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRQcm9jZXNzb3JcbiAgICAgICAgICAgICAgICAgICAgJiYgZXZlbnRQcm9jZXNzb3IuZmlsdGVyXG4gICAgICAgICAgICAgICAgICAgICYmIGhJdGVtLnF1ZXJ5ICE9IG51bGxcbiAgICAgICAgICAgICAgICAgICAgJiYgIWV2ZW50UHJvY2Vzc29yLmZpbHRlcih0eXBlLCBoSXRlbS5xdWVyeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN3aXRjaCAoYXJnTGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGhJdGVtLmguY2FsbChjdHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGhJdGVtLmguY2FsbChjdHgsIGFyZ3NbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGhJdGVtLmguY2FsbChjdHgsIGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBoSXRlbS5oLmFwcGx5KGN0eCwgYXJncy5zbGljZSgxLCBhcmdMZW4gLSAxKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZXZlbnRQcm9jZXNzb3IgJiYgZXZlbnRQcm9jZXNzb3IuYWZ0ZXJUcmlnZ2VyXG4gICAgICAgICAgICAmJiBldmVudFByb2Nlc3Nvci5hZnRlclRyaWdnZXIodHlwZSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgcmV0dXJuIEV2ZW50ZnVsO1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IEV2ZW50ZnVsO1xuIiwidmFyIExOMiA9IE1hdGgubG9nKDIpO1xuZnVuY3Rpb24gZGV0ZXJtaW5hbnQocm93cywgcmFuaywgcm93U3RhcnQsIHJvd01hc2ssIGNvbE1hc2ssIGRldENhY2hlKSB7XG4gICAgdmFyIGNhY2hlS2V5ID0gcm93TWFzayArICctJyArIGNvbE1hc2s7XG4gICAgdmFyIGZ1bGxSYW5rID0gcm93cy5sZW5ndGg7XG4gICAgaWYgKGRldENhY2hlLmhhc093blByb3BlcnR5KGNhY2hlS2V5KSkge1xuICAgICAgICByZXR1cm4gZGV0Q2FjaGVbY2FjaGVLZXldO1xuICAgIH1cbiAgICBpZiAocmFuayA9PT0gMSkge1xuICAgICAgICB2YXIgY29sU3RhcnQgPSBNYXRoLnJvdW5kKE1hdGgubG9nKCgoMSA8PCBmdWxsUmFuaykgLSAxKSAmIH5jb2xNYXNrKSAvIExOMik7XG4gICAgICAgIHJldHVybiByb3dzW3Jvd1N0YXJ0XVtjb2xTdGFydF07XG4gICAgfVxuICAgIHZhciBzdWJSb3dNYXNrID0gcm93TWFzayB8ICgxIDw8IHJvd1N0YXJ0KTtcbiAgICB2YXIgc3ViUm93U3RhcnQgPSByb3dTdGFydCArIDE7XG4gICAgd2hpbGUgKHJvd01hc2sgJiAoMSA8PCBzdWJSb3dTdGFydCkpIHtcbiAgICAgICAgc3ViUm93U3RhcnQrKztcbiAgICB9XG4gICAgdmFyIHN1bSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IDAsIGNvbExvY2FsSWR4ID0gMDsgaiA8IGZ1bGxSYW5rOyBqKyspIHtcbiAgICAgICAgdmFyIGNvbFRhZyA9IDEgPDwgajtcbiAgICAgICAgaWYgKCEoY29sVGFnICYgY29sTWFzaykpIHtcbiAgICAgICAgICAgIHN1bSArPSAoY29sTG9jYWxJZHggJSAyID8gLTEgOiAxKSAqIHJvd3Nbcm93U3RhcnRdW2pdXG4gICAgICAgICAgICAgICAgKiBkZXRlcm1pbmFudChyb3dzLCByYW5rIC0gMSwgc3ViUm93U3RhcnQsIHN1YlJvd01hc2ssIGNvbE1hc2sgfCBjb2xUYWcsIGRldENhY2hlKTtcbiAgICAgICAgICAgIGNvbExvY2FsSWR4Kys7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGV0Q2FjaGVbY2FjaGVLZXldID0gc3VtO1xuICAgIHJldHVybiBzdW07XG59XG5leHBvcnQgZnVuY3Rpb24gYnVpbGRUcmFuc2Zvcm1lcihzcmMsIGRlc3QpIHtcbiAgICB2YXIgbUEgPSBbXG4gICAgICAgIFtzcmNbMF0sIHNyY1sxXSwgMSwgMCwgMCwgMCwgLWRlc3RbMF0gKiBzcmNbMF0sIC1kZXN0WzBdICogc3JjWzFdXSxcbiAgICAgICAgWzAsIDAsIDAsIHNyY1swXSwgc3JjWzFdLCAxLCAtZGVzdFsxXSAqIHNyY1swXSwgLWRlc3RbMV0gKiBzcmNbMV1dLFxuICAgICAgICBbc3JjWzJdLCBzcmNbM10sIDEsIDAsIDAsIDAsIC1kZXN0WzJdICogc3JjWzJdLCAtZGVzdFsyXSAqIHNyY1szXV0sXG4gICAgICAgIFswLCAwLCAwLCBzcmNbMl0sIHNyY1szXSwgMSwgLWRlc3RbM10gKiBzcmNbMl0sIC1kZXN0WzNdICogc3JjWzNdXSxcbiAgICAgICAgW3NyY1s0XSwgc3JjWzVdLCAxLCAwLCAwLCAwLCAtZGVzdFs0XSAqIHNyY1s0XSwgLWRlc3RbNF0gKiBzcmNbNV1dLFxuICAgICAgICBbMCwgMCwgMCwgc3JjWzRdLCBzcmNbNV0sIDEsIC1kZXN0WzVdICogc3JjWzRdLCAtZGVzdFs1XSAqIHNyY1s1XV0sXG4gICAgICAgIFtzcmNbNl0sIHNyY1s3XSwgMSwgMCwgMCwgMCwgLWRlc3RbNl0gKiBzcmNbNl0sIC1kZXN0WzZdICogc3JjWzddXSxcbiAgICAgICAgWzAsIDAsIDAsIHNyY1s2XSwgc3JjWzddLCAxLCAtZGVzdFs3XSAqIHNyY1s2XSwgLWRlc3RbN10gKiBzcmNbN11dXG4gICAgXTtcbiAgICB2YXIgZGV0Q2FjaGUgPSB7fTtcbiAgICB2YXIgZGV0ID0gZGV0ZXJtaW5hbnQobUEsIDgsIDAsIDAsIDAsIGRldENhY2hlKTtcbiAgICBpZiAoZGV0ID09PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHZoID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCA4OyBpKyspIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHtcbiAgICAgICAgICAgIHZoW2pdID09IG51bGwgJiYgKHZoW2pdID0gMCk7XG4gICAgICAgICAgICB2aFtqXSArPSAoKGkgKyBqKSAlIDIgPyAtMSA6IDEpXG4gICAgICAgICAgICAgICAgKiBkZXRlcm1pbmFudChtQSwgNywgaSA9PT0gMCA/IDEgOiAwLCAxIDw8IGksIDEgPDwgaiwgZGV0Q2FjaGUpXG4gICAgICAgICAgICAgICAgLyBkZXQgKiBkZXN0W2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAob3V0LCBzcmNQb2ludFgsIHNyY1BvaW50WSkge1xuICAgICAgICB2YXIgcGsgPSBzcmNQb2ludFggKiB2aFs2XSArIHNyY1BvaW50WSAqIHZoWzddICsgMTtcbiAgICAgICAgb3V0WzBdID0gKHNyY1BvaW50WCAqIHZoWzBdICsgc3JjUG9pbnRZICogdmhbMV0gKyB2aFsyXSkgLyBwaztcbiAgICAgICAgb3V0WzFdID0gKHNyY1BvaW50WCAqIHZoWzNdICsgc3JjUG9pbnRZICogdmhbNF0gKyB2aFs1XSkgLyBwaztcbiAgICB9O1xufVxuIiwiaW1wb3J0IGVudiBmcm9tICcuL2Vudi5qcyc7XG5pbXBvcnQgeyBidWlsZFRyYW5zZm9ybWVyIH0gZnJvbSAnLi9mb3VyUG9pbnRzVHJhbnNmb3JtLmpzJztcbnZhciBFVkVOVF9TQVZFRF9QUk9QID0gJ19fX3pyRVZFTlRTQVZFRCc7XG52YXIgX2NhbGNPdXQgPSBbXTtcbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1Mb2NhbENvb3JkKG91dCwgZWxGcm9tLCBlbFRhcmdldCwgaW5YLCBpblkpIHtcbiAgICByZXR1cm4gdHJhbnNmb3JtQ29vcmRXaXRoVmlld3BvcnQoX2NhbGNPdXQsIGVsRnJvbSwgaW5YLCBpblksIHRydWUpXG4gICAgICAgICYmIHRyYW5zZm9ybUNvb3JkV2l0aFZpZXdwb3J0KG91dCwgZWxUYXJnZXQsIF9jYWxjT3V0WzBdLCBfY2FsY091dFsxXSk7XG59XG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtQ29vcmRXaXRoVmlld3BvcnQob3V0LCBlbCwgaW5YLCBpblksIGludmVyc2UpIHtcbiAgICBpZiAoZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0ICYmIGVudi5kb21TdXBwb3J0ZWQgJiYgIWlzQ2FudmFzRWwoZWwpKSB7XG4gICAgICAgIHZhciBzYXZlZCA9IGVsW0VWRU5UX1NBVkVEX1BST1BdIHx8IChlbFtFVkVOVF9TQVZFRF9QUk9QXSA9IHt9KTtcbiAgICAgICAgdmFyIG1hcmtlcnMgPSBwcmVwYXJlQ29vcmRNYXJrZXJzKGVsLCBzYXZlZCk7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1lciA9IHByZXBhcmVQb2ludGVyVHJhbnNmb3JtZXIobWFya2Vycywgc2F2ZWQsIGludmVyc2UpO1xuICAgICAgICBpZiAodHJhbnNmb3JtZXIpIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybWVyKG91dCwgaW5YLCBpblkpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gcHJlcGFyZUNvb3JkTWFya2VycyhlbCwgc2F2ZWQpIHtcbiAgICB2YXIgbWFya2VycyA9IHNhdmVkLm1hcmtlcnM7XG4gICAgaWYgKG1hcmtlcnMpIHtcbiAgICAgICAgcmV0dXJuIG1hcmtlcnM7XG4gICAgfVxuICAgIG1hcmtlcnMgPSBzYXZlZC5tYXJrZXJzID0gW107XG4gICAgdmFyIHByb3BMUiA9IFsnbGVmdCcsICdyaWdodCddO1xuICAgIHZhciBwcm9wVEIgPSBbJ3RvcCcsICdib3R0b20nXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICB2YXIgbWFya2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHZhciBzdGwgPSBtYXJrZXIuc3R5bGU7XG4gICAgICAgIHZhciBpZHhMUiA9IGkgJSAyO1xuICAgICAgICB2YXIgaWR4VEIgPSAoaSA+PiAxKSAlIDI7XG4gICAgICAgIHN0bC5jc3NUZXh0ID0gW1xuICAgICAgICAgICAgJ3Bvc2l0aW9uOiBhYnNvbHV0ZScsXG4gICAgICAgICAgICAndmlzaWJpbGl0eTogaGlkZGVuJyxcbiAgICAgICAgICAgICdwYWRkaW5nOiAwJyxcbiAgICAgICAgICAgICdtYXJnaW46IDAnLFxuICAgICAgICAgICAgJ2JvcmRlci13aWR0aDogMCcsXG4gICAgICAgICAgICAndXNlci1zZWxlY3Q6IG5vbmUnLFxuICAgICAgICAgICAgJ3dpZHRoOjAnLFxuICAgICAgICAgICAgJ2hlaWdodDowJyxcbiAgICAgICAgICAgIHByb3BMUltpZHhMUl0gKyAnOjAnLFxuICAgICAgICAgICAgcHJvcFRCW2lkeFRCXSArICc6MCcsXG4gICAgICAgICAgICBwcm9wTFJbMSAtIGlkeExSXSArICc6YXV0bycsXG4gICAgICAgICAgICBwcm9wVEJbMSAtIGlkeFRCXSArICc6YXV0bycsXG4gICAgICAgICAgICAnJ1xuICAgICAgICBdLmpvaW4oJyFpbXBvcnRhbnQ7Jyk7XG4gICAgICAgIGVsLmFwcGVuZENoaWxkKG1hcmtlcik7XG4gICAgICAgIG1hcmtlcnMucHVzaChtYXJrZXIpO1xuICAgIH1cbiAgICByZXR1cm4gbWFya2Vycztcbn1cbmZ1bmN0aW9uIHByZXBhcmVQb2ludGVyVHJhbnNmb3JtZXIobWFya2Vycywgc2F2ZWQsIGludmVyc2UpIHtcbiAgICB2YXIgdHJhbnNmb3JtZXJOYW1lID0gaW52ZXJzZSA/ICdpbnZUcmFucycgOiAndHJhbnMnO1xuICAgIHZhciB0cmFuc2Zvcm1lciA9IHNhdmVkW3RyYW5zZm9ybWVyTmFtZV07XG4gICAgdmFyIG9sZFNyY0Nvb3JkcyA9IHNhdmVkLnNyY0Nvb3JkcztcbiAgICB2YXIgc3JjQ29vcmRzID0gW107XG4gICAgdmFyIGRlc3RDb29yZHMgPSBbXTtcbiAgICB2YXIgb2xkQ29vcmRUaGVTYW1lID0gdHJ1ZTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICB2YXIgcmVjdCA9IG1hcmtlcnNbaV0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHZhciBpaSA9IDIgKiBpO1xuICAgICAgICB2YXIgeCA9IHJlY3QubGVmdDtcbiAgICAgICAgdmFyIHkgPSByZWN0LnRvcDtcbiAgICAgICAgc3JjQ29vcmRzLnB1c2goeCwgeSk7XG4gICAgICAgIG9sZENvb3JkVGhlU2FtZSA9IG9sZENvb3JkVGhlU2FtZSAmJiBvbGRTcmNDb29yZHMgJiYgeCA9PT0gb2xkU3JjQ29vcmRzW2lpXSAmJiB5ID09PSBvbGRTcmNDb29yZHNbaWkgKyAxXTtcbiAgICAgICAgZGVzdENvb3Jkcy5wdXNoKG1hcmtlcnNbaV0ub2Zmc2V0TGVmdCwgbWFya2Vyc1tpXS5vZmZzZXRUb3ApO1xuICAgIH1cbiAgICByZXR1cm4gKG9sZENvb3JkVGhlU2FtZSAmJiB0cmFuc2Zvcm1lcilcbiAgICAgICAgPyB0cmFuc2Zvcm1lclxuICAgICAgICA6IChzYXZlZC5zcmNDb29yZHMgPSBzcmNDb29yZHMsXG4gICAgICAgICAgICBzYXZlZFt0cmFuc2Zvcm1lck5hbWVdID0gaW52ZXJzZVxuICAgICAgICAgICAgICAgID8gYnVpbGRUcmFuc2Zvcm1lcihkZXN0Q29vcmRzLCBzcmNDb29yZHMpXG4gICAgICAgICAgICAgICAgOiBidWlsZFRyYW5zZm9ybWVyKHNyY0Nvb3JkcywgZGVzdENvb3JkcykpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQ2FudmFzRWwoZWwpIHtcbiAgICByZXR1cm4gZWwubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gJ0NBTlZBUyc7XG59XG52YXIgcmVwbGFjZVJlZyA9IC8oWyY8PlwiJ10pL2c7XG52YXIgcmVwbGFjZU1hcCA9IHtcbiAgICAnJic6ICcmYW1wOycsXG4gICAgJzwnOiAnJmx0OycsXG4gICAgJz4nOiAnJmd0OycsXG4gICAgJ1wiJzogJyZxdW90OycsXG4gICAgJ1xcJyc6ICcmIzM5Oydcbn07XG5leHBvcnQgZnVuY3Rpb24gZW5jb2RlSFRNTChzb3VyY2UpIHtcbiAgICByZXR1cm4gc291cmNlID09IG51bGxcbiAgICAgICAgPyAnJ1xuICAgICAgICA6IChzb3VyY2UgKyAnJykucmVwbGFjZShyZXBsYWNlUmVnLCBmdW5jdGlvbiAoc3RyLCBjKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVwbGFjZU1hcFtjXTtcbiAgICAgICAgfSk7XG59XG4iLCJpbXBvcnQgRXZlbnRmdWwgZnJvbSAnLi9FdmVudGZ1bC5qcyc7XG5pbXBvcnQgZW52IGZyb20gJy4vZW52LmpzJztcbmltcG9ydCB7IGlzQ2FudmFzRWwsIHRyYW5zZm9ybUNvb3JkV2l0aFZpZXdwb3J0IH0gZnJvbSAnLi9kb20uanMnO1xudmFyIE1PVVNFX0VWRU5UX1JFRyA9IC9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudXxkcmFnfGRyb3ApfGNsaWNrLztcbnZhciBfY2FsY091dCA9IFtdO1xudmFyIGZpcmVmb3hOb3RTdXBwb3J0T2Zmc2V0WFkgPSBlbnYuYnJvd3Nlci5maXJlZm94XG4gICAgJiYgK2Vudi5icm93c2VyLnZlcnNpb24uc3BsaXQoJy4nKVswXSA8IDM5O1xuZXhwb3J0IGZ1bmN0aW9uIGNsaWVudFRvTG9jYWwoZWwsIGUsIG91dCwgY2FsY3VsYXRlKSB7XG4gICAgb3V0ID0gb3V0IHx8IHt9O1xuICAgIGlmIChjYWxjdWxhdGUpIHtcbiAgICAgICAgY2FsY3VsYXRlWnJYWShlbCwgZSwgb3V0KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZmlyZWZveE5vdFN1cHBvcnRPZmZzZXRYWVxuICAgICAgICAmJiBlLmxheWVyWCAhPSBudWxsXG4gICAgICAgICYmIGUubGF5ZXJYICE9PSBlLm9mZnNldFgpIHtcbiAgICAgICAgb3V0LnpyWCA9IGUubGF5ZXJYO1xuICAgICAgICBvdXQuenJZID0gZS5sYXllclk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGUub2Zmc2V0WCAhPSBudWxsKSB7XG4gICAgICAgIG91dC56clggPSBlLm9mZnNldFg7XG4gICAgICAgIG91dC56clkgPSBlLm9mZnNldFk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjYWxjdWxhdGVaclhZKGVsLCBlLCBvdXQpO1xuICAgIH1cbiAgICByZXR1cm4gb3V0O1xufVxuZnVuY3Rpb24gY2FsY3VsYXRlWnJYWShlbCwgZSwgb3V0KSB7XG4gICAgaWYgKGVudi5kb21TdXBwb3J0ZWQgJiYgZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KSB7XG4gICAgICAgIHZhciBleCA9IGUuY2xpZW50WDtcbiAgICAgICAgdmFyIGV5ID0gZS5jbGllbnRZO1xuICAgICAgICBpZiAoaXNDYW52YXNFbChlbCkpIHtcbiAgICAgICAgICAgIHZhciBib3ggPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIG91dC56clggPSBleCAtIGJveC5sZWZ0O1xuICAgICAgICAgICAgb3V0LnpyWSA9IGV5IC0gYm94LnRvcDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0cmFuc2Zvcm1Db29yZFdpdGhWaWV3cG9ydChfY2FsY091dCwgZWwsIGV4LCBleSkpIHtcbiAgICAgICAgICAgICAgICBvdXQuenJYID0gX2NhbGNPdXRbMF07XG4gICAgICAgICAgICAgICAgb3V0LnpyWSA9IF9jYWxjT3V0WzFdO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBvdXQuenJYID0gb3V0LnpyWSA9IDA7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0TmF0aXZlRXZlbnQoZSkge1xuICAgIHJldHVybiBlXG4gICAgICAgIHx8IHdpbmRvdy5ldmVudDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVFdmVudChlbCwgZSwgY2FsY3VsYXRlKSB7XG4gICAgZSA9IGdldE5hdGl2ZUV2ZW50KGUpO1xuICAgIGlmIChlLnpyWCAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICB2YXIgZXZlbnRUeXBlID0gZS50eXBlO1xuICAgIHZhciBpc1RvdWNoID0gZXZlbnRUeXBlICYmIGV2ZW50VHlwZS5pbmRleE9mKCd0b3VjaCcpID49IDA7XG4gICAgaWYgKCFpc1RvdWNoKSB7XG4gICAgICAgIGNsaWVudFRvTG9jYWwoZWwsIGUsIGUsIGNhbGN1bGF0ZSk7XG4gICAgICAgIHZhciB3aGVlbERlbHRhID0gZ2V0V2hlZWxEZWx0YU1heVBvbHlmaWxsKGUpO1xuICAgICAgICBlLnpyRGVsdGEgPSB3aGVlbERlbHRhID8gd2hlZWxEZWx0YSAvIDEyMCA6IC0oZS5kZXRhaWwgfHwgMCkgLyAzO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIHRvdWNoID0gZXZlbnRUeXBlICE9PSAndG91Y2hlbmQnXG4gICAgICAgICAgICA/IGUudGFyZ2V0VG91Y2hlc1swXVxuICAgICAgICAgICAgOiBlLmNoYW5nZWRUb3VjaGVzWzBdO1xuICAgICAgICB0b3VjaCAmJiBjbGllbnRUb0xvY2FsKGVsLCB0b3VjaCwgZSwgY2FsY3VsYXRlKTtcbiAgICB9XG4gICAgdmFyIGJ1dHRvbiA9IGUuYnV0dG9uO1xuICAgIGlmIChlLndoaWNoID09IG51bGwgJiYgYnV0dG9uICE9PSB1bmRlZmluZWQgJiYgTU9VU0VfRVZFTlRfUkVHLnRlc3QoZS50eXBlKSkge1xuICAgICAgICBlLndoaWNoID0gKGJ1dHRvbiAmIDEgPyAxIDogKGJ1dHRvbiAmIDIgPyAzIDogKGJ1dHRvbiAmIDQgPyAyIDogMCkpKTtcbiAgICB9XG4gICAgcmV0dXJuIGU7XG59XG5mdW5jdGlvbiBnZXRXaGVlbERlbHRhTWF5UG9seWZpbGwoZSkge1xuICAgIHZhciByYXdXaGVlbERlbHRhID0gZS53aGVlbERlbHRhO1xuICAgIGlmIChyYXdXaGVlbERlbHRhKSB7XG4gICAgICAgIHJldHVybiByYXdXaGVlbERlbHRhO1xuICAgIH1cbiAgICB2YXIgZGVsdGFYID0gZS5kZWx0YVg7XG4gICAgdmFyIGRlbHRhWSA9IGUuZGVsdGFZO1xuICAgIGlmIChkZWx0YVggPT0gbnVsbCB8fCBkZWx0YVkgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gcmF3V2hlZWxEZWx0YTtcbiAgICB9XG4gICAgdmFyIGRlbHRhID0gZGVsdGFZICE9PSAwID8gTWF0aC5hYnMoZGVsdGFZKSA6IE1hdGguYWJzKGRlbHRhWCk7XG4gICAgdmFyIHNpZ24gPSBkZWx0YVkgPiAwID8gLTFcbiAgICAgICAgOiBkZWx0YVkgPCAwID8gMVxuICAgICAgICAgICAgOiBkZWx0YVggPiAwID8gLTFcbiAgICAgICAgICAgICAgICA6IDE7XG4gICAgcmV0dXJuIDMgKiBkZWx0YSAqIHNpZ247XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihlbCwgbmFtZSwgaGFuZGxlciwgb3B0KSB7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihuYW1lLCBoYW5kbGVyLCBvcHQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXIoZWwsIG5hbWUsIGhhbmRsZXIsIG9wdCkge1xuICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSwgaGFuZGxlciwgb3B0KTtcbn1cbmV4cG9ydCB2YXIgc3RvcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBpc01pZGRsZU9yUmlnaHRCdXR0b25Pbk1vdXNlVXBEb3duKGUpIHtcbiAgICByZXR1cm4gZS53aGljaCA9PT0gMiB8fCBlLndoaWNoID09PSAzO1xufVxuZXhwb3J0IHsgRXZlbnRmdWwgYXMgRGlzcGF0Y2hlciB9O1xuIiwiaW1wb3J0ICogYXMgZXZlbnRVdGlsIGZyb20gJy4vZXZlbnQuanMnO1xudmFyIEdlc3R1cmVNZ3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEdlc3R1cmVNZ3IoKSB7XG4gICAgICAgIHRoaXMuX3RyYWNrID0gW107XG4gICAgfVxuICAgIEdlc3R1cmVNZ3IucHJvdG90eXBlLnJlY29nbml6ZSA9IGZ1bmN0aW9uIChldmVudCwgdGFyZ2V0LCByb290KSB7XG4gICAgICAgIHRoaXMuX2RvVHJhY2soZXZlbnQsIHRhcmdldCwgcm9vdCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWNvZ25pemUoZXZlbnQpO1xuICAgIH07XG4gICAgR2VzdHVyZU1nci5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3RyYWNrLmxlbmd0aCA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgR2VzdHVyZU1nci5wcm90b3R5cGUuX2RvVHJhY2sgPSBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCwgcm9vdCkge1xuICAgICAgICB2YXIgdG91Y2hlcyA9IGV2ZW50LnRvdWNoZXM7XG4gICAgICAgIGlmICghdG91Y2hlcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0cmFja0l0ZW0gPSB7XG4gICAgICAgICAgICBwb2ludHM6IFtdLFxuICAgICAgICAgICAgdG91Y2hlczogW10sXG4gICAgICAgICAgICB0YXJnZXQ6IHRhcmdldCxcbiAgICAgICAgICAgIGV2ZW50OiBldmVudFxuICAgICAgICB9O1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdG91Y2hlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdmFyIHRvdWNoID0gdG91Y2hlc1tpXTtcbiAgICAgICAgICAgIHZhciBwb3MgPSBldmVudFV0aWwuY2xpZW50VG9Mb2NhbChyb290LCB0b3VjaCwge30pO1xuICAgICAgICAgICAgdHJhY2tJdGVtLnBvaW50cy5wdXNoKFtwb3MuenJYLCBwb3MuenJZXSk7XG4gICAgICAgICAgICB0cmFja0l0ZW0udG91Y2hlcy5wdXNoKHRvdWNoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl90cmFjay5wdXNoKHRyYWNrSXRlbSk7XG4gICAgfTtcbiAgICBHZXN0dXJlTWdyLnByb3RvdHlwZS5fcmVjb2duaXplID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGZvciAodmFyIGV2ZW50TmFtZSBpbiByZWNvZ25pemVycykge1xuICAgICAgICAgICAgaWYgKHJlY29nbml6ZXJzLmhhc093blByb3BlcnR5KGV2ZW50TmFtZSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ2VzdHVyZUluZm8gPSByZWNvZ25pemVyc1tldmVudE5hbWVdKHRoaXMuX3RyYWNrLCBldmVudCk7XG4gICAgICAgICAgICAgICAgaWYgKGdlc3R1cmVJbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXN0dXJlSW5mbztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBHZXN0dXJlTWdyO1xufSgpKTtcbmV4cG9ydCB7IEdlc3R1cmVNZ3IgfTtcbmZ1bmN0aW9uIGRpc3QocG9pbnRQYWlyKSB7XG4gICAgdmFyIGR4ID0gcG9pbnRQYWlyWzFdWzBdIC0gcG9pbnRQYWlyWzBdWzBdO1xuICAgIHZhciBkeSA9IHBvaW50UGFpclsxXVsxXSAtIHBvaW50UGFpclswXVsxXTtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbn1cbmZ1bmN0aW9uIGNlbnRlcihwb2ludFBhaXIpIHtcbiAgICByZXR1cm4gW1xuICAgICAgICAocG9pbnRQYWlyWzBdWzBdICsgcG9pbnRQYWlyWzFdWzBdKSAvIDIsXG4gICAgICAgIChwb2ludFBhaXJbMF1bMV0gKyBwb2ludFBhaXJbMV1bMV0pIC8gMlxuICAgIF07XG59XG52YXIgcmVjb2duaXplcnMgPSB7XG4gICAgcGluY2g6IGZ1bmN0aW9uICh0cmFja3MsIGV2ZW50KSB7XG4gICAgICAgIHZhciB0cmFja0xlbiA9IHRyYWNrcy5sZW5ndGg7XG4gICAgICAgIGlmICghdHJhY2tMZW4pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGluY2hFbmQgPSAodHJhY2tzW3RyYWNrTGVuIC0gMV0gfHwge30pLnBvaW50cztcbiAgICAgICAgdmFyIHBpbmNoUHJlID0gKHRyYWNrc1t0cmFja0xlbiAtIDJdIHx8IHt9KS5wb2ludHMgfHwgcGluY2hFbmQ7XG4gICAgICAgIGlmIChwaW5jaFByZVxuICAgICAgICAgICAgJiYgcGluY2hQcmUubGVuZ3RoID4gMVxuICAgICAgICAgICAgJiYgcGluY2hFbmRcbiAgICAgICAgICAgICYmIHBpbmNoRW5kLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHZhciBwaW5jaFNjYWxlID0gZGlzdChwaW5jaEVuZCkgLyBkaXN0KHBpbmNoUHJlKTtcbiAgICAgICAgICAgICFpc0Zpbml0ZShwaW5jaFNjYWxlKSAmJiAocGluY2hTY2FsZSA9IDEpO1xuICAgICAgICAgICAgZXZlbnQucGluY2hTY2FsZSA9IHBpbmNoU2NhbGU7XG4gICAgICAgICAgICB2YXIgcGluY2hDZW50ZXIgPSBjZW50ZXIocGluY2hFbmQpO1xuICAgICAgICAgICAgZXZlbnQucGluY2hYID0gcGluY2hDZW50ZXJbMF07XG4gICAgICAgICAgICBldmVudC5waW5jaFkgPSBwaW5jaENlbnRlclsxXTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3BpbmNoJyxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRyYWNrc1swXS50YXJnZXQsXG4gICAgICAgICAgICAgICAgZXZlbnQ6IGV2ZW50XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxufTtcbiIsImV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgcmV0dXJuIFsxLCAwLCAwLCAxLCAwLCAwXTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpZGVudGl0eShvdXQpIHtcbiAgICBvdXRbMF0gPSAxO1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgICBvdXRbM10gPSAxO1xuICAgIG91dFs0XSA9IDA7XG4gICAgb3V0WzVdID0gMDtcbiAgICByZXR1cm4gb3V0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNvcHkob3V0LCBtKSB7XG4gICAgb3V0WzBdID0gbVswXTtcbiAgICBvdXRbMV0gPSBtWzFdO1xuICAgIG91dFsyXSA9IG1bMl07XG4gICAgb3V0WzNdID0gbVszXTtcbiAgICBvdXRbNF0gPSBtWzRdO1xuICAgIG91dFs1XSA9IG1bNV07XG4gICAgcmV0dXJuIG91dDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtdWwob3V0LCBtMSwgbTIpIHtcbiAgICB2YXIgb3V0MCA9IG0xWzBdICogbTJbMF0gKyBtMVsyXSAqIG0yWzFdO1xuICAgIHZhciBvdXQxID0gbTFbMV0gKiBtMlswXSArIG0xWzNdICogbTJbMV07XG4gICAgdmFyIG91dDIgPSBtMVswXSAqIG0yWzJdICsgbTFbMl0gKiBtMlszXTtcbiAgICB2YXIgb3V0MyA9IG0xWzFdICogbTJbMl0gKyBtMVszXSAqIG0yWzNdO1xuICAgIHZhciBvdXQ0ID0gbTFbMF0gKiBtMls0XSArIG0xWzJdICogbTJbNV0gKyBtMVs0XTtcbiAgICB2YXIgb3V0NSA9IG0xWzFdICogbTJbNF0gKyBtMVszXSAqIG0yWzVdICsgbTFbNV07XG4gICAgb3V0WzBdID0gb3V0MDtcbiAgICBvdXRbMV0gPSBvdXQxO1xuICAgIG91dFsyXSA9IG91dDI7XG4gICAgb3V0WzNdID0gb3V0MztcbiAgICBvdXRbNF0gPSBvdXQ0O1xuICAgIG91dFs1XSA9IG91dDU7XG4gICAgcmV0dXJuIG91dDtcbn1cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGUob3V0LCBhLCB2KSB7XG4gICAgb3V0WzBdID0gYVswXTtcbiAgICBvdXRbMV0gPSBhWzFdO1xuICAgIG91dFsyXSA9IGFbMl07XG4gICAgb3V0WzNdID0gYVszXTtcbiAgICBvdXRbNF0gPSBhWzRdICsgdlswXTtcbiAgICBvdXRbNV0gPSBhWzVdICsgdlsxXTtcbiAgICByZXR1cm4gb3V0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZShvdXQsIGEsIHJhZCkge1xuICAgIHZhciBhYSA9IGFbMF07XG4gICAgdmFyIGFjID0gYVsyXTtcbiAgICB2YXIgYXR4ID0gYVs0XTtcbiAgICB2YXIgYWIgPSBhWzFdO1xuICAgIHZhciBhZCA9IGFbM107XG4gICAgdmFyIGF0eSA9IGFbNV07XG4gICAgdmFyIHN0ID0gTWF0aC5zaW4ocmFkKTtcbiAgICB2YXIgY3QgPSBNYXRoLmNvcyhyYWQpO1xuICAgIG91dFswXSA9IGFhICogY3QgKyBhYiAqIHN0O1xuICAgIG91dFsxXSA9IC1hYSAqIHN0ICsgYWIgKiBjdDtcbiAgICBvdXRbMl0gPSBhYyAqIGN0ICsgYWQgKiBzdDtcbiAgICBvdXRbM10gPSAtYWMgKiBzdCArIGN0ICogYWQ7XG4gICAgb3V0WzRdID0gY3QgKiBhdHggKyBzdCAqIGF0eTtcbiAgICBvdXRbNV0gPSBjdCAqIGF0eSAtIHN0ICogYXR4O1xuICAgIHJldHVybiBvdXQ7XG59XG5leHBvcnQgZnVuY3Rpb24gc2NhbGUob3V0LCBhLCB2KSB7XG4gICAgdmFyIHZ4ID0gdlswXTtcbiAgICB2YXIgdnkgPSB2WzFdO1xuICAgIG91dFswXSA9IGFbMF0gKiB2eDtcbiAgICBvdXRbMV0gPSBhWzFdICogdnk7XG4gICAgb3V0WzJdID0gYVsyXSAqIHZ4O1xuICAgIG91dFszXSA9IGFbM10gKiB2eTtcbiAgICBvdXRbNF0gPSBhWzRdICogdng7XG4gICAgb3V0WzVdID0gYVs1XSAqIHZ5O1xuICAgIHJldHVybiBvdXQ7XG59XG5leHBvcnQgZnVuY3Rpb24gaW52ZXJ0KG91dCwgYSkge1xuICAgIHZhciBhYSA9IGFbMF07XG4gICAgdmFyIGFjID0gYVsyXTtcbiAgICB2YXIgYXR4ID0gYVs0XTtcbiAgICB2YXIgYWIgPSBhWzFdO1xuICAgIHZhciBhZCA9IGFbM107XG4gICAgdmFyIGF0eSA9IGFbNV07XG4gICAgdmFyIGRldCA9IGFhICogYWQgLSBhYiAqIGFjO1xuICAgIGlmICghZGV0KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBkZXQgPSAxLjAgLyBkZXQ7XG4gICAgb3V0WzBdID0gYWQgKiBkZXQ7XG4gICAgb3V0WzFdID0gLWFiICogZGV0O1xuICAgIG91dFsyXSA9IC1hYyAqIGRldDtcbiAgICBvdXRbM10gPSBhYSAqIGRldDtcbiAgICBvdXRbNF0gPSAoYWMgKiBhdHkgLSBhZCAqIGF0eCkgKiBkZXQ7XG4gICAgb3V0WzVdID0gKGFiICogYXR4IC0gYWEgKiBhdHkpICogZGV0O1xuICAgIHJldHVybiBvdXQ7XG59XG5leHBvcnQgZnVuY3Rpb24gY2xvbmUoYSkge1xuICAgIHZhciBiID0gY3JlYXRlKCk7XG4gICAgY29weShiLCBhKTtcbiAgICByZXR1cm4gYjtcbn1cbiIsInZhciBQb2ludCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUG9pbnQoeCwgeSkge1xuICAgICAgICB0aGlzLnggPSB4IHx8IDA7XG4gICAgICAgIHRoaXMueSA9IHkgfHwgMDtcbiAgICB9XG4gICAgUG9pbnQucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgICAgICAgdGhpcy54ID0gb3RoZXIueDtcbiAgICAgICAgdGhpcy55ID0gb3RoZXIueTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBQb2ludC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUG9pbnQodGhpcy54LCB0aGlzLnkpO1xuICAgIH07XG4gICAgUG9pbnQucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgUG9pbnQucHJvdG90eXBlLmVxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gICAgICAgIHJldHVybiBvdGhlci54ID09PSB0aGlzLnggJiYgb3RoZXIueSA9PT0gdGhpcy55O1xuICAgIH07XG4gICAgUG9pbnQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgICAgICB0aGlzLnggKz0gb3RoZXIueDtcbiAgICAgICAgdGhpcy55ICs9IG90aGVyLnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgUG9pbnQucHJvdG90eXBlLnNjYWxlID0gZnVuY3Rpb24gKHNjYWxhcikge1xuICAgICAgICB0aGlzLnggKj0gc2NhbGFyO1xuICAgICAgICB0aGlzLnkgKj0gc2NhbGFyO1xuICAgIH07XG4gICAgUG9pbnQucHJvdG90eXBlLnNjYWxlQW5kQWRkID0gZnVuY3Rpb24gKG90aGVyLCBzY2FsYXIpIHtcbiAgICAgICAgdGhpcy54ICs9IG90aGVyLnggKiBzY2FsYXI7XG4gICAgICAgIHRoaXMueSArPSBvdGhlci55ICogc2NhbGFyO1xuICAgIH07XG4gICAgUG9pbnQucHJvdG90eXBlLnN1YiA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgICAgICB0aGlzLnggLT0gb3RoZXIueDtcbiAgICAgICAgdGhpcy55IC09IG90aGVyLnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgUG9pbnQucHJvdG90eXBlLmRvdCA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgICAgICByZXR1cm4gdGhpcy54ICogb3RoZXIueCArIHRoaXMueSAqIG90aGVyLnk7XG4gICAgfTtcbiAgICBQb2ludC5wcm90b3R5cGUubGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSk7XG4gICAgfTtcbiAgICBQb2ludC5wcm90b3R5cGUubGVuU3F1YXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55O1xuICAgIH07XG4gICAgUG9pbnQucHJvdG90eXBlLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMubGVuKCk7XG4gICAgICAgIHRoaXMueCAvPSBsZW47XG4gICAgICAgIHRoaXMueSAvPSBsZW47XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgUG9pbnQucHJvdG90eXBlLmRpc3RhbmNlID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gICAgICAgIHZhciBkeCA9IHRoaXMueCAtIG90aGVyLng7XG4gICAgICAgIHZhciBkeSA9IHRoaXMueSAtIG90aGVyLnk7XG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuICAgIH07XG4gICAgUG9pbnQucHJvdG90eXBlLmRpc3RhbmNlU3F1YXJlID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gICAgICAgIHZhciBkeCA9IHRoaXMueCAtIG90aGVyLng7XG4gICAgICAgIHZhciBkeSA9IHRoaXMueSAtIG90aGVyLnk7XG4gICAgICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcbiAgICB9O1xuICAgIFBvaW50LnByb3RvdHlwZS5uZWdhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMueCA9IC10aGlzLng7XG4gICAgICAgIHRoaXMueSA9IC10aGlzLnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgUG9pbnQucHJvdG90eXBlLnRyYW5zZm9ybSA9IGZ1bmN0aW9uIChtKSB7XG4gICAgICAgIGlmICghbSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB4ID0gdGhpcy54O1xuICAgICAgICB2YXIgeSA9IHRoaXMueTtcbiAgICAgICAgdGhpcy54ID0gbVswXSAqIHggKyBtWzJdICogeSArIG1bNF07XG4gICAgICAgIHRoaXMueSA9IG1bMV0gKiB4ICsgbVszXSAqIHkgKyBtWzVdO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIFBvaW50LnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24gKG91dCkge1xuICAgICAgICBvdXRbMF0gPSB0aGlzLng7XG4gICAgICAgIG91dFsxXSA9IHRoaXMueTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xuICAgIFBvaW50LnByb3RvdHlwZS5mcm9tQXJyYXkgPSBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgdGhpcy54ID0gaW5wdXRbMF07XG4gICAgICAgIHRoaXMueSA9IGlucHV0WzFdO1xuICAgIH07XG4gICAgUG9pbnQuc2V0ID0gZnVuY3Rpb24gKHAsIHgsIHkpIHtcbiAgICAgICAgcC54ID0geDtcbiAgICAgICAgcC55ID0geTtcbiAgICB9O1xuICAgIFBvaW50LmNvcHkgPSBmdW5jdGlvbiAocCwgcDIpIHtcbiAgICAgICAgcC54ID0gcDIueDtcbiAgICAgICAgcC55ID0gcDIueTtcbiAgICB9O1xuICAgIFBvaW50LmxlbiA9IGZ1bmN0aW9uIChwKSB7XG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQocC54ICogcC54ICsgcC55ICogcC55KTtcbiAgICB9O1xuICAgIFBvaW50LmxlblNxdWFyZSA9IGZ1bmN0aW9uIChwKSB7XG4gICAgICAgIHJldHVybiBwLnggKiBwLnggKyBwLnkgKiBwLnk7XG4gICAgfTtcbiAgICBQb2ludC5kb3QgPSBmdW5jdGlvbiAocDAsIHAxKSB7XG4gICAgICAgIHJldHVybiBwMC54ICogcDEueCArIHAwLnkgKiBwMS55O1xuICAgIH07XG4gICAgUG9pbnQuYWRkID0gZnVuY3Rpb24gKG91dCwgcDAsIHAxKSB7XG4gICAgICAgIG91dC54ID0gcDAueCArIHAxLng7XG4gICAgICAgIG91dC55ID0gcDAueSArIHAxLnk7XG4gICAgfTtcbiAgICBQb2ludC5zdWIgPSBmdW5jdGlvbiAob3V0LCBwMCwgcDEpIHtcbiAgICAgICAgb3V0LnggPSBwMC54IC0gcDEueDtcbiAgICAgICAgb3V0LnkgPSBwMC55IC0gcDEueTtcbiAgICB9O1xuICAgIFBvaW50LnNjYWxlID0gZnVuY3Rpb24gKG91dCwgcDAsIHNjYWxhcikge1xuICAgICAgICBvdXQueCA9IHAwLnggKiBzY2FsYXI7XG4gICAgICAgIG91dC55ID0gcDAueSAqIHNjYWxhcjtcbiAgICB9O1xuICAgIFBvaW50LnNjYWxlQW5kQWRkID0gZnVuY3Rpb24gKG91dCwgcDAsIHAxLCBzY2FsYXIpIHtcbiAgICAgICAgb3V0LnggPSBwMC54ICsgcDEueCAqIHNjYWxhcjtcbiAgICAgICAgb3V0LnkgPSBwMC55ICsgcDEueSAqIHNjYWxhcjtcbiAgICB9O1xuICAgIFBvaW50LmxlcnAgPSBmdW5jdGlvbiAob3V0LCBwMCwgcDEsIHQpIHtcbiAgICAgICAgdmFyIG9uZXQgPSAxIC0gdDtcbiAgICAgICAgb3V0LnggPSBvbmV0ICogcDAueCArIHQgKiBwMS54O1xuICAgICAgICBvdXQueSA9IG9uZXQgKiBwMC55ICsgdCAqIHAxLnk7XG4gICAgfTtcbiAgICByZXR1cm4gUG9pbnQ7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgUG9pbnQ7XG4iLCJpbXBvcnQgKiBhcyBtYXRyaXggZnJvbSAnLi9tYXRyaXguanMnO1xuaW1wb3J0IFBvaW50IGZyb20gJy4vUG9pbnQuanMnO1xudmFyIG1hdGhNaW4gPSBNYXRoLm1pbjtcbnZhciBtYXRoTWF4ID0gTWF0aC5tYXg7XG52YXIgbHQgPSBuZXcgUG9pbnQoKTtcbnZhciByYiA9IG5ldyBQb2ludCgpO1xudmFyIGxiID0gbmV3IFBvaW50KCk7XG52YXIgcnQgPSBuZXcgUG9pbnQoKTtcbnZhciBtaW5UdiA9IG5ldyBQb2ludCgpO1xudmFyIG1heFR2ID0gbmV3IFBvaW50KCk7XG52YXIgQm91bmRpbmdSZWN0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCb3VuZGluZ1JlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICBpZiAod2lkdGggPCAwKSB7XG4gICAgICAgICAgICB4ID0geCArIHdpZHRoO1xuICAgICAgICAgICAgd2lkdGggPSAtd2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhlaWdodCA8IDApIHtcbiAgICAgICAgICAgIHkgPSB5ICsgaGVpZ2h0O1xuICAgICAgICAgICAgaGVpZ2h0ID0gLWhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIH1cbiAgICBCb3VuZGluZ1JlY3QucHJvdG90eXBlLnVuaW9uID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gICAgICAgIHZhciB4ID0gbWF0aE1pbihvdGhlci54LCB0aGlzLngpO1xuICAgICAgICB2YXIgeSA9IG1hdGhNaW4ob3RoZXIueSwgdGhpcy55KTtcbiAgICAgICAgaWYgKGlzRmluaXRlKHRoaXMueCkgJiYgaXNGaW5pdGUodGhpcy53aWR0aCkpIHtcbiAgICAgICAgICAgIHRoaXMud2lkdGggPSBtYXRoTWF4KG90aGVyLnggKyBvdGhlci53aWR0aCwgdGhpcy54ICsgdGhpcy53aWR0aCkgLSB4O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy53aWR0aCA9IG90aGVyLndpZHRoO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0Zpbml0ZSh0aGlzLnkpICYmIGlzRmluaXRlKHRoaXMuaGVpZ2h0KSkge1xuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBtYXRoTWF4KG90aGVyLnkgKyBvdGhlci5oZWlnaHQsIHRoaXMueSArIHRoaXMuaGVpZ2h0KSAtIHk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhlaWdodCA9IG90aGVyLmhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgIH07XG4gICAgQm91bmRpbmdSZWN0LnByb3RvdHlwZS5hcHBseVRyYW5zZm9ybSA9IGZ1bmN0aW9uIChtKSB7XG4gICAgICAgIEJvdW5kaW5nUmVjdC5hcHBseVRyYW5zZm9ybSh0aGlzLCB0aGlzLCBtKTtcbiAgICB9O1xuICAgIEJvdW5kaW5nUmVjdC5wcm90b3R5cGUuY2FsY3VsYXRlVHJhbnNmb3JtID0gZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgdmFyIGEgPSB0aGlzO1xuICAgICAgICB2YXIgc3ggPSBiLndpZHRoIC8gYS53aWR0aDtcbiAgICAgICAgdmFyIHN5ID0gYi5oZWlnaHQgLyBhLmhlaWdodDtcbiAgICAgICAgdmFyIG0gPSBtYXRyaXguY3JlYXRlKCk7XG4gICAgICAgIG1hdHJpeC50cmFuc2xhdGUobSwgbSwgWy1hLngsIC1hLnldKTtcbiAgICAgICAgbWF0cml4LnNjYWxlKG0sIG0sIFtzeCwgc3ldKTtcbiAgICAgICAgbWF0cml4LnRyYW5zbGF0ZShtLCBtLCBbYi54LCBiLnldKTtcbiAgICAgICAgcmV0dXJuIG07XG4gICAgfTtcbiAgICBCb3VuZGluZ1JlY3QucHJvdG90eXBlLmludGVyc2VjdCA9IGZ1bmN0aW9uIChiLCBtdHYpIHtcbiAgICAgICAgaWYgKCFiKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoYiBpbnN0YW5jZW9mIEJvdW5kaW5nUmVjdCkpIHtcbiAgICAgICAgICAgIGIgPSBCb3VuZGluZ1JlY3QuY3JlYXRlKGIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhID0gdGhpcztcbiAgICAgICAgdmFyIGF4MCA9IGEueDtcbiAgICAgICAgdmFyIGF4MSA9IGEueCArIGEud2lkdGg7XG4gICAgICAgIHZhciBheTAgPSBhLnk7XG4gICAgICAgIHZhciBheTEgPSBhLnkgKyBhLmhlaWdodDtcbiAgICAgICAgdmFyIGJ4MCA9IGIueDtcbiAgICAgICAgdmFyIGJ4MSA9IGIueCArIGIud2lkdGg7XG4gICAgICAgIHZhciBieTAgPSBiLnk7XG4gICAgICAgIHZhciBieTEgPSBiLnkgKyBiLmhlaWdodDtcbiAgICAgICAgdmFyIG92ZXJsYXAgPSAhKGF4MSA8IGJ4MCB8fCBieDEgPCBheDAgfHwgYXkxIDwgYnkwIHx8IGJ5MSA8IGF5MCk7XG4gICAgICAgIGlmIChtdHYpIHtcbiAgICAgICAgICAgIHZhciBkTWluID0gSW5maW5pdHk7XG4gICAgICAgICAgICB2YXIgZE1heCA9IDA7XG4gICAgICAgICAgICB2YXIgZDAgPSBNYXRoLmFicyhheDEgLSBieDApO1xuICAgICAgICAgICAgdmFyIGQxID0gTWF0aC5hYnMoYngxIC0gYXgwKTtcbiAgICAgICAgICAgIHZhciBkMiA9IE1hdGguYWJzKGF5MSAtIGJ5MCk7XG4gICAgICAgICAgICB2YXIgZDMgPSBNYXRoLmFicyhieTEgLSBheTApO1xuICAgICAgICAgICAgdmFyIGR4ID0gTWF0aC5taW4oZDAsIGQxKTtcbiAgICAgICAgICAgIHZhciBkeSA9IE1hdGgubWluKGQyLCBkMyk7XG4gICAgICAgICAgICBpZiAoYXgxIDwgYngwIHx8IGJ4MSA8IGF4MCkge1xuICAgICAgICAgICAgICAgIGlmIChkeCA+IGRNYXgpIHtcbiAgICAgICAgICAgICAgICAgICAgZE1heCA9IGR4O1xuICAgICAgICAgICAgICAgICAgICBpZiAoZDAgPCBkMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgUG9pbnQuc2V0KG1heFR2LCAtZDAsIDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgUG9pbnQuc2V0KG1heFR2LCBkMSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZHggPCBkTWluKSB7XG4gICAgICAgICAgICAgICAgICAgIGRNaW4gPSBkeDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGQwIDwgZDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFBvaW50LnNldChtaW5UdiwgZDAsIDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgUG9pbnQuc2V0KG1pblR2LCAtZDEsIDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGF5MSA8IGJ5MCB8fCBieTEgPCBheTApIHtcbiAgICAgICAgICAgICAgICBpZiAoZHkgPiBkTWF4KSB7XG4gICAgICAgICAgICAgICAgICAgIGRNYXggPSBkeTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGQyIDwgZDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFBvaW50LnNldChtYXhUdiwgMCwgLWQyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFBvaW50LnNldChtYXhUdiwgMCwgZDMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGR4IDwgZE1pbikge1xuICAgICAgICAgICAgICAgICAgICBkTWluID0gZHg7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkMiA8IGQzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBQb2ludC5zZXQobWluVHYsIDAsIGQyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFBvaW50LnNldChtaW5UdiwgMCwgLWQzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobXR2KSB7XG4gICAgICAgICAgICBQb2ludC5jb3B5KG10diwgb3ZlcmxhcCA/IG1pblR2IDogbWF4VHYpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdmVybGFwO1xuICAgIH07XG4gICAgQm91bmRpbmdSZWN0LnByb3RvdHlwZS5jb250YWluID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgdmFyIHJlY3QgPSB0aGlzO1xuICAgICAgICByZXR1cm4geCA+PSByZWN0LnhcbiAgICAgICAgICAgICYmIHggPD0gKHJlY3QueCArIHJlY3Qud2lkdGgpXG4gICAgICAgICAgICAmJiB5ID49IHJlY3QueVxuICAgICAgICAgICAgJiYgeSA8PSAocmVjdC55ICsgcmVjdC5oZWlnaHQpO1xuICAgIH07XG4gICAgQm91bmRpbmdSZWN0LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCb3VuZGluZ1JlY3QodGhpcy54LCB0aGlzLnksIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcbiAgICB9O1xuICAgIEJvdW5kaW5nUmVjdC5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgICAgICBCb3VuZGluZ1JlY3QuY29weSh0aGlzLCBvdGhlcik7XG4gICAgfTtcbiAgICBCb3VuZGluZ1JlY3QucHJvdG90eXBlLnBsYWluID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogdGhpcy54LFxuICAgICAgICAgICAgeTogdGhpcy55LFxuICAgICAgICAgICAgd2lkdGg6IHRoaXMud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBCb3VuZGluZ1JlY3QucHJvdG90eXBlLmlzRmluaXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gaXNGaW5pdGUodGhpcy54KVxuICAgICAgICAgICAgJiYgaXNGaW5pdGUodGhpcy55KVxuICAgICAgICAgICAgJiYgaXNGaW5pdGUodGhpcy53aWR0aClcbiAgICAgICAgICAgICYmIGlzRmluaXRlKHRoaXMuaGVpZ2h0KTtcbiAgICB9O1xuICAgIEJvdW5kaW5nUmVjdC5wcm90b3R5cGUuaXNaZXJvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gMCB8fCB0aGlzLmhlaWdodCA9PT0gMDtcbiAgICB9O1xuICAgIEJvdW5kaW5nUmVjdC5jcmVhdGUgPSBmdW5jdGlvbiAocmVjdCkge1xuICAgICAgICByZXR1cm4gbmV3IEJvdW5kaW5nUmVjdChyZWN0LngsIHJlY3QueSwgcmVjdC53aWR0aCwgcmVjdC5oZWlnaHQpO1xuICAgIH07XG4gICAgQm91bmRpbmdSZWN0LmNvcHkgPSBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UpIHtcbiAgICAgICAgdGFyZ2V0LnggPSBzb3VyY2UueDtcbiAgICAgICAgdGFyZ2V0LnkgPSBzb3VyY2UueTtcbiAgICAgICAgdGFyZ2V0LndpZHRoID0gc291cmNlLndpZHRoO1xuICAgICAgICB0YXJnZXQuaGVpZ2h0ID0gc291cmNlLmhlaWdodDtcbiAgICB9O1xuICAgIEJvdW5kaW5nUmVjdC5hcHBseVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0YXJnZXQsIHNvdXJjZSwgbSkge1xuICAgICAgICBpZiAoIW0pIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXQgIT09IHNvdXJjZSkge1xuICAgICAgICAgICAgICAgIEJvdW5kaW5nUmVjdC5jb3B5KHRhcmdldCwgc291cmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobVsxXSA8IDFlLTUgJiYgbVsxXSA+IC0xZS01ICYmIG1bMl0gPCAxZS01ICYmIG1bMl0gPiAtMWUtNSkge1xuICAgICAgICAgICAgdmFyIHN4ID0gbVswXTtcbiAgICAgICAgICAgIHZhciBzeSA9IG1bM107XG4gICAgICAgICAgICB2YXIgdHggPSBtWzRdO1xuICAgICAgICAgICAgdmFyIHR5ID0gbVs1XTtcbiAgICAgICAgICAgIHRhcmdldC54ID0gc291cmNlLnggKiBzeCArIHR4O1xuICAgICAgICAgICAgdGFyZ2V0LnkgPSBzb3VyY2UueSAqIHN5ICsgdHk7XG4gICAgICAgICAgICB0YXJnZXQud2lkdGggPSBzb3VyY2Uud2lkdGggKiBzeDtcbiAgICAgICAgICAgIHRhcmdldC5oZWlnaHQgPSBzb3VyY2UuaGVpZ2h0ICogc3k7XG4gICAgICAgICAgICBpZiAodGFyZ2V0LndpZHRoIDwgMCkge1xuICAgICAgICAgICAgICAgIHRhcmdldC54ICs9IHRhcmdldC53aWR0aDtcbiAgICAgICAgICAgICAgICB0YXJnZXQud2lkdGggPSAtdGFyZ2V0LndpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmdldC5oZWlnaHQgPCAwKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LnkgKz0gdGFyZ2V0LmhlaWdodDtcbiAgICAgICAgICAgICAgICB0YXJnZXQuaGVpZ2h0ID0gLXRhcmdldC5oZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbHQueCA9IGxiLnggPSBzb3VyY2UueDtcbiAgICAgICAgbHQueSA9IHJ0LnkgPSBzb3VyY2UueTtcbiAgICAgICAgcmIueCA9IHJ0LnggPSBzb3VyY2UueCArIHNvdXJjZS53aWR0aDtcbiAgICAgICAgcmIueSA9IGxiLnkgPSBzb3VyY2UueSArIHNvdXJjZS5oZWlnaHQ7XG4gICAgICAgIGx0LnRyYW5zZm9ybShtKTtcbiAgICAgICAgcnQudHJhbnNmb3JtKG0pO1xuICAgICAgICByYi50cmFuc2Zvcm0obSk7XG4gICAgICAgIGxiLnRyYW5zZm9ybShtKTtcbiAgICAgICAgdGFyZ2V0LnggPSBtYXRoTWluKGx0LngsIHJiLngsIGxiLngsIHJ0LngpO1xuICAgICAgICB0YXJnZXQueSA9IG1hdGhNaW4obHQueSwgcmIueSwgbGIueSwgcnQueSk7XG4gICAgICAgIHZhciBtYXhYID0gbWF0aE1heChsdC54LCByYi54LCBsYi54LCBydC54KTtcbiAgICAgICAgdmFyIG1heFkgPSBtYXRoTWF4KGx0LnksIHJiLnksIGxiLnksIHJ0LnkpO1xuICAgICAgICB0YXJnZXQud2lkdGggPSBtYXhYIC0gdGFyZ2V0Lng7XG4gICAgICAgIHRhcmdldC5oZWlnaHQgPSBtYXhZIC0gdGFyZ2V0Lnk7XG4gICAgfTtcbiAgICByZXR1cm4gQm91bmRpbmdSZWN0O1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IEJvdW5kaW5nUmVjdDtcbiIsImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgKiBhcyB2ZWMyIGZyb20gJy4vY29yZS92ZWN0b3IuanMnO1xuaW1wb3J0IERyYWdnYWJsZSBmcm9tICcuL21peGluL0RyYWdnYWJsZS5qcyc7XG5pbXBvcnQgRXZlbnRmdWwgZnJvbSAnLi9jb3JlL0V2ZW50ZnVsLmpzJztcbmltcG9ydCAqIGFzIGV2ZW50VG9vbCBmcm9tICcuL2NvcmUvZXZlbnQuanMnO1xuaW1wb3J0IHsgR2VzdHVyZU1nciB9IGZyb20gJy4vY29yZS9HZXN0dXJlTWdyLmpzJztcbmltcG9ydCBCb3VuZGluZ1JlY3QgZnJvbSAnLi9jb3JlL0JvdW5kaW5nUmVjdC5qcyc7XG52YXIgU0lMRU5UID0gJ3NpbGVudCc7XG5mdW5jdGlvbiBtYWtlRXZlbnRQYWNrZXQoZXZlVHlwZSwgdGFyZ2V0SW5mbywgZXZlbnQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBldmVUeXBlLFxuICAgICAgICBldmVudDogZXZlbnQsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0SW5mby50YXJnZXQsXG4gICAgICAgIHRvcFRhcmdldDogdGFyZ2V0SW5mby50b3BUYXJnZXQsXG4gICAgICAgIGNhbmNlbEJ1YmJsZTogZmFsc2UsXG4gICAgICAgIG9mZnNldFg6IGV2ZW50LnpyWCxcbiAgICAgICAgb2Zmc2V0WTogZXZlbnQuenJZLFxuICAgICAgICBnZXN0dXJlRXZlbnQ6IGV2ZW50Lmdlc3R1cmVFdmVudCxcbiAgICAgICAgcGluY2hYOiBldmVudC5waW5jaFgsXG4gICAgICAgIHBpbmNoWTogZXZlbnQucGluY2hZLFxuICAgICAgICBwaW5jaFNjYWxlOiBldmVudC5waW5jaFNjYWxlLFxuICAgICAgICB3aGVlbERlbHRhOiBldmVudC56ckRlbHRhLFxuICAgICAgICB6ckJ5VG91Y2g6IGV2ZW50LnpyQnlUb3VjaCxcbiAgICAgICAgd2hpY2g6IGV2ZW50LndoaWNoLFxuICAgICAgICBzdG9wOiBzdG9wRXZlbnRcbiAgICB9O1xufVxuZnVuY3Rpb24gc3RvcEV2ZW50KCkge1xuICAgIGV2ZW50VG9vbC5zdG9wKHRoaXMuZXZlbnQpO1xufVxudmFyIEVtcHR5UHJveHkgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhFbXB0eVByb3h5LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEVtcHR5UHJveHkoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5oYW5kbGVyID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBFbXB0eVByb3h5LnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgIEVtcHR5UHJveHkucHJvdG90eXBlLnNldEN1cnNvciA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICByZXR1cm4gRW1wdHlQcm94eTtcbn0oRXZlbnRmdWwpKTtcbnZhciBIb3ZlcmVkUmVzdWx0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBIb3ZlcmVkUmVzdWx0KHgsIHkpIHtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICB9XG4gICAgcmV0dXJuIEhvdmVyZWRSZXN1bHQ7XG59KCkpO1xudmFyIGhhbmRsZXJOYW1lcyA9IFtcbiAgICAnY2xpY2snLCAnZGJsY2xpY2snLCAnbW91c2V3aGVlbCcsICdtb3VzZW91dCcsXG4gICAgJ21vdXNldXAnLCAnbW91c2Vkb3duJywgJ21vdXNlbW92ZScsICdjb250ZXh0bWVudSdcbl07XG52YXIgdG1wUmVjdCA9IG5ldyBCb3VuZGluZ1JlY3QoMCwgMCwgMCwgMCk7XG52YXIgSGFuZGxlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEhhbmRsZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gSGFuZGxlcihzdG9yYWdlLCBwYWludGVyLCBwcm94eSwgcGFpbnRlclJvb3QsIHBvaW50ZXJTaXplKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLl9ob3ZlcmVkID0gbmV3IEhvdmVyZWRSZXN1bHQoMCwgMCk7XG4gICAgICAgIF90aGlzLnN0b3JhZ2UgPSBzdG9yYWdlO1xuICAgICAgICBfdGhpcy5wYWludGVyID0gcGFpbnRlcjtcbiAgICAgICAgX3RoaXMucGFpbnRlclJvb3QgPSBwYWludGVyUm9vdDtcbiAgICAgICAgX3RoaXMuX3BvaW50ZXJTaXplID0gcG9pbnRlclNpemU7XG4gICAgICAgIHByb3h5ID0gcHJveHkgfHwgbmV3IEVtcHR5UHJveHkoKTtcbiAgICAgICAgX3RoaXMucHJveHkgPSBudWxsO1xuICAgICAgICBfdGhpcy5zZXRIYW5kbGVyUHJveHkocHJveHkpO1xuICAgICAgICBfdGhpcy5fZHJhZ2dpbmdNZ3IgPSBuZXcgRHJhZ2dhYmxlKF90aGlzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBIYW5kbGVyLnByb3RvdHlwZS5zZXRIYW5kbGVyUHJveHkgPSBmdW5jdGlvbiAocHJveHkpIHtcbiAgICAgICAgaWYgKHRoaXMucHJveHkpIHtcbiAgICAgICAgICAgIHRoaXMucHJveHkuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm94eSkge1xuICAgICAgICAgICAgdXRpbC5lYWNoKGhhbmRsZXJOYW1lcywgZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgICAgICBwcm94eS5vbiAmJiBwcm94eS5vbihuYW1lLCB0aGlzW25hbWVdLCB0aGlzKTtcbiAgICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICAgICAgcHJveHkuaGFuZGxlciA9IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcm94eSA9IHByb3h5O1xuICAgIH07XG4gICAgSGFuZGxlci5wcm90b3R5cGUubW91c2Vtb3ZlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciB4ID0gZXZlbnQuenJYO1xuICAgICAgICB2YXIgeSA9IGV2ZW50LnpyWTtcbiAgICAgICAgdmFyIGlzT3V0c2lkZSA9IGlzT3V0c2lkZUJvdW5kYXJ5KHRoaXMsIHgsIHkpO1xuICAgICAgICB2YXIgbGFzdEhvdmVyZWQgPSB0aGlzLl9ob3ZlcmVkO1xuICAgICAgICB2YXIgbGFzdEhvdmVyZWRUYXJnZXQgPSBsYXN0SG92ZXJlZC50YXJnZXQ7XG4gICAgICAgIGlmIChsYXN0SG92ZXJlZFRhcmdldCAmJiAhbGFzdEhvdmVyZWRUYXJnZXQuX196cikge1xuICAgICAgICAgICAgbGFzdEhvdmVyZWQgPSB0aGlzLmZpbmRIb3ZlcihsYXN0SG92ZXJlZC54LCBsYXN0SG92ZXJlZC55KTtcbiAgICAgICAgICAgIGxhc3RIb3ZlcmVkVGFyZ2V0ID0gbGFzdEhvdmVyZWQudGFyZ2V0O1xuICAgICAgICB9XG4gICAgICAgIHZhciBob3ZlcmVkID0gdGhpcy5faG92ZXJlZCA9IGlzT3V0c2lkZSA/IG5ldyBIb3ZlcmVkUmVzdWx0KHgsIHkpIDogdGhpcy5maW5kSG92ZXIoeCwgeSk7XG4gICAgICAgIHZhciBob3ZlcmVkVGFyZ2V0ID0gaG92ZXJlZC50YXJnZXQ7XG4gICAgICAgIHZhciBwcm94eSA9IHRoaXMucHJveHk7XG4gICAgICAgIHByb3h5LnNldEN1cnNvciAmJiBwcm94eS5zZXRDdXJzb3IoaG92ZXJlZFRhcmdldCA/IGhvdmVyZWRUYXJnZXQuY3Vyc29yIDogJ2RlZmF1bHQnKTtcbiAgICAgICAgaWYgKGxhc3RIb3ZlcmVkVGFyZ2V0ICYmIGhvdmVyZWRUYXJnZXQgIT09IGxhc3RIb3ZlcmVkVGFyZ2V0KSB7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoVG9FbGVtZW50KGxhc3RIb3ZlcmVkLCAnbW91c2VvdXQnLCBldmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXNwYXRjaFRvRWxlbWVudChob3ZlcmVkLCAnbW91c2Vtb3ZlJywgZXZlbnQpO1xuICAgICAgICBpZiAoaG92ZXJlZFRhcmdldCAmJiBob3ZlcmVkVGFyZ2V0ICE9PSBsYXN0SG92ZXJlZFRhcmdldCkge1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaFRvRWxlbWVudChob3ZlcmVkLCAnbW91c2VvdmVyJywgZXZlbnQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBIYW5kbGVyLnByb3RvdHlwZS5tb3VzZW91dCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgZXZlbnRDb250cm9sID0gZXZlbnQuenJFdmVudENvbnRyb2w7XG4gICAgICAgIGlmIChldmVudENvbnRyb2wgIT09ICdvbmx5X2dsb2JhbG91dCcpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hUb0VsZW1lbnQodGhpcy5faG92ZXJlZCwgJ21vdXNlb3V0JywgZXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudENvbnRyb2wgIT09ICdub19nbG9iYWxvdXQnKSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2dsb2JhbG91dCcsIHsgdHlwZTogJ2dsb2JhbG91dCcsIGV2ZW50OiBldmVudCB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgSGFuZGxlci5wcm90b3R5cGUucmVzaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9ob3ZlcmVkID0gbmV3IEhvdmVyZWRSZXN1bHQoMCwgMCk7XG4gICAgfTtcbiAgICBIYW5kbGVyLnByb3RvdHlwZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGV2ZW50QXJncykge1xuICAgICAgICB2YXIgaGFuZGxlciA9IHRoaXNbZXZlbnROYW1lXTtcbiAgICAgICAgaGFuZGxlciAmJiBoYW5kbGVyLmNhbGwodGhpcywgZXZlbnRBcmdzKTtcbiAgICB9O1xuICAgIEhhbmRsZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucHJveHkuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLnN0b3JhZ2UgPSBudWxsO1xuICAgICAgICB0aGlzLnByb3h5ID0gbnVsbDtcbiAgICAgICAgdGhpcy5wYWludGVyID0gbnVsbDtcbiAgICB9O1xuICAgIEhhbmRsZXIucHJvdG90eXBlLnNldEN1cnNvclN0eWxlID0gZnVuY3Rpb24gKGN1cnNvclN0eWxlKSB7XG4gICAgICAgIHZhciBwcm94eSA9IHRoaXMucHJveHk7XG4gICAgICAgIHByb3h5LnNldEN1cnNvciAmJiBwcm94eS5zZXRDdXJzb3IoY3Vyc29yU3R5bGUpO1xuICAgIH07XG4gICAgSGFuZGxlci5wcm90b3R5cGUuZGlzcGF0Y2hUb0VsZW1lbnQgPSBmdW5jdGlvbiAodGFyZ2V0SW5mbywgZXZlbnROYW1lLCBldmVudCkge1xuICAgICAgICB0YXJnZXRJbmZvID0gdGFyZ2V0SW5mbyB8fCB7fTtcbiAgICAgICAgdmFyIGVsID0gdGFyZ2V0SW5mby50YXJnZXQ7XG4gICAgICAgIGlmIChlbCAmJiBlbC5zaWxlbnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZXZlbnRLZXkgPSAoJ29uJyArIGV2ZW50TmFtZSk7XG4gICAgICAgIHZhciBldmVudFBhY2tldCA9IG1ha2VFdmVudFBhY2tldChldmVudE5hbWUsIHRhcmdldEluZm8sIGV2ZW50KTtcbiAgICAgICAgd2hpbGUgKGVsKSB7XG4gICAgICAgICAgICBlbFtldmVudEtleV1cbiAgICAgICAgICAgICAgICAmJiAoZXZlbnRQYWNrZXQuY2FuY2VsQnViYmxlID0gISFlbFtldmVudEtleV0uY2FsbChlbCwgZXZlbnRQYWNrZXQpKTtcbiAgICAgICAgICAgIGVsLnRyaWdnZXIoZXZlbnROYW1lLCBldmVudFBhY2tldCk7XG4gICAgICAgICAgICBlbCA9IGVsLl9faG9zdFRhcmdldCA/IGVsLl9faG9zdFRhcmdldCA6IGVsLnBhcmVudDtcbiAgICAgICAgICAgIGlmIChldmVudFBhY2tldC5jYW5jZWxCdWJibGUpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWV2ZW50UGFja2V0LmNhbmNlbEJ1YmJsZSkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKGV2ZW50TmFtZSwgZXZlbnRQYWNrZXQpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFpbnRlciAmJiB0aGlzLnBhaW50ZXIuZWFjaE90aGVyTGF5ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhaW50ZXIuZWFjaE90aGVyTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKGxheWVyW2V2ZW50S2V5XSkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyW2V2ZW50S2V5XS5jYWxsKGxheWVyLCBldmVudFBhY2tldCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxheWVyLnRyaWdnZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLnRyaWdnZXIoZXZlbnROYW1lLCBldmVudFBhY2tldCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgSGFuZGxlci5wcm90b3R5cGUuZmluZEhvdmVyID0gZnVuY3Rpb24gKHgsIHksIGV4Y2x1ZGUpIHtcbiAgICAgICAgdmFyIGxpc3QgPSB0aGlzLnN0b3JhZ2UuZ2V0RGlzcGxheUxpc3QoKTtcbiAgICAgICAgdmFyIG91dCA9IG5ldyBIb3ZlcmVkUmVzdWx0KHgsIHkpO1xuICAgICAgICBzZXRIb3ZlclRhcmdldChsaXN0LCBvdXQsIHgsIHksIGV4Y2x1ZGUpO1xuICAgICAgICBpZiAodGhpcy5fcG9pbnRlclNpemUgJiYgIW91dC50YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBjYW5kaWRhdGVzID0gW107XG4gICAgICAgICAgICB2YXIgcG9pbnRlclNpemUgPSB0aGlzLl9wb2ludGVyU2l6ZTtcbiAgICAgICAgICAgIHZhciB0YXJnZXRTaXplSGFsZiA9IHBvaW50ZXJTaXplIC8gMjtcbiAgICAgICAgICAgIHZhciBwb2ludGVyUmVjdCA9IG5ldyBCb3VuZGluZ1JlY3QoeCAtIHRhcmdldFNpemVIYWxmLCB5IC0gdGFyZ2V0U2l6ZUhhbGYsIHBvaW50ZXJTaXplLCBwb2ludGVyU2l6ZSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gbGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgIHZhciBlbCA9IGxpc3RbaV07XG4gICAgICAgICAgICAgICAgaWYgKGVsICE9PSBleGNsdWRlXG4gICAgICAgICAgICAgICAgICAgICYmICFlbC5pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgJiYgIWVsLmlnbm9yZUNvYXJzZVBvaW50ZXJcbiAgICAgICAgICAgICAgICAgICAgJiYgKCFlbC5wYXJlbnQgfHwgIWVsLnBhcmVudC5pZ25vcmVDb2Fyc2VQb2ludGVyKSkge1xuICAgICAgICAgICAgICAgICAgICB0bXBSZWN0LmNvcHkoZWwuZ2V0Qm91bmRpbmdSZWN0KCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWwudHJhbnNmb3JtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0bXBSZWN0LmFwcGx5VHJhbnNmb3JtKGVsLnRyYW5zZm9ybSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRtcFJlY3QuaW50ZXJzZWN0KHBvaW50ZXJSZWN0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlcy5wdXNoKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjYW5kaWRhdGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciByU3RlcCA9IDQ7XG4gICAgICAgICAgICAgICAgdmFyIHRoZXRhU3RlcCA9IE1hdGguUEkgLyAxMjtcbiAgICAgICAgICAgICAgICB2YXIgUEkyID0gTWF0aC5QSSAqIDI7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IDA7IHIgPCB0YXJnZXRTaXplSGFsZjsgciArPSByU3RlcCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0aGV0YSA9IDA7IHRoZXRhIDwgUEkyOyB0aGV0YSArPSB0aGV0YVN0ZXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4MSA9IHggKyByICogTWF0aC5jb3ModGhldGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHkxID0geSArIHIgKiBNYXRoLnNpbih0aGV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRIb3ZlclRhcmdldChjYW5kaWRhdGVzLCBvdXQsIHgxLCB5MSwgZXhjbHVkZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3V0LnRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xuICAgIEhhbmRsZXIucHJvdG90eXBlLnByb2Nlc3NHZXN0dXJlID0gZnVuY3Rpb24gKGV2ZW50LCBzdGFnZSkge1xuICAgICAgICBpZiAoIXRoaXMuX2dlc3R1cmVNZ3IpIHtcbiAgICAgICAgICAgIHRoaXMuX2dlc3R1cmVNZ3IgPSBuZXcgR2VzdHVyZU1ncigpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBnZXN0dXJlTWdyID0gdGhpcy5fZ2VzdHVyZU1ncjtcbiAgICAgICAgc3RhZ2UgPT09ICdzdGFydCcgJiYgZ2VzdHVyZU1nci5jbGVhcigpO1xuICAgICAgICB2YXIgZ2VzdHVyZUluZm8gPSBnZXN0dXJlTWdyLnJlY29nbml6ZShldmVudCwgdGhpcy5maW5kSG92ZXIoZXZlbnQuenJYLCBldmVudC56clksIG51bGwpLnRhcmdldCwgdGhpcy5wcm94eS5kb20pO1xuICAgICAgICBzdGFnZSA9PT0gJ2VuZCcgJiYgZ2VzdHVyZU1nci5jbGVhcigpO1xuICAgICAgICBpZiAoZ2VzdHVyZUluZm8pIHtcbiAgICAgICAgICAgIHZhciB0eXBlID0gZ2VzdHVyZUluZm8udHlwZTtcbiAgICAgICAgICAgIGV2ZW50Lmdlc3R1cmVFdmVudCA9IHR5cGU7XG4gICAgICAgICAgICB2YXIgcmVzID0gbmV3IEhvdmVyZWRSZXN1bHQoKTtcbiAgICAgICAgICAgIHJlcy50YXJnZXQgPSBnZXN0dXJlSW5mby50YXJnZXQ7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoVG9FbGVtZW50KHJlcywgdHlwZSwgZ2VzdHVyZUluZm8uZXZlbnQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gSGFuZGxlcjtcbn0oRXZlbnRmdWwpKTtcbnV0aWwuZWFjaChbJ2NsaWNrJywgJ21vdXNlZG93bicsICdtb3VzZXVwJywgJ21vdXNld2hlZWwnLCAnZGJsY2xpY2snLCAnY29udGV4dG1lbnUnXSwgZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBIYW5kbGVyLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgeCA9IGV2ZW50LnpyWDtcbiAgICAgICAgdmFyIHkgPSBldmVudC56clk7XG4gICAgICAgIHZhciBpc091dHNpZGUgPSBpc091dHNpZGVCb3VuZGFyeSh0aGlzLCB4LCB5KTtcbiAgICAgICAgdmFyIGhvdmVyZWQ7XG4gICAgICAgIHZhciBob3ZlcmVkVGFyZ2V0O1xuICAgICAgICBpZiAobmFtZSAhPT0gJ21vdXNldXAnIHx8ICFpc091dHNpZGUpIHtcbiAgICAgICAgICAgIGhvdmVyZWQgPSB0aGlzLmZpbmRIb3Zlcih4LCB5KTtcbiAgICAgICAgICAgIGhvdmVyZWRUYXJnZXQgPSBob3ZlcmVkLnRhcmdldDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmFtZSA9PT0gJ21vdXNlZG93bicpIHtcbiAgICAgICAgICAgIHRoaXMuX2Rvd25FbCA9IGhvdmVyZWRUYXJnZXQ7XG4gICAgICAgICAgICB0aGlzLl9kb3duUG9pbnQgPSBbZXZlbnQuenJYLCBldmVudC56clldO1xuICAgICAgICAgICAgdGhpcy5fdXBFbCA9IGhvdmVyZWRUYXJnZXQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobmFtZSA9PT0gJ21vdXNldXAnKSB7XG4gICAgICAgICAgICB0aGlzLl91cEVsID0gaG92ZXJlZFRhcmdldDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChuYW1lID09PSAnY2xpY2snKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fZG93bkVsICE9PSB0aGlzLl91cEVsXG4gICAgICAgICAgICAgICAgfHwgIXRoaXMuX2Rvd25Qb2ludFxuICAgICAgICAgICAgICAgIHx8IHZlYzIuZGlzdCh0aGlzLl9kb3duUG9pbnQsIFtldmVudC56clgsIGV2ZW50LnpyWV0pID4gNCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2Rvd25Qb2ludCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXNwYXRjaFRvRWxlbWVudChob3ZlcmVkLCBuYW1lLCBldmVudCk7XG4gICAgfTtcbn0pO1xuZnVuY3Rpb24gaXNIb3ZlcihkaXNwbGF5YWJsZSwgeCwgeSkge1xuICAgIGlmIChkaXNwbGF5YWJsZVtkaXNwbGF5YWJsZS5yZWN0SG92ZXIgPyAncmVjdENvbnRhaW4nIDogJ2NvbnRhaW4nXSh4LCB5KSkge1xuICAgICAgICB2YXIgZWwgPSBkaXNwbGF5YWJsZTtcbiAgICAgICAgdmFyIGlzU2lsZW50ID0gdm9pZCAwO1xuICAgICAgICB2YXIgaWdub3JlQ2xpcCA9IGZhbHNlO1xuICAgICAgICB3aGlsZSAoZWwpIHtcbiAgICAgICAgICAgIGlmIChlbC5pZ25vcmVDbGlwKSB7XG4gICAgICAgICAgICAgICAgaWdub3JlQ2xpcCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlnbm9yZUNsaXApIHtcbiAgICAgICAgICAgICAgICB2YXIgY2xpcFBhdGggPSBlbC5nZXRDbGlwUGF0aCgpO1xuICAgICAgICAgICAgICAgIGlmIChjbGlwUGF0aCAmJiAhY2xpcFBhdGguY29udGFpbih4LCB5KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlbC5zaWxlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNTaWxlbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBob3N0RWwgPSBlbC5fX2hvc3RUYXJnZXQ7XG4gICAgICAgICAgICBlbCA9IGhvc3RFbCA/IGhvc3RFbCA6IGVsLnBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNTaWxlbnQgPyBTSUxFTlQgOiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBzZXRIb3ZlclRhcmdldChsaXN0LCBvdXQsIHgsIHksIGV4Y2x1ZGUpIHtcbiAgICBmb3IgKHZhciBpID0gbGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICB2YXIgZWwgPSBsaXN0W2ldO1xuICAgICAgICB2YXIgaG92ZXJDaGVja1Jlc3VsdCA9IHZvaWQgMDtcbiAgICAgICAgaWYgKGVsICE9PSBleGNsdWRlXG4gICAgICAgICAgICAmJiAhZWwuaWdub3JlXG4gICAgICAgICAgICAmJiAoaG92ZXJDaGVja1Jlc3VsdCA9IGlzSG92ZXIoZWwsIHgsIHkpKSkge1xuICAgICAgICAgICAgIW91dC50b3BUYXJnZXQgJiYgKG91dC50b3BUYXJnZXQgPSBlbCk7XG4gICAgICAgICAgICBpZiAoaG92ZXJDaGVja1Jlc3VsdCAhPT0gU0lMRU5UKSB7XG4gICAgICAgICAgICAgICAgb3V0LnRhcmdldCA9IGVsO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gaXNPdXRzaWRlQm91bmRhcnkoaGFuZGxlckluc3RhbmNlLCB4LCB5KSB7XG4gICAgdmFyIHBhaW50ZXIgPSBoYW5kbGVySW5zdGFuY2UucGFpbnRlcjtcbiAgICByZXR1cm4geCA8IDAgfHwgeCA+IHBhaW50ZXIuZ2V0V2lkdGgoKSB8fCB5IDwgMCB8fCB5ID4gcGFpbnRlci5nZXRIZWlnaHQoKTtcbn1cbmV4cG9ydCBkZWZhdWx0IEhhbmRsZXI7XG4iLCJ2YXIgREVGQVVMVF9NSU5fTUVSR0UgPSAzMjtcbnZhciBERUZBVUxUX01JTl9HQUxMT1BJTkcgPSA3O1xudmFyIERFRkFVTFRfVE1QX1NUT1JBR0VfTEVOR1RIID0gMjU2O1xuZnVuY3Rpb24gbWluUnVuTGVuZ3RoKG4pIHtcbiAgICB2YXIgciA9IDA7XG4gICAgd2hpbGUgKG4gPj0gREVGQVVMVF9NSU5fTUVSR0UpIHtcbiAgICAgICAgciB8PSBuICYgMTtcbiAgICAgICAgbiA+Pj0gMTtcbiAgICB9XG4gICAgcmV0dXJuIG4gKyByO1xufVxuZnVuY3Rpb24gbWFrZUFzY2VuZGluZ1J1bihhcnJheSwgbG8sIGhpLCBjb21wYXJlKSB7XG4gICAgdmFyIHJ1bkhpID0gbG8gKyAxO1xuICAgIGlmIChydW5IaSA9PT0gaGkpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIGlmIChjb21wYXJlKGFycmF5W3J1bkhpKytdLCBhcnJheVtsb10pIDwgMCkge1xuICAgICAgICB3aGlsZSAocnVuSGkgPCBoaSAmJiBjb21wYXJlKGFycmF5W3J1bkhpXSwgYXJyYXlbcnVuSGkgLSAxXSkgPCAwKSB7XG4gICAgICAgICAgICBydW5IaSsrO1xuICAgICAgICB9XG4gICAgICAgIHJldmVyc2VSdW4oYXJyYXksIGxvLCBydW5IaSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB3aGlsZSAocnVuSGkgPCBoaSAmJiBjb21wYXJlKGFycmF5W3J1bkhpXSwgYXJyYXlbcnVuSGkgLSAxXSkgPj0gMCkge1xuICAgICAgICAgICAgcnVuSGkrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcnVuSGkgLSBsbztcbn1cbmZ1bmN0aW9uIHJldmVyc2VSdW4oYXJyYXksIGxvLCBoaSkge1xuICAgIGhpLS07XG4gICAgd2hpbGUgKGxvIDwgaGkpIHtcbiAgICAgICAgdmFyIHQgPSBhcnJheVtsb107XG4gICAgICAgIGFycmF5W2xvKytdID0gYXJyYXlbaGldO1xuICAgICAgICBhcnJheVtoaS0tXSA9IHQ7XG4gICAgfVxufVxuZnVuY3Rpb24gYmluYXJ5SW5zZXJ0aW9uU29ydChhcnJheSwgbG8sIGhpLCBzdGFydCwgY29tcGFyZSkge1xuICAgIGlmIChzdGFydCA9PT0gbG8pIHtcbiAgICAgICAgc3RhcnQrKztcbiAgICB9XG4gICAgZm9yICg7IHN0YXJ0IDwgaGk7IHN0YXJ0KyspIHtcbiAgICAgICAgdmFyIHBpdm90ID0gYXJyYXlbc3RhcnRdO1xuICAgICAgICB2YXIgbGVmdCA9IGxvO1xuICAgICAgICB2YXIgcmlnaHQgPSBzdGFydDtcbiAgICAgICAgdmFyIG1pZDtcbiAgICAgICAgd2hpbGUgKGxlZnQgPCByaWdodCkge1xuICAgICAgICAgICAgbWlkID0gbGVmdCArIHJpZ2h0ID4+PiAxO1xuICAgICAgICAgICAgaWYgKGNvbXBhcmUocGl2b3QsIGFycmF5W21pZF0pIDwgMCkge1xuICAgICAgICAgICAgICAgIHJpZ2h0ID0gbWlkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGVmdCA9IG1pZCArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG4gPSBzdGFydCAtIGxlZnQ7XG4gICAgICAgIHN3aXRjaCAobikge1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIGFycmF5W2xlZnQgKyAzXSA9IGFycmF5W2xlZnQgKyAyXTtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBhcnJheVtsZWZ0ICsgMl0gPSBhcnJheVtsZWZ0ICsgMV07XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgYXJyYXlbbGVmdCArIDFdID0gYXJyYXlbbGVmdF07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHdoaWxlIChuID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBhcnJheVtsZWZ0ICsgbl0gPSBhcnJheVtsZWZ0ICsgbiAtIDFdO1xuICAgICAgICAgICAgICAgICAgICBuLS07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGFycmF5W2xlZnRdID0gcGl2b3Q7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2FsbG9wTGVmdCh2YWx1ZSwgYXJyYXksIHN0YXJ0LCBsZW5ndGgsIGhpbnQsIGNvbXBhcmUpIHtcbiAgICB2YXIgbGFzdE9mZnNldCA9IDA7XG4gICAgdmFyIG1heE9mZnNldCA9IDA7XG4gICAgdmFyIG9mZnNldCA9IDE7XG4gICAgaWYgKGNvbXBhcmUodmFsdWUsIGFycmF5W3N0YXJ0ICsgaGludF0pID4gMCkge1xuICAgICAgICBtYXhPZmZzZXQgPSBsZW5ndGggLSBoaW50O1xuICAgICAgICB3aGlsZSAob2Zmc2V0IDwgbWF4T2Zmc2V0ICYmIGNvbXBhcmUodmFsdWUsIGFycmF5W3N0YXJ0ICsgaGludCArIG9mZnNldF0pID4gMCkge1xuICAgICAgICAgICAgbGFzdE9mZnNldCA9IG9mZnNldDtcbiAgICAgICAgICAgIG9mZnNldCA9IChvZmZzZXQgPDwgMSkgKyAxO1xuICAgICAgICAgICAgaWYgKG9mZnNldCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gbWF4T2Zmc2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvZmZzZXQgPiBtYXhPZmZzZXQpIHtcbiAgICAgICAgICAgIG9mZnNldCA9IG1heE9mZnNldDtcbiAgICAgICAgfVxuICAgICAgICBsYXN0T2Zmc2V0ICs9IGhpbnQ7XG4gICAgICAgIG9mZnNldCArPSBoaW50O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbWF4T2Zmc2V0ID0gaGludCArIDE7XG4gICAgICAgIHdoaWxlIChvZmZzZXQgPCBtYXhPZmZzZXQgJiYgY29tcGFyZSh2YWx1ZSwgYXJyYXlbc3RhcnQgKyBoaW50IC0gb2Zmc2V0XSkgPD0gMCkge1xuICAgICAgICAgICAgbGFzdE9mZnNldCA9IG9mZnNldDtcbiAgICAgICAgICAgIG9mZnNldCA9IChvZmZzZXQgPDwgMSkgKyAxO1xuICAgICAgICAgICAgaWYgKG9mZnNldCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gbWF4T2Zmc2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvZmZzZXQgPiBtYXhPZmZzZXQpIHtcbiAgICAgICAgICAgIG9mZnNldCA9IG1heE9mZnNldDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdG1wID0gbGFzdE9mZnNldDtcbiAgICAgICAgbGFzdE9mZnNldCA9IGhpbnQgLSBvZmZzZXQ7XG4gICAgICAgIG9mZnNldCA9IGhpbnQgLSB0bXA7XG4gICAgfVxuICAgIGxhc3RPZmZzZXQrKztcbiAgICB3aGlsZSAobGFzdE9mZnNldCA8IG9mZnNldCkge1xuICAgICAgICB2YXIgbSA9IGxhc3RPZmZzZXQgKyAob2Zmc2V0IC0gbGFzdE9mZnNldCA+Pj4gMSk7XG4gICAgICAgIGlmIChjb21wYXJlKHZhbHVlLCBhcnJheVtzdGFydCArIG1dKSA+IDApIHtcbiAgICAgICAgICAgIGxhc3RPZmZzZXQgPSBtICsgMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9mZnNldCA9IG07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9mZnNldDtcbn1cbmZ1bmN0aW9uIGdhbGxvcFJpZ2h0KHZhbHVlLCBhcnJheSwgc3RhcnQsIGxlbmd0aCwgaGludCwgY29tcGFyZSkge1xuICAgIHZhciBsYXN0T2Zmc2V0ID0gMDtcbiAgICB2YXIgbWF4T2Zmc2V0ID0gMDtcbiAgICB2YXIgb2Zmc2V0ID0gMTtcbiAgICBpZiAoY29tcGFyZSh2YWx1ZSwgYXJyYXlbc3RhcnQgKyBoaW50XSkgPCAwKSB7XG4gICAgICAgIG1heE9mZnNldCA9IGhpbnQgKyAxO1xuICAgICAgICB3aGlsZSAob2Zmc2V0IDwgbWF4T2Zmc2V0ICYmIGNvbXBhcmUodmFsdWUsIGFycmF5W3N0YXJ0ICsgaGludCAtIG9mZnNldF0pIDwgMCkge1xuICAgICAgICAgICAgbGFzdE9mZnNldCA9IG9mZnNldDtcbiAgICAgICAgICAgIG9mZnNldCA9IChvZmZzZXQgPDwgMSkgKyAxO1xuICAgICAgICAgICAgaWYgKG9mZnNldCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gbWF4T2Zmc2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvZmZzZXQgPiBtYXhPZmZzZXQpIHtcbiAgICAgICAgICAgIG9mZnNldCA9IG1heE9mZnNldDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdG1wID0gbGFzdE9mZnNldDtcbiAgICAgICAgbGFzdE9mZnNldCA9IGhpbnQgLSBvZmZzZXQ7XG4gICAgICAgIG9mZnNldCA9IGhpbnQgLSB0bXA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBtYXhPZmZzZXQgPSBsZW5ndGggLSBoaW50O1xuICAgICAgICB3aGlsZSAob2Zmc2V0IDwgbWF4T2Zmc2V0ICYmIGNvbXBhcmUodmFsdWUsIGFycmF5W3N0YXJ0ICsgaGludCArIG9mZnNldF0pID49IDApIHtcbiAgICAgICAgICAgIGxhc3RPZmZzZXQgPSBvZmZzZXQ7XG4gICAgICAgICAgICBvZmZzZXQgPSAob2Zmc2V0IDw8IDEpICsgMTtcbiAgICAgICAgICAgIGlmIChvZmZzZXQgPD0gMCkge1xuICAgICAgICAgICAgICAgIG9mZnNldCA9IG1heE9mZnNldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAob2Zmc2V0ID4gbWF4T2Zmc2V0KSB7XG4gICAgICAgICAgICBvZmZzZXQgPSBtYXhPZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgICAgbGFzdE9mZnNldCArPSBoaW50O1xuICAgICAgICBvZmZzZXQgKz0gaGludDtcbiAgICB9XG4gICAgbGFzdE9mZnNldCsrO1xuICAgIHdoaWxlIChsYXN0T2Zmc2V0IDwgb2Zmc2V0KSB7XG4gICAgICAgIHZhciBtID0gbGFzdE9mZnNldCArIChvZmZzZXQgLSBsYXN0T2Zmc2V0ID4+PiAxKTtcbiAgICAgICAgaWYgKGNvbXBhcmUodmFsdWUsIGFycmF5W3N0YXJ0ICsgbV0pIDwgMCkge1xuICAgICAgICAgICAgb2Zmc2V0ID0gbTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxhc3RPZmZzZXQgPSBtICsgMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2Zmc2V0O1xufVxuZnVuY3Rpb24gVGltU29ydChhcnJheSwgY29tcGFyZSkge1xuICAgIHZhciBtaW5HYWxsb3AgPSBERUZBVUxUX01JTl9HQUxMT1BJTkc7XG4gICAgdmFyIGxlbmd0aCA9IDA7XG4gICAgdmFyIHRtcFN0b3JhZ2VMZW5ndGggPSBERUZBVUxUX1RNUF9TVE9SQUdFX0xFTkdUSDtcbiAgICB2YXIgc3RhY2tMZW5ndGggPSAwO1xuICAgIHZhciBydW5TdGFydDtcbiAgICB2YXIgcnVuTGVuZ3RoO1xuICAgIHZhciBzdGFja1NpemUgPSAwO1xuICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcbiAgICBpZiAobGVuZ3RoIDwgMiAqIERFRkFVTFRfVE1QX1NUT1JBR0VfTEVOR1RIKSB7XG4gICAgICAgIHRtcFN0b3JhZ2VMZW5ndGggPSBsZW5ndGggPj4+IDE7XG4gICAgfVxuICAgIHZhciB0bXAgPSBbXTtcbiAgICBzdGFja0xlbmd0aCA9IGxlbmd0aCA8IDEyMCA/IDUgOiBsZW5ndGggPCAxNTQyID8gMTAgOiBsZW5ndGggPCAxMTkxNTEgPyAxOSA6IDQwO1xuICAgIHJ1blN0YXJ0ID0gW107XG4gICAgcnVuTGVuZ3RoID0gW107XG4gICAgZnVuY3Rpb24gcHVzaFJ1bihfcnVuU3RhcnQsIF9ydW5MZW5ndGgpIHtcbiAgICAgICAgcnVuU3RhcnRbc3RhY2tTaXplXSA9IF9ydW5TdGFydDtcbiAgICAgICAgcnVuTGVuZ3RoW3N0YWNrU2l6ZV0gPSBfcnVuTGVuZ3RoO1xuICAgICAgICBzdGFja1NpemUgKz0gMTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbWVyZ2VSdW5zKCkge1xuICAgICAgICB3aGlsZSAoc3RhY2tTaXplID4gMSkge1xuICAgICAgICAgICAgdmFyIG4gPSBzdGFja1NpemUgLSAyO1xuICAgICAgICAgICAgaWYgKChuID49IDEgJiYgcnVuTGVuZ3RoW24gLSAxXSA8PSBydW5MZW5ndGhbbl0gKyBydW5MZW5ndGhbbiArIDFdKVxuICAgICAgICAgICAgICAgIHx8IChuID49IDIgJiYgcnVuTGVuZ3RoW24gLSAyXSA8PSBydW5MZW5ndGhbbl0gKyBydW5MZW5ndGhbbiAtIDFdKSkge1xuICAgICAgICAgICAgICAgIGlmIChydW5MZW5ndGhbbiAtIDFdIDwgcnVuTGVuZ3RoW24gKyAxXSkge1xuICAgICAgICAgICAgICAgICAgICBuLS07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocnVuTGVuZ3RoW25dID4gcnVuTGVuZ3RoW24gKyAxXSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWVyZ2VBdChuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBmb3JjZU1lcmdlUnVucygpIHtcbiAgICAgICAgd2hpbGUgKHN0YWNrU2l6ZSA+IDEpIHtcbiAgICAgICAgICAgIHZhciBuID0gc3RhY2tTaXplIC0gMjtcbiAgICAgICAgICAgIGlmIChuID4gMCAmJiBydW5MZW5ndGhbbiAtIDFdIDwgcnVuTGVuZ3RoW24gKyAxXSkge1xuICAgICAgICAgICAgICAgIG4tLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1lcmdlQXQobik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gbWVyZ2VBdChpKSB7XG4gICAgICAgIHZhciBzdGFydDEgPSBydW5TdGFydFtpXTtcbiAgICAgICAgdmFyIGxlbmd0aDEgPSBydW5MZW5ndGhbaV07XG4gICAgICAgIHZhciBzdGFydDIgPSBydW5TdGFydFtpICsgMV07XG4gICAgICAgIHZhciBsZW5ndGgyID0gcnVuTGVuZ3RoW2kgKyAxXTtcbiAgICAgICAgcnVuTGVuZ3RoW2ldID0gbGVuZ3RoMSArIGxlbmd0aDI7XG4gICAgICAgIGlmIChpID09PSBzdGFja1NpemUgLSAzKSB7XG4gICAgICAgICAgICBydW5TdGFydFtpICsgMV0gPSBydW5TdGFydFtpICsgMl07XG4gICAgICAgICAgICBydW5MZW5ndGhbaSArIDFdID0gcnVuTGVuZ3RoW2kgKyAyXTtcbiAgICAgICAgfVxuICAgICAgICBzdGFja1NpemUtLTtcbiAgICAgICAgdmFyIGsgPSBnYWxsb3BSaWdodChhcnJheVtzdGFydDJdLCBhcnJheSwgc3RhcnQxLCBsZW5ndGgxLCAwLCBjb21wYXJlKTtcbiAgICAgICAgc3RhcnQxICs9IGs7XG4gICAgICAgIGxlbmd0aDEgLT0gaztcbiAgICAgICAgaWYgKGxlbmd0aDEgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZW5ndGgyID0gZ2FsbG9wTGVmdChhcnJheVtzdGFydDEgKyBsZW5ndGgxIC0gMV0sIGFycmF5LCBzdGFydDIsIGxlbmd0aDIsIGxlbmd0aDIgLSAxLCBjb21wYXJlKTtcbiAgICAgICAgaWYgKGxlbmd0aDIgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVuZ3RoMSA8PSBsZW5ndGgyKSB7XG4gICAgICAgICAgICBtZXJnZUxvdyhzdGFydDEsIGxlbmd0aDEsIHN0YXJ0MiwgbGVuZ3RoMik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtZXJnZUhpZ2goc3RhcnQxLCBsZW5ndGgxLCBzdGFydDIsIGxlbmd0aDIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1lcmdlTG93KHN0YXJ0MSwgbGVuZ3RoMSwgc3RhcnQyLCBsZW5ndGgyKSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDE7IGkrKykge1xuICAgICAgICAgICAgdG1wW2ldID0gYXJyYXlbc3RhcnQxICsgaV07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGN1cnNvcjEgPSAwO1xuICAgICAgICB2YXIgY3Vyc29yMiA9IHN0YXJ0MjtcbiAgICAgICAgdmFyIGRlc3QgPSBzdGFydDE7XG4gICAgICAgIGFycmF5W2Rlc3QrK10gPSBhcnJheVtjdXJzb3IyKytdO1xuICAgICAgICBpZiAoLS1sZW5ndGgyID09PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoMTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJyYXlbZGVzdCArIGldID0gdG1wW2N1cnNvcjEgKyBpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVuZ3RoMSA9PT0gMSkge1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDI7IGkrKykge1xuICAgICAgICAgICAgICAgIGFycmF5W2Rlc3QgKyBpXSA9IGFycmF5W2N1cnNvcjIgKyBpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFycmF5W2Rlc3QgKyBsZW5ndGgyXSA9IHRtcFtjdXJzb3IxXTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgX21pbkdhbGxvcCA9IG1pbkdhbGxvcDtcbiAgICAgICAgdmFyIGNvdW50MTtcbiAgICAgICAgdmFyIGNvdW50MjtcbiAgICAgICAgdmFyIGV4aXQ7XG4gICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICBjb3VudDEgPSAwO1xuICAgICAgICAgICAgY291bnQyID0gMDtcbiAgICAgICAgICAgIGV4aXQgPSBmYWxzZTtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBpZiAoY29tcGFyZShhcnJheVtjdXJzb3IyXSwgdG1wW2N1cnNvcjFdKSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYXJyYXlbZGVzdCsrXSA9IGFycmF5W2N1cnNvcjIrK107XG4gICAgICAgICAgICAgICAgICAgIGNvdW50MisrO1xuICAgICAgICAgICAgICAgICAgICBjb3VudDEgPSAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoLS1sZW5ndGgyID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhcnJheVtkZXN0KytdID0gdG1wW2N1cnNvcjErK107XG4gICAgICAgICAgICAgICAgICAgIGNvdW50MSsrO1xuICAgICAgICAgICAgICAgICAgICBjb3VudDIgPSAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoLS1sZW5ndGgxID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSB3aGlsZSAoKGNvdW50MSB8IGNvdW50MikgPCBfbWluR2FsbG9wKTtcbiAgICAgICAgICAgIGlmIChleGl0KSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgY291bnQxID0gZ2FsbG9wUmlnaHQoYXJyYXlbY3Vyc29yMl0sIHRtcCwgY3Vyc29yMSwgbGVuZ3RoMSwgMCwgY29tcGFyZSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvdW50MSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY291bnQxOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5W2Rlc3QgKyBpXSA9IHRtcFtjdXJzb3IxICsgaV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVzdCArPSBjb3VudDE7XG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcjEgKz0gY291bnQxO1xuICAgICAgICAgICAgICAgICAgICBsZW5ndGgxIC09IGNvdW50MTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxlbmd0aDEgPD0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhpdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhcnJheVtkZXN0KytdID0gYXJyYXlbY3Vyc29yMisrXTtcbiAgICAgICAgICAgICAgICBpZiAoLS1sZW5ndGgyID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4aXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY291bnQyID0gZ2FsbG9wTGVmdCh0bXBbY3Vyc29yMV0sIGFycmF5LCBjdXJzb3IyLCBsZW5ndGgyLCAwLCBjb21wYXJlKTtcbiAgICAgICAgICAgICAgICBpZiAoY291bnQyICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBjb3VudDI7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlbZGVzdCArIGldID0gYXJyYXlbY3Vyc29yMiArIGldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlc3QgKz0gY291bnQyO1xuICAgICAgICAgICAgICAgICAgICBjdXJzb3IyICs9IGNvdW50MjtcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoMiAtPSBjb3VudDI7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsZW5ndGgyID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFycmF5W2Rlc3QrK10gPSB0bXBbY3Vyc29yMSsrXTtcbiAgICAgICAgICAgICAgICBpZiAoLS1sZW5ndGgxID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4aXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX21pbkdhbGxvcC0tO1xuICAgICAgICAgICAgfSB3aGlsZSAoY291bnQxID49IERFRkFVTFRfTUlOX0dBTExPUElORyB8fCBjb3VudDIgPj0gREVGQVVMVF9NSU5fR0FMTE9QSU5HKTtcbiAgICAgICAgICAgIGlmIChleGl0KSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoX21pbkdhbGxvcCA8IDApIHtcbiAgICAgICAgICAgICAgICBfbWluR2FsbG9wID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9taW5HYWxsb3AgKz0gMjtcbiAgICAgICAgfVxuICAgICAgICBtaW5HYWxsb3AgPSBfbWluR2FsbG9wO1xuICAgICAgICBtaW5HYWxsb3AgPCAxICYmIChtaW5HYWxsb3AgPSAxKTtcbiAgICAgICAgaWYgKGxlbmd0aDEgPT09IDEpIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGgyOyBpKyspIHtcbiAgICAgICAgICAgICAgICBhcnJheVtkZXN0ICsgaV0gPSBhcnJheVtjdXJzb3IyICsgaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcnJheVtkZXN0ICsgbGVuZ3RoMl0gPSB0bXBbY3Vyc29yMV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGVuZ3RoMSA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoMTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJyYXlbZGVzdCArIGldID0gdG1wW2N1cnNvcjEgKyBpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBtZXJnZUhpZ2goc3RhcnQxLCBsZW5ndGgxLCBzdGFydDIsIGxlbmd0aDIpIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoMjsgaSsrKSB7XG4gICAgICAgICAgICB0bXBbaV0gPSBhcnJheVtzdGFydDIgKyBpXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY3Vyc29yMSA9IHN0YXJ0MSArIGxlbmd0aDEgLSAxO1xuICAgICAgICB2YXIgY3Vyc29yMiA9IGxlbmd0aDIgLSAxO1xuICAgICAgICB2YXIgZGVzdCA9IHN0YXJ0MiArIGxlbmd0aDIgLSAxO1xuICAgICAgICB2YXIgY3VzdG9tQ3Vyc29yID0gMDtcbiAgICAgICAgdmFyIGN1c3RvbURlc3QgPSAwO1xuICAgICAgICBhcnJheVtkZXN0LS1dID0gYXJyYXlbY3Vyc29yMS0tXTtcbiAgICAgICAgaWYgKC0tbGVuZ3RoMSA9PT0gMCkge1xuICAgICAgICAgICAgY3VzdG9tQ3Vyc29yID0gZGVzdCAtIChsZW5ndGgyIC0gMSk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoMjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJyYXlbY3VzdG9tQ3Vyc29yICsgaV0gPSB0bXBbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlbmd0aDIgPT09IDEpIHtcbiAgICAgICAgICAgIGRlc3QgLT0gbGVuZ3RoMTtcbiAgICAgICAgICAgIGN1cnNvcjEgLT0gbGVuZ3RoMTtcbiAgICAgICAgICAgIGN1c3RvbURlc3QgPSBkZXN0ICsgMTtcbiAgICAgICAgICAgIGN1c3RvbUN1cnNvciA9IGN1cnNvcjEgKyAxO1xuICAgICAgICAgICAgZm9yIChpID0gbGVuZ3RoMSAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgYXJyYXlbY3VzdG9tRGVzdCArIGldID0gYXJyYXlbY3VzdG9tQ3Vyc29yICsgaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcnJheVtkZXN0XSA9IHRtcFtjdXJzb3IyXTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgX21pbkdhbGxvcCA9IG1pbkdhbGxvcDtcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIHZhciBjb3VudDEgPSAwO1xuICAgICAgICAgICAgdmFyIGNvdW50MiA9IDA7XG4gICAgICAgICAgICB2YXIgZXhpdCA9IGZhbHNlO1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIGlmIChjb21wYXJlKHRtcFtjdXJzb3IyXSwgYXJyYXlbY3Vyc29yMV0pIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBhcnJheVtkZXN0LS1dID0gYXJyYXlbY3Vyc29yMS0tXTtcbiAgICAgICAgICAgICAgICAgICAgY291bnQxKys7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50MiA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmICgtLWxlbmd0aDEgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFycmF5W2Rlc3QtLV0gPSB0bXBbY3Vyc29yMi0tXTtcbiAgICAgICAgICAgICAgICAgICAgY291bnQyKys7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50MSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmICgtLWxlbmd0aDIgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICgoY291bnQxIHwgY291bnQyKSA8IF9taW5HYWxsb3ApO1xuICAgICAgICAgICAgaWYgKGV4aXQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBjb3VudDEgPSBsZW5ndGgxIC0gZ2FsbG9wUmlnaHQodG1wW2N1cnNvcjJdLCBhcnJheSwgc3RhcnQxLCBsZW5ndGgxLCBsZW5ndGgxIC0gMSwgY29tcGFyZSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvdW50MSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBkZXN0IC09IGNvdW50MTtcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yMSAtPSBjb3VudDE7XG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aDEgLT0gY291bnQxO1xuICAgICAgICAgICAgICAgICAgICBjdXN0b21EZXN0ID0gZGVzdCArIDE7XG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbUN1cnNvciA9IGN1cnNvcjEgKyAxO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSBjb3VudDEgLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlbY3VzdG9tRGVzdCArIGldID0gYXJyYXlbY3VzdG9tQ3Vyc29yICsgaV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxlbmd0aDEgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYXJyYXlbZGVzdC0tXSA9IHRtcFtjdXJzb3IyLS1dO1xuICAgICAgICAgICAgICAgIGlmICgtLWxlbmd0aDIgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgZXhpdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb3VudDIgPSBsZW5ndGgyIC0gZ2FsbG9wTGVmdChhcnJheVtjdXJzb3IxXSwgdG1wLCAwLCBsZW5ndGgyLCBsZW5ndGgyIC0gMSwgY29tcGFyZSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvdW50MiAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBkZXN0IC09IGNvdW50MjtcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yMiAtPSBjb3VudDI7XG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aDIgLT0gY291bnQyO1xuICAgICAgICAgICAgICAgICAgICBjdXN0b21EZXN0ID0gZGVzdCArIDE7XG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbUN1cnNvciA9IGN1cnNvcjIgKyAxO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY291bnQyOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5W2N1c3RvbURlc3QgKyBpXSA9IHRtcFtjdXN0b21DdXJzb3IgKyBpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobGVuZ3RoMiA8PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFycmF5W2Rlc3QtLV0gPSBhcnJheVtjdXJzb3IxLS1dO1xuICAgICAgICAgICAgICAgIGlmICgtLWxlbmd0aDEgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZXhpdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfbWluR2FsbG9wLS07XG4gICAgICAgICAgICB9IHdoaWxlIChjb3VudDEgPj0gREVGQVVMVF9NSU5fR0FMTE9QSU5HIHx8IGNvdW50MiA+PSBERUZBVUxUX01JTl9HQUxMT1BJTkcpO1xuICAgICAgICAgICAgaWYgKGV4aXQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChfbWluR2FsbG9wIDwgMCkge1xuICAgICAgICAgICAgICAgIF9taW5HYWxsb3AgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX21pbkdhbGxvcCArPSAyO1xuICAgICAgICB9XG4gICAgICAgIG1pbkdhbGxvcCA9IF9taW5HYWxsb3A7XG4gICAgICAgIGlmIChtaW5HYWxsb3AgPCAxKSB7XG4gICAgICAgICAgICBtaW5HYWxsb3AgPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsZW5ndGgyID09PSAxKSB7XG4gICAgICAgICAgICBkZXN0IC09IGxlbmd0aDE7XG4gICAgICAgICAgICBjdXJzb3IxIC09IGxlbmd0aDE7XG4gICAgICAgICAgICBjdXN0b21EZXN0ID0gZGVzdCArIDE7XG4gICAgICAgICAgICBjdXN0b21DdXJzb3IgPSBjdXJzb3IxICsgMTtcbiAgICAgICAgICAgIGZvciAoaSA9IGxlbmd0aDEgLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgIGFycmF5W2N1c3RvbURlc3QgKyBpXSA9IGFycmF5W2N1c3RvbUN1cnNvciArIGldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXJyYXlbZGVzdF0gPSB0bXBbY3Vyc29yMl07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGVuZ3RoMiA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjdXN0b21DdXJzb3IgPSBkZXN0IC0gKGxlbmd0aDIgLSAxKTtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGgyOyBpKyspIHtcbiAgICAgICAgICAgICAgICBhcnJheVtjdXN0b21DdXJzb3IgKyBpXSA9IHRtcFtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBtZXJnZVJ1bnM6IG1lcmdlUnVucyxcbiAgICAgICAgZm9yY2VNZXJnZVJ1bnM6IGZvcmNlTWVyZ2VSdW5zLFxuICAgICAgICBwdXNoUnVuOiBwdXNoUnVuXG4gICAgfTtcbn1cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNvcnQoYXJyYXksIGNvbXBhcmUsIGxvLCBoaSkge1xuICAgIGlmICghbG8pIHtcbiAgICAgICAgbG8gPSAwO1xuICAgIH1cbiAgICBpZiAoIWhpKSB7XG4gICAgICAgIGhpID0gYXJyYXkubGVuZ3RoO1xuICAgIH1cbiAgICB2YXIgcmVtYWluaW5nID0gaGkgLSBsbztcbiAgICBpZiAocmVtYWluaW5nIDwgMikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBydW5MZW5ndGggPSAwO1xuICAgIGlmIChyZW1haW5pbmcgPCBERUZBVUxUX01JTl9NRVJHRSkge1xuICAgICAgICBydW5MZW5ndGggPSBtYWtlQXNjZW5kaW5nUnVuKGFycmF5LCBsbywgaGksIGNvbXBhcmUpO1xuICAgICAgICBiaW5hcnlJbnNlcnRpb25Tb3J0KGFycmF5LCBsbywgaGksIGxvICsgcnVuTGVuZ3RoLCBjb21wYXJlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdHMgPSBUaW1Tb3J0KGFycmF5LCBjb21wYXJlKTtcbiAgICB2YXIgbWluUnVuID0gbWluUnVuTGVuZ3RoKHJlbWFpbmluZyk7XG4gICAgZG8ge1xuICAgICAgICBydW5MZW5ndGggPSBtYWtlQXNjZW5kaW5nUnVuKGFycmF5LCBsbywgaGksIGNvbXBhcmUpO1xuICAgICAgICBpZiAocnVuTGVuZ3RoIDwgbWluUnVuKSB7XG4gICAgICAgICAgICB2YXIgZm9yY2UgPSByZW1haW5pbmc7XG4gICAgICAgICAgICBpZiAoZm9yY2UgPiBtaW5SdW4pIHtcbiAgICAgICAgICAgICAgICBmb3JjZSA9IG1pblJ1bjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJpbmFyeUluc2VydGlvblNvcnQoYXJyYXksIGxvLCBsbyArIGZvcmNlLCBsbyArIHJ1bkxlbmd0aCwgY29tcGFyZSk7XG4gICAgICAgICAgICBydW5MZW5ndGggPSBmb3JjZTtcbiAgICAgICAgfVxuICAgICAgICB0cy5wdXNoUnVuKGxvLCBydW5MZW5ndGgpO1xuICAgICAgICB0cy5tZXJnZVJ1bnMoKTtcbiAgICAgICAgcmVtYWluaW5nIC09IHJ1bkxlbmd0aDtcbiAgICAgICAgbG8gKz0gcnVuTGVuZ3RoO1xuICAgIH0gd2hpbGUgKHJlbWFpbmluZyAhPT0gMCk7XG4gICAgdHMuZm9yY2VNZXJnZVJ1bnMoKTtcbn1cbiIsImV4cG9ydCB2YXIgUkVEUkFXX0JJVCA9IDE7XG5leHBvcnQgdmFyIFNUWUxFX0NIQU5HRURfQklUID0gMjtcbmV4cG9ydCB2YXIgU0hBUEVfQ0hBTkdFRF9CSVQgPSA0O1xuIiwiaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgdGltc29ydCBmcm9tICcuL2NvcmUvdGltc29ydC5qcyc7XG5pbXBvcnQgeyBSRURSQVdfQklUIH0gZnJvbSAnLi9ncmFwaGljL2NvbnN0YW50cy5qcyc7XG52YXIgaW52YWxpZFpFcnJvckxvZ2dlZCA9IGZhbHNlO1xuZnVuY3Rpb24gbG9nSW52YWxpZFpFcnJvcigpIHtcbiAgICBpZiAoaW52YWxpZFpFcnJvckxvZ2dlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGludmFsaWRaRXJyb3JMb2dnZWQgPSB0cnVlO1xuICAgIGNvbnNvbGUud2FybigneiAvIHoyIC8gemxldmVsIG9mIGRpc3BsYXlhYmxlIGlzIGludmFsaWQsIHdoaWNoIG1heSBjYXVzZSB1bmV4cGVjdGVkIGVycm9ycycpO1xufVxuZnVuY3Rpb24gc2hhcGVDb21wYXJlRnVuYyhhLCBiKSB7XG4gICAgaWYgKGEuemxldmVsID09PSBiLnpsZXZlbCkge1xuICAgICAgICBpZiAoYS56ID09PSBiLnopIHtcbiAgICAgICAgICAgIHJldHVybiBhLnoyIC0gYi56MjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYS56IC0gYi56O1xuICAgIH1cbiAgICByZXR1cm4gYS56bGV2ZWwgLSBiLnpsZXZlbDtcbn1cbnZhciBTdG9yYWdlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdG9yYWdlKCkge1xuICAgICAgICB0aGlzLl9yb290cyA9IFtdO1xuICAgICAgICB0aGlzLl9kaXNwbGF5TGlzdCA9IFtdO1xuICAgICAgICB0aGlzLl9kaXNwbGF5TGlzdExlbiA9IDA7XG4gICAgICAgIHRoaXMuZGlzcGxheWFibGVTb3J0RnVuYyA9IHNoYXBlQ29tcGFyZUZ1bmM7XG4gICAgfVxuICAgIFN0b3JhZ2UucHJvdG90eXBlLnRyYXZlcnNlID0gZnVuY3Rpb24gKGNiLCBjb250ZXh0KSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fcm9vdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuX3Jvb3RzW2ldLnRyYXZlcnNlKGNiLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3RvcmFnZS5wcm90b3R5cGUuZ2V0RGlzcGxheUxpc3QgPSBmdW5jdGlvbiAodXBkYXRlLCBpbmNsdWRlSWdub3JlKSB7XG4gICAgICAgIGluY2x1ZGVJZ25vcmUgPSBpbmNsdWRlSWdub3JlIHx8IGZhbHNlO1xuICAgICAgICB2YXIgZGlzcGxheUxpc3QgPSB0aGlzLl9kaXNwbGF5TGlzdDtcbiAgICAgICAgaWYgKHVwZGF0ZSB8fCAhZGlzcGxheUxpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZURpc3BsYXlMaXN0KGluY2x1ZGVJZ25vcmUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkaXNwbGF5TGlzdDtcbiAgICB9O1xuICAgIFN0b3JhZ2UucHJvdG90eXBlLnVwZGF0ZURpc3BsYXlMaXN0ID0gZnVuY3Rpb24gKGluY2x1ZGVJZ25vcmUpIHtcbiAgICAgICAgdGhpcy5fZGlzcGxheUxpc3RMZW4gPSAwO1xuICAgICAgICB2YXIgcm9vdHMgPSB0aGlzLl9yb290cztcbiAgICAgICAgdmFyIGRpc3BsYXlMaXN0ID0gdGhpcy5fZGlzcGxheUxpc3Q7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByb290cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlQW5kQWRkRGlzcGxheWFibGUocm9vdHNbaV0sIG51bGwsIGluY2x1ZGVJZ25vcmUpO1xuICAgICAgICB9XG4gICAgICAgIGRpc3BsYXlMaXN0Lmxlbmd0aCA9IHRoaXMuX2Rpc3BsYXlMaXN0TGVuO1xuICAgICAgICB0aW1zb3J0KGRpc3BsYXlMaXN0LCBzaGFwZUNvbXBhcmVGdW5jKTtcbiAgICB9O1xuICAgIFN0b3JhZ2UucHJvdG90eXBlLl91cGRhdGVBbmRBZGREaXNwbGF5YWJsZSA9IGZ1bmN0aW9uIChlbCwgY2xpcFBhdGhzLCBpbmNsdWRlSWdub3JlKSB7XG4gICAgICAgIGlmIChlbC5pZ25vcmUgJiYgIWluY2x1ZGVJZ25vcmUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbC5iZWZvcmVVcGRhdGUoKTtcbiAgICAgICAgZWwudXBkYXRlKCk7XG4gICAgICAgIGVsLmFmdGVyVXBkYXRlKCk7XG4gICAgICAgIHZhciB1c2VyU2V0Q2xpcFBhdGggPSBlbC5nZXRDbGlwUGF0aCgpO1xuICAgICAgICBpZiAoZWwuaWdub3JlQ2xpcCkge1xuICAgICAgICAgICAgY2xpcFBhdGhzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh1c2VyU2V0Q2xpcFBhdGgpIHtcbiAgICAgICAgICAgIGlmIChjbGlwUGF0aHMpIHtcbiAgICAgICAgICAgICAgICBjbGlwUGF0aHMgPSBjbGlwUGF0aHMuc2xpY2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNsaXBQYXRocyA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGN1cnJlbnRDbGlwUGF0aCA9IHVzZXJTZXRDbGlwUGF0aDtcbiAgICAgICAgICAgIHZhciBwYXJlbnRDbGlwUGF0aCA9IGVsO1xuICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnRDbGlwUGF0aCkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRDbGlwUGF0aC5wYXJlbnQgPSBwYXJlbnRDbGlwUGF0aDtcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2xpcFBhdGgudXBkYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgICAgICAgICAgY2xpcFBhdGhzLnB1c2goY3VycmVudENsaXBQYXRoKTtcbiAgICAgICAgICAgICAgICBwYXJlbnRDbGlwUGF0aCA9IGN1cnJlbnRDbGlwUGF0aDtcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2xpcFBhdGggPSBjdXJyZW50Q2xpcFBhdGguZ2V0Q2xpcFBhdGgoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZWwuY2hpbGRyZW5SZWYpIHtcbiAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IGVsLmNoaWxkcmVuUmVmKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgaWYgKGVsLl9fZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQuX19kaXJ0eSB8PSBSRURSQVdfQklUO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVBbmRBZGREaXNwbGF5YWJsZShjaGlsZCwgY2xpcFBhdGhzLCBpbmNsdWRlSWdub3JlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsLl9fZGlydHkgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGRpc3AgPSBlbDtcbiAgICAgICAgICAgIGlmIChjbGlwUGF0aHMgJiYgY2xpcFBhdGhzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGRpc3AuX19jbGlwUGF0aHMgPSBjbGlwUGF0aHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkaXNwLl9fY2xpcFBhdGhzICYmIGRpc3AuX19jbGlwUGF0aHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGRpc3AuX19jbGlwUGF0aHMgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc05hTihkaXNwLnopKSB7XG4gICAgICAgICAgICAgICAgbG9nSW52YWxpZFpFcnJvcigpO1xuICAgICAgICAgICAgICAgIGRpc3AueiA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNOYU4oZGlzcC56MikpIHtcbiAgICAgICAgICAgICAgICBsb2dJbnZhbGlkWkVycm9yKCk7XG4gICAgICAgICAgICAgICAgZGlzcC56MiA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNOYU4oZGlzcC56bGV2ZWwpKSB7XG4gICAgICAgICAgICAgICAgbG9nSW52YWxpZFpFcnJvcigpO1xuICAgICAgICAgICAgICAgIGRpc3AuemxldmVsID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2Rpc3BsYXlMaXN0W3RoaXMuX2Rpc3BsYXlMaXN0TGVuKytdID0gZGlzcDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGVjYWxFbCA9IGVsLmdldERlY2FsRWxlbWVudCAmJiBlbC5nZXREZWNhbEVsZW1lbnQoKTtcbiAgICAgICAgaWYgKGRlY2FsRWwpIHtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUFuZEFkZERpc3BsYXlhYmxlKGRlY2FsRWwsIGNsaXBQYXRocywgaW5jbHVkZUlnbm9yZSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRleHRHdWlkZSA9IGVsLmdldFRleHRHdWlkZUxpbmUoKTtcbiAgICAgICAgaWYgKHRleHRHdWlkZSkge1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlQW5kQWRkRGlzcGxheWFibGUodGV4dEd1aWRlLCBjbGlwUGF0aHMsIGluY2x1ZGVJZ25vcmUpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0ZXh0RWwgPSBlbC5nZXRUZXh0Q29udGVudCgpO1xuICAgICAgICBpZiAodGV4dEVsKSB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVBbmRBZGREaXNwbGF5YWJsZSh0ZXh0RWwsIGNsaXBQYXRocywgaW5jbHVkZUlnbm9yZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN0b3JhZ2UucHJvdG90eXBlLmFkZFJvb3QgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgaWYgKGVsLl9fenIgJiYgZWwuX196ci5zdG9yYWdlID09PSB0aGlzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcm9vdHMucHVzaChlbCk7XG4gICAgfTtcbiAgICBTdG9yYWdlLnByb3RvdHlwZS5kZWxSb290ID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIGlmIChlbCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGVsLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVsUm9vdChlbFtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlkeCA9IHV0aWwuaW5kZXhPZih0aGlzLl9yb290cywgZWwpO1xuICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICAgIHRoaXMuX3Jvb3RzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdG9yYWdlLnByb3RvdHlwZS5kZWxBbGxSb290cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fcm9vdHMgPSBbXTtcbiAgICAgICAgdGhpcy5fZGlzcGxheUxpc3QgPSBbXTtcbiAgICAgICAgdGhpcy5fZGlzcGxheUxpc3RMZW4gPSAwO1xuICAgICAgICByZXR1cm47XG4gICAgfTtcbiAgICBTdG9yYWdlLnByb3RvdHlwZS5nZXRSb290cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jvb3RzO1xuICAgIH07XG4gICAgU3RvcmFnZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fZGlzcGxheUxpc3QgPSBudWxsO1xuICAgICAgICB0aGlzLl9yb290cyA9IG51bGw7XG4gICAgfTtcbiAgICByZXR1cm4gU3RvcmFnZTtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBTdG9yYWdlO1xuIiwiaW1wb3J0IGVudiBmcm9tICcuLi9jb3JlL2Vudi5qcyc7XG52YXIgcmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gKGVudi5oYXNHbG9iYWxXaW5kb3dcbiAgICAmJiAoKHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgJiYgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZS5iaW5kKHdpbmRvdykpXG4gICAgICAgIHx8ICh3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgJiYgd2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lLmJpbmQod2luZG93KSlcbiAgICAgICAgfHwgd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZVxuICAgICAgICB8fCB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lKSkgfHwgZnVuY3Rpb24gKGZ1bmMpIHtcbiAgICByZXR1cm4gc2V0VGltZW91dChmdW5jLCAxNik7XG59O1xuZXhwb3J0IGRlZmF1bHQgcmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuIiwidmFyIGVhc2luZ0Z1bmNzID0ge1xuICAgIGxpbmVhcjogZnVuY3Rpb24gKGspIHtcbiAgICAgICAgcmV0dXJuIGs7XG4gICAgfSxcbiAgICBxdWFkcmF0aWNJbjogZnVuY3Rpb24gKGspIHtcbiAgICAgICAgcmV0dXJuIGsgKiBrO1xuICAgIH0sXG4gICAgcXVhZHJhdGljT3V0OiBmdW5jdGlvbiAoaykge1xuICAgICAgICByZXR1cm4gayAqICgyIC0gayk7XG4gICAgfSxcbiAgICBxdWFkcmF0aWNJbk91dDogZnVuY3Rpb24gKGspIHtcbiAgICAgICAgaWYgKChrICo9IDIpIDwgMSkge1xuICAgICAgICAgICAgcmV0dXJuIDAuNSAqIGsgKiBrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMC41ICogKC0tayAqIChrIC0gMikgLSAxKTtcbiAgICB9LFxuICAgIGN1YmljSW46IGZ1bmN0aW9uIChrKSB7XG4gICAgICAgIHJldHVybiBrICogayAqIGs7XG4gICAgfSxcbiAgICBjdWJpY091dDogZnVuY3Rpb24gKGspIHtcbiAgICAgICAgcmV0dXJuIC0tayAqIGsgKiBrICsgMTtcbiAgICB9LFxuICAgIGN1YmljSW5PdXQ6IGZ1bmN0aW9uIChrKSB7XG4gICAgICAgIGlmICgoayAqPSAyKSA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybiAwLjUgKiBrICogayAqIGs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDAuNSAqICgoayAtPSAyKSAqIGsgKiBrICsgMik7XG4gICAgfSxcbiAgICBxdWFydGljSW46IGZ1bmN0aW9uIChrKSB7XG4gICAgICAgIHJldHVybiBrICogayAqIGsgKiBrO1xuICAgIH0sXG4gICAgcXVhcnRpY091dDogZnVuY3Rpb24gKGspIHtcbiAgICAgICAgcmV0dXJuIDEgLSAoLS1rICogayAqIGsgKiBrKTtcbiAgICB9LFxuICAgIHF1YXJ0aWNJbk91dDogZnVuY3Rpb24gKGspIHtcbiAgICAgICAgaWYgKChrICo9IDIpIDwgMSkge1xuICAgICAgICAgICAgcmV0dXJuIDAuNSAqIGsgKiBrICogayAqIGs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0wLjUgKiAoKGsgLT0gMikgKiBrICogayAqIGsgLSAyKTtcbiAgICB9LFxuICAgIHF1aW50aWNJbjogZnVuY3Rpb24gKGspIHtcbiAgICAgICAgcmV0dXJuIGsgKiBrICogayAqIGsgKiBrO1xuICAgIH0sXG4gICAgcXVpbnRpY091dDogZnVuY3Rpb24gKGspIHtcbiAgICAgICAgcmV0dXJuIC0tayAqIGsgKiBrICogayAqIGsgKyAxO1xuICAgIH0sXG4gICAgcXVpbnRpY0luT3V0OiBmdW5jdGlvbiAoaykge1xuICAgICAgICBpZiAoKGsgKj0gMikgPCAxKSB7XG4gICAgICAgICAgICByZXR1cm4gMC41ICogayAqIGsgKiBrICogayAqIGs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDAuNSAqICgoayAtPSAyKSAqIGsgKiBrICogayAqIGsgKyAyKTtcbiAgICB9LFxuICAgIHNpbnVzb2lkYWxJbjogZnVuY3Rpb24gKGspIHtcbiAgICAgICAgcmV0dXJuIDEgLSBNYXRoLmNvcyhrICogTWF0aC5QSSAvIDIpO1xuICAgIH0sXG4gICAgc2ludXNvaWRhbE91dDogZnVuY3Rpb24gKGspIHtcbiAgICAgICAgcmV0dXJuIE1hdGguc2luKGsgKiBNYXRoLlBJIC8gMik7XG4gICAgfSxcbiAgICBzaW51c29pZGFsSW5PdXQ6IGZ1bmN0aW9uIChrKSB7XG4gICAgICAgIHJldHVybiAwLjUgKiAoMSAtIE1hdGguY29zKE1hdGguUEkgKiBrKSk7XG4gICAgfSxcbiAgICBleHBvbmVudGlhbEluOiBmdW5jdGlvbiAoaykge1xuICAgICAgICByZXR1cm4gayA9PT0gMCA/IDAgOiBNYXRoLnBvdygxMDI0LCBrIC0gMSk7XG4gICAgfSxcbiAgICBleHBvbmVudGlhbE91dDogZnVuY3Rpb24gKGspIHtcbiAgICAgICAgcmV0dXJuIGsgPT09IDEgPyAxIDogMSAtIE1hdGgucG93KDIsIC0xMCAqIGspO1xuICAgIH0sXG4gICAgZXhwb25lbnRpYWxJbk91dDogZnVuY3Rpb24gKGspIHtcbiAgICAgICAgaWYgKGsgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChrID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKGsgKj0gMikgPCAxKSB7XG4gICAgICAgICAgICByZXR1cm4gMC41ICogTWF0aC5wb3coMTAyNCwgayAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwLjUgKiAoLU1hdGgucG93KDIsIC0xMCAqIChrIC0gMSkpICsgMik7XG4gICAgfSxcbiAgICBjaXJjdWxhckluOiBmdW5jdGlvbiAoaykge1xuICAgICAgICByZXR1cm4gMSAtIE1hdGguc3FydCgxIC0gayAqIGspO1xuICAgIH0sXG4gICAgY2lyY3VsYXJPdXQ6IGZ1bmN0aW9uIChrKSB7XG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoMSAtICgtLWsgKiBrKSk7XG4gICAgfSxcbiAgICBjaXJjdWxhckluT3V0OiBmdW5jdGlvbiAoaykge1xuICAgICAgICBpZiAoKGsgKj0gMikgPCAxKSB7XG4gICAgICAgICAgICByZXR1cm4gLTAuNSAqIChNYXRoLnNxcnQoMSAtIGsgKiBrKSAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwLjUgKiAoTWF0aC5zcXJ0KDEgLSAoayAtPSAyKSAqIGspICsgMSk7XG4gICAgfSxcbiAgICBlbGFzdGljSW46IGZ1bmN0aW9uIChrKSB7XG4gICAgICAgIHZhciBzO1xuICAgICAgICB2YXIgYSA9IDAuMTtcbiAgICAgICAgdmFyIHAgPSAwLjQ7XG4gICAgICAgIGlmIChrID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoayA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhIHx8IGEgPCAxKSB7XG4gICAgICAgICAgICBhID0gMTtcbiAgICAgICAgICAgIHMgPSBwIC8gNDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHMgPSBwICogTWF0aC5hc2luKDEgLyBhKSAvICgyICogTWF0aC5QSSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0oYSAqIE1hdGgucG93KDIsIDEwICogKGsgLT0gMSkpXG4gICAgICAgICAgICAqIE1hdGguc2luKChrIC0gcykgKiAoMiAqIE1hdGguUEkpIC8gcCkpO1xuICAgIH0sXG4gICAgZWxhc3RpY091dDogZnVuY3Rpb24gKGspIHtcbiAgICAgICAgdmFyIHM7XG4gICAgICAgIHZhciBhID0gMC4xO1xuICAgICAgICB2YXIgcCA9IDAuNDtcbiAgICAgICAgaWYgKGsgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChrID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWEgfHwgYSA8IDEpIHtcbiAgICAgICAgICAgIGEgPSAxO1xuICAgICAgICAgICAgcyA9IHAgLyA0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcyA9IHAgKiBNYXRoLmFzaW4oMSAvIGEpIC8gKDIgKiBNYXRoLlBJKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKGEgKiBNYXRoLnBvdygyLCAtMTAgKiBrKVxuICAgICAgICAgICAgKiBNYXRoLnNpbigoayAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApICsgMSk7XG4gICAgfSxcbiAgICBlbGFzdGljSW5PdXQ6IGZ1bmN0aW9uIChrKSB7XG4gICAgICAgIHZhciBzO1xuICAgICAgICB2YXIgYSA9IDAuMTtcbiAgICAgICAgdmFyIHAgPSAwLjQ7XG4gICAgICAgIGlmIChrID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoayA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhIHx8IGEgPCAxKSB7XG4gICAgICAgICAgICBhID0gMTtcbiAgICAgICAgICAgIHMgPSBwIC8gNDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHMgPSBwICogTWF0aC5hc2luKDEgLyBhKSAvICgyICogTWF0aC5QSSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChrICo9IDIpIDwgMSkge1xuICAgICAgICAgICAgcmV0dXJuIC0wLjUgKiAoYSAqIE1hdGgucG93KDIsIDEwICogKGsgLT0gMSkpXG4gICAgICAgICAgICAgICAgKiBNYXRoLnNpbigoayAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYSAqIE1hdGgucG93KDIsIC0xMCAqIChrIC09IDEpKVxuICAgICAgICAgICAgKiBNYXRoLnNpbigoayAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApICogMC41ICsgMTtcbiAgICB9LFxuICAgIGJhY2tJbjogZnVuY3Rpb24gKGspIHtcbiAgICAgICAgdmFyIHMgPSAxLjcwMTU4O1xuICAgICAgICByZXR1cm4gayAqIGsgKiAoKHMgKyAxKSAqIGsgLSBzKTtcbiAgICB9LFxuICAgIGJhY2tPdXQ6IGZ1bmN0aW9uIChrKSB7XG4gICAgICAgIHZhciBzID0gMS43MDE1ODtcbiAgICAgICAgcmV0dXJuIC0tayAqIGsgKiAoKHMgKyAxKSAqIGsgKyBzKSArIDE7XG4gICAgfSxcbiAgICBiYWNrSW5PdXQ6IGZ1bmN0aW9uIChrKSB7XG4gICAgICAgIHZhciBzID0gMS43MDE1OCAqIDEuNTI1O1xuICAgICAgICBpZiAoKGsgKj0gMikgPCAxKSB7XG4gICAgICAgICAgICByZXR1cm4gMC41ICogKGsgKiBrICogKChzICsgMSkgKiBrIC0gcykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwLjUgKiAoKGsgLT0gMikgKiBrICogKChzICsgMSkgKiBrICsgcykgKyAyKTtcbiAgICB9LFxuICAgIGJvdW5jZUluOiBmdW5jdGlvbiAoaykge1xuICAgICAgICByZXR1cm4gMSAtIGVhc2luZ0Z1bmNzLmJvdW5jZU91dCgxIC0gayk7XG4gICAgfSxcbiAgICBib3VuY2VPdXQ6IGZ1bmN0aW9uIChrKSB7XG4gICAgICAgIGlmIChrIDwgKDEgLyAyLjc1KSkge1xuICAgICAgICAgICAgcmV0dXJuIDcuNTYyNSAqIGsgKiBrO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGsgPCAoMiAvIDIuNzUpKSB7XG4gICAgICAgICAgICByZXR1cm4gNy41NjI1ICogKGsgLT0gKDEuNSAvIDIuNzUpKSAqIGsgKyAwLjc1O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGsgPCAoMi41IC8gMi43NSkpIHtcbiAgICAgICAgICAgIHJldHVybiA3LjU2MjUgKiAoayAtPSAoMi4yNSAvIDIuNzUpKSAqIGsgKyAwLjkzNzU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gNy41NjI1ICogKGsgLT0gKDIuNjI1IC8gMi43NSkpICogayArIDAuOTg0Mzc1O1xuICAgICAgICB9XG4gICAgfSxcbiAgICBib3VuY2VJbk91dDogZnVuY3Rpb24gKGspIHtcbiAgICAgICAgaWYgKGsgPCAwLjUpIHtcbiAgICAgICAgICAgIHJldHVybiBlYXNpbmdGdW5jcy5ib3VuY2VJbihrICogMikgKiAwLjU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVhc2luZ0Z1bmNzLmJvdW5jZU91dChrICogMiAtIDEpICogMC41ICsgMC41O1xuICAgIH1cbn07XG5leHBvcnQgZGVmYXVsdCBlYXNpbmdGdW5jcztcbiIsImltcG9ydCB7IGNyZWF0ZSBhcyB2MkNyZWF0ZSwgZGlzdFNxdWFyZSBhcyB2MkRpc3RTcXVhcmUgfSBmcm9tICcuL3ZlY3Rvci5qcyc7XG52YXIgbWF0aFBvdyA9IE1hdGgucG93O1xudmFyIG1hdGhTcXJ0ID0gTWF0aC5zcXJ0O1xudmFyIEVQU0lMT04gPSAxZS04O1xudmFyIEVQU0lMT05fTlVNRVJJQyA9IDFlLTQ7XG52YXIgVEhSRUVfU1FSVCA9IG1hdGhTcXJ0KDMpO1xudmFyIE9ORV9USElSRCA9IDEgLyAzO1xudmFyIF92MCA9IHYyQ3JlYXRlKCk7XG52YXIgX3YxID0gdjJDcmVhdGUoKTtcbnZhciBfdjIgPSB2MkNyZWF0ZSgpO1xuZnVuY3Rpb24gaXNBcm91bmRaZXJvKHZhbCkge1xuICAgIHJldHVybiB2YWwgPiAtRVBTSUxPTiAmJiB2YWwgPCBFUFNJTE9OO1xufVxuZnVuY3Rpb24gaXNOb3RBcm91bmRaZXJvKHZhbCkge1xuICAgIHJldHVybiB2YWwgPiBFUFNJTE9OIHx8IHZhbCA8IC1FUFNJTE9OO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGN1YmljQXQocDAsIHAxLCBwMiwgcDMsIHQpIHtcbiAgICB2YXIgb25ldCA9IDEgLSB0O1xuICAgIHJldHVybiBvbmV0ICogb25ldCAqIChvbmV0ICogcDAgKyAzICogdCAqIHAxKVxuICAgICAgICArIHQgKiB0ICogKHQgKiBwMyArIDMgKiBvbmV0ICogcDIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGN1YmljRGVyaXZhdGl2ZUF0KHAwLCBwMSwgcDIsIHAzLCB0KSB7XG4gICAgdmFyIG9uZXQgPSAxIC0gdDtcbiAgICByZXR1cm4gMyAqICgoKHAxIC0gcDApICogb25ldCArIDIgKiAocDIgLSBwMSkgKiB0KSAqIG9uZXRcbiAgICAgICAgKyAocDMgLSBwMikgKiB0ICogdCk7XG59XG5leHBvcnQgZnVuY3Rpb24gY3ViaWNSb290QXQocDAsIHAxLCBwMiwgcDMsIHZhbCwgcm9vdHMpIHtcbiAgICB2YXIgYSA9IHAzICsgMyAqIChwMSAtIHAyKSAtIHAwO1xuICAgIHZhciBiID0gMyAqIChwMiAtIHAxICogMiArIHAwKTtcbiAgICB2YXIgYyA9IDMgKiAocDEgLSBwMCk7XG4gICAgdmFyIGQgPSBwMCAtIHZhbDtcbiAgICB2YXIgQSA9IGIgKiBiIC0gMyAqIGEgKiBjO1xuICAgIHZhciBCID0gYiAqIGMgLSA5ICogYSAqIGQ7XG4gICAgdmFyIEMgPSBjICogYyAtIDMgKiBiICogZDtcbiAgICB2YXIgbiA9IDA7XG4gICAgaWYgKGlzQXJvdW5kWmVybyhBKSAmJiBpc0Fyb3VuZFplcm8oQikpIHtcbiAgICAgICAgaWYgKGlzQXJvdW5kWmVybyhiKSkge1xuICAgICAgICAgICAgcm9vdHNbMF0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHQxID0gLWMgLyBiO1xuICAgICAgICAgICAgaWYgKHQxID49IDAgJiYgdDEgPD0gMSkge1xuICAgICAgICAgICAgICAgIHJvb3RzW24rK10gPSB0MTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIGRpc2MgPSBCICogQiAtIDQgKiBBICogQztcbiAgICAgICAgaWYgKGlzQXJvdW5kWmVybyhkaXNjKSkge1xuICAgICAgICAgICAgdmFyIEsgPSBCIC8gQTtcbiAgICAgICAgICAgIHZhciB0MSA9IC1iIC8gYSArIEs7XG4gICAgICAgICAgICB2YXIgdDIgPSAtSyAvIDI7XG4gICAgICAgICAgICBpZiAodDEgPj0gMCAmJiB0MSA8PSAxKSB7XG4gICAgICAgICAgICAgICAgcm9vdHNbbisrXSA9IHQxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHQyID49IDAgJiYgdDIgPD0gMSkge1xuICAgICAgICAgICAgICAgIHJvb3RzW24rK10gPSB0MjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkaXNjID4gMCkge1xuICAgICAgICAgICAgdmFyIGRpc2NTcXJ0ID0gbWF0aFNxcnQoZGlzYyk7XG4gICAgICAgICAgICB2YXIgWTEgPSBBICogYiArIDEuNSAqIGEgKiAoLUIgKyBkaXNjU3FydCk7XG4gICAgICAgICAgICB2YXIgWTIgPSBBICogYiArIDEuNSAqIGEgKiAoLUIgLSBkaXNjU3FydCk7XG4gICAgICAgICAgICBpZiAoWTEgPCAwKSB7XG4gICAgICAgICAgICAgICAgWTEgPSAtbWF0aFBvdygtWTEsIE9ORV9USElSRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBZMSA9IG1hdGhQb3coWTEsIE9ORV9USElSRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoWTIgPCAwKSB7XG4gICAgICAgICAgICAgICAgWTIgPSAtbWF0aFBvdygtWTIsIE9ORV9USElSRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBZMiA9IG1hdGhQb3coWTIsIE9ORV9USElSRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdDEgPSAoLWIgLSAoWTEgKyBZMikpIC8gKDMgKiBhKTtcbiAgICAgICAgICAgIGlmICh0MSA+PSAwICYmIHQxIDw9IDEpIHtcbiAgICAgICAgICAgICAgICByb290c1tuKytdID0gdDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgVCA9ICgyICogQSAqIGIgLSAzICogYSAqIEIpIC8gKDIgKiBtYXRoU3FydChBICogQSAqIEEpKTtcbiAgICAgICAgICAgIHZhciB0aGV0YSA9IE1hdGguYWNvcyhUKSAvIDM7XG4gICAgICAgICAgICB2YXIgQVNxcnQgPSBtYXRoU3FydChBKTtcbiAgICAgICAgICAgIHZhciB0bXAgPSBNYXRoLmNvcyh0aGV0YSk7XG4gICAgICAgICAgICB2YXIgdDEgPSAoLWIgLSAyICogQVNxcnQgKiB0bXApIC8gKDMgKiBhKTtcbiAgICAgICAgICAgIHZhciB0MiA9ICgtYiArIEFTcXJ0ICogKHRtcCArIFRIUkVFX1NRUlQgKiBNYXRoLnNpbih0aGV0YSkpKSAvICgzICogYSk7XG4gICAgICAgICAgICB2YXIgdDMgPSAoLWIgKyBBU3FydCAqICh0bXAgLSBUSFJFRV9TUVJUICogTWF0aC5zaW4odGhldGEpKSkgLyAoMyAqIGEpO1xuICAgICAgICAgICAgaWYgKHQxID49IDAgJiYgdDEgPD0gMSkge1xuICAgICAgICAgICAgICAgIHJvb3RzW24rK10gPSB0MTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0MiA+PSAwICYmIHQyIDw9IDEpIHtcbiAgICAgICAgICAgICAgICByb290c1tuKytdID0gdDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodDMgPj0gMCAmJiB0MyA8PSAxKSB7XG4gICAgICAgICAgICAgICAgcm9vdHNbbisrXSA9IHQzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGN1YmljRXh0cmVtYShwMCwgcDEsIHAyLCBwMywgZXh0cmVtYSkge1xuICAgIHZhciBiID0gNiAqIHAyIC0gMTIgKiBwMSArIDYgKiBwMDtcbiAgICB2YXIgYSA9IDkgKiBwMSArIDMgKiBwMyAtIDMgKiBwMCAtIDkgKiBwMjtcbiAgICB2YXIgYyA9IDMgKiBwMSAtIDMgKiBwMDtcbiAgICB2YXIgbiA9IDA7XG4gICAgaWYgKGlzQXJvdW5kWmVybyhhKSkge1xuICAgICAgICBpZiAoaXNOb3RBcm91bmRaZXJvKGIpKSB7XG4gICAgICAgICAgICB2YXIgdDEgPSAtYyAvIGI7XG4gICAgICAgICAgICBpZiAodDEgPj0gMCAmJiB0MSA8PSAxKSB7XG4gICAgICAgICAgICAgICAgZXh0cmVtYVtuKytdID0gdDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciBkaXNjID0gYiAqIGIgLSA0ICogYSAqIGM7XG4gICAgICAgIGlmIChpc0Fyb3VuZFplcm8oZGlzYykpIHtcbiAgICAgICAgICAgIGV4dHJlbWFbMF0gPSAtYiAvICgyICogYSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGlzYyA+IDApIHtcbiAgICAgICAgICAgIHZhciBkaXNjU3FydCA9IG1hdGhTcXJ0KGRpc2MpO1xuICAgICAgICAgICAgdmFyIHQxID0gKC1iICsgZGlzY1NxcnQpIC8gKDIgKiBhKTtcbiAgICAgICAgICAgIHZhciB0MiA9ICgtYiAtIGRpc2NTcXJ0KSAvICgyICogYSk7XG4gICAgICAgICAgICBpZiAodDEgPj0gMCAmJiB0MSA8PSAxKSB7XG4gICAgICAgICAgICAgICAgZXh0cmVtYVtuKytdID0gdDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodDIgPj0gMCAmJiB0MiA8PSAxKSB7XG4gICAgICAgICAgICAgICAgZXh0cmVtYVtuKytdID0gdDI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG47XG59XG5leHBvcnQgZnVuY3Rpb24gY3ViaWNTdWJkaXZpZGUocDAsIHAxLCBwMiwgcDMsIHQsIG91dCkge1xuICAgIHZhciBwMDEgPSAocDEgLSBwMCkgKiB0ICsgcDA7XG4gICAgdmFyIHAxMiA9IChwMiAtIHAxKSAqIHQgKyBwMTtcbiAgICB2YXIgcDIzID0gKHAzIC0gcDIpICogdCArIHAyO1xuICAgIHZhciBwMDEyID0gKHAxMiAtIHAwMSkgKiB0ICsgcDAxO1xuICAgIHZhciBwMTIzID0gKHAyMyAtIHAxMikgKiB0ICsgcDEyO1xuICAgIHZhciBwMDEyMyA9IChwMTIzIC0gcDAxMikgKiB0ICsgcDAxMjtcbiAgICBvdXRbMF0gPSBwMDtcbiAgICBvdXRbMV0gPSBwMDE7XG4gICAgb3V0WzJdID0gcDAxMjtcbiAgICBvdXRbM10gPSBwMDEyMztcbiAgICBvdXRbNF0gPSBwMDEyMztcbiAgICBvdXRbNV0gPSBwMTIzO1xuICAgIG91dFs2XSA9IHAyMztcbiAgICBvdXRbN10gPSBwMztcbn1cbmV4cG9ydCBmdW5jdGlvbiBjdWJpY1Byb2plY3RQb2ludCh4MCwgeTAsIHgxLCB5MSwgeDIsIHkyLCB4MywgeTMsIHgsIHksIG91dCkge1xuICAgIHZhciB0O1xuICAgIHZhciBpbnRlcnZhbCA9IDAuMDA1O1xuICAgIHZhciBkID0gSW5maW5pdHk7XG4gICAgdmFyIHByZXY7XG4gICAgdmFyIG5leHQ7XG4gICAgdmFyIGQxO1xuICAgIHZhciBkMjtcbiAgICBfdjBbMF0gPSB4O1xuICAgIF92MFsxXSA9IHk7XG4gICAgZm9yICh2YXIgX3QgPSAwOyBfdCA8IDE7IF90ICs9IDAuMDUpIHtcbiAgICAgICAgX3YxWzBdID0gY3ViaWNBdCh4MCwgeDEsIHgyLCB4MywgX3QpO1xuICAgICAgICBfdjFbMV0gPSBjdWJpY0F0KHkwLCB5MSwgeTIsIHkzLCBfdCk7XG4gICAgICAgIGQxID0gdjJEaXN0U3F1YXJlKF92MCwgX3YxKTtcbiAgICAgICAgaWYgKGQxIDwgZCkge1xuICAgICAgICAgICAgdCA9IF90O1xuICAgICAgICAgICAgZCA9IGQxO1xuICAgICAgICB9XG4gICAgfVxuICAgIGQgPSBJbmZpbml0eTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDMyOyBpKyspIHtcbiAgICAgICAgaWYgKGludGVydmFsIDwgRVBTSUxPTl9OVU1FUklDKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBwcmV2ID0gdCAtIGludGVydmFsO1xuICAgICAgICBuZXh0ID0gdCArIGludGVydmFsO1xuICAgICAgICBfdjFbMF0gPSBjdWJpY0F0KHgwLCB4MSwgeDIsIHgzLCBwcmV2KTtcbiAgICAgICAgX3YxWzFdID0gY3ViaWNBdCh5MCwgeTEsIHkyLCB5MywgcHJldik7XG4gICAgICAgIGQxID0gdjJEaXN0U3F1YXJlKF92MSwgX3YwKTtcbiAgICAgICAgaWYgKHByZXYgPj0gMCAmJiBkMSA8IGQpIHtcbiAgICAgICAgICAgIHQgPSBwcmV2O1xuICAgICAgICAgICAgZCA9IGQxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgX3YyWzBdID0gY3ViaWNBdCh4MCwgeDEsIHgyLCB4MywgbmV4dCk7XG4gICAgICAgICAgICBfdjJbMV0gPSBjdWJpY0F0KHkwLCB5MSwgeTIsIHkzLCBuZXh0KTtcbiAgICAgICAgICAgIGQyID0gdjJEaXN0U3F1YXJlKF92MiwgX3YwKTtcbiAgICAgICAgICAgIGlmIChuZXh0IDw9IDEgJiYgZDIgPCBkKSB7XG4gICAgICAgICAgICAgICAgdCA9IG5leHQ7XG4gICAgICAgICAgICAgICAgZCA9IGQyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW50ZXJ2YWwgKj0gMC41O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChvdXQpIHtcbiAgICAgICAgb3V0WzBdID0gY3ViaWNBdCh4MCwgeDEsIHgyLCB4MywgdCk7XG4gICAgICAgIG91dFsxXSA9IGN1YmljQXQoeTAsIHkxLCB5MiwgeTMsIHQpO1xuICAgIH1cbiAgICByZXR1cm4gbWF0aFNxcnQoZCk7XG59XG5leHBvcnQgZnVuY3Rpb24gY3ViaWNMZW5ndGgoeDAsIHkwLCB4MSwgeTEsIHgyLCB5MiwgeDMsIHkzLCBpdGVyYXRpb24pIHtcbiAgICB2YXIgcHggPSB4MDtcbiAgICB2YXIgcHkgPSB5MDtcbiAgICB2YXIgZCA9IDA7XG4gICAgdmFyIHN0ZXAgPSAxIC8gaXRlcmF0aW9uO1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IGl0ZXJhdGlvbjsgaSsrKSB7XG4gICAgICAgIHZhciB0ID0gaSAqIHN0ZXA7XG4gICAgICAgIHZhciB4ID0gY3ViaWNBdCh4MCwgeDEsIHgyLCB4MywgdCk7XG4gICAgICAgIHZhciB5ID0gY3ViaWNBdCh5MCwgeTEsIHkyLCB5MywgdCk7XG4gICAgICAgIHZhciBkeCA9IHggLSBweDtcbiAgICAgICAgdmFyIGR5ID0geSAtIHB5O1xuICAgICAgICBkICs9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gICAgICAgIHB4ID0geDtcbiAgICAgICAgcHkgPSB5O1xuICAgIH1cbiAgICByZXR1cm4gZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBxdWFkcmF0aWNBdChwMCwgcDEsIHAyLCB0KSB7XG4gICAgdmFyIG9uZXQgPSAxIC0gdDtcbiAgICByZXR1cm4gb25ldCAqIChvbmV0ICogcDAgKyAyICogdCAqIHAxKSArIHQgKiB0ICogcDI7XG59XG5leHBvcnQgZnVuY3Rpb24gcXVhZHJhdGljRGVyaXZhdGl2ZUF0KHAwLCBwMSwgcDIsIHQpIHtcbiAgICByZXR1cm4gMiAqICgoMSAtIHQpICogKHAxIC0gcDApICsgdCAqIChwMiAtIHAxKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcXVhZHJhdGljUm9vdEF0KHAwLCBwMSwgcDIsIHZhbCwgcm9vdHMpIHtcbiAgICB2YXIgYSA9IHAwIC0gMiAqIHAxICsgcDI7XG4gICAgdmFyIGIgPSAyICogKHAxIC0gcDApO1xuICAgIHZhciBjID0gcDAgLSB2YWw7XG4gICAgdmFyIG4gPSAwO1xuICAgIGlmIChpc0Fyb3VuZFplcm8oYSkpIHtcbiAgICAgICAgaWYgKGlzTm90QXJvdW5kWmVybyhiKSkge1xuICAgICAgICAgICAgdmFyIHQxID0gLWMgLyBiO1xuICAgICAgICAgICAgaWYgKHQxID49IDAgJiYgdDEgPD0gMSkge1xuICAgICAgICAgICAgICAgIHJvb3RzW24rK10gPSB0MTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIGRpc2MgPSBiICogYiAtIDQgKiBhICogYztcbiAgICAgICAgaWYgKGlzQXJvdW5kWmVybyhkaXNjKSkge1xuICAgICAgICAgICAgdmFyIHQxID0gLWIgLyAoMiAqIGEpO1xuICAgICAgICAgICAgaWYgKHQxID49IDAgJiYgdDEgPD0gMSkge1xuICAgICAgICAgICAgICAgIHJvb3RzW24rK10gPSB0MTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkaXNjID4gMCkge1xuICAgICAgICAgICAgdmFyIGRpc2NTcXJ0ID0gbWF0aFNxcnQoZGlzYyk7XG4gICAgICAgICAgICB2YXIgdDEgPSAoLWIgKyBkaXNjU3FydCkgLyAoMiAqIGEpO1xuICAgICAgICAgICAgdmFyIHQyID0gKC1iIC0gZGlzY1NxcnQpIC8gKDIgKiBhKTtcbiAgICAgICAgICAgIGlmICh0MSA+PSAwICYmIHQxIDw9IDEpIHtcbiAgICAgICAgICAgICAgICByb290c1tuKytdID0gdDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodDIgPj0gMCAmJiB0MiA8PSAxKSB7XG4gICAgICAgICAgICAgICAgcm9vdHNbbisrXSA9IHQyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHF1YWRyYXRpY0V4dHJlbXVtKHAwLCBwMSwgcDIpIHtcbiAgICB2YXIgZGl2aWRlciA9IHAwICsgcDIgLSAyICogcDE7XG4gICAgaWYgKGRpdmlkZXIgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIDAuNTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAocDAgLSBwMSkgLyBkaXZpZGVyO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBxdWFkcmF0aWNTdWJkaXZpZGUocDAsIHAxLCBwMiwgdCwgb3V0KSB7XG4gICAgdmFyIHAwMSA9IChwMSAtIHAwKSAqIHQgKyBwMDtcbiAgICB2YXIgcDEyID0gKHAyIC0gcDEpICogdCArIHAxO1xuICAgIHZhciBwMDEyID0gKHAxMiAtIHAwMSkgKiB0ICsgcDAxO1xuICAgIG91dFswXSA9IHAwO1xuICAgIG91dFsxXSA9IHAwMTtcbiAgICBvdXRbMl0gPSBwMDEyO1xuICAgIG91dFszXSA9IHAwMTI7XG4gICAgb3V0WzRdID0gcDEyO1xuICAgIG91dFs1XSA9IHAyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHF1YWRyYXRpY1Byb2plY3RQb2ludCh4MCwgeTAsIHgxLCB5MSwgeDIsIHkyLCB4LCB5LCBvdXQpIHtcbiAgICB2YXIgdDtcbiAgICB2YXIgaW50ZXJ2YWwgPSAwLjAwNTtcbiAgICB2YXIgZCA9IEluZmluaXR5O1xuICAgIF92MFswXSA9IHg7XG4gICAgX3YwWzFdID0geTtcbiAgICBmb3IgKHZhciBfdCA9IDA7IF90IDwgMTsgX3QgKz0gMC4wNSkge1xuICAgICAgICBfdjFbMF0gPSBxdWFkcmF0aWNBdCh4MCwgeDEsIHgyLCBfdCk7XG4gICAgICAgIF92MVsxXSA9IHF1YWRyYXRpY0F0KHkwLCB5MSwgeTIsIF90KTtcbiAgICAgICAgdmFyIGQxID0gdjJEaXN0U3F1YXJlKF92MCwgX3YxKTtcbiAgICAgICAgaWYgKGQxIDwgZCkge1xuICAgICAgICAgICAgdCA9IF90O1xuICAgICAgICAgICAgZCA9IGQxO1xuICAgICAgICB9XG4gICAgfVxuICAgIGQgPSBJbmZpbml0eTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDMyOyBpKyspIHtcbiAgICAgICAgaWYgKGludGVydmFsIDwgRVBTSUxPTl9OVU1FUklDKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJldiA9IHQgLSBpbnRlcnZhbDtcbiAgICAgICAgdmFyIG5leHQgPSB0ICsgaW50ZXJ2YWw7XG4gICAgICAgIF92MVswXSA9IHF1YWRyYXRpY0F0KHgwLCB4MSwgeDIsIHByZXYpO1xuICAgICAgICBfdjFbMV0gPSBxdWFkcmF0aWNBdCh5MCwgeTEsIHkyLCBwcmV2KTtcbiAgICAgICAgdmFyIGQxID0gdjJEaXN0U3F1YXJlKF92MSwgX3YwKTtcbiAgICAgICAgaWYgKHByZXYgPj0gMCAmJiBkMSA8IGQpIHtcbiAgICAgICAgICAgIHQgPSBwcmV2O1xuICAgICAgICAgICAgZCA9IGQxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgX3YyWzBdID0gcXVhZHJhdGljQXQoeDAsIHgxLCB4MiwgbmV4dCk7XG4gICAgICAgICAgICBfdjJbMV0gPSBxdWFkcmF0aWNBdCh5MCwgeTEsIHkyLCBuZXh0KTtcbiAgICAgICAgICAgIHZhciBkMiA9IHYyRGlzdFNxdWFyZShfdjIsIF92MCk7XG4gICAgICAgICAgICBpZiAobmV4dCA8PSAxICYmIGQyIDwgZCkge1xuICAgICAgICAgICAgICAgIHQgPSBuZXh0O1xuICAgICAgICAgICAgICAgIGQgPSBkMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGludGVydmFsICo9IDAuNTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAob3V0KSB7XG4gICAgICAgIG91dFswXSA9IHF1YWRyYXRpY0F0KHgwLCB4MSwgeDIsIHQpO1xuICAgICAgICBvdXRbMV0gPSBxdWFkcmF0aWNBdCh5MCwgeTEsIHkyLCB0KTtcbiAgICB9XG4gICAgcmV0dXJuIG1hdGhTcXJ0KGQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHF1YWRyYXRpY0xlbmd0aCh4MCwgeTAsIHgxLCB5MSwgeDIsIHkyLCBpdGVyYXRpb24pIHtcbiAgICB2YXIgcHggPSB4MDtcbiAgICB2YXIgcHkgPSB5MDtcbiAgICB2YXIgZCA9IDA7XG4gICAgdmFyIHN0ZXAgPSAxIC8gaXRlcmF0aW9uO1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IGl0ZXJhdGlvbjsgaSsrKSB7XG4gICAgICAgIHZhciB0ID0gaSAqIHN0ZXA7XG4gICAgICAgIHZhciB4ID0gcXVhZHJhdGljQXQoeDAsIHgxLCB4MiwgdCk7XG4gICAgICAgIHZhciB5ID0gcXVhZHJhdGljQXQoeTAsIHkxLCB5MiwgdCk7XG4gICAgICAgIHZhciBkeCA9IHggLSBweDtcbiAgICAgICAgdmFyIGR5ID0geSAtIHB5O1xuICAgICAgICBkICs9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gICAgICAgIHB4ID0geDtcbiAgICAgICAgcHkgPSB5O1xuICAgIH1cbiAgICByZXR1cm4gZDtcbn1cbiIsImltcG9ydCB7IGN1YmljQXQsIGN1YmljUm9vdEF0IH0gZnJvbSAnLi4vY29yZS9jdXJ2ZS5qcyc7XG5pbXBvcnQgeyB0cmltIH0gZnJvbSAnLi4vY29yZS91dGlsLmpzJztcbnZhciByZWdleHAgPSAvY3ViaWMtYmV6aWVyXFwoKFswLTksXFwuZSBdKylcXCkvO1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUN1YmljRWFzaW5nRnVuYyhjdWJpY0Vhc2luZ1N0cikge1xuICAgIHZhciBjdWJpYyA9IGN1YmljRWFzaW5nU3RyICYmIHJlZ2V4cC5leGVjKGN1YmljRWFzaW5nU3RyKTtcbiAgICBpZiAoY3ViaWMpIHtcbiAgICAgICAgdmFyIHBvaW50cyA9IGN1YmljWzFdLnNwbGl0KCcsJyk7XG4gICAgICAgIHZhciBhXzEgPSArdHJpbShwb2ludHNbMF0pO1xuICAgICAgICB2YXIgYl8xID0gK3RyaW0ocG9pbnRzWzFdKTtcbiAgICAgICAgdmFyIGNfMSA9ICt0cmltKHBvaW50c1syXSk7XG4gICAgICAgIHZhciBkXzEgPSArdHJpbShwb2ludHNbM10pO1xuICAgICAgICBpZiAoaXNOYU4oYV8xICsgYl8xICsgY18xICsgZF8xKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciByb290c18xID0gW107XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAocCkge1xuICAgICAgICAgICAgcmV0dXJuIHAgPD0gMFxuICAgICAgICAgICAgICAgID8gMCA6IHAgPj0gMVxuICAgICAgICAgICAgICAgID8gMVxuICAgICAgICAgICAgICAgIDogY3ViaWNSb290QXQoMCwgYV8xLCBjXzEsIDEsIHAsIHJvb3RzXzEpICYmIGN1YmljQXQoMCwgYl8xLCBkXzEsIDEsIHJvb3RzXzFbMF0pO1xuICAgICAgICB9O1xuICAgIH1cbn1cbiIsImltcG9ydCBlYXNpbmdGdW5jcyBmcm9tICcuL2Vhc2luZy5qcyc7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uLCBub29wIH0gZnJvbSAnLi4vY29yZS91dGlsLmpzJztcbmltcG9ydCB7IGNyZWF0ZUN1YmljRWFzaW5nRnVuYyB9IGZyb20gJy4vY3ViaWNFYXNpbmcuanMnO1xudmFyIENsaXAgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENsaXAob3B0cykge1xuICAgICAgICB0aGlzLl9pbml0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fc3RhcnRUaW1lID0gMDtcbiAgICAgICAgdGhpcy5fcGF1c2VkVGltZSA9IDA7XG4gICAgICAgIHRoaXMuX3BhdXNlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9saWZlID0gb3B0cy5saWZlIHx8IDEwMDA7XG4gICAgICAgIHRoaXMuX2RlbGF5ID0gb3B0cy5kZWxheSB8fCAwO1xuICAgICAgICB0aGlzLmxvb3AgPSBvcHRzLmxvb3AgfHwgZmFsc2U7XG4gICAgICAgIHRoaXMub25mcmFtZSA9IG9wdHMub25mcmFtZSB8fCBub29wO1xuICAgICAgICB0aGlzLm9uZGVzdHJveSA9IG9wdHMub25kZXN0cm95IHx8IG5vb3A7XG4gICAgICAgIHRoaXMub25yZXN0YXJ0ID0gb3B0cy5vbnJlc3RhcnQgfHwgbm9vcDtcbiAgICAgICAgb3B0cy5lYXNpbmcgJiYgdGhpcy5zZXRFYXNpbmcob3B0cy5lYXNpbmcpO1xuICAgIH1cbiAgICBDbGlwLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24gKGdsb2JhbFRpbWUsIGRlbHRhVGltZSkge1xuICAgICAgICBpZiAoIXRoaXMuX2luaXRlZCkge1xuICAgICAgICAgICAgdGhpcy5fc3RhcnRUaW1lID0gZ2xvYmFsVGltZSArIHRoaXMuX2RlbGF5O1xuICAgICAgICAgICAgdGhpcy5faW5pdGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fcGF1c2VkKSB7XG4gICAgICAgICAgICB0aGlzLl9wYXVzZWRUaW1lICs9IGRlbHRhVGltZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGlmZSA9IHRoaXMuX2xpZmU7XG4gICAgICAgIHZhciBlbGFwc2VkVGltZSA9IGdsb2JhbFRpbWUgLSB0aGlzLl9zdGFydFRpbWUgLSB0aGlzLl9wYXVzZWRUaW1lO1xuICAgICAgICB2YXIgcGVyY2VudCA9IGVsYXBzZWRUaW1lIC8gbGlmZTtcbiAgICAgICAgaWYgKHBlcmNlbnQgPCAwKSB7XG4gICAgICAgICAgICBwZXJjZW50ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBwZXJjZW50ID0gTWF0aC5taW4ocGVyY2VudCwgMSk7XG4gICAgICAgIHZhciBlYXNpbmdGdW5jID0gdGhpcy5lYXNpbmdGdW5jO1xuICAgICAgICB2YXIgc2NoZWR1bGUgPSBlYXNpbmdGdW5jID8gZWFzaW5nRnVuYyhwZXJjZW50KSA6IHBlcmNlbnQ7XG4gICAgICAgIHRoaXMub25mcmFtZShzY2hlZHVsZSk7XG4gICAgICAgIGlmIChwZXJjZW50ID09PSAxKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5sb29wKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlbWFpbmRlciA9IGVsYXBzZWRUaW1lICUgbGlmZTtcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGFydFRpbWUgPSBnbG9iYWxUaW1lIC0gcmVtYWluZGVyO1xuICAgICAgICAgICAgICAgIHRoaXMuX3BhdXNlZFRpbWUgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMub25yZXN0YXJ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBDbGlwLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fcGF1c2VkID0gdHJ1ZTtcbiAgICB9O1xuICAgIENsaXAucHJvdG90eXBlLnJlc3VtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fcGF1c2VkID0gZmFsc2U7XG4gICAgfTtcbiAgICBDbGlwLnByb3RvdHlwZS5zZXRFYXNpbmcgPSBmdW5jdGlvbiAoZWFzaW5nKSB7XG4gICAgICAgIHRoaXMuZWFzaW5nID0gZWFzaW5nO1xuICAgICAgICB0aGlzLmVhc2luZ0Z1bmMgPSBpc0Z1bmN0aW9uKGVhc2luZylcbiAgICAgICAgICAgID8gZWFzaW5nXG4gICAgICAgICAgICA6IGVhc2luZ0Z1bmNzW2Vhc2luZ10gfHwgY3JlYXRlQ3ViaWNFYXNpbmdGdW5jKGVhc2luZyk7XG4gICAgfTtcbiAgICByZXR1cm4gQ2xpcDtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBDbGlwO1xuIiwidmFyIEVudHJ5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBFbnRyeSh2YWwpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbDtcbiAgICB9XG4gICAgcmV0dXJuIEVudHJ5O1xufSgpKTtcbmV4cG9ydCB7IEVudHJ5IH07XG52YXIgTGlua2VkTGlzdCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTGlua2VkTGlzdCgpIHtcbiAgICAgICAgdGhpcy5fbGVuID0gMDtcbiAgICB9XG4gICAgTGlua2VkTGlzdC5wcm90b3R5cGUuaW5zZXJ0ID0gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICB2YXIgZW50cnkgPSBuZXcgRW50cnkodmFsKTtcbiAgICAgICAgdGhpcy5pbnNlcnRFbnRyeShlbnRyeSk7XG4gICAgICAgIHJldHVybiBlbnRyeTtcbiAgICB9O1xuICAgIExpbmtlZExpc3QucHJvdG90eXBlLmluc2VydEVudHJ5ID0gZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgICAgIGlmICghdGhpcy5oZWFkKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSBlbnRyeTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudGFpbC5uZXh0ID0gZW50cnk7XG4gICAgICAgICAgICBlbnRyeS5wcmV2ID0gdGhpcy50YWlsO1xuICAgICAgICAgICAgZW50cnkubmV4dCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnRhaWwgPSBlbnRyeTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9sZW4rKztcbiAgICB9O1xuICAgIExpbmtlZExpc3QucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChlbnRyeSkge1xuICAgICAgICB2YXIgcHJldiA9IGVudHJ5LnByZXY7XG4gICAgICAgIHZhciBuZXh0ID0gZW50cnkubmV4dDtcbiAgICAgICAgaWYgKHByZXYpIHtcbiAgICAgICAgICAgIHByZXYubmV4dCA9IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhlYWQgPSBuZXh0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXh0KSB7XG4gICAgICAgICAgICBuZXh0LnByZXYgPSBwcmV2O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50YWlsID0gcHJldjtcbiAgICAgICAgfVxuICAgICAgICBlbnRyeS5uZXh0ID0gZW50cnkucHJldiA9IG51bGw7XG4gICAgICAgIHRoaXMuX2xlbi0tO1xuICAgIH07XG4gICAgTGlua2VkTGlzdC5wcm90b3R5cGUubGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGVuO1xuICAgIH07XG4gICAgTGlua2VkTGlzdC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG51bGw7XG4gICAgICAgIHRoaXMuX2xlbiA9IDA7XG4gICAgfTtcbiAgICByZXR1cm4gTGlua2VkTGlzdDtcbn0oKSk7XG5leHBvcnQgeyBMaW5rZWRMaXN0IH07XG52YXIgTFJVID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBMUlUobWF4U2l6ZSkge1xuICAgICAgICB0aGlzLl9saXN0ID0gbmV3IExpbmtlZExpc3QoKTtcbiAgICAgICAgdGhpcy5fbWF4U2l6ZSA9IDEwO1xuICAgICAgICB0aGlzLl9tYXAgPSB7fTtcbiAgICAgICAgdGhpcy5fbWF4U2l6ZSA9IG1heFNpemU7XG4gICAgfVxuICAgIExSVS5wcm90b3R5cGUucHV0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdmFyIGxpc3QgPSB0aGlzLl9saXN0O1xuICAgICAgICB2YXIgbWFwID0gdGhpcy5fbWFwO1xuICAgICAgICB2YXIgcmVtb3ZlZCA9IG51bGw7XG4gICAgICAgIGlmIChtYXBba2V5XSA9PSBudWxsKSB7XG4gICAgICAgICAgICB2YXIgbGVuID0gbGlzdC5sZW4oKTtcbiAgICAgICAgICAgIHZhciBlbnRyeSA9IHRoaXMuX2xhc3RSZW1vdmVkRW50cnk7XG4gICAgICAgICAgICBpZiAobGVuID49IHRoaXMuX21heFNpemUgJiYgbGVuID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBsZWFzdFVzZWRFbnRyeSA9IGxpc3QuaGVhZDtcbiAgICAgICAgICAgICAgICBsaXN0LnJlbW92ZShsZWFzdFVzZWRFbnRyeSk7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG1hcFtsZWFzdFVzZWRFbnRyeS5rZXldO1xuICAgICAgICAgICAgICAgIHJlbW92ZWQgPSBsZWFzdFVzZWRFbnRyeS52YWx1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLl9sYXN0UmVtb3ZlZEVudHJ5ID0gbGVhc3RVc2VkRW50cnk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZW50cnkpIHtcbiAgICAgICAgICAgICAgICBlbnRyeS52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZW50cnkgPSBuZXcgRW50cnkodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZW50cnkua2V5ID0ga2V5O1xuICAgICAgICAgICAgbGlzdC5pbnNlcnRFbnRyeShlbnRyeSk7XG4gICAgICAgICAgICBtYXBba2V5XSA9IGVudHJ5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZW1vdmVkO1xuICAgIH07XG4gICAgTFJVLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMuX21hcFtrZXldO1xuICAgICAgICB2YXIgbGlzdCA9IHRoaXMuX2xpc3Q7XG4gICAgICAgIGlmIChlbnRyeSAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoZW50cnkgIT09IGxpc3QudGFpbCkge1xuICAgICAgICAgICAgICAgIGxpc3QucmVtb3ZlKGVudHJ5KTtcbiAgICAgICAgICAgICAgICBsaXN0Lmluc2VydEVudHJ5KGVudHJ5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlbnRyeS52YWx1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTFJVLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fbGlzdC5jbGVhcigpO1xuICAgICAgICB0aGlzLl9tYXAgPSB7fTtcbiAgICB9O1xuICAgIExSVS5wcm90b3R5cGUubGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGlzdC5sZW4oKTtcbiAgICB9O1xuICAgIHJldHVybiBMUlU7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgTFJVO1xuIiwiaW1wb3J0IExSVSBmcm9tICcuLi9jb3JlL0xSVS5qcyc7XG52YXIga0NTU0NvbG9yVGFibGUgPSB7XG4gICAgJ3RyYW5zcGFyZW50JzogWzAsIDAsIDAsIDBdLCAnYWxpY2VibHVlJzogWzI0MCwgMjQ4LCAyNTUsIDFdLFxuICAgICdhbnRpcXVld2hpdGUnOiBbMjUwLCAyMzUsIDIxNSwgMV0sICdhcXVhJzogWzAsIDI1NSwgMjU1LCAxXSxcbiAgICAnYXF1YW1hcmluZSc6IFsxMjcsIDI1NSwgMjEyLCAxXSwgJ2F6dXJlJzogWzI0MCwgMjU1LCAyNTUsIDFdLFxuICAgICdiZWlnZSc6IFsyNDUsIDI0NSwgMjIwLCAxXSwgJ2Jpc3F1ZSc6IFsyNTUsIDIyOCwgMTk2LCAxXSxcbiAgICAnYmxhY2snOiBbMCwgMCwgMCwgMV0sICdibGFuY2hlZGFsbW9uZCc6IFsyNTUsIDIzNSwgMjA1LCAxXSxcbiAgICAnYmx1ZSc6IFswLCAwLCAyNTUsIDFdLCAnYmx1ZXZpb2xldCc6IFsxMzgsIDQzLCAyMjYsIDFdLFxuICAgICdicm93bic6IFsxNjUsIDQyLCA0MiwgMV0sICdidXJseXdvb2QnOiBbMjIyLCAxODQsIDEzNSwgMV0sXG4gICAgJ2NhZGV0Ymx1ZSc6IFs5NSwgMTU4LCAxNjAsIDFdLCAnY2hhcnRyZXVzZSc6IFsxMjcsIDI1NSwgMCwgMV0sXG4gICAgJ2Nob2NvbGF0ZSc6IFsyMTAsIDEwNSwgMzAsIDFdLCAnY29yYWwnOiBbMjU1LCAxMjcsIDgwLCAxXSxcbiAgICAnY29ybmZsb3dlcmJsdWUnOiBbMTAwLCAxNDksIDIzNywgMV0sICdjb3Juc2lsayc6IFsyNTUsIDI0OCwgMjIwLCAxXSxcbiAgICAnY3JpbXNvbic6IFsyMjAsIDIwLCA2MCwgMV0sICdjeWFuJzogWzAsIDI1NSwgMjU1LCAxXSxcbiAgICAnZGFya2JsdWUnOiBbMCwgMCwgMTM5LCAxXSwgJ2RhcmtjeWFuJzogWzAsIDEzOSwgMTM5LCAxXSxcbiAgICAnZGFya2dvbGRlbnJvZCc6IFsxODQsIDEzNCwgMTEsIDFdLCAnZGFya2dyYXknOiBbMTY5LCAxNjksIDE2OSwgMV0sXG4gICAgJ2RhcmtncmVlbic6IFswLCAxMDAsIDAsIDFdLCAnZGFya2dyZXknOiBbMTY5LCAxNjksIDE2OSwgMV0sXG4gICAgJ2RhcmtraGFraSc6IFsxODksIDE4MywgMTA3LCAxXSwgJ2RhcmttYWdlbnRhJzogWzEzOSwgMCwgMTM5LCAxXSxcbiAgICAnZGFya29saXZlZ3JlZW4nOiBbODUsIDEwNywgNDcsIDFdLCAnZGFya29yYW5nZSc6IFsyNTUsIDE0MCwgMCwgMV0sXG4gICAgJ2RhcmtvcmNoaWQnOiBbMTUzLCA1MCwgMjA0LCAxXSwgJ2RhcmtyZWQnOiBbMTM5LCAwLCAwLCAxXSxcbiAgICAnZGFya3NhbG1vbic6IFsyMzMsIDE1MCwgMTIyLCAxXSwgJ2RhcmtzZWFncmVlbic6IFsxNDMsIDE4OCwgMTQzLCAxXSxcbiAgICAnZGFya3NsYXRlYmx1ZSc6IFs3MiwgNjEsIDEzOSwgMV0sICdkYXJrc2xhdGVncmF5JzogWzQ3LCA3OSwgNzksIDFdLFxuICAgICdkYXJrc2xhdGVncmV5JzogWzQ3LCA3OSwgNzksIDFdLCAnZGFya3R1cnF1b2lzZSc6IFswLCAyMDYsIDIwOSwgMV0sXG4gICAgJ2Rhcmt2aW9sZXQnOiBbMTQ4LCAwLCAyMTEsIDFdLCAnZGVlcHBpbmsnOiBbMjU1LCAyMCwgMTQ3LCAxXSxcbiAgICAnZGVlcHNreWJsdWUnOiBbMCwgMTkxLCAyNTUsIDFdLCAnZGltZ3JheSc6IFsxMDUsIDEwNSwgMTA1LCAxXSxcbiAgICAnZGltZ3JleSc6IFsxMDUsIDEwNSwgMTA1LCAxXSwgJ2RvZGdlcmJsdWUnOiBbMzAsIDE0NCwgMjU1LCAxXSxcbiAgICAnZmlyZWJyaWNrJzogWzE3OCwgMzQsIDM0LCAxXSwgJ2Zsb3JhbHdoaXRlJzogWzI1NSwgMjUwLCAyNDAsIDFdLFxuICAgICdmb3Jlc3RncmVlbic6IFszNCwgMTM5LCAzNCwgMV0sICdmdWNoc2lhJzogWzI1NSwgMCwgMjU1LCAxXSxcbiAgICAnZ2FpbnNib3JvJzogWzIyMCwgMjIwLCAyMjAsIDFdLCAnZ2hvc3R3aGl0ZSc6IFsyNDgsIDI0OCwgMjU1LCAxXSxcbiAgICAnZ29sZCc6IFsyNTUsIDIxNSwgMCwgMV0sICdnb2xkZW5yb2QnOiBbMjE4LCAxNjUsIDMyLCAxXSxcbiAgICAnZ3JheSc6IFsxMjgsIDEyOCwgMTI4LCAxXSwgJ2dyZWVuJzogWzAsIDEyOCwgMCwgMV0sXG4gICAgJ2dyZWVueWVsbG93JzogWzE3MywgMjU1LCA0NywgMV0sICdncmV5JzogWzEyOCwgMTI4LCAxMjgsIDFdLFxuICAgICdob25leWRldyc6IFsyNDAsIDI1NSwgMjQwLCAxXSwgJ2hvdHBpbmsnOiBbMjU1LCAxMDUsIDE4MCwgMV0sXG4gICAgJ2luZGlhbnJlZCc6IFsyMDUsIDkyLCA5MiwgMV0sICdpbmRpZ28nOiBbNzUsIDAsIDEzMCwgMV0sXG4gICAgJ2l2b3J5JzogWzI1NSwgMjU1LCAyNDAsIDFdLCAna2hha2knOiBbMjQwLCAyMzAsIDE0MCwgMV0sXG4gICAgJ2xhdmVuZGVyJzogWzIzMCwgMjMwLCAyNTAsIDFdLCAnbGF2ZW5kZXJibHVzaCc6IFsyNTUsIDI0MCwgMjQ1LCAxXSxcbiAgICAnbGF3bmdyZWVuJzogWzEyNCwgMjUyLCAwLCAxXSwgJ2xlbW9uY2hpZmZvbic6IFsyNTUsIDI1MCwgMjA1LCAxXSxcbiAgICAnbGlnaHRibHVlJzogWzE3MywgMjE2LCAyMzAsIDFdLCAnbGlnaHRjb3JhbCc6IFsyNDAsIDEyOCwgMTI4LCAxXSxcbiAgICAnbGlnaHRjeWFuJzogWzIyNCwgMjU1LCAyNTUsIDFdLCAnbGlnaHRnb2xkZW5yb2R5ZWxsb3cnOiBbMjUwLCAyNTAsIDIxMCwgMV0sXG4gICAgJ2xpZ2h0Z3JheSc6IFsyMTEsIDIxMSwgMjExLCAxXSwgJ2xpZ2h0Z3JlZW4nOiBbMTQ0LCAyMzgsIDE0NCwgMV0sXG4gICAgJ2xpZ2h0Z3JleSc6IFsyMTEsIDIxMSwgMjExLCAxXSwgJ2xpZ2h0cGluayc6IFsyNTUsIDE4MiwgMTkzLCAxXSxcbiAgICAnbGlnaHRzYWxtb24nOiBbMjU1LCAxNjAsIDEyMiwgMV0sICdsaWdodHNlYWdyZWVuJzogWzMyLCAxNzgsIDE3MCwgMV0sXG4gICAgJ2xpZ2h0c2t5Ymx1ZSc6IFsxMzUsIDIwNiwgMjUwLCAxXSwgJ2xpZ2h0c2xhdGVncmF5JzogWzExOSwgMTM2LCAxNTMsIDFdLFxuICAgICdsaWdodHNsYXRlZ3JleSc6IFsxMTksIDEzNiwgMTUzLCAxXSwgJ2xpZ2h0c3RlZWxibHVlJzogWzE3NiwgMTk2LCAyMjIsIDFdLFxuICAgICdsaWdodHllbGxvdyc6IFsyNTUsIDI1NSwgMjI0LCAxXSwgJ2xpbWUnOiBbMCwgMjU1LCAwLCAxXSxcbiAgICAnbGltZWdyZWVuJzogWzUwLCAyMDUsIDUwLCAxXSwgJ2xpbmVuJzogWzI1MCwgMjQwLCAyMzAsIDFdLFxuICAgICdtYWdlbnRhJzogWzI1NSwgMCwgMjU1LCAxXSwgJ21hcm9vbic6IFsxMjgsIDAsIDAsIDFdLFxuICAgICdtZWRpdW1hcXVhbWFyaW5lJzogWzEwMiwgMjA1LCAxNzAsIDFdLCAnbWVkaXVtYmx1ZSc6IFswLCAwLCAyMDUsIDFdLFxuICAgICdtZWRpdW1vcmNoaWQnOiBbMTg2LCA4NSwgMjExLCAxXSwgJ21lZGl1bXB1cnBsZSc6IFsxNDcsIDExMiwgMjE5LCAxXSxcbiAgICAnbWVkaXVtc2VhZ3JlZW4nOiBbNjAsIDE3OSwgMTEzLCAxXSwgJ21lZGl1bXNsYXRlYmx1ZSc6IFsxMjMsIDEwNCwgMjM4LCAxXSxcbiAgICAnbWVkaXVtc3ByaW5nZ3JlZW4nOiBbMCwgMjUwLCAxNTQsIDFdLCAnbWVkaXVtdHVycXVvaXNlJzogWzcyLCAyMDksIDIwNCwgMV0sXG4gICAgJ21lZGl1bXZpb2xldHJlZCc6IFsxOTksIDIxLCAxMzMsIDFdLCAnbWlkbmlnaHRibHVlJzogWzI1LCAyNSwgMTEyLCAxXSxcbiAgICAnbWludGNyZWFtJzogWzI0NSwgMjU1LCAyNTAsIDFdLCAnbWlzdHlyb3NlJzogWzI1NSwgMjI4LCAyMjUsIDFdLFxuICAgICdtb2NjYXNpbic6IFsyNTUsIDIyOCwgMTgxLCAxXSwgJ25hdmFqb3doaXRlJzogWzI1NSwgMjIyLCAxNzMsIDFdLFxuICAgICduYXZ5JzogWzAsIDAsIDEyOCwgMV0sICdvbGRsYWNlJzogWzI1MywgMjQ1LCAyMzAsIDFdLFxuICAgICdvbGl2ZSc6IFsxMjgsIDEyOCwgMCwgMV0sICdvbGl2ZWRyYWInOiBbMTA3LCAxNDIsIDM1LCAxXSxcbiAgICAnb3JhbmdlJzogWzI1NSwgMTY1LCAwLCAxXSwgJ29yYW5nZXJlZCc6IFsyNTUsIDY5LCAwLCAxXSxcbiAgICAnb3JjaGlkJzogWzIxOCwgMTEyLCAyMTQsIDFdLCAncGFsZWdvbGRlbnJvZCc6IFsyMzgsIDIzMiwgMTcwLCAxXSxcbiAgICAncGFsZWdyZWVuJzogWzE1MiwgMjUxLCAxNTIsIDFdLCAncGFsZXR1cnF1b2lzZSc6IFsxNzUsIDIzOCwgMjM4LCAxXSxcbiAgICAncGFsZXZpb2xldHJlZCc6IFsyMTksIDExMiwgMTQ3LCAxXSwgJ3BhcGF5YXdoaXAnOiBbMjU1LCAyMzksIDIxMywgMV0sXG4gICAgJ3BlYWNocHVmZic6IFsyNTUsIDIxOCwgMTg1LCAxXSwgJ3BlcnUnOiBbMjA1LCAxMzMsIDYzLCAxXSxcbiAgICAncGluayc6IFsyNTUsIDE5MiwgMjAzLCAxXSwgJ3BsdW0nOiBbMjIxLCAxNjAsIDIyMSwgMV0sXG4gICAgJ3Bvd2RlcmJsdWUnOiBbMTc2LCAyMjQsIDIzMCwgMV0sICdwdXJwbGUnOiBbMTI4LCAwLCAxMjgsIDFdLFxuICAgICdyZWQnOiBbMjU1LCAwLCAwLCAxXSwgJ3Jvc3licm93bic6IFsxODgsIDE0MywgMTQzLCAxXSxcbiAgICAncm95YWxibHVlJzogWzY1LCAxMDUsIDIyNSwgMV0sICdzYWRkbGVicm93bic6IFsxMzksIDY5LCAxOSwgMV0sXG4gICAgJ3NhbG1vbic6IFsyNTAsIDEyOCwgMTE0LCAxXSwgJ3NhbmR5YnJvd24nOiBbMjQ0LCAxNjQsIDk2LCAxXSxcbiAgICAnc2VhZ3JlZW4nOiBbNDYsIDEzOSwgODcsIDFdLCAnc2Vhc2hlbGwnOiBbMjU1LCAyNDUsIDIzOCwgMV0sXG4gICAgJ3NpZW5uYSc6IFsxNjAsIDgyLCA0NSwgMV0sICdzaWx2ZXInOiBbMTkyLCAxOTIsIDE5MiwgMV0sXG4gICAgJ3NreWJsdWUnOiBbMTM1LCAyMDYsIDIzNSwgMV0sICdzbGF0ZWJsdWUnOiBbMTA2LCA5MCwgMjA1LCAxXSxcbiAgICAnc2xhdGVncmF5JzogWzExMiwgMTI4LCAxNDQsIDFdLCAnc2xhdGVncmV5JzogWzExMiwgMTI4LCAxNDQsIDFdLFxuICAgICdzbm93JzogWzI1NSwgMjUwLCAyNTAsIDFdLCAnc3ByaW5nZ3JlZW4nOiBbMCwgMjU1LCAxMjcsIDFdLFxuICAgICdzdGVlbGJsdWUnOiBbNzAsIDEzMCwgMTgwLCAxXSwgJ3Rhbic6IFsyMTAsIDE4MCwgMTQwLCAxXSxcbiAgICAndGVhbCc6IFswLCAxMjgsIDEyOCwgMV0sICd0aGlzdGxlJzogWzIxNiwgMTkxLCAyMTYsIDFdLFxuICAgICd0b21hdG8nOiBbMjU1LCA5OSwgNzEsIDFdLCAndHVycXVvaXNlJzogWzY0LCAyMjQsIDIwOCwgMV0sXG4gICAgJ3Zpb2xldCc6IFsyMzgsIDEzMCwgMjM4LCAxXSwgJ3doZWF0JzogWzI0NSwgMjIyLCAxNzksIDFdLFxuICAgICd3aGl0ZSc6IFsyNTUsIDI1NSwgMjU1LCAxXSwgJ3doaXRlc21va2UnOiBbMjQ1LCAyNDUsIDI0NSwgMV0sXG4gICAgJ3llbGxvdyc6IFsyNTUsIDI1NSwgMCwgMV0sICd5ZWxsb3dncmVlbic6IFsxNTQsIDIwNSwgNTAsIDFdXG59O1xuZnVuY3Rpb24gY2xhbXBDc3NCeXRlKGkpIHtcbiAgICBpID0gTWF0aC5yb3VuZChpKTtcbiAgICByZXR1cm4gaSA8IDAgPyAwIDogaSA+IDI1NSA/IDI1NSA6IGk7XG59XG5mdW5jdGlvbiBjbGFtcENzc0FuZ2xlKGkpIHtcbiAgICBpID0gTWF0aC5yb3VuZChpKTtcbiAgICByZXR1cm4gaSA8IDAgPyAwIDogaSA+IDM2MCA/IDM2MCA6IGk7XG59XG5mdW5jdGlvbiBjbGFtcENzc0Zsb2F0KGYpIHtcbiAgICByZXR1cm4gZiA8IDAgPyAwIDogZiA+IDEgPyAxIDogZjtcbn1cbmZ1bmN0aW9uIHBhcnNlQ3NzSW50KHZhbCkge1xuICAgIHZhciBzdHIgPSB2YWw7XG4gICAgaWYgKHN0ci5sZW5ndGggJiYgc3RyLmNoYXJBdChzdHIubGVuZ3RoIC0gMSkgPT09ICclJykge1xuICAgICAgICByZXR1cm4gY2xhbXBDc3NCeXRlKHBhcnNlRmxvYXQoc3RyKSAvIDEwMCAqIDI1NSk7XG4gICAgfVxuICAgIHJldHVybiBjbGFtcENzc0J5dGUocGFyc2VJbnQoc3RyLCAxMCkpO1xufVxuZnVuY3Rpb24gcGFyc2VDc3NGbG9hdCh2YWwpIHtcbiAgICB2YXIgc3RyID0gdmFsO1xuICAgIGlmIChzdHIubGVuZ3RoICYmIHN0ci5jaGFyQXQoc3RyLmxlbmd0aCAtIDEpID09PSAnJScpIHtcbiAgICAgICAgcmV0dXJuIGNsYW1wQ3NzRmxvYXQocGFyc2VGbG9hdChzdHIpIC8gMTAwKTtcbiAgICB9XG4gICAgcmV0dXJuIGNsYW1wQ3NzRmxvYXQocGFyc2VGbG9hdChzdHIpKTtcbn1cbmZ1bmN0aW9uIGNzc0h1ZVRvUmdiKG0xLCBtMiwgaCkge1xuICAgIGlmIChoIDwgMCkge1xuICAgICAgICBoICs9IDE7XG4gICAgfVxuICAgIGVsc2UgaWYgKGggPiAxKSB7XG4gICAgICAgIGggLT0gMTtcbiAgICB9XG4gICAgaWYgKGggKiA2IDwgMSkge1xuICAgICAgICByZXR1cm4gbTEgKyAobTIgLSBtMSkgKiBoICogNjtcbiAgICB9XG4gICAgaWYgKGggKiAyIDwgMSkge1xuICAgICAgICByZXR1cm4gbTI7XG4gICAgfVxuICAgIGlmIChoICogMyA8IDIpIHtcbiAgICAgICAgcmV0dXJuIG0xICsgKG0yIC0gbTEpICogKDIgLyAzIC0gaCkgKiA2O1xuICAgIH1cbiAgICByZXR1cm4gbTE7XG59XG5mdW5jdGlvbiBsZXJwTnVtYmVyKGEsIGIsIHApIHtcbiAgICByZXR1cm4gYSArIChiIC0gYSkgKiBwO1xufVxuZnVuY3Rpb24gc2V0UmdiYShvdXQsIHIsIGcsIGIsIGEpIHtcbiAgICBvdXRbMF0gPSByO1xuICAgIG91dFsxXSA9IGc7XG4gICAgb3V0WzJdID0gYjtcbiAgICBvdXRbM10gPSBhO1xuICAgIHJldHVybiBvdXQ7XG59XG5mdW5jdGlvbiBjb3B5UmdiYShvdXQsIGEpIHtcbiAgICBvdXRbMF0gPSBhWzBdO1xuICAgIG91dFsxXSA9IGFbMV07XG4gICAgb3V0WzJdID0gYVsyXTtcbiAgICBvdXRbM10gPSBhWzNdO1xuICAgIHJldHVybiBvdXQ7XG59XG52YXIgY29sb3JDYWNoZSA9IG5ldyBMUlUoMjApO1xudmFyIGxhc3RSZW1vdmVkQXJyID0gbnVsbDtcbmZ1bmN0aW9uIHB1dFRvQ2FjaGUoY29sb3JTdHIsIHJnYmFBcnIpIHtcbiAgICBpZiAobGFzdFJlbW92ZWRBcnIpIHtcbiAgICAgICAgY29weVJnYmEobGFzdFJlbW92ZWRBcnIsIHJnYmFBcnIpO1xuICAgIH1cbiAgICBsYXN0UmVtb3ZlZEFyciA9IGNvbG9yQ2FjaGUucHV0KGNvbG9yU3RyLCBsYXN0UmVtb3ZlZEFyciB8fCAocmdiYUFyci5zbGljZSgpKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2UoY29sb3JTdHIsIHJnYmFBcnIpIHtcbiAgICBpZiAoIWNvbG9yU3RyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmdiYUFyciA9IHJnYmFBcnIgfHwgW107XG4gICAgdmFyIGNhY2hlZCA9IGNvbG9yQ2FjaGUuZ2V0KGNvbG9yU3RyKTtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgIHJldHVybiBjb3B5UmdiYShyZ2JhQXJyLCBjYWNoZWQpO1xuICAgIH1cbiAgICBjb2xvclN0ciA9IGNvbG9yU3RyICsgJyc7XG4gICAgdmFyIHN0ciA9IGNvbG9yU3RyLnJlcGxhY2UoLyAvZywgJycpLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKHN0ciBpbiBrQ1NTQ29sb3JUYWJsZSkge1xuICAgICAgICBjb3B5UmdiYShyZ2JhQXJyLCBrQ1NTQ29sb3JUYWJsZVtzdHJdKTtcbiAgICAgICAgcHV0VG9DYWNoZShjb2xvclN0ciwgcmdiYUFycik7XG4gICAgICAgIHJldHVybiByZ2JhQXJyO1xuICAgIH1cbiAgICB2YXIgc3RyTGVuID0gc3RyLmxlbmd0aDtcbiAgICBpZiAoc3RyLmNoYXJBdCgwKSA9PT0gJyMnKSB7XG4gICAgICAgIGlmIChzdHJMZW4gPT09IDQgfHwgc3RyTGVuID09PSA1KSB7XG4gICAgICAgICAgICB2YXIgaXYgPSBwYXJzZUludChzdHIuc2xpY2UoMSwgNCksIDE2KTtcbiAgICAgICAgICAgIGlmICghKGl2ID49IDAgJiYgaXYgPD0gMHhmZmYpKSB7XG4gICAgICAgICAgICAgICAgc2V0UmdiYShyZ2JhQXJyLCAwLCAwLCAwLCAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRSZ2JhKHJnYmFBcnIsICgoaXYgJiAweGYwMCkgPj4gNCkgfCAoKGl2ICYgMHhmMDApID4+IDgpLCAoaXYgJiAweGYwKSB8ICgoaXYgJiAweGYwKSA+PiA0KSwgKGl2ICYgMHhmKSB8ICgoaXYgJiAweGYpIDw8IDQpLCBzdHJMZW4gPT09IDUgPyBwYXJzZUludChzdHIuc2xpY2UoNCksIDE2KSAvIDB4ZiA6IDEpO1xuICAgICAgICAgICAgcHV0VG9DYWNoZShjb2xvclN0ciwgcmdiYUFycik7XG4gICAgICAgICAgICByZXR1cm4gcmdiYUFycjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdHJMZW4gPT09IDcgfHwgc3RyTGVuID09PSA5KSB7XG4gICAgICAgICAgICB2YXIgaXYgPSBwYXJzZUludChzdHIuc2xpY2UoMSwgNyksIDE2KTtcbiAgICAgICAgICAgIGlmICghKGl2ID49IDAgJiYgaXYgPD0gMHhmZmZmZmYpKSB7XG4gICAgICAgICAgICAgICAgc2V0UmdiYShyZ2JhQXJyLCAwLCAwLCAwLCAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRSZ2JhKHJnYmFBcnIsIChpdiAmIDB4ZmYwMDAwKSA+PiAxNiwgKGl2ICYgMHhmZjAwKSA+PiA4LCBpdiAmIDB4ZmYsIHN0ckxlbiA9PT0gOSA/IHBhcnNlSW50KHN0ci5zbGljZSg3KSwgMTYpIC8gMHhmZiA6IDEpO1xuICAgICAgICAgICAgcHV0VG9DYWNoZShjb2xvclN0ciwgcmdiYUFycik7XG4gICAgICAgICAgICByZXR1cm4gcmdiYUFycjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBvcCA9IHN0ci5pbmRleE9mKCcoJyk7XG4gICAgdmFyIGVwID0gc3RyLmluZGV4T2YoJyknKTtcbiAgICBpZiAob3AgIT09IC0xICYmIGVwICsgMSA9PT0gc3RyTGVuKSB7XG4gICAgICAgIHZhciBmbmFtZSA9IHN0ci5zdWJzdHIoMCwgb3ApO1xuICAgICAgICB2YXIgcGFyYW1zID0gc3RyLnN1YnN0cihvcCArIDEsIGVwIC0gKG9wICsgMSkpLnNwbGl0KCcsJyk7XG4gICAgICAgIHZhciBhbHBoYSA9IDE7XG4gICAgICAgIHN3aXRjaCAoZm5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgJ3JnYmEnOlxuICAgICAgICAgICAgICAgIGlmIChwYXJhbXMubGVuZ3RoICE9PSA0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbXMubGVuZ3RoID09PSAzXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHNldFJnYmEocmdiYUFyciwgK3BhcmFtc1swXSwgK3BhcmFtc1sxXSwgK3BhcmFtc1syXSwgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogc2V0UmdiYShyZ2JhQXJyLCAwLCAwLCAwLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWxwaGEgPSBwYXJzZUNzc0Zsb2F0KHBhcmFtcy5wb3AoKSk7XG4gICAgICAgICAgICBjYXNlICdyZ2InOlxuICAgICAgICAgICAgICAgIGlmIChwYXJhbXMubGVuZ3RoID49IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0UmdiYShyZ2JhQXJyLCBwYXJzZUNzc0ludChwYXJhbXNbMF0pLCBwYXJzZUNzc0ludChwYXJhbXNbMV0pLCBwYXJzZUNzc0ludChwYXJhbXNbMl0pLCBwYXJhbXMubGVuZ3RoID09PSAzID8gYWxwaGEgOiBwYXJzZUNzc0Zsb2F0KHBhcmFtc1szXSkpO1xuICAgICAgICAgICAgICAgICAgICBwdXRUb0NhY2hlKGNvbG9yU3RyLCByZ2JhQXJyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJnYmFBcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZXRSZ2JhKHJnYmFBcnIsIDAsIDAsIDAsIDEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnaHNsYSc6XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtcy5sZW5ndGggIT09IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0UmdiYShyZ2JhQXJyLCAwLCAwLCAwLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJhbXNbM10gPSBwYXJzZUNzc0Zsb2F0KHBhcmFtc1szXSk7XG4gICAgICAgICAgICAgICAgaHNsYTJyZ2JhKHBhcmFtcywgcmdiYUFycik7XG4gICAgICAgICAgICAgICAgcHV0VG9DYWNoZShjb2xvclN0ciwgcmdiYUFycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJnYmFBcnI7XG4gICAgICAgICAgICBjYXNlICdoc2wnOlxuICAgICAgICAgICAgICAgIGlmIChwYXJhbXMubGVuZ3RoICE9PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFJnYmEocmdiYUFyciwgMCwgMCwgMCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaHNsYTJyZ2JhKHBhcmFtcywgcmdiYUFycik7XG4gICAgICAgICAgICAgICAgcHV0VG9DYWNoZShjb2xvclN0ciwgcmdiYUFycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJnYmFBcnI7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRSZ2JhKHJnYmFBcnIsIDAsIDAsIDAsIDEpO1xuICAgIHJldHVybjtcbn1cbmZ1bmN0aW9uIGhzbGEycmdiYShoc2xhLCByZ2JhKSB7XG4gICAgdmFyIGggPSAoKChwYXJzZUZsb2F0KGhzbGFbMF0pICUgMzYwKSArIDM2MCkgJSAzNjApIC8gMzYwO1xuICAgIHZhciBzID0gcGFyc2VDc3NGbG9hdChoc2xhWzFdKTtcbiAgICB2YXIgbCA9IHBhcnNlQ3NzRmxvYXQoaHNsYVsyXSk7XG4gICAgdmFyIG0yID0gbCA8PSAwLjUgPyBsICogKHMgKyAxKSA6IGwgKyBzIC0gbCAqIHM7XG4gICAgdmFyIG0xID0gbCAqIDIgLSBtMjtcbiAgICByZ2JhID0gcmdiYSB8fCBbXTtcbiAgICBzZXRSZ2JhKHJnYmEsIGNsYW1wQ3NzQnl0ZShjc3NIdWVUb1JnYihtMSwgbTIsIGggKyAxIC8gMykgKiAyNTUpLCBjbGFtcENzc0J5dGUoY3NzSHVlVG9SZ2IobTEsIG0yLCBoKSAqIDI1NSksIGNsYW1wQ3NzQnl0ZShjc3NIdWVUb1JnYihtMSwgbTIsIGggLSAxIC8gMykgKiAyNTUpLCAxKTtcbiAgICBpZiAoaHNsYS5sZW5ndGggPT09IDQpIHtcbiAgICAgICAgcmdiYVszXSA9IGhzbGFbM107XG4gICAgfVxuICAgIHJldHVybiByZ2JhO1xufVxuZnVuY3Rpb24gcmdiYTJoc2xhKHJnYmEpIHtcbiAgICBpZiAoIXJnYmEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgUiA9IHJnYmFbMF0gLyAyNTU7XG4gICAgdmFyIEcgPSByZ2JhWzFdIC8gMjU1O1xuICAgIHZhciBCID0gcmdiYVsyXSAvIDI1NTtcbiAgICB2YXIgdk1pbiA9IE1hdGgubWluKFIsIEcsIEIpO1xuICAgIHZhciB2TWF4ID0gTWF0aC5tYXgoUiwgRywgQik7XG4gICAgdmFyIGRlbHRhID0gdk1heCAtIHZNaW47XG4gICAgdmFyIEwgPSAodk1heCArIHZNaW4pIC8gMjtcbiAgICB2YXIgSDtcbiAgICB2YXIgUztcbiAgICBpZiAoZGVsdGEgPT09IDApIHtcbiAgICAgICAgSCA9IDA7XG4gICAgICAgIFMgPSAwO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKEwgPCAwLjUpIHtcbiAgICAgICAgICAgIFMgPSBkZWx0YSAvICh2TWF4ICsgdk1pbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBTID0gZGVsdGEgLyAoMiAtIHZNYXggLSB2TWluKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGVsdGFSID0gKCgodk1heCAtIFIpIC8gNikgKyAoZGVsdGEgLyAyKSkgLyBkZWx0YTtcbiAgICAgICAgdmFyIGRlbHRhRyA9ICgoKHZNYXggLSBHKSAvIDYpICsgKGRlbHRhIC8gMikpIC8gZGVsdGE7XG4gICAgICAgIHZhciBkZWx0YUIgPSAoKCh2TWF4IC0gQikgLyA2KSArIChkZWx0YSAvIDIpKSAvIGRlbHRhO1xuICAgICAgICBpZiAoUiA9PT0gdk1heCkge1xuICAgICAgICAgICAgSCA9IGRlbHRhQiAtIGRlbHRhRztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChHID09PSB2TWF4KSB7XG4gICAgICAgICAgICBIID0gKDEgLyAzKSArIGRlbHRhUiAtIGRlbHRhQjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChCID09PSB2TWF4KSB7XG4gICAgICAgICAgICBIID0gKDIgLyAzKSArIGRlbHRhRyAtIGRlbHRhUjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoSCA8IDApIHtcbiAgICAgICAgICAgIEggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoSCA+IDEpIHtcbiAgICAgICAgICAgIEggLT0gMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgaHNsYSA9IFtIICogMzYwLCBTLCBMXTtcbiAgICBpZiAocmdiYVszXSAhPSBudWxsKSB7XG4gICAgICAgIGhzbGEucHVzaChyZ2JhWzNdKTtcbiAgICB9XG4gICAgcmV0dXJuIGhzbGE7XG59XG5leHBvcnQgZnVuY3Rpb24gbGlmdChjb2xvciwgbGV2ZWwpIHtcbiAgICB2YXIgY29sb3JBcnIgPSBwYXJzZShjb2xvcik7XG4gICAgaWYgKGNvbG9yQXJyKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobGV2ZWwgPCAwKSB7XG4gICAgICAgICAgICAgICAgY29sb3JBcnJbaV0gPSBjb2xvckFycltpXSAqICgxIC0gbGV2ZWwpIHwgMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbG9yQXJyW2ldID0gKCgyNTUgLSBjb2xvckFycltpXSkgKiBsZXZlbCArIGNvbG9yQXJyW2ldKSB8IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sb3JBcnJbaV0gPiAyNTUpIHtcbiAgICAgICAgICAgICAgICBjb2xvckFycltpXSA9IDI1NTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbG9yQXJyW2ldIDwgMCkge1xuICAgICAgICAgICAgICAgIGNvbG9yQXJyW2ldID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyaW5naWZ5KGNvbG9yQXJyLCBjb2xvckFyci5sZW5ndGggPT09IDQgPyAncmdiYScgOiAncmdiJyk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHRvSGV4KGNvbG9yKSB7XG4gICAgdmFyIGNvbG9yQXJyID0gcGFyc2UoY29sb3IpO1xuICAgIGlmIChjb2xvckFycikge1xuICAgICAgICByZXR1cm4gKCgxIDw8IDI0KSArIChjb2xvckFyclswXSA8PCAxNikgKyAoY29sb3JBcnJbMV0gPDwgOCkgKyAoK2NvbG9yQXJyWzJdKSkudG9TdHJpbmcoMTYpLnNsaWNlKDEpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBmYXN0TGVycChub3JtYWxpemVkVmFsdWUsIGNvbG9ycywgb3V0KSB7XG4gICAgaWYgKCEoY29sb3JzICYmIGNvbG9ycy5sZW5ndGgpXG4gICAgICAgIHx8ICEobm9ybWFsaXplZFZhbHVlID49IDAgJiYgbm9ybWFsaXplZFZhbHVlIDw9IDEpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgb3V0ID0gb3V0IHx8IFtdO1xuICAgIHZhciB2YWx1ZSA9IG5vcm1hbGl6ZWRWYWx1ZSAqIChjb2xvcnMubGVuZ3RoIC0gMSk7XG4gICAgdmFyIGxlZnRJbmRleCA9IE1hdGguZmxvb3IodmFsdWUpO1xuICAgIHZhciByaWdodEluZGV4ID0gTWF0aC5jZWlsKHZhbHVlKTtcbiAgICB2YXIgbGVmdENvbG9yID0gY29sb3JzW2xlZnRJbmRleF07XG4gICAgdmFyIHJpZ2h0Q29sb3IgPSBjb2xvcnNbcmlnaHRJbmRleF07XG4gICAgdmFyIGR2ID0gdmFsdWUgLSBsZWZ0SW5kZXg7XG4gICAgb3V0WzBdID0gY2xhbXBDc3NCeXRlKGxlcnBOdW1iZXIobGVmdENvbG9yWzBdLCByaWdodENvbG9yWzBdLCBkdikpO1xuICAgIG91dFsxXSA9IGNsYW1wQ3NzQnl0ZShsZXJwTnVtYmVyKGxlZnRDb2xvclsxXSwgcmlnaHRDb2xvclsxXSwgZHYpKTtcbiAgICBvdXRbMl0gPSBjbGFtcENzc0J5dGUobGVycE51bWJlcihsZWZ0Q29sb3JbMl0sIHJpZ2h0Q29sb3JbMl0sIGR2KSk7XG4gICAgb3V0WzNdID0gY2xhbXBDc3NGbG9hdChsZXJwTnVtYmVyKGxlZnRDb2xvclszXSwgcmlnaHRDb2xvclszXSwgZHYpKTtcbiAgICByZXR1cm4gb3V0O1xufVxuZXhwb3J0IHZhciBmYXN0TWFwVG9Db2xvciA9IGZhc3RMZXJwO1xuZXhwb3J0IGZ1bmN0aW9uIGxlcnAobm9ybWFsaXplZFZhbHVlLCBjb2xvcnMsIGZ1bGxPdXRwdXQpIHtcbiAgICBpZiAoIShjb2xvcnMgJiYgY29sb3JzLmxlbmd0aClcbiAgICAgICAgfHwgIShub3JtYWxpemVkVmFsdWUgPj0gMCAmJiBub3JtYWxpemVkVmFsdWUgPD0gMSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdmFsdWUgPSBub3JtYWxpemVkVmFsdWUgKiAoY29sb3JzLmxlbmd0aCAtIDEpO1xuICAgIHZhciBsZWZ0SW5kZXggPSBNYXRoLmZsb29yKHZhbHVlKTtcbiAgICB2YXIgcmlnaHRJbmRleCA9IE1hdGguY2VpbCh2YWx1ZSk7XG4gICAgdmFyIGxlZnRDb2xvciA9IHBhcnNlKGNvbG9yc1tsZWZ0SW5kZXhdKTtcbiAgICB2YXIgcmlnaHRDb2xvciA9IHBhcnNlKGNvbG9yc1tyaWdodEluZGV4XSk7XG4gICAgdmFyIGR2ID0gdmFsdWUgLSBsZWZ0SW5kZXg7XG4gICAgdmFyIGNvbG9yID0gc3RyaW5naWZ5KFtcbiAgICAgICAgY2xhbXBDc3NCeXRlKGxlcnBOdW1iZXIobGVmdENvbG9yWzBdLCByaWdodENvbG9yWzBdLCBkdikpLFxuICAgICAgICBjbGFtcENzc0J5dGUobGVycE51bWJlcihsZWZ0Q29sb3JbMV0sIHJpZ2h0Q29sb3JbMV0sIGR2KSksXG4gICAgICAgIGNsYW1wQ3NzQnl0ZShsZXJwTnVtYmVyKGxlZnRDb2xvclsyXSwgcmlnaHRDb2xvclsyXSwgZHYpKSxcbiAgICAgICAgY2xhbXBDc3NGbG9hdChsZXJwTnVtYmVyKGxlZnRDb2xvclszXSwgcmlnaHRDb2xvclszXSwgZHYpKVxuICAgIF0sICdyZ2JhJyk7XG4gICAgcmV0dXJuIGZ1bGxPdXRwdXRcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBjb2xvcjogY29sb3IsXG4gICAgICAgICAgICBsZWZ0SW5kZXg6IGxlZnRJbmRleCxcbiAgICAgICAgICAgIHJpZ2h0SW5kZXg6IHJpZ2h0SW5kZXgsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgfVxuICAgICAgICA6IGNvbG9yO1xufVxuZXhwb3J0IHZhciBtYXBUb0NvbG9yID0gbGVycDtcbmV4cG9ydCBmdW5jdGlvbiBtb2RpZnlIU0woY29sb3IsIGgsIHMsIGwpIHtcbiAgICB2YXIgY29sb3JBcnIgPSBwYXJzZShjb2xvcik7XG4gICAgaWYgKGNvbG9yKSB7XG4gICAgICAgIGNvbG9yQXJyID0gcmdiYTJoc2xhKGNvbG9yQXJyKTtcbiAgICAgICAgaCAhPSBudWxsICYmIChjb2xvckFyclswXSA9IGNsYW1wQ3NzQW5nbGUoaCkpO1xuICAgICAgICBzICE9IG51bGwgJiYgKGNvbG9yQXJyWzFdID0gcGFyc2VDc3NGbG9hdChzKSk7XG4gICAgICAgIGwgIT0gbnVsbCAmJiAoY29sb3JBcnJbMl0gPSBwYXJzZUNzc0Zsb2F0KGwpKTtcbiAgICAgICAgcmV0dXJuIHN0cmluZ2lmeShoc2xhMnJnYmEoY29sb3JBcnIpLCAncmdiYScpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBtb2RpZnlBbHBoYShjb2xvciwgYWxwaGEpIHtcbiAgICB2YXIgY29sb3JBcnIgPSBwYXJzZShjb2xvcik7XG4gICAgaWYgKGNvbG9yQXJyICYmIGFscGhhICE9IG51bGwpIHtcbiAgICAgICAgY29sb3JBcnJbM10gPSBjbGFtcENzc0Zsb2F0KGFscGhhKTtcbiAgICAgICAgcmV0dXJuIHN0cmluZ2lmeShjb2xvckFyciwgJ3JnYmEnKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gc3RyaW5naWZ5KGFyckNvbG9yLCB0eXBlKSB7XG4gICAgaWYgKCFhcnJDb2xvciB8fCAhYXJyQ29sb3IubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGNvbG9yU3RyID0gYXJyQ29sb3JbMF0gKyAnLCcgKyBhcnJDb2xvclsxXSArICcsJyArIGFyckNvbG9yWzJdO1xuICAgIGlmICh0eXBlID09PSAncmdiYScgfHwgdHlwZSA9PT0gJ2hzdmEnIHx8IHR5cGUgPT09ICdoc2xhJykge1xuICAgICAgICBjb2xvclN0ciArPSAnLCcgKyBhcnJDb2xvclszXTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGUgKyAnKCcgKyBjb2xvclN0ciArICcpJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBsdW0oY29sb3IsIGJhY2tncm91bmRMdW0pIHtcbiAgICB2YXIgYXJyID0gcGFyc2UoY29sb3IpO1xuICAgIHJldHVybiBhcnJcbiAgICAgICAgPyAoMC4yOTkgKiBhcnJbMF0gKyAwLjU4NyAqIGFyclsxXSArIDAuMTE0ICogYXJyWzJdKSAqIGFyclszXSAvIDI1NVxuICAgICAgICAgICAgKyAoMSAtIGFyclszXSkgKiBiYWNrZ3JvdW5kTHVtXG4gICAgICAgIDogMDtcbn1cbmV4cG9ydCBmdW5jdGlvbiByYW5kb20oKSB7XG4gICAgcmV0dXJuIHN0cmluZ2lmeShbXG4gICAgICAgIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDI1NSksXG4gICAgICAgIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDI1NSksXG4gICAgICAgIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDI1NSlcbiAgICBdLCAncmdiJyk7XG59XG4iLCJpbXBvcnQgeyBSQURJQU5fVE9fREVHUkVFLCByZXRyaWV2ZTIsIGxvZ0Vycm9yLCBpc0Z1bmN0aW9uIH0gZnJvbSAnLi4vY29yZS91dGlsLmpzJztcbmltcG9ydCB7IHBhcnNlIH0gZnJvbSAnLi4vdG9vbC9jb2xvci5qcyc7XG5pbXBvcnQgZW52IGZyb20gJy4uL2NvcmUvZW52LmpzJztcbnZhciBtYXRoUm91bmQgPSBNYXRoLnJvdW5kO1xuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZUNvbG9yKGNvbG9yKSB7XG4gICAgdmFyIG9wYWNpdHk7XG4gICAgaWYgKCFjb2xvciB8fCBjb2xvciA9PT0gJ3RyYW5zcGFyZW50Jykge1xuICAgICAgICBjb2xvciA9ICdub25lJztcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGNvbG9yID09PSAnc3RyaW5nJyAmJiBjb2xvci5pbmRleE9mKCdyZ2JhJykgPiAtMSkge1xuICAgICAgICB2YXIgYXJyID0gcGFyc2UoY29sb3IpO1xuICAgICAgICBpZiAoYXJyKSB7XG4gICAgICAgICAgICBjb2xvciA9ICdyZ2IoJyArIGFyclswXSArICcsJyArIGFyclsxXSArICcsJyArIGFyclsyXSArICcpJztcbiAgICAgICAgICAgIG9wYWNpdHkgPSBhcnJbM107XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29sb3I6IGNvbG9yLFxuICAgICAgICBvcGFjaXR5OiBvcGFjaXR5ID09IG51bGwgPyAxIDogb3BhY2l0eVxuICAgIH07XG59XG52YXIgRVBTSUxPTiA9IDFlLTQ7XG5leHBvcnQgZnVuY3Rpb24gaXNBcm91bmRaZXJvKHRyYW5zZm9ybSkge1xuICAgIHJldHVybiB0cmFuc2Zvcm0gPCBFUFNJTE9OICYmIHRyYW5zZm9ybSA+IC1FUFNJTE9OO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJvdW5kMyh0cmFuc2Zvcm0pIHtcbiAgICByZXR1cm4gbWF0aFJvdW5kKHRyYW5zZm9ybSAqIDFlMykgLyAxZTM7XG59XG5leHBvcnQgZnVuY3Rpb24gcm91bmQ0KHRyYW5zZm9ybSkge1xuICAgIHJldHVybiBtYXRoUm91bmQodHJhbnNmb3JtICogMWU0KSAvIDFlNDtcbn1cbmV4cG9ydCBmdW5jdGlvbiByb3VuZDEodHJhbnNmb3JtKSB7XG4gICAgcmV0dXJuIG1hdGhSb3VuZCh0cmFuc2Zvcm0gKiAxMCkgLyAxMDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRNYXRyaXhTdHIobSkge1xuICAgIHJldHVybiAnbWF0cml4KCdcbiAgICAgICAgKyByb3VuZDMobVswXSkgKyAnLCdcbiAgICAgICAgKyByb3VuZDMobVsxXSkgKyAnLCdcbiAgICAgICAgKyByb3VuZDMobVsyXSkgKyAnLCdcbiAgICAgICAgKyByb3VuZDMobVszXSkgKyAnLCdcbiAgICAgICAgKyByb3VuZDQobVs0XSkgKyAnLCdcbiAgICAgICAgKyByb3VuZDQobVs1XSlcbiAgICAgICAgKyAnKSc7XG59XG5leHBvcnQgdmFyIFRFWFRfQUxJR05fVE9fQU5DSE9SID0ge1xuICAgIGxlZnQ6ICdzdGFydCcsXG4gICAgcmlnaHQ6ICdlbmQnLFxuICAgIGNlbnRlcjogJ21pZGRsZScsXG4gICAgbWlkZGxlOiAnbWlkZGxlJ1xufTtcbmV4cG9ydCBmdW5jdGlvbiBhZGp1c3RUZXh0WSh5LCBsaW5lSGVpZ2h0LCB0ZXh0QmFzZWxpbmUpIHtcbiAgICBpZiAodGV4dEJhc2VsaW5lID09PSAndG9wJykge1xuICAgICAgICB5ICs9IGxpbmVIZWlnaHQgLyAyO1xuICAgIH1cbiAgICBlbHNlIGlmICh0ZXh0QmFzZWxpbmUgPT09ICdib3R0b20nKSB7XG4gICAgICAgIHkgLT0gbGluZUhlaWdodCAvIDI7XG4gICAgfVxuICAgIHJldHVybiB5O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhhc1NoYWRvdyhzdHlsZSkge1xuICAgIHJldHVybiBzdHlsZVxuICAgICAgICAmJiAoc3R5bGUuc2hhZG93Qmx1ciB8fCBzdHlsZS5zaGFkb3dPZmZzZXRYIHx8IHN0eWxlLnNoYWRvd09mZnNldFkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFNoYWRvd0tleShkaXNwbGF5YWJsZSkge1xuICAgIHZhciBzdHlsZSA9IGRpc3BsYXlhYmxlLnN0eWxlO1xuICAgIHZhciBnbG9iYWxTY2FsZSA9IGRpc3BsYXlhYmxlLmdldEdsb2JhbFNjYWxlKCk7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgc3R5bGUuc2hhZG93Q29sb3IsXG4gICAgICAgIChzdHlsZS5zaGFkb3dCbHVyIHx8IDApLnRvRml4ZWQoMiksXG4gICAgICAgIChzdHlsZS5zaGFkb3dPZmZzZXRYIHx8IDApLnRvRml4ZWQoMiksXG4gICAgICAgIChzdHlsZS5zaGFkb3dPZmZzZXRZIHx8IDApLnRvRml4ZWQoMiksXG4gICAgICAgIGdsb2JhbFNjYWxlWzBdLFxuICAgICAgICBnbG9iYWxTY2FsZVsxXVxuICAgIF0uam9pbignLCcpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldENsaXBQYXRoc0tleShjbGlwUGF0aHMpIHtcbiAgICB2YXIga2V5ID0gW107XG4gICAgaWYgKGNsaXBQYXRocykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsaXBQYXRocy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGNsaXBQYXRoID0gY2xpcFBhdGhzW2ldO1xuICAgICAgICAgICAga2V5LnB1c2goY2xpcFBhdGguaWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBrZXkuam9pbignLCcpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzSW1hZ2VQYXR0ZXJuKHZhbCkge1xuICAgIHJldHVybiB2YWwgJiYgKCEhdmFsLmltYWdlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1NWR1BhdHRlcm4odmFsKSB7XG4gICAgcmV0dXJuIHZhbCAmJiAoISF2YWwuc3ZnRWxlbWVudCk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNQYXR0ZXJuKHZhbCkge1xuICAgIHJldHVybiBpc0ltYWdlUGF0dGVybih2YWwpIHx8IGlzU1ZHUGF0dGVybih2YWwpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzTGluZWFyR3JhZGllbnQodmFsKSB7XG4gICAgcmV0dXJuIHZhbC50eXBlID09PSAnbGluZWFyJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1JhZGlhbEdyYWRpZW50KHZhbCkge1xuICAgIHJldHVybiB2YWwudHlwZSA9PT0gJ3JhZGlhbCc7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNHcmFkaWVudCh2YWwpIHtcbiAgICByZXR1cm4gdmFsICYmICh2YWwudHlwZSA9PT0gJ2xpbmVhcidcbiAgICAgICAgfHwgdmFsLnR5cGUgPT09ICdyYWRpYWwnKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRJZFVSTChpZCkge1xuICAgIHJldHVybiBcInVybCgjXCIgKyBpZCArIFwiKVwiO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFBhdGhQcmVjaXNpb24oZWwpIHtcbiAgICB2YXIgc2NhbGUgPSBlbC5nZXRHbG9iYWxTY2FsZSgpO1xuICAgIHZhciBzaXplID0gTWF0aC5tYXgoc2NhbGVbMF0sIHNjYWxlWzFdKTtcbiAgICByZXR1cm4gTWF0aC5tYXgoTWF0aC5jZWlsKE1hdGgubG9nKHNpemUpIC8gTWF0aC5sb2coMTApKSwgMSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0U1JUVHJhbnNmb3JtU3RyaW5nKHRyYW5zZm9ybSkge1xuICAgIHZhciB4ID0gdHJhbnNmb3JtLnggfHwgMDtcbiAgICB2YXIgeSA9IHRyYW5zZm9ybS55IHx8IDA7XG4gICAgdmFyIHJvdGF0aW9uID0gKHRyYW5zZm9ybS5yb3RhdGlvbiB8fCAwKSAqIFJBRElBTl9UT19ERUdSRUU7XG4gICAgdmFyIHNjYWxlWCA9IHJldHJpZXZlMih0cmFuc2Zvcm0uc2NhbGVYLCAxKTtcbiAgICB2YXIgc2NhbGVZID0gcmV0cmlldmUyKHRyYW5zZm9ybS5zY2FsZVksIDEpO1xuICAgIHZhciBza2V3WCA9IHRyYW5zZm9ybS5za2V3WCB8fCAwO1xuICAgIHZhciBza2V3WSA9IHRyYW5zZm9ybS5za2V3WSB8fCAwO1xuICAgIHZhciByZXMgPSBbXTtcbiAgICBpZiAoeCB8fCB5KSB7XG4gICAgICAgIHJlcy5wdXNoKFwidHJhbnNsYXRlKFwiICsgeCArIFwicHgsXCIgKyB5ICsgXCJweClcIik7XG4gICAgfVxuICAgIGlmIChyb3RhdGlvbikge1xuICAgICAgICByZXMucHVzaChcInJvdGF0ZShcIiArIHJvdGF0aW9uICsgXCIpXCIpO1xuICAgIH1cbiAgICBpZiAoc2NhbGVYICE9PSAxIHx8IHNjYWxlWSAhPT0gMSkge1xuICAgICAgICByZXMucHVzaChcInNjYWxlKFwiICsgc2NhbGVYICsgXCIsXCIgKyBzY2FsZVkgKyBcIilcIik7XG4gICAgfVxuICAgIGlmIChza2V3WCB8fCBza2V3WSkge1xuICAgICAgICByZXMucHVzaChcInNrZXcoXCIgKyBtYXRoUm91bmQoc2tld1ggKiBSQURJQU5fVE9fREVHUkVFKSArIFwiZGVnLCBcIiArIG1hdGhSb3VuZChza2V3WSAqIFJBRElBTl9UT19ERUdSRUUpICsgXCJkZWcpXCIpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzLmpvaW4oJyAnKTtcbn1cbmV4cG9ydCB2YXIgZW5jb2RlQmFzZTY0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoZW52Lmhhc0dsb2JhbFdpbmRvdyAmJiBpc0Z1bmN0aW9uKHdpbmRvdy5idG9hKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5idG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChzdHIpKSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICh0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgcmV0dXJuIEJ1ZmZlci5mcm9tKHN0cikudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgbG9nRXJyb3IoJ0Jhc2U2NCBpc25cXCd0IG5hdGl2ZWx5IHN1cHBvcnRlZCBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xufSkoKTtcbiIsImltcG9ydCBDbGlwIGZyb20gJy4vQ2xpcC5qcyc7XG5pbXBvcnQgKiBhcyBjb2xvciBmcm9tICcuLi90b29sL2NvbG9yLmpzJztcbmltcG9ydCB7IGVxTmFOLCBleHRlbmQsIGlzQXJyYXlMaWtlLCBpc0Z1bmN0aW9uLCBpc0dyYWRpZW50T2JqZWN0LCBpc051bWJlciwgaXNTdHJpbmcsIGtleXMsIGxvZ0Vycm9yLCBtYXAgfSBmcm9tICcuLi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0IGVhc2luZ0Z1bmNzIGZyb20gJy4vZWFzaW5nLmpzJztcbmltcG9ydCB7IGNyZWF0ZUN1YmljRWFzaW5nRnVuYyB9IGZyb20gJy4vY3ViaWNFYXNpbmcuanMnO1xuaW1wb3J0IHsgaXNMaW5lYXJHcmFkaWVudCwgaXNSYWRpYWxHcmFkaWVudCB9IGZyb20gJy4uL3N2Zy9oZWxwZXIuanMnO1xuO1xudmFyIGFycmF5U2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG5mdW5jdGlvbiBpbnRlcnBvbGF0ZU51bWJlcihwMCwgcDEsIHBlcmNlbnQpIHtcbiAgICByZXR1cm4gKHAxIC0gcDApICogcGVyY2VudCArIHAwO1xufVxuZnVuY3Rpb24gaW50ZXJwb2xhdGUxREFycmF5KG91dCwgcDAsIHAxLCBwZXJjZW50KSB7XG4gICAgdmFyIGxlbiA9IHAwLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIG91dFtpXSA9IGludGVycG9sYXRlTnVtYmVyKHAwW2ldLCBwMVtpXSwgcGVyY2VudCk7XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG59XG5mdW5jdGlvbiBpbnRlcnBvbGF0ZTJEQXJyYXkob3V0LCBwMCwgcDEsIHBlcmNlbnQpIHtcbiAgICB2YXIgbGVuID0gcDAubGVuZ3RoO1xuICAgIHZhciBsZW4yID0gbGVuICYmIHAwWzBdLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGlmICghb3V0W2ldKSB7XG4gICAgICAgICAgICBvdXRbaV0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxlbjI7IGorKykge1xuICAgICAgICAgICAgb3V0W2ldW2pdID0gaW50ZXJwb2xhdGVOdW1iZXIocDBbaV1bal0sIHAxW2ldW2pdLCBwZXJjZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3V0O1xufVxuZnVuY3Rpb24gYWRkMURBcnJheShvdXQsIHAwLCBwMSwgc2lnbikge1xuICAgIHZhciBsZW4gPSBwMC5sZW5ndGg7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBvdXRbaV0gPSBwMFtpXSArIHAxW2ldICogc2lnbjtcbiAgICB9XG4gICAgcmV0dXJuIG91dDtcbn1cbmZ1bmN0aW9uIGFkZDJEQXJyYXkob3V0LCBwMCwgcDEsIHNpZ24pIHtcbiAgICB2YXIgbGVuID0gcDAubGVuZ3RoO1xuICAgIHZhciBsZW4yID0gbGVuICYmIHAwWzBdLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGlmICghb3V0W2ldKSB7XG4gICAgICAgICAgICBvdXRbaV0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxlbjI7IGorKykge1xuICAgICAgICAgICAgb3V0W2ldW2pdID0gcDBbaV1bal0gKyBwMVtpXVtqXSAqIHNpZ247XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dDtcbn1cbmZ1bmN0aW9uIGZpbGxDb2xvclN0b3BzKHZhbDAsIHZhbDEpIHtcbiAgICB2YXIgbGVuMCA9IHZhbDAubGVuZ3RoO1xuICAgIHZhciBsZW4xID0gdmFsMS5sZW5ndGg7XG4gICAgdmFyIHNob3J0ZXJBcnIgPSBsZW4wID4gbGVuMSA/IHZhbDEgOiB2YWwwO1xuICAgIHZhciBzaG9ydGVyTGVuID0gTWF0aC5taW4obGVuMCwgbGVuMSk7XG4gICAgdmFyIGxhc3QgPSBzaG9ydGVyQXJyW3Nob3J0ZXJMZW4gLSAxXSB8fCB7IGNvbG9yOiBbMCwgMCwgMCwgMF0sIG9mZnNldDogMCB9O1xuICAgIGZvciAodmFyIGkgPSBzaG9ydGVyTGVuOyBpIDwgTWF0aC5tYXgobGVuMCwgbGVuMSk7IGkrKykge1xuICAgICAgICBzaG9ydGVyQXJyLnB1c2goe1xuICAgICAgICAgICAgb2Zmc2V0OiBsYXN0Lm9mZnNldCxcbiAgICAgICAgICAgIGNvbG9yOiBsYXN0LmNvbG9yLnNsaWNlKClcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gZmlsbEFycmF5KHZhbDAsIHZhbDEsIGFyckRpbSkge1xuICAgIHZhciBhcnIwID0gdmFsMDtcbiAgICB2YXIgYXJyMSA9IHZhbDE7XG4gICAgaWYgKCFhcnIwLnB1c2ggfHwgIWFycjEucHVzaCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBhcnIwTGVuID0gYXJyMC5sZW5ndGg7XG4gICAgdmFyIGFycjFMZW4gPSBhcnIxLmxlbmd0aDtcbiAgICBpZiAoYXJyMExlbiAhPT0gYXJyMUxlbikge1xuICAgICAgICB2YXIgaXNQcmV2aW91c0xhcmdlciA9IGFycjBMZW4gPiBhcnIxTGVuO1xuICAgICAgICBpZiAoaXNQcmV2aW91c0xhcmdlcikge1xuICAgICAgICAgICAgYXJyMC5sZW5ndGggPSBhcnIxTGVuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGFycjBMZW47IGkgPCBhcnIxTGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBhcnIwLnB1c2goYXJyRGltID09PSAxID8gYXJyMVtpXSA6IGFycmF5U2xpY2UuY2FsbChhcnIxW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGxlbjIgPSBhcnIwWzBdICYmIGFycjBbMF0ubGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyMC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoYXJyRGltID09PSAxKSB7XG4gICAgICAgICAgICBpZiAoaXNOYU4oYXJyMFtpXSkpIHtcbiAgICAgICAgICAgICAgICBhcnIwW2ldID0gYXJyMVtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGVuMjsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKGFycjBbaV1bal0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGFycjBbaV1bal0gPSBhcnIxW2ldW2pdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZVZhbHVlKHZhbHVlKSB7XG4gICAgaWYgKGlzQXJyYXlMaWtlKHZhbHVlKSkge1xuICAgICAgICB2YXIgbGVuID0gdmFsdWUubGVuZ3RoO1xuICAgICAgICBpZiAoaXNBcnJheUxpa2UodmFsdWVbMF0pKSB7XG4gICAgICAgICAgICB2YXIgcmV0ID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcmV0LnB1c2goYXJyYXlTbGljZS5jYWxsKHZhbHVlW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJheVNsaWNlLmNhbGwodmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiByZ2JhMlN0cmluZyhyZ2JhKSB7XG4gICAgcmdiYVswXSA9IE1hdGguZmxvb3IocmdiYVswXSkgfHwgMDtcbiAgICByZ2JhWzFdID0gTWF0aC5mbG9vcihyZ2JhWzFdKSB8fCAwO1xuICAgIHJnYmFbMl0gPSBNYXRoLmZsb29yKHJnYmFbMl0pIHx8IDA7XG4gICAgcmdiYVszXSA9IHJnYmFbM10gPT0gbnVsbCA/IDEgOiByZ2JhWzNdO1xuICAgIHJldHVybiAncmdiYSgnICsgcmdiYS5qb2luKCcsJykgKyAnKSc7XG59XG5mdW5jdGlvbiBndWVzc0FycmF5RGltKHZhbHVlKSB7XG4gICAgcmV0dXJuIGlzQXJyYXlMaWtlKHZhbHVlICYmIHZhbHVlWzBdKSA/IDIgOiAxO1xufVxudmFyIFZBTFVFX1RZUEVfTlVNQkVSID0gMDtcbnZhciBWQUxVRV9UWVBFXzFEX0FSUkFZID0gMTtcbnZhciBWQUxVRV9UWVBFXzJEX0FSUkFZID0gMjtcbnZhciBWQUxVRV9UWVBFX0NPTE9SID0gMztcbnZhciBWQUxVRV9UWVBFX0xJTkVBUl9HUkFESUVOVCA9IDQ7XG52YXIgVkFMVUVfVFlQRV9SQURJQUxfR1JBRElFTlQgPSA1O1xudmFyIFZBTFVFX1RZUEVfVU5LT1dOID0gNjtcbmZ1bmN0aW9uIGlzR3JhZGllbnRWYWx1ZVR5cGUodmFsVHlwZSkge1xuICAgIHJldHVybiB2YWxUeXBlID09PSBWQUxVRV9UWVBFX0xJTkVBUl9HUkFESUVOVCB8fCB2YWxUeXBlID09PSBWQUxVRV9UWVBFX1JBRElBTF9HUkFESUVOVDtcbn1cbmZ1bmN0aW9uIGlzQXJyYXlWYWx1ZVR5cGUodmFsVHlwZSkge1xuICAgIHJldHVybiB2YWxUeXBlID09PSBWQUxVRV9UWVBFXzFEX0FSUkFZIHx8IHZhbFR5cGUgPT09IFZBTFVFX1RZUEVfMkRfQVJSQVk7XG59XG52YXIgdG1wUmdiYSA9IFswLCAwLCAwLCAwXTtcbnZhciBUcmFjayA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVHJhY2socHJvcE5hbWUpIHtcbiAgICAgICAgdGhpcy5rZXlmcmFtZXMgPSBbXTtcbiAgICAgICAgdGhpcy5kaXNjcmV0ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9pbnZhbGlkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX25lZWRzU29ydCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9sYXN0RnIgPSAwO1xuICAgICAgICB0aGlzLl9sYXN0RnJQID0gMDtcbiAgICAgICAgdGhpcy5wcm9wTmFtZSA9IHByb3BOYW1lO1xuICAgIH1cbiAgICBUcmFjay5wcm90b3R5cGUuaXNGaW5pc2hlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbmlzaGVkO1xuICAgIH07XG4gICAgVHJhY2sucHJvdG90eXBlLnNldEZpbmlzaGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9maW5pc2hlZCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLl9hZGRpdGl2ZVRyYWNrKSB7XG4gICAgICAgICAgICB0aGlzLl9hZGRpdGl2ZVRyYWNrLnNldEZpbmlzaGVkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFRyYWNrLnByb3RvdHlwZS5uZWVkc0FuaW1hdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleWZyYW1lcy5sZW5ndGggPj0gMTtcbiAgICB9O1xuICAgIFRyYWNrLnByb3RvdHlwZS5nZXRBZGRpdGl2ZVRyYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkaXRpdmVUcmFjaztcbiAgICB9O1xuICAgIFRyYWNrLnByb3RvdHlwZS5hZGRLZXlmcmFtZSA9IGZ1bmN0aW9uICh0aW1lLCByYXdWYWx1ZSwgZWFzaW5nKSB7XG4gICAgICAgIHRoaXMuX25lZWRzU29ydCA9IHRydWU7XG4gICAgICAgIHZhciBrZXlmcmFtZXMgPSB0aGlzLmtleWZyYW1lcztcbiAgICAgICAgdmFyIGxlbiA9IGtleWZyYW1lcy5sZW5ndGg7XG4gICAgICAgIHZhciBkaXNjcmV0ZSA9IGZhbHNlO1xuICAgICAgICB2YXIgdmFsVHlwZSA9IFZBTFVFX1RZUEVfVU5LT1dOO1xuICAgICAgICB2YXIgdmFsdWUgPSByYXdWYWx1ZTtcbiAgICAgICAgaWYgKGlzQXJyYXlMaWtlKHJhd1ZhbHVlKSkge1xuICAgICAgICAgICAgdmFyIGFycmF5RGltID0gZ3Vlc3NBcnJheURpbShyYXdWYWx1ZSk7XG4gICAgICAgICAgICB2YWxUeXBlID0gYXJyYXlEaW07XG4gICAgICAgICAgICBpZiAoYXJyYXlEaW0gPT09IDEgJiYgIWlzTnVtYmVyKHJhd1ZhbHVlWzBdKVxuICAgICAgICAgICAgICAgIHx8IGFycmF5RGltID09PSAyICYmICFpc051bWJlcihyYXdWYWx1ZVswXVswXSkpIHtcbiAgICAgICAgICAgICAgICBkaXNjcmV0ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoaXNOdW1iZXIocmF3VmFsdWUpICYmICFlcU5hTihyYXdWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB2YWxUeXBlID0gVkFMVUVfVFlQRV9OVU1CRVI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc1N0cmluZyhyYXdWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKCtyYXdWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsVHlwZSA9IFZBTFVFX1RZUEVfTlVNQkVSO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9yQXJyYXkgPSBjb2xvci5wYXJzZShyYXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xvckFycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGNvbG9yQXJyYXk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxUeXBlID0gVkFMVUVfVFlQRV9DT0xPUjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzR3JhZGllbnRPYmplY3QocmF3VmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhcnNlZEdyYWRpZW50ID0gZXh0ZW5kKHt9LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgcGFyc2VkR3JhZGllbnQuY29sb3JTdG9wcyA9IG1hcChyYXdWYWx1ZS5jb2xvclN0b3BzLCBmdW5jdGlvbiAoY29sb3JTdG9wKSB7IHJldHVybiAoe1xuICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IGNvbG9yU3RvcC5vZmZzZXQsXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBjb2xvci5wYXJzZShjb2xvclN0b3AuY29sb3IpXG4gICAgICAgICAgICAgICAgfSk7IH0pO1xuICAgICAgICAgICAgICAgIGlmIChpc0xpbmVhckdyYWRpZW50KHJhd1ZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB2YWxUeXBlID0gVkFMVUVfVFlQRV9MSU5FQVJfR1JBRElFTlQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzUmFkaWFsR3JhZGllbnQocmF3VmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbFR5cGUgPSBWQUxVRV9UWVBFX1JBRElBTF9HUkFESUVOVDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBwYXJzZWRHcmFkaWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnZhbFR5cGUgPSB2YWxUeXBlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbFR5cGUgIT09IHRoaXMudmFsVHlwZSB8fCB2YWxUeXBlID09PSBWQUxVRV9UWVBFX1VOS09XTikge1xuICAgICAgICAgICAgZGlzY3JldGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlzY3JldGUgPSB0aGlzLmRpc2NyZXRlIHx8IGRpc2NyZXRlO1xuICAgICAgICB2YXIga2YgPSB7XG4gICAgICAgICAgICB0aW1lOiB0aW1lLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgcmF3VmFsdWU6IHJhd1ZhbHVlLFxuICAgICAgICAgICAgcGVyY2VudDogMFxuICAgICAgICB9O1xuICAgICAgICBpZiAoZWFzaW5nKSB7XG4gICAgICAgICAgICBrZi5lYXNpbmcgPSBlYXNpbmc7XG4gICAgICAgICAgICBrZi5lYXNpbmdGdW5jID0gaXNGdW5jdGlvbihlYXNpbmcpXG4gICAgICAgICAgICAgICAgPyBlYXNpbmdcbiAgICAgICAgICAgICAgICA6IGVhc2luZ0Z1bmNzW2Vhc2luZ10gfHwgY3JlYXRlQ3ViaWNFYXNpbmdGdW5jKGVhc2luZyk7XG4gICAgICAgIH1cbiAgICAgICAga2V5ZnJhbWVzLnB1c2goa2YpO1xuICAgICAgICByZXR1cm4ga2Y7XG4gICAgfTtcbiAgICBUcmFjay5wcm90b3R5cGUucHJlcGFyZSA9IGZ1bmN0aW9uIChtYXhUaW1lLCBhZGRpdGl2ZVRyYWNrKSB7XG4gICAgICAgIHZhciBrZnMgPSB0aGlzLmtleWZyYW1lcztcbiAgICAgICAgaWYgKHRoaXMuX25lZWRzU29ydCkge1xuICAgICAgICAgICAga2ZzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYS50aW1lIC0gYi50aW1lO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZhbFR5cGUgPSB0aGlzLnZhbFR5cGU7XG4gICAgICAgIHZhciBrZnNMZW4gPSBrZnMubGVuZ3RoO1xuICAgICAgICB2YXIgbGFzdEtmID0ga2ZzW2tmc0xlbiAtIDFdO1xuICAgICAgICB2YXIgaXNEaXNjcmV0ZSA9IHRoaXMuZGlzY3JldGU7XG4gICAgICAgIHZhciBpc0FyciA9IGlzQXJyYXlWYWx1ZVR5cGUodmFsVHlwZSk7XG4gICAgICAgIHZhciBpc0dyYWRpZW50ID0gaXNHcmFkaWVudFZhbHVlVHlwZSh2YWxUeXBlKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZnNMZW47IGkrKykge1xuICAgICAgICAgICAgdmFyIGtmID0ga2ZzW2ldO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0ga2YudmFsdWU7XG4gICAgICAgICAgICB2YXIgbGFzdFZhbHVlID0gbGFzdEtmLnZhbHVlO1xuICAgICAgICAgICAga2YucGVyY2VudCA9IGtmLnRpbWUgLyBtYXhUaW1lO1xuICAgICAgICAgICAgaWYgKCFpc0Rpc2NyZXRlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzQXJyICYmIGkgIT09IGtmc0xlbiAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbEFycmF5KHZhbHVlLCBsYXN0VmFsdWUsIHZhbFR5cGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0dyYWRpZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvclN0b3BzKHZhbHVlLmNvbG9yU3RvcHMsIGxhc3RWYWx1ZS5jb2xvclN0b3BzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc0Rpc2NyZXRlXG4gICAgICAgICAgICAmJiB2YWxUeXBlICE9PSBWQUxVRV9UWVBFX1JBRElBTF9HUkFESUVOVFxuICAgICAgICAgICAgJiYgYWRkaXRpdmVUcmFja1xuICAgICAgICAgICAgJiYgdGhpcy5uZWVkc0FuaW1hdGUoKVxuICAgICAgICAgICAgJiYgYWRkaXRpdmVUcmFjay5uZWVkc0FuaW1hdGUoKVxuICAgICAgICAgICAgJiYgdmFsVHlwZSA9PT0gYWRkaXRpdmVUcmFjay52YWxUeXBlXG4gICAgICAgICAgICAmJiAhYWRkaXRpdmVUcmFjay5fZmluaXNoZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2FkZGl0aXZlVHJhY2sgPSBhZGRpdGl2ZVRyYWNrO1xuICAgICAgICAgICAgdmFyIHN0YXJ0VmFsdWUgPSBrZnNbMF0udmFsdWU7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtmc0xlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbFR5cGUgPT09IFZBTFVFX1RZUEVfTlVNQkVSKSB7XG4gICAgICAgICAgICAgICAgICAgIGtmc1tpXS5hZGRpdGl2ZVZhbHVlID0ga2ZzW2ldLnZhbHVlIC0gc3RhcnRWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsVHlwZSA9PT0gVkFMVUVfVFlQRV9DT0xPUikge1xuICAgICAgICAgICAgICAgICAgICBrZnNbaV0uYWRkaXRpdmVWYWx1ZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGQxREFycmF5KFtdLCBrZnNbaV0udmFsdWUsIHN0YXJ0VmFsdWUsIC0xKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNBcnJheVZhbHVlVHlwZSh2YWxUeXBlKSkge1xuICAgICAgICAgICAgICAgICAgICBrZnNbaV0uYWRkaXRpdmVWYWx1ZSA9IHZhbFR5cGUgPT09IFZBTFVFX1RZUEVfMURfQVJSQVlcbiAgICAgICAgICAgICAgICAgICAgICAgID8gYWRkMURBcnJheShbXSwga2ZzW2ldLnZhbHVlLCBzdGFydFZhbHVlLCAtMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogYWRkMkRBcnJheShbXSwga2ZzW2ldLnZhbHVlLCBzdGFydFZhbHVlLCAtMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBUcmFjay5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uICh0YXJnZXQsIHBlcmNlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2ZpbmlzaGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2FkZGl0aXZlVHJhY2sgJiYgdGhpcy5fYWRkaXRpdmVUcmFjay5fZmluaXNoZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2FkZGl0aXZlVHJhY2sgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpc0FkZGl0aXZlID0gdGhpcy5fYWRkaXRpdmVUcmFjayAhPSBudWxsO1xuICAgICAgICB2YXIgdmFsdWVLZXkgPSBpc0FkZGl0aXZlID8gJ2FkZGl0aXZlVmFsdWUnIDogJ3ZhbHVlJztcbiAgICAgICAgdmFyIHZhbFR5cGUgPSB0aGlzLnZhbFR5cGU7XG4gICAgICAgIHZhciBrZXlmcmFtZXMgPSB0aGlzLmtleWZyYW1lcztcbiAgICAgICAgdmFyIGtmc051bSA9IGtleWZyYW1lcy5sZW5ndGg7XG4gICAgICAgIHZhciBwcm9wTmFtZSA9IHRoaXMucHJvcE5hbWU7XG4gICAgICAgIHZhciBpc1ZhbHVlQ29sb3IgPSB2YWxUeXBlID09PSBWQUxVRV9UWVBFX0NPTE9SO1xuICAgICAgICB2YXIgZnJhbWVJZHg7XG4gICAgICAgIHZhciBsYXN0RnJhbWUgPSB0aGlzLl9sYXN0RnI7XG4gICAgICAgIHZhciBtYXRoTWluID0gTWF0aC5taW47XG4gICAgICAgIHZhciBmcmFtZTtcbiAgICAgICAgdmFyIG5leHRGcmFtZTtcbiAgICAgICAgaWYgKGtmc051bSA9PT0gMSkge1xuICAgICAgICAgICAgZnJhbWUgPSBuZXh0RnJhbWUgPSBrZXlmcmFtZXNbMF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAocGVyY2VudCA8IDApIHtcbiAgICAgICAgICAgICAgICBmcmFtZUlkeCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwZXJjZW50IDwgdGhpcy5fbGFzdEZyUCkge1xuICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IG1hdGhNaW4obGFzdEZyYW1lICsgMSwga2ZzTnVtIC0gMSk7XG4gICAgICAgICAgICAgICAgZm9yIChmcmFtZUlkeCA9IHN0YXJ0OyBmcmFtZUlkeCA+PSAwOyBmcmFtZUlkeC0tKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXlmcmFtZXNbZnJhbWVJZHhdLnBlcmNlbnQgPD0gcGVyY2VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnJhbWVJZHggPSBtYXRoTWluKGZyYW1lSWR4LCBrZnNOdW0gLSAyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAoZnJhbWVJZHggPSBsYXN0RnJhbWU7IGZyYW1lSWR4IDwga2ZzTnVtOyBmcmFtZUlkeCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXlmcmFtZXNbZnJhbWVJZHhdLnBlcmNlbnQgPiBwZXJjZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmcmFtZUlkeCA9IG1hdGhNaW4oZnJhbWVJZHggLSAxLCBrZnNOdW0gLSAyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5leHRGcmFtZSA9IGtleWZyYW1lc1tmcmFtZUlkeCArIDFdO1xuICAgICAgICAgICAgZnJhbWUgPSBrZXlmcmFtZXNbZnJhbWVJZHhdO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKGZyYW1lICYmIG5leHRGcmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9sYXN0RnIgPSBmcmFtZUlkeDtcbiAgICAgICAgdGhpcy5fbGFzdEZyUCA9IHBlcmNlbnQ7XG4gICAgICAgIHZhciBpbnRlcnZhbCA9IChuZXh0RnJhbWUucGVyY2VudCAtIGZyYW1lLnBlcmNlbnQpO1xuICAgICAgICB2YXIgdyA9IGludGVydmFsID09PSAwID8gMSA6IG1hdGhNaW4oKHBlcmNlbnQgLSBmcmFtZS5wZXJjZW50KSAvIGludGVydmFsLCAxKTtcbiAgICAgICAgaWYgKG5leHRGcmFtZS5lYXNpbmdGdW5jKSB7XG4gICAgICAgICAgICB3ID0gbmV4dEZyYW1lLmVhc2luZ0Z1bmModyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRhcmdldEFyciA9IGlzQWRkaXRpdmUgPyB0aGlzLl9hZGRpdGl2ZVZhbHVlXG4gICAgICAgICAgICA6IChpc1ZhbHVlQ29sb3IgPyB0bXBSZ2JhIDogdGFyZ2V0W3Byb3BOYW1lXSk7XG4gICAgICAgIGlmICgoaXNBcnJheVZhbHVlVHlwZSh2YWxUeXBlKSB8fCBpc1ZhbHVlQ29sb3IpICYmICF0YXJnZXRBcnIpIHtcbiAgICAgICAgICAgIHRhcmdldEFyciA9IHRoaXMuX2FkZGl0aXZlVmFsdWUgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kaXNjcmV0ZSkge1xuICAgICAgICAgICAgdGFyZ2V0W3Byb3BOYW1lXSA9IHcgPCAxID8gZnJhbWUucmF3VmFsdWUgOiBuZXh0RnJhbWUucmF3VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNBcnJheVZhbHVlVHlwZSh2YWxUeXBlKSkge1xuICAgICAgICAgICAgdmFsVHlwZSA9PT0gVkFMVUVfVFlQRV8xRF9BUlJBWVxuICAgICAgICAgICAgICAgID8gaW50ZXJwb2xhdGUxREFycmF5KHRhcmdldEFyciwgZnJhbWVbdmFsdWVLZXldLCBuZXh0RnJhbWVbdmFsdWVLZXldLCB3KVxuICAgICAgICAgICAgICAgIDogaW50ZXJwb2xhdGUyREFycmF5KHRhcmdldEFyciwgZnJhbWVbdmFsdWVLZXldLCBuZXh0RnJhbWVbdmFsdWVLZXldLCB3KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0dyYWRpZW50VmFsdWVUeXBlKHZhbFR5cGUpKSB7XG4gICAgICAgICAgICB2YXIgdmFsID0gZnJhbWVbdmFsdWVLZXldO1xuICAgICAgICAgICAgdmFyIG5leHRWYWxfMSA9IG5leHRGcmFtZVt2YWx1ZUtleV07XG4gICAgICAgICAgICB2YXIgaXNMaW5lYXJHcmFkaWVudF8xID0gdmFsVHlwZSA9PT0gVkFMVUVfVFlQRV9MSU5FQVJfR1JBRElFTlQ7XG4gICAgICAgICAgICB0YXJnZXRbcHJvcE5hbWVdID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IGlzTGluZWFyR3JhZGllbnRfMSA/ICdsaW5lYXInIDogJ3JhZGlhbCcsXG4gICAgICAgICAgICAgICAgeDogaW50ZXJwb2xhdGVOdW1iZXIodmFsLngsIG5leHRWYWxfMS54LCB3KSxcbiAgICAgICAgICAgICAgICB5OiBpbnRlcnBvbGF0ZU51bWJlcih2YWwueSwgbmV4dFZhbF8xLnksIHcpLFxuICAgICAgICAgICAgICAgIGNvbG9yU3RvcHM6IG1hcCh2YWwuY29sb3JTdG9wcywgZnVuY3Rpb24gKGNvbG9yU3RvcCwgaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXh0Q29sb3JTdG9wID0gbmV4dFZhbF8xLmNvbG9yU3RvcHNbaWR4XTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldDogaW50ZXJwb2xhdGVOdW1iZXIoY29sb3JTdG9wLm9mZnNldCwgbmV4dENvbG9yU3RvcC5vZmZzZXQsIHcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJnYmEyU3RyaW5nKGludGVycG9sYXRlMURBcnJheShbXSwgY29sb3JTdG9wLmNvbG9yLCBuZXh0Q29sb3JTdG9wLmNvbG9yLCB3KSlcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBnbG9iYWw6IG5leHRWYWxfMS5nbG9iYWxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoaXNMaW5lYXJHcmFkaWVudF8xKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0W3Byb3BOYW1lXS54MiA9IGludGVycG9sYXRlTnVtYmVyKHZhbC54MiwgbmV4dFZhbF8xLngyLCB3KTtcbiAgICAgICAgICAgICAgICB0YXJnZXRbcHJvcE5hbWVdLnkyID0gaW50ZXJwb2xhdGVOdW1iZXIodmFsLnkyLCBuZXh0VmFsXzEueTIsIHcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0W3Byb3BOYW1lXS5yID0gaW50ZXJwb2xhdGVOdW1iZXIodmFsLnIsIG5leHRWYWxfMS5yLCB3KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1ZhbHVlQ29sb3IpIHtcbiAgICAgICAgICAgIGludGVycG9sYXRlMURBcnJheSh0YXJnZXRBcnIsIGZyYW1lW3ZhbHVlS2V5XSwgbmV4dEZyYW1lW3ZhbHVlS2V5XSwgdyk7XG4gICAgICAgICAgICBpZiAoIWlzQWRkaXRpdmUpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRbcHJvcE5hbWVdID0gcmdiYTJTdHJpbmcodGFyZ2V0QXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGludGVycG9sYXRlTnVtYmVyKGZyYW1lW3ZhbHVlS2V5XSwgbmV4dEZyYW1lW3ZhbHVlS2V5XSwgdyk7XG4gICAgICAgICAgICBpZiAoaXNBZGRpdGl2ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2FkZGl0aXZlVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRhcmdldFtwcm9wTmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBZGRpdGl2ZSkge1xuICAgICAgICAgICAgdGhpcy5fYWRkVG9UYXJnZXQodGFyZ2V0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVHJhY2sucHJvdG90eXBlLl9hZGRUb1RhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgdmFyIHZhbFR5cGUgPSB0aGlzLnZhbFR5cGU7XG4gICAgICAgIHZhciBwcm9wTmFtZSA9IHRoaXMucHJvcE5hbWU7XG4gICAgICAgIHZhciBhZGRpdGl2ZVZhbHVlID0gdGhpcy5fYWRkaXRpdmVWYWx1ZTtcbiAgICAgICAgaWYgKHZhbFR5cGUgPT09IFZBTFVFX1RZUEVfTlVNQkVSKSB7XG4gICAgICAgICAgICB0YXJnZXRbcHJvcE5hbWVdID0gdGFyZ2V0W3Byb3BOYW1lXSArIGFkZGl0aXZlVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsVHlwZSA9PT0gVkFMVUVfVFlQRV9DT0xPUikge1xuICAgICAgICAgICAgY29sb3IucGFyc2UodGFyZ2V0W3Byb3BOYW1lXSwgdG1wUmdiYSk7XG4gICAgICAgICAgICBhZGQxREFycmF5KHRtcFJnYmEsIHRtcFJnYmEsIGFkZGl0aXZlVmFsdWUsIDEpO1xuICAgICAgICAgICAgdGFyZ2V0W3Byb3BOYW1lXSA9IHJnYmEyU3RyaW5nKHRtcFJnYmEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbFR5cGUgPT09IFZBTFVFX1RZUEVfMURfQVJSQVkpIHtcbiAgICAgICAgICAgIGFkZDFEQXJyYXkodGFyZ2V0W3Byb3BOYW1lXSwgdGFyZ2V0W3Byb3BOYW1lXSwgYWRkaXRpdmVWYWx1ZSwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsVHlwZSA9PT0gVkFMVUVfVFlQRV8yRF9BUlJBWSkge1xuICAgICAgICAgICAgYWRkMkRBcnJheSh0YXJnZXRbcHJvcE5hbWVdLCB0YXJnZXRbcHJvcE5hbWVdLCBhZGRpdGl2ZVZhbHVlLCAxKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFRyYWNrO1xufSgpKTtcbnZhciBBbmltYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQW5pbWF0b3IodGFyZ2V0LCBsb29wLCBhbGxvd0Rpc2NyZXRlQW5pbWF0aW9uLCBhZGRpdGl2ZVRvKSB7XG4gICAgICAgIHRoaXMuX3RyYWNrcyA9IHt9O1xuICAgICAgICB0aGlzLl90cmFja0tleXMgPSBbXTtcbiAgICAgICAgdGhpcy5fbWF4VGltZSA9IDA7XG4gICAgICAgIHRoaXMuX3N0YXJ0ZWQgPSAwO1xuICAgICAgICB0aGlzLl9jbGlwID0gbnVsbDtcbiAgICAgICAgdGhpcy5fdGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICB0aGlzLl9sb29wID0gbG9vcDtcbiAgICAgICAgaWYgKGxvb3AgJiYgYWRkaXRpdmVUbykge1xuICAgICAgICAgICAgbG9nRXJyb3IoJ0NhblxcJyB1c2UgYWRkaXRpdmUgYW5pbWF0aW9uIG9uIGxvb3BlZCBhbmltYXRpb24uJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fYWRkaXRpdmVBbmltYXRvcnMgPSBhZGRpdGl2ZVRvO1xuICAgICAgICB0aGlzLl9hbGxvd0Rpc2NyZXRlID0gYWxsb3dEaXNjcmV0ZUFuaW1hdGlvbjtcbiAgICB9XG4gICAgQW5pbWF0b3IucHJvdG90eXBlLmdldE1heFRpbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXhUaW1lO1xuICAgIH07XG4gICAgQW5pbWF0b3IucHJvdG90eXBlLmdldERlbGF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVsYXk7XG4gICAgfTtcbiAgICBBbmltYXRvci5wcm90b3R5cGUuZ2V0TG9vcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvb3A7XG4gICAgfTtcbiAgICBBbmltYXRvci5wcm90b3R5cGUuZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFyZ2V0O1xuICAgIH07XG4gICAgQW5pbWF0b3IucHJvdG90eXBlLmNoYW5nZVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgdGhpcy5fdGFyZ2V0ID0gdGFyZ2V0O1xuICAgIH07XG4gICAgQW5pbWF0b3IucHJvdG90eXBlLndoZW4gPSBmdW5jdGlvbiAodGltZSwgcHJvcHMsIGVhc2luZykge1xuICAgICAgICByZXR1cm4gdGhpcy53aGVuV2l0aEtleXModGltZSwgcHJvcHMsIGtleXMocHJvcHMpLCBlYXNpbmcpO1xuICAgIH07XG4gICAgQW5pbWF0b3IucHJvdG90eXBlLndoZW5XaXRoS2V5cyA9IGZ1bmN0aW9uICh0aW1lLCBwcm9wcywgcHJvcE5hbWVzLCBlYXNpbmcpIHtcbiAgICAgICAgdmFyIHRyYWNrcyA9IHRoaXMuX3RyYWNrcztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wTmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBwcm9wTmFtZSA9IHByb3BOYW1lc1tpXTtcbiAgICAgICAgICAgIHZhciB0cmFjayA9IHRyYWNrc1twcm9wTmFtZV07XG4gICAgICAgICAgICBpZiAoIXRyYWNrKSB7XG4gICAgICAgICAgICAgICAgdHJhY2sgPSB0cmFja3NbcHJvcE5hbWVdID0gbmV3IFRyYWNrKHByb3BOYW1lKTtcbiAgICAgICAgICAgICAgICB2YXIgaW5pdGlhbFZhbHVlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciBhZGRpdGl2ZVRyYWNrID0gdGhpcy5fZ2V0QWRkaXRpdmVUcmFjayhwcm9wTmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKGFkZGl0aXZlVHJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFkZHRpdmVUcmFja0tmcyA9IGFkZGl0aXZlVHJhY2sua2V5ZnJhbWVzO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdEZpbmFsS2YgPSBhZGR0aXZlVHJhY2tLZnNbYWRkdGl2ZVRyYWNrS2ZzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgICAgICBpbml0aWFsVmFsdWUgPSBsYXN0RmluYWxLZiAmJiBsYXN0RmluYWxLZi52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFkZGl0aXZlVHJhY2sudmFsVHlwZSA9PT0gVkFMVUVfVFlQRV9DT0xPUiAmJiBpbml0aWFsVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxWYWx1ZSA9IHJnYmEyU3RyaW5nKGluaXRpYWxWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxWYWx1ZSA9IHRoaXMuX3RhcmdldFtwcm9wTmFtZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpbml0aWFsVmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRpbWUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYWNrLmFkZEtleWZyYW1lKDAsIGNsb25lVmFsdWUoaW5pdGlhbFZhbHVlKSwgZWFzaW5nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fdHJhY2tLZXlzLnB1c2gocHJvcE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJhY2suYWRkS2V5ZnJhbWUodGltZSwgY2xvbmVWYWx1ZShwcm9wc1twcm9wTmFtZV0pLCBlYXNpbmcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX21heFRpbWUgPSBNYXRoLm1heCh0aGlzLl9tYXhUaW1lLCB0aW1lKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBBbmltYXRvci5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2NsaXAucGF1c2UoKTtcbiAgICAgICAgdGhpcy5fcGF1c2VkID0gdHJ1ZTtcbiAgICB9O1xuICAgIEFuaW1hdG9yLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2NsaXAucmVzdW1lKCk7XG4gICAgICAgIHRoaXMuX3BhdXNlZCA9IGZhbHNlO1xuICAgIH07XG4gICAgQW5pbWF0b3IucHJvdG90eXBlLmlzUGF1c2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9wYXVzZWQ7XG4gICAgfTtcbiAgICBBbmltYXRvci5wcm90b3R5cGUuZHVyYXRpb24gPSBmdW5jdGlvbiAoZHVyYXRpb24pIHtcbiAgICAgICAgdGhpcy5fbWF4VGltZSA9IGR1cmF0aW9uO1xuICAgICAgICB0aGlzLl9mb3JjZSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgQW5pbWF0b3IucHJvdG90eXBlLl9kb25lQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3NldFRyYWNrc0ZpbmlzaGVkKCk7XG4gICAgICAgIHRoaXMuX2NsaXAgPSBudWxsO1xuICAgICAgICB2YXIgZG9uZUxpc3QgPSB0aGlzLl9kb25lQ2JzO1xuICAgICAgICBpZiAoZG9uZUxpc3QpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSBkb25lTGlzdC5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZG9uZUxpc3RbaV0uY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgQW5pbWF0b3IucHJvdG90eXBlLl9hYm9ydGVkQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3NldFRyYWNrc0ZpbmlzaGVkKCk7XG4gICAgICAgIHZhciBhbmltYXRpb24gPSB0aGlzLmFuaW1hdGlvbjtcbiAgICAgICAgdmFyIGFib3J0ZWRMaXN0ID0gdGhpcy5fYWJvcnRlZENicztcbiAgICAgICAgaWYgKGFuaW1hdGlvbikge1xuICAgICAgICAgICAgYW5pbWF0aW9uLnJlbW92ZUNsaXAodGhpcy5fY2xpcCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY2xpcCA9IG51bGw7XG4gICAgICAgIGlmIChhYm9ydGVkTGlzdCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhYm9ydGVkTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGFib3J0ZWRMaXN0W2ldLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFuaW1hdG9yLnByb3RvdHlwZS5fc2V0VHJhY2tzRmluaXNoZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0cmFja3MgPSB0aGlzLl90cmFja3M7XG4gICAgICAgIHZhciB0cmFja3NLZXlzID0gdGhpcy5fdHJhY2tLZXlzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyYWNrc0tleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRyYWNrc1t0cmFja3NLZXlzW2ldXS5zZXRGaW5pc2hlZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBbmltYXRvci5wcm90b3R5cGUuX2dldEFkZGl0aXZlVHJhY2sgPSBmdW5jdGlvbiAodHJhY2tOYW1lKSB7XG4gICAgICAgIHZhciBhZGRpdGl2ZVRyYWNrO1xuICAgICAgICB2YXIgYWRkaXRpdmVBbmltYXRvcnMgPSB0aGlzLl9hZGRpdGl2ZUFuaW1hdG9ycztcbiAgICAgICAgaWYgKGFkZGl0aXZlQW5pbWF0b3JzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFkZGl0aXZlQW5pbWF0b3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRyYWNrID0gYWRkaXRpdmVBbmltYXRvcnNbaV0uZ2V0VHJhY2sodHJhY2tOYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAodHJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkaXRpdmVUcmFjayA9IHRyYWNrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWRkaXRpdmVUcmFjaztcbiAgICB9O1xuICAgIEFuaW1hdG9yLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uIChlYXNpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMuX3N0YXJ0ZWQgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc3RhcnRlZCA9IDE7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIHRyYWNrcyA9IFtdO1xuICAgICAgICB2YXIgbWF4VGltZSA9IHRoaXMuX21heFRpbWUgfHwgMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl90cmFja0tleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBwcm9wTmFtZSA9IHRoaXMuX3RyYWNrS2V5c1tpXTtcbiAgICAgICAgICAgIHZhciB0cmFjayA9IHRoaXMuX3RyYWNrc1twcm9wTmFtZV07XG4gICAgICAgICAgICB2YXIgYWRkaXRpdmVUcmFjayA9IHRoaXMuX2dldEFkZGl0aXZlVHJhY2socHJvcE5hbWUpO1xuICAgICAgICAgICAgdmFyIGtmcyA9IHRyYWNrLmtleWZyYW1lcztcbiAgICAgICAgICAgIHZhciBrZnNOdW0gPSBrZnMubGVuZ3RoO1xuICAgICAgICAgICAgdHJhY2sucHJlcGFyZShtYXhUaW1lLCBhZGRpdGl2ZVRyYWNrKTtcbiAgICAgICAgICAgIGlmICh0cmFjay5uZWVkc0FuaW1hdGUoKSkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fYWxsb3dEaXNjcmV0ZSAmJiB0cmFjay5kaXNjcmV0ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdEtmID0ga2ZzW2tmc051bSAtIDFdO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGFzdEtmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl90YXJnZXRbdHJhY2sucHJvcE5hbWVdID0gbGFzdEtmLnJhd1ZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRyYWNrLnNldEZpbmlzaGVkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0cmFja3MucHVzaCh0cmFjayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFja3MubGVuZ3RoIHx8IHRoaXMuX2ZvcmNlKSB7XG4gICAgICAgICAgICB2YXIgY2xpcCA9IG5ldyBDbGlwKHtcbiAgICAgICAgICAgICAgICBsaWZlOiBtYXhUaW1lLFxuICAgICAgICAgICAgICAgIGxvb3A6IHRoaXMuX2xvb3AsXG4gICAgICAgICAgICAgICAgZGVsYXk6IHRoaXMuX2RlbGF5IHx8IDAsXG4gICAgICAgICAgICAgICAgb25mcmFtZTogZnVuY3Rpb24gKHBlcmNlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fc3RhcnRlZCA9IDI7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhZGRpdGl2ZUFuaW1hdG9ycyA9IHNlbGYuX2FkZGl0aXZlQW5pbWF0b3JzO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWRkaXRpdmVBbmltYXRvcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGlsbEhhc0FkZGl0aXZlQW5pbWF0b3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWRkaXRpdmVBbmltYXRvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWRkaXRpdmVBbmltYXRvcnNbaV0uX2NsaXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RpbGxIYXNBZGRpdGl2ZUFuaW1hdG9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGlsbEhhc0FkZGl0aXZlQW5pbWF0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9hZGRpdGl2ZUFuaW1hdG9ycyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrc1tpXS5zdGVwKHNlbGYuX3RhcmdldCwgcGVyY2VudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIG9uZnJhbWVMaXN0ID0gc2VsZi5fb25mcmFtZUNicztcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9uZnJhbWVMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9uZnJhbWVMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25mcmFtZUxpc3RbaV0oc2VsZi5fdGFyZ2V0LCBwZXJjZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25kZXN0cm95OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2RvbmVDYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5fY2xpcCA9IGNsaXA7XG4gICAgICAgICAgICBpZiAodGhpcy5hbmltYXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbi5hZGRDbGlwKGNsaXApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVhc2luZykge1xuICAgICAgICAgICAgICAgIGNsaXAuc2V0RWFzaW5nKGVhc2luZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9kb25lQ2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEFuaW1hdG9yLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKGZvcndhcmRUb0xhc3QpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9jbGlwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNsaXAgPSB0aGlzLl9jbGlwO1xuICAgICAgICBpZiAoZm9yd2FyZFRvTGFzdCkge1xuICAgICAgICAgICAgY2xpcC5vbmZyYW1lKDEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2Fib3J0ZWRDYWxsYmFjaygpO1xuICAgIH07XG4gICAgQW5pbWF0b3IucHJvdG90eXBlLmRlbGF5ID0gZnVuY3Rpb24gKHRpbWUpIHtcbiAgICAgICAgdGhpcy5fZGVsYXkgPSB0aW1lO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEFuaW1hdG9yLnByb3RvdHlwZS5kdXJpbmcgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgaWYgKGNiKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX29uZnJhbWVDYnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vbmZyYW1lQ2JzID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9vbmZyYW1lQ2JzLnB1c2goY2IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgQW5pbWF0b3IucHJvdG90eXBlLmRvbmUgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgaWYgKGNiKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2RvbmVDYnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9kb25lQ2JzID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9kb25lQ2JzLnB1c2goY2IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgQW5pbWF0b3IucHJvdG90eXBlLmFib3J0ZWQgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgaWYgKGNiKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2Fib3J0ZWRDYnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9hYm9ydGVkQ2JzID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9hYm9ydGVkQ2JzLnB1c2goY2IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgQW5pbWF0b3IucHJvdG90eXBlLmdldENsaXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jbGlwO1xuICAgIH07XG4gICAgQW5pbWF0b3IucHJvdG90eXBlLmdldFRyYWNrID0gZnVuY3Rpb24gKHByb3BOYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFja3NbcHJvcE5hbWVdO1xuICAgIH07XG4gICAgQW5pbWF0b3IucHJvdG90eXBlLmdldFRyYWNrcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIG1hcCh0aGlzLl90cmFja0tleXMsIGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIF90aGlzLl90cmFja3Nba2V5XTsgfSk7XG4gICAgfTtcbiAgICBBbmltYXRvci5wcm90b3R5cGUuc3RvcFRyYWNrcyA9IGZ1bmN0aW9uIChwcm9wTmFtZXMsIGZvcndhcmRUb0xhc3QpIHtcbiAgICAgICAgaWYgKCFwcm9wTmFtZXMubGVuZ3RoIHx8ICF0aGlzLl9jbGlwKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdHJhY2tzID0gdGhpcy5fdHJhY2tzO1xuICAgICAgICB2YXIgdHJhY2tzS2V5cyA9IHRoaXMuX3RyYWNrS2V5cztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wTmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB0cmFjayA9IHRyYWNrc1twcm9wTmFtZXNbaV1dO1xuICAgICAgICAgICAgaWYgKHRyYWNrICYmICF0cmFjay5pc0ZpbmlzaGVkKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZm9yd2FyZFRvTGFzdCkge1xuICAgICAgICAgICAgICAgICAgICB0cmFjay5zdGVwKHRoaXMuX3RhcmdldCwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuX3N0YXJ0ZWQgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhY2suc3RlcCh0aGlzLl90YXJnZXQsIDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0cmFjay5zZXRGaW5pc2hlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBhbGxBYm9ydGVkID0gdHJ1ZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmFja3NLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoIXRyYWNrc1t0cmFja3NLZXlzW2ldXS5pc0ZpbmlzaGVkKCkpIHtcbiAgICAgICAgICAgICAgICBhbGxBYm9ydGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFsbEFib3J0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2Fib3J0ZWRDYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhbGxBYm9ydGVkO1xuICAgIH07XG4gICAgQW5pbWF0b3IucHJvdG90eXBlLnNhdmVUbyA9IGZ1bmN0aW9uICh0YXJnZXQsIHRyYWNrS2V5cywgZmlyc3RPckxhc3QpIHtcbiAgICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0cmFja0tleXMgPSB0cmFja0tleXMgfHwgdGhpcy5fdHJhY2tLZXlzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyYWNrS2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHByb3BOYW1lID0gdHJhY2tLZXlzW2ldO1xuICAgICAgICAgICAgdmFyIHRyYWNrID0gdGhpcy5fdHJhY2tzW3Byb3BOYW1lXTtcbiAgICAgICAgICAgIGlmICghdHJhY2sgfHwgdHJhY2suaXNGaW5pc2hlZCgpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIga2ZzID0gdHJhY2sua2V5ZnJhbWVzO1xuICAgICAgICAgICAgdmFyIGtmID0ga2ZzW2ZpcnN0T3JMYXN0ID8gMCA6IGtmcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGlmIChrZikge1xuICAgICAgICAgICAgICAgIHRhcmdldFtwcm9wTmFtZV0gPSBjbG9uZVZhbHVlKGtmLnJhd1ZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgQW5pbWF0b3IucHJvdG90eXBlLl9fY2hhbmdlRmluYWxWYWx1ZSA9IGZ1bmN0aW9uIChmaW5hbFByb3BzLCB0cmFja0tleXMpIHtcbiAgICAgICAgdHJhY2tLZXlzID0gdHJhY2tLZXlzIHx8IGtleXMoZmluYWxQcm9wcyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJhY2tLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcHJvcE5hbWUgPSB0cmFja0tleXNbaV07XG4gICAgICAgICAgICB2YXIgdHJhY2sgPSB0aGlzLl90cmFja3NbcHJvcE5hbWVdO1xuICAgICAgICAgICAgaWYgKCF0cmFjaykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGtmcyA9IHRyYWNrLmtleWZyYW1lcztcbiAgICAgICAgICAgIGlmIChrZnMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHZhciBsYXN0S2YgPSBrZnMucG9wKCk7XG4gICAgICAgICAgICAgICAgdHJhY2suYWRkS2V5ZnJhbWUobGFzdEtmLnRpbWUsIGZpbmFsUHJvcHNbcHJvcE5hbWVdKTtcbiAgICAgICAgICAgICAgICB0cmFjay5wcmVwYXJlKHRoaXMuX21heFRpbWUsIHRyYWNrLmdldEFkZGl0aXZlVHJhY2soKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBBbmltYXRvcjtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBBbmltYXRvcjtcbiIsImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IEV2ZW50ZnVsIGZyb20gJy4uL2NvcmUvRXZlbnRmdWwuanMnO1xuaW1wb3J0IHJlcXVlc3RBbmltYXRpb25GcmFtZSBmcm9tICcuL3JlcXVlc3RBbmltYXRpb25GcmFtZS5qcyc7XG5pbXBvcnQgQW5pbWF0b3IgZnJvbSAnLi9BbmltYXRvci5qcyc7XG5leHBvcnQgZnVuY3Rpb24gZ2V0VGltZSgpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG59XG52YXIgQW5pbWF0aW9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQW5pbWF0aW9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFuaW1hdGlvbihvcHRzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLl9ydW5uaW5nID0gZmFsc2U7XG4gICAgICAgIF90aGlzLl90aW1lID0gMDtcbiAgICAgICAgX3RoaXMuX3BhdXNlZFRpbWUgPSAwO1xuICAgICAgICBfdGhpcy5fcGF1c2VTdGFydCA9IDA7XG4gICAgICAgIF90aGlzLl9wYXVzZWQgPSBmYWxzZTtcbiAgICAgICAgb3B0cyA9IG9wdHMgfHwge307XG4gICAgICAgIF90aGlzLnN0YWdlID0gb3B0cy5zdGFnZSB8fCB7fTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBBbmltYXRpb24ucHJvdG90eXBlLmFkZENsaXAgPSBmdW5jdGlvbiAoY2xpcCkge1xuICAgICAgICBpZiAoY2xpcC5hbmltYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2xpcChjbGlwKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2hlYWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2hlYWQgPSB0aGlzLl90YWlsID0gY2xpcDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3RhaWwubmV4dCA9IGNsaXA7XG4gICAgICAgICAgICBjbGlwLnByZXYgPSB0aGlzLl90YWlsO1xuICAgICAgICAgICAgY2xpcC5uZXh0ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX3RhaWwgPSBjbGlwO1xuICAgICAgICB9XG4gICAgICAgIGNsaXAuYW5pbWF0aW9uID0gdGhpcztcbiAgICB9O1xuICAgIEFuaW1hdGlvbi5wcm90b3R5cGUuYWRkQW5pbWF0b3IgPSBmdW5jdGlvbiAoYW5pbWF0b3IpIHtcbiAgICAgICAgYW5pbWF0b3IuYW5pbWF0aW9uID0gdGhpcztcbiAgICAgICAgdmFyIGNsaXAgPSBhbmltYXRvci5nZXRDbGlwKCk7XG4gICAgICAgIGlmIChjbGlwKSB7XG4gICAgICAgICAgICB0aGlzLmFkZENsaXAoY2xpcCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFuaW1hdGlvbi5wcm90b3R5cGUucmVtb3ZlQ2xpcCA9IGZ1bmN0aW9uIChjbGlwKSB7XG4gICAgICAgIGlmICghY2xpcC5hbmltYXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJldiA9IGNsaXAucHJldjtcbiAgICAgICAgdmFyIG5leHQgPSBjbGlwLm5leHQ7XG4gICAgICAgIGlmIChwcmV2KSB7XG4gICAgICAgICAgICBwcmV2Lm5leHQgPSBuZXh0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5faGVhZCA9IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5leHQpIHtcbiAgICAgICAgICAgIG5leHQucHJldiA9IHByZXY7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl90YWlsID0gcHJldjtcbiAgICAgICAgfVxuICAgICAgICBjbGlwLm5leHQgPSBjbGlwLnByZXYgPSBjbGlwLmFuaW1hdGlvbiA9IG51bGw7XG4gICAgfTtcbiAgICBBbmltYXRpb24ucHJvdG90eXBlLnJlbW92ZUFuaW1hdG9yID0gZnVuY3Rpb24gKGFuaW1hdG9yKSB7XG4gICAgICAgIHZhciBjbGlwID0gYW5pbWF0b3IuZ2V0Q2xpcCgpO1xuICAgICAgICBpZiAoY2xpcCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVDbGlwKGNsaXApO1xuICAgICAgICB9XG4gICAgICAgIGFuaW1hdG9yLmFuaW1hdGlvbiA9IG51bGw7XG4gICAgfTtcbiAgICBBbmltYXRpb24ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChub3RUcmlnZ2VyRnJhbWVBbmRTdGFnZVVwZGF0ZSkge1xuICAgICAgICB2YXIgdGltZSA9IGdldFRpbWUoKSAtIHRoaXMuX3BhdXNlZFRpbWU7XG4gICAgICAgIHZhciBkZWx0YSA9IHRpbWUgLSB0aGlzLl90aW1lO1xuICAgICAgICB2YXIgY2xpcCA9IHRoaXMuX2hlYWQ7XG4gICAgICAgIHdoaWxlIChjbGlwKSB7XG4gICAgICAgICAgICB2YXIgbmV4dENsaXAgPSBjbGlwLm5leHQ7XG4gICAgICAgICAgICB2YXIgZmluaXNoZWQgPSBjbGlwLnN0ZXAodGltZSwgZGVsdGEpO1xuICAgICAgICAgICAgaWYgKGZpbmlzaGVkKSB7XG4gICAgICAgICAgICAgICAgY2xpcC5vbmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNsaXAoY2xpcCk7XG4gICAgICAgICAgICAgICAgY2xpcCA9IG5leHRDbGlwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2xpcCA9IG5leHRDbGlwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3RpbWUgPSB0aW1lO1xuICAgICAgICBpZiAoIW5vdFRyaWdnZXJGcmFtZUFuZFN0YWdlVXBkYXRlKSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2ZyYW1lJywgZGVsdGEpO1xuICAgICAgICAgICAgdGhpcy5zdGFnZS51cGRhdGUgJiYgdGhpcy5zdGFnZS51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQW5pbWF0aW9uLnByb3RvdHlwZS5fc3RhcnRMb29wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMuX3J1bm5pbmcgPSB0cnVlO1xuICAgICAgICBmdW5jdGlvbiBzdGVwKCkge1xuICAgICAgICAgICAgaWYgKHNlbGYuX3J1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG4gICAgICAgICAgICAgICAgIXNlbGYuX3BhdXNlZCAmJiBzZWxmLnVwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTtcbiAgICB9O1xuICAgIEFuaW1hdGlvbi5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLl9ydW5uaW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdGltZSA9IGdldFRpbWUoKTtcbiAgICAgICAgdGhpcy5fcGF1c2VkVGltZSA9IDA7XG4gICAgICAgIHRoaXMuX3N0YXJ0TG9vcCgpO1xuICAgIH07XG4gICAgQW5pbWF0aW9uLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9ydW5uaW5nID0gZmFsc2U7XG4gICAgfTtcbiAgICBBbmltYXRpb24ucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuX3BhdXNlZCkge1xuICAgICAgICAgICAgdGhpcy5fcGF1c2VTdGFydCA9IGdldFRpbWUoKTtcbiAgICAgICAgICAgIHRoaXMuX3BhdXNlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFuaW1hdGlvbi5wcm90b3R5cGUucmVzdW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5fcGF1c2VkKSB7XG4gICAgICAgICAgICB0aGlzLl9wYXVzZWRUaW1lICs9IGdldFRpbWUoKSAtIHRoaXMuX3BhdXNlU3RhcnQ7XG4gICAgICAgICAgICB0aGlzLl9wYXVzZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQW5pbWF0aW9uLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNsaXAgPSB0aGlzLl9oZWFkO1xuICAgICAgICB3aGlsZSAoY2xpcCkge1xuICAgICAgICAgICAgdmFyIG5leHRDbGlwID0gY2xpcC5uZXh0O1xuICAgICAgICAgICAgY2xpcC5wcmV2ID0gY2xpcC5uZXh0ID0gY2xpcC5hbmltYXRpb24gPSBudWxsO1xuICAgICAgICAgICAgY2xpcCA9IG5leHRDbGlwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2hlYWQgPSB0aGlzLl90YWlsID0gbnVsbDtcbiAgICB9O1xuICAgIEFuaW1hdGlvbi5wcm90b3R5cGUuaXNGaW5pc2hlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hlYWQgPT0gbnVsbDtcbiAgICB9O1xuICAgIEFuaW1hdGlvbi5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uICh0YXJnZXQsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgdmFyIGFuaW1hdG9yID0gbmV3IEFuaW1hdG9yKHRhcmdldCwgb3B0aW9ucy5sb29wKTtcbiAgICAgICAgdGhpcy5hZGRBbmltYXRvcihhbmltYXRvcik7XG4gICAgICAgIHJldHVybiBhbmltYXRvcjtcbiAgICB9O1xuICAgIHJldHVybiBBbmltYXRpb247XG59KEV2ZW50ZnVsKSk7XG5leHBvcnQgZGVmYXVsdCBBbmltYXRpb247XG4iLCJpbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGFkZEV2ZW50TGlzdGVuZXIsIHJlbW92ZUV2ZW50TGlzdGVuZXIsIG5vcm1hbGl6ZUV2ZW50LCBnZXROYXRpdmVFdmVudCB9IGZyb20gJy4uL2NvcmUvZXZlbnQuanMnO1xuaW1wb3J0ICogYXMgenJVdGlsIGZyb20gJy4uL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgRXZlbnRmdWwgZnJvbSAnLi4vY29yZS9FdmVudGZ1bC5qcyc7XG5pbXBvcnQgZW52IGZyb20gJy4uL2NvcmUvZW52LmpzJztcbnZhciBUT1VDSF9DTElDS19ERUxBWSA9IDMwMDtcbnZhciBnbG9iYWxFdmVudFN1cHBvcnRlZCA9IGVudi5kb21TdXBwb3J0ZWQ7XG52YXIgbG9jYWxOYXRpdmVMaXN0ZW5lck5hbWVzID0gKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbW91c2VIYW5kbGVyTmFtZXMgPSBbXG4gICAgICAgICdjbGljaycsICdkYmxjbGljaycsICdtb3VzZXdoZWVsJywgJ3doZWVsJywgJ21vdXNlb3V0JyxcbiAgICAgICAgJ21vdXNldXAnLCAnbW91c2Vkb3duJywgJ21vdXNlbW92ZScsICdjb250ZXh0bWVudSdcbiAgICBdO1xuICAgIHZhciB0b3VjaEhhbmRsZXJOYW1lcyA9IFtcbiAgICAgICAgJ3RvdWNoc3RhcnQnLCAndG91Y2hlbmQnLCAndG91Y2htb3ZlJ1xuICAgIF07XG4gICAgdmFyIHBvaW50ZXJFdmVudE5hbWVNYXAgPSB7XG4gICAgICAgIHBvaW50ZXJkb3duOiAxLCBwb2ludGVydXA6IDEsIHBvaW50ZXJtb3ZlOiAxLCBwb2ludGVyb3V0OiAxXG4gICAgfTtcbiAgICB2YXIgcG9pbnRlckhhbmRsZXJOYW1lcyA9IHpyVXRpbC5tYXAobW91c2VIYW5kbGVyTmFtZXMsIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHZhciBubSA9IG5hbWUucmVwbGFjZSgnbW91c2UnLCAncG9pbnRlcicpO1xuICAgICAgICByZXR1cm4gcG9pbnRlckV2ZW50TmFtZU1hcC5oYXNPd25Qcm9wZXJ0eShubSkgPyBubSA6IG5hbWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbW91c2U6IG1vdXNlSGFuZGxlck5hbWVzLFxuICAgICAgICB0b3VjaDogdG91Y2hIYW5kbGVyTmFtZXMsXG4gICAgICAgIHBvaW50ZXI6IHBvaW50ZXJIYW5kbGVyTmFtZXNcbiAgICB9O1xufSkoKTtcbnZhciBnbG9iYWxOYXRpdmVMaXN0ZW5lck5hbWVzID0ge1xuICAgIG1vdXNlOiBbJ21vdXNlbW92ZScsICdtb3VzZXVwJ10sXG4gICAgcG9pbnRlcjogWydwb2ludGVybW92ZScsICdwb2ludGVydXAnXVxufTtcbnZhciB3aGVlbEV2ZW50U3VwcG9ydGVkID0gZmFsc2U7XG5mdW5jdGlvbiBpc1BvaW50ZXJGcm9tVG91Y2goZXZlbnQpIHtcbiAgICB2YXIgcG9pbnRlclR5cGUgPSBldmVudC5wb2ludGVyVHlwZTtcbiAgICByZXR1cm4gcG9pbnRlclR5cGUgPT09ICdwZW4nIHx8IHBvaW50ZXJUeXBlID09PSAndG91Y2gnO1xufVxuZnVuY3Rpb24gc2V0VG91Y2hUaW1lcihzY29wZSkge1xuICAgIHNjb3BlLnRvdWNoaW5nID0gdHJ1ZTtcbiAgICBpZiAoc2NvcGUudG91Y2hUaW1lciAhPSBudWxsKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChzY29wZS50b3VjaFRpbWVyKTtcbiAgICAgICAgc2NvcGUudG91Y2hUaW1lciA9IG51bGw7XG4gICAgfVxuICAgIHNjb3BlLnRvdWNoVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2NvcGUudG91Y2hpbmcgPSBmYWxzZTtcbiAgICAgICAgc2NvcGUudG91Y2hUaW1lciA9IG51bGw7XG4gICAgfSwgNzAwKTtcbn1cbmZ1bmN0aW9uIG1hcmtUb3VjaChldmVudCkge1xuICAgIGV2ZW50ICYmIChldmVudC56ckJ5VG91Y2ggPSB0cnVlKTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUdsb2JhbEV2ZW50KGluc3RhbmNlLCBldmVudCkge1xuICAgIHJldHVybiBub3JtYWxpemVFdmVudChpbnN0YW5jZS5kb20sIG5ldyBGYWtlR2xvYmFsRXZlbnQoaW5zdGFuY2UsIGV2ZW50KSwgdHJ1ZSk7XG59XG5mdW5jdGlvbiBpc0xvY2FsRWwoaW5zdGFuY2UsIGVsKSB7XG4gICAgdmFyIGVsVG1wID0gZWw7XG4gICAgdmFyIGlzTG9jYWwgPSBmYWxzZTtcbiAgICB3aGlsZSAoZWxUbXAgJiYgZWxUbXAubm9kZVR5cGUgIT09IDlcbiAgICAgICAgJiYgIShpc0xvY2FsID0gZWxUbXAuZG9tQmVsb25nVG9aclxuICAgICAgICAgICAgfHwgKGVsVG1wICE9PSBlbCAmJiBlbFRtcCA9PT0gaW5zdGFuY2UucGFpbnRlclJvb3QpKSkge1xuICAgICAgICBlbFRtcCA9IGVsVG1wLnBhcmVudE5vZGU7XG4gICAgfVxuICAgIHJldHVybiBpc0xvY2FsO1xufVxudmFyIEZha2VHbG9iYWxFdmVudCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRmFrZUdsb2JhbEV2ZW50KGluc3RhbmNlLCBldmVudCkge1xuICAgICAgICB0aGlzLnN0b3BQcm9wYWdhdGlvbiA9IHpyVXRpbC5ub29wO1xuICAgICAgICB0aGlzLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiA9IHpyVXRpbC5ub29wO1xuICAgICAgICB0aGlzLnByZXZlbnREZWZhdWx0ID0genJVdGlsLm5vb3A7XG4gICAgICAgIHRoaXMudHlwZSA9IGV2ZW50LnR5cGU7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGhpcy5jdXJyZW50VGFyZ2V0ID0gaW5zdGFuY2UuZG9tO1xuICAgICAgICB0aGlzLnBvaW50ZXJUeXBlID0gZXZlbnQucG9pbnRlclR5cGU7XG4gICAgICAgIHRoaXMuY2xpZW50WCA9IGV2ZW50LmNsaWVudFg7XG4gICAgICAgIHRoaXMuY2xpZW50WSA9IGV2ZW50LmNsaWVudFk7XG4gICAgfVxuICAgIHJldHVybiBGYWtlR2xvYmFsRXZlbnQ7XG59KCkpO1xudmFyIGxvY2FsRE9NSGFuZGxlcnMgPSB7XG4gICAgbW91c2Vkb3duOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQgPSBub3JtYWxpemVFdmVudCh0aGlzLmRvbSwgZXZlbnQpO1xuICAgICAgICB0aGlzLl9fbWF5UG9pbnRlckNhcHR1cmUgPSBbZXZlbnQuenJYLCBldmVudC56clldO1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ21vdXNlZG93bicsIGV2ZW50KTtcbiAgICB9LFxuICAgIG1vdXNlbW92ZTogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50ID0gbm9ybWFsaXplRXZlbnQodGhpcy5kb20sIGV2ZW50KTtcbiAgICAgICAgdmFyIGRvd25Qb2ludCA9IHRoaXMuX19tYXlQb2ludGVyQ2FwdHVyZTtcbiAgICAgICAgaWYgKGRvd25Qb2ludCAmJiAoZXZlbnQuenJYICE9PSBkb3duUG9pbnRbMF0gfHwgZXZlbnQuenJZICE9PSBkb3duUG9pbnRbMV0pKSB7XG4gICAgICAgICAgICB0aGlzLl9fdG9nZ2xlUG9pbnRlckNhcHR1cmUodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdtb3VzZW1vdmUnLCBldmVudCk7XG4gICAgfSxcbiAgICBtb3VzZXVwOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQgPSBub3JtYWxpemVFdmVudCh0aGlzLmRvbSwgZXZlbnQpO1xuICAgICAgICB0aGlzLl9fdG9nZ2xlUG9pbnRlckNhcHR1cmUoZmFsc2UpO1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ21vdXNldXAnLCBldmVudCk7XG4gICAgfSxcbiAgICBtb3VzZW91dDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50ID0gbm9ybWFsaXplRXZlbnQodGhpcy5kb20sIGV2ZW50KTtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBldmVudC50b0VsZW1lbnQgfHwgZXZlbnQucmVsYXRlZFRhcmdldDtcbiAgICAgICAgaWYgKCFpc0xvY2FsRWwodGhpcywgZWxlbWVudCkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9fcG9pbnRlckNhcHR1cmluZykge1xuICAgICAgICAgICAgICAgIGV2ZW50LnpyRXZlbnRDb250cm9sID0gJ25vX2dsb2JhbG91dCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ21vdXNlb3V0JywgZXZlbnQpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICB3aGVlbDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHdoZWVsRXZlbnRTdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICBldmVudCA9IG5vcm1hbGl6ZUV2ZW50KHRoaXMuZG9tLCBldmVudCk7XG4gICAgICAgIHRoaXMudHJpZ2dlcignbW91c2V3aGVlbCcsIGV2ZW50KTtcbiAgICB9LFxuICAgIG1vdXNld2hlZWw6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAod2hlZWxFdmVudFN1cHBvcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGV2ZW50ID0gbm9ybWFsaXplRXZlbnQodGhpcy5kb20sIGV2ZW50KTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdtb3VzZXdoZWVsJywgZXZlbnQpO1xuICAgIH0sXG4gICAgdG91Y2hzdGFydDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50ID0gbm9ybWFsaXplRXZlbnQodGhpcy5kb20sIGV2ZW50KTtcbiAgICAgICAgbWFya1RvdWNoKGV2ZW50KTtcbiAgICAgICAgdGhpcy5fX2xhc3RUb3VjaE1vbWVudCA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHRoaXMuaGFuZGxlci5wcm9jZXNzR2VzdHVyZShldmVudCwgJ3N0YXJ0Jyk7XG4gICAgICAgIGxvY2FsRE9NSGFuZGxlcnMubW91c2Vtb3ZlLmNhbGwodGhpcywgZXZlbnQpO1xuICAgICAgICBsb2NhbERPTUhhbmRsZXJzLm1vdXNlZG93bi5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICB9LFxuICAgIHRvdWNobW92ZTogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50ID0gbm9ybWFsaXplRXZlbnQodGhpcy5kb20sIGV2ZW50KTtcbiAgICAgICAgbWFya1RvdWNoKGV2ZW50KTtcbiAgICAgICAgdGhpcy5oYW5kbGVyLnByb2Nlc3NHZXN0dXJlKGV2ZW50LCAnY2hhbmdlJyk7XG4gICAgICAgIGxvY2FsRE9NSGFuZGxlcnMubW91c2Vtb3ZlLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIH0sXG4gICAgdG91Y2hlbmQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudCA9IG5vcm1hbGl6ZUV2ZW50KHRoaXMuZG9tLCBldmVudCk7XG4gICAgICAgIG1hcmtUb3VjaChldmVudCk7XG4gICAgICAgIHRoaXMuaGFuZGxlci5wcm9jZXNzR2VzdHVyZShldmVudCwgJ2VuZCcpO1xuICAgICAgICBsb2NhbERPTUhhbmRsZXJzLm1vdXNldXAuY2FsbCh0aGlzLCBldmVudCk7XG4gICAgICAgIGlmICgrbmV3IERhdGUoKSAtICgrdGhpcy5fX2xhc3RUb3VjaE1vbWVudCkgPCBUT1VDSF9DTElDS19ERUxBWSkge1xuICAgICAgICAgICAgbG9jYWxET01IYW5kbGVycy5jbGljay5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgcG9pbnRlcmRvd246IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBsb2NhbERPTUhhbmRsZXJzLm1vdXNlZG93bi5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICB9LFxuICAgIHBvaW50ZXJtb3ZlOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKCFpc1BvaW50ZXJGcm9tVG91Y2goZXZlbnQpKSB7XG4gICAgICAgICAgICBsb2NhbERPTUhhbmRsZXJzLm1vdXNlbW92ZS5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgcG9pbnRlcnVwOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgbG9jYWxET01IYW5kbGVycy5tb3VzZXVwLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIH0sXG4gICAgcG9pbnRlcm91dDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmICghaXNQb2ludGVyRnJvbVRvdWNoKGV2ZW50KSkge1xuICAgICAgICAgICAgbG9jYWxET01IYW5kbGVycy5tb3VzZW91dC5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbn07XG56clV0aWwuZWFjaChbJ2NsaWNrJywgJ2RibGNsaWNrJywgJ2NvbnRleHRtZW51J10sIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgbG9jYWxET01IYW5kbGVyc1tuYW1lXSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudCA9IG5vcm1hbGl6ZUV2ZW50KHRoaXMuZG9tLCBldmVudCk7XG4gICAgICAgIHRoaXMudHJpZ2dlcihuYW1lLCBldmVudCk7XG4gICAgfTtcbn0pO1xudmFyIGdsb2JhbERPTUhhbmRsZXJzID0ge1xuICAgIHBvaW50ZXJtb3ZlOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKCFpc1BvaW50ZXJGcm9tVG91Y2goZXZlbnQpKSB7XG4gICAgICAgICAgICBnbG9iYWxET01IYW5kbGVycy5tb3VzZW1vdmUuY2FsbCh0aGlzLCBldmVudCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHBvaW50ZXJ1cDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGdsb2JhbERPTUhhbmRsZXJzLm1vdXNldXAuY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfSxcbiAgICBtb3VzZW1vdmU6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ21vdXNlbW92ZScsIGV2ZW50KTtcbiAgICB9LFxuICAgIG1vdXNldXA6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgcG9pbnRlckNhcHR1cmVSZWxlYXNpbmcgPSB0aGlzLl9fcG9pbnRlckNhcHR1cmluZztcbiAgICAgICAgdGhpcy5fX3RvZ2dsZVBvaW50ZXJDYXB0dXJlKGZhbHNlKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdtb3VzZXVwJywgZXZlbnQpO1xuICAgICAgICBpZiAocG9pbnRlckNhcHR1cmVSZWxlYXNpbmcpIHtcbiAgICAgICAgICAgIGV2ZW50LnpyRXZlbnRDb250cm9sID0gJ29ubHlfZ2xvYmFsb3V0JztcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignbW91c2VvdXQnLCBldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuZnVuY3Rpb24gbW91bnRMb2NhbERPTUV2ZW50TGlzdGVuZXJzKGluc3RhbmNlLCBzY29wZSkge1xuICAgIHZhciBkb21IYW5kbGVycyA9IHNjb3BlLmRvbUhhbmRsZXJzO1xuICAgIGlmIChlbnYucG9pbnRlckV2ZW50c1N1cHBvcnRlZCkge1xuICAgICAgICB6clV0aWwuZWFjaChsb2NhbE5hdGl2ZUxpc3RlbmVyTmFtZXMucG9pbnRlciwgZnVuY3Rpb24gKG5hdGl2ZUV2ZW50TmFtZSkge1xuICAgICAgICAgICAgbW91bnRTaW5nbGVET01FdmVudExpc3RlbmVyKHNjb3BlLCBuYXRpdmVFdmVudE5hbWUsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIGRvbUhhbmRsZXJzW25hdGl2ZUV2ZW50TmFtZV0uY2FsbChpbnN0YW5jZSwgZXZlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKGVudi50b3VjaEV2ZW50c1N1cHBvcnRlZCkge1xuICAgICAgICAgICAgenJVdGlsLmVhY2gobG9jYWxOYXRpdmVMaXN0ZW5lck5hbWVzLnRvdWNoLCBmdW5jdGlvbiAobmF0aXZlRXZlbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgbW91bnRTaW5nbGVET01FdmVudExpc3RlbmVyKHNjb3BlLCBuYXRpdmVFdmVudE5hbWUsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBkb21IYW5kbGVyc1tuYXRpdmVFdmVudE5hbWVdLmNhbGwoaW5zdGFuY2UsIGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VG91Y2hUaW1lcihzY29wZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB6clV0aWwuZWFjaChsb2NhbE5hdGl2ZUxpc3RlbmVyTmFtZXMubW91c2UsIGZ1bmN0aW9uIChuYXRpdmVFdmVudE5hbWUpIHtcbiAgICAgICAgICAgIG1vdW50U2luZ2xlRE9NRXZlbnRMaXN0ZW5lcihzY29wZSwgbmF0aXZlRXZlbnROYW1lLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBldmVudCA9IGdldE5hdGl2ZUV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgICAgICBpZiAoIXNjb3BlLnRvdWNoaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvbUhhbmRsZXJzW25hdGl2ZUV2ZW50TmFtZV0uY2FsbChpbnN0YW5jZSwgZXZlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5mdW5jdGlvbiBtb3VudEdsb2JhbERPTUV2ZW50TGlzdGVuZXJzKGluc3RhbmNlLCBzY29wZSkge1xuICAgIGlmIChlbnYucG9pbnRlckV2ZW50c1N1cHBvcnRlZCkge1xuICAgICAgICB6clV0aWwuZWFjaChnbG9iYWxOYXRpdmVMaXN0ZW5lck5hbWVzLnBvaW50ZXIsIG1vdW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIWVudi50b3VjaEV2ZW50c1N1cHBvcnRlZCkge1xuICAgICAgICB6clV0aWwuZWFjaChnbG9iYWxOYXRpdmVMaXN0ZW5lck5hbWVzLm1vdXNlLCBtb3VudCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1vdW50KG5hdGl2ZUV2ZW50TmFtZSkge1xuICAgICAgICBmdW5jdGlvbiBuYXRpdmVFdmVudExpc3RlbmVyKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudCA9IGdldE5hdGl2ZUV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgIGlmICghaXNMb2NhbEVsKGluc3RhbmNlLCBldmVudC50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQgPSBub3JtYWxpemVHbG9iYWxFdmVudChpbnN0YW5jZSwgZXZlbnQpO1xuICAgICAgICAgICAgICAgIHNjb3BlLmRvbUhhbmRsZXJzW25hdGl2ZUV2ZW50TmFtZV0uY2FsbChpbnN0YW5jZSwgZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG1vdW50U2luZ2xlRE9NRXZlbnRMaXN0ZW5lcihzY29wZSwgbmF0aXZlRXZlbnROYW1lLCBuYXRpdmVFdmVudExpc3RlbmVyLCB7IGNhcHR1cmU6IHRydWUgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gbW91bnRTaW5nbGVET01FdmVudExpc3RlbmVyKHNjb3BlLCBuYXRpdmVFdmVudE5hbWUsIGxpc3RlbmVyLCBvcHQpIHtcbiAgICBzY29wZS5tb3VudGVkW25hdGl2ZUV2ZW50TmFtZV0gPSBsaXN0ZW5lcjtcbiAgICBzY29wZS5saXN0ZW5lck9wdHNbbmF0aXZlRXZlbnROYW1lXSA9IG9wdDtcbiAgICBhZGRFdmVudExpc3RlbmVyKHNjb3BlLmRvbVRhcmdldCwgbmF0aXZlRXZlbnROYW1lLCBsaXN0ZW5lciwgb3B0KTtcbn1cbmZ1bmN0aW9uIHVubW91bnRET01FdmVudExpc3RlbmVycyhzY29wZSkge1xuICAgIHZhciBtb3VudGVkID0gc2NvcGUubW91bnRlZDtcbiAgICBmb3IgKHZhciBuYXRpdmVFdmVudE5hbWUgaW4gbW91bnRlZCkge1xuICAgICAgICBpZiAobW91bnRlZC5oYXNPd25Qcm9wZXJ0eShuYXRpdmVFdmVudE5hbWUpKSB7XG4gICAgICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKHNjb3BlLmRvbVRhcmdldCwgbmF0aXZlRXZlbnROYW1lLCBtb3VudGVkW25hdGl2ZUV2ZW50TmFtZV0sIHNjb3BlLmxpc3RlbmVyT3B0c1tuYXRpdmVFdmVudE5hbWVdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzY29wZS5tb3VudGVkID0ge307XG59XG52YXIgRE9NSGFuZGxlclNjb3BlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBET01IYW5kbGVyU2NvcGUoZG9tVGFyZ2V0LCBkb21IYW5kbGVycykge1xuICAgICAgICB0aGlzLm1vdW50ZWQgPSB7fTtcbiAgICAgICAgdGhpcy5saXN0ZW5lck9wdHMgPSB7fTtcbiAgICAgICAgdGhpcy50b3VjaGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRvbVRhcmdldCA9IGRvbVRhcmdldDtcbiAgICAgICAgdGhpcy5kb21IYW5kbGVycyA9IGRvbUhhbmRsZXJzO1xuICAgIH1cbiAgICByZXR1cm4gRE9NSGFuZGxlclNjb3BlO1xufSgpKTtcbnZhciBIYW5kbGVyRG9tUHJveHkgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhIYW5kbGVyRG9tUHJveHksIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gSGFuZGxlckRvbVByb3h5KGRvbSwgcGFpbnRlclJvb3QpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuX19wb2ludGVyQ2FwdHVyaW5nID0gZmFsc2U7XG4gICAgICAgIF90aGlzLmRvbSA9IGRvbTtcbiAgICAgICAgX3RoaXMucGFpbnRlclJvb3QgPSBwYWludGVyUm9vdDtcbiAgICAgICAgX3RoaXMuX2xvY2FsSGFuZGxlclNjb3BlID0gbmV3IERPTUhhbmRsZXJTY29wZShkb20sIGxvY2FsRE9NSGFuZGxlcnMpO1xuICAgICAgICBpZiAoZ2xvYmFsRXZlbnRTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgIF90aGlzLl9nbG9iYWxIYW5kbGVyU2NvcGUgPSBuZXcgRE9NSGFuZGxlclNjb3BlKGRvY3VtZW50LCBnbG9iYWxET01IYW5kbGVycyk7XG4gICAgICAgIH1cbiAgICAgICAgbW91bnRMb2NhbERPTUV2ZW50TGlzdGVuZXJzKF90aGlzLCBfdGhpcy5fbG9jYWxIYW5kbGVyU2NvcGUpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIEhhbmRsZXJEb21Qcm94eS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdW5tb3VudERPTUV2ZW50TGlzdGVuZXJzKHRoaXMuX2xvY2FsSGFuZGxlclNjb3BlKTtcbiAgICAgICAgaWYgKGdsb2JhbEV2ZW50U3VwcG9ydGVkKSB7XG4gICAgICAgICAgICB1bm1vdW50RE9NRXZlbnRMaXN0ZW5lcnModGhpcy5fZ2xvYmFsSGFuZGxlclNjb3BlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgSGFuZGxlckRvbVByb3h5LnByb3RvdHlwZS5zZXRDdXJzb3IgPSBmdW5jdGlvbiAoY3Vyc29yU3R5bGUpIHtcbiAgICAgICAgdGhpcy5kb20uc3R5bGUgJiYgKHRoaXMuZG9tLnN0eWxlLmN1cnNvciA9IGN1cnNvclN0eWxlIHx8ICdkZWZhdWx0Jyk7XG4gICAgfTtcbiAgICBIYW5kbGVyRG9tUHJveHkucHJvdG90eXBlLl9fdG9nZ2xlUG9pbnRlckNhcHR1cmUgPSBmdW5jdGlvbiAoaXNQb2ludGVyQ2FwdHVyaW5nKSB7XG4gICAgICAgIHRoaXMuX19tYXlQb2ludGVyQ2FwdHVyZSA9IG51bGw7XG4gICAgICAgIGlmIChnbG9iYWxFdmVudFN1cHBvcnRlZFxuICAgICAgICAgICAgJiYgKCgrdGhpcy5fX3BvaW50ZXJDYXB0dXJpbmcpIF4gKCtpc1BvaW50ZXJDYXB0dXJpbmcpKSkge1xuICAgICAgICAgICAgdGhpcy5fX3BvaW50ZXJDYXB0dXJpbmcgPSBpc1BvaW50ZXJDYXB0dXJpbmc7XG4gICAgICAgICAgICB2YXIgZ2xvYmFsSGFuZGxlclNjb3BlID0gdGhpcy5fZ2xvYmFsSGFuZGxlclNjb3BlO1xuICAgICAgICAgICAgaXNQb2ludGVyQ2FwdHVyaW5nXG4gICAgICAgICAgICAgICAgPyBtb3VudEdsb2JhbERPTUV2ZW50TGlzdGVuZXJzKHRoaXMsIGdsb2JhbEhhbmRsZXJTY29wZSlcbiAgICAgICAgICAgICAgICA6IHVubW91bnRET01FdmVudExpc3RlbmVycyhnbG9iYWxIYW5kbGVyU2NvcGUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gSGFuZGxlckRvbVByb3h5O1xufShFdmVudGZ1bCkpO1xuZXhwb3J0IGRlZmF1bHQgSGFuZGxlckRvbVByb3h5O1xuIiwiaW1wb3J0IGVudiBmcm9tICcuL2NvcmUvZW52LmpzJztcbnZhciBkcHIgPSAxO1xuaWYgKGVudi5oYXNHbG9iYWxXaW5kb3cpIHtcbiAgICBkcHIgPSBNYXRoLm1heCh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb1xuICAgICAgICB8fCAod2luZG93LnNjcmVlbiAmJiB3aW5kb3cuc2NyZWVuLmRldmljZVhEUEkgLyB3aW5kb3cuc2NyZWVuLmxvZ2ljYWxYRFBJKVxuICAgICAgICB8fCAxLCAxKTtcbn1cbmV4cG9ydCB2YXIgZGVidWdNb2RlID0gMDtcbmV4cG9ydCB2YXIgZGV2aWNlUGl4ZWxSYXRpbyA9IGRwcjtcbmV4cG9ydCB2YXIgREFSS19NT0RFX1RIUkVTSE9MRCA9IDAuNDtcbmV4cG9ydCB2YXIgREFSS19MQUJFTF9DT0xPUiA9ICcjMzMzJztcbmV4cG9ydCB2YXIgTElHSFRfTEFCRUxfQ09MT1IgPSAnI2NjYyc7XG5leHBvcnQgdmFyIExJR0hURVJfTEFCRUxfQ09MT1IgPSAnI2VlZSc7XG4iLCJpbXBvcnQgKiBhcyBtYXRyaXggZnJvbSAnLi9tYXRyaXguanMnO1xuaW1wb3J0ICogYXMgdmVjdG9yIGZyb20gJy4vdmVjdG9yLmpzJztcbnZhciBtSWRlbnRpdHkgPSBtYXRyaXguaWRlbnRpdHk7XG52YXIgRVBTSUxPTiA9IDVlLTU7XG5mdW5jdGlvbiBpc05vdEFyb3VuZFplcm8odmFsKSB7XG4gICAgcmV0dXJuIHZhbCA+IEVQU0lMT04gfHwgdmFsIDwgLUVQU0lMT047XG59XG52YXIgc2NhbGVUbXAgPSBbXTtcbnZhciB0bXBUcmFuc2Zvcm0gPSBbXTtcbnZhciBvcmlnaW5UcmFuc2Zvcm0gPSBtYXRyaXguY3JlYXRlKCk7XG52YXIgYWJzID0gTWF0aC5hYnM7XG52YXIgVHJhbnNmb3JtYWJsZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVHJhbnNmb3JtYWJsZSgpIHtcbiAgICB9XG4gICAgVHJhbnNmb3JtYWJsZS5wcm90b3R5cGUuZ2V0TG9jYWxUcmFuc2Zvcm0gPSBmdW5jdGlvbiAobSkge1xuICAgICAgICByZXR1cm4gVHJhbnNmb3JtYWJsZS5nZXRMb2NhbFRyYW5zZm9ybSh0aGlzLCBtKTtcbiAgICB9O1xuICAgIFRyYW5zZm9ybWFibGUucHJvdG90eXBlLnNldFBvc2l0aW9uID0gZnVuY3Rpb24gKGFycikge1xuICAgICAgICB0aGlzLnggPSBhcnJbMF07XG4gICAgICAgIHRoaXMueSA9IGFyclsxXTtcbiAgICB9O1xuICAgIFRyYW5zZm9ybWFibGUucHJvdG90eXBlLnNldFNjYWxlID0gZnVuY3Rpb24gKGFycikge1xuICAgICAgICB0aGlzLnNjYWxlWCA9IGFyclswXTtcbiAgICAgICAgdGhpcy5zY2FsZVkgPSBhcnJbMV07XG4gICAgfTtcbiAgICBUcmFuc2Zvcm1hYmxlLnByb3RvdHlwZS5zZXRTa2V3ID0gZnVuY3Rpb24gKGFycikge1xuICAgICAgICB0aGlzLnNrZXdYID0gYXJyWzBdO1xuICAgICAgICB0aGlzLnNrZXdZID0gYXJyWzFdO1xuICAgIH07XG4gICAgVHJhbnNmb3JtYWJsZS5wcm90b3R5cGUuc2V0T3JpZ2luID0gZnVuY3Rpb24gKGFycikge1xuICAgICAgICB0aGlzLm9yaWdpblggPSBhcnJbMF07XG4gICAgICAgIHRoaXMub3JpZ2luWSA9IGFyclsxXTtcbiAgICB9O1xuICAgIFRyYW5zZm9ybWFibGUucHJvdG90eXBlLm5lZWRMb2NhbFRyYW5zZm9ybSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGlzTm90QXJvdW5kWmVybyh0aGlzLnJvdGF0aW9uKVxuICAgICAgICAgICAgfHwgaXNOb3RBcm91bmRaZXJvKHRoaXMueClcbiAgICAgICAgICAgIHx8IGlzTm90QXJvdW5kWmVybyh0aGlzLnkpXG4gICAgICAgICAgICB8fCBpc05vdEFyb3VuZFplcm8odGhpcy5zY2FsZVggLSAxKVxuICAgICAgICAgICAgfHwgaXNOb3RBcm91bmRaZXJvKHRoaXMuc2NhbGVZIC0gMSlcbiAgICAgICAgICAgIHx8IGlzTm90QXJvdW5kWmVybyh0aGlzLnNrZXdYKVxuICAgICAgICAgICAgfHwgaXNOb3RBcm91bmRaZXJvKHRoaXMuc2tld1kpO1xuICAgIH07XG4gICAgVHJhbnNmb3JtYWJsZS5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGFyZW50VHJhbnNmb3JtID0gdGhpcy5wYXJlbnQgJiYgdGhpcy5wYXJlbnQudHJhbnNmb3JtO1xuICAgICAgICB2YXIgbmVlZExvY2FsVHJhbnNmb3JtID0gdGhpcy5uZWVkTG9jYWxUcmFuc2Zvcm0oKTtcbiAgICAgICAgdmFyIG0gPSB0aGlzLnRyYW5zZm9ybTtcbiAgICAgICAgaWYgKCEobmVlZExvY2FsVHJhbnNmb3JtIHx8IHBhcmVudFRyYW5zZm9ybSkpIHtcbiAgICAgICAgICAgIGlmIChtKSB7XG4gICAgICAgICAgICAgICAgbUlkZW50aXR5KG0pO1xuICAgICAgICAgICAgICAgIHRoaXMuaW52VHJhbnNmb3JtID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBtID0gbSB8fCBtYXRyaXguY3JlYXRlKCk7XG4gICAgICAgIGlmIChuZWVkTG9jYWxUcmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0TG9jYWxUcmFuc2Zvcm0obSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtSWRlbnRpdHkobSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmVudFRyYW5zZm9ybSkge1xuICAgICAgICAgICAgaWYgKG5lZWRMb2NhbFRyYW5zZm9ybSkge1xuICAgICAgICAgICAgICAgIG1hdHJpeC5tdWwobSwgcGFyZW50VHJhbnNmb3JtLCBtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1hdHJpeC5jb3B5KG0sIHBhcmVudFRyYW5zZm9ybSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSBtO1xuICAgICAgICB0aGlzLl9yZXNvbHZlR2xvYmFsU2NhbGVSYXRpbyhtKTtcbiAgICB9O1xuICAgIFRyYW5zZm9ybWFibGUucHJvdG90eXBlLl9yZXNvbHZlR2xvYmFsU2NhbGVSYXRpbyA9IGZ1bmN0aW9uIChtKSB7XG4gICAgICAgIHZhciBnbG9iYWxTY2FsZVJhdGlvID0gdGhpcy5nbG9iYWxTY2FsZVJhdGlvO1xuICAgICAgICBpZiAoZ2xvYmFsU2NhbGVSYXRpbyAhPSBudWxsICYmIGdsb2JhbFNjYWxlUmF0aW8gIT09IDEpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0R2xvYmFsU2NhbGUoc2NhbGVUbXApO1xuICAgICAgICAgICAgdmFyIHJlbFggPSBzY2FsZVRtcFswXSA8IDAgPyAtMSA6IDE7XG4gICAgICAgICAgICB2YXIgcmVsWSA9IHNjYWxlVG1wWzFdIDwgMCA/IC0xIDogMTtcbiAgICAgICAgICAgIHZhciBzeCA9ICgoc2NhbGVUbXBbMF0gLSByZWxYKSAqIGdsb2JhbFNjYWxlUmF0aW8gKyByZWxYKSAvIHNjYWxlVG1wWzBdIHx8IDA7XG4gICAgICAgICAgICB2YXIgc3kgPSAoKHNjYWxlVG1wWzFdIC0gcmVsWSkgKiBnbG9iYWxTY2FsZVJhdGlvICsgcmVsWSkgLyBzY2FsZVRtcFsxXSB8fCAwO1xuICAgICAgICAgICAgbVswXSAqPSBzeDtcbiAgICAgICAgICAgIG1bMV0gKj0gc3g7XG4gICAgICAgICAgICBtWzJdICo9IHN5O1xuICAgICAgICAgICAgbVszXSAqPSBzeTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmludlRyYW5zZm9ybSA9IHRoaXMuaW52VHJhbnNmb3JtIHx8IG1hdHJpeC5jcmVhdGUoKTtcbiAgICAgICAgbWF0cml4LmludmVydCh0aGlzLmludlRyYW5zZm9ybSwgbSk7XG4gICAgfTtcbiAgICBUcmFuc2Zvcm1hYmxlLnByb3RvdHlwZS5nZXRDb21wdXRlZFRyYW5zZm9ybSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRyYW5zZm9ybU5vZGUgPSB0aGlzO1xuICAgICAgICB2YXIgYW5jZXN0b3JzID0gW107XG4gICAgICAgIHdoaWxlICh0cmFuc2Zvcm1Ob2RlKSB7XG4gICAgICAgICAgICBhbmNlc3RvcnMucHVzaCh0cmFuc2Zvcm1Ob2RlKTtcbiAgICAgICAgICAgIHRyYW5zZm9ybU5vZGUgPSB0cmFuc2Zvcm1Ob2RlLnBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAodHJhbnNmb3JtTm9kZSA9IGFuY2VzdG9ycy5wb3AoKSkge1xuICAgICAgICAgICAgdHJhbnNmb3JtTm9kZS51cGRhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm07XG4gICAgfTtcbiAgICBUcmFuc2Zvcm1hYmxlLnByb3RvdHlwZS5zZXRMb2NhbFRyYW5zZm9ybSA9IGZ1bmN0aW9uIChtKSB7XG4gICAgICAgIGlmICghbSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzeCA9IG1bMF0gKiBtWzBdICsgbVsxXSAqIG1bMV07XG4gICAgICAgIHZhciBzeSA9IG1bMl0gKiBtWzJdICsgbVszXSAqIG1bM107XG4gICAgICAgIHZhciByb3RhdGlvbiA9IE1hdGguYXRhbjIobVsxXSwgbVswXSk7XG4gICAgICAgIHZhciBzaGVhclggPSBNYXRoLlBJIC8gMiArIHJvdGF0aW9uIC0gTWF0aC5hdGFuMihtWzNdLCBtWzJdKTtcbiAgICAgICAgc3kgPSBNYXRoLnNxcnQoc3kpICogTWF0aC5jb3Moc2hlYXJYKTtcbiAgICAgICAgc3ggPSBNYXRoLnNxcnQoc3gpO1xuICAgICAgICB0aGlzLnNrZXdYID0gc2hlYXJYO1xuICAgICAgICB0aGlzLnNrZXdZID0gMDtcbiAgICAgICAgdGhpcy5yb3RhdGlvbiA9IC1yb3RhdGlvbjtcbiAgICAgICAgdGhpcy54ID0gK21bNF07XG4gICAgICAgIHRoaXMueSA9ICttWzVdO1xuICAgICAgICB0aGlzLnNjYWxlWCA9IHN4O1xuICAgICAgICB0aGlzLnNjYWxlWSA9IHN5O1xuICAgICAgICB0aGlzLm9yaWdpblggPSAwO1xuICAgICAgICB0aGlzLm9yaWdpblkgPSAwO1xuICAgIH07XG4gICAgVHJhbnNmb3JtYWJsZS5wcm90b3R5cGUuZGVjb21wb3NlVHJhbnNmb3JtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMudHJhbnNmb3JtKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50O1xuICAgICAgICB2YXIgbSA9IHRoaXMudHJhbnNmb3JtO1xuICAgICAgICBpZiAocGFyZW50ICYmIHBhcmVudC50cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIG1hdHJpeC5tdWwodG1wVHJhbnNmb3JtLCBwYXJlbnQuaW52VHJhbnNmb3JtLCBtKTtcbiAgICAgICAgICAgIG0gPSB0bXBUcmFuc2Zvcm07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG94ID0gdGhpcy5vcmlnaW5YO1xuICAgICAgICB2YXIgb3kgPSB0aGlzLm9yaWdpblk7XG4gICAgICAgIGlmIChveCB8fCBveSkge1xuICAgICAgICAgICAgb3JpZ2luVHJhbnNmb3JtWzRdID0gb3g7XG4gICAgICAgICAgICBvcmlnaW5UcmFuc2Zvcm1bNV0gPSBveTtcbiAgICAgICAgICAgIG1hdHJpeC5tdWwodG1wVHJhbnNmb3JtLCBtLCBvcmlnaW5UcmFuc2Zvcm0pO1xuICAgICAgICAgICAgdG1wVHJhbnNmb3JtWzRdIC09IG94O1xuICAgICAgICAgICAgdG1wVHJhbnNmb3JtWzVdIC09IG95O1xuICAgICAgICAgICAgbSA9IHRtcFRyYW5zZm9ybTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldExvY2FsVHJhbnNmb3JtKG0pO1xuICAgIH07XG4gICAgVHJhbnNmb3JtYWJsZS5wcm90b3R5cGUuZ2V0R2xvYmFsU2NhbGUgPSBmdW5jdGlvbiAob3V0KSB7XG4gICAgICAgIHZhciBtID0gdGhpcy50cmFuc2Zvcm07XG4gICAgICAgIG91dCA9IG91dCB8fCBbXTtcbiAgICAgICAgaWYgKCFtKSB7XG4gICAgICAgICAgICBvdXRbMF0gPSAxO1xuICAgICAgICAgICAgb3V0WzFdID0gMTtcbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH1cbiAgICAgICAgb3V0WzBdID0gTWF0aC5zcXJ0KG1bMF0gKiBtWzBdICsgbVsxXSAqIG1bMV0pO1xuICAgICAgICBvdXRbMV0gPSBNYXRoLnNxcnQobVsyXSAqIG1bMl0gKyBtWzNdICogbVszXSk7XG4gICAgICAgIGlmIChtWzBdIDwgMCkge1xuICAgICAgICAgICAgb3V0WzBdID0gLW91dFswXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobVszXSA8IDApIHtcbiAgICAgICAgICAgIG91dFsxXSA9IC1vdXRbMV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xuICAgIFRyYW5zZm9ybWFibGUucHJvdG90eXBlLnRyYW5zZm9ybUNvb3JkVG9Mb2NhbCA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHZhciB2MiA9IFt4LCB5XTtcbiAgICAgICAgdmFyIGludlRyYW5zZm9ybSA9IHRoaXMuaW52VHJhbnNmb3JtO1xuICAgICAgICBpZiAoaW52VHJhbnNmb3JtKSB7XG4gICAgICAgICAgICB2ZWN0b3IuYXBwbHlUcmFuc2Zvcm0odjIsIHYyLCBpbnZUcmFuc2Zvcm0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2MjtcbiAgICB9O1xuICAgIFRyYW5zZm9ybWFibGUucHJvdG90eXBlLnRyYW5zZm9ybUNvb3JkVG9HbG9iYWwgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICB2YXIgdjIgPSBbeCwgeV07XG4gICAgICAgIHZhciB0cmFuc2Zvcm0gPSB0aGlzLnRyYW5zZm9ybTtcbiAgICAgICAgaWYgKHRyYW5zZm9ybSkge1xuICAgICAgICAgICAgdmVjdG9yLmFwcGx5VHJhbnNmb3JtKHYyLCB2MiwgdHJhbnNmb3JtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdjI7XG4gICAgfTtcbiAgICBUcmFuc2Zvcm1hYmxlLnByb3RvdHlwZS5nZXRMaW5lU2NhbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBtID0gdGhpcy50cmFuc2Zvcm07XG4gICAgICAgIHJldHVybiBtICYmIGFicyhtWzBdIC0gMSkgPiAxZS0xMCAmJiBhYnMobVszXSAtIDEpID4gMWUtMTBcbiAgICAgICAgICAgID8gTWF0aC5zcXJ0KGFicyhtWzBdICogbVszXSAtIG1bMl0gKiBtWzFdKSlcbiAgICAgICAgICAgIDogMTtcbiAgICB9O1xuICAgIFRyYW5zZm9ybWFibGUucHJvdG90eXBlLmNvcHlUcmFuc2Zvcm0gPSBmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICAgIGNvcHlUcmFuc2Zvcm0odGhpcywgc291cmNlKTtcbiAgICB9O1xuICAgIFRyYW5zZm9ybWFibGUuZ2V0TG9jYWxUcmFuc2Zvcm0gPSBmdW5jdGlvbiAodGFyZ2V0LCBtKSB7XG4gICAgICAgIG0gPSBtIHx8IFtdO1xuICAgICAgICB2YXIgb3ggPSB0YXJnZXQub3JpZ2luWCB8fCAwO1xuICAgICAgICB2YXIgb3kgPSB0YXJnZXQub3JpZ2luWSB8fCAwO1xuICAgICAgICB2YXIgc3ggPSB0YXJnZXQuc2NhbGVYO1xuICAgICAgICB2YXIgc3kgPSB0YXJnZXQuc2NhbGVZO1xuICAgICAgICB2YXIgYXggPSB0YXJnZXQuYW5jaG9yWDtcbiAgICAgICAgdmFyIGF5ID0gdGFyZ2V0LmFuY2hvclk7XG4gICAgICAgIHZhciByb3RhdGlvbiA9IHRhcmdldC5yb3RhdGlvbiB8fCAwO1xuICAgICAgICB2YXIgeCA9IHRhcmdldC54O1xuICAgICAgICB2YXIgeSA9IHRhcmdldC55O1xuICAgICAgICB2YXIgc2tld1ggPSB0YXJnZXQuc2tld1ggPyBNYXRoLnRhbih0YXJnZXQuc2tld1gpIDogMDtcbiAgICAgICAgdmFyIHNrZXdZID0gdGFyZ2V0LnNrZXdZID8gTWF0aC50YW4oLXRhcmdldC5za2V3WSkgOiAwO1xuICAgICAgICBpZiAob3ggfHwgb3kgfHwgYXggfHwgYXkpIHtcbiAgICAgICAgICAgIHZhciBkeCA9IG94ICsgYXg7XG4gICAgICAgICAgICB2YXIgZHkgPSBveSArIGF5O1xuICAgICAgICAgICAgbVs0XSA9IC1keCAqIHN4IC0gc2tld1ggKiBkeSAqIHN5O1xuICAgICAgICAgICAgbVs1XSA9IC1keSAqIHN5IC0gc2tld1kgKiBkeCAqIHN4O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbVs0XSA9IG1bNV0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIG1bMF0gPSBzeDtcbiAgICAgICAgbVszXSA9IHN5O1xuICAgICAgICBtWzFdID0gc2tld1kgKiBzeDtcbiAgICAgICAgbVsyXSA9IHNrZXdYICogc3k7XG4gICAgICAgIHJvdGF0aW9uICYmIG1hdHJpeC5yb3RhdGUobSwgbSwgcm90YXRpb24pO1xuICAgICAgICBtWzRdICs9IG94ICsgeDtcbiAgICAgICAgbVs1XSArPSBveSArIHk7XG4gICAgICAgIHJldHVybiBtO1xuICAgIH07XG4gICAgVHJhbnNmb3JtYWJsZS5pbml0RGVmYXVsdFByb3BzID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHByb3RvID0gVHJhbnNmb3JtYWJsZS5wcm90b3R5cGU7XG4gICAgICAgIHByb3RvLnNjYWxlWCA9XG4gICAgICAgICAgICBwcm90by5zY2FsZVkgPVxuICAgICAgICAgICAgICAgIHByb3RvLmdsb2JhbFNjYWxlUmF0aW8gPSAxO1xuICAgICAgICBwcm90by54ID1cbiAgICAgICAgICAgIHByb3RvLnkgPVxuICAgICAgICAgICAgICAgIHByb3RvLm9yaWdpblggPVxuICAgICAgICAgICAgICAgICAgICBwcm90by5vcmlnaW5ZID1cbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3RvLnNrZXdYID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm90by5za2V3WSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3RvLnJvdGF0aW9uID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3RvLmFuY2hvclggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3RvLmFuY2hvclkgPSAwO1xuICAgIH0pKCk7XG4gICAgcmV0dXJuIFRyYW5zZm9ybWFibGU7XG59KCkpO1xuO1xuZXhwb3J0IHZhciBUUkFOU0ZPUk1BQkxFX1BST1BTID0gW1xuICAgICd4JywgJ3knLCAnb3JpZ2luWCcsICdvcmlnaW5ZJywgJ2FuY2hvclgnLCAnYW5jaG9yWScsICdyb3RhdGlvbicsICdzY2FsZVgnLCAnc2NhbGVZJywgJ3NrZXdYJywgJ3NrZXdZJ1xuXTtcbmV4cG9ydCBmdW5jdGlvbiBjb3B5VHJhbnNmb3JtKHRhcmdldCwgc291cmNlKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBUUkFOU0ZPUk1BQkxFX1BST1BTLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBwcm9wTmFtZSA9IFRSQU5TRk9STUFCTEVfUFJPUFNbaV07XG4gICAgICAgIHRhcmdldFtwcm9wTmFtZV0gPSBzb3VyY2VbcHJvcE5hbWVdO1xuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IFRyYW5zZm9ybWFibGU7XG4iLCJpbXBvcnQgQm91bmRpbmdSZWN0IGZyb20gJy4uL2NvcmUvQm91bmRpbmdSZWN0LmpzJztcbmltcG9ydCBMUlUgZnJvbSAnLi4vY29yZS9MUlUuanMnO1xuaW1wb3J0IHsgREVGQVVMVF9GT05ULCBwbGF0Zm9ybUFwaSB9IGZyb20gJy4uL2NvcmUvcGxhdGZvcm0uanMnO1xudmFyIHRleHRXaWR0aENhY2hlID0ge307XG5leHBvcnQgZnVuY3Rpb24gZ2V0V2lkdGgodGV4dCwgZm9udCkge1xuICAgIGZvbnQgPSBmb250IHx8IERFRkFVTFRfRk9OVDtcbiAgICB2YXIgY2FjaGVPZkZvbnQgPSB0ZXh0V2lkdGhDYWNoZVtmb250XTtcbiAgICBpZiAoIWNhY2hlT2ZGb250KSB7XG4gICAgICAgIGNhY2hlT2ZGb250ID0gdGV4dFdpZHRoQ2FjaGVbZm9udF0gPSBuZXcgTFJVKDUwMCk7XG4gICAgfVxuICAgIHZhciB3aWR0aCA9IGNhY2hlT2ZGb250LmdldCh0ZXh0KTtcbiAgICBpZiAod2lkdGggPT0gbnVsbCkge1xuICAgICAgICB3aWR0aCA9IHBsYXRmb3JtQXBpLm1lYXN1cmVUZXh0KHRleHQsIGZvbnQpLndpZHRoO1xuICAgICAgICBjYWNoZU9mRm9udC5wdXQodGV4dCwgd2lkdGgpO1xuICAgIH1cbiAgICByZXR1cm4gd2lkdGg7XG59XG5leHBvcnQgZnVuY3Rpb24gaW5uZXJHZXRCb3VuZGluZ1JlY3QodGV4dCwgZm9udCwgdGV4dEFsaWduLCB0ZXh0QmFzZWxpbmUpIHtcbiAgICB2YXIgd2lkdGggPSBnZXRXaWR0aCh0ZXh0LCBmb250KTtcbiAgICB2YXIgaGVpZ2h0ID0gZ2V0TGluZUhlaWdodChmb250KTtcbiAgICB2YXIgeCA9IGFkanVzdFRleHRYKDAsIHdpZHRoLCB0ZXh0QWxpZ24pO1xuICAgIHZhciB5ID0gYWRqdXN0VGV4dFkoMCwgaGVpZ2h0LCB0ZXh0QmFzZWxpbmUpO1xuICAgIHZhciByZWN0ID0gbmV3IEJvdW5kaW5nUmVjdCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICByZXR1cm4gcmVjdDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRCb3VuZGluZ1JlY3QodGV4dCwgZm9udCwgdGV4dEFsaWduLCB0ZXh0QmFzZWxpbmUpIHtcbiAgICB2YXIgdGV4dExpbmVzID0gKCh0ZXh0IHx8ICcnKSArICcnKS5zcGxpdCgnXFxuJyk7XG4gICAgdmFyIGxlbiA9IHRleHRMaW5lcy5sZW5ndGg7XG4gICAgaWYgKGxlbiA9PT0gMSkge1xuICAgICAgICByZXR1cm4gaW5uZXJHZXRCb3VuZGluZ1JlY3QodGV4dExpbmVzWzBdLCBmb250LCB0ZXh0QWxpZ24sIHRleHRCYXNlbGluZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgdW5pb25kUmVjdCA9IG5ldyBCb3VuZGluZ1JlY3QoMCwgMCwgMCwgMCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGV4dExpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcmVjdCA9IGlubmVyR2V0Qm91bmRpbmdSZWN0KHRleHRMaW5lc1tpXSwgZm9udCwgdGV4dEFsaWduLCB0ZXh0QmFzZWxpbmUpO1xuICAgICAgICAgICAgaSA9PT0gMCA/IHVuaW9uZFJlY3QuY29weShyZWN0KSA6IHVuaW9uZFJlY3QudW5pb24ocmVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuaW9uZFJlY3Q7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGFkanVzdFRleHRYKHgsIHdpZHRoLCB0ZXh0QWxpZ24pIHtcbiAgICBpZiAodGV4dEFsaWduID09PSAncmlnaHQnKSB7XG4gICAgICAgIHggLT0gd2lkdGg7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRleHRBbGlnbiA9PT0gJ2NlbnRlcicpIHtcbiAgICAgICAgeCAtPSB3aWR0aCAvIDI7XG4gICAgfVxuICAgIHJldHVybiB4O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFkanVzdFRleHRZKHksIGhlaWdodCwgdmVydGljYWxBbGlnbikge1xuICAgIGlmICh2ZXJ0aWNhbEFsaWduID09PSAnbWlkZGxlJykge1xuICAgICAgICB5IC09IGhlaWdodCAvIDI7XG4gICAgfVxuICAgIGVsc2UgaWYgKHZlcnRpY2FsQWxpZ24gPT09ICdib3R0b20nKSB7XG4gICAgICAgIHkgLT0gaGVpZ2h0O1xuICAgIH1cbiAgICByZXR1cm4geTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRMaW5lSGVpZ2h0KGZvbnQpIHtcbiAgICByZXR1cm4gZ2V0V2lkdGgoJ+WbvScsIGZvbnQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1lYXN1cmVUZXh0KHRleHQsIGZvbnQpIHtcbiAgICByZXR1cm4gcGxhdGZvcm1BcGkubWVhc3VyZVRleHQodGV4dCwgZm9udCk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VQZXJjZW50KHZhbHVlLCBtYXhWYWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICh2YWx1ZS5sYXN0SW5kZXhPZignJScpID49IDApIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHZhbHVlKSAvIDEwMCAqIG1heFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZVRleHRQb3NpdGlvbihvdXQsIG9wdHMsIHJlY3QpIHtcbiAgICB2YXIgdGV4dFBvc2l0aW9uID0gb3B0cy5wb3NpdGlvbiB8fCAnaW5zaWRlJztcbiAgICB2YXIgZGlzdGFuY2UgPSBvcHRzLmRpc3RhbmNlICE9IG51bGwgPyBvcHRzLmRpc3RhbmNlIDogNTtcbiAgICB2YXIgaGVpZ2h0ID0gcmVjdC5oZWlnaHQ7XG4gICAgdmFyIHdpZHRoID0gcmVjdC53aWR0aDtcbiAgICB2YXIgaGFsZkhlaWdodCA9IGhlaWdodCAvIDI7XG4gICAgdmFyIHggPSByZWN0Lng7XG4gICAgdmFyIHkgPSByZWN0Lnk7XG4gICAgdmFyIHRleHRBbGlnbiA9ICdsZWZ0JztcbiAgICB2YXIgdGV4dFZlcnRpY2FsQWxpZ24gPSAndG9wJztcbiAgICBpZiAodGV4dFBvc2l0aW9uIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgeCArPSBwYXJzZVBlcmNlbnQodGV4dFBvc2l0aW9uWzBdLCByZWN0LndpZHRoKTtcbiAgICAgICAgeSArPSBwYXJzZVBlcmNlbnQodGV4dFBvc2l0aW9uWzFdLCByZWN0LmhlaWdodCk7XG4gICAgICAgIHRleHRBbGlnbiA9IG51bGw7XG4gICAgICAgIHRleHRWZXJ0aWNhbEFsaWduID0gbnVsbDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHN3aXRjaCAodGV4dFBvc2l0aW9uKSB7XG4gICAgICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgICAgICAgICB4IC09IGRpc3RhbmNlO1xuICAgICAgICAgICAgICAgIHkgKz0gaGFsZkhlaWdodDtcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ24gPSAncmlnaHQnO1xuICAgICAgICAgICAgICAgIHRleHRWZXJ0aWNhbEFsaWduID0gJ21pZGRsZSc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgICAgICAgeCArPSBkaXN0YW5jZSArIHdpZHRoO1xuICAgICAgICAgICAgICAgIHkgKz0gaGFsZkhlaWdodDtcbiAgICAgICAgICAgICAgICB0ZXh0VmVydGljYWxBbGlnbiA9ICdtaWRkbGUnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndG9wJzpcbiAgICAgICAgICAgICAgICB4ICs9IHdpZHRoIC8gMjtcbiAgICAgICAgICAgICAgICB5IC09IGRpc3RhbmNlO1xuICAgICAgICAgICAgICAgIHRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICAgICAgICAgIHRleHRWZXJ0aWNhbEFsaWduID0gJ2JvdHRvbSc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdib3R0b20nOlxuICAgICAgICAgICAgICAgIHggKz0gd2lkdGggLyAyO1xuICAgICAgICAgICAgICAgIHkgKz0gaGVpZ2h0ICsgZGlzdGFuY2U7XG4gICAgICAgICAgICAgICAgdGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdpbnNpZGUnOlxuICAgICAgICAgICAgICAgIHggKz0gd2lkdGggLyAyO1xuICAgICAgICAgICAgICAgIHkgKz0gaGFsZkhlaWdodDtcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgICAgICAgICB0ZXh0VmVydGljYWxBbGlnbiA9ICdtaWRkbGUnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnaW5zaWRlTGVmdCc6XG4gICAgICAgICAgICAgICAgeCArPSBkaXN0YW5jZTtcbiAgICAgICAgICAgICAgICB5ICs9IGhhbGZIZWlnaHQ7XG4gICAgICAgICAgICAgICAgdGV4dFZlcnRpY2FsQWxpZ24gPSAnbWlkZGxlJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2luc2lkZVJpZ2h0JzpcbiAgICAgICAgICAgICAgICB4ICs9IHdpZHRoIC0gZGlzdGFuY2U7XG4gICAgICAgICAgICAgICAgeSArPSBoYWxmSGVpZ2h0O1xuICAgICAgICAgICAgICAgIHRleHRBbGlnbiA9ICdyaWdodCc7XG4gICAgICAgICAgICAgICAgdGV4dFZlcnRpY2FsQWxpZ24gPSAnbWlkZGxlJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2luc2lkZVRvcCc6XG4gICAgICAgICAgICAgICAgeCArPSB3aWR0aCAvIDI7XG4gICAgICAgICAgICAgICAgeSArPSBkaXN0YW5jZTtcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2luc2lkZUJvdHRvbSc6XG4gICAgICAgICAgICAgICAgeCArPSB3aWR0aCAvIDI7XG4gICAgICAgICAgICAgICAgeSArPSBoZWlnaHQgLSBkaXN0YW5jZTtcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgICAgICAgICB0ZXh0VmVydGljYWxBbGlnbiA9ICdib3R0b20nO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnaW5zaWRlVG9wTGVmdCc6XG4gICAgICAgICAgICAgICAgeCArPSBkaXN0YW5jZTtcbiAgICAgICAgICAgICAgICB5ICs9IGRpc3RhbmNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnaW5zaWRlVG9wUmlnaHQnOlxuICAgICAgICAgICAgICAgIHggKz0gd2lkdGggLSBkaXN0YW5jZTtcbiAgICAgICAgICAgICAgICB5ICs9IGRpc3RhbmNlO1xuICAgICAgICAgICAgICAgIHRleHRBbGlnbiA9ICdyaWdodCc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdpbnNpZGVCb3R0b21MZWZ0JzpcbiAgICAgICAgICAgICAgICB4ICs9IGRpc3RhbmNlO1xuICAgICAgICAgICAgICAgIHkgKz0gaGVpZ2h0IC0gZGlzdGFuY2U7XG4gICAgICAgICAgICAgICAgdGV4dFZlcnRpY2FsQWxpZ24gPSAnYm90dG9tJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2luc2lkZUJvdHRvbVJpZ2h0JzpcbiAgICAgICAgICAgICAgICB4ICs9IHdpZHRoIC0gZGlzdGFuY2U7XG4gICAgICAgICAgICAgICAgeSArPSBoZWlnaHQgLSBkaXN0YW5jZTtcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ24gPSAncmlnaHQnO1xuICAgICAgICAgICAgICAgIHRleHRWZXJ0aWNhbEFsaWduID0gJ2JvdHRvbSc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb3V0ID0gb3V0IHx8IHt9O1xuICAgIG91dC54ID0geDtcbiAgICBvdXQueSA9IHk7XG4gICAgb3V0LmFsaWduID0gdGV4dEFsaWduO1xuICAgIG91dC52ZXJ0aWNhbEFsaWduID0gdGV4dFZlcnRpY2FsQWxpZ247XG4gICAgcmV0dXJuIG91dDtcbn1cbiIsImltcG9ydCBUcmFuc2Zvcm1hYmxlLCB7IFRSQU5TRk9STUFCTEVfUFJPUFMgfSBmcm9tICcuL2NvcmUvVHJhbnNmb3JtYWJsZS5qcyc7XG5pbXBvcnQgQW5pbWF0b3IsIHsgY2xvbmVWYWx1ZSB9IGZyb20gJy4vYW5pbWF0aW9uL0FuaW1hdG9yLmpzJztcbmltcG9ydCBCb3VuZGluZ1JlY3QgZnJvbSAnLi9jb3JlL0JvdW5kaW5nUmVjdC5qcyc7XG5pbXBvcnQgRXZlbnRmdWwgZnJvbSAnLi9jb3JlL0V2ZW50ZnVsLmpzJztcbmltcG9ydCB7IGNhbGN1bGF0ZVRleHRQb3NpdGlvbiwgcGFyc2VQZXJjZW50IH0gZnJvbSAnLi9jb250YWluL3RleHQuanMnO1xuaW1wb3J0IHsgZ3VpZCwgaXNPYmplY3QsIGtleXMsIGV4dGVuZCwgaW5kZXhPZiwgbG9nRXJyb3IsIG1peGluLCBpc0FycmF5TGlrZSwgaXNUeXBlZEFycmF5LCBpc0dyYWRpZW50T2JqZWN0LCBmaWx0ZXIsIHJlZHVjZSB9IGZyb20gJy4vY29yZS91dGlsLmpzJztcbmltcG9ydCB7IExJR0hUX0xBQkVMX0NPTE9SLCBEQVJLX0xBQkVMX0NPTE9SIH0gZnJvbSAnLi9jb25maWcuanMnO1xuaW1wb3J0IHsgcGFyc2UsIHN0cmluZ2lmeSB9IGZyb20gJy4vdG9vbC9jb2xvci5qcyc7XG5pbXBvcnQgeyBSRURSQVdfQklUIH0gZnJvbSAnLi9ncmFwaGljL2NvbnN0YW50cy5qcyc7XG5leHBvcnQgdmFyIFBSRVNFUlZFRF9OT1JNQUxfU1RBVEUgPSAnX196cl9ub3JtYWxfXyc7XG52YXIgUFJJTUFSWV9TVEFURVNfS0VZUyA9IFRSQU5TRk9STUFCTEVfUFJPUFMuY29uY2F0KFsnaWdub3JlJ10pO1xudmFyIERFRkFVTFRfQU5JTUFUQUJMRV9NQVAgPSByZWR1Y2UoVFJBTlNGT1JNQUJMRV9QUk9QUywgZnVuY3Rpb24gKG9iaiwga2V5KSB7XG4gICAgb2JqW2tleV0gPSB0cnVlO1xuICAgIHJldHVybiBvYmo7XG59LCB7IGlnbm9yZTogZmFsc2UgfSk7XG52YXIgdG1wVGV4dFBvc0NhbGNSZXMgPSB7fTtcbnZhciB0bXBCb3VuZGluZ1JlY3QgPSBuZXcgQm91bmRpbmdSZWN0KDAsIDAsIDAsIDApO1xudmFyIEVsZW1lbnQgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEVsZW1lbnQocHJvcHMpIHtcbiAgICAgICAgdGhpcy5pZCA9IGd1aWQoKTtcbiAgICAgICAgdGhpcy5hbmltYXRvcnMgPSBbXTtcbiAgICAgICAgdGhpcy5jdXJyZW50U3RhdGVzID0gW107XG4gICAgICAgIHRoaXMuc3RhdGVzID0ge307XG4gICAgICAgIHRoaXMuX2luaXQocHJvcHMpO1xuICAgIH1cbiAgICBFbGVtZW50LnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIChwcm9wcykge1xuICAgICAgICB0aGlzLmF0dHIocHJvcHMpO1xuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUuZHJpZnQgPSBmdW5jdGlvbiAoZHgsIGR5LCBlKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5kcmFnZ2FibGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2hvcml6b250YWwnOlxuICAgICAgICAgICAgICAgIGR5ID0gMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3ZlcnRpY2FsJzpcbiAgICAgICAgICAgICAgICBkeCA9IDA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG0gPSB0aGlzLnRyYW5zZm9ybTtcbiAgICAgICAgaWYgKCFtKSB7XG4gICAgICAgICAgICBtID0gdGhpcy50cmFuc2Zvcm0gPSBbMSwgMCwgMCwgMSwgMCwgMF07XG4gICAgICAgIH1cbiAgICAgICAgbVs0XSArPSBkeDtcbiAgICAgICAgbVs1XSArPSBkeTtcbiAgICAgICAgdGhpcy5kZWNvbXBvc2VUcmFuc2Zvcm0oKTtcbiAgICAgICAgdGhpcy5tYXJrUmVkcmF3KCk7XG4gICAgfTtcbiAgICBFbGVtZW50LnByb3RvdHlwZS5iZWZvcmVVcGRhdGUgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUuYWZ0ZXJVcGRhdGUgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZVRyYW5zZm9ybSgpO1xuICAgICAgICBpZiAodGhpcy5fX2RpcnR5KSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUlubmVyVGV4dCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFbGVtZW50LnByb3RvdHlwZS51cGRhdGVJbm5lclRleHQgPSBmdW5jdGlvbiAoZm9yY2VVcGRhdGUpIHtcbiAgICAgICAgdmFyIHRleHRFbCA9IHRoaXMuX3RleHRDb250ZW50O1xuICAgICAgICBpZiAodGV4dEVsICYmICghdGV4dEVsLmlnbm9yZSB8fCBmb3JjZVVwZGF0ZSkpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy50ZXh0Q29uZmlnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0Q29uZmlnID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGV4dENvbmZpZyA9IHRoaXMudGV4dENvbmZpZztcbiAgICAgICAgICAgIHZhciBpc0xvY2FsID0gdGV4dENvbmZpZy5sb2NhbDtcbiAgICAgICAgICAgIHZhciBpbm5lclRyYW5zZm9ybWFibGUgPSB0ZXh0RWwuaW5uZXJUcmFuc2Zvcm1hYmxlO1xuICAgICAgICAgICAgdmFyIHRleHRBbGlnbiA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZhciB0ZXh0VmVydGljYWxBbGlnbiA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZhciB0ZXh0U3R5bGVDaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICBpbm5lclRyYW5zZm9ybWFibGUucGFyZW50ID0gaXNMb2NhbCA/IHRoaXMgOiBudWxsO1xuICAgICAgICAgICAgdmFyIGlubmVyT3JpZ2luID0gZmFsc2U7XG4gICAgICAgICAgICBpbm5lclRyYW5zZm9ybWFibGUuY29weVRyYW5zZm9ybSh0ZXh0RWwpO1xuICAgICAgICAgICAgaWYgKHRleHRDb25maWcucG9zaXRpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHZhciBsYXlvdXRSZWN0ID0gdG1wQm91bmRpbmdSZWN0O1xuICAgICAgICAgICAgICAgIGlmICh0ZXh0Q29uZmlnLmxheW91dFJlY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0UmVjdC5jb3B5KHRleHRDb25maWcubGF5b3V0UmVjdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsYXlvdXRSZWN0LmNvcHkodGhpcy5nZXRCb3VuZGluZ1JlY3QoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghaXNMb2NhbCkge1xuICAgICAgICAgICAgICAgICAgICBsYXlvdXRSZWN0LmFwcGx5VHJhbnNmb3JtKHRoaXMudHJhbnNmb3JtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FsY3VsYXRlVGV4dFBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlVGV4dFBvc2l0aW9uKHRtcFRleHRQb3NDYWxjUmVzLCB0ZXh0Q29uZmlnLCBsYXlvdXRSZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGN1bGF0ZVRleHRQb3NpdGlvbih0bXBUZXh0UG9zQ2FsY1JlcywgdGV4dENvbmZpZywgbGF5b3V0UmVjdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlubmVyVHJhbnNmb3JtYWJsZS54ID0gdG1wVGV4dFBvc0NhbGNSZXMueDtcbiAgICAgICAgICAgICAgICBpbm5lclRyYW5zZm9ybWFibGUueSA9IHRtcFRleHRQb3NDYWxjUmVzLnk7XG4gICAgICAgICAgICAgICAgdGV4dEFsaWduID0gdG1wVGV4dFBvc0NhbGNSZXMuYWxpZ247XG4gICAgICAgICAgICAgICAgdGV4dFZlcnRpY2FsQWxpZ24gPSB0bXBUZXh0UG9zQ2FsY1Jlcy52ZXJ0aWNhbEFsaWduO1xuICAgICAgICAgICAgICAgIHZhciB0ZXh0T3JpZ2luID0gdGV4dENvbmZpZy5vcmlnaW47XG4gICAgICAgICAgICAgICAgaWYgKHRleHRPcmlnaW4gJiYgdGV4dENvbmZpZy5yb3RhdGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZWxPcmlnaW5YID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVsT3JpZ2luWSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRleHRPcmlnaW4gPT09ICdjZW50ZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWxPcmlnaW5YID0gbGF5b3V0UmVjdC53aWR0aCAqIDAuNTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbE9yaWdpblkgPSBsYXlvdXRSZWN0LmhlaWdodCAqIDAuNTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbE9yaWdpblggPSBwYXJzZVBlcmNlbnQodGV4dE9yaWdpblswXSwgbGF5b3V0UmVjdC53aWR0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWxPcmlnaW5ZID0gcGFyc2VQZXJjZW50KHRleHRPcmlnaW5bMV0sIGxheW91dFJlY3QuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbm5lck9yaWdpbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlubmVyVHJhbnNmb3JtYWJsZS5vcmlnaW5YID0gLWlubmVyVHJhbnNmb3JtYWJsZS54ICsgcmVsT3JpZ2luWCArIChpc0xvY2FsID8gMCA6IGxheW91dFJlY3QueCk7XG4gICAgICAgICAgICAgICAgICAgIGlubmVyVHJhbnNmb3JtYWJsZS5vcmlnaW5ZID0gLWlubmVyVHJhbnNmb3JtYWJsZS55ICsgcmVsT3JpZ2luWSArIChpc0xvY2FsID8gMCA6IGxheW91dFJlY3QueSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRleHRDb25maWcucm90YXRpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlubmVyVHJhbnNmb3JtYWJsZS5yb3RhdGlvbiA9IHRleHRDb25maWcucm90YXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGV4dE9mZnNldCA9IHRleHRDb25maWcub2Zmc2V0O1xuICAgICAgICAgICAgaWYgKHRleHRPZmZzZXQpIHtcbiAgICAgICAgICAgICAgICBpbm5lclRyYW5zZm9ybWFibGUueCArPSB0ZXh0T2Zmc2V0WzBdO1xuICAgICAgICAgICAgICAgIGlubmVyVHJhbnNmb3JtYWJsZS55ICs9IHRleHRPZmZzZXRbMV07XG4gICAgICAgICAgICAgICAgaWYgKCFpbm5lck9yaWdpbikge1xuICAgICAgICAgICAgICAgICAgICBpbm5lclRyYW5zZm9ybWFibGUub3JpZ2luWCA9IC10ZXh0T2Zmc2V0WzBdO1xuICAgICAgICAgICAgICAgICAgICBpbm5lclRyYW5zZm9ybWFibGUub3JpZ2luWSA9IC10ZXh0T2Zmc2V0WzFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpc0luc2lkZSA9IHRleHRDb25maWcuaW5zaWRlID09IG51bGxcbiAgICAgICAgICAgICAgICA/ICh0eXBlb2YgdGV4dENvbmZpZy5wb3NpdGlvbiA9PT0gJ3N0cmluZycgJiYgdGV4dENvbmZpZy5wb3NpdGlvbi5pbmRleE9mKCdpbnNpZGUnKSA+PSAwKVxuICAgICAgICAgICAgICAgIDogdGV4dENvbmZpZy5pbnNpZGU7XG4gICAgICAgICAgICB2YXIgaW5uZXJUZXh0RGVmYXVsdFN0eWxlID0gdGhpcy5faW5uZXJUZXh0RGVmYXVsdFN0eWxlIHx8ICh0aGlzLl9pbm5lclRleHREZWZhdWx0U3R5bGUgPSB7fSk7XG4gICAgICAgICAgICB2YXIgdGV4dEZpbGwgPSB2b2lkIDA7XG4gICAgICAgICAgICB2YXIgdGV4dFN0cm9rZSA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZhciBhdXRvU3Ryb2tlID0gdm9pZCAwO1xuICAgICAgICAgICAgaWYgKGlzSW5zaWRlICYmIHRoaXMuY2FuQmVJbnNpZGVUZXh0KCkpIHtcbiAgICAgICAgICAgICAgICB0ZXh0RmlsbCA9IHRleHRDb25maWcuaW5zaWRlRmlsbDtcbiAgICAgICAgICAgICAgICB0ZXh0U3Ryb2tlID0gdGV4dENvbmZpZy5pbnNpZGVTdHJva2U7XG4gICAgICAgICAgICAgICAgaWYgKHRleHRGaWxsID09IG51bGwgfHwgdGV4dEZpbGwgPT09ICdhdXRvJykge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0RmlsbCA9IHRoaXMuZ2V0SW5zaWRlVGV4dEZpbGwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRleHRTdHJva2UgPT0gbnVsbCB8fCB0ZXh0U3Ryb2tlID09PSAnYXV0bycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dFN0cm9rZSA9IHRoaXMuZ2V0SW5zaWRlVGV4dFN0cm9rZSh0ZXh0RmlsbCk7XG4gICAgICAgICAgICAgICAgICAgIGF1dG9TdHJva2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRleHRGaWxsID0gdGV4dENvbmZpZy5vdXRzaWRlRmlsbDtcbiAgICAgICAgICAgICAgICB0ZXh0U3Ryb2tlID0gdGV4dENvbmZpZy5vdXRzaWRlU3Ryb2tlO1xuICAgICAgICAgICAgICAgIGlmICh0ZXh0RmlsbCA9PSBudWxsIHx8IHRleHRGaWxsID09PSAnYXV0bycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dEZpbGwgPSB0aGlzLmdldE91dHNpZGVGaWxsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0ZXh0U3Ryb2tlID09IG51bGwgfHwgdGV4dFN0cm9rZSA9PT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHRTdHJva2UgPSB0aGlzLmdldE91dHNpZGVTdHJva2UodGV4dEZpbGwpO1xuICAgICAgICAgICAgICAgICAgICBhdXRvU3Ryb2tlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZXh0RmlsbCA9IHRleHRGaWxsIHx8ICcjMDAwJztcbiAgICAgICAgICAgIGlmICh0ZXh0RmlsbCAhPT0gaW5uZXJUZXh0RGVmYXVsdFN0eWxlLmZpbGxcbiAgICAgICAgICAgICAgICB8fCB0ZXh0U3Ryb2tlICE9PSBpbm5lclRleHREZWZhdWx0U3R5bGUuc3Ryb2tlXG4gICAgICAgICAgICAgICAgfHwgYXV0b1N0cm9rZSAhPT0gaW5uZXJUZXh0RGVmYXVsdFN0eWxlLmF1dG9TdHJva2VcbiAgICAgICAgICAgICAgICB8fCB0ZXh0QWxpZ24gIT09IGlubmVyVGV4dERlZmF1bHRTdHlsZS5hbGlnblxuICAgICAgICAgICAgICAgIHx8IHRleHRWZXJ0aWNhbEFsaWduICE9PSBpbm5lclRleHREZWZhdWx0U3R5bGUudmVydGljYWxBbGlnbikge1xuICAgICAgICAgICAgICAgIHRleHRTdHlsZUNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlubmVyVGV4dERlZmF1bHRTdHlsZS5maWxsID0gdGV4dEZpbGw7XG4gICAgICAgICAgICAgICAgaW5uZXJUZXh0RGVmYXVsdFN0eWxlLnN0cm9rZSA9IHRleHRTdHJva2U7XG4gICAgICAgICAgICAgICAgaW5uZXJUZXh0RGVmYXVsdFN0eWxlLmF1dG9TdHJva2UgPSBhdXRvU3Ryb2tlO1xuICAgICAgICAgICAgICAgIGlubmVyVGV4dERlZmF1bHRTdHlsZS5hbGlnbiA9IHRleHRBbGlnbjtcbiAgICAgICAgICAgICAgICBpbm5lclRleHREZWZhdWx0U3R5bGUudmVydGljYWxBbGlnbiA9IHRleHRWZXJ0aWNhbEFsaWduO1xuICAgICAgICAgICAgICAgIHRleHRFbC5zZXREZWZhdWx0VGV4dFN0eWxlKGlubmVyVGV4dERlZmF1bHRTdHlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZXh0RWwuX19kaXJ0eSB8PSBSRURSQVdfQklUO1xuICAgICAgICAgICAgaWYgKHRleHRTdHlsZUNoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICB0ZXh0RWwuZGlydHlTdHlsZSh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUuY2FuQmVJbnNpZGVUZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIEVsZW1lbnQucHJvdG90eXBlLmdldEluc2lkZVRleHRGaWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJyNmZmYnO1xuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUuZ2V0SW5zaWRlVGV4dFN0cm9rZSA9IGZ1bmN0aW9uICh0ZXh0RmlsbCkge1xuICAgICAgICByZXR1cm4gJyMwMDAnO1xuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUuZ2V0T3V0c2lkZUZpbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9fenIgJiYgdGhpcy5fX3pyLmlzRGFya01vZGUoKSA/IExJR0hUX0xBQkVMX0NPTE9SIDogREFSS19MQUJFTF9DT0xPUjtcbiAgICB9O1xuICAgIEVsZW1lbnQucHJvdG90eXBlLmdldE91dHNpZGVTdHJva2UgPSBmdW5jdGlvbiAodGV4dEZpbGwpIHtcbiAgICAgICAgdmFyIGJhY2tncm91bmRDb2xvciA9IHRoaXMuX196ciAmJiB0aGlzLl9fenIuZ2V0QmFja2dyb3VuZENvbG9yKCk7XG4gICAgICAgIHZhciBjb2xvckFyciA9IHR5cGVvZiBiYWNrZ3JvdW5kQ29sb3IgPT09ICdzdHJpbmcnICYmIHBhcnNlKGJhY2tncm91bmRDb2xvcik7XG4gICAgICAgIGlmICghY29sb3JBcnIpIHtcbiAgICAgICAgICAgIGNvbG9yQXJyID0gWzI1NSwgMjU1LCAyNTUsIDFdO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhbHBoYSA9IGNvbG9yQXJyWzNdO1xuICAgICAgICB2YXIgaXNEYXJrID0gdGhpcy5fX3pyLmlzRGFya01vZGUoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICAgIGNvbG9yQXJyW2ldID0gY29sb3JBcnJbaV0gKiBhbHBoYSArIChpc0RhcmsgPyAwIDogMjU1KSAqICgxIC0gYWxwaGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbG9yQXJyWzNdID0gMTtcbiAgICAgICAgcmV0dXJuIHN0cmluZ2lmeShjb2xvckFyciwgJ3JnYmEnKTtcbiAgICB9O1xuICAgIEVsZW1lbnQucHJvdG90eXBlLnRyYXZlcnNlID0gZnVuY3Rpb24gKGNiLCBjb250ZXh0KSB7IH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUuYXR0cktWID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gJ3RleHRDb25maWcnKSB7XG4gICAgICAgICAgICB0aGlzLnNldFRleHRDb25maWcodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gJ3RleHRDb250ZW50Jykge1xuICAgICAgICAgICAgdGhpcy5zZXRUZXh0Q29udGVudCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSAnY2xpcFBhdGgnKSB7XG4gICAgICAgICAgICB0aGlzLnNldENsaXBQYXRoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXkgPT09ICdleHRyYScpIHtcbiAgICAgICAgICAgIHRoaXMuZXh0cmEgPSB0aGlzLmV4dHJhIHx8IHt9O1xuICAgICAgICAgICAgZXh0ZW5kKHRoaXMuZXh0cmEsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXNba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFbGVtZW50LnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmlnbm9yZSA9IHRydWU7XG4gICAgICAgIHRoaXMubWFya1JlZHJhdygpO1xuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5pZ25vcmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tYXJrUmVkcmF3KCk7XG4gICAgfTtcbiAgICBFbGVtZW50LnByb3RvdHlwZS5hdHRyID0gZnVuY3Rpb24gKGtleU9yT2JqLCB2YWx1ZSkge1xuICAgICAgICBpZiAodHlwZW9mIGtleU9yT2JqID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhpcy5hdHRyS1Yoa2V5T3JPYmosIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc09iamVjdChrZXlPck9iaikpIHtcbiAgICAgICAgICAgIHZhciBvYmogPSBrZXlPck9iajtcbiAgICAgICAgICAgIHZhciBrZXlzQXJyID0ga2V5cyhvYmopO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzQXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXNBcnJbaV07XG4gICAgICAgICAgICAgICAgdGhpcy5hdHRyS1Yoa2V5LCBrZXlPck9ialtrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1hcmtSZWRyYXcoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBFbGVtZW50LnByb3RvdHlwZS5zYXZlQ3VycmVudFRvTm9ybWFsU3RhdGUgPSBmdW5jdGlvbiAodG9TdGF0ZSkge1xuICAgICAgICB0aGlzLl9pbm5lclNhdmVUb05vcm1hbCh0b1N0YXRlKTtcbiAgICAgICAgdmFyIG5vcm1hbFN0YXRlID0gdGhpcy5fbm9ybWFsU3RhdGU7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5hbmltYXRvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBhbmltYXRvciA9IHRoaXMuYW5pbWF0b3JzW2ldO1xuICAgICAgICAgICAgdmFyIGZyb21TdGF0ZVRyYW5zaXRpb24gPSBhbmltYXRvci5fX2Zyb21TdGF0ZVRyYW5zaXRpb247XG4gICAgICAgICAgICBpZiAoYW5pbWF0b3IuZ2V0TG9vcCgpIHx8IGZyb21TdGF0ZVRyYW5zaXRpb24gJiYgZnJvbVN0YXRlVHJhbnNpdGlvbiAhPT0gUFJFU0VSVkVEX05PUk1BTF9TVEFURSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRhcmdldE5hbWUgPSBhbmltYXRvci50YXJnZXROYW1lO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRhcmdldE5hbWVcbiAgICAgICAgICAgICAgICA/IG5vcm1hbFN0YXRlW3RhcmdldE5hbWVdIDogbm9ybWFsU3RhdGU7XG4gICAgICAgICAgICBhbmltYXRvci5zYXZlVG8odGFyZ2V0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUuX2lubmVyU2F2ZVRvTm9ybWFsID0gZnVuY3Rpb24gKHRvU3RhdGUpIHtcbiAgICAgICAgdmFyIG5vcm1hbFN0YXRlID0gdGhpcy5fbm9ybWFsU3RhdGU7XG4gICAgICAgIGlmICghbm9ybWFsU3RhdGUpIHtcbiAgICAgICAgICAgIG5vcm1hbFN0YXRlID0gdGhpcy5fbm9ybWFsU3RhdGUgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9TdGF0ZS50ZXh0Q29uZmlnICYmICFub3JtYWxTdGF0ZS50ZXh0Q29uZmlnKSB7XG4gICAgICAgICAgICBub3JtYWxTdGF0ZS50ZXh0Q29uZmlnID0gdGhpcy50ZXh0Q29uZmlnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3NhdmVQcmltYXJ5VG9Ob3JtYWwodG9TdGF0ZSwgbm9ybWFsU3RhdGUsIFBSSU1BUllfU1RBVEVTX0tFWVMpO1xuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUuX3NhdmVQcmltYXJ5VG9Ob3JtYWwgPSBmdW5jdGlvbiAodG9TdGF0ZSwgbm9ybWFsU3RhdGUsIHByaW1hcnlLZXlzKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJpbWFyeUtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBwcmltYXJ5S2V5c1tpXTtcbiAgICAgICAgICAgIGlmICh0b1N0YXRlW2tleV0gIT0gbnVsbCAmJiAhKGtleSBpbiBub3JtYWxTdGF0ZSkpIHtcbiAgICAgICAgICAgICAgICBub3JtYWxTdGF0ZVtrZXldID0gdGhpc1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBFbGVtZW50LnByb3RvdHlwZS5oYXNTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFN0YXRlcy5sZW5ndGggPiAwO1xuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZXNbbmFtZV07XG4gICAgfTtcbiAgICBFbGVtZW50LnByb3RvdHlwZS5lbnN1cmVTdGF0ZSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHZhciBzdGF0ZXMgPSB0aGlzLnN0YXRlcztcbiAgICAgICAgaWYgKCFzdGF0ZXNbbmFtZV0pIHtcbiAgICAgICAgICAgIHN0YXRlc1tuYW1lXSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGF0ZXNbbmFtZV07XG4gICAgfTtcbiAgICBFbGVtZW50LnByb3RvdHlwZS5jbGVhclN0YXRlcyA9IGZ1bmN0aW9uIChub0FuaW1hdGlvbikge1xuICAgICAgICB0aGlzLnVzZVN0YXRlKFBSRVNFUlZFRF9OT1JNQUxfU1RBVEUsIGZhbHNlLCBub0FuaW1hdGlvbik7XG4gICAgfTtcbiAgICBFbGVtZW50LnByb3RvdHlwZS51c2VTdGF0ZSA9IGZ1bmN0aW9uIChzdGF0ZU5hbWUsIGtlZXBDdXJyZW50U3RhdGVzLCBub0FuaW1hdGlvbiwgZm9yY2VVc2VIb3ZlckxheWVyKSB7XG4gICAgICAgIHZhciB0b05vcm1hbFN0YXRlID0gc3RhdGVOYW1lID09PSBQUkVTRVJWRURfTk9STUFMX1NUQVRFO1xuICAgICAgICB2YXIgaGFzU3RhdGVzID0gdGhpcy5oYXNTdGF0ZSgpO1xuICAgICAgICBpZiAoIWhhc1N0YXRlcyAmJiB0b05vcm1hbFN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZXMgPSB0aGlzLmN1cnJlbnRTdGF0ZXM7XG4gICAgICAgIHZhciBhbmltYXRpb25DZmcgPSB0aGlzLnN0YXRlVHJhbnNpdGlvbjtcbiAgICAgICAgaWYgKGluZGV4T2YoY3VycmVudFN0YXRlcywgc3RhdGVOYW1lKSA+PSAwICYmIChrZWVwQ3VycmVudFN0YXRlcyB8fCBjdXJyZW50U3RhdGVzLmxlbmd0aCA9PT0gMSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RhdGU7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlUHJveHkgJiYgIXRvTm9ybWFsU3RhdGUpIHtcbiAgICAgICAgICAgIHN0YXRlID0gdGhpcy5zdGF0ZVByb3h5KHN0YXRlTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzdGF0ZSkge1xuICAgICAgICAgICAgc3RhdGUgPSAodGhpcy5zdGF0ZXMgJiYgdGhpcy5zdGF0ZXNbc3RhdGVOYW1lXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzdGF0ZSAmJiAhdG9Ob3JtYWxTdGF0ZSkge1xuICAgICAgICAgICAgbG9nRXJyb3IoXCJTdGF0ZSBcIiArIHN0YXRlTmFtZSArIFwiIG5vdCBleGlzdHMuXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdG9Ob3JtYWxTdGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5zYXZlQ3VycmVudFRvTm9ybWFsU3RhdGUoc3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB1c2VIb3ZlckxheWVyID0gISEoKHN0YXRlICYmIHN0YXRlLmhvdmVyTGF5ZXIpIHx8IGZvcmNlVXNlSG92ZXJMYXllcik7XG4gICAgICAgIGlmICh1c2VIb3ZlckxheWVyKSB7XG4gICAgICAgICAgICB0aGlzLl90b2dnbGVIb3ZlckxheWVyRmxhZyh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9hcHBseVN0YXRlT2JqKHN0YXRlTmFtZSwgc3RhdGUsIHRoaXMuX25vcm1hbFN0YXRlLCBrZWVwQ3VycmVudFN0YXRlcywgIW5vQW5pbWF0aW9uICYmICF0aGlzLl9faW5Ib3ZlciAmJiBhbmltYXRpb25DZmcgJiYgYW5pbWF0aW9uQ2ZnLmR1cmF0aW9uID4gMCwgYW5pbWF0aW9uQ2ZnKTtcbiAgICAgICAgdmFyIHRleHRDb250ZW50ID0gdGhpcy5fdGV4dENvbnRlbnQ7XG4gICAgICAgIHZhciB0ZXh0R3VpZGUgPSB0aGlzLl90ZXh0R3VpZGU7XG4gICAgICAgIGlmICh0ZXh0Q29udGVudCkge1xuICAgICAgICAgICAgdGV4dENvbnRlbnQudXNlU3RhdGUoc3RhdGVOYW1lLCBrZWVwQ3VycmVudFN0YXRlcywgbm9BbmltYXRpb24sIHVzZUhvdmVyTGF5ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0ZXh0R3VpZGUpIHtcbiAgICAgICAgICAgIHRleHRHdWlkZS51c2VTdGF0ZShzdGF0ZU5hbWUsIGtlZXBDdXJyZW50U3RhdGVzLCBub0FuaW1hdGlvbiwgdXNlSG92ZXJMYXllcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvTm9ybWFsU3RhdGUpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFN0YXRlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fbm9ybWFsU3RhdGUgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICgha2VlcEN1cnJlbnRTdGF0ZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTdGF0ZXMgPSBbc3RhdGVOYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFN0YXRlcy5wdXNoKHN0YXRlTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdXBkYXRlQW5pbWF0aW9uVGFyZ2V0cygpO1xuICAgICAgICB0aGlzLm1hcmtSZWRyYXcoKTtcbiAgICAgICAgaWYgKCF1c2VIb3ZlckxheWVyICYmIHRoaXMuX19pbkhvdmVyKSB7XG4gICAgICAgICAgICB0aGlzLl90b2dnbGVIb3ZlckxheWVyRmxhZyhmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLl9fZGlydHkgJj0gflJFRFJBV19CSVQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUudXNlU3RhdGVzID0gZnVuY3Rpb24gKHN0YXRlcywgbm9BbmltYXRpb24sIGZvcmNlVXNlSG92ZXJMYXllcikge1xuICAgICAgICBpZiAoIXN0YXRlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJTdGF0ZXMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBzdGF0ZU9iamVjdHMgPSBbXTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50U3RhdGVzID0gdGhpcy5jdXJyZW50U3RhdGVzO1xuICAgICAgICAgICAgdmFyIGxlbiA9IHN0YXRlcy5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgbm90Q2hhbmdlID0gbGVuID09PSBjdXJyZW50U3RhdGVzLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChub3RDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZXNbaV0gIT09IGN1cnJlbnRTdGF0ZXNbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdENoYW5nZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobm90Q2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBzdGF0ZU5hbWUgPSBzdGF0ZXNbaV07XG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlT2JqID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlUHJveHkpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVPYmogPSB0aGlzLnN0YXRlUHJveHkoc3RhdGVOYW1lLCBzdGF0ZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXN0YXRlT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlT2JqID0gdGhpcy5zdGF0ZXNbc3RhdGVOYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlT2JqZWN0cy5wdXNoKHN0YXRlT2JqKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbGFzdFN0YXRlT2JqID0gc3RhdGVPYmplY3RzW2xlbiAtIDFdO1xuICAgICAgICAgICAgdmFyIHVzZUhvdmVyTGF5ZXIgPSAhISgobGFzdFN0YXRlT2JqICYmIGxhc3RTdGF0ZU9iai5ob3ZlckxheWVyKSB8fCBmb3JjZVVzZUhvdmVyTGF5ZXIpO1xuICAgICAgICAgICAgaWYgKHVzZUhvdmVyTGF5ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVIb3ZlckxheWVyRmxhZyh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBtZXJnZWRTdGF0ZSA9IHRoaXMuX21lcmdlU3RhdGVzKHN0YXRlT2JqZWN0cyk7XG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uQ2ZnID0gdGhpcy5zdGF0ZVRyYW5zaXRpb247XG4gICAgICAgICAgICB0aGlzLnNhdmVDdXJyZW50VG9Ob3JtYWxTdGF0ZShtZXJnZWRTdGF0ZSk7XG4gICAgICAgICAgICB0aGlzLl9hcHBseVN0YXRlT2JqKHN0YXRlcy5qb2luKCcsJyksIG1lcmdlZFN0YXRlLCB0aGlzLl9ub3JtYWxTdGF0ZSwgZmFsc2UsICFub0FuaW1hdGlvbiAmJiAhdGhpcy5fX2luSG92ZXIgJiYgYW5pbWF0aW9uQ2ZnICYmIGFuaW1hdGlvbkNmZy5kdXJhdGlvbiA+IDAsIGFuaW1hdGlvbkNmZyk7XG4gICAgICAgICAgICB2YXIgdGV4dENvbnRlbnQgPSB0aGlzLl90ZXh0Q29udGVudDtcbiAgICAgICAgICAgIHZhciB0ZXh0R3VpZGUgPSB0aGlzLl90ZXh0R3VpZGU7XG4gICAgICAgICAgICBpZiAodGV4dENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICB0ZXh0Q29udGVudC51c2VTdGF0ZXMoc3RhdGVzLCBub0FuaW1hdGlvbiwgdXNlSG92ZXJMYXllcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGV4dEd1aWRlKSB7XG4gICAgICAgICAgICAgICAgdGV4dEd1aWRlLnVzZVN0YXRlcyhzdGF0ZXMsIG5vQW5pbWF0aW9uLCB1c2VIb3ZlckxheWVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUFuaW1hdGlvblRhcmdldHMoKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFN0YXRlcyA9IHN0YXRlcy5zbGljZSgpO1xuICAgICAgICAgICAgdGhpcy5tYXJrUmVkcmF3KCk7XG4gICAgICAgICAgICBpZiAoIXVzZUhvdmVyTGF5ZXIgJiYgdGhpcy5fX2luSG92ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVIb3ZlckxheWVyRmxhZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fX2RpcnR5ICY9IH5SRURSQVdfQklUO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBFbGVtZW50LnByb3RvdHlwZS5fdXBkYXRlQW5pbWF0aW9uVGFyZ2V0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmFuaW1hdG9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGFuaW1hdG9yID0gdGhpcy5hbmltYXRvcnNbaV07XG4gICAgICAgICAgICBpZiAoYW5pbWF0b3IudGFyZ2V0TmFtZSkge1xuICAgICAgICAgICAgICAgIGFuaW1hdG9yLmNoYW5nZVRhcmdldCh0aGlzW2FuaW1hdG9yLnRhcmdldE5hbWVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUucmVtb3ZlU3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIGlkeCA9IGluZGV4T2YodGhpcy5jdXJyZW50U3RhdGVzLCBzdGF0ZSk7XG4gICAgICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZXMgPSB0aGlzLmN1cnJlbnRTdGF0ZXMuc2xpY2UoKTtcbiAgICAgICAgICAgIGN1cnJlbnRTdGF0ZXMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICB0aGlzLnVzZVN0YXRlcyhjdXJyZW50U3RhdGVzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUucmVwbGFjZVN0YXRlID0gZnVuY3Rpb24gKG9sZFN0YXRlLCBuZXdTdGF0ZSwgZm9yY2VBZGQpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZXMgPSB0aGlzLmN1cnJlbnRTdGF0ZXMuc2xpY2UoKTtcbiAgICAgICAgdmFyIGlkeCA9IGluZGV4T2YoY3VycmVudFN0YXRlcywgb2xkU3RhdGUpO1xuICAgICAgICB2YXIgbmV3U3RhdGVFeGlzdHMgPSBpbmRleE9mKGN1cnJlbnRTdGF0ZXMsIG5ld1N0YXRlKSA+PSAwO1xuICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICAgIGlmICghbmV3U3RhdGVFeGlzdHMpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGVzW2lkeF0gPSBuZXdTdGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZXMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZm9yY2VBZGQgJiYgIW5ld1N0YXRlRXhpc3RzKSB7XG4gICAgICAgICAgICBjdXJyZW50U3RhdGVzLnB1c2gobmV3U3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXNlU3RhdGVzKGN1cnJlbnRTdGF0ZXMpO1xuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUudG9nZ2xlU3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUsIGVuYWJsZSkge1xuICAgICAgICBpZiAoZW5hYmxlKSB7XG4gICAgICAgICAgICB0aGlzLnVzZVN0YXRlKHN0YXRlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU3RhdGUoc3RhdGUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFbGVtZW50LnByb3RvdHlwZS5fbWVyZ2VTdGF0ZXMgPSBmdW5jdGlvbiAoc3RhdGVzKSB7XG4gICAgICAgIHZhciBtZXJnZWRTdGF0ZSA9IHt9O1xuICAgICAgICB2YXIgbWVyZ2VkVGV4dENvbmZpZztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IHN0YXRlc1tpXTtcbiAgICAgICAgICAgIGV4dGVuZChtZXJnZWRTdGF0ZSwgc3RhdGUpO1xuICAgICAgICAgICAgaWYgKHN0YXRlLnRleHRDb25maWcpIHtcbiAgICAgICAgICAgICAgICBtZXJnZWRUZXh0Q29uZmlnID0gbWVyZ2VkVGV4dENvbmZpZyB8fCB7fTtcbiAgICAgICAgICAgICAgICBleHRlbmQobWVyZ2VkVGV4dENvbmZpZywgc3RhdGUudGV4dENvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lcmdlZFRleHRDb25maWcpIHtcbiAgICAgICAgICAgIG1lcmdlZFN0YXRlLnRleHRDb25maWcgPSBtZXJnZWRUZXh0Q29uZmlnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXJnZWRTdGF0ZTtcbiAgICB9O1xuICAgIEVsZW1lbnQucHJvdG90eXBlLl9hcHBseVN0YXRlT2JqID0gZnVuY3Rpb24gKHN0YXRlTmFtZSwgc3RhdGUsIG5vcm1hbFN0YXRlLCBrZWVwQ3VycmVudFN0YXRlcywgdHJhbnNpdGlvbiwgYW5pbWF0aW9uQ2ZnKSB7XG4gICAgICAgIHZhciBuZWVkc1Jlc3RvcmVUb05vcm1hbCA9ICEoc3RhdGUgJiYga2VlcEN1cnJlbnRTdGF0ZXMpO1xuICAgICAgICBpZiAoc3RhdGUgJiYgc3RhdGUudGV4dENvbmZpZykge1xuICAgICAgICAgICAgdGhpcy50ZXh0Q29uZmlnID0gZXh0ZW5kKHt9LCBrZWVwQ3VycmVudFN0YXRlcyA/IHRoaXMudGV4dENvbmZpZyA6IG5vcm1hbFN0YXRlLnRleHRDb25maWcpO1xuICAgICAgICAgICAgZXh0ZW5kKHRoaXMudGV4dENvbmZpZywgc3RhdGUudGV4dENvbmZpZyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobmVlZHNSZXN0b3JlVG9Ob3JtYWwpIHtcbiAgICAgICAgICAgIGlmIChub3JtYWxTdGF0ZS50ZXh0Q29uZmlnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0Q29uZmlnID0gbm9ybWFsU3RhdGUudGV4dENvbmZpZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgdHJhbnNpdGlvblRhcmdldCA9IHt9O1xuICAgICAgICB2YXIgaGFzVHJhbnNpdGlvbiA9IGZhbHNlO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IFBSSU1BUllfU1RBVEVTX0tFWVMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBQUklNQVJZX1NUQVRFU19LRVlTW2ldO1xuICAgICAgICAgICAgdmFyIHByb3BOZWVkc1RyYW5zaXRpb24gPSB0cmFuc2l0aW9uICYmIERFRkFVTFRfQU5JTUFUQUJMRV9NQVBba2V5XTtcbiAgICAgICAgICAgIGlmIChzdGF0ZSAmJiBzdGF0ZVtrZXldICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcE5lZWRzVHJhbnNpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBoYXNUcmFuc2l0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvblRhcmdldFtrZXldID0gc3RhdGVba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNba2V5XSA9IHN0YXRlW2tleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobmVlZHNSZXN0b3JlVG9Ob3JtYWwpIHtcbiAgICAgICAgICAgICAgICBpZiAobm9ybWFsU3RhdGVba2V5XSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wTmVlZHNUcmFuc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNUcmFuc2l0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25UYXJnZXRba2V5XSA9IG5vcm1hbFN0YXRlW2tleV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleV0gPSBub3JtYWxTdGF0ZVtrZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdHJhbnNpdGlvbikge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmFuaW1hdG9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBhbmltYXRvciA9IHRoaXMuYW5pbWF0b3JzW2ldO1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXROYW1lID0gYW5pbWF0b3IudGFyZ2V0TmFtZTtcbiAgICAgICAgICAgICAgICBpZiAoIWFuaW1hdG9yLmdldExvb3AoKSkge1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRvci5fX2NoYW5nZUZpbmFsVmFsdWUodGFyZ2V0TmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgPyAoc3RhdGUgfHwgbm9ybWFsU3RhdGUpW3RhcmdldE5hbWVdXG4gICAgICAgICAgICAgICAgICAgICAgICA6IChzdGF0ZSB8fCBub3JtYWxTdGF0ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzVHJhbnNpdGlvbikge1xuICAgICAgICAgICAgdGhpcy5fdHJhbnNpdGlvblN0YXRlKHN0YXRlTmFtZSwgdHJhbnNpdGlvblRhcmdldCwgYW5pbWF0aW9uQ2ZnKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUuX2F0dGFjaENvbXBvbmVudCA9IGZ1bmN0aW9uIChjb21wb25lbnRFbCkge1xuICAgICAgICBpZiAoY29tcG9uZW50RWwuX196ciAmJiAhY29tcG9uZW50RWwuX19ob3N0VGFyZ2V0KSB7XG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGV4dCBlbGVtZW50IGhhcyBiZWVuIGFkZGVkIHRvIHpyZW5kZXIuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbXBvbmVudEVsID09PSB0aGlzKSB7XG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVjdXJzaXZlIGNvbXBvbmVudCBhdHRhY2htZW50LicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB6ciA9IHRoaXMuX196cjtcbiAgICAgICAgaWYgKHpyKSB7XG4gICAgICAgICAgICBjb21wb25lbnRFbC5hZGRTZWxmVG9acih6cik7XG4gICAgICAgIH1cbiAgICAgICAgY29tcG9uZW50RWwuX196ciA9IHpyO1xuICAgICAgICBjb21wb25lbnRFbC5fX2hvc3RUYXJnZXQgPSB0aGlzO1xuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUuX2RldGFjaENvbXBvbmVudCA9IGZ1bmN0aW9uIChjb21wb25lbnRFbCkge1xuICAgICAgICBpZiAoY29tcG9uZW50RWwuX196cikge1xuICAgICAgICAgICAgY29tcG9uZW50RWwucmVtb3ZlU2VsZkZyb21acihjb21wb25lbnRFbC5fX3pyKTtcbiAgICAgICAgfVxuICAgICAgICBjb21wb25lbnRFbC5fX3pyID0gbnVsbDtcbiAgICAgICAgY29tcG9uZW50RWwuX19ob3N0VGFyZ2V0ID0gbnVsbDtcbiAgICB9O1xuICAgIEVsZW1lbnQucHJvdG90eXBlLmdldENsaXBQYXRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2xpcFBhdGg7XG4gICAgfTtcbiAgICBFbGVtZW50LnByb3RvdHlwZS5zZXRDbGlwUGF0aCA9IGZ1bmN0aW9uIChjbGlwUGF0aCkge1xuICAgICAgICBpZiAodGhpcy5fY2xpcFBhdGggJiYgdGhpcy5fY2xpcFBhdGggIT09IGNsaXBQYXRoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUNsaXBQYXRoKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fYXR0YWNoQ29tcG9uZW50KGNsaXBQYXRoKTtcbiAgICAgICAgdGhpcy5fY2xpcFBhdGggPSBjbGlwUGF0aDtcbiAgICAgICAgdGhpcy5tYXJrUmVkcmF3KCk7XG4gICAgfTtcbiAgICBFbGVtZW50LnByb3RvdHlwZS5yZW1vdmVDbGlwUGF0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNsaXBQYXRoID0gdGhpcy5fY2xpcFBhdGg7XG4gICAgICAgIGlmIChjbGlwUGF0aCkge1xuICAgICAgICAgICAgdGhpcy5fZGV0YWNoQ29tcG9uZW50KGNsaXBQYXRoKTtcbiAgICAgICAgICAgIHRoaXMuX2NsaXBQYXRoID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMubWFya1JlZHJhdygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFbGVtZW50LnByb3RvdHlwZS5nZXRUZXh0Q29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RleHRDb250ZW50O1xuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUuc2V0VGV4dENvbnRlbnQgPSBmdW5jdGlvbiAodGV4dEVsKSB7XG4gICAgICAgIHZhciBwcmV2aW91c1RleHRDb250ZW50ID0gdGhpcy5fdGV4dENvbnRlbnQ7XG4gICAgICAgIGlmIChwcmV2aW91c1RleHRDb250ZW50ID09PSB0ZXh0RWwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJldmlvdXNUZXh0Q29udGVudCAmJiBwcmV2aW91c1RleHRDb250ZW50ICE9PSB0ZXh0RWwpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlVGV4dENvbnRlbnQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgaWYgKHRleHRFbC5fX3pyICYmICF0ZXh0RWwuX19ob3N0VGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUZXh0IGVsZW1lbnQgaGFzIGJlZW4gYWRkZWQgdG8genJlbmRlci4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0ZXh0RWwuaW5uZXJUcmFuc2Zvcm1hYmxlID0gbmV3IFRyYW5zZm9ybWFibGUoKTtcbiAgICAgICAgdGhpcy5fYXR0YWNoQ29tcG9uZW50KHRleHRFbCk7XG4gICAgICAgIHRoaXMuX3RleHRDb250ZW50ID0gdGV4dEVsO1xuICAgICAgICB0aGlzLm1hcmtSZWRyYXcoKTtcbiAgICB9O1xuICAgIEVsZW1lbnQucHJvdG90eXBlLnNldFRleHRDb25maWcgPSBmdW5jdGlvbiAoY2ZnKSB7XG4gICAgICAgIGlmICghdGhpcy50ZXh0Q29uZmlnKSB7XG4gICAgICAgICAgICB0aGlzLnRleHRDb25maWcgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBleHRlbmQodGhpcy50ZXh0Q29uZmlnLCBjZmcpO1xuICAgICAgICB0aGlzLm1hcmtSZWRyYXcoKTtcbiAgICB9O1xuICAgIEVsZW1lbnQucHJvdG90eXBlLnJlbW92ZVRleHRDb25maWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudGV4dENvbmZpZyA9IG51bGw7XG4gICAgICAgIHRoaXMubWFya1JlZHJhdygpO1xuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUucmVtb3ZlVGV4dENvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0ZXh0RWwgPSB0aGlzLl90ZXh0Q29udGVudDtcbiAgICAgICAgaWYgKHRleHRFbCkge1xuICAgICAgICAgICAgdGV4dEVsLmlubmVyVHJhbnNmb3JtYWJsZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl9kZXRhY2hDb21wb25lbnQodGV4dEVsKTtcbiAgICAgICAgICAgIHRoaXMuX3RleHRDb250ZW50ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX2lubmVyVGV4dERlZmF1bHRTdHlsZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLm1hcmtSZWRyYXcoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUuZ2V0VGV4dEd1aWRlTGluZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RleHRHdWlkZTtcbiAgICB9O1xuICAgIEVsZW1lbnQucHJvdG90eXBlLnNldFRleHRHdWlkZUxpbmUgPSBmdW5jdGlvbiAoZ3VpZGVMaW5lKSB7XG4gICAgICAgIGlmICh0aGlzLl90ZXh0R3VpZGUgJiYgdGhpcy5fdGV4dEd1aWRlICE9PSBndWlkZUxpbmUpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlVGV4dEd1aWRlTGluZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2F0dGFjaENvbXBvbmVudChndWlkZUxpbmUpO1xuICAgICAgICB0aGlzLl90ZXh0R3VpZGUgPSBndWlkZUxpbmU7XG4gICAgICAgIHRoaXMubWFya1JlZHJhdygpO1xuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUucmVtb3ZlVGV4dEd1aWRlTGluZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRleHRHdWlkZSA9IHRoaXMuX3RleHRHdWlkZTtcbiAgICAgICAgaWYgKHRleHRHdWlkZSkge1xuICAgICAgICAgICAgdGhpcy5fZGV0YWNoQ29tcG9uZW50KHRleHRHdWlkZSk7XG4gICAgICAgICAgICB0aGlzLl90ZXh0R3VpZGUgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5tYXJrUmVkcmF3KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEVsZW1lbnQucHJvdG90eXBlLm1hcmtSZWRyYXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX19kaXJ0eSB8PSBSRURSQVdfQklUO1xuICAgICAgICB2YXIgenIgPSB0aGlzLl9fenI7XG4gICAgICAgIGlmICh6cikge1xuICAgICAgICAgICAgaWYgKHRoaXMuX19pbkhvdmVyKSB7XG4gICAgICAgICAgICAgICAgenIucmVmcmVzaEhvdmVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB6ci5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX19ob3N0VGFyZ2V0KSB7XG4gICAgICAgICAgICB0aGlzLl9faG9zdFRhcmdldC5tYXJrUmVkcmF3KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEVsZW1lbnQucHJvdG90eXBlLmRpcnR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm1hcmtSZWRyYXcoKTtcbiAgICB9O1xuICAgIEVsZW1lbnQucHJvdG90eXBlLl90b2dnbGVIb3ZlckxheWVyRmxhZyA9IGZ1bmN0aW9uIChpbkhvdmVyKSB7XG4gICAgICAgIHRoaXMuX19pbkhvdmVyID0gaW5Ib3ZlcjtcbiAgICAgICAgdmFyIHRleHRDb250ZW50ID0gdGhpcy5fdGV4dENvbnRlbnQ7XG4gICAgICAgIHZhciB0ZXh0R3VpZGUgPSB0aGlzLl90ZXh0R3VpZGU7XG4gICAgICAgIGlmICh0ZXh0Q29udGVudCkge1xuICAgICAgICAgICAgdGV4dENvbnRlbnQuX19pbkhvdmVyID0gaW5Ib3ZlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGV4dEd1aWRlKSB7XG4gICAgICAgICAgICB0ZXh0R3VpZGUuX19pbkhvdmVyID0gaW5Ib3ZlcjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUuYWRkU2VsZlRvWnIgPSBmdW5jdGlvbiAoenIpIHtcbiAgICAgICAgaWYgKHRoaXMuX196ciA9PT0genIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9fenIgPSB6cjtcbiAgICAgICAgdmFyIGFuaW1hdG9ycyA9IHRoaXMuYW5pbWF0b3JzO1xuICAgICAgICBpZiAoYW5pbWF0b3JzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFuaW1hdG9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHpyLmFuaW1hdGlvbi5hZGRBbmltYXRvcihhbmltYXRvcnNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9jbGlwUGF0aCkge1xuICAgICAgICAgICAgdGhpcy5fY2xpcFBhdGguYWRkU2VsZlRvWnIoenIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl90ZXh0Q29udGVudCkge1xuICAgICAgICAgICAgdGhpcy5fdGV4dENvbnRlbnQuYWRkU2VsZlRvWnIoenIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl90ZXh0R3VpZGUpIHtcbiAgICAgICAgICAgIHRoaXMuX3RleHRHdWlkZS5hZGRTZWxmVG9acih6cik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEVsZW1lbnQucHJvdG90eXBlLnJlbW92ZVNlbGZGcm9tWnIgPSBmdW5jdGlvbiAoenIpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9fenIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9fenIgPSBudWxsO1xuICAgICAgICB2YXIgYW5pbWF0b3JzID0gdGhpcy5hbmltYXRvcnM7XG4gICAgICAgIGlmIChhbmltYXRvcnMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5pbWF0b3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgenIuYW5pbWF0aW9uLnJlbW92ZUFuaW1hdG9yKGFuaW1hdG9yc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2NsaXBQYXRoKSB7XG4gICAgICAgICAgICB0aGlzLl9jbGlwUGF0aC5yZW1vdmVTZWxmRnJvbVpyKHpyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fdGV4dENvbnRlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuX3RleHRDb250ZW50LnJlbW92ZVNlbGZGcm9tWnIoenIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl90ZXh0R3VpZGUpIHtcbiAgICAgICAgICAgIHRoaXMuX3RleHRHdWlkZS5yZW1vdmVTZWxmRnJvbVpyKHpyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uIChrZXksIGxvb3AsIGFsbG93RGlzY3JldGVBbmltYXRpb24pIHtcbiAgICAgICAgdmFyIHRhcmdldCA9IGtleSA/IHRoaXNba2V5XSA6IHRoaXM7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgICAgICAgIGxvZ0Vycm9yKCdQcm9wZXJ0eSBcIidcbiAgICAgICAgICAgICAgICAgICAgKyBrZXlcbiAgICAgICAgICAgICAgICAgICAgKyAnXCIgaXMgbm90IGV4aXN0ZWQgaW4gZWxlbWVudCAnXG4gICAgICAgICAgICAgICAgICAgICsgdGhpcy5pZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBhbmltYXRvciA9IG5ldyBBbmltYXRvcih0YXJnZXQsIGxvb3AsIGFsbG93RGlzY3JldGVBbmltYXRpb24pO1xuICAgICAgICBrZXkgJiYgKGFuaW1hdG9yLnRhcmdldE5hbWUgPSBrZXkpO1xuICAgICAgICB0aGlzLmFkZEFuaW1hdG9yKGFuaW1hdG9yLCBrZXkpO1xuICAgICAgICByZXR1cm4gYW5pbWF0b3I7XG4gICAgfTtcbiAgICBFbGVtZW50LnByb3RvdHlwZS5hZGRBbmltYXRvciA9IGZ1bmN0aW9uIChhbmltYXRvciwga2V5KSB7XG4gICAgICAgIHZhciB6ciA9IHRoaXMuX196cjtcbiAgICAgICAgdmFyIGVsID0gdGhpcztcbiAgICAgICAgYW5pbWF0b3IuZHVyaW5nKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVsLnVwZGF0ZUR1cmluZ0FuaW1hdGlvbihrZXkpO1xuICAgICAgICB9KS5kb25lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhbmltYXRvcnMgPSBlbC5hbmltYXRvcnM7XG4gICAgICAgICAgICB2YXIgaWR4ID0gaW5kZXhPZihhbmltYXRvcnMsIGFuaW1hdG9yKTtcbiAgICAgICAgICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICAgICAgICAgIGFuaW1hdG9ycy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYW5pbWF0b3JzLnB1c2goYW5pbWF0b3IpO1xuICAgICAgICBpZiAoenIpIHtcbiAgICAgICAgICAgIHpyLmFuaW1hdGlvbi5hZGRBbmltYXRvcihhbmltYXRvcik7XG4gICAgICAgIH1cbiAgICAgICAgenIgJiYgenIud2FrZVVwKCk7XG4gICAgfTtcbiAgICBFbGVtZW50LnByb3RvdHlwZS51cGRhdGVEdXJpbmdBbmltYXRpb24gPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHRoaXMubWFya1JlZHJhdygpO1xuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUuc3RvcEFuaW1hdGlvbiA9IGZ1bmN0aW9uIChzY29wZSwgZm9yd2FyZFRvTGFzdCkge1xuICAgICAgICB2YXIgYW5pbWF0b3JzID0gdGhpcy5hbmltYXRvcnM7XG4gICAgICAgIHZhciBsZW4gPSBhbmltYXRvcnMubGVuZ3RoO1xuICAgICAgICB2YXIgbGVmdEFuaW1hdG9ycyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYW5pbWF0b3IgPSBhbmltYXRvcnNbaV07XG4gICAgICAgICAgICBpZiAoIXNjb3BlIHx8IHNjb3BlID09PSBhbmltYXRvci5zY29wZSkge1xuICAgICAgICAgICAgICAgIGFuaW1hdG9yLnN0b3AoZm9yd2FyZFRvTGFzdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZWZ0QW5pbWF0b3JzLnB1c2goYW5pbWF0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuYW5pbWF0b3JzID0gbGVmdEFuaW1hdG9ycztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBFbGVtZW50LnByb3RvdHlwZS5hbmltYXRlVG8gPSBmdW5jdGlvbiAodGFyZ2V0LCBjZmcsIGFuaW1hdGlvblByb3BzKSB7XG4gICAgICAgIGFuaW1hdGVUbyh0aGlzLCB0YXJnZXQsIGNmZywgYW5pbWF0aW9uUHJvcHMpO1xuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUuYW5pbWF0ZUZyb20gPSBmdW5jdGlvbiAodGFyZ2V0LCBjZmcsIGFuaW1hdGlvblByb3BzKSB7XG4gICAgICAgIGFuaW1hdGVUbyh0aGlzLCB0YXJnZXQsIGNmZywgYW5pbWF0aW9uUHJvcHMsIHRydWUpO1xuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUuX3RyYW5zaXRpb25TdGF0ZSA9IGZ1bmN0aW9uIChzdGF0ZU5hbWUsIHRhcmdldCwgY2ZnLCBhbmltYXRpb25Qcm9wcykge1xuICAgICAgICB2YXIgYW5pbWF0b3JzID0gYW5pbWF0ZVRvKHRoaXMsIHRhcmdldCwgY2ZnLCBhbmltYXRpb25Qcm9wcyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5pbWF0b3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhbmltYXRvcnNbaV0uX19mcm9tU3RhdGVUcmFuc2l0aW9uID0gc3RhdGVOYW1lO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFbGVtZW50LnByb3RvdHlwZS5nZXRCb3VuZGluZ1JlY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgRWxlbWVudC5wcm90b3R5cGUuZ2V0UGFpbnRSZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIEVsZW1lbnQuaW5pdERlZmF1bHRQcm9wcyA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlbFByb3RvID0gRWxlbWVudC5wcm90b3R5cGU7XG4gICAgICAgIGVsUHJvdG8udHlwZSA9ICdlbGVtZW50JztcbiAgICAgICAgZWxQcm90by5uYW1lID0gJyc7XG4gICAgICAgIGVsUHJvdG8uaWdub3JlID1cbiAgICAgICAgICAgIGVsUHJvdG8uc2lsZW50ID1cbiAgICAgICAgICAgICAgICBlbFByb3RvLmlzR3JvdXAgPVxuICAgICAgICAgICAgICAgICAgICBlbFByb3RvLmRyYWdnYWJsZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbFByb3RvLmRyYWdnaW5nID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbFByb3RvLmlnbm9yZUNsaXAgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbFByb3RvLl9faW5Ib3ZlciA9IGZhbHNlO1xuICAgICAgICBlbFByb3RvLl9fZGlydHkgPSBSRURSQVdfQklUO1xuICAgICAgICB2YXIgbG9ncyA9IHt9O1xuICAgICAgICBmdW5jdGlvbiBsb2dEZXByZWNhdGVkRXJyb3Ioa2V5LCB4S2V5LCB5S2V5KSB7XG4gICAgICAgICAgICBpZiAoIWxvZ3Nba2V5ICsgeEtleSArIHlLZXldKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiREVQUkVDQVRFRDogJ1wiICsga2V5ICsgXCInIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIHVzZSAnXCIgKyB4S2V5ICsgXCInLCAnXCIgKyB5S2V5ICsgXCInIGluc3RlYWRcIik7XG4gICAgICAgICAgICAgICAgbG9nc1trZXkgKyB4S2V5ICsgeUtleV0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUxlZ2FjeVByb3BlcnR5KGtleSwgcHJpdmF0ZUtleSwgeEtleSwgeUtleSkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsUHJvdG8sIGtleSwge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nRGVwcmVjYXRlZEVycm9yKGtleSwgeEtleSwgeUtleSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzW3ByaXZhdGVLZXldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zID0gdGhpc1twcml2YXRlS2V5XSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5oYW5jZUFycmF5KHRoaXMsIHBvcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNbcHJpdmF0ZUtleV07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0RlcHJlY2F0ZWRFcnJvcihrZXksIHhLZXksIHlLZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbeEtleV0gPSBwb3NbMF07XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbeUtleV0gPSBwb3NbMV07XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbcHJpdmF0ZUtleV0gPSBwb3M7XG4gICAgICAgICAgICAgICAgICAgIGVuaGFuY2VBcnJheSh0aGlzLCBwb3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZnVuY3Rpb24gZW5oYW5jZUFycmF5KHNlbGYsIHBvcykge1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwb3MsIDAsIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZlt4S2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmW3hLZXldID0gdmFsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBvcywgMSwge1xuICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmW3lLZXldO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGZbeUtleV0gPSB2YWw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7XG4gICAgICAgICAgICBjcmVhdGVMZWdhY3lQcm9wZXJ0eSgncG9zaXRpb24nLCAnX2xlZ2FjeVBvcycsICd4JywgJ3knKTtcbiAgICAgICAgICAgIGNyZWF0ZUxlZ2FjeVByb3BlcnR5KCdzY2FsZScsICdfbGVnYWN5U2NhbGUnLCAnc2NhbGVYJywgJ3NjYWxlWScpO1xuICAgICAgICAgICAgY3JlYXRlTGVnYWN5UHJvcGVydHkoJ29yaWdpbicsICdfbGVnYWN5T3JpZ2luJywgJ29yaWdpblgnLCAnb3JpZ2luWScpO1xuICAgICAgICB9XG4gICAgfSkoKTtcbiAgICByZXR1cm4gRWxlbWVudDtcbn0oKSk7XG5taXhpbihFbGVtZW50LCBFdmVudGZ1bCk7XG5taXhpbihFbGVtZW50LCBUcmFuc2Zvcm1hYmxlKTtcbmZ1bmN0aW9uIGFuaW1hdGVUbyhhbmltYXRhYmxlLCB0YXJnZXQsIGNmZywgYW5pbWF0aW9uUHJvcHMsIHJldmVyc2UpIHtcbiAgICBjZmcgPSBjZmcgfHwge307XG4gICAgdmFyIGFuaW1hdG9ycyA9IFtdO1xuICAgIGFuaW1hdGVUb1NoYWxsb3coYW5pbWF0YWJsZSwgJycsIGFuaW1hdGFibGUsIHRhcmdldCwgY2ZnLCBhbmltYXRpb25Qcm9wcywgYW5pbWF0b3JzLCByZXZlcnNlKTtcbiAgICB2YXIgZmluaXNoQ291bnQgPSBhbmltYXRvcnMubGVuZ3RoO1xuICAgIHZhciBkb25lSGFwcGVuZWQgPSBmYWxzZTtcbiAgICB2YXIgY2ZnRG9uZSA9IGNmZy5kb25lO1xuICAgIHZhciBjZmdBYm9ydGVkID0gY2ZnLmFib3J0ZWQ7XG4gICAgdmFyIGRvbmVDYiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZG9uZUhhcHBlbmVkID0gdHJ1ZTtcbiAgICAgICAgZmluaXNoQ291bnQtLTtcbiAgICAgICAgaWYgKGZpbmlzaENvdW50IDw9IDApIHtcbiAgICAgICAgICAgIGRvbmVIYXBwZW5lZFxuICAgICAgICAgICAgICAgID8gKGNmZ0RvbmUgJiYgY2ZnRG9uZSgpKVxuICAgICAgICAgICAgICAgIDogKGNmZ0Fib3J0ZWQgJiYgY2ZnQWJvcnRlZCgpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdmFyIGFib3J0ZWRDYiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZmluaXNoQ291bnQtLTtcbiAgICAgICAgaWYgKGZpbmlzaENvdW50IDw9IDApIHtcbiAgICAgICAgICAgIGRvbmVIYXBwZW5lZFxuICAgICAgICAgICAgICAgID8gKGNmZ0RvbmUgJiYgY2ZnRG9uZSgpKVxuICAgICAgICAgICAgICAgIDogKGNmZ0Fib3J0ZWQgJiYgY2ZnQWJvcnRlZCgpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgaWYgKCFmaW5pc2hDb3VudCkge1xuICAgICAgICBjZmdEb25lICYmIGNmZ0RvbmUoKTtcbiAgICB9XG4gICAgaWYgKGFuaW1hdG9ycy5sZW5ndGggPiAwICYmIGNmZy5kdXJpbmcpIHtcbiAgICAgICAgYW5pbWF0b3JzWzBdLmR1cmluZyhmdW5jdGlvbiAodGFyZ2V0LCBwZXJjZW50KSB7XG4gICAgICAgICAgICBjZmcuZHVyaW5nKHBlcmNlbnQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbmltYXRvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGFuaW1hdG9yID0gYW5pbWF0b3JzW2ldO1xuICAgICAgICBpZiAoZG9uZUNiKSB7XG4gICAgICAgICAgICBhbmltYXRvci5kb25lKGRvbmVDYik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFib3J0ZWRDYikge1xuICAgICAgICAgICAgYW5pbWF0b3IuYWJvcnRlZChhYm9ydGVkQ2IpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjZmcuZm9yY2UpIHtcbiAgICAgICAgICAgIGFuaW1hdG9yLmR1cmF0aW9uKGNmZy5kdXJhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgYW5pbWF0b3Iuc3RhcnQoY2ZnLmVhc2luZyk7XG4gICAgfVxuICAgIHJldHVybiBhbmltYXRvcnM7XG59XG5mdW5jdGlvbiBjb3B5QXJyU2hhbGxvdyhzb3VyY2UsIHRhcmdldCwgbGVuKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBzb3VyY2VbaV0gPSB0YXJnZXRbaV07XG4gICAgfVxufVxuZnVuY3Rpb24gaXMyREFycmF5KHZhbHVlKSB7XG4gICAgcmV0dXJuIGlzQXJyYXlMaWtlKHZhbHVlWzBdKTtcbn1cbmZ1bmN0aW9uIGNvcHlWYWx1ZSh0YXJnZXQsIHNvdXJjZSwga2V5KSB7XG4gICAgaWYgKGlzQXJyYXlMaWtlKHNvdXJjZVtrZXldKSkge1xuICAgICAgICBpZiAoIWlzQXJyYXlMaWtlKHRhcmdldFtrZXldKSkge1xuICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNUeXBlZEFycmF5KHNvdXJjZVtrZXldKSkge1xuICAgICAgICAgICAgdmFyIGxlbiA9IHNvdXJjZVtrZXldLmxlbmd0aDtcbiAgICAgICAgICAgIGlmICh0YXJnZXRba2V5XS5sZW5ndGggIT09IGxlbikge1xuICAgICAgICAgICAgICAgIHRhcmdldFtrZXldID0gbmV3IChzb3VyY2Vba2V5XS5jb25zdHJ1Y3RvcikobGVuKTtcbiAgICAgICAgICAgICAgICBjb3B5QXJyU2hhbGxvdyh0YXJnZXRba2V5XSwgc291cmNlW2tleV0sIGxlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgc291cmNlQXJyID0gc291cmNlW2tleV07XG4gICAgICAgICAgICB2YXIgdGFyZ2V0QXJyID0gdGFyZ2V0W2tleV07XG4gICAgICAgICAgICB2YXIgbGVuMCA9IHNvdXJjZUFyci5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoaXMyREFycmF5KHNvdXJjZUFycikpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGVuMSA9IHNvdXJjZUFyclswXS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW4wOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRBcnJbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEFycltpXSA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHNvdXJjZUFycltpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5QXJyU2hhbGxvdyh0YXJnZXRBcnJbaV0sIHNvdXJjZUFycltpXSwgbGVuMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb3B5QXJyU2hhbGxvdyh0YXJnZXRBcnIsIHNvdXJjZUFyciwgbGVuMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YXJnZXRBcnIubGVuZ3RoID0gc291cmNlQXJyLmxlbmd0aDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICB9XG59XG5mdW5jdGlvbiBpc1ZhbHVlU2FtZSh2YWwxLCB2YWwyKSB7XG4gICAgcmV0dXJuIHZhbDEgPT09IHZhbDJcbiAgICAgICAgfHwgaXNBcnJheUxpa2UodmFsMSkgJiYgaXNBcnJheUxpa2UodmFsMikgJiYgaXMxREFycmF5U2FtZSh2YWwxLCB2YWwyKTtcbn1cbmZ1bmN0aW9uIGlzMURBcnJheVNhbWUoYXJyMCwgYXJyMSkge1xuICAgIHZhciBsZW4gPSBhcnIwLmxlbmd0aDtcbiAgICBpZiAobGVuICE9PSBhcnIxLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgaWYgKGFycjBbaV0gIT09IGFycjFbaV0pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGFuaW1hdGVUb1NoYWxsb3coYW5pbWF0YWJsZSwgdG9wS2V5LCBhbmltYXRlT2JqLCB0YXJnZXQsIGNmZywgYW5pbWF0aW9uUHJvcHMsIGFuaW1hdG9ycywgcmV2ZXJzZSkge1xuICAgIHZhciB0YXJnZXRLZXlzID0ga2V5cyh0YXJnZXQpO1xuICAgIHZhciBkdXJhdGlvbiA9IGNmZy5kdXJhdGlvbjtcbiAgICB2YXIgZGVsYXkgPSBjZmcuZGVsYXk7XG4gICAgdmFyIGFkZGl0aXZlID0gY2ZnLmFkZGl0aXZlO1xuICAgIHZhciBzZXRUb0ZpbmFsID0gY2ZnLnNldFRvRmluYWw7XG4gICAgdmFyIGFuaW1hdGVBbGwgPSAhaXNPYmplY3QoYW5pbWF0aW9uUHJvcHMpO1xuICAgIHZhciBleGlzdHNBbmltYXRvcnMgPSBhbmltYXRhYmxlLmFuaW1hdG9ycztcbiAgICB2YXIgYW5pbWF0aW9uS2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdGFyZ2V0S2V5cy5sZW5ndGg7IGsrKykge1xuICAgICAgICB2YXIgaW5uZXJLZXkgPSB0YXJnZXRLZXlzW2tdO1xuICAgICAgICB2YXIgdGFyZ2V0VmFsID0gdGFyZ2V0W2lubmVyS2V5XTtcbiAgICAgICAgaWYgKHRhcmdldFZhbCAhPSBudWxsICYmIGFuaW1hdGVPYmpbaW5uZXJLZXldICE9IG51bGxcbiAgICAgICAgICAgICYmIChhbmltYXRlQWxsIHx8IGFuaW1hdGlvblByb3BzW2lubmVyS2V5XSkpIHtcbiAgICAgICAgICAgIGlmIChpc09iamVjdCh0YXJnZXRWYWwpXG4gICAgICAgICAgICAgICAgJiYgIWlzQXJyYXlMaWtlKHRhcmdldFZhbClcbiAgICAgICAgICAgICAgICAmJiAhaXNHcmFkaWVudE9iamVjdCh0YXJnZXRWYWwpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRvcEtleSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJldmVyc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGVPYmpbaW5uZXJLZXldID0gdGFyZ2V0VmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0YWJsZS51cGRhdGVEdXJpbmdBbmltYXRpb24odG9wS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYW5pbWF0ZVRvU2hhbGxvdyhhbmltYXRhYmxlLCBpbm5lcktleSwgYW5pbWF0ZU9ialtpbm5lcktleV0sIHRhcmdldFZhbCwgY2ZnLCBhbmltYXRpb25Qcm9wcyAmJiBhbmltYXRpb25Qcm9wc1tpbm5lcktleV0sIGFuaW1hdG9ycywgcmV2ZXJzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25LZXlzLnB1c2goaW5uZXJLZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFyZXZlcnNlKSB7XG4gICAgICAgICAgICBhbmltYXRlT2JqW2lubmVyS2V5XSA9IHRhcmdldFZhbDtcbiAgICAgICAgICAgIGFuaW1hdGFibGUudXBkYXRlRHVyaW5nQW5pbWF0aW9uKHRvcEtleSk7XG4gICAgICAgICAgICBhbmltYXRpb25LZXlzLnB1c2goaW5uZXJLZXkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBrZXlMZW4gPSBhbmltYXRpb25LZXlzLmxlbmd0aDtcbiAgICBpZiAoIWFkZGl0aXZlICYmIGtleUxlbikge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4aXN0c0FuaW1hdG9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGFuaW1hdG9yID0gZXhpc3RzQW5pbWF0b3JzW2ldO1xuICAgICAgICAgICAgaWYgKGFuaW1hdG9yLnRhcmdldE5hbWUgPT09IHRvcEtleSkge1xuICAgICAgICAgICAgICAgIHZhciBhbGxBYm9ydGVkID0gYW5pbWF0b3Iuc3RvcFRyYWNrcyhhbmltYXRpb25LZXlzKTtcbiAgICAgICAgICAgICAgICBpZiAoYWxsQWJvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gaW5kZXhPZihleGlzdHNBbmltYXRvcnMsIGFuaW1hdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgZXhpc3RzQW5pbWF0b3JzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWNmZy5mb3JjZSkge1xuICAgICAgICBhbmltYXRpb25LZXlzID0gZmlsdGVyKGFuaW1hdGlvbktleXMsIGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuICFpc1ZhbHVlU2FtZSh0YXJnZXRba2V5XSwgYW5pbWF0ZU9ialtrZXldKTsgfSk7XG4gICAgICAgIGtleUxlbiA9IGFuaW1hdGlvbktleXMubGVuZ3RoO1xuICAgIH1cbiAgICBpZiAoa2V5TGVuID4gMFxuICAgICAgICB8fCAoY2ZnLmZvcmNlICYmICFhbmltYXRvcnMubGVuZ3RoKSkge1xuICAgICAgICB2YXIgcmV2ZXJ0ZWRTb3VyY2UgPSB2b2lkIDA7XG4gICAgICAgIHZhciByZXZlcnNlZFRhcmdldCA9IHZvaWQgMDtcbiAgICAgICAgdmFyIHNvdXJjZUNsb25lID0gdm9pZCAwO1xuICAgICAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgICAgICAgcmV2ZXJzZWRUYXJnZXQgPSB7fTtcbiAgICAgICAgICAgIGlmIChzZXRUb0ZpbmFsKSB7XG4gICAgICAgICAgICAgICAgcmV2ZXJ0ZWRTb3VyY2UgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5TGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5uZXJLZXkgPSBhbmltYXRpb25LZXlzW2ldO1xuICAgICAgICAgICAgICAgIHJldmVyc2VkVGFyZ2V0W2lubmVyS2V5XSA9IGFuaW1hdGVPYmpbaW5uZXJLZXldO1xuICAgICAgICAgICAgICAgIGlmIChzZXRUb0ZpbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldmVydGVkU291cmNlW2lubmVyS2V5XSA9IHRhcmdldFtpbm5lcktleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRlT2JqW2lubmVyS2V5XSA9IHRhcmdldFtpbm5lcktleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNldFRvRmluYWwpIHtcbiAgICAgICAgICAgIHNvdXJjZUNsb25lID0ge307XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleUxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlubmVyS2V5ID0gYW5pbWF0aW9uS2V5c1tpXTtcbiAgICAgICAgICAgICAgICBzb3VyY2VDbG9uZVtpbm5lcktleV0gPSBjbG9uZVZhbHVlKGFuaW1hdGVPYmpbaW5uZXJLZXldKTtcbiAgICAgICAgICAgICAgICBjb3B5VmFsdWUoYW5pbWF0ZU9iaiwgdGFyZ2V0LCBpbm5lcktleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFuaW1hdG9yID0gbmV3IEFuaW1hdG9yKGFuaW1hdGVPYmosIGZhbHNlLCBmYWxzZSwgYWRkaXRpdmUgPyBmaWx0ZXIoZXhpc3RzQW5pbWF0b3JzLCBmdW5jdGlvbiAoYW5pbWF0b3IpIHsgcmV0dXJuIGFuaW1hdG9yLnRhcmdldE5hbWUgPT09IHRvcEtleTsgfSkgOiBudWxsKTtcbiAgICAgICAgYW5pbWF0b3IudGFyZ2V0TmFtZSA9IHRvcEtleTtcbiAgICAgICAgaWYgKGNmZy5zY29wZSkge1xuICAgICAgICAgICAgYW5pbWF0b3Iuc2NvcGUgPSBjZmcuc2NvcGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNldFRvRmluYWwgJiYgcmV2ZXJ0ZWRTb3VyY2UpIHtcbiAgICAgICAgICAgIGFuaW1hdG9yLndoZW5XaXRoS2V5cygwLCByZXZlcnRlZFNvdXJjZSwgYW5pbWF0aW9uS2V5cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNvdXJjZUNsb25lKSB7XG4gICAgICAgICAgICBhbmltYXRvci53aGVuV2l0aEtleXMoMCwgc291cmNlQ2xvbmUsIGFuaW1hdGlvbktleXMpO1xuICAgICAgICB9XG4gICAgICAgIGFuaW1hdG9yLndoZW5XaXRoS2V5cyhkdXJhdGlvbiA9PSBudWxsID8gNTAwIDogZHVyYXRpb24sIHJldmVyc2UgPyByZXZlcnNlZFRhcmdldCA6IHRhcmdldCwgYW5pbWF0aW9uS2V5cykuZGVsYXkoZGVsYXkgfHwgMCk7XG4gICAgICAgIGFuaW1hdGFibGUuYWRkQW5pbWF0b3IoYW5pbWF0b3IsIHRvcEtleSk7XG4gICAgICAgIGFuaW1hdG9ycy5wdXNoKGFuaW1hdG9yKTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBFbGVtZW50O1xuIiwiaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgKiBhcyB6clV0aWwgZnJvbSAnLi4vY29yZS91dGlsLmpzJztcbmltcG9ydCBFbGVtZW50IGZyb20gJy4uL0VsZW1lbnQuanMnO1xuaW1wb3J0IEJvdW5kaW5nUmVjdCBmcm9tICcuLi9jb3JlL0JvdW5kaW5nUmVjdC5qcyc7XG52YXIgR3JvdXAgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhHcm91cCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBHcm91cChvcHRzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmlzR3JvdXAgPSB0cnVlO1xuICAgICAgICBfdGhpcy5fY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgX3RoaXMuYXR0cihvcHRzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBHcm91cC5wcm90b3R5cGUuY2hpbGRyZW5SZWYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jaGlsZHJlbjtcbiAgICB9O1xuICAgIEdyb3VwLnByb3RvdHlwZS5jaGlsZHJlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NoaWxkcmVuLnNsaWNlKCk7XG4gICAgfTtcbiAgICBHcm91cC5wcm90b3R5cGUuY2hpbGRBdCA9IGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NoaWxkcmVuW2lkeF07XG4gICAgfTtcbiAgICBHcm91cC5wcm90b3R5cGUuY2hpbGRPZk5hbWUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLl9jaGlsZHJlbjtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGNoaWxkcmVuW2ldLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGRyZW5baV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEdyb3VwLnByb3RvdHlwZS5jaGlsZENvdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2hpbGRyZW4ubGVuZ3RoO1xuICAgIH07XG4gICAgR3JvdXAucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICBpZiAoY2hpbGQpIHtcbiAgICAgICAgICAgIGlmIChjaGlsZCAhPT0gdGhpcyAmJiBjaGlsZC5wYXJlbnQgIT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9kb0FkZChjaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5fX2hvc3RUYXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ1RoaXMgZWxlbWVuZXQgaGFzIGJlZW4gdXNlZCBhcyBhbiBhdHRhY2htZW50JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBHcm91cC5wcm90b3R5cGUuYWRkQmVmb3JlID0gZnVuY3Rpb24gKGNoaWxkLCBuZXh0U2libGluZykge1xuICAgICAgICBpZiAoY2hpbGQgJiYgY2hpbGQgIT09IHRoaXMgJiYgY2hpbGQucGFyZW50ICE9PSB0aGlzXG4gICAgICAgICAgICAmJiBuZXh0U2libGluZyAmJiBuZXh0U2libGluZy5wYXJlbnQgPT09IHRoaXMpIHtcbiAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuX2NoaWxkcmVuO1xuICAgICAgICAgICAgdmFyIGlkeCA9IGNoaWxkcmVuLmluZGV4T2YobmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW4uc3BsaWNlKGlkeCwgMCwgY2hpbGQpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2RvQWRkKGNoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEdyb3VwLnByb3RvdHlwZS5yZXBsYWNlID0gZnVuY3Rpb24gKG9sZENoaWxkLCBuZXdDaGlsZCkge1xuICAgICAgICB2YXIgaWR4ID0genJVdGlsLmluZGV4T2YodGhpcy5fY2hpbGRyZW4sIG9sZENoaWxkKTtcbiAgICAgICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlcGxhY2VBdChuZXdDaGlsZCwgaWR4KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEdyb3VwLnByb3RvdHlwZS5yZXBsYWNlQXQgPSBmdW5jdGlvbiAoY2hpbGQsIGluZGV4KSB7XG4gICAgICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuX2NoaWxkcmVuO1xuICAgICAgICB2YXIgb2xkID0gY2hpbGRyZW5baW5kZXhdO1xuICAgICAgICBpZiAoY2hpbGQgJiYgY2hpbGQgIT09IHRoaXMgJiYgY2hpbGQucGFyZW50ICE9PSB0aGlzICYmIGNoaWxkICE9PSBvbGQpIHtcbiAgICAgICAgICAgIGNoaWxkcmVuW2luZGV4XSA9IGNoaWxkO1xuICAgICAgICAgICAgb2xkLnBhcmVudCA9IG51bGw7XG4gICAgICAgICAgICB2YXIgenIgPSB0aGlzLl9fenI7XG4gICAgICAgICAgICBpZiAoenIpIHtcbiAgICAgICAgICAgICAgICBvbGQucmVtb3ZlU2VsZkZyb21acih6cik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9kb0FkZChjaGlsZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBHcm91cC5wcm90b3R5cGUuX2RvQWRkID0gZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgIGlmIChjaGlsZC5wYXJlbnQpIHtcbiAgICAgICAgICAgIGNoaWxkLnBhcmVudC5yZW1vdmUoY2hpbGQpO1xuICAgICAgICB9XG4gICAgICAgIGNoaWxkLnBhcmVudCA9IHRoaXM7XG4gICAgICAgIHZhciB6ciA9IHRoaXMuX196cjtcbiAgICAgICAgaWYgKHpyICYmIHpyICE9PSBjaGlsZC5fX3pyKSB7XG4gICAgICAgICAgICBjaGlsZC5hZGRTZWxmVG9acih6cik7XG4gICAgICAgIH1cbiAgICAgICAgenIgJiYgenIucmVmcmVzaCgpO1xuICAgIH07XG4gICAgR3JvdXAucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICB2YXIgenIgPSB0aGlzLl9fenI7XG4gICAgICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuX2NoaWxkcmVuO1xuICAgICAgICB2YXIgaWR4ID0genJVdGlsLmluZGV4T2YoY2hpbGRyZW4sIGNoaWxkKTtcbiAgICAgICAgaWYgKGlkeCA8IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGNoaWxkcmVuLnNwbGljZShpZHgsIDEpO1xuICAgICAgICBjaGlsZC5wYXJlbnQgPSBudWxsO1xuICAgICAgICBpZiAoenIpIHtcbiAgICAgICAgICAgIGNoaWxkLnJlbW92ZVNlbGZGcm9tWnIoenIpO1xuICAgICAgICB9XG4gICAgICAgIHpyICYmIHpyLnJlZnJlc2goKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBHcm91cC5wcm90b3R5cGUucmVtb3ZlQWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLl9jaGlsZHJlbjtcbiAgICAgICAgdmFyIHpyID0gdGhpcy5fX3pyO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGlmICh6cikge1xuICAgICAgICAgICAgICAgIGNoaWxkLnJlbW92ZVNlbGZGcm9tWnIoenIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hpbGQucGFyZW50ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjaGlsZHJlbi5sZW5ndGggPSAwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEdyb3VwLnByb3RvdHlwZS5lYWNoQ2hpbGQgPSBmdW5jdGlvbiAoY2IsIGNvbnRleHQpIHtcbiAgICAgICAgdmFyIGNoaWxkcmVuID0gdGhpcy5fY2hpbGRyZW47XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgY2IuY2FsbChjb250ZXh0LCBjaGlsZCwgaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBHcm91cC5wcm90b3R5cGUudHJhdmVyc2UgPSBmdW5jdGlvbiAoY2IsIGNvbnRleHQpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5fY2hpbGRyZW5baV07XG4gICAgICAgICAgICB2YXIgc3RvcHBlZCA9IGNiLmNhbGwoY29udGV4dCwgY2hpbGQpO1xuICAgICAgICAgICAgaWYgKGNoaWxkLmlzR3JvdXAgJiYgIXN0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICBjaGlsZC50cmF2ZXJzZShjYiwgY29udGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBHcm91cC5wcm90b3R5cGUuYWRkU2VsZlRvWnIgPSBmdW5jdGlvbiAoenIpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5hZGRTZWxmVG9aci5jYWxsKHRoaXMsIHpyKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5fY2hpbGRyZW5baV07XG4gICAgICAgICAgICBjaGlsZC5hZGRTZWxmVG9acih6cik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEdyb3VwLnByb3RvdHlwZS5yZW1vdmVTZWxmRnJvbVpyID0gZnVuY3Rpb24gKHpyKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVtb3ZlU2VsZkZyb21aci5jYWxsKHRoaXMsIHpyKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5fY2hpbGRyZW5baV07XG4gICAgICAgICAgICBjaGlsZC5yZW1vdmVTZWxmRnJvbVpyKHpyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgR3JvdXAucHJvdG90eXBlLmdldEJvdW5kaW5nUmVjdCA9IGZ1bmN0aW9uIChpbmNsdWRlQ2hpbGRyZW4pIHtcbiAgICAgICAgdmFyIHRtcFJlY3QgPSBuZXcgQm91bmRpbmdSZWN0KDAsIDAsIDAsIDApO1xuICAgICAgICB2YXIgY2hpbGRyZW4gPSBpbmNsdWRlQ2hpbGRyZW4gfHwgdGhpcy5fY2hpbGRyZW47XG4gICAgICAgIHZhciB0bXBNYXQgPSBbXTtcbiAgICAgICAgdmFyIHJlY3QgPSBudWxsO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGlmIChjaGlsZC5pZ25vcmUgfHwgY2hpbGQuaW52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2hpbGRSZWN0ID0gY2hpbGQuZ2V0Qm91bmRpbmdSZWN0KCk7XG4gICAgICAgICAgICB2YXIgdHJhbnNmb3JtID0gY2hpbGQuZ2V0TG9jYWxUcmFuc2Zvcm0odG1wTWF0KTtcbiAgICAgICAgICAgIGlmICh0cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgICAgICBCb3VuZGluZ1JlY3QuYXBwbHlUcmFuc2Zvcm0odG1wUmVjdCwgY2hpbGRSZWN0LCB0cmFuc2Zvcm0pO1xuICAgICAgICAgICAgICAgIHJlY3QgPSByZWN0IHx8IHRtcFJlY3QuY2xvbmUoKTtcbiAgICAgICAgICAgICAgICByZWN0LnVuaW9uKHRtcFJlY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVjdCA9IHJlY3QgfHwgY2hpbGRSZWN0LmNsb25lKCk7XG4gICAgICAgICAgICAgICAgcmVjdC51bmlvbihjaGlsZFJlY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWN0IHx8IHRtcFJlY3Q7XG4gICAgfTtcbiAgICByZXR1cm4gR3JvdXA7XG59KEVsZW1lbnQpKTtcbkdyb3VwLnByb3RvdHlwZS50eXBlID0gJ2dyb3VwJztcbmV4cG9ydCBkZWZhdWx0IEdyb3VwO1xuIiwiLyohXG4qIFpSZW5kZXIsIGEgaGlnaCBwZXJmb3JtYW5jZSAyZCBkcmF3aW5nIGxpYnJhcnkuXG4qXG4qIENvcHlyaWdodCAoYykgMjAxMywgQmFpZHUgSW5jLlxuKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuKlxuKiBMSUNFTlNFXG4qIGh0dHBzOi8vZ2l0aHViLmNvbS9lY29tZmUvenJlbmRlci9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dFxuKi9cbmltcG9ydCBlbnYgZnJvbSAnLi9jb3JlL2Vudi5qcyc7XG5pbXBvcnQgKiBhcyB6clV0aWwgZnJvbSAnLi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0IEhhbmRsZXIgZnJvbSAnLi9IYW5kbGVyLmpzJztcbmltcG9ydCBTdG9yYWdlIGZyb20gJy4vU3RvcmFnZS5qcyc7XG5pbXBvcnQgQW5pbWF0aW9uLCB7IGdldFRpbWUgfSBmcm9tICcuL2FuaW1hdGlvbi9BbmltYXRpb24uanMnO1xuaW1wb3J0IEhhbmRsZXJQcm94eSBmcm9tICcuL2RvbS9IYW5kbGVyUHJveHkuanMnO1xuaW1wb3J0IHsgbHVtIH0gZnJvbSAnLi90b29sL2NvbG9yLmpzJztcbmltcG9ydCB7IERBUktfTU9ERV9USFJFU0hPTEQgfSBmcm9tICcuL2NvbmZpZy5qcyc7XG5pbXBvcnQgR3JvdXAgZnJvbSAnLi9ncmFwaGljL0dyb3VwLmpzJztcbnZhciBwYWludGVyQ3RvcnMgPSB7fTtcbnZhciBpbnN0YW5jZXMgPSB7fTtcbmZ1bmN0aW9uIGRlbEluc3RhbmNlKGlkKSB7XG4gICAgZGVsZXRlIGluc3RhbmNlc1tpZF07XG59XG5mdW5jdGlvbiBpc0RhcmtNb2RlKGJhY2tncm91bmRDb2xvcikge1xuICAgIGlmICghYmFja2dyb3VuZENvbG9yKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBiYWNrZ3JvdW5kQ29sb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBsdW0oYmFja2dyb3VuZENvbG9yLCAxKSA8IERBUktfTU9ERV9USFJFU0hPTEQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKGJhY2tncm91bmRDb2xvci5jb2xvclN0b3BzKSB7XG4gICAgICAgIHZhciBjb2xvclN0b3BzID0gYmFja2dyb3VuZENvbG9yLmNvbG9yU3RvcHM7XG4gICAgICAgIHZhciB0b3RhbEx1bSA9IDA7XG4gICAgICAgIHZhciBsZW4gPSBjb2xvclN0b3BzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdG90YWxMdW0gKz0gbHVtKGNvbG9yU3RvcHNbaV0uY29sb3IsIDEpO1xuICAgICAgICB9XG4gICAgICAgIHRvdGFsTHVtIC89IGxlbjtcbiAgICAgICAgcmV0dXJuIHRvdGFsTHVtIDwgREFSS19NT0RFX1RIUkVTSE9MRDtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxudmFyIFpSZW5kZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFpSZW5kZXIoaWQsIGRvbSwgb3B0cykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLl9zbGVlcEFmdGVyU3RpbGwgPSAxMDtcbiAgICAgICAgdGhpcy5fc3RpbGxGcmFtZUFjY3VtID0gMDtcbiAgICAgICAgdGhpcy5fbmVlZHNSZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fbmVlZHNSZWZyZXNoSG92ZXIgPSB0cnVlO1xuICAgICAgICB0aGlzLl9kYXJrTW9kZSA9IGZhbHNlO1xuICAgICAgICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgICAgICAgdGhpcy5kb20gPSBkb207XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdmFyIHN0b3JhZ2UgPSBuZXcgU3RvcmFnZSgpO1xuICAgICAgICB2YXIgcmVuZGVyZXJUeXBlID0gb3B0cy5yZW5kZXJlciB8fCAnY2FudmFzJztcbiAgICAgICAgaWYgKCFwYWludGVyQ3RvcnNbcmVuZGVyZXJUeXBlXSkge1xuICAgICAgICAgICAgcmVuZGVyZXJUeXBlID0genJVdGlsLmtleXMocGFpbnRlckN0b3JzKVswXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgaWYgKCFwYWludGVyQ3RvcnNbcmVuZGVyZXJUeXBlXSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlbmRlcmVyICdcIiArIHJlbmRlcmVyVHlwZSArIFwiJyBpcyBub3QgaW1wb3J0ZWQuIFBsZWFzZSBpbXBvcnQgaXQgZmlyc3QuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG9wdHMudXNlRGlydHlSZWN0ID0gb3B0cy51c2VEaXJ0eVJlY3QgPT0gbnVsbFxuICAgICAgICAgICAgPyBmYWxzZVxuICAgICAgICAgICAgOiBvcHRzLnVzZURpcnR5UmVjdDtcbiAgICAgICAgdmFyIHBhaW50ZXIgPSBuZXcgcGFpbnRlckN0b3JzW3JlbmRlcmVyVHlwZV0oZG9tLCBzdG9yYWdlLCBvcHRzLCBpZCk7XG4gICAgICAgIHZhciBzc3JNb2RlID0gb3B0cy5zc3IgfHwgcGFpbnRlci5zc3JPbmx5O1xuICAgICAgICB0aGlzLnN0b3JhZ2UgPSBzdG9yYWdlO1xuICAgICAgICB0aGlzLnBhaW50ZXIgPSBwYWludGVyO1xuICAgICAgICB2YXIgaGFuZGVyUHJveHkgPSAoIWVudi5ub2RlICYmICFlbnYud29ya2VyICYmICFzc3JNb2RlKVxuICAgICAgICAgICAgPyBuZXcgSGFuZGxlclByb3h5KHBhaW50ZXIuZ2V0Vmlld3BvcnRSb290KCksIHBhaW50ZXIucm9vdClcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgdmFyIHVzZUNvYXJzZVBvaW50ZXIgPSBvcHRzLnVzZUNvYXJzZVBvaW50ZXI7XG4gICAgICAgIHZhciB1c2VQb2ludGVyU2l6ZSA9ICh1c2VDb2Fyc2VQb2ludGVyID09IG51bGwgfHwgdXNlQ29hcnNlUG9pbnRlciA9PT0gJ2F1dG8nKVxuICAgICAgICAgICAgPyBlbnYudG91Y2hFdmVudHNTdXBwb3J0ZWRcbiAgICAgICAgICAgIDogISF1c2VDb2Fyc2VQb2ludGVyO1xuICAgICAgICB2YXIgZGVmYXVsdFBvaW50ZXJTaXplID0gNDQ7XG4gICAgICAgIHZhciBwb2ludGVyU2l6ZTtcbiAgICAgICAgaWYgKHVzZVBvaW50ZXJTaXplKSB7XG4gICAgICAgICAgICBwb2ludGVyU2l6ZSA9IHpyVXRpbC5yZXRyaWV2ZTIob3B0cy5wb2ludGVyU2l6ZSwgZGVmYXVsdFBvaW50ZXJTaXplKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhbmRsZXIgPSBuZXcgSGFuZGxlcihzdG9yYWdlLCBwYWludGVyLCBoYW5kZXJQcm94eSwgcGFpbnRlci5yb290LCBwb2ludGVyU2l6ZSk7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uID0gbmV3IEFuaW1hdGlvbih7XG4gICAgICAgICAgICBzdGFnZToge1xuICAgICAgICAgICAgICAgIHVwZGF0ZTogc3NyTW9kZSA/IG51bGwgOiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5fZmx1c2godHJ1ZSk7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghc3NyTW9kZSkge1xuICAgICAgICAgICAgdGhpcy5hbmltYXRpb24uc3RhcnQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBaUmVuZGVyLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgaWYgKCFlbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RvcmFnZS5hZGRSb290KGVsKTtcbiAgICAgICAgZWwuYWRkU2VsZlRvWnIodGhpcyk7XG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIH07XG4gICAgWlJlbmRlci5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIGlmICghZWwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0b3JhZ2UuZGVsUm9vdChlbCk7XG4gICAgICAgIGVsLnJlbW92ZVNlbGZGcm9tWnIodGhpcyk7XG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIH07XG4gICAgWlJlbmRlci5wcm90b3R5cGUuY29uZmlnTGF5ZXIgPSBmdW5jdGlvbiAoekxldmVsLCBjb25maWcpIHtcbiAgICAgICAgaWYgKHRoaXMucGFpbnRlci5jb25maWdMYXllcikge1xuICAgICAgICAgICAgdGhpcy5wYWludGVyLmNvbmZpZ0xheWVyKHpMZXZlbCwgY29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9O1xuICAgIFpSZW5kZXIucHJvdG90eXBlLnNldEJhY2tncm91bmRDb2xvciA9IGZ1bmN0aW9uIChiYWNrZ3JvdW5kQ29sb3IpIHtcbiAgICAgICAgaWYgKHRoaXMucGFpbnRlci5zZXRCYWNrZ3JvdW5kQ29sb3IpIHtcbiAgICAgICAgICAgIHRoaXMucGFpbnRlci5zZXRCYWNrZ3JvdW5kQ29sb3IoYmFja2dyb3VuZENvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgdGhpcy5fYmFja2dyb3VuZENvbG9yID0gYmFja2dyb3VuZENvbG9yO1xuICAgICAgICB0aGlzLl9kYXJrTW9kZSA9IGlzRGFya01vZGUoYmFja2dyb3VuZENvbG9yKTtcbiAgICB9O1xuICAgIFpSZW5kZXIucHJvdG90eXBlLmdldEJhY2tncm91bmRDb2xvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JhY2tncm91bmRDb2xvcjtcbiAgICB9O1xuICAgIFpSZW5kZXIucHJvdG90eXBlLnNldERhcmtNb2RlID0gZnVuY3Rpb24gKGRhcmtNb2RlKSB7XG4gICAgICAgIHRoaXMuX2RhcmtNb2RlID0gZGFya01vZGU7XG4gICAgfTtcbiAgICBaUmVuZGVyLnByb3RvdHlwZS5pc0RhcmtNb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGFya01vZGU7XG4gICAgfTtcbiAgICBaUmVuZGVyLnByb3RvdHlwZS5yZWZyZXNoSW1tZWRpYXRlbHkgPSBmdW5jdGlvbiAoZnJvbUluc2lkZSkge1xuICAgICAgICBpZiAoIWZyb21JbnNpZGUpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uLnVwZGF0ZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9uZWVkc1JlZnJlc2ggPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wYWludGVyLnJlZnJlc2goKTtcbiAgICAgICAgdGhpcy5fbmVlZHNSZWZyZXNoID0gZmFsc2U7XG4gICAgfTtcbiAgICBaUmVuZGVyLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9uZWVkc1JlZnJlc2ggPSB0cnVlO1xuICAgICAgICB0aGlzLmFuaW1hdGlvbi5zdGFydCgpO1xuICAgIH07XG4gICAgWlJlbmRlci5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2ZsdXNoKGZhbHNlKTtcbiAgICB9O1xuICAgIFpSZW5kZXIucHJvdG90eXBlLl9mbHVzaCA9IGZ1bmN0aW9uIChmcm9tSW5zaWRlKSB7XG4gICAgICAgIHZhciB0cmlnZ2VyUmVuZGVyZWQ7XG4gICAgICAgIHZhciBzdGFydCA9IGdldFRpbWUoKTtcbiAgICAgICAgaWYgKHRoaXMuX25lZWRzUmVmcmVzaCkge1xuICAgICAgICAgICAgdHJpZ2dlclJlbmRlcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaEltbWVkaWF0ZWx5KGZyb21JbnNpZGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9uZWVkc1JlZnJlc2hIb3Zlcikge1xuICAgICAgICAgICAgdHJpZ2dlclJlbmRlcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaEhvdmVySW1tZWRpYXRlbHkoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZW5kID0gZ2V0VGltZSgpO1xuICAgICAgICBpZiAodHJpZ2dlclJlbmRlcmVkKSB7XG4gICAgICAgICAgICB0aGlzLl9zdGlsbEZyYW1lQWNjdW0gPSAwO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdyZW5kZXJlZCcsIHtcbiAgICAgICAgICAgICAgICBlbGFwc2VkVGltZTogZW5kIC0gc3RhcnRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX3NsZWVwQWZ0ZXJTdGlsbCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuX3N0aWxsRnJhbWVBY2N1bSsrO1xuICAgICAgICAgICAgaWYgKHRoaXMuX3N0aWxsRnJhbWVBY2N1bSA+IHRoaXMuX3NsZWVwQWZ0ZXJTdGlsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgWlJlbmRlci5wcm90b3R5cGUuc2V0U2xlZXBBZnRlclN0aWxsID0gZnVuY3Rpb24gKHN0aWxsRnJhbWVzQ291bnQpIHtcbiAgICAgICAgdGhpcy5fc2xlZXBBZnRlclN0aWxsID0gc3RpbGxGcmFtZXNDb3VudDtcbiAgICB9O1xuICAgIFpSZW5kZXIucHJvdG90eXBlLndha2VVcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5hbmltYXRpb24uc3RhcnQoKTtcbiAgICAgICAgdGhpcy5fc3RpbGxGcmFtZUFjY3VtID0gMDtcbiAgICB9O1xuICAgIFpSZW5kZXIucHJvdG90eXBlLnJlZnJlc2hIb3ZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fbmVlZHNSZWZyZXNoSG92ZXIgPSB0cnVlO1xuICAgIH07XG4gICAgWlJlbmRlci5wcm90b3R5cGUucmVmcmVzaEhvdmVySW1tZWRpYXRlbHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX25lZWRzUmVmcmVzaEhvdmVyID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLnBhaW50ZXIucmVmcmVzaEhvdmVyICYmIHRoaXMucGFpbnRlci5nZXRUeXBlKCkgPT09ICdjYW52YXMnKSB7XG4gICAgICAgICAgICB0aGlzLnBhaW50ZXIucmVmcmVzaEhvdmVyKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFpSZW5kZXIucHJvdG90eXBlLnJlc2l6ZSA9IGZ1bmN0aW9uIChvcHRzKSB7XG4gICAgICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuICAgICAgICB0aGlzLnBhaW50ZXIucmVzaXplKG9wdHMud2lkdGgsIG9wdHMuaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5oYW5kbGVyLnJlc2l6ZSgpO1xuICAgIH07XG4gICAgWlJlbmRlci5wcm90b3R5cGUuY2xlYXJBbmltYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uLmNsZWFyKCk7XG4gICAgfTtcbiAgICBaUmVuZGVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFpbnRlci5nZXRXaWR0aCgpO1xuICAgIH07XG4gICAgWlJlbmRlci5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYWludGVyLmdldEhlaWdodCgpO1xuICAgIH07XG4gICAgWlJlbmRlci5wcm90b3R5cGUuc2V0Q3Vyc29yU3R5bGUgPSBmdW5jdGlvbiAoY3Vyc29yU3R5bGUpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVyLnNldEN1cnNvclN0eWxlKGN1cnNvclN0eWxlKTtcbiAgICB9O1xuICAgIFpSZW5kZXIucHJvdG90eXBlLmZpbmRIb3ZlciA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhbmRsZXIuZmluZEhvdmVyKHgsIHkpO1xuICAgIH07XG4gICAgWlJlbmRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBldmVudEhhbmRsZXIsIGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVyLm9uKGV2ZW50TmFtZSwgZXZlbnRIYW5kbGVyLCBjb250ZXh0KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBaUmVuZGVyLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBldmVudEhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVyLm9mZihldmVudE5hbWUsIGV2ZW50SGFuZGxlcik7XG4gICAgfTtcbiAgICBaUmVuZGVyLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZXZlbnQpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVyLnRyaWdnZXIoZXZlbnROYW1lLCBldmVudCk7XG4gICAgfTtcbiAgICBaUmVuZGVyLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJvb3RzID0gdGhpcy5zdG9yYWdlLmdldFJvb3RzKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcm9vdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChyb290c1tpXSBpbnN0YW5jZW9mIEdyb3VwKSB7XG4gICAgICAgICAgICAgICAgcm9vdHNbaV0ucmVtb3ZlU2VsZkZyb21acih0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0b3JhZ2UuZGVsQWxsUm9vdHMoKTtcbiAgICAgICAgdGhpcy5wYWludGVyLmNsZWFyKCk7XG4gICAgfTtcbiAgICBaUmVuZGVyLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmFuaW1hdGlvbi5zdG9wKCk7XG4gICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5zdG9yYWdlLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5wYWludGVyLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5oYW5kbGVyLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5hbmltYXRpb24gPVxuICAgICAgICAgICAgdGhpcy5zdG9yYWdlID1cbiAgICAgICAgICAgICAgICB0aGlzLnBhaW50ZXIgPVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXIgPSBudWxsO1xuICAgICAgICBkZWxJbnN0YW5jZSh0aGlzLmlkKTtcbiAgICB9O1xuICAgIHJldHVybiBaUmVuZGVyO1xufSgpKTtcbmV4cG9ydCBmdW5jdGlvbiBpbml0KGRvbSwgb3B0cykge1xuICAgIHZhciB6ciA9IG5ldyBaUmVuZGVyKHpyVXRpbC5ndWlkKCksIGRvbSwgb3B0cyk7XG4gICAgaW5zdGFuY2VzW3pyLmlkXSA9IHpyO1xuICAgIHJldHVybiB6cjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkaXNwb3NlKHpyKSB7XG4gICAgenIuZGlzcG9zZSgpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRpc3Bvc2VBbGwoKSB7XG4gICAgZm9yICh2YXIga2V5IGluIGluc3RhbmNlcykge1xuICAgICAgICBpZiAoaW5zdGFuY2VzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIGluc3RhbmNlc1trZXldLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbnN0YW5jZXMgPSB7fTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnN0YW5jZShpZCkge1xuICAgIHJldHVybiBpbnN0YW5jZXNbaWRdO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyUGFpbnRlcihuYW1lLCBDdG9yKSB7XG4gICAgcGFpbnRlckN0b3JzW25hbWVdID0gQ3Rvcjtcbn1cbmV4cG9ydCB2YXIgdmVyc2lvbiA9ICc1LjQuNCc7XG47XG4iLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cblxuLypcclxuKiBBIHRoaXJkLXBhcnR5IGxpY2Vuc2UgaXMgZW1iZWRkZWQgZm9yIHNvbWUgb2YgdGhlIGNvZGUgaW4gdGhpcyBmaWxlOlxyXG4qIFRoZSBtZXRob2QgXCJxdWFudGlsZVwiIHdhcyBjb3BpZWQgZnJvbSBcImQzLmpzXCIuXHJcbiogKFNlZSBtb3JlIGRldGFpbHMgaW4gdGhlIGNvbW1lbnQgb2YgdGhlIG1ldGhvZCBiZWxvdy4pXHJcbiogVGhlIHVzZSBvZiB0aGUgc291cmNlIGNvZGUgb2YgdGhpcyBmaWxlIGlzIGFsc28gc3ViamVjdCB0byB0aGUgdGVybXNcclxuKiBhbmQgY29uc2l0aW9ucyBvZiB0aGUgbGljZW5zZSBvZiBcImQzLmpzXCIgKEJTRC0zQ2xhdXNlLCBzZWVcclxuKiA8L2xpY2Vuc2VzL0xJQ0VOU0UtZDM+KS5cclxuKi9cbmltcG9ydCAqIGFzIHpyVXRpbCBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xudmFyIFJBRElBTl9FUFNJTE9OID0gMWUtNDsgLy8gQWx0aG91Z2ggY2hyb21lIGFscmVhZHkgZW5sYXJnZSB0aGlzIG51bWJlciB0byAxMDAgZm9yIGB0b0ZpeGVkYCwgYnV0XG4vLyB3ZSBzaWxsIGZvbGxvdyB0aGUgc3BlYyBmb3IgY29tcGF0aWJpbGl0eS5cblxudmFyIFJPVU5EX1NVUFBPUlRFRF9QUkVDSVNJT05fTUFYID0gMjA7XG5cbmZ1bmN0aW9uIF90cmltKHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKTtcbn1cbi8qKlxyXG4gKiBMaW5lYXIgbWFwcGluZyBhIHZhbHVlIGZyb20gZG9tYWluIHRvIHJhbmdlXHJcbiAqIEBwYXJhbSAgdmFsXHJcbiAqIEBwYXJhbSAgZG9tYWluIERvbWFpbiBleHRlbnQgZG9tYWluWzBdIGNhbiBiZSBiaWdnZXIgdGhhbiBkb21haW5bMV1cclxuICogQHBhcmFtICByYW5nZSAgUmFuZ2UgZXh0ZW50IHJhbmdlWzBdIGNhbiBiZSBiaWdnZXIgdGhhbiByYW5nZVsxXVxyXG4gKiBAcGFyYW0gIGNsYW1wIERlZmF1bHQgdG8gYmUgZmFsc2VcclxuICovXG5cblxuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhck1hcCh2YWwsIGRvbWFpbiwgcmFuZ2UsIGNsYW1wKSB7XG4gIHZhciBkMCA9IGRvbWFpblswXTtcbiAgdmFyIGQxID0gZG9tYWluWzFdO1xuICB2YXIgcjAgPSByYW5nZVswXTtcbiAgdmFyIHIxID0gcmFuZ2VbMV07XG4gIHZhciBzdWJEb21haW4gPSBkMSAtIGQwO1xuICB2YXIgc3ViUmFuZ2UgPSByMSAtIHIwO1xuXG4gIGlmIChzdWJEb21haW4gPT09IDApIHtcbiAgICByZXR1cm4gc3ViUmFuZ2UgPT09IDAgPyByMCA6IChyMCArIHIxKSAvIDI7XG4gIH0gLy8gQXZvaWQgYWNjdXJhY3kgcHJvYmxlbSBpbiBlZGdlLCBzdWNoIGFzXG4gIC8vIDE0Ni4zOSAtIDYyLjgzID09PSA4My41NTk5OTk5OTk5OTk5OS5cbiAgLy8gU2VlIGVjaGFydHMvdGVzdC91dC9zcGVjL3V0aWwvbnVtYmVyLmpzI2xpbmVhck1hcCNhY2N1cmFjeUVycm9yXG4gIC8vIEl0IGlzIGEgbGl0dGxlIHZlcmJvc2UgZm9yIGVmZmljaWVuY3kgY29uc2lkZXJpbmcgdGhpcyBtZXRob2RcbiAgLy8gaXMgYSBob3RzcG90LlxuXG5cbiAgaWYgKGNsYW1wKSB7XG4gICAgaWYgKHN1YkRvbWFpbiA+IDApIHtcbiAgICAgIGlmICh2YWwgPD0gZDApIHtcbiAgICAgICAgcmV0dXJuIHIwO1xuICAgICAgfSBlbHNlIGlmICh2YWwgPj0gZDEpIHtcbiAgICAgICAgcmV0dXJuIHIxO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodmFsID49IGQwKSB7XG4gICAgICAgIHJldHVybiByMDtcbiAgICAgIH0gZWxzZSBpZiAodmFsIDw9IGQxKSB7XG4gICAgICAgIHJldHVybiByMTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKHZhbCA9PT0gZDApIHtcbiAgICAgIHJldHVybiByMDtcbiAgICB9XG5cbiAgICBpZiAodmFsID09PSBkMSkge1xuICAgICAgcmV0dXJuIHIxO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAodmFsIC0gZDApIC8gc3ViRG9tYWluICogc3ViUmFuZ2UgKyByMDtcbn1cbi8qKlxyXG4gKiBDb252ZXJ0IGEgcGVyY2VudCBzdHJpbmcgdG8gYWJzb2x1dGUgbnVtYmVyLlxyXG4gKiBSZXR1cm5zIE5hTiBpZiBwZXJjZW50IGlzIG5vdCBhIHZhbGlkIHN0cmluZyBvciBudW1iZXJcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVBlcmNlbnQocGVyY2VudCwgYWxsKSB7XG4gIHN3aXRjaCAocGVyY2VudCkge1xuICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgY2FzZSAnbWlkZGxlJzpcbiAgICAgIHBlcmNlbnQgPSAnNTAlJztcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnbGVmdCc6XG4gICAgY2FzZSAndG9wJzpcbiAgICAgIHBlcmNlbnQgPSAnMCUnO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdyaWdodCc6XG4gICAgY2FzZSAnYm90dG9tJzpcbiAgICAgIHBlcmNlbnQgPSAnMTAwJSc7XG4gICAgICBicmVhaztcbiAgfVxuXG4gIGlmICh6clV0aWwuaXNTdHJpbmcocGVyY2VudCkpIHtcbiAgICBpZiAoX3RyaW0ocGVyY2VudCkubWF0Y2goLyUkLykpIHtcbiAgICAgIHJldHVybiBwYXJzZUZsb2F0KHBlcmNlbnQpIC8gMTAwICogYWxsO1xuICAgIH1cblxuICAgIHJldHVybiBwYXJzZUZsb2F0KHBlcmNlbnQpO1xuICB9XG5cbiAgcmV0dXJuIHBlcmNlbnQgPT0gbnVsbCA/IE5hTiA6ICtwZXJjZW50O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJvdW5kKHgsIHByZWNpc2lvbiwgcmV0dXJuU3RyKSB7XG4gIGlmIChwcmVjaXNpb24gPT0gbnVsbCkge1xuICAgIHByZWNpc2lvbiA9IDEwO1xuICB9IC8vIEF2b2lkIHJhbmdlIGVycm9yXG5cblxuICBwcmVjaXNpb24gPSBNYXRoLm1pbihNYXRoLm1heCgwLCBwcmVjaXNpb24pLCBST1VORF9TVVBQT1JURURfUFJFQ0lTSU9OX01BWCk7IC8vIFBFTkRJTkc6IDEuMDA1LnRvRml4ZWQoMikgaXMgJzEuMDAnIHJhdGhlciB0aGFuICcxLjAxJ1xuXG4gIHggPSAoK3gpLnRvRml4ZWQocHJlY2lzaW9uKTtcbiAgcmV0dXJuIHJldHVyblN0ciA/IHggOiAreDtcbn1cbi8qKlxyXG4gKiBJbnBsYWNkIGFzYyBzb3J0IGFyci5cclxuICogVGhlIGlucHV0IGFyciB3aWxsIGJlIG1vZGlmaWVkLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGFzYyhhcnIpIHtcbiAgYXJyLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gYSAtIGI7XG4gIH0pO1xuICByZXR1cm4gYXJyO1xufVxuLyoqXHJcbiAqIEdldCBwcmVjaXNpb24uXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJlY2lzaW9uKHZhbCkge1xuICB2YWwgPSArdmFsO1xuXG4gIGlmIChpc05hTih2YWwpKSB7XG4gICAgcmV0dXJuIDA7XG4gIH0gLy8gSXQgaXMgbXVjaCBmYXN0ZXIgdGhhbiBtZXRob2RzIGNvbnZlcnRpbmcgbnVtYmVyIHRvIHN0cmluZyBhcyBmb2xsb3dzXG4gIC8vICAgICAgbGV0IHRtcCA9IHZhbC50b1N0cmluZygpO1xuICAvLyAgICAgIHJldHVybiB0bXAubGVuZ3RoIC0gMSAtIHRtcC5pbmRleE9mKCcuJyk7XG4gIC8vIGVzcGVjaWFsbHkgd2hlbiBwcmVjaXNpb24gaXMgbG93XG4gIC8vIE5vdGljZTpcbiAgLy8gKDEpIElmIHRoZSBsb29wIGNvdW50IGlzIG92ZXIgYWJvdXQgMjAsIGl0IGlzIHNsb3dlciB0aGFuIGBnZXRQcmVjaXNpb25TYWZlYC5cbiAgLy8gICAgIChzZWUgaHR0cHM6Ly9qc2JlbmNoLm1lLzJ2a3BjZWtrdncvMSlcbiAgLy8gKDIpIElmIHRoZSB2YWwgaXMgbGVzcyB0aGFuIGZvciBleGFtcGxlIDFlLTE1LCB0aGUgcmVzdWx0IG1heSBiZSBpbmNvcnJlY3QuXG4gIC8vICAgICAoc2VlIHRlc3QvdXQvc3BlYy91dGlsL251bWJlci50ZXN0LnRzIGBnZXRQcmVjaXNpb25fZXF1YWxfcmFuZG9tYClcblxuXG4gIGlmICh2YWwgPiAxZS0xNCkge1xuICAgIHZhciBlID0gMTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTU7IGkrKywgZSAqPSAxMCkge1xuICAgICAgaWYgKE1hdGgucm91bmQodmFsICogZSkgLyBlID09PSB2YWwpIHtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGdldFByZWNpc2lvblNhZmUodmFsKTtcbn1cbi8qKlxyXG4gKiBHZXQgcHJlY2lzaW9uIHdpdGggc2xvdyBidXQgc2FmZSBtZXRob2RcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcmVjaXNpb25TYWZlKHZhbCkge1xuICAvLyB0b0xvd2VyQ2FzZSBmb3I6ICczLjRFLTEyJ1xuICB2YXIgc3RyID0gdmFsLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKTsgLy8gQ29uc2lkZXIgc2NpZW50aWZpYyBub3RhdGlvbjogJzMuNGUtMTInICczLjRlKzEyJ1xuXG4gIHZhciBlSW5kZXggPSBzdHIuaW5kZXhPZignZScpO1xuICB2YXIgZXhwID0gZUluZGV4ID4gMCA/ICtzdHIuc2xpY2UoZUluZGV4ICsgMSkgOiAwO1xuICB2YXIgc2lnbmlmaWNhbmRQYXJ0TGVuID0gZUluZGV4ID4gMCA/IGVJbmRleCA6IHN0ci5sZW5ndGg7XG4gIHZhciBkb3RJbmRleCA9IHN0ci5pbmRleE9mKCcuJyk7XG4gIHZhciBkZWNpbWFsUGFydExlbiA9IGRvdEluZGV4IDwgMCA/IDAgOiBzaWduaWZpY2FuZFBhcnRMZW4gLSAxIC0gZG90SW5kZXg7XG4gIHJldHVybiBNYXRoLm1heCgwLCBkZWNpbWFsUGFydExlbiAtIGV4cCk7XG59XG4vKipcclxuICogTWluaW1hbCBkaWNlcm5pYmxlIGRhdGEgcHJlY2lzaW9pbiBhY2NvcmRpbmcgdG8gYSBzaW5nbGUgcGl4ZWwuXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGl4ZWxQcmVjaXNpb24oZGF0YUV4dGVudCwgcGl4ZWxFeHRlbnQpIHtcbiAgdmFyIGxvZyA9IE1hdGgubG9nO1xuICB2YXIgTE4xMCA9IE1hdGguTE4xMDtcbiAgdmFyIGRhdGFRdWFudGl0eSA9IE1hdGguZmxvb3IobG9nKGRhdGFFeHRlbnRbMV0gLSBkYXRhRXh0ZW50WzBdKSAvIExOMTApO1xuICB2YXIgc2l6ZVF1YW50aXR5ID0gTWF0aC5yb3VuZChsb2coTWF0aC5hYnMocGl4ZWxFeHRlbnRbMV0gLSBwaXhlbEV4dGVudFswXSkpIC8gTE4xMCk7IC8vIHRvRml4ZWQoKSBkaWdpdHMgYXJndW1lbnQgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDIwLlxuXG4gIHZhciBwcmVjaXNpb24gPSBNYXRoLm1pbihNYXRoLm1heCgtZGF0YVF1YW50aXR5ICsgc2l6ZVF1YW50aXR5LCAwKSwgMjApO1xuICByZXR1cm4gIWlzRmluaXRlKHByZWNpc2lvbikgPyAyMCA6IHByZWNpc2lvbjtcbn1cbi8qKlxyXG4gKiBHZXQgYSBkYXRhIG9mIGdpdmVuIHByZWNpc2lvbiwgYXNzdXJpbmcgdGhlIHN1bSBvZiBwZXJjZW50YWdlc1xyXG4gKiBpbiB2YWx1ZUxpc3QgaXMgMS5cclxuICogVGhlIGxhcmdlc3QgcmVtYWluZGVyIG1ldGhvZCBpcyB1c2VkLlxyXG4gKiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MYXJnZXN0X3JlbWFpbmRlcl9tZXRob2RcclxuICpcclxuICogQHBhcmFtIHZhbHVlTGlzdCBhIGxpc3Qgb2YgYWxsIGRhdGFcclxuICogQHBhcmFtIGlkeCBpbmRleCBvZiB0aGUgZGF0YSB0byBiZSBwcm9jZXNzZWQgaW4gdmFsdWVMaXN0XHJcbiAqIEBwYXJhbSBwcmVjaXNpb24gaW50ZWdlciBudW1iZXIgc2hvd2luZyBkaWdpdHMgb2YgcHJlY2lzaW9uXHJcbiAqIEByZXR1cm4gcGVyY2VudCByYW5naW5nIGZyb20gMCB0byAxMDBcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQZXJjZW50V2l0aFByZWNpc2lvbih2YWx1ZUxpc3QsIGlkeCwgcHJlY2lzaW9uKSB7XG4gIGlmICghdmFsdWVMaXN0W2lkeF0pIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHZhciBzZWF0cyA9IGdldFBlcmNlbnRTZWF0cyh2YWx1ZUxpc3QsIHByZWNpc2lvbik7XG4gIHJldHVybiBzZWF0c1tpZHhdIHx8IDA7XG59XG4vKipcclxuICogR2V0IGEgZGF0YSBvZiBnaXZlbiBwcmVjaXNpb24sIGFzc3VyaW5nIHRoZSBzdW0gb2YgcGVyY2VudGFnZXNcclxuICogaW4gdmFsdWVMaXN0IGlzIDEuXHJcbiAqIFRoZSBsYXJnZXN0IHJlbWFpbmRlciBtZXRob2QgaXMgdXNlZC5cclxuICogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGFyZ2VzdF9yZW1haW5kZXJfbWV0aG9kXHJcbiAqXHJcbiAqIEBwYXJhbSB2YWx1ZUxpc3QgYSBsaXN0IG9mIGFsbCBkYXRhXHJcbiAqIEBwYXJhbSBwcmVjaXNpb24gaW50ZWdlciBudW1iZXIgc2hvd2luZyBkaWdpdHMgb2YgcHJlY2lzaW9uXHJcbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGVyY2VudFNlYXRzKHZhbHVlTGlzdCwgcHJlY2lzaW9uKSB7XG4gIHZhciBzdW0gPSB6clV0aWwucmVkdWNlKHZhbHVlTGlzdCwgZnVuY3Rpb24gKGFjYywgdmFsKSB7XG4gICAgcmV0dXJuIGFjYyArIChpc05hTih2YWwpID8gMCA6IHZhbCk7XG4gIH0sIDApO1xuXG4gIGlmIChzdW0gPT09IDApIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICB2YXIgZGlnaXRzID0gTWF0aC5wb3coMTAsIHByZWNpc2lvbik7XG4gIHZhciB2b3Rlc1BlclF1b3RhID0genJVdGlsLm1hcCh2YWx1ZUxpc3QsIGZ1bmN0aW9uICh2YWwpIHtcbiAgICByZXR1cm4gKGlzTmFOKHZhbCkgPyAwIDogdmFsKSAvIHN1bSAqIGRpZ2l0cyAqIDEwMDtcbiAgfSk7XG4gIHZhciB0YXJnZXRTZWF0cyA9IGRpZ2l0cyAqIDEwMDtcbiAgdmFyIHNlYXRzID0genJVdGlsLm1hcCh2b3Rlc1BlclF1b3RhLCBmdW5jdGlvbiAodm90ZXMpIHtcbiAgICAvLyBBc3NpZ24gYXV0b21hdGljIHNlYXRzLlxuICAgIHJldHVybiBNYXRoLmZsb29yKHZvdGVzKTtcbiAgfSk7XG4gIHZhciBjdXJyZW50U3VtID0genJVdGlsLnJlZHVjZShzZWF0cywgZnVuY3Rpb24gKGFjYywgdmFsKSB7XG4gICAgcmV0dXJuIGFjYyArIHZhbDtcbiAgfSwgMCk7XG4gIHZhciByZW1haW5kZXIgPSB6clV0aWwubWFwKHZvdGVzUGVyUXVvdGEsIGZ1bmN0aW9uICh2b3RlcywgaWR4KSB7XG4gICAgcmV0dXJuIHZvdGVzIC0gc2VhdHNbaWR4XTtcbiAgfSk7IC8vIEhhcyByZW1haW5kaW5nIHZvdGVzLlxuXG4gIHdoaWxlIChjdXJyZW50U3VtIDwgdGFyZ2V0U2VhdHMpIHtcbiAgICAvLyBGaW5kIG5leHQgbGFyZ2VzdCByZW1haW5kZXIuXG4gICAgdmFyIG1heCA9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWTtcbiAgICB2YXIgbWF4SWQgPSBudWxsO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJlbWFpbmRlci5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgICAgaWYgKHJlbWFpbmRlcltpXSA+IG1heCkge1xuICAgICAgICBtYXggPSByZW1haW5kZXJbaV07XG4gICAgICAgIG1heElkID0gaTtcbiAgICAgIH1cbiAgICB9IC8vIEFkZCBhIHZvdGUgdG8gbWF4IHJlbWFpbmRlci5cblxuXG4gICAgKytzZWF0c1ttYXhJZF07XG4gICAgcmVtYWluZGVyW21heElkXSA9IDA7XG4gICAgKytjdXJyZW50U3VtO1xuICB9XG5cbiAgcmV0dXJuIHpyVXRpbC5tYXAoc2VhdHMsIGZ1bmN0aW9uIChzZWF0KSB7XG4gICAgcmV0dXJuIHNlYXQgLyBkaWdpdHM7XG4gIH0pO1xufVxuLyoqXHJcbiAqIFNvbHZlIHRoZSBmbG9hdGluZyBwb2ludCBhZGRpbmcgcHJvYmxlbSBsaWtlIDAuMSArIDAuMiA9PT0gMC4zMDAwMDAwMDAwMDAwMDAwNFxyXG4gKiBTZWUgPGh0dHA6Ly8wLjMwMDAwMDAwMDAwMDAwMDA0LmNvbS8+XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkU2FmZSh2YWwwLCB2YWwxKSB7XG4gIHZhciBtYXhQcmVjaXNpb24gPSBNYXRoLm1heChnZXRQcmVjaXNpb24odmFsMCksIGdldFByZWNpc2lvbih2YWwxKSk7IC8vIGNvbnN0IG11bHRpcGxpZXIgPSBNYXRoLnBvdygxMCwgbWF4UHJlY2lzaW9uKTtcbiAgLy8gcmV0dXJuIChNYXRoLnJvdW5kKHZhbDAgKiBtdWx0aXBsaWVyKSArIE1hdGgucm91bmQodmFsMSAqIG11bHRpcGxpZXIpKSAvIG11bHRpcGxpZXI7XG5cbiAgdmFyIHN1bSA9IHZhbDAgKyB2YWwxOyAvLyAvLyBQRU5ESU5HOiBzdXBwb3J0IG1vcmU/XG5cbiAgcmV0dXJuIG1heFByZWNpc2lvbiA+IFJPVU5EX1NVUFBPUlRFRF9QUkVDSVNJT05fTUFYID8gc3VtIDogcm91bmQoc3VtLCBtYXhQcmVjaXNpb24pO1xufSAvLyBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiwgaWUgZG8gbm90IHN1cHBvcnQuXG5cbmV4cG9ydCB2YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG4vKipcclxuICogVG8gMCAtIDIgKiBQSSwgY29uc2lkZXJpbmcgbmVnYXRpdmUgcmFkaWFuLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbVJhZGlhbihyYWRpYW4pIHtcbiAgdmFyIHBpMiA9IE1hdGguUEkgKiAyO1xuICByZXR1cm4gKHJhZGlhbiAlIHBpMiArIHBpMikgJSBwaTI7XG59XG4vKipcclxuICogQHBhcmFtIHt0eXBlfSByYWRpYW5cclxuICogQHJldHVybiB7Ym9vbGVhbn1cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpc1JhZGlhbkFyb3VuZFplcm8odmFsKSB7XG4gIHJldHVybiB2YWwgPiAtUkFESUFOX0VQU0lMT04gJiYgdmFsIDwgUkFESUFOX0VQU0lMT047XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuXG52YXIgVElNRV9SRUcgPSAvXig/OihcXGR7NH0pKD86Wy1cXC9dKFxcZHsxLDJ9KSg/OlstXFwvXShcXGR7MSwyfSkoPzpbVCBdKFxcZHsxLDJ9KSg/OjooXFxkezEsMn0pKD86OihcXGR7MSwyfSkoPzpbLixdKFxcZCspKT8pPyk/KFp8W1xcK1xcLV1cXGRcXGQ6P1xcZFxcZCk/KT8pPyk/KT8kLzsgLy8ganNoaW50IGlnbm9yZTpsaW5lXG5cbi8qKlxyXG4gKiBAcGFyYW0gdmFsdWUgdmFsaWQgdHlwZTogbnVtYmVyIHwgc3RyaW5nIHwgRGF0ZSwgb3RoZXJ3aXNlIHJldHVybiBgbmV3IERhdGUoTmFOKWBcclxuICogICBUaGVzZSB2YWx1ZXMgY2FuIGJlIGFjY2VwdGVkOlxyXG4gKiAgICsgQW4gaW5zdGFuY2Ugb2YgRGF0ZSwgcmVwcmVzZW50IGEgdGltZSBpbiBpdHMgb3duIHRpbWUgem9uZS5cclxuICogICArIE9yIHN0cmluZyBpbiBhIHN1YnNldCBvZiBJU08gODYwMSwgb25seSBpbmNsdWRpbmc6XHJcbiAqICAgICArIG9ubHkgeWVhciwgbW9udGgsIGRhdGU6ICcyMDEyLTAzJywgJzIwMTItMDMtMDEnLCAnMjAxMi0wMy0wMSAwNScsICcyMDEyLTAzLTAxIDA1OjA2JyxcclxuICogICAgICsgc2VwYXJhdGVkIHdpdGggVCBvciBzcGFjZTogJzIwMTItMDMtMDFUMTI6MjI6MzMuMTIzJywgJzIwMTItMDMtMDEgMTI6MjI6MzMuMTIzJyxcclxuICogICAgICsgdGltZSB6b25lOiAnMjAxMi0wMy0wMVQxMjoyMjozM1onLCAnMjAxMi0wMy0wMVQxMjoyMjozMys4MDAwJywgJzIwMTItMDMtMDFUMTI6MjI6MzMtMDU6MDAnLFxyXG4gKiAgICAgYWxsIG9mIHdoaWNoIHdpbGwgYmUgdHJlYXRlZCBhcyBsb2NhbCB0aW1lIGlmIHRpbWUgem9uZSBpcyBub3Qgc3BlY2lmaWVkXHJcbiAqICAgICAoc2VlIDxodHRwczovL21vbWVudGpzLmNvbS8+KS5cclxuICogICArIE9yIG90aGVyIHN0cmluZyBmb3JtYXQsIGluY2x1ZGluZyAoYWxsIG9mIHdoaWNoIHdpbGwgYmUgdHJlYXRlZCBhcyBsb2NhbCB0aW1lKTpcclxuICogICAgICcyMDEyJywgJzIwMTItMy0xJywgJzIwMTIvMy8xJywgJzIwMTIvMDMvMDEnLFxyXG4gKiAgICAgJzIwMDkvNi8xMiAyOjAwJywgJzIwMDkvNi8xMiAyOjA1OjA4JywgJzIwMDkvNi8xMiAyOjA1OjA4LjEyMydcclxuICogICArIGEgdGltZXN0YW1wLCB3aGljaCByZXByZXNlbnQgYSB0aW1lIGluIFVUQy5cclxuICogQHJldHVybiBkYXRlIE5ldmVyIGJlIG51bGwvdW5kZWZpbmVkLiBJZiBpbnZhbGlkLCByZXR1cm4gYG5ldyBEYXRlKE5hTilgLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRGF0ZSh2YWx1ZSkge1xuICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9IGVsc2UgaWYgKHpyVXRpbC5pc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAvLyBEaWZmZXJlbnQgYnJvd3NlcnMgcGFyc2UgZGF0ZSBpbiBkaWZmZXJlbnQgd2F5LCBzbyB3ZSBwYXJzZSBpdCBtYW51YWxseS5cbiAgICAvLyBTb21lIG90aGVyIGlzc3VlczpcbiAgICAvLyBuZXcgRGF0ZSgnMTk3MC0wMS0wMScpIGlzIFVUQyxcbiAgICAvLyBuZXcgRGF0ZSgnMTk3MC8wMS8wMScpIGFuZCBuZXcgRGF0ZSgnMTk3MC0xLTAxJykgaXMgbG9jYWwuXG4gICAgLy8gU2VlIGlzc3VlICMzNjIzXG4gICAgdmFyIG1hdGNoID0gVElNRV9SRUcuZXhlYyh2YWx1ZSk7XG5cbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAvLyByZXR1cm4gSW52YWxpZCBEYXRlLlxuICAgICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gICAgfSAvLyBVc2UgbG9jYWwgdGltZSB3aGVuIG5vIHRpbWV6b25lIG9mZnNldCBpcyBzcGVjaWZpZWQuXG5cblxuICAgIGlmICghbWF0Y2hbOF0pIHtcbiAgICAgIC8vIG1hdGNoW25dIGNhbiBvbmx5IGJlIHN0cmluZyBvciB1bmRlZmluZWQuXG4gICAgICAvLyBCdXQgdGFrZSBjYXJlIG9mICcxMicgKyAxID0+ICcxMjEnLlxuICAgICAgcmV0dXJuIG5ldyBEYXRlKCttYXRjaFsxXSwgKyhtYXRjaFsyXSB8fCAxKSAtIDEsICttYXRjaFszXSB8fCAxLCArbWF0Y2hbNF0gfHwgMCwgKyhtYXRjaFs1XSB8fCAwKSwgK21hdGNoWzZdIHx8IDAsIG1hdGNoWzddID8gK21hdGNoWzddLnN1YnN0cmluZygwLCAzKSA6IDApO1xuICAgIH0gLy8gVGltZXpvbmVvZmZzZXQgb2YgSmF2YXNjcmlwdCBEYXRlIGhhcyBjb25zaWRlcmVkIERTVCAoRGF5bGlnaHQgU2F2aW5nIFRpbWUsXG4gICAgLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtZGF5bGlnaHQtc2F2aW5nLXRpbWUtYWRqdXN0bWVudCkuXG4gICAgLy8gRm9yIGV4YW1wbGUsIHN5c3RlbSB0aW1lem9uZSBpcyBzZXQgYXMgXCJUaW1lIFpvbmU6IEFtZXJpY2EvVG9yb250b1wiLFxuICAgIC8vIHRoZW4gdGhlc2UgY29kZSB3aWxsIGdldCBkaWZmZXJlbnQgcmVzdWx0OlxuICAgIC8vIGBuZXcgRGF0ZSgxNDc4NDExOTk5OTk5KS5nZXRUaW1lem9uZU9mZnNldCgpOyAgLy8gZ2V0IDI0MGBcbiAgICAvLyBgbmV3IERhdGUoMTQ3ODQxMjAwMDAwMCkuZ2V0VGltZXpvbmVPZmZzZXQoKTsgIC8vIGdldCAzMDBgXG4gICAgLy8gU28gd2Ugc2hvdWxkIG5vdCB1c2UgYG5ldyBEYXRlYCwgYnV0IHVzZSBgRGF0ZS5VVENgLlxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgaG91ciA9ICttYXRjaFs0XSB8fCAwO1xuXG4gICAgICAgIGlmIChtYXRjaFs4XS50b1VwcGVyQ2FzZSgpICE9PSAnWicpIHtcbiAgICAgICAgICBob3VyIC09ICttYXRjaFs4XS5zbGljZSgwLCAzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShEYXRlLlVUQygrbWF0Y2hbMV0sICsobWF0Y2hbMl0gfHwgMSkgLSAxLCArbWF0Y2hbM10gfHwgMSwgaG91ciwgKyhtYXRjaFs1XSB8fCAwKSwgK21hdGNoWzZdIHx8IDAsIG1hdGNoWzddID8gK21hdGNoWzddLnN1YnN0cmluZygwLCAzKSA6IDApKTtcbiAgICAgIH1cbiAgfSBlbHNlIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIH1cblxuICByZXR1cm4gbmV3IERhdGUoTWF0aC5yb3VuZCh2YWx1ZSkpO1xufVxuLyoqXHJcbiAqIFF1YW50aXR5IG9mIGEgbnVtYmVyLiBlLmcuIDAuMSwgMSwgMTAsIDEwMFxyXG4gKlxyXG4gKiBAcGFyYW0gdmFsXHJcbiAqIEByZXR1cm5cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBxdWFudGl0eSh2YWwpIHtcbiAgcmV0dXJuIE1hdGgucG93KDEwLCBxdWFudGl0eUV4cG9uZW50KHZhbCkpO1xufVxuLyoqXHJcbiAqIEV4cG9uZW50IG9mIHRoZSBxdWFudGl0eSBvZiBhIG51bWJlclxyXG4gKiBlLmcuLCAxMjM0IGVxdWFscyB0byAxLjIzNCoxMF4zLCBzbyBxdWFudGl0eUV4cG9uZW50KDEyMzQpIGlzIDNcclxuICpcclxuICogQHBhcmFtIHZhbCBub24tbmVnYXRpdmUgdmFsdWVcclxuICogQHJldHVyblxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHF1YW50aXR5RXhwb25lbnQodmFsKSB7XG4gIGlmICh2YWwgPT09IDApIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHZhciBleHAgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbCkgLyBNYXRoLkxOMTApO1xuICAvKipcclxuICAgKiBleHAgaXMgZXhwZWN0ZWQgdG8gYmUgdGhlIHJvdW5kZWQtZG93biByZXN1bHQgb2YgdGhlIGJhc2UtMTAgbG9nIG9mIHZhbC5cclxuICAgKiBCdXQgZHVlIHRvIHRoZSBwcmVjaXNpb24gbG9zcyB3aXRoIE1hdGgubG9nKHZhbCksIHdlIG5lZWQgdG8gcmVzdG9yZSBpdFxyXG4gICAqIHVzaW5nIDEwXmV4cCB0byBtYWtlIHN1cmUgd2UgY2FuIGdldCB2YWwgYmFjayBmcm9tIGV4cC4gIzExMjQ5XHJcbiAgICovXG5cbiAgaWYgKHZhbCAvIE1hdGgucG93KDEwLCBleHApID49IDEwKSB7XG4gICAgZXhwKys7XG4gIH1cblxuICByZXR1cm4gZXhwO1xufVxuLyoqXHJcbiAqIGZpbmQgYSDigJxuaWNl4oCdIG51bWJlciBhcHByb3hpbWF0ZWx5IGVxdWFsIHRvIHguIFJvdW5kIHRoZSBudW1iZXIgaWYgcm91bmQgPSB0cnVlLFxyXG4gKiB0YWtlIGNlaWxpbmcgaWYgcm91bmQgPSBmYWxzZS4gVGhlIHByaW1hcnkgb2JzZXJ2YXRpb24gaXMgdGhhdCB0aGUg4oCcbmljZXN04oCdXHJcbiAqIG51bWJlcnMgaW4gZGVjaW1hbCBhcmUgMSwgMiwgYW5kIDUsIGFuZCBhbGwgcG93ZXItb2YtdGVuIG11bHRpcGxlcyBvZiB0aGVzZSBudW1iZXJzLlxyXG4gKlxyXG4gKiBTZWUgXCJOaWNlIE51bWJlcnMgZm9yIEdyYXBoIExhYmVsc1wiIG9mIEdyYXBoaWMgR2Vtcy5cclxuICpcclxuICogQHBhcmFtICB2YWwgTm9uLW5lZ2F0aXZlIHZhbHVlLlxyXG4gKiBAcGFyYW0gIHJvdW5kXHJcbiAqIEByZXR1cm4gTmljZWQgbnVtYmVyXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbmljZSh2YWwsIHJvdW5kKSB7XG4gIHZhciBleHBvbmVudCA9IHF1YW50aXR5RXhwb25lbnQodmFsKTtcbiAgdmFyIGV4cDEwID0gTWF0aC5wb3coMTAsIGV4cG9uZW50KTtcbiAgdmFyIGYgPSB2YWwgLyBleHAxMDsgLy8gMSA8PSBmIDwgMTBcblxuICB2YXIgbmY7XG5cbiAgaWYgKHJvdW5kKSB7XG4gICAgaWYgKGYgPCAxLjUpIHtcbiAgICAgIG5mID0gMTtcbiAgICB9IGVsc2UgaWYgKGYgPCAyLjUpIHtcbiAgICAgIG5mID0gMjtcbiAgICB9IGVsc2UgaWYgKGYgPCA0KSB7XG4gICAgICBuZiA9IDM7XG4gICAgfSBlbHNlIGlmIChmIDwgNykge1xuICAgICAgbmYgPSA1O1xuICAgIH0gZWxzZSB7XG4gICAgICBuZiA9IDEwO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoZiA8IDEpIHtcbiAgICAgIG5mID0gMTtcbiAgICB9IGVsc2UgaWYgKGYgPCAyKSB7XG4gICAgICBuZiA9IDI7XG4gICAgfSBlbHNlIGlmIChmIDwgMykge1xuICAgICAgbmYgPSAzO1xuICAgIH0gZWxzZSBpZiAoZiA8IDUpIHtcbiAgICAgIG5mID0gNTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmYgPSAxMDtcbiAgICB9XG4gIH1cblxuICB2YWwgPSBuZiAqIGV4cDEwOyAvLyBGaXggMyAqIDAuMSA9PT0gMC4zMDAwMDAwMDAwMDAwMDAwNCBpc3N1ZSAoc2VlIElFRUUgNzU0KS5cbiAgLy8gMjAgaXMgdGhlIHVwcHBlciBib3VuZCBvZiB0b0ZpeGVkLlxuXG4gIHJldHVybiBleHBvbmVudCA+PSAtMjAgPyArdmFsLnRvRml4ZWQoZXhwb25lbnQgPCAwID8gLWV4cG9uZW50IDogMCkgOiB2YWw7XG59XG4vKipcclxuICogVGhpcyBjb2RlIHdhcyBjb3BpZWQgZnJvbSBcImQzLmpzXCJcclxuICogPGh0dHBzOi8vZ2l0aHViLmNvbS9kMy9kMy9ibG9iLzljYzlhODc1ZTYzNmExZGNmMzZjYzFlMDdiZGY3N2UxYWQ2ZTJjNzQvc3JjL2FycmF5cy9xdWFudGlsZS5qcz4uXHJcbiAqIFNlZSB0aGUgbGljZW5zZSBzdGF0ZW1lbnQgYXQgdGhlIGhlYWQgb2YgdGhpcyBmaWxlLlxyXG4gKiBAcGFyYW0gYXNjQXJyXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcXVhbnRpbGUoYXNjQXJyLCBwKSB7XG4gIHZhciBIID0gKGFzY0Fyci5sZW5ndGggLSAxKSAqIHAgKyAxO1xuICB2YXIgaCA9IE1hdGguZmxvb3IoSCk7XG4gIHZhciB2ID0gK2FzY0FycltoIC0gMV07XG4gIHZhciBlID0gSCAtIGg7XG4gIHJldHVybiBlID8gdiArIGUgKiAoYXNjQXJyW2hdIC0gdikgOiB2O1xufVxuLyoqXHJcbiAqIE9yZGVyIGludGVydmFscyBhc2MsIGFuZCBzcGxpdCB0aGVtIHdoZW4gb3ZlcmxhcC5cclxuICogZXhwZWN0KG51bWJlclV0aWwucmVmb3JtSW50ZXJ2YWxzKFtcclxuICogICAgIHtpbnRlcnZhbDogWzE4LCA2Ml0sIGNsb3NlOiBbMSwgMV19LFxyXG4gKiAgICAge2ludGVydmFsOiBbLUluZmluaXR5LCAtNzBdLCBjbG9zZTogWzAsIDBdfSxcclxuICogICAgIHtpbnRlcnZhbDogWy03MCwgLTI2XSwgY2xvc2U6IFsxLCAxXX0sXHJcbiAqICAgICB7aW50ZXJ2YWw6IFstMjYsIDE4XSwgY2xvc2U6IFsxLCAxXX0sXHJcbiAqICAgICB7aW50ZXJ2YWw6IFs2MiwgMTUwXSwgY2xvc2U6IFsxLCAxXX0sXHJcbiAqICAgICB7aW50ZXJ2YWw6IFsxMDYsIDE1MF0sIGNsb3NlOiBbMSwgMV19LFxyXG4gKiAgICAge2ludGVydmFsOiBbMTUwLCBJbmZpbml0eV0sIGNsb3NlOiBbMCwgMF19XHJcbiAqIF0pKS50b0VxdWFsKFtcclxuICogICAgIHtpbnRlcnZhbDogWy1JbmZpbml0eSwgLTcwXSwgY2xvc2U6IFswLCAwXX0sXHJcbiAqICAgICB7aW50ZXJ2YWw6IFstNzAsIC0yNl0sIGNsb3NlOiBbMSwgMV19LFxyXG4gKiAgICAge2ludGVydmFsOiBbLTI2LCAxOF0sIGNsb3NlOiBbMCwgMV19LFxyXG4gKiAgICAge2ludGVydmFsOiBbMTgsIDYyXSwgY2xvc2U6IFswLCAxXX0sXHJcbiAqICAgICB7aW50ZXJ2YWw6IFs2MiwgMTUwXSwgY2xvc2U6IFswLCAxXX0sXHJcbiAqICAgICB7aW50ZXJ2YWw6IFsxNTAsIEluZmluaXR5XSwgY2xvc2U6IFswLCAwXX1cclxuICogXSk7XHJcbiAqIEBwYXJhbSBsaXN0LCB3aGVyZSBgY2xvc2VgIG1lYW4gb3BlbiBvciBjbG9zZVxyXG4gKiAgICAgICAgb2YgdGhlIGludGVydmFsLCBhbmQgSW5maW5pdHkgY2FuIGJlIHVzZWQuXHJcbiAqIEByZXR1cm4gVGhlIG9yaWdpbiBsaXN0LCB3aGljaCBoYXMgYmVlbiByZWZvcm1lZC5cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByZWZvcm1JbnRlcnZhbHMobGlzdCkge1xuICBsaXN0LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gbGl0dGxlVGhhbihhLCBiLCAwKSA/IC0xIDogMTtcbiAgfSk7XG4gIHZhciBjdXJyID0gLUluZmluaXR5O1xuICB2YXIgY3VyckNsb3NlID0gMTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOykge1xuICAgIHZhciBpbnRlcnZhbCA9IGxpc3RbaV0uaW50ZXJ2YWw7XG4gICAgdmFyIGNsb3NlXzEgPSBsaXN0W2ldLmNsb3NlO1xuXG4gICAgZm9yICh2YXIgbGcgPSAwOyBsZyA8IDI7IGxnKyspIHtcbiAgICAgIGlmIChpbnRlcnZhbFtsZ10gPD0gY3Vycikge1xuICAgICAgICBpbnRlcnZhbFtsZ10gPSBjdXJyO1xuICAgICAgICBjbG9zZV8xW2xnXSA9ICFsZyA/IDEgLSBjdXJyQ2xvc2UgOiAxO1xuICAgICAgfVxuXG4gICAgICBjdXJyID0gaW50ZXJ2YWxbbGddO1xuICAgICAgY3VyckNsb3NlID0gY2xvc2VfMVtsZ107XG4gICAgfVxuXG4gICAgaWYgKGludGVydmFsWzBdID09PSBpbnRlcnZhbFsxXSAmJiBjbG9zZV8xWzBdICogY2xvc2VfMVsxXSAhPT0gMSkge1xuICAgICAgbGlzdC5zcGxpY2UoaSwgMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGkrKztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbGlzdDtcblxuICBmdW5jdGlvbiBsaXR0bGVUaGFuKGEsIGIsIGxnKSB7XG4gICAgcmV0dXJuIGEuaW50ZXJ2YWxbbGddIDwgYi5pbnRlcnZhbFtsZ10gfHwgYS5pbnRlcnZhbFtsZ10gPT09IGIuaW50ZXJ2YWxbbGddICYmIChhLmNsb3NlW2xnXSAtIGIuY2xvc2VbbGddID09PSAoIWxnID8gMSA6IC0xKSB8fCAhbGcgJiYgbGl0dGxlVGhhbihhLCBiLCAxKSk7XG4gIH1cbn1cbi8qKlxyXG4gKiBbTnVtZXJpYyBpcyBkZWZpbmVkIGFzXTpcclxuICogICAgIGBwYXJzZUZsb2F0KHZhbCkgPT0gdmFsYFxyXG4gKiBGb3IgZXhhbXBsZTpcclxuICogbnVtZXJpYzpcclxuICogICAgIHR5cGVvZiBudW1iZXIgZXhjZXB0IE5hTiwgJy0xMjMnLCAnMTIzJywgJzJlMycsICctMmUzJywgJzAxMScsICdJbmZpbml0eScsIEluZmluaXR5LFxyXG4gKiAgICAgYW5kIHRoZXkgcm91bmRlZCBieSB3aGl0ZS1zcGFjZXMgb3IgbGluZS10ZXJtaW5hbCBsaWtlICcgLTEyMyBcXG4gJyAoc2VlIGVzIHNwZWMpXHJcbiAqIG5vdC1udW1lcmljOlxyXG4gKiAgICAgbnVsbCwgdW5kZWZpbmVkLCBbXSwge30sIHRydWUsIGZhbHNlLCAnTmFOJywgTmFOLCAnMTIzYWInLFxyXG4gKiAgICAgZW1wdHkgc3RyaW5nLCBzdHJpbmcgd2l0aCBvbmx5IHdoaXRlLXNwYWNlcyBvciBsaW5lLXRlcm1pbmFsIChzZWUgZXMgc3BlYyksXHJcbiAqICAgICAweDEyLCAnMHgxMicsICctMHgxMicsIDAxMiwgJzAxMicsICctMDEyJyxcclxuICogICAgIG5vbi1zdHJpbmcsIC4uLlxyXG4gKlxyXG4gKiBAdGVzdCBTZWUgZnVsbCB0ZXN0IGNhc2VzIGluIGB0ZXN0L3V0L3NwZWMvdXRpbC9udW1iZXIuanNgLlxyXG4gKiBAcmV0dXJuIE11c3QgYmUgYSB0eXBlb2YgbnVtYmVyLiBJZiBub3QgbnVtZXJpYywgcmV0dXJuIE5hTi5cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBudW1lcmljVG9OdW1iZXIodmFsKSB7XG4gIHZhciB2YWxGbG9hdCA9IHBhcnNlRmxvYXQodmFsKTtcbiAgcmV0dXJuIHZhbEZsb2F0ID09IHZhbCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGVxZXFlcVxuICAmJiAodmFsRmxvYXQgIT09IDAgfHwgIXpyVXRpbC5pc1N0cmluZyh2YWwpIHx8IHZhbC5pbmRleE9mKCd4JykgPD0gMCkgLy8gRm9yIGNhc2UgJyAweDAgJy5cbiAgPyB2YWxGbG9hdCA6IE5hTjtcbn1cbi8qKlxyXG4gKiBEZWZpbml0aW9uIG9mIFwibnVtZXJpY1wiOiBzZWUgYG51bWVyaWNUb051bWJlcmAuXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaXNOdW1lcmljKHZhbCkge1xuICByZXR1cm4gIWlzTmFOKG51bWVyaWNUb051bWJlcih2YWwpKTtcbn1cbi8qKlxyXG4gKiBVc2UgcmFuZG9tIGJhc2UgdG8gcHJldmVudCB1c2VycyBoYXJkIGNvZGUgZGVwZW5kaW5nIG9uXHJcbiAqIHRoaXMgYXV0byBnZW5lcmF0ZWQgbWFya2VyIGlkLlxyXG4gKiBAcmV0dXJuIEFuIHBvc2l0aXZlIGludGVnZXIuXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFuZG9tSWRCYXNlKCkge1xuICByZXR1cm4gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogOSk7XG59XG4vKipcclxuICogR2V0IHRoZSBncmVhdGVzdCBjb21tb24gZGl2aXNvci5cclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ9IGEgb25lIG51bWJlclxyXG4gKiBAcGFyYW0ge251bWJlcn0gYiB0aGUgb3RoZXIgbnVtYmVyXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0R3JlYXRlc3RDb21tb25EaXZpZG9yKGEsIGIpIHtcbiAgaWYgKGIgPT09IDApIHtcbiAgICByZXR1cm4gYTtcbiAgfVxuXG4gIHJldHVybiBnZXRHcmVhdGVzdENvbW1vbkRpdmlkb3IoYiwgYSAlIGIpO1xufVxuLyoqXHJcbiAqIEdldCB0aGUgbGVhc3QgY29tbW9uIG11bHRpcGxlLlxyXG4gKlxyXG4gKiBAcGFyYW0ge251bWJlcn0gYSBvbmUgbnVtYmVyXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBiIHRoZSBvdGhlciBudW1iZXJcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRMZWFzdENvbW1vbk11bHRpcGxlKGEsIGIpIHtcbiAgaWYgKGEgPT0gbnVsbCkge1xuICAgIHJldHVybiBiO1xuICB9XG5cbiAgaWYgKGIgPT0gbnVsbCkge1xuICAgIHJldHVybiBhO1xuICB9XG5cbiAgcmV0dXJuIGEgKiBiIC8gZ2V0R3JlYXRlc3RDb21tb25EaXZpZG9yKGEsIGIpO1xufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgbWFwLCBpc1N0cmluZywgaXNGdW5jdGlvbiwgZXFOYU4sIGlzUmVnRXhwIH0gZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbnZhciBFQ0hBUlRTX1BSRUZJWCA9ICdbRUNoYXJ0c10gJztcbnZhciBzdG9yZWRMb2dzID0ge307XG52YXIgaGFzQ29uc29sZSA9IHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiYmIGNvbnNvbGUud2FybiAmJiBjb25zb2xlLmxvZztcblxuZnVuY3Rpb24gb3V0cHV0TG9nKHR5cGUsIHN0ciwgb25seU9uY2UpIHtcbiAgaWYgKGhhc0NvbnNvbGUpIHtcbiAgICBpZiAob25seU9uY2UpIHtcbiAgICAgIGlmIChzdG9yZWRMb2dzW3N0cl0pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzdG9yZWRMb2dzW3N0cl0gPSB0cnVlO1xuICAgIH0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG5cblxuICAgIGNvbnNvbGVbdHlwZV0oRUNIQVJUU19QUkVGSVggKyBzdHIpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2coc3RyLCBvbmx5T25jZSkge1xuICBvdXRwdXRMb2coJ2xvZycsIHN0ciwgb25seU9uY2UpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHdhcm4oc3RyLCBvbmx5T25jZSkge1xuICBvdXRwdXRMb2coJ3dhcm4nLCBzdHIsIG9ubHlPbmNlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlcnJvcihzdHIsIG9ubHlPbmNlKSB7XG4gIG91dHB1dExvZygnZXJyb3InLCBzdHIsIG9ubHlPbmNlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZXByZWNhdGVMb2coc3RyKSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgLy8gTm90IGRpc3BsYXkgZHVwbGljYXRlIG1lc3NhZ2UuXG4gICAgb3V0cHV0TG9nKCd3YXJuJywgJ0RFUFJFQ0FURUQ6ICcgKyBzdHIsIHRydWUpO1xuICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZGVwcmVjYXRlUmVwbGFjZUxvZyhvbGRPcHQsIG5ld09wdCwgc2NvcGUpIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBkZXByZWNhdGVMb2coKHNjb3BlID8gXCJbXCIgKyBzY29wZSArIFwiXVwiIDogJycpICsgKG9sZE9wdCArIFwiIGlzIGRlcHJlY2F0ZWQsIHVzZSBcIiArIG5ld09wdCArIFwiIGluc3RlYWQuXCIpKTtcbiAgfVxufVxuLyoqXHJcbiAqIElmIGluIF9fREVWX18gZW52aXJvbm1lbnQsIGdldCBjb25zb2xlIHByaW50YWJsZSBtZXNzYWdlIGZvciB1c2VycyBoaW50LlxyXG4gKiBQYXJhbWV0ZXJzIGFyZSBzZXBhcmF0ZWQgYnkgJyAnLlxyXG4gKiBAdXNhZ2VcclxuICogbWFrZVByaW50YWJsZSgnVGhpcyBpcyBhbiBlcnJvciBvbicsIHNvbWVWYXIsIHNvbWVPYmopO1xyXG4gKlxyXG4gKiBAcGFyYW0gaGludEluZm8gYW55dGhpbmcgYWJvdXQgdGhlIGN1cnJlbnQgZXhlY3V0aW9uIGNvbnRleHQgdG8gaGludCB1c2Vycy5cclxuICogQHRocm93cyBFcnJvclxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VQcmludGFibGUoKSB7XG4gIHZhciBoaW50SW5mbyA9IFtdO1xuXG4gIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgaGludEluZm9bX2ldID0gYXJndW1lbnRzW19pXTtcbiAgfVxuXG4gIHZhciBtc2cgPSAnJztcblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIC8vIEZ1enp5IHN0cmluZ2lmeSBmb3IgcHJpbnQuXG4gICAgLy8gVGhpcyBjb2RlIG9ubHkgZXhpc3QgaW4gZGV2IGVudmlyb25tZW50LlxuICAgIHZhciBtYWtlUHJpbnRhYmxlU3RyaW5nSWZQb3NzaWJsZV8xID0gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgcmV0dXJuIHZhbCA9PT0gdm9pZCAwID8gJ3VuZGVmaW5lZCcgOiB2YWwgPT09IEluZmluaXR5ID8gJ0luZmluaXR5JyA6IHZhbCA9PT0gLUluZmluaXR5ID8gJy1JbmZpbml0eScgOiBlcU5hTih2YWwpID8gJ05hTicgOiB2YWwgaW5zdGFuY2VvZiBEYXRlID8gJ0RhdGUoJyArIHZhbC50b0lTT1N0cmluZygpICsgJyknIDogaXNGdW5jdGlvbih2YWwpID8gJ2Z1bmN0aW9uICgpIHsgLi4uIH0nIDogaXNSZWdFeHAodmFsKSA/IHZhbCArICcnIDogbnVsbDtcbiAgICB9O1xuXG4gICAgbXNnID0gbWFwKGhpbnRJbmZvLCBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICBpZiAoaXNTdHJpbmcoYXJnKSkge1xuICAgICAgICAvLyBQcmludCB3aXRob3V0IHF1b3RhdGlvbiBtYXJrIGZvciBzb21lIHN0YXRlbWVudC5cbiAgICAgICAgcmV0dXJuIGFyZztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwcmludGFibGVTdHIgPSBtYWtlUHJpbnRhYmxlU3RyaW5nSWZQb3NzaWJsZV8xKGFyZyk7XG5cbiAgICAgICAgaWYgKHByaW50YWJsZVN0ciAhPSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIHByaW50YWJsZVN0cjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgSlNPTiAhPT0gJ3VuZGVmaW5lZCcgJiYgSlNPTi5zdHJpbmdpZnkpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFyZywgZnVuY3Rpb24gKG4sIHZhbCkge1xuICAgICAgICAgICAgICB2YXIgcHJpbnRhYmxlU3RyID0gbWFrZVByaW50YWJsZVN0cmluZ0lmUG9zc2libGVfMSh2YWwpO1xuICAgICAgICAgICAgICByZXR1cm4gcHJpbnRhYmxlU3RyID09IG51bGwgPyB2YWwgOiBwcmludGFibGVTdHI7XG4gICAgICAgICAgICB9KTsgLy8gSW4gbW9zdCBjYXNlcyB0aGUgaW5mbyBvYmplY3QgaXMgc21hbGwsIHNvIGRvIG5vdCBsaW5lIGJyZWFrLlxuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmV0dXJuICc/JztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuICc/JztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pLmpvaW4oJyAnKTtcbiAgfVxuXG4gIHJldHVybiBtc2c7XG59XG4vKipcclxuICogQHRocm93cyBFcnJvclxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRocm93RXJyb3IobXNnKSB7XG4gIHRocm93IG5ldyBFcnJvcihtc2cpO1xufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgZWFjaCwgaXNPYmplY3QsIGlzQXJyYXksIGNyZWF0ZUhhc2hNYXAsIG1hcCwgYXNzZXJ0LCBpc1N0cmluZywgaW5kZXhPZiwgaXNTdHJpbmdTYWZlLCBpc051bWJlciB9IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgZW52IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvZW52LmpzJztcbmltcG9ydCB7IGlzTnVtZXJpYywgZ2V0UmFuZG9tSWRCYXNlLCBnZXRQcmVjaXNpb24sIHJvdW5kIH0gZnJvbSAnLi9udW1iZXIuanMnO1xuaW1wb3J0IHsgd2FybiB9IGZyb20gJy4vbG9nLmpzJztcblxuZnVuY3Rpb24gaW50ZXJwb2xhdGVOdW1iZXIocDAsIHAxLCBwZXJjZW50KSB7XG4gIHJldHVybiAocDEgLSBwMCkgKiBwZXJjZW50ICsgcDA7XG59XG4vKipcclxuICogTWFrZSB0aGUgbmFtZSBkaXNwbGF5YWJsZS4gQnV0IHdlIHNob3VsZFxyXG4gKiBtYWtlIHN1cmUgaXQgaXMgbm90IGR1cGxpY2F0ZWQgd2l0aCB1c2VyXHJcbiAqIHNwZWNpZmllZCBuYW1lLCBzbyB1c2UgJ1xcMCc7XHJcbiAqL1xuXG5cbnZhciBEVU1NWV9DT01QT05FTlRfTkFNRV9QUkVGSVggPSAnc2VyaWVzXFwwJztcbnZhciBJTlRFUk5BTF9DT01QT05FTlRfSURfUFJFRklYID0gJ1xcMF9lY19cXDAnO1xuLyoqXHJcbiAqIElmIHZhbHVlIGlzIG5vdCBhcnJheSwgdGhlbiB0cmFuc2xhdGUgaXQgdG8gYXJyYXkuXHJcbiAqIEBwYXJhbSAgeyp9IHZhbHVlXHJcbiAqIEByZXR1cm4ge0FycmF5fSBbdmFsdWVdIG9yIHZhbHVlXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplVG9BcnJheSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBBcnJheSA/IHZhbHVlIDogdmFsdWUgPT0gbnVsbCA/IFtdIDogW3ZhbHVlXTtcbn1cbi8qKlxyXG4gKiBTeW5jIGRlZmF1bHQgb3B0aW9uIGJldHdlZW4gbm9ybWFsIGFuZCBlbXBoYXNpcyBsaWtlIGBwb3NpdGlvbmAgYW5kIGBzaG93YFxyXG4gKiBJbiBjYXNlIHNvbWUgb25lIHdpbGwgd3JpdGUgY29kZSBsaWtlXHJcbiAqICAgICBsYWJlbDoge1xyXG4gKiAgICAgICAgICBzaG93OiBmYWxzZSxcclxuICogICAgICAgICAgcG9zaXRpb246ICdvdXRzaWRlJyxcclxuICogICAgICAgICAgZm9udFNpemU6IDE4XHJcbiAqICAgICB9LFxyXG4gKiAgICAgZW1waGFzaXM6IHtcclxuICogICAgICAgICAgbGFiZWw6IHsgc2hvdzogdHJ1ZSB9XHJcbiAqICAgICB9XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdEVtcGhhc2lzKG9wdCwga2V5LCBzdWJPcHRzKSB7XG4gIC8vIENhdXRpb246IHBlcmZvcm1hbmNlIHNlbnNpdGl2ZS5cbiAgaWYgKG9wdCkge1xuICAgIG9wdFtrZXldID0gb3B0W2tleV0gfHwge307XG4gICAgb3B0LmVtcGhhc2lzID0gb3B0LmVtcGhhc2lzIHx8IHt9O1xuICAgIG9wdC5lbXBoYXNpc1trZXldID0gb3B0LmVtcGhhc2lzW2tleV0gfHwge307IC8vIERlZmF1bHQgZW1waGFzaXMgb3B0aW9uIGZyb20gbm9ybWFsXG5cbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc3ViT3B0cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgdmFyIHN1Yk9wdE5hbWUgPSBzdWJPcHRzW2ldO1xuXG4gICAgICBpZiAoIW9wdC5lbXBoYXNpc1trZXldLmhhc093blByb3BlcnR5KHN1Yk9wdE5hbWUpICYmIG9wdFtrZXldLmhhc093blByb3BlcnR5KHN1Yk9wdE5hbWUpKSB7XG4gICAgICAgIG9wdC5lbXBoYXNpc1trZXldW3N1Yk9wdE5hbWVdID0gb3B0W2tleV1bc3ViT3B0TmFtZV07XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5leHBvcnQgdmFyIFRFWFRfU1RZTEVfT1BUSU9OUyA9IFsnZm9udFN0eWxlJywgJ2ZvbnRXZWlnaHQnLCAnZm9udFNpemUnLCAnZm9udEZhbWlseScsICdyaWNoJywgJ3RhZycsICdjb2xvcicsICd0ZXh0Qm9yZGVyQ29sb3InLCAndGV4dEJvcmRlcldpZHRoJywgJ3dpZHRoJywgJ2hlaWdodCcsICdsaW5lSGVpZ2h0JywgJ2FsaWduJywgJ3ZlcnRpY2FsQWxpZ24nLCAnYmFzZWxpbmUnLCAnc2hhZG93Q29sb3InLCAnc2hhZG93Qmx1cicsICdzaGFkb3dPZmZzZXRYJywgJ3NoYWRvd09mZnNldFknLCAndGV4dFNoYWRvd0NvbG9yJywgJ3RleHRTaGFkb3dCbHVyJywgJ3RleHRTaGFkb3dPZmZzZXRYJywgJ3RleHRTaGFkb3dPZmZzZXRZJywgJ2JhY2tncm91bmRDb2xvcicsICdib3JkZXJDb2xvcicsICdib3JkZXJXaWR0aCcsICdib3JkZXJSYWRpdXMnLCAncGFkZGluZyddOyAvLyBtb2RlbFV0aWwuTEFCRUxfT1BUSU9OUyA9IG1vZGVsVXRpbC5URVhUX1NUWUxFX09QVElPTlMuY29uY2F0KFtcbi8vICAgICAncG9zaXRpb24nLCAnb2Zmc2V0JywgJ3JvdGF0ZScsICdvcmlnaW4nLCAnc2hvdycsICdkaXN0YW5jZScsICdmb3JtYXR0ZXInLFxuLy8gICAgICdmb250U3R5bGUnLCAnZm9udFdlaWdodCcsICdmb250U2l6ZScsICdmb250RmFtaWx5Jyxcbi8vICAgICAvLyBGSVhNRTogZGVwcmVjYXRlZCwgY2hlY2sgYW5kIHJlbW92ZSBpdC5cbi8vICAgICAndGV4dFN0eWxlJ1xuLy8gXSk7XG5cbi8qKlxyXG4gKiBUaGUgbWV0aG9kIGRvZXMgbm90IGVuc3VyZSBwZXJmb3JtYW5jZS5cclxuICogZGF0YSBjb3VsZCBiZSBbMTIsIDIzMjMsIHt2YWx1ZTogMjIzfSwgWzEyMjEsIDIzXSwge3ZhbHVlOiBbMiwgMjNdfV1cclxuICogVGhpcyBoZWxwZXIgbWV0aG9kIHJldHJpZXZlcyB2YWx1ZSBmcm9tIGRhdGEuXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF0YUl0ZW1WYWx1ZShkYXRhSXRlbSkge1xuICByZXR1cm4gaXNPYmplY3QoZGF0YUl0ZW0pICYmICFpc0FycmF5KGRhdGFJdGVtKSAmJiAhKGRhdGFJdGVtIGluc3RhbmNlb2YgRGF0ZSkgPyBkYXRhSXRlbS52YWx1ZSA6IGRhdGFJdGVtO1xufVxuLyoqXHJcbiAqIGRhdGEgY291bGQgYmUgWzEyLCAyMzIzLCB7dmFsdWU6IDIyM30sIFsxMjIxLCAyM10sIHt2YWx1ZTogWzIsIDIzXX1dXHJcbiAqIFRoaXMgaGVscGVyIG1ldGhvZCBkZXRlcm1pbmUgaWYgZGF0YUl0ZW0gaGFzIGV4dHJhIG9wdGlvbiBiZXNpZGVzIHZhbHVlXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaXNEYXRhSXRlbU9wdGlvbihkYXRhSXRlbSkge1xuICByZXR1cm4gaXNPYmplY3QoZGF0YUl0ZW0pICYmICEoZGF0YUl0ZW0gaW5zdGFuY2VvZiBBcnJheSk7IC8vIC8vIG1hcmtMaW5lIGRhdGEgY2FuIGJlIGFycmF5XG4gIC8vICYmICEoZGF0YUl0ZW1bMF0gJiYgaXNPYmplY3QoZGF0YUl0ZW1bMF0pICYmICEoZGF0YUl0ZW1bMF0gaW5zdGFuY2VvZiBBcnJheSkpO1xufVxuO1xuLyoqXHJcbiAqIE1hcHBpbmcgdG8gZXhpc3RpbmdzIGZvciBtZXJnZS5cclxuICpcclxuICogTW9kZSBcIm5vcm1hbE1lZ2VcIjpcclxuICogICAgIFRoZSBtYXBwaW5nIHJlc3VsdCAobWVyZ2UgcmVzdWx0KSB3aWxsIGtlZXAgdGhlIG9yZGVyIG9mIHRoZSBleGlzdGluZ1xyXG4gKiAgICAgY29tcG9uZW50LCByYXRoZXIgdGhhbiB0aGUgb3JkZXIgb2YgbmV3IG9wdGlvbi4gQmVjYXVzZSB3ZSBzaG91bGQgZW5zdXJlXHJcbiAqICAgICBzb21lIHNwZWNpZmllZCBpbmRleCByZWZlcmVuY2UgKGxpa2UgeEF4aXNJbmRleCkga2VlcCB3b3JrLlxyXG4gKiAgICAgQW5kIGluIG1vc3QgY2FzZXMsIFwibWVyZ2Ugb3B0aW9uXCIgaXMgdXNlZCB0byB1cGRhdGUgcGFydGlhbCBvcHRpb24gYnV0IG5vdFxyXG4gKiAgICAgYmUgZXhwZWN0ZWQgdG8gY2hhbmdlIHRoZSBvcmRlci5cclxuICpcclxuICogTW9kZSBcInJlcGxhY2VNZWdlXCI6XHJcbiAqICAgICAoMSkgT25seSB0aGUgaWQgbWFwcGVkIGNvbXBvbmVudHMgd2lsbCBiZSBtZXJnZWQuXHJcbiAqICAgICAoMikgT3RoZXIgZXhpc3RpbmcgY29tcG9uZW50cyAoZXhjZXB0IGludGVybmFsIGNvbXBvbmVudHMpIHdpbGwgYmUgcmVtb3ZlZC5cclxuICogICAgICgzKSBPdGhlciBuZXcgb3B0aW9ucyB3aWxsIGJlIHVzZWQgdG8gY3JlYXRlIG5ldyBjb21wb25lbnQuXHJcbiAqICAgICAoNCkgVGhlIGluZGV4IG9mIHRoZSBleGlzdGluZyBjb21wb25lbnRzIHdpbGwgbm90IGJlIG1vZGlmaWVkLlxyXG4gKiAgICAgVGhhdCBtZWFucyB0aGVpciBtaWdodCBiZSBcImhvbGVcIiBhZnRlciB0aGUgcmVtb3ZhbC5cclxuICogICAgIFRoZSBuZXcgY29tcG9uZW50cyBhcmUgY3JlYXRlZCBmaXJzdCBhdCB0aG9zZSBhdmFpbGFibGUgaW5kZXguXHJcbiAqXHJcbiAqIE1vZGUgXCJyZXBsYWNlQWxsXCI6XHJcbiAqICAgICBUaGlzIG1vZGUgdHJ5IHRvIHN1cHBvcnQgdGhhdCByZXByb2R1Y2UgYW4gZWNoYXJ0cyBpbnN0YW5jZSBmcm9tIGFub3RoZXJcclxuICogICAgIGVjaGFydHMgaW5zdGFuY2UgKHZpYSBgZ2V0T3B0aW9uYCkgaW4gc29tZSBzaW1wbGUgY2FzZXMuXHJcbiAqICAgICBJbiB0aGlzIHNjZW5hcmlvLCB0aGUgYHJlc3VsdGAgaW5kZXggYXJlIGV4YWN0bHkgdGhlIGNvbnNpc3RlbnQgd2l0aCB0aGUgYG5ld0NtcHRPcHRpb25zYCxcclxuICogICAgIHdoaWNoIGVuc3VyZXMgdGhlIGNvbXBvbmVudCBpbmRleCByZWZlcnJpbmcgKGxpa2UgYHhBeGlzSW5kZXg6ID9gKSBjb3JyZW50LiBUaGF0IGlzLFxyXG4gKiAgICAgdGhlIFwiaG9sZVwiIGluIGBuZXdDbXB0T3B0aW9uc2Agd2lsbCBhbHNvIGJlIGtlcHQuXHJcbiAqICAgICBPbiB0aGUgY29udHJhcnksIG90aGVyIG1vZGVzIHRyeSBiZXN0IHRvIGVsaW1pbmF0ZSBob2xlcy5cclxuICogICAgIFBFTkRJTkc6IFRoaXMgaXMgYW4gZXhwZXJpbWVudGFsIG1vZGUgeWV0LlxyXG4gKlxyXG4gKiBAcmV0dXJuIFNlZSB0aGUgY29tbWVudCBvZiA8TWFwcGluZ1Jlc3VsdD4uXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbWFwcGluZ1RvRXhpc3RzKGV4aXN0aW5ncywgbmV3Q21wdE9wdGlvbnMsIG1vZGUpIHtcbiAgdmFyIGlzTm9ybWFsTWVyZ2VNb2RlID0gbW9kZSA9PT0gJ25vcm1hbE1lcmdlJztcbiAgdmFyIGlzUmVwbGFjZU1lcmdlTW9kZSA9IG1vZGUgPT09ICdyZXBsYWNlTWVyZ2UnO1xuICB2YXIgaXNSZXBsYWNlQWxsTW9kZSA9IG1vZGUgPT09ICdyZXBsYWNlQWxsJztcbiAgZXhpc3RpbmdzID0gZXhpc3RpbmdzIHx8IFtdO1xuICBuZXdDbXB0T3B0aW9ucyA9IChuZXdDbXB0T3B0aW9ucyB8fCBbXSkuc2xpY2UoKTtcbiAgdmFyIGV4aXN0aW5nSWRJZHhNYXAgPSBjcmVhdGVIYXNoTWFwKCk7IC8vIFZhbGlkYXRlIGlkIGFuZCBuYW1lIG9uIHVzZXIgaW5wdXQgb3B0aW9uLlxuXG4gIGVhY2gobmV3Q21wdE9wdGlvbnMsIGZ1bmN0aW9uIChjbXB0T3B0aW9uLCBpbmRleCkge1xuICAgIGlmICghaXNPYmplY3QoY21wdE9wdGlvbikpIHtcbiAgICAgIG5ld0NtcHRPcHRpb25zW2luZGV4XSA9IG51bGw7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIFRoZXJlIGlzIHNvbWUgbGVnYWN5IGNhc2UgdGhhdCBuYW1lIGlzIHNldCBhcyBgZmFsc2VgLlxuICAgICAgLy8gQnV0IHNob3VsZCB3b3JrIG5vcm1hbGx5IHJhdGhlciB0aGFuIHRocm93IGVycm9yLlxuICAgICAgaWYgKGNtcHRPcHRpb24uaWQgIT0gbnVsbCAmJiAhaXNWYWxpZElkT3JOYW1lKGNtcHRPcHRpb24uaWQpKSB7XG4gICAgICAgIHdhcm5JbnZhbGlkYXRlSWRPck5hbWUoY21wdE9wdGlvbi5pZCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjbXB0T3B0aW9uLm5hbWUgIT0gbnVsbCAmJiAhaXNWYWxpZElkT3JOYW1lKGNtcHRPcHRpb24ubmFtZSkpIHtcbiAgICAgICAgd2FybkludmFsaWRhdGVJZE9yTmFtZShjbXB0T3B0aW9uLm5hbWUpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIHZhciByZXN1bHQgPSBwcmVwYXJlUmVzdWx0KGV4aXN0aW5ncywgZXhpc3RpbmdJZElkeE1hcCwgbW9kZSk7XG5cbiAgaWYgKGlzTm9ybWFsTWVyZ2VNb2RlIHx8IGlzUmVwbGFjZU1lcmdlTW9kZSkge1xuICAgIG1hcHBpbmdCeUlkKHJlc3VsdCwgZXhpc3RpbmdzLCBleGlzdGluZ0lkSWR4TWFwLCBuZXdDbXB0T3B0aW9ucyk7XG4gIH1cblxuICBpZiAoaXNOb3JtYWxNZXJnZU1vZGUpIHtcbiAgICBtYXBwaW5nQnlOYW1lKHJlc3VsdCwgbmV3Q21wdE9wdGlvbnMpO1xuICB9XG5cbiAgaWYgKGlzTm9ybWFsTWVyZ2VNb2RlIHx8IGlzUmVwbGFjZU1lcmdlTW9kZSkge1xuICAgIG1hcHBpbmdCeUluZGV4KHJlc3VsdCwgbmV3Q21wdE9wdGlvbnMsIGlzUmVwbGFjZU1lcmdlTW9kZSk7XG4gIH0gZWxzZSBpZiAoaXNSZXBsYWNlQWxsTW9kZSkge1xuICAgIG1hcHBpbmdJblJlcGxhY2VBbGxNb2RlKHJlc3VsdCwgbmV3Q21wdE9wdGlvbnMpO1xuICB9XG5cbiAgbWFrZUlkQW5kTmFtZShyZXN1bHQpOyAvLyBUaGUgYXJyYXkgYHJlc3VsdGAgTVVTVCBOT1QgY29udGFpbiBlbGlkZWQgaXRlbXMsIG90aGVyd2lzZSB0aGVcbiAgLy8gZm9yRWFjaCB3aWxsIG9taXQgdGhvc2UgaXRlbXMgYW5kIHJlc3VsdCBpbiBpbmNvcnJlY3QgcmVzdWx0LlxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIHByZXBhcmVSZXN1bHQoZXhpc3RpbmdzLCBleGlzdGluZ0lkSWR4TWFwLCBtb2RlKSB7XG4gIHZhciByZXN1bHQgPSBbXTtcblxuICBpZiAobW9kZSA9PT0gJ3JlcGxhY2VBbGwnKSB7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSAvLyBEbyBub3QgdXNlIG5hdGl2ZSBgbWFwYCB0byBpbiBjYXNlIHRoYXQgdGhlIGFycmF5IGBleGlzdGluZ3NgXG4gIC8vIGNvbnRhaW5zIGVsaWRlZCBpdGVtcywgd2hpY2ggd2lsbCBiZSBvbWl0dGVkLlxuXG5cbiAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGV4aXN0aW5ncy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICB2YXIgZXhpc3RpbmcgPSBleGlzdGluZ3NbaW5kZXhdOyAvLyBCZWNhdXNlIG9mIHJlcGxhY2VNZXJnZSwgYGV4aXN0aW5nYCBtYXkgYmUgbnVsbC91bmRlZmluZWQuXG5cbiAgICBpZiAoZXhpc3RpbmcgJiYgZXhpc3RpbmcuaWQgIT0gbnVsbCkge1xuICAgICAgZXhpc3RpbmdJZElkeE1hcC5zZXQoZXhpc3RpbmcuaWQsIGluZGV4KTtcbiAgICB9IC8vIEZvciBub24taW50ZXJuYWwtY29tcG9ubmV0czpcbiAgICAvLyAgICAgTW9kZSBcIm5vcm1hbE1lcmdlXCI6IGFsbCBleGlzdGluZ3Mga2VwdC5cbiAgICAvLyAgICAgTW9kZSBcInJlcGxhY2VNZXJnZVwiOiBhbGwgZXhpc3RpbmcgcmVtb3ZlZCB1bmxlc3MgbWFwcGVkIGJ5IGlkLlxuICAgIC8vIEZvciBpbnRlcm5hbC1jb21wb25lbnRzOlxuICAgIC8vICAgICBnbyB3aXRoIFwicmVwbGFjZU1lcmdlXCIgYXBwcm9hY2ggaW4gYm90aCBtb2RlLlxuXG5cbiAgICByZXN1bHQucHVzaCh7XG4gICAgICBleGlzdGluZzogbW9kZSA9PT0gJ3JlcGxhY2VNZXJnZScgfHwgaXNDb21wb25lbnRJZEludGVybmFsKGV4aXN0aW5nKSA/IG51bGwgOiBleGlzdGluZyxcbiAgICAgIG5ld09wdGlvbjogbnVsbCxcbiAgICAgIGtleUluZm86IG51bGwsXG4gICAgICBicmFuZE5ldzogbnVsbFxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gbWFwcGluZ0J5SWQocmVzdWx0LCBleGlzdGluZ3MsIGV4aXN0aW5nSWRJZHhNYXAsIG5ld0NtcHRPcHRpb25zKSB7XG4gIC8vIE1hcHBpbmcgYnkgaWQgaWYgc3BlY2lmaWVkLlxuICBlYWNoKG5ld0NtcHRPcHRpb25zLCBmdW5jdGlvbiAoY21wdE9wdGlvbiwgaW5kZXgpIHtcbiAgICBpZiAoIWNtcHRPcHRpb24gfHwgY21wdE9wdGlvbi5pZCA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG9wdGlvbklkID0gbWFrZUNvbXBhcmFibGVLZXkoY21wdE9wdGlvbi5pZCk7XG4gICAgdmFyIGV4aXN0aW5nSWR4ID0gZXhpc3RpbmdJZElkeE1hcC5nZXQob3B0aW9uSWQpO1xuXG4gICAgaWYgKGV4aXN0aW5nSWR4ICE9IG51bGwpIHtcbiAgICAgIHZhciByZXN1bHRJdGVtID0gcmVzdWx0W2V4aXN0aW5nSWR4XTtcbiAgICAgIGFzc2VydCghcmVzdWx0SXRlbS5uZXdPcHRpb24sICdEdXBsaWNhdGVkIG9wdGlvbiBvbiBpZCBcIicgKyBvcHRpb25JZCArICdcIi4nKTtcbiAgICAgIHJlc3VsdEl0ZW0ubmV3T3B0aW9uID0gY21wdE9wdGlvbjsgLy8gSW4gYm90aCBtb2RlLCBpZiBpZCBtYXRjaGVkLCBuZXcgb3B0aW9uIHdpbGwgYmUgbWVyZ2VkIHRvXG4gICAgICAvLyB0aGUgZXhpc3RpbmdzIHJhdGhlciB0aGFuIGNyZWF0aW5nIG5ldyBjb21wb25lbnQgbW9kZWwuXG5cbiAgICAgIHJlc3VsdEl0ZW0uZXhpc3RpbmcgPSBleGlzdGluZ3NbZXhpc3RpbmdJZHhdO1xuICAgICAgbmV3Q21wdE9wdGlvbnNbaW5kZXhdID0gbnVsbDtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBtYXBwaW5nQnlOYW1lKHJlc3VsdCwgbmV3Q21wdE9wdGlvbnMpIHtcbiAgLy8gTWFwcGluZyBieSBuYW1lIGlmIHNwZWNpZmllZC5cbiAgZWFjaChuZXdDbXB0T3B0aW9ucywgZnVuY3Rpb24gKGNtcHRPcHRpb24sIGluZGV4KSB7XG4gICAgaWYgKCFjbXB0T3B0aW9uIHx8IGNtcHRPcHRpb24ubmFtZSA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBleGlzdGluZyA9IHJlc3VsdFtpXS5leGlzdGluZztcblxuICAgICAgaWYgKCFyZXN1bHRbaV0ubmV3T3B0aW9uIC8vIENvbnNpZGVyIG5hbWU6IHR3byBtYXAgdG8gb25lLlxuICAgICAgLy8gQ2FuIG5vdCBtYXRjaCB3aGVuIGJvdGggaWRzIGV4aXN0aW5nIGJ1dCBkaWZmZXJlbnQuXG4gICAgICAmJiBleGlzdGluZyAmJiAoZXhpc3RpbmcuaWQgPT0gbnVsbCB8fCBjbXB0T3B0aW9uLmlkID09IG51bGwpICYmICFpc0NvbXBvbmVudElkSW50ZXJuYWwoY21wdE9wdGlvbikgJiYgIWlzQ29tcG9uZW50SWRJbnRlcm5hbChleGlzdGluZykgJiYga2V5RXhpc3RBbmRFcXVhbCgnbmFtZScsIGV4aXN0aW5nLCBjbXB0T3B0aW9uKSkge1xuICAgICAgICByZXN1bHRbaV0ubmV3T3B0aW9uID0gY21wdE9wdGlvbjtcbiAgICAgICAgbmV3Q21wdE9wdGlvbnNbaW5kZXhdID0gbnVsbDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG1hcHBpbmdCeUluZGV4KHJlc3VsdCwgbmV3Q21wdE9wdGlvbnMsIGJyYW5kTmV3KSB7XG4gIGVhY2gobmV3Q21wdE9wdGlvbnMsIGZ1bmN0aW9uIChjbXB0T3B0aW9uKSB7XG4gICAgaWYgKCFjbXB0T3B0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBGaW5kIHRoZSBmaXJzdCBwbGFjZSB0aGF0IG5vdCBtYXBwZWQgYnkgaWQgYW5kIG5vdCBpbnRlcm5hbCBjb21wb25lbnQgKGNvbnNpZGVyIHRoZSBcImhvbGVcIikuXG5cblxuICAgIHZhciByZXN1bHRJdGVtO1xuICAgIHZhciBuZXh0SWR4ID0gMDtcblxuICAgIHdoaWxlICggLy8gQmUgYCFyZXN1bHRJdGVtYCBvbmx5IHdoZW4gYG5leHRJZHggPj0gcmVzdWx0Lmxlbmd0aGAuXG4gICAgKHJlc3VsdEl0ZW0gPSByZXN1bHRbbmV4dElkeF0pICYmICggLy8gKDEpIEV4aXN0aW5nIG1vZGVscyB0aGF0IGFscmVhZHkgaGF2ZSBpZCBzaG91bGQgYmUgYWJsZSB0byBtYXBwZWQgdG8uIEJlY2F1c2VcbiAgICAvLyBhZnRlciBtYXBwaW5nIHBlcmZvcm1lZCwgbW9kZWwgd2lsbCBhbHdheXMgYmUgYXNzaWduZWQgd2l0aCBhbiBpZCBpZiB1c2VyIG5vdCBnaXZlbi5cbiAgICAvLyBBZnRlciB0aGF0IGFsbCBtb2RlbHMgaGF2ZSBpZC5cbiAgICAvLyAoMikgSWYgbmV3IG9wdGlvbiBoYXMgaWQsIGl0IGNhbiBvbmx5IHNldCB0byBhIGhvbGUgb3IgYXBwZW5kIHRvIHRoZSBsYXN0LiBJdCBzaG91bGRcbiAgICAvLyBub3QgYmUgbWVyZ2VkIHRvIHRoZSBleGlzdGluZ3Mgd2l0aCBkaWZmZXJlbnQgaWQuIEJlY2F1c2UgaWQgc2hvdWxkIG5vdCBiZSBvdmVyd3JpdHRlbi5cbiAgICAvLyAoMykgTmFtZSBjYW4gYmUgb3ZlcndyaXR0ZW4sIGJlY2F1c2UgYXhpcyB1c2UgbmFtZSBhcyAnc2hvdyBsYWJlbCB0ZXh0Jy5cbiAgICByZXN1bHRJdGVtLm5ld09wdGlvbiB8fCBpc0NvbXBvbmVudElkSW50ZXJuYWwocmVzdWx0SXRlbS5leGlzdGluZykgfHwgLy8gSW4gbW9kZSBcInJlcGxhY2VNZXJnZVwiLCBoZXJlIG5vIG5vdC1tYXBwZWQtbm9uLWludGVybmFsLWV4aXN0aW5nLlxuICAgIHJlc3VsdEl0ZW0uZXhpc3RpbmcgJiYgY21wdE9wdGlvbi5pZCAhPSBudWxsICYmICFrZXlFeGlzdEFuZEVxdWFsKCdpZCcsIGNtcHRPcHRpb24sIHJlc3VsdEl0ZW0uZXhpc3RpbmcpKSkge1xuICAgICAgbmV4dElkeCsrO1xuICAgIH1cblxuICAgIGlmIChyZXN1bHRJdGVtKSB7XG4gICAgICByZXN1bHRJdGVtLm5ld09wdGlvbiA9IGNtcHRPcHRpb247XG4gICAgICByZXN1bHRJdGVtLmJyYW5kTmV3ID0gYnJhbmROZXc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgbmV3T3B0aW9uOiBjbXB0T3B0aW9uLFxuICAgICAgICBicmFuZE5ldzogYnJhbmROZXcsXG4gICAgICAgIGV4aXN0aW5nOiBudWxsLFxuICAgICAgICBrZXlJbmZvOiBudWxsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBuZXh0SWR4Kys7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBtYXBwaW5nSW5SZXBsYWNlQWxsTW9kZShyZXN1bHQsIG5ld0NtcHRPcHRpb25zKSB7XG4gIGVhY2gobmV3Q21wdE9wdGlvbnMsIGZ1bmN0aW9uIChjbXB0T3B0aW9uKSB7XG4gICAgLy8gVGhlIGZlYXR1cmUgXCJyZXByb2R1Y2VcIiByZXF1aXJlcyBcImhvbGVcIiB3aWxsIGFsc28gcmVwcm9kdWNlZFxuICAgIC8vIGluIGNhc2UgdGhhdCBjb21wb25lbnQgaW5kZXggcmVmZXJyaW5nIGFyZSBicm9rZW4uXG4gICAgcmVzdWx0LnB1c2goe1xuICAgICAgbmV3T3B0aW9uOiBjbXB0T3B0aW9uLFxuICAgICAgYnJhbmROZXc6IHRydWUsXG4gICAgICBleGlzdGluZzogbnVsbCxcbiAgICAgIGtleUluZm86IG51bGxcbiAgICB9KTtcbiAgfSk7XG59XG4vKipcclxuICogTWFrZSBpZCBhbmQgbmFtZSBmb3IgbWFwcGluZyByZXN1bHQgKHJlc3VsdCBvZiBtYXBwaW5nVG9FeGlzdHMpXHJcbiAqIGludG8gYGtleUluZm9gIGZpZWxkLlxyXG4gKi9cblxuXG5mdW5jdGlvbiBtYWtlSWRBbmROYW1lKG1hcFJlc3VsdCkge1xuICAvLyBXZSB1c2UgdGhpcyBpZCB0byBoYXNoIGNvbXBvbmVudCBtb2RlbHMgYW5kIHZpZXcgaW5zdGFuY2VzXG4gIC8vIGluIGVjaGFydHMuIGlkIGNhbiBiZSBzcGVjaWZpZWQgYnkgdXNlciwgb3IgYXV0byBnZW5lcmF0ZWQuXG4gIC8vIFRoZSBpZCBnZW5lcmF0aW9uIHJ1bGUgZW5zdXJlcyBuZXcgdmlldyBpbnN0YW5jZSBhcmUgYWJsZVxuICAvLyB0byBtYXBwZWQgdG8gb2xkIGluc3RhbmNlIHdoZW4gc2V0T3B0aW9uIGFyZSBjYWxsZWQgaW5cbiAgLy8gbm8tbWVyZ2UgbW9kZS4gU28gd2UgZ2VuZXJhdGUgbW9kZWwgaWQgYnkgbmFtZSBhbmQgcGx1c1xuICAvLyB0eXBlIGluIHZpZXcgaWQuXG4gIC8vIG5hbWUgY2FuIGJlIGR1cGxpY2F0ZWQgYW1vbmcgY29tcG9uZW50cywgd2hpY2ggaXMgY29udmVuaWVudFxuICAvLyB0byBzcGVjaWZ5IG11bHRpIGNvbXBvbmVudHMgKGxpa2Ugc2VyaWVzKSBieSBvbmUgbmFtZS5cbiAgLy8gRW5zdXJlIHRoYXQgZWFjaCBpZCBpcyBkaXN0aW5jdC5cbiAgdmFyIGlkTWFwID0gY3JlYXRlSGFzaE1hcCgpO1xuICBlYWNoKG1hcFJlc3VsdCwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICB2YXIgZXhpc3RpbmcgPSBpdGVtLmV4aXN0aW5nO1xuICAgIGV4aXN0aW5nICYmIGlkTWFwLnNldChleGlzdGluZy5pZCwgaXRlbSk7XG4gIH0pO1xuICBlYWNoKG1hcFJlc3VsdCwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICB2YXIgb3B0ID0gaXRlbS5uZXdPcHRpb247IC8vIEZvcmNlIGVuc3VyZSBpZCBub3QgZHVwbGljYXRlZC5cblxuICAgIGFzc2VydCghb3B0IHx8IG9wdC5pZCA9PSBudWxsIHx8ICFpZE1hcC5nZXQob3B0LmlkKSB8fCBpZE1hcC5nZXQob3B0LmlkKSA9PT0gaXRlbSwgJ2lkIGR1cGxpY2F0ZXM6ICcgKyAob3B0ICYmIG9wdC5pZCkpO1xuICAgIG9wdCAmJiBvcHQuaWQgIT0gbnVsbCAmJiBpZE1hcC5zZXQob3B0LmlkLCBpdGVtKTtcbiAgICAhaXRlbS5rZXlJbmZvICYmIChpdGVtLmtleUluZm8gPSB7fSk7XG4gIH0pOyAvLyBNYWtlIG5hbWUgYW5kIGlkLlxuXG4gIGVhY2gobWFwUmVzdWx0LCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICB2YXIgZXhpc3RpbmcgPSBpdGVtLmV4aXN0aW5nO1xuICAgIHZhciBvcHQgPSBpdGVtLm5ld09wdGlvbjtcbiAgICB2YXIga2V5SW5mbyA9IGl0ZW0ua2V5SW5mbztcblxuICAgIGlmICghaXNPYmplY3Qob3B0KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gTmFtZSBjYW4gYmUgb3ZlcndyaXR0ZW4uIENvbnNpZGVyIGNhc2U6IGF4aXMubmFtZSA9ICcyMGttJy5cbiAgICAvLyBCdXQgaWQgZ2VuZXJhdGVkIGJ5IG5hbWUgd2lsbCBub3QgYmUgY2hhbmdlZCwgd2hpY2ggYWZmZWN0XG4gICAgLy8gb25seSBpbiB0aGF0IGNhc2U6IHNldE9wdGlvbiB3aXRoICdub3QgbWVyZ2UgbW9kZScgYW5kIHZpZXdcbiAgICAvLyBpbnN0YW5jZSB3aWxsIGJlIHJlY3JlYXRlZCwgd2hpY2ggY2FuIGJlIGFjY2VwdGVkLlxuXG5cbiAgICBrZXlJbmZvLm5hbWUgPSBvcHQubmFtZSAhPSBudWxsID8gbWFrZUNvbXBhcmFibGVLZXkob3B0Lm5hbWUpIDogZXhpc3RpbmcgPyBleGlzdGluZy5uYW1lIC8vIEF2b2lkIHRoYXQgZGlmZmVyZW50IHNlcmllcyBoYXMgdGhlIHNhbWUgbmFtZSxcbiAgICAvLyBiZWNhdXNlIG5hbWUgbWF5IGJlIHVzZWQgbGlrZSBpbiBjb2xvciBwYWxsZXQuXG4gICAgOiBEVU1NWV9DT01QT05FTlRfTkFNRV9QUkVGSVggKyBpbmRleDtcblxuICAgIGlmIChleGlzdGluZykge1xuICAgICAga2V5SW5mby5pZCA9IG1ha2VDb21wYXJhYmxlS2V5KGV4aXN0aW5nLmlkKTtcbiAgICB9IGVsc2UgaWYgKG9wdC5pZCAhPSBudWxsKSB7XG4gICAgICBrZXlJbmZvLmlkID0gbWFrZUNvbXBhcmFibGVLZXkob3B0LmlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ29uc2lkZXIgdGhpcyBzaXR1YXRvaW46XG4gICAgICAvLyAgb3B0aW9uQTogW3tuYW1lOiAnYSd9LCB7bmFtZTogJ2EnfSwgey4ufV1cbiAgICAgIC8vICBvcHRpb25CIFt7Li59LCB7bmFtZTogJ2EnfSwge25hbWU6ICdhJ31dXG4gICAgICAvLyBTZXJpZXMgd2l0aCB0aGUgc2FtZSBuYW1lIGJldHdlZW4gb3B0aW9uQSBhbmQgb3B0aW9uQlxuICAgICAgLy8gc2hvdWxkIGJlIG1hcHBlZC5cbiAgICAgIHZhciBpZE51bSA9IDA7XG5cbiAgICAgIGRvIHtcbiAgICAgICAga2V5SW5mby5pZCA9ICdcXDAnICsga2V5SW5mby5uYW1lICsgJ1xcMCcgKyBpZE51bSsrO1xuICAgICAgfSB3aGlsZSAoaWRNYXAuZ2V0KGtleUluZm8uaWQpKTtcbiAgICB9XG5cbiAgICBpZE1hcC5zZXQoa2V5SW5mby5pZCwgaXRlbSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBrZXlFeGlzdEFuZEVxdWFsKGF0dHIsIG9iajEsIG9iajIpIHtcbiAgdmFyIGtleTEgPSBjb252ZXJ0T3B0aW9uSWROYW1lKG9iajFbYXR0cl0sIG51bGwpO1xuICB2YXIga2V5MiA9IGNvbnZlcnRPcHRpb25JZE5hbWUob2JqMlthdHRyXSwgbnVsbCk7IC8vIFNlZSBgTWFwcGluZ0V4aXN0aW5nSXRlbWAuIGBpZGAgYW5kIGBuYW1lYCB0cmFkZSBzdHJpbmcgZXF1YWxzIHRvIG51bWJlci5cblxuICByZXR1cm4ga2V5MSAhPSBudWxsICYmIGtleTIgIT0gbnVsbCAmJiBrZXkxID09PSBrZXkyO1xufVxuLyoqXHJcbiAqIEByZXR1cm4gcmV0dXJuIG51bGwgaWYgbm90IGV4aXN0LlxyXG4gKi9cblxuXG5mdW5jdGlvbiBtYWtlQ29tcGFyYWJsZUtleSh2YWwpIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAodmFsID09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBjb252ZXJ0T3B0aW9uSWROYW1lKHZhbCwgJycpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29udmVydE9wdGlvbklkTmFtZShpZE9yTmFtZSwgZGVmYXVsdFZhbHVlKSB7XG4gIGlmIChpZE9yTmFtZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgfVxuXG4gIHJldHVybiBpc1N0cmluZyhpZE9yTmFtZSkgPyBpZE9yTmFtZSA6IGlzTnVtYmVyKGlkT3JOYW1lKSB8fCBpc1N0cmluZ1NhZmUoaWRPck5hbWUpID8gaWRPck5hbWUgKyAnJyA6IGRlZmF1bHRWYWx1ZTtcbn1cblxuZnVuY3Rpb24gd2FybkludmFsaWRhdGVJZE9yTmFtZShpZE9yTmFtZSkge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHdhcm4oJ2AnICsgaWRPck5hbWUgKyAnYCBpcyBpbnZhbGlkIGlkIG9yIG5hbWUuIE11c3QgYmUgYSBzdHJpbmcgb3IgbnVtYmVyLicpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzVmFsaWRJZE9yTmFtZShpZE9yTmFtZSkge1xuICByZXR1cm4gaXNTdHJpbmdTYWZlKGlkT3JOYW1lKSB8fCBpc051bWVyaWMoaWRPck5hbWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOYW1lU3BlY2lmaWVkKGNvbXBvbmVudE1vZGVsKSB7XG4gIHZhciBuYW1lID0gY29tcG9uZW50TW9kZWwubmFtZTsgLy8gSXMgc3BlY2lmaWVkIHdoZW4gYGluZGV4T2ZgIGdldCAtMSBvciA+IDAuXG5cbiAgcmV0dXJuICEhKG5hbWUgJiYgbmFtZS5pbmRleE9mKERVTU1ZX0NPTVBPTkVOVF9OQU1FX1BSRUZJWCkpO1xufVxuLyoqXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHtPYmplY3R9IGNtcHRPcHRpb25cclxuICogQHJldHVybiB7Ym9vbGVhbn1cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpc0NvbXBvbmVudElkSW50ZXJuYWwoY21wdE9wdGlvbikge1xuICByZXR1cm4gY21wdE9wdGlvbiAmJiBjbXB0T3B0aW9uLmlkICE9IG51bGwgJiYgbWFrZUNvbXBhcmFibGVLZXkoY21wdE9wdGlvbi5pZCkuaW5kZXhPZihJTlRFUk5BTF9DT01QT05FTlRfSURfUFJFRklYKSA9PT0gMDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYWtlSW50ZXJuYWxDb21wb25lbnRJZChpZFN1ZmZpeCkge1xuICByZXR1cm4gSU5URVJOQUxfQ09NUE9ORU5UX0lEX1BSRUZJWCArIGlkU3VmZml4O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNldENvbXBvbmVudFR5cGVUb0tleUluZm8obWFwcGluZ1Jlc3VsdCwgbWFpblR5cGUsIGNvbXBvbmVudE1vZGVsQ3Rvcikge1xuICAvLyBTZXQgbWFpblR5cGUgYW5kIGNvbXBsZXRlIHN1YlR5cGUuXG4gIGVhY2gobWFwcGluZ1Jlc3VsdCwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICB2YXIgbmV3T3B0aW9uID0gaXRlbS5uZXdPcHRpb247XG5cbiAgICBpZiAoaXNPYmplY3QobmV3T3B0aW9uKSkge1xuICAgICAgaXRlbS5rZXlJbmZvLm1haW5UeXBlID0gbWFpblR5cGU7XG4gICAgICBpdGVtLmtleUluZm8uc3ViVHlwZSA9IGRldGVybWluZVN1YlR5cGUobWFpblR5cGUsIG5ld09wdGlvbiwgaXRlbS5leGlzdGluZywgY29tcG9uZW50TW9kZWxDdG9yKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBkZXRlcm1pbmVTdWJUeXBlKG1haW5UeXBlLCBuZXdDbXB0T3B0aW9uLCBleGlzdENvbXBvbmVudCwgY29tcG9uZW50TW9kZWxDdG9yKSB7XG4gIHZhciBzdWJUeXBlID0gbmV3Q21wdE9wdGlvbi50eXBlID8gbmV3Q21wdE9wdGlvbi50eXBlIDogZXhpc3RDb21wb25lbnQgPyBleGlzdENvbXBvbmVudC5zdWJUeXBlIC8vIFVzZSBkZXRlcm1pbmVTdWJUeXBlIG9ubHkgd2hlbiB0aGVyZSBpcyBubyBleGlzdENvbXBvbmVudC5cbiAgOiBjb21wb25lbnRNb2RlbEN0b3IuZGV0ZXJtaW5lU3ViVHlwZShtYWluVHlwZSwgbmV3Q21wdE9wdGlvbik7IC8vIHRvb2x0aXAsIG1hcmtsaW5lLCBtYXJrcG9pbnQgbWF5IGFsd2F5cyBoYXMgbm8gc3ViVHlwZVxuXG4gIHJldHVybiBzdWJUeXBlO1xufVxuLyoqXHJcbiAqIEEgaGVscGVyIGZvciByZW1vdmluZyBkdXBsaWNhdGUgaXRlbXMgYmV0d2VlbiBiYXRjaEEgYW5kIGJhdGNoQixcclxuICogYW5kIGluIHRoZW1zZWx2ZXMsIGFuZCBjYXRlZ29yaXplIGJ5IHNlcmllcy5cclxuICpcclxuICogQHBhcmFtIGJhdGNoQSBMaWtlOiBbe3Nlcmllc0lkOiAyLCBkYXRhSW5kZXg6IFszMiwgNCwgNV19LCAuLi5dXHJcbiAqIEBwYXJhbSBiYXRjaEIgTGlrZTogW3tzZXJpZXNJZDogMiwgZGF0YUluZGV4OiBbMzIsIDQsIDVdfSwgLi4uXVxyXG4gKiBAcmV0dXJuIHJlc3VsdDogW3Jlc3VsdEJhdGNoQSwgcmVzdWx0QmF0Y2hCXVxyXG4gKi9cblxuXG5leHBvcnQgZnVuY3Rpb24gY29tcHJlc3NCYXRjaGVzKGJhdGNoQSwgYmF0Y2hCKSB7XG4gIHZhciBtYXBBID0ge307XG4gIHZhciBtYXBCID0ge307XG4gIG1ha2VNYXAoYmF0Y2hBIHx8IFtdLCBtYXBBKTtcbiAgbWFrZU1hcChiYXRjaEIgfHwgW10sIG1hcEIsIG1hcEEpO1xuICByZXR1cm4gW21hcFRvQXJyYXkobWFwQSksIG1hcFRvQXJyYXkobWFwQildO1xuXG4gIGZ1bmN0aW9uIG1ha2VNYXAoc291cmNlQmF0Y2gsIG1hcCwgb3RoZXJNYXApIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc291cmNlQmF0Y2gubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHZhciBzZXJpZXNJZCA9IGNvbnZlcnRPcHRpb25JZE5hbWUoc291cmNlQmF0Y2hbaV0uc2VyaWVzSWQsIG51bGwpO1xuXG4gICAgICBpZiAoc2VyaWVzSWQgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBkYXRhSW5kaWNlcyA9IG5vcm1hbGl6ZVRvQXJyYXkoc291cmNlQmF0Y2hbaV0uZGF0YUluZGV4KTtcbiAgICAgIHZhciBvdGhlckRhdGFJbmRpY2VzID0gb3RoZXJNYXAgJiYgb3RoZXJNYXBbc2VyaWVzSWRdO1xuXG4gICAgICBmb3IgKHZhciBqID0gMCwgbGVuaiA9IGRhdGFJbmRpY2VzLmxlbmd0aDsgaiA8IGxlbmo7IGorKykge1xuICAgICAgICB2YXIgZGF0YUluZGV4ID0gZGF0YUluZGljZXNbal07XG5cbiAgICAgICAgaWYgKG90aGVyRGF0YUluZGljZXMgJiYgb3RoZXJEYXRhSW5kaWNlc1tkYXRhSW5kZXhdKSB7XG4gICAgICAgICAgb3RoZXJEYXRhSW5kaWNlc1tkYXRhSW5kZXhdID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAobWFwW3Nlcmllc0lkXSB8fCAobWFwW3Nlcmllc0lkXSA9IHt9KSlbZGF0YUluZGV4XSA9IDE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBtYXBUb0FycmF5KG1hcCwgaXNEYXRhKSB7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSBpbiBtYXApIHtcbiAgICAgIGlmIChtYXAuaGFzT3duUHJvcGVydHkoaSkgJiYgbWFwW2ldICE9IG51bGwpIHtcbiAgICAgICAgaWYgKGlzRGF0YSkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKCtpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgZGF0YUluZGljZXMgPSBtYXBUb0FycmF5KG1hcFtpXSwgdHJ1ZSk7XG4gICAgICAgICAgZGF0YUluZGljZXMubGVuZ3RoICYmIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgIHNlcmllc0lkOiBpLFxuICAgICAgICAgICAgZGF0YUluZGV4OiBkYXRhSW5kaWNlc1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufVxuLyoqXHJcbiAqIEBwYXJhbSBwYXlsb2FkIENvbnRhaW5zIGRhdGFJbmRleCAobWVhbnMgcmF3SW5kZXgpIC8gZGF0YUluZGV4SW5zaWRlIC8gbmFtZVxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICBlYWNoIG9mIHdoaWNoIGNhbiBiZSBBcnJheSBvciBwcmltYXJ5IHR5cGUuXHJcbiAqIEByZXR1cm4gZGF0YUluZGV4IElmIG5vdCBmb3VuZCwgcmV0dXJuIHVuZGVmaW5lZC9udWxsLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHF1ZXJ5RGF0YUluZGV4KGRhdGEsIHBheWxvYWQpIHtcbiAgaWYgKHBheWxvYWQuZGF0YUluZGV4SW5zaWRlICE9IG51bGwpIHtcbiAgICByZXR1cm4gcGF5bG9hZC5kYXRhSW5kZXhJbnNpZGU7XG4gIH0gZWxzZSBpZiAocGF5bG9hZC5kYXRhSW5kZXggIT0gbnVsbCkge1xuICAgIHJldHVybiBpc0FycmF5KHBheWxvYWQuZGF0YUluZGV4KSA/IG1hcChwYXlsb2FkLmRhdGFJbmRleCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICByZXR1cm4gZGF0YS5pbmRleE9mUmF3SW5kZXgodmFsdWUpO1xuICAgIH0pIDogZGF0YS5pbmRleE9mUmF3SW5kZXgocGF5bG9hZC5kYXRhSW5kZXgpO1xuICB9IGVsc2UgaWYgKHBheWxvYWQubmFtZSAhPSBudWxsKSB7XG4gICAgcmV0dXJuIGlzQXJyYXkocGF5bG9hZC5uYW1lKSA/IG1hcChwYXlsb2FkLm5hbWUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGRhdGEuaW5kZXhPZk5hbWUodmFsdWUpO1xuICAgIH0pIDogZGF0YS5pbmRleE9mTmFtZShwYXlsb2FkLm5hbWUpO1xuICB9XG59XG4vKipcclxuICogRW5hYmxlIHByb3BlcnR5IHN0b3JhZ2UgdG8gYW55IGhvc3Qgb2JqZWN0LlxyXG4gKiBOb3RpY2U6IFNlcmlhbGl6YXRpb24gaXMgbm90IHN1cHBvcnRlZC5cclxuICpcclxuICogRm9yIGV4YW1wbGU6XHJcbiAqIGxldCBpbm5lciA9IHpyVWl0bC5tYWtlSW5uZXIoKTtcclxuICpcclxuICogZnVuY3Rpb24gc29tZTEoaG9zdE9iaikge1xyXG4gKiAgICAgIGlubmVyKGhvc3RPYmopLnNvbWVQcm9wZXJ0eSA9IDEyMTI7XHJcbiAqICAgICAgLi4uXHJcbiAqIH1cclxuICogZnVuY3Rpb24gc29tZTIoKSB7XHJcbiAqICAgICAgbGV0IGZpZWxkcyA9IGlubmVyKHRoaXMpO1xyXG4gKiAgICAgIGZpZWxkcy5zb21lUHJvcGVydHkxID0gMTIxMjtcclxuICogICAgICBmaWVsZHMuc29tZVByb3BlcnR5MiA9ICd4eCc7XHJcbiAqICAgICAgLi4uXHJcbiAqIH1cclxuICpcclxuICogQHJldHVybiB7RnVuY3Rpb259XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbWFrZUlubmVyKCkge1xuICB2YXIga2V5ID0gJ19fZWNfaW5uZXJfJyArIGlubmVyVW5pcXVlSW5kZXgrKztcbiAgcmV0dXJuIGZ1bmN0aW9uIChob3N0T2JqKSB7XG4gICAgcmV0dXJuIGhvc3RPYmpba2V5XSB8fCAoaG9zdE9ialtrZXldID0ge30pO1xuICB9O1xufVxudmFyIGlubmVyVW5pcXVlSW5kZXggPSBnZXRSYW5kb21JZEJhc2UoKTtcbi8qKlxyXG4gKiBUaGUgc2FtZSBiZWhhdmlvciBhcyBgY29tcG9uZW50LmdldFJlZmVycmluZ0NvbXBvbmVudHNgLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRmluZGVyKGVjTW9kZWwsIGZpbmRlcklucHV0LCBvcHQpIHtcbiAgdmFyIF9hID0gcHJlUGFyc2VGaW5kZXIoZmluZGVySW5wdXQsIG9wdCksXG4gICAgICBtYWluVHlwZVNwZWNpZmllZCA9IF9hLm1haW5UeXBlU3BlY2lmaWVkLFxuICAgICAgcXVlcnlPcHRpb25NYXAgPSBfYS5xdWVyeU9wdGlvbk1hcCxcbiAgICAgIG90aGVycyA9IF9hLm90aGVycztcblxuICB2YXIgcmVzdWx0ID0gb3RoZXJzO1xuICB2YXIgZGVmYXVsdE1haW5UeXBlID0gb3B0ID8gb3B0LmRlZmF1bHRNYWluVHlwZSA6IG51bGw7XG5cbiAgaWYgKCFtYWluVHlwZVNwZWNpZmllZCAmJiBkZWZhdWx0TWFpblR5cGUpIHtcbiAgICBxdWVyeU9wdGlvbk1hcC5zZXQoZGVmYXVsdE1haW5UeXBlLCB7fSk7XG4gIH1cblxuICBxdWVyeU9wdGlvbk1hcC5lYWNoKGZ1bmN0aW9uIChxdWVyeU9wdGlvbiwgbWFpblR5cGUpIHtcbiAgICB2YXIgcXVlcnlSZXN1bHQgPSBxdWVyeVJlZmVycmluZ0NvbXBvbmVudHMoZWNNb2RlbCwgbWFpblR5cGUsIHF1ZXJ5T3B0aW9uLCB7XG4gICAgICB1c2VEZWZhdWx0OiBkZWZhdWx0TWFpblR5cGUgPT09IG1haW5UeXBlLFxuICAgICAgZW5hYmxlQWxsOiBvcHQgJiYgb3B0LmVuYWJsZUFsbCAhPSBudWxsID8gb3B0LmVuYWJsZUFsbCA6IHRydWUsXG4gICAgICBlbmFibGVOb25lOiBvcHQgJiYgb3B0LmVuYWJsZU5vbmUgIT0gbnVsbCA/IG9wdC5lbmFibGVOb25lIDogdHJ1ZVxuICAgIH0pO1xuICAgIHJlc3VsdFttYWluVHlwZSArICdNb2RlbHMnXSA9IHF1ZXJ5UmVzdWx0Lm1vZGVscztcbiAgICByZXN1bHRbbWFpblR5cGUgKyAnTW9kZWwnXSA9IHF1ZXJ5UmVzdWx0Lm1vZGVsc1swXTtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5leHBvcnQgZnVuY3Rpb24gcHJlUGFyc2VGaW5kZXIoZmluZGVySW5wdXQsIG9wdCkge1xuICB2YXIgZmluZGVyO1xuXG4gIGlmIChpc1N0cmluZyhmaW5kZXJJbnB1dCkpIHtcbiAgICB2YXIgb2JqID0ge307XG4gICAgb2JqW2ZpbmRlcklucHV0ICsgJ0luZGV4J10gPSAwO1xuICAgIGZpbmRlciA9IG9iajtcbiAgfSBlbHNlIHtcbiAgICBmaW5kZXIgPSBmaW5kZXJJbnB1dDtcbiAgfVxuXG4gIHZhciBxdWVyeU9wdGlvbk1hcCA9IGNyZWF0ZUhhc2hNYXAoKTtcbiAgdmFyIG90aGVycyA9IHt9O1xuICB2YXIgbWFpblR5cGVTcGVjaWZpZWQgPSBmYWxzZTtcbiAgZWFjaChmaW5kZXIsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgLy8gRXhjbHVkZSAnZGF0YUluZGV4JyBhbmQgb3RoZXIgaWxsZ2FsIGtleXMuXG4gICAgaWYgKGtleSA9PT0gJ2RhdGFJbmRleCcgfHwga2V5ID09PSAnZGF0YUluZGV4SW5zaWRlJykge1xuICAgICAgb3RoZXJzW2tleV0gPSB2YWx1ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgcGFyc2VkS2V5ID0ga2V5Lm1hdGNoKC9eKFxcdyspKEluZGV4fElkfE5hbWUpJC8pIHx8IFtdO1xuICAgIHZhciBtYWluVHlwZSA9IHBhcnNlZEtleVsxXTtcbiAgICB2YXIgcXVlcnlUeXBlID0gKHBhcnNlZEtleVsyXSB8fCAnJykudG9Mb3dlckNhc2UoKTtcblxuICAgIGlmICghbWFpblR5cGUgfHwgIXF1ZXJ5VHlwZSB8fCBvcHQgJiYgb3B0LmluY2x1ZGVNYWluVHlwZXMgJiYgaW5kZXhPZihvcHQuaW5jbHVkZU1haW5UeXBlcywgbWFpblR5cGUpIDwgMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG1haW5UeXBlU3BlY2lmaWVkID0gbWFpblR5cGVTcGVjaWZpZWQgfHwgISFtYWluVHlwZTtcbiAgICB2YXIgcXVlcnlPcHRpb24gPSBxdWVyeU9wdGlvbk1hcC5nZXQobWFpblR5cGUpIHx8IHF1ZXJ5T3B0aW9uTWFwLnNldChtYWluVHlwZSwge30pO1xuICAgIHF1ZXJ5T3B0aW9uW3F1ZXJ5VHlwZV0gPSB2YWx1ZTtcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgbWFpblR5cGVTcGVjaWZpZWQ6IG1haW5UeXBlU3BlY2lmaWVkLFxuICAgIHF1ZXJ5T3B0aW9uTWFwOiBxdWVyeU9wdGlvbk1hcCxcbiAgICBvdGhlcnM6IG90aGVyc1xuICB9O1xufVxuZXhwb3J0IHZhciBTSU5HTEVfUkVGRVJSSU5HID0ge1xuICB1c2VEZWZhdWx0OiB0cnVlLFxuICBlbmFibGVBbGw6IGZhbHNlLFxuICBlbmFibGVOb25lOiBmYWxzZVxufTtcbmV4cG9ydCB2YXIgTVVMVElQTEVfUkVGRVJSSU5HID0ge1xuICB1c2VEZWZhdWx0OiBmYWxzZSxcbiAgZW5hYmxlQWxsOiB0cnVlLFxuICBlbmFibGVOb25lOiB0cnVlXG59O1xuZXhwb3J0IGZ1bmN0aW9uIHF1ZXJ5UmVmZXJyaW5nQ29tcG9uZW50cyhlY01vZGVsLCBtYWluVHlwZSwgdXNlck9wdGlvbiwgb3B0KSB7XG4gIG9wdCA9IG9wdCB8fCBTSU5HTEVfUkVGRVJSSU5HO1xuICB2YXIgaW5kZXhPcHRpb24gPSB1c2VyT3B0aW9uLmluZGV4O1xuICB2YXIgaWRPcHRpb24gPSB1c2VyT3B0aW9uLmlkO1xuICB2YXIgbmFtZU9wdGlvbiA9IHVzZXJPcHRpb24ubmFtZTtcbiAgdmFyIHJlc3VsdCA9IHtcbiAgICBtb2RlbHM6IG51bGwsXG4gICAgc3BlY2lmaWVkOiBpbmRleE9wdGlvbiAhPSBudWxsIHx8IGlkT3B0aW9uICE9IG51bGwgfHwgbmFtZU9wdGlvbiAhPSBudWxsXG4gIH07XG5cbiAgaWYgKCFyZXN1bHQuc3BlY2lmaWVkKSB7XG4gICAgLy8gVXNlIHRoZSBmaXJzdCBhcyBkZWZhdWx0IGlmIGB1c2VEZWZhdWx0YC5cbiAgICB2YXIgZmlyc3RDbXB0ID0gdm9pZCAwO1xuICAgIHJlc3VsdC5tb2RlbHMgPSBvcHQudXNlRGVmYXVsdCAmJiAoZmlyc3RDbXB0ID0gZWNNb2RlbC5nZXRDb21wb25lbnQobWFpblR5cGUpKSA/IFtmaXJzdENtcHRdIDogW107XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGlmIChpbmRleE9wdGlvbiA9PT0gJ25vbmUnIHx8IGluZGV4T3B0aW9uID09PSBmYWxzZSkge1xuICAgIGFzc2VydChvcHQuZW5hYmxlTm9uZSwgJ2BcIm5vbmVcImAgb3IgYGZhbHNlYCBpcyBub3QgYSB2YWxpZCB2YWx1ZSBvbiBpbmRleCBvcHRpb24uJyk7XG4gICAgcmVzdWx0Lm1vZGVscyA9IFtdO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH0gLy8gYHF1ZXJ5Q29tcG9uZW50c2Agd2lsbCByZXR1cm4gYWxsIGNvbXBvbmVudHMgaWZcbiAgLy8gYm90aCBhbGwgb2YgaW5kZXgvaWQvbmFtZSBhcmUgbnVsbC91bmRlZmluZWQuXG5cblxuICBpZiAoaW5kZXhPcHRpb24gPT09ICdhbGwnKSB7XG4gICAgYXNzZXJ0KG9wdC5lbmFibGVBbGwsICdgXCJhbGxcImAgaXMgbm90IGEgdmFsaWQgdmFsdWUgb24gaW5kZXggb3B0aW9uLicpO1xuICAgIGluZGV4T3B0aW9uID0gaWRPcHRpb24gPSBuYW1lT3B0aW9uID0gbnVsbDtcbiAgfVxuXG4gIHJlc3VsdC5tb2RlbHMgPSBlY01vZGVsLnF1ZXJ5Q29tcG9uZW50cyh7XG4gICAgbWFpblR5cGU6IG1haW5UeXBlLFxuICAgIGluZGV4OiBpbmRleE9wdGlvbixcbiAgICBpZDogaWRPcHRpb24sXG4gICAgbmFtZTogbmFtZU9wdGlvblxuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXRBdHRyaWJ1dGUoZG9tLCBrZXksIHZhbHVlKSB7XG4gIGRvbS5zZXRBdHRyaWJ1dGUgPyBkb20uc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpIDogZG9tW2tleV0gPSB2YWx1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRBdHRyaWJ1dGUoZG9tLCBrZXkpIHtcbiAgcmV0dXJuIGRvbS5nZXRBdHRyaWJ1dGUgPyBkb20uZ2V0QXR0cmlidXRlKGtleSkgOiBkb21ba2V5XTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb29sdGlwUmVuZGVyTW9kZShyZW5kZXJNb2RlT3B0aW9uKSB7XG4gIGlmIChyZW5kZXJNb2RlT3B0aW9uID09PSAnYXV0bycpIHtcbiAgICAvLyBVc2luZyBodG1sIHdoZW4gYGRvY3VtZW50YCBleGlzdHMsIHVzZSByaWNoVGV4dCBvdGhlcndpc2VcbiAgICByZXR1cm4gZW52LmRvbVN1cHBvcnRlZCA/ICdodG1sJyA6ICdyaWNoVGV4dCc7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHJlbmRlck1vZGVPcHRpb24gfHwgJ2h0bWwnO1xuICB9XG59XG4vKipcclxuICogR3JvdXAgYSBsaXN0IGJ5IGtleS5cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBncm91cERhdGEoYXJyYXksIGdldEtleSAvLyByZXR1cm4ga2V5XG4pIHtcbiAgdmFyIGJ1Y2tldHMgPSBjcmVhdGVIYXNoTWFwKCk7XG4gIHZhciBrZXlzID0gW107XG4gIGVhY2goYXJyYXksIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgdmFyIGtleSA9IGdldEtleShpdGVtKTtcbiAgICAoYnVja2V0cy5nZXQoa2V5KSB8fCAoa2V5cy5wdXNoKGtleSksIGJ1Y2tldHMuc2V0KGtleSwgW10pKSkucHVzaChpdGVtKTtcbiAgfSk7XG4gIHJldHVybiB7XG4gICAga2V5czoga2V5cyxcbiAgICBidWNrZXRzOiBidWNrZXRzXG4gIH07XG59XG4vKipcclxuICogSW50ZXJwb2xhdGUgcmF3IHZhbHVlcyBvZiBhIHNlcmllcyB3aXRoIHBlcmNlbnRcclxuICpcclxuICogQHBhcmFtIGRhdGEgICAgICAgICBkYXRhXHJcbiAqIEBwYXJhbSBsYWJlbE1vZGVsICAgbGFiZWwgbW9kZWwgb2YgdGhlIHRleHQgZWxlbWVudFxyXG4gKiBAcGFyYW0gc291cmNlVmFsdWUgIHN0YXJ0IHZhbHVlLiBNYXkgYmUgbnVsbC91bmRlZmluZWQgd2hlbiBpbml0LlxyXG4gKiBAcGFyYW0gdGFyZ2V0VmFsdWUgIGVuZCB2YWx1ZVxyXG4gKiBAcGFyYW0gcGVyY2VudCAgICAgIDB+MSBwZXJjZW50YWdlOyAwIHVzZXMgc3RhcnQgdmFsdWUgd2hpbGUgMSB1c2VzIGVuZCB2YWx1ZVxyXG4gKiBAcmV0dXJuICAgICAgICAgICAgIGludGVycG9sYXRlZCB2YWx1ZXNcclxuICogICAgICAgICAgICAgICAgICAgICBJZiBgc291cmNlVmFsdWVgIGFuZCBgdGFyZ2V0VmFsdWVgIGFyZSBgbnVtYmVyYCwgcmV0dXJuIGBudW1iZXJgLlxyXG4gKiAgICAgICAgICAgICAgICAgICAgIElmIGBzb3VyY2VWYWx1ZWAgYW5kIGB0YXJnZXRWYWx1ZWAgYXJlIGBzdHJpbmdgLCByZXR1cm4gYHN0cmluZ2AuXHJcbiAqICAgICAgICAgICAgICAgICAgICAgSWYgYHNvdXJjZVZhbHVlYCBhbmQgYHRhcmdldFZhbHVlYCBhcmUgYChzdHJpbmcgfCBudW1iZXIpW11gLCByZXR1cm4gYChzdHJpbmcgfCBudW1iZXIpW11gLlxyXG4gKiAgICAgICAgICAgICAgICAgICAgIE90aGVyIGNhc2VzIGRvIG5vdCBzdXBwb3J0ZWQuXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJwb2xhdGVSYXdWYWx1ZXMoZGF0YSwgcHJlY2lzaW9uLCBzb3VyY2VWYWx1ZSwgdGFyZ2V0VmFsdWUsIHBlcmNlbnQpIHtcbiAgdmFyIGlzQXV0b1ByZWNpc2lvbiA9IHByZWNpc2lvbiA9PSBudWxsIHx8IHByZWNpc2lvbiA9PT0gJ2F1dG8nO1xuXG4gIGlmICh0YXJnZXRWYWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHRhcmdldFZhbHVlO1xuICB9XG5cbiAgaWYgKGlzTnVtYmVyKHRhcmdldFZhbHVlKSkge1xuICAgIHZhciB2YWx1ZSA9IGludGVycG9sYXRlTnVtYmVyKHNvdXJjZVZhbHVlIHx8IDAsIHRhcmdldFZhbHVlLCBwZXJjZW50KTtcbiAgICByZXR1cm4gcm91bmQodmFsdWUsIGlzQXV0b1ByZWNpc2lvbiA/IE1hdGgubWF4KGdldFByZWNpc2lvbihzb3VyY2VWYWx1ZSB8fCAwKSwgZ2V0UHJlY2lzaW9uKHRhcmdldFZhbHVlKSkgOiBwcmVjaXNpb24pO1xuICB9IGVsc2UgaWYgKGlzU3RyaW5nKHRhcmdldFZhbHVlKSkge1xuICAgIHJldHVybiBwZXJjZW50IDwgMSA/IHNvdXJjZVZhbHVlIDogdGFyZ2V0VmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGludGVycG9sYXRlZCA9IFtdO1xuICAgIHZhciBsZWZ0QXJyID0gc291cmNlVmFsdWU7XG4gICAgdmFyIHJpZ2h0QXJyID0gdGFyZ2V0VmFsdWU7XG4gICAgdmFyIGxlbmd0aF8xID0gTWF0aC5tYXgobGVmdEFyciA/IGxlZnRBcnIubGVuZ3RoIDogMCwgcmlnaHRBcnIubGVuZ3RoKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoXzE7ICsraSkge1xuICAgICAgdmFyIGluZm8gPSBkYXRhLmdldERpbWVuc2lvbkluZm8oaSk7IC8vIERvbid0IGludGVycG9sYXRlIG9yZGluYWwgZGltc1xuXG4gICAgICBpZiAoaW5mbyAmJiBpbmZvLnR5cGUgPT09ICdvcmRpbmFsJykge1xuICAgICAgICAvLyBJbiBpbml0LCB0aGVyZSBpcyBubyBgc291cmNlVmFsdWVgLCBidXQgc2hvdWxkIGJldHRlciBub3QgdG8gZ2V0IHVuZGVmaW5lZCByZXN1bHQuXG4gICAgICAgIGludGVycG9sYXRlZFtpXSA9IChwZXJjZW50IDwgMSAmJiBsZWZ0QXJyID8gbGVmdEFyciA6IHJpZ2h0QXJyKVtpXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBsZWZ0VmFsID0gbGVmdEFyciAmJiBsZWZ0QXJyW2ldID8gbGVmdEFycltpXSA6IDA7XG4gICAgICAgIHZhciByaWdodFZhbCA9IHJpZ2h0QXJyW2ldO1xuICAgICAgICB2YXIgdmFsdWUgPSBpbnRlcnBvbGF0ZU51bWJlcihsZWZ0VmFsLCByaWdodFZhbCwgcGVyY2VudCk7XG4gICAgICAgIGludGVycG9sYXRlZFtpXSA9IHJvdW5kKHZhbHVlLCBpc0F1dG9QcmVjaXNpb24gPyBNYXRoLm1heChnZXRQcmVjaXNpb24obGVmdFZhbCksIGdldFByZWNpc2lvbihyaWdodFZhbCkpIDogcHJlY2lzaW9uKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaW50ZXJwb2xhdGVkO1xuICB9XG59IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCAqIGFzIHpyVXRpbCBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xudmFyIFRZUEVfREVMSU1JVEVSID0gJy4nO1xudmFyIElTX0NPTlRBSU5FUiA9ICdfX19FQ19fQ09NUE9ORU5UX19DT05UQUlORVJfX18nO1xudmFyIElTX0VYVEVOREVEX0NMQVNTID0gJ19fX0VDX19FWFRFTkRFRF9DTEFTU19fXyc7XG4vKipcclxuICogTm90aWNlLCBwYXJzZUNsYXNzVHlwZSgnJykgc2hvdWxkIHJldHVybnMge21haW46ICcnLCBzdWI6ICcnfVxyXG4gKiBAcHVibGljXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VDbGFzc1R5cGUoY29tcG9uZW50VHlwZSkge1xuICB2YXIgcmV0ID0ge1xuICAgIG1haW46ICcnLFxuICAgIHN1YjogJydcbiAgfTtcblxuICBpZiAoY29tcG9uZW50VHlwZSkge1xuICAgIHZhciB0eXBlQXJyID0gY29tcG9uZW50VHlwZS5zcGxpdChUWVBFX0RFTElNSVRFUik7XG4gICAgcmV0Lm1haW4gPSB0eXBlQXJyWzBdIHx8ICcnO1xuICAgIHJldC5zdWIgPSB0eXBlQXJyWzFdIHx8ICcnO1xuICB9XG5cbiAgcmV0dXJuIHJldDtcbn1cbi8qKlxyXG4gKiBAcHVibGljXHJcbiAqL1xuXG5mdW5jdGlvbiBjaGVja0NsYXNzVHlwZShjb21wb25lbnRUeXBlKSB7XG4gIHpyVXRpbC5hc3NlcnQoL15bYS16QS1aMC05X10rKFsuXVthLXpBLVowLTlfXSspPyQvLnRlc3QoY29tcG9uZW50VHlwZSksICdjb21wb25lbnRUeXBlIFwiJyArIGNvbXBvbmVudFR5cGUgKyAnXCIgaWxsZWdhbCcpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNFeHRlbmRlZENsYXNzKGNseikge1xuICByZXR1cm4gISEoY2x6ICYmIGNseltJU19FWFRFTkRFRF9DTEFTU10pO1xufVxuLyoqXHJcbiAqIEltcGxlbWVudHMgYEV4dGVuZGFibGVDb25zdHJ1Y3RvcmAgZm9yIGByb290Q2x6YC5cclxuICpcclxuICogQHVzYWdlXHJcbiAqIGBgYHRzXHJcbiAqIGNsYXNzIFh4eCB7fVxyXG4gKiB0eXBlIFh4eENvbnN0cnVjdG9yID0gdHlwZW9mIFh4eCAmIEV4dGVuZGFibGVDb25zdHJ1Y3RvclxyXG4gKiBlbmFibGVDbGFzc0V4dGVuZChYeHggYXMgWHh4Q29uc3RydWN0b3IpO1xyXG4gKiBgYGBcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBlbmFibGVDbGFzc0V4dGVuZChyb290Q2x6LCBtYW5kYXRvcnlNZXRob2RzKSB7XG4gIHJvb3RDbHouJGNvbnN0cnVjdG9yID0gcm9vdENsejsgLy8gRklYTUU6IG5vdCBuZWNlc3Nhcnk/XG5cbiAgcm9vdENsei5leHRlbmQgPSBmdW5jdGlvbiAocHJvdG8pIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgenJVdGlsLmVhY2gobWFuZGF0b3J5TWV0aG9kcywgZnVuY3Rpb24gKG1ldGhvZCkge1xuICAgICAgICBpZiAoIXByb3RvW21ldGhvZF0pIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ01ldGhvZCBgJyArIG1ldGhvZCArICdgIHNob3VsZCBiZSBpbXBsZW1lbnRlZCcgKyAocHJvdG8udHlwZSA/ICcgaW4gJyArIHByb3RvLnR5cGUgOiAnJykgKyAnLicpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgc3VwZXJDbGFzcyA9IHRoaXM7XG4gICAgdmFyIEV4dGVuZGVkQ2xhc3M7XG5cbiAgICBpZiAoaXNFU0NsYXNzKHN1cGVyQ2xhc3MpKSB7XG4gICAgICBFeHRlbmRlZENsYXNzID1cbiAgICAgIC8qKiBAY2xhc3MgKi9cbiAgICAgIGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKGNsYXNzXzEsIF9zdXBlcik7XG5cbiAgICAgICAgZnVuY3Rpb24gY2xhc3NfMSgpIHtcbiAgICAgICAgICByZXR1cm4gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjbGFzc18xO1xuICAgICAgfShzdXBlckNsYXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRm9yIGJhY2t3YXJkIGNvbXBhdCwgd2UgYm90aCBzdXBwb3J0IHRzIGNsYXNzIGluaGVyaXRhbmNlIGFuZCB0aGlzXG4gICAgICAvLyBcImV4dGVuZFwiIGFwcHJvYWNoLlxuICAgICAgLy8gVGhlIGNvbnN0cnVjdG9yIHNob3VsZCBrZWVwIHRoZSBzYW1lIGJlaGF2aW9yIGFzIHRzIGNsYXNzIGluaGVyaXRhbmNlOlxuICAgICAgLy8gSWYgdGhpcyBjb25zdHJ1Y3Rvci8kY29uc3RydWN0b3IgaXMgbm90IGRlY2xhcmVkLCBhdXRvIGludm9rZSB0aGUgc3VwZXJcbiAgICAgIC8vIGNvbnN0cnVjdG9yLlxuICAgICAgLy8gSWYgdGhpcyBjb25zdHJ1Y3Rvci8kY29uc3RydWN0b3IgaXMgZGVjbGFyZWQsIGl0IGlzIHJlc3BvbnNpYmxlIGZvclxuICAgICAgLy8gY2FsbGluZyB0aGUgc3VwZXIgY29uc3RydWN0b3IuXG4gICAgICBFeHRlbmRlZENsYXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAocHJvdG8uJGNvbnN0cnVjdG9yIHx8IHN1cGVyQ2xhc3MpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuXG4gICAgICB6clV0aWwuaW5oZXJpdHMoRXh0ZW5kZWRDbGFzcywgdGhpcyk7XG4gICAgfVxuXG4gICAgenJVdGlsLmV4dGVuZChFeHRlbmRlZENsYXNzLnByb3RvdHlwZSwgcHJvdG8pO1xuICAgIEV4dGVuZGVkQ2xhc3NbSVNfRVhURU5ERURfQ0xBU1NdID0gdHJ1ZTtcbiAgICBFeHRlbmRlZENsYXNzLmV4dGVuZCA9IHRoaXMuZXh0ZW5kO1xuICAgIEV4dGVuZGVkQ2xhc3Muc3VwZXJDYWxsID0gc3VwZXJDYWxsO1xuICAgIEV4dGVuZGVkQ2xhc3Muc3VwZXJBcHBseSA9IHN1cGVyQXBwbHk7XG4gICAgRXh0ZW5kZWRDbGFzcy5zdXBlckNsYXNzID0gc3VwZXJDbGFzcztcbiAgICByZXR1cm4gRXh0ZW5kZWRDbGFzcztcbiAgfTtcbn1cblxuZnVuY3Rpb24gaXNFU0NsYXNzKGZuKSB7XG4gIHJldHVybiB6clV0aWwuaXNGdW5jdGlvbihmbikgJiYgL15jbGFzc1xccy8udGVzdChGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChmbikpO1xufVxuLyoqXHJcbiAqIEEgd29yayBhcm91bmQgdG8gYm90aCBzdXBwb3J0IHRzIGV4dGVuZCBhbmQgdGhpcyBleHRlbmQgbWVjaGFuaXNtLlxyXG4gKiBvbiBzdWItY2xhc3MuXHJcbiAqIEB1c2FnZVxyXG4gKiBgYGB0c1xyXG4gKiBjbGFzcyBDb21wb25lbnQgeyAuLi4gfVxyXG4gKiBjbGFzc1V0aWwuZW5hYmxlQ2xhc3NFeHRlbmQoQ29tcG9uZW50KTtcclxuICogY2xhc3NVdGlsLmVuYWJsZUNsYXNzTWFuYWdlbWVudChDb21wb25lbnQsIHtyZWdpc3RlcldoZW5FeHRlbmQ6IHRydWV9KTtcclxuICpcclxuICogY2xhc3MgU2VyaWVzIGV4dGVuZHMgQ29tcG9uZW50IHsgLi4uIH1cclxuICogLy8gV2l0aG91dCBjYWxsaW5nIGBtYXJrRXh0ZW5kYCwgYHJlZ2lzdGVyV2hlbkV4dGVuZGAgd2lsbCBub3Qgd29yay5cclxuICogQ29tcG9uZW50Lm1hcmtFeHRlbmQoU2VyaWVzKTtcclxuICogYGBgXHJcbiAqL1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBtb3VudEV4dGVuZChTdWJDbHosIFN1cHBlckNseikge1xuICBTdWJDbHouZXh0ZW5kID0gU3VwcGVyQ2x6LmV4dGVuZDtcbn0gLy8gQSByYW5kb20gb2Zmc2V0LlxuXG52YXIgY2xhc3NCYXNlID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTApO1xuLyoqXHJcbiAqIEltcGxlbWVudHMgYENoZWNrYWJsZUNvbnN0cnVjdG9yYCBmb3IgYHRhcmdldGAuXHJcbiAqIENhbiBub3QgdXNlIGluc3RhbmNlb2YsIGNvbnNpZGVyIGRpZmZlcmVudCBzY29wZSBieVxyXG4gKiBjcm9zcyBkb21haW4gb3IgZXMgbW9kdWxlIGltcG9ydCBpbiBlYyBleHRlbnNpb25zLlxyXG4gKiBNb3VudCBhIG1ldGhvZCBcImlzSW5zdGFuY2UoKVwiIHRvIENsei5cclxuICpcclxuICogQHVzYWdlXHJcbiAqIGBgYHRzXHJcbiAqIGNsYXNzIFh4eCB7fVxyXG4gKiB0eXBlIFh4eENvbnN0cnVjdG9yID0gdHlwZW9mIFh4eCAmIENoZWNrYWJsZUNvbnN0cnVjdG9yO1xyXG4gKiBlbmFibGVDbGFzc0NoZWNrKFh4eCBhcyBYeHhDb25zdHJ1Y3RvcilcclxuICogYGBgXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZW5hYmxlQ2xhc3NDaGVjayh0YXJnZXQpIHtcbiAgdmFyIGNsYXNzQXR0ciA9IFsnX19cXDBpc19jbHonLCBjbGFzc0Jhc2UrK10uam9pbignXycpO1xuICB0YXJnZXQucHJvdG90eXBlW2NsYXNzQXR0cl0gPSB0cnVlO1xuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgenJVdGlsLmFzc2VydCghdGFyZ2V0LmlzSW5zdGFuY2UsICdUaGUgbWV0aG9kIFwiaXNcIiBjYW4gbm90IGJlIGRlZmluZWQuJyk7XG4gIH1cblxuICB0YXJnZXQuaXNJbnN0YW5jZSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICByZXR1cm4gISEob2JqICYmIG9ialtjbGFzc0F0dHJdKTtcbiAgfTtcbn0gLy8gc3VwZXJDYWxsIHNob3VsZCBoYXZlIGNsYXNzIGluZm8sIHdoaWNoIGNhbiBub3QgYmUgZmV0Y2hlZCBmcm9tICd0aGlzJy5cbi8vIENvbnNpZGVyIHRoaXMgY2FzZTpcbi8vIGNsYXNzIEEgaGFzIG1ldGhvZCBmLFxuLy8gY2xhc3MgQiBpbmhlcml0cyBjbGFzcyBBLCBvdmVycmlkZXMgbWV0aG9kIGYsIGYgY2FsbCBzdXBlckFwcGx5KCdmJyksXG4vLyBjbGFzcyBDIGluaGVyaXRzIGNsYXNzIEIsIGRvZXMgbm90IG92ZXJyaWRlIG1ldGhvZCBmLFxuLy8gdGhlbiB3aGVuIG1ldGhvZCBvZiBjbGFzcyBDIGlzIGNhbGxlZCwgZGVhZCBsb29wIG9jY3VycmVkLlxuXG5mdW5jdGlvbiBzdXBlckNhbGwoY29udGV4dCwgbWV0aG9kTmFtZSkge1xuICB2YXIgYXJncyA9IFtdO1xuXG4gIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgYXJnc1tfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcbiAgfVxuXG4gIHJldHVybiB0aGlzLnN1cGVyQ2xhc3MucHJvdG90eXBlW21ldGhvZE5hbWVdLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xufVxuXG5mdW5jdGlvbiBzdXBlckFwcGx5KGNvbnRleHQsIG1ldGhvZE5hbWUsIGFyZ3MpIHtcbiAgcmV0dXJuIHRoaXMuc3VwZXJDbGFzcy5wcm90b3R5cGVbbWV0aG9kTmFtZV0uYXBwbHkoY29udGV4dCwgYXJncyk7XG59XG4vKipcclxuICogSW1wbGVtZW50cyBgQ2xhc3NNYW5hZ2VyYCBmb3IgYHRhcmdldGBcclxuICpcclxuICogQHVzYWdlXHJcbiAqIGBgYHRzXHJcbiAqIGNsYXNzIFh4eCB7fVxyXG4gKiB0eXBlIFh4eENvbnN0cnVjdG9yID0gdHlwZW9mIFh4eCAmIENsYXNzTWFuYWdlclxyXG4gKiBlbmFibGVDbGFzc01hbmFnZW1lbnQoWHh4IGFzIFh4eENvbnN0cnVjdG9yKTtcclxuICogYGBgXHJcbiAqL1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBlbmFibGVDbGFzc01hbmFnZW1lbnQodGFyZ2V0KSB7XG4gIC8qKlxyXG4gICAqIENvbXBvbmVudCBtb2RlbCBjbGFzc2VzXHJcbiAgICoga2V5OiBjb21wb25lbnRUeXBlLFxyXG4gICAqIHZhbHVlOlxyXG4gICAqICAgICBjb21wb25lbnRDbGFzcywgd2hlbiBjb21wb25lbnRUeXBlIGlzICdhJ1xyXG4gICAqICAgICBvciBPYmplY3QuPHN1YktleSwgY29tcG9uZW50Q2xhc3M+LCB3aGVuIGNvbXBvbmVudFR5cGUgaXMgJ2EuYidcclxuICAgKi9cbiAgdmFyIHN0b3JhZ2UgPSB7fTtcblxuICB0YXJnZXQucmVnaXN0ZXJDbGFzcyA9IGZ1bmN0aW9uIChjbHopIHtcbiAgICAvLyBgdHlwZWAgc2hvdWxkIG5vdCBiZSBhIFwiaW5zdGFuY2UgbWVtYmVyXCIuXG4gICAgLy8gSWYgdXNpbmcgVFMgY2xhc3MsIHNob3VsZCBiZXR0ZXIgZGVjbGFyZWQgYXMgYHN0YXRpYyB0eXBlID0gJ3Nlcmllcy5waWUnYC5cbiAgICAvLyBvdGhlcndpc2UgdXNlcnMgaGF2ZSB0byBtb3VudCBgdHlwZWAgb24gcHJvdG90eXBlIG1hbnVhbGx5LlxuICAgIC8vIEZvciBiYWNrd2FyZCBjb21wYXQgYW5kIGVuYWJsZSBpbnN0YW5jZSB2aXNpdCB0eXBlIHZpYSBgdGhpcy50eXBlYCxcbiAgICAvLyB3ZSBzdGlsbCBzdXBwb3J0IGZldGNoIGB0eXBlYCBmcm9tIHByb3RvdHlwZS5cbiAgICB2YXIgY29tcG9uZW50RnVsbFR5cGUgPSBjbHoudHlwZSB8fCBjbHoucHJvdG90eXBlLnR5cGU7XG5cbiAgICBpZiAoY29tcG9uZW50RnVsbFR5cGUpIHtcbiAgICAgIGNoZWNrQ2xhc3NUeXBlKGNvbXBvbmVudEZ1bGxUeXBlKTsgLy8gSWYgb25seSBzdGF0aWMgdHlwZSBkZWNsYXJlZCwgd2UgYXNzaWduIGl0IHRvIHByb3RvdHlwZSBtYW5kYXRvcmlseS5cblxuICAgICAgY2x6LnByb3RvdHlwZS50eXBlID0gY29tcG9uZW50RnVsbFR5cGU7XG4gICAgICB2YXIgY29tcG9uZW50VHlwZUluZm8gPSBwYXJzZUNsYXNzVHlwZShjb21wb25lbnRGdWxsVHlwZSk7XG5cbiAgICAgIGlmICghY29tcG9uZW50VHlwZUluZm8uc3ViKSB7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgaWYgKHN0b3JhZ2VbY29tcG9uZW50VHlwZUluZm8ubWFpbl0pIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2Fybihjb21wb25lbnRUeXBlSW5mby5tYWluICsgJyBleGlzdHMuJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgc3RvcmFnZVtjb21wb25lbnRUeXBlSW5mby5tYWluXSA9IGNsejtcbiAgICAgIH0gZWxzZSBpZiAoY29tcG9uZW50VHlwZUluZm8uc3ViICE9PSBJU19DT05UQUlORVIpIHtcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IG1ha2VDb250YWluZXIoY29tcG9uZW50VHlwZUluZm8pO1xuICAgICAgICBjb250YWluZXJbY29tcG9uZW50VHlwZUluZm8uc3ViXSA9IGNsejtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY2x6O1xuICB9O1xuXG4gIHRhcmdldC5nZXRDbGFzcyA9IGZ1bmN0aW9uIChtYWluVHlwZSwgc3ViVHlwZSwgdGhyb3dXaGVuTm90Rm91bmQpIHtcbiAgICB2YXIgY2x6ID0gc3RvcmFnZVttYWluVHlwZV07XG5cbiAgICBpZiAoY2x6ICYmIGNseltJU19DT05UQUlORVJdKSB7XG4gICAgICBjbHogPSBzdWJUeXBlID8gY2x6W3N1YlR5cGVdIDogbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhyb3dXaGVuTm90Rm91bmQgJiYgIWNseikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCFzdWJUeXBlID8gbWFpblR5cGUgKyAnLicgKyAndHlwZSBzaG91bGQgYmUgc3BlY2lmaWVkLicgOiAnQ29tcG9uZW50ICcgKyBtYWluVHlwZSArICcuJyArIChzdWJUeXBlIHx8ICcnKSArICcgaXMgdXNlZCBidXQgbm90IGltcG9ydGVkLicpO1xuICAgIH1cblxuICAgIHJldHVybiBjbHo7XG4gIH07XG5cbiAgdGFyZ2V0LmdldENsYXNzZXNCeU1haW5UeXBlID0gZnVuY3Rpb24gKGNvbXBvbmVudFR5cGUpIHtcbiAgICB2YXIgY29tcG9uZW50VHlwZUluZm8gPSBwYXJzZUNsYXNzVHlwZShjb21wb25lbnRUeXBlKTtcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgdmFyIG9iaiA9IHN0b3JhZ2VbY29tcG9uZW50VHlwZUluZm8ubWFpbl07XG5cbiAgICBpZiAob2JqICYmIG9ialtJU19DT05UQUlORVJdKSB7XG4gICAgICB6clV0aWwuZWFjaChvYmosIGZ1bmN0aW9uIChvLCB0eXBlKSB7XG4gICAgICAgIHR5cGUgIT09IElTX0NPTlRBSU5FUiAmJiByZXN1bHQucHVzaChvKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQucHVzaChvYmopO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgdGFyZ2V0Lmhhc0NsYXNzID0gZnVuY3Rpb24gKGNvbXBvbmVudFR5cGUpIHtcbiAgICAvLyBKdXN0IGNvbnNpZGVyIGNvbXBvbmVudFR5cGUubWFpbi5cbiAgICB2YXIgY29tcG9uZW50VHlwZUluZm8gPSBwYXJzZUNsYXNzVHlwZShjb21wb25lbnRUeXBlKTtcbiAgICByZXR1cm4gISFzdG9yYWdlW2NvbXBvbmVudFR5cGVJbmZvLm1haW5dO1xuICB9O1xuICAvKipcclxuICAgKiBAcmV0dXJuIExpa2UgWydhYScsICdiYiddLCBidXQgY2FuIG5vdCBiZSBbJ2FhLnh4J11cclxuICAgKi9cblxuXG4gIHRhcmdldC5nZXRBbGxDbGFzc01haW5UeXBlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdHlwZXMgPSBbXTtcbiAgICB6clV0aWwuZWFjaChzdG9yYWdlLCBmdW5jdGlvbiAob2JqLCB0eXBlKSB7XG4gICAgICB0eXBlcy5wdXNoKHR5cGUpO1xuICAgIH0pO1xuICAgIHJldHVybiB0eXBlcztcbiAgfTtcbiAgLyoqXHJcbiAgICogSWYgYSBtYWluIHR5cGUgaXMgY29udGFpbmVyIGFuZCBoYXMgc3ViIHR5cGVzXHJcbiAgICovXG5cblxuICB0YXJnZXQuaGFzU3ViVHlwZXMgPSBmdW5jdGlvbiAoY29tcG9uZW50VHlwZSkge1xuICAgIHZhciBjb21wb25lbnRUeXBlSW5mbyA9IHBhcnNlQ2xhc3NUeXBlKGNvbXBvbmVudFR5cGUpO1xuICAgIHZhciBvYmogPSBzdG9yYWdlW2NvbXBvbmVudFR5cGVJbmZvLm1haW5dO1xuICAgIHJldHVybiBvYmogJiYgb2JqW0lTX0NPTlRBSU5FUl07XG4gIH07XG5cbiAgZnVuY3Rpb24gbWFrZUNvbnRhaW5lcihjb21wb25lbnRUeXBlSW5mbykge1xuICAgIHZhciBjb250YWluZXIgPSBzdG9yYWdlW2NvbXBvbmVudFR5cGVJbmZvLm1haW5dO1xuXG4gICAgaWYgKCFjb250YWluZXIgfHwgIWNvbnRhaW5lcltJU19DT05UQUlORVJdKSB7XG4gICAgICBjb250YWluZXIgPSBzdG9yYWdlW2NvbXBvbmVudFR5cGVJbmZvLm1haW5dID0ge307XG4gICAgICBjb250YWluZXJbSVNfQ09OVEFJTkVSXSA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgfVxufSAvLyAvKipcbi8vICAqIEBwYXJhbSB7c3RyaW5nfEFycmF5LjxzdHJpbmc+fSBwcm9wZXJ0aWVzXG4vLyAgKi9cbi8vIGV4cG9ydCBmdW5jdGlvbiBzZXRSZWFkT25seShvYmosIHByb3BlcnRpZXMpIHtcbi8vIEZJWE1FIEl0IHNlZW1zIGJyb2tlbiBpbiBJRTggc2ltdWxhdGlvbiBvZiBJRTExXG4vLyBpZiAoIXpyVXRpbC5pc0FycmF5KHByb3BlcnRpZXMpKSB7XG4vLyAgICAgcHJvcGVydGllcyA9IHByb3BlcnRpZXMgIT0gbnVsbCA/IFtwcm9wZXJ0aWVzXSA6IFtdO1xuLy8gfVxuLy8genJVdGlsLmVhY2gocHJvcGVydGllcywgZnVuY3Rpb24gKHByb3ApIHtcbi8vICAgICBsZXQgdmFsdWUgPSBvYmpbcHJvcF07XG4vLyAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5XG4vLyAgICAgICAgICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIHByb3AsIHtcbi8vICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSwgd3JpdGFibGU6IGZhbHNlXG4vLyAgICAgICAgIH0pO1xuLy8gICAgIHpyVXRpbC5pc0FycmF5KG9ialtwcm9wXSlcbi8vICAgICAgICAgJiYgT2JqZWN0LmZyZWV6ZVxuLy8gICAgICAgICAmJiBPYmplY3QuZnJlZXplKG9ialtwcm9wXSk7XG4vLyB9KTtcbi8vIH0iLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbi8vIFRPRE8gUGFyc2Ugc2hhZG93IHN0eWxlXG4vLyBUT0RPIE9ubHkgc2hhbGxvdyBwYXRoIHN1cHBvcnRcbmltcG9ydCAqIGFzIHpyVXRpbCBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWFrZVN0eWxlTWFwcGVyKHByb3BlcnRpZXMsIGlnbm9yZVBhcmVudCkge1xuICAvLyBOb3JtYWxpemVcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wZXJ0aWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKCFwcm9wZXJ0aWVzW2ldWzFdKSB7XG4gICAgICBwcm9wZXJ0aWVzW2ldWzFdID0gcHJvcGVydGllc1tpXVswXTtcbiAgICB9XG4gIH1cblxuICBpZ25vcmVQYXJlbnQgPSBpZ25vcmVQYXJlbnQgfHwgZmFsc2U7XG4gIHJldHVybiBmdW5jdGlvbiAobW9kZWwsIGV4Y2x1ZGVzLCBpbmNsdWRlcykge1xuICAgIHZhciBzdHlsZSA9IHt9O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wZXJ0aWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcHJvcE5hbWUgPSBwcm9wZXJ0aWVzW2ldWzFdO1xuXG4gICAgICBpZiAoZXhjbHVkZXMgJiYgenJVdGlsLmluZGV4T2YoZXhjbHVkZXMsIHByb3BOYW1lKSA+PSAwIHx8IGluY2x1ZGVzICYmIHpyVXRpbC5pbmRleE9mKGluY2x1ZGVzLCBwcm9wTmFtZSkgPCAwKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICB2YXIgdmFsID0gbW9kZWwuZ2V0U2hhbGxvdyhwcm9wTmFtZSwgaWdub3JlUGFyZW50KTtcblxuICAgICAgaWYgKHZhbCAhPSBudWxsKSB7XG4gICAgICAgIHN0eWxlW3Byb3BlcnRpZXNbaV1bMF1dID0gdmFsO1xuICAgICAgfVxuICAgIH0gLy8gVE9ETyBUZXh0IG9yIGltYWdlP1xuXG5cbiAgICByZXR1cm4gc3R5bGU7XG4gIH07XG59IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgbWFrZVN0eWxlTWFwcGVyIGZyb20gJy4vbWFrZVN0eWxlTWFwcGVyLmpzJztcbmV4cG9ydCB2YXIgQVJFQV9TVFlMRV9LRVlfTUFQID0gW1snZmlsbCcsICdjb2xvciddLCBbJ3NoYWRvd0JsdXInXSwgWydzaGFkb3dPZmZzZXRYJ10sIFsnc2hhZG93T2Zmc2V0WSddLCBbJ29wYWNpdHknXSwgWydzaGFkb3dDb2xvciddIC8vIE9wdGlvbiBkZWNhbCBpcyBpbiBgRGVjYWxPYmplY3RgIGJ1dCBzdHlsZS5kZWNhbCBpcyBpbiBgUGF0dGVybk9iamVjdGAuXG4vLyBTbyBkbyBub3QgdHJhbnNmZXIgZGVjYWwgZGlyZWN0bHkuXG5dO1xudmFyIGdldEFyZWFTdHlsZSA9IG1ha2VTdHlsZU1hcHBlcihBUkVBX1NUWUxFX0tFWV9NQVApO1xuXG52YXIgQXJlYVN0eWxlTWl4aW4gPVxuLyoqIEBjbGFzcyAqL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBBcmVhU3R5bGVNaXhpbigpIHt9XG5cbiAgQXJlYVN0eWxlTWl4aW4ucHJvdG90eXBlLmdldEFyZWFTdHlsZSA9IGZ1bmN0aW9uIChleGNsdWRlcywgaW5jbHVkZXMpIHtcbiAgICByZXR1cm4gZ2V0QXJlYVN0eWxlKHRoaXMsIGV4Y2x1ZGVzLCBpbmNsdWRlcyk7XG4gIH07XG5cbiAgcmV0dXJuIEFyZWFTdHlsZU1peGluO1xufSgpO1xuXG47XG5leHBvcnQgeyBBcmVhU3R5bGVNaXhpbiB9OyIsImltcG9ydCBMUlUgZnJvbSAnLi4vLi4vY29yZS9MUlUuanMnO1xuaW1wb3J0IHsgcGxhdGZvcm1BcGkgfSBmcm9tICcuLi8uLi9jb3JlL3BsYXRmb3JtLmpzJztcbnZhciBnbG9iYWxJbWFnZUNhY2hlID0gbmV3IExSVSg1MCk7XG5leHBvcnQgZnVuY3Rpb24gZmluZEV4aXN0SW1hZ2UobmV3SW1hZ2VPclNyYykge1xuICAgIGlmICh0eXBlb2YgbmV3SW1hZ2VPclNyYyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdmFyIGNhY2hlZEltZ09iaiA9IGdsb2JhbEltYWdlQ2FjaGUuZ2V0KG5ld0ltYWdlT3JTcmMpO1xuICAgICAgICByZXR1cm4gY2FjaGVkSW1nT2JqICYmIGNhY2hlZEltZ09iai5pbWFnZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXdJbWFnZU9yU3JjO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUltYWdlKG5ld0ltYWdlT3JTcmMsIGltYWdlLCBob3N0RWwsIG9ubG9hZCwgY2JQYXlsb2FkKSB7XG4gICAgaWYgKCFuZXdJbWFnZU9yU3JjKSB7XG4gICAgICAgIHJldHVybiBpbWFnZTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIG5ld0ltYWdlT3JTcmMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICgoaW1hZ2UgJiYgaW1hZ2UuX196ckltYWdlU3JjID09PSBuZXdJbWFnZU9yU3JjKSB8fCAhaG9zdEVsKSB7XG4gICAgICAgICAgICByZXR1cm4gaW1hZ2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNhY2hlZEltZ09iaiA9IGdsb2JhbEltYWdlQ2FjaGUuZ2V0KG5ld0ltYWdlT3JTcmMpO1xuICAgICAgICB2YXIgcGVuZGluZ1dyYXAgPSB7IGhvc3RFbDogaG9zdEVsLCBjYjogb25sb2FkLCBjYlBheWxvYWQ6IGNiUGF5bG9hZCB9O1xuICAgICAgICBpZiAoY2FjaGVkSW1nT2JqKSB7XG4gICAgICAgICAgICBpbWFnZSA9IGNhY2hlZEltZ09iai5pbWFnZTtcbiAgICAgICAgICAgICFpc0ltYWdlUmVhZHkoaW1hZ2UpICYmIGNhY2hlZEltZ09iai5wZW5kaW5nLnB1c2gocGVuZGluZ1dyYXApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW1hZ2UgPSBwbGF0Zm9ybUFwaS5sb2FkSW1hZ2UobmV3SW1hZ2VPclNyYywgaW1hZ2VPbkxvYWQsIGltYWdlT25Mb2FkKTtcbiAgICAgICAgICAgIGltYWdlLl9fenJJbWFnZVNyYyA9IG5ld0ltYWdlT3JTcmM7XG4gICAgICAgICAgICBnbG9iYWxJbWFnZUNhY2hlLnB1dChuZXdJbWFnZU9yU3JjLCBpbWFnZS5fX2NhY2hlZEltZ09iaiA9IHtcbiAgICAgICAgICAgICAgICBpbWFnZTogaW1hZ2UsXG4gICAgICAgICAgICAgICAgcGVuZGluZzogW3BlbmRpbmdXcmFwXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGltYWdlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ld0ltYWdlT3JTcmM7XG4gICAgfVxufVxuZnVuY3Rpb24gaW1hZ2VPbkxvYWQoKSB7XG4gICAgdmFyIGNhY2hlZEltZ09iaiA9IHRoaXMuX19jYWNoZWRJbWdPYmo7XG4gICAgdGhpcy5vbmxvYWQgPSB0aGlzLm9uZXJyb3IgPSB0aGlzLl9fY2FjaGVkSW1nT2JqID0gbnVsbDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNhY2hlZEltZ09iai5wZW5kaW5nLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBwZW5kaW5nV3JhcCA9IGNhY2hlZEltZ09iai5wZW5kaW5nW2ldO1xuICAgICAgICB2YXIgY2IgPSBwZW5kaW5nV3JhcC5jYjtcbiAgICAgICAgY2IgJiYgY2IodGhpcywgcGVuZGluZ1dyYXAuY2JQYXlsb2FkKTtcbiAgICAgICAgcGVuZGluZ1dyYXAuaG9zdEVsLmRpcnR5KCk7XG4gICAgfVxuICAgIGNhY2hlZEltZ09iai5wZW5kaW5nLmxlbmd0aCA9IDA7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNJbWFnZVJlYWR5KGltYWdlKSB7XG4gICAgcmV0dXJuIGltYWdlICYmIGltYWdlLndpZHRoICYmIGltYWdlLmhlaWdodDtcbn1cbiIsImltcG9ydCAqIGFzIGltYWdlSGVscGVyIGZyb20gJy4uL2hlbHBlci9pbWFnZS5qcyc7XG5pbXBvcnQgeyBleHRlbmQsIHJldHJpZXZlMiwgcmV0cmlldmUzLCByZWR1Y2UgfSBmcm9tICcuLi8uLi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0IHsgZ2V0TGluZUhlaWdodCwgZ2V0V2lkdGgsIHBhcnNlUGVyY2VudCB9IGZyb20gJy4uLy4uL2NvbnRhaW4vdGV4dC5qcyc7XG52YXIgU1RZTEVfUkVHID0gL1xceyhbYS16QS1aMC05X10rKVxcfChbXn1dKilcXH0vZztcbmV4cG9ydCBmdW5jdGlvbiB0cnVuY2F0ZVRleHQodGV4dCwgY29udGFpbmVyV2lkdGgsIGZvbnQsIGVsbGlwc2lzLCBvcHRpb25zKSB7XG4gICAgaWYgKCFjb250YWluZXJXaWR0aCkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIHZhciB0ZXh0TGluZXMgPSAodGV4dCArICcnKS5zcGxpdCgnXFxuJyk7XG4gICAgb3B0aW9ucyA9IHByZXBhcmVUcnVuY2F0ZU9wdGlvbnMoY29udGFpbmVyV2lkdGgsIGZvbnQsIGVsbGlwc2lzLCBvcHRpb25zKTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGV4dExpbmVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHRleHRMaW5lc1tpXSA9IHRydW5jYXRlU2luZ2xlTGluZSh0ZXh0TGluZXNbaV0sIG9wdGlvbnMpO1xuICAgIH1cbiAgICByZXR1cm4gdGV4dExpbmVzLmpvaW4oJ1xcbicpO1xufVxuZnVuY3Rpb24gcHJlcGFyZVRydW5jYXRlT3B0aW9ucyhjb250YWluZXJXaWR0aCwgZm9udCwgZWxsaXBzaXMsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgcHJlcGFyZWRPcHRzID0gZXh0ZW5kKHt9LCBvcHRpb25zKTtcbiAgICBwcmVwYXJlZE9wdHMuZm9udCA9IGZvbnQ7XG4gICAgZWxsaXBzaXMgPSByZXRyaWV2ZTIoZWxsaXBzaXMsICcuLi4nKTtcbiAgICBwcmVwYXJlZE9wdHMubWF4SXRlcmF0aW9ucyA9IHJldHJpZXZlMihvcHRpb25zLm1heEl0ZXJhdGlvbnMsIDIpO1xuICAgIHZhciBtaW5DaGFyID0gcHJlcGFyZWRPcHRzLm1pbkNoYXIgPSByZXRyaWV2ZTIob3B0aW9ucy5taW5DaGFyLCAwKTtcbiAgICBwcmVwYXJlZE9wdHMuY25DaGFyV2lkdGggPSBnZXRXaWR0aCgn5Zu9JywgZm9udCk7XG4gICAgdmFyIGFzY0NoYXJXaWR0aCA9IHByZXBhcmVkT3B0cy5hc2NDaGFyV2lkdGggPSBnZXRXaWR0aCgnYScsIGZvbnQpO1xuICAgIHByZXBhcmVkT3B0cy5wbGFjZWhvbGRlciA9IHJldHJpZXZlMihvcHRpb25zLnBsYWNlaG9sZGVyLCAnJyk7XG4gICAgdmFyIGNvbnRlbnRXaWR0aCA9IGNvbnRhaW5lcldpZHRoID0gTWF0aC5tYXgoMCwgY29udGFpbmVyV2lkdGggLSAxKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1pbkNoYXIgJiYgY29udGVudFdpZHRoID49IGFzY0NoYXJXaWR0aDsgaSsrKSB7XG4gICAgICAgIGNvbnRlbnRXaWR0aCAtPSBhc2NDaGFyV2lkdGg7XG4gICAgfVxuICAgIHZhciBlbGxpcHNpc1dpZHRoID0gZ2V0V2lkdGgoZWxsaXBzaXMsIGZvbnQpO1xuICAgIGlmIChlbGxpcHNpc1dpZHRoID4gY29udGVudFdpZHRoKSB7XG4gICAgICAgIGVsbGlwc2lzID0gJyc7XG4gICAgICAgIGVsbGlwc2lzV2lkdGggPSAwO1xuICAgIH1cbiAgICBjb250ZW50V2lkdGggPSBjb250YWluZXJXaWR0aCAtIGVsbGlwc2lzV2lkdGg7XG4gICAgcHJlcGFyZWRPcHRzLmVsbGlwc2lzID0gZWxsaXBzaXM7XG4gICAgcHJlcGFyZWRPcHRzLmVsbGlwc2lzV2lkdGggPSBlbGxpcHNpc1dpZHRoO1xuICAgIHByZXBhcmVkT3B0cy5jb250ZW50V2lkdGggPSBjb250ZW50V2lkdGg7XG4gICAgcHJlcGFyZWRPcHRzLmNvbnRhaW5lcldpZHRoID0gY29udGFpbmVyV2lkdGg7XG4gICAgcmV0dXJuIHByZXBhcmVkT3B0cztcbn1cbmZ1bmN0aW9uIHRydW5jYXRlU2luZ2xlTGluZSh0ZXh0TGluZSwgb3B0aW9ucykge1xuICAgIHZhciBjb250YWluZXJXaWR0aCA9IG9wdGlvbnMuY29udGFpbmVyV2lkdGg7XG4gICAgdmFyIGZvbnQgPSBvcHRpb25zLmZvbnQ7XG4gICAgdmFyIGNvbnRlbnRXaWR0aCA9IG9wdGlvbnMuY29udGVudFdpZHRoO1xuICAgIGlmICghY29udGFpbmVyV2lkdGgpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICB2YXIgbGluZVdpZHRoID0gZ2V0V2lkdGgodGV4dExpbmUsIGZvbnQpO1xuICAgIGlmIChsaW5lV2lkdGggPD0gY29udGFpbmVyV2lkdGgpIHtcbiAgICAgICAgcmV0dXJuIHRleHRMaW5lO1xuICAgIH1cbiAgICBmb3IgKHZhciBqID0gMDs7IGorKykge1xuICAgICAgICBpZiAobGluZVdpZHRoIDw9IGNvbnRlbnRXaWR0aCB8fCBqID49IG9wdGlvbnMubWF4SXRlcmF0aW9ucykge1xuICAgICAgICAgICAgdGV4dExpbmUgKz0gb3B0aW9ucy5lbGxpcHNpcztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdWJMZW5ndGggPSBqID09PSAwXG4gICAgICAgICAgICA/IGVzdGltYXRlTGVuZ3RoKHRleHRMaW5lLCBjb250ZW50V2lkdGgsIG9wdGlvbnMuYXNjQ2hhcldpZHRoLCBvcHRpb25zLmNuQ2hhcldpZHRoKVxuICAgICAgICAgICAgOiBsaW5lV2lkdGggPiAwXG4gICAgICAgICAgICAgICAgPyBNYXRoLmZsb29yKHRleHRMaW5lLmxlbmd0aCAqIGNvbnRlbnRXaWR0aCAvIGxpbmVXaWR0aClcbiAgICAgICAgICAgICAgICA6IDA7XG4gICAgICAgIHRleHRMaW5lID0gdGV4dExpbmUuc3Vic3RyKDAsIHN1Ykxlbmd0aCk7XG4gICAgICAgIGxpbmVXaWR0aCA9IGdldFdpZHRoKHRleHRMaW5lLCBmb250KTtcbiAgICB9XG4gICAgaWYgKHRleHRMaW5lID09PSAnJykge1xuICAgICAgICB0ZXh0TGluZSA9IG9wdGlvbnMucGxhY2Vob2xkZXI7XG4gICAgfVxuICAgIHJldHVybiB0ZXh0TGluZTtcbn1cbmZ1bmN0aW9uIGVzdGltYXRlTGVuZ3RoKHRleHQsIGNvbnRlbnRXaWR0aCwgYXNjQ2hhcldpZHRoLCBjbkNoYXJXaWR0aCkge1xuICAgIHZhciB3aWR0aCA9IDA7XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAodmFyIGxlbiA9IHRleHQubGVuZ3RoOyBpIDwgbGVuICYmIHdpZHRoIDwgY29udGVudFdpZHRoOyBpKyspIHtcbiAgICAgICAgdmFyIGNoYXJDb2RlID0gdGV4dC5jaGFyQ29kZUF0KGkpO1xuICAgICAgICB3aWR0aCArPSAoMCA8PSBjaGFyQ29kZSAmJiBjaGFyQ29kZSA8PSAxMjcpID8gYXNjQ2hhcldpZHRoIDogY25DaGFyV2lkdGg7XG4gICAgfVxuICAgIHJldHVybiBpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUGxhaW5UZXh0KHRleHQsIHN0eWxlKSB7XG4gICAgdGV4dCAhPSBudWxsICYmICh0ZXh0ICs9ICcnKTtcbiAgICB2YXIgb3ZlcmZsb3cgPSBzdHlsZS5vdmVyZmxvdztcbiAgICB2YXIgcGFkZGluZyA9IHN0eWxlLnBhZGRpbmc7XG4gICAgdmFyIGZvbnQgPSBzdHlsZS5mb250O1xuICAgIHZhciB0cnVuY2F0ZSA9IG92ZXJmbG93ID09PSAndHJ1bmNhdGUnO1xuICAgIHZhciBjYWxjdWxhdGVkTGluZUhlaWdodCA9IGdldExpbmVIZWlnaHQoZm9udCk7XG4gICAgdmFyIGxpbmVIZWlnaHQgPSByZXRyaWV2ZTIoc3R5bGUubGluZUhlaWdodCwgY2FsY3VsYXRlZExpbmVIZWlnaHQpO1xuICAgIHZhciBiZ0NvbG9yRHJhd24gPSAhIShzdHlsZS5iYWNrZ3JvdW5kQ29sb3IpO1xuICAgIHZhciB0cnVuY2F0ZUxpbmVPdmVyZmxvdyA9IHN0eWxlLmxpbmVPdmVyZmxvdyA9PT0gJ3RydW5jYXRlJztcbiAgICB2YXIgd2lkdGggPSBzdHlsZS53aWR0aDtcbiAgICB2YXIgbGluZXM7XG4gICAgaWYgKHdpZHRoICE9IG51bGwgJiYgKG92ZXJmbG93ID09PSAnYnJlYWsnIHx8IG92ZXJmbG93ID09PSAnYnJlYWtBbGwnKSkge1xuICAgICAgICBsaW5lcyA9IHRleHQgPyB3cmFwVGV4dCh0ZXh0LCBzdHlsZS5mb250LCB3aWR0aCwgb3ZlcmZsb3cgPT09ICdicmVha0FsbCcsIDApLmxpbmVzIDogW107XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsaW5lcyA9IHRleHQgPyB0ZXh0LnNwbGl0KCdcXG4nKSA6IFtdO1xuICAgIH1cbiAgICB2YXIgY29udGVudEhlaWdodCA9IGxpbmVzLmxlbmd0aCAqIGxpbmVIZWlnaHQ7XG4gICAgdmFyIGhlaWdodCA9IHJldHJpZXZlMihzdHlsZS5oZWlnaHQsIGNvbnRlbnRIZWlnaHQpO1xuICAgIGlmIChjb250ZW50SGVpZ2h0ID4gaGVpZ2h0ICYmIHRydW5jYXRlTGluZU92ZXJmbG93KSB7XG4gICAgICAgIHZhciBsaW5lQ291bnQgPSBNYXRoLmZsb29yKGhlaWdodCAvIGxpbmVIZWlnaHQpO1xuICAgICAgICBsaW5lcyA9IGxpbmVzLnNsaWNlKDAsIGxpbmVDb3VudCk7XG4gICAgfVxuICAgIGlmICh0ZXh0ICYmIHRydW5jYXRlICYmIHdpZHRoICE9IG51bGwpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBwcmVwYXJlVHJ1bmNhdGVPcHRpb25zKHdpZHRoLCBmb250LCBzdHlsZS5lbGxpcHNpcywge1xuICAgICAgICAgICAgbWluQ2hhcjogc3R5bGUudHJ1bmNhdGVNaW5DaGFyLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IHN0eWxlLnBsYWNlaG9sZGVyXG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsaW5lc1tpXSA9IHRydW5jYXRlU2luZ2xlTGluZShsaW5lc1tpXSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIG91dGVySGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHZhciBjb250ZW50V2lkdGggPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29udGVudFdpZHRoID0gTWF0aC5tYXgoZ2V0V2lkdGgobGluZXNbaV0sIGZvbnQpLCBjb250ZW50V2lkdGgpO1xuICAgIH1cbiAgICBpZiAod2lkdGggPT0gbnVsbCkge1xuICAgICAgICB3aWR0aCA9IGNvbnRlbnRXaWR0aDtcbiAgICB9XG4gICAgdmFyIG91dGVyV2lkdGggPSBjb250ZW50V2lkdGg7XG4gICAgaWYgKHBhZGRpbmcpIHtcbiAgICAgICAgb3V0ZXJIZWlnaHQgKz0gcGFkZGluZ1swXSArIHBhZGRpbmdbMl07XG4gICAgICAgIG91dGVyV2lkdGggKz0gcGFkZGluZ1sxXSArIHBhZGRpbmdbM107XG4gICAgICAgIHdpZHRoICs9IHBhZGRpbmdbMV0gKyBwYWRkaW5nWzNdO1xuICAgIH1cbiAgICBpZiAoYmdDb2xvckRyYXduKSB7XG4gICAgICAgIG91dGVyV2lkdGggPSB3aWR0aDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbGluZXM6IGxpbmVzLFxuICAgICAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICAgICAgb3V0ZXJXaWR0aDogb3V0ZXJXaWR0aCxcbiAgICAgICAgb3V0ZXJIZWlnaHQ6IG91dGVySGVpZ2h0LFxuICAgICAgICBsaW5lSGVpZ2h0OiBsaW5lSGVpZ2h0LFxuICAgICAgICBjYWxjdWxhdGVkTGluZUhlaWdodDogY2FsY3VsYXRlZExpbmVIZWlnaHQsXG4gICAgICAgIGNvbnRlbnRXaWR0aDogY29udGVudFdpZHRoLFxuICAgICAgICBjb250ZW50SGVpZ2h0OiBjb250ZW50SGVpZ2h0LFxuICAgICAgICB3aWR0aDogd2lkdGhcbiAgICB9O1xufVxudmFyIFJpY2hUZXh0VG9rZW4gPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJpY2hUZXh0VG9rZW4oKSB7XG4gICAgfVxuICAgIHJldHVybiBSaWNoVGV4dFRva2VuO1xufSgpKTtcbnZhciBSaWNoVGV4dExpbmUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJpY2hUZXh0TGluZSh0b2tlbnMpIHtcbiAgICAgICAgdGhpcy50b2tlbnMgPSBbXTtcbiAgICAgICAgaWYgKHRva2Vucykge1xuICAgICAgICAgICAgdGhpcy50b2tlbnMgPSB0b2tlbnM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFJpY2hUZXh0TGluZTtcbn0oKSk7XG52YXIgUmljaFRleHRDb250ZW50QmxvY2sgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJpY2hUZXh0Q29udGVudEJsb2NrKCkge1xuICAgICAgICB0aGlzLndpZHRoID0gMDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSAwO1xuICAgICAgICB0aGlzLmNvbnRlbnRXaWR0aCA9IDA7XG4gICAgICAgIHRoaXMuY29udGVudEhlaWdodCA9IDA7XG4gICAgICAgIHRoaXMub3V0ZXJXaWR0aCA9IDA7XG4gICAgICAgIHRoaXMub3V0ZXJIZWlnaHQgPSAwO1xuICAgICAgICB0aGlzLmxpbmVzID0gW107XG4gICAgfVxuICAgIHJldHVybiBSaWNoVGV4dENvbnRlbnRCbG9jaztcbn0oKSk7XG5leHBvcnQgeyBSaWNoVGV4dENvbnRlbnRCbG9jayB9O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUmljaFRleHQodGV4dCwgc3R5bGUpIHtcbiAgICB2YXIgY29udGVudEJsb2NrID0gbmV3IFJpY2hUZXh0Q29udGVudEJsb2NrKCk7XG4gICAgdGV4dCAhPSBudWxsICYmICh0ZXh0ICs9ICcnKTtcbiAgICBpZiAoIXRleHQpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnRCbG9jaztcbiAgICB9XG4gICAgdmFyIHRvcFdpZHRoID0gc3R5bGUud2lkdGg7XG4gICAgdmFyIHRvcEhlaWdodCA9IHN0eWxlLmhlaWdodDtcbiAgICB2YXIgb3ZlcmZsb3cgPSBzdHlsZS5vdmVyZmxvdztcbiAgICB2YXIgd3JhcEluZm8gPSAob3ZlcmZsb3cgPT09ICdicmVhaycgfHwgb3ZlcmZsb3cgPT09ICdicmVha0FsbCcpICYmIHRvcFdpZHRoICE9IG51bGxcbiAgICAgICAgPyB7IHdpZHRoOiB0b3BXaWR0aCwgYWNjdW1XaWR0aDogMCwgYnJlYWtBbGw6IG92ZXJmbG93ID09PSAnYnJlYWtBbGwnIH1cbiAgICAgICAgOiBudWxsO1xuICAgIHZhciBsYXN0SW5kZXggPSBTVFlMRV9SRUcubGFzdEluZGV4ID0gMDtcbiAgICB2YXIgcmVzdWx0O1xuICAgIHdoaWxlICgocmVzdWx0ID0gU1RZTEVfUkVHLmV4ZWModGV4dCkpICE9IG51bGwpIHtcbiAgICAgICAgdmFyIG1hdGNoZWRJbmRleCA9IHJlc3VsdC5pbmRleDtcbiAgICAgICAgaWYgKG1hdGNoZWRJbmRleCA+IGxhc3RJbmRleCkge1xuICAgICAgICAgICAgcHVzaFRva2Vucyhjb250ZW50QmxvY2ssIHRleHQuc3Vic3RyaW5nKGxhc3RJbmRleCwgbWF0Y2hlZEluZGV4KSwgc3R5bGUsIHdyYXBJbmZvKTtcbiAgICAgICAgfVxuICAgICAgICBwdXNoVG9rZW5zKGNvbnRlbnRCbG9jaywgcmVzdWx0WzJdLCBzdHlsZSwgd3JhcEluZm8sIHJlc3VsdFsxXSk7XG4gICAgICAgIGxhc3RJbmRleCA9IFNUWUxFX1JFRy5sYXN0SW5kZXg7XG4gICAgfVxuICAgIGlmIChsYXN0SW5kZXggPCB0ZXh0Lmxlbmd0aCkge1xuICAgICAgICBwdXNoVG9rZW5zKGNvbnRlbnRCbG9jaywgdGV4dC5zdWJzdHJpbmcobGFzdEluZGV4LCB0ZXh0Lmxlbmd0aCksIHN0eWxlLCB3cmFwSW5mbyk7XG4gICAgfVxuICAgIHZhciBwZW5kaW5nTGlzdCA9IFtdO1xuICAgIHZhciBjYWxjdWxhdGVkSGVpZ2h0ID0gMDtcbiAgICB2YXIgY2FsY3VsYXRlZFdpZHRoID0gMDtcbiAgICB2YXIgc3RsUGFkZGluZyA9IHN0eWxlLnBhZGRpbmc7XG4gICAgdmFyIHRydW5jYXRlID0gb3ZlcmZsb3cgPT09ICd0cnVuY2F0ZSc7XG4gICAgdmFyIHRydW5jYXRlTGluZSA9IHN0eWxlLmxpbmVPdmVyZmxvdyA9PT0gJ3RydW5jYXRlJztcbiAgICBmdW5jdGlvbiBmaW5pc2hMaW5lKGxpbmUsIGxpbmVXaWR0aCwgbGluZUhlaWdodCkge1xuICAgICAgICBsaW5lLndpZHRoID0gbGluZVdpZHRoO1xuICAgICAgICBsaW5lLmxpbmVIZWlnaHQgPSBsaW5lSGVpZ2h0O1xuICAgICAgICBjYWxjdWxhdGVkSGVpZ2h0ICs9IGxpbmVIZWlnaHQ7XG4gICAgICAgIGNhbGN1bGF0ZWRXaWR0aCA9IE1hdGgubWF4KGNhbGN1bGF0ZWRXaWR0aCwgbGluZVdpZHRoKTtcbiAgICB9XG4gICAgb3V0ZXI6IGZvciAodmFyIGkgPSAwOyBpIDwgY29udGVudEJsb2NrLmxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBsaW5lID0gY29udGVudEJsb2NrLmxpbmVzW2ldO1xuICAgICAgICB2YXIgbGluZUhlaWdodCA9IDA7XG4gICAgICAgIHZhciBsaW5lV2lkdGggPSAwO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxpbmUudG9rZW5zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICB2YXIgdG9rZW4gPSBsaW5lLnRva2Vuc1tqXTtcbiAgICAgICAgICAgIHZhciB0b2tlblN0eWxlID0gdG9rZW4uc3R5bGVOYW1lICYmIHN0eWxlLnJpY2hbdG9rZW4uc3R5bGVOYW1lXSB8fCB7fTtcbiAgICAgICAgICAgIHZhciB0ZXh0UGFkZGluZyA9IHRva2VuLnRleHRQYWRkaW5nID0gdG9rZW5TdHlsZS5wYWRkaW5nO1xuICAgICAgICAgICAgdmFyIHBhZGRpbmdIID0gdGV4dFBhZGRpbmcgPyB0ZXh0UGFkZGluZ1sxXSArIHRleHRQYWRkaW5nWzNdIDogMDtcbiAgICAgICAgICAgIHZhciBmb250ID0gdG9rZW4uZm9udCA9IHRva2VuU3R5bGUuZm9udCB8fCBzdHlsZS5mb250O1xuICAgICAgICAgICAgdG9rZW4uY29udGVudEhlaWdodCA9IGdldExpbmVIZWlnaHQoZm9udCk7XG4gICAgICAgICAgICB2YXIgdG9rZW5IZWlnaHQgPSByZXRyaWV2ZTIodG9rZW5TdHlsZS5oZWlnaHQsIHRva2VuLmNvbnRlbnRIZWlnaHQpO1xuICAgICAgICAgICAgdG9rZW4uaW5uZXJIZWlnaHQgPSB0b2tlbkhlaWdodDtcbiAgICAgICAgICAgIHRleHRQYWRkaW5nICYmICh0b2tlbkhlaWdodCArPSB0ZXh0UGFkZGluZ1swXSArIHRleHRQYWRkaW5nWzJdKTtcbiAgICAgICAgICAgIHRva2VuLmhlaWdodCA9IHRva2VuSGVpZ2h0O1xuICAgICAgICAgICAgdG9rZW4ubGluZUhlaWdodCA9IHJldHJpZXZlMyh0b2tlblN0eWxlLmxpbmVIZWlnaHQsIHN0eWxlLmxpbmVIZWlnaHQsIHRva2VuSGVpZ2h0KTtcbiAgICAgICAgICAgIHRva2VuLmFsaWduID0gdG9rZW5TdHlsZSAmJiB0b2tlblN0eWxlLmFsaWduIHx8IHN0eWxlLmFsaWduO1xuICAgICAgICAgICAgdG9rZW4udmVydGljYWxBbGlnbiA9IHRva2VuU3R5bGUgJiYgdG9rZW5TdHlsZS52ZXJ0aWNhbEFsaWduIHx8ICdtaWRkbGUnO1xuICAgICAgICAgICAgaWYgKHRydW5jYXRlTGluZSAmJiB0b3BIZWlnaHQgIT0gbnVsbCAmJiBjYWxjdWxhdGVkSGVpZ2h0ICsgdG9rZW4ubGluZUhlaWdodCA+IHRvcEhlaWdodCkge1xuICAgICAgICAgICAgICAgIGlmIChqID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBsaW5lLnRva2VucyA9IGxpbmUudG9rZW5zLnNsaWNlKDAsIGopO1xuICAgICAgICAgICAgICAgICAgICBmaW5pc2hMaW5lKGxpbmUsIGxpbmVXaWR0aCwgbGluZUhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRCbG9jay5saW5lcyA9IGNvbnRlbnRCbG9jay5saW5lcy5zbGljZSgwLCBpICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50QmxvY2subGluZXMgPSBjb250ZW50QmxvY2subGluZXMuc2xpY2UoMCwgaSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrIG91dGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHN0eWxlVG9rZW5XaWR0aCA9IHRva2VuU3R5bGUud2lkdGg7XG4gICAgICAgICAgICB2YXIgdG9rZW5XaWR0aE5vdFNwZWNpZmllZCA9IHN0eWxlVG9rZW5XaWR0aCA9PSBudWxsIHx8IHN0eWxlVG9rZW5XaWR0aCA9PT0gJ2F1dG8nO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBzdHlsZVRva2VuV2lkdGggPT09ICdzdHJpbmcnICYmIHN0eWxlVG9rZW5XaWR0aC5jaGFyQXQoc3R5bGVUb2tlbldpZHRoLmxlbmd0aCAtIDEpID09PSAnJScpIHtcbiAgICAgICAgICAgICAgICB0b2tlbi5wZXJjZW50V2lkdGggPSBzdHlsZVRva2VuV2lkdGg7XG4gICAgICAgICAgICAgICAgcGVuZGluZ0xpc3QucHVzaCh0b2tlbik7XG4gICAgICAgICAgICAgICAgdG9rZW4uY29udGVudFdpZHRoID0gZ2V0V2lkdGgodG9rZW4udGV4dCwgZm9udCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodG9rZW5XaWR0aE5vdFNwZWNpZmllZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dEJhY2tncm91bmRDb2xvciA9IHRva2VuU3R5bGUuYmFja2dyb3VuZENvbG9yO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmdJbWcgPSB0ZXh0QmFja2dyb3VuZENvbG9yICYmIHRleHRCYWNrZ3JvdW5kQ29sb3IuaW1hZ2U7XG4gICAgICAgICAgICAgICAgICAgIGlmIChiZ0ltZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmdJbWcgPSBpbWFnZUhlbHBlci5maW5kRXhpc3RJbWFnZShiZ0ltZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2VIZWxwZXIuaXNJbWFnZVJlYWR5KGJnSW1nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuLndpZHRoID0gTWF0aC5tYXgodG9rZW4ud2lkdGgsIGJnSW1nLndpZHRoICogdG9rZW5IZWlnaHQgLyBiZ0ltZy5oZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciByZW1haW5UcnVuY1dpZHRoID0gdHJ1bmNhdGUgJiYgdG9wV2lkdGggIT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICA/IHRvcFdpZHRoIC0gbGluZVdpZHRoIDogbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAocmVtYWluVHJ1bmNXaWR0aCAhPSBudWxsICYmIHJlbWFpblRydW5jV2lkdGggPCB0b2tlbi53aWR0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRva2VuV2lkdGhOb3RTcGVjaWZpZWQgfHwgcmVtYWluVHJ1bmNXaWR0aCA8IHBhZGRpbmdIKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbi50ZXh0ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbi53aWR0aCA9IHRva2VuLmNvbnRlbnRXaWR0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbi50ZXh0ID0gdHJ1bmNhdGVUZXh0KHRva2VuLnRleHQsIHJlbWFpblRydW5jV2lkdGggLSBwYWRkaW5nSCwgZm9udCwgc3R5bGUuZWxsaXBzaXMsIHsgbWluQ2hhcjogc3R5bGUudHJ1bmNhdGVNaW5DaGFyIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW4ud2lkdGggPSB0b2tlbi5jb250ZW50V2lkdGggPSBnZXRXaWR0aCh0b2tlbi50ZXh0LCBmb250KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdG9rZW4uY29udGVudFdpZHRoID0gZ2V0V2lkdGgodG9rZW4udGV4dCwgZm9udCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG9rZW4ud2lkdGggKz0gcGFkZGluZ0g7XG4gICAgICAgICAgICBsaW5lV2lkdGggKz0gdG9rZW4ud2lkdGg7XG4gICAgICAgICAgICB0b2tlblN0eWxlICYmIChsaW5lSGVpZ2h0ID0gTWF0aC5tYXgobGluZUhlaWdodCwgdG9rZW4ubGluZUhlaWdodCkpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmlzaExpbmUobGluZSwgbGluZVdpZHRoLCBsaW5lSGVpZ2h0KTtcbiAgICB9XG4gICAgY29udGVudEJsb2NrLm91dGVyV2lkdGggPSBjb250ZW50QmxvY2sud2lkdGggPSByZXRyaWV2ZTIodG9wV2lkdGgsIGNhbGN1bGF0ZWRXaWR0aCk7XG4gICAgY29udGVudEJsb2NrLm91dGVySGVpZ2h0ID0gY29udGVudEJsb2NrLmhlaWdodCA9IHJldHJpZXZlMih0b3BIZWlnaHQsIGNhbGN1bGF0ZWRIZWlnaHQpO1xuICAgIGNvbnRlbnRCbG9jay5jb250ZW50SGVpZ2h0ID0gY2FsY3VsYXRlZEhlaWdodDtcbiAgICBjb250ZW50QmxvY2suY29udGVudFdpZHRoID0gY2FsY3VsYXRlZFdpZHRoO1xuICAgIGlmIChzdGxQYWRkaW5nKSB7XG4gICAgICAgIGNvbnRlbnRCbG9jay5vdXRlcldpZHRoICs9IHN0bFBhZGRpbmdbMV0gKyBzdGxQYWRkaW5nWzNdO1xuICAgICAgICBjb250ZW50QmxvY2sub3V0ZXJIZWlnaHQgKz0gc3RsUGFkZGluZ1swXSArIHN0bFBhZGRpbmdbMl07XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGVuZGluZ0xpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHRva2VuID0gcGVuZGluZ0xpc3RbaV07XG4gICAgICAgIHZhciBwZXJjZW50V2lkdGggPSB0b2tlbi5wZXJjZW50V2lkdGg7XG4gICAgICAgIHRva2VuLndpZHRoID0gcGFyc2VJbnQocGVyY2VudFdpZHRoLCAxMCkgLyAxMDAgKiBjb250ZW50QmxvY2sud2lkdGg7XG4gICAgfVxuICAgIHJldHVybiBjb250ZW50QmxvY2s7XG59XG5mdW5jdGlvbiBwdXNoVG9rZW5zKGJsb2NrLCBzdHIsIHN0eWxlLCB3cmFwSW5mbywgc3R5bGVOYW1lKSB7XG4gICAgdmFyIGlzRW1wdHlTdHIgPSBzdHIgPT09ICcnO1xuICAgIHZhciB0b2tlblN0eWxlID0gc3R5bGVOYW1lICYmIHN0eWxlLnJpY2hbc3R5bGVOYW1lXSB8fCB7fTtcbiAgICB2YXIgbGluZXMgPSBibG9jay5saW5lcztcbiAgICB2YXIgZm9udCA9IHRva2VuU3R5bGUuZm9udCB8fCBzdHlsZS5mb250O1xuICAgIHZhciBuZXdMaW5lID0gZmFsc2U7XG4gICAgdmFyIHN0ckxpbmVzO1xuICAgIHZhciBsaW5lc1dpZHRocztcbiAgICBpZiAod3JhcEluZm8pIHtcbiAgICAgICAgdmFyIHRva2VuUGFkZGluZyA9IHRva2VuU3R5bGUucGFkZGluZztcbiAgICAgICAgdmFyIHRva2VuUGFkZGluZ0ggPSB0b2tlblBhZGRpbmcgPyB0b2tlblBhZGRpbmdbMV0gKyB0b2tlblBhZGRpbmdbM10gOiAwO1xuICAgICAgICBpZiAodG9rZW5TdHlsZS53aWR0aCAhPSBudWxsICYmIHRva2VuU3R5bGUud2lkdGggIT09ICdhdXRvJykge1xuICAgICAgICAgICAgdmFyIG91dGVyV2lkdGhfMSA9IHBhcnNlUGVyY2VudCh0b2tlblN0eWxlLndpZHRoLCB3cmFwSW5mby53aWR0aCkgKyB0b2tlblBhZGRpbmdIO1xuICAgICAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAob3V0ZXJXaWR0aF8xICsgd3JhcEluZm8uYWNjdW1XaWR0aCA+IHdyYXBJbmZvLndpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0ckxpbmVzID0gc3RyLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3TGluZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd3JhcEluZm8uYWNjdW1XaWR0aCA9IG91dGVyV2lkdGhfMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciByZXMgPSB3cmFwVGV4dChzdHIsIGZvbnQsIHdyYXBJbmZvLndpZHRoLCB3cmFwSW5mby5icmVha0FsbCwgd3JhcEluZm8uYWNjdW1XaWR0aCk7XG4gICAgICAgICAgICB3cmFwSW5mby5hY2N1bVdpZHRoID0gcmVzLmFjY3VtV2lkdGggKyB0b2tlblBhZGRpbmdIO1xuICAgICAgICAgICAgbGluZXNXaWR0aHMgPSByZXMubGluZXNXaWR0aHM7XG4gICAgICAgICAgICBzdHJMaW5lcyA9IHJlcy5saW5lcztcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc3RyTGluZXMgPSBzdHIuc3BsaXQoJ1xcbicpO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ckxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0ZXh0ID0gc3RyTGluZXNbaV07XG4gICAgICAgIHZhciB0b2tlbiA9IG5ldyBSaWNoVGV4dFRva2VuKCk7XG4gICAgICAgIHRva2VuLnN0eWxlTmFtZSA9IHN0eWxlTmFtZTtcbiAgICAgICAgdG9rZW4udGV4dCA9IHRleHQ7XG4gICAgICAgIHRva2VuLmlzTGluZUhvbGRlciA9ICF0ZXh0ICYmICFpc0VtcHR5U3RyO1xuICAgICAgICBpZiAodHlwZW9mIHRva2VuU3R5bGUud2lkdGggPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICB0b2tlbi53aWR0aCA9IHRva2VuU3R5bGUud2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0b2tlbi53aWR0aCA9IGxpbmVzV2lkdGhzXG4gICAgICAgICAgICAgICAgPyBsaW5lc1dpZHRoc1tpXVxuICAgICAgICAgICAgICAgIDogZ2V0V2lkdGgodGV4dCwgZm9udCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpICYmICFuZXdMaW5lKSB7XG4gICAgICAgICAgICB2YXIgdG9rZW5zID0gKGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdIHx8IChsaW5lc1swXSA9IG5ldyBSaWNoVGV4dExpbmUoKSkpLnRva2VucztcbiAgICAgICAgICAgIHZhciB0b2tlbnNMZW4gPSB0b2tlbnMubGVuZ3RoO1xuICAgICAgICAgICAgKHRva2Vuc0xlbiA9PT0gMSAmJiB0b2tlbnNbMF0uaXNMaW5lSG9sZGVyKVxuICAgICAgICAgICAgICAgID8gKHRva2Vuc1swXSA9IHRva2VuKVxuICAgICAgICAgICAgICAgIDogKCh0ZXh0IHx8ICF0b2tlbnNMZW4gfHwgaXNFbXB0eVN0cikgJiYgdG9rZW5zLnB1c2godG9rZW4pKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gobmV3IFJpY2hUZXh0TGluZShbdG9rZW5dKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBpc0FscGhhYmV0aWNMZXR0ZXIoY2gpIHtcbiAgICB2YXIgY29kZSA9IGNoLmNoYXJDb2RlQXQoMCk7XG4gICAgcmV0dXJuIGNvZGUgPj0gMHgyMCAmJiBjb2RlIDw9IDB4MjRGXG4gICAgICAgIHx8IGNvZGUgPj0gMHgzNzAgJiYgY29kZSA8PSAweDEwRkZcbiAgICAgICAgfHwgY29kZSA+PSAweDEyMDAgJiYgY29kZSA8PSAweDEzRkZcbiAgICAgICAgfHwgY29kZSA+PSAweDFFMDAgJiYgY29kZSA8PSAweDIwNkY7XG59XG52YXIgYnJlYWtDaGFyTWFwID0gcmVkdWNlKCcsJj8vO10gJy5zcGxpdCgnJyksIGZ1bmN0aW9uIChvYmosIGNoKSB7XG4gICAgb2JqW2NoXSA9IHRydWU7XG4gICAgcmV0dXJuIG9iajtcbn0sIHt9KTtcbmZ1bmN0aW9uIGlzV29yZEJyZWFrQ2hhcihjaCkge1xuICAgIGlmIChpc0FscGhhYmV0aWNMZXR0ZXIoY2gpKSB7XG4gICAgICAgIGlmIChicmVha0NoYXJNYXBbY2hdKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gd3JhcFRleHQodGV4dCwgZm9udCwgbGluZVdpZHRoLCBpc0JyZWFrQWxsLCBsYXN0QWNjdW1XaWR0aCkge1xuICAgIHZhciBsaW5lcyA9IFtdO1xuICAgIHZhciBsaW5lc1dpZHRocyA9IFtdO1xuICAgIHZhciBsaW5lID0gJyc7XG4gICAgdmFyIGN1cnJlbnRXb3JkID0gJyc7XG4gICAgdmFyIGN1cnJlbnRXb3JkV2lkdGggPSAwO1xuICAgIHZhciBhY2N1bVdpZHRoID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRleHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGNoID0gdGV4dC5jaGFyQXQoaSk7XG4gICAgICAgIGlmIChjaCA9PT0gJ1xcbicpIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50V29yZCkge1xuICAgICAgICAgICAgICAgIGxpbmUgKz0gY3VycmVudFdvcmQ7XG4gICAgICAgICAgICAgICAgYWNjdW1XaWR0aCArPSBjdXJyZW50V29yZFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGluZXMucHVzaChsaW5lKTtcbiAgICAgICAgICAgIGxpbmVzV2lkdGhzLnB1c2goYWNjdW1XaWR0aCk7XG4gICAgICAgICAgICBsaW5lID0gJyc7XG4gICAgICAgICAgICBjdXJyZW50V29yZCA9ICcnO1xuICAgICAgICAgICAgY3VycmVudFdvcmRXaWR0aCA9IDA7XG4gICAgICAgICAgICBhY2N1bVdpZHRoID0gMDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjaFdpZHRoID0gZ2V0V2lkdGgoY2gsIGZvbnQpO1xuICAgICAgICB2YXIgaW5Xb3JkID0gaXNCcmVha0FsbCA/IGZhbHNlIDogIWlzV29yZEJyZWFrQ2hhcihjaCk7XG4gICAgICAgIGlmICghbGluZXMubGVuZ3RoXG4gICAgICAgICAgICA/IGxhc3RBY2N1bVdpZHRoICsgYWNjdW1XaWR0aCArIGNoV2lkdGggPiBsaW5lV2lkdGhcbiAgICAgICAgICAgIDogYWNjdW1XaWR0aCArIGNoV2lkdGggPiBsaW5lV2lkdGgpIHtcbiAgICAgICAgICAgIGlmICghYWNjdW1XaWR0aCkge1xuICAgICAgICAgICAgICAgIGlmIChpbldvcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZXMucHVzaChjdXJyZW50V29yZCk7XG4gICAgICAgICAgICAgICAgICAgIGxpbmVzV2lkdGhzLnB1c2goY3VycmVudFdvcmRXaWR0aCk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXb3JkID0gY2g7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXb3JkV2lkdGggPSBjaFdpZHRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZXMucHVzaChjaCk7XG4gICAgICAgICAgICAgICAgICAgIGxpbmVzV2lkdGhzLnB1c2goY2hXaWR0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobGluZSB8fCBjdXJyZW50V29yZCkge1xuICAgICAgICAgICAgICAgIGlmIChpbldvcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lID0gY3VycmVudFdvcmQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50V29yZCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFdvcmRXaWR0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2N1bVdpZHRoID0gY3VycmVudFdvcmRXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgICAgICAgICAgICAgICBsaW5lc1dpZHRocy5wdXNoKGFjY3VtV2lkdGggLSBjdXJyZW50V29yZFdpZHRoKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFdvcmQgKz0gY2g7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXb3JkV2lkdGggKz0gY2hXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgbGluZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBhY2N1bVdpZHRoID0gY3VycmVudFdvcmRXaWR0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50V29yZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGluZSArPSBjdXJyZW50V29yZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXb3JkID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50V29yZFdpZHRoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgICAgICAgICAgICAgICBsaW5lc1dpZHRocy5wdXNoKGFjY3VtV2lkdGgpO1xuICAgICAgICAgICAgICAgICAgICBsaW5lID0gY2g7XG4gICAgICAgICAgICAgICAgICAgIGFjY3VtV2lkdGggPSBjaFdpZHRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGFjY3VtV2lkdGggKz0gY2hXaWR0aDtcbiAgICAgICAgaWYgKGluV29yZCkge1xuICAgICAgICAgICAgY3VycmVudFdvcmQgKz0gY2g7XG4gICAgICAgICAgICBjdXJyZW50V29yZFdpZHRoICs9IGNoV2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFdvcmQpIHtcbiAgICAgICAgICAgICAgICBsaW5lICs9IGN1cnJlbnRXb3JkO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRXb3JkID0gJyc7XG4gICAgICAgICAgICAgICAgY3VycmVudFdvcmRXaWR0aCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsaW5lICs9IGNoO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghbGluZXMubGVuZ3RoICYmICFsaW5lKSB7XG4gICAgICAgIGxpbmUgPSB0ZXh0O1xuICAgICAgICBjdXJyZW50V29yZCA9ICcnO1xuICAgICAgICBjdXJyZW50V29yZFdpZHRoID0gMDtcbiAgICB9XG4gICAgaWYgKGN1cnJlbnRXb3JkKSB7XG4gICAgICAgIGxpbmUgKz0gY3VycmVudFdvcmQ7XG4gICAgfVxuICAgIGlmIChsaW5lKSB7XG4gICAgICAgIGxpbmVzLnB1c2gobGluZSk7XG4gICAgICAgIGxpbmVzV2lkdGhzLnB1c2goYWNjdW1XaWR0aCk7XG4gICAgfVxuICAgIGlmIChsaW5lcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgYWNjdW1XaWR0aCArPSBsYXN0QWNjdW1XaWR0aDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWNjdW1XaWR0aDogYWNjdW1XaWR0aCxcbiAgICAgICAgbGluZXM6IGxpbmVzLFxuICAgICAgICBsaW5lc1dpZHRoczogbGluZXNXaWR0aHNcbiAgICB9O1xufVxuIiwiaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgRWxlbWVudCBmcm9tICcuLi9FbGVtZW50LmpzJztcbmltcG9ydCBCb3VuZGluZ1JlY3QgZnJvbSAnLi4vY29yZS9Cb3VuZGluZ1JlY3QuanMnO1xuaW1wb3J0IHsga2V5cywgZXh0ZW5kLCBjcmVhdGVPYmplY3QgfSBmcm9tICcuLi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0IHsgUkVEUkFXX0JJVCwgU1RZTEVfQ0hBTkdFRF9CSVQgfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG52YXIgU1RZTEVfTUFHSUNfS0VZID0gJ19fenJfc3R5bGVfJyArIE1hdGgucm91bmQoKE1hdGgucmFuZG9tKCkgKiAxMCkpO1xuZXhwb3J0IHZhciBERUZBVUxUX0NPTU1PTl9TVFlMRSA9IHtcbiAgICBzaGFkb3dCbHVyOiAwLFxuICAgIHNoYWRvd09mZnNldFg6IDAsXG4gICAgc2hhZG93T2Zmc2V0WTogMCxcbiAgICBzaGFkb3dDb2xvcjogJyMwMDAnLFxuICAgIG9wYWNpdHk6IDEsXG4gICAgYmxlbmQ6ICdzb3VyY2Utb3Zlcidcbn07XG5leHBvcnQgdmFyIERFRkFVTFRfQ09NTU9OX0FOSU1BVElPTl9QUk9QUyA9IHtcbiAgICBzdHlsZToge1xuICAgICAgICBzaGFkb3dCbHVyOiB0cnVlLFxuICAgICAgICBzaGFkb3dPZmZzZXRYOiB0cnVlLFxuICAgICAgICBzaGFkb3dPZmZzZXRZOiB0cnVlLFxuICAgICAgICBzaGFkb3dDb2xvcjogdHJ1ZSxcbiAgICAgICAgb3BhY2l0eTogdHJ1ZVxuICAgIH1cbn07XG5ERUZBVUxUX0NPTU1PTl9TVFlMRVtTVFlMRV9NQUdJQ19LRVldID0gdHJ1ZTtcbnZhciBQUklNQVJZX1NUQVRFU19LRVlTID0gWyd6JywgJ3oyJywgJ2ludmlzaWJsZSddO1xudmFyIFBSSU1BUllfU1RBVEVTX0tFWVNfSU5fSE9WRVJfTEFZRVIgPSBbJ2ludmlzaWJsZSddO1xudmFyIERpc3BsYXlhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRGlzcGxheWFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRGlzcGxheWFibGUocHJvcHMpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBEaXNwbGF5YWJsZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICAgICAgdmFyIGtleXNBcnIgPSBrZXlzKHByb3BzKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzQXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0ga2V5c0FycltpXTtcbiAgICAgICAgICAgIGlmIChrZXkgPT09ICdzdHlsZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVzZVN0eWxlKHByb3BzW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5hdHRyS1YuY2FsbCh0aGlzLCBrZXksIHByb3BzW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5zdHlsZSkge1xuICAgICAgICAgICAgdGhpcy51c2VTdHlsZSh7fSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERpc3BsYXlhYmxlLnByb3RvdHlwZS5iZWZvcmVCcnVzaCA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICBEaXNwbGF5YWJsZS5wcm90b3R5cGUuYWZ0ZXJCcnVzaCA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICBEaXNwbGF5YWJsZS5wcm90b3R5cGUuaW5uZXJCZWZvcmVCcnVzaCA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICBEaXNwbGF5YWJsZS5wcm90b3R5cGUuaW5uZXJBZnRlckJydXNoID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgIERpc3BsYXlhYmxlLnByb3RvdHlwZS5zaG91bGRCZVBhaW50ZWQgPSBmdW5jdGlvbiAodmlld1dpZHRoLCB2aWV3SGVpZ2h0LCBjb25zaWRlckNsaXBQYXRoLCBjb25zaWRlckFuY2VzdG9ycykge1xuICAgICAgICB2YXIgbSA9IHRoaXMudHJhbnNmb3JtO1xuICAgICAgICBpZiAodGhpcy5pZ25vcmVcbiAgICAgICAgICAgIHx8IHRoaXMuaW52aXNpYmxlXG4gICAgICAgICAgICB8fCB0aGlzLnN0eWxlLm9wYWNpdHkgPT09IDBcbiAgICAgICAgICAgIHx8ICh0aGlzLmN1bGxpbmdcbiAgICAgICAgICAgICAgICAmJiBpc0Rpc3BsYXlhYmxlQ3VsbGVkKHRoaXMsIHZpZXdXaWR0aCwgdmlld0hlaWdodCkpXG4gICAgICAgICAgICB8fCAobSAmJiAhbVswXSAmJiAhbVszXSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29uc2lkZXJDbGlwUGF0aCAmJiB0aGlzLl9fY2xpcFBhdGhzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX19jbGlwUGF0aHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fX2NsaXBQYXRoc1tpXS5pc1plcm9BcmVhKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY29uc2lkZXJBbmNlc3RvcnMgJiYgdGhpcy5wYXJlbnQpIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnRfMSA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgd2hpbGUgKHBhcmVudF8xKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudF8xLmlnbm9yZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBhcmVudF8xID0gcGFyZW50XzEucGFyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgRGlzcGxheWFibGUucHJvdG90eXBlLmNvbnRhaW4gPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWN0Q29udGFpbih4LCB5KTtcbiAgICB9O1xuICAgIERpc3BsYXlhYmxlLnByb3RvdHlwZS50cmF2ZXJzZSA9IGZ1bmN0aW9uIChjYiwgY29udGV4dCkge1xuICAgICAgICBjYi5jYWxsKGNvbnRleHQsIHRoaXMpO1xuICAgIH07XG4gICAgRGlzcGxheWFibGUucHJvdG90eXBlLnJlY3RDb250YWluID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgdmFyIGNvb3JkID0gdGhpcy50cmFuc2Zvcm1Db29yZFRvTG9jYWwoeCwgeSk7XG4gICAgICAgIHZhciByZWN0ID0gdGhpcy5nZXRCb3VuZGluZ1JlY3QoKTtcbiAgICAgICAgcmV0dXJuIHJlY3QuY29udGFpbihjb29yZFswXSwgY29vcmRbMV0pO1xuICAgIH07XG4gICAgRGlzcGxheWFibGUucHJvdG90eXBlLmdldFBhaW50UmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlY3QgPSB0aGlzLl9wYWludFJlY3Q7XG4gICAgICAgIGlmICghdGhpcy5fcGFpbnRSZWN0IHx8IHRoaXMuX19kaXJ0eSkge1xuICAgICAgICAgICAgdmFyIHRyYW5zZm9ybSA9IHRoaXMudHJhbnNmb3JtO1xuICAgICAgICAgICAgdmFyIGVsUmVjdCA9IHRoaXMuZ2V0Qm91bmRpbmdSZWN0KCk7XG4gICAgICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLnN0eWxlO1xuICAgICAgICAgICAgdmFyIHNoYWRvd1NpemUgPSBzdHlsZS5zaGFkb3dCbHVyIHx8IDA7XG4gICAgICAgICAgICB2YXIgc2hhZG93T2Zmc2V0WCA9IHN0eWxlLnNoYWRvd09mZnNldFggfHwgMDtcbiAgICAgICAgICAgIHZhciBzaGFkb3dPZmZzZXRZID0gc3R5bGUuc2hhZG93T2Zmc2V0WSB8fCAwO1xuICAgICAgICAgICAgcmVjdCA9IHRoaXMuX3BhaW50UmVjdCB8fCAodGhpcy5fcGFpbnRSZWN0ID0gbmV3IEJvdW5kaW5nUmVjdCgwLCAwLCAwLCAwKSk7XG4gICAgICAgICAgICBpZiAodHJhbnNmb3JtKSB7XG4gICAgICAgICAgICAgICAgQm91bmRpbmdSZWN0LmFwcGx5VHJhbnNmb3JtKHJlY3QsIGVsUmVjdCwgdHJhbnNmb3JtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlY3QuY29weShlbFJlY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNoYWRvd1NpemUgfHwgc2hhZG93T2Zmc2V0WCB8fCBzaGFkb3dPZmZzZXRZKSB7XG4gICAgICAgICAgICAgICAgcmVjdC53aWR0aCArPSBzaGFkb3dTaXplICogMiArIE1hdGguYWJzKHNoYWRvd09mZnNldFgpO1xuICAgICAgICAgICAgICAgIHJlY3QuaGVpZ2h0ICs9IHNoYWRvd1NpemUgKiAyICsgTWF0aC5hYnMoc2hhZG93T2Zmc2V0WSk7XG4gICAgICAgICAgICAgICAgcmVjdC54ID0gTWF0aC5taW4ocmVjdC54LCByZWN0LnggKyBzaGFkb3dPZmZzZXRYIC0gc2hhZG93U2l6ZSk7XG4gICAgICAgICAgICAgICAgcmVjdC55ID0gTWF0aC5taW4ocmVjdC55LCByZWN0LnkgKyBzaGFkb3dPZmZzZXRZIC0gc2hhZG93U2l6ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdG9sZXJhbmNlID0gdGhpcy5kaXJ0eVJlY3RUb2xlcmFuY2U7XG4gICAgICAgICAgICBpZiAoIXJlY3QuaXNaZXJvKCkpIHtcbiAgICAgICAgICAgICAgICByZWN0LnggPSBNYXRoLmZsb29yKHJlY3QueCAtIHRvbGVyYW5jZSk7XG4gICAgICAgICAgICAgICAgcmVjdC55ID0gTWF0aC5mbG9vcihyZWN0LnkgLSB0b2xlcmFuY2UpO1xuICAgICAgICAgICAgICAgIHJlY3Qud2lkdGggPSBNYXRoLmNlaWwocmVjdC53aWR0aCArIDEgKyB0b2xlcmFuY2UgKiAyKTtcbiAgICAgICAgICAgICAgICByZWN0LmhlaWdodCA9IE1hdGguY2VpbChyZWN0LmhlaWdodCArIDEgKyB0b2xlcmFuY2UgKiAyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVjdDtcbiAgICB9O1xuICAgIERpc3BsYXlhYmxlLnByb3RvdHlwZS5zZXRQcmV2UGFpbnRSZWN0ID0gZnVuY3Rpb24gKHBhaW50UmVjdCkge1xuICAgICAgICBpZiAocGFpbnRSZWN0KSB7XG4gICAgICAgICAgICB0aGlzLl9wcmV2UGFpbnRSZWN0ID0gdGhpcy5fcHJldlBhaW50UmVjdCB8fCBuZXcgQm91bmRpbmdSZWN0KDAsIDAsIDAsIDApO1xuICAgICAgICAgICAgdGhpcy5fcHJldlBhaW50UmVjdC5jb3B5KHBhaW50UmVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9wcmV2UGFpbnRSZWN0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRGlzcGxheWFibGUucHJvdG90eXBlLmdldFByZXZQYWludFJlY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wcmV2UGFpbnRSZWN0O1xuICAgIH07XG4gICAgRGlzcGxheWFibGUucHJvdG90eXBlLmFuaW1hdGVTdHlsZSA9IGZ1bmN0aW9uIChsb29wKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFuaW1hdGUoJ3N0eWxlJywgbG9vcCk7XG4gICAgfTtcbiAgICBEaXNwbGF5YWJsZS5wcm90b3R5cGUudXBkYXRlRHVyaW5nQW5pbWF0aW9uID0gZnVuY3Rpb24gKHRhcmdldEtleSkge1xuICAgICAgICBpZiAodGFyZ2V0S2V5ID09PSAnc3R5bGUnKSB7XG4gICAgICAgICAgICB0aGlzLmRpcnR5U3R5bGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubWFya1JlZHJhdygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBEaXNwbGF5YWJsZS5wcm90b3R5cGUuYXR0cktWID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKGtleSAhPT0gJ3N0eWxlJykge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5hdHRyS1YuY2FsbCh0aGlzLCBrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5zdHlsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudXNlU3R5bGUodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdHlsZSh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERpc3BsYXlhYmxlLnByb3RvdHlwZS5zZXRTdHlsZSA9IGZ1bmN0aW9uIChrZXlPck9iaiwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBrZXlPck9iaiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRoaXMuc3R5bGVba2V5T3JPYmpdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBleHRlbmQodGhpcy5zdHlsZSwga2V5T3JPYmopO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlydHlTdHlsZSgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIERpc3BsYXlhYmxlLnByb3RvdHlwZS5kaXJ0eVN0eWxlID0gZnVuY3Rpb24gKG5vdFJlZHJhdykge1xuICAgICAgICBpZiAoIW5vdFJlZHJhdykge1xuICAgICAgICAgICAgdGhpcy5tYXJrUmVkcmF3KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fX2RpcnR5IHw9IFNUWUxFX0NIQU5HRURfQklUO1xuICAgICAgICBpZiAodGhpcy5fcmVjdCkge1xuICAgICAgICAgICAgdGhpcy5fcmVjdCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERpc3BsYXlhYmxlLnByb3RvdHlwZS5kaXJ0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kaXJ0eVN0eWxlKCk7XG4gICAgfTtcbiAgICBEaXNwbGF5YWJsZS5wcm90b3R5cGUuc3R5bGVDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gISEodGhpcy5fX2RpcnR5ICYgU1RZTEVfQ0hBTkdFRF9CSVQpO1xuICAgIH07XG4gICAgRGlzcGxheWFibGUucHJvdG90eXBlLnN0eWxlVXBkYXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fX2RpcnR5ICY9IH5TVFlMRV9DSEFOR0VEX0JJVDtcbiAgICB9O1xuICAgIERpc3BsYXlhYmxlLnByb3RvdHlwZS5jcmVhdGVTdHlsZSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZU9iamVjdChERUZBVUxUX0NPTU1PTl9TVFlMRSwgb2JqKTtcbiAgICB9O1xuICAgIERpc3BsYXlhYmxlLnByb3RvdHlwZS51c2VTdHlsZSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgaWYgKCFvYmpbU1RZTEVfTUFHSUNfS0VZXSkge1xuICAgICAgICAgICAgb2JqID0gdGhpcy5jcmVhdGVTdHlsZShvYmopO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9faW5Ib3Zlcikge1xuICAgICAgICAgICAgdGhpcy5fX2hvdmVyU3R5bGUgPSBvYmo7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0eWxlID0gb2JqO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlydHlTdHlsZSgpO1xuICAgIH07XG4gICAgRGlzcGxheWFibGUucHJvdG90eXBlLmlzU3R5bGVPYmplY3QgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmpbU1RZTEVfTUFHSUNfS0VZXTtcbiAgICB9O1xuICAgIERpc3BsYXlhYmxlLnByb3RvdHlwZS5faW5uZXJTYXZlVG9Ob3JtYWwgPSBmdW5jdGlvbiAodG9TdGF0ZSkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9pbm5lclNhdmVUb05vcm1hbC5jYWxsKHRoaXMsIHRvU3RhdGUpO1xuICAgICAgICB2YXIgbm9ybWFsU3RhdGUgPSB0aGlzLl9ub3JtYWxTdGF0ZTtcbiAgICAgICAgaWYgKHRvU3RhdGUuc3R5bGUgJiYgIW5vcm1hbFN0YXRlLnN0eWxlKSB7XG4gICAgICAgICAgICBub3JtYWxTdGF0ZS5zdHlsZSA9IHRoaXMuX21lcmdlU3R5bGUodGhpcy5jcmVhdGVTdHlsZSgpLCB0aGlzLnN0eWxlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zYXZlUHJpbWFyeVRvTm9ybWFsKHRvU3RhdGUsIG5vcm1hbFN0YXRlLCBQUklNQVJZX1NUQVRFU19LRVlTKTtcbiAgICB9O1xuICAgIERpc3BsYXlhYmxlLnByb3RvdHlwZS5fYXBwbHlTdGF0ZU9iaiA9IGZ1bmN0aW9uIChzdGF0ZU5hbWUsIHN0YXRlLCBub3JtYWxTdGF0ZSwga2VlcEN1cnJlbnRTdGF0ZXMsIHRyYW5zaXRpb24sIGFuaW1hdGlvbkNmZykge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9hcHBseVN0YXRlT2JqLmNhbGwodGhpcywgc3RhdGVOYW1lLCBzdGF0ZSwgbm9ybWFsU3RhdGUsIGtlZXBDdXJyZW50U3RhdGVzLCB0cmFuc2l0aW9uLCBhbmltYXRpb25DZmcpO1xuICAgICAgICB2YXIgbmVlZHNSZXN0b3JlVG9Ob3JtYWwgPSAhKHN0YXRlICYmIGtlZXBDdXJyZW50U3RhdGVzKTtcbiAgICAgICAgdmFyIHRhcmdldFN0eWxlO1xuICAgICAgICBpZiAoc3RhdGUgJiYgc3RhdGUuc3R5bGUpIHtcbiAgICAgICAgICAgIGlmICh0cmFuc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKGtlZXBDdXJyZW50U3RhdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFN0eWxlID0gc3RhdGUuc3R5bGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRTdHlsZSA9IHRoaXMuX21lcmdlU3R5bGUodGhpcy5jcmVhdGVTdHlsZSgpLCBub3JtYWxTdGF0ZS5zdHlsZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21lcmdlU3R5bGUodGFyZ2V0U3R5bGUsIHN0YXRlLnN0eWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRTdHlsZSA9IHRoaXMuX21lcmdlU3R5bGUodGhpcy5jcmVhdGVTdHlsZSgpLCBrZWVwQ3VycmVudFN0YXRlcyA/IHRoaXMuc3R5bGUgOiBub3JtYWxTdGF0ZS5zdHlsZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fbWVyZ2VTdHlsZSh0YXJnZXRTdHlsZSwgc3RhdGUuc3R5bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5lZWRzUmVzdG9yZVRvTm9ybWFsKSB7XG4gICAgICAgICAgICB0YXJnZXRTdHlsZSA9IG5vcm1hbFN0YXRlLnN0eWxlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YXJnZXRTdHlsZSkge1xuICAgICAgICAgICAgaWYgKHRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgc291cmNlU3R5bGUgPSB0aGlzLnN0eWxlO1xuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUgPSB0aGlzLmNyZWF0ZVN0eWxlKG5lZWRzUmVzdG9yZVRvTm9ybWFsID8ge30gOiBzb3VyY2VTdHlsZSk7XG4gICAgICAgICAgICAgICAgaWYgKG5lZWRzUmVzdG9yZVRvTm9ybWFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGFuZ2VkS2V5cyA9IGtleXMoc291cmNlU3R5bGUpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYW5nZWRLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gY2hhbmdlZEtleXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5IGluIHRhcmdldFN0eWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U3R5bGVba2V5XSA9IHRhcmdldFN0eWxlW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHlsZVtrZXldID0gc291cmNlU3R5bGVba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0S2V5cyA9IGtleXModGFyZ2V0U3R5bGUpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFyZ2V0S2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gdGFyZ2V0S2V5c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHlsZVtrZXldID0gdGhpcy5zdHlsZVtrZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl90cmFuc2l0aW9uU3RhdGUoc3RhdGVOYW1lLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB0YXJnZXRTdHlsZVxuICAgICAgICAgICAgICAgIH0sIGFuaW1hdGlvbkNmZywgdGhpcy5nZXRBbmltYXRpb25TdHlsZVByb3BzKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy51c2VTdHlsZSh0YXJnZXRTdHlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0YXRlc0tleXMgPSB0aGlzLl9faW5Ib3ZlciA/IFBSSU1BUllfU1RBVEVTX0tFWVNfSU5fSE9WRVJfTEFZRVIgOiBQUklNQVJZX1NUQVRFU19LRVlTO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YXRlc0tleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBzdGF0ZXNLZXlzW2ldO1xuICAgICAgICAgICAgaWYgKHN0YXRlICYmIHN0YXRlW2tleV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXNba2V5XSA9IHN0YXRlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChuZWVkc1Jlc3RvcmVUb05vcm1hbCkge1xuICAgICAgICAgICAgICAgIGlmIChub3JtYWxTdGF0ZVtrZXldICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1trZXldID0gbm9ybWFsU3RhdGVba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERpc3BsYXlhYmxlLnByb3RvdHlwZS5fbWVyZ2VTdGF0ZXMgPSBmdW5jdGlvbiAoc3RhdGVzKSB7XG4gICAgICAgIHZhciBtZXJnZWRTdGF0ZSA9IF9zdXBlci5wcm90b3R5cGUuX21lcmdlU3RhdGVzLmNhbGwodGhpcywgc3RhdGVzKTtcbiAgICAgICAgdmFyIG1lcmdlZFN0eWxlO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHN0YXRlID0gc3RhdGVzW2ldO1xuICAgICAgICAgICAgaWYgKHN0YXRlLnN0eWxlKSB7XG4gICAgICAgICAgICAgICAgbWVyZ2VkU3R5bGUgPSBtZXJnZWRTdHlsZSB8fCB7fTtcbiAgICAgICAgICAgICAgICB0aGlzLl9tZXJnZVN0eWxlKG1lcmdlZFN0eWxlLCBzdGF0ZS5zdHlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lcmdlZFN0eWxlKSB7XG4gICAgICAgICAgICBtZXJnZWRTdGF0ZS5zdHlsZSA9IG1lcmdlZFN0eWxlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXJnZWRTdGF0ZTtcbiAgICB9O1xuICAgIERpc3BsYXlhYmxlLnByb3RvdHlwZS5fbWVyZ2VTdHlsZSA9IGZ1bmN0aW9uICh0YXJnZXRTdHlsZSwgc291cmNlU3R5bGUpIHtcbiAgICAgICAgZXh0ZW5kKHRhcmdldFN0eWxlLCBzb3VyY2VTdHlsZSk7XG4gICAgICAgIHJldHVybiB0YXJnZXRTdHlsZTtcbiAgICB9O1xuICAgIERpc3BsYXlhYmxlLnByb3RvdHlwZS5nZXRBbmltYXRpb25TdHlsZVByb3BzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gREVGQVVMVF9DT01NT05fQU5JTUFUSU9OX1BST1BTO1xuICAgIH07XG4gICAgRGlzcGxheWFibGUuaW5pdERlZmF1bHRQcm9wcyA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkaXNwUHJvdG8gPSBEaXNwbGF5YWJsZS5wcm90b3R5cGU7XG4gICAgICAgIGRpc3BQcm90by50eXBlID0gJ2Rpc3BsYXlhYmxlJztcbiAgICAgICAgZGlzcFByb3RvLmludmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICBkaXNwUHJvdG8ueiA9IDA7XG4gICAgICAgIGRpc3BQcm90by56MiA9IDA7XG4gICAgICAgIGRpc3BQcm90by56bGV2ZWwgPSAwO1xuICAgICAgICBkaXNwUHJvdG8uY3VsbGluZyA9IGZhbHNlO1xuICAgICAgICBkaXNwUHJvdG8uY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICBkaXNwUHJvdG8ucmVjdEhvdmVyID0gZmFsc2U7XG4gICAgICAgIGRpc3BQcm90by5pbmNyZW1lbnRhbCA9IGZhbHNlO1xuICAgICAgICBkaXNwUHJvdG8uX3JlY3QgPSBudWxsO1xuICAgICAgICBkaXNwUHJvdG8uZGlydHlSZWN0VG9sZXJhbmNlID0gMDtcbiAgICAgICAgZGlzcFByb3RvLl9fZGlydHkgPSBSRURSQVdfQklUIHwgU1RZTEVfQ0hBTkdFRF9CSVQ7XG4gICAgfSkoKTtcbiAgICByZXR1cm4gRGlzcGxheWFibGU7XG59KEVsZW1lbnQpKTtcbnZhciB0bXBSZWN0ID0gbmV3IEJvdW5kaW5nUmVjdCgwLCAwLCAwLCAwKTtcbnZhciB2aWV3UmVjdCA9IG5ldyBCb3VuZGluZ1JlY3QoMCwgMCwgMCwgMCk7XG5mdW5jdGlvbiBpc0Rpc3BsYXlhYmxlQ3VsbGVkKGVsLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgdG1wUmVjdC5jb3B5KGVsLmdldEJvdW5kaW5nUmVjdCgpKTtcbiAgICBpZiAoZWwudHJhbnNmb3JtKSB7XG4gICAgICAgIHRtcFJlY3QuYXBwbHlUcmFuc2Zvcm0oZWwudHJhbnNmb3JtKTtcbiAgICB9XG4gICAgdmlld1JlY3Qud2lkdGggPSB3aWR0aDtcbiAgICB2aWV3UmVjdC5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgcmV0dXJuICF0bXBSZWN0LmludGVyc2VjdCh2aWV3UmVjdCk7XG59XG5leHBvcnQgZGVmYXVsdCBEaXNwbGF5YWJsZTtcbiIsImltcG9ydCAqIGFzIHZlYzIgZnJvbSAnLi92ZWN0b3IuanMnO1xuaW1wb3J0ICogYXMgY3VydmUgZnJvbSAnLi9jdXJ2ZS5qcyc7XG52YXIgbWF0aE1pbiA9IE1hdGgubWluO1xudmFyIG1hdGhNYXggPSBNYXRoLm1heDtcbnZhciBtYXRoU2luID0gTWF0aC5zaW47XG52YXIgbWF0aENvcyA9IE1hdGguY29zO1xudmFyIFBJMiA9IE1hdGguUEkgKiAyO1xudmFyIHN0YXJ0ID0gdmVjMi5jcmVhdGUoKTtcbnZhciBlbmQgPSB2ZWMyLmNyZWF0ZSgpO1xudmFyIGV4dHJlbWl0eSA9IHZlYzIuY3JlYXRlKCk7XG5leHBvcnQgZnVuY3Rpb24gZnJvbVBvaW50cyhwb2ludHMsIG1pbiwgbWF4KSB7XG4gICAgaWYgKHBvaW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcCA9IHBvaW50c1swXTtcbiAgICB2YXIgbGVmdCA9IHBbMF07XG4gICAgdmFyIHJpZ2h0ID0gcFswXTtcbiAgICB2YXIgdG9wID0gcFsxXTtcbiAgICB2YXIgYm90dG9tID0gcFsxXTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IHBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBwID0gcG9pbnRzW2ldO1xuICAgICAgICBsZWZ0ID0gbWF0aE1pbihsZWZ0LCBwWzBdKTtcbiAgICAgICAgcmlnaHQgPSBtYXRoTWF4KHJpZ2h0LCBwWzBdKTtcbiAgICAgICAgdG9wID0gbWF0aE1pbih0b3AsIHBbMV0pO1xuICAgICAgICBib3R0b20gPSBtYXRoTWF4KGJvdHRvbSwgcFsxXSk7XG4gICAgfVxuICAgIG1pblswXSA9IGxlZnQ7XG4gICAgbWluWzFdID0gdG9wO1xuICAgIG1heFswXSA9IHJpZ2h0O1xuICAgIG1heFsxXSA9IGJvdHRvbTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmcm9tTGluZSh4MCwgeTAsIHgxLCB5MSwgbWluLCBtYXgpIHtcbiAgICBtaW5bMF0gPSBtYXRoTWluKHgwLCB4MSk7XG4gICAgbWluWzFdID0gbWF0aE1pbih5MCwgeTEpO1xuICAgIG1heFswXSA9IG1hdGhNYXgoeDAsIHgxKTtcbiAgICBtYXhbMV0gPSBtYXRoTWF4KHkwLCB5MSk7XG59XG52YXIgeERpbSA9IFtdO1xudmFyIHlEaW0gPSBbXTtcbmV4cG9ydCBmdW5jdGlvbiBmcm9tQ3ViaWMoeDAsIHkwLCB4MSwgeTEsIHgyLCB5MiwgeDMsIHkzLCBtaW4sIG1heCkge1xuICAgIHZhciBjdWJpY0V4dHJlbWEgPSBjdXJ2ZS5jdWJpY0V4dHJlbWE7XG4gICAgdmFyIGN1YmljQXQgPSBjdXJ2ZS5jdWJpY0F0O1xuICAgIHZhciBuID0gY3ViaWNFeHRyZW1hKHgwLCB4MSwgeDIsIHgzLCB4RGltKTtcbiAgICBtaW5bMF0gPSBJbmZpbml0eTtcbiAgICBtaW5bMV0gPSBJbmZpbml0eTtcbiAgICBtYXhbMF0gPSAtSW5maW5pdHk7XG4gICAgbWF4WzFdID0gLUluZmluaXR5O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgIHZhciB4ID0gY3ViaWNBdCh4MCwgeDEsIHgyLCB4MywgeERpbVtpXSk7XG4gICAgICAgIG1pblswXSA9IG1hdGhNaW4oeCwgbWluWzBdKTtcbiAgICAgICAgbWF4WzBdID0gbWF0aE1heCh4LCBtYXhbMF0pO1xuICAgIH1cbiAgICBuID0gY3ViaWNFeHRyZW1hKHkwLCB5MSwgeTIsIHkzLCB5RGltKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICB2YXIgeSA9IGN1YmljQXQoeTAsIHkxLCB5MiwgeTMsIHlEaW1baV0pO1xuICAgICAgICBtaW5bMV0gPSBtYXRoTWluKHksIG1pblsxXSk7XG4gICAgICAgIG1heFsxXSA9IG1hdGhNYXgoeSwgbWF4WzFdKTtcbiAgICB9XG4gICAgbWluWzBdID0gbWF0aE1pbih4MCwgbWluWzBdKTtcbiAgICBtYXhbMF0gPSBtYXRoTWF4KHgwLCBtYXhbMF0pO1xuICAgIG1pblswXSA9IG1hdGhNaW4oeDMsIG1pblswXSk7XG4gICAgbWF4WzBdID0gbWF0aE1heCh4MywgbWF4WzBdKTtcbiAgICBtaW5bMV0gPSBtYXRoTWluKHkwLCBtaW5bMV0pO1xuICAgIG1heFsxXSA9IG1hdGhNYXgoeTAsIG1heFsxXSk7XG4gICAgbWluWzFdID0gbWF0aE1pbih5MywgbWluWzFdKTtcbiAgICBtYXhbMV0gPSBtYXRoTWF4KHkzLCBtYXhbMV0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZyb21RdWFkcmF0aWMoeDAsIHkwLCB4MSwgeTEsIHgyLCB5MiwgbWluLCBtYXgpIHtcbiAgICB2YXIgcXVhZHJhdGljRXh0cmVtdW0gPSBjdXJ2ZS5xdWFkcmF0aWNFeHRyZW11bTtcbiAgICB2YXIgcXVhZHJhdGljQXQgPSBjdXJ2ZS5xdWFkcmF0aWNBdDtcbiAgICB2YXIgdHggPSBtYXRoTWF4KG1hdGhNaW4ocXVhZHJhdGljRXh0cmVtdW0oeDAsIHgxLCB4MiksIDEpLCAwKTtcbiAgICB2YXIgdHkgPSBtYXRoTWF4KG1hdGhNaW4ocXVhZHJhdGljRXh0cmVtdW0oeTAsIHkxLCB5MiksIDEpLCAwKTtcbiAgICB2YXIgeCA9IHF1YWRyYXRpY0F0KHgwLCB4MSwgeDIsIHR4KTtcbiAgICB2YXIgeSA9IHF1YWRyYXRpY0F0KHkwLCB5MSwgeTIsIHR5KTtcbiAgICBtaW5bMF0gPSBtYXRoTWluKHgwLCB4MiwgeCk7XG4gICAgbWluWzFdID0gbWF0aE1pbih5MCwgeTIsIHkpO1xuICAgIG1heFswXSA9IG1hdGhNYXgoeDAsIHgyLCB4KTtcbiAgICBtYXhbMV0gPSBtYXRoTWF4KHkwLCB5MiwgeSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZnJvbUFyYyh4LCB5LCByeCwgcnksIHN0YXJ0QW5nbGUsIGVuZEFuZ2xlLCBhbnRpY2xvY2t3aXNlLCBtaW4sIG1heCkge1xuICAgIHZhciB2ZWMyTWluID0gdmVjMi5taW47XG4gICAgdmFyIHZlYzJNYXggPSB2ZWMyLm1heDtcbiAgICB2YXIgZGlmZiA9IE1hdGguYWJzKHN0YXJ0QW5nbGUgLSBlbmRBbmdsZSk7XG4gICAgaWYgKGRpZmYgJSBQSTIgPCAxZS00ICYmIGRpZmYgPiAxZS00KSB7XG4gICAgICAgIG1pblswXSA9IHggLSByeDtcbiAgICAgICAgbWluWzFdID0geSAtIHJ5O1xuICAgICAgICBtYXhbMF0gPSB4ICsgcng7XG4gICAgICAgIG1heFsxXSA9IHkgKyByeTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzdGFydFswXSA9IG1hdGhDb3Moc3RhcnRBbmdsZSkgKiByeCArIHg7XG4gICAgc3RhcnRbMV0gPSBtYXRoU2luKHN0YXJ0QW5nbGUpICogcnkgKyB5O1xuICAgIGVuZFswXSA9IG1hdGhDb3MoZW5kQW5nbGUpICogcnggKyB4O1xuICAgIGVuZFsxXSA9IG1hdGhTaW4oZW5kQW5nbGUpICogcnkgKyB5O1xuICAgIHZlYzJNaW4obWluLCBzdGFydCwgZW5kKTtcbiAgICB2ZWMyTWF4KG1heCwgc3RhcnQsIGVuZCk7XG4gICAgc3RhcnRBbmdsZSA9IHN0YXJ0QW5nbGUgJSAoUEkyKTtcbiAgICBpZiAoc3RhcnRBbmdsZSA8IDApIHtcbiAgICAgICAgc3RhcnRBbmdsZSA9IHN0YXJ0QW5nbGUgKyBQSTI7XG4gICAgfVxuICAgIGVuZEFuZ2xlID0gZW5kQW5nbGUgJSAoUEkyKTtcbiAgICBpZiAoZW5kQW5nbGUgPCAwKSB7XG4gICAgICAgIGVuZEFuZ2xlID0gZW5kQW5nbGUgKyBQSTI7XG4gICAgfVxuICAgIGlmIChzdGFydEFuZ2xlID4gZW5kQW5nbGUgJiYgIWFudGljbG9ja3dpc2UpIHtcbiAgICAgICAgZW5kQW5nbGUgKz0gUEkyO1xuICAgIH1cbiAgICBlbHNlIGlmIChzdGFydEFuZ2xlIDwgZW5kQW5nbGUgJiYgYW50aWNsb2Nrd2lzZSkge1xuICAgICAgICBzdGFydEFuZ2xlICs9IFBJMjtcbiAgICB9XG4gICAgaWYgKGFudGljbG9ja3dpc2UpIHtcbiAgICAgICAgdmFyIHRtcCA9IGVuZEFuZ2xlO1xuICAgICAgICBlbmRBbmdsZSA9IHN0YXJ0QW5nbGU7XG4gICAgICAgIHN0YXJ0QW5nbGUgPSB0bXA7XG4gICAgfVxuICAgIGZvciAodmFyIGFuZ2xlID0gMDsgYW5nbGUgPCBlbmRBbmdsZTsgYW5nbGUgKz0gTWF0aC5QSSAvIDIpIHtcbiAgICAgICAgaWYgKGFuZ2xlID4gc3RhcnRBbmdsZSkge1xuICAgICAgICAgICAgZXh0cmVtaXR5WzBdID0gbWF0aENvcyhhbmdsZSkgKiByeCArIHg7XG4gICAgICAgICAgICBleHRyZW1pdHlbMV0gPSBtYXRoU2luKGFuZ2xlKSAqIHJ5ICsgeTtcbiAgICAgICAgICAgIHZlYzJNaW4obWluLCBleHRyZW1pdHksIG1pbik7XG4gICAgICAgICAgICB2ZWMyTWF4KG1heCwgZXh0cmVtaXR5LCBtYXgpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0ICogYXMgdmVjMiBmcm9tICcuL3ZlY3Rvci5qcyc7XG5pbXBvcnQgQm91bmRpbmdSZWN0IGZyb20gJy4vQm91bmRpbmdSZWN0LmpzJztcbmltcG9ydCB7IGRldmljZVBpeGVsUmF0aW8gYXMgZHByIH0gZnJvbSAnLi4vY29uZmlnLmpzJztcbmltcG9ydCB7IGZyb21MaW5lLCBmcm9tQ3ViaWMsIGZyb21RdWFkcmF0aWMsIGZyb21BcmMgfSBmcm9tICcuL2Jib3guanMnO1xuaW1wb3J0IHsgY3ViaWNMZW5ndGgsIGN1YmljU3ViZGl2aWRlLCBxdWFkcmF0aWNMZW5ndGgsIHF1YWRyYXRpY1N1YmRpdmlkZSB9IGZyb20gJy4vY3VydmUuanMnO1xudmFyIENNRCA9IHtcbiAgICBNOiAxLFxuICAgIEw6IDIsXG4gICAgQzogMyxcbiAgICBROiA0LFxuICAgIEE6IDUsXG4gICAgWjogNixcbiAgICBSOiA3XG59O1xudmFyIHRtcE91dFggPSBbXTtcbnZhciB0bXBPdXRZID0gW107XG52YXIgbWluID0gW107XG52YXIgbWF4ID0gW107XG52YXIgbWluMiA9IFtdO1xudmFyIG1heDIgPSBbXTtcbnZhciBtYXRoTWluID0gTWF0aC5taW47XG52YXIgbWF0aE1heCA9IE1hdGgubWF4O1xudmFyIG1hdGhDb3MgPSBNYXRoLmNvcztcbnZhciBtYXRoU2luID0gTWF0aC5zaW47XG52YXIgbWF0aEFicyA9IE1hdGguYWJzO1xudmFyIFBJID0gTWF0aC5QSTtcbnZhciBQSTIgPSBQSSAqIDI7XG52YXIgaGFzVHlwZWRBcnJheSA9IHR5cGVvZiBGbG9hdDMyQXJyYXkgIT09ICd1bmRlZmluZWQnO1xudmFyIHRtcEFuZ2xlcyA9IFtdO1xuZnVuY3Rpb24gbW9kUEkyKHJhZGlhbikge1xuICAgIHZhciBuID0gTWF0aC5yb3VuZChyYWRpYW4gLyBQSSAqIDFlOCkgLyAxZTg7XG4gICAgcmV0dXJuIChuICUgMikgKiBQSTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVBcmNBbmdsZXMoYW5nbGVzLCBhbnRpY2xvY2t3aXNlKSB7XG4gICAgdmFyIG5ld1N0YXJ0QW5nbGUgPSBtb2RQSTIoYW5nbGVzWzBdKTtcbiAgICBpZiAobmV3U3RhcnRBbmdsZSA8IDApIHtcbiAgICAgICAgbmV3U3RhcnRBbmdsZSArPSBQSTI7XG4gICAgfVxuICAgIHZhciBkZWx0YSA9IG5ld1N0YXJ0QW5nbGUgLSBhbmdsZXNbMF07XG4gICAgdmFyIG5ld0VuZEFuZ2xlID0gYW5nbGVzWzFdO1xuICAgIG5ld0VuZEFuZ2xlICs9IGRlbHRhO1xuICAgIGlmICghYW50aWNsb2Nrd2lzZSAmJiBuZXdFbmRBbmdsZSAtIG5ld1N0YXJ0QW5nbGUgPj0gUEkyKSB7XG4gICAgICAgIG5ld0VuZEFuZ2xlID0gbmV3U3RhcnRBbmdsZSArIFBJMjtcbiAgICB9XG4gICAgZWxzZSBpZiAoYW50aWNsb2Nrd2lzZSAmJiBuZXdTdGFydEFuZ2xlIC0gbmV3RW5kQW5nbGUgPj0gUEkyKSB7XG4gICAgICAgIG5ld0VuZEFuZ2xlID0gbmV3U3RhcnRBbmdsZSAtIFBJMjtcbiAgICB9XG4gICAgZWxzZSBpZiAoIWFudGljbG9ja3dpc2UgJiYgbmV3U3RhcnRBbmdsZSA+IG5ld0VuZEFuZ2xlKSB7XG4gICAgICAgIG5ld0VuZEFuZ2xlID0gbmV3U3RhcnRBbmdsZSArIChQSTIgLSBtb2RQSTIobmV3U3RhcnRBbmdsZSAtIG5ld0VuZEFuZ2xlKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFudGljbG9ja3dpc2UgJiYgbmV3U3RhcnRBbmdsZSA8IG5ld0VuZEFuZ2xlKSB7XG4gICAgICAgIG5ld0VuZEFuZ2xlID0gbmV3U3RhcnRBbmdsZSAtIChQSTIgLSBtb2RQSTIobmV3RW5kQW5nbGUgLSBuZXdTdGFydEFuZ2xlKSk7XG4gICAgfVxuICAgIGFuZ2xlc1swXSA9IG5ld1N0YXJ0QW5nbGU7XG4gICAgYW5nbGVzWzFdID0gbmV3RW5kQW5nbGU7XG59XG52YXIgUGF0aFByb3h5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBQYXRoUHJveHkobm90U2F2ZURhdGEpIHtcbiAgICAgICAgdGhpcy5kcHIgPSAxO1xuICAgICAgICB0aGlzLl94aSA9IDA7XG4gICAgICAgIHRoaXMuX3lpID0gMDtcbiAgICAgICAgdGhpcy5feDAgPSAwO1xuICAgICAgICB0aGlzLl95MCA9IDA7XG4gICAgICAgIHRoaXMuX2xlbiA9IDA7XG4gICAgICAgIGlmIChub3RTYXZlRGF0YSkge1xuICAgICAgICAgICAgdGhpcy5fc2F2ZURhdGEgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fc2F2ZURhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IFtdO1xuICAgICAgICB9XG4gICAgfVxuICAgIFBhdGhQcm94eS5wcm90b3R5cGUuaW5jcmVhc2VWZXJzaW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl92ZXJzaW9uKys7XG4gICAgfTtcbiAgICBQYXRoUHJveHkucHJvdG90eXBlLmdldFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92ZXJzaW9uO1xuICAgIH07XG4gICAgUGF0aFByb3h5LnByb3RvdHlwZS5zZXRTY2FsZSA9IGZ1bmN0aW9uIChzeCwgc3ksIHNlZ21lbnRJZ25vcmVUaHJlc2hvbGQpIHtcbiAgICAgICAgc2VnbWVudElnbm9yZVRocmVzaG9sZCA9IHNlZ21lbnRJZ25vcmVUaHJlc2hvbGQgfHwgMDtcbiAgICAgICAgaWYgKHNlZ21lbnRJZ25vcmVUaHJlc2hvbGQgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl91eCA9IG1hdGhBYnMoc2VnbWVudElnbm9yZVRocmVzaG9sZCAvIGRwciAvIHN4KSB8fCAwO1xuICAgICAgICAgICAgdGhpcy5fdXkgPSBtYXRoQWJzKHNlZ21lbnRJZ25vcmVUaHJlc2hvbGQgLyBkcHIgLyBzeSkgfHwgMDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgUGF0aFByb3h5LnByb3RvdHlwZS5zZXREUFIgPSBmdW5jdGlvbiAoZHByKSB7XG4gICAgICAgIHRoaXMuZHByID0gZHByO1xuICAgIH07XG4gICAgUGF0aFByb3h5LnByb3RvdHlwZS5zZXRDb250ZXh0ID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICB0aGlzLl9jdHggPSBjdHg7XG4gICAgfTtcbiAgICBQYXRoUHJveHkucHJvdG90eXBlLmdldENvbnRleHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jdHg7XG4gICAgfTtcbiAgICBQYXRoUHJveHkucHJvdG90eXBlLmJlZ2luUGF0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fY3R4ICYmIHRoaXMuX2N0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIFBhdGhQcm94eS5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLl9zYXZlRGF0YSkge1xuICAgICAgICAgICAgdGhpcy5fbGVuID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fcGF0aFNlZ0xlbikge1xuICAgICAgICAgICAgdGhpcy5fcGF0aFNlZ0xlbiA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl9wYXRoTGVuID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl92ZXJzaW9uKys7XG4gICAgfTtcbiAgICBQYXRoUHJveHkucHJvdG90eXBlLm1vdmVUbyA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHRoaXMuX2RyYXdQZW5kaW5nUHQoKTtcbiAgICAgICAgdGhpcy5hZGREYXRhKENNRC5NLCB4LCB5KTtcbiAgICAgICAgdGhpcy5fY3R4ICYmIHRoaXMuX2N0eC5tb3ZlVG8oeCwgeSk7XG4gICAgICAgIHRoaXMuX3gwID0geDtcbiAgICAgICAgdGhpcy5feTAgPSB5O1xuICAgICAgICB0aGlzLl94aSA9IHg7XG4gICAgICAgIHRoaXMuX3lpID0geTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBQYXRoUHJveHkucHJvdG90eXBlLmxpbmVUbyA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHZhciBkeCA9IG1hdGhBYnMoeCAtIHRoaXMuX3hpKTtcbiAgICAgICAgdmFyIGR5ID0gbWF0aEFicyh5IC0gdGhpcy5feWkpO1xuICAgICAgICB2YXIgZXhjZWVkVW5pdCA9IGR4ID4gdGhpcy5fdXggfHwgZHkgPiB0aGlzLl91eTtcbiAgICAgICAgdGhpcy5hZGREYXRhKENNRC5MLCB4LCB5KTtcbiAgICAgICAgaWYgKHRoaXMuX2N0eCAmJiBleGNlZWRVbml0KSB7XG4gICAgICAgICAgICB0aGlzLl9jdHgubGluZVRvKHgsIHkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChleGNlZWRVbml0KSB7XG4gICAgICAgICAgICB0aGlzLl94aSA9IHg7XG4gICAgICAgICAgICB0aGlzLl95aSA9IHk7XG4gICAgICAgICAgICB0aGlzLl9wZW5kaW5nUHREaXN0ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBkMiA9IGR4ICogZHggKyBkeSAqIGR5O1xuICAgICAgICAgICAgaWYgKGQyID4gdGhpcy5fcGVuZGluZ1B0RGlzdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdQdFggPSB4O1xuICAgICAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdQdFkgPSB5O1xuICAgICAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdQdERpc3QgPSBkMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIFBhdGhQcm94eS5wcm90b3R5cGUuYmV6aWVyQ3VydmVUbyA9IGZ1bmN0aW9uICh4MSwgeTEsIHgyLCB5MiwgeDMsIHkzKSB7XG4gICAgICAgIHRoaXMuX2RyYXdQZW5kaW5nUHQoKTtcbiAgICAgICAgdGhpcy5hZGREYXRhKENNRC5DLCB4MSwgeTEsIHgyLCB5MiwgeDMsIHkzKTtcbiAgICAgICAgaWYgKHRoaXMuX2N0eCkge1xuICAgICAgICAgICAgdGhpcy5fY3R4LmJlemllckN1cnZlVG8oeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5feGkgPSB4MztcbiAgICAgICAgdGhpcy5feWkgPSB5MztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBQYXRoUHJveHkucHJvdG90eXBlLnF1YWRyYXRpY0N1cnZlVG8gPSBmdW5jdGlvbiAoeDEsIHkxLCB4MiwgeTIpIHtcbiAgICAgICAgdGhpcy5fZHJhd1BlbmRpbmdQdCgpO1xuICAgICAgICB0aGlzLmFkZERhdGEoQ01ELlEsIHgxLCB5MSwgeDIsIHkyKTtcbiAgICAgICAgaWYgKHRoaXMuX2N0eCkge1xuICAgICAgICAgICAgdGhpcy5fY3R4LnF1YWRyYXRpY0N1cnZlVG8oeDEsIHkxLCB4MiwgeTIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3hpID0geDI7XG4gICAgICAgIHRoaXMuX3lpID0geTI7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgUGF0aFByb3h5LnByb3RvdHlwZS5hcmMgPSBmdW5jdGlvbiAoY3gsIGN5LCByLCBzdGFydEFuZ2xlLCBlbmRBbmdsZSwgYW50aWNsb2Nrd2lzZSkge1xuICAgICAgICB0aGlzLl9kcmF3UGVuZGluZ1B0KCk7XG4gICAgICAgIHRtcEFuZ2xlc1swXSA9IHN0YXJ0QW5nbGU7XG4gICAgICAgIHRtcEFuZ2xlc1sxXSA9IGVuZEFuZ2xlO1xuICAgICAgICBub3JtYWxpemVBcmNBbmdsZXModG1wQW5nbGVzLCBhbnRpY2xvY2t3aXNlKTtcbiAgICAgICAgc3RhcnRBbmdsZSA9IHRtcEFuZ2xlc1swXTtcbiAgICAgICAgZW5kQW5nbGUgPSB0bXBBbmdsZXNbMV07XG4gICAgICAgIHZhciBkZWx0YSA9IGVuZEFuZ2xlIC0gc3RhcnRBbmdsZTtcbiAgICAgICAgdGhpcy5hZGREYXRhKENNRC5BLCBjeCwgY3ksIHIsIHIsIHN0YXJ0QW5nbGUsIGRlbHRhLCAwLCBhbnRpY2xvY2t3aXNlID8gMCA6IDEpO1xuICAgICAgICB0aGlzLl9jdHggJiYgdGhpcy5fY3R4LmFyYyhjeCwgY3ksIHIsIHN0YXJ0QW5nbGUsIGVuZEFuZ2xlLCBhbnRpY2xvY2t3aXNlKTtcbiAgICAgICAgdGhpcy5feGkgPSBtYXRoQ29zKGVuZEFuZ2xlKSAqIHIgKyBjeDtcbiAgICAgICAgdGhpcy5feWkgPSBtYXRoU2luKGVuZEFuZ2xlKSAqIHIgKyBjeTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBQYXRoUHJveHkucHJvdG90eXBlLmFyY1RvID0gZnVuY3Rpb24gKHgxLCB5MSwgeDIsIHkyLCByYWRpdXMpIHtcbiAgICAgICAgdGhpcy5fZHJhd1BlbmRpbmdQdCgpO1xuICAgICAgICBpZiAodGhpcy5fY3R4KSB7XG4gICAgICAgICAgICB0aGlzLl9jdHguYXJjVG8oeDEsIHkxLCB4MiwgeTIsIHJhZGl1cyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBQYXRoUHJveHkucHJvdG90eXBlLnJlY3QgPSBmdW5jdGlvbiAoeCwgeSwgdywgaCkge1xuICAgICAgICB0aGlzLl9kcmF3UGVuZGluZ1B0KCk7XG4gICAgICAgIHRoaXMuX2N0eCAmJiB0aGlzLl9jdHgucmVjdCh4LCB5LCB3LCBoKTtcbiAgICAgICAgdGhpcy5hZGREYXRhKENNRC5SLCB4LCB5LCB3LCBoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBQYXRoUHJveHkucHJvdG90eXBlLmNsb3NlUGF0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fZHJhd1BlbmRpbmdQdCgpO1xuICAgICAgICB0aGlzLmFkZERhdGEoQ01ELlopO1xuICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY3R4O1xuICAgICAgICB2YXIgeDAgPSB0aGlzLl94MDtcbiAgICAgICAgdmFyIHkwID0gdGhpcy5feTA7XG4gICAgICAgIGlmIChjdHgpIHtcbiAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl94aSA9IHgwO1xuICAgICAgICB0aGlzLl95aSA9IHkwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIFBhdGhQcm94eS5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgY3R4ICYmIGN0eC5maWxsKCk7XG4gICAgICAgIHRoaXMudG9TdGF0aWMoKTtcbiAgICB9O1xuICAgIFBhdGhQcm94eS5wcm90b3R5cGUuc3Ryb2tlID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICBjdHggJiYgY3R4LnN0cm9rZSgpO1xuICAgICAgICB0aGlzLnRvU3RhdGljKCk7XG4gICAgfTtcbiAgICBQYXRoUHJveHkucHJvdG90eXBlLmxlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xlbjtcbiAgICB9O1xuICAgIFBhdGhQcm94eS5wcm90b3R5cGUuc2V0RGF0YSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHZhciBsZW4gPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgaWYgKCEodGhpcy5kYXRhICYmIHRoaXMuZGF0YS5sZW5ndGggPT09IGxlbikgJiYgaGFzVHlwZWRBcnJheSkge1xuICAgICAgICAgICAgdGhpcy5kYXRhID0gbmV3IEZsb2F0MzJBcnJheShsZW4pO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtpXSA9IGRhdGFbaV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbGVuID0gbGVuO1xuICAgIH07XG4gICAgUGF0aFByb3h5LnByb3RvdHlwZS5hcHBlbmRQYXRoID0gZnVuY3Rpb24gKHBhdGgpIHtcbiAgICAgICAgaWYgKCEocGF0aCBpbnN0YW5jZW9mIEFycmF5KSkge1xuICAgICAgICAgICAgcGF0aCA9IFtwYXRoXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGVuID0gcGF0aC5sZW5ndGg7XG4gICAgICAgIHZhciBhcHBlbmRTaXplID0gMDtcbiAgICAgICAgdmFyIG9mZnNldCA9IHRoaXMuX2xlbjtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgYXBwZW5kU2l6ZSArPSBwYXRoW2ldLmxlbigpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNUeXBlZEFycmF5ICYmICh0aGlzLmRhdGEgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkpKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBuZXcgRmxvYXQzMkFycmF5KG9mZnNldCArIGFwcGVuZFNpemUpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBhcHBlbmRQYXRoRGF0YSA9IHBhdGhbaV0uZGF0YTtcbiAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgYXBwZW5kUGF0aERhdGEubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbb2Zmc2V0KytdID0gYXBwZW5kUGF0aERhdGFba107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbGVuID0gb2Zmc2V0O1xuICAgIH07XG4gICAgUGF0aFByb3h5LnByb3RvdHlwZS5hZGREYXRhID0gZnVuY3Rpb24gKGNtZCwgYSwgYiwgYywgZCwgZSwgZiwgZywgaCkge1xuICAgICAgICBpZiAoIXRoaXMuX3NhdmVEYXRhKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgICAgIGlmICh0aGlzLl9sZW4gKyBhcmd1bWVudHMubGVuZ3RoID4gZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuX2V4cGFuZERhdGEoKTtcbiAgICAgICAgICAgIGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGRhdGFbdGhpcy5fbGVuKytdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBQYXRoUHJveHkucHJvdG90eXBlLl9kcmF3UGVuZGluZ1B0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5fcGVuZGluZ1B0RGlzdCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2N0eCAmJiB0aGlzLl9jdHgubGluZVRvKHRoaXMuX3BlbmRpbmdQdFgsIHRoaXMuX3BlbmRpbmdQdFkpO1xuICAgICAgICAgICAgdGhpcy5fcGVuZGluZ1B0RGlzdCA9IDA7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFBhdGhQcm94eS5wcm90b3R5cGUuX2V4cGFuZERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghKHRoaXMuZGF0YSBpbnN0YW5jZW9mIEFycmF5KSkge1xuICAgICAgICAgICAgdmFyIG5ld0RhdGEgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBuZXdEYXRhW2ldID0gdGhpcy5kYXRhW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kYXRhID0gbmV3RGF0YTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgUGF0aFByb3h5LnByb3RvdHlwZS50b1N0YXRpYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9zYXZlRGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2RyYXdQZW5kaW5nUHQoKTtcbiAgICAgICAgdmFyIGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIGRhdGEubGVuZ3RoID0gdGhpcy5fbGVuO1xuICAgICAgICAgICAgaWYgKGhhc1R5cGVkQXJyYXkgJiYgdGhpcy5fbGVuID4gMTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSBuZXcgRmxvYXQzMkFycmF5KGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBQYXRoUHJveHkucHJvdG90eXBlLmdldEJvdW5kaW5nUmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbWluWzBdID0gbWluWzFdID0gbWluMlswXSA9IG1pbjJbMV0gPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICAgICAgICBtYXhbMF0gPSBtYXhbMV0gPSBtYXgyWzBdID0gbWF4MlsxXSA9IC1OdW1iZXIuTUFYX1ZBTFVFO1xuICAgICAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICAgICAgdmFyIHhpID0gMDtcbiAgICAgICAgdmFyIHlpID0gMDtcbiAgICAgICAgdmFyIHgwID0gMDtcbiAgICAgICAgdmFyIHkwID0gMDtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLl9sZW47KSB7XG4gICAgICAgICAgICB2YXIgY21kID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgdmFyIGlzRmlyc3QgPSBpID09PSAxO1xuICAgICAgICAgICAgaWYgKGlzRmlyc3QpIHtcbiAgICAgICAgICAgICAgICB4aSA9IGRhdGFbaV07XG4gICAgICAgICAgICAgICAgeWkgPSBkYXRhW2kgKyAxXTtcbiAgICAgICAgICAgICAgICB4MCA9IHhpO1xuICAgICAgICAgICAgICAgIHkwID0geWk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKGNtZCkge1xuICAgICAgICAgICAgICAgIGNhc2UgQ01ELk06XG4gICAgICAgICAgICAgICAgICAgIHhpID0geDAgPSBkYXRhW2krK107XG4gICAgICAgICAgICAgICAgICAgIHlpID0geTAgPSBkYXRhW2krK107XG4gICAgICAgICAgICAgICAgICAgIG1pbjJbMF0gPSB4MDtcbiAgICAgICAgICAgICAgICAgICAgbWluMlsxXSA9IHkwO1xuICAgICAgICAgICAgICAgICAgICBtYXgyWzBdID0geDA7XG4gICAgICAgICAgICAgICAgICAgIG1heDJbMV0gPSB5MDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBDTUQuTDpcbiAgICAgICAgICAgICAgICAgICAgZnJvbUxpbmUoeGksIHlpLCBkYXRhW2ldLCBkYXRhW2kgKyAxXSwgbWluMiwgbWF4Mik7XG4gICAgICAgICAgICAgICAgICAgIHhpID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgICAgICB5aSA9IGRhdGFbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBDTUQuQzpcbiAgICAgICAgICAgICAgICAgICAgZnJvbUN1YmljKHhpLCB5aSwgZGF0YVtpKytdLCBkYXRhW2krK10sIGRhdGFbaSsrXSwgZGF0YVtpKytdLCBkYXRhW2ldLCBkYXRhW2kgKyAxXSwgbWluMiwgbWF4Mik7XG4gICAgICAgICAgICAgICAgICAgIHhpID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgICAgICB5aSA9IGRhdGFbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBDTUQuUTpcbiAgICAgICAgICAgICAgICAgICAgZnJvbVF1YWRyYXRpYyh4aSwgeWksIGRhdGFbaSsrXSwgZGF0YVtpKytdLCBkYXRhW2ldLCBkYXRhW2kgKyAxXSwgbWluMiwgbWF4Mik7XG4gICAgICAgICAgICAgICAgICAgIHhpID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgICAgICB5aSA9IGRhdGFbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBDTUQuQTpcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN4ID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3kgPSBkYXRhW2krK107XG4gICAgICAgICAgICAgICAgICAgIHZhciByeCA9IGRhdGFbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJ5ID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhcnRBbmdsZSA9IGRhdGFbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZEFuZ2xlID0gZGF0YVtpKytdICsgc3RhcnRBbmdsZTtcbiAgICAgICAgICAgICAgICAgICAgaSArPSAxO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYW50aWNsb2Nrd2lzZSA9ICFkYXRhW2krK107XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0ZpcnN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4MCA9IG1hdGhDb3Moc3RhcnRBbmdsZSkgKiByeCArIGN4O1xuICAgICAgICAgICAgICAgICAgICAgICAgeTAgPSBtYXRoU2luKHN0YXJ0QW5nbGUpICogcnkgKyBjeTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmcm9tQXJjKGN4LCBjeSwgcngsIHJ5LCBzdGFydEFuZ2xlLCBlbmRBbmdsZSwgYW50aWNsb2Nrd2lzZSwgbWluMiwgbWF4Mik7XG4gICAgICAgICAgICAgICAgICAgIHhpID0gbWF0aENvcyhlbmRBbmdsZSkgKiByeCArIGN4O1xuICAgICAgICAgICAgICAgICAgICB5aSA9IG1hdGhTaW4oZW5kQW5nbGUpICogcnkgKyBjeTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBDTUQuUjpcbiAgICAgICAgICAgICAgICAgICAgeDAgPSB4aSA9IGRhdGFbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgeTAgPSB5aSA9IGRhdGFbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgICAgICBmcm9tTGluZSh4MCwgeTAsIHgwICsgd2lkdGgsIHkwICsgaGVpZ2h0LCBtaW4yLCBtYXgyKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBDTUQuWjpcbiAgICAgICAgICAgICAgICAgICAgeGkgPSB4MDtcbiAgICAgICAgICAgICAgICAgICAgeWkgPSB5MDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2ZWMyLm1pbihtaW4sIG1pbiwgbWluMik7XG4gICAgICAgICAgICB2ZWMyLm1heChtYXgsIG1heCwgbWF4Mik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgIG1pblswXSA9IG1pblsxXSA9IG1heFswXSA9IG1heFsxXSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBCb3VuZGluZ1JlY3QobWluWzBdLCBtaW5bMV0sIG1heFswXSAtIG1pblswXSwgbWF4WzFdIC0gbWluWzFdKTtcbiAgICB9O1xuICAgIFBhdGhQcm94eS5wcm90b3R5cGUuX2NhbGN1bGF0ZUxlbmd0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgICAgIHZhciBsZW4gPSB0aGlzLl9sZW47XG4gICAgICAgIHZhciB1eCA9IHRoaXMuX3V4O1xuICAgICAgICB2YXIgdXkgPSB0aGlzLl91eTtcbiAgICAgICAgdmFyIHhpID0gMDtcbiAgICAgICAgdmFyIHlpID0gMDtcbiAgICAgICAgdmFyIHgwID0gMDtcbiAgICAgICAgdmFyIHkwID0gMDtcbiAgICAgICAgaWYgKCF0aGlzLl9wYXRoU2VnTGVuKSB7XG4gICAgICAgICAgICB0aGlzLl9wYXRoU2VnTGVuID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBhdGhTZWdMZW4gPSB0aGlzLl9wYXRoU2VnTGVuO1xuICAgICAgICB2YXIgcGF0aFRvdGFsTGVuID0gMDtcbiAgICAgICAgdmFyIHNlZ0NvdW50ID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47KSB7XG4gICAgICAgICAgICB2YXIgY21kID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgdmFyIGlzRmlyc3QgPSBpID09PSAxO1xuICAgICAgICAgICAgaWYgKGlzRmlyc3QpIHtcbiAgICAgICAgICAgICAgICB4aSA9IGRhdGFbaV07XG4gICAgICAgICAgICAgICAgeWkgPSBkYXRhW2kgKyAxXTtcbiAgICAgICAgICAgICAgICB4MCA9IHhpO1xuICAgICAgICAgICAgICAgIHkwID0geWk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbCA9IC0xO1xuICAgICAgICAgICAgc3dpdGNoIChjbWQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIENNRC5NOlxuICAgICAgICAgICAgICAgICAgICB4aSA9IHgwID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgICAgICB5aSA9IHkwID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIENNRC5MOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB4MiA9IGRhdGFbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkyID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZHggPSB4MiAtIHhpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZHkgPSB5MiAtIHlpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF0aEFicyhkeCkgPiB1eCB8fCBtYXRoQWJzKGR5KSA+IHV5IHx8IGkgPT09IGxlbiAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgeGkgPSB4MjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpID0geTI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgQ01ELkM6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHgxID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeTEgPSBkYXRhW2krK107XG4gICAgICAgICAgICAgICAgICAgIHZhciB4MiA9IGRhdGFbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkyID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeDMgPSBkYXRhW2krK107XG4gICAgICAgICAgICAgICAgICAgIHZhciB5MyA9IGRhdGFbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgbCA9IGN1YmljTGVuZ3RoKHhpLCB5aSwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MywgMTApO1xuICAgICAgICAgICAgICAgICAgICB4aSA9IHgzO1xuICAgICAgICAgICAgICAgICAgICB5aSA9IHkzO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBDTUQuUToge1xuICAgICAgICAgICAgICAgICAgICB2YXIgeDEgPSBkYXRhW2krK107XG4gICAgICAgICAgICAgICAgICAgIHZhciB5MSA9IGRhdGFbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHgyID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeTIgPSBkYXRhW2krK107XG4gICAgICAgICAgICAgICAgICAgIGwgPSBxdWFkcmF0aWNMZW5ndGgoeGksIHlpLCB4MSwgeTEsIHgyLCB5MiwgMTApO1xuICAgICAgICAgICAgICAgICAgICB4aSA9IHgyO1xuICAgICAgICAgICAgICAgICAgICB5aSA9IHkyO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBDTUQuQTpcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN4ID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3kgPSBkYXRhW2krK107XG4gICAgICAgICAgICAgICAgICAgIHZhciByeCA9IGRhdGFbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJ5ID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhcnRBbmdsZSA9IGRhdGFbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kQW5nbGUgPSBkZWx0YSArIHN0YXJ0QW5nbGU7XG4gICAgICAgICAgICAgICAgICAgIGkgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFudGljbG9ja3dpc2UgPSAhZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNGaXJzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgeDAgPSBtYXRoQ29zKHN0YXJ0QW5nbGUpICogcnggKyBjeDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHkwID0gbWF0aFNpbihzdGFydEFuZ2xlKSAqIHJ5ICsgY3k7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbCA9IG1hdGhNYXgocngsIHJ5KSAqIG1hdGhNaW4oUEkyLCBNYXRoLmFicyhkZWx0YSkpO1xuICAgICAgICAgICAgICAgICAgICB4aSA9IG1hdGhDb3MoZW5kQW5nbGUpICogcnggKyBjeDtcbiAgICAgICAgICAgICAgICAgICAgeWkgPSBtYXRoU2luKGVuZEFuZ2xlKSAqIHJ5ICsgY3k7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgQ01ELlI6IHtcbiAgICAgICAgICAgICAgICAgICAgeDAgPSB4aSA9IGRhdGFbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgeTAgPSB5aSA9IGRhdGFbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgICAgICBsID0gd2lkdGggKiAyICsgaGVpZ2h0ICogMjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgQ01ELlo6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGR4ID0geDAgLSB4aTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGR5ID0geTAgLSB5aTtcbiAgICAgICAgICAgICAgICAgICAgbCA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gICAgICAgICAgICAgICAgICAgIHhpID0geDA7XG4gICAgICAgICAgICAgICAgICAgIHlpID0geTA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsID49IDApIHtcbiAgICAgICAgICAgICAgICBwYXRoU2VnTGVuW3NlZ0NvdW50KytdID0gbDtcbiAgICAgICAgICAgICAgICBwYXRoVG90YWxMZW4gKz0gbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wYXRoTGVuID0gcGF0aFRvdGFsTGVuO1xuICAgICAgICByZXR1cm4gcGF0aFRvdGFsTGVuO1xuICAgIH07XG4gICAgUGF0aFByb3h5LnByb3RvdHlwZS5yZWJ1aWxkUGF0aCA9IGZ1bmN0aW9uIChjdHgsIHBlcmNlbnQpIHtcbiAgICAgICAgdmFyIGQgPSB0aGlzLmRhdGE7XG4gICAgICAgIHZhciB1eCA9IHRoaXMuX3V4O1xuICAgICAgICB2YXIgdXkgPSB0aGlzLl91eTtcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMuX2xlbjtcbiAgICAgICAgdmFyIHgwO1xuICAgICAgICB2YXIgeTA7XG4gICAgICAgIHZhciB4aTtcbiAgICAgICAgdmFyIHlpO1xuICAgICAgICB2YXIgeDtcbiAgICAgICAgdmFyIHk7XG4gICAgICAgIHZhciBkcmF3UGFydCA9IHBlcmNlbnQgPCAxO1xuICAgICAgICB2YXIgcGF0aFNlZ0xlbjtcbiAgICAgICAgdmFyIHBhdGhUb3RhbExlbjtcbiAgICAgICAgdmFyIGFjY3VtTGVuZ3RoID0gMDtcbiAgICAgICAgdmFyIHNlZ0NvdW50ID0gMDtcbiAgICAgICAgdmFyIGRpc3BsYXllZExlbmd0aDtcbiAgICAgICAgdmFyIHBlbmRpbmdQdERpc3QgPSAwO1xuICAgICAgICB2YXIgcGVuZGluZ1B0WDtcbiAgICAgICAgdmFyIHBlbmRpbmdQdFk7XG4gICAgICAgIGlmIChkcmF3UGFydCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9wYXRoU2VnTGVuKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FsY3VsYXRlTGVuZ3RoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXRoU2VnTGVuID0gdGhpcy5fcGF0aFNlZ0xlbjtcbiAgICAgICAgICAgIHBhdGhUb3RhbExlbiA9IHRoaXMuX3BhdGhMZW47XG4gICAgICAgICAgICBkaXNwbGF5ZWRMZW5ndGggPSBwZXJjZW50ICogcGF0aFRvdGFsTGVuO1xuICAgICAgICAgICAgaWYgKCFkaXNwbGF5ZWRMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbG86IGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOykge1xuICAgICAgICAgICAgdmFyIGNtZCA9IGRbaSsrXTtcbiAgICAgICAgICAgIHZhciBpc0ZpcnN0ID0gaSA9PT0gMTtcbiAgICAgICAgICAgIGlmIChpc0ZpcnN0KSB7XG4gICAgICAgICAgICAgICAgeGkgPSBkW2ldO1xuICAgICAgICAgICAgICAgIHlpID0gZFtpICsgMV07XG4gICAgICAgICAgICAgICAgeDAgPSB4aTtcbiAgICAgICAgICAgICAgICB5MCA9IHlpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNtZCAhPT0gQ01ELkwgJiYgcGVuZGluZ1B0RGlzdCA+IDApIHtcbiAgICAgICAgICAgICAgICBjdHgubGluZVRvKHBlbmRpbmdQdFgsIHBlbmRpbmdQdFkpO1xuICAgICAgICAgICAgICAgIHBlbmRpbmdQdERpc3QgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChjbWQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIENNRC5NOlxuICAgICAgICAgICAgICAgICAgICB4MCA9IHhpID0gZFtpKytdO1xuICAgICAgICAgICAgICAgICAgICB5MCA9IHlpID0gZFtpKytdO1xuICAgICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKHhpLCB5aSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgQ01ELkw6IHtcbiAgICAgICAgICAgICAgICAgICAgeCA9IGRbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgeSA9IGRbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGR4ID0gbWF0aEFicyh4IC0geGkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZHkgPSBtYXRoQWJzKHkgLSB5aSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkeCA+IHV4IHx8IGR5ID4gdXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkcmF3UGFydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gcGF0aFNlZ0xlbltzZWdDb3VudCsrXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWNjdW1MZW5ndGggKyBsID4gZGlzcGxheWVkTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gKGRpc3BsYXllZExlbmd0aCAtIGFjY3VtTGVuZ3RoKSAvIGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oeGkgKiAoMSAtIHQpICsgeCAqIHQsIHlpICogKDEgLSB0KSArIHkgKiB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgbG87XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY3VtTGVuZ3RoICs9IGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKHgsIHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgeGkgPSB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgeWkgPSB5O1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1B0RGlzdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZDIgPSBkeCAqIGR4ICsgZHkgKiBkeTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkMiA+IHBlbmRpbmdQdERpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nUHRYID0geDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nUHRZID0geTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nUHREaXN0ID0gZDI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgQ01ELkM6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHgxID0gZFtpKytdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeTEgPSBkW2krK107XG4gICAgICAgICAgICAgICAgICAgIHZhciB4MiA9IGRbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkyID0gZFtpKytdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeDMgPSBkW2krK107XG4gICAgICAgICAgICAgICAgICAgIHZhciB5MyA9IGRbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRyYXdQYXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IHBhdGhTZWdMZW5bc2VnQ291bnQrK107XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWNjdW1MZW5ndGggKyBsID4gZGlzcGxheWVkTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSAoZGlzcGxheWVkTGVuZ3RoIC0gYWNjdW1MZW5ndGgpIC8gbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdWJpY1N1YmRpdmlkZSh4aSwgeDEsIHgyLCB4MywgdCwgdG1wT3V0WCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3ViaWNTdWJkaXZpZGUoeWksIHkxLCB5MiwgeTMsIHQsIHRtcE91dFkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZXppZXJDdXJ2ZVRvKHRtcE91dFhbMV0sIHRtcE91dFlbMV0sIHRtcE91dFhbMl0sIHRtcE91dFlbMl0sIHRtcE91dFhbM10sIHRtcE91dFlbM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGxvO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjdW1MZW5ndGggKz0gbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjdHguYmV6aWVyQ3VydmVUbyh4MSwgeTEsIHgyLCB5MiwgeDMsIHkzKTtcbiAgICAgICAgICAgICAgICAgICAgeGkgPSB4MztcbiAgICAgICAgICAgICAgICAgICAgeWkgPSB5MztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgQ01ELlE6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHgxID0gZFtpKytdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeTEgPSBkW2krK107XG4gICAgICAgICAgICAgICAgICAgIHZhciB4MiA9IGRbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkyID0gZFtpKytdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZHJhd1BhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gcGF0aFNlZ0xlbltzZWdDb3VudCsrXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY2N1bUxlbmd0aCArIGwgPiBkaXNwbGF5ZWRMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IChkaXNwbGF5ZWRMZW5ndGggLSBhY2N1bUxlbmd0aCkgLyBsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1YWRyYXRpY1N1YmRpdmlkZSh4aSwgeDEsIHgyLCB0LCB0bXBPdXRYKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWFkcmF0aWNTdWJkaXZpZGUoeWksIHkxLCB5MiwgdCwgdG1wT3V0WSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnF1YWRyYXRpY0N1cnZlVG8odG1wT3V0WFsxXSwgdG1wT3V0WVsxXSwgdG1wT3V0WFsyXSwgdG1wT3V0WVsyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgbG87XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2N1bUxlbmd0aCArPSBsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHgxLCB5MSwgeDIsIHkyKTtcbiAgICAgICAgICAgICAgICAgICAgeGkgPSB4MjtcbiAgICAgICAgICAgICAgICAgICAgeWkgPSB5MjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgQ01ELkE6XG4gICAgICAgICAgICAgICAgICAgIHZhciBjeCA9IGRbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN5ID0gZFtpKytdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcnggPSBkW2krK107XG4gICAgICAgICAgICAgICAgICAgIHZhciByeSA9IGRbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0QW5nbGUgPSBkW2krK107XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IGRbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBzaSA9IGRbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFudGljbG9ja3dpc2UgPSAhZFtpKytdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgciA9IChyeCA+IHJ5KSA/IHJ4IDogcnk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpc0VsbGlwc2UgPSBtYXRoQWJzKHJ4IC0gcnkpID4gMWUtMztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZEFuZ2xlID0gc3RhcnRBbmdsZSArIGRlbHRhO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYnJlYWtCdWlsZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZHJhd1BhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gcGF0aFNlZ0xlbltzZWdDb3VudCsrXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY2N1bUxlbmd0aCArIGwgPiBkaXNwbGF5ZWRMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRBbmdsZSA9IHN0YXJ0QW5nbGUgKyBkZWx0YSAqIChkaXNwbGF5ZWRMZW5ndGggLSBhY2N1bUxlbmd0aCkgLyBsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrQnVpbGQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjdW1MZW5ndGggKz0gbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNFbGxpcHNlICYmIGN0eC5lbGxpcHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguZWxsaXBzZShjeCwgY3ksIHJ4LCByeSwgcHNpLCBzdGFydEFuZ2xlLCBlbmRBbmdsZSwgYW50aWNsb2Nrd2lzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguYXJjKGN4LCBjeSwgciwgc3RhcnRBbmdsZSwgZW5kQW5nbGUsIGFudGljbG9ja3dpc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChicmVha0J1aWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhayBsbztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNGaXJzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgeDAgPSBtYXRoQ29zKHN0YXJ0QW5nbGUpICogcnggKyBjeDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHkwID0gbWF0aFNpbihzdGFydEFuZ2xlKSAqIHJ5ICsgY3k7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgeGkgPSBtYXRoQ29zKGVuZEFuZ2xlKSAqIHJ4ICsgY3g7XG4gICAgICAgICAgICAgICAgICAgIHlpID0gbWF0aFNpbihlbmRBbmdsZSkgKiByeSArIGN5O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIENNRC5SOlxuICAgICAgICAgICAgICAgICAgICB4MCA9IHhpID0gZFtpXTtcbiAgICAgICAgICAgICAgICAgICAgeTAgPSB5aSA9IGRbaSArIDFdO1xuICAgICAgICAgICAgICAgICAgICB4ID0gZFtpKytdO1xuICAgICAgICAgICAgICAgICAgICB5ID0gZFtpKytdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBkW2krK107XG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBkW2krK107XG4gICAgICAgICAgICAgICAgICAgIGlmIChkcmF3UGFydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSBwYXRoU2VnTGVuW3NlZ0NvdW50KytdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjY3VtTGVuZ3RoICsgbCA+IGRpc3BsYXllZExlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkXzEgPSBkaXNwbGF5ZWRMZW5ndGggLSBhY2N1bUxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKHgsIHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oeCArIG1hdGhNaW4oZF8xLCB3aWR0aCksIHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRfMSAtPSB3aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZF8xID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKHggKyB3aWR0aCwgeSArIG1hdGhNaW4oZF8xLCBoZWlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZF8xIC09IGhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZF8xID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKHggKyBtYXRoTWF4KHdpZHRoIC0gZF8xLCAwKSwgeSArIGhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRfMSAtPSB3aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZF8xID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKHgsIHkgKyBtYXRoTWF4KGhlaWdodCAtIGRfMSwgMCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayBsbztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY3VtTGVuZ3RoICs9IGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY3R4LnJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgQ01ELlo6XG4gICAgICAgICAgICAgICAgICAgIGlmIChkcmF3UGFydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSBwYXRoU2VnTGVuW3NlZ0NvdW50KytdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjY3VtTGVuZ3RoICsgbCA+IGRpc3BsYXllZExlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gKGRpc3BsYXllZExlbmd0aCAtIGFjY3VtTGVuZ3RoKSAvIGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyh4aSAqICgxIC0gdCkgKyB4MCAqIHQsIHlpICogKDEgLSB0KSArIHkwICogdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgbG87XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2N1bUxlbmd0aCArPSBsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgICAgICAgICAgeGkgPSB4MDtcbiAgICAgICAgICAgICAgICAgICAgeWkgPSB5MDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgUGF0aFByb3h5LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG5ld1Byb3h5ID0gbmV3IFBhdGhQcm94eSgpO1xuICAgICAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICAgICAgbmV3UHJveHkuZGF0YSA9IGRhdGEuc2xpY2UgPyBkYXRhLnNsaWNlKClcbiAgICAgICAgICAgIDogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZGF0YSk7XG4gICAgICAgIG5ld1Byb3h5Ll9sZW4gPSB0aGlzLl9sZW47XG4gICAgICAgIHJldHVybiBuZXdQcm94eTtcbiAgICB9O1xuICAgIFBhdGhQcm94eS5DTUQgPSBDTUQ7XG4gICAgUGF0aFByb3h5LmluaXREZWZhdWx0UHJvcHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcHJvdG8gPSBQYXRoUHJveHkucHJvdG90eXBlO1xuICAgICAgICBwcm90by5fc2F2ZURhdGEgPSB0cnVlO1xuICAgICAgICBwcm90by5fdXggPSAwO1xuICAgICAgICBwcm90by5fdXkgPSAwO1xuICAgICAgICBwcm90by5fcGVuZGluZ1B0RGlzdCA9IDA7XG4gICAgICAgIHByb3RvLl92ZXJzaW9uID0gMDtcbiAgICB9KSgpO1xuICAgIHJldHVybiBQYXRoUHJveHk7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgUGF0aFByb3h5O1xuIiwiZXhwb3J0IGZ1bmN0aW9uIGNvbnRhaW5TdHJva2UoeDAsIHkwLCB4MSwgeTEsIGxpbmVXaWR0aCwgeCwgeSkge1xuICAgIGlmIChsaW5lV2lkdGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgX2wgPSBsaW5lV2lkdGg7XG4gICAgdmFyIF9hID0gMDtcbiAgICB2YXIgX2IgPSB4MDtcbiAgICBpZiAoKHkgPiB5MCArIF9sICYmIHkgPiB5MSArIF9sKVxuICAgICAgICB8fCAoeSA8IHkwIC0gX2wgJiYgeSA8IHkxIC0gX2wpXG4gICAgICAgIHx8ICh4ID4geDAgKyBfbCAmJiB4ID4geDEgKyBfbClcbiAgICAgICAgfHwgKHggPCB4MCAtIF9sICYmIHggPCB4MSAtIF9sKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICh4MCAhPT0geDEpIHtcbiAgICAgICAgX2EgPSAoeTAgLSB5MSkgLyAoeDAgLSB4MSk7XG4gICAgICAgIF9iID0gKHgwICogeTEgLSB4MSAqIHkwKSAvICh4MCAtIHgxKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBNYXRoLmFicyh4IC0geDApIDw9IF9sIC8gMjtcbiAgICB9XG4gICAgdmFyIHRtcCA9IF9hICogeCAtIHkgKyBfYjtcbiAgICB2YXIgX3MgPSB0bXAgKiB0bXAgLyAoX2EgKiBfYSArIDEpO1xuICAgIHJldHVybiBfcyA8PSBfbCAvIDIgKiBfbCAvIDI7XG59XG4iLCJpbXBvcnQgKiBhcyBjdXJ2ZSBmcm9tICcuLi9jb3JlL2N1cnZlLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBjb250YWluU3Ryb2tlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MywgbGluZVdpZHRoLCB4LCB5KSB7XG4gICAgaWYgKGxpbmVXaWR0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciBfbCA9IGxpbmVXaWR0aDtcbiAgICBpZiAoKHkgPiB5MCArIF9sICYmIHkgPiB5MSArIF9sICYmIHkgPiB5MiArIF9sICYmIHkgPiB5MyArIF9sKVxuICAgICAgICB8fCAoeSA8IHkwIC0gX2wgJiYgeSA8IHkxIC0gX2wgJiYgeSA8IHkyIC0gX2wgJiYgeSA8IHkzIC0gX2wpXG4gICAgICAgIHx8ICh4ID4geDAgKyBfbCAmJiB4ID4geDEgKyBfbCAmJiB4ID4geDIgKyBfbCAmJiB4ID4geDMgKyBfbClcbiAgICAgICAgfHwgKHggPCB4MCAtIF9sICYmIHggPCB4MSAtIF9sICYmIHggPCB4MiAtIF9sICYmIHggPCB4MyAtIF9sKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciBkID0gY3VydmUuY3ViaWNQcm9qZWN0UG9pbnQoeDAsIHkwLCB4MSwgeTEsIHgyLCB5MiwgeDMsIHkzLCB4LCB5LCBudWxsKTtcbiAgICByZXR1cm4gZCA8PSBfbCAvIDI7XG59XG4iLCJpbXBvcnQgeyBxdWFkcmF0aWNQcm9qZWN0UG9pbnQgfSBmcm9tICcuLi9jb3JlL2N1cnZlLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBjb250YWluU3Ryb2tlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIGxpbmVXaWR0aCwgeCwgeSkge1xuICAgIGlmIChsaW5lV2lkdGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgX2wgPSBsaW5lV2lkdGg7XG4gICAgaWYgKCh5ID4geTAgKyBfbCAmJiB5ID4geTEgKyBfbCAmJiB5ID4geTIgKyBfbClcbiAgICAgICAgfHwgKHkgPCB5MCAtIF9sICYmIHkgPCB5MSAtIF9sICYmIHkgPCB5MiAtIF9sKVxuICAgICAgICB8fCAoeCA+IHgwICsgX2wgJiYgeCA+IHgxICsgX2wgJiYgeCA+IHgyICsgX2wpXG4gICAgICAgIHx8ICh4IDwgeDAgLSBfbCAmJiB4IDwgeDEgLSBfbCAmJiB4IDwgeDIgLSBfbCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgZCA9IHF1YWRyYXRpY1Byb2plY3RQb2ludCh4MCwgeTAsIHgxLCB5MSwgeDIsIHkyLCB4LCB5LCBudWxsKTtcbiAgICByZXR1cm4gZCA8PSBfbCAvIDI7XG59XG4iLCJ2YXIgUEkyID0gTWF0aC5QSSAqIDI7XG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplUmFkaWFuKGFuZ2xlKSB7XG4gICAgYW5nbGUgJT0gUEkyO1xuICAgIGlmIChhbmdsZSA8IDApIHtcbiAgICAgICAgYW5nbGUgKz0gUEkyO1xuICAgIH1cbiAgICByZXR1cm4gYW5nbGU7XG59XG4iLCJpbXBvcnQgeyBub3JtYWxpemVSYWRpYW4gfSBmcm9tICcuL3V0aWwuanMnO1xudmFyIFBJMiA9IE1hdGguUEkgKiAyO1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnRhaW5TdHJva2UoY3gsIGN5LCByLCBzdGFydEFuZ2xlLCBlbmRBbmdsZSwgYW50aWNsb2Nrd2lzZSwgbGluZVdpZHRoLCB4LCB5KSB7XG4gICAgaWYgKGxpbmVXaWR0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciBfbCA9IGxpbmVXaWR0aDtcbiAgICB4IC09IGN4O1xuICAgIHkgLT0gY3k7XG4gICAgdmFyIGQgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSk7XG4gICAgaWYgKChkIC0gX2wgPiByKSB8fCAoZCArIF9sIDwgcikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoTWF0aC5hYnMoc3RhcnRBbmdsZSAtIGVuZEFuZ2xlKSAlIFBJMiA8IDFlLTQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChhbnRpY2xvY2t3aXNlKSB7XG4gICAgICAgIHZhciB0bXAgPSBzdGFydEFuZ2xlO1xuICAgICAgICBzdGFydEFuZ2xlID0gbm9ybWFsaXplUmFkaWFuKGVuZEFuZ2xlKTtcbiAgICAgICAgZW5kQW5nbGUgPSBub3JtYWxpemVSYWRpYW4odG1wKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHN0YXJ0QW5nbGUgPSBub3JtYWxpemVSYWRpYW4oc3RhcnRBbmdsZSk7XG4gICAgICAgIGVuZEFuZ2xlID0gbm9ybWFsaXplUmFkaWFuKGVuZEFuZ2xlKTtcbiAgICB9XG4gICAgaWYgKHN0YXJ0QW5nbGUgPiBlbmRBbmdsZSkge1xuICAgICAgICBlbmRBbmdsZSArPSBQSTI7XG4gICAgfVxuICAgIHZhciBhbmdsZSA9IE1hdGguYXRhbjIoeSwgeCk7XG4gICAgaWYgKGFuZ2xlIDwgMCkge1xuICAgICAgICBhbmdsZSArPSBQSTI7XG4gICAgfVxuICAgIHJldHVybiAoYW5nbGUgPj0gc3RhcnRBbmdsZSAmJiBhbmdsZSA8PSBlbmRBbmdsZSlcbiAgICAgICAgfHwgKGFuZ2xlICsgUEkyID49IHN0YXJ0QW5nbGUgJiYgYW5nbGUgKyBQSTIgPD0gZW5kQW5nbGUpO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gd2luZGluZ0xpbmUoeDAsIHkwLCB4MSwgeTEsIHgsIHkpIHtcbiAgICBpZiAoKHkgPiB5MCAmJiB5ID4geTEpIHx8ICh5IDwgeTAgJiYgeSA8IHkxKSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgaWYgKHkxID09PSB5MCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgdmFyIHQgPSAoeSAtIHkwKSAvICh5MSAtIHkwKTtcbiAgICB2YXIgZGlyID0geTEgPCB5MCA/IDEgOiAtMTtcbiAgICBpZiAodCA9PT0gMSB8fCB0ID09PSAwKSB7XG4gICAgICAgIGRpciA9IHkxIDwgeTAgPyAwLjUgOiAtMC41O1xuICAgIH1cbiAgICB2YXIgeF8gPSB0ICogKHgxIC0geDApICsgeDA7XG4gICAgcmV0dXJuIHhfID09PSB4ID8gSW5maW5pdHkgOiB4XyA+IHggPyBkaXIgOiAwO1xufVxuIiwiaW1wb3J0IFBhdGhQcm94eSBmcm9tICcuLi9jb3JlL1BhdGhQcm94eS5qcyc7XG5pbXBvcnQgKiBhcyBsaW5lIGZyb20gJy4vbGluZS5qcyc7XG5pbXBvcnQgKiBhcyBjdWJpYyBmcm9tICcuL2N1YmljLmpzJztcbmltcG9ydCAqIGFzIHF1YWRyYXRpYyBmcm9tICcuL3F1YWRyYXRpYy5qcyc7XG5pbXBvcnQgKiBhcyBhcmMgZnJvbSAnLi9hcmMuanMnO1xuaW1wb3J0ICogYXMgY3VydmUgZnJvbSAnLi4vY29yZS9jdXJ2ZS5qcyc7XG5pbXBvcnQgd2luZGluZ0xpbmUgZnJvbSAnLi93aW5kaW5nTGluZS5qcyc7XG52YXIgQ01EID0gUGF0aFByb3h5LkNNRDtcbnZhciBQSTIgPSBNYXRoLlBJICogMjtcbnZhciBFUFNJTE9OID0gMWUtNDtcbmZ1bmN0aW9uIGlzQXJvdW5kRXF1YWwoYSwgYikge1xuICAgIHJldHVybiBNYXRoLmFicyhhIC0gYikgPCBFUFNJTE9OO1xufVxudmFyIHJvb3RzID0gWy0xLCAtMSwgLTFdO1xudmFyIGV4dHJlbWEgPSBbLTEsIC0xXTtcbmZ1bmN0aW9uIHN3YXBFeHRyZW1hKCkge1xuICAgIHZhciB0bXAgPSBleHRyZW1hWzBdO1xuICAgIGV4dHJlbWFbMF0gPSBleHRyZW1hWzFdO1xuICAgIGV4dHJlbWFbMV0gPSB0bXA7XG59XG5mdW5jdGlvbiB3aW5kaW5nQ3ViaWMoeDAsIHkwLCB4MSwgeTEsIHgyLCB5MiwgeDMsIHkzLCB4LCB5KSB7XG4gICAgaWYgKCh5ID4geTAgJiYgeSA+IHkxICYmIHkgPiB5MiAmJiB5ID4geTMpXG4gICAgICAgIHx8ICh5IDwgeTAgJiYgeSA8IHkxICYmIHkgPCB5MiAmJiB5IDwgeTMpKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICB2YXIgblJvb3RzID0gY3VydmUuY3ViaWNSb290QXQoeTAsIHkxLCB5MiwgeTMsIHksIHJvb3RzKTtcbiAgICBpZiAoblJvb3RzID09PSAwKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIHcgPSAwO1xuICAgICAgICB2YXIgbkV4dHJlbWEgPSAtMTtcbiAgICAgICAgdmFyIHkwXyA9IHZvaWQgMDtcbiAgICAgICAgdmFyIHkxXyA9IHZvaWQgMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuUm9vdHM7IGkrKykge1xuICAgICAgICAgICAgdmFyIHQgPSByb290c1tpXTtcbiAgICAgICAgICAgIHZhciB1bml0ID0gKHQgPT09IDAgfHwgdCA9PT0gMSkgPyAwLjUgOiAxO1xuICAgICAgICAgICAgdmFyIHhfID0gY3VydmUuY3ViaWNBdCh4MCwgeDEsIHgyLCB4MywgdCk7XG4gICAgICAgICAgICBpZiAoeF8gPCB4KSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobkV4dHJlbWEgPCAwKSB7XG4gICAgICAgICAgICAgICAgbkV4dHJlbWEgPSBjdXJ2ZS5jdWJpY0V4dHJlbWEoeTAsIHkxLCB5MiwgeTMsIGV4dHJlbWEpO1xuICAgICAgICAgICAgICAgIGlmIChleHRyZW1hWzFdIDwgZXh0cmVtYVswXSAmJiBuRXh0cmVtYSA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dhcEV4dHJlbWEoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgeTBfID0gY3VydmUuY3ViaWNBdCh5MCwgeTEsIHkyLCB5MywgZXh0cmVtYVswXSk7XG4gICAgICAgICAgICAgICAgaWYgKG5FeHRyZW1hID4gMSkge1xuICAgICAgICAgICAgICAgICAgICB5MV8gPSBjdXJ2ZS5jdWJpY0F0KHkwLCB5MSwgeTIsIHkzLCBleHRyZW1hWzFdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobkV4dHJlbWEgPT09IDIpIHtcbiAgICAgICAgICAgICAgICBpZiAodCA8IGV4dHJlbWFbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgdyArPSB5MF8gPCB5MCA/IHVuaXQgOiAtdW5pdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodCA8IGV4dHJlbWFbMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgdyArPSB5MV8gPCB5MF8gPyB1bml0IDogLXVuaXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB3ICs9IHkzIDwgeTFfID8gdW5pdCA6IC11bml0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0IDwgZXh0cmVtYVswXSkge1xuICAgICAgICAgICAgICAgICAgICB3ICs9IHkwXyA8IHkwID8gdW5pdCA6IC11bml0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdyArPSB5MyA8IHkwXyA/IHVuaXQgOiAtdW5pdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHc7XG4gICAgfVxufVxuZnVuY3Rpb24gd2luZGluZ1F1YWRyYXRpYyh4MCwgeTAsIHgxLCB5MSwgeDIsIHkyLCB4LCB5KSB7XG4gICAgaWYgKCh5ID4geTAgJiYgeSA+IHkxICYmIHkgPiB5MilcbiAgICAgICAgfHwgKHkgPCB5MCAmJiB5IDwgeTEgJiYgeSA8IHkyKSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgdmFyIG5Sb290cyA9IGN1cnZlLnF1YWRyYXRpY1Jvb3RBdCh5MCwgeTEsIHkyLCB5LCByb290cyk7XG4gICAgaWYgKG5Sb290cyA9PT0gMCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciB0ID0gY3VydmUucXVhZHJhdGljRXh0cmVtdW0oeTAsIHkxLCB5Mik7XG4gICAgICAgIGlmICh0ID49IDAgJiYgdCA8PSAxKSB7XG4gICAgICAgICAgICB2YXIgdyA9IDA7XG4gICAgICAgICAgICB2YXIgeV8gPSBjdXJ2ZS5xdWFkcmF0aWNBdCh5MCwgeTEsIHkyLCB0KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgblJvb3RzOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgdW5pdCA9IChyb290c1tpXSA9PT0gMCB8fCByb290c1tpXSA9PT0gMSkgPyAwLjUgOiAxO1xuICAgICAgICAgICAgICAgIHZhciB4XyA9IGN1cnZlLnF1YWRyYXRpY0F0KHgwLCB4MSwgeDIsIHJvb3RzW2ldKTtcbiAgICAgICAgICAgICAgICBpZiAoeF8gPCB4KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocm9vdHNbaV0gPCB0KSB7XG4gICAgICAgICAgICAgICAgICAgIHcgKz0geV8gPCB5MCA/IHVuaXQgOiAtdW5pdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHcgKz0geTIgPCB5XyA/IHVuaXQgOiAtdW5pdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciB1bml0ID0gKHJvb3RzWzBdID09PSAwIHx8IHJvb3RzWzBdID09PSAxKSA/IDAuNSA6IDE7XG4gICAgICAgICAgICB2YXIgeF8gPSBjdXJ2ZS5xdWFkcmF0aWNBdCh4MCwgeDEsIHgyLCByb290c1swXSk7XG4gICAgICAgICAgICBpZiAoeF8gPCB4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geTIgPCB5MCA/IHVuaXQgOiAtdW5pdDtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHdpbmRpbmdBcmMoY3gsIGN5LCByLCBzdGFydEFuZ2xlLCBlbmRBbmdsZSwgYW50aWNsb2Nrd2lzZSwgeCwgeSkge1xuICAgIHkgLT0gY3k7XG4gICAgaWYgKHkgPiByIHx8IHkgPCAtcikge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgdmFyIHRtcCA9IE1hdGguc3FydChyICogciAtIHkgKiB5KTtcbiAgICByb290c1swXSA9IC10bXA7XG4gICAgcm9vdHNbMV0gPSB0bXA7XG4gICAgdmFyIGRUaGV0YSA9IE1hdGguYWJzKHN0YXJ0QW5nbGUgLSBlbmRBbmdsZSk7XG4gICAgaWYgKGRUaGV0YSA8IDFlLTQpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGlmIChkVGhldGEgPj0gUEkyIC0gMWUtNCkge1xuICAgICAgICBzdGFydEFuZ2xlID0gMDtcbiAgICAgICAgZW5kQW5nbGUgPSBQSTI7XG4gICAgICAgIHZhciBkaXIgPSBhbnRpY2xvY2t3aXNlID8gMSA6IC0xO1xuICAgICAgICBpZiAoeCA+PSByb290c1swXSArIGN4ICYmIHggPD0gcm9vdHNbMV0gKyBjeCkge1xuICAgICAgICAgICAgcmV0dXJuIGRpcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChzdGFydEFuZ2xlID4gZW5kQW5nbGUpIHtcbiAgICAgICAgdmFyIHRtcF8xID0gc3RhcnRBbmdsZTtcbiAgICAgICAgc3RhcnRBbmdsZSA9IGVuZEFuZ2xlO1xuICAgICAgICBlbmRBbmdsZSA9IHRtcF8xO1xuICAgIH1cbiAgICBpZiAoc3RhcnRBbmdsZSA8IDApIHtcbiAgICAgICAgc3RhcnRBbmdsZSArPSBQSTI7XG4gICAgICAgIGVuZEFuZ2xlICs9IFBJMjtcbiAgICB9XG4gICAgdmFyIHcgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjsgaSsrKSB7XG4gICAgICAgIHZhciB4XyA9IHJvb3RzW2ldO1xuICAgICAgICBpZiAoeF8gKyBjeCA+IHgpIHtcbiAgICAgICAgICAgIHZhciBhbmdsZSA9IE1hdGguYXRhbjIoeSwgeF8pO1xuICAgICAgICAgICAgdmFyIGRpciA9IGFudGljbG9ja3dpc2UgPyAxIDogLTE7XG4gICAgICAgICAgICBpZiAoYW5nbGUgPCAwKSB7XG4gICAgICAgICAgICAgICAgYW5nbGUgPSBQSTIgKyBhbmdsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoYW5nbGUgPj0gc3RhcnRBbmdsZSAmJiBhbmdsZSA8PSBlbmRBbmdsZSlcbiAgICAgICAgICAgICAgICB8fCAoYW5nbGUgKyBQSTIgPj0gc3RhcnRBbmdsZSAmJiBhbmdsZSArIFBJMiA8PSBlbmRBbmdsZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoYW5nbGUgPiBNYXRoLlBJIC8gMiAmJiBhbmdsZSA8IE1hdGguUEkgKiAxLjUpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlyID0gLWRpcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdyArPSBkaXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHc7XG59XG5mdW5jdGlvbiBjb250YWluUGF0aChwYXRoLCBsaW5lV2lkdGgsIGlzU3Ryb2tlLCB4LCB5KSB7XG4gICAgdmFyIGRhdGEgPSBwYXRoLmRhdGE7XG4gICAgdmFyIGxlbiA9IHBhdGgubGVuKCk7XG4gICAgdmFyIHcgPSAwO1xuICAgIHZhciB4aSA9IDA7XG4gICAgdmFyIHlpID0gMDtcbiAgICB2YXIgeDAgPSAwO1xuICAgIHZhciB5MCA9IDA7XG4gICAgdmFyIHgxO1xuICAgIHZhciB5MTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjspIHtcbiAgICAgICAgdmFyIGNtZCA9IGRhdGFbaSsrXTtcbiAgICAgICAgdmFyIGlzRmlyc3QgPSBpID09PSAxO1xuICAgICAgICBpZiAoY21kID09PSBDTUQuTSAmJiBpID4gMSkge1xuICAgICAgICAgICAgaWYgKCFpc1N0cm9rZSkge1xuICAgICAgICAgICAgICAgIHcgKz0gd2luZGluZ0xpbmUoeGksIHlpLCB4MCwgeTAsIHgsIHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpc0ZpcnN0KSB7XG4gICAgICAgICAgICB4aSA9IGRhdGFbaV07XG4gICAgICAgICAgICB5aSA9IGRhdGFbaSArIDFdO1xuICAgICAgICAgICAgeDAgPSB4aTtcbiAgICAgICAgICAgIHkwID0geWk7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChjbWQpIHtcbiAgICAgICAgICAgIGNhc2UgQ01ELk06XG4gICAgICAgICAgICAgICAgeDAgPSBkYXRhW2krK107XG4gICAgICAgICAgICAgICAgeTAgPSBkYXRhW2krK107XG4gICAgICAgICAgICAgICAgeGkgPSB4MDtcbiAgICAgICAgICAgICAgICB5aSA9IHkwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDTUQuTDpcbiAgICAgICAgICAgICAgICBpZiAoaXNTdHJva2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmUuY29udGFpblN0cm9rZSh4aSwgeWksIGRhdGFbaV0sIGRhdGFbaSArIDFdLCBsaW5lV2lkdGgsIHgsIHkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdyArPSB3aW5kaW5nTGluZSh4aSwgeWksIGRhdGFbaV0sIGRhdGFbaSArIDFdLCB4LCB5KSB8fCAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB4aSA9IGRhdGFbaSsrXTtcbiAgICAgICAgICAgICAgICB5aSA9IGRhdGFbaSsrXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ01ELkM6XG4gICAgICAgICAgICAgICAgaWYgKGlzU3Ryb2tlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdWJpYy5jb250YWluU3Ryb2tlKHhpLCB5aSwgZGF0YVtpKytdLCBkYXRhW2krK10sIGRhdGFbaSsrXSwgZGF0YVtpKytdLCBkYXRhW2ldLCBkYXRhW2kgKyAxXSwgbGluZVdpZHRoLCB4LCB5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHcgKz0gd2luZGluZ0N1YmljKHhpLCB5aSwgZGF0YVtpKytdLCBkYXRhW2krK10sIGRhdGFbaSsrXSwgZGF0YVtpKytdLCBkYXRhW2ldLCBkYXRhW2kgKyAxXSwgeCwgeSkgfHwgMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgeGkgPSBkYXRhW2krK107XG4gICAgICAgICAgICAgICAgeWkgPSBkYXRhW2krK107XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIENNRC5ROlxuICAgICAgICAgICAgICAgIGlmIChpc1N0cm9rZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocXVhZHJhdGljLmNvbnRhaW5TdHJva2UoeGksIHlpLCBkYXRhW2krK10sIGRhdGFbaSsrXSwgZGF0YVtpXSwgZGF0YVtpICsgMV0sIGxpbmVXaWR0aCwgeCwgeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB3ICs9IHdpbmRpbmdRdWFkcmF0aWMoeGksIHlpLCBkYXRhW2krK10sIGRhdGFbaSsrXSwgZGF0YVtpXSwgZGF0YVtpICsgMV0sIHgsIHkpIHx8IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHhpID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgIHlpID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDTUQuQTpcbiAgICAgICAgICAgICAgICB2YXIgY3ggPSBkYXRhW2krK107XG4gICAgICAgICAgICAgICAgdmFyIGN5ID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgIHZhciByeCA9IGRhdGFbaSsrXTtcbiAgICAgICAgICAgICAgICB2YXIgcnkgPSBkYXRhW2krK107XG4gICAgICAgICAgICAgICAgdmFyIHRoZXRhID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgIHZhciBkVGhldGEgPSBkYXRhW2krK107XG4gICAgICAgICAgICAgICAgaSArPSAxO1xuICAgICAgICAgICAgICAgIHZhciBhbnRpY2xvY2t3aXNlID0gISEoMSAtIGRhdGFbaSsrXSk7XG4gICAgICAgICAgICAgICAgeDEgPSBNYXRoLmNvcyh0aGV0YSkgKiByeCArIGN4O1xuICAgICAgICAgICAgICAgIHkxID0gTWF0aC5zaW4odGhldGEpICogcnkgKyBjeTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzRmlyc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdyArPSB3aW5kaW5nTGluZSh4aSwgeWksIHgxLCB5MSwgeCwgeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB4MCA9IHgxO1xuICAgICAgICAgICAgICAgICAgICB5MCA9IHkxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgX3ggPSAoeCAtIGN4KSAqIHJ5IC8gcnggKyBjeDtcbiAgICAgICAgICAgICAgICBpZiAoaXNTdHJva2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyYy5jb250YWluU3Ryb2tlKGN4LCBjeSwgcnksIHRoZXRhLCB0aGV0YSArIGRUaGV0YSwgYW50aWNsb2Nrd2lzZSwgbGluZVdpZHRoLCBfeCwgeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB3ICs9IHdpbmRpbmdBcmMoY3gsIGN5LCByeSwgdGhldGEsIHRoZXRhICsgZFRoZXRhLCBhbnRpY2xvY2t3aXNlLCBfeCwgeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHhpID0gTWF0aC5jb3ModGhldGEgKyBkVGhldGEpICogcnggKyBjeDtcbiAgICAgICAgICAgICAgICB5aSA9IE1hdGguc2luKHRoZXRhICsgZFRoZXRhKSAqIHJ5ICsgY3k7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIENNRC5SOlxuICAgICAgICAgICAgICAgIHgwID0geGkgPSBkYXRhW2krK107XG4gICAgICAgICAgICAgICAgeTAgPSB5aSA9IGRhdGFbaSsrXTtcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBkYXRhW2krK107XG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IGRhdGFbaSsrXTtcbiAgICAgICAgICAgICAgICB4MSA9IHgwICsgd2lkdGg7XG4gICAgICAgICAgICAgICAgeTEgPSB5MCArIGhlaWdodDtcbiAgICAgICAgICAgICAgICBpZiAoaXNTdHJva2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmUuY29udGFpblN0cm9rZSh4MCwgeTAsIHgxLCB5MCwgbGluZVdpZHRoLCB4LCB5KVxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgbGluZS5jb250YWluU3Ryb2tlKHgxLCB5MCwgeDEsIHkxLCBsaW5lV2lkdGgsIHgsIHkpXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCBsaW5lLmNvbnRhaW5TdHJva2UoeDEsIHkxLCB4MCwgeTEsIGxpbmVXaWR0aCwgeCwgeSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8IGxpbmUuY29udGFpblN0cm9rZSh4MCwgeTEsIHgwLCB5MCwgbGluZVdpZHRoLCB4LCB5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHcgKz0gd2luZGluZ0xpbmUoeDEsIHkwLCB4MSwgeTEsIHgsIHkpO1xuICAgICAgICAgICAgICAgICAgICB3ICs9IHdpbmRpbmdMaW5lKHgwLCB5MSwgeDAsIHkwLCB4LCB5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIENNRC5aOlxuICAgICAgICAgICAgICAgIGlmIChpc1N0cm9rZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobGluZS5jb250YWluU3Ryb2tlKHhpLCB5aSwgeDAsIHkwLCBsaW5lV2lkdGgsIHgsIHkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdyArPSB3aW5kaW5nTGluZSh4aSwgeWksIHgwLCB5MCwgeCwgeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHhpID0geDA7XG4gICAgICAgICAgICAgICAgeWkgPSB5MDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWlzU3Ryb2tlICYmICFpc0Fyb3VuZEVxdWFsKHlpLCB5MCkpIHtcbiAgICAgICAgdyArPSB3aW5kaW5nTGluZSh4aSwgeWksIHgwLCB5MCwgeCwgeSkgfHwgMDtcbiAgICB9XG4gICAgcmV0dXJuIHcgIT09IDA7XG59XG5leHBvcnQgZnVuY3Rpb24gY29udGFpbihwYXRoUHJveHksIHgsIHkpIHtcbiAgICByZXR1cm4gY29udGFpblBhdGgocGF0aFByb3h5LCAwLCBmYWxzZSwgeCwgeSk7XG59XG5leHBvcnQgZnVuY3Rpb24gY29udGFpblN0cm9rZShwYXRoUHJveHksIGxpbmVXaWR0aCwgeCwgeSkge1xuICAgIHJldHVybiBjb250YWluUGF0aChwYXRoUHJveHksIGxpbmVXaWR0aCwgdHJ1ZSwgeCwgeSk7XG59XG4iLCJpbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCBEaXNwbGF5YWJsZSwgeyBERUZBVUxUX0NPTU1PTl9TVFlMRSwgREVGQVVMVF9DT01NT05fQU5JTUFUSU9OX1BST1BTIH0gZnJvbSAnLi9EaXNwbGF5YWJsZS5qcyc7XG5pbXBvcnQgUGF0aFByb3h5IGZyb20gJy4uL2NvcmUvUGF0aFByb3h5LmpzJztcbmltcG9ydCAqIGFzIHBhdGhDb250YWluIGZyb20gJy4uL2NvbnRhaW4vcGF0aC5qcyc7XG5pbXBvcnQgeyBkZWZhdWx0cywga2V5cywgZXh0ZW5kLCBjbG9uZSwgaXNTdHJpbmcsIGNyZWF0ZU9iamVjdCB9IGZyb20gJy4uL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgeyBsdW0gfSBmcm9tICcuLi90b29sL2NvbG9yLmpzJztcbmltcG9ydCB7IERBUktfTEFCRUxfQ09MT1IsIExJR0hUX0xBQkVMX0NPTE9SLCBEQVJLX01PREVfVEhSRVNIT0xELCBMSUdIVEVSX0xBQkVMX0NPTE9SIH0gZnJvbSAnLi4vY29uZmlnLmpzJztcbmltcG9ydCB7IFJFRFJBV19CSVQsIFNIQVBFX0NIQU5HRURfQklULCBTVFlMRV9DSEFOR0VEX0JJVCB9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IFRSQU5TRk9STUFCTEVfUFJPUFMgfSBmcm9tICcuLi9jb3JlL1RyYW5zZm9ybWFibGUuanMnO1xuZXhwb3J0IHZhciBERUZBVUxUX1BBVEhfU1RZTEUgPSBkZWZhdWx0cyh7XG4gICAgZmlsbDogJyMwMDAnLFxuICAgIHN0cm9rZTogbnVsbCxcbiAgICBzdHJva2VQZXJjZW50OiAxLFxuICAgIGZpbGxPcGFjaXR5OiAxLFxuICAgIHN0cm9rZU9wYWNpdHk6IDEsXG4gICAgbGluZURhc2hPZmZzZXQ6IDAsXG4gICAgbGluZVdpZHRoOiAxLFxuICAgIGxpbmVDYXA6ICdidXR0JyxcbiAgICBtaXRlckxpbWl0OiAxMCxcbiAgICBzdHJva2VOb1NjYWxlOiBmYWxzZSxcbiAgICBzdHJva2VGaXJzdDogZmFsc2Vcbn0sIERFRkFVTFRfQ09NTU9OX1NUWUxFKTtcbmV4cG9ydCB2YXIgREVGQVVMVF9QQVRIX0FOSU1BVElPTl9QUk9QUyA9IHtcbiAgICBzdHlsZTogZGVmYXVsdHMoe1xuICAgICAgICBmaWxsOiB0cnVlLFxuICAgICAgICBzdHJva2U6IHRydWUsXG4gICAgICAgIHN0cm9rZVBlcmNlbnQ6IHRydWUsXG4gICAgICAgIGZpbGxPcGFjaXR5OiB0cnVlLFxuICAgICAgICBzdHJva2VPcGFjaXR5OiB0cnVlLFxuICAgICAgICBsaW5lRGFzaE9mZnNldDogdHJ1ZSxcbiAgICAgICAgbGluZVdpZHRoOiB0cnVlLFxuICAgICAgICBtaXRlckxpbWl0OiB0cnVlXG4gICAgfSwgREVGQVVMVF9DT01NT05fQU5JTUFUSU9OX1BST1BTLnN0eWxlKVxufTtcbnZhciBwYXRoQ29weVBhcmFtcyA9IFRSQU5TRk9STUFCTEVfUFJPUFMuY29uY2F0KFsnaW52aXNpYmxlJyxcbiAgICAnY3VsbGluZycsICd6JywgJ3oyJywgJ3psZXZlbCcsICdwYXJlbnQnXG5dKTtcbnZhciBQYXRoID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUGF0aCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBQYXRoKG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIG9wdHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIFBhdGgucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS51cGRhdGUuY2FsbCh0aGlzKTtcbiAgICAgICAgdmFyIHN0eWxlID0gdGhpcy5zdHlsZTtcbiAgICAgICAgaWYgKHN0eWxlLmRlY2FsKSB7XG4gICAgICAgICAgICB2YXIgZGVjYWxFbCA9IHRoaXMuX2RlY2FsRWwgPSB0aGlzLl9kZWNhbEVsIHx8IG5ldyBQYXRoKCk7XG4gICAgICAgICAgICBpZiAoZGVjYWxFbC5idWlsZFBhdGggPT09IFBhdGgucHJvdG90eXBlLmJ1aWxkUGF0aCkge1xuICAgICAgICAgICAgICAgIGRlY2FsRWwuYnVpbGRQYXRoID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5idWlsZFBhdGgoY3R4LCBfdGhpcy5zaGFwZSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlY2FsRWwuc2lsZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBkZWNhbEVsU3R5bGUgPSBkZWNhbEVsLnN0eWxlO1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHN0eWxlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlY2FsRWxTdHlsZVtrZXldICE9PSBzdHlsZVtrZXldKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlY2FsRWxTdHlsZVtrZXldID0gc3R5bGVba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWNhbEVsU3R5bGUuZmlsbCA9IHN0eWxlLmZpbGwgPyBzdHlsZS5kZWNhbCA6IG51bGw7XG4gICAgICAgICAgICBkZWNhbEVsU3R5bGUuZGVjYWwgPSBudWxsO1xuICAgICAgICAgICAgZGVjYWxFbFN0eWxlLnNoYWRvd0NvbG9yID0gbnVsbDtcbiAgICAgICAgICAgIHN0eWxlLnN0cm9rZUZpcnN0ICYmIChkZWNhbEVsU3R5bGUuc3Ryb2tlID0gbnVsbCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGhDb3B5UGFyYW1zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgZGVjYWxFbFtwYXRoQ29weVBhcmFtc1tpXV0gPSB0aGlzW3BhdGhDb3B5UGFyYW1zW2ldXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlY2FsRWwuX19kaXJ0eSB8PSBSRURSQVdfQklUO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX2RlY2FsRWwpIHtcbiAgICAgICAgICAgIHRoaXMuX2RlY2FsRWwgPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBQYXRoLnByb3RvdHlwZS5nZXREZWNhbEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWNhbEVsO1xuICAgIH07XG4gICAgUGF0aC5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICAgICAgdmFyIGtleXNBcnIgPSBrZXlzKHByb3BzKTtcbiAgICAgICAgdGhpcy5zaGFwZSA9IHRoaXMuZ2V0RGVmYXVsdFNoYXBlKCk7XG4gICAgICAgIHZhciBkZWZhdWx0U3R5bGUgPSB0aGlzLmdldERlZmF1bHRTdHlsZSgpO1xuICAgICAgICBpZiAoZGVmYXVsdFN0eWxlKSB7XG4gICAgICAgICAgICB0aGlzLnVzZVN0eWxlKGRlZmF1bHRTdHlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzQXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0ga2V5c0FycltpXTtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHByb3BzW2tleV07XG4gICAgICAgICAgICBpZiAoa2V5ID09PSAnc3R5bGUnKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnN0eWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXNlU3R5bGUodmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5kKHRoaXMuc3R5bGUsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChrZXkgPT09ICdzaGFwZScpIHtcbiAgICAgICAgICAgICAgICBleHRlbmQodGhpcy5zaGFwZSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5hdHRyS1YuY2FsbCh0aGlzLCBrZXksIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuc3R5bGUpIHtcbiAgICAgICAgICAgIHRoaXMudXNlU3R5bGUoe30pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBQYXRoLnByb3RvdHlwZS5nZXREZWZhdWx0U3R5bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgUGF0aC5wcm90b3R5cGUuZ2V0RGVmYXVsdFNoYXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfTtcbiAgICBQYXRoLnByb3RvdHlwZS5jYW5CZUluc2lkZVRleHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc0ZpbGwoKTtcbiAgICB9O1xuICAgIFBhdGgucHJvdG90eXBlLmdldEluc2lkZVRleHRGaWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGF0aEZpbGwgPSB0aGlzLnN0eWxlLmZpbGw7XG4gICAgICAgIGlmIChwYXRoRmlsbCAhPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICBpZiAoaXNTdHJpbmcocGF0aEZpbGwpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpbGxMdW0gPSBsdW0ocGF0aEZpbGwsIDApO1xuICAgICAgICAgICAgICAgIGlmIChmaWxsTHVtID4gMC41KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEQVJLX0xBQkVMX0NPTE9SO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChmaWxsTHVtID4gMC4yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBMSUdIVEVSX0xBQkVMX0NPTE9SO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gTElHSFRfTEFCRUxfQ09MT1I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXRoRmlsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBMSUdIVF9MQUJFTF9DT0xPUjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gREFSS19MQUJFTF9DT0xPUjtcbiAgICB9O1xuICAgIFBhdGgucHJvdG90eXBlLmdldEluc2lkZVRleHRTdHJva2UgPSBmdW5jdGlvbiAodGV4dEZpbGwpIHtcbiAgICAgICAgdmFyIHBhdGhGaWxsID0gdGhpcy5zdHlsZS5maWxsO1xuICAgICAgICBpZiAoaXNTdHJpbmcocGF0aEZpbGwpKSB7XG4gICAgICAgICAgICB2YXIgenIgPSB0aGlzLl9fenI7XG4gICAgICAgICAgICB2YXIgaXNEYXJrTW9kZSA9ICEhKHpyICYmIHpyLmlzRGFya01vZGUoKSk7XG4gICAgICAgICAgICB2YXIgaXNEYXJrTGFiZWwgPSBsdW0odGV4dEZpbGwsIDApIDwgREFSS19NT0RFX1RIUkVTSE9MRDtcbiAgICAgICAgICAgIGlmIChpc0RhcmtNb2RlID09PSBpc0RhcmtMYWJlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXRoRmlsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgUGF0aC5wcm90b3R5cGUuYnVpbGRQYXRoID0gZnVuY3Rpb24gKGN0eCwgc2hhcGVDZmcsIGluQmF0Y2gpIHsgfTtcbiAgICBQYXRoLnByb3RvdHlwZS5wYXRoVXBkYXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fX2RpcnR5ICY9IH5TSEFQRV9DSEFOR0VEX0JJVDtcbiAgICB9O1xuICAgIFBhdGgucHJvdG90eXBlLmdldFVwZGF0ZWRQYXRoUHJveHkgPSBmdW5jdGlvbiAoaW5CYXRjaCkge1xuICAgICAgICAhdGhpcy5wYXRoICYmIHRoaXMuY3JlYXRlUGF0aFByb3h5KCk7XG4gICAgICAgIHRoaXMucGF0aC5iZWdpblBhdGgoKTtcbiAgICAgICAgdGhpcy5idWlsZFBhdGgodGhpcy5wYXRoLCB0aGlzLnNoYXBlLCBpbkJhdGNoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aDtcbiAgICB9O1xuICAgIFBhdGgucHJvdG90eXBlLmNyZWF0ZVBhdGhQcm94eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gbmV3IFBhdGhQcm94eShmYWxzZSk7XG4gICAgfTtcbiAgICBQYXRoLnByb3RvdHlwZS5oYXNTdHJva2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdHlsZSA9IHRoaXMuc3R5bGU7XG4gICAgICAgIHZhciBzdHJva2UgPSBzdHlsZS5zdHJva2U7XG4gICAgICAgIHJldHVybiAhKHN0cm9rZSA9PSBudWxsIHx8IHN0cm9rZSA9PT0gJ25vbmUnIHx8ICEoc3R5bGUubGluZVdpZHRoID4gMCkpO1xuICAgIH07XG4gICAgUGF0aC5wcm90b3R5cGUuaGFzRmlsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHN0eWxlID0gdGhpcy5zdHlsZTtcbiAgICAgICAgdmFyIGZpbGwgPSBzdHlsZS5maWxsO1xuICAgICAgICByZXR1cm4gZmlsbCAhPSBudWxsICYmIGZpbGwgIT09ICdub25lJztcbiAgICB9O1xuICAgIFBhdGgucHJvdG90eXBlLmdldEJvdW5kaW5nUmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlY3QgPSB0aGlzLl9yZWN0O1xuICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLnN0eWxlO1xuICAgICAgICB2YXIgbmVlZHNVcGRhdGVSZWN0ID0gIXJlY3Q7XG4gICAgICAgIGlmIChuZWVkc1VwZGF0ZVJlY3QpIHtcbiAgICAgICAgICAgIHZhciBmaXJzdEludm9rZSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhdGgpIHtcbiAgICAgICAgICAgICAgICBmaXJzdEludm9rZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVQYXRoUHJveHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwYXRoID0gdGhpcy5wYXRoO1xuICAgICAgICAgICAgaWYgKGZpcnN0SW52b2tlIHx8ICh0aGlzLl9fZGlydHkgJiBTSEFQRV9DSEFOR0VEX0JJVCkpIHtcbiAgICAgICAgICAgICAgICBwYXRoLmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRQYXRoKHBhdGgsIHRoaXMuc2hhcGUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhdGhVcGRhdGVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZWN0ID0gcGF0aC5nZXRCb3VuZGluZ1JlY3QoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9yZWN0ID0gcmVjdDtcbiAgICAgICAgaWYgKHRoaXMuaGFzU3Ryb2tlKCkgJiYgdGhpcy5wYXRoICYmIHRoaXMucGF0aC5sZW4oKSA+IDApIHtcbiAgICAgICAgICAgIHZhciByZWN0U3Ryb2tlID0gdGhpcy5fcmVjdFN0cm9rZSB8fCAodGhpcy5fcmVjdFN0cm9rZSA9IHJlY3QuY2xvbmUoKSk7XG4gICAgICAgICAgICBpZiAodGhpcy5fX2RpcnR5IHx8IG5lZWRzVXBkYXRlUmVjdCkge1xuICAgICAgICAgICAgICAgIHJlY3RTdHJva2UuY29weShyZWN0KTtcbiAgICAgICAgICAgICAgICB2YXIgbGluZVNjYWxlID0gc3R5bGUuc3Ryb2tlTm9TY2FsZSA/IHRoaXMuZ2V0TGluZVNjYWxlKCkgOiAxO1xuICAgICAgICAgICAgICAgIHZhciB3ID0gc3R5bGUubGluZVdpZHRoO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5oYXNGaWxsKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0cm9rZUNvbnRhaW5UaHJlc2hvbGQgPSB0aGlzLnN0cm9rZUNvbnRhaW5UaHJlc2hvbGQ7XG4gICAgICAgICAgICAgICAgICAgIHcgPSBNYXRoLm1heCh3LCBzdHJva2VDb250YWluVGhyZXNob2xkID09IG51bGwgPyA0IDogc3Ryb2tlQ29udGFpblRocmVzaG9sZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChsaW5lU2NhbGUgPiAxZS0xMCkge1xuICAgICAgICAgICAgICAgICAgICByZWN0U3Ryb2tlLndpZHRoICs9IHcgLyBsaW5lU2NhbGU7XG4gICAgICAgICAgICAgICAgICAgIHJlY3RTdHJva2UuaGVpZ2h0ICs9IHcgLyBsaW5lU2NhbGU7XG4gICAgICAgICAgICAgICAgICAgIHJlY3RTdHJva2UueCAtPSB3IC8gbGluZVNjYWxlIC8gMjtcbiAgICAgICAgICAgICAgICAgICAgcmVjdFN0cm9rZS55IC09IHcgLyBsaW5lU2NhbGUgLyAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZWN0U3Ryb2tlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWN0O1xuICAgIH07XG4gICAgUGF0aC5wcm90b3R5cGUuY29udGFpbiA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHZhciBsb2NhbFBvcyA9IHRoaXMudHJhbnNmb3JtQ29vcmRUb0xvY2FsKHgsIHkpO1xuICAgICAgICB2YXIgcmVjdCA9IHRoaXMuZ2V0Qm91bmRpbmdSZWN0KCk7XG4gICAgICAgIHZhciBzdHlsZSA9IHRoaXMuc3R5bGU7XG4gICAgICAgIHggPSBsb2NhbFBvc1swXTtcbiAgICAgICAgeSA9IGxvY2FsUG9zWzFdO1xuICAgICAgICBpZiAocmVjdC5jb250YWluKHgsIHkpKSB7XG4gICAgICAgICAgICB2YXIgcGF0aFByb3h5ID0gdGhpcy5wYXRoO1xuICAgICAgICAgICAgaWYgKHRoaXMuaGFzU3Ryb2tlKCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGluZVdpZHRoID0gc3R5bGUubGluZVdpZHRoO1xuICAgICAgICAgICAgICAgIHZhciBsaW5lU2NhbGUgPSBzdHlsZS5zdHJva2VOb1NjYWxlID8gdGhpcy5nZXRMaW5lU2NhbGUoKSA6IDE7XG4gICAgICAgICAgICAgICAgaWYgKGxpbmVTY2FsZSA+IDFlLTEwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5oYXNGaWxsKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVXaWR0aCA9IE1hdGgubWF4KGxpbmVXaWR0aCwgdGhpcy5zdHJva2VDb250YWluVGhyZXNob2xkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocGF0aENvbnRhaW4uY29udGFpblN0cm9rZShwYXRoUHJveHksIGxpbmVXaWR0aCAvIGxpbmVTY2FsZSwgeCwgeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaGFzRmlsbCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhdGhDb250YWluLmNvbnRhaW4ocGF0aFByb3h5LCB4LCB5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBQYXRoLnByb3RvdHlwZS5kaXJ0eVNoYXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9fZGlydHkgfD0gU0hBUEVfQ0hBTkdFRF9CSVQ7XG4gICAgICAgIGlmICh0aGlzLl9yZWN0KSB7XG4gICAgICAgICAgICB0aGlzLl9yZWN0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fZGVjYWxFbCkge1xuICAgICAgICAgICAgdGhpcy5fZGVjYWxFbC5kaXJ0eVNoYXBlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tYXJrUmVkcmF3KCk7XG4gICAgfTtcbiAgICBQYXRoLnByb3RvdHlwZS5kaXJ0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kaXJ0eVN0eWxlKCk7XG4gICAgICAgIHRoaXMuZGlydHlTaGFwZSgpO1xuICAgIH07XG4gICAgUGF0aC5wcm90b3R5cGUuYW5pbWF0ZVNoYXBlID0gZnVuY3Rpb24gKGxvb3ApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYW5pbWF0ZSgnc2hhcGUnLCBsb29wKTtcbiAgICB9O1xuICAgIFBhdGgucHJvdG90eXBlLnVwZGF0ZUR1cmluZ0FuaW1hdGlvbiA9IGZ1bmN0aW9uICh0YXJnZXRLZXkpIHtcbiAgICAgICAgaWYgKHRhcmdldEtleSA9PT0gJ3N0eWxlJykge1xuICAgICAgICAgICAgdGhpcy5kaXJ0eVN0eWxlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGFyZ2V0S2V5ID09PSAnc2hhcGUnKSB7XG4gICAgICAgICAgICB0aGlzLmRpcnR5U2hhcGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubWFya1JlZHJhdygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBQYXRoLnByb3RvdHlwZS5hdHRyS1YgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICBpZiAoa2V5ID09PSAnc2hhcGUnKSB7XG4gICAgICAgICAgICB0aGlzLnNldFNoYXBlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuYXR0cktWLmNhbGwodGhpcywga2V5LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFBhdGgucHJvdG90eXBlLnNldFNoYXBlID0gZnVuY3Rpb24gKGtleU9yT2JqLCB2YWx1ZSkge1xuICAgICAgICB2YXIgc2hhcGUgPSB0aGlzLnNoYXBlO1xuICAgICAgICBpZiAoIXNoYXBlKSB7XG4gICAgICAgICAgICBzaGFwZSA9IHRoaXMuc2hhcGUgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGtleU9yT2JqID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgc2hhcGVba2V5T3JPYmpdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBleHRlbmQoc2hhcGUsIGtleU9yT2JqKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpcnR5U2hhcGUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBQYXRoLnByb3RvdHlwZS5zaGFwZUNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhISh0aGlzLl9fZGlydHkgJiBTSEFQRV9DSEFOR0VEX0JJVCk7XG4gICAgfTtcbiAgICBQYXRoLnByb3RvdHlwZS5jcmVhdGVTdHlsZSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZU9iamVjdChERUZBVUxUX1BBVEhfU1RZTEUsIG9iaik7XG4gICAgfTtcbiAgICBQYXRoLnByb3RvdHlwZS5faW5uZXJTYXZlVG9Ob3JtYWwgPSBmdW5jdGlvbiAodG9TdGF0ZSkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9pbm5lclNhdmVUb05vcm1hbC5jYWxsKHRoaXMsIHRvU3RhdGUpO1xuICAgICAgICB2YXIgbm9ybWFsU3RhdGUgPSB0aGlzLl9ub3JtYWxTdGF0ZTtcbiAgICAgICAgaWYgKHRvU3RhdGUuc2hhcGUgJiYgIW5vcm1hbFN0YXRlLnNoYXBlKSB7XG4gICAgICAgICAgICBub3JtYWxTdGF0ZS5zaGFwZSA9IGV4dGVuZCh7fSwgdGhpcy5zaGFwZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFBhdGgucHJvdG90eXBlLl9hcHBseVN0YXRlT2JqID0gZnVuY3Rpb24gKHN0YXRlTmFtZSwgc3RhdGUsIG5vcm1hbFN0YXRlLCBrZWVwQ3VycmVudFN0YXRlcywgdHJhbnNpdGlvbiwgYW5pbWF0aW9uQ2ZnKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2FwcGx5U3RhdGVPYmouY2FsbCh0aGlzLCBzdGF0ZU5hbWUsIHN0YXRlLCBub3JtYWxTdGF0ZSwga2VlcEN1cnJlbnRTdGF0ZXMsIHRyYW5zaXRpb24sIGFuaW1hdGlvbkNmZyk7XG4gICAgICAgIHZhciBuZWVkc1Jlc3RvcmVUb05vcm1hbCA9ICEoc3RhdGUgJiYga2VlcEN1cnJlbnRTdGF0ZXMpO1xuICAgICAgICB2YXIgdGFyZ2V0U2hhcGU7XG4gICAgICAgIGlmIChzdGF0ZSAmJiBzdGF0ZS5zaGFwZSkge1xuICAgICAgICAgICAgaWYgKHRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoa2VlcEN1cnJlbnRTdGF0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U2hhcGUgPSBzdGF0ZS5zaGFwZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFNoYXBlID0gZXh0ZW5kKHt9LCBub3JtYWxTdGF0ZS5zaGFwZSk7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVuZCh0YXJnZXRTaGFwZSwgc3RhdGUuc2hhcGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRhcmdldFNoYXBlID0gZXh0ZW5kKHt9LCBrZWVwQ3VycmVudFN0YXRlcyA/IHRoaXMuc2hhcGUgOiBub3JtYWxTdGF0ZS5zaGFwZSk7XG4gICAgICAgICAgICAgICAgZXh0ZW5kKHRhcmdldFNoYXBlLCBzdGF0ZS5zaGFwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobmVlZHNSZXN0b3JlVG9Ob3JtYWwpIHtcbiAgICAgICAgICAgIHRhcmdldFNoYXBlID0gbm9ybWFsU3RhdGUuc2hhcGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcmdldFNoYXBlKSB7XG4gICAgICAgICAgICBpZiAodHJhbnNpdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hhcGUgPSBleHRlbmQoe30sIHRoaXMuc2hhcGUpO1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRTaGFwZVByaW1hcnlQcm9wcyA9IHt9O1xuICAgICAgICAgICAgICAgIHZhciBzaGFwZUtleXMgPSBrZXlzKHRhcmdldFNoYXBlKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNoYXBlS2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gc2hhcGVLZXlzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRhcmdldFNoYXBlW2tleV0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXBlW2tleV0gPSB0YXJnZXRTaGFwZVtrZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U2hhcGVQcmltYXJ5UHJvcHNba2V5XSA9IHRhcmdldFNoYXBlW2tleV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fdHJhbnNpdGlvblN0YXRlKHN0YXRlTmFtZSwge1xuICAgICAgICAgICAgICAgICAgICBzaGFwZTogdGFyZ2V0U2hhcGVQcmltYXJ5UHJvcHNcbiAgICAgICAgICAgICAgICB9LCBhbmltYXRpb25DZmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaGFwZSA9IHRhcmdldFNoYXBlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlydHlTaGFwZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBQYXRoLnByb3RvdHlwZS5fbWVyZ2VTdGF0ZXMgPSBmdW5jdGlvbiAoc3RhdGVzKSB7XG4gICAgICAgIHZhciBtZXJnZWRTdGF0ZSA9IF9zdXBlci5wcm90b3R5cGUuX21lcmdlU3RhdGVzLmNhbGwodGhpcywgc3RhdGVzKTtcbiAgICAgICAgdmFyIG1lcmdlZFNoYXBlO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHN0YXRlID0gc3RhdGVzW2ldO1xuICAgICAgICAgICAgaWYgKHN0YXRlLnNoYXBlKSB7XG4gICAgICAgICAgICAgICAgbWVyZ2VkU2hhcGUgPSBtZXJnZWRTaGFwZSB8fCB7fTtcbiAgICAgICAgICAgICAgICB0aGlzLl9tZXJnZVN0eWxlKG1lcmdlZFNoYXBlLCBzdGF0ZS5zaGFwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lcmdlZFNoYXBlKSB7XG4gICAgICAgICAgICBtZXJnZWRTdGF0ZS5zaGFwZSA9IG1lcmdlZFNoYXBlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXJnZWRTdGF0ZTtcbiAgICB9O1xuICAgIFBhdGgucHJvdG90eXBlLmdldEFuaW1hdGlvblN0eWxlUHJvcHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBERUZBVUxUX1BBVEhfQU5JTUFUSU9OX1BST1BTO1xuICAgIH07XG4gICAgUGF0aC5wcm90b3R5cGUuaXNaZXJvQXJlYSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgUGF0aC5leHRlbmQgPSBmdW5jdGlvbiAoZGVmYXVsdFByb3BzKSB7XG4gICAgICAgIHZhciBTdWIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICAgICAgX19leHRlbmRzKFN1YiwgX3N1cGVyKTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIFN1YihvcHRzKSB7XG4gICAgICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0cykgfHwgdGhpcztcbiAgICAgICAgICAgICAgICBkZWZhdWx0UHJvcHMuaW5pdCAmJiBkZWZhdWx0UHJvcHMuaW5pdC5jYWxsKF90aGlzLCBvcHRzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBTdWIucHJvdG90eXBlLmdldERlZmF1bHRTdHlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xvbmUoZGVmYXVsdFByb3BzLnN0eWxlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBTdWIucHJvdG90eXBlLmdldERlZmF1bHRTaGFwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xvbmUoZGVmYXVsdFByb3BzLnNoYXBlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gU3ViO1xuICAgICAgICB9KFBhdGgpKTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIGRlZmF1bHRQcm9wcykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBkZWZhdWx0UHJvcHNba2V5XSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIFN1Yi5wcm90b3R5cGVba2V5XSA9IGRlZmF1bHRQcm9wc1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTdWI7XG4gICAgfTtcbiAgICBQYXRoLmluaXREZWZhdWx0UHJvcHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGF0aFByb3RvID0gUGF0aC5wcm90b3R5cGU7XG4gICAgICAgIHBhdGhQcm90by50eXBlID0gJ3BhdGgnO1xuICAgICAgICBwYXRoUHJvdG8uc3Ryb2tlQ29udGFpblRocmVzaG9sZCA9IDU7XG4gICAgICAgIHBhdGhQcm90by5zZWdtZW50SWdub3JlVGhyZXNob2xkID0gMDtcbiAgICAgICAgcGF0aFByb3RvLnN1YlBpeGVsT3B0aW1pemUgPSBmYWxzZTtcbiAgICAgICAgcGF0aFByb3RvLmF1dG9CYXRjaCA9IGZhbHNlO1xuICAgICAgICBwYXRoUHJvdG8uX19kaXJ0eSA9IFJFRFJBV19CSVQgfCBTVFlMRV9DSEFOR0VEX0JJVCB8IFNIQVBFX0NIQU5HRURfQklUO1xuICAgIH0pKCk7XG4gICAgcmV0dXJuIFBhdGg7XG59KERpc3BsYXlhYmxlKSk7XG5leHBvcnQgZGVmYXVsdCBQYXRoO1xuIiwiaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgRGlzcGxheWFibGUgZnJvbSAnLi9EaXNwbGF5YWJsZS5qcyc7XG5pbXBvcnQgeyBnZXRCb3VuZGluZ1JlY3QgfSBmcm9tICcuLi9jb250YWluL3RleHQuanMnO1xuaW1wb3J0IHsgREVGQVVMVF9QQVRIX1NUWUxFIH0gZnJvbSAnLi9QYXRoLmpzJztcbmltcG9ydCB7IGNyZWF0ZU9iamVjdCwgZGVmYXVsdHMgfSBmcm9tICcuLi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0IHsgREVGQVVMVF9GT05UIH0gZnJvbSAnLi4vY29yZS9wbGF0Zm9ybS5qcyc7XG5leHBvcnQgdmFyIERFRkFVTFRfVFNQQU5fU1RZTEUgPSBkZWZhdWx0cyh7XG4gICAgc3Ryb2tlRmlyc3Q6IHRydWUsXG4gICAgZm9udDogREVGQVVMVF9GT05ULFxuICAgIHg6IDAsXG4gICAgeTogMCxcbiAgICB0ZXh0QWxpZ246ICdsZWZ0JyxcbiAgICB0ZXh0QmFzZWxpbmU6ICd0b3AnLFxuICAgIG1pdGVyTGltaXQ6IDJcbn0sIERFRkFVTFRfUEFUSF9TVFlMRSk7XG52YXIgVFNwYW4gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUU3BhbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBUU3BhbigpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBUU3Bhbi5wcm90b3R5cGUuaGFzU3Ryb2tlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLnN0eWxlO1xuICAgICAgICB2YXIgc3Ryb2tlID0gc3R5bGUuc3Ryb2tlO1xuICAgICAgICByZXR1cm4gc3Ryb2tlICE9IG51bGwgJiYgc3Ryb2tlICE9PSAnbm9uZScgJiYgc3R5bGUubGluZVdpZHRoID4gMDtcbiAgICB9O1xuICAgIFRTcGFuLnByb3RvdHlwZS5oYXNGaWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLnN0eWxlO1xuICAgICAgICB2YXIgZmlsbCA9IHN0eWxlLmZpbGw7XG4gICAgICAgIHJldHVybiBmaWxsICE9IG51bGwgJiYgZmlsbCAhPT0gJ25vbmUnO1xuICAgIH07XG4gICAgVFNwYW4ucHJvdG90eXBlLmNyZWF0ZVN0eWxlID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gY3JlYXRlT2JqZWN0KERFRkFVTFRfVFNQQU5fU1RZTEUsIG9iaik7XG4gICAgfTtcbiAgICBUU3Bhbi5wcm90b3R5cGUuc2V0Qm91bmRpbmdSZWN0ID0gZnVuY3Rpb24gKHJlY3QpIHtcbiAgICAgICAgdGhpcy5fcmVjdCA9IHJlY3Q7XG4gICAgfTtcbiAgICBUU3Bhbi5wcm90b3R5cGUuZ2V0Qm91bmRpbmdSZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLnN0eWxlO1xuICAgICAgICBpZiAoIXRoaXMuX3JlY3QpIHtcbiAgICAgICAgICAgIHZhciB0ZXh0ID0gc3R5bGUudGV4dDtcbiAgICAgICAgICAgIHRleHQgIT0gbnVsbCA/ICh0ZXh0ICs9ICcnKSA6ICh0ZXh0ID0gJycpO1xuICAgICAgICAgICAgdmFyIHJlY3QgPSBnZXRCb3VuZGluZ1JlY3QodGV4dCwgc3R5bGUuZm9udCwgc3R5bGUudGV4dEFsaWduLCBzdHlsZS50ZXh0QmFzZWxpbmUpO1xuICAgICAgICAgICAgcmVjdC54ICs9IHN0eWxlLnggfHwgMDtcbiAgICAgICAgICAgIHJlY3QueSArPSBzdHlsZS55IHx8IDA7XG4gICAgICAgICAgICBpZiAodGhpcy5oYXNTdHJva2UoKSkge1xuICAgICAgICAgICAgICAgIHZhciB3ID0gc3R5bGUubGluZVdpZHRoO1xuICAgICAgICAgICAgICAgIHJlY3QueCAtPSB3IC8gMjtcbiAgICAgICAgICAgICAgICByZWN0LnkgLT0gdyAvIDI7XG4gICAgICAgICAgICAgICAgcmVjdC53aWR0aCArPSB3O1xuICAgICAgICAgICAgICAgIHJlY3QuaGVpZ2h0ICs9IHc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9yZWN0ID0gcmVjdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fcmVjdDtcbiAgICB9O1xuICAgIFRTcGFuLmluaXREZWZhdWx0UHJvcHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdHNwYW5Qcm90byA9IFRTcGFuLnByb3RvdHlwZTtcbiAgICAgICAgdHNwYW5Qcm90by5kaXJ0eVJlY3RUb2xlcmFuY2UgPSAxMDtcbiAgICB9KSgpO1xuICAgIHJldHVybiBUU3Bhbjtcbn0oRGlzcGxheWFibGUpKTtcblRTcGFuLnByb3RvdHlwZS50eXBlID0gJ3RzcGFuJztcbmV4cG9ydCBkZWZhdWx0IFRTcGFuO1xuIiwiaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgRGlzcGxheWFibGUsIHsgREVGQVVMVF9DT01NT05fU1RZTEUsIERFRkFVTFRfQ09NTU9OX0FOSU1BVElPTl9QUk9QUyB9IGZyb20gJy4vRGlzcGxheWFibGUuanMnO1xuaW1wb3J0IEJvdW5kaW5nUmVjdCBmcm9tICcuLi9jb3JlL0JvdW5kaW5nUmVjdC5qcyc7XG5pbXBvcnQgeyBkZWZhdWx0cywgY3JlYXRlT2JqZWN0IH0gZnJvbSAnLi4vY29yZS91dGlsLmpzJztcbmV4cG9ydCB2YXIgREVGQVVMVF9JTUFHRV9TVFlMRSA9IGRlZmF1bHRzKHtcbiAgICB4OiAwLFxuICAgIHk6IDBcbn0sIERFRkFVTFRfQ09NTU9OX1NUWUxFKTtcbmV4cG9ydCB2YXIgREVGQVVMVF9JTUFHRV9BTklNQVRJT05fUFJPUFMgPSB7XG4gICAgc3R5bGU6IGRlZmF1bHRzKHtcbiAgICAgICAgeDogdHJ1ZSxcbiAgICAgICAgeTogdHJ1ZSxcbiAgICAgICAgd2lkdGg6IHRydWUsXG4gICAgICAgIGhlaWdodDogdHJ1ZSxcbiAgICAgICAgc3g6IHRydWUsXG4gICAgICAgIHN5OiB0cnVlLFxuICAgICAgICBzV2lkdGg6IHRydWUsXG4gICAgICAgIHNIZWlnaHQ6IHRydWVcbiAgICB9LCBERUZBVUxUX0NPTU1PTl9BTklNQVRJT05fUFJPUFMuc3R5bGUpXG59O1xuZnVuY3Rpb24gaXNJbWFnZUxpa2Uoc291cmNlKSB7XG4gICAgcmV0dXJuICEhKHNvdXJjZVxuICAgICAgICAmJiB0eXBlb2Ygc291cmNlICE9PSAnc3RyaW5nJ1xuICAgICAgICAmJiBzb3VyY2Uud2lkdGggJiYgc291cmNlLmhlaWdodCk7XG59XG52YXIgWlJJbWFnZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFpSSW1hZ2UsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gWlJJbWFnZSgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBaUkltYWdlLnByb3RvdHlwZS5jcmVhdGVTdHlsZSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZU9iamVjdChERUZBVUxUX0lNQUdFX1NUWUxFLCBvYmopO1xuICAgIH07XG4gICAgWlJJbWFnZS5wcm90b3R5cGUuX2dldFNpemUgPSBmdW5jdGlvbiAoZGltKSB7XG4gICAgICAgIHZhciBzdHlsZSA9IHRoaXMuc3R5bGU7XG4gICAgICAgIHZhciBzaXplID0gc3R5bGVbZGltXTtcbiAgICAgICAgaWYgKHNpemUgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGltYWdlU291cmNlID0gaXNJbWFnZUxpa2Uoc3R5bGUuaW1hZ2UpXG4gICAgICAgICAgICA/IHN0eWxlLmltYWdlIDogdGhpcy5fX2ltYWdlO1xuICAgICAgICBpZiAoIWltYWdlU291cmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3RoZXJEaW0gPSBkaW0gPT09ICd3aWR0aCcgPyAnaGVpZ2h0JyA6ICd3aWR0aCc7XG4gICAgICAgIHZhciBvdGhlckRpbVNpemUgPSBzdHlsZVtvdGhlckRpbV07XG4gICAgICAgIGlmIChvdGhlckRpbVNpemUgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGltYWdlU291cmNlW2RpbV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaW1hZ2VTb3VyY2VbZGltXSAvIGltYWdlU291cmNlW290aGVyRGltXSAqIG90aGVyRGltU2l6ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgWlJJbWFnZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRTaXplKCd3aWR0aCcpO1xuICAgIH07XG4gICAgWlJJbWFnZS5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0U2l6ZSgnaGVpZ2h0Jyk7XG4gICAgfTtcbiAgICBaUkltYWdlLnByb3RvdHlwZS5nZXRBbmltYXRpb25TdHlsZVByb3BzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gREVGQVVMVF9JTUFHRV9BTklNQVRJT05fUFJPUFM7XG4gICAgfTtcbiAgICBaUkltYWdlLnByb3RvdHlwZS5nZXRCb3VuZGluZ1JlY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdHlsZSA9IHRoaXMuc3R5bGU7XG4gICAgICAgIGlmICghdGhpcy5fcmVjdCkge1xuICAgICAgICAgICAgdGhpcy5fcmVjdCA9IG5ldyBCb3VuZGluZ1JlY3Qoc3R5bGUueCB8fCAwLCBzdHlsZS55IHx8IDAsIHRoaXMuZ2V0V2lkdGgoKSwgdGhpcy5nZXRIZWlnaHQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlY3Q7XG4gICAgfTtcbiAgICByZXR1cm4gWlJJbWFnZTtcbn0oRGlzcGxheWFibGUpKTtcblpSSW1hZ2UucHJvdG90eXBlLnR5cGUgPSAnaW1hZ2UnO1xuZXhwb3J0IGRlZmF1bHQgWlJJbWFnZTtcbiIsImV4cG9ydCBmdW5jdGlvbiBidWlsZFBhdGgoY3R4LCBzaGFwZSkge1xuICAgIHZhciB4ID0gc2hhcGUueDtcbiAgICB2YXIgeSA9IHNoYXBlLnk7XG4gICAgdmFyIHdpZHRoID0gc2hhcGUud2lkdGg7XG4gICAgdmFyIGhlaWdodCA9IHNoYXBlLmhlaWdodDtcbiAgICB2YXIgciA9IHNoYXBlLnI7XG4gICAgdmFyIHIxO1xuICAgIHZhciByMjtcbiAgICB2YXIgcjM7XG4gICAgdmFyIHI0O1xuICAgIGlmICh3aWR0aCA8IDApIHtcbiAgICAgICAgeCA9IHggKyB3aWR0aDtcbiAgICAgICAgd2lkdGggPSAtd2lkdGg7XG4gICAgfVxuICAgIGlmIChoZWlnaHQgPCAwKSB7XG4gICAgICAgIHkgPSB5ICsgaGVpZ2h0O1xuICAgICAgICBoZWlnaHQgPSAtaGVpZ2h0O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHIgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHIxID0gcjIgPSByMyA9IHI0ID0gcjtcbiAgICB9XG4gICAgZWxzZSBpZiAociBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIGlmIChyLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcjEgPSByMiA9IHIzID0gcjQgPSByWzBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHIubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICByMSA9IHIzID0gclswXTtcbiAgICAgICAgICAgIHIyID0gcjQgPSByWzFdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHIubGVuZ3RoID09PSAzKSB7XG4gICAgICAgICAgICByMSA9IHJbMF07XG4gICAgICAgICAgICByMiA9IHI0ID0gclsxXTtcbiAgICAgICAgICAgIHIzID0gclsyXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHIxID0gclswXTtcbiAgICAgICAgICAgIHIyID0gclsxXTtcbiAgICAgICAgICAgIHIzID0gclsyXTtcbiAgICAgICAgICAgIHI0ID0gclszXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcjEgPSByMiA9IHIzID0gcjQgPSAwO1xuICAgIH1cbiAgICB2YXIgdG90YWw7XG4gICAgaWYgKHIxICsgcjIgPiB3aWR0aCkge1xuICAgICAgICB0b3RhbCA9IHIxICsgcjI7XG4gICAgICAgIHIxICo9IHdpZHRoIC8gdG90YWw7XG4gICAgICAgIHIyICo9IHdpZHRoIC8gdG90YWw7XG4gICAgfVxuICAgIGlmIChyMyArIHI0ID4gd2lkdGgpIHtcbiAgICAgICAgdG90YWwgPSByMyArIHI0O1xuICAgICAgICByMyAqPSB3aWR0aCAvIHRvdGFsO1xuICAgICAgICByNCAqPSB3aWR0aCAvIHRvdGFsO1xuICAgIH1cbiAgICBpZiAocjIgKyByMyA+IGhlaWdodCkge1xuICAgICAgICB0b3RhbCA9IHIyICsgcjM7XG4gICAgICAgIHIyICo9IGhlaWdodCAvIHRvdGFsO1xuICAgICAgICByMyAqPSBoZWlnaHQgLyB0b3RhbDtcbiAgICB9XG4gICAgaWYgKHIxICsgcjQgPiBoZWlnaHQpIHtcbiAgICAgICAgdG90YWwgPSByMSArIHI0O1xuICAgICAgICByMSAqPSBoZWlnaHQgLyB0b3RhbDtcbiAgICAgICAgcjQgKj0gaGVpZ2h0IC8gdG90YWw7XG4gICAgfVxuICAgIGN0eC5tb3ZlVG8oeCArIHIxLCB5KTtcbiAgICBjdHgubGluZVRvKHggKyB3aWR0aCAtIHIyLCB5KTtcbiAgICByMiAhPT0gMCAmJiBjdHguYXJjKHggKyB3aWR0aCAtIHIyLCB5ICsgcjIsIHIyLCAtTWF0aC5QSSAvIDIsIDApO1xuICAgIGN0eC5saW5lVG8oeCArIHdpZHRoLCB5ICsgaGVpZ2h0IC0gcjMpO1xuICAgIHIzICE9PSAwICYmIGN0eC5hcmMoeCArIHdpZHRoIC0gcjMsIHkgKyBoZWlnaHQgLSByMywgcjMsIDAsIE1hdGguUEkgLyAyKTtcbiAgICBjdHgubGluZVRvKHggKyByNCwgeSArIGhlaWdodCk7XG4gICAgcjQgIT09IDAgJiYgY3R4LmFyYyh4ICsgcjQsIHkgKyBoZWlnaHQgLSByNCwgcjQsIE1hdGguUEkgLyAyLCBNYXRoLlBJKTtcbiAgICBjdHgubGluZVRvKHgsIHkgKyByMSk7XG4gICAgcjEgIT09IDAgJiYgY3R4LmFyYyh4ICsgcjEsIHkgKyByMSwgcjEsIE1hdGguUEksIE1hdGguUEkgKiAxLjUpO1xufVxuIiwidmFyIHJvdW5kID0gTWF0aC5yb3VuZDtcbmV4cG9ydCBmdW5jdGlvbiBzdWJQaXhlbE9wdGltaXplTGluZShvdXRwdXRTaGFwZSwgaW5wdXRTaGFwZSwgc3R5bGUpIHtcbiAgICBpZiAoIWlucHV0U2hhcGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgeDEgPSBpbnB1dFNoYXBlLngxO1xuICAgIHZhciB4MiA9IGlucHV0U2hhcGUueDI7XG4gICAgdmFyIHkxID0gaW5wdXRTaGFwZS55MTtcbiAgICB2YXIgeTIgPSBpbnB1dFNoYXBlLnkyO1xuICAgIG91dHB1dFNoYXBlLngxID0geDE7XG4gICAgb3V0cHV0U2hhcGUueDIgPSB4MjtcbiAgICBvdXRwdXRTaGFwZS55MSA9IHkxO1xuICAgIG91dHB1dFNoYXBlLnkyID0geTI7XG4gICAgdmFyIGxpbmVXaWR0aCA9IHN0eWxlICYmIHN0eWxlLmxpbmVXaWR0aDtcbiAgICBpZiAoIWxpbmVXaWR0aCkge1xuICAgICAgICByZXR1cm4gb3V0cHV0U2hhcGU7XG4gICAgfVxuICAgIGlmIChyb3VuZCh4MSAqIDIpID09PSByb3VuZCh4MiAqIDIpKSB7XG4gICAgICAgIG91dHB1dFNoYXBlLngxID0gb3V0cHV0U2hhcGUueDIgPSBzdWJQaXhlbE9wdGltaXplKHgxLCBsaW5lV2lkdGgsIHRydWUpO1xuICAgIH1cbiAgICBpZiAocm91bmQoeTEgKiAyKSA9PT0gcm91bmQoeTIgKiAyKSkge1xuICAgICAgICBvdXRwdXRTaGFwZS55MSA9IG91dHB1dFNoYXBlLnkyID0gc3ViUGl4ZWxPcHRpbWl6ZSh5MSwgbGluZVdpZHRoLCB0cnVlKTtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFNoYXBlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHN1YlBpeGVsT3B0aW1pemVSZWN0KG91dHB1dFNoYXBlLCBpbnB1dFNoYXBlLCBzdHlsZSkge1xuICAgIGlmICghaW5wdXRTaGFwZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBvcmlnaW5YID0gaW5wdXRTaGFwZS54O1xuICAgIHZhciBvcmlnaW5ZID0gaW5wdXRTaGFwZS55O1xuICAgIHZhciBvcmlnaW5XaWR0aCA9IGlucHV0U2hhcGUud2lkdGg7XG4gICAgdmFyIG9yaWdpbkhlaWdodCA9IGlucHV0U2hhcGUuaGVpZ2h0O1xuICAgIG91dHB1dFNoYXBlLnggPSBvcmlnaW5YO1xuICAgIG91dHB1dFNoYXBlLnkgPSBvcmlnaW5ZO1xuICAgIG91dHB1dFNoYXBlLndpZHRoID0gb3JpZ2luV2lkdGg7XG4gICAgb3V0cHV0U2hhcGUuaGVpZ2h0ID0gb3JpZ2luSGVpZ2h0O1xuICAgIHZhciBsaW5lV2lkdGggPSBzdHlsZSAmJiBzdHlsZS5saW5lV2lkdGg7XG4gICAgaWYgKCFsaW5lV2lkdGgpIHtcbiAgICAgICAgcmV0dXJuIG91dHB1dFNoYXBlO1xuICAgIH1cbiAgICBvdXRwdXRTaGFwZS54ID0gc3ViUGl4ZWxPcHRpbWl6ZShvcmlnaW5YLCBsaW5lV2lkdGgsIHRydWUpO1xuICAgIG91dHB1dFNoYXBlLnkgPSBzdWJQaXhlbE9wdGltaXplKG9yaWdpblksIGxpbmVXaWR0aCwgdHJ1ZSk7XG4gICAgb3V0cHV0U2hhcGUud2lkdGggPSBNYXRoLm1heChzdWJQaXhlbE9wdGltaXplKG9yaWdpblggKyBvcmlnaW5XaWR0aCwgbGluZVdpZHRoLCBmYWxzZSkgLSBvdXRwdXRTaGFwZS54LCBvcmlnaW5XaWR0aCA9PT0gMCA/IDAgOiAxKTtcbiAgICBvdXRwdXRTaGFwZS5oZWlnaHQgPSBNYXRoLm1heChzdWJQaXhlbE9wdGltaXplKG9yaWdpblkgKyBvcmlnaW5IZWlnaHQsIGxpbmVXaWR0aCwgZmFsc2UpIC0gb3V0cHV0U2hhcGUueSwgb3JpZ2luSGVpZ2h0ID09PSAwID8gMCA6IDEpO1xuICAgIHJldHVybiBvdXRwdXRTaGFwZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzdWJQaXhlbE9wdGltaXplKHBvc2l0aW9uLCBsaW5lV2lkdGgsIHBvc2l0aXZlT3JOZWdhdGl2ZSkge1xuICAgIGlmICghbGluZVdpZHRoKSB7XG4gICAgICAgIHJldHVybiBwb3NpdGlvbjtcbiAgICB9XG4gICAgdmFyIGRvdWJsZWRQb3NpdGlvbiA9IHJvdW5kKHBvc2l0aW9uICogMik7XG4gICAgcmV0dXJuIChkb3VibGVkUG9zaXRpb24gKyByb3VuZChsaW5lV2lkdGgpKSAlIDIgPT09IDBcbiAgICAgICAgPyBkb3VibGVkUG9zaXRpb24gLyAyXG4gICAgICAgIDogKGRvdWJsZWRQb3NpdGlvbiArIChwb3NpdGl2ZU9yTmVnYXRpdmUgPyAxIDogLTEpKSAvIDI7XG59XG4iLCJpbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCBQYXRoIGZyb20gJy4uL1BhdGguanMnO1xuaW1wb3J0ICogYXMgcm91bmRSZWN0SGVscGVyIGZyb20gJy4uL2hlbHBlci9yb3VuZFJlY3QuanMnO1xuaW1wb3J0IHsgc3ViUGl4ZWxPcHRpbWl6ZVJlY3QgfSBmcm9tICcuLi9oZWxwZXIvc3ViUGl4ZWxPcHRpbWl6ZS5qcyc7XG52YXIgUmVjdFNoYXBlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZWN0U2hhcGUoKSB7XG4gICAgICAgIHRoaXMueCA9IDA7XG4gICAgICAgIHRoaXMueSA9IDA7XG4gICAgICAgIHRoaXMud2lkdGggPSAwO1xuICAgICAgICB0aGlzLmhlaWdodCA9IDA7XG4gICAgfVxuICAgIHJldHVybiBSZWN0U2hhcGU7XG59KCkpO1xuZXhwb3J0IHsgUmVjdFNoYXBlIH07XG52YXIgc3ViUGl4ZWxPcHRpbWl6ZU91dHB1dFNoYXBlID0ge307XG52YXIgUmVjdCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJlY3QsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUmVjdChvcHRzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBvcHRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBSZWN0LnByb3RvdHlwZS5nZXREZWZhdWx0U2hhcGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVjdFNoYXBlKCk7XG4gICAgfTtcbiAgICBSZWN0LnByb3RvdHlwZS5idWlsZFBhdGggPSBmdW5jdGlvbiAoY3R4LCBzaGFwZSkge1xuICAgICAgICB2YXIgeDtcbiAgICAgICAgdmFyIHk7XG4gICAgICAgIHZhciB3aWR0aDtcbiAgICAgICAgdmFyIGhlaWdodDtcbiAgICAgICAgaWYgKHRoaXMuc3ViUGl4ZWxPcHRpbWl6ZSkge1xuICAgICAgICAgICAgdmFyIG9wdGltaXplZFNoYXBlID0gc3ViUGl4ZWxPcHRpbWl6ZVJlY3Qoc3ViUGl4ZWxPcHRpbWl6ZU91dHB1dFNoYXBlLCBzaGFwZSwgdGhpcy5zdHlsZSk7XG4gICAgICAgICAgICB4ID0gb3B0aW1pemVkU2hhcGUueDtcbiAgICAgICAgICAgIHkgPSBvcHRpbWl6ZWRTaGFwZS55O1xuICAgICAgICAgICAgd2lkdGggPSBvcHRpbWl6ZWRTaGFwZS53aWR0aDtcbiAgICAgICAgICAgIGhlaWdodCA9IG9wdGltaXplZFNoYXBlLmhlaWdodDtcbiAgICAgICAgICAgIG9wdGltaXplZFNoYXBlLnIgPSBzaGFwZS5yO1xuICAgICAgICAgICAgc2hhcGUgPSBvcHRpbWl6ZWRTaGFwZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHggPSBzaGFwZS54O1xuICAgICAgICAgICAgeSA9IHNoYXBlLnk7XG4gICAgICAgICAgICB3aWR0aCA9IHNoYXBlLndpZHRoO1xuICAgICAgICAgICAgaGVpZ2h0ID0gc2hhcGUuaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIGlmICghc2hhcGUucikge1xuICAgICAgICAgICAgY3R4LnJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByb3VuZFJlY3RIZWxwZXIuYnVpbGRQYXRoKGN0eCwgc2hhcGUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBSZWN0LnByb3RvdHlwZS5pc1plcm9BcmVhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuc2hhcGUud2lkdGggfHwgIXRoaXMuc2hhcGUuaGVpZ2h0O1xuICAgIH07XG4gICAgcmV0dXJuIFJlY3Q7XG59KFBhdGgpKTtcblJlY3QucHJvdG90eXBlLnR5cGUgPSAncmVjdCc7XG5leHBvcnQgZGVmYXVsdCBSZWN0O1xuIiwiaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBwYXJzZVJpY2hUZXh0LCBwYXJzZVBsYWluVGV4dCB9IGZyb20gJy4vaGVscGVyL3BhcnNlVGV4dC5qcyc7XG5pbXBvcnQgVFNwYW4gZnJvbSAnLi9UU3Bhbi5qcyc7XG5pbXBvcnQgeyByZXRyaWV2ZTIsIGVhY2gsIG5vcm1hbGl6ZUNzc0FycmF5LCB0cmltLCByZXRyaWV2ZTMsIGV4dGVuZCwga2V5cywgZGVmYXVsdHMgfSBmcm9tICcuLi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0IHsgYWRqdXN0VGV4dFgsIGFkanVzdFRleHRZIH0gZnJvbSAnLi4vY29udGFpbi90ZXh0LmpzJztcbmltcG9ydCBaUkltYWdlIGZyb20gJy4vSW1hZ2UuanMnO1xuaW1wb3J0IFJlY3QgZnJvbSAnLi9zaGFwZS9SZWN0LmpzJztcbmltcG9ydCBCb3VuZGluZ1JlY3QgZnJvbSAnLi4vY29yZS9Cb3VuZGluZ1JlY3QuanMnO1xuaW1wb3J0IERpc3BsYXlhYmxlLCB7IERFRkFVTFRfQ09NTU9OX0FOSU1BVElPTl9QUk9QUyB9IGZyb20gJy4vRGlzcGxheWFibGUuanMnO1xuaW1wb3J0IHsgREVGQVVMVF9GT05ULCBERUZBVUxUX0ZPTlRfU0laRSB9IGZyb20gJy4uL2NvcmUvcGxhdGZvcm0uanMnO1xudmFyIERFRkFVTFRfUklDSF9URVhUX0NPTE9SID0ge1xuICAgIGZpbGw6ICcjMDAwJ1xufTtcbnZhciBERUZBVUxUX1NUUk9LRV9MSU5FX1dJRFRIID0gMjtcbmV4cG9ydCB2YXIgREVGQVVMVF9URVhUX0FOSU1BVElPTl9QUk9QUyA9IHtcbiAgICBzdHlsZTogZGVmYXVsdHMoe1xuICAgICAgICBmaWxsOiB0cnVlLFxuICAgICAgICBzdHJva2U6IHRydWUsXG4gICAgICAgIGZpbGxPcGFjaXR5OiB0cnVlLFxuICAgICAgICBzdHJva2VPcGFjaXR5OiB0cnVlLFxuICAgICAgICBsaW5lV2lkdGg6IHRydWUsXG4gICAgICAgIGZvbnRTaXplOiB0cnVlLFxuICAgICAgICBsaW5lSGVpZ2h0OiB0cnVlLFxuICAgICAgICB3aWR0aDogdHJ1ZSxcbiAgICAgICAgaGVpZ2h0OiB0cnVlLFxuICAgICAgICB0ZXh0U2hhZG93Q29sb3I6IHRydWUsXG4gICAgICAgIHRleHRTaGFkb3dCbHVyOiB0cnVlLFxuICAgICAgICB0ZXh0U2hhZG93T2Zmc2V0WDogdHJ1ZSxcbiAgICAgICAgdGV4dFNoYWRvd09mZnNldFk6IHRydWUsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogdHJ1ZSxcbiAgICAgICAgcGFkZGluZzogdHJ1ZSxcbiAgICAgICAgYm9yZGVyQ29sb3I6IHRydWUsXG4gICAgICAgIGJvcmRlcldpZHRoOiB0cnVlLFxuICAgICAgICBib3JkZXJSYWRpdXM6IHRydWVcbiAgICB9LCBERUZBVUxUX0NPTU1PTl9BTklNQVRJT05fUFJPUFMuc3R5bGUpXG59O1xudmFyIFpSVGV4dCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFpSVGV4dCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBaUlRleHQob3B0cykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy50eXBlID0gJ3RleHQnO1xuICAgICAgICBfdGhpcy5fY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgX3RoaXMuX2RlZmF1bHRTdHlsZSA9IERFRkFVTFRfUklDSF9URVhUX0NPTE9SO1xuICAgICAgICBfdGhpcy5hdHRyKG9wdHMpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFpSVGV4dC5wcm90b3R5cGUuY2hpbGRyZW5SZWYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jaGlsZHJlbjtcbiAgICB9O1xuICAgIFpSVGV4dC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVwZGF0ZS5jYWxsKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5zdHlsZUNoYW5nZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlU3ViVGV4dHMoKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2NoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLl9jaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGNoaWxkLnpsZXZlbCA9IHRoaXMuemxldmVsO1xuICAgICAgICAgICAgY2hpbGQueiA9IHRoaXMuejtcbiAgICAgICAgICAgIGNoaWxkLnoyID0gdGhpcy56MjtcbiAgICAgICAgICAgIGNoaWxkLmN1bGxpbmcgPSB0aGlzLmN1bGxpbmc7XG4gICAgICAgICAgICBjaGlsZC5jdXJzb3IgPSB0aGlzLmN1cnNvcjtcbiAgICAgICAgICAgIGNoaWxkLmludmlzaWJsZSA9IHRoaXMuaW52aXNpYmxlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBaUlRleHQucHJvdG90eXBlLnVwZGF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGlubmVyVHJhbnNmb3JtYWJsZSA9IHRoaXMuaW5uZXJUcmFuc2Zvcm1hYmxlO1xuICAgICAgICBpZiAoaW5uZXJUcmFuc2Zvcm1hYmxlKSB7XG4gICAgICAgICAgICBpbm5lclRyYW5zZm9ybWFibGUudXBkYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgICAgICBpZiAoaW5uZXJUcmFuc2Zvcm1hYmxlLnRyYW5zZm9ybSkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtID0gaW5uZXJUcmFuc2Zvcm1hYmxlLnRyYW5zZm9ybTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFpSVGV4dC5wcm90b3R5cGUuZ2V0TG9jYWxUcmFuc2Zvcm0gPSBmdW5jdGlvbiAobSkge1xuICAgICAgICB2YXIgaW5uZXJUcmFuc2Zvcm1hYmxlID0gdGhpcy5pbm5lclRyYW5zZm9ybWFibGU7XG4gICAgICAgIHJldHVybiBpbm5lclRyYW5zZm9ybWFibGVcbiAgICAgICAgICAgID8gaW5uZXJUcmFuc2Zvcm1hYmxlLmdldExvY2FsVHJhbnNmb3JtKG0pXG4gICAgICAgICAgICA6IF9zdXBlci5wcm90b3R5cGUuZ2V0TG9jYWxUcmFuc2Zvcm0uY2FsbCh0aGlzLCBtKTtcbiAgICB9O1xuICAgIFpSVGV4dC5wcm90b3R5cGUuZ2V0Q29tcHV0ZWRUcmFuc2Zvcm0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLl9faG9zdFRhcmdldCkge1xuICAgICAgICAgICAgdGhpcy5fX2hvc3RUYXJnZXQuZ2V0Q29tcHV0ZWRUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgIHRoaXMuX19ob3N0VGFyZ2V0LnVwZGF0ZUlubmVyVGV4dCh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5nZXRDb21wdXRlZFRyYW5zZm9ybS5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgWlJUZXh0LnByb3RvdHlwZS5fdXBkYXRlU3ViVGV4dHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2NoaWxkQ3Vyc29yID0gMDtcbiAgICAgICAgbm9ybWFsaXplVGV4dFN0eWxlKHRoaXMuc3R5bGUpO1xuICAgICAgICB0aGlzLnN0eWxlLnJpY2hcbiAgICAgICAgICAgID8gdGhpcy5fdXBkYXRlUmljaFRleHRzKClcbiAgICAgICAgICAgIDogdGhpcy5fdXBkYXRlUGxhaW5UZXh0cygpO1xuICAgICAgICB0aGlzLl9jaGlsZHJlbi5sZW5ndGggPSB0aGlzLl9jaGlsZEN1cnNvcjtcbiAgICAgICAgdGhpcy5zdHlsZVVwZGF0ZWQoKTtcbiAgICB9O1xuICAgIFpSVGV4dC5wcm90b3R5cGUuYWRkU2VsZlRvWnIgPSBmdW5jdGlvbiAoenIpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5hZGRTZWxmVG9aci5jYWxsKHRoaXMsIHpyKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5fY2hpbGRyZW5baV0uX196ciA9IHpyO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBaUlRleHQucHJvdG90eXBlLnJlbW92ZVNlbGZGcm9tWnIgPSBmdW5jdGlvbiAoenIpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZW1vdmVTZWxmRnJvbVpyLmNhbGwodGhpcywgenIpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2NoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLl9jaGlsZHJlbltpXS5fX3pyID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgWlJUZXh0LnByb3RvdHlwZS5nZXRCb3VuZGluZ1JlY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0eWxlQ2hhbmdlZCgpKSB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVTdWJUZXh0cygpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fcmVjdCkge1xuICAgICAgICAgICAgdmFyIHRtcFJlY3QgPSBuZXcgQm91bmRpbmdSZWN0KDAsIDAsIDAsIDApO1xuICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gdGhpcy5fY2hpbGRyZW47XG4gICAgICAgICAgICB2YXIgdG1wTWF0ID0gW107XG4gICAgICAgICAgICB2YXIgcmVjdCA9IG51bGw7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkUmVjdCA9IGNoaWxkLmdldEJvdW5kaW5nUmVjdCgpO1xuICAgICAgICAgICAgICAgIHZhciB0cmFuc2Zvcm0gPSBjaGlsZC5nZXRMb2NhbFRyYW5zZm9ybSh0bXBNYXQpO1xuICAgICAgICAgICAgICAgIGlmICh0cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgICAgICAgICAgdG1wUmVjdC5jb3B5KGNoaWxkUmVjdCk7XG4gICAgICAgICAgICAgICAgICAgIHRtcFJlY3QuYXBwbHlUcmFuc2Zvcm0odHJhbnNmb3JtKTtcbiAgICAgICAgICAgICAgICAgICAgcmVjdCA9IHJlY3QgfHwgdG1wUmVjdC5jbG9uZSgpO1xuICAgICAgICAgICAgICAgICAgICByZWN0LnVuaW9uKHRtcFJlY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVjdCA9IHJlY3QgfHwgY2hpbGRSZWN0LmNsb25lKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlY3QudW5pb24oY2hpbGRSZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9yZWN0ID0gcmVjdCB8fCB0bXBSZWN0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWN0O1xuICAgIH07XG4gICAgWlJUZXh0LnByb3RvdHlwZS5zZXREZWZhdWx0VGV4dFN0eWxlID0gZnVuY3Rpb24gKGRlZmF1bHRUZXh0U3R5bGUpIHtcbiAgICAgICAgdGhpcy5fZGVmYXVsdFN0eWxlID0gZGVmYXVsdFRleHRTdHlsZSB8fCBERUZBVUxUX1JJQ0hfVEVYVF9DT0xPUjtcbiAgICB9O1xuICAgIFpSVGV4dC5wcm90b3R5cGUuc2V0VGV4dENvbnRlbnQgPSBmdW5jdGlvbiAodGV4dENvbnRlbnQpIHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2FuXFwndCBhdHRhY2ggdGV4dCBvbiBhbm90aGVyIHRleHQnKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgWlJUZXh0LnByb3RvdHlwZS5fbWVyZ2VTdHlsZSA9IGZ1bmN0aW9uICh0YXJnZXRTdHlsZSwgc291cmNlU3R5bGUpIHtcbiAgICAgICAgaWYgKCFzb3VyY2VTdHlsZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldFN0eWxlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzb3VyY2VSaWNoID0gc291cmNlU3R5bGUucmljaDtcbiAgICAgICAgdmFyIHRhcmdldFJpY2ggPSB0YXJnZXRTdHlsZS5yaWNoIHx8IChzb3VyY2VSaWNoICYmIHt9KTtcbiAgICAgICAgZXh0ZW5kKHRhcmdldFN0eWxlLCBzb3VyY2VTdHlsZSk7XG4gICAgICAgIGlmIChzb3VyY2VSaWNoICYmIHRhcmdldFJpY2gpIHtcbiAgICAgICAgICAgIHRoaXMuX21lcmdlUmljaCh0YXJnZXRSaWNoLCBzb3VyY2VSaWNoKTtcbiAgICAgICAgICAgIHRhcmdldFN0eWxlLnJpY2ggPSB0YXJnZXRSaWNoO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRhcmdldFJpY2gpIHtcbiAgICAgICAgICAgIHRhcmdldFN0eWxlLnJpY2ggPSB0YXJnZXRSaWNoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YXJnZXRTdHlsZTtcbiAgICB9O1xuICAgIFpSVGV4dC5wcm90b3R5cGUuX21lcmdlUmljaCA9IGZ1bmN0aW9uICh0YXJnZXRSaWNoLCBzb3VyY2VSaWNoKSB7XG4gICAgICAgIHZhciByaWNoTmFtZXMgPSBrZXlzKHNvdXJjZVJpY2gpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJpY2hOYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHJpY2hOYW1lID0gcmljaE5hbWVzW2ldO1xuICAgICAgICAgICAgdGFyZ2V0UmljaFtyaWNoTmFtZV0gPSB0YXJnZXRSaWNoW3JpY2hOYW1lXSB8fCB7fTtcbiAgICAgICAgICAgIGV4dGVuZCh0YXJnZXRSaWNoW3JpY2hOYW1lXSwgc291cmNlUmljaFtyaWNoTmFtZV0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBaUlRleHQucHJvdG90eXBlLmdldEFuaW1hdGlvblN0eWxlUHJvcHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBERUZBVUxUX1RFWFRfQU5JTUFUSU9OX1BST1BTO1xuICAgIH07XG4gICAgWlJUZXh0LnByb3RvdHlwZS5fZ2V0T3JDcmVhdGVDaGlsZCA9IGZ1bmN0aW9uIChDdG9yKSB7XG4gICAgICAgIHZhciBjaGlsZCA9IHRoaXMuX2NoaWxkcmVuW3RoaXMuX2NoaWxkQ3Vyc29yXTtcbiAgICAgICAgaWYgKCFjaGlsZCB8fCAhKGNoaWxkIGluc3RhbmNlb2YgQ3RvcikpIHtcbiAgICAgICAgICAgIGNoaWxkID0gbmV3IEN0b3IoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jaGlsZHJlblt0aGlzLl9jaGlsZEN1cnNvcisrXSA9IGNoaWxkO1xuICAgICAgICBjaGlsZC5fX3pyID0gdGhpcy5fX3pyO1xuICAgICAgICBjaGlsZC5wYXJlbnQgPSB0aGlzO1xuICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgfTtcbiAgICBaUlRleHQucHJvdG90eXBlLl91cGRhdGVQbGFpblRleHRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLnN0eWxlO1xuICAgICAgICB2YXIgdGV4dEZvbnQgPSBzdHlsZS5mb250IHx8IERFRkFVTFRfRk9OVDtcbiAgICAgICAgdmFyIHRleHRQYWRkaW5nID0gc3R5bGUucGFkZGluZztcbiAgICAgICAgdmFyIHRleHQgPSBnZXRTdHlsZVRleHQoc3R5bGUpO1xuICAgICAgICB2YXIgY29udGVudEJsb2NrID0gcGFyc2VQbGFpblRleHQodGV4dCwgc3R5bGUpO1xuICAgICAgICB2YXIgbmVlZERyYXdCZyA9IG5lZWREcmF3QmFja2dyb3VuZChzdHlsZSk7XG4gICAgICAgIHZhciBiZ0NvbG9yRHJhd24gPSAhIShzdHlsZS5iYWNrZ3JvdW5kQ29sb3IpO1xuICAgICAgICB2YXIgb3V0ZXJIZWlnaHQgPSBjb250ZW50QmxvY2sub3V0ZXJIZWlnaHQ7XG4gICAgICAgIHZhciBvdXRlcldpZHRoID0gY29udGVudEJsb2NrLm91dGVyV2lkdGg7XG4gICAgICAgIHZhciBjb250ZW50V2lkdGggPSBjb250ZW50QmxvY2suY29udGVudFdpZHRoO1xuICAgICAgICB2YXIgdGV4dExpbmVzID0gY29udGVudEJsb2NrLmxpbmVzO1xuICAgICAgICB2YXIgbGluZUhlaWdodCA9IGNvbnRlbnRCbG9jay5saW5lSGVpZ2h0O1xuICAgICAgICB2YXIgZGVmYXVsdFN0eWxlID0gdGhpcy5fZGVmYXVsdFN0eWxlO1xuICAgICAgICB2YXIgYmFzZVggPSBzdHlsZS54IHx8IDA7XG4gICAgICAgIHZhciBiYXNlWSA9IHN0eWxlLnkgfHwgMDtcbiAgICAgICAgdmFyIHRleHRBbGlnbiA9IHN0eWxlLmFsaWduIHx8IGRlZmF1bHRTdHlsZS5hbGlnbiB8fCAnbGVmdCc7XG4gICAgICAgIHZhciB2ZXJ0aWNhbEFsaWduID0gc3R5bGUudmVydGljYWxBbGlnbiB8fCBkZWZhdWx0U3R5bGUudmVydGljYWxBbGlnbiB8fCAndG9wJztcbiAgICAgICAgdmFyIHRleHRYID0gYmFzZVg7XG4gICAgICAgIHZhciB0ZXh0WSA9IGFkanVzdFRleHRZKGJhc2VZLCBjb250ZW50QmxvY2suY29udGVudEhlaWdodCwgdmVydGljYWxBbGlnbik7XG4gICAgICAgIGlmIChuZWVkRHJhd0JnIHx8IHRleHRQYWRkaW5nKSB7XG4gICAgICAgICAgICB2YXIgYm94WCA9IGFkanVzdFRleHRYKGJhc2VYLCBvdXRlcldpZHRoLCB0ZXh0QWxpZ24pO1xuICAgICAgICAgICAgdmFyIGJveFkgPSBhZGp1c3RUZXh0WShiYXNlWSwgb3V0ZXJIZWlnaHQsIHZlcnRpY2FsQWxpZ24pO1xuICAgICAgICAgICAgbmVlZERyYXdCZyAmJiB0aGlzLl9yZW5kZXJCYWNrZ3JvdW5kKHN0eWxlLCBzdHlsZSwgYm94WCwgYm94WSwgb3V0ZXJXaWR0aCwgb3V0ZXJIZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIHRleHRZICs9IGxpbmVIZWlnaHQgLyAyO1xuICAgICAgICBpZiAodGV4dFBhZGRpbmcpIHtcbiAgICAgICAgICAgIHRleHRYID0gZ2V0VGV4dFhGb3JQYWRkaW5nKGJhc2VYLCB0ZXh0QWxpZ24sIHRleHRQYWRkaW5nKTtcbiAgICAgICAgICAgIGlmICh2ZXJ0aWNhbEFsaWduID09PSAndG9wJykge1xuICAgICAgICAgICAgICAgIHRleHRZICs9IHRleHRQYWRkaW5nWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodmVydGljYWxBbGlnbiA9PT0gJ2JvdHRvbScpIHtcbiAgICAgICAgICAgICAgICB0ZXh0WSAtPSB0ZXh0UGFkZGluZ1syXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgZGVmYXVsdExpbmVXaWR0aCA9IDA7XG4gICAgICAgIHZhciB1c2VEZWZhdWx0RmlsbCA9IGZhbHNlO1xuICAgICAgICB2YXIgdGV4dEZpbGwgPSBnZXRGaWxsKCdmaWxsJyBpbiBzdHlsZVxuICAgICAgICAgICAgPyBzdHlsZS5maWxsXG4gICAgICAgICAgICA6ICh1c2VEZWZhdWx0RmlsbCA9IHRydWUsIGRlZmF1bHRTdHlsZS5maWxsKSk7XG4gICAgICAgIHZhciB0ZXh0U3Ryb2tlID0gZ2V0U3Ryb2tlKCdzdHJva2UnIGluIHN0eWxlXG4gICAgICAgICAgICA/IHN0eWxlLnN0cm9rZVxuICAgICAgICAgICAgOiAoIWJnQ29sb3JEcmF3blxuICAgICAgICAgICAgICAgICYmICghZGVmYXVsdFN0eWxlLmF1dG9TdHJva2UgfHwgdXNlRGVmYXVsdEZpbGwpKVxuICAgICAgICAgICAgICAgID8gKGRlZmF1bHRMaW5lV2lkdGggPSBERUZBVUxUX1NUUk9LRV9MSU5FX1dJRFRILCBkZWZhdWx0U3R5bGUuc3Ryb2tlKVxuICAgICAgICAgICAgICAgIDogbnVsbCk7XG4gICAgICAgIHZhciBoYXNTaGFkb3cgPSBzdHlsZS50ZXh0U2hhZG93Qmx1ciA+IDA7XG4gICAgICAgIHZhciBmaXhlZEJvdW5kaW5nUmVjdCA9IHN0eWxlLndpZHRoICE9IG51bGxcbiAgICAgICAgICAgICYmIChzdHlsZS5vdmVyZmxvdyA9PT0gJ3RydW5jYXRlJyB8fCBzdHlsZS5vdmVyZmxvdyA9PT0gJ2JyZWFrJyB8fCBzdHlsZS5vdmVyZmxvdyA9PT0gJ2JyZWFrQWxsJyk7XG4gICAgICAgIHZhciBjYWxjdWxhdGVkTGluZUhlaWdodCA9IGNvbnRlbnRCbG9jay5jYWxjdWxhdGVkTGluZUhlaWdodDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZXh0TGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBlbCA9IHRoaXMuX2dldE9yQ3JlYXRlQ2hpbGQoVFNwYW4pO1xuICAgICAgICAgICAgdmFyIHN1YkVsU3R5bGUgPSBlbC5jcmVhdGVTdHlsZSgpO1xuICAgICAgICAgICAgZWwudXNlU3R5bGUoc3ViRWxTdHlsZSk7XG4gICAgICAgICAgICBzdWJFbFN0eWxlLnRleHQgPSB0ZXh0TGluZXNbaV07XG4gICAgICAgICAgICBzdWJFbFN0eWxlLnggPSB0ZXh0WDtcbiAgICAgICAgICAgIHN1YkVsU3R5bGUueSA9IHRleHRZO1xuICAgICAgICAgICAgaWYgKHRleHRBbGlnbikge1xuICAgICAgICAgICAgICAgIHN1YkVsU3R5bGUudGV4dEFsaWduID0gdGV4dEFsaWduO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3ViRWxTdHlsZS50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcbiAgICAgICAgICAgIHN1YkVsU3R5bGUub3BhY2l0eSA9IHN0eWxlLm9wYWNpdHk7XG4gICAgICAgICAgICBzdWJFbFN0eWxlLnN0cm9rZUZpcnN0ID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChoYXNTaGFkb3cpIHtcbiAgICAgICAgICAgICAgICBzdWJFbFN0eWxlLnNoYWRvd0JsdXIgPSBzdHlsZS50ZXh0U2hhZG93Qmx1ciB8fCAwO1xuICAgICAgICAgICAgICAgIHN1YkVsU3R5bGUuc2hhZG93Q29sb3IgPSBzdHlsZS50ZXh0U2hhZG93Q29sb3IgfHwgJ3RyYW5zcGFyZW50JztcbiAgICAgICAgICAgICAgICBzdWJFbFN0eWxlLnNoYWRvd09mZnNldFggPSBzdHlsZS50ZXh0U2hhZG93T2Zmc2V0WCB8fCAwO1xuICAgICAgICAgICAgICAgIHN1YkVsU3R5bGUuc2hhZG93T2Zmc2V0WSA9IHN0eWxlLnRleHRTaGFkb3dPZmZzZXRZIHx8IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdWJFbFN0eWxlLnN0cm9rZSA9IHRleHRTdHJva2U7XG4gICAgICAgICAgICBzdWJFbFN0eWxlLmZpbGwgPSB0ZXh0RmlsbDtcbiAgICAgICAgICAgIGlmICh0ZXh0U3Ryb2tlKSB7XG4gICAgICAgICAgICAgICAgc3ViRWxTdHlsZS5saW5lV2lkdGggPSBzdHlsZS5saW5lV2lkdGggfHwgZGVmYXVsdExpbmVXaWR0aDtcbiAgICAgICAgICAgICAgICBzdWJFbFN0eWxlLmxpbmVEYXNoID0gc3R5bGUubGluZURhc2g7XG4gICAgICAgICAgICAgICAgc3ViRWxTdHlsZS5saW5lRGFzaE9mZnNldCA9IHN0eWxlLmxpbmVEYXNoT2Zmc2V0IHx8IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdWJFbFN0eWxlLmZvbnQgPSB0ZXh0Rm9udDtcbiAgICAgICAgICAgIHNldFNlcGFyYXRlRm9udChzdWJFbFN0eWxlLCBzdHlsZSk7XG4gICAgICAgICAgICB0ZXh0WSArPSBsaW5lSGVpZ2h0O1xuICAgICAgICAgICAgaWYgKGZpeGVkQm91bmRpbmdSZWN0KSB7XG4gICAgICAgICAgICAgICAgZWwuc2V0Qm91bmRpbmdSZWN0KG5ldyBCb3VuZGluZ1JlY3QoYWRqdXN0VGV4dFgoc3ViRWxTdHlsZS54LCBzdHlsZS53aWR0aCwgc3ViRWxTdHlsZS50ZXh0QWxpZ24pLCBhZGp1c3RUZXh0WShzdWJFbFN0eWxlLnksIGNhbGN1bGF0ZWRMaW5lSGVpZ2h0LCBzdWJFbFN0eWxlLnRleHRCYXNlbGluZSksIGNvbnRlbnRXaWR0aCwgY2FsY3VsYXRlZExpbmVIZWlnaHQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgWlJUZXh0LnByb3RvdHlwZS5fdXBkYXRlUmljaFRleHRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLnN0eWxlO1xuICAgICAgICB2YXIgdGV4dCA9IGdldFN0eWxlVGV4dChzdHlsZSk7XG4gICAgICAgIHZhciBjb250ZW50QmxvY2sgPSBwYXJzZVJpY2hUZXh0KHRleHQsIHN0eWxlKTtcbiAgICAgICAgdmFyIGNvbnRlbnRXaWR0aCA9IGNvbnRlbnRCbG9jay53aWR0aDtcbiAgICAgICAgdmFyIG91dGVyV2lkdGggPSBjb250ZW50QmxvY2sub3V0ZXJXaWR0aDtcbiAgICAgICAgdmFyIG91dGVySGVpZ2h0ID0gY29udGVudEJsb2NrLm91dGVySGVpZ2h0O1xuICAgICAgICB2YXIgdGV4dFBhZGRpbmcgPSBzdHlsZS5wYWRkaW5nO1xuICAgICAgICB2YXIgYmFzZVggPSBzdHlsZS54IHx8IDA7XG4gICAgICAgIHZhciBiYXNlWSA9IHN0eWxlLnkgfHwgMDtcbiAgICAgICAgdmFyIGRlZmF1bHRTdHlsZSA9IHRoaXMuX2RlZmF1bHRTdHlsZTtcbiAgICAgICAgdmFyIHRleHRBbGlnbiA9IHN0eWxlLmFsaWduIHx8IGRlZmF1bHRTdHlsZS5hbGlnbjtcbiAgICAgICAgdmFyIHZlcnRpY2FsQWxpZ24gPSBzdHlsZS52ZXJ0aWNhbEFsaWduIHx8IGRlZmF1bHRTdHlsZS52ZXJ0aWNhbEFsaWduO1xuICAgICAgICB2YXIgYm94WCA9IGFkanVzdFRleHRYKGJhc2VYLCBvdXRlcldpZHRoLCB0ZXh0QWxpZ24pO1xuICAgICAgICB2YXIgYm94WSA9IGFkanVzdFRleHRZKGJhc2VZLCBvdXRlckhlaWdodCwgdmVydGljYWxBbGlnbik7XG4gICAgICAgIHZhciB4TGVmdCA9IGJveFg7XG4gICAgICAgIHZhciBsaW5lVG9wID0gYm94WTtcbiAgICAgICAgaWYgKHRleHRQYWRkaW5nKSB7XG4gICAgICAgICAgICB4TGVmdCArPSB0ZXh0UGFkZGluZ1szXTtcbiAgICAgICAgICAgIGxpbmVUb3AgKz0gdGV4dFBhZGRpbmdbMF07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHhSaWdodCA9IHhMZWZ0ICsgY29udGVudFdpZHRoO1xuICAgICAgICBpZiAobmVlZERyYXdCYWNrZ3JvdW5kKHN0eWxlKSkge1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyQmFja2dyb3VuZChzdHlsZSwgc3R5bGUsIGJveFgsIGJveFksIG91dGVyV2lkdGgsIG91dGVySGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYmdDb2xvckRyYXduID0gISEoc3R5bGUuYmFja2dyb3VuZENvbG9yKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb250ZW50QmxvY2subGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBsaW5lID0gY29udGVudEJsb2NrLmxpbmVzW2ldO1xuICAgICAgICAgICAgdmFyIHRva2VucyA9IGxpbmUudG9rZW5zO1xuICAgICAgICAgICAgdmFyIHRva2VuQ291bnQgPSB0b2tlbnMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGxpbmVIZWlnaHQgPSBsaW5lLmxpbmVIZWlnaHQ7XG4gICAgICAgICAgICB2YXIgcmVtYWluZWRXaWR0aCA9IGxpbmUud2lkdGg7XG4gICAgICAgICAgICB2YXIgbGVmdEluZGV4ID0gMDtcbiAgICAgICAgICAgIHZhciBsaW5lWExlZnQgPSB4TGVmdDtcbiAgICAgICAgICAgIHZhciBsaW5lWFJpZ2h0ID0geFJpZ2h0O1xuICAgICAgICAgICAgdmFyIHJpZ2h0SW5kZXggPSB0b2tlbkNvdW50IC0gMTtcbiAgICAgICAgICAgIHZhciB0b2tlbiA9IHZvaWQgMDtcbiAgICAgICAgICAgIHdoaWxlIChsZWZ0SW5kZXggPCB0b2tlbkNvdW50XG4gICAgICAgICAgICAgICAgJiYgKHRva2VuID0gdG9rZW5zW2xlZnRJbmRleF0sICF0b2tlbi5hbGlnbiB8fCB0b2tlbi5hbGlnbiA9PT0gJ2xlZnQnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3BsYWNlVG9rZW4odG9rZW4sIHN0eWxlLCBsaW5lSGVpZ2h0LCBsaW5lVG9wLCBsaW5lWExlZnQsICdsZWZ0JywgYmdDb2xvckRyYXduKTtcbiAgICAgICAgICAgICAgICByZW1haW5lZFdpZHRoIC09IHRva2VuLndpZHRoO1xuICAgICAgICAgICAgICAgIGxpbmVYTGVmdCArPSB0b2tlbi53aWR0aDtcbiAgICAgICAgICAgICAgICBsZWZ0SW5kZXgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChyaWdodEluZGV4ID49IDBcbiAgICAgICAgICAgICAgICAmJiAodG9rZW4gPSB0b2tlbnNbcmlnaHRJbmRleF0sIHRva2VuLmFsaWduID09PSAncmlnaHQnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3BsYWNlVG9rZW4odG9rZW4sIHN0eWxlLCBsaW5lSGVpZ2h0LCBsaW5lVG9wLCBsaW5lWFJpZ2h0LCAncmlnaHQnLCBiZ0NvbG9yRHJhd24pO1xuICAgICAgICAgICAgICAgIHJlbWFpbmVkV2lkdGggLT0gdG9rZW4ud2lkdGg7XG4gICAgICAgICAgICAgICAgbGluZVhSaWdodCAtPSB0b2tlbi53aWR0aDtcbiAgICAgICAgICAgICAgICByaWdodEluZGV4LS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsaW5lWExlZnQgKz0gKGNvbnRlbnRXaWR0aCAtIChsaW5lWExlZnQgLSB4TGVmdCkgLSAoeFJpZ2h0IC0gbGluZVhSaWdodCkgLSByZW1haW5lZFdpZHRoKSAvIDI7XG4gICAgICAgICAgICB3aGlsZSAobGVmdEluZGV4IDw9IHJpZ2h0SW5kZXgpIHtcbiAgICAgICAgICAgICAgICB0b2tlbiA9IHRva2Vuc1tsZWZ0SW5kZXhdO1xuICAgICAgICAgICAgICAgIHRoaXMuX3BsYWNlVG9rZW4odG9rZW4sIHN0eWxlLCBsaW5lSGVpZ2h0LCBsaW5lVG9wLCBsaW5lWExlZnQgKyB0b2tlbi53aWR0aCAvIDIsICdjZW50ZXInLCBiZ0NvbG9yRHJhd24pO1xuICAgICAgICAgICAgICAgIGxpbmVYTGVmdCArPSB0b2tlbi53aWR0aDtcbiAgICAgICAgICAgICAgICBsZWZ0SW5kZXgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxpbmVUb3AgKz0gbGluZUhlaWdodDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgWlJUZXh0LnByb3RvdHlwZS5fcGxhY2VUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbiwgc3R5bGUsIGxpbmVIZWlnaHQsIGxpbmVUb3AsIHgsIHRleHRBbGlnbiwgcGFyZW50QmdDb2xvckRyYXduKSB7XG4gICAgICAgIHZhciB0b2tlblN0eWxlID0gc3R5bGUucmljaFt0b2tlbi5zdHlsZU5hbWVdIHx8IHt9O1xuICAgICAgICB0b2tlblN0eWxlLnRleHQgPSB0b2tlbi50ZXh0O1xuICAgICAgICB2YXIgdmVydGljYWxBbGlnbiA9IHRva2VuLnZlcnRpY2FsQWxpZ247XG4gICAgICAgIHZhciB5ID0gbGluZVRvcCArIGxpbmVIZWlnaHQgLyAyO1xuICAgICAgICBpZiAodmVydGljYWxBbGlnbiA9PT0gJ3RvcCcpIHtcbiAgICAgICAgICAgIHkgPSBsaW5lVG9wICsgdG9rZW4uaGVpZ2h0IC8gMjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2ZXJ0aWNhbEFsaWduID09PSAnYm90dG9tJykge1xuICAgICAgICAgICAgeSA9IGxpbmVUb3AgKyBsaW5lSGVpZ2h0IC0gdG9rZW4uaGVpZ2h0IC8gMjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmVlZERyYXdCZyA9ICF0b2tlbi5pc0xpbmVIb2xkZXIgJiYgbmVlZERyYXdCYWNrZ3JvdW5kKHRva2VuU3R5bGUpO1xuICAgICAgICBuZWVkRHJhd0JnICYmIHRoaXMuX3JlbmRlckJhY2tncm91bmQodG9rZW5TdHlsZSwgc3R5bGUsIHRleHRBbGlnbiA9PT0gJ3JpZ2h0J1xuICAgICAgICAgICAgPyB4IC0gdG9rZW4ud2lkdGhcbiAgICAgICAgICAgIDogdGV4dEFsaWduID09PSAnY2VudGVyJ1xuICAgICAgICAgICAgICAgID8geCAtIHRva2VuLndpZHRoIC8gMlxuICAgICAgICAgICAgICAgIDogeCwgeSAtIHRva2VuLmhlaWdodCAvIDIsIHRva2VuLndpZHRoLCB0b2tlbi5oZWlnaHQpO1xuICAgICAgICB2YXIgYmdDb2xvckRyYXduID0gISF0b2tlblN0eWxlLmJhY2tncm91bmRDb2xvcjtcbiAgICAgICAgdmFyIHRleHRQYWRkaW5nID0gdG9rZW4udGV4dFBhZGRpbmc7XG4gICAgICAgIGlmICh0ZXh0UGFkZGluZykge1xuICAgICAgICAgICAgeCA9IGdldFRleHRYRm9yUGFkZGluZyh4LCB0ZXh0QWxpZ24sIHRleHRQYWRkaW5nKTtcbiAgICAgICAgICAgIHkgLT0gdG9rZW4uaGVpZ2h0IC8gMiAtIHRleHRQYWRkaW5nWzBdIC0gdG9rZW4uaW5uZXJIZWlnaHQgLyAyO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlbCA9IHRoaXMuX2dldE9yQ3JlYXRlQ2hpbGQoVFNwYW4pO1xuICAgICAgICB2YXIgc3ViRWxTdHlsZSA9IGVsLmNyZWF0ZVN0eWxlKCk7XG4gICAgICAgIGVsLnVzZVN0eWxlKHN1YkVsU3R5bGUpO1xuICAgICAgICB2YXIgZGVmYXVsdFN0eWxlID0gdGhpcy5fZGVmYXVsdFN0eWxlO1xuICAgICAgICB2YXIgdXNlRGVmYXVsdEZpbGwgPSBmYWxzZTtcbiAgICAgICAgdmFyIGRlZmF1bHRMaW5lV2lkdGggPSAwO1xuICAgICAgICB2YXIgdGV4dEZpbGwgPSBnZXRGaWxsKCdmaWxsJyBpbiB0b2tlblN0eWxlID8gdG9rZW5TdHlsZS5maWxsXG4gICAgICAgICAgICA6ICdmaWxsJyBpbiBzdHlsZSA/IHN0eWxlLmZpbGxcbiAgICAgICAgICAgICAgICA6ICh1c2VEZWZhdWx0RmlsbCA9IHRydWUsIGRlZmF1bHRTdHlsZS5maWxsKSk7XG4gICAgICAgIHZhciB0ZXh0U3Ryb2tlID0gZ2V0U3Ryb2tlKCdzdHJva2UnIGluIHRva2VuU3R5bGUgPyB0b2tlblN0eWxlLnN0cm9rZVxuICAgICAgICAgICAgOiAnc3Ryb2tlJyBpbiBzdHlsZSA/IHN0eWxlLnN0cm9rZVxuICAgICAgICAgICAgICAgIDogKCFiZ0NvbG9yRHJhd25cbiAgICAgICAgICAgICAgICAgICAgJiYgIXBhcmVudEJnQ29sb3JEcmF3blxuICAgICAgICAgICAgICAgICAgICAmJiAoIWRlZmF1bHRTdHlsZS5hdXRvU3Ryb2tlIHx8IHVzZURlZmF1bHRGaWxsKSkgPyAoZGVmYXVsdExpbmVXaWR0aCA9IERFRkFVTFRfU1RST0tFX0xJTkVfV0lEVEgsIGRlZmF1bHRTdHlsZS5zdHJva2UpXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCk7XG4gICAgICAgIHZhciBoYXNTaGFkb3cgPSB0b2tlblN0eWxlLnRleHRTaGFkb3dCbHVyID4gMFxuICAgICAgICAgICAgfHwgc3R5bGUudGV4dFNoYWRvd0JsdXIgPiAwO1xuICAgICAgICBzdWJFbFN0eWxlLnRleHQgPSB0b2tlbi50ZXh0O1xuICAgICAgICBzdWJFbFN0eWxlLnggPSB4O1xuICAgICAgICBzdWJFbFN0eWxlLnkgPSB5O1xuICAgICAgICBpZiAoaGFzU2hhZG93KSB7XG4gICAgICAgICAgICBzdWJFbFN0eWxlLnNoYWRvd0JsdXIgPSB0b2tlblN0eWxlLnRleHRTaGFkb3dCbHVyIHx8IHN0eWxlLnRleHRTaGFkb3dCbHVyIHx8IDA7XG4gICAgICAgICAgICBzdWJFbFN0eWxlLnNoYWRvd0NvbG9yID0gdG9rZW5TdHlsZS50ZXh0U2hhZG93Q29sb3IgfHwgc3R5bGUudGV4dFNoYWRvd0NvbG9yIHx8ICd0cmFuc3BhcmVudCc7XG4gICAgICAgICAgICBzdWJFbFN0eWxlLnNoYWRvd09mZnNldFggPSB0b2tlblN0eWxlLnRleHRTaGFkb3dPZmZzZXRYIHx8IHN0eWxlLnRleHRTaGFkb3dPZmZzZXRYIHx8IDA7XG4gICAgICAgICAgICBzdWJFbFN0eWxlLnNoYWRvd09mZnNldFkgPSB0b2tlblN0eWxlLnRleHRTaGFkb3dPZmZzZXRZIHx8IHN0eWxlLnRleHRTaGFkb3dPZmZzZXRZIHx8IDA7XG4gICAgICAgIH1cbiAgICAgICAgc3ViRWxTdHlsZS50ZXh0QWxpZ24gPSB0ZXh0QWxpZ247XG4gICAgICAgIHN1YkVsU3R5bGUudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XG4gICAgICAgIHN1YkVsU3R5bGUuZm9udCA9IHRva2VuLmZvbnQgfHwgREVGQVVMVF9GT05UO1xuICAgICAgICBzdWJFbFN0eWxlLm9wYWNpdHkgPSByZXRyaWV2ZTModG9rZW5TdHlsZS5vcGFjaXR5LCBzdHlsZS5vcGFjaXR5LCAxKTtcbiAgICAgICAgc2V0U2VwYXJhdGVGb250KHN1YkVsU3R5bGUsIHRva2VuU3R5bGUpO1xuICAgICAgICBpZiAodGV4dFN0cm9rZSkge1xuICAgICAgICAgICAgc3ViRWxTdHlsZS5saW5lV2lkdGggPSByZXRyaWV2ZTModG9rZW5TdHlsZS5saW5lV2lkdGgsIHN0eWxlLmxpbmVXaWR0aCwgZGVmYXVsdExpbmVXaWR0aCk7XG4gICAgICAgICAgICBzdWJFbFN0eWxlLmxpbmVEYXNoID0gcmV0cmlldmUyKHRva2VuU3R5bGUubGluZURhc2gsIHN0eWxlLmxpbmVEYXNoKTtcbiAgICAgICAgICAgIHN1YkVsU3R5bGUubGluZURhc2hPZmZzZXQgPSBzdHlsZS5saW5lRGFzaE9mZnNldCB8fCAwO1xuICAgICAgICAgICAgc3ViRWxTdHlsZS5zdHJva2UgPSB0ZXh0U3Ryb2tlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0ZXh0RmlsbCkge1xuICAgICAgICAgICAgc3ViRWxTdHlsZS5maWxsID0gdGV4dEZpbGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRleHRXaWR0aCA9IHRva2VuLmNvbnRlbnRXaWR0aDtcbiAgICAgICAgdmFyIHRleHRIZWlnaHQgPSB0b2tlbi5jb250ZW50SGVpZ2h0O1xuICAgICAgICBlbC5zZXRCb3VuZGluZ1JlY3QobmV3IEJvdW5kaW5nUmVjdChhZGp1c3RUZXh0WChzdWJFbFN0eWxlLngsIHRleHRXaWR0aCwgc3ViRWxTdHlsZS50ZXh0QWxpZ24pLCBhZGp1c3RUZXh0WShzdWJFbFN0eWxlLnksIHRleHRIZWlnaHQsIHN1YkVsU3R5bGUudGV4dEJhc2VsaW5lKSwgdGV4dFdpZHRoLCB0ZXh0SGVpZ2h0KSk7XG4gICAgfTtcbiAgICBaUlRleHQucHJvdG90eXBlLl9yZW5kZXJCYWNrZ3JvdW5kID0gZnVuY3Rpb24gKHN0eWxlLCB0b3BTdHlsZSwgeCwgeSwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICB2YXIgdGV4dEJhY2tncm91bmRDb2xvciA9IHN0eWxlLmJhY2tncm91bmRDb2xvcjtcbiAgICAgICAgdmFyIHRleHRCb3JkZXJXaWR0aCA9IHN0eWxlLmJvcmRlcldpZHRoO1xuICAgICAgICB2YXIgdGV4dEJvcmRlckNvbG9yID0gc3R5bGUuYm9yZGVyQ29sb3I7XG4gICAgICAgIHZhciBpc0ltYWdlQmcgPSB0ZXh0QmFja2dyb3VuZENvbG9yICYmIHRleHRCYWNrZ3JvdW5kQ29sb3IuaW1hZ2U7XG4gICAgICAgIHZhciBpc1BsYWluT3JHcmFkaWVudEJnID0gdGV4dEJhY2tncm91bmRDb2xvciAmJiAhaXNJbWFnZUJnO1xuICAgICAgICB2YXIgdGV4dEJvcmRlclJhZGl1cyA9IHN0eWxlLmJvcmRlclJhZGl1cztcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgcmVjdEVsO1xuICAgICAgICB2YXIgaW1nRWw7XG4gICAgICAgIGlmIChpc1BsYWluT3JHcmFkaWVudEJnIHx8IHN0eWxlLmxpbmVIZWlnaHQgfHwgKHRleHRCb3JkZXJXaWR0aCAmJiB0ZXh0Qm9yZGVyQ29sb3IpKSB7XG4gICAgICAgICAgICByZWN0RWwgPSB0aGlzLl9nZXRPckNyZWF0ZUNoaWxkKFJlY3QpO1xuICAgICAgICAgICAgcmVjdEVsLnVzZVN0eWxlKHJlY3RFbC5jcmVhdGVTdHlsZSgpKTtcbiAgICAgICAgICAgIHJlY3RFbC5zdHlsZS5maWxsID0gbnVsbDtcbiAgICAgICAgICAgIHZhciByZWN0U2hhcGUgPSByZWN0RWwuc2hhcGU7XG4gICAgICAgICAgICByZWN0U2hhcGUueCA9IHg7XG4gICAgICAgICAgICByZWN0U2hhcGUueSA9IHk7XG4gICAgICAgICAgICByZWN0U2hhcGUud2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIHJlY3RTaGFwZS5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICByZWN0U2hhcGUuciA9IHRleHRCb3JkZXJSYWRpdXM7XG4gICAgICAgICAgICByZWN0RWwuZGlydHlTaGFwZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1BsYWluT3JHcmFkaWVudEJnKSB7XG4gICAgICAgICAgICB2YXIgcmVjdFN0eWxlID0gcmVjdEVsLnN0eWxlO1xuICAgICAgICAgICAgcmVjdFN0eWxlLmZpbGwgPSB0ZXh0QmFja2dyb3VuZENvbG9yIHx8IG51bGw7XG4gICAgICAgICAgICByZWN0U3R5bGUuZmlsbE9wYWNpdHkgPSByZXRyaWV2ZTIoc3R5bGUuZmlsbE9wYWNpdHksIDEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzSW1hZ2VCZykge1xuICAgICAgICAgICAgaW1nRWwgPSB0aGlzLl9nZXRPckNyZWF0ZUNoaWxkKFpSSW1hZ2UpO1xuICAgICAgICAgICAgaW1nRWwub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNlbGYuZGlydHlTdHlsZSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBpbWdTdHlsZSA9IGltZ0VsLnN0eWxlO1xuICAgICAgICAgICAgaW1nU3R5bGUuaW1hZ2UgPSB0ZXh0QmFja2dyb3VuZENvbG9yLmltYWdlO1xuICAgICAgICAgICAgaW1nU3R5bGUueCA9IHg7XG4gICAgICAgICAgICBpbWdTdHlsZS55ID0geTtcbiAgICAgICAgICAgIGltZ1N0eWxlLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICBpbWdTdHlsZS5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRleHRCb3JkZXJXaWR0aCAmJiB0ZXh0Qm9yZGVyQ29sb3IpIHtcbiAgICAgICAgICAgIHZhciByZWN0U3R5bGUgPSByZWN0RWwuc3R5bGU7XG4gICAgICAgICAgICByZWN0U3R5bGUubGluZVdpZHRoID0gdGV4dEJvcmRlcldpZHRoO1xuICAgICAgICAgICAgcmVjdFN0eWxlLnN0cm9rZSA9IHRleHRCb3JkZXJDb2xvcjtcbiAgICAgICAgICAgIHJlY3RTdHlsZS5zdHJva2VPcGFjaXR5ID0gcmV0cmlldmUyKHN0eWxlLnN0cm9rZU9wYWNpdHksIDEpO1xuICAgICAgICAgICAgcmVjdFN0eWxlLmxpbmVEYXNoID0gc3R5bGUuYm9yZGVyRGFzaDtcbiAgICAgICAgICAgIHJlY3RTdHlsZS5saW5lRGFzaE9mZnNldCA9IHN0eWxlLmJvcmRlckRhc2hPZmZzZXQgfHwgMDtcbiAgICAgICAgICAgIHJlY3RFbC5zdHJva2VDb250YWluVGhyZXNob2xkID0gMDtcbiAgICAgICAgICAgIGlmIChyZWN0RWwuaGFzRmlsbCgpICYmIHJlY3RFbC5oYXNTdHJva2UoKSkge1xuICAgICAgICAgICAgICAgIHJlY3RTdHlsZS5zdHJva2VGaXJzdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVjdFN0eWxlLmxpbmVXaWR0aCAqPSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBjb21tb25TdHlsZSA9IChyZWN0RWwgfHwgaW1nRWwpLnN0eWxlO1xuICAgICAgICBjb21tb25TdHlsZS5zaGFkb3dCbHVyID0gc3R5bGUuc2hhZG93Qmx1ciB8fCAwO1xuICAgICAgICBjb21tb25TdHlsZS5zaGFkb3dDb2xvciA9IHN0eWxlLnNoYWRvd0NvbG9yIHx8ICd0cmFuc3BhcmVudCc7XG4gICAgICAgIGNvbW1vblN0eWxlLnNoYWRvd09mZnNldFggPSBzdHlsZS5zaGFkb3dPZmZzZXRYIHx8IDA7XG4gICAgICAgIGNvbW1vblN0eWxlLnNoYWRvd09mZnNldFkgPSBzdHlsZS5zaGFkb3dPZmZzZXRZIHx8IDA7XG4gICAgICAgIGNvbW1vblN0eWxlLm9wYWNpdHkgPSByZXRyaWV2ZTMoc3R5bGUub3BhY2l0eSwgdG9wU3R5bGUub3BhY2l0eSwgMSk7XG4gICAgfTtcbiAgICBaUlRleHQubWFrZUZvbnQgPSBmdW5jdGlvbiAoc3R5bGUpIHtcbiAgICAgICAgdmFyIGZvbnQgPSAnJztcbiAgICAgICAgaWYgKGhhc1NlcGFyYXRlRm9udChzdHlsZSkpIHtcbiAgICAgICAgICAgIGZvbnQgPSBbXG4gICAgICAgICAgICAgICAgc3R5bGUuZm9udFN0eWxlLFxuICAgICAgICAgICAgICAgIHN0eWxlLmZvbnRXZWlnaHQsXG4gICAgICAgICAgICAgICAgcGFyc2VGb250U2l6ZShzdHlsZS5mb250U2l6ZSksXG4gICAgICAgICAgICAgICAgc3R5bGUuZm9udEZhbWlseSB8fCAnc2Fucy1zZXJpZidcbiAgICAgICAgICAgIF0uam9pbignICcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmb250ICYmIHRyaW0oZm9udCkgfHwgc3R5bGUudGV4dEZvbnQgfHwgc3R5bGUuZm9udDtcbiAgICB9O1xuICAgIHJldHVybiBaUlRleHQ7XG59KERpc3BsYXlhYmxlKSk7XG52YXIgVkFMSURfVEVYVF9BTElHTiA9IHsgbGVmdDogdHJ1ZSwgcmlnaHQ6IDEsIGNlbnRlcjogMSB9O1xudmFyIFZBTElEX1RFWFRfVkVSVElDQUxfQUxJR04gPSB7IHRvcDogMSwgYm90dG9tOiAxLCBtaWRkbGU6IDEgfTtcbnZhciBGT05UX1BBUlRTID0gWydmb250U3R5bGUnLCAnZm9udFdlaWdodCcsICdmb250U2l6ZScsICdmb250RmFtaWx5J107XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VGb250U2l6ZShmb250U2l6ZSkge1xuICAgIGlmICh0eXBlb2YgZm9udFNpemUgPT09ICdzdHJpbmcnXG4gICAgICAgICYmIChmb250U2l6ZS5pbmRleE9mKCdweCcpICE9PSAtMVxuICAgICAgICAgICAgfHwgZm9udFNpemUuaW5kZXhPZigncmVtJykgIT09IC0xXG4gICAgICAgICAgICB8fCBmb250U2l6ZS5pbmRleE9mKCdlbScpICE9PSAtMSkpIHtcbiAgICAgICAgcmV0dXJuIGZvbnRTaXplO1xuICAgIH1cbiAgICBlbHNlIGlmICghaXNOYU4oK2ZvbnRTaXplKSkge1xuICAgICAgICByZXR1cm4gZm9udFNpemUgKyAncHgnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIERFRkFVTFRfRk9OVF9TSVpFICsgJ3B4JztcbiAgICB9XG59XG5mdW5jdGlvbiBzZXRTZXBhcmF0ZUZvbnQodGFyZ2V0U3R5bGUsIHNvdXJjZVN0eWxlKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBGT05UX1BBUlRTLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBmb250UHJvcCA9IEZPTlRfUEFSVFNbaV07XG4gICAgICAgIHZhciB2YWwgPSBzb3VyY2VTdHlsZVtmb250UHJvcF07XG4gICAgICAgIGlmICh2YWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGFyZ2V0U3R5bGVbZm9udFByb3BdID0gdmFsO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGhhc1NlcGFyYXRlRm9udChzdHlsZSkge1xuICAgIHJldHVybiBzdHlsZS5mb250U2l6ZSAhPSBudWxsIHx8IHN0eWxlLmZvbnRGYW1pbHkgfHwgc3R5bGUuZm9udFdlaWdodDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVUZXh0U3R5bGUoc3R5bGUpIHtcbiAgICBub3JtYWxpemVTdHlsZShzdHlsZSk7XG4gICAgZWFjaChzdHlsZS5yaWNoLCBub3JtYWxpemVTdHlsZSk7XG4gICAgcmV0dXJuIHN0eWxlO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplU3R5bGUoc3R5bGUpIHtcbiAgICBpZiAoc3R5bGUpIHtcbiAgICAgICAgc3R5bGUuZm9udCA9IFpSVGV4dC5tYWtlRm9udChzdHlsZSk7XG4gICAgICAgIHZhciB0ZXh0QWxpZ24gPSBzdHlsZS5hbGlnbjtcbiAgICAgICAgdGV4dEFsaWduID09PSAnbWlkZGxlJyAmJiAodGV4dEFsaWduID0gJ2NlbnRlcicpO1xuICAgICAgICBzdHlsZS5hbGlnbiA9ICh0ZXh0QWxpZ24gPT0gbnVsbCB8fCBWQUxJRF9URVhUX0FMSUdOW3RleHRBbGlnbl0pID8gdGV4dEFsaWduIDogJ2xlZnQnO1xuICAgICAgICB2YXIgdmVydGljYWxBbGlnbiA9IHN0eWxlLnZlcnRpY2FsQWxpZ247XG4gICAgICAgIHZlcnRpY2FsQWxpZ24gPT09ICdjZW50ZXInICYmICh2ZXJ0aWNhbEFsaWduID0gJ21pZGRsZScpO1xuICAgICAgICBzdHlsZS52ZXJ0aWNhbEFsaWduID0gKHZlcnRpY2FsQWxpZ24gPT0gbnVsbCB8fCBWQUxJRF9URVhUX1ZFUlRJQ0FMX0FMSUdOW3ZlcnRpY2FsQWxpZ25dKSA/IHZlcnRpY2FsQWxpZ24gOiAndG9wJztcbiAgICAgICAgdmFyIHRleHRQYWRkaW5nID0gc3R5bGUucGFkZGluZztcbiAgICAgICAgaWYgKHRleHRQYWRkaW5nKSB7XG4gICAgICAgICAgICBzdHlsZS5wYWRkaW5nID0gbm9ybWFsaXplQ3NzQXJyYXkoc3R5bGUucGFkZGluZyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBnZXRTdHJva2Uoc3Ryb2tlLCBsaW5lV2lkdGgpIHtcbiAgICByZXR1cm4gKHN0cm9rZSA9PSBudWxsIHx8IGxpbmVXaWR0aCA8PSAwIHx8IHN0cm9rZSA9PT0gJ3RyYW5zcGFyZW50JyB8fCBzdHJva2UgPT09ICdub25lJylcbiAgICAgICAgPyBudWxsXG4gICAgICAgIDogKHN0cm9rZS5pbWFnZSB8fCBzdHJva2UuY29sb3JTdG9wcylcbiAgICAgICAgICAgID8gJyMwMDAnXG4gICAgICAgICAgICA6IHN0cm9rZTtcbn1cbmZ1bmN0aW9uIGdldEZpbGwoZmlsbCkge1xuICAgIHJldHVybiAoZmlsbCA9PSBudWxsIHx8IGZpbGwgPT09ICdub25lJylcbiAgICAgICAgPyBudWxsXG4gICAgICAgIDogKGZpbGwuaW1hZ2UgfHwgZmlsbC5jb2xvclN0b3BzKVxuICAgICAgICAgICAgPyAnIzAwMCdcbiAgICAgICAgICAgIDogZmlsbDtcbn1cbmZ1bmN0aW9uIGdldFRleHRYRm9yUGFkZGluZyh4LCB0ZXh0QWxpZ24sIHRleHRQYWRkaW5nKSB7XG4gICAgcmV0dXJuIHRleHRBbGlnbiA9PT0gJ3JpZ2h0J1xuICAgICAgICA/ICh4IC0gdGV4dFBhZGRpbmdbMV0pXG4gICAgICAgIDogdGV4dEFsaWduID09PSAnY2VudGVyJ1xuICAgICAgICAgICAgPyAoeCArIHRleHRQYWRkaW5nWzNdIC8gMiAtIHRleHRQYWRkaW5nWzFdIC8gMilcbiAgICAgICAgICAgIDogKHggKyB0ZXh0UGFkZGluZ1szXSk7XG59XG5mdW5jdGlvbiBnZXRTdHlsZVRleHQoc3R5bGUpIHtcbiAgICB2YXIgdGV4dCA9IHN0eWxlLnRleHQ7XG4gICAgdGV4dCAhPSBudWxsICYmICh0ZXh0ICs9ICcnKTtcbiAgICByZXR1cm4gdGV4dDtcbn1cbmZ1bmN0aW9uIG5lZWREcmF3QmFja2dyb3VuZChzdHlsZSkge1xuICAgIHJldHVybiAhIShzdHlsZS5iYWNrZ3JvdW5kQ29sb3JcbiAgICAgICAgfHwgc3R5bGUubGluZUhlaWdodFxuICAgICAgICB8fCAoc3R5bGUuYm9yZGVyV2lkdGggJiYgc3R5bGUuYm9yZGVyQ29sb3IpKTtcbn1cbmV4cG9ydCBkZWZhdWx0IFpSVGV4dDtcbiIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgbWFrZUlubmVyIH0gZnJvbSAnLi9tb2RlbC5qcyc7XG5leHBvcnQgdmFyIGdldEVDRGF0YSA9IG1ha2VJbm5lcigpO1xuZXhwb3J0IHZhciBzZXRDb21tb25FQ0RhdGEgPSBmdW5jdGlvbiAoc2VyaWVzSW5kZXgsIGRhdGFUeXBlLCBkYXRhSWR4LCBlbCkge1xuICBpZiAoZWwpIHtcbiAgICB2YXIgZWNEYXRhID0gZ2V0RUNEYXRhKGVsKTsgLy8gQWRkIGRhdGEgaW5kZXggYW5kIHNlcmllcyBpbmRleCBmb3IgaW5kZXhpbmcgdGhlIGRhdGEgYnkgZWxlbWVudFxuICAgIC8vIFVzZWZ1bCBpbiB0b29sdGlwXG5cbiAgICBlY0RhdGEuZGF0YUluZGV4ID0gZGF0YUlkeDtcbiAgICBlY0RhdGEuZGF0YVR5cGUgPSBkYXRhVHlwZTtcbiAgICBlY0RhdGEuc2VyaWVzSW5kZXggPSBzZXJpZXNJbmRleDsgLy8gVE9ETzogbm90IHN0b3JlIGRhdGFJbmRleCBvbiBjaGlsZHJlbi5cblxuICAgIGlmIChlbC50eXBlID09PSAnZ3JvdXAnKSB7XG4gICAgICBlbC50cmF2ZXJzZShmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgdmFyIGNoaWxkRUNEYXRhID0gZ2V0RUNEYXRhKGNoaWxkKTtcbiAgICAgICAgY2hpbGRFQ0RhdGEuc2VyaWVzSW5kZXggPSBzZXJpZXNJbmRleDtcbiAgICAgICAgY2hpbGRFQ0RhdGEuZGF0YUluZGV4ID0gZGF0YUlkeDtcbiAgICAgICAgY2hpbGRFQ0RhdGEuZGF0YVR5cGUgPSBkYXRhVHlwZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTsiLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCBMUlUgZnJvbSAnenJlbmRlci9saWIvY29yZS9MUlUuanMnO1xuaW1wb3J0IHsgZXh0ZW5kLCBpbmRleE9mLCBpc0FycmF5TGlrZSwgaXNPYmplY3QsIGtleXMsIGlzQXJyYXksIGVhY2gsIGlzU3RyaW5nLCBpc0dyYWRpZW50T2JqZWN0LCBtYXAgfSBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0IHsgZ2V0RUNEYXRhIH0gZnJvbSAnLi9pbm5lclN0b3JlLmpzJztcbmltcG9ydCAqIGFzIGNvbG9yVG9vbCBmcm9tICd6cmVuZGVyL2xpYi90b29sL2NvbG9yLmpzJztcbmltcG9ydCB7IHF1ZXJ5RGF0YUluZGV4LCBtYWtlSW5uZXIgfSBmcm9tICcuL21vZGVsLmpzJztcbmltcG9ydCBQYXRoIGZyb20gJ3pyZW5kZXIvbGliL2dyYXBoaWMvUGF0aC5qcyc7XG5pbXBvcnQgeyBlcnJvciB9IGZyb20gJy4vbG9nLmpzJzsgLy8gUmVzZXJ2ZSAwIGFzIGRlZmF1bHQuXG5cbnZhciBfaGlnaGxpZ2h0TmV4dERpZ2l0ID0gMTtcbnZhciBfaGlnaGxpZ2h0S2V5TWFwID0ge307XG52YXIgZ2V0U2F2ZWRTdGF0ZXMgPSBtYWtlSW5uZXIoKTtcbnZhciBnZXRDb21wb25lbnRTdGF0ZXMgPSBtYWtlSW5uZXIoKTtcbmV4cG9ydCB2YXIgSE9WRVJfU1RBVEVfTk9STUFMID0gMDtcbmV4cG9ydCB2YXIgSE9WRVJfU1RBVEVfQkxVUiA9IDE7XG5leHBvcnQgdmFyIEhPVkVSX1NUQVRFX0VNUEhBU0lTID0gMjtcbmV4cG9ydCB2YXIgU1BFQ0lBTF9TVEFURVMgPSBbJ2VtcGhhc2lzJywgJ2JsdXInLCAnc2VsZWN0J107XG5leHBvcnQgdmFyIERJU1BMQVlfU1RBVEVTID0gWydub3JtYWwnLCAnZW1waGFzaXMnLCAnYmx1cicsICdzZWxlY3QnXTtcbmV4cG9ydCB2YXIgWjJfRU1QSEFTSVNfTElGVCA9IDEwO1xuZXhwb3J0IHZhciBaMl9TRUxFQ1RfTElGVCA9IDk7XG5leHBvcnQgdmFyIEhJR0hMSUdIVF9BQ1RJT05fVFlQRSA9ICdoaWdobGlnaHQnO1xuZXhwb3J0IHZhciBET1dOUExBWV9BQ1RJT05fVFlQRSA9ICdkb3ducGxheSc7XG5leHBvcnQgdmFyIFNFTEVDVF9BQ1RJT05fVFlQRSA9ICdzZWxlY3QnO1xuZXhwb3J0IHZhciBVTlNFTEVDVF9BQ1RJT05fVFlQRSA9ICd1bnNlbGVjdCc7XG5leHBvcnQgdmFyIFRPR0dMRV9TRUxFQ1RfQUNUSU9OX1RZUEUgPSAndG9nZ2xlU2VsZWN0JztcblxuZnVuY3Rpb24gaGFzRmlsbE9yU3Ryb2tlKGZpbGxPclN0cm9rZSkge1xuICByZXR1cm4gZmlsbE9yU3Ryb2tlICE9IG51bGwgJiYgZmlsbE9yU3Ryb2tlICE9PSAnbm9uZSc7XG59IC8vIE1vc3QgbGlmdGVkIGNvbG9yIGFyZSBkdXBsaWNhdGVkLlxuXG5cbnZhciBsaWZ0ZWRDb2xvckNhY2hlID0gbmV3IExSVSgxMDApO1xuXG5mdW5jdGlvbiBsaWZ0Q29sb3IoY29sb3IpIHtcbiAgaWYgKGlzU3RyaW5nKGNvbG9yKSkge1xuICAgIHZhciBsaWZ0ZWRDb2xvciA9IGxpZnRlZENvbG9yQ2FjaGUuZ2V0KGNvbG9yKTtcblxuICAgIGlmICghbGlmdGVkQ29sb3IpIHtcbiAgICAgIGxpZnRlZENvbG9yID0gY29sb3JUb29sLmxpZnQoY29sb3IsIC0wLjEpO1xuICAgICAgbGlmdGVkQ29sb3JDYWNoZS5wdXQoY29sb3IsIGxpZnRlZENvbG9yKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlmdGVkQ29sb3I7XG4gIH0gZWxzZSBpZiAoaXNHcmFkaWVudE9iamVjdChjb2xvcikpIHtcbiAgICB2YXIgcmV0ID0gZXh0ZW5kKHt9LCBjb2xvcik7XG4gICAgcmV0LmNvbG9yU3RvcHMgPSBtYXAoY29sb3IuY29sb3JTdG9wcywgZnVuY3Rpb24gKHN0b3ApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG9mZnNldDogc3RvcC5vZmZzZXQsXG4gICAgICAgIGNvbG9yOiBjb2xvclRvb2wubGlmdChzdG9wLmNvbG9yLCAtMC4xKVxuICAgICAgfTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmV0O1xuICB9IC8vIENoYW5nZSBub3RoaW5nLlxuXG5cbiAgcmV0dXJuIGNvbG9yO1xufVxuXG5mdW5jdGlvbiBkb0NoYW5nZUhvdmVyU3RhdGUoZWwsIHN0YXRlTmFtZSwgaG92ZXJTdGF0ZUVudW0pIHtcbiAgaWYgKGVsLm9uSG92ZXJTdGF0ZUNoYW5nZSAmJiAoZWwuaG92ZXJTdGF0ZSB8fCAwKSAhPT0gaG92ZXJTdGF0ZUVudW0pIHtcbiAgICBlbC5vbkhvdmVyU3RhdGVDaGFuZ2Uoc3RhdGVOYW1lKTtcbiAgfVxuXG4gIGVsLmhvdmVyU3RhdGUgPSBob3ZlclN0YXRlRW51bTtcbn1cblxuZnVuY3Rpb24gc2luZ2xlRW50ZXJFbXBoYXNpcyhlbCkge1xuICAvLyBPbmx5IG1hcmsgdGhlIGZsYWcuXG4gIC8vIFN0YXRlcyB3aWxsIGJlIGFwcGxpZWQgaW4gdGhlIGVjaGFydHMudHMgaW4gbmV4dCBmcmFtZS5cbiAgZG9DaGFuZ2VIb3ZlclN0YXRlKGVsLCAnZW1waGFzaXMnLCBIT1ZFUl9TVEFURV9FTVBIQVNJUyk7XG59XG5cbmZ1bmN0aW9uIHNpbmdsZUxlYXZlRW1waGFzaXMoZWwpIHtcbiAgLy8gT25seSBtYXJrIHRoZSBmbGFnLlxuICAvLyBTdGF0ZXMgd2lsbCBiZSBhcHBsaWVkIGluIHRoZSBlY2hhcnRzLnRzIGluIG5leHQgZnJhbWUuXG4gIGlmIChlbC5ob3ZlclN0YXRlID09PSBIT1ZFUl9TVEFURV9FTVBIQVNJUykge1xuICAgIGRvQ2hhbmdlSG92ZXJTdGF0ZShlbCwgJ25vcm1hbCcsIEhPVkVSX1NUQVRFX05PUk1BTCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2luZ2xlRW50ZXJCbHVyKGVsKSB7XG4gIGRvQ2hhbmdlSG92ZXJTdGF0ZShlbCwgJ2JsdXInLCBIT1ZFUl9TVEFURV9CTFVSKTtcbn1cblxuZnVuY3Rpb24gc2luZ2xlTGVhdmVCbHVyKGVsKSB7XG4gIGlmIChlbC5ob3ZlclN0YXRlID09PSBIT1ZFUl9TVEFURV9CTFVSKSB7XG4gICAgZG9DaGFuZ2VIb3ZlclN0YXRlKGVsLCAnbm9ybWFsJywgSE9WRVJfU1RBVEVfTk9STUFMKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzaW5nbGVFbnRlclNlbGVjdChlbCkge1xuICBlbC5zZWxlY3RlZCA9IHRydWU7XG59XG5cbmZ1bmN0aW9uIHNpbmdsZUxlYXZlU2VsZWN0KGVsKSB7XG4gIGVsLnNlbGVjdGVkID0gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUVsZW1lbnRTdGF0ZShlbCwgdXBkYXRlciwgY29tbW9uUGFyYW0pIHtcbiAgdXBkYXRlcihlbCwgY29tbW9uUGFyYW0pO1xufVxuXG5mdW5jdGlvbiB0cmF2ZXJzZVVwZGF0ZVN0YXRlKGVsLCB1cGRhdGVyLCBjb21tb25QYXJhbSkge1xuICB1cGRhdGVFbGVtZW50U3RhdGUoZWwsIHVwZGF0ZXIsIGNvbW1vblBhcmFtKTtcbiAgZWwuaXNHcm91cCAmJiBlbC50cmF2ZXJzZShmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICB1cGRhdGVFbGVtZW50U3RhdGUoY2hpbGQsIHVwZGF0ZXIsIGNvbW1vblBhcmFtKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRTdGF0ZXNGbGFnKGVsLCBzdGF0ZU5hbWUpIHtcbiAgc3dpdGNoIChzdGF0ZU5hbWUpIHtcbiAgICBjYXNlICdlbXBoYXNpcyc6XG4gICAgICBlbC5ob3ZlclN0YXRlID0gSE9WRVJfU1RBVEVfRU1QSEFTSVM7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ25vcm1hbCc6XG4gICAgICBlbC5ob3ZlclN0YXRlID0gSE9WRVJfU1RBVEVfTk9STUFMO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdibHVyJzpcbiAgICAgIGVsLmhvdmVyU3RhdGUgPSBIT1ZFUl9TVEFURV9CTFVSO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdzZWxlY3QnOlxuICAgICAgZWwuc2VsZWN0ZWQgPSB0cnVlO1xuICB9XG59XG4vKipcclxuICogSWYgd2UgcmV1c2UgZWxlbWVudHMgd2hlbiByZXJlbmRlci5cclxuICogRE9OJ1QgZm9yZ2V0IHRvIGNsZWFyU3RhdGVzIGJlZm9yZSB3ZSB1cGRhdGUgdGhlIHN0eWxlIGFuZCBzaGFwZS5cclxuICogT3Igd2UgbWF5IHVwZGF0ZSBvbiB0aGUgd3Jvbmcgc3RhdGUgaW5zdGVhZCBvZiBub3JtYWwgc3RhdGUuXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJTdGF0ZXMoZWwpIHtcbiAgaWYgKGVsLmlzR3JvdXApIHtcbiAgICBlbC50cmF2ZXJzZShmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgIGNoaWxkLmNsZWFyU3RhdGVzKCk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgZWwuY2xlYXJTdGF0ZXMoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRGcm9tU3RhdGVTdHlsZShlbCwgcHJvcHMsIHRvU3RhdGVOYW1lLCBkZWZhdWx0VmFsdWUpIHtcbiAgdmFyIHN0eWxlID0gZWwuc3R5bGU7XG4gIHZhciBmcm9tU3RhdGUgPSB7fTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHByb3BOYW1lID0gcHJvcHNbaV07XG4gICAgdmFyIHZhbCA9IHN0eWxlW3Byb3BOYW1lXTtcbiAgICBmcm9tU3RhdGVbcHJvcE5hbWVdID0gdmFsID09IG51bGwgPyBkZWZhdWx0VmFsdWUgJiYgZGVmYXVsdFZhbHVlW3Byb3BOYW1lXSA6IHZhbDtcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZWwuYW5pbWF0b3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGFuaW1hdG9yID0gZWwuYW5pbWF0b3JzW2ldO1xuXG4gICAgaWYgKGFuaW1hdG9yLl9fZnJvbVN0YXRlVHJhbnNpdGlvbiAvLyBEb24ndCBjb25zaWRlciB0aGUgYW5pbWF0aW9uIHRvIGVtcGhhc2lzIHN0YXRlLlxuICAgICYmIGFuaW1hdG9yLl9fZnJvbVN0YXRlVHJhbnNpdGlvbi5pbmRleE9mKHRvU3RhdGVOYW1lKSA8IDAgJiYgYW5pbWF0b3IudGFyZ2V0TmFtZSA9PT0gJ3N0eWxlJykge1xuICAgICAgYW5pbWF0b3Iuc2F2ZVRvKGZyb21TdGF0ZSwgcHJvcHMpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmcm9tU3RhdGU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUVtcGhhc2lzRGVmYXVsdFN0YXRlKGVsLCBzdGF0ZU5hbWUsIHRhcmdldFN0YXRlcywgc3RhdGUpIHtcbiAgdmFyIGhhc1NlbGVjdCA9IHRhcmdldFN0YXRlcyAmJiBpbmRleE9mKHRhcmdldFN0YXRlcywgJ3NlbGVjdCcpID49IDA7XG4gIHZhciBjbG9uZWQgPSBmYWxzZTtcblxuICBpZiAoZWwgaW5zdGFuY2VvZiBQYXRoKSB7XG4gICAgdmFyIHN0b3JlID0gZ2V0U2F2ZWRTdGF0ZXMoZWwpO1xuICAgIHZhciBmcm9tRmlsbCA9IGhhc1NlbGVjdCA/IHN0b3JlLnNlbGVjdEZpbGwgfHwgc3RvcmUubm9ybWFsRmlsbCA6IHN0b3JlLm5vcm1hbEZpbGw7XG4gICAgdmFyIGZyb21TdHJva2UgPSBoYXNTZWxlY3QgPyBzdG9yZS5zZWxlY3RTdHJva2UgfHwgc3RvcmUubm9ybWFsU3Ryb2tlIDogc3RvcmUubm9ybWFsU3Ryb2tlO1xuXG4gICAgaWYgKGhhc0ZpbGxPclN0cm9rZShmcm9tRmlsbCkgfHwgaGFzRmlsbE9yU3Ryb2tlKGZyb21TdHJva2UpKSB7XG4gICAgICBzdGF0ZSA9IHN0YXRlIHx8IHt9O1xuICAgICAgdmFyIGVtcGhhc2lzU3R5bGUgPSBzdGF0ZS5zdHlsZSB8fCB7fTsgLy8gaW5oZXJpdCBjYXNlXG5cbiAgICAgIGlmIChlbXBoYXNpc1N0eWxlLmZpbGwgPT09ICdpbmhlcml0Jykge1xuICAgICAgICBjbG9uZWQgPSB0cnVlO1xuICAgICAgICBzdGF0ZSA9IGV4dGVuZCh7fSwgc3RhdGUpO1xuICAgICAgICBlbXBoYXNpc1N0eWxlID0gZXh0ZW5kKHt9LCBlbXBoYXNpc1N0eWxlKTtcbiAgICAgICAgZW1waGFzaXNTdHlsZS5maWxsID0gZnJvbUZpbGw7XG4gICAgICB9IC8vIEFwcGx5IGRlZmF1bHQgY29sb3IgbGlmdFxuICAgICAgZWxzZSBpZiAoIWhhc0ZpbGxPclN0cm9rZShlbXBoYXNpc1N0eWxlLmZpbGwpICYmIGhhc0ZpbGxPclN0cm9rZShmcm9tRmlsbCkpIHtcbiAgICAgICAgICBjbG9uZWQgPSB0cnVlOyAvLyBOb3QgbW9kaWZ5IHRoZSBvcmlnaW5hbCB2YWx1ZS5cblxuICAgICAgICAgIHN0YXRlID0gZXh0ZW5kKHt9LCBzdGF0ZSk7XG4gICAgICAgICAgZW1waGFzaXNTdHlsZSA9IGV4dGVuZCh7fSwgZW1waGFzaXNTdHlsZSk7IC8vIEFscmVhZHkgYmVpbmcgYXBwbGllZCAnZW1waGFzaXMnLiBET04nVCBsaWZ0IGNvbG9yIG11bHRpcGxlIHRpbWVzLlxuXG4gICAgICAgICAgZW1waGFzaXNTdHlsZS5maWxsID0gbGlmdENvbG9yKGZyb21GaWxsKTtcbiAgICAgICAgfSAvLyBOb3QgaGlnaGxpZ2h0IHN0cm9rZSBpZiBmaWxsIGhhcyBiZWVuIGhpZ2hsaWdodGVkLlxuICAgICAgICBlbHNlIGlmICghaGFzRmlsbE9yU3Ryb2tlKGVtcGhhc2lzU3R5bGUuc3Ryb2tlKSAmJiBoYXNGaWxsT3JTdHJva2UoZnJvbVN0cm9rZSkpIHtcbiAgICAgICAgICAgIGlmICghY2xvbmVkKSB7XG4gICAgICAgICAgICAgIHN0YXRlID0gZXh0ZW5kKHt9LCBzdGF0ZSk7XG4gICAgICAgICAgICAgIGVtcGhhc2lzU3R5bGUgPSBleHRlbmQoe30sIGVtcGhhc2lzU3R5bGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbXBoYXNpc1N0eWxlLnN0cm9rZSA9IGxpZnRDb2xvcihmcm9tU3Ryb2tlKTtcbiAgICAgICAgICB9XG5cbiAgICAgIHN0YXRlLnN0eWxlID0gZW1waGFzaXNTdHlsZTtcbiAgICB9XG4gIH1cblxuICBpZiAoc3RhdGUpIHtcbiAgICAvLyBUT0RPIFNoYXJlIHdpdGggdGV4dENvbnRlbnQ/XG4gICAgaWYgKHN0YXRlLnoyID09IG51bGwpIHtcbiAgICAgIGlmICghY2xvbmVkKSB7XG4gICAgICAgIHN0YXRlID0gZXh0ZW5kKHt9LCBzdGF0ZSk7XG4gICAgICB9XG5cbiAgICAgIHZhciB6MkVtcGhhc2lzTGlmdCA9IGVsLnoyRW1waGFzaXNMaWZ0O1xuICAgICAgc3RhdGUuejIgPSBlbC56MiArICh6MkVtcGhhc2lzTGlmdCAhPSBudWxsID8gejJFbXBoYXNpc0xpZnQgOiBaMl9FTVBIQVNJU19MSUZUKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3RhdGU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVNlbGVjdERlZmF1bHRTdGF0ZShlbCwgc3RhdGVOYW1lLCBzdGF0ZSkge1xuICAvLyBjb25zdCBoYXNTZWxlY3QgPSBpbmRleE9mKGVsLmN1cnJlbnRTdGF0ZXMsIHN0YXRlTmFtZSkgPj0gMDtcbiAgaWYgKHN0YXRlKSB7XG4gICAgLy8gVE9ETyBTaGFyZSB3aXRoIHRleHRDb250ZW50P1xuICAgIGlmIChzdGF0ZS56MiA9PSBudWxsKSB7XG4gICAgICBzdGF0ZSA9IGV4dGVuZCh7fSwgc3RhdGUpO1xuICAgICAgdmFyIHoyU2VsZWN0TGlmdCA9IGVsLnoyU2VsZWN0TGlmdDtcbiAgICAgIHN0YXRlLnoyID0gZWwuejIgKyAoejJTZWxlY3RMaWZ0ICE9IG51bGwgPyB6MlNlbGVjdExpZnQgOiBaMl9TRUxFQ1RfTElGVCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHN0YXRlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVCbHVyRGVmYXVsdFN0YXRlKGVsLCBzdGF0ZU5hbWUsIHN0YXRlKSB7XG4gIHZhciBoYXNCbHVyID0gaW5kZXhPZihlbC5jdXJyZW50U3RhdGVzLCBzdGF0ZU5hbWUpID49IDA7XG4gIHZhciBjdXJyZW50T3BhY2l0eSA9IGVsLnN0eWxlLm9wYWNpdHk7XG4gIHZhciBmcm9tU3RhdGUgPSAhaGFzQmx1ciA/IGdldEZyb21TdGF0ZVN0eWxlKGVsLCBbJ29wYWNpdHknXSwgc3RhdGVOYW1lLCB7XG4gICAgb3BhY2l0eTogMVxuICB9KSA6IG51bGw7XG4gIHN0YXRlID0gc3RhdGUgfHwge307XG4gIHZhciBibHVyU3R5bGUgPSBzdGF0ZS5zdHlsZSB8fCB7fTtcblxuICBpZiAoYmx1clN0eWxlLm9wYWNpdHkgPT0gbnVsbCkge1xuICAgIC8vIGNsb25lIHN0YXRlXG4gICAgc3RhdGUgPSBleHRlbmQoe30sIHN0YXRlKTtcbiAgICBibHVyU3R5bGUgPSBleHRlbmQoe1xuICAgICAgLy8gQWxyZWFkeSBiZWluZyBhcHBsaWVkICdlbXBoYXNpcycuIERPTidUIG11bCBvcGFjaXR5IG11bHRpcGxlIHRpbWVzLlxuICAgICAgb3BhY2l0eTogaGFzQmx1ciA/IGN1cnJlbnRPcGFjaXR5IDogZnJvbVN0YXRlLm9wYWNpdHkgKiAwLjFcbiAgICB9LCBibHVyU3R5bGUpO1xuICAgIHN0YXRlLnN0eWxlID0gYmx1clN0eWxlO1xuICB9XG5cbiAgcmV0dXJuIHN0YXRlO1xufVxuXG5mdW5jdGlvbiBlbGVtZW50U3RhdGVQcm94eShzdGF0ZU5hbWUsIHRhcmdldFN0YXRlcykge1xuICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlc1tzdGF0ZU5hbWVdO1xuXG4gIGlmICh0aGlzLnN0eWxlKSB7XG4gICAgaWYgKHN0YXRlTmFtZSA9PT0gJ2VtcGhhc2lzJykge1xuICAgICAgcmV0dXJuIGNyZWF0ZUVtcGhhc2lzRGVmYXVsdFN0YXRlKHRoaXMsIHN0YXRlTmFtZSwgdGFyZ2V0U3RhdGVzLCBzdGF0ZSk7XG4gICAgfSBlbHNlIGlmIChzdGF0ZU5hbWUgPT09ICdibHVyJykge1xuICAgICAgcmV0dXJuIGNyZWF0ZUJsdXJEZWZhdWx0U3RhdGUodGhpcywgc3RhdGVOYW1lLCBzdGF0ZSk7XG4gICAgfSBlbHNlIGlmIChzdGF0ZU5hbWUgPT09ICdzZWxlY3QnKSB7XG4gICAgICByZXR1cm4gY3JlYXRlU2VsZWN0RGVmYXVsdFN0YXRlKHRoaXMsIHN0YXRlTmFtZSwgc3RhdGUpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzdGF0ZTtcbn1cbi8qKlxyXG4gKiBTZXQgaG92ZXIgc3R5bGUgKG5hbWVseSBcImVtcGhhc2lzIHN0eWxlXCIpIG9mIGVsZW1lbnQuXHJcbiAqIEBwYXJhbSBlbCBTaG91bGQgbm90IGJlIGB6cmVuZGVyL2dyYXBoaWMvR3JvdXBgLlxyXG4gKiBAcGFyYW0gZm9jdXMgJ3NlbGYnIHwgJ3NlbGZJblNlcmllcycgfCAnc2VyaWVzJ1xyXG4gKi9cblxuXG5leHBvcnQgZnVuY3Rpb24gc2V0RGVmYXVsdFN0YXRlUHJveHkoZWwpIHtcbiAgZWwuc3RhdGVQcm94eSA9IGVsZW1lbnRTdGF0ZVByb3h5O1xuICB2YXIgdGV4dENvbnRlbnQgPSBlbC5nZXRUZXh0Q29udGVudCgpO1xuICB2YXIgdGV4dEd1aWRlID0gZWwuZ2V0VGV4dEd1aWRlTGluZSgpO1xuXG4gIGlmICh0ZXh0Q29udGVudCkge1xuICAgIHRleHRDb250ZW50LnN0YXRlUHJveHkgPSBlbGVtZW50U3RhdGVQcm94eTtcbiAgfVxuXG4gIGlmICh0ZXh0R3VpZGUpIHtcbiAgICB0ZXh0R3VpZGUuc3RhdGVQcm94eSA9IGVsZW1lbnRTdGF0ZVByb3h5O1xuICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZW50ZXJFbXBoYXNpc1doZW5Nb3VzZU92ZXIoZWwsIGUpIHtcbiAgIXNob3VsZFNpbGVudChlbCwgZSkgLy8gXCJlbXBoYXNpc1wiIGV2ZW50IGhpZ2hsaWdodCBoYXMgaGlnaGVyIHByaW9yaXR5IHRoYW4gbW91c2UgaGlnaGxpZ2h0LlxuICAmJiAhZWwuX19oaWdoQnlPdXRlciAmJiB0cmF2ZXJzZVVwZGF0ZVN0YXRlKGVsLCBzaW5nbGVFbnRlckVtcGhhc2lzKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBsZWF2ZUVtcGhhc2lzV2hlbk1vdXNlT3V0KGVsLCBlKSB7XG4gICFzaG91bGRTaWxlbnQoZWwsIGUpIC8vIFwiZW1waGFzaXNcIiBldmVudCBoaWdobGlnaHQgaGFzIGhpZ2hlciBwcmlvcml0eSB0aGFuIG1vdXNlIGhpZ2hsaWdodC5cbiAgJiYgIWVsLl9faGlnaEJ5T3V0ZXIgJiYgdHJhdmVyc2VVcGRhdGVTdGF0ZShlbCwgc2luZ2xlTGVhdmVFbXBoYXNpcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gZW50ZXJFbXBoYXNpcyhlbCwgaGlnaGxpZ2h0RGlnaXQpIHtcbiAgZWwuX19oaWdoQnlPdXRlciB8PSAxIDw8IChoaWdobGlnaHREaWdpdCB8fCAwKTtcbiAgdHJhdmVyc2VVcGRhdGVTdGF0ZShlbCwgc2luZ2xlRW50ZXJFbXBoYXNpcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gbGVhdmVFbXBoYXNpcyhlbCwgaGlnaGxpZ2h0RGlnaXQpIHtcbiAgIShlbC5fX2hpZ2hCeU91dGVyICY9IH4oMSA8PCAoaGlnaGxpZ2h0RGlnaXQgfHwgMCkpKSAmJiB0cmF2ZXJzZVVwZGF0ZVN0YXRlKGVsLCBzaW5nbGVMZWF2ZUVtcGhhc2lzKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlbnRlckJsdXIoZWwpIHtcbiAgdHJhdmVyc2VVcGRhdGVTdGF0ZShlbCwgc2luZ2xlRW50ZXJCbHVyKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBsZWF2ZUJsdXIoZWwpIHtcbiAgdHJhdmVyc2VVcGRhdGVTdGF0ZShlbCwgc2luZ2xlTGVhdmVCbHVyKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlbnRlclNlbGVjdChlbCkge1xuICB0cmF2ZXJzZVVwZGF0ZVN0YXRlKGVsLCBzaW5nbGVFbnRlclNlbGVjdCk7XG59XG5leHBvcnQgZnVuY3Rpb24gbGVhdmVTZWxlY3QoZWwpIHtcbiAgdHJhdmVyc2VVcGRhdGVTdGF0ZShlbCwgc2luZ2xlTGVhdmVTZWxlY3QpO1xufVxuXG5mdW5jdGlvbiBzaG91bGRTaWxlbnQoZWwsIGUpIHtcbiAgcmV0dXJuIGVsLl9faGlnaERvd25TaWxlbnRPblRvdWNoICYmIGUuenJCeVRvdWNoO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWxsTGVhdmVCbHVyKGFwaSkge1xuICB2YXIgbW9kZWwgPSBhcGkuZ2V0TW9kZWwoKTtcbiAgdmFyIGxlYXZlQmx1cnJlZFNlcmllcyA9IFtdO1xuICB2YXIgYWxsQ29tcG9uZW50Vmlld3MgPSBbXTtcbiAgbW9kZWwuZWFjaENvbXBvbmVudChmdW5jdGlvbiAoY29tcG9uZW50VHlwZSwgY29tcG9uZW50TW9kZWwpIHtcbiAgICB2YXIgY29tcG9uZW50U3RhdGVzID0gZ2V0Q29tcG9uZW50U3RhdGVzKGNvbXBvbmVudE1vZGVsKTtcbiAgICB2YXIgaXNTZXJpZXMgPSBjb21wb25lbnRUeXBlID09PSAnc2VyaWVzJztcbiAgICB2YXIgdmlldyA9IGlzU2VyaWVzID8gYXBpLmdldFZpZXdPZlNlcmllc01vZGVsKGNvbXBvbmVudE1vZGVsKSA6IGFwaS5nZXRWaWV3T2ZDb21wb25lbnRNb2RlbChjb21wb25lbnRNb2RlbCk7XG4gICAgIWlzU2VyaWVzICYmIGFsbENvbXBvbmVudFZpZXdzLnB1c2godmlldyk7XG5cbiAgICBpZiAoY29tcG9uZW50U3RhdGVzLmlzQmx1cmVkKSB7XG4gICAgICAvLyBMZWF2ZSBibHVyIGFueXdheVxuICAgICAgdmlldy5ncm91cC50cmF2ZXJzZShmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgc2luZ2xlTGVhdmVCbHVyKGNoaWxkKTtcbiAgICAgIH0pO1xuICAgICAgaXNTZXJpZXMgJiYgbGVhdmVCbHVycmVkU2VyaWVzLnB1c2goY29tcG9uZW50TW9kZWwpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFN0YXRlcy5pc0JsdXJlZCA9IGZhbHNlO1xuICB9KTtcbiAgZWFjaChhbGxDb21wb25lbnRWaWV3cywgZnVuY3Rpb24gKHZpZXcpIHtcbiAgICBpZiAodmlldyAmJiB2aWV3LnRvZ2dsZUJsdXJTZXJpZXMpIHtcbiAgICAgIHZpZXcudG9nZ2xlQmx1clNlcmllcyhsZWF2ZUJsdXJyZWRTZXJpZXMsIGZhbHNlLCBtb2RlbCk7XG4gICAgfVxuICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBibHVyU2VyaWVzKHRhcmdldFNlcmllc0luZGV4LCBmb2N1cywgYmx1clNjb3BlLCBhcGkpIHtcbiAgdmFyIGVjTW9kZWwgPSBhcGkuZ2V0TW9kZWwoKTtcbiAgYmx1clNjb3BlID0gYmx1clNjb3BlIHx8ICdjb29yZGluYXRlU3lzdGVtJztcblxuICBmdW5jdGlvbiBsZWF2ZUJsdXJPZkluZGljZXMoZGF0YSwgZGF0YUluZGljZXMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGFJbmRpY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaXRlbUVsID0gZGF0YS5nZXRJdGVtR3JhcGhpY0VsKGRhdGFJbmRpY2VzW2ldKTtcbiAgICAgIGl0ZW1FbCAmJiBsZWF2ZUJsdXIoaXRlbUVsKTtcbiAgICB9XG4gIH1cblxuICBpZiAodGFyZ2V0U2VyaWVzSW5kZXggPT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICghZm9jdXMgfHwgZm9jdXMgPT09ICdub25lJykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciB0YXJnZXRTZXJpZXNNb2RlbCA9IGVjTW9kZWwuZ2V0U2VyaWVzQnlJbmRleCh0YXJnZXRTZXJpZXNJbmRleCk7XG4gIHZhciB0YXJnZXRDb29yZFN5cyA9IHRhcmdldFNlcmllc01vZGVsLmNvb3JkaW5hdGVTeXN0ZW07XG5cbiAgaWYgKHRhcmdldENvb3JkU3lzICYmIHRhcmdldENvb3JkU3lzLm1hc3Rlcikge1xuICAgIHRhcmdldENvb3JkU3lzID0gdGFyZ2V0Q29vcmRTeXMubWFzdGVyO1xuICB9XG5cbiAgdmFyIGJsdXJyZWRTZXJpZXMgPSBbXTtcbiAgZWNNb2RlbC5lYWNoU2VyaWVzKGZ1bmN0aW9uIChzZXJpZXNNb2RlbCkge1xuICAgIHZhciBzYW1lU2VyaWVzID0gdGFyZ2V0U2VyaWVzTW9kZWwgPT09IHNlcmllc01vZGVsO1xuICAgIHZhciBjb29yZFN5cyA9IHNlcmllc01vZGVsLmNvb3JkaW5hdGVTeXN0ZW07XG5cbiAgICBpZiAoY29vcmRTeXMgJiYgY29vcmRTeXMubWFzdGVyKSB7XG4gICAgICBjb29yZFN5cyA9IGNvb3JkU3lzLm1hc3RlcjtcbiAgICB9XG5cbiAgICB2YXIgc2FtZUNvb3JkU3lzID0gY29vcmRTeXMgJiYgdGFyZ2V0Q29vcmRTeXMgPyBjb29yZFN5cyA9PT0gdGFyZ2V0Q29vcmRTeXMgOiBzYW1lU2VyaWVzOyAvLyBJZiB0aGVyZSBpcyBubyBjb29yZGluYXRlIHN5c3RlbS4gdXNlIHNhbWVTZXJpZXMgaW5zdGVhZC5cblxuICAgIGlmICghKCAvLyBOb3QgYmx1ciBvdGhlciBzZXJpZXMgaWYgYmx1clNjb3BlIHNlcmllc1xuICAgIGJsdXJTY29wZSA9PT0gJ3NlcmllcycgJiYgIXNhbWVTZXJpZXMgLy8gTm90IGJsdXIgb3RoZXIgY29vcmRpbmF0ZSBzeXN0ZW0gaWYgYmx1clNjb3BlIGlzIGNvb3JkaW5hdGVTeXN0ZW1cbiAgICB8fCBibHVyU2NvcGUgPT09ICdjb29yZGluYXRlU3lzdGVtJyAmJiAhc2FtZUNvb3JkU3lzIC8vIE5vdCBibHVyIHNlbGYgc2VyaWVzIGlmIGZvY3VzIGlzIHNlcmllcy5cbiAgICB8fCBmb2N1cyA9PT0gJ3NlcmllcycgJiYgc2FtZVNlcmllcyAvLyBUT0RPIGJsdXJTY29wZTogY29vcmRpbmF0ZSBzeXN0ZW1cbiAgICApKSB7XG4gICAgICB2YXIgdmlldyA9IGFwaS5nZXRWaWV3T2ZTZXJpZXNNb2RlbChzZXJpZXNNb2RlbCk7XG4gICAgICB2aWV3Lmdyb3VwLnRyYXZlcnNlKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAvLyBGb3IgdGhlIGVsZW1lbnRzIHRoYXQgaGF2ZSBiZWVuIHRyaWdnZXJlZCBieSBvdGhlciBjb21wb25lbnRzLFxuICAgICAgICAvLyBhbmQgYXJlIHN0aWxsIHJlcXVpcmVkIHRvIGJlIGhpZ2hsaWdodGVkLFxuICAgICAgICAvLyBiZWNhdXNlIHRoZSBjdXJyZW50IGlzIGRpcmVjdGx5IGZvcmNlZCB0byBibHVyIHRoZSBlbGVtZW50LFxuICAgICAgICAvLyBpdCB3aWxsIGNhdXNlIHRoZSBmb2N1cyBzZWxmIHRvIGJlIHVuYWJsZSB0byBoaWdobGlnaHQsIHNvIHNraXAgdGhlIGJsdXIgb2YgdGhpcyBlbGVtZW50LlxuICAgICAgICBpZiAoY2hpbGQuX19oaWdoQnlPdXRlciAmJiBzYW1lU2VyaWVzICYmIGZvY3VzID09PSAnc2VsZicpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBzaW5nbGVFbnRlckJsdXIoY2hpbGQpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChpc0FycmF5TGlrZShmb2N1cykpIHtcbiAgICAgICAgbGVhdmVCbHVyT2ZJbmRpY2VzKHNlcmllc01vZGVsLmdldERhdGEoKSwgZm9jdXMpO1xuICAgICAgfSBlbHNlIGlmIChpc09iamVjdChmb2N1cykpIHtcbiAgICAgICAgdmFyIGRhdGFUeXBlcyA9IGtleXMoZm9jdXMpO1xuXG4gICAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGF0YVR5cGVzLmxlbmd0aDsgZCsrKSB7XG4gICAgICAgICAgbGVhdmVCbHVyT2ZJbmRpY2VzKHNlcmllc01vZGVsLmdldERhdGEoZGF0YVR5cGVzW2RdKSwgZm9jdXNbZGF0YVR5cGVzW2RdXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYmx1cnJlZFNlcmllcy5wdXNoKHNlcmllc01vZGVsKTtcbiAgICAgIGdldENvbXBvbmVudFN0YXRlcyhzZXJpZXNNb2RlbCkuaXNCbHVyZWQgPSB0cnVlO1xuICAgIH1cbiAgfSk7XG4gIGVjTW9kZWwuZWFjaENvbXBvbmVudChmdW5jdGlvbiAoY29tcG9uZW50VHlwZSwgY29tcG9uZW50TW9kZWwpIHtcbiAgICBpZiAoY29tcG9uZW50VHlwZSA9PT0gJ3NlcmllcycpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgdmlldyA9IGFwaS5nZXRWaWV3T2ZDb21wb25lbnRNb2RlbChjb21wb25lbnRNb2RlbCk7XG5cbiAgICBpZiAodmlldyAmJiB2aWV3LnRvZ2dsZUJsdXJTZXJpZXMpIHtcbiAgICAgIHZpZXcudG9nZ2xlQmx1clNlcmllcyhibHVycmVkU2VyaWVzLCB0cnVlLCBlY01vZGVsKTtcbiAgICB9XG4gIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGJsdXJDb21wb25lbnQoY29tcG9uZW50TWFpblR5cGUsIGNvbXBvbmVudEluZGV4LCBhcGkpIHtcbiAgaWYgKGNvbXBvbmVudE1haW5UeXBlID09IG51bGwgfHwgY29tcG9uZW50SW5kZXggPT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBjb21wb25lbnRNb2RlbCA9IGFwaS5nZXRNb2RlbCgpLmdldENvbXBvbmVudChjb21wb25lbnRNYWluVHlwZSwgY29tcG9uZW50SW5kZXgpO1xuXG4gIGlmICghY29tcG9uZW50TW9kZWwpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBnZXRDb21wb25lbnRTdGF0ZXMoY29tcG9uZW50TW9kZWwpLmlzQmx1cmVkID0gdHJ1ZTtcbiAgdmFyIHZpZXcgPSBhcGkuZ2V0Vmlld09mQ29tcG9uZW50TW9kZWwoY29tcG9uZW50TW9kZWwpO1xuXG4gIGlmICghdmlldyB8fCAhdmlldy5mb2N1c0JsdXJFbmFibGVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmlldy5ncm91cC50cmF2ZXJzZShmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICBzaW5nbGVFbnRlckJsdXIoY2hpbGQpO1xuICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBibHVyU2VyaWVzRnJvbUhpZ2hsaWdodFBheWxvYWQoc2VyaWVzTW9kZWwsIHBheWxvYWQsIGFwaSkge1xuICB2YXIgc2VyaWVzSW5kZXggPSBzZXJpZXNNb2RlbC5zZXJpZXNJbmRleDtcbiAgdmFyIGRhdGEgPSBzZXJpZXNNb2RlbC5nZXREYXRhKHBheWxvYWQuZGF0YVR5cGUpO1xuXG4gIGlmICghZGF0YSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBlcnJvcihcIlVua25vd24gZGF0YVR5cGUgXCIgKyBwYXlsb2FkLmRhdGFUeXBlKTtcbiAgICB9XG5cbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgZGF0YUluZGV4ID0gcXVlcnlEYXRhSW5kZXgoZGF0YSwgcGF5bG9hZCk7IC8vIFBpY2sgdGhlIGZpcnN0IG9uZSBpZiB0aGVyZSBpcyBtdWx0aXBsZS9ub25lIGV4aXN0cy5cblxuICBkYXRhSW5kZXggPSAoaXNBcnJheShkYXRhSW5kZXgpID8gZGF0YUluZGV4WzBdIDogZGF0YUluZGV4KSB8fCAwO1xuICB2YXIgZWwgPSBkYXRhLmdldEl0ZW1HcmFwaGljRWwoZGF0YUluZGV4KTtcblxuICBpZiAoIWVsKSB7XG4gICAgdmFyIGNvdW50ID0gZGF0YS5jb3VudCgpO1xuICAgIHZhciBjdXJyZW50ID0gMDsgLy8gSWYgZGF0YSBvbiBkYXRhSW5kZXggaXMgTmFOLlxuXG4gICAgd2hpbGUgKCFlbCAmJiBjdXJyZW50IDwgY291bnQpIHtcbiAgICAgIGVsID0gZGF0YS5nZXRJdGVtR3JhcGhpY0VsKGN1cnJlbnQrKyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKGVsKSB7XG4gICAgdmFyIGVjRGF0YSA9IGdldEVDRGF0YShlbCk7XG4gICAgYmx1clNlcmllcyhzZXJpZXNJbmRleCwgZWNEYXRhLmZvY3VzLCBlY0RhdGEuYmx1clNjb3BlLCBhcGkpO1xuICB9IGVsc2Uge1xuICAgIC8vIElmIHRoZXJlIGlzIG5vIGVsZW1lbnQgcHV0IG9uIHRoZSBkYXRhLiBUcnkgZ2V0dGluZyBpdCBmcm9tIHJhdyBvcHRpb25cbiAgICAvLyBUT0RPIFNob3VsZCBwdXQgaXQgb24gc2VyaWVzTW9kZWw/XG4gICAgdmFyIGZvY3VzXzEgPSBzZXJpZXNNb2RlbC5nZXQoWydlbXBoYXNpcycsICdmb2N1cyddKTtcbiAgICB2YXIgYmx1clNjb3BlID0gc2VyaWVzTW9kZWwuZ2V0KFsnZW1waGFzaXMnLCAnYmx1clNjb3BlJ10pO1xuXG4gICAgaWYgKGZvY3VzXzEgIT0gbnVsbCkge1xuICAgICAgYmx1clNlcmllcyhzZXJpZXNJbmRleCwgZm9jdXNfMSwgYmx1clNjb3BlLCBhcGkpO1xuICAgIH1cbiAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRDb21wb25lbnRIaWdoRG93bkRpc3BhdGNoZXJzKGNvbXBvbmVudE1haW5UeXBlLCBjb21wb25lbnRJbmRleCwgbmFtZSwgYXBpKSB7XG4gIHZhciByZXQgPSB7XG4gICAgZm9jdXNTZWxmOiBmYWxzZSxcbiAgICBkaXNwYXRjaGVyczogbnVsbFxuICB9O1xuXG4gIGlmIChjb21wb25lbnRNYWluVHlwZSA9PSBudWxsIHx8IGNvbXBvbmVudE1haW5UeXBlID09PSAnc2VyaWVzJyB8fCBjb21wb25lbnRJbmRleCA9PSBudWxsIHx8IG5hbWUgPT0gbnVsbCkge1xuICAgIHJldHVybiByZXQ7XG4gIH1cblxuICB2YXIgY29tcG9uZW50TW9kZWwgPSBhcGkuZ2V0TW9kZWwoKS5nZXRDb21wb25lbnQoY29tcG9uZW50TWFpblR5cGUsIGNvbXBvbmVudEluZGV4KTtcblxuICBpZiAoIWNvbXBvbmVudE1vZGVsKSB7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIHZhciB2aWV3ID0gYXBpLmdldFZpZXdPZkNvbXBvbmVudE1vZGVsKGNvbXBvbmVudE1vZGVsKTtcblxuICBpZiAoIXZpZXcgfHwgIXZpZXcuZmluZEhpZ2hEb3duRGlzcGF0Y2hlcnMpIHtcbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgdmFyIGRpc3BhdGNoZXJzID0gdmlldy5maW5kSGlnaERvd25EaXNwYXRjaGVycyhuYW1lKTsgLy8gQXQgcHJlc25ldCwgdGhlIGNvbXBvbmVudCAobGlrZSBHZW8pIG9ubHkgYmx1ciBpbnNpZGUgaXRzZWxmLlxuICAvLyBTbyB3ZSBkbyBub3QgdXNlIGBibHVyU2NvcGVgIGluIGNvbXBvbmVudC5cblxuICB2YXIgZm9jdXNTZWxmO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZGlzcGF0Y2hlcnMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhaXNIaWdoRG93bkRpc3BhdGNoZXIoZGlzcGF0Y2hlcnNbaV0pKSB7XG4gICAgICBlcnJvcigncGFyYW0gc2hvdWxkIGJlIGhpZ2hEb3duRGlzcGF0Y2hlcicpO1xuICAgIH1cblxuICAgIGlmIChnZXRFQ0RhdGEoZGlzcGF0Y2hlcnNbaV0pLmZvY3VzID09PSAnc2VsZicpIHtcbiAgICAgIGZvY3VzU2VsZiA9IHRydWU7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGZvY3VzU2VsZjogZm9jdXNTZWxmLFxuICAgIGRpc3BhdGNoZXJzOiBkaXNwYXRjaGVyc1xuICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUdsb2JhbE1vdXNlT3ZlckZvckhpZ2hEb3duKGRpc3BhdGNoZXIsIGUsIGFwaSkge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhaXNIaWdoRG93bkRpc3BhdGNoZXIoZGlzcGF0Y2hlcikpIHtcbiAgICBlcnJvcigncGFyYW0gc2hvdWxkIGJlIGhpZ2hEb3duRGlzcGF0Y2hlcicpO1xuICB9XG5cbiAgdmFyIGVjRGF0YSA9IGdldEVDRGF0YShkaXNwYXRjaGVyKTtcblxuICB2YXIgX2EgPSBmaW5kQ29tcG9uZW50SGlnaERvd25EaXNwYXRjaGVycyhlY0RhdGEuY29tcG9uZW50TWFpblR5cGUsIGVjRGF0YS5jb21wb25lbnRJbmRleCwgZWNEYXRhLmNvbXBvbmVudEhpZ2hEb3duTmFtZSwgYXBpKSxcbiAgICAgIGRpc3BhdGNoZXJzID0gX2EuZGlzcGF0Y2hlcnMsXG4gICAgICBmb2N1c1NlbGYgPSBfYS5mb2N1c1NlbGY7IC8vIElmIGBmaW5kSGlnaERvd25EaXNwYXRjaGVyc2AgaXMgc3VwcG9ydGVkIG9uIHRoZSBjb21wb25lbnQsXG4gIC8vIGhpZ2hsaWdodC9kb3ducGxheSBlbGVtZW50cyB3aXRoIHRoZSBzYW1lIG5hbWUuXG5cblxuICBpZiAoZGlzcGF0Y2hlcnMpIHtcbiAgICBpZiAoZm9jdXNTZWxmKSB7XG4gICAgICBibHVyQ29tcG9uZW50KGVjRGF0YS5jb21wb25lbnRNYWluVHlwZSwgZWNEYXRhLmNvbXBvbmVudEluZGV4LCBhcGkpO1xuICAgIH1cblxuICAgIGVhY2goZGlzcGF0Y2hlcnMsIGZ1bmN0aW9uIChkaXNwYXRjaGVyKSB7XG4gICAgICByZXR1cm4gZW50ZXJFbXBoYXNpc1doZW5Nb3VzZU92ZXIoZGlzcGF0Y2hlciwgZSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gVHJ5IGJsdXIgYWxsIGluIHRoZSByZWxhdGVkIHNlcmllcy4gVGhlbiBlbXBoYXNpcyB0aGUgaG92ZXJyZWQuXG4gICAgLy8gVE9ETy4gcHJvZ3Jlc3NpdmUgbW9kZS5cbiAgICBibHVyU2VyaWVzKGVjRGF0YS5zZXJpZXNJbmRleCwgZWNEYXRhLmZvY3VzLCBlY0RhdGEuYmx1clNjb3BlLCBhcGkpO1xuXG4gICAgaWYgKGVjRGF0YS5mb2N1cyA9PT0gJ3NlbGYnKSB7XG4gICAgICBibHVyQ29tcG9uZW50KGVjRGF0YS5jb21wb25lbnRNYWluVHlwZSwgZWNEYXRhLmNvbXBvbmVudEluZGV4LCBhcGkpO1xuICAgIH0gLy8gT3RoZXIgdGhhbiBzZXJpZXMsIGNvbXBvbmVudCB0aGF0IG5vdCBzdXBwb3J0IGBmaW5kSGlnaERvd25EaXNwYXRjaGVyYCB3aWxsXG4gICAgLy8gYWxzbyB1c2UgaXQuIEJ1dCBpbiB0aGlzIGNhc2UsIGhpZ2hsaWdodC9kb3ducGxheSBhcmUgb25seSBzdXBwb3J0ZWQgaW5cbiAgICAvLyBtb3VzZSBob3ZlciBidXQgbm90IGluIGRpc3BhdGNoQWN0aW9uLlxuXG5cbiAgICBlbnRlckVtcGhhc2lzV2hlbk1vdXNlT3ZlcihkaXNwYXRjaGVyLCBlKTtcbiAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUdsb2JhbE1vdXNlT3V0Rm9ySGlnaERvd24oZGlzcGF0Y2hlciwgZSwgYXBpKSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFpc0hpZ2hEb3duRGlzcGF0Y2hlcihkaXNwYXRjaGVyKSkge1xuICAgIGVycm9yKCdwYXJhbSBzaG91bGQgYmUgaGlnaERvd25EaXNwYXRjaGVyJyk7XG4gIH1cblxuICBhbGxMZWF2ZUJsdXIoYXBpKTtcbiAgdmFyIGVjRGF0YSA9IGdldEVDRGF0YShkaXNwYXRjaGVyKTtcbiAgdmFyIGRpc3BhdGNoZXJzID0gZmluZENvbXBvbmVudEhpZ2hEb3duRGlzcGF0Y2hlcnMoZWNEYXRhLmNvbXBvbmVudE1haW5UeXBlLCBlY0RhdGEuY29tcG9uZW50SW5kZXgsIGVjRGF0YS5jb21wb25lbnRIaWdoRG93bk5hbWUsIGFwaSkuZGlzcGF0Y2hlcnM7XG5cbiAgaWYgKGRpc3BhdGNoZXJzKSB7XG4gICAgZWFjaChkaXNwYXRjaGVycywgZnVuY3Rpb24gKGRpc3BhdGNoZXIpIHtcbiAgICAgIHJldHVybiBsZWF2ZUVtcGhhc2lzV2hlbk1vdXNlT3V0KGRpc3BhdGNoZXIsIGUpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGxlYXZlRW1waGFzaXNXaGVuTW91c2VPdXQoZGlzcGF0Y2hlciwgZSk7XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiB0b2dnbGVTZWxlY3Rpb25Gcm9tUGF5bG9hZChzZXJpZXNNb2RlbCwgcGF5bG9hZCwgYXBpKSB7XG4gIGlmICghaXNTZWxlY3RDaGFuZ2VQYXlsb2FkKHBheWxvYWQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGRhdGFUeXBlID0gcGF5bG9hZC5kYXRhVHlwZTtcbiAgdmFyIGRhdGEgPSBzZXJpZXNNb2RlbC5nZXREYXRhKGRhdGFUeXBlKTtcbiAgdmFyIGRhdGFJbmRleCA9IHF1ZXJ5RGF0YUluZGV4KGRhdGEsIHBheWxvYWQpO1xuXG4gIGlmICghaXNBcnJheShkYXRhSW5kZXgpKSB7XG4gICAgZGF0YUluZGV4ID0gW2RhdGFJbmRleF07XG4gIH1cblxuICBzZXJpZXNNb2RlbFtwYXlsb2FkLnR5cGUgPT09IFRPR0dMRV9TRUxFQ1RfQUNUSU9OX1RZUEUgPyAndG9nZ2xlU2VsZWN0JyA6IHBheWxvYWQudHlwZSA9PT0gU0VMRUNUX0FDVElPTl9UWVBFID8gJ3NlbGVjdCcgOiAndW5zZWxlY3QnXShkYXRhSW5kZXgsIGRhdGFUeXBlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVTZXJpZXNFbGVtZW50U2VsZWN0aW9uKHNlcmllc01vZGVsKSB7XG4gIHZhciBhbGxEYXRhID0gc2VyaWVzTW9kZWwuZ2V0QWxsRGF0YSgpO1xuICBlYWNoKGFsbERhdGEsIGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBkYXRhID0gX2EuZGF0YSxcbiAgICAgICAgdHlwZSA9IF9hLnR5cGU7XG4gICAgZGF0YS5lYWNoSXRlbUdyYXBoaWNFbChmdW5jdGlvbiAoZWwsIGlkeCkge1xuICAgICAgc2VyaWVzTW9kZWwuaXNTZWxlY3RlZChpZHgsIHR5cGUpID8gZW50ZXJTZWxlY3QoZWwpIDogbGVhdmVTZWxlY3QoZWwpO1xuICAgIH0pO1xuICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbGxTZWxlY3RlZEluZGljZXMoZWNNb2RlbCkge1xuICB2YXIgcmV0ID0gW107XG4gIGVjTW9kZWwuZWFjaFNlcmllcyhmdW5jdGlvbiAoc2VyaWVzTW9kZWwpIHtcbiAgICB2YXIgYWxsRGF0YSA9IHNlcmllc01vZGVsLmdldEFsbERhdGEoKTtcbiAgICBlYWNoKGFsbERhdGEsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgdmFyIGRhdGEgPSBfYS5kYXRhLFxuICAgICAgICAgIHR5cGUgPSBfYS50eXBlO1xuICAgICAgdmFyIGRhdGFJbmRpY2VzID0gc2VyaWVzTW9kZWwuZ2V0U2VsZWN0ZWREYXRhSW5kaWNlcygpO1xuXG4gICAgICBpZiAoZGF0YUluZGljZXMubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgaXRlbSA9IHtcbiAgICAgICAgICBkYXRhSW5kZXg6IGRhdGFJbmRpY2VzLFxuICAgICAgICAgIHNlcmllc0luZGV4OiBzZXJpZXNNb2RlbC5zZXJpZXNJbmRleFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmICh0eXBlICE9IG51bGwpIHtcbiAgICAgICAgICBpdGVtLmRhdGFUeXBlID0gdHlwZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldC5wdXNoKGl0ZW0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIHJldDtcbn1cbi8qKlxyXG4gKiBFbmFibGUgdGhlIGZ1bmN0aW9uIHRoYXQgbW91c2VvdmVyIHdpbGwgdHJpZ2dlciB0aGUgZW1waGFzaXMgc3RhdGUuXHJcbiAqXHJcbiAqIE5PVEU6XHJcbiAqIFRoaXMgZnVuY3Rpb24gc2hvdWxkIGJlIHVzZWQgb24gdGhlIGVsZW1lbnQgd2l0aCBkYXRhSW5kZXgsIHNlcmllc0luZGV4LlxyXG4gKlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZUhvdmVyRW1waGFzaXMoZWwsIGZvY3VzLCBibHVyU2NvcGUpIHtcbiAgc2V0QXNIaWdoRG93bkRpc3BhdGNoZXIoZWwsIHRydWUpO1xuICB0cmF2ZXJzZVVwZGF0ZVN0YXRlKGVsLCBzZXREZWZhdWx0U3RhdGVQcm94eSk7XG4gIGVuYWJsZUhvdmVyRm9jdXMoZWwsIGZvY3VzLCBibHVyU2NvcGUpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGVIb3ZlckVtcGhhc2lzKGVsKSB7XG4gIHNldEFzSGlnaERvd25EaXNwYXRjaGVyKGVsLCBmYWxzZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlSG92ZXJFbXBoYXNpcyhlbCwgZm9jdXMsIGJsdXJTY29wZSwgaXNEaXNhYmxlZCkge1xuICBpc0Rpc2FibGVkID8gZGlzYWJsZUhvdmVyRW1waGFzaXMoZWwpIDogZW5hYmxlSG92ZXJFbXBoYXNpcyhlbCwgZm9jdXMsIGJsdXJTY29wZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZW5hYmxlSG92ZXJGb2N1cyhlbCwgZm9jdXMsIGJsdXJTY29wZSkge1xuICB2YXIgZWNEYXRhID0gZ2V0RUNEYXRhKGVsKTtcblxuICBpZiAoZm9jdXMgIT0gbnVsbCkge1xuICAgIC8vIFRPRE8gZGF0YUluZGV4IG1heSBiZSBzZXQgYWZ0ZXIgdGhpcyBmdW5jdGlvbi4gVGhpcyBjaGVjayBpcyBub3QgdXNlZnVsLlxuICAgIC8vIGlmIChlY0RhdGEuZGF0YUluZGV4ID09IG51bGwpIHtcbiAgICAvLyAgICAgaWYgKF9fREVWX18pIHtcbiAgICAvLyAgICAgICAgIGNvbnNvbGUud2FybignZm9jdXMgY2FuIG9ubHkgYmVlbiBzZXQgb24gZWxlbWVudCB3aXRoIGRhdGFJbmRleCcpO1xuICAgIC8vICAgICB9XG4gICAgLy8gfVxuICAgIC8vIGVsc2Uge1xuICAgIGVjRGF0YS5mb2N1cyA9IGZvY3VzO1xuICAgIGVjRGF0YS5ibHVyU2NvcGUgPSBibHVyU2NvcGU7IC8vIH1cbiAgfSBlbHNlIGlmIChlY0RhdGEuZm9jdXMpIHtcbiAgICBlY0RhdGEuZm9jdXMgPSBudWxsO1xuICB9XG59XG52YXIgT1RIRVJfU1RBVEVTID0gWydlbXBoYXNpcycsICdibHVyJywgJ3NlbGVjdCddO1xudmFyIGRlZmF1bHRTdHlsZUdldHRlck1hcCA9IHtcbiAgaXRlbVN0eWxlOiAnZ2V0SXRlbVN0eWxlJyxcbiAgbGluZVN0eWxlOiAnZ2V0TGluZVN0eWxlJyxcbiAgYXJlYVN0eWxlOiAnZ2V0QXJlYVN0eWxlJ1xufTtcbi8qKlxyXG4gKiBTZXQgZW1waGFzaXMvYmx1ci9zZWxlY3RlZCBzdGF0ZXMgb2YgZWxlbWVudC5cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRTdGF0ZXNTdHlsZXNGcm9tTW9kZWwoZWwsIGl0ZW1Nb2RlbCwgc3R5bGVUeXBlLCAvLyBkZWZhdWx0IGl0ZW1TdHlsZVxuZ2V0dGVyKSB7XG4gIHN0eWxlVHlwZSA9IHN0eWxlVHlwZSB8fCAnaXRlbVN0eWxlJztcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IE9USEVSX1NUQVRFUy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzdGF0ZU5hbWUgPSBPVEhFUl9TVEFURVNbaV07XG4gICAgdmFyIG1vZGVsID0gaXRlbU1vZGVsLmdldE1vZGVsKFtzdGF0ZU5hbWUsIHN0eWxlVHlwZV0pO1xuICAgIHZhciBzdGF0ZSA9IGVsLmVuc3VyZVN0YXRlKHN0YXRlTmFtZSk7IC8vIExldCBpdCB0aHJvdyBlcnJvciBpZiBnZXR0ZXJUeXBlIGlzIG5vdCBmb3VuZC5cblxuICAgIHN0YXRlLnN0eWxlID0gZ2V0dGVyID8gZ2V0dGVyKG1vZGVsKSA6IG1vZGVsW2RlZmF1bHRTdHlsZUdldHRlck1hcFtzdHlsZVR5cGVdXSgpO1xuICB9XG59XG4vKipcclxuICpcclxuICogU2V0IGVsZW1lbnQgYXMgaGlnaGxpZ2h0IC8gZG93bnBsYXkgZGlzcGF0Y2hlci5cclxuICogSXQgd2lsbCBiZSBjaGVja2VkIHdoZW4gZWxlbWVudCByZWNlaXZlZCBtb3VzZW92ZXIgZXZlbnQgb3IgZnJvbSBoaWdobGlnaHQgYWN0aW9uLlxyXG4gKiBJdCdzIGluIGNoYW5nZSBvZiBhbGwgaGlnaGxpZ2h0L2Rvd25wbGF5IGJlaGF2aW9yIG9mIGl0J3MgY2hpbGRyZW4uXHJcbiAqXHJcbiAqIEBwYXJhbSBlbFxyXG4gKiBAcGFyYW0gZWwuaGlnaERvd25TaWxlbnRPblRvdWNoXHJcbiAqICAgICAgICBJbiB0b3VjaCBkZXZpY2UsIG1vdXNlb3ZlciBldmVudCB3aWxsIGJlIHRyaWdnZXIgb24gdG91Y2hzdGFydCBldmVudFxyXG4gKiAgICAgICAgKHNlZSBtb2R1bGU6enJlbmRlci9kb20vSGFuZGxlclByb3h5KS4gQnkgdGhpcyBtZWNoYW5pc20sIHdlIGNhblxyXG4gKiAgICAgICAgY29udmVuaWVudGx5IHVzZSBob3ZlclN0eWxlIHdoZW4gdGFwIG9uIHRvdWNoIHNjcmVlbiB3aXRob3V0IGFkZGl0aW9uYWxcclxuICogICAgICAgIGNvZGUgZm9yIGNvbXBhdGliaWxpdHkuXHJcbiAqICAgICAgICBCdXQgaWYgdGhlIGNoYXJ0L2NvbXBvbmVudCBoYXMgc2VsZWN0IGZlYXR1cmUsIHdoaWNoIHVzdWFsbHkgYWxzbyB1c2VcclxuICogICAgICAgIGhvdmVyU3R5bGUsIHRoZXJlIG1pZ2h0IGJlIGNvbmZsaWN0IGJldHdlZW4gJ3NlbGVjdC1oaWdobGlnaHQnIGFuZFxyXG4gKiAgICAgICAgJ2hvdmVyLWhpZ2hsaWdodCcgZXNwZWNpYWxseSB3aGVuIHJvYW0gaXMgZW5hYmxlZCAoc2VlIGdlbyBmb3IgZXhhbXBsZSkuXHJcbiAqICAgICAgICBJbiB0aGlzIGNhc2UsIGBoaWdoRG93blNpbGVudE9uVG91Y2hgIHNob3VsZCBiZSB1c2VkIHRvIGRpc2FibGVcclxuICogICAgICAgIGhvdmVyLWhpZ2hsaWdodCBvbiB0b3VjaCBkZXZpY2UuXHJcbiAqIEBwYXJhbSBhc0Rpc3BhdGNoZXIgSWYgYGZhbHNlYCwgZG8gbm90IHNldCBhcyBcImhpZ2hEb3duRGlzcGF0Y2hlclwiLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEFzSGlnaERvd25EaXNwYXRjaGVyKGVsLCBhc0Rpc3BhdGNoZXIpIHtcbiAgdmFyIGRpc2FibGUgPSBhc0Rpc3BhdGNoZXIgPT09IGZhbHNlO1xuICB2YXIgZXh0ZW5kZWRFbCA9IGVsOyAvLyBNYWtlIGBoaWdoRG93blNpbGVudE9uVG91Y2hgIGFuZCBgb25TdGF0ZUNoYW5nZWAgb25seSB3b3JrIGFmdGVyXG4gIC8vIGBzZXRBc0hpZ2hEb3duRGlzcGF0Y2hlcmAgY2FsbGVkLiBBdm9pZCBpdCBpcyBtb2RpZmllZCBieSB1c2VyIHVuZXhwZWN0ZWRseS5cblxuICBpZiAoZWwuaGlnaERvd25TaWxlbnRPblRvdWNoKSB7XG4gICAgZXh0ZW5kZWRFbC5fX2hpZ2hEb3duU2lsZW50T25Ub3VjaCA9IGVsLmhpZ2hEb3duU2lsZW50T25Ub3VjaDtcbiAgfSAvLyBTaW1wbGUgb3B0aW1pemUsIHNpbmNlIHRoaXMgbWV0aG9kIG1pZ2h0IGJlXG4gIC8vIGNhbGxlZCBmb3IgZWFjaCBlbGVtZW50cyBvZiBhIGdyb3VwIGluIHNvbWUgY2FzZXMuXG5cblxuICBpZiAoIWRpc2FibGUgfHwgZXh0ZW5kZWRFbC5fX2hpZ2hEb3duRGlzcGF0Y2hlcikge1xuICAgIC8vIEVtcGhhc2lzLCBub3JtYWwgY2FuIGJlIHRyaWdnZXJlZCBtYW51YWxseSBieSBBUEkgb3Igb3RoZXIgY29tcG9uZW50cyBsaWtlIGhvdmVyIGxpbmsuXG4gICAgLy8gZWxbbWV0aG9kXSgnZW1waGFzaXMnLCBvbkVsZW1lbnRFbXBoYXNpc0V2ZW50KVttZXRob2RdKCdub3JtYWwnLCBvbkVsZW1lbnROb3JtYWxFdmVudCk7XG4gICAgLy8gQWxzbyBrZWVwIHByZXZpb3VzIHJlY29yZC5cbiAgICBleHRlbmRlZEVsLl9faGlnaEJ5T3V0ZXIgPSBleHRlbmRlZEVsLl9faGlnaEJ5T3V0ZXIgfHwgMDtcbiAgICBleHRlbmRlZEVsLl9faGlnaERvd25EaXNwYXRjaGVyID0gIWRpc2FibGU7XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0hpZ2hEb3duRGlzcGF0Y2hlcihlbCkge1xuICByZXR1cm4gISEoZWwgJiYgZWwuX19oaWdoRG93bkRpc3BhdGNoZXIpO1xufVxuLyoqXHJcbiAqIEVuYWJsZSBjb21wb25lbnQgaGlnaGxpZ2h0L2Rvd25wbGF5IGZlYXR1cmVzOlxyXG4gKiArIGhvdmVyIGxpbmsgKHdpdGhpbiB0aGUgc2FtZSBuYW1lKVxyXG4gKiArIGZvY3VzIGJsdXIgaW4gY29tcG9uZW50XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZW5hYmxlQ29tcG9uZW50SGlnaERvd25GZWF0dXJlcyhlbCwgY29tcG9uZW50TW9kZWwsIGNvbXBvbmVudEhpZ2hEb3duTmFtZSkge1xuICB2YXIgZWNEYXRhID0gZ2V0RUNEYXRhKGVsKTtcbiAgZWNEYXRhLmNvbXBvbmVudE1haW5UeXBlID0gY29tcG9uZW50TW9kZWwubWFpblR5cGU7XG4gIGVjRGF0YS5jb21wb25lbnRJbmRleCA9IGNvbXBvbmVudE1vZGVsLmNvbXBvbmVudEluZGV4O1xuICBlY0RhdGEuY29tcG9uZW50SGlnaERvd25OYW1lID0gY29tcG9uZW50SGlnaERvd25OYW1lO1xufVxuLyoqXHJcbiAqIFN1cHBvcnQgaGlnaGxpZ2h0L2Rvd25wbGF5IHJlY29yZCBvbiBlYWNoIGVsZW1lbnRzLlxyXG4gKiBGb3IgdGhlIGNhc2U6IGhvdmVyIGhpZ2hsaWdodC9kb3ducGxheSAobGVnZW5kLCB2aXN1YWxNYXAsIC4uLikgYW5kXHJcbiAqIHVzZXIgdHJpZ2dlcmVkIGhpZ2hsaWdodC9kb3ducGxheSBzaG91bGQgbm90IGNvbmZsaWN0LlxyXG4gKiBPbmx5IGFsbCBvZiB0aGUgaGlnaGxpZ2h0RGlnaXQgY2xlYXJlZCwgcmV0dXJuIHRvIG5vcm1hbC5cclxuICogQHBhcmFtIHtzdHJpbmd9IGhpZ2hsaWdodEtleVxyXG4gKiBAcmV0dXJuIHtudW1iZXJ9IGhpZ2hsaWdodERpZ2l0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SGlnaGxpZ2h0RGlnaXQoaGlnaGxpZ2h0S2V5KSB7XG4gIHZhciBoaWdobGlnaHREaWdpdCA9IF9oaWdobGlnaHRLZXlNYXBbaGlnaGxpZ2h0S2V5XTtcblxuICBpZiAoaGlnaGxpZ2h0RGlnaXQgPT0gbnVsbCAmJiBfaGlnaGxpZ2h0TmV4dERpZ2l0IDw9IDMyKSB7XG4gICAgaGlnaGxpZ2h0RGlnaXQgPSBfaGlnaGxpZ2h0S2V5TWFwW2hpZ2hsaWdodEtleV0gPSBfaGlnaGxpZ2h0TmV4dERpZ2l0Kys7XG4gIH1cblxuICByZXR1cm4gaGlnaGxpZ2h0RGlnaXQ7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNTZWxlY3RDaGFuZ2VQYXlsb2FkKHBheWxvYWQpIHtcbiAgdmFyIHBheWxvYWRUeXBlID0gcGF5bG9hZC50eXBlO1xuICByZXR1cm4gcGF5bG9hZFR5cGUgPT09IFNFTEVDVF9BQ1RJT05fVFlQRSB8fCBwYXlsb2FkVHlwZSA9PT0gVU5TRUxFQ1RfQUNUSU9OX1RZUEUgfHwgcGF5bG9hZFR5cGUgPT09IFRPR0dMRV9TRUxFQ1RfQUNUSU9OX1RZUEU7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNIaWdoRG93blBheWxvYWQocGF5bG9hZCkge1xuICB2YXIgcGF5bG9hZFR5cGUgPSBwYXlsb2FkLnR5cGU7XG4gIHJldHVybiBwYXlsb2FkVHlwZSA9PT0gSElHSExJR0hUX0FDVElPTl9UWVBFIHx8IHBheWxvYWRUeXBlID09PSBET1dOUExBWV9BQ1RJT05fVFlQRTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzYXZlUGF0aFN0YXRlcyhlbCkge1xuICB2YXIgc3RvcmUgPSBnZXRTYXZlZFN0YXRlcyhlbCk7XG4gIHN0b3JlLm5vcm1hbEZpbGwgPSBlbC5zdHlsZS5maWxsO1xuICBzdG9yZS5ub3JtYWxTdHJva2UgPSBlbC5zdHlsZS5zdHJva2U7XG4gIHZhciBzZWxlY3RTdGF0ZSA9IGVsLnN0YXRlcy5zZWxlY3QgfHwge307XG4gIHN0b3JlLnNlbGVjdEZpbGwgPSBzZWxlY3RTdGF0ZS5zdHlsZSAmJiBzZWxlY3RTdGF0ZS5zdHlsZS5maWxsIHx8IG51bGw7XG4gIHN0b3JlLnNlbGVjdFN0cm9rZSA9IHNlbGVjdFN0YXRlLnN0eWxlICYmIHNlbGVjdFN0YXRlLnN0eWxlLnN0cm9rZSB8fCBudWxsO1xufSIsImltcG9ydCBQYXRoUHJveHkgZnJvbSAnLi4vY29yZS9QYXRoUHJveHkuanMnO1xuaW1wb3J0IHsgYXBwbHlUcmFuc2Zvcm0gYXMgdjJBcHBseVRyYW5zZm9ybSB9IGZyb20gJy4uL2NvcmUvdmVjdG9yLmpzJztcbnZhciBDTUQgPSBQYXRoUHJveHkuQ01EO1xudmFyIHBvaW50cyA9IFtbXSwgW10sIFtdXTtcbnZhciBtYXRoU3FydCA9IE1hdGguc3FydDtcbnZhciBtYXRoQXRhbjIgPSBNYXRoLmF0YW4yO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdHJhbnNmb3JtUGF0aChwYXRoLCBtKSB7XG4gICAgaWYgKCFtKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGRhdGEgPSBwYXRoLmRhdGE7XG4gICAgdmFyIGxlbiA9IHBhdGgubGVuKCk7XG4gICAgdmFyIGNtZDtcbiAgICB2YXIgblBvaW50O1xuICAgIHZhciBpO1xuICAgIHZhciBqO1xuICAgIHZhciBrO1xuICAgIHZhciBwO1xuICAgIHZhciBNID0gQ01ELk07XG4gICAgdmFyIEMgPSBDTUQuQztcbiAgICB2YXIgTCA9IENNRC5MO1xuICAgIHZhciBSID0gQ01ELlI7XG4gICAgdmFyIEEgPSBDTUQuQTtcbiAgICB2YXIgUSA9IENNRC5RO1xuICAgIGZvciAoaSA9IDAsIGogPSAwOyBpIDwgbGVuOykge1xuICAgICAgICBjbWQgPSBkYXRhW2krK107XG4gICAgICAgIGogPSBpO1xuICAgICAgICBuUG9pbnQgPSAwO1xuICAgICAgICBzd2l0Y2ggKGNtZCkge1xuICAgICAgICAgICAgY2FzZSBNOlxuICAgICAgICAgICAgICAgIG5Qb2ludCA9IDE7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEw6XG4gICAgICAgICAgICAgICAgblBvaW50ID0gMTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQzpcbiAgICAgICAgICAgICAgICBuUG9pbnQgPSAzO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBROlxuICAgICAgICAgICAgICAgIG5Qb2ludCA9IDI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEE6XG4gICAgICAgICAgICAgICAgdmFyIHggPSBtWzRdO1xuICAgICAgICAgICAgICAgIHZhciB5ID0gbVs1XTtcbiAgICAgICAgICAgICAgICB2YXIgc3ggPSBtYXRoU3FydChtWzBdICogbVswXSArIG1bMV0gKiBtWzFdKTtcbiAgICAgICAgICAgICAgICB2YXIgc3kgPSBtYXRoU3FydChtWzJdICogbVsyXSArIG1bM10gKiBtWzNdKTtcbiAgICAgICAgICAgICAgICB2YXIgYW5nbGUgPSBtYXRoQXRhbjIoLW1bMV0gLyBzeSwgbVswXSAvIHN4KTtcbiAgICAgICAgICAgICAgICBkYXRhW2ldICo9IHN4O1xuICAgICAgICAgICAgICAgIGRhdGFbaSsrXSArPSB4O1xuICAgICAgICAgICAgICAgIGRhdGFbaV0gKj0gc3k7XG4gICAgICAgICAgICAgICAgZGF0YVtpKytdICs9IHk7XG4gICAgICAgICAgICAgICAgZGF0YVtpKytdICo9IHN4O1xuICAgICAgICAgICAgICAgIGRhdGFbaSsrXSAqPSBzeTtcbiAgICAgICAgICAgICAgICBkYXRhW2krK10gKz0gYW5nbGU7XG4gICAgICAgICAgICAgICAgZGF0YVtpKytdICs9IGFuZ2xlO1xuICAgICAgICAgICAgICAgIGkgKz0gMjtcbiAgICAgICAgICAgICAgICBqID0gaTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUjpcbiAgICAgICAgICAgICAgICBwWzBdID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgICAgIHBbMV0gPSBkYXRhW2krK107XG4gICAgICAgICAgICAgICAgdjJBcHBseVRyYW5zZm9ybShwLCBwLCBtKTtcbiAgICAgICAgICAgICAgICBkYXRhW2orK10gPSBwWzBdO1xuICAgICAgICAgICAgICAgIGRhdGFbaisrXSA9IHBbMV07XG4gICAgICAgICAgICAgICAgcFswXSArPSBkYXRhW2krK107XG4gICAgICAgICAgICAgICAgcFsxXSArPSBkYXRhW2krK107XG4gICAgICAgICAgICAgICAgdjJBcHBseVRyYW5zZm9ybShwLCBwLCBtKTtcbiAgICAgICAgICAgICAgICBkYXRhW2orK10gPSBwWzBdO1xuICAgICAgICAgICAgICAgIGRhdGFbaisrXSA9IHBbMV07XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChrID0gMDsgayA8IG5Qb2ludDsgaysrKSB7XG4gICAgICAgICAgICB2YXIgcF8xID0gcG9pbnRzW2tdO1xuICAgICAgICAgICAgcF8xWzBdID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgcF8xWzFdID0gZGF0YVtpKytdO1xuICAgICAgICAgICAgdjJBcHBseVRyYW5zZm9ybShwXzEsIHBfMSwgbSk7XG4gICAgICAgICAgICBkYXRhW2orK10gPSBwXzFbMF07XG4gICAgICAgICAgICBkYXRhW2orK10gPSBwXzFbMV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcGF0aC5pbmNyZWFzZVZlcnNpb24oKTtcbn1cbiIsImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IFBhdGggZnJvbSAnLi4vZ3JhcGhpYy9QYXRoLmpzJztcbmltcG9ydCBQYXRoUHJveHkgZnJvbSAnLi4vY29yZS9QYXRoUHJveHkuanMnO1xuaW1wb3J0IHRyYW5zZm9ybVBhdGggZnJvbSAnLi90cmFuc2Zvcm1QYXRoLmpzJztcbmltcG9ydCB7IGV4dGVuZCB9IGZyb20gJy4uL2NvcmUvdXRpbC5qcyc7XG52YXIgbWF0aFNxcnQgPSBNYXRoLnNxcnQ7XG52YXIgbWF0aFNpbiA9IE1hdGguc2luO1xudmFyIG1hdGhDb3MgPSBNYXRoLmNvcztcbnZhciBQSSA9IE1hdGguUEk7XG5mdW5jdGlvbiB2TWFnKHYpIHtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHZbMF0gKiB2WzBdICsgdlsxXSAqIHZbMV0pO1xufVxuO1xuZnVuY3Rpb24gdlJhdGlvKHUsIHYpIHtcbiAgICByZXR1cm4gKHVbMF0gKiB2WzBdICsgdVsxXSAqIHZbMV0pIC8gKHZNYWcodSkgKiB2TWFnKHYpKTtcbn1cbjtcbmZ1bmN0aW9uIHZBbmdsZSh1LCB2KSB7XG4gICAgcmV0dXJuICh1WzBdICogdlsxXSA8IHVbMV0gKiB2WzBdID8gLTEgOiAxKVxuICAgICAgICAqIE1hdGguYWNvcyh2UmF0aW8odSwgdikpO1xufVxuO1xuZnVuY3Rpb24gcHJvY2Vzc0FyYyh4MSwgeTEsIHgyLCB5MiwgZmEsIGZzLCByeCwgcnksIHBzaURlZywgY21kLCBwYXRoKSB7XG4gICAgdmFyIHBzaSA9IHBzaURlZyAqIChQSSAvIDE4MC4wKTtcbiAgICB2YXIgeHAgPSBtYXRoQ29zKHBzaSkgKiAoeDEgLSB4MikgLyAyLjBcbiAgICAgICAgKyBtYXRoU2luKHBzaSkgKiAoeTEgLSB5MikgLyAyLjA7XG4gICAgdmFyIHlwID0gLTEgKiBtYXRoU2luKHBzaSkgKiAoeDEgLSB4MikgLyAyLjBcbiAgICAgICAgKyBtYXRoQ29zKHBzaSkgKiAoeTEgLSB5MikgLyAyLjA7XG4gICAgdmFyIGxhbWJkYSA9ICh4cCAqIHhwKSAvIChyeCAqIHJ4KSArICh5cCAqIHlwKSAvIChyeSAqIHJ5KTtcbiAgICBpZiAobGFtYmRhID4gMSkge1xuICAgICAgICByeCAqPSBtYXRoU3FydChsYW1iZGEpO1xuICAgICAgICByeSAqPSBtYXRoU3FydChsYW1iZGEpO1xuICAgIH1cbiAgICB2YXIgZiA9IChmYSA9PT0gZnMgPyAtMSA6IDEpXG4gICAgICAgICogbWF0aFNxcnQoKCgocnggKiByeCkgKiAocnkgKiByeSkpXG4gICAgICAgICAgICAtICgocnggKiByeCkgKiAoeXAgKiB5cCkpXG4gICAgICAgICAgICAtICgocnkgKiByeSkgKiAoeHAgKiB4cCkpKSAvICgocnggKiByeCkgKiAoeXAgKiB5cClcbiAgICAgICAgICAgICsgKHJ5ICogcnkpICogKHhwICogeHApKSkgfHwgMDtcbiAgICB2YXIgY3hwID0gZiAqIHJ4ICogeXAgLyByeTtcbiAgICB2YXIgY3lwID0gZiAqIC1yeSAqIHhwIC8gcng7XG4gICAgdmFyIGN4ID0gKHgxICsgeDIpIC8gMi4wXG4gICAgICAgICsgbWF0aENvcyhwc2kpICogY3hwXG4gICAgICAgIC0gbWF0aFNpbihwc2kpICogY3lwO1xuICAgIHZhciBjeSA9ICh5MSArIHkyKSAvIDIuMFxuICAgICAgICArIG1hdGhTaW4ocHNpKSAqIGN4cFxuICAgICAgICArIG1hdGhDb3MocHNpKSAqIGN5cDtcbiAgICB2YXIgdGhldGEgPSB2QW5nbGUoWzEsIDBdLCBbKHhwIC0gY3hwKSAvIHJ4LCAoeXAgLSBjeXApIC8gcnldKTtcbiAgICB2YXIgdSA9IFsoeHAgLSBjeHApIC8gcngsICh5cCAtIGN5cCkgLyByeV07XG4gICAgdmFyIHYgPSBbKC0xICogeHAgLSBjeHApIC8gcngsICgtMSAqIHlwIC0gY3lwKSAvIHJ5XTtcbiAgICB2YXIgZFRoZXRhID0gdkFuZ2xlKHUsIHYpO1xuICAgIGlmICh2UmF0aW8odSwgdikgPD0gLTEpIHtcbiAgICAgICAgZFRoZXRhID0gUEk7XG4gICAgfVxuICAgIGlmICh2UmF0aW8odSwgdikgPj0gMSkge1xuICAgICAgICBkVGhldGEgPSAwO1xuICAgIH1cbiAgICBpZiAoZFRoZXRhIDwgMCkge1xuICAgICAgICB2YXIgbiA9IE1hdGgucm91bmQoZFRoZXRhIC8gUEkgKiAxZTYpIC8gMWU2O1xuICAgICAgICBkVGhldGEgPSBQSSAqIDIgKyAobiAlIDIpICogUEk7XG4gICAgfVxuICAgIHBhdGguYWRkRGF0YShjbWQsIGN4LCBjeSwgcngsIHJ5LCB0aGV0YSwgZFRoZXRhLCBwc2ksIGZzKTtcbn1cbnZhciBjb21tYW5kUmVnID0gLyhbbWx2aHpjcXRzYV0pKFtebWx2aHpjcXRzYV0qKS9pZztcbnZhciBudW1iZXJSZWcgPSAvLT8oWzAtOV0qXFwuKT9bMC05XSsoW2VFXS0/WzAtOV0rKT8vZztcbmZ1bmN0aW9uIGNyZWF0ZVBhdGhQcm94eUZyb21TdHJpbmcoZGF0YSkge1xuICAgIHZhciBwYXRoID0gbmV3IFBhdGhQcm94eSgpO1xuICAgIGlmICghZGF0YSkge1xuICAgICAgICByZXR1cm4gcGF0aDtcbiAgICB9XG4gICAgdmFyIGNweCA9IDA7XG4gICAgdmFyIGNweSA9IDA7XG4gICAgdmFyIHN1YnBhdGhYID0gY3B4O1xuICAgIHZhciBzdWJwYXRoWSA9IGNweTtcbiAgICB2YXIgcHJldkNtZDtcbiAgICB2YXIgQ01EID0gUGF0aFByb3h5LkNNRDtcbiAgICB2YXIgY21kTGlzdCA9IGRhdGEubWF0Y2goY29tbWFuZFJlZyk7XG4gICAgaWYgKCFjbWRMaXN0KSB7XG4gICAgICAgIHJldHVybiBwYXRoO1xuICAgIH1cbiAgICBmb3IgKHZhciBsID0gMDsgbCA8IGNtZExpc3QubGVuZ3RoOyBsKyspIHtcbiAgICAgICAgdmFyIGNtZFRleHQgPSBjbWRMaXN0W2xdO1xuICAgICAgICB2YXIgY21kU3RyID0gY21kVGV4dC5jaGFyQXQoMCk7XG4gICAgICAgIHZhciBjbWQgPSB2b2lkIDA7XG4gICAgICAgIHZhciBwID0gY21kVGV4dC5tYXRjaChudW1iZXJSZWcpIHx8IFtdO1xuICAgICAgICB2YXIgcExlbiA9IHAubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBMZW47IGkrKykge1xuICAgICAgICAgICAgcFtpXSA9IHBhcnNlRmxvYXQocFtpXSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG9mZiA9IDA7XG4gICAgICAgIHdoaWxlIChvZmYgPCBwTGVuKSB7XG4gICAgICAgICAgICB2YXIgY3RsUHR4ID0gdm9pZCAwO1xuICAgICAgICAgICAgdmFyIGN0bFB0eSA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZhciByeCA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZhciByeSA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZhciBwc2kgPSB2b2lkIDA7XG4gICAgICAgICAgICB2YXIgZmEgPSB2b2lkIDA7XG4gICAgICAgICAgICB2YXIgZnMgPSB2b2lkIDA7XG4gICAgICAgICAgICB2YXIgeDEgPSBjcHg7XG4gICAgICAgICAgICB2YXIgeTEgPSBjcHk7XG4gICAgICAgICAgICB2YXIgbGVuID0gdm9pZCAwO1xuICAgICAgICAgICAgdmFyIHBhdGhEYXRhID0gdm9pZCAwO1xuICAgICAgICAgICAgc3dpdGNoIChjbWRTdHIpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdsJzpcbiAgICAgICAgICAgICAgICAgICAgY3B4ICs9IHBbb2ZmKytdO1xuICAgICAgICAgICAgICAgICAgICBjcHkgKz0gcFtvZmYrK107XG4gICAgICAgICAgICAgICAgICAgIGNtZCA9IENNRC5MO1xuICAgICAgICAgICAgICAgICAgICBwYXRoLmFkZERhdGEoY21kLCBjcHgsIGNweSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0wnOlxuICAgICAgICAgICAgICAgICAgICBjcHggPSBwW29mZisrXTtcbiAgICAgICAgICAgICAgICAgICAgY3B5ID0gcFtvZmYrK107XG4gICAgICAgICAgICAgICAgICAgIGNtZCA9IENNRC5MO1xuICAgICAgICAgICAgICAgICAgICBwYXRoLmFkZERhdGEoY21kLCBjcHgsIGNweSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ20nOlxuICAgICAgICAgICAgICAgICAgICBjcHggKz0gcFtvZmYrK107XG4gICAgICAgICAgICAgICAgICAgIGNweSArPSBwW29mZisrXTtcbiAgICAgICAgICAgICAgICAgICAgY21kID0gQ01ELk07XG4gICAgICAgICAgICAgICAgICAgIHBhdGguYWRkRGF0YShjbWQsIGNweCwgY3B5KTtcbiAgICAgICAgICAgICAgICAgICAgc3VicGF0aFggPSBjcHg7XG4gICAgICAgICAgICAgICAgICAgIHN1YnBhdGhZID0gY3B5O1xuICAgICAgICAgICAgICAgICAgICBjbWRTdHIgPSAnbCc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ00nOlxuICAgICAgICAgICAgICAgICAgICBjcHggPSBwW29mZisrXTtcbiAgICAgICAgICAgICAgICAgICAgY3B5ID0gcFtvZmYrK107XG4gICAgICAgICAgICAgICAgICAgIGNtZCA9IENNRC5NO1xuICAgICAgICAgICAgICAgICAgICBwYXRoLmFkZERhdGEoY21kLCBjcHgsIGNweSk7XG4gICAgICAgICAgICAgICAgICAgIHN1YnBhdGhYID0gY3B4O1xuICAgICAgICAgICAgICAgICAgICBzdWJwYXRoWSA9IGNweTtcbiAgICAgICAgICAgICAgICAgICAgY21kU3RyID0gJ0wnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdoJzpcbiAgICAgICAgICAgICAgICAgICAgY3B4ICs9IHBbb2ZmKytdO1xuICAgICAgICAgICAgICAgICAgICBjbWQgPSBDTUQuTDtcbiAgICAgICAgICAgICAgICAgICAgcGF0aC5hZGREYXRhKGNtZCwgY3B4LCBjcHkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdIJzpcbiAgICAgICAgICAgICAgICAgICAgY3B4ID0gcFtvZmYrK107XG4gICAgICAgICAgICAgICAgICAgIGNtZCA9IENNRC5MO1xuICAgICAgICAgICAgICAgICAgICBwYXRoLmFkZERhdGEoY21kLCBjcHgsIGNweSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3YnOlxuICAgICAgICAgICAgICAgICAgICBjcHkgKz0gcFtvZmYrK107XG4gICAgICAgICAgICAgICAgICAgIGNtZCA9IENNRC5MO1xuICAgICAgICAgICAgICAgICAgICBwYXRoLmFkZERhdGEoY21kLCBjcHgsIGNweSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ1YnOlxuICAgICAgICAgICAgICAgICAgICBjcHkgPSBwW29mZisrXTtcbiAgICAgICAgICAgICAgICAgICAgY21kID0gQ01ELkw7XG4gICAgICAgICAgICAgICAgICAgIHBhdGguYWRkRGF0YShjbWQsIGNweCwgY3B5KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnQyc6XG4gICAgICAgICAgICAgICAgICAgIGNtZCA9IENNRC5DO1xuICAgICAgICAgICAgICAgICAgICBwYXRoLmFkZERhdGEoY21kLCBwW29mZisrXSwgcFtvZmYrK10sIHBbb2ZmKytdLCBwW29mZisrXSwgcFtvZmYrK10sIHBbb2ZmKytdKTtcbiAgICAgICAgICAgICAgICAgICAgY3B4ID0gcFtvZmYgLSAyXTtcbiAgICAgICAgICAgICAgICAgICAgY3B5ID0gcFtvZmYgLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYyc6XG4gICAgICAgICAgICAgICAgICAgIGNtZCA9IENNRC5DO1xuICAgICAgICAgICAgICAgICAgICBwYXRoLmFkZERhdGEoY21kLCBwW29mZisrXSArIGNweCwgcFtvZmYrK10gKyBjcHksIHBbb2ZmKytdICsgY3B4LCBwW29mZisrXSArIGNweSwgcFtvZmYrK10gKyBjcHgsIHBbb2ZmKytdICsgY3B5KTtcbiAgICAgICAgICAgICAgICAgICAgY3B4ICs9IHBbb2ZmIC0gMl07XG4gICAgICAgICAgICAgICAgICAgIGNweSArPSBwW29mZiAtIDFdO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdTJzpcbiAgICAgICAgICAgICAgICAgICAgY3RsUHR4ID0gY3B4O1xuICAgICAgICAgICAgICAgICAgICBjdGxQdHkgPSBjcHk7XG4gICAgICAgICAgICAgICAgICAgIGxlbiA9IHBhdGgubGVuKCk7XG4gICAgICAgICAgICAgICAgICAgIHBhdGhEYXRhID0gcGF0aC5kYXRhO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJldkNtZCA9PT0gQ01ELkMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0bFB0eCArPSBjcHggLSBwYXRoRGF0YVtsZW4gLSA0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0bFB0eSArPSBjcHkgLSBwYXRoRGF0YVtsZW4gLSAzXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjbWQgPSBDTUQuQztcbiAgICAgICAgICAgICAgICAgICAgeDEgPSBwW29mZisrXTtcbiAgICAgICAgICAgICAgICAgICAgeTEgPSBwW29mZisrXTtcbiAgICAgICAgICAgICAgICAgICAgY3B4ID0gcFtvZmYrK107XG4gICAgICAgICAgICAgICAgICAgIGNweSA9IHBbb2ZmKytdO1xuICAgICAgICAgICAgICAgICAgICBwYXRoLmFkZERhdGEoY21kLCBjdGxQdHgsIGN0bFB0eSwgeDEsIHkxLCBjcHgsIGNweSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3MnOlxuICAgICAgICAgICAgICAgICAgICBjdGxQdHggPSBjcHg7XG4gICAgICAgICAgICAgICAgICAgIGN0bFB0eSA9IGNweTtcbiAgICAgICAgICAgICAgICAgICAgbGVuID0gcGF0aC5sZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgcGF0aERhdGEgPSBwYXRoLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmV2Q21kID09PSBDTUQuQykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3RsUHR4ICs9IGNweCAtIHBhdGhEYXRhW2xlbiAtIDRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3RsUHR5ICs9IGNweSAtIHBhdGhEYXRhW2xlbiAtIDNdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNtZCA9IENNRC5DO1xuICAgICAgICAgICAgICAgICAgICB4MSA9IGNweCArIHBbb2ZmKytdO1xuICAgICAgICAgICAgICAgICAgICB5MSA9IGNweSArIHBbb2ZmKytdO1xuICAgICAgICAgICAgICAgICAgICBjcHggKz0gcFtvZmYrK107XG4gICAgICAgICAgICAgICAgICAgIGNweSArPSBwW29mZisrXTtcbiAgICAgICAgICAgICAgICAgICAgcGF0aC5hZGREYXRhKGNtZCwgY3RsUHR4LCBjdGxQdHksIHgxLCB5MSwgY3B4LCBjcHkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdRJzpcbiAgICAgICAgICAgICAgICAgICAgeDEgPSBwW29mZisrXTtcbiAgICAgICAgICAgICAgICAgICAgeTEgPSBwW29mZisrXTtcbiAgICAgICAgICAgICAgICAgICAgY3B4ID0gcFtvZmYrK107XG4gICAgICAgICAgICAgICAgICAgIGNweSA9IHBbb2ZmKytdO1xuICAgICAgICAgICAgICAgICAgICBjbWQgPSBDTUQuUTtcbiAgICAgICAgICAgICAgICAgICAgcGF0aC5hZGREYXRhKGNtZCwgeDEsIHkxLCBjcHgsIGNweSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3EnOlxuICAgICAgICAgICAgICAgICAgICB4MSA9IHBbb2ZmKytdICsgY3B4O1xuICAgICAgICAgICAgICAgICAgICB5MSA9IHBbb2ZmKytdICsgY3B5O1xuICAgICAgICAgICAgICAgICAgICBjcHggKz0gcFtvZmYrK107XG4gICAgICAgICAgICAgICAgICAgIGNweSArPSBwW29mZisrXTtcbiAgICAgICAgICAgICAgICAgICAgY21kID0gQ01ELlE7XG4gICAgICAgICAgICAgICAgICAgIHBhdGguYWRkRGF0YShjbWQsIHgxLCB5MSwgY3B4LCBjcHkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdUJzpcbiAgICAgICAgICAgICAgICAgICAgY3RsUHR4ID0gY3B4O1xuICAgICAgICAgICAgICAgICAgICBjdGxQdHkgPSBjcHk7XG4gICAgICAgICAgICAgICAgICAgIGxlbiA9IHBhdGgubGVuKCk7XG4gICAgICAgICAgICAgICAgICAgIHBhdGhEYXRhID0gcGF0aC5kYXRhO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJldkNtZCA9PT0gQ01ELlEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0bFB0eCArPSBjcHggLSBwYXRoRGF0YVtsZW4gLSA0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0bFB0eSArPSBjcHkgLSBwYXRoRGF0YVtsZW4gLSAzXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjcHggPSBwW29mZisrXTtcbiAgICAgICAgICAgICAgICAgICAgY3B5ID0gcFtvZmYrK107XG4gICAgICAgICAgICAgICAgICAgIGNtZCA9IENNRC5RO1xuICAgICAgICAgICAgICAgICAgICBwYXRoLmFkZERhdGEoY21kLCBjdGxQdHgsIGN0bFB0eSwgY3B4LCBjcHkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd0JzpcbiAgICAgICAgICAgICAgICAgICAgY3RsUHR4ID0gY3B4O1xuICAgICAgICAgICAgICAgICAgICBjdGxQdHkgPSBjcHk7XG4gICAgICAgICAgICAgICAgICAgIGxlbiA9IHBhdGgubGVuKCk7XG4gICAgICAgICAgICAgICAgICAgIHBhdGhEYXRhID0gcGF0aC5kYXRhO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJldkNtZCA9PT0gQ01ELlEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0bFB0eCArPSBjcHggLSBwYXRoRGF0YVtsZW4gLSA0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0bFB0eSArPSBjcHkgLSBwYXRoRGF0YVtsZW4gLSAzXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjcHggKz0gcFtvZmYrK107XG4gICAgICAgICAgICAgICAgICAgIGNweSArPSBwW29mZisrXTtcbiAgICAgICAgICAgICAgICAgICAgY21kID0gQ01ELlE7XG4gICAgICAgICAgICAgICAgICAgIHBhdGguYWRkRGF0YShjbWQsIGN0bFB0eCwgY3RsUHR5LCBjcHgsIGNweSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0EnOlxuICAgICAgICAgICAgICAgICAgICByeCA9IHBbb2ZmKytdO1xuICAgICAgICAgICAgICAgICAgICByeSA9IHBbb2ZmKytdO1xuICAgICAgICAgICAgICAgICAgICBwc2kgPSBwW29mZisrXTtcbiAgICAgICAgICAgICAgICAgICAgZmEgPSBwW29mZisrXTtcbiAgICAgICAgICAgICAgICAgICAgZnMgPSBwW29mZisrXTtcbiAgICAgICAgICAgICAgICAgICAgeDEgPSBjcHgsIHkxID0gY3B5O1xuICAgICAgICAgICAgICAgICAgICBjcHggPSBwW29mZisrXTtcbiAgICAgICAgICAgICAgICAgICAgY3B5ID0gcFtvZmYrK107XG4gICAgICAgICAgICAgICAgICAgIGNtZCA9IENNRC5BO1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzQXJjKHgxLCB5MSwgY3B4LCBjcHksIGZhLCBmcywgcngsIHJ5LCBwc2ksIGNtZCwgcGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2EnOlxuICAgICAgICAgICAgICAgICAgICByeCA9IHBbb2ZmKytdO1xuICAgICAgICAgICAgICAgICAgICByeSA9IHBbb2ZmKytdO1xuICAgICAgICAgICAgICAgICAgICBwc2kgPSBwW29mZisrXTtcbiAgICAgICAgICAgICAgICAgICAgZmEgPSBwW29mZisrXTtcbiAgICAgICAgICAgICAgICAgICAgZnMgPSBwW29mZisrXTtcbiAgICAgICAgICAgICAgICAgICAgeDEgPSBjcHgsIHkxID0gY3B5O1xuICAgICAgICAgICAgICAgICAgICBjcHggKz0gcFtvZmYrK107XG4gICAgICAgICAgICAgICAgICAgIGNweSArPSBwW29mZisrXTtcbiAgICAgICAgICAgICAgICAgICAgY21kID0gQ01ELkE7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NBcmMoeDEsIHkxLCBjcHgsIGNweSwgZmEsIGZzLCByeCwgcnksIHBzaSwgY21kLCBwYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNtZFN0ciA9PT0gJ3onIHx8IGNtZFN0ciA9PT0gJ1onKSB7XG4gICAgICAgICAgICBjbWQgPSBDTUQuWjtcbiAgICAgICAgICAgIHBhdGguYWRkRGF0YShjbWQpO1xuICAgICAgICAgICAgY3B4ID0gc3VicGF0aFg7XG4gICAgICAgICAgICBjcHkgPSBzdWJwYXRoWTtcbiAgICAgICAgfVxuICAgICAgICBwcmV2Q21kID0gY21kO1xuICAgIH1cbiAgICBwYXRoLnRvU3RhdGljKCk7XG4gICAgcmV0dXJuIHBhdGg7XG59XG52YXIgU1ZHUGF0aCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNWR1BhdGgsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU1ZHUGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBTVkdQYXRoLnByb3RvdHlwZS5hcHBseVRyYW5zZm9ybSA9IGZ1bmN0aW9uIChtKSB7IH07XG4gICAgcmV0dXJuIFNWR1BhdGg7XG59KFBhdGgpKTtcbmZ1bmN0aW9uIGlzUGF0aFByb3h5KHBhdGgpIHtcbiAgICByZXR1cm4gcGF0aC5zZXREYXRhICE9IG51bGw7XG59XG5mdW5jdGlvbiBjcmVhdGVQYXRoT3B0aW9ucyhzdHIsIG9wdHMpIHtcbiAgICB2YXIgcGF0aFByb3h5ID0gY3JlYXRlUGF0aFByb3h5RnJvbVN0cmluZyhzdHIpO1xuICAgIHZhciBpbm5lck9wdHMgPSBleHRlbmQoe30sIG9wdHMpO1xuICAgIGlubmVyT3B0cy5idWlsZFBhdGggPSBmdW5jdGlvbiAocGF0aCkge1xuICAgICAgICBpZiAoaXNQYXRoUHJveHkocGF0aCkpIHtcbiAgICAgICAgICAgIHBhdGguc2V0RGF0YShwYXRoUHJveHkuZGF0YSk7XG4gICAgICAgICAgICB2YXIgY3R4ID0gcGF0aC5nZXRDb250ZXh0KCk7XG4gICAgICAgICAgICBpZiAoY3R4KSB7XG4gICAgICAgICAgICAgICAgcGF0aC5yZWJ1aWxkUGF0aChjdHgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGN0eCA9IHBhdGg7XG4gICAgICAgICAgICBwYXRoUHJveHkucmVidWlsZFBhdGgoY3R4LCAxKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgaW5uZXJPcHRzLmFwcGx5VHJhbnNmb3JtID0gZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgdHJhbnNmb3JtUGF0aChwYXRoUHJveHksIG0pO1xuICAgICAgICB0aGlzLmRpcnR5U2hhcGUoKTtcbiAgICB9O1xuICAgIHJldHVybiBpbm5lck9wdHM7XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRnJvbVN0cmluZyhzdHIsIG9wdHMpIHtcbiAgICByZXR1cm4gbmV3IFNWR1BhdGgoY3JlYXRlUGF0aE9wdGlvbnMoc3RyLCBvcHRzKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kRnJvbVN0cmluZyhzdHIsIGRlZmF1bHRPcHRzKSB7XG4gICAgdmFyIGlubmVyT3B0cyA9IGNyZWF0ZVBhdGhPcHRpb25zKHN0ciwgZGVmYXVsdE9wdHMpO1xuICAgIHZhciBTdWIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoU3ViLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBTdWIob3B0cykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmFwcGx5VHJhbnNmb3JtID0gaW5uZXJPcHRzLmFwcGx5VHJhbnNmb3JtO1xuICAgICAgICAgICAgX3RoaXMuYnVpbGRQYXRoID0gaW5uZXJPcHRzLmJ1aWxkUGF0aDtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU3ViO1xuICAgIH0oU1ZHUGF0aCkpO1xuICAgIHJldHVybiBTdWI7XG59XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VQYXRoKHBhdGhFbHMsIG9wdHMpIHtcbiAgICB2YXIgcGF0aExpc3QgPSBbXTtcbiAgICB2YXIgbGVuID0gcGF0aEVscy5sZW5ndGg7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgcGF0aEVsID0gcGF0aEVsc1tpXTtcbiAgICAgICAgcGF0aExpc3QucHVzaChwYXRoRWwuZ2V0VXBkYXRlZFBhdGhQcm94eSh0cnVlKSk7XG4gICAgfVxuICAgIHZhciBwYXRoQnVuZGxlID0gbmV3IFBhdGgob3B0cyk7XG4gICAgcGF0aEJ1bmRsZS5jcmVhdGVQYXRoUHJveHkoKTtcbiAgICBwYXRoQnVuZGxlLmJ1aWxkUGF0aCA9IGZ1bmN0aW9uIChwYXRoKSB7XG4gICAgICAgIGlmIChpc1BhdGhQcm94eShwYXRoKSkge1xuICAgICAgICAgICAgcGF0aC5hcHBlbmRQYXRoKHBhdGhMaXN0KTtcbiAgICAgICAgICAgIHZhciBjdHggPSBwYXRoLmdldENvbnRleHQoKTtcbiAgICAgICAgICAgIGlmIChjdHgpIHtcbiAgICAgICAgICAgICAgICBwYXRoLnJlYnVpbGRQYXRoKGN0eCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBwYXRoQnVuZGxlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lUGF0aChzb3VyY2VQYXRoLCBvcHRzKSB7XG4gICAgb3B0cyA9IG9wdHMgfHwge307XG4gICAgdmFyIHBhdGggPSBuZXcgUGF0aCgpO1xuICAgIGlmIChzb3VyY2VQYXRoLnNoYXBlKSB7XG4gICAgICAgIHBhdGguc2V0U2hhcGUoc291cmNlUGF0aC5zaGFwZSk7XG4gICAgfVxuICAgIHBhdGguc2V0U3R5bGUoc291cmNlUGF0aC5zdHlsZSk7XG4gICAgaWYgKG9wdHMuYmFrZVRyYW5zZm9ybSkge1xuICAgICAgICB0cmFuc2Zvcm1QYXRoKHBhdGgucGF0aCwgc291cmNlUGF0aC5nZXRDb21wdXRlZFRyYW5zZm9ybSgpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChvcHRzLnRvTG9jYWwpIHtcbiAgICAgICAgICAgIHBhdGguc2V0TG9jYWxUcmFuc2Zvcm0oc291cmNlUGF0aC5nZXRDb21wdXRlZFRyYW5zZm9ybSgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBhdGguY29weVRyYW5zZm9ybShzb3VyY2VQYXRoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwYXRoLmJ1aWxkUGF0aCA9IHNvdXJjZVBhdGguYnVpbGRQYXRoO1xuICAgIHBhdGguYXBwbHlUcmFuc2Zvcm0gPSBwYXRoLmFwcGx5VHJhbnNmb3JtO1xuICAgIHBhdGgueiA9IHNvdXJjZVBhdGguejtcbiAgICBwYXRoLnoyID0gc291cmNlUGF0aC56MjtcbiAgICBwYXRoLnpsZXZlbCA9IHNvdXJjZVBhdGguemxldmVsO1xuICAgIHJldHVybiBwYXRoO1xufVxuIiwiaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgUGF0aCBmcm9tICcuLi9QYXRoLmpzJztcbnZhciBDaXJjbGVTaGFwZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ2lyY2xlU2hhcGUoKSB7XG4gICAgICAgIHRoaXMuY3ggPSAwO1xuICAgICAgICB0aGlzLmN5ID0gMDtcbiAgICAgICAgdGhpcy5yID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIENpcmNsZVNoYXBlO1xufSgpKTtcbmV4cG9ydCB7IENpcmNsZVNoYXBlIH07XG52YXIgQ2lyY2xlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2lyY2xlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIENpcmNsZShvcHRzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBvcHRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBDaXJjbGUucHJvdG90eXBlLmdldERlZmF1bHRTaGFwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDaXJjbGVTaGFwZSgpO1xuICAgIH07XG4gICAgQ2lyY2xlLnByb3RvdHlwZS5idWlsZFBhdGggPSBmdW5jdGlvbiAoY3R4LCBzaGFwZSkge1xuICAgICAgICBjdHgubW92ZVRvKHNoYXBlLmN4ICsgc2hhcGUuciwgc2hhcGUuY3kpO1xuICAgICAgICBjdHguYXJjKHNoYXBlLmN4LCBzaGFwZS5jeSwgc2hhcGUuciwgMCwgTWF0aC5QSSAqIDIpO1xuICAgIH07XG4gICAgcmV0dXJuIENpcmNsZTtcbn0oUGF0aCkpO1xuO1xuQ2lyY2xlLnByb3RvdHlwZS50eXBlID0gJ2NpcmNsZSc7XG5leHBvcnQgZGVmYXVsdCBDaXJjbGU7XG4iLCJpbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCBQYXRoIGZyb20gJy4uL1BhdGguanMnO1xudmFyIEVsbGlwc2VTaGFwZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRWxsaXBzZVNoYXBlKCkge1xuICAgICAgICB0aGlzLmN4ID0gMDtcbiAgICAgICAgdGhpcy5jeSA9IDA7XG4gICAgICAgIHRoaXMucnggPSAwO1xuICAgICAgICB0aGlzLnJ5ID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIEVsbGlwc2VTaGFwZTtcbn0oKSk7XG5leHBvcnQgeyBFbGxpcHNlU2hhcGUgfTtcbnZhciBFbGxpcHNlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRWxsaXBzZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBFbGxpcHNlKG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIG9wdHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIEVsbGlwc2UucHJvdG90eXBlLmdldERlZmF1bHRTaGFwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBFbGxpcHNlU2hhcGUoKTtcbiAgICB9O1xuICAgIEVsbGlwc2UucHJvdG90eXBlLmJ1aWxkUGF0aCA9IGZ1bmN0aW9uIChjdHgsIHNoYXBlKSB7XG4gICAgICAgIHZhciBrID0gMC41NTIyODQ4O1xuICAgICAgICB2YXIgeCA9IHNoYXBlLmN4O1xuICAgICAgICB2YXIgeSA9IHNoYXBlLmN5O1xuICAgICAgICB2YXIgYSA9IHNoYXBlLnJ4O1xuICAgICAgICB2YXIgYiA9IHNoYXBlLnJ5O1xuICAgICAgICB2YXIgb3ggPSBhICogaztcbiAgICAgICAgdmFyIG95ID0gYiAqIGs7XG4gICAgICAgIGN0eC5tb3ZlVG8oeCAtIGEsIHkpO1xuICAgICAgICBjdHguYmV6aWVyQ3VydmVUbyh4IC0gYSwgeSAtIG95LCB4IC0gb3gsIHkgLSBiLCB4LCB5IC0gYik7XG4gICAgICAgIGN0eC5iZXppZXJDdXJ2ZVRvKHggKyBveCwgeSAtIGIsIHggKyBhLCB5IC0gb3ksIHggKyBhLCB5KTtcbiAgICAgICAgY3R4LmJlemllckN1cnZlVG8oeCArIGEsIHkgKyBveSwgeCArIG94LCB5ICsgYiwgeCwgeSArIGIpO1xuICAgICAgICBjdHguYmV6aWVyQ3VydmVUbyh4IC0gb3gsIHkgKyBiLCB4IC0gYSwgeSArIG95LCB4IC0gYSwgeSk7XG4gICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICB9O1xuICAgIHJldHVybiBFbGxpcHNlO1xufShQYXRoKSk7XG5FbGxpcHNlLnByb3RvdHlwZS50eXBlID0gJ2VsbGlwc2UnO1xuZXhwb3J0IGRlZmF1bHQgRWxsaXBzZTtcbiIsImltcG9ydCB7IGlzQXJyYXkgfSBmcm9tICcuLi8uLi9jb3JlL3V0aWwuanMnO1xudmFyIFBJID0gTWF0aC5QSTtcbnZhciBQSTIgPSBQSSAqIDI7XG52YXIgbWF0aFNpbiA9IE1hdGguc2luO1xudmFyIG1hdGhDb3MgPSBNYXRoLmNvcztcbnZhciBtYXRoQUNvcyA9IE1hdGguYWNvcztcbnZhciBtYXRoQVRhbjIgPSBNYXRoLmF0YW4yO1xudmFyIG1hdGhBYnMgPSBNYXRoLmFicztcbnZhciBtYXRoU3FydCA9IE1hdGguc3FydDtcbnZhciBtYXRoTWF4ID0gTWF0aC5tYXg7XG52YXIgbWF0aE1pbiA9IE1hdGgubWluO1xudmFyIGUgPSAxZS00O1xuZnVuY3Rpb24gaW50ZXJzZWN0KHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Mykge1xuICAgIHZhciBkeDEwID0geDEgLSB4MDtcbiAgICB2YXIgZHkxMCA9IHkxIC0geTA7XG4gICAgdmFyIGR4MzIgPSB4MyAtIHgyO1xuICAgIHZhciBkeTMyID0geTMgLSB5MjtcbiAgICB2YXIgdCA9IGR5MzIgKiBkeDEwIC0gZHgzMiAqIGR5MTA7XG4gICAgaWYgKHQgKiB0IDwgZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHQgPSAoZHgzMiAqICh5MCAtIHkyKSAtIGR5MzIgKiAoeDAgLSB4MikpIC8gdDtcbiAgICByZXR1cm4gW3gwICsgdCAqIGR4MTAsIHkwICsgdCAqIGR5MTBdO1xufVxuZnVuY3Rpb24gY29tcHV0ZUNvcm5lclRhbmdlbnRzKHgwLCB5MCwgeDEsIHkxLCByYWRpdXMsIGNyLCBjbG9ja3dpc2UpIHtcbiAgICB2YXIgeDAxID0geDAgLSB4MTtcbiAgICB2YXIgeTAxID0geTAgLSB5MTtcbiAgICB2YXIgbG8gPSAoY2xvY2t3aXNlID8gY3IgOiAtY3IpIC8gbWF0aFNxcnQoeDAxICogeDAxICsgeTAxICogeTAxKTtcbiAgICB2YXIgb3ggPSBsbyAqIHkwMTtcbiAgICB2YXIgb3kgPSAtbG8gKiB4MDE7XG4gICAgdmFyIHgxMSA9IHgwICsgb3g7XG4gICAgdmFyIHkxMSA9IHkwICsgb3k7XG4gICAgdmFyIHgxMCA9IHgxICsgb3g7XG4gICAgdmFyIHkxMCA9IHkxICsgb3k7XG4gICAgdmFyIHgwMCA9ICh4MTEgKyB4MTApIC8gMjtcbiAgICB2YXIgeTAwID0gKHkxMSArIHkxMCkgLyAyO1xuICAgIHZhciBkeCA9IHgxMCAtIHgxMTtcbiAgICB2YXIgZHkgPSB5MTAgLSB5MTE7XG4gICAgdmFyIGQyID0gZHggKiBkeCArIGR5ICogZHk7XG4gICAgdmFyIHIgPSByYWRpdXMgLSBjcjtcbiAgICB2YXIgcyA9IHgxMSAqIHkxMCAtIHgxMCAqIHkxMTtcbiAgICB2YXIgZCA9IChkeSA8IDAgPyAtMSA6IDEpICogbWF0aFNxcnQobWF0aE1heCgwLCByICogciAqIGQyIC0gcyAqIHMpKTtcbiAgICB2YXIgY3gwID0gKHMgKiBkeSAtIGR4ICogZCkgLyBkMjtcbiAgICB2YXIgY3kwID0gKC1zICogZHggLSBkeSAqIGQpIC8gZDI7XG4gICAgdmFyIGN4MSA9IChzICogZHkgKyBkeCAqIGQpIC8gZDI7XG4gICAgdmFyIGN5MSA9ICgtcyAqIGR4ICsgZHkgKiBkKSAvIGQyO1xuICAgIHZhciBkeDAgPSBjeDAgLSB4MDA7XG4gICAgdmFyIGR5MCA9IGN5MCAtIHkwMDtcbiAgICB2YXIgZHgxID0gY3gxIC0geDAwO1xuICAgIHZhciBkeTEgPSBjeTEgLSB5MDA7XG4gICAgaWYgKGR4MCAqIGR4MCArIGR5MCAqIGR5MCA+IGR4MSAqIGR4MSArIGR5MSAqIGR5MSkge1xuICAgICAgICBjeDAgPSBjeDE7XG4gICAgICAgIGN5MCA9IGN5MTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY3g6IGN4MCxcbiAgICAgICAgY3k6IGN5MCxcbiAgICAgICAgeDA6IC1veCxcbiAgICAgICAgeTA6IC1veSxcbiAgICAgICAgeDE6IGN4MCAqIChyYWRpdXMgLyByIC0gMSksXG4gICAgICAgIHkxOiBjeTAgKiAocmFkaXVzIC8gciAtIDEpXG4gICAgfTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUNvcm5lclJhZGl1cyhjcikge1xuICAgIHZhciBhcnI7XG4gICAgaWYgKGlzQXJyYXkoY3IpKSB7XG4gICAgICAgIHZhciBsZW4gPSBjci5sZW5ndGg7XG4gICAgICAgIGlmICghbGVuKSB7XG4gICAgICAgICAgICByZXR1cm4gY3I7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlbiA9PT0gMSkge1xuICAgICAgICAgICAgYXJyID0gW2NyWzBdLCBjclswXSwgMCwgMF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGVuID09PSAyKSB7XG4gICAgICAgICAgICBhcnIgPSBbY3JbMF0sIGNyWzBdLCBjclsxXSwgY3JbMV1dO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxlbiA9PT0gMykge1xuICAgICAgICAgICAgYXJyID0gY3IuY29uY2F0KGNyWzJdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFyciA9IGNyO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhcnIgPSBbY3IsIGNyLCBjciwgY3JdO1xuICAgIH1cbiAgICByZXR1cm4gYXJyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkUGF0aChjdHgsIHNoYXBlKSB7XG4gICAgdmFyIF9hO1xuICAgIHZhciByYWRpdXMgPSBtYXRoTWF4KHNoYXBlLnIsIDApO1xuICAgIHZhciBpbm5lclJhZGl1cyA9IG1hdGhNYXgoc2hhcGUucjAgfHwgMCwgMCk7XG4gICAgdmFyIGhhc1JhZGl1cyA9IHJhZGl1cyA+IDA7XG4gICAgdmFyIGhhc0lubmVyUmFkaXVzID0gaW5uZXJSYWRpdXMgPiAwO1xuICAgIGlmICghaGFzUmFkaXVzICYmICFoYXNJbm5lclJhZGl1cykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghaGFzUmFkaXVzKSB7XG4gICAgICAgIHJhZGl1cyA9IGlubmVyUmFkaXVzO1xuICAgICAgICBpbm5lclJhZGl1cyA9IDA7XG4gICAgfVxuICAgIGlmIChpbm5lclJhZGl1cyA+IHJhZGl1cykge1xuICAgICAgICB2YXIgdG1wID0gcmFkaXVzO1xuICAgICAgICByYWRpdXMgPSBpbm5lclJhZGl1cztcbiAgICAgICAgaW5uZXJSYWRpdXMgPSB0bXA7XG4gICAgfVxuICAgIHZhciBzdGFydEFuZ2xlID0gc2hhcGUuc3RhcnRBbmdsZSwgZW5kQW5nbGUgPSBzaGFwZS5lbmRBbmdsZTtcbiAgICBpZiAoaXNOYU4oc3RhcnRBbmdsZSkgfHwgaXNOYU4oZW5kQW5nbGUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGN4ID0gc2hhcGUuY3gsIGN5ID0gc2hhcGUuY3k7XG4gICAgdmFyIGNsb2Nrd2lzZSA9ICEhc2hhcGUuY2xvY2t3aXNlO1xuICAgIHZhciBhcmMgPSBtYXRoQWJzKGVuZEFuZ2xlIC0gc3RhcnRBbmdsZSk7XG4gICAgdmFyIG1vZCA9IGFyYyA+IFBJMiAmJiBhcmMgJSBQSTI7XG4gICAgbW9kID4gZSAmJiAoYXJjID0gbW9kKTtcbiAgICBpZiAoIShyYWRpdXMgPiBlKSkge1xuICAgICAgICBjdHgubW92ZVRvKGN4LCBjeSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFyYyA+IFBJMiAtIGUpIHtcbiAgICAgICAgY3R4Lm1vdmVUbyhjeCArIHJhZGl1cyAqIG1hdGhDb3Moc3RhcnRBbmdsZSksIGN5ICsgcmFkaXVzICogbWF0aFNpbihzdGFydEFuZ2xlKSk7XG4gICAgICAgIGN0eC5hcmMoY3gsIGN5LCByYWRpdXMsIHN0YXJ0QW5nbGUsIGVuZEFuZ2xlLCAhY2xvY2t3aXNlKTtcbiAgICAgICAgaWYgKGlubmVyUmFkaXVzID4gZSkge1xuICAgICAgICAgICAgY3R4Lm1vdmVUbyhjeCArIGlubmVyUmFkaXVzICogbWF0aENvcyhlbmRBbmdsZSksIGN5ICsgaW5uZXJSYWRpdXMgKiBtYXRoU2luKGVuZEFuZ2xlKSk7XG4gICAgICAgICAgICBjdHguYXJjKGN4LCBjeSwgaW5uZXJSYWRpdXMsIGVuZEFuZ2xlLCBzdGFydEFuZ2xlLCBjbG9ja3dpc2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgaWNyU3RhcnQgPSB2b2lkIDA7XG4gICAgICAgIHZhciBpY3JFbmQgPSB2b2lkIDA7XG4gICAgICAgIHZhciBvY3JTdGFydCA9IHZvaWQgMDtcbiAgICAgICAgdmFyIG9jckVuZCA9IHZvaWQgMDtcbiAgICAgICAgdmFyIG9jcnMgPSB2b2lkIDA7XG4gICAgICAgIHZhciBvY3JlID0gdm9pZCAwO1xuICAgICAgICB2YXIgaWNycyA9IHZvaWQgMDtcbiAgICAgICAgdmFyIGljcmUgPSB2b2lkIDA7XG4gICAgICAgIHZhciBvY3JNYXggPSB2b2lkIDA7XG4gICAgICAgIHZhciBpY3JNYXggPSB2b2lkIDA7XG4gICAgICAgIHZhciBsaW1pdGVkT2NyTWF4ID0gdm9pZCAwO1xuICAgICAgICB2YXIgbGltaXRlZEljck1heCA9IHZvaWQgMDtcbiAgICAgICAgdmFyIHhyZSA9IHZvaWQgMDtcbiAgICAgICAgdmFyIHlyZSA9IHZvaWQgMDtcbiAgICAgICAgdmFyIHhpcnMgPSB2b2lkIDA7XG4gICAgICAgIHZhciB5aXJzID0gdm9pZCAwO1xuICAgICAgICB2YXIgeHJzID0gcmFkaXVzICogbWF0aENvcyhzdGFydEFuZ2xlKTtcbiAgICAgICAgdmFyIHlycyA9IHJhZGl1cyAqIG1hdGhTaW4oc3RhcnRBbmdsZSk7XG4gICAgICAgIHZhciB4aXJlID0gaW5uZXJSYWRpdXMgKiBtYXRoQ29zKGVuZEFuZ2xlKTtcbiAgICAgICAgdmFyIHlpcmUgPSBpbm5lclJhZGl1cyAqIG1hdGhTaW4oZW5kQW5nbGUpO1xuICAgICAgICB2YXIgaGFzQXJjID0gYXJjID4gZTtcbiAgICAgICAgaWYgKGhhc0FyYykge1xuICAgICAgICAgICAgdmFyIGNvcm5lclJhZGl1cyA9IHNoYXBlLmNvcm5lclJhZGl1cztcbiAgICAgICAgICAgIGlmIChjb3JuZXJSYWRpdXMpIHtcbiAgICAgICAgICAgICAgICBfYSA9IG5vcm1hbGl6ZUNvcm5lclJhZGl1cyhjb3JuZXJSYWRpdXMpLCBpY3JTdGFydCA9IF9hWzBdLCBpY3JFbmQgPSBfYVsxXSwgb2NyU3RhcnQgPSBfYVsyXSwgb2NyRW5kID0gX2FbM107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaGFsZlJkID0gbWF0aEFicyhyYWRpdXMgLSBpbm5lclJhZGl1cykgLyAyO1xuICAgICAgICAgICAgb2NycyA9IG1hdGhNaW4oaGFsZlJkLCBvY3JTdGFydCk7XG4gICAgICAgICAgICBvY3JlID0gbWF0aE1pbihoYWxmUmQsIG9jckVuZCk7XG4gICAgICAgICAgICBpY3JzID0gbWF0aE1pbihoYWxmUmQsIGljclN0YXJ0KTtcbiAgICAgICAgICAgIGljcmUgPSBtYXRoTWluKGhhbGZSZCwgaWNyRW5kKTtcbiAgICAgICAgICAgIGxpbWl0ZWRPY3JNYXggPSBvY3JNYXggPSBtYXRoTWF4KG9jcnMsIG9jcmUpO1xuICAgICAgICAgICAgbGltaXRlZEljck1heCA9IGljck1heCA9IG1hdGhNYXgoaWNycywgaWNyZSk7XG4gICAgICAgICAgICBpZiAob2NyTWF4ID4gZSB8fCBpY3JNYXggPiBlKSB7XG4gICAgICAgICAgICAgICAgeHJlID0gcmFkaXVzICogbWF0aENvcyhlbmRBbmdsZSk7XG4gICAgICAgICAgICAgICAgeXJlID0gcmFkaXVzICogbWF0aFNpbihlbmRBbmdsZSk7XG4gICAgICAgICAgICAgICAgeGlycyA9IGlubmVyUmFkaXVzICogbWF0aENvcyhzdGFydEFuZ2xlKTtcbiAgICAgICAgICAgICAgICB5aXJzID0gaW5uZXJSYWRpdXMgKiBtYXRoU2luKHN0YXJ0QW5nbGUpO1xuICAgICAgICAgICAgICAgIGlmIChhcmMgPCBQSSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRfMSA9IGludGVyc2VjdCh4cnMsIHlycywgeGlycywgeWlycywgeHJlLCB5cmUsIHhpcmUsIHlpcmUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXRfMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHgwID0geHJzIC0gaXRfMVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB5MCA9IHlycyAtIGl0XzFbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeDEgPSB4cmUgLSBpdF8xWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHkxID0geXJlIC0gaXRfMVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gMSAvIG1hdGhTaW4obWF0aEFDb3MoKHgwICogeDEgKyB5MCAqIHkxKSAvIChtYXRoU3FydCh4MCAqIHgwICsgeTAgKiB5MCkgKiBtYXRoU3FydCh4MSAqIHgxICsgeTEgKiB5MSkpKSAvIDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBtYXRoU3FydChpdF8xWzBdICogaXRfMVswXSArIGl0XzFbMV0gKiBpdF8xWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0ZWRPY3JNYXggPSBtYXRoTWluKG9jck1heCwgKHJhZGl1cyAtIGIpIC8gKGEgKyAxKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW1pdGVkSWNyTWF4ID0gbWF0aE1pbihpY3JNYXgsIChpbm5lclJhZGl1cyAtIGIpIC8gKGEgLSAxKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFoYXNBcmMpIHtcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8oY3ggKyB4cnMsIGN5ICsgeXJzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsaW1pdGVkT2NyTWF4ID4gZSkge1xuICAgICAgICAgICAgdmFyIGNyU3RhcnQgPSBtYXRoTWluKG9jclN0YXJ0LCBsaW1pdGVkT2NyTWF4KTtcbiAgICAgICAgICAgIHZhciBjckVuZCA9IG1hdGhNaW4ob2NyRW5kLCBsaW1pdGVkT2NyTWF4KTtcbiAgICAgICAgICAgIHZhciBjdDAgPSBjb21wdXRlQ29ybmVyVGFuZ2VudHMoeGlycywgeWlycywgeHJzLCB5cnMsIHJhZGl1cywgY3JTdGFydCwgY2xvY2t3aXNlKTtcbiAgICAgICAgICAgIHZhciBjdDEgPSBjb21wdXRlQ29ybmVyVGFuZ2VudHMoeHJlLCB5cmUsIHhpcmUsIHlpcmUsIHJhZGl1cywgY3JFbmQsIGNsb2Nrd2lzZSk7XG4gICAgICAgICAgICBjdHgubW92ZVRvKGN4ICsgY3QwLmN4ICsgY3QwLngwLCBjeSArIGN0MC5jeSArIGN0MC55MCk7XG4gICAgICAgICAgICBpZiAobGltaXRlZE9jck1heCA8IG9jck1heCAmJiBjclN0YXJ0ID09PSBjckVuZCkge1xuICAgICAgICAgICAgICAgIGN0eC5hcmMoY3ggKyBjdDAuY3gsIGN5ICsgY3QwLmN5LCBsaW1pdGVkT2NyTWF4LCBtYXRoQVRhbjIoY3QwLnkwLCBjdDAueDApLCBtYXRoQVRhbjIoY3QxLnkwLCBjdDEueDApLCAhY2xvY2t3aXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNyU3RhcnQgPiAwICYmIGN0eC5hcmMoY3ggKyBjdDAuY3gsIGN5ICsgY3QwLmN5LCBjclN0YXJ0LCBtYXRoQVRhbjIoY3QwLnkwLCBjdDAueDApLCBtYXRoQVRhbjIoY3QwLnkxLCBjdDAueDEpLCAhY2xvY2t3aXNlKTtcbiAgICAgICAgICAgICAgICBjdHguYXJjKGN4LCBjeSwgcmFkaXVzLCBtYXRoQVRhbjIoY3QwLmN5ICsgY3QwLnkxLCBjdDAuY3ggKyBjdDAueDEpLCBtYXRoQVRhbjIoY3QxLmN5ICsgY3QxLnkxLCBjdDEuY3ggKyBjdDEueDEpLCAhY2xvY2t3aXNlKTtcbiAgICAgICAgICAgICAgICBjckVuZCA+IDAgJiYgY3R4LmFyYyhjeCArIGN0MS5jeCwgY3kgKyBjdDEuY3ksIGNyRW5kLCBtYXRoQVRhbjIoY3QxLnkxLCBjdDEueDEpLCBtYXRoQVRhbjIoY3QxLnkwLCBjdDEueDApLCAhY2xvY2t3aXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8oY3ggKyB4cnMsIGN5ICsgeXJzKTtcbiAgICAgICAgICAgIGN0eC5hcmMoY3gsIGN5LCByYWRpdXMsIHN0YXJ0QW5nbGUsIGVuZEFuZ2xlLCAhY2xvY2t3aXNlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShpbm5lclJhZGl1cyA+IGUpIHx8ICFoYXNBcmMpIHtcbiAgICAgICAgICAgIGN0eC5saW5lVG8oY3ggKyB4aXJlLCBjeSArIHlpcmUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxpbWl0ZWRJY3JNYXggPiBlKSB7XG4gICAgICAgICAgICB2YXIgY3JTdGFydCA9IG1hdGhNaW4oaWNyU3RhcnQsIGxpbWl0ZWRJY3JNYXgpO1xuICAgICAgICAgICAgdmFyIGNyRW5kID0gbWF0aE1pbihpY3JFbmQsIGxpbWl0ZWRJY3JNYXgpO1xuICAgICAgICAgICAgdmFyIGN0MCA9IGNvbXB1dGVDb3JuZXJUYW5nZW50cyh4aXJlLCB5aXJlLCB4cmUsIHlyZSwgaW5uZXJSYWRpdXMsIC1jckVuZCwgY2xvY2t3aXNlKTtcbiAgICAgICAgICAgIHZhciBjdDEgPSBjb21wdXRlQ29ybmVyVGFuZ2VudHMoeHJzLCB5cnMsIHhpcnMsIHlpcnMsIGlubmVyUmFkaXVzLCAtY3JTdGFydCwgY2xvY2t3aXNlKTtcbiAgICAgICAgICAgIGN0eC5saW5lVG8oY3ggKyBjdDAuY3ggKyBjdDAueDAsIGN5ICsgY3QwLmN5ICsgY3QwLnkwKTtcbiAgICAgICAgICAgIGlmIChsaW1pdGVkSWNyTWF4IDwgaWNyTWF4ICYmIGNyU3RhcnQgPT09IGNyRW5kKSB7XG4gICAgICAgICAgICAgICAgY3R4LmFyYyhjeCArIGN0MC5jeCwgY3kgKyBjdDAuY3ksIGxpbWl0ZWRJY3JNYXgsIG1hdGhBVGFuMihjdDAueTAsIGN0MC54MCksIG1hdGhBVGFuMihjdDEueTAsIGN0MS54MCksICFjbG9ja3dpc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY3JFbmQgPiAwICYmIGN0eC5hcmMoY3ggKyBjdDAuY3gsIGN5ICsgY3QwLmN5LCBjckVuZCwgbWF0aEFUYW4yKGN0MC55MCwgY3QwLngwKSwgbWF0aEFUYW4yKGN0MC55MSwgY3QwLngxKSwgIWNsb2Nrd2lzZSk7XG4gICAgICAgICAgICAgICAgY3R4LmFyYyhjeCwgY3ksIGlubmVyUmFkaXVzLCBtYXRoQVRhbjIoY3QwLmN5ICsgY3QwLnkxLCBjdDAuY3ggKyBjdDAueDEpLCBtYXRoQVRhbjIoY3QxLmN5ICsgY3QxLnkxLCBjdDEuY3ggKyBjdDEueDEpLCBjbG9ja3dpc2UpO1xuICAgICAgICAgICAgICAgIGNyU3RhcnQgPiAwICYmIGN0eC5hcmMoY3ggKyBjdDEuY3gsIGN5ICsgY3QxLmN5LCBjclN0YXJ0LCBtYXRoQVRhbjIoY3QxLnkxLCBjdDEueDEpLCBtYXRoQVRhbjIoY3QxLnkwLCBjdDEueDApLCAhY2xvY2t3aXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGN0eC5saW5lVG8oY3ggKyB4aXJlLCBjeSArIHlpcmUpO1xuICAgICAgICAgICAgY3R4LmFyYyhjeCwgY3ksIGlubmVyUmFkaXVzLCBlbmRBbmdsZSwgc3RhcnRBbmdsZSwgY2xvY2t3aXNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjdHguY2xvc2VQYXRoKCk7XG59XG4iLCJpbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCBQYXRoIGZyb20gJy4uL1BhdGguanMnO1xuaW1wb3J0ICogYXMgcm91bmRTZWN0b3JIZWxwZXIgZnJvbSAnLi4vaGVscGVyL3JvdW5kU2VjdG9yLmpzJztcbnZhciBTZWN0b3JTaGFwZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2VjdG9yU2hhcGUoKSB7XG4gICAgICAgIHRoaXMuY3ggPSAwO1xuICAgICAgICB0aGlzLmN5ID0gMDtcbiAgICAgICAgdGhpcy5yMCA9IDA7XG4gICAgICAgIHRoaXMuciA9IDA7XG4gICAgICAgIHRoaXMuc3RhcnRBbmdsZSA9IDA7XG4gICAgICAgIHRoaXMuZW5kQW5nbGUgPSBNYXRoLlBJICogMjtcbiAgICAgICAgdGhpcy5jbG9ja3dpc2UgPSB0cnVlO1xuICAgICAgICB0aGlzLmNvcm5lclJhZGl1cyA9IDA7XG4gICAgfVxuICAgIHJldHVybiBTZWN0b3JTaGFwZTtcbn0oKSk7XG5leHBvcnQgeyBTZWN0b3JTaGFwZSB9O1xudmFyIFNlY3RvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNlY3RvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTZWN0b3Iob3B0cykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgb3B0cykgfHwgdGhpcztcbiAgICB9XG4gICAgU2VjdG9yLnByb3RvdHlwZS5nZXREZWZhdWx0U2hhcGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2VjdG9yU2hhcGUoKTtcbiAgICB9O1xuICAgIFNlY3Rvci5wcm90b3R5cGUuYnVpbGRQYXRoID0gZnVuY3Rpb24gKGN0eCwgc2hhcGUpIHtcbiAgICAgICAgcm91bmRTZWN0b3JIZWxwZXIuYnVpbGRQYXRoKGN0eCwgc2hhcGUpO1xuICAgIH07XG4gICAgU2VjdG9yLnByb3RvdHlwZS5pc1plcm9BcmVhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaGFwZS5zdGFydEFuZ2xlID09PSB0aGlzLnNoYXBlLmVuZEFuZ2xlXG4gICAgICAgICAgICB8fCB0aGlzLnNoYXBlLnIgPT09IHRoaXMuc2hhcGUucjA7XG4gICAgfTtcbiAgICByZXR1cm4gU2VjdG9yO1xufShQYXRoKSk7XG5TZWN0b3IucHJvdG90eXBlLnR5cGUgPSAnc2VjdG9yJztcbmV4cG9ydCBkZWZhdWx0IFNlY3RvcjtcbiIsImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IFBhdGggZnJvbSAnLi4vUGF0aC5qcyc7XG52YXIgUmluZ1NoYXBlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSaW5nU2hhcGUoKSB7XG4gICAgICAgIHRoaXMuY3ggPSAwO1xuICAgICAgICB0aGlzLmN5ID0gMDtcbiAgICAgICAgdGhpcy5yID0gMDtcbiAgICAgICAgdGhpcy5yMCA9IDA7XG4gICAgfVxuICAgIHJldHVybiBSaW5nU2hhcGU7XG59KCkpO1xuZXhwb3J0IHsgUmluZ1NoYXBlIH07XG52YXIgUmluZyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJpbmcsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUmluZyhvcHRzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBvcHRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBSaW5nLnByb3RvdHlwZS5nZXREZWZhdWx0U2hhcGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmluZ1NoYXBlKCk7XG4gICAgfTtcbiAgICBSaW5nLnByb3RvdHlwZS5idWlsZFBhdGggPSBmdW5jdGlvbiAoY3R4LCBzaGFwZSkge1xuICAgICAgICB2YXIgeCA9IHNoYXBlLmN4O1xuICAgICAgICB2YXIgeSA9IHNoYXBlLmN5O1xuICAgICAgICB2YXIgUEkyID0gTWF0aC5QSSAqIDI7XG4gICAgICAgIGN0eC5tb3ZlVG8oeCArIHNoYXBlLnIsIHkpO1xuICAgICAgICBjdHguYXJjKHgsIHksIHNoYXBlLnIsIDAsIFBJMiwgZmFsc2UpO1xuICAgICAgICBjdHgubW92ZVRvKHggKyBzaGFwZS5yMCwgeSk7XG4gICAgICAgIGN0eC5hcmMoeCwgeSwgc2hhcGUucjAsIDAsIFBJMiwgdHJ1ZSk7XG4gICAgfTtcbiAgICByZXR1cm4gUmluZztcbn0oUGF0aCkpO1xuUmluZy5wcm90b3R5cGUudHlwZSA9ICdyaW5nJztcbmV4cG9ydCBkZWZhdWx0IFJpbmc7XG4iLCJpbXBvcnQgeyBtaW4gYXMgdjJNaW4sIG1heCBhcyB2Mk1heCwgc2NhbGUgYXMgdjJTY2FsZSwgZGlzdGFuY2UgYXMgdjJEaXN0YW5jZSwgYWRkIGFzIHYyQWRkLCBjbG9uZSBhcyB2MkNsb25lLCBzdWIgYXMgdjJTdWIgfSBmcm9tICcuLi8uLi9jb3JlL3ZlY3Rvci5qcyc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzbW9vdGhCZXppZXIocG9pbnRzLCBzbW9vdGgsIGlzTG9vcCwgY29uc3RyYWludCkge1xuICAgIHZhciBjcHMgPSBbXTtcbiAgICB2YXIgdiA9IFtdO1xuICAgIHZhciB2MSA9IFtdO1xuICAgIHZhciB2MiA9IFtdO1xuICAgIHZhciBwcmV2UG9pbnQ7XG4gICAgdmFyIG5leHRQb2ludDtcbiAgICB2YXIgbWluO1xuICAgIHZhciBtYXg7XG4gICAgaWYgKGNvbnN0cmFpbnQpIHtcbiAgICAgICAgbWluID0gW0luZmluaXR5LCBJbmZpbml0eV07XG4gICAgICAgIG1heCA9IFstSW5maW5pdHksIC1JbmZpbml0eV07XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBwb2ludHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHYyTWluKG1pbiwgbWluLCBwb2ludHNbaV0pO1xuICAgICAgICAgICAgdjJNYXgobWF4LCBtYXgsIHBvaW50c1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgdjJNaW4obWluLCBtaW4sIGNvbnN0cmFpbnRbMF0pO1xuICAgICAgICB2Mk1heChtYXgsIG1heCwgY29uc3RyYWludFsxXSk7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBwb2ludHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIHBvaW50ID0gcG9pbnRzW2ldO1xuICAgICAgICBpZiAoaXNMb29wKSB7XG4gICAgICAgICAgICBwcmV2UG9pbnQgPSBwb2ludHNbaSA/IGkgLSAxIDogbGVuIC0gMV07XG4gICAgICAgICAgICBuZXh0UG9pbnQgPSBwb2ludHNbKGkgKyAxKSAlIGxlbl07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCBpID09PSBsZW4gLSAxKSB7XG4gICAgICAgICAgICAgICAgY3BzLnB1c2godjJDbG9uZShwb2ludHNbaV0pKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHByZXZQb2ludCA9IHBvaW50c1tpIC0gMV07XG4gICAgICAgICAgICAgICAgbmV4dFBvaW50ID0gcG9pbnRzW2kgKyAxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2MlN1Yih2LCBuZXh0UG9pbnQsIHByZXZQb2ludCk7XG4gICAgICAgIHYyU2NhbGUodiwgdiwgc21vb3RoKTtcbiAgICAgICAgdmFyIGQwID0gdjJEaXN0YW5jZShwb2ludCwgcHJldlBvaW50KTtcbiAgICAgICAgdmFyIGQxID0gdjJEaXN0YW5jZShwb2ludCwgbmV4dFBvaW50KTtcbiAgICAgICAgdmFyIHN1bSA9IGQwICsgZDE7XG4gICAgICAgIGlmIChzdW0gIT09IDApIHtcbiAgICAgICAgICAgIGQwIC89IHN1bTtcbiAgICAgICAgICAgIGQxIC89IHN1bTtcbiAgICAgICAgfVxuICAgICAgICB2MlNjYWxlKHYxLCB2LCAtZDApO1xuICAgICAgICB2MlNjYWxlKHYyLCB2LCBkMSk7XG4gICAgICAgIHZhciBjcDAgPSB2MkFkZChbXSwgcG9pbnQsIHYxKTtcbiAgICAgICAgdmFyIGNwMSA9IHYyQWRkKFtdLCBwb2ludCwgdjIpO1xuICAgICAgICBpZiAoY29uc3RyYWludCkge1xuICAgICAgICAgICAgdjJNYXgoY3AwLCBjcDAsIG1pbik7XG4gICAgICAgICAgICB2Mk1pbihjcDAsIGNwMCwgbWF4KTtcbiAgICAgICAgICAgIHYyTWF4KGNwMSwgY3AxLCBtaW4pO1xuICAgICAgICAgICAgdjJNaW4oY3AxLCBjcDEsIG1heCk7XG4gICAgICAgIH1cbiAgICAgICAgY3BzLnB1c2goY3AwKTtcbiAgICAgICAgY3BzLnB1c2goY3AxKTtcbiAgICB9XG4gICAgaWYgKGlzTG9vcCkge1xuICAgICAgICBjcHMucHVzaChjcHMuc2hpZnQoKSk7XG4gICAgfVxuICAgIHJldHVybiBjcHM7XG59XG4iLCJpbXBvcnQgc21vb3RoQmV6aWVyIGZyb20gJy4vc21vb3RoQmV6aWVyLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBidWlsZFBhdGgoY3R4LCBzaGFwZSwgY2xvc2VQYXRoKSB7XG4gICAgdmFyIHNtb290aCA9IHNoYXBlLnNtb290aDtcbiAgICB2YXIgcG9pbnRzID0gc2hhcGUucG9pbnRzO1xuICAgIGlmIChwb2ludHMgJiYgcG9pbnRzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgIGlmIChzbW9vdGgpIHtcbiAgICAgICAgICAgIHZhciBjb250cm9sUG9pbnRzID0gc21vb3RoQmV6aWVyKHBvaW50cywgc21vb3RoLCBjbG9zZVBhdGgsIHNoYXBlLnNtb290aENvbnN0cmFpbnQpO1xuICAgICAgICAgICAgY3R4Lm1vdmVUbyhwb2ludHNbMF1bMF0sIHBvaW50c1swXVsxXSk7XG4gICAgICAgICAgICB2YXIgbGVuID0gcG9pbnRzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgKGNsb3NlUGF0aCA/IGxlbiA6IGxlbiAtIDEpOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY3AxID0gY29udHJvbFBvaW50c1tpICogMl07XG4gICAgICAgICAgICAgICAgdmFyIGNwMiA9IGNvbnRyb2xQb2ludHNbaSAqIDIgKyAxXTtcbiAgICAgICAgICAgICAgICB2YXIgcCA9IHBvaW50c1soaSArIDEpICUgbGVuXTtcbiAgICAgICAgICAgICAgICBjdHguYmV6aWVyQ3VydmVUbyhjcDFbMF0sIGNwMVsxXSwgY3AyWzBdLCBjcDJbMV0sIHBbMF0sIHBbMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY3R4Lm1vdmVUbyhwb2ludHNbMF1bMF0sIHBvaW50c1swXVsxXSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMSwgbCA9IHBvaW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjdHgubGluZVRvKHBvaW50c1tpXVswXSwgcG9pbnRzW2ldWzFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjbG9zZVBhdGggJiYgY3R4LmNsb3NlUGF0aCgpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IFBhdGggZnJvbSAnLi4vUGF0aC5qcyc7XG5pbXBvcnQgKiBhcyBwb2x5SGVscGVyIGZyb20gJy4uL2hlbHBlci9wb2x5LmpzJztcbnZhciBQb2x5Z29uU2hhcGUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFBvbHlnb25TaGFwZSgpIHtcbiAgICAgICAgdGhpcy5wb2ludHMgPSBudWxsO1xuICAgICAgICB0aGlzLnNtb290aCA9IDA7XG4gICAgICAgIHRoaXMuc21vb3RoQ29uc3RyYWludCA9IG51bGw7XG4gICAgfVxuICAgIHJldHVybiBQb2x5Z29uU2hhcGU7XG59KCkpO1xuZXhwb3J0IHsgUG9seWdvblNoYXBlIH07XG52YXIgUG9seWdvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBvbHlnb24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUG9seWdvbihvcHRzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBvcHRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXREZWZhdWx0U2hhcGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUG9seWdvblNoYXBlKCk7XG4gICAgfTtcbiAgICBQb2x5Z29uLnByb3RvdHlwZS5idWlsZFBhdGggPSBmdW5jdGlvbiAoY3R4LCBzaGFwZSkge1xuICAgICAgICBwb2x5SGVscGVyLmJ1aWxkUGF0aChjdHgsIHNoYXBlLCB0cnVlKTtcbiAgICB9O1xuICAgIHJldHVybiBQb2x5Z29uO1xufShQYXRoKSk7XG47XG5Qb2x5Z29uLnByb3RvdHlwZS50eXBlID0gJ3BvbHlnb24nO1xuZXhwb3J0IGRlZmF1bHQgUG9seWdvbjtcbiIsImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IFBhdGggZnJvbSAnLi4vUGF0aC5qcyc7XG5pbXBvcnQgKiBhcyBwb2x5SGVscGVyIGZyb20gJy4uL2hlbHBlci9wb2x5LmpzJztcbnZhciBQb2x5bGluZVNoYXBlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBQb2x5bGluZVNoYXBlKCkge1xuICAgICAgICB0aGlzLnBvaW50cyA9IG51bGw7XG4gICAgICAgIHRoaXMucGVyY2VudCA9IDE7XG4gICAgICAgIHRoaXMuc21vb3RoID0gMDtcbiAgICAgICAgdGhpcy5zbW9vdGhDb25zdHJhaW50ID0gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIFBvbHlsaW5lU2hhcGU7XG59KCkpO1xuZXhwb3J0IHsgUG9seWxpbmVTaGFwZSB9O1xudmFyIFBvbHlsaW5lID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUG9seWxpbmUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUG9seWxpbmUob3B0cykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgb3B0cykgfHwgdGhpcztcbiAgICB9XG4gICAgUG9seWxpbmUucHJvdG90eXBlLmdldERlZmF1bHRTdHlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0cm9rZTogJyMwMDAnLFxuICAgICAgICAgICAgZmlsbDogbnVsbFxuICAgICAgICB9O1xuICAgIH07XG4gICAgUG9seWxpbmUucHJvdG90eXBlLmdldERlZmF1bHRTaGFwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQb2x5bGluZVNoYXBlKCk7XG4gICAgfTtcbiAgICBQb2x5bGluZS5wcm90b3R5cGUuYnVpbGRQYXRoID0gZnVuY3Rpb24gKGN0eCwgc2hhcGUpIHtcbiAgICAgICAgcG9seUhlbHBlci5idWlsZFBhdGgoY3R4LCBzaGFwZSwgZmFsc2UpO1xuICAgIH07XG4gICAgcmV0dXJuIFBvbHlsaW5lO1xufShQYXRoKSk7XG5Qb2x5bGluZS5wcm90b3R5cGUudHlwZSA9ICdwb2x5bGluZSc7XG5leHBvcnQgZGVmYXVsdCBQb2x5bGluZTtcbiIsImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IFBhdGggZnJvbSAnLi4vUGF0aC5qcyc7XG5pbXBvcnQgeyBzdWJQaXhlbE9wdGltaXplTGluZSB9IGZyb20gJy4uL2hlbHBlci9zdWJQaXhlbE9wdGltaXplLmpzJztcbnZhciBzdWJQaXhlbE9wdGltaXplT3V0cHV0U2hhcGUgPSB7fTtcbnZhciBMaW5lU2hhcGUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIExpbmVTaGFwZSgpIHtcbiAgICAgICAgdGhpcy54MSA9IDA7XG4gICAgICAgIHRoaXMueTEgPSAwO1xuICAgICAgICB0aGlzLngyID0gMDtcbiAgICAgICAgdGhpcy55MiA9IDA7XG4gICAgICAgIHRoaXMucGVyY2VudCA9IDE7XG4gICAgfVxuICAgIHJldHVybiBMaW5lU2hhcGU7XG59KCkpO1xuZXhwb3J0IHsgTGluZVNoYXBlIH07XG52YXIgTGluZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKExpbmUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTGluZShvcHRzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBvcHRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBMaW5lLnByb3RvdHlwZS5nZXREZWZhdWx0U3R5bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdHJva2U6ICcjMDAwJyxcbiAgICAgICAgICAgIGZpbGw6IG51bGxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIExpbmUucHJvdG90eXBlLmdldERlZmF1bHRTaGFwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMaW5lU2hhcGUoKTtcbiAgICB9O1xuICAgIExpbmUucHJvdG90eXBlLmJ1aWxkUGF0aCA9IGZ1bmN0aW9uIChjdHgsIHNoYXBlKSB7XG4gICAgICAgIHZhciB4MTtcbiAgICAgICAgdmFyIHkxO1xuICAgICAgICB2YXIgeDI7XG4gICAgICAgIHZhciB5MjtcbiAgICAgICAgaWYgKHRoaXMuc3ViUGl4ZWxPcHRpbWl6ZSkge1xuICAgICAgICAgICAgdmFyIG9wdGltaXplZFNoYXBlID0gc3ViUGl4ZWxPcHRpbWl6ZUxpbmUoc3ViUGl4ZWxPcHRpbWl6ZU91dHB1dFNoYXBlLCBzaGFwZSwgdGhpcy5zdHlsZSk7XG4gICAgICAgICAgICB4MSA9IG9wdGltaXplZFNoYXBlLngxO1xuICAgICAgICAgICAgeTEgPSBvcHRpbWl6ZWRTaGFwZS55MTtcbiAgICAgICAgICAgIHgyID0gb3B0aW1pemVkU2hhcGUueDI7XG4gICAgICAgICAgICB5MiA9IG9wdGltaXplZFNoYXBlLnkyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgeDEgPSBzaGFwZS54MTtcbiAgICAgICAgICAgIHkxID0gc2hhcGUueTE7XG4gICAgICAgICAgICB4MiA9IHNoYXBlLngyO1xuICAgICAgICAgICAgeTIgPSBzaGFwZS55MjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGVyY2VudCA9IHNoYXBlLnBlcmNlbnQ7XG4gICAgICAgIGlmIChwZXJjZW50ID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY3R4Lm1vdmVUbyh4MSwgeTEpO1xuICAgICAgICBpZiAocGVyY2VudCA8IDEpIHtcbiAgICAgICAgICAgIHgyID0geDEgKiAoMSAtIHBlcmNlbnQpICsgeDIgKiBwZXJjZW50O1xuICAgICAgICAgICAgeTIgPSB5MSAqICgxIC0gcGVyY2VudCkgKyB5MiAqIHBlcmNlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmxpbmVUbyh4MiwgeTIpO1xuICAgIH07XG4gICAgTGluZS5wcm90b3R5cGUucG9pbnRBdCA9IGZ1bmN0aW9uIChwKSB7XG4gICAgICAgIHZhciBzaGFwZSA9IHRoaXMuc2hhcGU7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBzaGFwZS54MSAqICgxIC0gcCkgKyBzaGFwZS54MiAqIHAsXG4gICAgICAgICAgICBzaGFwZS55MSAqICgxIC0gcCkgKyBzaGFwZS55MiAqIHBcbiAgICAgICAgXTtcbiAgICB9O1xuICAgIHJldHVybiBMaW5lO1xufShQYXRoKSk7XG5MaW5lLnByb3RvdHlwZS50eXBlID0gJ2xpbmUnO1xuZXhwb3J0IGRlZmF1bHQgTGluZTtcbiIsImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IFBhdGggZnJvbSAnLi4vUGF0aC5qcyc7XG5pbXBvcnQgKiBhcyB2ZWMyIGZyb20gJy4uLy4uL2NvcmUvdmVjdG9yLmpzJztcbmltcG9ydCB7IHF1YWRyYXRpY1N1YmRpdmlkZSwgY3ViaWNTdWJkaXZpZGUsIHF1YWRyYXRpY0F0LCBjdWJpY0F0LCBxdWFkcmF0aWNEZXJpdmF0aXZlQXQsIGN1YmljRGVyaXZhdGl2ZUF0IH0gZnJvbSAnLi4vLi4vY29yZS9jdXJ2ZS5qcyc7XG52YXIgb3V0ID0gW107XG52YXIgQmV6aWVyQ3VydmVTaGFwZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQmV6aWVyQ3VydmVTaGFwZSgpIHtcbiAgICAgICAgdGhpcy54MSA9IDA7XG4gICAgICAgIHRoaXMueTEgPSAwO1xuICAgICAgICB0aGlzLngyID0gMDtcbiAgICAgICAgdGhpcy55MiA9IDA7XG4gICAgICAgIHRoaXMuY3B4MSA9IDA7XG4gICAgICAgIHRoaXMuY3B5MSA9IDA7XG4gICAgICAgIHRoaXMucGVyY2VudCA9IDE7XG4gICAgfVxuICAgIHJldHVybiBCZXppZXJDdXJ2ZVNoYXBlO1xufSgpKTtcbmV4cG9ydCB7IEJlemllckN1cnZlU2hhcGUgfTtcbmZ1bmN0aW9uIHNvbWVWZWN0b3JBdChzaGFwZSwgdCwgaXNUYW5nZW50KSB7XG4gICAgdmFyIGNweDIgPSBzaGFwZS5jcHgyO1xuICAgIHZhciBjcHkyID0gc2hhcGUuY3B5MjtcbiAgICBpZiAoY3B4MiAhPSBudWxsIHx8IGNweTIgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgKGlzVGFuZ2VudCA/IGN1YmljRGVyaXZhdGl2ZUF0IDogY3ViaWNBdCkoc2hhcGUueDEsIHNoYXBlLmNweDEsIHNoYXBlLmNweDIsIHNoYXBlLngyLCB0KSxcbiAgICAgICAgICAgIChpc1RhbmdlbnQgPyBjdWJpY0Rlcml2YXRpdmVBdCA6IGN1YmljQXQpKHNoYXBlLnkxLCBzaGFwZS5jcHkxLCBzaGFwZS5jcHkyLCBzaGFwZS55MiwgdClcbiAgICAgICAgXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAoaXNUYW5nZW50ID8gcXVhZHJhdGljRGVyaXZhdGl2ZUF0IDogcXVhZHJhdGljQXQpKHNoYXBlLngxLCBzaGFwZS5jcHgxLCBzaGFwZS54MiwgdCksXG4gICAgICAgICAgICAoaXNUYW5nZW50ID8gcXVhZHJhdGljRGVyaXZhdGl2ZUF0IDogcXVhZHJhdGljQXQpKHNoYXBlLnkxLCBzaGFwZS5jcHkxLCBzaGFwZS55MiwgdClcbiAgICAgICAgXTtcbiAgICB9XG59XG52YXIgQmV6aWVyQ3VydmUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCZXppZXJDdXJ2ZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBCZXppZXJDdXJ2ZShvcHRzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBvcHRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBCZXppZXJDdXJ2ZS5wcm90b3R5cGUuZ2V0RGVmYXVsdFN0eWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3Ryb2tlOiAnIzAwMCcsXG4gICAgICAgICAgICBmaWxsOiBudWxsXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBCZXppZXJDdXJ2ZS5wcm90b3R5cGUuZ2V0RGVmYXVsdFNoYXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IEJlemllckN1cnZlU2hhcGUoKTtcbiAgICB9O1xuICAgIEJlemllckN1cnZlLnByb3RvdHlwZS5idWlsZFBhdGggPSBmdW5jdGlvbiAoY3R4LCBzaGFwZSkge1xuICAgICAgICB2YXIgeDEgPSBzaGFwZS54MTtcbiAgICAgICAgdmFyIHkxID0gc2hhcGUueTE7XG4gICAgICAgIHZhciB4MiA9IHNoYXBlLngyO1xuICAgICAgICB2YXIgeTIgPSBzaGFwZS55MjtcbiAgICAgICAgdmFyIGNweDEgPSBzaGFwZS5jcHgxO1xuICAgICAgICB2YXIgY3B5MSA9IHNoYXBlLmNweTE7XG4gICAgICAgIHZhciBjcHgyID0gc2hhcGUuY3B4MjtcbiAgICAgICAgdmFyIGNweTIgPSBzaGFwZS5jcHkyO1xuICAgICAgICB2YXIgcGVyY2VudCA9IHNoYXBlLnBlcmNlbnQ7XG4gICAgICAgIGlmIChwZXJjZW50ID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY3R4Lm1vdmVUbyh4MSwgeTEpO1xuICAgICAgICBpZiAoY3B4MiA9PSBudWxsIHx8IGNweTIgPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHBlcmNlbnQgPCAxKSB7XG4gICAgICAgICAgICAgICAgcXVhZHJhdGljU3ViZGl2aWRlKHgxLCBjcHgxLCB4MiwgcGVyY2VudCwgb3V0KTtcbiAgICAgICAgICAgICAgICBjcHgxID0gb3V0WzFdO1xuICAgICAgICAgICAgICAgIHgyID0gb3V0WzJdO1xuICAgICAgICAgICAgICAgIHF1YWRyYXRpY1N1YmRpdmlkZSh5MSwgY3B5MSwgeTIsIHBlcmNlbnQsIG91dCk7XG4gICAgICAgICAgICAgICAgY3B5MSA9IG91dFsxXTtcbiAgICAgICAgICAgICAgICB5MiA9IG91dFsyXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKGNweDEsIGNweTEsIHgyLCB5Mik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAocGVyY2VudCA8IDEpIHtcbiAgICAgICAgICAgICAgICBjdWJpY1N1YmRpdmlkZSh4MSwgY3B4MSwgY3B4MiwgeDIsIHBlcmNlbnQsIG91dCk7XG4gICAgICAgICAgICAgICAgY3B4MSA9IG91dFsxXTtcbiAgICAgICAgICAgICAgICBjcHgyID0gb3V0WzJdO1xuICAgICAgICAgICAgICAgIHgyID0gb3V0WzNdO1xuICAgICAgICAgICAgICAgIGN1YmljU3ViZGl2aWRlKHkxLCBjcHkxLCBjcHkyLCB5MiwgcGVyY2VudCwgb3V0KTtcbiAgICAgICAgICAgICAgICBjcHkxID0gb3V0WzFdO1xuICAgICAgICAgICAgICAgIGNweTIgPSBvdXRbMl07XG4gICAgICAgICAgICAgICAgeTIgPSBvdXRbM107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdHguYmV6aWVyQ3VydmVUbyhjcHgxLCBjcHkxLCBjcHgyLCBjcHkyLCB4MiwgeTIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBCZXppZXJDdXJ2ZS5wcm90b3R5cGUucG9pbnRBdCA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHJldHVybiBzb21lVmVjdG9yQXQodGhpcy5zaGFwZSwgdCwgZmFsc2UpO1xuICAgIH07XG4gICAgQmV6aWVyQ3VydmUucHJvdG90eXBlLnRhbmdlbnRBdCA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHZhciBwID0gc29tZVZlY3RvckF0KHRoaXMuc2hhcGUsIHQsIHRydWUpO1xuICAgICAgICByZXR1cm4gdmVjMi5ub3JtYWxpemUocCwgcCk7XG4gICAgfTtcbiAgICByZXR1cm4gQmV6aWVyQ3VydmU7XG59KFBhdGgpKTtcbjtcbkJlemllckN1cnZlLnByb3RvdHlwZS50eXBlID0gJ2Jlemllci1jdXJ2ZSc7XG5leHBvcnQgZGVmYXVsdCBCZXppZXJDdXJ2ZTtcbiIsImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IFBhdGggZnJvbSAnLi4vUGF0aC5qcyc7XG52YXIgQXJjU2hhcGUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFyY1NoYXBlKCkge1xuICAgICAgICB0aGlzLmN4ID0gMDtcbiAgICAgICAgdGhpcy5jeSA9IDA7XG4gICAgICAgIHRoaXMuciA9IDA7XG4gICAgICAgIHRoaXMuc3RhcnRBbmdsZSA9IDA7XG4gICAgICAgIHRoaXMuZW5kQW5nbGUgPSBNYXRoLlBJICogMjtcbiAgICAgICAgdGhpcy5jbG9ja3dpc2UgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gQXJjU2hhcGU7XG59KCkpO1xuZXhwb3J0IHsgQXJjU2hhcGUgfTtcbnZhciBBcmMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBcmMsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQXJjKG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIG9wdHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIEFyYy5wcm90b3R5cGUuZ2V0RGVmYXVsdFN0eWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3Ryb2tlOiAnIzAwMCcsXG4gICAgICAgICAgICBmaWxsOiBudWxsXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBBcmMucHJvdG90eXBlLmdldERlZmF1bHRTaGFwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBcmNTaGFwZSgpO1xuICAgIH07XG4gICAgQXJjLnByb3RvdHlwZS5idWlsZFBhdGggPSBmdW5jdGlvbiAoY3R4LCBzaGFwZSkge1xuICAgICAgICB2YXIgeCA9IHNoYXBlLmN4O1xuICAgICAgICB2YXIgeSA9IHNoYXBlLmN5O1xuICAgICAgICB2YXIgciA9IE1hdGgubWF4KHNoYXBlLnIsIDApO1xuICAgICAgICB2YXIgc3RhcnRBbmdsZSA9IHNoYXBlLnN0YXJ0QW5nbGU7XG4gICAgICAgIHZhciBlbmRBbmdsZSA9IHNoYXBlLmVuZEFuZ2xlO1xuICAgICAgICB2YXIgY2xvY2t3aXNlID0gc2hhcGUuY2xvY2t3aXNlO1xuICAgICAgICB2YXIgdW5pdFggPSBNYXRoLmNvcyhzdGFydEFuZ2xlKTtcbiAgICAgICAgdmFyIHVuaXRZID0gTWF0aC5zaW4oc3RhcnRBbmdsZSk7XG4gICAgICAgIGN0eC5tb3ZlVG8odW5pdFggKiByICsgeCwgdW5pdFkgKiByICsgeSk7XG4gICAgICAgIGN0eC5hcmMoeCwgeSwgciwgc3RhcnRBbmdsZSwgZW5kQW5nbGUsICFjbG9ja3dpc2UpO1xuICAgIH07XG4gICAgcmV0dXJuIEFyYztcbn0oUGF0aCkpO1xuQXJjLnByb3RvdHlwZS50eXBlID0gJ2FyYyc7XG5leHBvcnQgZGVmYXVsdCBBcmM7XG4iLCJpbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCBQYXRoIGZyb20gJy4vUGF0aC5qcyc7XG52YXIgQ29tcG91bmRQYXRoID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29tcG91bmRQYXRoLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIENvbXBvdW5kUGF0aCgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnR5cGUgPSAnY29tcG91bmQnO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIENvbXBvdW5kUGF0aC5wcm90b3R5cGUuX3VwZGF0ZVBhdGhEaXJ0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBhdGhzID0gdGhpcy5zaGFwZS5wYXRocztcbiAgICAgICAgdmFyIGRpcnR5UGF0aCA9IHRoaXMuc2hhcGVDaGFuZ2VkKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGRpcnR5UGF0aCA9IGRpcnR5UGF0aCB8fCBwYXRoc1tpXS5zaGFwZUNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlydHlQYXRoKSB7XG4gICAgICAgICAgICB0aGlzLmRpcnR5U2hhcGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ29tcG91bmRQYXRoLnByb3RvdHlwZS5iZWZvcmVCcnVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlUGF0aERpcnR5KCk7XG4gICAgICAgIHZhciBwYXRocyA9IHRoaXMuc2hhcGUucGF0aHMgfHwgW107XG4gICAgICAgIHZhciBzY2FsZSA9IHRoaXMuZ2V0R2xvYmFsU2NhbGUoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRocy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKCFwYXRoc1tpXS5wYXRoKSB7XG4gICAgICAgICAgICAgICAgcGF0aHNbaV0uY3JlYXRlUGF0aFByb3h5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXRoc1tpXS5wYXRoLnNldFNjYWxlKHNjYWxlWzBdLCBzY2FsZVsxXSwgcGF0aHNbaV0uc2VnbWVudElnbm9yZVRocmVzaG9sZCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbXBvdW5kUGF0aC5wcm90b3R5cGUuYnVpbGRQYXRoID0gZnVuY3Rpb24gKGN0eCwgc2hhcGUpIHtcbiAgICAgICAgdmFyIHBhdGhzID0gc2hhcGUucGF0aHMgfHwgW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHBhdGhzW2ldLmJ1aWxkUGF0aChjdHgsIHBhdGhzW2ldLnNoYXBlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ29tcG91bmRQYXRoLnByb3RvdHlwZS5hZnRlckJydXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGF0aHMgPSB0aGlzLnNoYXBlLnBhdGhzIHx8IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGhzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBwYXRoc1tpXS5wYXRoVXBkYXRlZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDb21wb3VuZFBhdGgucHJvdG90eXBlLmdldEJvdW5kaW5nUmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlUGF0aERpcnR5LmNhbGwodGhpcyk7XG4gICAgICAgIHJldHVybiBQYXRoLnByb3RvdHlwZS5nZXRCb3VuZGluZ1JlY3QuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIHJldHVybiBDb21wb3VuZFBhdGg7XG59KFBhdGgpKTtcbmV4cG9ydCBkZWZhdWx0IENvbXBvdW5kUGF0aDtcbiIsInZhciBHcmFkaWVudCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gR3JhZGllbnQoY29sb3JTdG9wcykge1xuICAgICAgICB0aGlzLmNvbG9yU3RvcHMgPSBjb2xvclN0b3BzIHx8IFtdO1xuICAgIH1cbiAgICBHcmFkaWVudC5wcm90b3R5cGUuYWRkQ29sb3JTdG9wID0gZnVuY3Rpb24gKG9mZnNldCwgY29sb3IpIHtcbiAgICAgICAgdGhpcy5jb2xvclN0b3BzLnB1c2goe1xuICAgICAgICAgICAgb2Zmc2V0OiBvZmZzZXQsXG4gICAgICAgICAgICBjb2xvcjogY29sb3JcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gR3JhZGllbnQ7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgR3JhZGllbnQ7XG4iLCJpbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCBHcmFkaWVudCBmcm9tICcuL0dyYWRpZW50LmpzJztcbnZhciBMaW5lYXJHcmFkaWVudCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKExpbmVhckdyYWRpZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIExpbmVhckdyYWRpZW50KHgsIHksIHgyLCB5MiwgY29sb3JTdG9wcywgZ2xvYmFsQ29vcmQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29sb3JTdG9wcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMueCA9IHggPT0gbnVsbCA/IDAgOiB4O1xuICAgICAgICBfdGhpcy55ID0geSA9PSBudWxsID8gMCA6IHk7XG4gICAgICAgIF90aGlzLngyID0geDIgPT0gbnVsbCA/IDEgOiB4MjtcbiAgICAgICAgX3RoaXMueTIgPSB5MiA9PSBudWxsID8gMCA6IHkyO1xuICAgICAgICBfdGhpcy50eXBlID0gJ2xpbmVhcic7XG4gICAgICAgIF90aGlzLmdsb2JhbCA9IGdsb2JhbENvb3JkIHx8IGZhbHNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBMaW5lYXJHcmFkaWVudDtcbn0oR3JhZGllbnQpKTtcbmV4cG9ydCBkZWZhdWx0IExpbmVhckdyYWRpZW50O1xuO1xuIiwiaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgR3JhZGllbnQgZnJvbSAnLi9HcmFkaWVudC5qcyc7XG52YXIgUmFkaWFsR3JhZGllbnQgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSYWRpYWxHcmFkaWVudCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBSYWRpYWxHcmFkaWVudCh4LCB5LCByLCBjb2xvclN0b3BzLCBnbG9iYWxDb29yZCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb2xvclN0b3BzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy54ID0geCA9PSBudWxsID8gMC41IDogeDtcbiAgICAgICAgX3RoaXMueSA9IHkgPT0gbnVsbCA/IDAuNSA6IHk7XG4gICAgICAgIF90aGlzLnIgPSByID09IG51bGwgPyAwLjUgOiByO1xuICAgICAgICBfdGhpcy50eXBlID0gJ3JhZGlhbCc7XG4gICAgICAgIF90aGlzLmdsb2JhbCA9IGdsb2JhbENvb3JkIHx8IGZhbHNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBSYWRpYWxHcmFkaWVudDtcbn0oR3JhZGllbnQpKTtcbmV4cG9ydCBkZWZhdWx0IFJhZGlhbEdyYWRpZW50O1xuIiwiaW1wb3J0IFBvaW50IGZyb20gJy4vUG9pbnQuanMnO1xudmFyIGV4dGVudCA9IFswLCAwXTtcbnZhciBleHRlbnQyID0gWzAsIDBdO1xudmFyIG1pblR2ID0gbmV3IFBvaW50KCk7XG52YXIgbWF4VHYgPSBuZXcgUG9pbnQoKTtcbnZhciBPcmllbnRlZEJvdW5kaW5nUmVjdCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gT3JpZW50ZWRCb3VuZGluZ1JlY3QocmVjdCwgdHJhbnNmb3JtKSB7XG4gICAgICAgIHRoaXMuX2Nvcm5lcnMgPSBbXTtcbiAgICAgICAgdGhpcy5fYXhlcyA9IFtdO1xuICAgICAgICB0aGlzLl9vcmlnaW4gPSBbMCwgMF07XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLl9jb3JuZXJzW2ldID0gbmV3IFBvaW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuX2F4ZXNbaV0gPSBuZXcgUG9pbnQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVjdCkge1xuICAgICAgICAgICAgdGhpcy5mcm9tQm91bmRpbmdSZWN0KHJlY3QsIHRyYW5zZm9ybSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgT3JpZW50ZWRCb3VuZGluZ1JlY3QucHJvdG90eXBlLmZyb21Cb3VuZGluZ1JlY3QgPSBmdW5jdGlvbiAocmVjdCwgdHJhbnNmb3JtKSB7XG4gICAgICAgIHZhciBjb3JuZXJzID0gdGhpcy5fY29ybmVycztcbiAgICAgICAgdmFyIGF4ZXMgPSB0aGlzLl9heGVzO1xuICAgICAgICB2YXIgeCA9IHJlY3QueDtcbiAgICAgICAgdmFyIHkgPSByZWN0Lnk7XG4gICAgICAgIHZhciB4MiA9IHggKyByZWN0LndpZHRoO1xuICAgICAgICB2YXIgeTIgPSB5ICsgcmVjdC5oZWlnaHQ7XG4gICAgICAgIGNvcm5lcnNbMF0uc2V0KHgsIHkpO1xuICAgICAgICBjb3JuZXJzWzFdLnNldCh4MiwgeSk7XG4gICAgICAgIGNvcm5lcnNbMl0uc2V0KHgyLCB5Mik7XG4gICAgICAgIGNvcm5lcnNbM10uc2V0KHgsIHkyKTtcbiAgICAgICAgaWYgKHRyYW5zZm9ybSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb3JuZXJzW2ldLnRyYW5zZm9ybSh0cmFuc2Zvcm0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFBvaW50LnN1YihheGVzWzBdLCBjb3JuZXJzWzFdLCBjb3JuZXJzWzBdKTtcbiAgICAgICAgUG9pbnQuc3ViKGF4ZXNbMV0sIGNvcm5lcnNbM10sIGNvcm5lcnNbMF0pO1xuICAgICAgICBheGVzWzBdLm5vcm1hbGl6ZSgpO1xuICAgICAgICBheGVzWzFdLm5vcm1hbGl6ZSgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDI7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5fb3JpZ2luW2ldID0gYXhlc1tpXS5kb3QoY29ybmVyc1swXSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE9yaWVudGVkQm91bmRpbmdSZWN0LnByb3RvdHlwZS5pbnRlcnNlY3QgPSBmdW5jdGlvbiAob3RoZXIsIG10dikge1xuICAgICAgICB2YXIgb3ZlcmxhcHBlZCA9IHRydWU7XG4gICAgICAgIHZhciBub010diA9ICFtdHY7XG4gICAgICAgIG1pblR2LnNldChJbmZpbml0eSwgSW5maW5pdHkpO1xuICAgICAgICBtYXhUdi5zZXQoMCwgMCk7XG4gICAgICAgIGlmICghdGhpcy5faW50ZXJzZWN0Q2hlY2tPbmVTaWRlKHRoaXMsIG90aGVyLCBtaW5UdiwgbWF4VHYsIG5vTXR2LCAxKSkge1xuICAgICAgICAgICAgb3ZlcmxhcHBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKG5vTXR2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG92ZXJsYXBwZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9pbnRlcnNlY3RDaGVja09uZVNpZGUob3RoZXIsIHRoaXMsIG1pblR2LCBtYXhUdiwgbm9NdHYsIC0xKSkge1xuICAgICAgICAgICAgb3ZlcmxhcHBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKG5vTXR2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG92ZXJsYXBwZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFub010dikge1xuICAgICAgICAgICAgUG9pbnQuY29weShtdHYsIG92ZXJsYXBwZWQgPyBtaW5UdiA6IG1heFR2KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3ZlcmxhcHBlZDtcbiAgICB9O1xuICAgIE9yaWVudGVkQm91bmRpbmdSZWN0LnByb3RvdHlwZS5faW50ZXJzZWN0Q2hlY2tPbmVTaWRlID0gZnVuY3Rpb24gKHNlbGYsIG90aGVyLCBtaW5UdiwgbWF4VHYsIG5vTXR2LCBpbnZlcnNlKSB7XG4gICAgICAgIHZhciBvdmVybGFwcGVkID0gdHJ1ZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBheGlzID0gdGhpcy5fYXhlc1tpXTtcbiAgICAgICAgICAgIHRoaXMuX2dldFByb2pNaW5NYXhPbkF4aXMoaSwgc2VsZi5fY29ybmVycywgZXh0ZW50KTtcbiAgICAgICAgICAgIHRoaXMuX2dldFByb2pNaW5NYXhPbkF4aXMoaSwgb3RoZXIuX2Nvcm5lcnMsIGV4dGVudDIpO1xuICAgICAgICAgICAgaWYgKGV4dGVudFsxXSA8IGV4dGVudDJbMF0gfHwgZXh0ZW50WzBdID4gZXh0ZW50MlsxXSkge1xuICAgICAgICAgICAgICAgIG92ZXJsYXBwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAobm9NdHYpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG92ZXJsYXBwZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBkaXN0MCA9IE1hdGguYWJzKGV4dGVudDJbMF0gLSBleHRlbnRbMV0pO1xuICAgICAgICAgICAgICAgIHZhciBkaXN0MSA9IE1hdGguYWJzKGV4dGVudFswXSAtIGV4dGVudDJbMV0pO1xuICAgICAgICAgICAgICAgIGlmIChNYXRoLm1pbihkaXN0MCwgZGlzdDEpID4gbWF4VHYubGVuKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3QwIDwgZGlzdDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFBvaW50LnNjYWxlKG1heFR2LCBheGlzLCAtZGlzdDAgKiBpbnZlcnNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFBvaW50LnNjYWxlKG1heFR2LCBheGlzLCBkaXN0MSAqIGludmVyc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobWluVHYpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGlzdDAgPSBNYXRoLmFicyhleHRlbnQyWzBdIC0gZXh0ZW50WzFdKTtcbiAgICAgICAgICAgICAgICB2YXIgZGlzdDEgPSBNYXRoLmFicyhleHRlbnRbMF0gLSBleHRlbnQyWzFdKTtcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5taW4oZGlzdDAsIGRpc3QxKSA8IG1pblR2LmxlbigpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkaXN0MCA8IGRpc3QxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBQb2ludC5zY2FsZShtaW5UdiwgYXhpcywgZGlzdDAgKiBpbnZlcnNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFBvaW50LnNjYWxlKG1pblR2LCBheGlzLCAtZGlzdDEgKiBpbnZlcnNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3ZlcmxhcHBlZDtcbiAgICB9O1xuICAgIE9yaWVudGVkQm91bmRpbmdSZWN0LnByb3RvdHlwZS5fZ2V0UHJvak1pbk1heE9uQXhpcyA9IGZ1bmN0aW9uIChkaW0sIGNvcm5lcnMsIG91dCkge1xuICAgICAgICB2YXIgYXhpcyA9IHRoaXMuX2F4ZXNbZGltXTtcbiAgICAgICAgdmFyIG9yaWdpbiA9IHRoaXMuX29yaWdpbjtcbiAgICAgICAgdmFyIHByb2ogPSBjb3JuZXJzWzBdLmRvdChheGlzKSArIG9yaWdpbltkaW1dO1xuICAgICAgICB2YXIgbWluID0gcHJvajtcbiAgICAgICAgdmFyIG1heCA9IHByb2o7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgY29ybmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHByb2pfMSA9IGNvcm5lcnNbaV0uZG90KGF4aXMpICsgb3JpZ2luW2RpbV07XG4gICAgICAgICAgICBtaW4gPSBNYXRoLm1pbihwcm9qXzEsIG1pbik7XG4gICAgICAgICAgICBtYXggPSBNYXRoLm1heChwcm9qXzEsIG1heCk7XG4gICAgICAgIH1cbiAgICAgICAgb3V0WzBdID0gbWluO1xuICAgICAgICBvdXRbMV0gPSBtYXg7XG4gICAgfTtcbiAgICByZXR1cm4gT3JpZW50ZWRCb3VuZGluZ1JlY3Q7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgT3JpZW50ZWRCb3VuZGluZ1JlY3Q7XG4iLCJpbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCBEaXNwbGF5YmxlIGZyb20gJy4vRGlzcGxheWFibGUuanMnO1xuaW1wb3J0IEJvdW5kaW5nUmVjdCBmcm9tICcuLi9jb3JlL0JvdW5kaW5nUmVjdC5qcyc7XG52YXIgbSA9IFtdO1xudmFyIEluY3JlbWVudGFsRGlzcGxheWFibGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJbmNyZW1lbnRhbERpc3BsYXlhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEluY3JlbWVudGFsRGlzcGxheWFibGUoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5ub3RDbGVhciA9IHRydWU7XG4gICAgICAgIF90aGlzLmluY3JlbWVudGFsID0gdHJ1ZTtcbiAgICAgICAgX3RoaXMuX2Rpc3BsYXlhYmxlcyA9IFtdO1xuICAgICAgICBfdGhpcy5fdGVtcG9yYXJ5RGlzcGxheWFibGVzID0gW107XG4gICAgICAgIF90aGlzLl9jdXJzb3IgPSAwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIEluY3JlbWVudGFsRGlzcGxheWFibGUucHJvdG90eXBlLnRyYXZlcnNlID0gZnVuY3Rpb24gKGNiLCBjb250ZXh0KSB7XG4gICAgICAgIGNiLmNhbGwoY29udGV4dCwgdGhpcyk7XG4gICAgfTtcbiAgICBJbmNyZW1lbnRhbERpc3BsYXlhYmxlLnByb3RvdHlwZS51c2VTdHlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdHlsZSA9IHt9O1xuICAgIH07XG4gICAgSW5jcmVtZW50YWxEaXNwbGF5YWJsZS5wcm90b3R5cGUuZ2V0Q3Vyc29yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY3Vyc29yO1xuICAgIH07XG4gICAgSW5jcmVtZW50YWxEaXNwbGF5YWJsZS5wcm90b3R5cGUuaW5uZXJBZnRlckJydXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9jdXJzb3IgPSB0aGlzLl9kaXNwbGF5YWJsZXMubGVuZ3RoO1xuICAgIH07XG4gICAgSW5jcmVtZW50YWxEaXNwbGF5YWJsZS5wcm90b3R5cGUuY2xlYXJEaXNwbGF5YmxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fZGlzcGxheWFibGVzID0gW107XG4gICAgICAgIHRoaXMuX3RlbXBvcmFyeURpc3BsYXlhYmxlcyA9IFtdO1xuICAgICAgICB0aGlzLl9jdXJzb3IgPSAwO1xuICAgICAgICB0aGlzLm1hcmtSZWRyYXcoKTtcbiAgICAgICAgdGhpcy5ub3RDbGVhciA9IGZhbHNlO1xuICAgIH07XG4gICAgSW5jcmVtZW50YWxEaXNwbGF5YWJsZS5wcm90b3R5cGUuY2xlYXJUZW1wb3JhbERpc3BsYXlhYmxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fdGVtcG9yYXJ5RGlzcGxheWFibGVzID0gW107XG4gICAgfTtcbiAgICBJbmNyZW1lbnRhbERpc3BsYXlhYmxlLnByb3RvdHlwZS5hZGREaXNwbGF5YWJsZSA9IGZ1bmN0aW9uIChkaXNwbGF5YWJsZSwgbm90UGVyc2lzdGVudCkge1xuICAgICAgICBpZiAobm90UGVyc2lzdGVudCkge1xuICAgICAgICAgICAgdGhpcy5fdGVtcG9yYXJ5RGlzcGxheWFibGVzLnB1c2goZGlzcGxheWFibGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fZGlzcGxheWFibGVzLnB1c2goZGlzcGxheWFibGUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWFya1JlZHJhdygpO1xuICAgIH07XG4gICAgSW5jcmVtZW50YWxEaXNwbGF5YWJsZS5wcm90b3R5cGUuYWRkRGlzcGxheWFibGVzID0gZnVuY3Rpb24gKGRpc3BsYXlhYmxlcywgbm90UGVyc2lzdGVudCkge1xuICAgICAgICBub3RQZXJzaXN0ZW50ID0gbm90UGVyc2lzdGVudCB8fCBmYWxzZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaXNwbGF5YWJsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuYWRkRGlzcGxheWFibGUoZGlzcGxheWFibGVzW2ldLCBub3RQZXJzaXN0ZW50KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgSW5jcmVtZW50YWxEaXNwbGF5YWJsZS5wcm90b3R5cGUuZ2V0RGlzcGxheWFibGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGlzcGxheWFibGVzO1xuICAgIH07XG4gICAgSW5jcmVtZW50YWxEaXNwbGF5YWJsZS5wcm90b3R5cGUuZ2V0VGVtcG9yYWxEaXNwbGF5YWJsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZW1wb3JhcnlEaXNwbGF5YWJsZXM7XG4gICAgfTtcbiAgICBJbmNyZW1lbnRhbERpc3BsYXlhYmxlLnByb3RvdHlwZS5lYWNoUGVuZGluZ0Rpc3BsYXlhYmxlID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSB0aGlzLl9jdXJzb3I7IGkgPCB0aGlzLl9kaXNwbGF5YWJsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNiICYmIGNiKHRoaXMuX2Rpc3BsYXlhYmxlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl90ZW1wb3JhcnlEaXNwbGF5YWJsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNiICYmIGNiKHRoaXMuX3RlbXBvcmFyeURpc3BsYXlhYmxlc1tpXSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEluY3JlbWVudGFsRGlzcGxheWFibGUucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuX2N1cnNvcjsgaSA8IHRoaXMuX2Rpc3BsYXlhYmxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGRpc3BsYXlhYmxlID0gdGhpcy5fZGlzcGxheWFibGVzW2ldO1xuICAgICAgICAgICAgZGlzcGxheWFibGUucGFyZW50ID0gdGhpcztcbiAgICAgICAgICAgIGRpc3BsYXlhYmxlLnVwZGF0ZSgpO1xuICAgICAgICAgICAgZGlzcGxheWFibGUucGFyZW50ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3RlbXBvcmFyeURpc3BsYXlhYmxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGRpc3BsYXlhYmxlID0gdGhpcy5fdGVtcG9yYXJ5RGlzcGxheWFibGVzW2ldO1xuICAgICAgICAgICAgZGlzcGxheWFibGUucGFyZW50ID0gdGhpcztcbiAgICAgICAgICAgIGRpc3BsYXlhYmxlLnVwZGF0ZSgpO1xuICAgICAgICAgICAgZGlzcGxheWFibGUucGFyZW50ID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgSW5jcmVtZW50YWxEaXNwbGF5YWJsZS5wcm90b3R5cGUuZ2V0Qm91bmRpbmdSZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuX3JlY3QpIHtcbiAgICAgICAgICAgIHZhciByZWN0ID0gbmV3IEJvdW5kaW5nUmVjdChJbmZpbml0eSwgSW5maW5pdHksIC1JbmZpbml0eSwgLUluZmluaXR5KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fZGlzcGxheWFibGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpc3BsYXlhYmxlID0gdGhpcy5fZGlzcGxheWFibGVzW2ldO1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZFJlY3QgPSBkaXNwbGF5YWJsZS5nZXRCb3VuZGluZ1JlY3QoKS5jbG9uZSgpO1xuICAgICAgICAgICAgICAgIGlmIChkaXNwbGF5YWJsZS5uZWVkTG9jYWxUcmFuc2Zvcm0oKSkge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZFJlY3QuYXBwbHlUcmFuc2Zvcm0oZGlzcGxheWFibGUuZ2V0TG9jYWxUcmFuc2Zvcm0obSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZWN0LnVuaW9uKGNoaWxkUmVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9yZWN0ID0gcmVjdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fcmVjdDtcbiAgICB9O1xuICAgIEluY3JlbWVudGFsRGlzcGxheWFibGUucHJvdG90eXBlLmNvbnRhaW4gPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICB2YXIgbG9jYWxQb3MgPSB0aGlzLnRyYW5zZm9ybUNvb3JkVG9Mb2NhbCh4LCB5KTtcbiAgICAgICAgdmFyIHJlY3QgPSB0aGlzLmdldEJvdW5kaW5nUmVjdCgpO1xuICAgICAgICBpZiAocmVjdC5jb250YWluKGxvY2FsUG9zWzBdLCBsb2NhbFBvc1sxXSkpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fZGlzcGxheWFibGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpc3BsYXlhYmxlID0gdGhpcy5fZGlzcGxheWFibGVzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChkaXNwbGF5YWJsZS5jb250YWluKHgsIHkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICByZXR1cm4gSW5jcmVtZW50YWxEaXNwbGF5YWJsZTtcbn0oRGlzcGxheWJsZSkpO1xuZXhwb3J0IGRlZmF1bHQgSW5jcmVtZW50YWxEaXNwbGF5YWJsZTtcbiIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgaXNGdW5jdGlvbiwgaXNPYmplY3QsIHJldHJpZXZlMiB9IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgeyBtYWtlSW5uZXIgfSBmcm9tICcuLi91dGlsL21vZGVsLmpzJzsgLy8gU3RvcmVkIHByb3BlcnRpZXMgZm9yIGZ1cnRoZXIgdHJhbnNpdGlvbi5cblxuZXhwb3J0IHZhciB0cmFuc2l0aW9uU3RvcmUgPSBtYWtlSW5uZXIoKTtcbi8qKlxyXG4gKiBSZXR1cm4gbnVsbCBpZiBhbmltYXRpb24gaXMgZGlzYWJsZWQuXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QW5pbWF0aW9uQ29uZmlnKGFuaW1hdGlvblR5cGUsIGFuaW1hdGFibGVNb2RlbCwgZGF0YUluZGV4LCAvLyBFeHRyYSBvcHRzIGNhbiBvdmVycmlkZSB0aGUgb3B0aW9uIGluIGFuaW1hdGFibGUgbW9kZWwuXG5leHRyYU9wdHMsIC8vIFRPRE8gSXQncyBvbmx5IGZvciBwaWN0b3JpYWwgYmFyIG5vdy5cbmV4dHJhRGVsYXlQYXJhbXMpIHtcbiAgdmFyIGFuaW1hdGlvblBheWxvYWQ7IC8vIENoZWNrIGlmIHRoZXJlIGlzIGdsb2JhbCBhbmltYXRpb24gY29uZmlndXJhdGlvbiBmcm9tIGRhdGFab29tL3Jlc2l6ZSBjYW4gb3ZlcnJpZGUgdGhlIGNvbmZpZyBpbiBvcHRpb24uXG4gIC8vIElmIGFuaW1hdGlvbiBpcyBlbmFibGVkLiBXaWxsIHVzZSB0aGlzIGFuaW1hdGlvbiBjb25maWcgaW4gcGF5bG9hZC5cbiAgLy8gSWYgYW5pbWF0aW9uIGlzIGRpc2FibGVkLiBKdXN0IGlnbm9yZSBpdC5cblxuICBpZiAoYW5pbWF0YWJsZU1vZGVsICYmIGFuaW1hdGFibGVNb2RlbC5lY01vZGVsKSB7XG4gICAgdmFyIHVwZGF0ZVBheWxvYWQgPSBhbmltYXRhYmxlTW9kZWwuZWNNb2RlbC5nZXRVcGRhdGVQYXlsb2FkKCk7XG4gICAgYW5pbWF0aW9uUGF5bG9hZCA9IHVwZGF0ZVBheWxvYWQgJiYgdXBkYXRlUGF5bG9hZC5hbmltYXRpb247XG4gIH1cblxuICB2YXIgYW5pbWF0aW9uRW5hYmxlZCA9IGFuaW1hdGFibGVNb2RlbCAmJiBhbmltYXRhYmxlTW9kZWwuaXNBbmltYXRpb25FbmFibGVkKCk7XG4gIHZhciBpc1VwZGF0ZSA9IGFuaW1hdGlvblR5cGUgPT09ICd1cGRhdGUnO1xuXG4gIGlmIChhbmltYXRpb25FbmFibGVkKSB7XG4gICAgdmFyIGR1cmF0aW9uID0gdm9pZCAwO1xuICAgIHZhciBlYXNpbmcgPSB2b2lkIDA7XG4gICAgdmFyIGRlbGF5ID0gdm9pZCAwO1xuXG4gICAgaWYgKGV4dHJhT3B0cykge1xuICAgICAgZHVyYXRpb24gPSByZXRyaWV2ZTIoZXh0cmFPcHRzLmR1cmF0aW9uLCAyMDApO1xuICAgICAgZWFzaW5nID0gcmV0cmlldmUyKGV4dHJhT3B0cy5lYXNpbmcsICdjdWJpY091dCcpO1xuICAgICAgZGVsYXkgPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICBkdXJhdGlvbiA9IGFuaW1hdGFibGVNb2RlbC5nZXRTaGFsbG93KGlzVXBkYXRlID8gJ2FuaW1hdGlvbkR1cmF0aW9uVXBkYXRlJyA6ICdhbmltYXRpb25EdXJhdGlvbicpO1xuICAgICAgZWFzaW5nID0gYW5pbWF0YWJsZU1vZGVsLmdldFNoYWxsb3coaXNVcGRhdGUgPyAnYW5pbWF0aW9uRWFzaW5nVXBkYXRlJyA6ICdhbmltYXRpb25FYXNpbmcnKTtcbiAgICAgIGRlbGF5ID0gYW5pbWF0YWJsZU1vZGVsLmdldFNoYWxsb3coaXNVcGRhdGUgPyAnYW5pbWF0aW9uRGVsYXlVcGRhdGUnIDogJ2FuaW1hdGlvbkRlbGF5Jyk7XG4gICAgfSAvLyBhbmltYXRpb24gZnJvbSBwYXlsb2FkIGhhcyBoaWdoZXN0IHByaW9yaXR5LlxuXG5cbiAgICBpZiAoYW5pbWF0aW9uUGF5bG9hZCkge1xuICAgICAgYW5pbWF0aW9uUGF5bG9hZC5kdXJhdGlvbiAhPSBudWxsICYmIChkdXJhdGlvbiA9IGFuaW1hdGlvblBheWxvYWQuZHVyYXRpb24pO1xuICAgICAgYW5pbWF0aW9uUGF5bG9hZC5lYXNpbmcgIT0gbnVsbCAmJiAoZWFzaW5nID0gYW5pbWF0aW9uUGF5bG9hZC5lYXNpbmcpO1xuICAgICAgYW5pbWF0aW9uUGF5bG9hZC5kZWxheSAhPSBudWxsICYmIChkZWxheSA9IGFuaW1hdGlvblBheWxvYWQuZGVsYXkpO1xuICAgIH1cblxuICAgIGlmIChpc0Z1bmN0aW9uKGRlbGF5KSkge1xuICAgICAgZGVsYXkgPSBkZWxheShkYXRhSW5kZXgsIGV4dHJhRGVsYXlQYXJhbXMpO1xuICAgIH1cblxuICAgIGlmIChpc0Z1bmN0aW9uKGR1cmF0aW9uKSkge1xuICAgICAgZHVyYXRpb24gPSBkdXJhdGlvbihkYXRhSW5kZXgpO1xuICAgIH1cblxuICAgIHZhciBjb25maWcgPSB7XG4gICAgICBkdXJhdGlvbjogZHVyYXRpb24gfHwgMCxcbiAgICAgIGRlbGF5OiBkZWxheSxcbiAgICAgIGVhc2luZzogZWFzaW5nXG4gICAgfTtcbiAgICByZXR1cm4gY29uZmlnO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFuaW1hdGVPclNldFByb3BzKGFuaW1hdGlvblR5cGUsIGVsLCBwcm9wcywgYW5pbWF0YWJsZU1vZGVsLCBkYXRhSW5kZXgsIGNiLCBkdXJpbmcpIHtcbiAgdmFyIGlzRnJvbSA9IGZhbHNlO1xuICB2YXIgcmVtb3ZlT3B0O1xuXG4gIGlmIChpc0Z1bmN0aW9uKGRhdGFJbmRleCkpIHtcbiAgICBkdXJpbmcgPSBjYjtcbiAgICBjYiA9IGRhdGFJbmRleDtcbiAgICBkYXRhSW5kZXggPSBudWxsO1xuICB9IGVsc2UgaWYgKGlzT2JqZWN0KGRhdGFJbmRleCkpIHtcbiAgICBjYiA9IGRhdGFJbmRleC5jYjtcbiAgICBkdXJpbmcgPSBkYXRhSW5kZXguZHVyaW5nO1xuICAgIGlzRnJvbSA9IGRhdGFJbmRleC5pc0Zyb207XG4gICAgcmVtb3ZlT3B0ID0gZGF0YUluZGV4LnJlbW92ZU9wdDtcbiAgICBkYXRhSW5kZXggPSBkYXRhSW5kZXguZGF0YUluZGV4O1xuICB9XG5cbiAgdmFyIGlzUmVtb3ZlID0gYW5pbWF0aW9uVHlwZSA9PT0gJ2xlYXZlJztcblxuICBpZiAoIWlzUmVtb3ZlKSB7XG4gICAgLy8gTXVzdCBzdG9wIHRoZSByZW1vdmUgYW5pbWF0aW9uLlxuICAgIGVsLnN0b3BBbmltYXRpb24oJ2xlYXZlJyk7XG4gIH1cblxuICB2YXIgYW5pbWF0aW9uQ29uZmlnID0gZ2V0QW5pbWF0aW9uQ29uZmlnKGFuaW1hdGlvblR5cGUsIGFuaW1hdGFibGVNb2RlbCwgZGF0YUluZGV4LCBpc1JlbW92ZSA/IHJlbW92ZU9wdCB8fCB7fSA6IG51bGwsIGFuaW1hdGFibGVNb2RlbCAmJiBhbmltYXRhYmxlTW9kZWwuZ2V0QW5pbWF0aW9uRGVsYXlQYXJhbXMgPyBhbmltYXRhYmxlTW9kZWwuZ2V0QW5pbWF0aW9uRGVsYXlQYXJhbXMoZWwsIGRhdGFJbmRleCkgOiBudWxsKTtcblxuICBpZiAoYW5pbWF0aW9uQ29uZmlnICYmIGFuaW1hdGlvbkNvbmZpZy5kdXJhdGlvbiA+IDApIHtcbiAgICB2YXIgZHVyYXRpb24gPSBhbmltYXRpb25Db25maWcuZHVyYXRpb247XG4gICAgdmFyIGFuaW1hdGlvbkRlbGF5ID0gYW5pbWF0aW9uQ29uZmlnLmRlbGF5O1xuICAgIHZhciBhbmltYXRpb25FYXNpbmcgPSBhbmltYXRpb25Db25maWcuZWFzaW5nO1xuICAgIHZhciBhbmltYXRlQ29uZmlnID0ge1xuICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxuICAgICAgZGVsYXk6IGFuaW1hdGlvbkRlbGF5IHx8IDAsXG4gICAgICBlYXNpbmc6IGFuaW1hdGlvbkVhc2luZyxcbiAgICAgIGRvbmU6IGNiLFxuICAgICAgZm9yY2U6ICEhY2IgfHwgISFkdXJpbmcsXG4gICAgICAvLyBTZXQgdG8gZmluYWwgc3RhdGUgaW4gdXBkYXRlL2luaXQgYW5pbWF0aW9uLlxuICAgICAgLy8gU28gdGhlIHBvc3QgcHJvY2Vzc2luZyBiYXNlZCBvbiB0aGUgcGF0aCBzaGFwZSBjYW4gYmUgZG9uZSBjb3JyZWN0bHkuXG4gICAgICBzZXRUb0ZpbmFsOiAhaXNSZW1vdmUsXG4gICAgICBzY29wZTogYW5pbWF0aW9uVHlwZSxcbiAgICAgIGR1cmluZzogZHVyaW5nXG4gICAgfTtcbiAgICBpc0Zyb20gPyBlbC5hbmltYXRlRnJvbShwcm9wcywgYW5pbWF0ZUNvbmZpZykgOiBlbC5hbmltYXRlVG8ocHJvcHMsIGFuaW1hdGVDb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGVsLnN0b3BBbmltYXRpb24oKTsgLy8gSWYgYGlzRnJvbWAsIHRoZSBwcm9wcyBpcyB0aGUgXCJmcm9tXCIgcHJvcHMuXG5cbiAgICAhaXNGcm9tICYmIGVsLmF0dHIocHJvcHMpOyAvLyBDYWxsIGR1cmluZyBhdCBsZWFzdCBvbmNlLlxuXG4gICAgZHVyaW5nICYmIGR1cmluZygxKTtcbiAgICBjYiAmJiBjYigpO1xuICB9XG59XG4vKipcclxuICogVXBkYXRlIGdyYXBoaWMgZWxlbWVudCBwcm9wZXJ0aWVzIHdpdGggb3Igd2l0aG91dCBhbmltYXRpb24gYWNjb3JkaW5nIHRvIHRoZVxyXG4gKiBjb25maWd1cmF0aW9uIGluIHNlcmllcy5cclxuICpcclxuICogQ2F1dGlvbjogdGhpcyBtZXRob2Qgd2lsbCBzdG9wIHByZXZpb3VzIGFuaW1hdGlvbi5cclxuICogU28gZG8gbm90IHVzZSB0aGlzIG1ldGhvZCB0byBvbmUgZWxlbWVudCB0d2ljZSBiZWZvcmVcclxuICogYW5pbWF0aW9uIHN0YXJ0cywgdW5sZXNzIHlvdSBrbm93IHdoYXQgeW91IGFyZSBkb2luZy5cclxuICogQGV4YW1wbGVcclxuICogICAgIGdyYXBoaWMudXBkYXRlUHJvcHMoZWwsIHtcclxuICogICAgICAgICBwb3NpdGlvbjogWzEwMCwgMTAwXVxyXG4gKiAgICAgfSwgc2VyaWVzTW9kZWwsIGRhdGFJbmRleCwgZnVuY3Rpb24gKCkgeyBjb25zb2xlLmxvZygnQW5pbWF0aW9uIGRvbmUhJyk7IH0pO1xyXG4gKiAgICAgLy8gT3JcclxuICogICAgIGdyYXBoaWMudXBkYXRlUHJvcHMoZWwsIHtcclxuICogICAgICAgICBwb3NpdGlvbjogWzEwMCwgMTAwXVxyXG4gKiAgICAgfSwgc2VyaWVzTW9kZWwsIGZ1bmN0aW9uICgpIHsgY29uc29sZS5sb2coJ0FuaW1hdGlvbiBkb25lIScpOyB9KTtcclxuICovXG5cblxuZnVuY3Rpb24gdXBkYXRlUHJvcHMoZWwsIHByb3BzLCAvLyBUT0RPOiBUWVBFIEFuaW1hdGFibGVNb2RlbFxuYW5pbWF0YWJsZU1vZGVsLCBkYXRhSW5kZXgsIGNiLCBkdXJpbmcpIHtcbiAgYW5pbWF0ZU9yU2V0UHJvcHMoJ3VwZGF0ZScsIGVsLCBwcm9wcywgYW5pbWF0YWJsZU1vZGVsLCBkYXRhSW5kZXgsIGNiLCBkdXJpbmcpO1xufVxuXG5leHBvcnQgeyB1cGRhdGVQcm9wcyB9O1xuLyoqXHJcbiAqIEluaXQgZ3JhcGhpYyBlbGVtZW50IHByb3BlcnRpZXMgd2l0aCBvciB3aXRob3V0IGFuaW1hdGlvbiBhY2NvcmRpbmcgdG8gdGhlXHJcbiAqIGNvbmZpZ3VyYXRpb24gaW4gc2VyaWVzLlxyXG4gKlxyXG4gKiBDYXV0aW9uOiB0aGlzIG1ldGhvZCB3aWxsIHN0b3AgcHJldmlvdXMgYW5pbWF0aW9uLlxyXG4gKiBTbyBkbyBub3QgdXNlIHRoaXMgbWV0aG9kIHRvIG9uZSBlbGVtZW50IHR3aWNlIGJlZm9yZVxyXG4gKiBhbmltYXRpb24gc3RhcnRzLCB1bmxlc3MgeW91IGtub3cgd2hhdCB5b3UgYXJlIGRvaW5nLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRQcm9wcyhlbCwgcHJvcHMsIGFuaW1hdGFibGVNb2RlbCwgZGF0YUluZGV4LCBjYiwgZHVyaW5nKSB7XG4gIGFuaW1hdGVPclNldFByb3BzKCdlbnRlcicsIGVsLCBwcm9wcywgYW5pbWF0YWJsZU1vZGVsLCBkYXRhSW5kZXgsIGNiLCBkdXJpbmcpO1xufVxuLyoqXHJcbiAqIElmIGVsZW1lbnQgaXMgcmVtb3ZlZC5cclxuICogSXQgY2FuIGRldGVybWluZSBpZiBlbGVtZW50IGlzIGhhdmluZyByZW1vdmUgYW5pbWF0aW9uLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRWxlbWVudFJlbW92ZWQoZWwpIHtcbiAgaWYgKCFlbC5fX3pyKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGVsLmFuaW1hdG9ycy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBhbmltYXRvciA9IGVsLmFuaW1hdG9yc1tpXTtcblxuICAgIGlmIChhbmltYXRvci5zY29wZSA9PT0gJ2xlYXZlJykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXHJcbiAqIFJlbW92ZSBncmFwaGljIGVsZW1lbnRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVFbGVtZW50KGVsLCBwcm9wcywgYW5pbWF0YWJsZU1vZGVsLCBkYXRhSW5kZXgsIGNiLCBkdXJpbmcpIHtcbiAgLy8gRG9uJ3QgZG8gcmVtb3ZlIGFuaW1hdGlvbiB0d2ljZS5cbiAgaWYgKGlzRWxlbWVudFJlbW92ZWQoZWwpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYW5pbWF0ZU9yU2V0UHJvcHMoJ2xlYXZlJywgZWwsIHByb3BzLCBhbmltYXRhYmxlTW9kZWwsIGRhdGFJbmRleCwgY2IsIGR1cmluZyk7XG59XG5cbmZ1bmN0aW9uIGZhZGVPdXREaXNwbGF5YWJsZShlbCwgYW5pbWF0YWJsZU1vZGVsLCBkYXRhSW5kZXgsIGRvbmUpIHtcbiAgZWwucmVtb3ZlVGV4dENvbnRlbnQoKTtcbiAgZWwucmVtb3ZlVGV4dEd1aWRlTGluZSgpO1xuICByZW1vdmVFbGVtZW50KGVsLCB7XG4gICAgc3R5bGU6IHtcbiAgICAgIG9wYWNpdHk6IDBcbiAgICB9XG4gIH0sIGFuaW1hdGFibGVNb2RlbCwgZGF0YUluZGV4LCBkb25lKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUVsZW1lbnRXaXRoRmFkZU91dChlbCwgYW5pbWF0YWJsZU1vZGVsLCBkYXRhSW5kZXgpIHtcbiAgZnVuY3Rpb24gZG9SZW1vdmUoKSB7XG4gICAgZWwucGFyZW50ICYmIGVsLnBhcmVudC5yZW1vdmUoZWwpO1xuICB9IC8vIEhpZGUgbGFiZWwgYW5kIGxhYmVsTGluZSBmaXJzdFxuICAvLyBUT0RPIEFsc28gdXNlIGZhZGUgb3V0IGFuaW1hdGlvbj9cblxuXG4gIGlmICghZWwuaXNHcm91cCkge1xuICAgIGZhZGVPdXREaXNwbGF5YWJsZShlbCwgYW5pbWF0YWJsZU1vZGVsLCBkYXRhSW5kZXgsIGRvUmVtb3ZlKTtcbiAgfSBlbHNlIHtcbiAgICBlbC50cmF2ZXJzZShmdW5jdGlvbiAoZGlzcCkge1xuICAgICAgaWYgKCFkaXNwLmlzR3JvdXApIHtcbiAgICAgICAgLy8gQ2FuIGludm9rZSBkb1JlbW92ZSBtdWx0aXBsZSB0aW1lcy5cbiAgICAgICAgZmFkZU91dERpc3BsYXlhYmxlKGRpc3AsIGFuaW1hdGFibGVNb2RlbCwgZGF0YUluZGV4LCBkb1JlbW92ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbi8qKlxyXG4gKiBTYXZlIG9sZCBzdHlsZSBmb3Igc3R5bGUgdHJhbnNpdGlvbiBpbiB1bml2ZXJzYWxUcmFuc2l0aW9uIG1vZHVsZS5cclxuICogSXQncyB1c2VkIHdoZW4gZWxlbWVudCB3aWxsIGJlIHJldXNlZCBpbiBlYWNoIHJlbmRlci5cclxuICogRm9yIGNoYXJ0IGxpa2UgbWFwLCBoZWF0bWFwLCB3aGljaCB3aWxsIGFsd2F5cyBjcmVhdGUgbmV3IGVsZW1lbnQuXHJcbiAqIFdlIGRvbid0IG5lZWQgdG8gc2F2ZSB0aGlzIGJlY2F1c2UgdW5pdmVyc2FsVHJhbnNpdGlvbiBjYW4gZ2V0IG9sZCBzdHlsZSBmcm9tIHRoZSBvbGQgZWxlbWVudFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVPbGRTdHlsZShlbCkge1xuICB0cmFuc2l0aW9uU3RvcmUoZWwpLm9sZFN0eWxlID0gZWwuc3R5bGU7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0T2xkU3R5bGUoZWwpIHtcbiAgcmV0dXJuIHRyYW5zaXRpb25TdG9yZShlbCkub2xkU3R5bGU7XG59IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgKiBhcyBwYXRoVG9vbCBmcm9tICd6cmVuZGVyL2xpYi90b29sL3BhdGguanMnO1xuaW1wb3J0ICogYXMgbWF0cml4IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvbWF0cml4LmpzJztcbmltcG9ydCAqIGFzIHZlY3RvciBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3ZlY3Rvci5qcyc7XG5pbXBvcnQgUGF0aCBmcm9tICd6cmVuZGVyL2xpYi9ncmFwaGljL1BhdGguanMnO1xuaW1wb3J0IFRyYW5zZm9ybWFibGUgZnJvbSAnenJlbmRlci9saWIvY29yZS9UcmFuc2Zvcm1hYmxlLmpzJztcbmltcG9ydCBaUkltYWdlIGZyb20gJ3pyZW5kZXIvbGliL2dyYXBoaWMvSW1hZ2UuanMnO1xuaW1wb3J0IEdyb3VwIGZyb20gJ3pyZW5kZXIvbGliL2dyYXBoaWMvR3JvdXAuanMnO1xuaW1wb3J0IFpSVGV4dCBmcm9tICd6cmVuZGVyL2xpYi9ncmFwaGljL1RleHQuanMnO1xuaW1wb3J0IENpcmNsZSBmcm9tICd6cmVuZGVyL2xpYi9ncmFwaGljL3NoYXBlL0NpcmNsZS5qcyc7XG5pbXBvcnQgRWxsaXBzZSBmcm9tICd6cmVuZGVyL2xpYi9ncmFwaGljL3NoYXBlL0VsbGlwc2UuanMnO1xuaW1wb3J0IFNlY3RvciBmcm9tICd6cmVuZGVyL2xpYi9ncmFwaGljL3NoYXBlL1NlY3Rvci5qcyc7XG5pbXBvcnQgUmluZyBmcm9tICd6cmVuZGVyL2xpYi9ncmFwaGljL3NoYXBlL1JpbmcuanMnO1xuaW1wb3J0IFBvbHlnb24gZnJvbSAnenJlbmRlci9saWIvZ3JhcGhpYy9zaGFwZS9Qb2x5Z29uLmpzJztcbmltcG9ydCBQb2x5bGluZSBmcm9tICd6cmVuZGVyL2xpYi9ncmFwaGljL3NoYXBlL1BvbHlsaW5lLmpzJztcbmltcG9ydCBSZWN0IGZyb20gJ3pyZW5kZXIvbGliL2dyYXBoaWMvc2hhcGUvUmVjdC5qcyc7XG5pbXBvcnQgTGluZSBmcm9tICd6cmVuZGVyL2xpYi9ncmFwaGljL3NoYXBlL0xpbmUuanMnO1xuaW1wb3J0IEJlemllckN1cnZlIGZyb20gJ3pyZW5kZXIvbGliL2dyYXBoaWMvc2hhcGUvQmV6aWVyQ3VydmUuanMnO1xuaW1wb3J0IEFyYyBmcm9tICd6cmVuZGVyL2xpYi9ncmFwaGljL3NoYXBlL0FyYy5qcyc7XG5pbXBvcnQgQ29tcG91bmRQYXRoIGZyb20gJ3pyZW5kZXIvbGliL2dyYXBoaWMvQ29tcG91bmRQYXRoLmpzJztcbmltcG9ydCBMaW5lYXJHcmFkaWVudCBmcm9tICd6cmVuZGVyL2xpYi9ncmFwaGljL0xpbmVhckdyYWRpZW50LmpzJztcbmltcG9ydCBSYWRpYWxHcmFkaWVudCBmcm9tICd6cmVuZGVyL2xpYi9ncmFwaGljL1JhZGlhbEdyYWRpZW50LmpzJztcbmltcG9ydCBCb3VuZGluZ1JlY3QgZnJvbSAnenJlbmRlci9saWIvY29yZS9Cb3VuZGluZ1JlY3QuanMnO1xuaW1wb3J0IE9yaWVudGVkQm91bmRpbmdSZWN0IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvT3JpZW50ZWRCb3VuZGluZ1JlY3QuanMnO1xuaW1wb3J0IFBvaW50IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvUG9pbnQuanMnO1xuaW1wb3J0IEluY3JlbWVudGFsRGlzcGxheWFibGUgZnJvbSAnenJlbmRlci9saWIvZ3JhcGhpYy9JbmNyZW1lbnRhbERpc3BsYXlhYmxlLmpzJztcbmltcG9ydCAqIGFzIHN1YlBpeGVsT3B0aW1pemVVdGlsIGZyb20gJ3pyZW5kZXIvbGliL2dyYXBoaWMvaGVscGVyL3N1YlBpeGVsT3B0aW1pemUuanMnO1xuaW1wb3J0IHsgZXh0ZW5kLCBpc0FycmF5TGlrZSwgbWFwLCBkZWZhdWx0cywgaXNTdHJpbmcsIGtleXMsIGVhY2gsIGhhc093biwgaXNBcnJheSB9IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgeyBnZXRFQ0RhdGEgfSBmcm9tICcuL2lubmVyU3RvcmUuanMnO1xuaW1wb3J0IHsgdXBkYXRlUHJvcHMsIGluaXRQcm9wcywgcmVtb3ZlRWxlbWVudCwgcmVtb3ZlRWxlbWVudFdpdGhGYWRlT3V0LCBpc0VsZW1lbnRSZW1vdmVkIH0gZnJvbSAnLi4vYW5pbWF0aW9uL2Jhc2ljVHJhbnNpdGlvbi5qcyc7XG4vKipcclxuICogQGRlcHJlY2F0ZWQgZXhwb3J0IGZvciBjb21wYXRpdGFibGUgcmVhc29uXHJcbiAqL1xuXG5leHBvcnQgeyB1cGRhdGVQcm9wcywgaW5pdFByb3BzLCByZW1vdmVFbGVtZW50LCByZW1vdmVFbGVtZW50V2l0aEZhZGVPdXQsIGlzRWxlbWVudFJlbW92ZWQgfTtcbnZhciBtYXRoTWF4ID0gTWF0aC5tYXg7XG52YXIgbWF0aE1pbiA9IE1hdGgubWluO1xudmFyIF9jdXN0b21TaGFwZU1hcCA9IHt9O1xuLyoqXHJcbiAqIEV4dGVuZCBzaGFwZSB3aXRoIHBhcmFtZXRlcnNcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRTaGFwZShvcHRzKSB7XG4gIHJldHVybiBQYXRoLmV4dGVuZChvcHRzKTtcbn1cbnZhciBleHRlbmRQYXRoRnJvbVN0cmluZyA9IHBhdGhUb29sLmV4dGVuZEZyb21TdHJpbmc7XG4vKipcclxuICogRXh0ZW5kIHBhdGhcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRQYXRoKHBhdGhEYXRhLCBvcHRzKSB7XG4gIHJldHVybiBleHRlbmRQYXRoRnJvbVN0cmluZyhwYXRoRGF0YSwgb3B0cyk7XG59XG4vKipcclxuICogUmVnaXN0ZXIgYSB1c2VyIGRlZmluZWQgc2hhcGUuXHJcbiAqIFRoZSBzaGFwZSBjbGFzcyBjYW4gYmUgZmV0Y2hlZCBieSBgZ2V0U2hhcGVDbGFzc2BcclxuICogVGhpcyBtZXRob2Qgd2lsbCBvdmVyd3JpdGUgdGhlIHJlZ2lzdGVyZWQgc2hhcGVzLCBpbmNsdWRpbmdcclxuICogdGhlIHJlZ2lzdGVyZWQgYnVpbHQtaW4gc2hhcGVzLCBpZiB1c2luZyB0aGUgc2FtZSBgbmFtZWAuXHJcbiAqIFRoZSBzaGFwZSBjYW4gYmUgdXNlZCBpbiBgY3VzdG9tIHNlcmllc2AgYW5kXHJcbiAqIGBncmFwaGljIGNvbXBvbmVudGAgYnkgZGVjbGFyaW5nIGB7dHlwZTogbmFtZX1gLlxyXG4gKlxyXG4gKiBAcGFyYW0gbmFtZVxyXG4gKiBAcGFyYW0gU2hhcGVDbGFzcyBDYW4gYmUgZ2VuZXJhdGVkIGJ5IGBleHRlbmRTaGFwZWAuXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJTaGFwZShuYW1lLCBTaGFwZUNsYXNzKSB7XG4gIF9jdXN0b21TaGFwZU1hcFtuYW1lXSA9IFNoYXBlQ2xhc3M7XG59XG4vKipcclxuICogRmluZCBzaGFwZSBjbGFzcyByZWdpc3RlcmVkIGJ5IGByZWdpc3RlclNoYXBlYC4gVXN1YWxseSB1c2VkIGluXHJcbiAqIGZldGNoaW5nIHVzZXIgZGVmaW5lZCBzaGFwZS5cclxuICpcclxuICogW0NhdXRpb25dOlxyXG4gKiAoMSkgVGhpcyBtZXRob2QgKipNVVNUIE5PVCBiZSB1c2VkIGluc2lkZSBlY2hhcnRzICEhISoqLCB1bmxlc3MgaXQgaXMgcHJlcGFyZWRcclxuICogdG8gdXNlIHVzZXIgcmVnaXN0ZXJlZCBzaGFwZXMuXHJcbiAqIEJlY2F1c2UgdGhlIGJ1aWx0LWluIHNoYXBlIChzZWUgYGdldEJ1aWx0SW5TaGFwZWApIHdpbGwgYmUgcmVnaXN0ZXJlZCBieVxyXG4gKiBgcmVnaXN0ZXJTaGFwZWAgYnkgZGVmYXVsdC4gVGhhdCBlbmFibGVzIHVzZXJzIHRvIGdldCBib3RoIGJ1aWx0LWluXHJcbiAqIHNoYXBlcyBhcyB3ZWxsIGFzIHRoZSBzaGFwZXMgYmVsb25naW5nIHRvIHRoZW1zbGV2ZXMuIEJ1dCB1c2VycyBjYW4gb3ZlcndyaXRlXHJcbiAqIHRoZSBidWlsdC1pbiBzaGFwZXMgYnkgdXNpbmcgbmFtZXMgbGlrZSAnY2lyY2xlJywgJ3JlY3QnIHZpYSBjYWxsaW5nXHJcbiAqIGByZWdpc3RlclNoYXBlYC4gU28gdGhlIGVjaGFydHMgaW5uZXIgZmVhdHJ1ZXMgc2hvdWxkIG5vdCBmZXRjaCBzaGFwZXMgZnJvbSBoZXJlXHJcbiAqIGluIGNhc2UgdGhhdCBpdCBpcyBvdmVyd3JpdHRlbiBieSB1c2VycywgZXhjZXB0IHRoYXQgc29tZSBmZWF0dXJlcywgbGlrZVxyXG4gKiBgY3VzdG9tIHNlcmllc2AsIGBncmFwaGljIGNvbXBvbmVudGAsIGRvIGl0IGRlbGliZXJhdGVseS5cclxuICpcclxuICogKDIpIEluIHRoZSBmZWF0dXJlcyBsaWtlIGBjdXN0b20gc2VyaWVzYCwgYGdyYXBoaWMgY29tcG9uZW50YCwgdGhlIHVzZXIgaW5wdXRcclxuICogYHt0cHllOiAneHh4J31gIGRvZXMgbm90IG9ubHkgc3BlY2lmeSBzaGFwZXMgYnV0IGFsc28gc3BlY2lmeSBvdGhlciBncmFwaGljXHJcbiAqIGVsZW1lbnRzIGxpa2UgYCdncm91cCdgLCBgJ3RleHQnYCwgYCdpbWFnZSdgIG9yIGV2ZW50IGAncGF0aCdgLiBUaG9zZSBuYW1lc1xyXG4gKiBhcmUgcmVzZXJ2ZWQgbmFtZXMsIHRoYXQgaXMsIGlmIHNvbWUgdXNlciByZWdpc3RlcnMgYSBzaGFwZSBuYW1lZCBgJ2ltYWdlJ2AsXHJcbiAqIHRoZSBzaGFwZSB3aWxsIG5vdCBiZSB1c2VkLiBJZiB3ZSBpbnRlbmRpbmcgdG8gYWRkIHNvbWUgbW9yZSByZXNlcnZlZCBuYW1lc1xyXG4gKiBpbiBmZWF0dXJlLCB0aGF0IG1pZ2h0IGJyaW5nIGJyZWFrIGNoYW5nZXMgKGRpc2FibGUgc29tZSBleGlzdGluZyB1c2VyIHNoYXBlXHJcbiAqIG5hbWVzKS4gQnV0IHRoYXQgY2FzZSBwcm9iYWJseSByYXJlbHkgaGFwcGVucy4gU28gd2UgZG9uJ3QgbWFrZSBtb3JlIG1lY2hhbmlzbVxyXG4gKiB0byByZXNvbHZlIHRoaXMgaXNzdWUgaGVyZS5cclxuICpcclxuICogQHBhcmFtIG5hbWVcclxuICogQHJldHVybiBUaGUgc2hhcGUgY2xhc3MuIElmIG5vdCBmb3VuZCwgcmV0dXJuIG5vdGhpbmcuXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2hhcGVDbGFzcyhuYW1lKSB7XG4gIGlmIChfY3VzdG9tU2hhcGVNYXAuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICByZXR1cm4gX2N1c3RvbVNoYXBlTWFwW25hbWVdO1xuICB9XG59XG4vKipcclxuICogQ3JlYXRlIGEgcGF0aCBlbGVtZW50IGZyb20gcGF0aCBkYXRhIHN0cmluZ1xyXG4gKiBAcGFyYW0gcGF0aERhdGFcclxuICogQHBhcmFtIG9wdHNcclxuICogQHBhcmFtIHJlY3RcclxuICogQHBhcmFtIGxheW91dCAnY2VudGVyJyBvciAnY292ZXInIGRlZmF1bHQgdG8gYmUgY292ZXJcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUGF0aChwYXRoRGF0YSwgb3B0cywgcmVjdCwgbGF5b3V0KSB7XG4gIHZhciBwYXRoID0gcGF0aFRvb2wuY3JlYXRlRnJvbVN0cmluZyhwYXRoRGF0YSwgb3B0cyk7XG5cbiAgaWYgKHJlY3QpIHtcbiAgICBpZiAobGF5b3V0ID09PSAnY2VudGVyJykge1xuICAgICAgcmVjdCA9IGNlbnRlckdyYXBoaWMocmVjdCwgcGF0aC5nZXRCb3VuZGluZ1JlY3QoKSk7XG4gICAgfVxuXG4gICAgcmVzaXplUGF0aChwYXRoLCByZWN0KTtcbiAgfVxuXG4gIHJldHVybiBwYXRoO1xufVxuLyoqXHJcbiAqIENyZWF0ZSBhIGltYWdlIGVsZW1lbnQgZnJvbSBpbWFnZSB1cmxcclxuICogQHBhcmFtIGltYWdlVXJsIGltYWdlIHVybFxyXG4gKiBAcGFyYW0gb3B0cyBvcHRpb25zXHJcbiAqIEBwYXJhbSByZWN0IGNvbnN0cmFpbiByZWN0XHJcbiAqIEBwYXJhbSBsYXlvdXQgJ2NlbnRlcicgb3IgJ2NvdmVyJy4gRGVmYXVsdCB0byBiZSAnY292ZXInXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbWFrZUltYWdlKGltYWdlVXJsLCByZWN0LCBsYXlvdXQpIHtcbiAgdmFyIHpySW1nID0gbmV3IFpSSW1hZ2Uoe1xuICAgIHN0eWxlOiB7XG4gICAgICBpbWFnZTogaW1hZ2VVcmwsXG4gICAgICB4OiByZWN0LngsXG4gICAgICB5OiByZWN0LnksXG4gICAgICB3aWR0aDogcmVjdC53aWR0aCxcbiAgICAgIGhlaWdodDogcmVjdC5oZWlnaHRcbiAgICB9LFxuICAgIG9ubG9hZDogZnVuY3Rpb24gKGltZykge1xuICAgICAgaWYgKGxheW91dCA9PT0gJ2NlbnRlcicpIHtcbiAgICAgICAgdmFyIGJvdW5kaW5nUmVjdCA9IHtcbiAgICAgICAgICB3aWR0aDogaW1nLndpZHRoLFxuICAgICAgICAgIGhlaWdodDogaW1nLmhlaWdodFxuICAgICAgICB9O1xuICAgICAgICB6ckltZy5zZXRTdHlsZShjZW50ZXJHcmFwaGljKHJlY3QsIGJvdW5kaW5nUmVjdCkpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIHJldHVybiB6ckltZztcbn1cbi8qKlxyXG4gKiBHZXQgcG9zaXRpb24gb2YgY2VudGVyZWQgZWxlbWVudCBpbiBib3VuZGluZyBib3guXHJcbiAqXHJcbiAqIEBwYXJhbSAgcmVjdCAgICAgICAgIGVsZW1lbnQgbG9jYWwgYm91bmRpbmcgYm94XHJcbiAqIEBwYXJhbSAgYm91bmRpbmdSZWN0IGNvbnN0cmFpbnQgYm91bmRpbmcgYm94XHJcbiAqIEByZXR1cm4gZWxlbWVudCBwb3NpdGlvbiBjb250YWluaW5nIHgsIHksIHdpZHRoLCBhbmQgaGVpZ2h0XHJcbiAqL1xuXG5mdW5jdGlvbiBjZW50ZXJHcmFwaGljKHJlY3QsIGJvdW5kaW5nUmVjdCkge1xuICAvLyBTZXQgcmVjdCB0byBjZW50ZXIsIGtlZXAgd2lkdGggLyBoZWlnaHQgcmF0aW8uXG4gIHZhciBhc3BlY3QgPSBib3VuZGluZ1JlY3Qud2lkdGggLyBib3VuZGluZ1JlY3QuaGVpZ2h0O1xuICB2YXIgd2lkdGggPSByZWN0LmhlaWdodCAqIGFzcGVjdDtcbiAgdmFyIGhlaWdodDtcblxuICBpZiAod2lkdGggPD0gcmVjdC53aWR0aCkge1xuICAgIGhlaWdodCA9IHJlY3QuaGVpZ2h0O1xuICB9IGVsc2Uge1xuICAgIHdpZHRoID0gcmVjdC53aWR0aDtcbiAgICBoZWlnaHQgPSB3aWR0aCAvIGFzcGVjdDtcbiAgfVxuXG4gIHZhciBjeCA9IHJlY3QueCArIHJlY3Qud2lkdGggLyAyO1xuICB2YXIgY3kgPSByZWN0LnkgKyByZWN0LmhlaWdodCAvIDI7XG4gIHJldHVybiB7XG4gICAgeDogY3ggLSB3aWR0aCAvIDIsXG4gICAgeTogY3kgLSBoZWlnaHQgLyAyLFxuICAgIHdpZHRoOiB3aWR0aCxcbiAgICBoZWlnaHQ6IGhlaWdodFxuICB9O1xufVxuXG5leHBvcnQgdmFyIG1lcmdlUGF0aCA9IHBhdGhUb29sLm1lcmdlUGF0aDtcbi8qKlxyXG4gKiBSZXNpemUgYSBwYXRoIHRvIGZpdCB0aGUgcmVjdFxyXG4gKiBAcGFyYW0gcGF0aFxyXG4gKiBAcGFyYW0gcmVjdFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2l6ZVBhdGgocGF0aCwgcmVjdCkge1xuICBpZiAoIXBhdGguYXBwbHlUcmFuc2Zvcm0pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgcGF0aFJlY3QgPSBwYXRoLmdldEJvdW5kaW5nUmVjdCgpO1xuICB2YXIgbSA9IHBhdGhSZWN0LmNhbGN1bGF0ZVRyYW5zZm9ybShyZWN0KTtcbiAgcGF0aC5hcHBseVRyYW5zZm9ybShtKTtcbn1cbi8qKlxyXG4gKiBTdWIgcGl4ZWwgb3B0aW1pemUgbGluZSBmb3IgY2FudmFzXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3ViUGl4ZWxPcHRpbWl6ZUxpbmUoc2hhcGUsIGxpbmVXaWR0aCkge1xuICBzdWJQaXhlbE9wdGltaXplVXRpbC5zdWJQaXhlbE9wdGltaXplTGluZShzaGFwZSwgc2hhcGUsIHtcbiAgICBsaW5lV2lkdGg6IGxpbmVXaWR0aFxuICB9KTtcbiAgcmV0dXJuIHNoYXBlO1xufVxuLyoqXHJcbiAqIFN1YiBwaXhlbCBvcHRpbWl6ZSByZWN0IGZvciBjYW52YXNcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdWJQaXhlbE9wdGltaXplUmVjdChwYXJhbSkge1xuICBzdWJQaXhlbE9wdGltaXplVXRpbC5zdWJQaXhlbE9wdGltaXplUmVjdChwYXJhbS5zaGFwZSwgcGFyYW0uc2hhcGUsIHBhcmFtLnN0eWxlKTtcbiAgcmV0dXJuIHBhcmFtO1xufVxuLyoqXHJcbiAqIFN1YiBwaXhlbCBvcHRpbWl6ZSBmb3IgY2FudmFzXHJcbiAqXHJcbiAqIEBwYXJhbSBwb3NpdGlvbiBDb29yZGluYXRlLCBzdWNoIGFzIHgsIHlcclxuICogQHBhcmFtIGxpbmVXaWR0aCBTaG91bGQgYmUgbm9ubmVnYXRpdmUgaW50ZWdlci5cclxuICogQHBhcmFtIHBvc2l0aXZlT3JOZWdhdGl2ZSBEZWZhdWx0IGZhbHNlIChuZWdhdGl2ZSkuXHJcbiAqIEByZXR1cm4gT3B0aW1pemVkIHBvc2l0aW9uLlxyXG4gKi9cblxuZXhwb3J0IHZhciBzdWJQaXhlbE9wdGltaXplID0gc3ViUGl4ZWxPcHRpbWl6ZVV0aWwuc3ViUGl4ZWxPcHRpbWl6ZTtcbi8qKlxyXG4gKiBHZXQgdHJhbnNmb3JtIG1hdHJpeCBvZiB0YXJnZXQgKHBhcmFtIHRhcmdldCksXHJcbiAqIGluIGNvb3JkaW5hdGUgb2YgaXRzIGFuY2VzdG9yIChwYXJhbSBhbmNlc3RvcilcclxuICpcclxuICogQHBhcmFtIHRhcmdldFxyXG4gKiBAcGFyYW0gW2FuY2VzdG9yXVxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYW5zZm9ybSh0YXJnZXQsIGFuY2VzdG9yKSB7XG4gIHZhciBtYXQgPSBtYXRyaXguaWRlbnRpdHkoW10pO1xuXG4gIHdoaWxlICh0YXJnZXQgJiYgdGFyZ2V0ICE9PSBhbmNlc3Rvcikge1xuICAgIG1hdHJpeC5tdWwobWF0LCB0YXJnZXQuZ2V0TG9jYWxUcmFuc2Zvcm0oKSwgbWF0KTtcbiAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50O1xuICB9XG5cbiAgcmV0dXJuIG1hdDtcbn1cbi8qKlxyXG4gKiBBcHBseSB0cmFuc2Zvcm0gdG8gYW4gdmVydGV4LlxyXG4gKiBAcGFyYW0gdGFyZ2V0IFt4LCB5XVxyXG4gKiBAcGFyYW0gdHJhbnNmb3JtIENhbiBiZTpcclxuICogICAgICArIFRyYW5zZm9ybSBtYXRyaXg6IGxpa2UgWzEsIDAsIDAsIDEsIDAsIDBdXHJcbiAqICAgICAgKyB7cG9zaXRpb24sIHJvdGF0aW9uLCBzY2FsZX0sIHRoZSBzYW1lIGFzIGB6cmVuZGVyL1RyYW5zZm9ybWFibGVgLlxyXG4gKiBAcGFyYW0gaW52ZXJ0IFdoZXRoZXIgdXNlIGludmVydCBtYXRyaXguXHJcbiAqIEByZXR1cm4gW3gsIHldXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlUcmFuc2Zvcm0odGFyZ2V0LCB0cmFuc2Zvcm0sIGludmVydCkge1xuICBpZiAodHJhbnNmb3JtICYmICFpc0FycmF5TGlrZSh0cmFuc2Zvcm0pKSB7XG4gICAgdHJhbnNmb3JtID0gVHJhbnNmb3JtYWJsZS5nZXRMb2NhbFRyYW5zZm9ybSh0cmFuc2Zvcm0pO1xuICB9XG5cbiAgaWYgKGludmVydCkge1xuICAgIHRyYW5zZm9ybSA9IG1hdHJpeC5pbnZlcnQoW10sIHRyYW5zZm9ybSk7XG4gIH1cblxuICByZXR1cm4gdmVjdG9yLmFwcGx5VHJhbnNmb3JtKFtdLCB0YXJnZXQsIHRyYW5zZm9ybSk7XG59XG4vKipcclxuICogQHBhcmFtIGRpcmVjdGlvbiAnbGVmdCcgJ3JpZ2h0JyAndG9wJyAnYm90dG9tJ1xyXG4gKiBAcGFyYW0gdHJhbnNmb3JtIFRyYW5zZm9ybSBtYXRyaXg6IGxpa2UgWzEsIDAsIDAsIDEsIDAsIDBdXHJcbiAqIEBwYXJhbSBpbnZlcnQgV2hldGhlciB1c2UgaW52ZXJ0IG1hdHJpeC5cclxuICogQHJldHVybiBUcmFuc2Zvcm1lZCBkaXJlY3Rpb24uICdsZWZ0JyAncmlnaHQnICd0b3AnICdib3R0b20nXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtRGlyZWN0aW9uKGRpcmVjdGlvbiwgdHJhbnNmb3JtLCBpbnZlcnQpIHtcbiAgLy8gUGljayBhIGJhc2UsIGVuc3VyZSB0aGF0IHRyYW5zZm9ybSByZXN1bHQgd2lsbCBub3QgYmUgKDAsIDApLlxuICB2YXIgaEJhc2UgPSB0cmFuc2Zvcm1bNF0gPT09IDAgfHwgdHJhbnNmb3JtWzVdID09PSAwIHx8IHRyYW5zZm9ybVswXSA9PT0gMCA/IDEgOiBNYXRoLmFicygyICogdHJhbnNmb3JtWzRdIC8gdHJhbnNmb3JtWzBdKTtcbiAgdmFyIHZCYXNlID0gdHJhbnNmb3JtWzRdID09PSAwIHx8IHRyYW5zZm9ybVs1XSA9PT0gMCB8fCB0cmFuc2Zvcm1bMl0gPT09IDAgPyAxIDogTWF0aC5hYnMoMiAqIHRyYW5zZm9ybVs0XSAvIHRyYW5zZm9ybVsyXSk7XG4gIHZhciB2ZXJ0ZXggPSBbZGlyZWN0aW9uID09PSAnbGVmdCcgPyAtaEJhc2UgOiBkaXJlY3Rpb24gPT09ICdyaWdodCcgPyBoQmFzZSA6IDAsIGRpcmVjdGlvbiA9PT0gJ3RvcCcgPyAtdkJhc2UgOiBkaXJlY3Rpb24gPT09ICdib3R0b20nID8gdkJhc2UgOiAwXTtcbiAgdmVydGV4ID0gYXBwbHlUcmFuc2Zvcm0odmVydGV4LCB0cmFuc2Zvcm0sIGludmVydCk7XG4gIHJldHVybiBNYXRoLmFicyh2ZXJ0ZXhbMF0pID4gTWF0aC5hYnModmVydGV4WzFdKSA/IHZlcnRleFswXSA+IDAgPyAncmlnaHQnIDogJ2xlZnQnIDogdmVydGV4WzFdID4gMCA/ICdib3R0b20nIDogJ3RvcCc7XG59XG5cbmZ1bmN0aW9uIGlzTm90R3JvdXAoZWwpIHtcbiAgcmV0dXJuICFlbC5pc0dyb3VwO1xufVxuXG5mdW5jdGlvbiBpc1BhdGgoZWwpIHtcbiAgcmV0dXJuIGVsLnNoYXBlICE9IG51bGw7XG59XG4vKipcclxuICogQXBwbHkgZ3JvdXAgdHJhbnNpdGlvbiBhbmltYXRpb24gZnJvbSBnMSB0byBnMi5cclxuICogSWYgbm8gYW5pbWF0YWJsZU1vZGVsLCBubyBhbmltYXRpb24uXHJcbiAqL1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBncm91cFRyYW5zaXRpb24oZzEsIGcyLCBhbmltYXRhYmxlTW9kZWwpIHtcbiAgaWYgKCFnMSB8fCAhZzIpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBmdW5jdGlvbiBnZXRFbE1hcChnKSB7XG4gICAgdmFyIGVsTWFwID0ge307XG4gICAgZy50cmF2ZXJzZShmdW5jdGlvbiAoZWwpIHtcbiAgICAgIGlmIChpc05vdEdyb3VwKGVsKSAmJiBlbC5hbmlkKSB7XG4gICAgICAgIGVsTWFwW2VsLmFuaWRdID0gZWw7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGVsTWFwO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0QW5pbWF0YWJsZVByb3BzKGVsKSB7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIHg6IGVsLngsXG4gICAgICB5OiBlbC55LFxuICAgICAgcm90YXRpb246IGVsLnJvdGF0aW9uXG4gICAgfTtcblxuICAgIGlmIChpc1BhdGgoZWwpKSB7XG4gICAgICBvYmouc2hhcGUgPSBleHRlbmQoe30sIGVsLnNoYXBlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgdmFyIGVsTWFwMSA9IGdldEVsTWFwKGcxKTtcbiAgZzIudHJhdmVyc2UoZnVuY3Rpb24gKGVsKSB7XG4gICAgaWYgKGlzTm90R3JvdXAoZWwpICYmIGVsLmFuaWQpIHtcbiAgICAgIHZhciBvbGRFbCA9IGVsTWFwMVtlbC5hbmlkXTtcblxuICAgICAgaWYgKG9sZEVsKSB7XG4gICAgICAgIHZhciBuZXdQcm9wID0gZ2V0QW5pbWF0YWJsZVByb3BzKGVsKTtcbiAgICAgICAgZWwuYXR0cihnZXRBbmltYXRhYmxlUHJvcHMob2xkRWwpKTtcbiAgICAgICAgdXBkYXRlUHJvcHMoZWwsIG5ld1Byb3AsIGFuaW1hdGFibGVNb2RlbCwgZ2V0RUNEYXRhKGVsKS5kYXRhSW5kZXgpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gY2xpcFBvaW50c0J5UmVjdChwb2ludHMsIHJlY3QpIHtcbiAgLy8gRklYTUU6IFRoaXMgd2F5IG1pZ2h0IGJlIGluY29ycmVjdCB3aGVuIGdyYXBoaWMgY2xpcHBlZCBieSBhIGNvcm5lclxuICAvLyBhbmQgd2hlbiBlbGVtZW50IGhhcyBhIGJvcmRlci5cbiAgcmV0dXJuIG1hcChwb2ludHMsIGZ1bmN0aW9uIChwb2ludCkge1xuICAgIHZhciB4ID0gcG9pbnRbMF07XG4gICAgeCA9IG1hdGhNYXgoeCwgcmVjdC54KTtcbiAgICB4ID0gbWF0aE1pbih4LCByZWN0LnggKyByZWN0LndpZHRoKTtcbiAgICB2YXIgeSA9IHBvaW50WzFdO1xuICAgIHkgPSBtYXRoTWF4KHksIHJlY3QueSk7XG4gICAgeSA9IG1hdGhNaW4oeSwgcmVjdC55ICsgcmVjdC5oZWlnaHQpO1xuICAgIHJldHVybiBbeCwgeV07XG4gIH0pO1xufVxuLyoqXHJcbiAqIFJldHVybiBhIG5ldyBjbGlwcGVkIHJlY3QuIElmIHJlY3Qgc2l6ZSBhcmUgbmVnYXRpdmUsIHJldHVybiB1bmRlZmluZWQuXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2xpcFJlY3RCeVJlY3QodGFyZ2V0UmVjdCwgcmVjdCkge1xuICB2YXIgeCA9IG1hdGhNYXgodGFyZ2V0UmVjdC54LCByZWN0LngpO1xuICB2YXIgeDIgPSBtYXRoTWluKHRhcmdldFJlY3QueCArIHRhcmdldFJlY3Qud2lkdGgsIHJlY3QueCArIHJlY3Qud2lkdGgpO1xuICB2YXIgeSA9IG1hdGhNYXgodGFyZ2V0UmVjdC55LCByZWN0LnkpO1xuICB2YXIgeTIgPSBtYXRoTWluKHRhcmdldFJlY3QueSArIHRhcmdldFJlY3QuaGVpZ2h0LCByZWN0LnkgKyByZWN0LmhlaWdodCk7IC8vIElmIHRoZSB0b3RhbCByZWN0IGlzIGNsaXBlZCwgbm90aGluZywgaW5jbHVkaW5nIHRoZSBib3JkZXIsXG4gIC8vIHNob3VsZCBiZSBwYWludGVkLiBTbyByZXR1cm4gdW5kZWZpbmVkLlxuXG4gIGlmICh4MiA+PSB4ICYmIHkyID49IHkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgeDogeCxcbiAgICAgIHk6IHksXG4gICAgICB3aWR0aDogeDIgLSB4LFxuICAgICAgaGVpZ2h0OiB5MiAtIHlcbiAgICB9O1xuICB9XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSWNvbihpY29uU3RyLCAvLyBTdXBwb3J0ICdpbWFnZTovLycgb3IgJ3BhdGg6Ly8nIG9yIGRpcmVjdCBzdmcgcGF0aC5cbm9wdCwgcmVjdCkge1xuICB2YXIgaW5uZXJPcHRzID0gZXh0ZW5kKHtcbiAgICByZWN0SG92ZXI6IHRydWVcbiAgfSwgb3B0KTtcbiAgdmFyIHN0eWxlID0gaW5uZXJPcHRzLnN0eWxlID0ge1xuICAgIHN0cm9rZU5vU2NhbGU6IHRydWVcbiAgfTtcbiAgcmVjdCA9IHJlY3QgfHwge1xuICAgIHg6IC0xLFxuICAgIHk6IC0xLFxuICAgIHdpZHRoOiAyLFxuICAgIGhlaWdodDogMlxuICB9O1xuXG4gIGlmIChpY29uU3RyKSB7XG4gICAgcmV0dXJuIGljb25TdHIuaW5kZXhPZignaW1hZ2U6Ly8nKSA9PT0gMCA/IChzdHlsZS5pbWFnZSA9IGljb25TdHIuc2xpY2UoOCksIGRlZmF1bHRzKHN0eWxlLCByZWN0KSwgbmV3IFpSSW1hZ2UoaW5uZXJPcHRzKSkgOiBtYWtlUGF0aChpY29uU3RyLnJlcGxhY2UoJ3BhdGg6Ly8nLCAnJyksIGlubmVyT3B0cywgcmVjdCwgJ2NlbnRlcicpO1xuICB9XG59XG4vKipcclxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZ2l2ZW4gbGluZSAobGluZSBgYWApIGFuZCB0aGUgZ2l2ZW4gcG9seWdvblxyXG4gKiBhcmUgaW50ZXJzZWN0LlxyXG4gKiBOb3RlIHRoYXQgd2UgZG8gbm90IGNvdW50IGNvbGluZWFyIGFzIGludGVyc2VjdCBoZXJlIGJlY2F1c2Ugbm9cclxuICogcmVxdWlyZW1lbnQgZm9yIHRoYXQuIFdlIGNvdWxkIGRvIHRoYXQgaWYgcmVxdWlyZWQgaW4gZnV0dXJlLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxpbmVQb2x5Z29uSW50ZXJzZWN0KGExeCwgYTF5LCBhMngsIGEyeSwgcG9pbnRzKSB7XG4gIGZvciAodmFyIGkgPSAwLCBwMiA9IHBvaW50c1twb2ludHMubGVuZ3RoIC0gMV07IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcCA9IHBvaW50c1tpXTtcblxuICAgIGlmIChsaW5lTGluZUludGVyc2VjdChhMXgsIGExeSwgYTJ4LCBhMnksIHBbMF0sIHBbMV0sIHAyWzBdLCBwMlsxXSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHAyID0gcDtcbiAgfVxufVxuLyoqXHJcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGdpdmVuIHR3byBsaW5lcyAobGluZSBgYWAgYW5kIGxpbmUgYGJgKVxyXG4gKiBhcmUgaW50ZXJzZWN0LlxyXG4gKiBOb3RlIHRoYXQgd2UgZG8gbm90IGNvdW50IGNvbGluZWFyIGFzIGludGVyc2VjdCBoZXJlIGJlY2F1c2Ugbm9cclxuICogcmVxdWlyZW1lbnQgZm9yIHRoYXQuIFdlIGNvdWxkIGRvIHRoYXQgaWYgcmVxdWlyZWQgaW4gZnV0dXJlLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxpbmVMaW5lSW50ZXJzZWN0KGExeCwgYTF5LCBhMngsIGEyeSwgYjF4LCBiMXksIGIyeCwgYjJ5KSB7XG4gIC8vIGxldCBgdmVjX21gIHRvIGJlIGB2ZWNfYTIgLSB2ZWNfYTFgIGFuZCBgdmVjX25gIHRvIGJlIGB2ZWNfYjIgLSB2ZWNfYjFgLlxuICB2YXIgbXggPSBhMnggLSBhMXg7XG4gIHZhciBteSA9IGEyeSAtIGExeTtcbiAgdmFyIG54ID0gYjJ4IC0gYjF4O1xuICB2YXIgbnkgPSBiMnkgLSBiMXk7IC8vIGB2ZWNfbWAgYW5kIGB2ZWNfbmAgYXJlIHBhcmFsbGVsIGlmZlxuICAvLyAgICAgZXhpc3RpbmcgYGtgIHN1Y2ggdGhhdCBgdmVjX20gPSBrIMK3IHZlY19uYCwgZXF1aXZhbGVudCB0byBgdmVjX20gWCB2ZWNfbiA9IDBgLlxuXG4gIHZhciBubUNyb3NzUHJvZHVjdCA9IGNyb3NzUHJvZHVjdDJkKG54LCBueSwgbXgsIG15KTtcblxuICBpZiAobmVhclplcm8obm1Dcm9zc1Byb2R1Y3QpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IC8vIGB2ZWNfbWAgYW5kIGB2ZWNfbmAgYXJlIGludGVyc2VjdCBpZmZcbiAgLy8gICAgIGV4aXN0aW5nIGBwYCBhbmQgYHFgIGluIFswLCAxXSBzdWNoIHRoYXQgYHZlY19hMSArIHAgKiB2ZWNfbSA9IHZlY19iMSArIHEgKiB2ZWNfbmAsXG4gIC8vICAgICBzdWNoIHRoYXQgYHEgPSAoKHZlY19hMSAtIHZlY19iMSkgWCB2ZWNfbSkgLyAodmVjX24gWCB2ZWNfbSlgXG4gIC8vICAgICAgICAgICBhbmQgYHAgPSAoKHZlY19hMSAtIHZlY19iMSkgWCB2ZWNfbikgLyAodmVjX24gWCB2ZWNfbSlgLlxuXG5cbiAgdmFyIGIxYTF4ID0gYTF4IC0gYjF4O1xuICB2YXIgYjFhMXkgPSBhMXkgLSBiMXk7XG4gIHZhciBxID0gY3Jvc3NQcm9kdWN0MmQoYjFhMXgsIGIxYTF5LCBteCwgbXkpIC8gbm1Dcm9zc1Byb2R1Y3Q7XG5cbiAgaWYgKHEgPCAwIHx8IHEgPiAxKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIHAgPSBjcm9zc1Byb2R1Y3QyZChiMWExeCwgYjFhMXksIG54LCBueSkgLyBubUNyb3NzUHJvZHVjdDtcblxuICBpZiAocCA8IDAgfHwgcCA+IDEpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxyXG4gKiBDcm9zcyBwcm9kdWN0IG9mIDItZGltZW5zaW9uIHZlY3Rvci5cclxuICovXG5cbmZ1bmN0aW9uIGNyb3NzUHJvZHVjdDJkKHgxLCB5MSwgeDIsIHkyKSB7XG4gIHJldHVybiB4MSAqIHkyIC0geDIgKiB5MTtcbn1cblxuZnVuY3Rpb24gbmVhclplcm8odmFsKSB7XG4gIHJldHVybiB2YWwgPD0gMWUtNiAmJiB2YWwgPj0gLTFlLTY7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRUb29sdGlwQ29uZmlnKG9wdCkge1xuICB2YXIgaXRlbVRvb2x0aXBPcHRpb24gPSBvcHQuaXRlbVRvb2x0aXBPcHRpb247XG4gIHZhciBjb21wb25lbnRNb2RlbCA9IG9wdC5jb21wb25lbnRNb2RlbDtcbiAgdmFyIGl0ZW1OYW1lID0gb3B0Lml0ZW1OYW1lO1xuICB2YXIgaXRlbVRvb2x0aXBPcHRpb25PYmogPSBpc1N0cmluZyhpdGVtVG9vbHRpcE9wdGlvbikgPyB7XG4gICAgZm9ybWF0dGVyOiBpdGVtVG9vbHRpcE9wdGlvblxuICB9IDogaXRlbVRvb2x0aXBPcHRpb247XG4gIHZhciBtYWluVHlwZSA9IGNvbXBvbmVudE1vZGVsLm1haW5UeXBlO1xuICB2YXIgY29tcG9uZW50SW5kZXggPSBjb21wb25lbnRNb2RlbC5jb21wb25lbnRJbmRleDtcbiAgdmFyIGZvcm1hdHRlclBhcmFtcyA9IHtcbiAgICBjb21wb25lbnRUeXBlOiBtYWluVHlwZSxcbiAgICBuYW1lOiBpdGVtTmFtZSxcbiAgICAkdmFyczogWyduYW1lJ11cbiAgfTtcbiAgZm9ybWF0dGVyUGFyYW1zW21haW5UeXBlICsgJ0luZGV4J10gPSBjb21wb25lbnRJbmRleDtcbiAgdmFyIGZvcm1hdHRlclBhcmFtc0V4dHJhID0gb3B0LmZvcm1hdHRlclBhcmFtc0V4dHJhO1xuXG4gIGlmIChmb3JtYXR0ZXJQYXJhbXNFeHRyYSkge1xuICAgIGVhY2goa2V5cyhmb3JtYXR0ZXJQYXJhbXNFeHRyYSksIGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIGlmICghaGFzT3duKGZvcm1hdHRlclBhcmFtcywga2V5KSkge1xuICAgICAgICBmb3JtYXR0ZXJQYXJhbXNba2V5XSA9IGZvcm1hdHRlclBhcmFtc0V4dHJhW2tleV07XG4gICAgICAgIGZvcm1hdHRlclBhcmFtcy4kdmFycy5wdXNoKGtleSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICB2YXIgZWNEYXRhID0gZ2V0RUNEYXRhKG9wdC5lbCk7XG4gIGVjRGF0YS5jb21wb25lbnRNYWluVHlwZSA9IG1haW5UeXBlO1xuICBlY0RhdGEuY29tcG9uZW50SW5kZXggPSBjb21wb25lbnRJbmRleDtcbiAgZWNEYXRhLnRvb2x0aXBDb25maWcgPSB7XG4gICAgbmFtZTogaXRlbU5hbWUsXG4gICAgb3B0aW9uOiBkZWZhdWx0cyh7XG4gICAgICBjb250ZW50OiBpdGVtTmFtZSxcbiAgICAgIGZvcm1hdHRlclBhcmFtczogZm9ybWF0dGVyUGFyYW1zXG4gICAgfSwgaXRlbVRvb2x0aXBPcHRpb25PYmopXG4gIH07XG59XG5cbmZ1bmN0aW9uIHRyYXZlcnNlRWxlbWVudChlbCwgY2IpIHtcbiAgdmFyIHN0b3BwZWQ7IC8vIFRPRE9cbiAgLy8gUG9seWZpbGwgZm9yIGZpeGluZyB6cmVuZGVyIGdyb3VwIHRyYXZlcnNlIGRvbid0IHZpc2l0IGl0J3Mgcm9vdCBpc3N1ZS5cblxuICBpZiAoZWwuaXNHcm91cCkge1xuICAgIHN0b3BwZWQgPSBjYihlbCk7XG4gIH1cblxuICBpZiAoIXN0b3BwZWQpIHtcbiAgICBlbC50cmF2ZXJzZShjYik7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYXZlcnNlRWxlbWVudHMoZWxzLCBjYikge1xuICBpZiAoZWxzKSB7XG4gICAgaWYgKGlzQXJyYXkoZWxzKSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdHJhdmVyc2VFbGVtZW50KGVsc1tpXSwgY2IpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0cmF2ZXJzZUVsZW1lbnQoZWxzLCBjYik7XG4gICAgfVxuICB9XG59IC8vIFJlZ2lzdGVyIGJ1aWx0LWluIHNoYXBlcy4gVGhlc2Ugc2hhcGVzIG1pZ2h0IGJlIG92ZXJ3cml0dGVuXG4vLyBieSB1c2VycywgYWx0aG91Z2ggd2UgZG8gbm90IHJlY29tbWVuZCB0aGF0LlxuXG5yZWdpc3RlclNoYXBlKCdjaXJjbGUnLCBDaXJjbGUpO1xucmVnaXN0ZXJTaGFwZSgnZWxsaXBzZScsIEVsbGlwc2UpO1xucmVnaXN0ZXJTaGFwZSgnc2VjdG9yJywgU2VjdG9yKTtcbnJlZ2lzdGVyU2hhcGUoJ3JpbmcnLCBSaW5nKTtcbnJlZ2lzdGVyU2hhcGUoJ3BvbHlnb24nLCBQb2x5Z29uKTtcbnJlZ2lzdGVyU2hhcGUoJ3BvbHlsaW5lJywgUG9seWxpbmUpO1xucmVnaXN0ZXJTaGFwZSgncmVjdCcsIFJlY3QpO1xucmVnaXN0ZXJTaGFwZSgnbGluZScsIExpbmUpO1xucmVnaXN0ZXJTaGFwZSgnYmV6aWVyQ3VydmUnLCBCZXppZXJDdXJ2ZSk7XG5yZWdpc3RlclNoYXBlKCdhcmMnLCBBcmMpO1xuZXhwb3J0IHsgR3JvdXAsIFpSSW1hZ2UgYXMgSW1hZ2UsIFpSVGV4dCBhcyBUZXh0LCBDaXJjbGUsIEVsbGlwc2UsIFNlY3RvciwgUmluZywgUG9seWdvbiwgUG9seWxpbmUsIFJlY3QsIExpbmUsIEJlemllckN1cnZlLCBBcmMsIEluY3JlbWVudGFsRGlzcGxheWFibGUsIENvbXBvdW5kUGF0aCwgTGluZWFyR3JhZGllbnQsIFJhZGlhbEdyYWRpZW50LCBCb3VuZGluZ1JlY3QsIE9yaWVudGVkQm91bmRpbmdSZWN0LCBQb2ludCwgUGF0aCB9OyIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IFpSVGV4dCBmcm9tICd6cmVuZGVyL2xpYi9ncmFwaGljL1RleHQuanMnO1xuaW1wb3J0IHsgaXNGdW5jdGlvbiwgcmV0cmlldmUyLCBleHRlbmQsIGtleXMsIHRyaW0gfSBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0IHsgU1BFQ0lBTF9TVEFURVMsIERJU1BMQVlfU1RBVEVTIH0gZnJvbSAnLi4vdXRpbC9zdGF0ZXMuanMnO1xuaW1wb3J0IHsgZGVwcmVjYXRlUmVwbGFjZUxvZyB9IGZyb20gJy4uL3V0aWwvbG9nLmpzJztcbmltcG9ydCB7IG1ha2VJbm5lciwgaW50ZXJwb2xhdGVSYXdWYWx1ZXMgfSBmcm9tICcuLi91dGlsL21vZGVsLmpzJztcbmltcG9ydCB7IGluaXRQcm9wcywgdXBkYXRlUHJvcHMgfSBmcm9tICcuLi91dGlsL2dyYXBoaWMuanMnO1xudmFyIEVNUFRZX09CSiA9IHt9O1xuZXhwb3J0IGZ1bmN0aW9uIHNldExhYmVsVGV4dChsYWJlbCwgbGFiZWxUZXh0cykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IFNQRUNJQUxfU1RBVEVTLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHN0YXRlTmFtZSA9IFNQRUNJQUxfU1RBVEVTW2ldO1xuICAgIHZhciB0ZXh0ID0gbGFiZWxUZXh0c1tzdGF0ZU5hbWVdO1xuICAgIHZhciBzdGF0ZSA9IGxhYmVsLmVuc3VyZVN0YXRlKHN0YXRlTmFtZSk7XG4gICAgc3RhdGUuc3R5bGUgPSBzdGF0ZS5zdHlsZSB8fCB7fTtcbiAgICBzdGF0ZS5zdHlsZS50ZXh0ID0gdGV4dDtcbiAgfVxuXG4gIHZhciBvbGRTdGF0ZXMgPSBsYWJlbC5jdXJyZW50U3RhdGVzLnNsaWNlKCk7XG4gIGxhYmVsLmNsZWFyU3RhdGVzKHRydWUpO1xuICBsYWJlbC5zZXRTdHlsZSh7XG4gICAgdGV4dDogbGFiZWxUZXh0cy5ub3JtYWxcbiAgfSk7XG4gIGxhYmVsLnVzZVN0YXRlcyhvbGRTdGF0ZXMsIHRydWUpO1xufVxuXG5mdW5jdGlvbiBnZXRMYWJlbFRleHQob3B0LCBzdGF0ZU1vZGVscywgaW50ZXJwb2xhdGVkVmFsdWUpIHtcbiAgdmFyIGxhYmVsRmV0Y2hlciA9IG9wdC5sYWJlbEZldGNoZXI7XG4gIHZhciBsYWJlbERhdGFJbmRleCA9IG9wdC5sYWJlbERhdGFJbmRleDtcbiAgdmFyIGxhYmVsRGltSW5kZXggPSBvcHQubGFiZWxEaW1JbmRleDtcbiAgdmFyIG5vcm1hbE1vZGVsID0gc3RhdGVNb2RlbHMubm9ybWFsO1xuICB2YXIgYmFzZVRleHQ7XG5cbiAgaWYgKGxhYmVsRmV0Y2hlcikge1xuICAgIGJhc2VUZXh0ID0gbGFiZWxGZXRjaGVyLmdldEZvcm1hdHRlZExhYmVsKGxhYmVsRGF0YUluZGV4LCAnbm9ybWFsJywgbnVsbCwgbGFiZWxEaW1JbmRleCwgbm9ybWFsTW9kZWwgJiYgbm9ybWFsTW9kZWwuZ2V0KCdmb3JtYXR0ZXInKSwgaW50ZXJwb2xhdGVkVmFsdWUgIT0gbnVsbCA/IHtcbiAgICAgIGludGVycG9sYXRlZFZhbHVlOiBpbnRlcnBvbGF0ZWRWYWx1ZVxuICAgIH0gOiBudWxsKTtcbiAgfVxuXG4gIGlmIChiYXNlVGV4dCA9PSBudWxsKSB7XG4gICAgYmFzZVRleHQgPSBpc0Z1bmN0aW9uKG9wdC5kZWZhdWx0VGV4dCkgPyBvcHQuZGVmYXVsdFRleHQobGFiZWxEYXRhSW5kZXgsIG9wdCwgaW50ZXJwb2xhdGVkVmFsdWUpIDogb3B0LmRlZmF1bHRUZXh0O1xuICB9XG5cbiAgdmFyIHN0YXRlc1RleHQgPSB7XG4gICAgbm9ybWFsOiBiYXNlVGV4dFxuICB9O1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgU1BFQ0lBTF9TVEFURVMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc3RhdGVOYW1lID0gU1BFQ0lBTF9TVEFURVNbaV07XG4gICAgdmFyIHN0YXRlTW9kZWwgPSBzdGF0ZU1vZGVsc1tzdGF0ZU5hbWVdO1xuICAgIHN0YXRlc1RleHRbc3RhdGVOYW1lXSA9IHJldHJpZXZlMihsYWJlbEZldGNoZXIgPyBsYWJlbEZldGNoZXIuZ2V0Rm9ybWF0dGVkTGFiZWwobGFiZWxEYXRhSW5kZXgsIHN0YXRlTmFtZSwgbnVsbCwgbGFiZWxEaW1JbmRleCwgc3RhdGVNb2RlbCAmJiBzdGF0ZU1vZGVsLmdldCgnZm9ybWF0dGVyJykpIDogbnVsbCwgYmFzZVRleHQpO1xuICB9XG5cbiAgcmV0dXJuIHN0YXRlc1RleHQ7XG59XG5cbmZ1bmN0aW9uIHNldExhYmVsU3R5bGUodGFyZ2V0RWwsIGxhYmVsU3RhdGVzTW9kZWxzLCBvcHQsIHN0YXRlU3BlY2lmaWVkIC8vIFRPRE8gc3BlY2lmaWVkIHBvc2l0aW9uP1xuKSB7XG4gIG9wdCA9IG9wdCB8fCBFTVBUWV9PQko7XG4gIHZhciBpc1NldE9uVGV4dCA9IHRhcmdldEVsIGluc3RhbmNlb2YgWlJUZXh0O1xuICB2YXIgbmVlZHNDcmVhdGVUZXh0ID0gZmFsc2U7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBESVNQTEFZX1NUQVRFUy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzdGF0ZU1vZGVsID0gbGFiZWxTdGF0ZXNNb2RlbHNbRElTUExBWV9TVEFURVNbaV1dO1xuXG4gICAgaWYgKHN0YXRlTW9kZWwgJiYgc3RhdGVNb2RlbC5nZXRTaGFsbG93KCdzaG93JykpIHtcbiAgICAgIG5lZWRzQ3JlYXRlVGV4dCA9IHRydWU7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICB2YXIgdGV4dENvbnRlbnQgPSBpc1NldE9uVGV4dCA/IHRhcmdldEVsIDogdGFyZ2V0RWwuZ2V0VGV4dENvbnRlbnQoKTtcblxuICBpZiAobmVlZHNDcmVhdGVUZXh0KSB7XG4gICAgaWYgKCFpc1NldE9uVGV4dCkge1xuICAgICAgLy8gUmV1c2UgdGhlIHByZXZpb3VzXG4gICAgICBpZiAoIXRleHRDb250ZW50KSB7XG4gICAgICAgIHRleHRDb250ZW50ID0gbmV3IFpSVGV4dCgpO1xuICAgICAgICB0YXJnZXRFbC5zZXRUZXh0Q29udGVudCh0ZXh0Q29udGVudCk7XG4gICAgICB9IC8vIFVzZSBzYW1lIHN0YXRlIHByb3h5XG5cblxuICAgICAgaWYgKHRhcmdldEVsLnN0YXRlUHJveHkpIHtcbiAgICAgICAgdGV4dENvbnRlbnQuc3RhdGVQcm94eSA9IHRhcmdldEVsLnN0YXRlUHJveHk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGxhYmVsU3RhdGVzVGV4dHMgPSBnZXRMYWJlbFRleHQob3B0LCBsYWJlbFN0YXRlc01vZGVscyk7XG4gICAgdmFyIG5vcm1hbE1vZGVsID0gbGFiZWxTdGF0ZXNNb2RlbHMubm9ybWFsO1xuICAgIHZhciBzaG93Tm9ybWFsID0gISFub3JtYWxNb2RlbC5nZXRTaGFsbG93KCdzaG93Jyk7XG4gICAgdmFyIG5vcm1hbFN0eWxlID0gY3JlYXRlVGV4dFN0eWxlKG5vcm1hbE1vZGVsLCBzdGF0ZVNwZWNpZmllZCAmJiBzdGF0ZVNwZWNpZmllZC5ub3JtYWwsIG9wdCwgZmFsc2UsICFpc1NldE9uVGV4dCk7XG4gICAgbm9ybWFsU3R5bGUudGV4dCA9IGxhYmVsU3RhdGVzVGV4dHMubm9ybWFsO1xuXG4gICAgaWYgKCFpc1NldE9uVGV4dCkge1xuICAgICAgLy8gQWx3YXlzIGNyZWF0ZSBuZXdcbiAgICAgIHRhcmdldEVsLnNldFRleHRDb25maWcoY3JlYXRlVGV4dENvbmZpZyhub3JtYWxNb2RlbCwgb3B0LCBmYWxzZSkpO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgU1BFQ0lBTF9TVEFURVMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzdGF0ZU5hbWUgPSBTUEVDSUFMX1NUQVRFU1tpXTtcbiAgICAgIHZhciBzdGF0ZU1vZGVsID0gbGFiZWxTdGF0ZXNNb2RlbHNbc3RhdGVOYW1lXTtcblxuICAgICAgaWYgKHN0YXRlTW9kZWwpIHtcbiAgICAgICAgdmFyIHN0YXRlT2JqID0gdGV4dENvbnRlbnQuZW5zdXJlU3RhdGUoc3RhdGVOYW1lKTtcbiAgICAgICAgdmFyIHN0YXRlU2hvdyA9ICEhcmV0cmlldmUyKHN0YXRlTW9kZWwuZ2V0U2hhbGxvdygnc2hvdycpLCBzaG93Tm9ybWFsKTtcblxuICAgICAgICBpZiAoc3RhdGVTaG93ICE9PSBzaG93Tm9ybWFsKSB7XG4gICAgICAgICAgc3RhdGVPYmouaWdub3JlID0gIXN0YXRlU2hvdztcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXRlT2JqLnN0eWxlID0gY3JlYXRlVGV4dFN0eWxlKHN0YXRlTW9kZWwsIHN0YXRlU3BlY2lmaWVkICYmIHN0YXRlU3BlY2lmaWVkW3N0YXRlTmFtZV0sIG9wdCwgdHJ1ZSwgIWlzU2V0T25UZXh0KTtcbiAgICAgICAgc3RhdGVPYmouc3R5bGUudGV4dCA9IGxhYmVsU3RhdGVzVGV4dHNbc3RhdGVOYW1lXTtcblxuICAgICAgICBpZiAoIWlzU2V0T25UZXh0KSB7XG4gICAgICAgICAgdmFyIHRhcmdldEVsRW1waGFzaXNTdGF0ZSA9IHRhcmdldEVsLmVuc3VyZVN0YXRlKHN0YXRlTmFtZSk7XG4gICAgICAgICAgdGFyZ2V0RWxFbXBoYXNpc1N0YXRlLnRleHRDb25maWcgPSBjcmVhdGVUZXh0Q29uZmlnKHN0YXRlTW9kZWwsIG9wdCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIFBFTkRJTkc6IGlmIHRoZXJlIGlzIG1hbnkgcmVxdWlyZW1lbnRzIHRoYXQgZW1waGFzaXMgcG9zaXRpb25cbiAgICAvLyBuZWVkIHRvIGJlIGRpZmZlcmVudCBmcm9tIG5vcm1hbCBwb3NpdGlvbiwgd2UgbWlnaHQgY29uc2lkZXJcbiAgICAvLyBhdXRvIHNpbGVudCBpcyB0aG9zZSBjYXNlcy5cblxuXG4gICAgdGV4dENvbnRlbnQuc2lsZW50ID0gISFub3JtYWxNb2RlbC5nZXRTaGFsbG93KCdzaWxlbnQnKTsgLy8gS2VlcCB4IGFuZCB5XG5cbiAgICBpZiAodGV4dENvbnRlbnQuc3R5bGUueCAhPSBudWxsKSB7XG4gICAgICBub3JtYWxTdHlsZS54ID0gdGV4dENvbnRlbnQuc3R5bGUueDtcbiAgICB9XG5cbiAgICBpZiAodGV4dENvbnRlbnQuc3R5bGUueSAhPSBudWxsKSB7XG4gICAgICBub3JtYWxTdHlsZS55ID0gdGV4dENvbnRlbnQuc3R5bGUueTtcbiAgICB9XG5cbiAgICB0ZXh0Q29udGVudC5pZ25vcmUgPSAhc2hvd05vcm1hbDsgLy8gQWx3YXlzIGNyZWF0ZSBuZXcgc3R5bGUuXG5cbiAgICB0ZXh0Q29udGVudC51c2VTdHlsZShub3JtYWxTdHlsZSk7XG4gICAgdGV4dENvbnRlbnQuZGlydHkoKTtcblxuICAgIGlmIChvcHQuZW5hYmxlVGV4dFNldHRlcikge1xuICAgICAgbGFiZWxJbm5lcih0ZXh0Q29udGVudCkuc2V0TGFiZWxUZXh0ID0gZnVuY3Rpb24gKGludGVycG9sYXRlZFZhbHVlKSB7XG4gICAgICAgIHZhciBsYWJlbFN0YXRlc1RleHRzID0gZ2V0TGFiZWxUZXh0KG9wdCwgbGFiZWxTdGF0ZXNNb2RlbHMsIGludGVycG9sYXRlZFZhbHVlKTtcbiAgICAgICAgc2V0TGFiZWxUZXh0KHRleHRDb250ZW50LCBsYWJlbFN0YXRlc1RleHRzKTtcbiAgICAgIH07XG4gICAgfVxuICB9IGVsc2UgaWYgKHRleHRDb250ZW50KSB7XG4gICAgLy8gTm90IGRpc3BsYXkgcmljaCB0ZXh0LlxuICAgIHRleHRDb250ZW50Lmlnbm9yZSA9IHRydWU7XG4gIH1cblxuICB0YXJnZXRFbC5kaXJ0eSgpO1xufVxuXG5leHBvcnQgeyBzZXRMYWJlbFN0eWxlIH07XG5leHBvcnQgZnVuY3Rpb24gZ2V0TGFiZWxTdGF0ZXNNb2RlbHMoaXRlbU1vZGVsLCBsYWJlbE5hbWUpIHtcbiAgbGFiZWxOYW1lID0gbGFiZWxOYW1lIHx8ICdsYWJlbCc7XG4gIHZhciBzdGF0ZXNNb2RlbHMgPSB7XG4gICAgbm9ybWFsOiBpdGVtTW9kZWwuZ2V0TW9kZWwobGFiZWxOYW1lKVxuICB9O1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgU1BFQ0lBTF9TVEFURVMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc3RhdGVOYW1lID0gU1BFQ0lBTF9TVEFURVNbaV07XG4gICAgc3RhdGVzTW9kZWxzW3N0YXRlTmFtZV0gPSBpdGVtTW9kZWwuZ2V0TW9kZWwoW3N0YXRlTmFtZSwgbGFiZWxOYW1lXSk7XG4gIH1cblxuICByZXR1cm4gc3RhdGVzTW9kZWxzO1xufVxuLyoqXHJcbiAqIFNldCBiYXNpYyB0ZXh0U3R5bGUgcHJvcGVydGllcy5cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUZXh0U3R5bGUodGV4dFN0eWxlTW9kZWwsIHNwZWNpZmllZFRleHRTdHlsZSwgLy8gRml4ZWQgc3R5bGUgaW4gdGhlIGNvZGUuIENhbid0IGJlIHNldCBieSBtb2RlbC5cbm9wdCwgaXNOb3ROb3JtYWwsIGlzQXR0YWNoZWQgLy8gSWYgdGV4dCBpcyBhdHRhY2hlZCBvbiBhbiBlbGVtZW50LiBJZiBzbywgYXV0byBjb2xvciB3aWxsIGhhbmRsaW5nIGluIHpyZW5kZXIuXG4pIHtcbiAgdmFyIHRleHRTdHlsZSA9IHt9O1xuICBzZXRUZXh0U3R5bGVDb21tb24odGV4dFN0eWxlLCB0ZXh0U3R5bGVNb2RlbCwgb3B0LCBpc05vdE5vcm1hbCwgaXNBdHRhY2hlZCk7XG4gIHNwZWNpZmllZFRleHRTdHlsZSAmJiBleHRlbmQodGV4dFN0eWxlLCBzcGVjaWZpZWRUZXh0U3R5bGUpOyAvLyB0ZXh0U3R5bGUuaG9zdCAmJiB0ZXh0U3R5bGUuaG9zdC5kaXJ0eSAmJiB0ZXh0U3R5bGUuaG9zdC5kaXJ0eShmYWxzZSk7XG5cbiAgcmV0dXJuIHRleHRTdHlsZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUZXh0Q29uZmlnKHRleHRTdHlsZU1vZGVsLCBvcHQsIGlzTm90Tm9ybWFsKSB7XG4gIG9wdCA9IG9wdCB8fCB7fTtcbiAgdmFyIHRleHRDb25maWcgPSB7fTtcbiAgdmFyIGxhYmVsUG9zaXRpb247XG4gIHZhciBsYWJlbFJvdGF0ZSA9IHRleHRTdHlsZU1vZGVsLmdldFNoYWxsb3coJ3JvdGF0ZScpO1xuICB2YXIgbGFiZWxEaXN0YW5jZSA9IHJldHJpZXZlMih0ZXh0U3R5bGVNb2RlbC5nZXRTaGFsbG93KCdkaXN0YW5jZScpLCBpc05vdE5vcm1hbCA/IG51bGwgOiA1KTtcbiAgdmFyIGxhYmVsT2Zmc2V0ID0gdGV4dFN0eWxlTW9kZWwuZ2V0U2hhbGxvdygnb2Zmc2V0Jyk7XG4gIGxhYmVsUG9zaXRpb24gPSB0ZXh0U3R5bGVNb2RlbC5nZXRTaGFsbG93KCdwb3NpdGlvbicpIHx8IChpc05vdE5vcm1hbCA/IG51bGwgOiAnaW5zaWRlJyk7IC8vICdvdXRzaWRlJyBpcyBub3QgYSB2YWxpZCB6ciB0ZXh0UG9zdGlvbiB2YWx1ZSwgYnV0IHVzZWRcbiAgLy8gaW4gYmFyIHNlcmllcywgYW5kIG1hZ3JpYyB0eXBlIHNob3VsZCBiZSBjb25zaWRlcmVkLlxuXG4gIGxhYmVsUG9zaXRpb24gPT09ICdvdXRzaWRlJyAmJiAobGFiZWxQb3NpdGlvbiA9IG9wdC5kZWZhdWx0T3V0c2lkZVBvc2l0aW9uIHx8ICd0b3AnKTtcblxuICBpZiAobGFiZWxQb3NpdGlvbiAhPSBudWxsKSB7XG4gICAgdGV4dENvbmZpZy5wb3NpdGlvbiA9IGxhYmVsUG9zaXRpb247XG4gIH1cblxuICBpZiAobGFiZWxPZmZzZXQgIT0gbnVsbCkge1xuICAgIHRleHRDb25maWcub2Zmc2V0ID0gbGFiZWxPZmZzZXQ7XG4gIH1cblxuICBpZiAobGFiZWxSb3RhdGUgIT0gbnVsbCkge1xuICAgIGxhYmVsUm90YXRlICo9IE1hdGguUEkgLyAxODA7XG4gICAgdGV4dENvbmZpZy5yb3RhdGlvbiA9IGxhYmVsUm90YXRlO1xuICB9XG5cbiAgaWYgKGxhYmVsRGlzdGFuY2UgIT0gbnVsbCkge1xuICAgIHRleHRDb25maWcuZGlzdGFuY2UgPSBsYWJlbERpc3RhbmNlO1xuICB9IC8vIGZpbGwgYW5kIGF1dG8gaXMgZGV0ZXJtaW5lZCBieSB0aGUgY29sb3Igb2YgcGF0aCBmaWxsIGlmIGl0J3Mgbm90IHNwZWNpZmllZCBieSBkZXZlbG9wZXJzLlxuXG5cbiAgdGV4dENvbmZpZy5vdXRzaWRlRmlsbCA9IHRleHRTdHlsZU1vZGVsLmdldCgnY29sb3InKSA9PT0gJ2luaGVyaXQnID8gb3B0LmluaGVyaXRDb2xvciB8fCBudWxsIDogJ2F1dG8nO1xuICByZXR1cm4gdGV4dENvbmZpZztcbn1cbi8qKlxyXG4gKiBUaGUgdW5pZm9ybSBlbnRyeSBvZiBzZXQgdGV4dCBzdHlsZSwgdGhhdCBpcywgcmV0cmlldmUgc3R5bGUgZGVmaW5pdGlvbnNcclxuICogZnJvbSBgbW9kZWxgIGFuZCBzZXQgdG8gYHRleHRTdHlsZWAgb2JqZWN0LlxyXG4gKlxyXG4gKiBOZXZlciBpbiBtZXJnZSBtb2RlLCBidXQgaW4gb3ZlcndyaXRlIG1vZGUsIHRoYXQgaXMsIGFsbCBvZiB0aGUgdGV4dCBzdHlsZVxyXG4gKiBwcm9wZXJ0aWVzIHdpbGwgYmUgc2V0LiAoQ29uc2lkZXIgdGhlIHN0YXRlcyBvZiBub3JtYWwgYW5kIGVtcGhhc2lzIGFuZFxyXG4gKiBkZWZhdWx0IHZhbHVlIGNhbiBiZSBhZG9wdGVkLCBtZXJnZSB3b3VsZCBtYWtlIHRoZSBsb2dpYyB0b28gY29tcGxpY2F0ZWRcclxuICogdG8gbWFuYWdlLilcclxuICovXG5cbmZ1bmN0aW9uIHNldFRleHRTdHlsZUNvbW1vbih0ZXh0U3R5bGUsIHRleHRTdHlsZU1vZGVsLCBvcHQsIGlzTm90Tm9ybWFsLCBpc0F0dGFjaGVkKSB7XG4gIC8vIENvbnNpZGVyIHRoZXJlIHdpbGwgYmUgYWJub3JtYWwgd2hlbiBtZXJnZSBob3ZlciBzdHlsZSB0byBub3JtYWwgc3R5bGUgaWYgZ2l2ZW4gZGVmYXVsdCB2YWx1ZS5cbiAgb3B0ID0gb3B0IHx8IEVNUFRZX09CSjtcbiAgdmFyIGVjTW9kZWwgPSB0ZXh0U3R5bGVNb2RlbC5lY01vZGVsO1xuICB2YXIgZ2xvYmFsVGV4dFN0eWxlID0gZWNNb2RlbCAmJiBlY01vZGVsLm9wdGlvbi50ZXh0U3R5bGU7IC8vIENvbnNpZGVyIGNhc2U6XG4gIC8vIHtcbiAgLy8gICAgIGRhdGE6IFt7XG4gIC8vICAgICAgICAgdmFsdWU6IDEyLFxuICAvLyAgICAgICAgIGxhYmVsOiB7XG4gIC8vICAgICAgICAgICAgIHJpY2g6IHtcbiAgLy8gICAgICAgICAgICAgICAgIC8vIG5vICdhJyBoZXJlIGJ1dCB1c2luZyBwYXJlbnQgJ2EnLlxuICAvLyAgICAgICAgICAgICB9XG4gIC8vICAgICAgICAgfVxuICAvLyAgICAgfV0sXG4gIC8vICAgICByaWNoOiB7XG4gIC8vICAgICAgICAgYTogeyAuLi4gfVxuICAvLyAgICAgfVxuICAvLyB9XG5cbiAgdmFyIHJpY2hJdGVtTmFtZXMgPSBnZXRSaWNoSXRlbU5hbWVzKHRleHRTdHlsZU1vZGVsKTtcbiAgdmFyIHJpY2hSZXN1bHQ7XG5cbiAgaWYgKHJpY2hJdGVtTmFtZXMpIHtcbiAgICByaWNoUmVzdWx0ID0ge307XG5cbiAgICBmb3IgKHZhciBuYW1lXzEgaW4gcmljaEl0ZW1OYW1lcykge1xuICAgICAgaWYgKHJpY2hJdGVtTmFtZXMuaGFzT3duUHJvcGVydHkobmFtZV8xKSkge1xuICAgICAgICAvLyBDYXNjYWRlIGlzIHN1cHBvcnRlZCBpbiByaWNoLlxuICAgICAgICB2YXIgcmljaFRleHRTdHlsZSA9IHRleHRTdHlsZU1vZGVsLmdldE1vZGVsKFsncmljaCcsIG5hbWVfMV0pOyAvLyBJbiByaWNoLCBuZXZlciBgZGlzYWJsZUJveGAuXG4gICAgICAgIC8vIEZJWE1FOiBjb25zaWRlciBgbGFiZWw6IHtmb3JtYXR0ZXI6ICd7YXx4eH0nLCBjb2xvcjogJ2JsdWUnLCByaWNoOiB7YToge319fWAsXG4gICAgICAgIC8vIHRoZSBkZWZhdWx0IGNvbG9yIGAnYmx1ZSdgIHdpbGwgbm90IGJlIGFkb3B0ZWQgaWYgbm8gY29sb3IgZGVjbGFyZWQgaW4gYHJpY2hgLlxuICAgICAgICAvLyBUaGF0IG1pZ2h0IGNvbmZ1c2VzIHVzZXJzLiBTbyBwcm9iYWJseSB3ZSBzaG91bGQgcHV0IGB0ZXh0U3R5bGVNb2RlbGAgYXMgdGhlXG4gICAgICAgIC8vIHJvb3QgYW5jZXN0b3Igb2YgdGhlIGByaWNoVGV4dFN0eWxlYC4gQnV0IHRoYXQgd291bGQgYmUgYSBicmVhayBjaGFuZ2UuXG5cbiAgICAgICAgc2V0VG9rZW5UZXh0U3R5bGUocmljaFJlc3VsdFtuYW1lXzFdID0ge30sIHJpY2hUZXh0U3R5bGUsIGdsb2JhbFRleHRTdHlsZSwgb3B0LCBpc05vdE5vcm1hbCwgaXNBdHRhY2hlZCwgZmFsc2UsIHRydWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChyaWNoUmVzdWx0KSB7XG4gICAgdGV4dFN0eWxlLnJpY2ggPSByaWNoUmVzdWx0O1xuICB9XG5cbiAgdmFyIG92ZXJmbG93ID0gdGV4dFN0eWxlTW9kZWwuZ2V0KCdvdmVyZmxvdycpO1xuXG4gIGlmIChvdmVyZmxvdykge1xuICAgIHRleHRTdHlsZS5vdmVyZmxvdyA9IG92ZXJmbG93O1xuICB9XG5cbiAgdmFyIG1hcmdpbiA9IHRleHRTdHlsZU1vZGVsLmdldCgnbWluTWFyZ2luJyk7XG5cbiAgaWYgKG1hcmdpbiAhPSBudWxsKSB7XG4gICAgdGV4dFN0eWxlLm1hcmdpbiA9IG1hcmdpbjtcbiAgfVxuXG4gIHNldFRva2VuVGV4dFN0eWxlKHRleHRTdHlsZSwgdGV4dFN0eWxlTW9kZWwsIGdsb2JhbFRleHRTdHlsZSwgb3B0LCBpc05vdE5vcm1hbCwgaXNBdHRhY2hlZCwgdHJ1ZSwgZmFsc2UpO1xufSAvLyBDb25zaWRlciBjYXNlOlxuLy8ge1xuLy8gICAgIGRhdGE6IFt7XG4vLyAgICAgICAgIHZhbHVlOiAxMixcbi8vICAgICAgICAgbGFiZWw6IHtcbi8vICAgICAgICAgICAgIHJpY2g6IHtcbi8vICAgICAgICAgICAgICAgICAvLyBubyAnYScgaGVyZSBidXQgdXNpbmcgcGFyZW50ICdhJy5cbi8vICAgICAgICAgICAgIH1cbi8vICAgICAgICAgfVxuLy8gICAgIH1dLFxuLy8gICAgIHJpY2g6IHtcbi8vICAgICAgICAgYTogeyAuLi4gfVxuLy8gICAgIH1cbi8vIH1cbi8vIFRPRE8gVGV4dFN0eWxlTW9kZWxcblxuXG5mdW5jdGlvbiBnZXRSaWNoSXRlbU5hbWVzKHRleHRTdHlsZU1vZGVsKSB7XG4gIC8vIFVzZSBvYmplY3QgdG8gcmVtb3ZlIGR1cGxpY2F0ZWQgbmFtZXMuXG4gIHZhciByaWNoSXRlbU5hbWVNYXA7XG5cbiAgd2hpbGUgKHRleHRTdHlsZU1vZGVsICYmIHRleHRTdHlsZU1vZGVsICE9PSB0ZXh0U3R5bGVNb2RlbC5lY01vZGVsKSB7XG4gICAgdmFyIHJpY2ggPSAodGV4dFN0eWxlTW9kZWwub3B0aW9uIHx8IEVNUFRZX09CSikucmljaDtcblxuICAgIGlmIChyaWNoKSB7XG4gICAgICByaWNoSXRlbU5hbWVNYXAgPSByaWNoSXRlbU5hbWVNYXAgfHwge307XG4gICAgICB2YXIgcmljaEtleXMgPSBrZXlzKHJpY2gpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJpY2hLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciByaWNoS2V5ID0gcmljaEtleXNbaV07XG4gICAgICAgIHJpY2hJdGVtTmFtZU1hcFtyaWNoS2V5XSA9IDE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGV4dFN0eWxlTW9kZWwgPSB0ZXh0U3R5bGVNb2RlbC5wYXJlbnRNb2RlbDtcbiAgfVxuXG4gIHJldHVybiByaWNoSXRlbU5hbWVNYXA7XG59XG5cbnZhciBURVhUX1BST1BTX1dJVEhfR0xPQkFMID0gWydmb250U3R5bGUnLCAnZm9udFdlaWdodCcsICdmb250U2l6ZScsICdmb250RmFtaWx5JywgJ3RleHRTaGFkb3dDb2xvcicsICd0ZXh0U2hhZG93Qmx1cicsICd0ZXh0U2hhZG93T2Zmc2V0WCcsICd0ZXh0U2hhZG93T2Zmc2V0WSddO1xudmFyIFRFWFRfUFJPUFNfU0VMRiA9IFsnYWxpZ24nLCAnbGluZUhlaWdodCcsICd3aWR0aCcsICdoZWlnaHQnLCAndGFnJywgJ3ZlcnRpY2FsQWxpZ24nLCAnZWxsaXBzaXMnXTtcbnZhciBURVhUX1BST1BTX0JPWCA9IFsncGFkZGluZycsICdib3JkZXJXaWR0aCcsICdib3JkZXJSYWRpdXMnLCAnYm9yZGVyRGFzaE9mZnNldCcsICdiYWNrZ3JvdW5kQ29sb3InLCAnYm9yZGVyQ29sb3InLCAnc2hhZG93Q29sb3InLCAnc2hhZG93Qmx1cicsICdzaGFkb3dPZmZzZXRYJywgJ3NoYWRvd09mZnNldFknXTtcblxuZnVuY3Rpb24gc2V0VG9rZW5UZXh0U3R5bGUodGV4dFN0eWxlLCB0ZXh0U3R5bGVNb2RlbCwgZ2xvYmFsVGV4dFN0eWxlLCBvcHQsIGlzTm90Tm9ybWFsLCBpc0F0dGFjaGVkLCBpc0Jsb2NrLCBpblJpY2gpIHtcbiAgLy8gSW4gbWVyZ2UgbW9kZSwgZGVmYXVsdCB2YWx1ZSBzaG91bGQgbm90IGJlIGdpdmVuLlxuICBnbG9iYWxUZXh0U3R5bGUgPSAhaXNOb3ROb3JtYWwgJiYgZ2xvYmFsVGV4dFN0eWxlIHx8IEVNUFRZX09CSjtcbiAgdmFyIGluaGVyaXRDb2xvciA9IG9wdCAmJiBvcHQuaW5oZXJpdENvbG9yO1xuICB2YXIgZmlsbENvbG9yID0gdGV4dFN0eWxlTW9kZWwuZ2V0U2hhbGxvdygnY29sb3InKTtcbiAgdmFyIHN0cm9rZUNvbG9yID0gdGV4dFN0eWxlTW9kZWwuZ2V0U2hhbGxvdygndGV4dEJvcmRlckNvbG9yJyk7XG4gIHZhciBvcGFjaXR5ID0gcmV0cmlldmUyKHRleHRTdHlsZU1vZGVsLmdldFNoYWxsb3coJ29wYWNpdHknKSwgZ2xvYmFsVGV4dFN0eWxlLm9wYWNpdHkpO1xuXG4gIGlmIChmaWxsQ29sb3IgPT09ICdpbmhlcml0JyB8fCBmaWxsQ29sb3IgPT09ICdhdXRvJykge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAoZmlsbENvbG9yID09PSAnYXV0bycpIHtcbiAgICAgICAgZGVwcmVjYXRlUmVwbGFjZUxvZygnY29sb3I6IFxcJ2F1dG9cXCcnLCAnY29sb3I6IFxcJ2luaGVyaXRcXCcnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaW5oZXJpdENvbG9yKSB7XG4gICAgICBmaWxsQ29sb3IgPSBpbmhlcml0Q29sb3I7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpbGxDb2xvciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgaWYgKHN0cm9rZUNvbG9yID09PSAnaW5oZXJpdCcgfHwgc3Ryb2tlQ29sb3IgPT09ICdhdXRvJykge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAoc3Ryb2tlQ29sb3IgPT09ICdhdXRvJykge1xuICAgICAgICBkZXByZWNhdGVSZXBsYWNlTG9nKCdjb2xvcjogXFwnYXV0b1xcJycsICdjb2xvcjogXFwnaW5oZXJpdFxcJycpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpbmhlcml0Q29sb3IpIHtcbiAgICAgIHN0cm9rZUNvbG9yID0gaW5oZXJpdENvbG9yO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHJva2VDb2xvciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFpc0F0dGFjaGVkKSB7XG4gICAgLy8gT25seSB1c2UgZGVmYXVsdCBnbG9iYWwgdGV4dFN0eWxlLmNvbG9yIGlmIHRleHQgaXMgaW5kaXZpZHVhbC5cbiAgICAvLyBPdGhlcndpc2UgaXQgd2lsbCB1c2UgdGhlIHN0cmF0ZWd5IG9mIGF0dGFjaGVkIHRleHQgY29sb3IgYmVjYXVzZSB0ZXh0IG1heSBiZSBvbiBhIHBhdGguXG4gICAgZmlsbENvbG9yID0gZmlsbENvbG9yIHx8IGdsb2JhbFRleHRTdHlsZS5jb2xvcjtcbiAgICBzdHJva2VDb2xvciA9IHN0cm9rZUNvbG9yIHx8IGdsb2JhbFRleHRTdHlsZS50ZXh0Qm9yZGVyQ29sb3I7XG4gIH1cblxuICBpZiAoZmlsbENvbG9yICE9IG51bGwpIHtcbiAgICB0ZXh0U3R5bGUuZmlsbCA9IGZpbGxDb2xvcjtcbiAgfVxuXG4gIGlmIChzdHJva2VDb2xvciAhPSBudWxsKSB7XG4gICAgdGV4dFN0eWxlLnN0cm9rZSA9IHN0cm9rZUNvbG9yO1xuICB9XG5cbiAgdmFyIHRleHRCb3JkZXJXaWR0aCA9IHJldHJpZXZlMih0ZXh0U3R5bGVNb2RlbC5nZXRTaGFsbG93KCd0ZXh0Qm9yZGVyV2lkdGgnKSwgZ2xvYmFsVGV4dFN0eWxlLnRleHRCb3JkZXJXaWR0aCk7XG5cbiAgaWYgKHRleHRCb3JkZXJXaWR0aCAhPSBudWxsKSB7XG4gICAgdGV4dFN0eWxlLmxpbmVXaWR0aCA9IHRleHRCb3JkZXJXaWR0aDtcbiAgfVxuXG4gIHZhciB0ZXh0Qm9yZGVyVHlwZSA9IHJldHJpZXZlMih0ZXh0U3R5bGVNb2RlbC5nZXRTaGFsbG93KCd0ZXh0Qm9yZGVyVHlwZScpLCBnbG9iYWxUZXh0U3R5bGUudGV4dEJvcmRlclR5cGUpO1xuXG4gIGlmICh0ZXh0Qm9yZGVyVHlwZSAhPSBudWxsKSB7XG4gICAgdGV4dFN0eWxlLmxpbmVEYXNoID0gdGV4dEJvcmRlclR5cGU7XG4gIH1cblxuICB2YXIgdGV4dEJvcmRlckRhc2hPZmZzZXQgPSByZXRyaWV2ZTIodGV4dFN0eWxlTW9kZWwuZ2V0U2hhbGxvdygndGV4dEJvcmRlckRhc2hPZmZzZXQnKSwgZ2xvYmFsVGV4dFN0eWxlLnRleHRCb3JkZXJEYXNoT2Zmc2V0KTtcblxuICBpZiAodGV4dEJvcmRlckRhc2hPZmZzZXQgIT0gbnVsbCkge1xuICAgIHRleHRTdHlsZS5saW5lRGFzaE9mZnNldCA9IHRleHRCb3JkZXJEYXNoT2Zmc2V0O1xuICB9XG5cbiAgaWYgKCFpc05vdE5vcm1hbCAmJiBvcGFjaXR5ID09IG51bGwgJiYgIWluUmljaCkge1xuICAgIG9wYWNpdHkgPSBvcHQgJiYgb3B0LmRlZmF1bHRPcGFjaXR5O1xuICB9XG5cbiAgaWYgKG9wYWNpdHkgIT0gbnVsbCkge1xuICAgIHRleHRTdHlsZS5vcGFjaXR5ID0gb3BhY2l0eTtcbiAgfSAvLyBUT0RPXG5cblxuICBpZiAoIWlzTm90Tm9ybWFsICYmICFpc0F0dGFjaGVkKSB7XG4gICAgLy8gU2V0IGRlZmF1bHQgZmluYWxseS5cbiAgICBpZiAodGV4dFN0eWxlLmZpbGwgPT0gbnVsbCAmJiBvcHQuaW5oZXJpdENvbG9yKSB7XG4gICAgICB0ZXh0U3R5bGUuZmlsbCA9IG9wdC5pbmhlcml0Q29sb3I7XG4gICAgfVxuICB9IC8vIERvIG5vdCB1c2UgYGdldEZvbnRgIGhlcmUsIGJlY2F1c2UgbWVyZ2Ugc2hvdWxkIGJlIHN1cHBvcnRlZCwgd2hlcmVcbiAgLy8gcGFydCBvZiB0aGVzZSBwcm9wZXJ0aWVzIG1heSBiZSBjaGFuZ2VkIGluIGVtcGhhc2lzIHN0eWxlLCBhbmQgdGhlXG4gIC8vIG90aGVycyBzaG91bGQgcmVtYWluIHRoZWlyIG9yaWdpbmFsIHZhbHVlIGdvdCBmcm9tIG5vcm1hbCBzdHlsZS5cblxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgVEVYVF9QUk9QU19XSVRIX0dMT0JBTC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBrZXkgPSBURVhUX1BST1BTX1dJVEhfR0xPQkFMW2ldO1xuICAgIHZhciB2YWwgPSByZXRyaWV2ZTIodGV4dFN0eWxlTW9kZWwuZ2V0U2hhbGxvdyhrZXkpLCBnbG9iYWxUZXh0U3R5bGVba2V5XSk7XG5cbiAgICBpZiAodmFsICE9IG51bGwpIHtcbiAgICAgIHRleHRTdHlsZVtrZXldID0gdmFsO1xuICAgIH1cbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgVEVYVF9QUk9QU19TRUxGLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IFRFWFRfUFJPUFNfU0VMRltpXTtcbiAgICB2YXIgdmFsID0gdGV4dFN0eWxlTW9kZWwuZ2V0U2hhbGxvdyhrZXkpO1xuXG4gICAgaWYgKHZhbCAhPSBudWxsKSB7XG4gICAgICB0ZXh0U3R5bGVba2V5XSA9IHZhbDtcbiAgICB9XG4gIH1cblxuICBpZiAodGV4dFN0eWxlLnZlcnRpY2FsQWxpZ24gPT0gbnVsbCkge1xuICAgIHZhciBiYXNlbGluZSA9IHRleHRTdHlsZU1vZGVsLmdldFNoYWxsb3coJ2Jhc2VsaW5lJyk7XG5cbiAgICBpZiAoYmFzZWxpbmUgIT0gbnVsbCkge1xuICAgICAgdGV4dFN0eWxlLnZlcnRpY2FsQWxpZ24gPSBiYXNlbGluZTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWlzQmxvY2sgfHwgIW9wdC5kaXNhYmxlQm94KSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBURVhUX1BST1BTX0JPWC5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGtleSA9IFRFWFRfUFJPUFNfQk9YW2ldO1xuICAgICAgdmFyIHZhbCA9IHRleHRTdHlsZU1vZGVsLmdldFNoYWxsb3coa2V5KTtcblxuICAgICAgaWYgKHZhbCAhPSBudWxsKSB7XG4gICAgICAgIHRleHRTdHlsZVtrZXldID0gdmFsO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBib3JkZXJUeXBlID0gdGV4dFN0eWxlTW9kZWwuZ2V0U2hhbGxvdygnYm9yZGVyVHlwZScpO1xuXG4gICAgaWYgKGJvcmRlclR5cGUgIT0gbnVsbCkge1xuICAgICAgdGV4dFN0eWxlLmJvcmRlckRhc2ggPSBib3JkZXJUeXBlO1xuICAgIH1cblxuICAgIGlmICgodGV4dFN0eWxlLmJhY2tncm91bmRDb2xvciA9PT0gJ2F1dG8nIHx8IHRleHRTdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPT09ICdpbmhlcml0JykgJiYgaW5oZXJpdENvbG9yKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBpZiAodGV4dFN0eWxlLmJhY2tncm91bmRDb2xvciA9PT0gJ2F1dG8nKSB7XG4gICAgICAgICAgZGVwcmVjYXRlUmVwbGFjZUxvZygnYmFja2dyb3VuZENvbG9yOiBcXCdhdXRvXFwnJywgJ2JhY2tncm91bmRDb2xvcjogXFwnaW5oZXJpdFxcJycpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRleHRTdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBpbmhlcml0Q29sb3I7XG4gICAgfVxuXG4gICAgaWYgKCh0ZXh0U3R5bGUuYm9yZGVyQ29sb3IgPT09ICdhdXRvJyB8fCB0ZXh0U3R5bGUuYm9yZGVyQ29sb3IgPT09ICdpbmhlcml0JykgJiYgaW5oZXJpdENvbG9yKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBpZiAodGV4dFN0eWxlLmJvcmRlckNvbG9yID09PSAnYXV0bycpIHtcbiAgICAgICAgICBkZXByZWNhdGVSZXBsYWNlTG9nKCdib3JkZXJDb2xvcjogXFwnYXV0b1xcJycsICdib3JkZXJDb2xvcjogXFwnaW5oZXJpdFxcJycpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRleHRTdHlsZS5ib3JkZXJDb2xvciA9IGluaGVyaXRDb2xvcjtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZvbnQob3B0LCBlY01vZGVsKSB7XG4gIHZhciBnVGV4dFN0eWxlTW9kZWwgPSBlY01vZGVsICYmIGVjTW9kZWwuZ2V0TW9kZWwoJ3RleHRTdHlsZScpO1xuICByZXR1cm4gdHJpbShbLy8gRklYTUUgaW4gbm9kZS1jYW52YXMgZm9udFdlaWdodCBpcyBiZWZvcmUgZm9udFN0eWxlXG4gIG9wdC5mb250U3R5bGUgfHwgZ1RleHRTdHlsZU1vZGVsICYmIGdUZXh0U3R5bGVNb2RlbC5nZXRTaGFsbG93KCdmb250U3R5bGUnKSB8fCAnJywgb3B0LmZvbnRXZWlnaHQgfHwgZ1RleHRTdHlsZU1vZGVsICYmIGdUZXh0U3R5bGVNb2RlbC5nZXRTaGFsbG93KCdmb250V2VpZ2h0JykgfHwgJycsIChvcHQuZm9udFNpemUgfHwgZ1RleHRTdHlsZU1vZGVsICYmIGdUZXh0U3R5bGVNb2RlbC5nZXRTaGFsbG93KCdmb250U2l6ZScpIHx8IDEyKSArICdweCcsIG9wdC5mb250RmFtaWx5IHx8IGdUZXh0U3R5bGVNb2RlbCAmJiBnVGV4dFN0eWxlTW9kZWwuZ2V0U2hhbGxvdygnZm9udEZhbWlseScpIHx8ICdzYW5zLXNlcmlmJ10uam9pbignICcpKTtcbn1cbmV4cG9ydCB2YXIgbGFiZWxJbm5lciA9IG1ha2VJbm5lcigpO1xuZXhwb3J0IGZ1bmN0aW9uIHNldExhYmVsVmFsdWVBbmltYXRpb24obGFiZWwsIGxhYmVsU3RhdGVzTW9kZWxzLCB2YWx1ZSwgZ2V0RGVmYXVsdFRleHQpIHtcbiAgaWYgKCFsYWJlbCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBvYmogPSBsYWJlbElubmVyKGxhYmVsKTtcbiAgb2JqLnByZXZWYWx1ZSA9IG9iai52YWx1ZTtcbiAgb2JqLnZhbHVlID0gdmFsdWU7XG4gIHZhciBub3JtYWxMYWJlbE1vZGVsID0gbGFiZWxTdGF0ZXNNb2RlbHMubm9ybWFsO1xuICBvYmoudmFsdWVBbmltYXRpb24gPSBub3JtYWxMYWJlbE1vZGVsLmdldCgndmFsdWVBbmltYXRpb24nKTtcblxuICBpZiAob2JqLnZhbHVlQW5pbWF0aW9uKSB7XG4gICAgb2JqLnByZWNpc2lvbiA9IG5vcm1hbExhYmVsTW9kZWwuZ2V0KCdwcmVjaXNpb24nKTtcbiAgICBvYmouZGVmYXVsdEludGVycG9sYXRlZFRleHQgPSBnZXREZWZhdWx0VGV4dDtcbiAgICBvYmouc3RhdGVzTW9kZWxzID0gbGFiZWxTdGF0ZXNNb2RlbHM7XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBhbmltYXRlTGFiZWxWYWx1ZSh0ZXh0RWwsIGRhdGFJbmRleCwgZGF0YSwgYW5pbWF0YWJsZU1vZGVsLCBsYWJlbEZldGNoZXIpIHtcbiAgdmFyIGxhYmVsSW5uZXJTdG9yZSA9IGxhYmVsSW5uZXIodGV4dEVsKTtcblxuICBpZiAoIWxhYmVsSW5uZXJTdG9yZS52YWx1ZUFuaW1hdGlvbiB8fCBsYWJlbElubmVyU3RvcmUucHJldlZhbHVlID09PSBsYWJlbElubmVyU3RvcmUudmFsdWUpIHtcbiAgICAvLyBWYWx1ZSBub3QgY2hhbmdlZCwgbm8gbmV3IGxhYmVsIGFuaW1hdGlvblxuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBkZWZhdWx0SW50ZXJwb2xhdGVkVGV4dCA9IGxhYmVsSW5uZXJTdG9yZS5kZWZhdWx0SW50ZXJwb2xhdGVkVGV4dDsgLy8gQ29uc2lkZXIgdGhlIGNhc2UgdGhhdCBiZWluZyBhbmltYXRpbmcsIGRvIG5vdCB1c2UgdGhlIGBvYmoudmFsdWVgLFxuICAvLyBPdGhlcndpc2UgaXQgd2lsbCBqdW1wIHRvIHRoZSBgb2JqLnZhbHVlYCB3aGVuIHRoaXMgbmV3IGFuaW1hdGlvbiBzdGFydGVkLlxuXG4gIHZhciBjdXJyVmFsdWUgPSByZXRyaWV2ZTIobGFiZWxJbm5lclN0b3JlLmludGVycG9sYXRlZFZhbHVlLCBsYWJlbElubmVyU3RvcmUucHJldlZhbHVlKTtcbiAgdmFyIHRhcmdldFZhbHVlID0gbGFiZWxJbm5lclN0b3JlLnZhbHVlO1xuXG4gIGZ1bmN0aW9uIGR1cmluZyhwZXJjZW50KSB7XG4gICAgdmFyIGludGVycG9sYXRlZCA9IGludGVycG9sYXRlUmF3VmFsdWVzKGRhdGEsIGxhYmVsSW5uZXJTdG9yZS5wcmVjaXNpb24sIGN1cnJWYWx1ZSwgdGFyZ2V0VmFsdWUsIHBlcmNlbnQpO1xuICAgIGxhYmVsSW5uZXJTdG9yZS5pbnRlcnBvbGF0ZWRWYWx1ZSA9IHBlcmNlbnQgPT09IDEgPyBudWxsIDogaW50ZXJwb2xhdGVkO1xuICAgIHZhciBsYWJlbFRleHQgPSBnZXRMYWJlbFRleHQoe1xuICAgICAgbGFiZWxEYXRhSW5kZXg6IGRhdGFJbmRleCxcbiAgICAgIGxhYmVsRmV0Y2hlcjogbGFiZWxGZXRjaGVyLFxuICAgICAgZGVmYXVsdFRleHQ6IGRlZmF1bHRJbnRlcnBvbGF0ZWRUZXh0ID8gZGVmYXVsdEludGVycG9sYXRlZFRleHQoaW50ZXJwb2xhdGVkKSA6IGludGVycG9sYXRlZCArICcnXG4gICAgfSwgbGFiZWxJbm5lclN0b3JlLnN0YXRlc01vZGVscywgaW50ZXJwb2xhdGVkKTtcbiAgICBzZXRMYWJlbFRleHQodGV4dEVsLCBsYWJlbFRleHQpO1xuICB9XG5cbiAgdGV4dEVsLnBlcmNlbnQgPSAwO1xuICAobGFiZWxJbm5lclN0b3JlLnByZXZWYWx1ZSA9PSBudWxsID8gaW5pdFByb3BzIDogdXBkYXRlUHJvcHMpKHRleHRFbCwge1xuICAgIC8vIHBlcmNlbnQgaXMgdXNlZCB0byBwcmV2ZW50IGFuaW1hdGlvbiBmcm9tIGJlaW5nIGFib3J0ZWQgIzE1OTE2XG4gICAgcGVyY2VudDogMVxuICB9LCBhbmltYXRhYmxlTW9kZWwsIGRhdGFJbmRleCwgbnVsbCwgZHVyaW5nKTtcbn0iLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCB7IGdldEZvbnQgfSBmcm9tICcuLi8uLi9sYWJlbC9sYWJlbFN0eWxlLmpzJztcbmltcG9ydCBaUlRleHQgZnJvbSAnenJlbmRlci9saWIvZ3JhcGhpYy9UZXh0LmpzJztcbnZhciBQQVRIX0NPTE9SID0gWyd0ZXh0U3R5bGUnLCAnY29sb3InXTtcbnZhciB0ZXh0U3R5bGVQYXJhbXMgPSBbJ2ZvbnRTdHlsZScsICdmb250V2VpZ2h0JywgJ2ZvbnRTaXplJywgJ2ZvbnRGYW1pbHknLCAncGFkZGluZycsICdsaW5lSGVpZ2h0JywgJ3JpY2gnLCAnd2lkdGgnLCAnaGVpZ2h0JywgJ292ZXJmbG93J107IC8vIFRPRE8gUGVyZm9ybWFuY2UgaW1wcm92ZW1lbnQ/XG5cbnZhciB0bXBUZXh0ID0gbmV3IFpSVGV4dCgpO1xuXG52YXIgVGV4dFN0eWxlTWl4aW4gPVxuLyoqIEBjbGFzcyAqL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBUZXh0U3R5bGVNaXhpbigpIHt9XG4gIC8qKlxyXG4gICAqIEdldCBjb2xvciBwcm9wZXJ0eSBvciBnZXQgY29sb3IgZnJvbSBvcHRpb24udGV4dFN0eWxlLmNvbG9yXHJcbiAgICovXG4gIC8vIFRPRE8gQ2FsbGJhY2tcblxuXG4gIFRleHRTdHlsZU1peGluLnByb3RvdHlwZS5nZXRUZXh0Q29sb3IgPSBmdW5jdGlvbiAoaXNFbXBoYXNpcykge1xuICAgIHZhciBlY01vZGVsID0gdGhpcy5lY01vZGVsO1xuICAgIHJldHVybiB0aGlzLmdldFNoYWxsb3coJ2NvbG9yJykgfHwgKCFpc0VtcGhhc2lzICYmIGVjTW9kZWwgPyBlY01vZGVsLmdldChQQVRIX0NPTE9SKSA6IG51bGwpO1xuICB9O1xuICAvKipcclxuICAgKiBDcmVhdGUgZm9udCBzdHJpbmcgZnJvbSBmb250U3R5bGUsIGZvbnRXZWlnaHQsIGZvbnRTaXplLCBmb250RmFtaWx5XHJcbiAgICogQHJldHVybiB7c3RyaW5nfVxyXG4gICAqL1xuXG5cbiAgVGV4dFN0eWxlTWl4aW4ucHJvdG90eXBlLmdldEZvbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGdldEZvbnQoe1xuICAgICAgZm9udFN0eWxlOiB0aGlzLmdldFNoYWxsb3coJ2ZvbnRTdHlsZScpLFxuICAgICAgZm9udFdlaWdodDogdGhpcy5nZXRTaGFsbG93KCdmb250V2VpZ2h0JyksXG4gICAgICBmb250U2l6ZTogdGhpcy5nZXRTaGFsbG93KCdmb250U2l6ZScpLFxuICAgICAgZm9udEZhbWlseTogdGhpcy5nZXRTaGFsbG93KCdmb250RmFtaWx5JylcbiAgICB9LCB0aGlzLmVjTW9kZWwpO1xuICB9O1xuXG4gIFRleHRTdHlsZU1peGluLnByb3RvdHlwZS5nZXRUZXh0UmVjdCA9IGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgdmFyIHN0eWxlID0ge1xuICAgICAgdGV4dDogdGV4dCxcbiAgICAgIHZlcnRpY2FsQWxpZ246IHRoaXMuZ2V0U2hhbGxvdygndmVydGljYWxBbGlnbicpIHx8IHRoaXMuZ2V0U2hhbGxvdygnYmFzZWxpbmUnKVxuICAgIH07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRleHRTdHlsZVBhcmFtcy5sZW5ndGg7IGkrKykge1xuICAgICAgc3R5bGVbdGV4dFN0eWxlUGFyYW1zW2ldXSA9IHRoaXMuZ2V0U2hhbGxvdyh0ZXh0U3R5bGVQYXJhbXNbaV0pO1xuICAgIH1cblxuICAgIHRtcFRleHQudXNlU3R5bGUoc3R5bGUpO1xuICAgIHRtcFRleHQudXBkYXRlKCk7XG4gICAgcmV0dXJuIHRtcFRleHQuZ2V0Qm91bmRpbmdSZWN0KCk7XG4gIH07XG5cbiAgcmV0dXJuIFRleHRTdHlsZU1peGluO1xufSgpO1xuXG47XG5leHBvcnQgZGVmYXVsdCBUZXh0U3R5bGVNaXhpbjsiLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCBtYWtlU3R5bGVNYXBwZXIgZnJvbSAnLi9tYWtlU3R5bGVNYXBwZXIuanMnO1xuZXhwb3J0IHZhciBMSU5FX1NUWUxFX0tFWV9NQVAgPSBbWydsaW5lV2lkdGgnLCAnd2lkdGgnXSwgWydzdHJva2UnLCAnY29sb3InXSwgWydvcGFjaXR5J10sIFsnc2hhZG93Qmx1ciddLCBbJ3NoYWRvd09mZnNldFgnXSwgWydzaGFkb3dPZmZzZXRZJ10sIFsnc2hhZG93Q29sb3InXSwgWydsaW5lRGFzaCcsICd0eXBlJ10sIFsnbGluZURhc2hPZmZzZXQnLCAnZGFzaE9mZnNldCddLCBbJ2xpbmVDYXAnLCAnY2FwJ10sIFsnbGluZUpvaW4nLCAnam9pbiddLCBbJ21pdGVyTGltaXQnXSAvLyBPcHRpb24gZGVjYWwgaXMgaW4gYERlY2FsT2JqZWN0YCBidXQgc3R5bGUuZGVjYWwgaXMgaW4gYFBhdHRlcm5PYmplY3RgLlxuLy8gU28gZG8gbm90IHRyYW5zZmVyIGRlY2FsIGRpcmVjdGx5LlxuXTtcbnZhciBnZXRMaW5lU3R5bGUgPSBtYWtlU3R5bGVNYXBwZXIoTElORV9TVFlMRV9LRVlfTUFQKTtcblxudmFyIExpbmVTdHlsZU1peGluID1cbi8qKiBAY2xhc3MgKi9cbmZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gTGluZVN0eWxlTWl4aW4oKSB7fVxuXG4gIExpbmVTdHlsZU1peGluLnByb3RvdHlwZS5nZXRMaW5lU3R5bGUgPSBmdW5jdGlvbiAoZXhjbHVkZXMpIHtcbiAgICByZXR1cm4gZ2V0TGluZVN0eWxlKHRoaXMsIGV4Y2x1ZGVzKTtcbiAgfTtcblxuICByZXR1cm4gTGluZVN0eWxlTWl4aW47XG59KCk7XG5cbjtcbmV4cG9ydCB7IExpbmVTdHlsZU1peGluIH07IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgbWFrZVN0eWxlTWFwcGVyIGZyb20gJy4vbWFrZVN0eWxlTWFwcGVyLmpzJztcbmV4cG9ydCB2YXIgSVRFTV9TVFlMRV9LRVlfTUFQID0gW1snZmlsbCcsICdjb2xvciddLCBbJ3N0cm9rZScsICdib3JkZXJDb2xvciddLCBbJ2xpbmVXaWR0aCcsICdib3JkZXJXaWR0aCddLCBbJ29wYWNpdHknXSwgWydzaGFkb3dCbHVyJ10sIFsnc2hhZG93T2Zmc2V0WCddLCBbJ3NoYWRvd09mZnNldFknXSwgWydzaGFkb3dDb2xvciddLCBbJ2xpbmVEYXNoJywgJ2JvcmRlclR5cGUnXSwgWydsaW5lRGFzaE9mZnNldCcsICdib3JkZXJEYXNoT2Zmc2V0J10sIFsnbGluZUNhcCcsICdib3JkZXJDYXAnXSwgWydsaW5lSm9pbicsICdib3JkZXJKb2luJ10sIFsnbWl0ZXJMaW1pdCcsICdib3JkZXJNaXRlckxpbWl0J10gLy8gT3B0aW9uIGRlY2FsIGlzIGluIGBEZWNhbE9iamVjdGAgYnV0IHN0eWxlLmRlY2FsIGlzIGluIGBQYXR0ZXJuT2JqZWN0YC5cbi8vIFNvIGRvIG5vdCB0cmFuc2ZlciBkZWNhbCBkaXJlY3RseS5cbl07XG52YXIgZ2V0SXRlbVN0eWxlID0gbWFrZVN0eWxlTWFwcGVyKElURU1fU1RZTEVfS0VZX01BUCk7XG5cbnZhciBJdGVtU3R5bGVNaXhpbiA9XG4vKiogQGNsYXNzICovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEl0ZW1TdHlsZU1peGluKCkge31cblxuICBJdGVtU3R5bGVNaXhpbi5wcm90b3R5cGUuZ2V0SXRlbVN0eWxlID0gZnVuY3Rpb24gKGV4Y2x1ZGVzLCBpbmNsdWRlcykge1xuICAgIHJldHVybiBnZXRJdGVtU3R5bGUodGhpcywgZXhjbHVkZXMsIGluY2x1ZGVzKTtcbiAgfTtcblxuICByZXR1cm4gSXRlbVN0eWxlTWl4aW47XG59KCk7XG5cbmV4cG9ydCB7IEl0ZW1TdHlsZU1peGluIH07IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgZW52IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvZW52LmpzJztcbmltcG9ydCB7IGVuYWJsZUNsYXNzRXh0ZW5kLCBlbmFibGVDbGFzc0NoZWNrIH0gZnJvbSAnLi4vdXRpbC9jbGF6ei5qcyc7XG5pbXBvcnQgeyBBcmVhU3R5bGVNaXhpbiB9IGZyb20gJy4vbWl4aW4vYXJlYVN0eWxlLmpzJztcbmltcG9ydCBUZXh0U3R5bGVNaXhpbiBmcm9tICcuL21peGluL3RleHRTdHlsZS5qcyc7XG5pbXBvcnQgeyBMaW5lU3R5bGVNaXhpbiB9IGZyb20gJy4vbWl4aW4vbGluZVN0eWxlLmpzJztcbmltcG9ydCB7IEl0ZW1TdHlsZU1peGluIH0gZnJvbSAnLi9taXhpbi9pdGVtU3R5bGUuanMnO1xuaW1wb3J0IHsgbWl4aW4sIGNsb25lLCBtZXJnZSB9IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5cbnZhciBNb2RlbCA9XG4vKiogQGNsYXNzICovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIE1vZGVsKG9wdGlvbiwgcGFyZW50TW9kZWwsIGVjTW9kZWwpIHtcbiAgICB0aGlzLnBhcmVudE1vZGVsID0gcGFyZW50TW9kZWw7XG4gICAgdGhpcy5lY01vZGVsID0gZWNNb2RlbDtcbiAgICB0aGlzLm9wdGlvbiA9IG9wdGlvbjsgLy8gU2ltcGxlIG9wdGltaXphdGlvblxuICAgIC8vIGlmICh0aGlzLmluaXQpIHtcbiAgICAvLyAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPD0gNCkge1xuICAgIC8vICAgICAgICAgdGhpcy5pbml0KG9wdGlvbiwgcGFyZW50TW9kZWwsIGVjTW9kZWwsIGV4dHJhT3B0KTtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICBlbHNlIHtcbiAgICAvLyAgICAgICAgIHRoaXMuaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIC8vICAgICB9XG4gICAgLy8gfVxuICB9XG5cbiAgTW9kZWwucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAob3B0aW9uLCBwYXJlbnRNb2RlbCwgZWNNb2RlbCkge1xuICAgIHZhciByZXN0ID0gW107XG5cbiAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgcmVzdFtfaSAtIDNdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gIH07XG4gIC8qKlxyXG4gICAqIE1lcmdlIHRoZSBpbnB1dCBvcHRpb24gdG8gbWUuXHJcbiAgICovXG5cblxuICBNb2RlbC5wcm90b3R5cGUubWVyZ2VPcHRpb24gPSBmdW5jdGlvbiAob3B0aW9uLCBlY01vZGVsKSB7XG4gICAgbWVyZ2UodGhpcy5vcHRpb24sIG9wdGlvbiwgdHJ1ZSk7XG4gIH07IC8vIGBwYXRoYCBjYW4gYmUgJ2EuYi5jJywgc28gdGhlIHJldHVybiB2YWx1ZSB0eXBlIGhhdmUgdG8gYmUgYE1vZGVsT3B0aW9uYFxuICAvLyBUT0RPOiBUWVBFIHN0cmljdCBrZXkgY2hlY2s/XG4gIC8vIGdldChwYXRoOiBzdHJpbmcgfCBzdHJpbmdbXSwgaWdub3JlUGFyZW50PzogYm9vbGVhbik6IE1vZGVsT3B0aW9uO1xuXG5cbiAgTW9kZWwucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChwYXRoLCBpZ25vcmVQYXJlbnQpIHtcbiAgICBpZiAocGF0aCA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb247XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2RvR2V0KHRoaXMucGFyc2VQYXRoKHBhdGgpLCAhaWdub3JlUGFyZW50ICYmIHRoaXMucGFyZW50TW9kZWwpO1xuICB9O1xuXG4gIE1vZGVsLnByb3RvdHlwZS5nZXRTaGFsbG93ID0gZnVuY3Rpb24gKGtleSwgaWdub3JlUGFyZW50KSB7XG4gICAgdmFyIG9wdGlvbiA9IHRoaXMub3B0aW9uO1xuICAgIHZhciB2YWwgPSBvcHRpb24gPT0gbnVsbCA/IG9wdGlvbiA6IG9wdGlvbltrZXldO1xuXG4gICAgaWYgKHZhbCA9PSBudWxsICYmICFpZ25vcmVQYXJlbnQpIHtcbiAgICAgIHZhciBwYXJlbnRNb2RlbCA9IHRoaXMucGFyZW50TW9kZWw7XG5cbiAgICAgIGlmIChwYXJlbnRNb2RlbCkge1xuICAgICAgICAvLyBGSVhNRTpUUyBkbyBub3Qga25vdyBob3cgdG8gbWFrZSBpdCB3b3Jrc1xuICAgICAgICB2YWwgPSBwYXJlbnRNb2RlbC5nZXRTaGFsbG93KGtleSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbDtcbiAgfTsgLy8gYHBhdGhgIGNhbiBiZSAnYS5iLmMnLCBzbyB0aGUgcmV0dXJuIHZhbHVlIHR5cGUgaGF2ZSB0byBiZSBgTW9kZWw8TW9kZWxPcHRpb24+YFxuICAvLyBnZXRNb2RlbChwYXRoOiBzdHJpbmcgfCBzdHJpbmdbXSwgcGFyZW50TW9kZWw/OiBNb2RlbCk6IE1vZGVsO1xuICAvLyBUT0RPICdhLmIuYycgaXMgZGVwcmVjYXRlZFxuXG5cbiAgTW9kZWwucHJvdG90eXBlLmdldE1vZGVsID0gZnVuY3Rpb24gKHBhdGgsIHBhcmVudE1vZGVsKSB7XG4gICAgdmFyIGhhc1BhdGggPSBwYXRoICE9IG51bGw7XG4gICAgdmFyIHBhdGhGaW5hbCA9IGhhc1BhdGggPyB0aGlzLnBhcnNlUGF0aChwYXRoKSA6IG51bGw7XG4gICAgdmFyIG9iaiA9IGhhc1BhdGggPyB0aGlzLl9kb0dldChwYXRoRmluYWwpIDogdGhpcy5vcHRpb247XG4gICAgcGFyZW50TW9kZWwgPSBwYXJlbnRNb2RlbCB8fCB0aGlzLnBhcmVudE1vZGVsICYmIHRoaXMucGFyZW50TW9kZWwuZ2V0TW9kZWwodGhpcy5yZXNvbHZlUGFyZW50UGF0aChwYXRoRmluYWwpKTtcbiAgICByZXR1cm4gbmV3IE1vZGVsKG9iaiwgcGFyZW50TW9kZWwsIHRoaXMuZWNNb2RlbCk7XG4gIH07XG4gIC8qKlxyXG4gICAqIElmIG1vZGVsIGhhcyBvcHRpb25cclxuICAgKi9cblxuXG4gIE1vZGVsLnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbiA9PSBudWxsO1xuICB9O1xuXG4gIE1vZGVsLnByb3RvdHlwZS5yZXN0b3JlRGF0YSA9IGZ1bmN0aW9uICgpIHt9OyAvLyBQZW5kaW5nXG5cblxuICBNb2RlbC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIEN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgIHJldHVybiBuZXcgQ3RvcihjbG9uZSh0aGlzLm9wdGlvbikpO1xuICB9OyAvLyBzZXRSZWFkT25seShwcm9wZXJ0aWVzKTogdm9pZCB7XG4gIC8vIGNsYXp6VXRpbC5zZXRSZWFkT25seSh0aGlzLCBwcm9wZXJ0aWVzKTtcbiAgLy8gfVxuICAvLyBJZiBwYXRoIGlzIG51bGwvdW5kZWZpbmVkLCByZXR1cm4gbnVsbC91bmRlZmluZWQuXG5cblxuICBNb2RlbC5wcm90b3R5cGUucGFyc2VQYXRoID0gZnVuY3Rpb24gKHBhdGgpIHtcbiAgICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gcGF0aC5zcGxpdCgnLicpO1xuICAgIH1cblxuICAgIHJldHVybiBwYXRoO1xuICB9OyAvLyBSZXNvbHZlIHBhdGggZm9yIHBhcmVudC4gUGVyaGFwcyB1c2VmdWwgd2hlbiBwYXJlbnQgdXNlIGEgZGlmZmVyZW50IHByb3BlcnR5LlxuICAvLyBEZWZhdWx0IHRvIGJlIGEgaWRlbnRpdHkgcmVzb2x2ZXIuXG4gIC8vIENhbiBiZSBtb2RpZmllZCB0byBhIGRpZmZlcmVudCByZXNvbHZlci5cblxuXG4gIE1vZGVsLnByb3RvdHlwZS5yZXNvbHZlUGFyZW50UGF0aCA9IGZ1bmN0aW9uIChwYXRoKSB7XG4gICAgcmV0dXJuIHBhdGg7XG4gIH07IC8vIEZJWE1FOlRTIGNoZWNrIHdoZXRoZXIgcHV0IHRoaXMgbWV0aG9kIGhlcmVcblxuXG4gIE1vZGVsLnByb3RvdHlwZS5pc0FuaW1hdGlvbkVuYWJsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFlbnYubm9kZSAmJiB0aGlzLm9wdGlvbikge1xuICAgICAgaWYgKHRoaXMub3B0aW9uLmFuaW1hdGlvbiAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMub3B0aW9uLmFuaW1hdGlvbjtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5wYXJlbnRNb2RlbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnRNb2RlbC5pc0FuaW1hdGlvbkVuYWJsZWQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgTW9kZWwucHJvdG90eXBlLl9kb0dldCA9IGZ1bmN0aW9uIChwYXRoQXJyLCBwYXJlbnRNb2RlbCkge1xuICAgIHZhciBvYmogPSB0aGlzLm9wdGlvbjtcblxuICAgIGlmICghcGF0aEFycikge1xuICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGhBcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIElnbm9yZSBlbXB0eVxuICAgICAgaWYgKCFwYXRoQXJyW2ldKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSAvLyBvYmogY291bGQgYmUgbnVtYmVyL3N0cmluZy8uLi4gKGxpa2UgMClcblxuXG4gICAgICBvYmogPSBvYmogJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgPyBvYmpbcGF0aEFycltpXV0gOiBudWxsO1xuXG4gICAgICBpZiAob2JqID09IG51bGwpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG9iaiA9PSBudWxsICYmIHBhcmVudE1vZGVsKSB7XG4gICAgICBvYmogPSBwYXJlbnRNb2RlbC5fZG9HZXQodGhpcy5yZXNvbHZlUGFyZW50UGF0aChwYXRoQXJyKSwgcGFyZW50TW9kZWwucGFyZW50TW9kZWwpO1xuICAgIH1cblxuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgcmV0dXJuIE1vZGVsO1xufSgpO1xuXG47IC8vIEVuYWJsZSBNb2RlbC5leHRlbmQuXG5cbmVuYWJsZUNsYXNzRXh0ZW5kKE1vZGVsKTtcbmVuYWJsZUNsYXNzQ2hlY2soTW9kZWwpO1xubWl4aW4oTW9kZWwsIExpbmVTdHlsZU1peGluKTtcbm1peGluKE1vZGVsLCBJdGVtU3R5bGVNaXhpbik7XG5taXhpbihNb2RlbCwgQXJlYVN0eWxlTWl4aW4pO1xubWl4aW4oTW9kZWwsIFRleHRTdHlsZU1peGluKTtcbmV4cG9ydCBkZWZhdWx0IE1vZGVsOyIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0ICogYXMgenJVdGlsIGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgeyBwYXJzZUNsYXNzVHlwZSB9IGZyb20gJy4vY2xhenouanMnO1xuaW1wb3J0IHsgbWFrZVByaW50YWJsZSB9IGZyb20gJy4vbG9nLmpzJzsgLy8gQSByYW5kb20gb2Zmc2V0XG5cbnZhciBiYXNlID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTApO1xuLyoqXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcclxuICogQHJldHVybiB7c3RyaW5nfVxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFVJRCh0eXBlKSB7XG4gIC8vIENvbnNpZGVyaW5nIHRoZSBjYXNlIG9mIGNyb3NzaW5nIGpzIGNvbnRleHQsXG4gIC8vIHVzZSBNYXRoLnJhbmRvbSB0byBtYWtlIGlkIGFzIHVuaXF1ZSBhcyBwb3NzaWJsZS5cbiAgcmV0dXJuIFt0eXBlIHx8ICcnLCBiYXNlKytdLmpvaW4oJ18nKTtcbn1cbi8qKlxyXG4gKiBJbXBsZW1lbnRzIGBTdWJUeXBlRGVmYXVsdGVyTWFuYWdlcmAgZm9yIGB0YXJnZXRgLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZVN1YlR5cGVEZWZhdWx0ZXIodGFyZ2V0KSB7XG4gIHZhciBzdWJUeXBlRGVmYXVsdGVycyA9IHt9O1xuXG4gIHRhcmdldC5yZWdpc3RlclN1YlR5cGVEZWZhdWx0ZXIgPSBmdW5jdGlvbiAoY29tcG9uZW50VHlwZSwgZGVmYXVsdGVyKSB7XG4gICAgdmFyIGNvbXBvbmVudFR5cGVJbmZvID0gcGFyc2VDbGFzc1R5cGUoY29tcG9uZW50VHlwZSk7XG4gICAgc3ViVHlwZURlZmF1bHRlcnNbY29tcG9uZW50VHlwZUluZm8ubWFpbl0gPSBkZWZhdWx0ZXI7XG4gIH07XG5cbiAgdGFyZ2V0LmRldGVybWluZVN1YlR5cGUgPSBmdW5jdGlvbiAoY29tcG9uZW50VHlwZSwgb3B0aW9uKSB7XG4gICAgdmFyIHR5cGUgPSBvcHRpb24udHlwZTtcblxuICAgIGlmICghdHlwZSkge1xuICAgICAgdmFyIGNvbXBvbmVudFR5cGVNYWluID0gcGFyc2VDbGFzc1R5cGUoY29tcG9uZW50VHlwZSkubWFpbjtcblxuICAgICAgaWYgKHRhcmdldC5oYXNTdWJUeXBlcyhjb21wb25lbnRUeXBlKSAmJiBzdWJUeXBlRGVmYXVsdGVyc1tjb21wb25lbnRUeXBlTWFpbl0pIHtcbiAgICAgICAgdHlwZSA9IHN1YlR5cGVEZWZhdWx0ZXJzW2NvbXBvbmVudFR5cGVNYWluXShvcHRpb24pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0eXBlO1xuICB9O1xufVxuLyoqXHJcbiAqIEltcGxlbWVudHMgYFRvcG9sb2dpY2FsVHJhdmVsYWJsZTxhbnk+YCBmb3IgYGVudGl0eWAuXHJcbiAqXHJcbiAqIFRvcG9sb2dpY2FsIHRyYXZlbCBvbiBBY3Rpdml0eSBOZXR3b3JrIChBY3Rpdml0eSBPbiBWZXJ0aWNlcykuXHJcbiAqIERlcGVuZGVuY2llcyBpcyBkZWZpbmVkIGluIE1vZGVsLnByb3RvdHlwZS5kZXBlbmRlbmNpZXMsIGxpa2UgWyd4QXhpcycsICd5QXhpcyddLlxyXG4gKiBJZiAneEF4aXMnIG9yICd5QXhpcycgaXMgYWJzZW50IGluIGNvbXBvbmVudFR5cGVMaXN0LCBqdXN0IGlnbm9yZSBpdCBpbiB0b3BvbG9neS5cclxuICogSWYgdGhlcmUgaXMgY2lyY3VsYXIgZGVwZW5kZW5jZXksIEVycm9yIHdpbGwgYmUgdGhyb3duLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZVRvcG9sb2dpY2FsVHJhdmVsKGVudGl0eSwgZGVwZW5kZW5jeUdldHRlcikge1xuICAvKipcclxuICAgKiBAcGFyYW0gdGFyZ2V0TmFtZUxpc3QgVGFyZ2V0IENvbXBvbmVudCB0eXBlIGxpc3QuXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgIENhbiBiZSBbJ2FhJywgJ2JiJywgJ2FhLnh4J11cclxuICAgKiBAcGFyYW0gZnVsbE5hbWVMaXN0IEJ5IHdoaWNoIHdlIGNhbiBidWlsZCBkZXBlbmRlbmN5IGdyYXBoLlxyXG4gICAqIEBwYXJhbSBjYWxsYmFjayBQYXJhbXM6IGNvbXBvbmVudFR5cGUsIGRlcGVuZGVuY2llcy5cclxuICAgKiBAcGFyYW0gY29udGV4dCBTY29wZSBvZiBjYWxsYmFjay5cclxuICAgKi9cbiAgZW50aXR5LnRvcG9sb2dpY2FsVHJhdmVsID0gZnVuY3Rpb24gKHRhcmdldE5hbWVMaXN0LCBmdWxsTmFtZUxpc3QsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgaWYgKCF0YXJnZXROYW1lTGlzdC5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgcmVzdWx0ID0gbWFrZURlcG5kZW5jeUdyYXBoKGZ1bGxOYW1lTGlzdCk7XG4gICAgdmFyIGdyYXBoID0gcmVzdWx0LmdyYXBoO1xuICAgIHZhciBub0VudHJ5TGlzdCA9IHJlc3VsdC5ub0VudHJ5TGlzdDtcbiAgICB2YXIgdGFyZ2V0TmFtZVNldCA9IHt9O1xuICAgIHpyVXRpbC5lYWNoKHRhcmdldE5hbWVMaXN0LCBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgdGFyZ2V0TmFtZVNldFtuYW1lXSA9IHRydWU7XG4gICAgfSk7XG5cbiAgICB3aGlsZSAobm9FbnRyeUxpc3QubGVuZ3RoKSB7XG4gICAgICB2YXIgY3VyckNvbXBvbmVudFR5cGUgPSBub0VudHJ5TGlzdC5wb3AoKTtcbiAgICAgIHZhciBjdXJyVmVydGV4ID0gZ3JhcGhbY3VyckNvbXBvbmVudFR5cGVdO1xuICAgICAgdmFyIGlzSW5UYXJnZXROYW1lU2V0ID0gISF0YXJnZXROYW1lU2V0W2N1cnJDb21wb25lbnRUeXBlXTtcblxuICAgICAgaWYgKGlzSW5UYXJnZXROYW1lU2V0KSB7XG4gICAgICAgIGNhbGxiYWNrLmNhbGwoY29udGV4dCwgY3VyckNvbXBvbmVudFR5cGUsIGN1cnJWZXJ0ZXgub3JpZ2luYWxEZXBzLnNsaWNlKCkpO1xuICAgICAgICBkZWxldGUgdGFyZ2V0TmFtZVNldFtjdXJyQ29tcG9uZW50VHlwZV07XG4gICAgICB9XG5cbiAgICAgIHpyVXRpbC5lYWNoKGN1cnJWZXJ0ZXguc3VjY2Vzc29yLCBpc0luVGFyZ2V0TmFtZVNldCA/IHJlbW92ZUVkZ2VBbmRBZGQgOiByZW1vdmVFZGdlKTtcbiAgICB9XG5cbiAgICB6clV0aWwuZWFjaCh0YXJnZXROYW1lU2V0LCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZXJyTXNnID0gJyc7XG5cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGVyck1zZyA9IG1ha2VQcmludGFibGUoJ0NpcmN1bGFyIGRlcGVuZGVuY3kgbWF5IGV4aXN0czogJywgdGFyZ2V0TmFtZVNldCwgdGFyZ2V0TmFtZUxpc3QsIGZ1bGxOYW1lTGlzdCk7XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnJNc2cpO1xuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gcmVtb3ZlRWRnZShzdWNjQ29tcG9uZW50VHlwZSkge1xuICAgICAgZ3JhcGhbc3VjY0NvbXBvbmVudFR5cGVdLmVudHJ5Q291bnQtLTtcblxuICAgICAgaWYgKGdyYXBoW3N1Y2NDb21wb25lbnRUeXBlXS5lbnRyeUNvdW50ID09PSAwKSB7XG4gICAgICAgIG5vRW50cnlMaXN0LnB1c2goc3VjY0NvbXBvbmVudFR5cGUpO1xuICAgICAgfVxuICAgIH0gLy8gQ29uc2lkZXIgdGhpcyBjYXNlOiBsZWdlbmQgZGVwZW5kcyBvbiBzZXJpZXMsIGFuZCB3ZSBjYWxsXG4gICAgLy8gY2hhcnQuc2V0T3B0aW9uKHtzZXJpZXM6IFsuLi5dfSksIHdoZXJlIG9ubHkgc2VyaWVzIGlzIGluIG9wdGlvbi5cbiAgICAvLyBJZiB3ZSBkbyBub3QgaGF2ZSAncmVtb3ZlRWRnZUFuZEFkZCcsIGxlZ2VuZE1vZGVsLm1lcmdlT3B0aW9uIHdpbGxcbiAgICAvLyBub3QgYmUgY2FsbGVkLCBidXQgb25seSBzZXJlaXMubWVyZ2VPcHRpb24gaXMgY2FsbGVkLiBUaHVzIGxlZ2VuZFxuICAgIC8vIGhhdmUgbm8gY2hhbmNlIHRvIHVwZGF0ZSBpdHMgbG9jYWwgcmVjb3JkIGFib3V0IHNlcmllcyAobGlrZSB3aGljaFxuICAgIC8vIG5hbWUgb2Ygc2VyaWVzIGlzIGF2YWlsYWJsZSBpbiBsZWdlbmQpLlxuXG5cbiAgICBmdW5jdGlvbiByZW1vdmVFZGdlQW5kQWRkKHN1Y2NDb21wb25lbnRUeXBlKSB7XG4gICAgICB0YXJnZXROYW1lU2V0W3N1Y2NDb21wb25lbnRUeXBlXSA9IHRydWU7XG4gICAgICByZW1vdmVFZGdlKHN1Y2NDb21wb25lbnRUeXBlKTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gbWFrZURlcG5kZW5jeUdyYXBoKGZ1bGxOYW1lTGlzdCkge1xuICAgIHZhciBncmFwaCA9IHt9O1xuICAgIHZhciBub0VudHJ5TGlzdCA9IFtdO1xuICAgIHpyVXRpbC5lYWNoKGZ1bGxOYW1lTGlzdCwgZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIHZhciB0aGlzSXRlbSA9IGNyZWF0ZURlcGVuZGVuY3lHcmFwaEl0ZW0oZ3JhcGgsIG5hbWUpO1xuICAgICAgdmFyIG9yaWdpbmFsRGVwcyA9IHRoaXNJdGVtLm9yaWdpbmFsRGVwcyA9IGRlcGVuZGVuY3lHZXR0ZXIobmFtZSk7XG4gICAgICB2YXIgYXZhaWxhYmxlRGVwcyA9IGdldEF2YWlsYWJsZURlcGVuZGVuY2llcyhvcmlnaW5hbERlcHMsIGZ1bGxOYW1lTGlzdCk7XG4gICAgICB0aGlzSXRlbS5lbnRyeUNvdW50ID0gYXZhaWxhYmxlRGVwcy5sZW5ndGg7XG5cbiAgICAgIGlmICh0aGlzSXRlbS5lbnRyeUNvdW50ID09PSAwKSB7XG4gICAgICAgIG5vRW50cnlMaXN0LnB1c2gobmFtZSk7XG4gICAgICB9XG5cbiAgICAgIHpyVXRpbC5lYWNoKGF2YWlsYWJsZURlcHMsIGZ1bmN0aW9uIChkZXBlbmRlbnROYW1lKSB7XG4gICAgICAgIGlmICh6clV0aWwuaW5kZXhPZih0aGlzSXRlbS5wcmVkZWNlc3NvciwgZGVwZW5kZW50TmFtZSkgPCAwKSB7XG4gICAgICAgICAgdGhpc0l0ZW0ucHJlZGVjZXNzb3IucHVzaChkZXBlbmRlbnROYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0aGF0SXRlbSA9IGNyZWF0ZURlcGVuZGVuY3lHcmFwaEl0ZW0oZ3JhcGgsIGRlcGVuZGVudE5hbWUpO1xuXG4gICAgICAgIGlmICh6clV0aWwuaW5kZXhPZih0aGF0SXRlbS5zdWNjZXNzb3IsIGRlcGVuZGVudE5hbWUpIDwgMCkge1xuICAgICAgICAgIHRoYXRJdGVtLnN1Y2Nlc3Nvci5wdXNoKG5hbWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgZ3JhcGg6IGdyYXBoLFxuICAgICAgbm9FbnRyeUxpc3Q6IG5vRW50cnlMaXN0XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZURlcGVuZGVuY3lHcmFwaEl0ZW0oZ3JhcGgsIG5hbWUpIHtcbiAgICBpZiAoIWdyYXBoW25hbWVdKSB7XG4gICAgICBncmFwaFtuYW1lXSA9IHtcbiAgICAgICAgcHJlZGVjZXNzb3I6IFtdLFxuICAgICAgICBzdWNjZXNzb3I6IFtdXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBncmFwaFtuYW1lXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEF2YWlsYWJsZURlcGVuZGVuY2llcyhvcmlnaW5hbERlcHMsIGZ1bGxOYW1lTGlzdCkge1xuICAgIHZhciBhdmFpbGFibGVEZXBzID0gW107XG4gICAgenJVdGlsLmVhY2gob3JpZ2luYWxEZXBzLCBmdW5jdGlvbiAoZGVwKSB7XG4gICAgICB6clV0aWwuaW5kZXhPZihmdWxsTmFtZUxpc3QsIGRlcCkgPj0gMCAmJiBhdmFpbGFibGVEZXBzLnB1c2goZGVwKTtcbiAgICB9KTtcbiAgICByZXR1cm4gYXZhaWxhYmxlRGVwcztcbiAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGluaGVyaXREZWZhdWx0T3B0aW9uKHN1cGVyT3B0aW9uLCBzdWJPcHRpb24pIHtcbiAgLy8gU2VlIGFsc28gYG1vZGVsL0NvbXBvbmVudC50cyNnZXREZWZhdWx0T3B0aW9uYFxuICByZXR1cm4genJVdGlsLm1lcmdlKHpyVXRpbC5tZXJnZSh7fSwgc3VwZXJPcHRpb24sIHRydWUpLCBzdWJPcHRpb24sIHRydWUpO1xufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXG5cbi8qKlxyXG4gKiBMYW5ndWFnZTogRW5nbGlzaC5cclxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIHRpbWU6IHtcbiAgICBtb250aDogWydKYW51YXJ5JywgJ0ZlYnJ1YXJ5JywgJ01hcmNoJywgJ0FwcmlsJywgJ01heScsICdKdW5lJywgJ0p1bHknLCAnQXVndXN0JywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJ10sXG4gICAgbW9udGhBYmJyOiBbJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYXknLCAnSnVuJywgJ0p1bCcsICdBdWcnLCAnU2VwJywgJ09jdCcsICdOb3YnLCAnRGVjJ10sXG4gICAgZGF5T2ZXZWVrOiBbJ1N1bmRheScsICdNb25kYXknLCAnVHVlc2RheScsICdXZWRuZXNkYXknLCAnVGh1cnNkYXknLCAnRnJpZGF5JywgJ1NhdHVyZGF5J10sXG4gICAgZGF5T2ZXZWVrQWJicjogWydTdW4nLCAnTW9uJywgJ1R1ZScsICdXZWQnLCAnVGh1JywgJ0ZyaScsICdTYXQnXVxuICB9LFxuICBsZWdlbmQ6IHtcbiAgICBzZWxlY3Rvcjoge1xuICAgICAgYWxsOiAnQWxsJyxcbiAgICAgIGludmVyc2U6ICdJbnYnXG4gICAgfVxuICB9LFxuICB0b29sYm94OiB7XG4gICAgYnJ1c2g6IHtcbiAgICAgIHRpdGxlOiB7XG4gICAgICAgIHJlY3Q6ICdCb3ggU2VsZWN0JyxcbiAgICAgICAgcG9seWdvbjogJ0xhc3NvIFNlbGVjdCcsXG4gICAgICAgIGxpbmVYOiAnSG9yaXpvbnRhbGx5IFNlbGVjdCcsXG4gICAgICAgIGxpbmVZOiAnVmVydGljYWxseSBTZWxlY3QnLFxuICAgICAgICBrZWVwOiAnS2VlcCBTZWxlY3Rpb25zJyxcbiAgICAgICAgY2xlYXI6ICdDbGVhciBTZWxlY3Rpb25zJ1xuICAgICAgfVxuICAgIH0sXG4gICAgZGF0YVZpZXc6IHtcbiAgICAgIHRpdGxlOiAnRGF0YSBWaWV3JyxcbiAgICAgIGxhbmc6IFsnRGF0YSBWaWV3JywgJ0Nsb3NlJywgJ1JlZnJlc2gnXVxuICAgIH0sXG4gICAgZGF0YVpvb206IHtcbiAgICAgIHRpdGxlOiB7XG4gICAgICAgIHpvb206ICdab29tJyxcbiAgICAgICAgYmFjazogJ1pvb20gUmVzZXQnXG4gICAgICB9XG4gICAgfSxcbiAgICBtYWdpY1R5cGU6IHtcbiAgICAgIHRpdGxlOiB7XG4gICAgICAgIGxpbmU6ICdTd2l0Y2ggdG8gTGluZSBDaGFydCcsXG4gICAgICAgIGJhcjogJ1N3aXRjaCB0byBCYXIgQ2hhcnQnLFxuICAgICAgICBzdGFjazogJ1N0YWNrJyxcbiAgICAgICAgdGlsZWQ6ICdUaWxlJ1xuICAgICAgfVxuICAgIH0sXG4gICAgcmVzdG9yZToge1xuICAgICAgdGl0bGU6ICdSZXN0b3JlJ1xuICAgIH0sXG4gICAgc2F2ZUFzSW1hZ2U6IHtcbiAgICAgIHRpdGxlOiAnU2F2ZSBhcyBJbWFnZScsXG4gICAgICBsYW5nOiBbJ1JpZ2h0IENsaWNrIHRvIFNhdmUgSW1hZ2UnXVxuICAgIH1cbiAgfSxcbiAgc2VyaWVzOiB7XG4gICAgdHlwZU5hbWVzOiB7XG4gICAgICBwaWU6ICdQaWUgY2hhcnQnLFxuICAgICAgYmFyOiAnQmFyIGNoYXJ0JyxcbiAgICAgIGxpbmU6ICdMaW5lIGNoYXJ0JyxcbiAgICAgIHNjYXR0ZXI6ICdTY2F0dGVyIHBsb3QnLFxuICAgICAgZWZmZWN0U2NhdHRlcjogJ1JpcHBsZSBzY2F0dGVyIHBsb3QnLFxuICAgICAgcmFkYXI6ICdSYWRhciBjaGFydCcsXG4gICAgICB0cmVlOiAnVHJlZScsXG4gICAgICB0cmVlbWFwOiAnVHJlZW1hcCcsXG4gICAgICBib3hwbG90OiAnQm94cGxvdCcsXG4gICAgICBjYW5kbGVzdGljazogJ0NhbmRsZXN0aWNrJyxcbiAgICAgIGs6ICdLIGxpbmUgY2hhcnQnLFxuICAgICAgaGVhdG1hcDogJ0hlYXQgbWFwJyxcbiAgICAgIG1hcDogJ01hcCcsXG4gICAgICBwYXJhbGxlbDogJ1BhcmFsbGVsIGNvb3JkaW5hdGUgbWFwJyxcbiAgICAgIGxpbmVzOiAnTGluZSBncmFwaCcsXG4gICAgICBncmFwaDogJ1JlbGF0aW9uc2hpcCBncmFwaCcsXG4gICAgICBzYW5rZXk6ICdTYW5rZXkgZGlhZ3JhbScsXG4gICAgICBmdW5uZWw6ICdGdW5uZWwgY2hhcnQnLFxuICAgICAgZ2F1Z2U6ICdHYXVnZScsXG4gICAgICBwaWN0b3JpYWxCYXI6ICdQaWN0b3JpYWwgYmFyJyxcbiAgICAgIHRoZW1lUml2ZXI6ICdUaGVtZSBSaXZlciBNYXAnLFxuICAgICAgc3VuYnVyc3Q6ICdTdW5idXJzdCdcbiAgICB9XG4gIH0sXG4gIGFyaWE6IHtcbiAgICBnZW5lcmFsOiB7XG4gICAgICB3aXRoVGl0bGU6ICdUaGlzIGlzIGEgY2hhcnQgYWJvdXQgXCJ7dGl0bGV9XCInLFxuICAgICAgd2l0aG91dFRpdGxlOiAnVGhpcyBpcyBhIGNoYXJ0J1xuICAgIH0sXG4gICAgc2VyaWVzOiB7XG4gICAgICBzaW5nbGU6IHtcbiAgICAgICAgcHJlZml4OiAnJyxcbiAgICAgICAgd2l0aE5hbWU6ICcgd2l0aCB0eXBlIHtzZXJpZXNUeXBlfSBuYW1lZCB7c2VyaWVzTmFtZX0uJyxcbiAgICAgICAgd2l0aG91dE5hbWU6ICcgd2l0aCB0eXBlIHtzZXJpZXNUeXBlfS4nXG4gICAgICB9LFxuICAgICAgbXVsdGlwbGU6IHtcbiAgICAgICAgcHJlZml4OiAnLiBJdCBjb25zaXN0cyBvZiB7c2VyaWVzQ291bnR9IHNlcmllcyBjb3VudC4nLFxuICAgICAgICB3aXRoTmFtZTogJyBUaGUge3Nlcmllc0lkfSBzZXJpZXMgaXMgYSB7c2VyaWVzVHlwZX0gcmVwcmVzZW50aW5nIHtzZXJpZXNOYW1lfS4nLFxuICAgICAgICB3aXRob3V0TmFtZTogJyBUaGUge3Nlcmllc0lkfSBzZXJpZXMgaXMgYSB7c2VyaWVzVHlwZX0uJyxcbiAgICAgICAgc2VwYXJhdG9yOiB7XG4gICAgICAgICAgbWlkZGxlOiAnJyxcbiAgICAgICAgICBlbmQ6ICcnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGRhdGE6IHtcbiAgICAgIGFsbERhdGE6ICdUaGUgZGF0YSBpcyBhcyBmb2xsb3dzOiAnLFxuICAgICAgcGFydGlhbERhdGE6ICdUaGUgZmlyc3Qge2Rpc3BsYXlDbnR9IGl0ZW1zIGFyZTogJyxcbiAgICAgIHdpdGhOYW1lOiAndGhlIGRhdGEgZm9yIHtuYW1lfSBpcyB7dmFsdWV9JyxcbiAgICAgIHdpdGhvdXROYW1lOiAne3ZhbHVlfScsXG4gICAgICBzZXBhcmF0b3I6IHtcbiAgICAgICAgbWlkZGxlOiAnLCAnLFxuICAgICAgICBlbmQ6ICcuICdcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgdGltZToge1xuICAgIG1vbnRoOiBbJ+S4gOaciCcsICfkuozmnIgnLCAn5LiJ5pyIJywgJ+Wbm+aciCcsICfkupTmnIgnLCAn5YWt5pyIJywgJ+S4g+aciCcsICflhavmnIgnLCAn5Lmd5pyIJywgJ+WNgeaciCcsICfljYHkuIDmnIgnLCAn5Y2B5LqM5pyIJ10sXG4gICAgbW9udGhBYmJyOiBbJzHmnIgnLCAnMuaciCcsICcz5pyIJywgJzTmnIgnLCAnNeaciCcsICc25pyIJywgJzfmnIgnLCAnOOaciCcsICc55pyIJywgJzEw5pyIJywgJzEx5pyIJywgJzEy5pyIJ10sXG4gICAgZGF5T2ZXZWVrOiBbJ+aYn+acn+aXpScsICfmmJ/mnJ/kuIAnLCAn5pif5pyf5LqMJywgJ+aYn+acn+S4iScsICfmmJ/mnJ/lm5snLCAn5pif5pyf5LqUJywgJ+aYn+acn+WFrSddLFxuICAgIGRheU9mV2Vla0FiYnI6IFsn5pelJywgJ+S4gCcsICfkuownLCAn5LiJJywgJ+WbmycsICfkupQnLCAn5YWtJ11cbiAgfSxcbiAgbGVnZW5kOiB7XG4gICAgc2VsZWN0b3I6IHtcbiAgICAgIGFsbDogJ+WFqOmAiScsXG4gICAgICBpbnZlcnNlOiAn5Y+N6YCJJ1xuICAgIH1cbiAgfSxcbiAgdG9vbGJveDoge1xuICAgIGJydXNoOiB7XG4gICAgICB0aXRsZToge1xuICAgICAgICByZWN0OiAn55+p5b2i6YCJ5oupJyxcbiAgICAgICAgcG9seWdvbjogJ+WciOmAiScsXG4gICAgICAgIGxpbmVYOiAn5qiq5ZCR6YCJ5oupJyxcbiAgICAgICAgbGluZVk6ICfnurXlkJHpgInmi6knLFxuICAgICAgICBrZWVwOiAn5L+d5oyB6YCJ5oupJyxcbiAgICAgICAgY2xlYXI6ICfmuIXpmaTpgInmi6knXG4gICAgICB9XG4gICAgfSxcbiAgICBkYXRhVmlldzoge1xuICAgICAgdGl0bGU6ICfmlbDmja7op4blm74nLFxuICAgICAgbGFuZzogWyfmlbDmja7op4blm74nLCAn5YWz6ZetJywgJ+WIt+aWsCddXG4gICAgfSxcbiAgICBkYXRhWm9vbToge1xuICAgICAgdGl0bGU6IHtcbiAgICAgICAgem9vbTogJ+WMuuWfn+e8qeaUvicsXG4gICAgICAgIGJhY2s6ICfljLrln5/nvKnmlL7ov5jljp8nXG4gICAgICB9XG4gICAgfSxcbiAgICBtYWdpY1R5cGU6IHtcbiAgICAgIHRpdGxlOiB7XG4gICAgICAgIGxpbmU6ICfliIfmjaLkuLrmipjnur/lm74nLFxuICAgICAgICBiYXI6ICfliIfmjaLkuLrmn7Hnirblm74nLFxuICAgICAgICBzdGFjazogJ+WIh+aNouS4uuWghuWPoCcsXG4gICAgICAgIHRpbGVkOiAn5YiH5o2i5Li65bmz6ZO6J1xuICAgICAgfVxuICAgIH0sXG4gICAgcmVzdG9yZToge1xuICAgICAgdGl0bGU6ICfov5jljp8nXG4gICAgfSxcbiAgICBzYXZlQXNJbWFnZToge1xuICAgICAgdGl0bGU6ICfkv53lrZjkuLrlm77niYcnLFxuICAgICAgbGFuZzogWyflj7PplK7lj6blrZjkuLrlm77niYcnXVxuICAgIH1cbiAgfSxcbiAgc2VyaWVzOiB7XG4gICAgdHlwZU5hbWVzOiB7XG4gICAgICBwaWU6ICfppbzlm74nLFxuICAgICAgYmFyOiAn5p+x54q25Zu+JyxcbiAgICAgIGxpbmU6ICfmipjnur/lm74nLFxuICAgICAgc2NhdHRlcjogJ+aVo+eCueWbvicsXG4gICAgICBlZmZlY3RTY2F0dGVyOiAn5raf5ryq5pWj54K55Zu+JyxcbiAgICAgIHJhZGFyOiAn6Zu36L6+5Zu+JyxcbiAgICAgIHRyZWU6ICfmoJHlm74nLFxuICAgICAgdHJlZW1hcDogJ+efqeW9ouagkeWbvicsXG4gICAgICBib3hwbG90OiAn566x5Z6L5Zu+JyxcbiAgICAgIGNhbmRsZXN0aWNrOiAnS+e6v+WbvicsXG4gICAgICBrOiAnS+e6v+WbvicsXG4gICAgICBoZWF0bWFwOiAn54Ot5Yqb5Zu+JyxcbiAgICAgIG1hcDogJ+WcsOWbvicsXG4gICAgICBwYXJhbGxlbDogJ+W5s+ihjOWdkOagh+WbvicsXG4gICAgICBsaW5lczogJ+e6v+WbvicsXG4gICAgICBncmFwaDogJ+WFs+ezu+WbvicsXG4gICAgICBzYW5rZXk6ICfmoZHln7rlm74nLFxuICAgICAgZnVubmVsOiAn5ryP5paX5Zu+JyxcbiAgICAgIGdhdWdlOiAn5Luq6KGo55uY5Zu+JyxcbiAgICAgIHBpY3RvcmlhbEJhcjogJ+ixoeW9ouafseWbvicsXG4gICAgICB0aGVtZVJpdmVyOiAn5Li76aKY5rKz5rWB5Zu+JyxcbiAgICAgIHN1bmJ1cnN0OiAn5pet5pel5Zu+J1xuICAgIH1cbiAgfSxcbiAgYXJpYToge1xuICAgIGdlbmVyYWw6IHtcbiAgICAgIHdpdGhUaXRsZTogJ+i/meaYr+S4gOS4quWFs+S6juKAnHt0aXRsZX3igJ3nmoTlm77ooajjgIInLFxuICAgICAgd2l0aG91dFRpdGxlOiAn6L+Z5piv5LiA5Liq5Zu+6KGo77yMJ1xuICAgIH0sXG4gICAgc2VyaWVzOiB7XG4gICAgICBzaW5nbGU6IHtcbiAgICAgICAgcHJlZml4OiAnJyxcbiAgICAgICAgd2l0aE5hbWU6ICflm77ooajnsbvlnovmmK97c2VyaWVzVHlwZX3vvIzooajnpLp7c2VyaWVzTmFtZX3jgIInLFxuICAgICAgICB3aXRob3V0TmFtZTogJ+WbvuihqOexu+Wei+aYr3tzZXJpZXNUeXBlfeOAgidcbiAgICAgIH0sXG4gICAgICBtdWx0aXBsZToge1xuICAgICAgICBwcmVmaXg6ICflroPnlLF7c2VyaWVzQ291bnR95Liq5Zu+6KGo57O75YiX57uE5oiQ44CCJyxcbiAgICAgICAgd2l0aE5hbWU6ICfnrKx7c2VyaWVzSWR95Liq57O75YiX5piv5LiA5Liq6KGo56S6e3Nlcmllc05hbWV955qEe3Nlcmllc1R5cGV977yMJyxcbiAgICAgICAgd2l0aG91dE5hbWU6ICfnrKx7c2VyaWVzSWR95Liq57O75YiX5piv5LiA5Liqe3Nlcmllc1R5cGV977yMJyxcbiAgICAgICAgc2VwYXJhdG9yOiB7XG4gICAgICAgICAgbWlkZGxlOiAn77ybJyxcbiAgICAgICAgICBlbmQ6ICfjgIInXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGRhdGE6IHtcbiAgICAgIGFsbERhdGE6ICflhbbmlbDmja7mmK/igJTigJQnLFxuICAgICAgcGFydGlhbERhdGE6ICflhbbkuK3vvIzliY17ZGlzcGxheUNudH3pobnmmK/igJTigJQnLFxuICAgICAgd2l0aE5hbWU6ICd7bmFtZX3nmoTmlbDmja7mmK97dmFsdWV9JyxcbiAgICAgIHdpdGhvdXROYW1lOiAne3ZhbHVlfScsXG4gICAgICBzZXBhcmF0b3I6IHtcbiAgICAgICAgbWlkZGxlOiAn77yMJyxcbiAgICAgICAgZW5kOiAnJ1xuICAgICAgfVxuICAgIH1cbiAgfVxufTsiLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCBNb2RlbCBmcm9tICcuLi9tb2RlbC9Nb2RlbC5qcyc7XG5pbXBvcnQgZW52IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvZW52LmpzJzsgLy8gZGVmYXVsdCBpbXBvcnQgWkggYW5kIEVOIGxhbmdcblxuaW1wb3J0IGxhbmdFTiBmcm9tICcuLi9pMThuL2xhbmdFTi5qcyc7XG5pbXBvcnQgbGFuZ1pIIGZyb20gJy4uL2kxOG4vbGFuZ1pILmpzJztcbmltcG9ydCB7IGlzU3RyaW5nLCBjbG9uZSwgbWVyZ2UgfSBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xudmFyIExPQ0FMRV9aSCA9ICdaSCc7XG52YXIgTE9DQUxFX0VOID0gJ0VOJztcbnZhciBERUZBVUxUX0xPQ0FMRSA9IExPQ0FMRV9FTjtcbnZhciBsb2NhbGVTdG9yYWdlID0ge307XG52YXIgbG9jYWxlTW9kZWxzID0ge307XG5leHBvcnQgdmFyIFNZU1RFTV9MQU5HID0gIWVudi5kb21TdXBwb3J0ZWQgPyBERUZBVUxUX0xPQ0FMRSA6IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGxhbmdTdHIgPSAoXG4gIC8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSAqL1xuICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubGFuZyB8fCBuYXZpZ2F0b3IubGFuZ3VhZ2UgfHwgbmF2aWdhdG9yLmJyb3dzZXJMYW5ndWFnZSkudG9VcHBlckNhc2UoKTtcbiAgcmV0dXJuIGxhbmdTdHIuaW5kZXhPZihMT0NBTEVfWkgpID4gLTEgPyBMT0NBTEVfWkggOiBERUZBVUxUX0xPQ0FMRTtcbn0oKTtcbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckxvY2FsZShsb2NhbGUsIGxvY2FsZU9iaikge1xuICBsb2NhbGUgPSBsb2NhbGUudG9VcHBlckNhc2UoKTtcbiAgbG9jYWxlTW9kZWxzW2xvY2FsZV0gPSBuZXcgTW9kZWwobG9jYWxlT2JqKTtcbiAgbG9jYWxlU3RvcmFnZVtsb2NhbGVdID0gbG9jYWxlT2JqO1xufSAvLyBleHBvcnQgZnVuY3Rpb24gZ2V0TG9jYWxlKGxvY2FsZTogc3RyaW5nKSB7XG4vLyAgICAgcmV0dXJuIGxvY2FsZVN0b3JhZ2VbbG9jYWxlXTtcbi8vIH1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUxvY2FsZU9iamVjdChsb2NhbGUpIHtcbiAgaWYgKGlzU3RyaW5nKGxvY2FsZSkpIHtcbiAgICB2YXIgbG9jYWxlT2JqID0gbG9jYWxlU3RvcmFnZVtsb2NhbGUudG9VcHBlckNhc2UoKV0gfHwge307XG5cbiAgICBpZiAobG9jYWxlID09PSBMT0NBTEVfWkggfHwgbG9jYWxlID09PSBMT0NBTEVfRU4pIHtcbiAgICAgIHJldHVybiBjbG9uZShsb2NhbGVPYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbWVyZ2UoY2xvbmUobG9jYWxlT2JqKSwgY2xvbmUobG9jYWxlU3RvcmFnZVtERUZBVUxUX0xPQ0FMRV0pLCBmYWxzZSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBtZXJnZShjbG9uZShsb2NhbGUpLCBjbG9uZShsb2NhbGVTdG9yYWdlW0RFRkFVTFRfTE9DQUxFXSksIGZhbHNlKTtcbiAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGdldExvY2FsZU1vZGVsKGxhbmcpIHtcbiAgcmV0dXJuIGxvY2FsZU1vZGVsc1tsYW5nXTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0TG9jYWxlTW9kZWwoKSB7XG4gIHJldHVybiBsb2NhbGVNb2RlbHNbREVGQVVMVF9MT0NBTEVdO1xufSAvLyBEZWZhdWx0IGxvY2FsZVxuXG5yZWdpc3RlckxvY2FsZShMT0NBTEVfRU4sIGxhbmdFTik7XG5yZWdpc3RlckxvY2FsZShMT0NBTEVfWkgsIGxhbmdaSCk7IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgKiBhcyB6clV0aWwgZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbmltcG9ydCAqIGFzIG51bWJlclV0aWwgZnJvbSAnLi9udW1iZXIuanMnO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdExvY2FsZU1vZGVsLCBnZXRMb2NhbGVNb2RlbCwgU1lTVEVNX0xBTkcgfSBmcm9tICcuLi9jb3JlL2xvY2FsZS5qcyc7XG5pbXBvcnQgTW9kZWwgZnJvbSAnLi4vbW9kZWwvTW9kZWwuanMnO1xuZXhwb3J0IHZhciBPTkVfU0VDT05EID0gMTAwMDtcbmV4cG9ydCB2YXIgT05FX01JTlVURSA9IE9ORV9TRUNPTkQgKiA2MDtcbmV4cG9ydCB2YXIgT05FX0hPVVIgPSBPTkVfTUlOVVRFICogNjA7XG5leHBvcnQgdmFyIE9ORV9EQVkgPSBPTkVfSE9VUiAqIDI0O1xuZXhwb3J0IHZhciBPTkVfWUVBUiA9IE9ORV9EQVkgKiAzNjU7XG5leHBvcnQgdmFyIGRlZmF1bHRMZXZlbGVkRm9ybWF0dGVyID0ge1xuICB5ZWFyOiAne3l5eXl9JyxcbiAgbW9udGg6ICd7TU1NfScsXG4gIGRheTogJ3tkfScsXG4gIGhvdXI6ICd7SEh9OnttbX0nLFxuICBtaW51dGU6ICd7SEh9OnttbX0nLFxuICBzZWNvbmQ6ICd7SEh9OnttbX06e3NzfScsXG4gIG1pbGxpc2Vjb25kOiAne0hIfTp7bW19Ontzc30ge1NTU30nLFxuICBub25lOiAne3l5eXl9LXtNTX0te2RkfSB7SEh9OnttbX06e3NzfSB7U1NTfSdcbn07XG52YXIgZnVsbERheUZvcm1hdHRlciA9ICd7eXl5eX0te01NfS17ZGR9JztcbmV4cG9ydCB2YXIgZnVsbExldmVsZWRGb3JtYXR0ZXIgPSB7XG4gIHllYXI6ICd7eXl5eX0nLFxuICBtb250aDogJ3t5eXl5fS17TU19JyxcbiAgZGF5OiBmdWxsRGF5Rm9ybWF0dGVyLFxuICBob3VyOiBmdWxsRGF5Rm9ybWF0dGVyICsgJyAnICsgZGVmYXVsdExldmVsZWRGb3JtYXR0ZXIuaG91cixcbiAgbWludXRlOiBmdWxsRGF5Rm9ybWF0dGVyICsgJyAnICsgZGVmYXVsdExldmVsZWRGb3JtYXR0ZXIubWludXRlLFxuICBzZWNvbmQ6IGZ1bGxEYXlGb3JtYXR0ZXIgKyAnICcgKyBkZWZhdWx0TGV2ZWxlZEZvcm1hdHRlci5zZWNvbmQsXG4gIG1pbGxpc2Vjb25kOiBkZWZhdWx0TGV2ZWxlZEZvcm1hdHRlci5ub25lXG59O1xuZXhwb3J0IHZhciBwcmltYXJ5VGltZVVuaXRzID0gWyd5ZWFyJywgJ21vbnRoJywgJ2RheScsICdob3VyJywgJ21pbnV0ZScsICdzZWNvbmQnLCAnbWlsbGlzZWNvbmQnXTtcbmV4cG9ydCB2YXIgdGltZVVuaXRzID0gWyd5ZWFyJywgJ2hhbGYteWVhcicsICdxdWFydGVyJywgJ21vbnRoJywgJ3dlZWsnLCAnaGFsZi13ZWVrJywgJ2RheScsICdoYWxmLWRheScsICdxdWFydGVyLWRheScsICdob3VyJywgJ21pbnV0ZScsICdzZWNvbmQnLCAnbWlsbGlzZWNvbmQnXTtcbmV4cG9ydCBmdW5jdGlvbiBwYWQoc3RyLCBsZW4pIHtcbiAgc3RyICs9ICcnO1xuICByZXR1cm4gJzAwMDAnLnN1YnN0cigwLCBsZW4gLSBzdHIubGVuZ3RoKSArIHN0cjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcmltYXJ5VGltZVVuaXQodGltZVVuaXQpIHtcbiAgc3dpdGNoICh0aW1lVW5pdCkge1xuICAgIGNhc2UgJ2hhbGYteWVhcic6XG4gICAgY2FzZSAncXVhcnRlcic6XG4gICAgICByZXR1cm4gJ21vbnRoJztcblxuICAgIGNhc2UgJ3dlZWsnOlxuICAgIGNhc2UgJ2hhbGYtd2Vlayc6XG4gICAgICByZXR1cm4gJ2RheSc7XG5cbiAgICBjYXNlICdoYWxmLWRheSc6XG4gICAgY2FzZSAncXVhcnRlci1kYXknOlxuICAgICAgcmV0dXJuICdob3VyJztcblxuICAgIGRlZmF1bHQ6XG4gICAgICAvLyB5ZWFyLCBtaW51dGVzLCBzZWNvbmQsIG1pbGxpc2Vjb25kc1xuICAgICAgcmV0dXJuIHRpbWVVbml0O1xuICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaXNQcmltYXJ5VGltZVVuaXQodGltZVVuaXQpIHtcbiAgcmV0dXJuIHRpbWVVbml0ID09PSBnZXRQcmltYXJ5VGltZVVuaXQodGltZVVuaXQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRGb3JtYXRQcmVjaXNpb25PZkludGVydmFsKHRpbWVVbml0KSB7XG4gIHN3aXRjaCAodGltZVVuaXQpIHtcbiAgICBjYXNlICd5ZWFyJzpcbiAgICBjYXNlICdtb250aCc6XG4gICAgICByZXR1cm4gJ2RheSc7XG5cbiAgICBjYXNlICdtaWxsaXNlY29uZCc6XG4gICAgICByZXR1cm4gJ21pbGxpc2Vjb25kJztcblxuICAgIGRlZmF1bHQ6XG4gICAgICAvLyBBbHNvIGZvciBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kXG4gICAgICByZXR1cm4gJ3NlY29uZCc7XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXQoIC8vIE5vdGU6IFRoZSByZXN1bHQgYmFzZWQgb24gYGlzVVRDYCBhcmUgdG90YWxseSBkaWZmZXJlbnQsIHdoaWNoIGNhbiBub3QgYmUganVzdCBzaW1wbHlcbi8vIHN1YnN0aXR1dGVkIGJ5IHRoZSByZXN1bHQgd2l0aG91dCBgaXNVVENgLiBTbyB3ZSBtYWtlIHRoZSBwYXJhbSBgaXNVVENgIG1hbmRhdG9yeS5cbnRpbWUsIHRlbXBsYXRlLCBpc1VUQywgbGFuZykge1xuICB2YXIgZGF0ZSA9IG51bWJlclV0aWwucGFyc2VEYXRlKHRpbWUpO1xuICB2YXIgeSA9IGRhdGVbZnVsbFllYXJHZXR0ZXJOYW1lKGlzVVRDKV0oKTtcbiAgdmFyIE0gPSBkYXRlW21vbnRoR2V0dGVyTmFtZShpc1VUQyldKCkgKyAxO1xuICB2YXIgcSA9IE1hdGguZmxvb3IoKE0gLSAxKSAvIDMpICsgMTtcbiAgdmFyIGQgPSBkYXRlW2RhdGVHZXR0ZXJOYW1lKGlzVVRDKV0oKTtcbiAgdmFyIGUgPSBkYXRlWydnZXQnICsgKGlzVVRDID8gJ1VUQycgOiAnJykgKyAnRGF5J10oKTtcbiAgdmFyIEggPSBkYXRlW2hvdXJzR2V0dGVyTmFtZShpc1VUQyldKCk7XG4gIHZhciBoID0gKEggLSAxKSAlIDEyICsgMTtcbiAgdmFyIG0gPSBkYXRlW21pbnV0ZXNHZXR0ZXJOYW1lKGlzVVRDKV0oKTtcbiAgdmFyIHMgPSBkYXRlW3NlY29uZHNHZXR0ZXJOYW1lKGlzVVRDKV0oKTtcbiAgdmFyIFMgPSBkYXRlW21pbGxpc2Vjb25kc0dldHRlck5hbWUoaXNVVEMpXSgpO1xuICB2YXIgbG9jYWxlTW9kZWwgPSBsYW5nIGluc3RhbmNlb2YgTW9kZWwgPyBsYW5nIDogZ2V0TG9jYWxlTW9kZWwobGFuZyB8fCBTWVNURU1fTEFORykgfHwgZ2V0RGVmYXVsdExvY2FsZU1vZGVsKCk7XG4gIHZhciB0aW1lTW9kZWwgPSBsb2NhbGVNb2RlbC5nZXRNb2RlbCgndGltZScpO1xuICB2YXIgbW9udGggPSB0aW1lTW9kZWwuZ2V0KCdtb250aCcpO1xuICB2YXIgbW9udGhBYmJyID0gdGltZU1vZGVsLmdldCgnbW9udGhBYmJyJyk7XG4gIHZhciBkYXlPZldlZWsgPSB0aW1lTW9kZWwuZ2V0KCdkYXlPZldlZWsnKTtcbiAgdmFyIGRheU9mV2Vla0FiYnIgPSB0aW1lTW9kZWwuZ2V0KCdkYXlPZldlZWtBYmJyJyk7XG4gIHJldHVybiAodGVtcGxhdGUgfHwgJycpLnJlcGxhY2UoL3t5eXl5fS9nLCB5ICsgJycpLnJlcGxhY2UoL3t5eX0vZywgcGFkKHkgJSAxMDAgKyAnJywgMikpLnJlcGxhY2UoL3tRfS9nLCBxICsgJycpLnJlcGxhY2UoL3tNTU1NfS9nLCBtb250aFtNIC0gMV0pLnJlcGxhY2UoL3tNTU19L2csIG1vbnRoQWJicltNIC0gMV0pLnJlcGxhY2UoL3tNTX0vZywgcGFkKE0sIDIpKS5yZXBsYWNlKC97TX0vZywgTSArICcnKS5yZXBsYWNlKC97ZGR9L2csIHBhZChkLCAyKSkucmVwbGFjZSgve2R9L2csIGQgKyAnJykucmVwbGFjZSgve2VlZWV9L2csIGRheU9mV2Vla1tlXSkucmVwbGFjZSgve2VlfS9nLCBkYXlPZldlZWtBYmJyW2VdKS5yZXBsYWNlKC97ZX0vZywgZSArICcnKS5yZXBsYWNlKC97SEh9L2csIHBhZChILCAyKSkucmVwbGFjZSgve0h9L2csIEggKyAnJykucmVwbGFjZSgve2hofS9nLCBwYWQoaCArICcnLCAyKSkucmVwbGFjZSgve2h9L2csIGggKyAnJykucmVwbGFjZSgve21tfS9nLCBwYWQobSwgMikpLnJlcGxhY2UoL3ttfS9nLCBtICsgJycpLnJlcGxhY2UoL3tzc30vZywgcGFkKHMsIDIpKS5yZXBsYWNlKC97c30vZywgcyArICcnKS5yZXBsYWNlKC97U1NTfS9nLCBwYWQoUywgMykpLnJlcGxhY2UoL3tTfS9nLCBTICsgJycpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGxldmVsZWRGb3JtYXQodGljaywgaWR4LCBmb3JtYXR0ZXIsIGxhbmcsIGlzVVRDKSB7XG4gIHZhciB0ZW1wbGF0ZSA9IG51bGw7XG5cbiAgaWYgKHpyVXRpbC5pc1N0cmluZyhmb3JtYXR0ZXIpKSB7XG4gICAgLy8gU2luZ2xlIGZvcm1hdHRlciBmb3IgYWxsIHVuaXRzIGF0IGFsbCBsZXZlbHNcbiAgICB0ZW1wbGF0ZSA9IGZvcm1hdHRlcjtcbiAgfSBlbHNlIGlmICh6clV0aWwuaXNGdW5jdGlvbihmb3JtYXR0ZXIpKSB7XG4gICAgLy8gQ2FsbGJhY2sgZm9ybWF0dGVyXG4gICAgdGVtcGxhdGUgPSBmb3JtYXR0ZXIodGljay52YWx1ZSwgaWR4LCB7XG4gICAgICBsZXZlbDogdGljay5sZXZlbFxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHZhciBkZWZhdWx0cyA9IHpyVXRpbC5leHRlbmQoe30sIGRlZmF1bHRMZXZlbGVkRm9ybWF0dGVyKTtcblxuICAgIGlmICh0aWNrLmxldmVsID4gMCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcmltYXJ5VGltZVVuaXRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGRlZmF1bHRzW3ByaW1hcnlUaW1lVW5pdHNbaV1dID0gXCJ7cHJpbWFyeXxcIiArIGRlZmF1bHRzW3ByaW1hcnlUaW1lVW5pdHNbaV1dICsgXCJ9XCI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIG1lcmdlZEZvcm1hdHRlciA9IGZvcm1hdHRlciA/IGZvcm1hdHRlci5pbmhlcml0ID09PSBmYWxzZSA/IGZvcm1hdHRlciAvLyBVc2UgZm9ybWF0dGVyIHdpdGggYmlnZ2VyIHVuaXRzXG4gICAgOiB6clV0aWwuZGVmYXVsdHMoZm9ybWF0dGVyLCBkZWZhdWx0cykgOiBkZWZhdWx0cztcbiAgICB2YXIgdW5pdCA9IGdldFVuaXRGcm9tVmFsdWUodGljay52YWx1ZSwgaXNVVEMpO1xuXG4gICAgaWYgKG1lcmdlZEZvcm1hdHRlclt1bml0XSkge1xuICAgICAgdGVtcGxhdGUgPSBtZXJnZWRGb3JtYXR0ZXJbdW5pdF07XG4gICAgfSBlbHNlIGlmIChtZXJnZWRGb3JtYXR0ZXIuaW5oZXJpdCkge1xuICAgICAgLy8gVW5pdCBmb3JtYXR0ZXIgaXMgbm90IGRlZmluZWQgYW5kIHNob3VsZCBpbmhlcml0IGZyb20gYmlnZ2VyIHVuaXRzXG4gICAgICB2YXIgdGFyZ2V0SWQgPSB0aW1lVW5pdHMuaW5kZXhPZih1bml0KTtcblxuICAgICAgZm9yICh2YXIgaSA9IHRhcmdldElkIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgaWYgKG1lcmdlZEZvcm1hdHRlclt1bml0XSkge1xuICAgICAgICAgIHRlbXBsYXRlID0gbWVyZ2VkRm9ybWF0dGVyW3VuaXRdO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRlbXBsYXRlID0gdGVtcGxhdGUgfHwgZGVmYXVsdHMubm9uZTtcbiAgICB9XG5cbiAgICBpZiAoenJVdGlsLmlzQXJyYXkodGVtcGxhdGUpKSB7XG4gICAgICB2YXIgbGV2ZWxJZCA9IHRpY2subGV2ZWwgPT0gbnVsbCA/IDAgOiB0aWNrLmxldmVsID49IDAgPyB0aWNrLmxldmVsIDogdGVtcGxhdGUubGVuZ3RoICsgdGljay5sZXZlbDtcbiAgICAgIGxldmVsSWQgPSBNYXRoLm1pbihsZXZlbElkLCB0ZW1wbGF0ZS5sZW5ndGggLSAxKTtcbiAgICAgIHRlbXBsYXRlID0gdGVtcGxhdGVbbGV2ZWxJZF07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZvcm1hdChuZXcgRGF0ZSh0aWNrLnZhbHVlKSwgdGVtcGxhdGUsIGlzVVRDLCBsYW5nKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRVbml0RnJvbVZhbHVlKHZhbHVlLCBpc1VUQykge1xuICB2YXIgZGF0ZSA9IG51bWJlclV0aWwucGFyc2VEYXRlKHZhbHVlKTtcbiAgdmFyIE0gPSBkYXRlW21vbnRoR2V0dGVyTmFtZShpc1VUQyldKCkgKyAxO1xuICB2YXIgZCA9IGRhdGVbZGF0ZUdldHRlck5hbWUoaXNVVEMpXSgpO1xuICB2YXIgaCA9IGRhdGVbaG91cnNHZXR0ZXJOYW1lKGlzVVRDKV0oKTtcbiAgdmFyIG0gPSBkYXRlW21pbnV0ZXNHZXR0ZXJOYW1lKGlzVVRDKV0oKTtcbiAgdmFyIHMgPSBkYXRlW3NlY29uZHNHZXR0ZXJOYW1lKGlzVVRDKV0oKTtcbiAgdmFyIFMgPSBkYXRlW21pbGxpc2Vjb25kc0dldHRlck5hbWUoaXNVVEMpXSgpO1xuICB2YXIgaXNTZWNvbmQgPSBTID09PSAwO1xuICB2YXIgaXNNaW51dGUgPSBpc1NlY29uZCAmJiBzID09PSAwO1xuICB2YXIgaXNIb3VyID0gaXNNaW51dGUgJiYgbSA9PT0gMDtcbiAgdmFyIGlzRGF5ID0gaXNIb3VyICYmIGggPT09IDA7XG4gIHZhciBpc01vbnRoID0gaXNEYXkgJiYgZCA9PT0gMTtcbiAgdmFyIGlzWWVhciA9IGlzTW9udGggJiYgTSA9PT0gMTtcblxuICBpZiAoaXNZZWFyKSB7XG4gICAgcmV0dXJuICd5ZWFyJztcbiAgfSBlbHNlIGlmIChpc01vbnRoKSB7XG4gICAgcmV0dXJuICdtb250aCc7XG4gIH0gZWxzZSBpZiAoaXNEYXkpIHtcbiAgICByZXR1cm4gJ2RheSc7XG4gIH0gZWxzZSBpZiAoaXNIb3VyKSB7XG4gICAgcmV0dXJuICdob3VyJztcbiAgfSBlbHNlIGlmIChpc01pbnV0ZSkge1xuICAgIHJldHVybiAnbWludXRlJztcbiAgfSBlbHNlIGlmIChpc1NlY29uZCkge1xuICAgIHJldHVybiAnc2Vjb25kJztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gJ21pbGxpc2Vjb25kJztcbiAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFVuaXRWYWx1ZSh2YWx1ZSwgdW5pdCwgaXNVVEMpIHtcbiAgdmFyIGRhdGUgPSB6clV0aWwuaXNOdW1iZXIodmFsdWUpID8gbnVtYmVyVXRpbC5wYXJzZURhdGUodmFsdWUpIDogdmFsdWU7XG4gIHVuaXQgPSB1bml0IHx8IGdldFVuaXRGcm9tVmFsdWUodmFsdWUsIGlzVVRDKTtcblxuICBzd2l0Y2ggKHVuaXQpIHtcbiAgICBjYXNlICd5ZWFyJzpcbiAgICAgIHJldHVybiBkYXRlW2Z1bGxZZWFyR2V0dGVyTmFtZShpc1VUQyldKCk7XG5cbiAgICBjYXNlICdoYWxmLXllYXInOlxuICAgICAgcmV0dXJuIGRhdGVbbW9udGhHZXR0ZXJOYW1lKGlzVVRDKV0oKSA+PSA2ID8gMSA6IDA7XG5cbiAgICBjYXNlICdxdWFydGVyJzpcbiAgICAgIHJldHVybiBNYXRoLmZsb29yKChkYXRlW21vbnRoR2V0dGVyTmFtZShpc1VUQyldKCkgKyAxKSAvIDQpO1xuXG4gICAgY2FzZSAnbW9udGgnOlxuICAgICAgcmV0dXJuIGRhdGVbbW9udGhHZXR0ZXJOYW1lKGlzVVRDKV0oKTtcblxuICAgIGNhc2UgJ2RheSc6XG4gICAgICByZXR1cm4gZGF0ZVtkYXRlR2V0dGVyTmFtZShpc1VUQyldKCk7XG5cbiAgICBjYXNlICdoYWxmLWRheSc6XG4gICAgICByZXR1cm4gZGF0ZVtob3Vyc0dldHRlck5hbWUoaXNVVEMpXSgpIC8gMjQ7XG5cbiAgICBjYXNlICdob3VyJzpcbiAgICAgIHJldHVybiBkYXRlW2hvdXJzR2V0dGVyTmFtZShpc1VUQyldKCk7XG5cbiAgICBjYXNlICdtaW51dGUnOlxuICAgICAgcmV0dXJuIGRhdGVbbWludXRlc0dldHRlck5hbWUoaXNVVEMpXSgpO1xuXG4gICAgY2FzZSAnc2Vjb25kJzpcbiAgICAgIHJldHVybiBkYXRlW3NlY29uZHNHZXR0ZXJOYW1lKGlzVVRDKV0oKTtcblxuICAgIGNhc2UgJ21pbGxpc2Vjb25kJzpcbiAgICAgIHJldHVybiBkYXRlW21pbGxpc2Vjb25kc0dldHRlck5hbWUoaXNVVEMpXSgpO1xuICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZnVsbFllYXJHZXR0ZXJOYW1lKGlzVVRDKSB7XG4gIHJldHVybiBpc1VUQyA/ICdnZXRVVENGdWxsWWVhcicgOiAnZ2V0RnVsbFllYXInO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1vbnRoR2V0dGVyTmFtZShpc1VUQykge1xuICByZXR1cm4gaXNVVEMgPyAnZ2V0VVRDTW9udGgnIDogJ2dldE1vbnRoJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBkYXRlR2V0dGVyTmFtZShpc1VUQykge1xuICByZXR1cm4gaXNVVEMgPyAnZ2V0VVRDRGF0ZScgOiAnZ2V0RGF0ZSc7XG59XG5leHBvcnQgZnVuY3Rpb24gaG91cnNHZXR0ZXJOYW1lKGlzVVRDKSB7XG4gIHJldHVybiBpc1VUQyA/ICdnZXRVVENIb3VycycgOiAnZ2V0SG91cnMnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1pbnV0ZXNHZXR0ZXJOYW1lKGlzVVRDKSB7XG4gIHJldHVybiBpc1VUQyA/ICdnZXRVVENNaW51dGVzJyA6ICdnZXRNaW51dGVzJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZWNvbmRzR2V0dGVyTmFtZShpc1VUQykge1xuICByZXR1cm4gaXNVVEMgPyAnZ2V0VVRDU2Vjb25kcycgOiAnZ2V0U2Vjb25kcyc7XG59XG5leHBvcnQgZnVuY3Rpb24gbWlsbGlzZWNvbmRzR2V0dGVyTmFtZShpc1VUQykge1xuICByZXR1cm4gaXNVVEMgPyAnZ2V0VVRDTWlsbGlzZWNvbmRzJyA6ICdnZXRNaWxsaXNlY29uZHMnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZ1bGxZZWFyU2V0dGVyTmFtZShpc1VUQykge1xuICByZXR1cm4gaXNVVEMgPyAnc2V0VVRDRnVsbFllYXInIDogJ3NldEZ1bGxZZWFyJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBtb250aFNldHRlck5hbWUoaXNVVEMpIHtcbiAgcmV0dXJuIGlzVVRDID8gJ3NldFVUQ01vbnRoJyA6ICdzZXRNb250aCc7XG59XG5leHBvcnQgZnVuY3Rpb24gZGF0ZVNldHRlck5hbWUoaXNVVEMpIHtcbiAgcmV0dXJuIGlzVVRDID8gJ3NldFVUQ0RhdGUnIDogJ3NldERhdGUnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhvdXJzU2V0dGVyTmFtZShpc1VUQykge1xuICByZXR1cm4gaXNVVEMgPyAnc2V0VVRDSG91cnMnIDogJ3NldEhvdXJzJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBtaW51dGVzU2V0dGVyTmFtZShpc1VUQykge1xuICByZXR1cm4gaXNVVEMgPyAnc2V0VVRDTWludXRlcycgOiAnc2V0TWludXRlcyc7XG59XG5leHBvcnQgZnVuY3Rpb24gc2Vjb25kc1NldHRlck5hbWUoaXNVVEMpIHtcbiAgcmV0dXJuIGlzVVRDID8gJ3NldFVUQ1NlY29uZHMnIDogJ3NldFNlY29uZHMnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1pbGxpc2Vjb25kc1NldHRlck5hbWUoaXNVVEMpIHtcbiAgcmV0dXJuIGlzVVRDID8gJ3NldFVUQ01pbGxpc2Vjb25kcycgOiAnc2V0TWlsbGlzZWNvbmRzJztcbn0iLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCAqIGFzIHpyVXRpbCBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0IHsgZW5jb2RlSFRNTCB9IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvZG9tLmpzJztcbmltcG9ydCB7IHBhcnNlRGF0ZSwgaXNOdW1lcmljLCBudW1lcmljVG9OdW1iZXIgfSBmcm9tICcuL251bWJlci5qcyc7XG5pbXBvcnQgeyBmb3JtYXQgYXMgdGltZUZvcm1hdCwgcGFkIH0gZnJvbSAnLi90aW1lLmpzJztcbmltcG9ydCB7IGRlcHJlY2F0ZVJlcGxhY2VMb2cgfSBmcm9tICcuL2xvZy5qcyc7XG4vKipcclxuICogQWRkIGEgY29tbWEgZWFjaCB0aHJlZSBkaWdpdC5cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRDb21tYXMoeCkge1xuICBpZiAoIWlzTnVtZXJpYyh4KSkge1xuICAgIHJldHVybiB6clV0aWwuaXNTdHJpbmcoeCkgPyB4IDogJy0nO1xuICB9XG5cbiAgdmFyIHBhcnRzID0gKHggKyAnJykuc3BsaXQoJy4nKTtcbiAgcmV0dXJuIHBhcnRzWzBdLnJlcGxhY2UoLyhcXGR7MSwzfSkoPz0oPzpcXGR7M30pKyg/IVxcZCkpL2csICckMSwnKSArIChwYXJ0cy5sZW5ndGggPiAxID8gJy4nICsgcGFydHNbMV0gOiAnJyk7XG59XG5leHBvcnQgZnVuY3Rpb24gdG9DYW1lbENhc2Uoc3RyLCB1cHBlckNhc2VGaXJzdCkge1xuICBzdHIgPSAoc3RyIHx8ICcnKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoLy0oLikvZywgZnVuY3Rpb24gKG1hdGNoLCBncm91cDEpIHtcbiAgICByZXR1cm4gZ3JvdXAxLnRvVXBwZXJDYXNlKCk7XG4gIH0pO1xuXG4gIGlmICh1cHBlckNhc2VGaXJzdCAmJiBzdHIpIHtcbiAgICBzdHIgPSBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XG4gIH1cblxuICByZXR1cm4gc3RyO1xufVxuZXhwb3J0IHZhciBub3JtYWxpemVDc3NBcnJheSA9IHpyVXRpbC5ub3JtYWxpemVDc3NBcnJheTtcbmV4cG9ydCB7IGVuY29kZUhUTUwgfTtcbi8qKlxyXG4gKiBNYWtlIHZhbHVlIHVzZXIgcmVhZGFibGUgZm9yIHRvb2x0aXAgYW5kIGxhYmVsLlxyXG4gKiBcIlVzZXIgcmVhZGFibGVcIjpcclxuICogICAgIFRyeSB0byBub3QgcHJpbnQgcHJvZ3JhbW1lci1zcGVjaWZpYyB0ZXh0IGxpa2UgTmFOLCBJbmZpbml0eSwgbnVsbCwgdW5kZWZpbmVkLlxyXG4gKiAgICAgQXZvaWQgdG8gZGlzcGxheSBhbiBlbXB0eSBzdHJpbmcsIHdoaWNoIHVzZXJzIGNhbiBub3QgcmVjb2duaXplIHRoZXJlIGlzXHJcbiAqICAgICBhIHZhbHVlIGFuZCBpdCBtaWdodCBsb29rIGxpa2UgYSBidWcuXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbWFrZVZhbHVlUmVhZGFibGUodmFsdWUsIHZhbHVlVHlwZSwgdXNlVVRDKSB7XG4gIHZhciBVU0VSX1JFQURBQkxFX0RFRlVBTFRfVElNRV9QQVRURVJOID0gJ3t5eXl5fS17TU19LXtkZH0ge0hIfTp7bW19Ontzc30nO1xuXG4gIGZ1bmN0aW9uIHN0cmluZ1RvVXNlclJlYWRhYmxlKHN0cikge1xuICAgIHJldHVybiBzdHIgJiYgenJVdGlsLnRyaW0oc3RyKSA/IHN0ciA6ICctJztcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzTnVtYmVyVXNlclJlYWRhYmxlKG51bSkge1xuICAgIHJldHVybiAhIShudW0gIT0gbnVsbCAmJiAhaXNOYU4obnVtKSAmJiBpc0Zpbml0ZShudW0pKTtcbiAgfVxuXG4gIHZhciBpc1R5cGVUaW1lID0gdmFsdWVUeXBlID09PSAndGltZSc7XG4gIHZhciBpc1ZhbHVlRGF0ZSA9IHZhbHVlIGluc3RhbmNlb2YgRGF0ZTtcblxuICBpZiAoaXNUeXBlVGltZSB8fCBpc1ZhbHVlRGF0ZSkge1xuICAgIHZhciBkYXRlID0gaXNUeXBlVGltZSA/IHBhcnNlRGF0ZSh2YWx1ZSkgOiB2YWx1ZTtcblxuICAgIGlmICghaXNOYU4oK2RhdGUpKSB7XG4gICAgICByZXR1cm4gdGltZUZvcm1hdChkYXRlLCBVU0VSX1JFQURBQkxFX0RFRlVBTFRfVElNRV9QQVRURVJOLCB1c2VVVEMpO1xuICAgIH0gZWxzZSBpZiAoaXNWYWx1ZURhdGUpIHtcbiAgICAgIHJldHVybiAnLSc7XG4gICAgfSAvLyBJbiBvdGhlciBjYXNlcywgY29udGludWUgdG8gdHJ5IHRvIGRpc3BsYXkgdGhlIHZhbHVlIGluIHRoZSBmb2xsb3dpbmcgY29kZS5cblxuICB9XG5cbiAgaWYgKHZhbHVlVHlwZSA9PT0gJ29yZGluYWwnKSB7XG4gICAgcmV0dXJuIHpyVXRpbC5pc1N0cmluZ1NhZmUodmFsdWUpID8gc3RyaW5nVG9Vc2VyUmVhZGFibGUodmFsdWUpIDogenJVdGlsLmlzTnVtYmVyKHZhbHVlKSA/IGlzTnVtYmVyVXNlclJlYWRhYmxlKHZhbHVlKSA/IHZhbHVlICsgJycgOiAnLScgOiAnLSc7XG4gIH0gLy8gQnkgZGVmYXVsdC5cblxuXG4gIHZhciBudW1lcmljUmVzdWx0ID0gbnVtZXJpY1RvTnVtYmVyKHZhbHVlKTtcbiAgcmV0dXJuIGlzTnVtYmVyVXNlclJlYWRhYmxlKG51bWVyaWNSZXN1bHQpID8gYWRkQ29tbWFzKG51bWVyaWNSZXN1bHQpIDogenJVdGlsLmlzU3RyaW5nU2FmZSh2YWx1ZSkgPyBzdHJpbmdUb1VzZXJSZWFkYWJsZSh2YWx1ZSkgOiB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJyA/IHZhbHVlICsgJycgOiAnLSc7XG59XG52YXIgVFBMX1ZBUl9BTElBUyA9IFsnYScsICdiJywgJ2MnLCAnZCcsICdlJywgJ2YnLCAnZyddO1xuXG52YXIgd3JhcFZhciA9IGZ1bmN0aW9uICh2YXJOYW1lLCBzZXJpZXNJZHgpIHtcbiAgcmV0dXJuICd7JyArIHZhck5hbWUgKyAoc2VyaWVzSWR4ID09IG51bGwgPyAnJyA6IHNlcmllc0lkeCkgKyAnfSc7XG59O1xuLyoqXHJcbiAqIFRlbXBsYXRlIGZvcm1hdHRlclxyXG4gKiBAcGFyYW0ge0FycmF5LjxPYmplY3Q+fE9iamVjdH0gcGFyYW1zTGlzdFxyXG4gKi9cblxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0VHBsKHRwbCwgcGFyYW1zTGlzdCwgZW5jb2RlKSB7XG4gIGlmICghenJVdGlsLmlzQXJyYXkocGFyYW1zTGlzdCkpIHtcbiAgICBwYXJhbXNMaXN0ID0gW3BhcmFtc0xpc3RdO1xuICB9XG5cbiAgdmFyIHNlcmllc0xlbiA9IHBhcmFtc0xpc3QubGVuZ3RoO1xuXG4gIGlmICghc2VyaWVzTGVuKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgdmFyICR2YXJzID0gcGFyYW1zTGlzdFswXS4kdmFycyB8fCBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8ICR2YXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGFsaWFzID0gVFBMX1ZBUl9BTElBU1tpXTtcbiAgICB0cGwgPSB0cGwucmVwbGFjZSh3cmFwVmFyKGFsaWFzKSwgd3JhcFZhcihhbGlhcywgMCkpO1xuICB9XG5cbiAgZm9yICh2YXIgc2VyaWVzSWR4ID0gMDsgc2VyaWVzSWR4IDwgc2VyaWVzTGVuOyBzZXJpZXNJZHgrKykge1xuICAgIGZvciAodmFyIGsgPSAwOyBrIDwgJHZhcnMubGVuZ3RoOyBrKyspIHtcbiAgICAgIHZhciB2YWwgPSBwYXJhbXNMaXN0W3Nlcmllc0lkeF1bJHZhcnNba11dO1xuICAgICAgdHBsID0gdHBsLnJlcGxhY2Uod3JhcFZhcihUUExfVkFSX0FMSUFTW2tdLCBzZXJpZXNJZHgpLCBlbmNvZGUgPyBlbmNvZGVIVE1MKHZhbCkgOiB2YWwpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cGw7XG59XG4vKipcclxuICogc2ltcGxlIFRlbXBsYXRlIGZvcm1hdHRlclxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFRwbFNpbXBsZSh0cGwsIHBhcmFtLCBlbmNvZGUpIHtcbiAgenJVdGlsLmVhY2gocGFyYW0sIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgdHBsID0gdHBsLnJlcGxhY2UoJ3snICsga2V5ICsgJ30nLCBlbmNvZGUgPyBlbmNvZGVIVE1MKHZhbHVlKSA6IHZhbHVlKTtcbiAgfSk7XG4gIHJldHVybiB0cGw7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9vbHRpcE1hcmtlcihpbk9wdCwgZXh0cmFDc3NUZXh0KSB7XG4gIHZhciBvcHQgPSB6clV0aWwuaXNTdHJpbmcoaW5PcHQpID8ge1xuICAgIGNvbG9yOiBpbk9wdCxcbiAgICBleHRyYUNzc1RleHQ6IGV4dHJhQ3NzVGV4dFxuICB9IDogaW5PcHQgfHwge307XG4gIHZhciBjb2xvciA9IG9wdC5jb2xvcjtcbiAgdmFyIHR5cGUgPSBvcHQudHlwZTtcbiAgZXh0cmFDc3NUZXh0ID0gb3B0LmV4dHJhQ3NzVGV4dDtcbiAgdmFyIHJlbmRlck1vZGUgPSBvcHQucmVuZGVyTW9kZSB8fCAnaHRtbCc7XG5cbiAgaWYgKCFjb2xvcikge1xuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIGlmIChyZW5kZXJNb2RlID09PSAnaHRtbCcpIHtcbiAgICByZXR1cm4gdHlwZSA9PT0gJ3N1Ykl0ZW0nID8gJzxzcGFuIHN0eWxlPVwiZGlzcGxheTppbmxpbmUtYmxvY2s7dmVydGljYWwtYWxpZ246bWlkZGxlO21hcmdpbi1yaWdodDo4cHg7bWFyZ2luLWxlZnQ6M3B4OycgKyAnYm9yZGVyLXJhZGl1czo0cHg7d2lkdGg6NHB4O2hlaWdodDo0cHg7YmFja2dyb3VuZC1jb2xvcjonIC8vIE9ubHkgc3VwcG9ydCBzdHJpbmdcbiAgICArIGVuY29kZUhUTUwoY29sb3IpICsgJzsnICsgKGV4dHJhQ3NzVGV4dCB8fCAnJykgKyAnXCI+PC9zcGFuPicgOiAnPHNwYW4gc3R5bGU9XCJkaXNwbGF5OmlubGluZS1ibG9jazttYXJnaW4tcmlnaHQ6NHB4OycgKyAnYm9yZGVyLXJhZGl1czoxMHB4O3dpZHRoOjEwcHg7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1jb2xvcjonICsgZW5jb2RlSFRNTChjb2xvcikgKyAnOycgKyAoZXh0cmFDc3NUZXh0IHx8ICcnKSArICdcIj48L3NwYW4+JztcbiAgfSBlbHNlIHtcbiAgICAvLyBTaG91bGQgYmV0dGVyIG5vdCB0byBhdXRvIGdlbmVyYXRlIHN0eWxlIG5hbWUgYnkgYXV0by1pbmNyZW1lbnQgbnVtYmVyIGhlcmUuXG4gICAgLy8gQmVjYXVzZSB0aGlzIHV0aWwgaXMgdXN1YWxseSBjYWxsZWQgaW4gdG9vbHRpcCBmb3JtYXR0ZXIsIHdoaWNoIGlzIHByb2JhYmx5XG4gICAgLy8gY2FsbGVkIHJlcGVhdGVkbHkgd2hlbiBtb3VzZSBtb3ZlIGFuZCB0aGUgYXV0by1pbmNyZW1lbnQgbnVtYmVyIGluY3JlYXNlcyBmYXN0LlxuICAgIC8vIFVzZXJzIGNhbiBtYWtlIHRoZWlyIG93biBzdHlsZSBuYW1lIGJ5IHRoZWlyc2VsdmVzLCBtYWtlIGl0IHVuaXF1ZSBhbmQgcmVhZGFibGUuXG4gICAgdmFyIG1hcmtlcklkID0gb3B0Lm1hcmtlcklkIHx8ICdtYXJrZXJYJztcbiAgICByZXR1cm4ge1xuICAgICAgcmVuZGVyTW9kZTogcmVuZGVyTW9kZSxcbiAgICAgIGNvbnRlbnQ6ICd7JyArIG1hcmtlcklkICsgJ3x9ICAnLFxuICAgICAgc3R5bGU6IHR5cGUgPT09ICdzdWJJdGVtJyA/IHtcbiAgICAgICAgd2lkdGg6IDQsXG4gICAgICAgIGhlaWdodDogNCxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAyLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9yXG4gICAgICB9IDoge1xuICAgICAgICB3aWR0aDogMTAsXG4gICAgICAgIGhlaWdodDogMTAsXG4gICAgICAgIGJvcmRlclJhZGl1czogNSxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBjb2xvclxuICAgICAgfVxuICAgIH07XG4gIH1cbn1cbi8qKlxyXG4gKiBAZGVwcmVjYXRlZCBVc2UgYHRpbWUvZm9ybWF0YCBpbnN0ZWFkLlxyXG4gKiBJU08gRGF0ZSBmb3JtYXRcclxuICogQHBhcmFtIHtzdHJpbmd9IHRwbFxyXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcclxuICogQHBhcmFtIHtib29sZWFufSBbaXNVVEM9ZmFsc2VdIERlZmF1bHQgaW4gbG9jYWwgdGltZS5cclxuICogICAgICAgICAgIHNlZSBgbW9kdWxlOmVjaGFydHMvc2NhbGUvVGltZWBcclxuICogICAgICAgICAgIGFuZCBgbW9kdWxlOmVjaGFydHMvdXRpbC9udW1iZXIjcGFyc2VEYXRlYC5cclxuICogQGlubmVyXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0VGltZSh0cGwsIHZhbHVlLCBpc1VUQykge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGRlcHJlY2F0ZVJlcGxhY2VMb2coJ2VjaGFydHMuZm9ybWF0LmZvcm1hdFRpbWUnLCAnZWNoYXJ0cy50aW1lLmZvcm1hdCcpO1xuICB9XG5cbiAgaWYgKHRwbCA9PT0gJ3dlZWsnIHx8IHRwbCA9PT0gJ21vbnRoJyB8fCB0cGwgPT09ICdxdWFydGVyJyB8fCB0cGwgPT09ICdoYWxmLXllYXInIHx8IHRwbCA9PT0gJ3llYXInKSB7XG4gICAgdHBsID0gJ01NLWRkXFxueXl5eSc7XG4gIH1cblxuICB2YXIgZGF0ZSA9IHBhcnNlRGF0ZSh2YWx1ZSk7XG4gIHZhciBnZXRVVEMgPSBpc1VUQyA/ICdnZXRVVEMnIDogJ2dldCc7XG4gIHZhciB5ID0gZGF0ZVtnZXRVVEMgKyAnRnVsbFllYXInXSgpO1xuICB2YXIgTSA9IGRhdGVbZ2V0VVRDICsgJ01vbnRoJ10oKSArIDE7XG4gIHZhciBkID0gZGF0ZVtnZXRVVEMgKyAnRGF0ZSddKCk7XG4gIHZhciBoID0gZGF0ZVtnZXRVVEMgKyAnSG91cnMnXSgpO1xuICB2YXIgbSA9IGRhdGVbZ2V0VVRDICsgJ01pbnV0ZXMnXSgpO1xuICB2YXIgcyA9IGRhdGVbZ2V0VVRDICsgJ1NlY29uZHMnXSgpO1xuICB2YXIgUyA9IGRhdGVbZ2V0VVRDICsgJ01pbGxpc2Vjb25kcyddKCk7XG4gIHRwbCA9IHRwbC5yZXBsYWNlKCdNTScsIHBhZChNLCAyKSkucmVwbGFjZSgnTScsIE0pLnJlcGxhY2UoJ3l5eXknLCB5KS5yZXBsYWNlKCd5eScsIHBhZCh5ICUgMTAwICsgJycsIDIpKS5yZXBsYWNlKCdkZCcsIHBhZChkLCAyKSkucmVwbGFjZSgnZCcsIGQpLnJlcGxhY2UoJ2hoJywgcGFkKGgsIDIpKS5yZXBsYWNlKCdoJywgaCkucmVwbGFjZSgnbW0nLCBwYWQobSwgMikpLnJlcGxhY2UoJ20nLCBtKS5yZXBsYWNlKCdzcycsIHBhZChzLCAyKSkucmVwbGFjZSgncycsIHMpLnJlcGxhY2UoJ1NTUycsIHBhZChTLCAzKSk7XG4gIHJldHVybiB0cGw7XG59XG4vKipcclxuICogQ2FwaXRhbCBmaXJzdFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge3N0cmluZ31cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjYXBpdGFsRmlyc3Qoc3RyKSB7XG4gIHJldHVybiBzdHIgPyBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc3Vic3RyKDEpIDogc3RyO1xufVxuLyoqXHJcbiAqIEByZXR1cm4gTmV2ZXIgYmUgbnVsbC91bmRlZmluZWQuXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY29udmVydFRvQ29sb3JTdHJpbmcoY29sb3IsIGRlZmF1bHRDb2xvcikge1xuICBkZWZhdWx0Q29sb3IgPSBkZWZhdWx0Q29sb3IgfHwgJ3RyYW5zcGFyZW50JztcbiAgcmV0dXJuIHpyVXRpbC5pc1N0cmluZyhjb2xvcikgPyBjb2xvciA6IHpyVXRpbC5pc09iamVjdChjb2xvcikgPyBjb2xvci5jb2xvclN0b3BzICYmIChjb2xvci5jb2xvclN0b3BzWzBdIHx8IHt9KS5jb2xvciB8fCBkZWZhdWx0Q29sb3IgOiBkZWZhdWx0Q29sb3I7XG59XG5leHBvcnQgeyB0cnVuY2F0ZVRleHQgfSBmcm9tICd6cmVuZGVyL2xpYi9ncmFwaGljL2hlbHBlci9wYXJzZVRleHQuanMnO1xuLyoqXHJcbiAqIG9wZW4gbmV3IHRhYlxyXG4gKiBAcGFyYW0gbGluayB1cmxcclxuICogQHBhcmFtIHRhcmdldCBibGFuayBvciBzZWxmXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gd2luZG93T3BlbihsaW5rLCB0YXJnZXQpIHtcbiAgLyogZ2xvYmFsIHdpbmRvdyAqL1xuICBpZiAodGFyZ2V0ID09PSAnX2JsYW5rJyB8fCB0YXJnZXQgPT09ICdibGFuaycpIHtcbiAgICB2YXIgYmxhbmsgPSB3aW5kb3cub3BlbigpO1xuICAgIGJsYW5rLm9wZW5lciA9IG51bGw7XG4gICAgYmxhbmsubG9jYXRpb24uaHJlZiA9IGxpbms7XG4gIH0gZWxzZSB7XG4gICAgd2luZG93Lm9wZW4obGluaywgdGFyZ2V0KTtcbiAgfVxufVxuZXhwb3J0IHsgZ2V0VGV4dFJlY3QgfSBmcm9tICcuLi9sZWdhY3kvZ2V0VGV4dFJlY3QuanMnOyIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuLy8gTGF5b3V0IGhlbHBlcnMgZm9yIGVhY2ggY29tcG9uZW50IHBvc2l0aW9uaW5nXG5pbXBvcnQgKiBhcyB6clV0aWwgZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbmltcG9ydCBCb3VuZGluZ1JlY3QgZnJvbSAnenJlbmRlci9saWIvY29yZS9Cb3VuZGluZ1JlY3QuanMnO1xuaW1wb3J0IHsgcGFyc2VQZXJjZW50IH0gZnJvbSAnLi9udW1iZXIuanMnO1xuaW1wb3J0ICogYXMgZm9ybWF0VXRpbCBmcm9tICcuL2Zvcm1hdC5qcyc7XG52YXIgZWFjaCA9IHpyVXRpbC5lYWNoO1xuLyoqXHJcbiAqIEBwdWJsaWNcclxuICovXG5cbmV4cG9ydCB2YXIgTE9DQVRJT05fUEFSQU1TID0gWydsZWZ0JywgJ3JpZ2h0JywgJ3RvcCcsICdib3R0b20nLCAnd2lkdGgnLCAnaGVpZ2h0J107XG4vKipcclxuICogQHB1YmxpY1xyXG4gKi9cblxuZXhwb3J0IHZhciBIVl9OQU1FUyA9IFtbJ3dpZHRoJywgJ2xlZnQnLCAncmlnaHQnXSwgWydoZWlnaHQnLCAndG9wJywgJ2JvdHRvbSddXTtcblxuZnVuY3Rpb24gYm94TGF5b3V0KG9yaWVudCwgZ3JvdXAsIGdhcCwgbWF4V2lkdGgsIG1heEhlaWdodCkge1xuICB2YXIgeCA9IDA7XG4gIHZhciB5ID0gMDtcblxuICBpZiAobWF4V2lkdGggPT0gbnVsbCkge1xuICAgIG1heFdpZHRoID0gSW5maW5pdHk7XG4gIH1cblxuICBpZiAobWF4SGVpZ2h0ID09IG51bGwpIHtcbiAgICBtYXhIZWlnaHQgPSBJbmZpbml0eTtcbiAgfVxuXG4gIHZhciBjdXJyZW50TGluZU1heFNpemUgPSAwO1xuICBncm91cC5lYWNoQ2hpbGQoZnVuY3Rpb24gKGNoaWxkLCBpZHgpIHtcbiAgICB2YXIgcmVjdCA9IGNoaWxkLmdldEJvdW5kaW5nUmVjdCgpO1xuICAgIHZhciBuZXh0Q2hpbGQgPSBncm91cC5jaGlsZEF0KGlkeCArIDEpO1xuICAgIHZhciBuZXh0Q2hpbGRSZWN0ID0gbmV4dENoaWxkICYmIG5leHRDaGlsZC5nZXRCb3VuZGluZ1JlY3QoKTtcbiAgICB2YXIgbmV4dFg7XG4gICAgdmFyIG5leHRZO1xuXG4gICAgaWYgKG9yaWVudCA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICB2YXIgbW92ZVggPSByZWN0LndpZHRoICsgKG5leHRDaGlsZFJlY3QgPyAtbmV4dENoaWxkUmVjdC54ICsgcmVjdC54IDogMCk7XG4gICAgICBuZXh0WCA9IHggKyBtb3ZlWDsgLy8gV3JhcCB3aGVuIHdpZHRoIGV4Y2VlZHMgbWF4V2lkdGggb3IgbWVldCBhIGBuZXdsaW5lYCBncm91cFxuICAgICAgLy8gRklYTUUgY29tcGFyZSBiZWZvcmUgYWRkaW5nIGdhcD9cblxuICAgICAgaWYgKG5leHRYID4gbWF4V2lkdGggfHwgY2hpbGQubmV3bGluZSkge1xuICAgICAgICB4ID0gMDtcbiAgICAgICAgbmV4dFggPSBtb3ZlWDtcbiAgICAgICAgeSArPSBjdXJyZW50TGluZU1heFNpemUgKyBnYXA7XG4gICAgICAgIGN1cnJlbnRMaW5lTWF4U2l6ZSA9IHJlY3QuaGVpZ2h0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRklYTUU6IGNvbnNpZGVyIHJlY3QueSBpcyBub3QgYDBgP1xuICAgICAgICBjdXJyZW50TGluZU1heFNpemUgPSBNYXRoLm1heChjdXJyZW50TGluZU1heFNpemUsIHJlY3QuaGVpZ2h0KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIG1vdmVZID0gcmVjdC5oZWlnaHQgKyAobmV4dENoaWxkUmVjdCA/IC1uZXh0Q2hpbGRSZWN0LnkgKyByZWN0LnkgOiAwKTtcbiAgICAgIG5leHRZID0geSArIG1vdmVZOyAvLyBXcmFwIHdoZW4gd2lkdGggZXhjZWVkcyBtYXhIZWlnaHQgb3IgbWVldCBhIGBuZXdsaW5lYCBncm91cFxuXG4gICAgICBpZiAobmV4dFkgPiBtYXhIZWlnaHQgfHwgY2hpbGQubmV3bGluZSkge1xuICAgICAgICB4ICs9IGN1cnJlbnRMaW5lTWF4U2l6ZSArIGdhcDtcbiAgICAgICAgeSA9IDA7XG4gICAgICAgIG5leHRZID0gbW92ZVk7XG4gICAgICAgIGN1cnJlbnRMaW5lTWF4U2l6ZSA9IHJlY3Qud2lkdGg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50TGluZU1heFNpemUgPSBNYXRoLm1heChjdXJyZW50TGluZU1heFNpemUsIHJlY3Qud2lkdGgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjaGlsZC5uZXdsaW5lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY2hpbGQueCA9IHg7XG4gICAgY2hpbGQueSA9IHk7XG4gICAgY2hpbGQubWFya1JlZHJhdygpO1xuICAgIG9yaWVudCA9PT0gJ2hvcml6b250YWwnID8geCA9IG5leHRYICsgZ2FwIDogeSA9IG5leHRZICsgZ2FwO1xuICB9KTtcbn1cbi8qKlxyXG4gKiBWQm94IG9yIEhCb3ggbGF5b3V0aW5nXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBvcmllbnRcclxuICogQHBhcmFtIHttb2R1bGU6enJlbmRlci9ncmFwaGljL0dyb3VwfSBncm91cFxyXG4gKiBAcGFyYW0ge251bWJlcn0gZ2FwXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2lkdGg9SW5maW5pdHldXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbaGVpZ2h0PUluZmluaXR5XVxyXG4gKi9cblxuXG5leHBvcnQgdmFyIGJveCA9IGJveExheW91dDtcbi8qKlxyXG4gKiBWQm94IGxheW91dGluZ1xyXG4gKiBAcGFyYW0ge21vZHVsZTp6cmVuZGVyL2dyYXBoaWMvR3JvdXB9IGdyb3VwXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBnYXBcclxuICogQHBhcmFtIHtudW1iZXJ9IFt3aWR0aD1JbmZpbml0eV1cclxuICogQHBhcmFtIHtudW1iZXJ9IFtoZWlnaHQ9SW5maW5pdHldXHJcbiAqL1xuXG5leHBvcnQgdmFyIHZib3ggPSB6clV0aWwuY3VycnkoYm94TGF5b3V0LCAndmVydGljYWwnKTtcbi8qKlxyXG4gKiBIQm94IGxheW91dGluZ1xyXG4gKiBAcGFyYW0ge21vZHVsZTp6cmVuZGVyL2dyYXBoaWMvR3JvdXB9IGdyb3VwXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBnYXBcclxuICogQHBhcmFtIHtudW1iZXJ9IFt3aWR0aD1JbmZpbml0eV1cclxuICogQHBhcmFtIHtudW1iZXJ9IFtoZWlnaHQ9SW5maW5pdHldXHJcbiAqL1xuXG5leHBvcnQgdmFyIGhib3ggPSB6clV0aWwuY3VycnkoYm94TGF5b3V0LCAnaG9yaXpvbnRhbCcpO1xuLyoqXHJcbiAqIElmIHggb3IgeDIgaXMgbm90IHNwZWNpZmllZCBvciAnY2VudGVyJyAnbGVmdCcgJ3JpZ2h0JyxcclxuICogdGhlIHdpZHRoIHdvdWxkIGJlIGFzIGxvbmcgYXMgcG9zc2libGUuXHJcbiAqIElmIHkgb3IgeTIgaXMgbm90IHNwZWNpZmllZCBvciAnbWlkZGxlJyAndG9wJyAnYm90dG9tJyxcclxuICogdGhlIGhlaWdodCB3b3VsZCBiZSBhcyBsb25nIGFzIHBvc3NpYmxlLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEF2YWlsYWJsZVNpemUocG9zaXRpb25JbmZvLCBjb250YWluZXJSZWN0LCBtYXJnaW4pIHtcbiAgdmFyIGNvbnRhaW5lcldpZHRoID0gY29udGFpbmVyUmVjdC53aWR0aDtcbiAgdmFyIGNvbnRhaW5lckhlaWdodCA9IGNvbnRhaW5lclJlY3QuaGVpZ2h0O1xuICB2YXIgeCA9IHBhcnNlUGVyY2VudChwb3NpdGlvbkluZm8ubGVmdCwgY29udGFpbmVyV2lkdGgpO1xuICB2YXIgeSA9IHBhcnNlUGVyY2VudChwb3NpdGlvbkluZm8udG9wLCBjb250YWluZXJIZWlnaHQpO1xuICB2YXIgeDIgPSBwYXJzZVBlcmNlbnQocG9zaXRpb25JbmZvLnJpZ2h0LCBjb250YWluZXJXaWR0aCk7XG4gIHZhciB5MiA9IHBhcnNlUGVyY2VudChwb3NpdGlvbkluZm8uYm90dG9tLCBjb250YWluZXJIZWlnaHQpO1xuICAoaXNOYU4oeCkgfHwgaXNOYU4ocGFyc2VGbG9hdChwb3NpdGlvbkluZm8ubGVmdCkpKSAmJiAoeCA9IDApO1xuICAoaXNOYU4oeDIpIHx8IGlzTmFOKHBhcnNlRmxvYXQocG9zaXRpb25JbmZvLnJpZ2h0KSkpICYmICh4MiA9IGNvbnRhaW5lcldpZHRoKTtcbiAgKGlzTmFOKHkpIHx8IGlzTmFOKHBhcnNlRmxvYXQocG9zaXRpb25JbmZvLnRvcCkpKSAmJiAoeSA9IDApO1xuICAoaXNOYU4oeTIpIHx8IGlzTmFOKHBhcnNlRmxvYXQocG9zaXRpb25JbmZvLmJvdHRvbSkpKSAmJiAoeTIgPSBjb250YWluZXJIZWlnaHQpO1xuICBtYXJnaW4gPSBmb3JtYXRVdGlsLm5vcm1hbGl6ZUNzc0FycmF5KG1hcmdpbiB8fCAwKTtcbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogTWF0aC5tYXgoeDIgLSB4IC0gbWFyZ2luWzFdIC0gbWFyZ2luWzNdLCAwKSxcbiAgICBoZWlnaHQ6IE1hdGgubWF4KHkyIC0geSAtIG1hcmdpblswXSAtIG1hcmdpblsyXSwgMClcbiAgfTtcbn1cbi8qKlxyXG4gKiBQYXJzZSBwb3NpdGlvbiBpbmZvLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldExheW91dFJlY3QocG9zaXRpb25JbmZvLCBjb250YWluZXJSZWN0LCBtYXJnaW4pIHtcbiAgbWFyZ2luID0gZm9ybWF0VXRpbC5ub3JtYWxpemVDc3NBcnJheShtYXJnaW4gfHwgMCk7XG4gIHZhciBjb250YWluZXJXaWR0aCA9IGNvbnRhaW5lclJlY3Qud2lkdGg7XG4gIHZhciBjb250YWluZXJIZWlnaHQgPSBjb250YWluZXJSZWN0LmhlaWdodDtcbiAgdmFyIGxlZnQgPSBwYXJzZVBlcmNlbnQocG9zaXRpb25JbmZvLmxlZnQsIGNvbnRhaW5lcldpZHRoKTtcbiAgdmFyIHRvcCA9IHBhcnNlUGVyY2VudChwb3NpdGlvbkluZm8udG9wLCBjb250YWluZXJIZWlnaHQpO1xuICB2YXIgcmlnaHQgPSBwYXJzZVBlcmNlbnQocG9zaXRpb25JbmZvLnJpZ2h0LCBjb250YWluZXJXaWR0aCk7XG4gIHZhciBib3R0b20gPSBwYXJzZVBlcmNlbnQocG9zaXRpb25JbmZvLmJvdHRvbSwgY29udGFpbmVySGVpZ2h0KTtcbiAgdmFyIHdpZHRoID0gcGFyc2VQZXJjZW50KHBvc2l0aW9uSW5mby53aWR0aCwgY29udGFpbmVyV2lkdGgpO1xuICB2YXIgaGVpZ2h0ID0gcGFyc2VQZXJjZW50KHBvc2l0aW9uSW5mby5oZWlnaHQsIGNvbnRhaW5lckhlaWdodCk7XG4gIHZhciB2ZXJ0aWNhbE1hcmdpbiA9IG1hcmdpblsyXSArIG1hcmdpblswXTtcbiAgdmFyIGhvcml6b250YWxNYXJnaW4gPSBtYXJnaW5bMV0gKyBtYXJnaW5bM107XG4gIHZhciBhc3BlY3QgPSBwb3NpdGlvbkluZm8uYXNwZWN0OyAvLyBJZiB3aWR0aCBpcyBub3Qgc3BlY2lmaWVkLCBjYWxjdWxhdGUgd2lkdGggZnJvbSBsZWZ0IGFuZCByaWdodFxuXG4gIGlmIChpc05hTih3aWR0aCkpIHtcbiAgICB3aWR0aCA9IGNvbnRhaW5lcldpZHRoIC0gcmlnaHQgLSBob3Jpem9udGFsTWFyZ2luIC0gbGVmdDtcbiAgfVxuXG4gIGlmIChpc05hTihoZWlnaHQpKSB7XG4gICAgaGVpZ2h0ID0gY29udGFpbmVySGVpZ2h0IC0gYm90dG9tIC0gdmVydGljYWxNYXJnaW4gLSB0b3A7XG4gIH1cblxuICBpZiAoYXNwZWN0ICE9IG51bGwpIHtcbiAgICAvLyBJZiB3aWR0aCBhbmQgaGVpZ2h0IGFyZSBub3QgZ2l2ZW5cbiAgICAvLyAxLiBHcmFwaCBzaG91bGQgbm90IGV4Y2VlZHMgdGhlIGNvbnRhaW5lclxuICAgIC8vIDIuIEFzcGVjdCBtdXN0IGJlIGtlZXBlZFxuICAgIC8vIDMuIEdyYXBoIHNob3VsZCB0YWtlIHRoZSBzcGFjZSBhcyBtb3JlIGFzIHBvc3NpYmxlXG4gICAgLy8gRklYTUVcbiAgICAvLyBNYXJnaW4gaXMgbm90IGNvbnNpZGVyZWQsIGJlY2F1c2UgdGhlcmUgaXMgbm8gY2FzZSB0aGF0IGJvdGhcbiAgICAvLyB1c2luZyBtYXJnaW4gYW5kIGFzcGVjdCBzbyBmYXIuXG4gICAgaWYgKGlzTmFOKHdpZHRoKSAmJiBpc05hTihoZWlnaHQpKSB7XG4gICAgICBpZiAoYXNwZWN0ID4gY29udGFpbmVyV2lkdGggLyBjb250YWluZXJIZWlnaHQpIHtcbiAgICAgICAgd2lkdGggPSBjb250YWluZXJXaWR0aCAqIDAuODtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGhlaWdodCA9IGNvbnRhaW5lckhlaWdodCAqIDAuODtcbiAgICAgIH1cbiAgICB9IC8vIENhbGN1bGF0ZSB3aWR0aCBvciBoZWlnaHQgd2l0aCBnaXZlbiBhc3BlY3RcblxuXG4gICAgaWYgKGlzTmFOKHdpZHRoKSkge1xuICAgICAgd2lkdGggPSBhc3BlY3QgKiBoZWlnaHQ7XG4gICAgfVxuXG4gICAgaWYgKGlzTmFOKGhlaWdodCkpIHtcbiAgICAgIGhlaWdodCA9IHdpZHRoIC8gYXNwZWN0O1xuICAgIH1cbiAgfSAvLyBJZiBsZWZ0IGlzIG5vdCBzcGVjaWZpZWQsIGNhbGN1bGF0ZSBsZWZ0IGZyb20gcmlnaHQgYW5kIHdpZHRoXG5cblxuICBpZiAoaXNOYU4obGVmdCkpIHtcbiAgICBsZWZ0ID0gY29udGFpbmVyV2lkdGggLSByaWdodCAtIHdpZHRoIC0gaG9yaXpvbnRhbE1hcmdpbjtcbiAgfVxuXG4gIGlmIChpc05hTih0b3ApKSB7XG4gICAgdG9wID0gY29udGFpbmVySGVpZ2h0IC0gYm90dG9tIC0gaGVpZ2h0IC0gdmVydGljYWxNYXJnaW47XG4gIH0gLy8gQWxpZ24gbGVmdCBhbmQgdG9wXG5cblxuICBzd2l0Y2ggKHBvc2l0aW9uSW5mby5sZWZ0IHx8IHBvc2l0aW9uSW5mby5yaWdodCkge1xuICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgICBsZWZ0ID0gY29udGFpbmVyV2lkdGggLyAyIC0gd2lkdGggLyAyIC0gbWFyZ2luWzNdO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdyaWdodCc6XG4gICAgICBsZWZ0ID0gY29udGFpbmVyV2lkdGggLSB3aWR0aCAtIGhvcml6b250YWxNYXJnaW47XG4gICAgICBicmVhaztcbiAgfVxuXG4gIHN3aXRjaCAocG9zaXRpb25JbmZvLnRvcCB8fCBwb3NpdGlvbkluZm8uYm90dG9tKSB7XG4gICAgY2FzZSAnbWlkZGxlJzpcbiAgICBjYXNlICdjZW50ZXInOlxuICAgICAgdG9wID0gY29udGFpbmVySGVpZ2h0IC8gMiAtIGhlaWdodCAvIDIgLSBtYXJnaW5bMF07XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2JvdHRvbSc6XG4gICAgICB0b3AgPSBjb250YWluZXJIZWlnaHQgLSBoZWlnaHQgLSB2ZXJ0aWNhbE1hcmdpbjtcbiAgICAgIGJyZWFrO1xuICB9IC8vIElmIHNvbWV0aGluZyBpcyB3cm9uZyBhbmQgbGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0IGFyZSBjYWxjdWxhdGVkIGFzIE5hTlxuXG5cbiAgbGVmdCA9IGxlZnQgfHwgMDtcbiAgdG9wID0gdG9wIHx8IDA7XG5cbiAgaWYgKGlzTmFOKHdpZHRoKSkge1xuICAgIC8vIFdpZHRoIG1heSBiZSBOYU4gaWYgb25seSBvbmUgdmFsdWUgaXMgZ2l2ZW4gZXhjZXB0IHdpZHRoXG4gICAgd2lkdGggPSBjb250YWluZXJXaWR0aCAtIGhvcml6b250YWxNYXJnaW4gLSBsZWZ0IC0gKHJpZ2h0IHx8IDApO1xuICB9XG5cbiAgaWYgKGlzTmFOKGhlaWdodCkpIHtcbiAgICAvLyBIZWlnaHQgbWF5IGJlIE5hTiBpZiBvbmx5IG9uZSB2YWx1ZSBpcyBnaXZlbiBleGNlcHQgaGVpZ2h0XG4gICAgaGVpZ2h0ID0gY29udGFpbmVySGVpZ2h0IC0gdmVydGljYWxNYXJnaW4gLSB0b3AgLSAoYm90dG9tIHx8IDApO1xuICB9XG5cbiAgdmFyIHJlY3QgPSBuZXcgQm91bmRpbmdSZWN0KGxlZnQgKyBtYXJnaW5bM10sIHRvcCArIG1hcmdpblswXSwgd2lkdGgsIGhlaWdodCk7XG4gIHJlY3QubWFyZ2luID0gbWFyZ2luO1xuICByZXR1cm4gcmVjdDtcbn1cbi8qKlxyXG4gKiBQb3NpdGlvbiBhIHpyIGVsZW1lbnQgaW4gdmlld3BvcnRcclxuICogIEdyb3VwIHBvc2l0aW9uIGlzIHNwZWNpZmllZCBieSBlaXRoZXJcclxuICogIHtsZWZ0LCB0b3B9LCB7cmlnaHQsIGJvdHRvbX1cclxuICogIElmIGFsbCBwcm9wZXJ0aWVzIGV4aXN0cywgcmlnaHQgYW5kIGJvdHRvbSB3aWxsIGJlIGlnb25yZWQuXHJcbiAqXHJcbiAqIExvZ2ljOlxyXG4gKiAgICAgMS4gU2NhbGUgKGFnYWluc3Qgb3JpZ2luIHBvaW50IGluIHBhcmVudCBjb29yZClcclxuICogICAgIDIuIFJvdGF0ZSAoYWdhaW5zdCBvcmlnaW4gcG9pbnQgaW4gcGFyZW50IGNvb3JkKVxyXG4gKiAgICAgMy4gVHJhbnNsYXRlICh3aXRoIGVsLnBvc2l0aW9uIGJ5IHRoaXMgbWV0aG9kKVxyXG4gKiBTbyB0aGlzIG1ldGhvZCBvbmx5IGZpeGVzIHRoZSBsYXN0IHN0ZXAgJ1RyYW5zbGF0ZScsIHdoaWNoIGRvZXMgbm90IGFmZmVjdFxyXG4gKiBzY2FsaW5nIGFuZCByb3RhdGluZy5cclxuICpcclxuICogSWYgYmUgY2FsbGVkIHJlcGVhdGVkbHkgd2l0aCB0aGUgc2FtZSBpbnB1dCBlbCwgdGhlIHNhbWUgcmVzdWx0IHdpbGwgYmUgZ290dGVuLlxyXG4gKlxyXG4gKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgbGF5b3V0IGhhcHBlbmVkLlxyXG4gKlxyXG4gKiBAcGFyYW0gZWwgU2hvdWxkIGhhdmUgYGdldEJvdW5kaW5nUmVjdGAgbWV0aG9kLlxyXG4gKiBAcGFyYW0gcG9zaXRpb25JbmZvXHJcbiAqIEBwYXJhbSBwb3NpdGlvbkluZm8ubGVmdFxyXG4gKiBAcGFyYW0gcG9zaXRpb25JbmZvLnRvcFxyXG4gKiBAcGFyYW0gcG9zaXRpb25JbmZvLnJpZ2h0XHJcbiAqIEBwYXJhbSBwb3NpdGlvbkluZm8uYm90dG9tXHJcbiAqIEBwYXJhbSBwb3NpdGlvbkluZm8ud2lkdGggT25seSBmb3Igb3B0LmJvdW5kaW5nTW9kZWw6ICdyYXcnXHJcbiAqIEBwYXJhbSBwb3NpdGlvbkluZm8uaGVpZ2h0IE9ubHkgZm9yIG9wdC5ib3VuZGluZ01vZGVsOiAncmF3J1xyXG4gKiBAcGFyYW0gY29udGFpbmVyUmVjdFxyXG4gKiBAcGFyYW0gbWFyZ2luXHJcbiAqIEBwYXJhbSBvcHRcclxuICogQHBhcmFtIG9wdC5odiBPbmx5IGhvcml6b250YWwgb3Igb25seSB2ZXJ0aWNhbC4gRGVmYXVsdCB0byBiZSBbMSwgMV1cclxuICogQHBhcmFtIG9wdC5ib3VuZGluZ01vZGVcclxuICogICAgICAgIFNwZWNpZnkgaG93IHRvIGNhbGN1bGF0ZSBib3VuZGluZ1JlY3Qgd2hlbiBsb2NhdGluZy5cclxuICogICAgICAgICdhbGwnOiBQb3NpdGlvbiB0aGUgYm91bmRpbmdSZWN0IHRoYXQgaXMgdHJhbnNmb3JtZWQgYW5kIHVpb25lZFxyXG4gKiAgICAgICAgICAgICAgIGJvdGggaXRzZWxmIGFuZCBpdHMgZGVzY2VuZGFudHMuXHJcbiAqICAgICAgICAgICAgICAgVGhpcyBtb2RlIHNpbXBsaWVzIGNvbmZpbmUgdGhlIGVsZW1lbnRzIGluIHRoZSBib3VuZGluZ1xyXG4gKiAgICAgICAgICAgICAgIG9mIHRoZWlyIGNvbnRhaW5lciAoZS5nLiwgdXNpbmcgJ3JpZ2h0OiAwJykuXHJcbiAqICAgICAgICAncmF3JzogUG9zaXRpb24gdGhlIGJvdW5kaW5nUmVjdCB0aGF0IGlzIG5vdCB0cmFuc2Zvcm1lZCBhbmQgb25seSBpdHNlbGYuXHJcbiAqICAgICAgICAgICAgICAgVGhpcyBtb2RlIGlzIHVzZWZ1bCB3aGVuIHlvdSB3YW50IGEgZWxlbWVudCBjYW4gb3ZlcmZsb3cgaXRzXHJcbiAqICAgICAgICAgICAgICAgY29udGFpbmVyLiAoQ29uc2lkZXIgYSByb3RhdGVkIGNpcmNsZSBuZWVkcyB0byBiZSBsb2NhdGVkIGluIGEgY29ybmVyLilcclxuICogICAgICAgICAgICAgICBJbiB0aGlzIG1vZGUgcG9zaXRpb25JbmZvLndpZHRoL2hlaWdodCBjYW4gb25seSBiZSBudW1iZXIuXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcG9zaXRpb25FbGVtZW50KGVsLCBwb3NpdGlvbkluZm8sIGNvbnRhaW5lclJlY3QsIG1hcmdpbiwgb3B0LCBvdXQpIHtcbiAgdmFyIGggPSAhb3B0IHx8ICFvcHQuaHYgfHwgb3B0Lmh2WzBdO1xuICB2YXIgdiA9ICFvcHQgfHwgIW9wdC5odiB8fCBvcHQuaHZbMV07XG4gIHZhciBib3VuZGluZ01vZGUgPSBvcHQgJiYgb3B0LmJvdW5kaW5nTW9kZSB8fCAnYWxsJztcbiAgb3V0ID0gb3V0IHx8IGVsO1xuICBvdXQueCA9IGVsLng7XG4gIG91dC55ID0gZWwueTtcblxuICBpZiAoIWggJiYgIXYpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgcmVjdDtcblxuICBpZiAoYm91bmRpbmdNb2RlID09PSAncmF3Jykge1xuICAgIHJlY3QgPSBlbC50eXBlID09PSAnZ3JvdXAnID8gbmV3IEJvdW5kaW5nUmVjdCgwLCAwLCArcG9zaXRpb25JbmZvLndpZHRoIHx8IDAsICtwb3NpdGlvbkluZm8uaGVpZ2h0IHx8IDApIDogZWwuZ2V0Qm91bmRpbmdSZWN0KCk7XG4gIH0gZWxzZSB7XG4gICAgcmVjdCA9IGVsLmdldEJvdW5kaW5nUmVjdCgpO1xuXG4gICAgaWYgKGVsLm5lZWRMb2NhbFRyYW5zZm9ybSgpKSB7XG4gICAgICB2YXIgdHJhbnNmb3JtID0gZWwuZ2V0TG9jYWxUcmFuc2Zvcm0oKTsgLy8gTm90aWNlOiByYXcgcmVjdCBtYXkgYmUgaW5uZXIgb2JqZWN0IG9mIGVsLFxuICAgICAgLy8gd2hpY2ggc2hvdWxkIG5vdCBiZSBtb2RpZmllZC5cblxuICAgICAgcmVjdCA9IHJlY3QuY2xvbmUoKTtcbiAgICAgIHJlY3QuYXBwbHlUcmFuc2Zvcm0odHJhbnNmb3JtKTtcbiAgICB9XG4gIH0gLy8gVGhlIHJlYWwgd2lkdGggYW5kIGhlaWdodCBjYW4gbm90IGJlIHNwZWNpZmllZCBidXQgY2FsY3VsYXRlZCBieSB0aGUgZ2l2ZW4gZWwuXG5cblxuICB2YXIgbGF5b3V0UmVjdCA9IGdldExheW91dFJlY3QoenJVdGlsLmRlZmF1bHRzKHtcbiAgICB3aWR0aDogcmVjdC53aWR0aCxcbiAgICBoZWlnaHQ6IHJlY3QuaGVpZ2h0XG4gIH0sIHBvc2l0aW9uSW5mbyksIGNvbnRhaW5lclJlY3QsIG1hcmdpbik7IC8vIEJlY2F1c2UgJ3RyYW5sYXRlJyBpcyB0aGUgbGFzdCBzdGVwIGluIHRyYW5zZm9ybVxuICAvLyAoc2VlIHpyZW5kZXIvY29yZS9UcmFuc2Zvcm1hYmxlI2dldExvY2FsVHJhbnNmb3JtKSxcbiAgLy8gd2UgY2FuIGp1c3Qgb25seSBtb2RpZnkgZWwucG9zaXRpb24gdG8gZ2V0IGZpbmFsIHJlc3VsdC5cblxuICB2YXIgZHggPSBoID8gbGF5b3V0UmVjdC54IC0gcmVjdC54IDogMDtcbiAgdmFyIGR5ID0gdiA/IGxheW91dFJlY3QueSAtIHJlY3QueSA6IDA7XG5cbiAgaWYgKGJvdW5kaW5nTW9kZSA9PT0gJ3JhdycpIHtcbiAgICBvdXQueCA9IGR4O1xuICAgIG91dC55ID0gZHk7XG4gIH0gZWxzZSB7XG4gICAgb3V0LnggKz0gZHg7XG4gICAgb3V0LnkgKz0gZHk7XG4gIH1cblxuICBpZiAob3V0ID09PSBlbCkge1xuICAgIGVsLm1hcmtSZWRyYXcoKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuLyoqXHJcbiAqIEBwYXJhbSBvcHRpb24gQ29udGFpbnMgc29tZSBvZiB0aGUgcHJvcGVydGllcyBpbiBIVl9OQU1FUy5cclxuICogQHBhcmFtIGh2SWR4IDA6IGhvcml6b250YWw7IDE6IHZlcnRpY2FsLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNpemVDYWxjdWxhYmxlKG9wdGlvbiwgaHZJZHgpIHtcbiAgcmV0dXJuIG9wdGlvbltIVl9OQU1FU1todklkeF1bMF1dICE9IG51bGwgfHwgb3B0aW9uW0hWX05BTUVTW2h2SWR4XVsxXV0gIT0gbnVsbCAmJiBvcHRpb25bSFZfTkFNRVNbaHZJZHhdWzJdXSAhPSBudWxsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoTGF5b3V0TW9kZShpbnMpIHtcbiAgdmFyIGxheW91dE1vZGUgPSBpbnMubGF5b3V0TW9kZSB8fCBpbnMuY29uc3RydWN0b3IubGF5b3V0TW9kZTtcbiAgcmV0dXJuIHpyVXRpbC5pc09iamVjdChsYXlvdXRNb2RlKSA/IGxheW91dE1vZGUgOiBsYXlvdXRNb2RlID8ge1xuICAgIHR5cGU6IGxheW91dE1vZGVcbiAgfSA6IG51bGw7XG59XG4vKipcclxuICogQ29uc2lkZXIgQ2FzZTpcclxuICogV2hlbiBkZWZhdWx0IG9wdGlvbiBoYXMge2xlZnQ6IDAsIHdpZHRoOiAxMDB9LCBhbmQgd2Ugc2V0IHtyaWdodDogMH1cclxuICogdGhyb3VnaCBzZXRPcHRpb24gb3IgbWVkaWEgcXVlcnksIHVzaW5nIG5vcm1hbCB6clV0aWwubWVyZ2Ugd2lsbCBjYXVzZVxyXG4gKiB7cmlnaHQ6IDB9IGRvZXMgbm90IHRha2UgZWZmZWN0LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBDb21wb25lbnRNb2RlbC5leHRlbmQoe1xyXG4gKiAgICAgaW5pdDogZnVuY3Rpb24gKCkge1xyXG4gKiAgICAgICAgIC4uLlxyXG4gKiAgICAgICAgIGxldCBpbnB1dFBvc2l0aW9uUGFyYW1zID0gbGF5b3V0LmdldExheW91dFBhcmFtcyhvcHRpb24pO1xyXG4gKiAgICAgICAgIHRoaXMubWVyZ2VPcHRpb24oaW5wdXRQb3NpdGlvblBhcmFtcyk7XHJcbiAqICAgICB9LFxyXG4gKiAgICAgbWVyZ2VPcHRpb246IGZ1bmN0aW9uIChuZXdPcHRpb24pIHtcclxuICogICAgICAgICBuZXdPcHRpb24gJiYgenJVdGlsLm1lcmdlKHRoaXNPcHRpb24sIG5ld09wdGlvbiwgdHJ1ZSk7XHJcbiAqICAgICAgICAgbGF5b3V0Lm1lcmdlTGF5b3V0UGFyYW0odGhpc09wdGlvbiwgbmV3T3B0aW9uKTtcclxuICogICAgIH1cclxuICogfSk7XHJcbiAqXHJcbiAqIEBwYXJhbSB0YXJnZXRPcHRpb25cclxuICogQHBhcmFtIG5ld09wdGlvblxyXG4gKiBAcGFyYW0gb3B0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VMYXlvdXRQYXJhbSh0YXJnZXRPcHRpb24sIG5ld09wdGlvbiwgb3B0KSB7XG4gIHZhciBpZ25vcmVTaXplID0gb3B0ICYmIG9wdC5pZ25vcmVTaXplO1xuICAhenJVdGlsLmlzQXJyYXkoaWdub3JlU2l6ZSkgJiYgKGlnbm9yZVNpemUgPSBbaWdub3JlU2l6ZSwgaWdub3JlU2l6ZV0pO1xuICB2YXIgaFJlc3VsdCA9IG1lcmdlKEhWX05BTUVTWzBdLCAwKTtcbiAgdmFyIHZSZXN1bHQgPSBtZXJnZShIVl9OQU1FU1sxXSwgMSk7XG4gIGNvcHkoSFZfTkFNRVNbMF0sIHRhcmdldE9wdGlvbiwgaFJlc3VsdCk7XG4gIGNvcHkoSFZfTkFNRVNbMV0sIHRhcmdldE9wdGlvbiwgdlJlc3VsdCk7XG5cbiAgZnVuY3Rpb24gbWVyZ2UobmFtZXMsIGh2SWR4KSB7XG4gICAgdmFyIG5ld1BhcmFtcyA9IHt9O1xuICAgIHZhciBuZXdWYWx1ZUNvdW50ID0gMDtcbiAgICB2YXIgbWVyZ2VkID0ge307XG4gICAgdmFyIG1lcmdlZFZhbHVlQ291bnQgPSAwO1xuICAgIHZhciBlbm91Z2hQYXJhbU51bWJlciA9IDI7XG4gICAgZWFjaChuYW1lcywgZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIG1lcmdlZFtuYW1lXSA9IHRhcmdldE9wdGlvbltuYW1lXTtcbiAgICB9KTtcbiAgICBlYWNoKG5hbWVzLCBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgLy8gQ29uc2lkZXIgY2FzZTogbmV3T3B0aW9uLndpZHRoIGlzIG51bGwsIHdoaWNoIGlzXG4gICAgICAvLyBzZXQgYnkgdXNlciBmb3IgcmVtb3Zpbmcgd2lkdGggc2V0dGluZy5cbiAgICAgIGhhc1Byb3AobmV3T3B0aW9uLCBuYW1lKSAmJiAobmV3UGFyYW1zW25hbWVdID0gbWVyZ2VkW25hbWVdID0gbmV3T3B0aW9uW25hbWVdKTtcbiAgICAgIGhhc1ZhbHVlKG5ld1BhcmFtcywgbmFtZSkgJiYgbmV3VmFsdWVDb3VudCsrO1xuICAgICAgaGFzVmFsdWUobWVyZ2VkLCBuYW1lKSAmJiBtZXJnZWRWYWx1ZUNvdW50Kys7XG4gICAgfSk7XG5cbiAgICBpZiAoaWdub3JlU2l6ZVtodklkeF0pIHtcbiAgICAgIC8vIE9ubHkgb25lIG9mIGxlZnQvcmlnaHQgaXMgcHJlbWl0dGVkIHRvIGV4aXN0LlxuICAgICAgaWYgKGhhc1ZhbHVlKG5ld09wdGlvbiwgbmFtZXNbMV0pKSB7XG4gICAgICAgIG1lcmdlZFtuYW1lc1syXV0gPSBudWxsO1xuICAgICAgfSBlbHNlIGlmIChoYXNWYWx1ZShuZXdPcHRpb24sIG5hbWVzWzJdKSkge1xuICAgICAgICBtZXJnZWRbbmFtZXNbMV1dID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG1lcmdlZDtcbiAgICB9IC8vIENhc2U6IG5ld09wdGlvbjoge3dpZHRoOiAuLi4sIHJpZ2h0OiAuLi59LFxuICAgIC8vIG9yIHRhcmdldE9wdGlvbjoge3JpZ2h0OiAuLi59IGFuZCBuZXdPcHRpb246IHt3aWR0aDogLi4ufSxcbiAgICAvLyBUaGVyZSBpcyBubyBjb25mbGljdCB3aGVuIG1lcmdlZCBvbmx5IGhhcyBwYXJhbXMgY291bnRcbiAgICAvLyBsaXR0bGUgdGhhbiBlbm91Z2hQYXJhbU51bWJlci5cblxuXG4gICAgaWYgKG1lcmdlZFZhbHVlQ291bnQgPT09IGVub3VnaFBhcmFtTnVtYmVyIHx8ICFuZXdWYWx1ZUNvdW50KSB7XG4gICAgICByZXR1cm4gbWVyZ2VkO1xuICAgIH0gLy8gQ2FzZTogbmV3T3B0aW9uOiB7d2lkdGg6IC4uLiwgcmlnaHQ6IC4uLn0sXG4gICAgLy8gVGhhbiB3ZSBjYW4gbWFrZSBzdXJlIHVzZXIgb25seSB3YW50IHRob3NlIHR3bywgYW5kIGlnbm9yZVxuICAgIC8vIGFsbCBvcmlnaW4gcGFyYW1zIGluIHRhcmdldE9wdGlvbi5cbiAgICBlbHNlIGlmIChuZXdWYWx1ZUNvdW50ID49IGVub3VnaFBhcmFtTnVtYmVyKSB7XG4gICAgICAgIHJldHVybiBuZXdQYXJhbXM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBDaG9zZSBhbm90aGVyIHBhcmFtIGZyb20gdGFyZ2V0T3B0aW9uIGJ5IHByaW9yaXR5LlxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIG5hbWVfMSA9IG5hbWVzW2ldO1xuXG4gICAgICAgICAgaWYgKCFoYXNQcm9wKG5ld1BhcmFtcywgbmFtZV8xKSAmJiBoYXNQcm9wKHRhcmdldE9wdGlvbiwgbmFtZV8xKSkge1xuICAgICAgICAgICAgbmV3UGFyYW1zW25hbWVfMV0gPSB0YXJnZXRPcHRpb25bbmFtZV8xXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXdQYXJhbXM7XG4gICAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoYXNQcm9wKG9iaiwgbmFtZSkge1xuICAgIHJldHVybiBvYmouaGFzT3duUHJvcGVydHkobmFtZSk7XG4gIH1cblxuICBmdW5jdGlvbiBoYXNWYWx1ZShvYmosIG5hbWUpIHtcbiAgICByZXR1cm4gb2JqW25hbWVdICE9IG51bGwgJiYgb2JqW25hbWVdICE9PSAnYXV0byc7XG4gIH1cblxuICBmdW5jdGlvbiBjb3B5KG5hbWVzLCB0YXJnZXQsIHNvdXJjZSkge1xuICAgIGVhY2gobmFtZXMsIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICB0YXJnZXRbbmFtZV0gPSBzb3VyY2VbbmFtZV07XG4gICAgfSk7XG4gIH1cbn1cbi8qKlxyXG4gKiBSZXRyaWV2ZSAnbGVmdCcsICdyaWdodCcsICd0b3AnLCAnYm90dG9tJywgJ3dpZHRoJywgJ2hlaWdodCcgZnJvbSBvYmplY3QuXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGF5b3V0UGFyYW1zKHNvdXJjZSkge1xuICByZXR1cm4gY29weUxheW91dFBhcmFtcyh7fSwgc291cmNlKTtcbn1cbi8qKlxyXG4gKiBSZXRyaWV2ZSAnbGVmdCcsICdyaWdodCcsICd0b3AnLCAnYm90dG9tJywgJ3dpZHRoJywgJ2hlaWdodCcgZnJvbSBvYmplY3QuXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2VcclxuICogQHJldHVybiB7T2JqZWN0fSBSZXN1bHQgY29udGFpbnMgdGhvc2UgcHJvcHMuXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY29weUxheW91dFBhcmFtcyh0YXJnZXQsIHNvdXJjZSkge1xuICBzb3VyY2UgJiYgdGFyZ2V0ICYmIGVhY2goTE9DQVRJT05fUEFSQU1TLCBmdW5jdGlvbiAobmFtZSkge1xuICAgIHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiAodGFyZ2V0W25hbWVdID0gc291cmNlW25hbWVdKTtcbiAgfSk7XG4gIHJldHVybiB0YXJnZXQ7XG59IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCAqIGFzIHpyVXRpbCBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0IE1vZGVsIGZyb20gJy4vTW9kZWwuanMnO1xuaW1wb3J0ICogYXMgY29tcG9uZW50VXRpbCBmcm9tICcuLi91dGlsL2NvbXBvbmVudC5qcyc7XG5pbXBvcnQgeyBlbmFibGVDbGFzc01hbmFnZW1lbnQsIHBhcnNlQ2xhc3NUeXBlLCBpc0V4dGVuZGVkQ2xhc3MsIG1vdW50RXh0ZW5kIH0gZnJvbSAnLi4vdXRpbC9jbGF6ei5qcyc7XG5pbXBvcnQgeyBtYWtlSW5uZXIsIHF1ZXJ5UmVmZXJyaW5nQ29tcG9uZW50cyB9IGZyb20gJy4uL3V0aWwvbW9kZWwuanMnO1xuaW1wb3J0ICogYXMgbGF5b3V0IGZyb20gJy4uL3V0aWwvbGF5b3V0LmpzJztcbnZhciBpbm5lciA9IG1ha2VJbm5lcigpO1xuXG52YXIgQ29tcG9uZW50TW9kZWwgPVxuLyoqIEBjbGFzcyAqL1xuZnVuY3Rpb24gKF9zdXBlcikge1xuICBfX2V4dGVuZHMoQ29tcG9uZW50TW9kZWwsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gQ29tcG9uZW50TW9kZWwob3B0aW9uLCBwYXJlbnRNb2RlbCwgZWNNb2RlbCkge1xuICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG9wdGlvbiwgcGFyZW50TW9kZWwsIGVjTW9kZWwpIHx8IHRoaXM7XG5cbiAgICBfdGhpcy51aWQgPSBjb21wb25lbnRVdGlsLmdldFVJRCgnZWNfY3B0X21vZGVsJyk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgQ29tcG9uZW50TW9kZWwucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAob3B0aW9uLCBwYXJlbnRNb2RlbCwgZWNNb2RlbCkge1xuICAgIHRoaXMubWVyZ2VEZWZhdWx0QW5kVGhlbWUob3B0aW9uLCBlY01vZGVsKTtcbiAgfTtcblxuICBDb21wb25lbnRNb2RlbC5wcm90b3R5cGUubWVyZ2VEZWZhdWx0QW5kVGhlbWUgPSBmdW5jdGlvbiAob3B0aW9uLCBlY01vZGVsKSB7XG4gICAgdmFyIGxheW91dE1vZGUgPSBsYXlvdXQuZmV0Y2hMYXlvdXRNb2RlKHRoaXMpO1xuICAgIHZhciBpbnB1dFBvc2l0aW9uUGFyYW1zID0gbGF5b3V0TW9kZSA/IGxheW91dC5nZXRMYXlvdXRQYXJhbXMob3B0aW9uKSA6IHt9O1xuICAgIHZhciB0aGVtZU1vZGVsID0gZWNNb2RlbC5nZXRUaGVtZSgpO1xuICAgIHpyVXRpbC5tZXJnZShvcHRpb24sIHRoZW1lTW9kZWwuZ2V0KHRoaXMubWFpblR5cGUpKTtcbiAgICB6clV0aWwubWVyZ2Uob3B0aW9uLCB0aGlzLmdldERlZmF1bHRPcHRpb24oKSk7XG5cbiAgICBpZiAobGF5b3V0TW9kZSkge1xuICAgICAgbGF5b3V0Lm1lcmdlTGF5b3V0UGFyYW0ob3B0aW9uLCBpbnB1dFBvc2l0aW9uUGFyYW1zLCBsYXlvdXRNb2RlKTtcbiAgICB9XG4gIH07XG5cbiAgQ29tcG9uZW50TW9kZWwucHJvdG90eXBlLm1lcmdlT3B0aW9uID0gZnVuY3Rpb24gKG9wdGlvbiwgZWNNb2RlbCkge1xuICAgIHpyVXRpbC5tZXJnZSh0aGlzLm9wdGlvbiwgb3B0aW9uLCB0cnVlKTtcbiAgICB2YXIgbGF5b3V0TW9kZSA9IGxheW91dC5mZXRjaExheW91dE1vZGUodGhpcyk7XG5cbiAgICBpZiAobGF5b3V0TW9kZSkge1xuICAgICAgbGF5b3V0Lm1lcmdlTGF5b3V0UGFyYW0odGhpcy5vcHRpb24sIG9wdGlvbiwgbGF5b3V0TW9kZSk7XG4gICAgfVxuICB9O1xuICAvKipcclxuICAgKiBDYWxsZWQgaW1tZWRpYXRlbHkgYWZ0ZXIgYGluaXRgIG9yIGBtZXJnZU9wdGlvbmAgb2YgdGhpcyBpbnN0YW5jZSBjYWxsZWQuXHJcbiAgICovXG5cblxuICBDb21wb25lbnRNb2RlbC5wcm90b3R5cGUub3B0aW9uVXBkYXRlZCA9IGZ1bmN0aW9uIChuZXdDcHRPcHRpb24sIGlzSW5pdCkge307XG4gIC8qKlxyXG4gICAqIFtIb3cgdG8gZGVjbGFyZSBkZWZhdWx0T3B0aW9uXTpcclxuICAgKlxyXG4gICAqIChBKSBJZiB1c2luZyBjbGFzcyBkZWNsYXJhdGlvbiBpbiB0eXBlc2NyaXB0IChzaW5jZSBlY2hhcnRzIDUpOlxyXG4gICAqIGBgYHRzXHJcbiAgICogaW1wb3J0IHtDb21wb25lbnRPcHRpb259IGZyb20gJy4uL21vZGVsL29wdGlvbi5qcyc7XHJcbiAgICogZXhwb3J0IGludGVyZmFjZSBYeHhPcHRpb24gZXh0ZW5kcyBDb21wb25lbnRPcHRpb24ge1xyXG4gICAqICAgICBhYWE6IG51bWJlclxyXG4gICAqIH1cclxuICAgKiBleHBvcnQgY2xhc3MgWHh4TW9kZWwgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAqICAgICBzdGF0aWMgdHlwZSA9ICd4eHgnO1xyXG4gICAqICAgICBzdGF0aWMgZGVmYXVsdE9wdGlvbjogWHh4T3B0aW9uID0ge1xyXG4gICAqICAgICAgICAgYWFhOiAxMjNcclxuICAgKiAgICAgfVxyXG4gICAqIH1cclxuICAgKiBDb21wb25lbnQucmVnaXN0ZXJDbGFzcyhYeHhNb2RlbCk7XHJcbiAgICogYGBgXHJcbiAgICogYGBgdHNcclxuICAgKiBpbXBvcnQge2luaGVyaXREZWZhdWx0T3B0aW9ufSBmcm9tICcuLi91dGlsL2NvbXBvbmVudC5qcyc7XHJcbiAgICogaW1wb3J0IHtYeHhNb2RlbCwgWHh4T3B0aW9ufSBmcm9tICcuL1h4eE1vZGVsLmpzJztcclxuICAgKiBleHBvcnQgaW50ZXJmYWNlIFh4eFN1Yk9wdGlvbiBleHRlbmRzIFh4eE9wdGlvbiB7XHJcbiAgICogICAgIGJiYjogbnVtYmVyXHJcbiAgICogfVxyXG4gICAqIGNsYXNzIFh4eFN1Yk1vZGVsIGV4dGVuZHMgWHh4TW9kZWwge1xyXG4gICAqICAgICBzdGF0aWMgZGVmYXVsdE9wdGlvbjogWHh4U3ViT3B0aW9uID0gaW5oZXJpdERlZmF1bHRPcHRpb24oWHh4TW9kZWwuZGVmYXVsdE9wdGlvbiwge1xyXG4gICAqICAgICAgICAgYmJiOiA0NTZcclxuICAgKiAgICAgfSlcclxuICAgKiAgICAgZm4oKSB7XHJcbiAgICogICAgICAgICBsZXQgb3B0ID0gdGhpcy5nZXREZWZhdWx0T3B0aW9uKCk7XHJcbiAgICogICAgICAgICAvLyBvcHQgaXMge2FhYTogMTIzLCBiYmI6IDQ1Nn1cclxuICAgKiAgICAgfVxyXG4gICAqIH1cclxuICAgKiBgYGBcclxuICAgKlxyXG4gICAqIChCKSBJZiB1c2luZyBjbGFzcyBleHRlbmQgKHByZXZpb3VzIGFwcHJvYWNoIGluIGVjaGFydHMgMyAmIDQpOlxyXG4gICAqIGBgYGpzXHJcbiAgICogbGV0IFh4eENvbXBvbmVudCA9IENvbXBvbmVudC5leHRlbmQoe1xyXG4gICAqICAgICBkZWZhdWx0T3B0aW9uOiB7XHJcbiAgICogICAgICAgICB4eDogMTIzXHJcbiAgICogICAgIH1cclxuICAgKiB9KVxyXG4gICAqIGBgYFxyXG4gICAqIGBgYGpzXHJcbiAgICogbGV0IFh4eFN1YkNvbXBvbmVudCA9IFh4eENvbXBvbmVudC5leHRlbmQoe1xyXG4gICAqICAgICBkZWZhdWx0T3B0aW9uOiB7XHJcbiAgICogICAgICAgICB5eTogNDU2XHJcbiAgICogICAgIH0sXHJcbiAgICogICAgIGZuOiBmdW5jdGlvbiAoKSB7XHJcbiAgICogICAgICAgICBsZXQgb3B0ID0gdGhpcy5nZXREZWZhdWx0T3B0aW9uKCk7XHJcbiAgICogICAgICAgICAvLyBvcHQgaXMge3h4OiAxMjMsIHl5OiA0NTZ9XHJcbiAgICogICAgIH1cclxuICAgKiB9KVxyXG4gICAqIGBgYFxyXG4gICAqL1xuXG5cbiAgQ29tcG9uZW50TW9kZWwucHJvdG90eXBlLmdldERlZmF1bHRPcHRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yOyAvLyBJZiB1c2luZyBjbGFzcyBkZWNsYXJhdGlvbiwgaXQgaXMgZGlmZmVyZW50IHRvIHRyYXZlbCBzdXBlciBjbGFzc1xuICAgIC8vIGluIGxlZ2FjeSBlbnYgYW5kIGF1dG8gbWVyZ2UgZGVmYXVsdE9wdGlvbi4gU28gaWYgdXNpbmcgY2xhc3NcbiAgICAvLyBkZWNsYXJhdGlvbiwgZGVmYXVsdE9wdGlvbiBzaG91bGQgYmUgbWVyZ2VkIG1hbnVhbGx5LlxuXG4gICAgaWYgKCFpc0V4dGVuZGVkQ2xhc3MoY3RvcikpIHtcbiAgICAgIC8vIFdoZW4gdXNpbmcgdHMgY2xhc3MsIGRlZmF1bHRPcHRpb24gbXVzdCBiZSBkZWNsYXJlZCBhcyBzdGF0aWMuXG4gICAgICByZXR1cm4gY3Rvci5kZWZhdWx0T3B0aW9uO1xuICAgIH0gLy8gRklYTUU6IHJlbW92ZSB0aGlzIGFwcHJvYWNoP1xuXG5cbiAgICB2YXIgZmllbGRzID0gaW5uZXIodGhpcyk7XG5cbiAgICBpZiAoIWZpZWxkcy5kZWZhdWx0T3B0aW9uKSB7XG4gICAgICB2YXIgb3B0TGlzdCA9IFtdO1xuICAgICAgdmFyIGNseiA9IGN0b3I7XG5cbiAgICAgIHdoaWxlIChjbHopIHtcbiAgICAgICAgdmFyIG9wdCA9IGNsei5wcm90b3R5cGUuZGVmYXVsdE9wdGlvbjtcbiAgICAgICAgb3B0ICYmIG9wdExpc3QucHVzaChvcHQpO1xuICAgICAgICBjbHogPSBjbHouc3VwZXJDbGFzcztcbiAgICAgIH1cblxuICAgICAgdmFyIGRlZmF1bHRPcHRpb24gPSB7fTtcblxuICAgICAgZm9yICh2YXIgaSA9IG9wdExpc3QubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgZGVmYXVsdE9wdGlvbiA9IHpyVXRpbC5tZXJnZShkZWZhdWx0T3B0aW9uLCBvcHRMaXN0W2ldLCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgZmllbGRzLmRlZmF1bHRPcHRpb24gPSBkZWZhdWx0T3B0aW9uO1xuICAgIH1cblxuICAgIHJldHVybiBmaWVsZHMuZGVmYXVsdE9wdGlvbjtcbiAgfTtcbiAgLyoqXHJcbiAgICogTm90aWNlOiBhbHdheXMgZm9yY2UgdG8gaW5wdXQgcGFyYW0gYHVzZURlZmF1bHRgIGluIGNhc2UgdGhhdCBmb3JnZXQgdG8gY29uc2lkZXIgaXQuXHJcbiAgICogVGhlIHNhbWUgYmVoYXZpb3IgYXMgYG1vZGVsVXRpbC5wYXJzZUZpbmRlcmAuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gdXNlRGVmYXVsdCBJbiBtYW55IGNhc2VzIGxpa2Ugc2VyaWVzIHJlZmVyIGF4aXMgYW5kIGF4aXMgcmVmZXIgZ3JpZCxcclxuICAgKiAgICAgICAgSWYgYXhpcyBpbmRleCAvIGF4aXMgaWQgbm90IHNwZWNpZmllZCwgdXNlIHRoZSBmaXJzdCB0YXJnZXQgYXMgZGVmYXVsdC5cclxuICAgKiAgICAgICAgSW4gb3RoZXIgY2FzZXMgbGlrZSBkYXRhWm9vbSByZWZlciBheGlzLCBpZiBub3Qgc3BlY2lmaWVkLCBtZWFzbiBubyByZWZlci5cclxuICAgKi9cblxuXG4gIENvbXBvbmVudE1vZGVsLnByb3RvdHlwZS5nZXRSZWZlcnJpbmdDb21wb25lbnRzID0gZnVuY3Rpb24gKG1haW5UeXBlLCBvcHQpIHtcbiAgICB2YXIgaW5kZXhLZXkgPSBtYWluVHlwZSArICdJbmRleCc7XG4gICAgdmFyIGlkS2V5ID0gbWFpblR5cGUgKyAnSWQnO1xuICAgIHJldHVybiBxdWVyeVJlZmVycmluZ0NvbXBvbmVudHModGhpcy5lY01vZGVsLCBtYWluVHlwZSwge1xuICAgICAgaW5kZXg6IHRoaXMuZ2V0KGluZGV4S2V5LCB0cnVlKSxcbiAgICAgIGlkOiB0aGlzLmdldChpZEtleSwgdHJ1ZSlcbiAgICB9LCBvcHQpO1xuICB9O1xuXG4gIENvbXBvbmVudE1vZGVsLnByb3RvdHlwZS5nZXRCb3hMYXlvdXRQYXJhbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gQ29uc2lkZXIgaXRzZWxmIGhhdmluZyBib3ggbGF5b3V0IGNvbmZpZ3MuXG4gICAgdmFyIGJveExheW91dE1vZGVsID0gdGhpcztcbiAgICByZXR1cm4ge1xuICAgICAgbGVmdDogYm94TGF5b3V0TW9kZWwuZ2V0KCdsZWZ0JyksXG4gICAgICB0b3A6IGJveExheW91dE1vZGVsLmdldCgndG9wJyksXG4gICAgICByaWdodDogYm94TGF5b3V0TW9kZWwuZ2V0KCdyaWdodCcpLFxuICAgICAgYm90dG9tOiBib3hMYXlvdXRNb2RlbC5nZXQoJ2JvdHRvbScpLFxuICAgICAgd2lkdGg6IGJveExheW91dE1vZGVsLmdldCgnd2lkdGgnKSxcbiAgICAgIGhlaWdodDogYm94TGF5b3V0TW9kZWwuZ2V0KCdoZWlnaHQnKVxuICAgIH07XG4gIH07XG4gIC8qKlxyXG4gICAqIEdldCBrZXkgZm9yIHpsZXZlbC5cclxuICAgKiBJZiBkZXZlbG9wZXJzIGRvbid0IGNvbmZpZ3VyZSB6bGV2ZWwuIFdlIHdpbGwgYXNzaWduIHpsZXZlbCB0byBzZXJpZXMgYmFzZWQgb24gdGhlIGtleS5cclxuICAgKiBGb3IgZXhhbXBsZSwgbGluZXMgd2l0aCB0cmFpbCBlZmZlY3QgYW5kIHByb2dyZXNzaXZlIHNlcmllcyB3aWxsIGluIGFuIGluZGl2aWR1YWwgemxldmVsLlxyXG4gICAqL1xuXG5cbiAgQ29tcG9uZW50TW9kZWwucHJvdG90eXBlLmdldFpMZXZlbEtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJyc7XG4gIH07XG5cbiAgQ29tcG9uZW50TW9kZWwucHJvdG90eXBlLnNldFpMZXZlbCA9IGZ1bmN0aW9uICh6bGV2ZWwpIHtcbiAgICB0aGlzLm9wdGlvbi56bGV2ZWwgPSB6bGV2ZWw7XG4gIH07XG5cbiAgQ29tcG9uZW50TW9kZWwucHJvdG9Jbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBwcm90byA9IENvbXBvbmVudE1vZGVsLnByb3RvdHlwZTtcbiAgICBwcm90by50eXBlID0gJ2NvbXBvbmVudCc7XG4gICAgcHJvdG8uaWQgPSAnJztcbiAgICBwcm90by5uYW1lID0gJyc7XG4gICAgcHJvdG8ubWFpblR5cGUgPSAnJztcbiAgICBwcm90by5zdWJUeXBlID0gJyc7XG4gICAgcHJvdG8uY29tcG9uZW50SW5kZXggPSAwO1xuICB9KCk7XG5cbiAgcmV0dXJuIENvbXBvbmVudE1vZGVsO1xufShNb2RlbCk7XG5cbm1vdW50RXh0ZW5kKENvbXBvbmVudE1vZGVsLCBNb2RlbCk7XG5lbmFibGVDbGFzc01hbmFnZW1lbnQoQ29tcG9uZW50TW9kZWwpO1xuY29tcG9uZW50VXRpbC5lbmFibGVTdWJUeXBlRGVmYXVsdGVyKENvbXBvbmVudE1vZGVsKTtcbmNvbXBvbmVudFV0aWwuZW5hYmxlVG9wb2xvZ2ljYWxUcmF2ZWwoQ29tcG9uZW50TW9kZWwsIGdldERlcGVuZGVuY2llcyk7XG5cbmZ1bmN0aW9uIGdldERlcGVuZGVuY2llcyhjb21wb25lbnRUeXBlKSB7XG4gIHZhciBkZXBzID0gW107XG4gIHpyVXRpbC5lYWNoKENvbXBvbmVudE1vZGVsLmdldENsYXNzZXNCeU1haW5UeXBlKGNvbXBvbmVudFR5cGUpLCBmdW5jdGlvbiAoY2x6KSB7XG4gICAgZGVwcyA9IGRlcHMuY29uY2F0KGNsei5kZXBlbmRlbmNpZXMgfHwgY2x6LnByb3RvdHlwZS5kZXBlbmRlbmNpZXMgfHwgW10pO1xuICB9KTsgLy8gRW5zdXJlIG1haW4gdHlwZS5cblxuICBkZXBzID0genJVdGlsLm1hcChkZXBzLCBmdW5jdGlvbiAodHlwZSkge1xuICAgIHJldHVybiBwYXJzZUNsYXNzVHlwZSh0eXBlKS5tYWluO1xuICB9KTsgLy8gSGFjayBkYXRhc2V0IGZvciBjb252ZW5pZW5jZS5cblxuICBpZiAoY29tcG9uZW50VHlwZSAhPT0gJ2RhdGFzZXQnICYmIHpyVXRpbC5pbmRleE9mKGRlcHMsICdkYXRhc2V0JykgPD0gMCkge1xuICAgIGRlcHMudW5zaGlmdCgnZGF0YXNldCcpO1xuICB9XG5cbiAgcmV0dXJuIGRlcHM7XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvbXBvbmVudE1vZGVsOyIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xudmFyIHBsYXRmb3JtID0gJyc7IC8vIE5hdmlnYXRvciBub3QgZXhpc3RzIGluIG5vZGVcblxuaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnKSB7XG4gIC8qIGdsb2JhbCBuYXZpZ2F0b3IgKi9cbiAgcGxhdGZvcm0gPSBuYXZpZ2F0b3IucGxhdGZvcm0gfHwgJyc7XG59XG5cbnZhciBkZWNhbENvbG9yID0gJ3JnYmEoMCwgMCwgMCwgMC4yKSc7XG5leHBvcnQgZGVmYXVsdCB7XG4gIGRhcmtNb2RlOiAnYXV0bycsXG4gIC8vIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMCwwLDAsMCknLFxuICBjb2xvckJ5OiAnc2VyaWVzJyxcbiAgY29sb3I6IFsnIzU0NzBjNicsICcjOTFjYzc1JywgJyNmYWM4NTgnLCAnI2VlNjY2NicsICcjNzNjMGRlJywgJyMzYmEyNzInLCAnI2ZjODQ1MicsICcjOWE2MGI0JywgJyNlYTdjY2MnXSxcbiAgZ3JhZGllbnRDb2xvcjogWycjZjZlZmE2JywgJyNkODgyNzMnLCAnI2JmNDQ0YyddLFxuICBhcmlhOiB7XG4gICAgZGVjYWw6IHtcbiAgICAgIGRlY2FsczogW3tcbiAgICAgICAgY29sb3I6IGRlY2FsQ29sb3IsXG4gICAgICAgIGRhc2hBcnJheVg6IFsxLCAwXSxcbiAgICAgICAgZGFzaEFycmF5WTogWzIsIDVdLFxuICAgICAgICBzeW1ib2xTaXplOiAxLFxuICAgICAgICByb3RhdGlvbjogTWF0aC5QSSAvIDZcbiAgICAgIH0sIHtcbiAgICAgICAgY29sb3I6IGRlY2FsQ29sb3IsXG4gICAgICAgIHN5bWJvbDogJ2NpcmNsZScsXG4gICAgICAgIGRhc2hBcnJheVg6IFtbOCwgOF0sIFswLCA4LCA4LCAwXV0sXG4gICAgICAgIGRhc2hBcnJheVk6IFs2LCAwXSxcbiAgICAgICAgc3ltYm9sU2l6ZTogMC44XG4gICAgICB9LCB7XG4gICAgICAgIGNvbG9yOiBkZWNhbENvbG9yLFxuICAgICAgICBkYXNoQXJyYXlYOiBbMSwgMF0sXG4gICAgICAgIGRhc2hBcnJheVk6IFs0LCAzXSxcbiAgICAgICAgcm90YXRpb246IC1NYXRoLlBJIC8gNFxuICAgICAgfSwge1xuICAgICAgICBjb2xvcjogZGVjYWxDb2xvcixcbiAgICAgICAgZGFzaEFycmF5WDogW1s2LCA2XSwgWzAsIDYsIDYsIDBdXSxcbiAgICAgICAgZGFzaEFycmF5WTogWzYsIDBdXG4gICAgICB9LCB7XG4gICAgICAgIGNvbG9yOiBkZWNhbENvbG9yLFxuICAgICAgICBkYXNoQXJyYXlYOiBbWzEsIDBdLCBbMSwgNl1dLFxuICAgICAgICBkYXNoQXJyYXlZOiBbMSwgMCwgNiwgMF0sXG4gICAgICAgIHJvdGF0aW9uOiBNYXRoLlBJIC8gNFxuICAgICAgfSwge1xuICAgICAgICBjb2xvcjogZGVjYWxDb2xvcixcbiAgICAgICAgc3ltYm9sOiAndHJpYW5nbGUnLFxuICAgICAgICBkYXNoQXJyYXlYOiBbWzksIDldLCBbMCwgOSwgOSwgMF1dLFxuICAgICAgICBkYXNoQXJyYXlZOiBbNywgMl0sXG4gICAgICAgIHN5bWJvbFNpemU6IDAuNzVcbiAgICAgIH1dXG4gICAgfVxuICB9LFxuICAvLyBJZiB4QXhpcyBhbmQgeUF4aXMgZGVjbGFyZWQsIGdyaWQgaXMgY3JlYXRlZCBieSBkZWZhdWx0LlxuICAvLyBncmlkOiB7fSxcbiAgdGV4dFN0eWxlOiB7XG4gICAgLy8gY29sb3I6ICcjMDAwJyxcbiAgICAvLyBkZWNvcmF0aW9uOiAnbm9uZScsXG4gICAgLy8gUEVORElOR1xuICAgIGZvbnRGYW1pbHk6IHBsYXRmb3JtLm1hdGNoKC9eV2luLykgPyAnTWljcm9zb2Z0IFlhSGVpJyA6ICdzYW5zLXNlcmlmJyxcbiAgICAvLyBmb250RmFtaWx5OiAnQXJpYWwsIFZlcmRhbmEsIHNhbnMtc2VyaWYnLFxuICAgIGZvbnRTaXplOiAxMixcbiAgICBmb250U3R5bGU6ICdub3JtYWwnLFxuICAgIGZvbnRXZWlnaHQ6ICdub3JtYWwnXG4gIH0sXG4gIC8vIGh0dHA6Ly9ibG9ncy5hZG9iZS5jb20vd2VicGxhdGZvcm0vMjAxNC8wMi8yNC91c2luZy1ibGVuZC1tb2Rlcy1pbi1odG1sLWNhbnZhcy9cbiAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC9nbG9iYWxDb21wb3NpdGVPcGVyYXRpb25cbiAgLy8gRGVmYXVsdCBpcyBzb3VyY2Utb3ZlclxuICBibGVuZE1vZGU6IG51bGwsXG4gIHN0YXRlQW5pbWF0aW9uOiB7XG4gICAgZHVyYXRpb246IDMwMCxcbiAgICBlYXNpbmc6ICdjdWJpY091dCdcbiAgfSxcbiAgYW5pbWF0aW9uOiAnYXV0bycsXG4gIGFuaW1hdGlvbkR1cmF0aW9uOiAxMDAwLFxuICBhbmltYXRpb25EdXJhdGlvblVwZGF0ZTogNTAwLFxuICBhbmltYXRpb25FYXNpbmc6ICdjdWJpY0luT3V0JyxcbiAgYW5pbWF0aW9uRWFzaW5nVXBkYXRlOiAnY3ViaWNJbk91dCcsXG4gIGFuaW1hdGlvblRocmVzaG9sZDogMjAwMCxcbiAgLy8gQ29uZmlndXJhdGlvbiBmb3IgcHJvZ3Jlc3NpdmUvaW5jcmVtZW50YWwgcmVuZGVyaW5nXG4gIHByb2dyZXNzaXZlVGhyZXNob2xkOiAzMDAwLFxuICBwcm9ncmVzc2l2ZTogNDAwLFxuICAvLyBUaHJlc2hvbGQgb2YgaWYgdXNlIHNpbmdsZSBob3ZlciBsYXllciB0byBvcHRpbWl6ZS5cbiAgLy8gSXQgaXMgcmVjb21tZW5kZWQgdGhhdCBgaG92ZXJMYXllclRocmVzaG9sZGAgaXMgZXF1aXZhbGVudCB0byBvciBsZXNzIHRoYW5cbiAgLy8gYHByb2dyZXNzaXZlVGhyZXNob2xkYCwgb3RoZXJ3aXNlIGhvdmVyIHdpbGwgY2F1c2UgcmVzdGFydCBvZiBwcm9ncmVzc2l2ZSxcbiAgLy8gd2hpY2ggaXMgdW5leHBlY3RlZC5cbiAgLy8gc2VlIGV4YW1wbGUgPGVjaGFydHMvdGVzdC9oZWF0bWFwLWxhcmdlLmh0bWw+LlxuICBob3ZlckxheWVyVGhyZXNob2xkOiAzMDAwLFxuICAvLyBTZWU6IG1vZHVsZTplY2hhcnRzL3NjYWxlL1RpbWVcbiAgdXNlVVRDOiBmYWxzZVxufTsiLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCB7IGNyZWF0ZUhhc2hNYXAgfSBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xuO1xuO1xuO1xuZXhwb3J0IHZhciBWSVNVQUxfRElNRU5TSU9OUyA9IGNyZWF0ZUhhc2hNYXAoWyd0b29sdGlwJywgJ2xhYmVsJywgJ2l0ZW1OYW1lJywgJ2l0ZW1JZCcsICdpdGVtR3JvdXBJZCcsICdzZXJpZXNOYW1lJ10pO1xuZXhwb3J0IHZhciBTT1VSQ0VfRk9STUFUX09SSUdJTkFMID0gJ29yaWdpbmFsJztcbmV4cG9ydCB2YXIgU09VUkNFX0ZPUk1BVF9BUlJBWV9ST1dTID0gJ2FycmF5Um93cyc7XG5leHBvcnQgdmFyIFNPVVJDRV9GT1JNQVRfT0JKRUNUX1JPV1MgPSAnb2JqZWN0Um93cyc7XG5leHBvcnQgdmFyIFNPVVJDRV9GT1JNQVRfS0VZRURfQ09MVU1OUyA9ICdrZXllZENvbHVtbnMnO1xuZXhwb3J0IHZhciBTT1VSQ0VfRk9STUFUX1RZUEVEX0FSUkFZID0gJ3R5cGVkQXJyYXknO1xuZXhwb3J0IHZhciBTT1VSQ0VfRk9STUFUX1VOS05PV04gPSAndW5rbm93bic7XG5leHBvcnQgdmFyIFNFUklFU19MQVlPVVRfQllfQ09MVU1OID0gJ2NvbHVtbic7XG5leHBvcnQgdmFyIFNFUklFU19MQVlPVVRfQllfUk9XID0gJ3Jvdyc7XG47XG47XG47XG47IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgeyBtYWtlSW5uZXIsIGdldERhdGFJdGVtVmFsdWUsIHF1ZXJ5UmVmZXJyaW5nQ29tcG9uZW50cywgU0lOR0xFX1JFRkVSUklORyB9IGZyb20gJy4uLy4uL3V0aWwvbW9kZWwuanMnO1xuaW1wb3J0IHsgY3JlYXRlSGFzaE1hcCwgZWFjaCwgaXNBcnJheSwgaXNTdHJpbmcsIGlzT2JqZWN0LCBpc1R5cGVkQXJyYXkgfSBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0IHsgU09VUkNFX0ZPUk1BVF9PUklHSU5BTCwgU09VUkNFX0ZPUk1BVF9BUlJBWV9ST1dTLCBTT1VSQ0VfRk9STUFUX09CSkVDVF9ST1dTLCBTRVJJRVNfTEFZT1VUX0JZX1JPVywgU09VUkNFX0ZPUk1BVF9LRVlFRF9DT0xVTU5TIH0gZnJvbSAnLi4vLi4vdXRpbC90eXBlcy5qcyc7IC8vIFRoZSByZXN1bHQgb2YgYGd1ZXNzT3JkaW5hbGAuXG5cbmV4cG9ydCB2YXIgQkVfT1JESU5BTCA9IHtcbiAgTXVzdDogMSxcbiAgTWlnaHQ6IDIsXG4gIE5vdDogMyAvLyBPdGhlciBjYXNlc1xuXG59O1xudmFyIGlubmVyR2xvYmFsTW9kZWwgPSBtYWtlSW5uZXIoKTtcbi8qKlxyXG4gKiBNVVNUIGJlIGNhbGxlZCBiZWZvcmUgbWVyZ2VPcHRpb24gb2YgYWxsIHNlcmllcy5cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByZXNldFNvdXJjZURlZmF1bHRlcihlY01vZGVsKSB7XG4gIC8vIGBkYXRhc2V0TWFwYCBpcyB1c2VkIHRvIG1ha2UgZGVmYXVsdCBlbmNvZGUuXG4gIGlubmVyR2xvYmFsTW9kZWwoZWNNb2RlbCkuZGF0YXNldE1hcCA9IGNyZWF0ZUhhc2hNYXAoKTtcbn1cbi8qKlxyXG4gKiBbVGhlIHN0cmF0ZWd5IG9mIHRoZSBhcnJlbmdtZW50IG9mIGRhdGEgZGltZW5zaW9ucyBmb3IgZGF0YXNldF06XHJcbiAqIFwidmFsdWUgd2F5XCI6IGFsbCBheGVzIGFyZSBub24tY2F0ZWdvcnkgYXhlcy4gU28gc2VyaWVzIG9uZSBieSBvbmUgdGFrZVxyXG4gKiAgICAgc2V2ZXJhbCAodGhlIG51bWJlciBpcyBjb29yZFN5c0RpbXMubGVuZ3RoKSBkaW1lbnNpb25zIGZyb20gZGF0YXNldC5cclxuICogICAgIFRoZSByZXN1bHQgb2YgZGF0YSBhcnJlbmdtZW50IG9mIGRhdGEgZGltZW5zaW9ucyBsaWtlOlxyXG4gKiAgICAgfCBzZXIwX3ggfCBzZXIwX3kgfCBzZXIxX3ggfCBzZXIxX3kgfCBzZXIyX3ggfCBzZXIyX3kgfFxyXG4gKiBcImNhdGVnb3J5IHdheVwiOiBhdCBsZWFzdCBvbmUgYXhpcyBpcyBjYXRlZ29yeSBheGlzLiBTbyB0aGUgdGhlIGZpcnN0IGRhdGFcclxuICogICAgIGRpbWVuc2lvbiBpcyBhbHdheXMgbWFwcGVkIHRvIHRoZSBmaXJzdCBjYXRlZ29yeSBheGlzIGFuZCBzaGFyZWQgYnlcclxuICogICAgIGFsbCBvZiB0aGUgc2VyaWVzLiBUaGUgb3RoZXIgZGF0YSBkaW1lbnNpb25zIGFyZSB0YWtlbiBieSBzZXJpZXMgbGlrZVxyXG4gKiAgICAgXCJ2YWx1ZSB3YXlcIiBkb2VzLlxyXG4gKiAgICAgVGhlIHJlc3VsdCBvZiBkYXRhIGFycmVuZ21lbnQgb2YgZGF0YSBkaW1lbnNpb25zIGxpa2U6XHJcbiAqICAgICB8IHNlcl9zaGFyZWRfeCB8IHNlcjBfeSB8IHNlcjFfeSB8IHNlcjJfeSB8XHJcbiAqXHJcbiAqIEByZXR1cm4gZW5jb2RlIE5ldmVyIGJlIGBudWxsL3VuZGVmaW5lZGAuXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbWFrZVNlcmllc0VuY29kZUZvckF4aXNDb29yZFN5cyhjb29yZERpbWVuc2lvbnMsIHNlcmllc01vZGVsLCBzb3VyY2UpIHtcbiAgdmFyIGVuY29kZSA9IHt9O1xuICB2YXIgZGF0YXNldE1vZGVsID0gcXVlcnlTZXJpZXNVcHN0cmVhbURhdGFzZXRNb2RlbChzZXJpZXNNb2RlbCk7IC8vIEN1cnJlbnRseSBvbmx5IG1ha2UgZGVmYXVsdCB3aGVuIHVzaW5nIGRhdGFzZXQsIHV0aWwgbW9yZSByZXFpcmVtZW50cyBvY2N1ci5cblxuICBpZiAoIWRhdGFzZXRNb2RlbCB8fCAhY29vcmREaW1lbnNpb25zKSB7XG4gICAgcmV0dXJuIGVuY29kZTtcbiAgfVxuXG4gIHZhciBlbmNvZGVJdGVtTmFtZSA9IFtdO1xuICB2YXIgZW5jb2RlU2VyaWVzTmFtZSA9IFtdO1xuICB2YXIgZWNNb2RlbCA9IHNlcmllc01vZGVsLmVjTW9kZWw7XG4gIHZhciBkYXRhc2V0TWFwID0gaW5uZXJHbG9iYWxNb2RlbChlY01vZGVsKS5kYXRhc2V0TWFwO1xuICB2YXIga2V5ID0gZGF0YXNldE1vZGVsLnVpZCArICdfJyArIHNvdXJjZS5zZXJpZXNMYXlvdXRCeTtcbiAgdmFyIGJhc2VDYXRlZ29yeURpbUluZGV4O1xuICB2YXIgY2F0ZWdvcnlXYXlWYWx1ZURpbVN0YXJ0O1xuICBjb29yZERpbWVuc2lvbnMgPSBjb29yZERpbWVuc2lvbnMuc2xpY2UoKTtcbiAgZWFjaChjb29yZERpbWVuc2lvbnMsIGZ1bmN0aW9uIChjb29yZERpbUluZm9Mb29zZSwgY29vcmREaW1JZHgpIHtcbiAgICB2YXIgY29vcmREaW1JbmZvID0gaXNPYmplY3QoY29vcmREaW1JbmZvTG9vc2UpID8gY29vcmREaW1JbmZvTG9vc2UgOiBjb29yZERpbWVuc2lvbnNbY29vcmREaW1JZHhdID0ge1xuICAgICAgbmFtZTogY29vcmREaW1JbmZvTG9vc2VcbiAgICB9O1xuXG4gICAgaWYgKGNvb3JkRGltSW5mby50eXBlID09PSAnb3JkaW5hbCcgJiYgYmFzZUNhdGVnb3J5RGltSW5kZXggPT0gbnVsbCkge1xuICAgICAgYmFzZUNhdGVnb3J5RGltSW5kZXggPSBjb29yZERpbUlkeDtcbiAgICAgIGNhdGVnb3J5V2F5VmFsdWVEaW1TdGFydCA9IGdldERhdGFEaW1Db3VudE9uQ29vcmREaW0oY29vcmREaW1JbmZvKTtcbiAgICB9XG5cbiAgICBlbmNvZGVbY29vcmREaW1JbmZvLm5hbWVdID0gW107XG4gIH0pO1xuICB2YXIgZGF0YXNldFJlY29yZCA9IGRhdGFzZXRNYXAuZ2V0KGtleSkgfHwgZGF0YXNldE1hcC5zZXQoa2V5LCB7XG4gICAgY2F0ZWdvcnlXYXlEaW06IGNhdGVnb3J5V2F5VmFsdWVEaW1TdGFydCxcbiAgICB2YWx1ZVdheURpbTogMFxuICB9KTsgLy8gVE9ET1xuICAvLyBBdXRvIGRldGVjdCBmaXJzdCB0aW1lIGF4aXMgYW5kIGRvIGFycmFuZ2VtZW50LlxuXG4gIGVhY2goY29vcmREaW1lbnNpb25zLCBmdW5jdGlvbiAoY29vcmREaW1JbmZvLCBjb29yZERpbUlkeCkge1xuICAgIHZhciBjb29yZERpbU5hbWUgPSBjb29yZERpbUluZm8ubmFtZTtcbiAgICB2YXIgY291bnQgPSBnZXREYXRhRGltQ291bnRPbkNvb3JkRGltKGNvb3JkRGltSW5mbyk7IC8vIEluIHZhbHVlIHdheS5cblxuICAgIGlmIChiYXNlQ2F0ZWdvcnlEaW1JbmRleCA9PSBudWxsKSB7XG4gICAgICB2YXIgc3RhcnQgPSBkYXRhc2V0UmVjb3JkLnZhbHVlV2F5RGltO1xuICAgICAgcHVzaERpbShlbmNvZGVbY29vcmREaW1OYW1lXSwgc3RhcnQsIGNvdW50KTtcbiAgICAgIHB1c2hEaW0oZW5jb2RlU2VyaWVzTmFtZSwgc3RhcnQsIGNvdW50KTtcbiAgICAgIGRhdGFzZXRSZWNvcmQudmFsdWVXYXlEaW0gKz0gY291bnQ7IC8vID8/PyBUT0RPIGdpdmUgYSBiZXR0ZXIgZGVmYXVsdCBzZXJpZXMgbmFtZSBydWxlP1xuICAgICAgLy8gZXNwZWNpYWxseSB3aGVuIGVuY29kZSB4IHkgc3BlY2lmaWVkLlxuICAgICAgLy8gY29uc2lkZXI6IHdoZW4gbXVsdGlwbGUgc2VyaWVzIHNoYXJlIG9uZSBkaW1lbnNpb25cbiAgICAgIC8vIGNhdGVnb3J5IGF4aXMsIHNlcmllcyBuYW1lIHNob3VsZCBiZXR0ZXIgdXNlXG4gICAgICAvLyB0aGUgb3RoZXIgZGltZW5zaW9uIG5hbWUuIE9uIHRoZSBvdGhlciBoYW5kLCB1c2VcbiAgICAgIC8vIGJvdGggZGltZW5zaW9ucyBuYW1lLlxuICAgIH0gLy8gSW4gY2F0ZWdvcnkgd2F5LCB0aGUgZmlyc3QgY2F0ZWdvcnkgYXhpcy5cbiAgICBlbHNlIGlmIChiYXNlQ2F0ZWdvcnlEaW1JbmRleCA9PT0gY29vcmREaW1JZHgpIHtcbiAgICAgICAgcHVzaERpbShlbmNvZGVbY29vcmREaW1OYW1lXSwgMCwgY291bnQpO1xuICAgICAgICBwdXNoRGltKGVuY29kZUl0ZW1OYW1lLCAwLCBjb3VudCk7XG4gICAgICB9IC8vIEluIGNhdGVnb3J5IHdheSwgdGhlIG90aGVyIGF4aXMuXG4gICAgICBlbHNlIHtcbiAgICAgICAgICB2YXIgc3RhcnQgPSBkYXRhc2V0UmVjb3JkLmNhdGVnb3J5V2F5RGltO1xuICAgICAgICAgIHB1c2hEaW0oZW5jb2RlW2Nvb3JkRGltTmFtZV0sIHN0YXJ0LCBjb3VudCk7XG4gICAgICAgICAgcHVzaERpbShlbmNvZGVTZXJpZXNOYW1lLCBzdGFydCwgY291bnQpO1xuICAgICAgICAgIGRhdGFzZXRSZWNvcmQuY2F0ZWdvcnlXYXlEaW0gKz0gY291bnQ7XG4gICAgICAgIH1cbiAgfSk7XG5cbiAgZnVuY3Rpb24gcHVzaERpbShkaW1JZHhBcnIsIGlkeEZyb20sIGlkeENvdW50KSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpZHhDb3VudDsgaSsrKSB7XG4gICAgICBkaW1JZHhBcnIucHVzaChpZHhGcm9tICsgaSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RGF0YURpbUNvdW50T25Db29yZERpbShjb29yZERpbUluZm8pIHtcbiAgICB2YXIgZGltc0RlZiA9IGNvb3JkRGltSW5mby5kaW1zRGVmO1xuICAgIHJldHVybiBkaW1zRGVmID8gZGltc0RlZi5sZW5ndGggOiAxO1xuICB9XG5cbiAgZW5jb2RlSXRlbU5hbWUubGVuZ3RoICYmIChlbmNvZGUuaXRlbU5hbWUgPSBlbmNvZGVJdGVtTmFtZSk7XG4gIGVuY29kZVNlcmllc05hbWUubGVuZ3RoICYmIChlbmNvZGUuc2VyaWVzTmFtZSA9IGVuY29kZVNlcmllc05hbWUpO1xuICByZXR1cm4gZW5jb2RlO1xufVxuLyoqXHJcbiAqIFdvcmsgZm9yIGRhdGEgbGlrZSBbe25hbWU6IC4uLiwgdmFsdWU6IC4uLn0sIC4uLl0uXHJcbiAqXHJcbiAqIEByZXR1cm4gZW5jb2RlIE5ldmVyIGJlIGBudWxsL3VuZGVmaW5lZGAuXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbWFrZVNlcmllc0VuY29kZUZvck5hbWVCYXNlZChzZXJpZXNNb2RlbCwgc291cmNlLCBkaW1Db3VudCkge1xuICB2YXIgZW5jb2RlID0ge307XG4gIHZhciBkYXRhc2V0TW9kZWwgPSBxdWVyeVNlcmllc1Vwc3RyZWFtRGF0YXNldE1vZGVsKHNlcmllc01vZGVsKTsgLy8gQ3VycmVudGx5IG9ubHkgbWFrZSBkZWZhdWx0IHdoZW4gdXNpbmcgZGF0YXNldCwgdXRpbCBtb3JlIHJlcWlyZW1lbnRzIG9jY3VyLlxuXG4gIGlmICghZGF0YXNldE1vZGVsKSB7XG4gICAgcmV0dXJuIGVuY29kZTtcbiAgfVxuXG4gIHZhciBzb3VyY2VGb3JtYXQgPSBzb3VyY2Uuc291cmNlRm9ybWF0O1xuICB2YXIgZGltZW5zaW9uc0RlZmluZSA9IHNvdXJjZS5kaW1lbnNpb25zRGVmaW5lO1xuICB2YXIgcG90ZW50aWFsTmFtZURpbUluZGV4O1xuXG4gIGlmIChzb3VyY2VGb3JtYXQgPT09IFNPVVJDRV9GT1JNQVRfT0JKRUNUX1JPV1MgfHwgc291cmNlRm9ybWF0ID09PSBTT1VSQ0VfRk9STUFUX0tFWUVEX0NPTFVNTlMpIHtcbiAgICBlYWNoKGRpbWVuc2lvbnNEZWZpbmUsIGZ1bmN0aW9uIChkaW0sIGlkeCkge1xuICAgICAgaWYgKChpc09iamVjdChkaW0pID8gZGltLm5hbWUgOiBkaW0pID09PSAnbmFtZScpIHtcbiAgICAgICAgcG90ZW50aWFsTmFtZURpbUluZGV4ID0gaWR4O1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgdmFyIGlkeFJlc3VsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaWR4UmVzMCA9IHt9O1xuICAgIHZhciBpZHhSZXMxID0ge307XG4gICAgdmFyIGd1ZXNzUmVjb3JkcyA9IFtdOyAvLyA1IGlzIGFuIGV4cGVyaWVuY2UgdmFsdWUuXG5cbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gTWF0aC5taW4oNSwgZGltQ291bnQpOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHZhciBndWVzc1Jlc3VsdCA9IGRvR3Vlc3NPcmRpbmFsKHNvdXJjZS5kYXRhLCBzb3VyY2VGb3JtYXQsIHNvdXJjZS5zZXJpZXNMYXlvdXRCeSwgZGltZW5zaW9uc0RlZmluZSwgc291cmNlLnN0YXJ0SW5kZXgsIGkpO1xuICAgICAgZ3Vlc3NSZWNvcmRzLnB1c2goZ3Vlc3NSZXN1bHQpO1xuICAgICAgdmFyIGlzUHVyZU51bWJlciA9IGd1ZXNzUmVzdWx0ID09PSBCRV9PUkRJTkFMLk5vdDsgLy8gW1N0cmF0ZWd5IG9mIGlkeFJlczBdOiBmaW5kIHRoZSBmaXJzdCBCRV9PUkRJTkFMLk5vdCBhcyB0aGUgdmFsdWUgZGltLFxuICAgICAgLy8gYW5kIHRoZW4gZmluZCBhIG5hbWUgZGltIHdpdGggdGhlIHByaW9yaXR5OlxuICAgICAgLy8gXCJCRV9PUkRJTkFMLk1pZ2h0fEJFX09SRElOQUwuTXVzdFwiID4gXCJvdGhlciBkaW1cIiA+IFwidGhlIHZhbHVlIGRpbSBpdHNlbGZcIi5cblxuICAgICAgaWYgKGlzUHVyZU51bWJlciAmJiBpZHhSZXMwLnYgPT0gbnVsbCAmJiBpICE9PSBwb3RlbnRpYWxOYW1lRGltSW5kZXgpIHtcbiAgICAgICAgaWR4UmVzMC52ID0gaTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlkeFJlczAubiA9PSBudWxsIHx8IGlkeFJlczAubiA9PT0gaWR4UmVzMC52IHx8ICFpc1B1cmVOdW1iZXIgJiYgZ3Vlc3NSZWNvcmRzW2lkeFJlczAubl0gPT09IEJFX09SRElOQUwuTm90KSB7XG4gICAgICAgIGlkeFJlczAubiA9IGk7XG4gICAgICB9XG5cbiAgICAgIGlmIChmdWxmaWxsZWQoaWR4UmVzMCkgJiYgZ3Vlc3NSZWNvcmRzW2lkeFJlczAubl0gIT09IEJFX09SRElOQUwuTm90KSB7XG4gICAgICAgIHJldHVybiBpZHhSZXMwO1xuICAgICAgfSAvLyBbU3RyYXRlZ3kgb2YgaWR4UmVzMV06IGlmIGlkeFJlczAgbm90IHNhdGlzZmllZCAodGhhdCBpcywgbm8gQkVfT1JESU5BTC5Ob3QpLFxuICAgICAgLy8gZmluZCB0aGUgZmlyc3QgQkVfT1JESU5BTC5NaWdodCBhcyB0aGUgdmFsdWUgZGltLFxuICAgICAgLy8gYW5kIHRoZW4gZmluZCBhIG5hbWUgZGltIHdpdGggdGhlIHByaW9yaXR5OlxuICAgICAgLy8gXCJvdGhlciBkaW1cIiA+IFwidGhlIHZhbHVlIGRpbSBpdHNlbGZcIi5cbiAgICAgIC8vIFRoYXQgaXMgZm9yIGJhY2t3YXJkIGNvbXBhdDogbnVtYmVyLWxpa2UgKGUuZy4sIGAnMydgLCBgJzU1J2ApIGNhbiBiZVxuICAgICAgLy8gdHJlYXRlZCBhcyBudW1iZXIuXG5cblxuICAgICAgaWYgKCFpc1B1cmVOdW1iZXIpIHtcbiAgICAgICAgaWYgKGd1ZXNzUmVzdWx0ID09PSBCRV9PUkRJTkFMLk1pZ2h0ICYmIGlkeFJlczEudiA9PSBudWxsICYmIGkgIT09IHBvdGVudGlhbE5hbWVEaW1JbmRleCkge1xuICAgICAgICAgIGlkeFJlczEudiA9IGk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaWR4UmVzMS5uID09IG51bGwgfHwgaWR4UmVzMS5uID09PSBpZHhSZXMxLnYpIHtcbiAgICAgICAgICBpZHhSZXMxLm4gPSBpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZnVsZmlsbGVkKGlkeFJlc3VsdCkge1xuICAgICAgcmV0dXJuIGlkeFJlc3VsdC52ICE9IG51bGwgJiYgaWR4UmVzdWx0Lm4gIT0gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gZnVsZmlsbGVkKGlkeFJlczApID8gaWR4UmVzMCA6IGZ1bGZpbGxlZChpZHhSZXMxKSA/IGlkeFJlczEgOiBudWxsO1xuICB9KCk7XG5cbiAgaWYgKGlkeFJlc3VsdCkge1xuICAgIGVuY29kZS52YWx1ZSA9IFtpZHhSZXN1bHQudl07IC8vIGBwb3RlbnRpYWxOYW1lRGltSW5kZXhgIGhhcyBoaWdoZXN0IHByaW9yaXR5LlxuXG4gICAgdmFyIG5hbWVEaW1JbmRleCA9IHBvdGVudGlhbE5hbWVEaW1JbmRleCAhPSBudWxsID8gcG90ZW50aWFsTmFtZURpbUluZGV4IDogaWR4UmVzdWx0Lm47IC8vIEJ5IGRlZmF1bHQsIGxhYmVsIHVzZXMgaXRlbU5hbWUgaW4gY2hhcnRzLlxuICAgIC8vIFNvIHdlIGRvbid0IHNldCBlbmNvZGVMYWJlbCBoZXJlLlxuXG4gICAgZW5jb2RlLml0ZW1OYW1lID0gW25hbWVEaW1JbmRleF07XG4gICAgZW5jb2RlLnNlcmllc05hbWUgPSBbbmFtZURpbUluZGV4XTtcbiAgfVxuXG4gIHJldHVybiBlbmNvZGU7XG59XG4vKipcclxuICogQHJldHVybiBJZiByZXR1cm4gbnVsbC91bmRlZmluZWQsIGluZGljYXRlIHRoYXQgc2hvdWxkIG5vdCB1c2UgZGF0YXNldE1vZGVsLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHF1ZXJ5U2VyaWVzVXBzdHJlYW1EYXRhc2V0TW9kZWwoc2VyaWVzTW9kZWwpIHtcbiAgLy8gQ2F1dGlvbjogY29uc2lkZXIgdGhlIHNjZW5hcmlvOlxuICAvLyBBIGRhdGFzZXQgaXMgZGVjbGFyZWQgYW5kIGEgc2VyaWVzIGlzIG5vdCBleHBlY3RlZCB0byB1c2UgdGhlIGRhdGFzZXQsXG4gIC8vIGFuZCBhdCB0aGUgYmVnaW5uaW5nIGBzZXRPcHRpb24oe3NlcmllczogeyBub0RhdGEgfSlgIChqdXN0IHByZXBhcmUgb3RoZXJcbiAgLy8gb3B0aW9uIGJ1dCBubyBkYXRhKSwgdGhlbiBgc2V0T3B0aW9uKHtzZXJpZXM6IHtkYXRhOiBbLi4uXX0pOyBJbiB0aGlzIGNhc2UsXG4gIC8vIHRoZSB1c2VyIHNob3VsZCBzZXQgYW4gZW1wdHkgYXJyYXkgdG8gYXZvaWQgdGhhdCBkYXRhc2V0IGlzIHVzZWQgYnkgZGVmYXVsdC5cbiAgdmFyIHRoaXNEYXRhID0gc2VyaWVzTW9kZWwuZ2V0KCdkYXRhJywgdHJ1ZSk7XG5cbiAgaWYgKCF0aGlzRGF0YSkge1xuICAgIHJldHVybiBxdWVyeVJlZmVycmluZ0NvbXBvbmVudHMoc2VyaWVzTW9kZWwuZWNNb2RlbCwgJ2RhdGFzZXQnLCB7XG4gICAgICBpbmRleDogc2VyaWVzTW9kZWwuZ2V0KCdkYXRhc2V0SW5kZXgnLCB0cnVlKSxcbiAgICAgIGlkOiBzZXJpZXNNb2RlbC5nZXQoJ2RhdGFzZXRJZCcsIHRydWUpXG4gICAgfSwgU0lOR0xFX1JFRkVSUklORykubW9kZWxzWzBdO1xuICB9XG59XG4vKipcclxuICogQHJldHVybiBBbHdheXMgcmV0dXJuIGFuIGFycmF5IGV2ZW50IGVtcHR5LlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHF1ZXJ5RGF0YXNldFVwc3RyZWFtRGF0YXNldE1vZGVscyhkYXRhc2V0TW9kZWwpIHtcbiAgLy8gT25seSB0aGVzZSBhdHRyaWJ1dGVzIGRlY2xhcmVkLCB3ZSBieSBkZWZ1YWx0IHJlZmVyZW5jZSB0byBgZGF0YXNldEluZGV4OiAwYC5cbiAgLy8gT3RoZXJ3aXNlLCBubyByZWZlcmVuY2UuXG4gIGlmICghZGF0YXNldE1vZGVsLmdldCgndHJhbnNmb3JtJywgdHJ1ZSkgJiYgIWRhdGFzZXRNb2RlbC5nZXQoJ2Zyb21UcmFuc2Zvcm1SZXN1bHQnLCB0cnVlKSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIHJldHVybiBxdWVyeVJlZmVycmluZ0NvbXBvbmVudHMoZGF0YXNldE1vZGVsLmVjTW9kZWwsICdkYXRhc2V0Jywge1xuICAgIGluZGV4OiBkYXRhc2V0TW9kZWwuZ2V0KCdmcm9tRGF0YXNldEluZGV4JywgdHJ1ZSksXG4gICAgaWQ6IGRhdGFzZXRNb2RlbC5nZXQoJ2Zyb21EYXRhc2V0SWQnLCB0cnVlKVxuICB9LCBTSU5HTEVfUkVGRVJSSU5HKS5tb2RlbHM7XG59XG4vKipcclxuICogVGhlIHJ1bGUgc2hvdWxkIG5vdCBiZSBjb21wbGV4LCBvdGhlcndpc2UgdXNlciBtaWdodCBub3RcclxuICogYmUgYWJsZSB0byBrbm93biB3aGVyZSB0aGUgZGF0YSBpcyB3cm9uZy5cclxuICogVGhlIGNvZGUgaXMgdWdseSwgYnV0IGhvdyB0byBtYWtlIGl0IG5lYXQ/XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ3Vlc3NPcmRpbmFsKHNvdXJjZSwgZGltSW5kZXgpIHtcbiAgcmV0dXJuIGRvR3Vlc3NPcmRpbmFsKHNvdXJjZS5kYXRhLCBzb3VyY2Uuc291cmNlRm9ybWF0LCBzb3VyY2Uuc2VyaWVzTGF5b3V0QnksIHNvdXJjZS5kaW1lbnNpb25zRGVmaW5lLCBzb3VyY2Uuc3RhcnRJbmRleCwgZGltSW5kZXgpO1xufSAvLyBkaW1JbmRleCBtYXkgYmUgb3ZlcmZsb3cgc291cmNlIGRhdGEuXG4vLyByZXR1cm4ge0JFX09SRElOQUx9XG5cbmZ1bmN0aW9uIGRvR3Vlc3NPcmRpbmFsKGRhdGEsIHNvdXJjZUZvcm1hdCwgc2VyaWVzTGF5b3V0QnksIGRpbWVuc2lvbnNEZWZpbmUsIHN0YXJ0SW5kZXgsIGRpbUluZGV4KSB7XG4gIHZhciByZXN1bHQ7IC8vIEV4cGVyaWVuY2UgdmFsdWUuXG5cbiAgdmFyIG1heExvb3AgPSA1O1xuXG4gIGlmIChpc1R5cGVkQXJyYXkoZGF0YSkpIHtcbiAgICByZXR1cm4gQkVfT1JESU5BTC5Ob3Q7XG4gIH0gLy8gV2hlbiBzb3VyY2VUeXBlIGlzICdvYmplY3RSb3dzJyBvciAna2V5ZWRDb2x1bW5zJywgZGltZW5zaW9uc0RlZmluZVxuICAvLyBhbHdheXMgZXhpc3RzIGluIHNvdXJjZS5cblxuXG4gIHZhciBkaW1OYW1lO1xuICB2YXIgZGltVHlwZTtcblxuICBpZiAoZGltZW5zaW9uc0RlZmluZSkge1xuICAgIHZhciBkaW1EZWZJdGVtID0gZGltZW5zaW9uc0RlZmluZVtkaW1JbmRleF07XG5cbiAgICBpZiAoaXNPYmplY3QoZGltRGVmSXRlbSkpIHtcbiAgICAgIGRpbU5hbWUgPSBkaW1EZWZJdGVtLm5hbWU7XG4gICAgICBkaW1UeXBlID0gZGltRGVmSXRlbS50eXBlO1xuICAgIH0gZWxzZSBpZiAoaXNTdHJpbmcoZGltRGVmSXRlbSkpIHtcbiAgICAgIGRpbU5hbWUgPSBkaW1EZWZJdGVtO1xuICAgIH1cbiAgfVxuXG4gIGlmIChkaW1UeXBlICE9IG51bGwpIHtcbiAgICByZXR1cm4gZGltVHlwZSA9PT0gJ29yZGluYWwnID8gQkVfT1JESU5BTC5NdXN0IDogQkVfT1JESU5BTC5Ob3Q7XG4gIH1cblxuICBpZiAoc291cmNlRm9ybWF0ID09PSBTT1VSQ0VfRk9STUFUX0FSUkFZX1JPV1MpIHtcbiAgICB2YXIgZGF0YUFycmF5Um93cyA9IGRhdGE7XG5cbiAgICBpZiAoc2VyaWVzTGF5b3V0QnkgPT09IFNFUklFU19MQVlPVVRfQllfUk9XKSB7XG4gICAgICB2YXIgc2FtcGxlID0gZGF0YUFycmF5Um93c1tkaW1JbmRleF07XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgKHNhbXBsZSB8fCBbXSkubGVuZ3RoICYmIGkgPCBtYXhMb29wOyBpKyspIHtcbiAgICAgICAgaWYgKChyZXN1bHQgPSBkZXRlY3RWYWx1ZShzYW1wbGVbc3RhcnRJbmRleCArIGldKSkgIT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhQXJyYXlSb3dzLmxlbmd0aCAmJiBpIDwgbWF4TG9vcDsgaSsrKSB7XG4gICAgICAgIHZhciByb3cgPSBkYXRhQXJyYXlSb3dzW3N0YXJ0SW5kZXggKyBpXTtcblxuICAgICAgICBpZiAocm93ICYmIChyZXN1bHQgPSBkZXRlY3RWYWx1ZShyb3dbZGltSW5kZXhdKSkgIT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoc291cmNlRm9ybWF0ID09PSBTT1VSQ0VfRk9STUFUX09CSkVDVF9ST1dTKSB7XG4gICAgdmFyIGRhdGFPYmplY3RSb3dzID0gZGF0YTtcblxuICAgIGlmICghZGltTmFtZSkge1xuICAgICAgcmV0dXJuIEJFX09SRElOQUwuTm90O1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YU9iamVjdFJvd3MubGVuZ3RoICYmIGkgPCBtYXhMb29wOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gZGF0YU9iamVjdFJvd3NbaV07XG5cbiAgICAgIGlmIChpdGVtICYmIChyZXN1bHQgPSBkZXRlY3RWYWx1ZShpdGVtW2RpbU5hbWVdKSkgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChzb3VyY2VGb3JtYXQgPT09IFNPVVJDRV9GT1JNQVRfS0VZRURfQ09MVU1OUykge1xuICAgIHZhciBkYXRhS2V5ZWRDb2x1bW5zID0gZGF0YTtcblxuICAgIGlmICghZGltTmFtZSkge1xuICAgICAgcmV0dXJuIEJFX09SRElOQUwuTm90O1xuICAgIH1cblxuICAgIHZhciBzYW1wbGUgPSBkYXRhS2V5ZWRDb2x1bW5zW2RpbU5hbWVdO1xuXG4gICAgaWYgKCFzYW1wbGUgfHwgaXNUeXBlZEFycmF5KHNhbXBsZSkpIHtcbiAgICAgIHJldHVybiBCRV9PUkRJTkFMLk5vdDtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNhbXBsZS5sZW5ndGggJiYgaSA8IG1heExvb3A7IGkrKykge1xuICAgICAgaWYgKChyZXN1bHQgPSBkZXRlY3RWYWx1ZShzYW1wbGVbaV0pKSAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKHNvdXJjZUZvcm1hdCA9PT0gU09VUkNFX0ZPUk1BVF9PUklHSU5BTCkge1xuICAgIHZhciBkYXRhT3JpZ2luYWwgPSBkYXRhO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhT3JpZ2luYWwubGVuZ3RoICYmIGkgPCBtYXhMb29wOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gZGF0YU9yaWdpbmFsW2ldO1xuICAgICAgdmFyIHZhbCA9IGdldERhdGFJdGVtVmFsdWUoaXRlbSk7XG5cbiAgICAgIGlmICghaXNBcnJheSh2YWwpKSB7XG4gICAgICAgIHJldHVybiBCRV9PUkRJTkFMLk5vdDtcbiAgICAgIH1cblxuICAgICAgaWYgKChyZXN1bHQgPSBkZXRlY3RWYWx1ZSh2YWxbZGltSW5kZXhdKSkgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRldGVjdFZhbHVlKHZhbCkge1xuICAgIHZhciBiZVN0ciA9IGlzU3RyaW5nKHZhbCk7IC8vIENvbnNpZGVyIHVzYWdlIGNvbnZlbmllbmNlLCAnMScsICcyJyB3aWxsIGJlIHRyZWF0ZWQgYXMgXCJudW1iZXJcIi5cbiAgICAvLyBgaXNGaW5pdCgnJylgIGdldCBgdHJ1ZWAuXG5cbiAgICBpZiAodmFsICE9IG51bGwgJiYgaXNGaW5pdGUodmFsKSAmJiB2YWwgIT09ICcnKSB7XG4gICAgICByZXR1cm4gYmVTdHIgPyBCRV9PUkRJTkFMLk1pZ2h0IDogQkVfT1JESU5BTC5Ob3Q7XG4gICAgfSBlbHNlIGlmIChiZVN0ciAmJiB2YWwgIT09ICctJykge1xuICAgICAgcmV0dXJuIEJFX09SRElOQUwuTXVzdDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gQkVfT1JESU5BTC5Ob3Q7XG59IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgeyBjcmVhdGVIYXNoTWFwLCBhc3NlcnQgfSBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0IHsgaXNDb21wb25lbnRJZEludGVybmFsIH0gZnJvbSAnLi4vdXRpbC9tb2RlbC5qcyc7XG52YXIgaW50ZXJuYWxPcHRpb25DcmVhdG9yTWFwID0gY3JlYXRlSGFzaE1hcCgpO1xuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVySW50ZXJuYWxPcHRpb25DcmVhdG9yKG1haW5UeXBlLCBjcmVhdG9yKSB7XG4gIGFzc2VydChpbnRlcm5hbE9wdGlvbkNyZWF0b3JNYXAuZ2V0KG1haW5UeXBlKSA9PSBudWxsICYmIGNyZWF0b3IpO1xuICBpbnRlcm5hbE9wdGlvbkNyZWF0b3JNYXAuc2V0KG1haW5UeXBlLCBjcmVhdG9yKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXRJbnRlcm5hbE9wdGlvbnMoZWNNb2RlbCwgbWFpblR5cGUsIG5ld0NtcHRPcHRpb25MaXN0KSB7XG4gIHZhciBpbnRlcm5hbE9wdGlvbkNyZWF0b3IgPSBpbnRlcm5hbE9wdGlvbkNyZWF0b3JNYXAuZ2V0KG1haW5UeXBlKTtcblxuICBpZiAoIWludGVybmFsT3B0aW9uQ3JlYXRvcikge1xuICAgIHJldHVybiBuZXdDbXB0T3B0aW9uTGlzdDtcbiAgfVxuXG4gIHZhciBpbnRlcm5hbE9wdGlvbnMgPSBpbnRlcm5hbE9wdGlvbkNyZWF0b3IoZWNNb2RlbCk7XG5cbiAgaWYgKCFpbnRlcm5hbE9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3Q21wdE9wdGlvbkxpc3Q7XG4gIH1cblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW50ZXJuYWxPcHRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBhc3NlcnQoaXNDb21wb25lbnRJZEludGVybmFsKGludGVybmFsT3B0aW9uc1tpXSkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXdDbXB0T3B0aW9uTGlzdC5jb25jYXQoaW50ZXJuYWxPcHRpb25zKTtcbn0iLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCB7IG1ha2VJbm5lciwgbm9ybWFsaXplVG9BcnJheSB9IGZyb20gJy4uLy4uL3V0aWwvbW9kZWwuanMnO1xudmFyIGlubmVyQ29sb3IgPSBtYWtlSW5uZXIoKTtcbnZhciBpbm5lckRlY2FsID0gbWFrZUlubmVyKCk7XG5cbnZhciBQYWxldHRlTWl4aW4gPVxuLyoqIEBjbGFzcyAqL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBQYWxldHRlTWl4aW4oKSB7fVxuXG4gIFBhbGV0dGVNaXhpbi5wcm90b3R5cGUuZ2V0Q29sb3JGcm9tUGFsZXR0ZSA9IGZ1bmN0aW9uIChuYW1lLCBzY29wZSwgcmVxdWVzdE51bSkge1xuICAgIHZhciBkZWZhdWx0UGFsZXR0ZSA9IG5vcm1hbGl6ZVRvQXJyYXkodGhpcy5nZXQoJ2NvbG9yJywgdHJ1ZSkpO1xuICAgIHZhciBsYXllcmVkUGFsZXR0ZSA9IHRoaXMuZ2V0KCdjb2xvckxheWVyJywgdHJ1ZSk7XG4gICAgcmV0dXJuIGdldEZyb21QYWxldHRlKHRoaXMsIGlubmVyQ29sb3IsIGRlZmF1bHRQYWxldHRlLCBsYXllcmVkUGFsZXR0ZSwgbmFtZSwgc2NvcGUsIHJlcXVlc3ROdW0pO1xuICB9O1xuXG4gIFBhbGV0dGVNaXhpbi5wcm90b3R5cGUuY2xlYXJDb2xvclBhbGV0dGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgY2xlYXJQYWxldHRlKHRoaXMsIGlubmVyQ29sb3IpO1xuICB9O1xuXG4gIHJldHVybiBQYWxldHRlTWl4aW47XG59KCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWNhbEZyb21QYWxldHRlKGVjTW9kZWwsIG5hbWUsIHNjb3BlLCByZXF1ZXN0TnVtKSB7XG4gIHZhciBkZWZhdWx0RGVjYWxzID0gbm9ybWFsaXplVG9BcnJheShlY01vZGVsLmdldChbJ2FyaWEnLCAnZGVjYWwnLCAnZGVjYWxzJ10pKTtcbiAgcmV0dXJuIGdldEZyb21QYWxldHRlKGVjTW9kZWwsIGlubmVyRGVjYWwsIGRlZmF1bHREZWNhbHMsIG51bGwsIG5hbWUsIHNjb3BlLCByZXF1ZXN0TnVtKTtcbn1cblxuZnVuY3Rpb24gZ2V0TmVhcmVzdFBhbGV0dGUocGFsZXR0ZXMsIHJlcXVlc3RDb2xvck51bSkge1xuICB2YXIgcGFsZXR0ZU51bSA9IHBhbGV0dGVzLmxlbmd0aDsgLy8gVE9ETyBwYWxldHRlcyBtdXN0IGJlIGluIG9yZGVyXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYWxldHRlTnVtOyBpKyspIHtcbiAgICBpZiAocGFsZXR0ZXNbaV0ubGVuZ3RoID4gcmVxdWVzdENvbG9yTnVtKSB7XG4gICAgICByZXR1cm4gcGFsZXR0ZXNbaV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHBhbGV0dGVzW3BhbGV0dGVOdW0gLSAxXTtcbn1cbi8qKlxyXG4gKiBAcGFyYW0gbmFtZSBNVVNUIE5PVCBiZSBudWxsL3VuZGVmaW5lZC4gT3RoZXJ3aXNlIGNhbGwgdGhpcyBmdW5jdGlvblxyXG4gKiAgICAgICAgICAgICB0d2lzZSB3aXRoIHRoZSBzYW1lIHBhcmFtZXRlcnMgd2lsbCBnZXQgZGlmZmVyZW50IHJlc3VsdC5cclxuICogQHBhcmFtIHNjb3BlIGRlZmF1bHQgdGhpcy5cclxuICogQHJldHVybiBDYW4gYmUgbnVsbC91bmRlZmluZWRcclxuICovXG5cblxuZnVuY3Rpb24gZ2V0RnJvbVBhbGV0dGUodGhhdCwgaW5uZXIsIGRlZmF1bHRQYWxldHRlLCBsYXllcmVkUGFsZXR0ZSwgbmFtZSwgc2NvcGUsIHJlcXVlc3ROdW0pIHtcbiAgc2NvcGUgPSBzY29wZSB8fCB0aGF0O1xuICB2YXIgc2NvcGVGaWVsZHMgPSBpbm5lcihzY29wZSk7XG4gIHZhciBwYWxldHRlSWR4ID0gc2NvcGVGaWVsZHMucGFsZXR0ZUlkeCB8fCAwO1xuICB2YXIgcGFsZXR0ZU5hbWVNYXAgPSBzY29wZUZpZWxkcy5wYWxldHRlTmFtZU1hcCA9IHNjb3BlRmllbGRzLnBhbGV0dGVOYW1lTWFwIHx8IHt9OyAvLyBVc2UgYGhhc093blByb3BlcnR5YCB0byBhdm9pZCBjb25mbGljdCB3aXRoIE9iamVjdC5wcm90b3R5cGUuXG5cbiAgaWYgKHBhbGV0dGVOYW1lTWFwLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgcmV0dXJuIHBhbGV0dGVOYW1lTWFwW25hbWVdO1xuICB9XG5cbiAgdmFyIHBhbGV0dGUgPSByZXF1ZXN0TnVtID09IG51bGwgfHwgIWxheWVyZWRQYWxldHRlID8gZGVmYXVsdFBhbGV0dGUgOiBnZXROZWFyZXN0UGFsZXR0ZShsYXllcmVkUGFsZXR0ZSwgcmVxdWVzdE51bSk7IC8vIEluIGNhc2UgY2FuJ3QgZmluZCBpbiBsYXllcmVkIGNvbG9yIHBhbGV0dGUuXG5cbiAgcGFsZXR0ZSA9IHBhbGV0dGUgfHwgZGVmYXVsdFBhbGV0dGU7XG5cbiAgaWYgKCFwYWxldHRlIHx8ICFwYWxldHRlLmxlbmd0aCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBwaWNrZWRQYWxldHRlSXRlbSA9IHBhbGV0dGVbcGFsZXR0ZUlkeF07XG5cbiAgaWYgKG5hbWUpIHtcbiAgICBwYWxldHRlTmFtZU1hcFtuYW1lXSA9IHBpY2tlZFBhbGV0dGVJdGVtO1xuICB9XG5cbiAgc2NvcGVGaWVsZHMucGFsZXR0ZUlkeCA9IChwYWxldHRlSWR4ICsgMSkgJSBwYWxldHRlLmxlbmd0aDtcbiAgcmV0dXJuIHBpY2tlZFBhbGV0dGVJdGVtO1xufVxuXG5mdW5jdGlvbiBjbGVhclBhbGV0dGUodGhhdCwgaW5uZXIpIHtcbiAgaW5uZXIodGhhdCkucGFsZXR0ZUlkeCA9IDA7XG4gIGlubmVyKHRoYXQpLnBhbGV0dGVOYW1lTWFwID0ge307XG59XG5cbmV4cG9ydCB7IFBhbGV0dGVNaXhpbiB9OyIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG4vKipcclxuICogQ2F1dGlvbjogSWYgdGhlIG1lY2hhbmlzbSBzaG91bGQgYmUgY2hhbmdlZCBzb21lIGRheSwgdGhlc2UgY2FzZXNcclxuICogc2hvdWxkIGJlIGNvbnNpZGVyZWQ6XHJcbiAqXHJcbiAqICgxKSBJbiBgbWVyZ2Ugb3B0aW9uYCBtb2RlLCBpZiB1c2luZyB0aGUgc2FtZSBvcHRpb24gdG8gY2FsbCBgc2V0T3B0aW9uYFxyXG4gKiBtYW55IHRpbWVzLCB0aGUgcmVzdWx0IHNob3VsZCBiZSB0aGUgc2FtZSAodHJ5IG91ciBiZXN0IHRvIGVuc3VyZSB0aGF0KS5cclxuICogKDIpIEluIGBtZXJnZSBvcHRpb25gIG1vZGUsIGlmIGEgY29tcG9uZW50IGhhcyBubyBpZC9uYW1lIHNwZWNpZmllZCwgaXRcclxuICogd2lsbCBiZSBtZXJnZWQgYnkgaW5kZXgsIGFuZCB0aGUgcmVzdWx0IHNlcXVlbmNlIG9mIHRoZSBjb21wb25lbnRzIGlzXHJcbiAqIGNvbnNpc3RlbnQgdG8gdGhlIG9yaWdpbmFsIHNlcXVlbmNlLlxyXG4gKiAoMykgSW4gYHJlcGxhY2VNZXJnZWAgbW9kZSwga2VlcCB0aGUgcmVzdWx0IHNlcXVlbmNlIG9mIHRoZSBjb21wb25lbnRzIGlzXHJcbiAqIGNvbnNpc3RlbnQgdG8gdGhlIG9yaWdpbmFsIHNlcXVlbmNlLCBldmVuIHRob3VnaCB0aGVyZSBtaWdodCByZXN1bHQgaW4gXCJob2xlXCIuXHJcbiAqICg0KSBgcmVzZXRgIGZlYXR1cmUgKGluIHRvb2xib3gpLiBGaW5kIGRldGFpbGVkIGluZm8gaW4gY29tbWVudHMgYWJvdXRcclxuICogYG1lcmdlT3B0aW9uYCBpbiBtb2R1bGU6ZWNoYXJ0cy9tb2RlbC9PcHRpb25NYW5hZ2VyLlxyXG4gKi9cblxuaW1wb3J0IHsgZWFjaCwgZmlsdGVyLCBpc0FycmF5LCBpc09iamVjdCwgaXNTdHJpbmcsIGNyZWF0ZUhhc2hNYXAsIGFzc2VydCwgY2xvbmUsIG1lcmdlLCBleHRlbmQsIG1peGluLCBpc0Z1bmN0aW9uIH0gZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbmltcG9ydCAqIGFzIG1vZGVsVXRpbCBmcm9tICcuLi91dGlsL21vZGVsLmpzJztcbmltcG9ydCBNb2RlbCBmcm9tICcuL01vZGVsLmpzJztcbmltcG9ydCBDb21wb25lbnRNb2RlbCBmcm9tICcuL0NvbXBvbmVudC5qcyc7XG5pbXBvcnQgZ2xvYmFsRGVmYXVsdCBmcm9tICcuL2dsb2JhbERlZmF1bHQuanMnO1xuaW1wb3J0IHsgcmVzZXRTb3VyY2VEZWZhdWx0ZXIgfSBmcm9tICcuLi9kYXRhL2hlbHBlci9zb3VyY2VIZWxwZXIuanMnO1xuaW1wb3J0IHsgY29uY2F0SW50ZXJuYWxPcHRpb25zIH0gZnJvbSAnLi9pbnRlcm5hbENvbXBvbmVudENyZWF0b3IuanMnO1xuaW1wb3J0IHsgUGFsZXR0ZU1peGluIH0gZnJvbSAnLi9taXhpbi9wYWxldHRlLmpzJztcbmltcG9ydCB7IGVycm9yLCB3YXJuIH0gZnJvbSAnLi4vdXRpbC9sb2cuanMnOyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gSW50ZXJuYWwgbWV0aG9kIG5hbWVzOlxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxudmFyIHJlQ3JlYXRlU2VyaWVzSW5kaWNlcztcbnZhciBhc3NlcnRTZXJpZXNJbml0aWFsaXplZDtcbnZhciBpbml0QmFzZTtcbnZhciBPUFRJT05fSU5ORVJfS0VZID0gJ1xcMF9lY19pbm5lcic7XG52YXIgT1BUSU9OX0lOTkVSX1ZBTFVFID0gMTtcbnZhciBCVUlUSU5fQ09NUE9ORU5UU19NQVAgPSB7XG4gIGdyaWQ6ICdHcmlkQ29tcG9uZW50JyxcbiAgcG9sYXI6ICdQb2xhckNvbXBvbmVudCcsXG4gIGdlbzogJ0dlb0NvbXBvbmVudCcsXG4gIHNpbmdsZUF4aXM6ICdTaW5nbGVBeGlzQ29tcG9uZW50JyxcbiAgcGFyYWxsZWw6ICdQYXJhbGxlbENvbXBvbmVudCcsXG4gIGNhbGVuZGFyOiAnQ2FsZW5kYXJDb21wb25lbnQnLFxuICBncmFwaGljOiAnR3JhcGhpY0NvbXBvbmVudCcsXG4gIHRvb2xib3g6ICdUb29sYm94Q29tcG9uZW50JyxcbiAgdG9vbHRpcDogJ1Rvb2x0aXBDb21wb25lbnQnLFxuICBheGlzUG9pbnRlcjogJ0F4aXNQb2ludGVyQ29tcG9uZW50JyxcbiAgYnJ1c2g6ICdCcnVzaENvbXBvbmVudCcsXG4gIHRpdGxlOiAnVGl0bGVDb21wb25lbnQnLFxuICB0aW1lbGluZTogJ1RpbWVsaW5lQ29tcG9uZW50JyxcbiAgbWFya1BvaW50OiAnTWFya1BvaW50Q29tcG9uZW50JyxcbiAgbWFya0xpbmU6ICdNYXJrTGluZUNvbXBvbmVudCcsXG4gIG1hcmtBcmVhOiAnTWFya0FyZWFDb21wb25lbnQnLFxuICBsZWdlbmQ6ICdMZWdlbmRDb21wb25lbnQnLFxuICBkYXRhWm9vbTogJ0RhdGFab29tQ29tcG9uZW50JyxcbiAgdmlzdWFsTWFwOiAnVmlzdWFsTWFwQ29tcG9uZW50JyxcbiAgLy8gYXJpYTogJ0FyaWFDb21wb25lbnQnLFxuICAvLyBkYXRhc2V0OiAnRGF0YXNldENvbXBvbmVudCcsXG4gIC8vIERlcGVuZGVuY2llc1xuICB4QXhpczogJ0dyaWRDb21wb25lbnQnLFxuICB5QXhpczogJ0dyaWRDb21wb25lbnQnLFxuICBhbmdsZUF4aXM6ICdQb2xhckNvbXBvbmVudCcsXG4gIHJhZGl1c0F4aXM6ICdQb2xhckNvbXBvbmVudCdcbn07XG52YXIgQlVJTFRJTl9DSEFSVFNfTUFQID0ge1xuICBsaW5lOiAnTGluZUNoYXJ0JyxcbiAgYmFyOiAnQmFyQ2hhcnQnLFxuICBwaWU6ICdQaWVDaGFydCcsXG4gIHNjYXR0ZXI6ICdTY2F0dGVyQ2hhcnQnLFxuICByYWRhcjogJ1JhZGFyQ2hhcnQnLFxuICBtYXA6ICdNYXBDaGFydCcsXG4gIHRyZWU6ICdUcmVlQ2hhcnQnLFxuICB0cmVlbWFwOiAnVHJlZW1hcENoYXJ0JyxcbiAgZ3JhcGg6ICdHcmFwaENoYXJ0JyxcbiAgZ2F1Z2U6ICdHYXVnZUNoYXJ0JyxcbiAgZnVubmVsOiAnRnVubmVsQ2hhcnQnLFxuICBwYXJhbGxlbDogJ1BhcmFsbGVsQ2hhcnQnLFxuICBzYW5rZXk6ICdTYW5rZXlDaGFydCcsXG4gIGJveHBsb3Q6ICdCb3hwbG90Q2hhcnQnLFxuICBjYW5kbGVzdGljazogJ0NhbmRsZXN0aWNrQ2hhcnQnLFxuICBlZmZlY3RTY2F0dGVyOiAnRWZmZWN0U2NhdHRlckNoYXJ0JyxcbiAgbGluZXM6ICdMaW5lc0NoYXJ0JyxcbiAgaGVhdG1hcDogJ0hlYXRtYXBDaGFydCcsXG4gIHBpY3RvcmlhbEJhcjogJ1BpY3RvcmlhbEJhckNoYXJ0JyxcbiAgdGhlbWVSaXZlcjogJ1RoZW1lUml2ZXJDaGFydCcsXG4gIHN1bmJ1cnN0OiAnU3VuYnVyc3RDaGFydCcsXG4gIGN1c3RvbTogJ0N1c3RvbUNoYXJ0J1xufTtcbnZhciBjb21wb25ldHNNaXNzaW5nTG9nUHJpbnRlZCA9IHt9O1xuXG5mdW5jdGlvbiBjaGVja01pc3NpbmdDb21wb25lbnRzKG9wdGlvbikge1xuICBlYWNoKG9wdGlvbiwgZnVuY3Rpb24gKGNvbXBvbmVudE9wdGlvbiwgbWFpblR5cGUpIHtcbiAgICBpZiAoIUNvbXBvbmVudE1vZGVsLmhhc0NsYXNzKG1haW5UeXBlKSkge1xuICAgICAgdmFyIGNvbXBvbmVudEltcG9ydE5hbWUgPSBCVUlUSU5fQ09NUE9ORU5UU19NQVBbbWFpblR5cGVdO1xuXG4gICAgICBpZiAoY29tcG9uZW50SW1wb3J0TmFtZSAmJiAhY29tcG9uZXRzTWlzc2luZ0xvZ1ByaW50ZWRbY29tcG9uZW50SW1wb3J0TmFtZV0pIHtcbiAgICAgICAgZXJyb3IoXCJDb21wb25lbnQgXCIgKyBtYWluVHlwZSArIFwiIGlzIHVzZWQgYnV0IG5vdCBpbXBvcnRlZC5cXG5pbXBvcnQgeyBcIiArIGNvbXBvbmVudEltcG9ydE5hbWUgKyBcIiB9IGZyb20gJ2VjaGFydHMvY29tcG9uZW50cyc7XFxuZWNoYXJ0cy51c2UoW1wiICsgY29tcG9uZW50SW1wb3J0TmFtZSArIFwiXSk7XCIpO1xuICAgICAgICBjb21wb25ldHNNaXNzaW5nTG9nUHJpbnRlZFtjb21wb25lbnRJbXBvcnROYW1lXSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxudmFyIEdsb2JhbE1vZGVsID1cbi8qKiBAY2xhc3MgKi9cbmZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgX19leHRlbmRzKEdsb2JhbE1vZGVsLCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIEdsb2JhbE1vZGVsKCkge1xuICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgfVxuXG4gIEdsb2JhbE1vZGVsLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKG9wdGlvbiwgcGFyZW50TW9kZWwsIGVjTW9kZWwsIHRoZW1lLCBsb2NhbGUsIG9wdGlvbk1hbmFnZXIpIHtcbiAgICB0aGVtZSA9IHRoZW1lIHx8IHt9O1xuICAgIHRoaXMub3B0aW9uID0gbnVsbDsgLy8gTWFyayBhcyBub3QgaW5pdGlhbGl6ZWQuXG5cbiAgICB0aGlzLl90aGVtZSA9IG5ldyBNb2RlbCh0aGVtZSk7XG4gICAgdGhpcy5fbG9jYWxlID0gbmV3IE1vZGVsKGxvY2FsZSk7XG4gICAgdGhpcy5fb3B0aW9uTWFuYWdlciA9IG9wdGlvbk1hbmFnZXI7XG4gIH07XG5cbiAgR2xvYmFsTW9kZWwucHJvdG90eXBlLnNldE9wdGlvbiA9IGZ1bmN0aW9uIChvcHRpb24sIG9wdHMsIG9wdGlvblByZXByb2Nlc3NvckZ1bmNzKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGFzc2VydChvcHRpb24gIT0gbnVsbCwgJ29wdGlvbiBpcyBudWxsL3VuZGVmaW5lZCcpO1xuICAgICAgYXNzZXJ0KG9wdGlvbltPUFRJT05fSU5ORVJfS0VZXSAhPT0gT1BUSU9OX0lOTkVSX1ZBTFVFLCAncGxlYXNlIHVzZSBjaGFydC5nZXRPcHRpb24oKScpO1xuICAgIH1cblxuICAgIHZhciBpbm5lck9wdCA9IG5vcm1hbGl6ZVNldE9wdGlvbklucHV0KG9wdHMpO1xuXG4gICAgdGhpcy5fb3B0aW9uTWFuYWdlci5zZXRPcHRpb24ob3B0aW9uLCBvcHRpb25QcmVwcm9jZXNzb3JGdW5jcywgaW5uZXJPcHQpO1xuXG4gICAgdGhpcy5fcmVzZXRPcHRpb24obnVsbCwgaW5uZXJPcHQpO1xuICB9O1xuICAvKipcclxuICAgKiBAcGFyYW0gdHlwZSBudWxsL3VuZGVmaW5lZDogcmVzZXQgYWxsLlxyXG4gICAqICAgICAgICAncmVjcmVhdGUnOiBmb3JjZSByZWNyZWF0ZSBhbGwuXHJcbiAgICogICAgICAgICd0aW1lbGluZSc6IG9ubHkgcmVzZXQgdGltZWxpbmUgb3B0aW9uXHJcbiAgICogICAgICAgICdtZWRpYSc6IG9ubHkgcmVzZXQgbWVkaWEgcXVlcnkgb3B0aW9uXHJcbiAgICogQHJldHVybiBXaGV0aGVyIG9wdGlvbiBjaGFuZ2VkLlxyXG4gICAqL1xuXG5cbiAgR2xvYmFsTW9kZWwucHJvdG90eXBlLnJlc2V0T3B0aW9uID0gZnVuY3Rpb24gKHR5cGUsIG9wdCkge1xuICAgIHJldHVybiB0aGlzLl9yZXNldE9wdGlvbih0eXBlLCBub3JtYWxpemVTZXRPcHRpb25JbnB1dChvcHQpKTtcbiAgfTtcblxuICBHbG9iYWxNb2RlbC5wcm90b3R5cGUuX3Jlc2V0T3B0aW9uID0gZnVuY3Rpb24gKHR5cGUsIG9wdCkge1xuICAgIHZhciBvcHRpb25DaGFuZ2VkID0gZmFsc2U7XG4gICAgdmFyIG9wdGlvbk1hbmFnZXIgPSB0aGlzLl9vcHRpb25NYW5hZ2VyO1xuXG4gICAgaWYgKCF0eXBlIHx8IHR5cGUgPT09ICdyZWNyZWF0ZScpIHtcbiAgICAgIHZhciBiYXNlT3B0aW9uID0gb3B0aW9uTWFuYWdlci5tb3VudE9wdGlvbih0eXBlID09PSAncmVjcmVhdGUnKTtcblxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgY2hlY2tNaXNzaW5nQ29tcG9uZW50cyhiYXNlT3B0aW9uKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLm9wdGlvbiB8fCB0eXBlID09PSAncmVjcmVhdGUnKSB7XG4gICAgICAgIGluaXRCYXNlKHRoaXMsIGJhc2VPcHRpb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZXN0b3JlRGF0YSgpO1xuXG4gICAgICAgIHRoaXMuX21lcmdlT3B0aW9uKGJhc2VPcHRpb24sIG9wdCk7XG4gICAgICB9XG5cbiAgICAgIG9wdGlvbkNoYW5nZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmICh0eXBlID09PSAndGltZWxpbmUnIHx8IHR5cGUgPT09ICdtZWRpYScpIHtcbiAgICAgIHRoaXMucmVzdG9yZURhdGEoKTtcbiAgICB9IC8vIEJ5IGRlc2lnbiwgaWYgYHNldE9wdGlvbihvcHRpb24yKWAgYXQgdGhlIHNlY29uZCB0aW1lLCBhbmQgYG9wdGlvbjJgIGlzIGEgYEVDVW5pdE9wdGlvbmAsXG4gICAgLy8gaXQgc2hvdWxkIGJldHRlciBub3QgaGF2ZSB0aGUgc2FtZSBwcm9wcyB3aXRoIGBNZWRpYVVuaXRbJ29wdGlvbiddYC5cbiAgICAvLyBCZWNhdXNlIGVpdGhlciBgb3B0aW9uMmAgb3IgYE1lZGlhVW5pdFsnb3B0aW9uJ11gIHdpbGwgYmUgYWx3YXlzIG1lcmdlZCB0byBcImN1cnJlbnQgb3B0aW9uXCJcbiAgICAvLyByYXRoZXIgdGhhbiBvcmlnaW5hbCBcImJhc2VPcHRpb25cIi4gSWYgdGhleSBib3RoIG92ZXJyaWRlIGEgcHJvcCwgdGhlIHJlc3VsdCBtaWdodCBiZVxuICAgIC8vIHVuZXhwZWN0ZWQgd2hlbiBtZWRpYSBzdGF0ZSBjaGFuZ2VkIGFmdGVyIGBzZXRPcHRpb25gIGNhbGxlZC5cbiAgICAvLyBJZiB3ZSByZWFsbHkgbmVlZCB0byBtb2RpZnkgYSBwcm9wcyBpbiBlYWNoIGBNZWRpYVVuaXRbJ29wdGlvbiddYCwgdXNlIHRoZSBmdWxsIHZlcnNpb25cbiAgICAvLyAoYHtiYXNlT3B0aW9uLCBtZWRpYX1gKSBpbiBgc2V0T3B0aW9uYC5cbiAgICAvLyBGb3IgYHRpbWVsaW5lYCwgdGhlIGNhc2UgaXMgdGhlIHNhbWUuXG5cblxuICAgIGlmICghdHlwZSB8fCB0eXBlID09PSAncmVjcmVhdGUnIHx8IHR5cGUgPT09ICd0aW1lbGluZScpIHtcbiAgICAgIHZhciB0aW1lbGluZU9wdGlvbiA9IG9wdGlvbk1hbmFnZXIuZ2V0VGltZWxpbmVPcHRpb24odGhpcyk7XG5cbiAgICAgIGlmICh0aW1lbGluZU9wdGlvbikge1xuICAgICAgICBvcHRpb25DaGFuZ2VkID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLl9tZXJnZU9wdGlvbih0aW1lbGluZU9wdGlvbiwgb3B0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXR5cGUgfHwgdHlwZSA9PT0gJ3JlY3JlYXRlJyB8fCB0eXBlID09PSAnbWVkaWEnKSB7XG4gICAgICB2YXIgbWVkaWFPcHRpb25zID0gb3B0aW9uTWFuYWdlci5nZXRNZWRpYU9wdGlvbih0aGlzKTtcblxuICAgICAgaWYgKG1lZGlhT3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgZWFjaChtZWRpYU9wdGlvbnMsIGZ1bmN0aW9uIChtZWRpYU9wdGlvbikge1xuICAgICAgICAgIG9wdGlvbkNoYW5nZWQgPSB0cnVlO1xuXG4gICAgICAgICAgdGhpcy5fbWVyZ2VPcHRpb24obWVkaWFPcHRpb24sIG9wdCk7XG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvcHRpb25DaGFuZ2VkO1xuICB9O1xuXG4gIEdsb2JhbE1vZGVsLnByb3RvdHlwZS5tZXJnZU9wdGlvbiA9IGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICB0aGlzLl9tZXJnZU9wdGlvbihvcHRpb24sIG51bGwpO1xuICB9O1xuXG4gIEdsb2JhbE1vZGVsLnByb3RvdHlwZS5fbWVyZ2VPcHRpb24gPSBmdW5jdGlvbiAobmV3T3B0aW9uLCBvcHQpIHtcbiAgICB2YXIgb3B0aW9uID0gdGhpcy5vcHRpb247XG4gICAgdmFyIGNvbXBvbmVudHNNYXAgPSB0aGlzLl9jb21wb25lbnRzTWFwO1xuICAgIHZhciBjb21wb25lbnRzQ291bnQgPSB0aGlzLl9jb21wb25lbnRzQ291bnQ7XG4gICAgdmFyIG5ld0NtcHRUeXBlcyA9IFtdO1xuICAgIHZhciBuZXdDbXB0VHlwZU1hcCA9IGNyZWF0ZUhhc2hNYXAoKTtcbiAgICB2YXIgcmVwbGFjZU1lcmdlTWFpblR5cGVNYXAgPSBvcHQgJiYgb3B0LnJlcGxhY2VNZXJnZU1haW5UeXBlTWFwO1xuICAgIHJlc2V0U291cmNlRGVmYXVsdGVyKHRoaXMpOyAvLyBJZiBubyBjb21wb25lbnQgY2xhc3MsIG1lcmdlIGRpcmVjdGx5LlxuICAgIC8vIEZvciBleGFtcGxlOiBjb2xvciwgYW5pbWFpdG9uIG9wdGlvbnMsIGV0Yy5cblxuICAgIGVhY2gobmV3T3B0aW9uLCBmdW5jdGlvbiAoY29tcG9uZW50T3B0aW9uLCBtYWluVHlwZSkge1xuICAgICAgaWYgKGNvbXBvbmVudE9wdGlvbiA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFDb21wb25lbnRNb2RlbC5oYXNDbGFzcyhtYWluVHlwZSkpIHtcbiAgICAgICAgLy8gZ2xvYmFsU2V0dGluZ1Rhc2suZGlydHkoKTtcbiAgICAgICAgb3B0aW9uW21haW5UeXBlXSA9IG9wdGlvblttYWluVHlwZV0gPT0gbnVsbCA/IGNsb25lKGNvbXBvbmVudE9wdGlvbikgOiBtZXJnZShvcHRpb25bbWFpblR5cGVdLCBjb21wb25lbnRPcHRpb24sIHRydWUpO1xuICAgICAgfSBlbHNlIGlmIChtYWluVHlwZSkge1xuICAgICAgICBuZXdDbXB0VHlwZXMucHVzaChtYWluVHlwZSk7XG4gICAgICAgIG5ld0NtcHRUeXBlTWFwLnNldChtYWluVHlwZSwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAocmVwbGFjZU1lcmdlTWFpblR5cGVNYXApIHtcbiAgICAgIC8vIElmIHRoZXJlIGlzIGEgbWFpblR5cGUgYHh4eGAgaW4gYHJlcGxhY2VNZXJnZWAgYnV0IG5vdCBkZWNsYXJlZCBpbiBvcHRpb24sXG4gICAgICAvLyB3ZSB0cmFkZSBpdCBhcyBpdCBpcyBkZWNsYXJlZCBpbiBvcHRpb24gYXMgYHt4eHg6IFtdfWAuIEJlY2F1c2U6XG4gICAgICAvLyAoMSkgZm9yIG5vcm1hbCBtZXJnZSwgYHt4eHg6IG51bGwvdW5kZWZpbmVkfWAgYXJlIHRoZSBzYW1lIG1lYW5pbmcgYXMgYHt4eHg6IFtdfWAuXG4gICAgICAvLyAoMikgc29tZSBwcmVwcm9jZXNzb3IgbWF5IGNvbnZlcnQgc29tZSBvZiBge3h4eDogbnVsbC91bmRlZmluZWR9YCB0byBge3h4eDogW119YC5cbiAgICAgIHJlcGxhY2VNZXJnZU1haW5UeXBlTWFwLmVhY2goZnVuY3Rpb24gKHZhbCwgbWFpblR5cGVJblJlcGxhY2VNZXJnZSkge1xuICAgICAgICBpZiAoQ29tcG9uZW50TW9kZWwuaGFzQ2xhc3MobWFpblR5cGVJblJlcGxhY2VNZXJnZSkgJiYgIW5ld0NtcHRUeXBlTWFwLmdldChtYWluVHlwZUluUmVwbGFjZU1lcmdlKSkge1xuICAgICAgICAgIG5ld0NtcHRUeXBlcy5wdXNoKG1haW5UeXBlSW5SZXBsYWNlTWVyZ2UpO1xuICAgICAgICAgIG5ld0NtcHRUeXBlTWFwLnNldChtYWluVHlwZUluUmVwbGFjZU1lcmdlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgQ29tcG9uZW50TW9kZWwudG9wb2xvZ2ljYWxUcmF2ZWwobmV3Q21wdFR5cGVzLCBDb21wb25lbnRNb2RlbC5nZXRBbGxDbGFzc01haW5UeXBlcygpLCB2aXNpdENvbXBvbmVudCwgdGhpcyk7XG5cbiAgICBmdW5jdGlvbiB2aXNpdENvbXBvbmVudChtYWluVHlwZSkge1xuICAgICAgdmFyIG5ld0NtcHRPcHRpb25MaXN0ID0gY29uY2F0SW50ZXJuYWxPcHRpb25zKHRoaXMsIG1haW5UeXBlLCBtb2RlbFV0aWwubm9ybWFsaXplVG9BcnJheShuZXdPcHRpb25bbWFpblR5cGVdKSk7XG4gICAgICB2YXIgb2xkQ21wdExpc3QgPSBjb21wb25lbnRzTWFwLmdldChtYWluVHlwZSk7XG4gICAgICB2YXIgbWVyZ2VNb2RlID0gLy8gYCFvbGRDbXB0TGlzdGAgbWVhbnMgaW5pdC4gU2VlIHRoZSBjb21tZW50IGluIGBtYXBwaW5nVG9FeGlzdHNgXG4gICAgICAhb2xkQ21wdExpc3QgPyAncmVwbGFjZUFsbCcgOiByZXBsYWNlTWVyZ2VNYWluVHlwZU1hcCAmJiByZXBsYWNlTWVyZ2VNYWluVHlwZU1hcC5nZXQobWFpblR5cGUpID8gJ3JlcGxhY2VNZXJnZScgOiAnbm9ybWFsTWVyZ2UnO1xuICAgICAgdmFyIG1hcHBpbmdSZXN1bHQgPSBtb2RlbFV0aWwubWFwcGluZ1RvRXhpc3RzKG9sZENtcHRMaXN0LCBuZXdDbXB0T3B0aW9uTGlzdCwgbWVyZ2VNb2RlKTsgLy8gU2V0IG1haW5UeXBlIGFuZCBjb21wbGV0ZSBzdWJUeXBlLlxuXG4gICAgICBtb2RlbFV0aWwuc2V0Q29tcG9uZW50VHlwZVRvS2V5SW5mbyhtYXBwaW5nUmVzdWx0LCBtYWluVHlwZSwgQ29tcG9uZW50TW9kZWwpOyAvLyBFbXB0eSBpdCBiZWZvcmUgdGhlIHRyYXZlbCwgaW4gb3JkZXIgdG8gcHJldmVudCBgdGhpcy5fY29tcG9uZW50c01hcGBcbiAgICAgIC8vIGZyb20gYmVpbmcgdXNlZCBpbiB0aGUgYGluaXRgL2BtZXJnZU9wdGlvbmAvYG9wdGlvblVwZGF0ZWRgIG9mIHNvbWVcbiAgICAgIC8vIGNvbXBvbmVudHMsIHdoaWNoIGlzIHByb2JhYmx5IGluY29ycmVjdCBsb2dpYy5cblxuICAgICAgb3B0aW9uW21haW5UeXBlXSA9IG51bGw7XG4gICAgICBjb21wb25lbnRzTWFwLnNldChtYWluVHlwZSwgbnVsbCk7XG4gICAgICBjb21wb25lbnRzQ291bnQuc2V0KG1haW5UeXBlLCAwKTtcbiAgICAgIHZhciBvcHRpb25zQnlNYWluVHlwZSA9IFtdO1xuICAgICAgdmFyIGNtcHRzQnlNYWluVHlwZSA9IFtdO1xuICAgICAgdmFyIGNtcHRzQ291bnRCeU1haW5UeXBlID0gMDtcbiAgICAgIHZhciB0b29sdGlwRXhpc3RzO1xuICAgICAgdmFyIHRvb2x0aXBXYXJuaW5nTG9nZ2VkO1xuICAgICAgZWFjaChtYXBwaW5nUmVzdWx0LCBmdW5jdGlvbiAocmVzdWx0SXRlbSwgaW5kZXgpIHtcbiAgICAgICAgdmFyIGNvbXBvbmVudE1vZGVsID0gcmVzdWx0SXRlbS5leGlzdGluZztcbiAgICAgICAgdmFyIG5ld0NtcHRPcHRpb24gPSByZXN1bHRJdGVtLm5ld09wdGlvbjtcblxuICAgICAgICBpZiAoIW5ld0NtcHRPcHRpb24pIHtcbiAgICAgICAgICBpZiAoY29tcG9uZW50TW9kZWwpIHtcbiAgICAgICAgICAgIC8vIENvbnNpZGVyIHdoZXJlIGlzIG5vIG5ldyBvcHRpb24gYW5kIHNob3VsZCBiZSBtZXJnZWQgdXNpbmcge30sXG4gICAgICAgICAgICAvLyBzZWUgcmVtb3ZlRWRnZUFuZEFkZCBpbiB0b3BvbG9naWNhbFRyYXZlbCBhbmRcbiAgICAgICAgICAgIC8vIENvbXBvbmVudE1vZGVsLmdldEFsbENsYXNzTWFpblR5cGVzLlxuICAgICAgICAgICAgY29tcG9uZW50TW9kZWwubWVyZ2VPcHRpb24oe30sIHRoaXMpO1xuICAgICAgICAgICAgY29tcG9uZW50TW9kZWwub3B0aW9uVXBkYXRlZCh7fSwgZmFsc2UpO1xuICAgICAgICAgIH0gLy8gSWYgbm8gYm90aCBgcmVzdWx0SXRlbS5leGlzdGAgYW5kIGByZXN1bHRJdGVtLm9wdGlvbmAsXG4gICAgICAgICAgLy8gZWl0aGVyIGl0IGlzIGluIGByZXBsYWNlTWVyZ2VgIGFuZCBub3QgbWF0Y2hlZCBieSBhbnkgaWQsXG4gICAgICAgICAgLy8gb3IgaXQgaGFzIGJlZW4gcmVtb3ZlZCBpbiBwcmV2aW91cyBgcmVwbGFjZU1lcmdlYCBhbmQgbGVmdCBhIFwiaG9sZVwiIGluIHRoaXMgY29tcG9uZW50IGluZGV4LlxuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGlzU2VyaWVzVHlwZSA9IG1haW5UeXBlID09PSAnc2VyaWVzJztcbiAgICAgICAgICB2YXIgQ29tcG9uZW50TW9kZWxDbGFzcyA9IENvbXBvbmVudE1vZGVsLmdldENsYXNzKG1haW5UeXBlLCByZXN1bHRJdGVtLmtleUluZm8uc3ViVHlwZSwgIWlzU2VyaWVzVHlwZSAvLyBHaXZlIGEgbW9yZSBkZXRhaWxlZCB3YXJuIGxhdGVyIGlmIHNlcmllcyBkb24ndCBleGlzdHNcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgaWYgKCFDb21wb25lbnRNb2RlbENsYXNzKSB7XG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICB2YXIgc3ViVHlwZSA9IHJlc3VsdEl0ZW0ua2V5SW5mby5zdWJUeXBlO1xuICAgICAgICAgICAgICB2YXIgc2VyaWVzSW1wb3J0TmFtZSA9IEJVSUxUSU5fQ0hBUlRTX01BUFtzdWJUeXBlXTtcblxuICAgICAgICAgICAgICBpZiAoIWNvbXBvbmV0c01pc3NpbmdMb2dQcmludGVkW3N1YlR5cGVdKSB7XG4gICAgICAgICAgICAgICAgY29tcG9uZXRzTWlzc2luZ0xvZ1ByaW50ZWRbc3ViVHlwZV0gPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgaWYgKHNlcmllc0ltcG9ydE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgIGVycm9yKFwiU2VyaWVzIFwiICsgc3ViVHlwZSArIFwiIGlzIHVzZWQgYnV0IG5vdCBpbXBvcnRlZC5cXG5pbXBvcnQgeyBcIiArIHNlcmllc0ltcG9ydE5hbWUgKyBcIiB9IGZyb20gJ2VjaGFydHMvY2hhcnRzJztcXG5lY2hhcnRzLnVzZShbXCIgKyBzZXJpZXNJbXBvcnROYW1lICsgXCJdKTtcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGVycm9yKFwiVW5rbm93biBzZXJpZXMgXCIgKyBzdWJUeXBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH0gLy8gVE9ETyBCZWZvcmUgbXVsdGlwbGUgdG9vbHRpcHMgZ2V0IHN1cHBvcnRlZCwgd2UgZG8gdGhpcyBjaGVjayB0byBhdm9pZCB1bmV4cGVjdGVkIGV4Y2VwdGlvbi5cblxuXG4gICAgICAgICAgaWYgKG1haW5UeXBlID09PSAndG9vbHRpcCcpIHtcbiAgICAgICAgICAgIGlmICh0b29sdGlwRXhpc3RzKSB7XG4gICAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0b29sdGlwV2FybmluZ0xvZ2dlZCkge1xuICAgICAgICAgICAgICAgICAgd2FybignQ3VycmVudGx5IG9ubHkgb25lIHRvb2x0aXAgY29tcG9uZW50IGlzIGFsbG93ZWQuJyk7XG4gICAgICAgICAgICAgICAgICB0b29sdGlwV2FybmluZ0xvZ2dlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0b29sdGlwRXhpc3RzID0gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoY29tcG9uZW50TW9kZWwgJiYgY29tcG9uZW50TW9kZWwuY29uc3RydWN0b3IgPT09IENvbXBvbmVudE1vZGVsQ2xhc3MpIHtcbiAgICAgICAgICAgIGNvbXBvbmVudE1vZGVsLm5hbWUgPSByZXN1bHRJdGVtLmtleUluZm8ubmFtZTsgLy8gY29tcG9uZW50TW9kZWwuc2V0dGluZ1Rhc2sgJiYgY29tcG9uZW50TW9kZWwuc2V0dGluZ1Rhc2suZGlydHkoKTtcblxuICAgICAgICAgICAgY29tcG9uZW50TW9kZWwubWVyZ2VPcHRpb24obmV3Q21wdE9wdGlvbiwgdGhpcyk7XG4gICAgICAgICAgICBjb21wb25lbnRNb2RlbC5vcHRpb25VcGRhdGVkKG5ld0NtcHRPcHRpb24sIGZhbHNlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gUEVORElORyBHbG9iYWwgYXMgcGFyZW50ID9cbiAgICAgICAgICAgIHZhciBleHRyYU9wdCA9IGV4dGVuZCh7XG4gICAgICAgICAgICAgIGNvbXBvbmVudEluZGV4OiBpbmRleFxuICAgICAgICAgICAgfSwgcmVzdWx0SXRlbS5rZXlJbmZvKTtcbiAgICAgICAgICAgIGNvbXBvbmVudE1vZGVsID0gbmV3IENvbXBvbmVudE1vZGVsQ2xhc3MobmV3Q21wdE9wdGlvbiwgdGhpcywgdGhpcywgZXh0cmFPcHQpOyAvLyBBc3NpZ24gYGtleUluZm9gXG5cbiAgICAgICAgICAgIGV4dGVuZChjb21wb25lbnRNb2RlbCwgZXh0cmFPcHQpO1xuXG4gICAgICAgICAgICBpZiAocmVzdWx0SXRlbS5icmFuZE5ldykge1xuICAgICAgICAgICAgICBjb21wb25lbnRNb2RlbC5fX3JlcXVpcmVOZXdWaWV3ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29tcG9uZW50TW9kZWwuaW5pdChuZXdDbXB0T3B0aW9uLCB0aGlzLCB0aGlzKTsgLy8gQ2FsbCBvcHRpb25VcGRhdGVkIGFmdGVyIGluaXQuXG4gICAgICAgICAgICAvLyBuZXdDbXB0T3B0aW9uIGhhcyBiZWVuIHVzZWQgYXMgY29tcG9uZW50TW9kZWwub3B0aW9uXG4gICAgICAgICAgICAvLyBhbmQgbWF5IGJlIG1lcmdlZCB3aXRoIHRoZW1lIGFuZCBkZWZhdWx0LCBzbyBwYXNzIG51bGxcbiAgICAgICAgICAgIC8vIHRvIGF2b2lkIGNvbmZ1c2lvbi5cblxuICAgICAgICAgICAgY29tcG9uZW50TW9kZWwub3B0aW9uVXBkYXRlZChudWxsLCB0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29tcG9uZW50TW9kZWwpIHtcbiAgICAgICAgICBvcHRpb25zQnlNYWluVHlwZS5wdXNoKGNvbXBvbmVudE1vZGVsLm9wdGlvbik7XG4gICAgICAgICAgY21wdHNCeU1haW5UeXBlLnB1c2goY29tcG9uZW50TW9kZWwpO1xuICAgICAgICAgIGNtcHRzQ291bnRCeU1haW5UeXBlKys7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gQWx3YXlzIGRvIGFzc2lnbiB0byBhdm9pZCBlbGlkZWQgaXRlbSBpbiBhcnJheS5cbiAgICAgICAgICBvcHRpb25zQnlNYWluVHlwZS5wdXNoKHZvaWQgMCk7XG4gICAgICAgICAgY21wdHNCeU1haW5UeXBlLnB1c2godm9pZCAwKTtcbiAgICAgICAgfVxuICAgICAgfSwgdGhpcyk7XG4gICAgICBvcHRpb25bbWFpblR5cGVdID0gb3B0aW9uc0J5TWFpblR5cGU7XG4gICAgICBjb21wb25lbnRzTWFwLnNldChtYWluVHlwZSwgY21wdHNCeU1haW5UeXBlKTtcbiAgICAgIGNvbXBvbmVudHNDb3VudC5zZXQobWFpblR5cGUsIGNtcHRzQ291bnRCeU1haW5UeXBlKTsgLy8gQmFja3VwIHNlcmllcyBmb3IgZmlsdGVyaW5nLlxuXG4gICAgICBpZiAobWFpblR5cGUgPT09ICdzZXJpZXMnKSB7XG4gICAgICAgIHJlQ3JlYXRlU2VyaWVzSW5kaWNlcyh0aGlzKTtcbiAgICAgIH1cbiAgICB9IC8vIElmIG5vIHNlcmllcyBkZWNsYXJlZCwgZW5zdXJlIGBfc2VyaWVzSW5kaWNlc2AgaW5pdGlhbGl6ZWQuXG5cblxuICAgIGlmICghdGhpcy5fc2VyaWVzSW5kaWNlcykge1xuICAgICAgcmVDcmVhdGVTZXJpZXNJbmRpY2VzKHRoaXMpO1xuICAgIH1cbiAgfTtcbiAgLyoqXHJcbiAgICogR2V0IG9wdGlvbiBmb3Igb3V0cHV0IChjbG9uZWQgb3B0aW9uIGFuZCBpbm5lciBpbmZvIHJlbW92ZWQpXHJcbiAgICovXG5cblxuICBHbG9iYWxNb2RlbC5wcm90b3R5cGUuZ2V0T3B0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvcHRpb24gPSBjbG9uZSh0aGlzLm9wdGlvbik7XG4gICAgZWFjaChvcHRpb24sIGZ1bmN0aW9uIChvcHRJbk1haW5UeXBlLCBtYWluVHlwZSkge1xuICAgICAgaWYgKENvbXBvbmVudE1vZGVsLmhhc0NsYXNzKG1haW5UeXBlKSkge1xuICAgICAgICB2YXIgb3B0cyA9IG1vZGVsVXRpbC5ub3JtYWxpemVUb0FycmF5KG9wdEluTWFpblR5cGUpOyAvLyBJbm5lciBjbXB0cyBuZWVkIHRvIGJlIHJlbW92ZWQuXG4gICAgICAgIC8vIElubmVyIGNtcHRzIG1pZ2h0IG5vdCBiZSBhdCBsYXN0IHNpbmNlIGVjNS4wLCBidXQgc3RpbGxcbiAgICAgICAgLy8gY29tcGF0aWJsZSBmb3IgdXNlcnM6IGlmIGlubmVyIGNtcHQgYXQgbGFzdCwgc3BsaWNlIHRoZSByZXR1cm5lZCBhcnJheS5cblxuICAgICAgICB2YXIgcmVhbExlbiA9IG9wdHMubGVuZ3RoO1xuICAgICAgICB2YXIgbWV0Tm9uSW5uZXIgPSBmYWxzZTtcblxuICAgICAgICBmb3IgKHZhciBpID0gcmVhbExlbiAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgLy8gUmVtb3ZlIG9wdGlvbnMgd2l0aCBpbm5lciBpZC5cbiAgICAgICAgICBpZiAob3B0c1tpXSAmJiAhbW9kZWxVdGlsLmlzQ29tcG9uZW50SWRJbnRlcm5hbChvcHRzW2ldKSkge1xuICAgICAgICAgICAgbWV0Tm9uSW5uZXIgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvcHRzW2ldID0gbnVsbDtcbiAgICAgICAgICAgICFtZXROb25Jbm5lciAmJiByZWFsTGVuLS07XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgb3B0cy5sZW5ndGggPSByZWFsTGVuO1xuICAgICAgICBvcHRpb25bbWFpblR5cGVdID0gb3B0cztcbiAgICAgIH1cbiAgICB9KTtcbiAgICBkZWxldGUgb3B0aW9uW09QVElPTl9JTk5FUl9LRVldO1xuICAgIHJldHVybiBvcHRpb247XG4gIH07XG5cbiAgR2xvYmFsTW9kZWwucHJvdG90eXBlLmdldFRoZW1lID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl90aGVtZTtcbiAgfTtcblxuICBHbG9iYWxNb2RlbC5wcm90b3R5cGUuZ2V0TG9jYWxlTW9kZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xvY2FsZTtcbiAgfTtcblxuICBHbG9iYWxNb2RlbC5wcm90b3R5cGUuc2V0VXBkYXRlUGF5bG9hZCA9IGZ1bmN0aW9uIChwYXlsb2FkKSB7XG4gICAgdGhpcy5fcGF5bG9hZCA9IHBheWxvYWQ7XG4gIH07XG5cbiAgR2xvYmFsTW9kZWwucHJvdG90eXBlLmdldFVwZGF0ZVBheWxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BheWxvYWQ7XG4gIH07XG4gIC8qKlxyXG4gICAqIEBwYXJhbSBpZHggSWYgbm90IHNwZWNpZmllZCwgcmV0dXJuIHRoZSBmaXJzdCBvbmUuXHJcbiAgICovXG5cblxuICBHbG9iYWxNb2RlbC5wcm90b3R5cGUuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24gKG1haW5UeXBlLCBpZHgpIHtcbiAgICB2YXIgbGlzdCA9IHRoaXMuX2NvbXBvbmVudHNNYXAuZ2V0KG1haW5UeXBlKTtcblxuICAgIGlmIChsaXN0KSB7XG4gICAgICB2YXIgY21wdCA9IGxpc3RbaWR4IHx8IDBdO1xuXG4gICAgICBpZiAoY21wdCkge1xuICAgICAgICByZXR1cm4gY21wdDtcbiAgICAgIH0gZWxzZSBpZiAoaWR4ID09IG51bGwpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGxpc3RbaV0pIHtcbiAgICAgICAgICAgIHJldHVybiBsaXN0W2ldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgLyoqXHJcbiAgICogQHJldHVybiBOZXZlciBiZSBudWxsL3VuZGVmaW5lZC5cclxuICAgKi9cblxuXG4gIEdsb2JhbE1vZGVsLnByb3RvdHlwZS5xdWVyeUNvbXBvbmVudHMgPSBmdW5jdGlvbiAoY29uZGl0aW9uKSB7XG4gICAgdmFyIG1haW5UeXBlID0gY29uZGl0aW9uLm1haW5UeXBlO1xuXG4gICAgaWYgKCFtYWluVHlwZSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHZhciBpbmRleCA9IGNvbmRpdGlvbi5pbmRleDtcbiAgICB2YXIgaWQgPSBjb25kaXRpb24uaWQ7XG4gICAgdmFyIG5hbWUgPSBjb25kaXRpb24ubmFtZTtcblxuICAgIHZhciBjbXB0cyA9IHRoaXMuX2NvbXBvbmVudHNNYXAuZ2V0KG1haW5UeXBlKTtcblxuICAgIGlmICghY21wdHMgfHwgIWNtcHRzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHZhciByZXN1bHQ7XG5cbiAgICBpZiAoaW5kZXggIT0gbnVsbCkge1xuICAgICAgcmVzdWx0ID0gW107XG4gICAgICBlYWNoKG1vZGVsVXRpbC5ub3JtYWxpemVUb0FycmF5KGluZGV4KSwgZnVuY3Rpb24gKGlkeCkge1xuICAgICAgICBjbXB0c1tpZHhdICYmIHJlc3VsdC5wdXNoKGNtcHRzW2lkeF0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICByZXN1bHQgPSBxdWVyeUJ5SWRPck5hbWUoJ2lkJywgaWQsIGNtcHRzKTtcbiAgICB9IGVsc2UgaWYgKG5hbWUgIT0gbnVsbCkge1xuICAgICAgcmVzdWx0ID0gcXVlcnlCeUlkT3JOYW1lKCduYW1lJywgbmFtZSwgY21wdHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZXR1cm4gYWxsIG5vbi1lbXB0eSBjb21wb25lbnRzIGluIHRoYXQgbWFpblR5cGVcbiAgICAgIHJlc3VsdCA9IGZpbHRlcihjbXB0cywgZnVuY3Rpb24gKGNtcHQpIHtcbiAgICAgICAgcmV0dXJuICEhY21wdDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBmaWx0ZXJCeVN1YlR5cGUocmVzdWx0LCBjb25kaXRpb24pO1xuICB9O1xuICAvKipcclxuICAgKiBUaGUgaW50ZXJmYWNlIGlzIGRpZmZlcmVudCBmcm9tIHF1ZXJ5Q29tcG9uZW50cyxcclxuICAgKiB3aGljaCBpcyBjb252ZW5pZW50IGZvciBpbm5lciB1c2FnZS5cclxuICAgKlxyXG4gICAqIEB1c2FnZVxyXG4gICAqIGxldCByZXN1bHQgPSBmaW5kQ29tcG9uZW50cyhcclxuICAgKiAgICAge21haW5UeXBlOiAnZGF0YVpvb20nLCBxdWVyeToge2RhdGFab29tSWQ6ICdhYmMnfX1cclxuICAgKiApO1xyXG4gICAqIGxldCByZXN1bHQgPSBmaW5kQ29tcG9uZW50cyhcclxuICAgKiAgICAge21haW5UeXBlOiAnc2VyaWVzJywgc3ViVHlwZTogJ3BpZScsIHF1ZXJ5OiB7c2VyaWVzTmFtZTogJ3Vpbyd9fVxyXG4gICAqICk7XHJcbiAgICogbGV0IHJlc3VsdCA9IGZpbmRDb21wb25lbnRzKFxyXG4gICAqICAgICB7bWFpblR5cGU6ICdzZXJpZXMnLFxyXG4gICAqICAgICBmaWx0ZXI6IGZ1bmN0aW9uIChtb2RlbCwgaW5kZXgpIHsuLi59fVxyXG4gICAqICk7XHJcbiAgICogLy8gcmVzdWx0IGxpa2UgW2NvbXBvbmVudDAsIGNvbXBvbm5ldDEsIC4uLl1cclxuICAgKi9cblxuXG4gIEdsb2JhbE1vZGVsLnByb3RvdHlwZS5maW5kQ29tcG9uZW50cyA9IGZ1bmN0aW9uIChjb25kaXRpb24pIHtcbiAgICB2YXIgcXVlcnkgPSBjb25kaXRpb24ucXVlcnk7XG4gICAgdmFyIG1haW5UeXBlID0gY29uZGl0aW9uLm1haW5UeXBlO1xuICAgIHZhciBxdWVyeUNvbmQgPSBnZXRRdWVyeUNvbmQocXVlcnkpO1xuICAgIHZhciByZXN1bHQgPSBxdWVyeUNvbmQgPyB0aGlzLnF1ZXJ5Q29tcG9uZW50cyhxdWVyeUNvbmQpIC8vIFJldHJpZXZlIGFsbCBub24tZW1wdHkgY29tcG9uZW50cy5cbiAgICA6IGZpbHRlcih0aGlzLl9jb21wb25lbnRzTWFwLmdldChtYWluVHlwZSksIGZ1bmN0aW9uIChjbXB0KSB7XG4gICAgICByZXR1cm4gISFjbXB0O1xuICAgIH0pO1xuICAgIHJldHVybiBkb0ZpbHRlcihmaWx0ZXJCeVN1YlR5cGUocmVzdWx0LCBjb25kaXRpb24pKTtcblxuICAgIGZ1bmN0aW9uIGdldFF1ZXJ5Q29uZChxKSB7XG4gICAgICB2YXIgaW5kZXhBdHRyID0gbWFpblR5cGUgKyAnSW5kZXgnO1xuICAgICAgdmFyIGlkQXR0ciA9IG1haW5UeXBlICsgJ0lkJztcbiAgICAgIHZhciBuYW1lQXR0ciA9IG1haW5UeXBlICsgJ05hbWUnO1xuICAgICAgcmV0dXJuIHEgJiYgKHFbaW5kZXhBdHRyXSAhPSBudWxsIHx8IHFbaWRBdHRyXSAhPSBudWxsIHx8IHFbbmFtZUF0dHJdICE9IG51bGwpID8ge1xuICAgICAgICBtYWluVHlwZTogbWFpblR5cGUsXG4gICAgICAgIC8vIHN1YlR5cGUgd2lsbCBiZSBmaWx0ZXJlZCBmaW5hbGx5LlxuICAgICAgICBpbmRleDogcVtpbmRleEF0dHJdLFxuICAgICAgICBpZDogcVtpZEF0dHJdLFxuICAgICAgICBuYW1lOiBxW25hbWVBdHRyXVxuICAgICAgfSA6IG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZG9GaWx0ZXIocmVzKSB7XG4gICAgICByZXR1cm4gY29uZGl0aW9uLmZpbHRlciA/IGZpbHRlcihyZXMsIGNvbmRpdGlvbi5maWx0ZXIpIDogcmVzO1xuICAgIH1cbiAgfTtcblxuICBHbG9iYWxNb2RlbC5wcm90b3R5cGUuZWFjaENvbXBvbmVudCA9IGZ1bmN0aW9uIChtYWluVHlwZSwgY2IsIGNvbnRleHQpIHtcbiAgICB2YXIgY29tcG9uZW50c01hcCA9IHRoaXMuX2NvbXBvbmVudHNNYXA7XG5cbiAgICBpZiAoaXNGdW5jdGlvbihtYWluVHlwZSkpIHtcbiAgICAgIHZhciBjdHhGb3JBbGxfMSA9IGNiO1xuICAgICAgdmFyIGNiRm9yQWxsXzEgPSBtYWluVHlwZTtcbiAgICAgIGNvbXBvbmVudHNNYXAuZWFjaChmdW5jdGlvbiAoY21wdHMsIGNvbXBvbmVudFR5cGUpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGNtcHRzICYmIGkgPCBjbXB0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBjbXB0ID0gY21wdHNbaV07XG4gICAgICAgICAgY21wdCAmJiBjYkZvckFsbF8xLmNhbGwoY3R4Rm9yQWxsXzEsIGNvbXBvbmVudFR5cGUsIGNtcHQsIGNtcHQuY29tcG9uZW50SW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGNtcHRzID0gaXNTdHJpbmcobWFpblR5cGUpID8gY29tcG9uZW50c01hcC5nZXQobWFpblR5cGUpIDogaXNPYmplY3QobWFpblR5cGUpID8gdGhpcy5maW5kQ29tcG9uZW50cyhtYWluVHlwZSkgOiBudWxsO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgY21wdHMgJiYgaSA8IGNtcHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjbXB0ID0gY21wdHNbaV07XG4gICAgICAgIGNtcHQgJiYgY2IuY2FsbChjb250ZXh0LCBjbXB0LCBjbXB0LmNvbXBvbmVudEluZGV4KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIC8qKlxyXG4gICAqIEdldCBzZXJpZXMgbGlzdCBiZWZvcmUgZmlsdGVyZWQgYnkgbmFtZS5cclxuICAgKi9cblxuXG4gIEdsb2JhbE1vZGVsLnByb3RvdHlwZS5nZXRTZXJpZXNCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHZhciBuYW1lU3RyID0gbW9kZWxVdGlsLmNvbnZlcnRPcHRpb25JZE5hbWUobmFtZSwgbnVsbCk7XG4gICAgcmV0dXJuIGZpbHRlcih0aGlzLl9jb21wb25lbnRzTWFwLmdldCgnc2VyaWVzJyksIGZ1bmN0aW9uIChvbmVTZXJpZXMpIHtcbiAgICAgIHJldHVybiAhIW9uZVNlcmllcyAmJiBuYW1lU3RyICE9IG51bGwgJiYgb25lU2VyaWVzLm5hbWUgPT09IG5hbWVTdHI7XG4gICAgfSk7XG4gIH07XG4gIC8qKlxyXG4gICAqIEdldCBzZXJpZXMgbGlzdCBiZWZvcmUgZmlsdGVyZWQgYnkgaW5kZXguXHJcbiAgICovXG5cblxuICBHbG9iYWxNb2RlbC5wcm90b3R5cGUuZ2V0U2VyaWVzQnlJbmRleCA9IGZ1bmN0aW9uIChzZXJpZXNJbmRleCkge1xuICAgIHJldHVybiB0aGlzLl9jb21wb25lbnRzTWFwLmdldCgnc2VyaWVzJylbc2VyaWVzSW5kZXhdO1xuICB9O1xuICAvKipcclxuICAgKiBHZXQgc2VyaWVzIGxpc3QgYmVmb3JlIGZpbHRlcmVkIGJ5IHR5cGUuXHJcbiAgICogRklYTUU6IHJlbmFtZSB0byBnZXRSYXdTZXJpZXNCeVR5cGU/XHJcbiAgICovXG5cblxuICBHbG9iYWxNb2RlbC5wcm90b3R5cGUuZ2V0U2VyaWVzQnlUeXBlID0gZnVuY3Rpb24gKHN1YlR5cGUpIHtcbiAgICByZXR1cm4gZmlsdGVyKHRoaXMuX2NvbXBvbmVudHNNYXAuZ2V0KCdzZXJpZXMnKSwgZnVuY3Rpb24gKG9uZVNlcmllcykge1xuICAgICAgcmV0dXJuICEhb25lU2VyaWVzICYmIG9uZVNlcmllcy5zdWJUeXBlID09PSBzdWJUeXBlO1xuICAgIH0pO1xuICB9O1xuICAvKipcclxuICAgKiBHZXQgYWxsIHNlcmllcyBiZWZvcmUgZmlsdGVyZWQuXHJcbiAgICovXG5cblxuICBHbG9iYWxNb2RlbC5wcm90b3R5cGUuZ2V0U2VyaWVzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmaWx0ZXIodGhpcy5fY29tcG9uZW50c01hcC5nZXQoJ3NlcmllcycpLCBmdW5jdGlvbiAob25lU2VyaWVzKSB7XG4gICAgICByZXR1cm4gISFvbmVTZXJpZXM7XG4gICAgfSk7XG4gIH07XG4gIC8qKlxyXG4gICAqIENvdW50IHNlcmllcyBiZWZvcmUgZmlsdGVyZWQuXHJcbiAgICovXG5cblxuICBHbG9iYWxNb2RlbC5wcm90b3R5cGUuZ2V0U2VyaWVzQ291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbXBvbmVudHNDb3VudC5nZXQoJ3NlcmllcycpO1xuICB9O1xuICAvKipcclxuICAgKiBBZnRlciBmaWx0ZXJpbmcsIHNlcmllcyBtYXkgYmUgZGlmZmVyZW50XHJcbiAgICogZnJvbSByYXcgc2VyaWVzLlxyXG4gICAqL1xuXG5cbiAgR2xvYmFsTW9kZWwucHJvdG90eXBlLmVhY2hTZXJpZXMgPSBmdW5jdGlvbiAoY2IsIGNvbnRleHQpIHtcbiAgICBhc3NlcnRTZXJpZXNJbml0aWFsaXplZCh0aGlzKTtcbiAgICBlYWNoKHRoaXMuX3Nlcmllc0luZGljZXMsIGZ1bmN0aW9uIChyYXdTZXJpZXNJbmRleCkge1xuICAgICAgdmFyIHNlcmllcyA9IHRoaXMuX2NvbXBvbmVudHNNYXAuZ2V0KCdzZXJpZXMnKVtyYXdTZXJpZXNJbmRleF07XG5cbiAgICAgIGNiLmNhbGwoY29udGV4dCwgc2VyaWVzLCByYXdTZXJpZXNJbmRleCk7XG4gICAgfSwgdGhpcyk7XG4gIH07XG4gIC8qKlxyXG4gICAqIEl0ZXJhdGUgcmF3IHNlcmllcyBiZWZvcmUgZmlsdGVyZWQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxyXG4gICAqIEBwYXJhbSB7Kn0gY29udGV4dFxyXG4gICAqL1xuXG5cbiAgR2xvYmFsTW9kZWwucHJvdG90eXBlLmVhY2hSYXdTZXJpZXMgPSBmdW5jdGlvbiAoY2IsIGNvbnRleHQpIHtcbiAgICBlYWNoKHRoaXMuX2NvbXBvbmVudHNNYXAuZ2V0KCdzZXJpZXMnKSwgZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgc2VyaWVzICYmIGNiLmNhbGwoY29udGV4dCwgc2VyaWVzLCBzZXJpZXMuY29tcG9uZW50SW5kZXgpO1xuICAgIH0pO1xuICB9O1xuICAvKipcclxuICAgKiBBZnRlciBmaWx0ZXJpbmcsIHNlcmllcyBtYXkgYmUgZGlmZmVyZW50LlxyXG4gICAqIGZyb20gcmF3IHNlcmllcy5cclxuICAgKi9cblxuXG4gIEdsb2JhbE1vZGVsLnByb3RvdHlwZS5lYWNoU2VyaWVzQnlUeXBlID0gZnVuY3Rpb24gKHN1YlR5cGUsIGNiLCBjb250ZXh0KSB7XG4gICAgYXNzZXJ0U2VyaWVzSW5pdGlhbGl6ZWQodGhpcyk7XG4gICAgZWFjaCh0aGlzLl9zZXJpZXNJbmRpY2VzLCBmdW5jdGlvbiAocmF3U2VyaWVzSW5kZXgpIHtcbiAgICAgIHZhciBzZXJpZXMgPSB0aGlzLl9jb21wb25lbnRzTWFwLmdldCgnc2VyaWVzJylbcmF3U2VyaWVzSW5kZXhdO1xuXG4gICAgICBpZiAoc2VyaWVzLnN1YlR5cGUgPT09IHN1YlR5cGUpIHtcbiAgICAgICAgY2IuY2FsbChjb250ZXh0LCBzZXJpZXMsIHJhd1Nlcmllc0luZGV4KTtcbiAgICAgIH1cbiAgICB9LCB0aGlzKTtcbiAgfTtcbiAgLyoqXHJcbiAgICogSXRlcmF0ZSByYXcgc2VyaWVzIGJlZm9yZSBmaWx0ZXJlZCBvZiBnaXZlbiB0eXBlLlxyXG4gICAqL1xuXG5cbiAgR2xvYmFsTW9kZWwucHJvdG90eXBlLmVhY2hSYXdTZXJpZXNCeVR5cGUgPSBmdW5jdGlvbiAoc3ViVHlwZSwgY2IsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gZWFjaCh0aGlzLmdldFNlcmllc0J5VHlwZShzdWJUeXBlKSwgY2IsIGNvbnRleHQpO1xuICB9O1xuXG4gIEdsb2JhbE1vZGVsLnByb3RvdHlwZS5pc1Nlcmllc0ZpbHRlcmVkID0gZnVuY3Rpb24gKHNlcmllc01vZGVsKSB7XG4gICAgYXNzZXJ0U2VyaWVzSW5pdGlhbGl6ZWQodGhpcyk7XG4gICAgcmV0dXJuIHRoaXMuX3Nlcmllc0luZGljZXNNYXAuZ2V0KHNlcmllc01vZGVsLmNvbXBvbmVudEluZGV4KSA9PSBudWxsO1xuICB9O1xuXG4gIEdsb2JhbE1vZGVsLnByb3RvdHlwZS5nZXRDdXJyZW50U2VyaWVzSW5kaWNlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX3Nlcmllc0luZGljZXMgfHwgW10pLnNsaWNlKCk7XG4gIH07XG5cbiAgR2xvYmFsTW9kZWwucHJvdG90eXBlLmZpbHRlclNlcmllcyA9IGZ1bmN0aW9uIChjYiwgY29udGV4dCkge1xuICAgIGFzc2VydFNlcmllc0luaXRpYWxpemVkKHRoaXMpO1xuICAgIHZhciBuZXdTZXJpZXNJbmRpY2VzID0gW107XG4gICAgZWFjaCh0aGlzLl9zZXJpZXNJbmRpY2VzLCBmdW5jdGlvbiAoc2VyaWVzUmF3SWR4KSB7XG4gICAgICB2YXIgc2VyaWVzID0gdGhpcy5fY29tcG9uZW50c01hcC5nZXQoJ3NlcmllcycpW3Nlcmllc1Jhd0lkeF07XG5cbiAgICAgIGNiLmNhbGwoY29udGV4dCwgc2VyaWVzLCBzZXJpZXNSYXdJZHgpICYmIG5ld1Nlcmllc0luZGljZXMucHVzaChzZXJpZXNSYXdJZHgpO1xuICAgIH0sIHRoaXMpO1xuICAgIHRoaXMuX3Nlcmllc0luZGljZXMgPSBuZXdTZXJpZXNJbmRpY2VzO1xuICAgIHRoaXMuX3Nlcmllc0luZGljZXNNYXAgPSBjcmVhdGVIYXNoTWFwKG5ld1Nlcmllc0luZGljZXMpO1xuICB9O1xuXG4gIEdsb2JhbE1vZGVsLnByb3RvdHlwZS5yZXN0b3JlRGF0YSA9IGZ1bmN0aW9uIChwYXlsb2FkKSB7XG4gICAgcmVDcmVhdGVTZXJpZXNJbmRpY2VzKHRoaXMpO1xuICAgIHZhciBjb21wb25lbnRzTWFwID0gdGhpcy5fY29tcG9uZW50c01hcDtcbiAgICB2YXIgY29tcG9uZW50VHlwZXMgPSBbXTtcbiAgICBjb21wb25lbnRzTWFwLmVhY2goZnVuY3Rpb24gKGNvbXBvbmVudHMsIGNvbXBvbmVudFR5cGUpIHtcbiAgICAgIGlmIChDb21wb25lbnRNb2RlbC5oYXNDbGFzcyhjb21wb25lbnRUeXBlKSkge1xuICAgICAgICBjb21wb25lbnRUeXBlcy5wdXNoKGNvbXBvbmVudFR5cGUpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIENvbXBvbmVudE1vZGVsLnRvcG9sb2dpY2FsVHJhdmVsKGNvbXBvbmVudFR5cGVzLCBDb21wb25lbnRNb2RlbC5nZXRBbGxDbGFzc01haW5UeXBlcygpLCBmdW5jdGlvbiAoY29tcG9uZW50VHlwZSkge1xuICAgICAgZWFjaChjb21wb25lbnRzTWFwLmdldChjb21wb25lbnRUeXBlKSwgZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgICBpZiAoY29tcG9uZW50ICYmIChjb21wb25lbnRUeXBlICE9PSAnc2VyaWVzJyB8fCAhaXNOb3RUYXJnZXRTZXJpZXMoY29tcG9uZW50LCBwYXlsb2FkKSkpIHtcbiAgICAgICAgICBjb21wb25lbnQucmVzdG9yZURhdGEoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgR2xvYmFsTW9kZWwuaW50ZXJuYWxGaWVsZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZUNyZWF0ZVNlcmllc0luZGljZXMgPSBmdW5jdGlvbiAoZWNNb2RlbCkge1xuICAgICAgdmFyIHNlcmllc0luZGljZXMgPSBlY01vZGVsLl9zZXJpZXNJbmRpY2VzID0gW107XG4gICAgICBlYWNoKGVjTW9kZWwuX2NvbXBvbmVudHNNYXAuZ2V0KCdzZXJpZXMnKSwgZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICAvLyBzZXJpZXMgbWF5IGhhdmUgYmVlbiByZW1vdmVkIGJ5IGByZXBsYWNlTWVyZ2VgLlxuICAgICAgICBzZXJpZXMgJiYgc2VyaWVzSW5kaWNlcy5wdXNoKHNlcmllcy5jb21wb25lbnRJbmRleCk7XG4gICAgICB9KTtcbiAgICAgIGVjTW9kZWwuX3Nlcmllc0luZGljZXNNYXAgPSBjcmVhdGVIYXNoTWFwKHNlcmllc0luZGljZXMpO1xuICAgIH07XG5cbiAgICBhc3NlcnRTZXJpZXNJbml0aWFsaXplZCA9IGZ1bmN0aW9uIChlY01vZGVsKSB7XG4gICAgICAvLyBDb21wb25lbnRzIHRoYXQgdXNlIF9zZXJpZXNJbmRpY2VzIHNob3VsZCBkZXBlbmRzIG9uIHNlcmllcyBjb21wb25lbnQsXG4gICAgICAvLyB3aGljaCBtYWtlIHN1cmUgdGhhdCB0aGVpciBpbml0aWFsaXphdGlvbiBpcyBhZnRlciBzZXJpZXMuXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBpZiAoIWVjTW9kZWwuX3Nlcmllc0luZGljZXMpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ09wdGlvbiBzaG91bGQgY29udGFpbnMgc2VyaWVzLicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGluaXRCYXNlID0gZnVuY3Rpb24gKGVjTW9kZWwsIGJhc2VPcHRpb24pIHtcbiAgICAgIC8vIFVzaW5nIE9QVElPTl9JTk5FUl9LRVkgdG8gbWFyayB0aGF0IHRoaXMgb3B0aW9uIGNhbm5vdCBiZSB1c2VkIG91dHNpZGUsXG4gICAgICAvLyBpLmUuIGBjaGFydC5zZXRPcHRpb24oY2hhcnQuZ2V0TW9kZWwoKS5vcHRpb24pO2AgaXMgZm9yYmlkZGVuLlxuICAgICAgZWNNb2RlbC5vcHRpb24gPSB7fTtcbiAgICAgIGVjTW9kZWwub3B0aW9uW09QVElPTl9JTk5FUl9LRVldID0gT1BUSU9OX0lOTkVSX1ZBTFVFOyAvLyBJbml0IHdpdGggc2VyaWVzOiBbXSwgaW4gY2FzZSBvZiBjYWxsaW5nIGZpbmRTZXJpZXMgbWV0aG9kXG4gICAgICAvLyBiZWZvcmUgc2VyaWVzIGluaXRpYWxpemVkLlxuXG4gICAgICBlY01vZGVsLl9jb21wb25lbnRzTWFwID0gY3JlYXRlSGFzaE1hcCh7XG4gICAgICAgIHNlcmllczogW11cbiAgICAgIH0pO1xuICAgICAgZWNNb2RlbC5fY29tcG9uZW50c0NvdW50ID0gY3JlYXRlSGFzaE1hcCgpOyAvLyBJZiB1c2VyIHNwZWZpZWQgYG9wdGlvbi5hcmlhYCwgYXJpYSB3aWxsIGJlIGVuYWJsZS4gVGhpcyBkZXRlY3Rpb24gc2hvdWxkIGJlXG4gICAgICAvLyBwZXJmb3JtZWQgYmVmb3JlIHRoZW1lIGFuZCBnbG9iYWxEZWZhdWx0IG1lcmdlLlxuXG4gICAgICB2YXIgYWlyYU9wdGlvbiA9IGJhc2VPcHRpb24uYXJpYTtcblxuICAgICAgaWYgKGlzT2JqZWN0KGFpcmFPcHRpb24pICYmIGFpcmFPcHRpb24uZW5hYmxlZCA9PSBudWxsKSB7XG4gICAgICAgIGFpcmFPcHRpb24uZW5hYmxlZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIG1lcmdlVGhlbWUoYmFzZU9wdGlvbiwgZWNNb2RlbC5fdGhlbWUub3B0aW9uKTsgLy8gVE9ETyBOZWVkcyBjbG9uZSB3aGVuIG1lcmdpbmcgdG8gdGhlIHVuZXhpc3RlZCBwcm9wZXJ0eVxuXG4gICAgICBtZXJnZShiYXNlT3B0aW9uLCBnbG9iYWxEZWZhdWx0LCBmYWxzZSk7XG5cbiAgICAgIGVjTW9kZWwuX21lcmdlT3B0aW9uKGJhc2VPcHRpb24sIG51bGwpO1xuICAgIH07XG4gIH0oKTtcblxuICByZXR1cm4gR2xvYmFsTW9kZWw7XG59KE1vZGVsKTtcblxuZnVuY3Rpb24gaXNOb3RUYXJnZXRTZXJpZXMoc2VyaWVzTW9kZWwsIHBheWxvYWQpIHtcbiAgaWYgKHBheWxvYWQpIHtcbiAgICB2YXIgaW5kZXggPSBwYXlsb2FkLnNlcmllc0luZGV4O1xuICAgIHZhciBpZCA9IHBheWxvYWQuc2VyaWVzSWQ7XG4gICAgdmFyIG5hbWVfMSA9IHBheWxvYWQuc2VyaWVzTmFtZTtcbiAgICByZXR1cm4gaW5kZXggIT0gbnVsbCAmJiBzZXJpZXNNb2RlbC5jb21wb25lbnRJbmRleCAhPT0gaW5kZXggfHwgaWQgIT0gbnVsbCAmJiBzZXJpZXNNb2RlbC5pZCAhPT0gaWQgfHwgbmFtZV8xICE9IG51bGwgJiYgc2VyaWVzTW9kZWwubmFtZSAhPT0gbmFtZV8xO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1lcmdlVGhlbWUob3B0aW9uLCB0aGVtZSkge1xuICAvLyBQRU5ESU5HXG4gIC8vIE5PVCB1c2UgYGNvbG9yTGF5ZXJgIGluIHRoZW1lIGlmIG9wdGlvbiBoYXMgYGNvbG9yYFxuICB2YXIgbm90TWVyZ2VDb2xvckxheWVyID0gb3B0aW9uLmNvbG9yICYmICFvcHRpb24uY29sb3JMYXllcjtcbiAgZWFjaCh0aGVtZSwgZnVuY3Rpb24gKHRoZW1lSXRlbSwgbmFtZSkge1xuICAgIGlmIChuYW1lID09PSAnY29sb3JMYXllcicgJiYgbm90TWVyZ2VDb2xvckxheWVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBJZiBpdCBpcyBjb21wb25lbnQgbW9kZWwgbWFpblR5cGUsIHRoZSBtb2RlbCBoYW5kbGVzIHRoYXQgbWVyZ2UgbGF0ZXIuXG4gICAgLy8gb3RoZXJ3aXNlLCBtZXJnZSB0aGVtIGhlcmUuXG5cblxuICAgIGlmICghQ29tcG9uZW50TW9kZWwuaGFzQ2xhc3MobmFtZSkpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhlbWVJdGVtID09PSAnb2JqZWN0Jykge1xuICAgICAgICBvcHRpb25bbmFtZV0gPSAhb3B0aW9uW25hbWVdID8gY2xvbmUodGhlbWVJdGVtKSA6IG1lcmdlKG9wdGlvbltuYW1lXSwgdGhlbWVJdGVtLCBmYWxzZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAob3B0aW9uW25hbWVdID09IG51bGwpIHtcbiAgICAgICAgICBvcHRpb25bbmFtZV0gPSB0aGVtZUl0ZW07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBxdWVyeUJ5SWRPck5hbWUoYXR0ciwgaWRPck5hbWUsIGNtcHRzKSB7XG4gIC8vIEhlcmUgaXMgYSBicmVhayBmcm9tIGVjaGFydHM0OiBzdHJpbmcgYW5kIG51bWJlciBhcmVcbiAgLy8gdHJlYXRlZCBhcyBlcXVhbC5cbiAgaWYgKGlzQXJyYXkoaWRPck5hbWUpKSB7XG4gICAgdmFyIGtleU1hcF8xID0gY3JlYXRlSGFzaE1hcCgpO1xuICAgIGVhY2goaWRPck5hbWUsIGZ1bmN0aW9uIChpZE9yTmFtZUl0ZW0pIHtcbiAgICAgIGlmIChpZE9yTmFtZUl0ZW0gIT0gbnVsbCkge1xuICAgICAgICB2YXIgaWROYW1lID0gbW9kZWxVdGlsLmNvbnZlcnRPcHRpb25JZE5hbWUoaWRPck5hbWVJdGVtLCBudWxsKTtcbiAgICAgICAgaWROYW1lICE9IG51bGwgJiYga2V5TWFwXzEuc2V0KGlkT3JOYW1lSXRlbSwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGZpbHRlcihjbXB0cywgZnVuY3Rpb24gKGNtcHQpIHtcbiAgICAgIHJldHVybiBjbXB0ICYmIGtleU1hcF8xLmdldChjbXB0W2F0dHJdKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgaWROYW1lXzEgPSBtb2RlbFV0aWwuY29udmVydE9wdGlvbklkTmFtZShpZE9yTmFtZSwgbnVsbCk7XG4gICAgcmV0dXJuIGZpbHRlcihjbXB0cywgZnVuY3Rpb24gKGNtcHQpIHtcbiAgICAgIHJldHVybiBjbXB0ICYmIGlkTmFtZV8xICE9IG51bGwgJiYgY21wdFthdHRyXSA9PT0gaWROYW1lXzE7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmlsdGVyQnlTdWJUeXBlKGNvbXBvbmVudHMsIGNvbmRpdGlvbikge1xuICAvLyBVc2luZyBoYXNPd25Qcm9wZXJ0eSBmb3IgcmVzdHJpY3QuIENvbnNpZGVyXG4gIC8vIHN1YlR5cGUgaXMgdW5kZWZpbmVkIGluIHVzZXIgcGF5bG9hZC5cbiAgcmV0dXJuIGNvbmRpdGlvbi5oYXNPd25Qcm9wZXJ0eSgnc3ViVHlwZScpID8gZmlsdGVyKGNvbXBvbmVudHMsIGZ1bmN0aW9uIChjbXB0KSB7XG4gICAgcmV0dXJuIGNtcHQgJiYgY21wdC5zdWJUeXBlID09PSBjb25kaXRpb24uc3ViVHlwZTtcbiAgfSkgOiBjb21wb25lbnRzO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVTZXRPcHRpb25JbnB1dChvcHRzKSB7XG4gIHZhciByZXBsYWNlTWVyZ2VNYWluVHlwZU1hcCA9IGNyZWF0ZUhhc2hNYXAoKTtcbiAgb3B0cyAmJiBlYWNoKG1vZGVsVXRpbC5ub3JtYWxpemVUb0FycmF5KG9wdHMucmVwbGFjZU1lcmdlKSwgZnVuY3Rpb24gKG1haW5UeXBlKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGFzc2VydChDb21wb25lbnRNb2RlbC5oYXNDbGFzcyhtYWluVHlwZSksICdcIicgKyBtYWluVHlwZSArICdcIiBpcyBub3QgdmFsaWQgY29tcG9uZW50IG1haW4gdHlwZSBpbiBcInJlcGxhY2VNZXJnZVwiJyk7XG4gICAgfVxuXG4gICAgcmVwbGFjZU1lcmdlTWFpblR5cGVNYXAuc2V0KG1haW5UeXBlLCB0cnVlKTtcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgcmVwbGFjZU1lcmdlTWFpblR5cGVNYXA6IHJlcGxhY2VNZXJnZU1haW5UeXBlTWFwXG4gIH07XG59XG5cbm1peGluKEdsb2JhbE1vZGVsLCBQYWxldHRlTWl4aW4pO1xuZXhwb3J0IGRlZmF1bHQgR2xvYmFsTW9kZWw7IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgKiBhcyB6clV0aWwgZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbnZhciBhdmFpbGFibGVNZXRob2RzID0gWydnZXREb20nLCAnZ2V0WnInLCAnZ2V0V2lkdGgnLCAnZ2V0SGVpZ2h0JywgJ2dldERldmljZVBpeGVsUmF0aW8nLCAnZGlzcGF0Y2hBY3Rpb24nLCAnaXNTU1InLCAnaXNEaXNwb3NlZCcsICdvbicsICdvZmYnLCAnZ2V0RGF0YVVSTCcsICdnZXRDb25uZWN0ZWREYXRhVVJMJywgLy8gJ2dldE1vZGVsJyxcbidnZXRPcHRpb24nLCAvLyAnZ2V0Vmlld09mQ29tcG9uZW50TW9kZWwnLFxuLy8gJ2dldFZpZXdPZlNlcmllc01vZGVsJyxcbidnZXRJZCcsICd1cGRhdGVMYWJlbExheW91dCddO1xuXG52YXIgRXh0ZW5zaW9uQVBJID1cbi8qKiBAY2xhc3MgKi9cbmZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRXh0ZW5zaW9uQVBJKGVjSW5zdGFuY2UpIHtcbiAgICB6clV0aWwuZWFjaChhdmFpbGFibGVNZXRob2RzLCBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICAgICAgdGhpc1ttZXRob2ROYW1lXSA9IHpyVXRpbC5iaW5kKGVjSW5zdGFuY2VbbWV0aG9kTmFtZV0sIGVjSW5zdGFuY2UpO1xuICAgIH0sIHRoaXMpO1xuICB9XG5cbiAgcmV0dXJuIEV4dGVuc2lvbkFQSTtcbn0oKTtcblxuZXhwb3J0IGRlZmF1bHQgRXh0ZW5zaW9uQVBJOyIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0ICogYXMgenJVdGlsIGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG52YXIgY29vcmRpbmF0ZVN5c3RlbUNyZWF0b3JzID0ge307XG5cbnZhciBDb29yZGluYXRlU3lzdGVtTWFuYWdlciA9XG4vKiogQGNsYXNzICovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIENvb3JkaW5hdGVTeXN0ZW1NYW5hZ2VyKCkge1xuICAgIHRoaXMuX2Nvb3JkaW5hdGVTeXN0ZW1zID0gW107XG4gIH1cblxuICBDb29yZGluYXRlU3lzdGVtTWFuYWdlci5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGVjTW9kZWwsIGFwaSkge1xuICAgIHZhciBjb29yZGluYXRlU3lzdGVtcyA9IFtdO1xuICAgIHpyVXRpbC5lYWNoKGNvb3JkaW5hdGVTeXN0ZW1DcmVhdG9ycywgZnVuY3Rpb24gKGNyZWF0b3IsIHR5cGUpIHtcbiAgICAgIHZhciBsaXN0ID0gY3JlYXRvci5jcmVhdGUoZWNNb2RlbCwgYXBpKTtcbiAgICAgIGNvb3JkaW5hdGVTeXN0ZW1zID0gY29vcmRpbmF0ZVN5c3RlbXMuY29uY2F0KGxpc3QgfHwgW10pO1xuICAgIH0pO1xuICAgIHRoaXMuX2Nvb3JkaW5hdGVTeXN0ZW1zID0gY29vcmRpbmF0ZVN5c3RlbXM7XG4gIH07XG5cbiAgQ29vcmRpbmF0ZVN5c3RlbU1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChlY01vZGVsLCBhcGkpIHtcbiAgICB6clV0aWwuZWFjaCh0aGlzLl9jb29yZGluYXRlU3lzdGVtcywgZnVuY3Rpb24gKGNvb3JkU3lzKSB7XG4gICAgICBjb29yZFN5cy51cGRhdGUgJiYgY29vcmRTeXMudXBkYXRlKGVjTW9kZWwsIGFwaSk7XG4gICAgfSk7XG4gIH07XG5cbiAgQ29vcmRpbmF0ZVN5c3RlbU1hbmFnZXIucHJvdG90eXBlLmdldENvb3JkaW5hdGVTeXN0ZW1zID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9jb29yZGluYXRlU3lzdGVtcy5zbGljZSgpO1xuICB9O1xuXG4gIENvb3JkaW5hdGVTeXN0ZW1NYW5hZ2VyLnJlZ2lzdGVyID0gZnVuY3Rpb24gKHR5cGUsIGNyZWF0b3IpIHtcbiAgICBjb29yZGluYXRlU3lzdGVtQ3JlYXRvcnNbdHlwZV0gPSBjcmVhdG9yO1xuICB9O1xuXG4gIENvb3JkaW5hdGVTeXN0ZW1NYW5hZ2VyLmdldCA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgcmV0dXJuIGNvb3JkaW5hdGVTeXN0ZW1DcmVhdG9yc1t0eXBlXTtcbiAgfTtcblxuICByZXR1cm4gQ29vcmRpbmF0ZVN5c3RlbU1hbmFnZXI7XG59KCk7XG5cbmV4cG9ydCBkZWZhdWx0IENvb3JkaW5hdGVTeXN0ZW1NYW5hZ2VyOyIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgbm9ybWFsaXplVG9BcnJheSAvLyAsIE1hcHBpbmdFeGlzdGluZ0l0ZW0sIHNldENvbXBvbmVudFR5cGVUb0tleUluZm8sIG1hcHBpbmdUb0V4aXN0c1xufSBmcm9tICcuLi91dGlsL21vZGVsLmpzJztcbmltcG9ydCB7IGVhY2gsIGNsb25lLCBtYXAsIGlzVHlwZWRBcnJheSwgc2V0QXNQcmltaXRpdmUsIGlzQXJyYXksIGlzT2JqZWN0IC8vICwgSGFzaE1hcCAsIGNyZWF0ZUhhc2hNYXAsIGV4dGVuZCwgbWVyZ2UsXG59IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgeyBlcnJvciB9IGZyb20gJy4uL3V0aWwvbG9nLmpzJztcbnZhciBRVUVSWV9SRUcgPSAvXihtaW58bWF4KT8oLispJC87IC8vIEtleTogbWFpblR5cGVcbi8vIHR5cGUgRmFrZUNvbXBvbmVudHNNYXAgPSBIYXNoTWFwPChNYXBwaW5nRXhpc3RpbmdJdGVtICYgeyBzdWJUeXBlOiBzdHJpbmcgfSlbXT47XG5cbi8qKlxyXG4gKiBURVJNIEVYUExBTkFUSU9OUzpcclxuICogU2VlIGBFQ09wdGlvbmAgYW5kIGBFQ1VuaXRPcHRpb25gIGluIGBzcmMvdXRpbC90eXBlcy50c2AuXHJcbiAqL1xuXG52YXIgT3B0aW9uTWFuYWdlciA9XG4vKiogQGNsYXNzICovXG5mdW5jdGlvbiAoKSB7XG4gIC8vIHRpbWVsaW5lLm5vdE1lcmdlIGlzIG5vdCBzdXBwb3J0ZWQgaW4gZWMzLiBGaXJzdGx5IHRoZXJlIGlzIHJlYXJseVxuICAvLyBjYXNlIHRoYXQgbm90TWVyZ2UgaXMgbmVlZGVkLiBTZWNvbmRseSBzdXBwb3J0aW5nICdub3RNZXJnZScgcmVxdWlyZXNcbiAgLy8gcmF3T3B0aW9uIGNsb25lZCBhbmQgYmFja3VwZWQgd2hlbiB0aW1lbGluZSBjaGFuZ2VkLCB3aGljaCBkb2VzIG5vXG4gIC8vIGdvb2QgdG8gcGVyZm9ybWFuY2UuIFdoYXQncyBtb3JlLCB0aGF0IGJvdGggdGltZWxpbmUgYW5kIHNldE9wdGlvblxuICAvLyBtZXRob2Qgc3VwcGx5ICdub3RNZXJnZScgYnJpbmdzIGNvbXBsZXggYW5kIHNvbWUgcHJvYmxlbXMuXG4gIC8vIENvbnNpZGVyIHRoaXMgY2FzZTpcbiAgLy8gKHN0ZXAxKSBjaGFydC5zZXRPcHRpb24oe3RpbWVsaW5lOiB7bm90TWVyZ2U6IGZhbHNlfSwgLi4ufSwgZmFsc2UpO1xuICAvLyAoc3RlcDIpIGNoYXJ0LnNldE9wdGlvbih7dGltZWxpbmU6IHtub3RNZXJnZTogdHJ1ZX0sIC4uLn0sIGZhbHNlKTtcbiAgZnVuY3Rpb24gT3B0aW9uTWFuYWdlcihhcGkpIHtcbiAgICB0aGlzLl90aW1lbGluZU9wdGlvbnMgPSBbXTtcbiAgICB0aGlzLl9tZWRpYUxpc3QgPSBbXTtcbiAgICAvKipcclxuICAgICAqIC0xLCBtZWFucyBkZWZhdWx0LlxyXG4gICAgICogZW1wdHkgbWVhbnMgbm8gbWVkaWEuXHJcbiAgICAgKi9cblxuICAgIHRoaXMuX2N1cnJlbnRNZWRpYUluZGljZXMgPSBbXTtcbiAgICB0aGlzLl9hcGkgPSBhcGk7XG4gIH1cblxuICBPcHRpb25NYW5hZ2VyLnByb3RvdHlwZS5zZXRPcHRpb24gPSBmdW5jdGlvbiAocmF3T3B0aW9uLCBvcHRpb25QcmVwcm9jZXNzb3JGdW5jcywgb3B0KSB7XG4gICAgaWYgKHJhd09wdGlvbikge1xuICAgICAgLy8gVGhhdCBzZXQgZGF0IHByaW1pdGl2ZSBpcyBkYW5nZXJvdXMgaWYgdXNlciByZXVzZSB0aGUgZGF0YSB3aGVuIHNldE9wdGlvbiBhZ2Fpbi5cbiAgICAgIGVhY2gobm9ybWFsaXplVG9BcnJheShyYXdPcHRpb24uc2VyaWVzKSwgZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICBzZXJpZXMgJiYgc2VyaWVzLmRhdGEgJiYgaXNUeXBlZEFycmF5KHNlcmllcy5kYXRhKSAmJiBzZXRBc1ByaW1pdGl2ZShzZXJpZXMuZGF0YSk7XG4gICAgICB9KTtcbiAgICAgIGVhY2gobm9ybWFsaXplVG9BcnJheShyYXdPcHRpb24uZGF0YXNldCksIGZ1bmN0aW9uIChkYXRhc2V0KSB7XG4gICAgICAgIGRhdGFzZXQgJiYgZGF0YXNldC5zb3VyY2UgJiYgaXNUeXBlZEFycmF5KGRhdGFzZXQuc291cmNlKSAmJiBzZXRBc1ByaW1pdGl2ZShkYXRhc2V0LnNvdXJjZSk7XG4gICAgICB9KTtcbiAgICB9IC8vIENhdXRpb246IHNvbWUgc2VyaWVzIG1vZGlmeSBvcHRpb24gZGF0YSwgaWYgZG8gbm90IGNsb25lLFxuICAgIC8vIGl0IHNob3VsZCBlbnN1cmUgdGhhdCB0aGUgcmVwZWF0IG1vZGlmeSBjb3JyZWN0bHlcbiAgICAvLyAoY3JlYXRlIGEgbmV3IG9iamVjdCB3aGVuIG1vZGlmeSBpdHNlbGYpLlxuXG5cbiAgICByYXdPcHRpb24gPSBjbG9uZShyYXdPcHRpb24pOyAvLyBGSVhNRVxuICAgIC8vIElmIHNvbWUgcHJvcGVydHkgaXMgc2V0IGluIHRpbWVsaW5lIG9wdGlvbnMgb3IgbWVkaWEgb3B0aW9uIGJ1dFxuICAgIC8vIG5vdCBzZXQgaW4gYmFzZU9wdGlvbiwgYSB3YXJuaW5nIHNob3VsZCBiZSBnaXZlbi5cblxuICAgIHZhciBvcHRpb25CYWNrdXAgPSB0aGlzLl9vcHRpb25CYWNrdXA7XG4gICAgdmFyIG5ld1BhcnNlZE9wdGlvbiA9IHBhcnNlUmF3T3B0aW9uKHJhd09wdGlvbiwgb3B0aW9uUHJlcHJvY2Vzc29yRnVuY3MsICFvcHRpb25CYWNrdXApO1xuICAgIHRoaXMuX25ld0Jhc2VPcHRpb24gPSBuZXdQYXJzZWRPcHRpb24uYmFzZU9wdGlvbjsgLy8gRm9yIHNldE9wdGlvbiBhdCBzZWNvbmQgdGltZSAodXNpbmcgbWVyZ2UgbW9kZSk7XG5cbiAgICBpZiAob3B0aW9uQmFja3VwKSB7XG4gICAgICAvLyBGSVhNRVxuICAgICAgLy8gdGhlIHJlc3RvcmUgbWVyZ2Ugc29sdXRpb24gaXMgZXNzZW50aWFsbHkgaW5jb3JyZWN0LlxuICAgICAgLy8gdGhlIG1hcHBpbmcgY2FuIG5vdCBiZSAxMDAlIGNvbnNpc3RlbnQgd2l0aCBlY01vZGVsLCB3aGljaCBwcm9iYWJseSBicmluZ3NcbiAgICAgIC8vIHBvdGVudGlhbCBidWchXG4gICAgICAvLyBUaGUgZmlyc3QgbWVyZ2UgaXMgZGVsYXllZCwgYmVjYXVzZSBpbiBtb3N0IGNhc2VzLCB1c2VycyBkbyBub3QgY2FsbCBgc2V0T3B0aW9uYCB0d2ljZS5cbiAgICAgIC8vIGxldCBmYWtlQ21wdHNNYXAgPSB0aGlzLl9mYWtlQ21wdHNNYXA7XG4gICAgICAvLyBpZiAoIWZha2VDbXB0c01hcCkge1xuICAgICAgLy8gICAgIGZha2VDbXB0c01hcCA9IHRoaXMuX2Zha2VDbXB0c01hcCA9IGNyZWF0ZUhhc2hNYXAoKTtcbiAgICAgIC8vICAgICBtZXJnZVRvQmFja3VwT3B0aW9uKGZha2VDbXB0c01hcCwgbnVsbCwgb3B0aW9uQmFja3VwLmJhc2VPcHRpb24sIG51bGwpO1xuICAgICAgLy8gfVxuICAgICAgLy8gbWVyZ2VUb0JhY2t1cE9wdGlvbihcbiAgICAgIC8vICAgICBmYWtlQ21wdHNNYXAsIG9wdGlvbkJhY2t1cC5iYXNlT3B0aW9uLCBuZXdQYXJzZWRPcHRpb24uYmFzZU9wdGlvbiwgb3B0XG4gICAgICAvLyApO1xuICAgICAgLy8gRm9yIHNpbXBsaWNpdHksIHRpbWVsaW5lIG9wdGlvbnMgYW5kIG1lZGlhIG9wdGlvbnMgZG8gbm90IHN1cHBvcnQgbWVyZ2UsXG4gICAgICAvLyB0aGF0IGlzLCBpZiB5b3UgYHNldE9wdGlvbmAgdHdpY2UgYW5kIGJvdGggaGFzIHRpbWVsaW5lIG9wdGlvbnMsIHRoZSBsYXR0ZXJcbiAgICAgIC8vIHRpbWVsaW5lIG9wdGlvbnMgd2lsbCBub3QgYmUgbWVyZ2VkIHRvIHRoZSBmb3JtZXIsIGJ1dCBqdXN0IHN1YnN0aXR1dGUgdGhlbS5cbiAgICAgIGlmIChuZXdQYXJzZWRPcHRpb24udGltZWxpbmVPcHRpb25zLmxlbmd0aCkge1xuICAgICAgICBvcHRpb25CYWNrdXAudGltZWxpbmVPcHRpb25zID0gbmV3UGFyc2VkT3B0aW9uLnRpbWVsaW5lT3B0aW9ucztcbiAgICAgIH1cblxuICAgICAgaWYgKG5ld1BhcnNlZE9wdGlvbi5tZWRpYUxpc3QubGVuZ3RoKSB7XG4gICAgICAgIG9wdGlvbkJhY2t1cC5tZWRpYUxpc3QgPSBuZXdQYXJzZWRPcHRpb24ubWVkaWFMaXN0O1xuICAgICAgfVxuXG4gICAgICBpZiAobmV3UGFyc2VkT3B0aW9uLm1lZGlhRGVmYXVsdCkge1xuICAgICAgICBvcHRpb25CYWNrdXAubWVkaWFEZWZhdWx0ID0gbmV3UGFyc2VkT3B0aW9uLm1lZGlhRGVmYXVsdDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fb3B0aW9uQmFja3VwID0gbmV3UGFyc2VkT3B0aW9uO1xuICAgIH1cbiAgfTtcblxuICBPcHRpb25NYW5hZ2VyLnByb3RvdHlwZS5tb3VudE9wdGlvbiA9IGZ1bmN0aW9uIChpc1JlY3JlYXRlKSB7XG4gICAgdmFyIG9wdGlvbkJhY2t1cCA9IHRoaXMuX29wdGlvbkJhY2t1cDtcbiAgICB0aGlzLl90aW1lbGluZU9wdGlvbnMgPSBvcHRpb25CYWNrdXAudGltZWxpbmVPcHRpb25zO1xuICAgIHRoaXMuX21lZGlhTGlzdCA9IG9wdGlvbkJhY2t1cC5tZWRpYUxpc3Q7XG4gICAgdGhpcy5fbWVkaWFEZWZhdWx0ID0gb3B0aW9uQmFja3VwLm1lZGlhRGVmYXVsdDtcbiAgICB0aGlzLl9jdXJyZW50TWVkaWFJbmRpY2VzID0gW107XG4gICAgcmV0dXJuIGNsb25lKGlzUmVjcmVhdGUgLy8gdGhpcy5fb3B0aW9uQmFja3VwLmJhc2VPcHRpb24sIHdoaWNoIGlzIGNyZWF0ZWQgYXQgdGhlIGZpcnN0IGBzZXRPcHRpb25gXG4gICAgLy8gY2FsbGVkLCBhbmQgaXMgbWVyZ2VkIGludG8gZXZlcnkgbmV3IG9wdGlvbiBieSBpbm5lciBtZXRob2QgYG1lcmdlVG9CYWNrdXBPcHRpb25gXG4gICAgLy8gZWFjaCB0aW1lIGBzZXRPcHRpb25gIGNhbGxlZCwgY2FuIGJlIG9ubHkgdXNlZCBpbiBgaXNSZWNyZWF0ZWAsIGJlY2F1c2VcbiAgICAvLyBpdHMgcmVsaWFiaWxpdHkgaXMgdW5kZXIgc3VzcGljaW9uLiBJbiBvdGhlciBjYXNlcyBvcHRpb24gbWVyZ2UgaXNcbiAgICAvLyBwZXJmb3JtZWQgYnkgYG1vZGVsLm1lcmdlT3B0aW9uYC5cbiAgICA/IG9wdGlvbkJhY2t1cC5iYXNlT3B0aW9uIDogdGhpcy5fbmV3QmFzZU9wdGlvbik7XG4gIH07XG5cbiAgT3B0aW9uTWFuYWdlci5wcm90b3R5cGUuZ2V0VGltZWxpbmVPcHRpb24gPSBmdW5jdGlvbiAoZWNNb2RlbCkge1xuICAgIHZhciBvcHRpb247XG4gICAgdmFyIHRpbWVsaW5lT3B0aW9ucyA9IHRoaXMuX3RpbWVsaW5lT3B0aW9ucztcblxuICAgIGlmICh0aW1lbGluZU9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICAvLyBnZXRUaW1lbGluZU9wdGlvbiBjYW4gb25seSBiZSBjYWxsZWQgYWZ0ZXIgZWNNb2RlbCBpbml0ZWQsXG4gICAgICAvLyBzbyB3ZSBjYW4gZ2V0IGN1cnJlbnRJbmRleCBmcm9tIHRpbWVsaW5lTW9kZWwuXG4gICAgICB2YXIgdGltZWxpbmVNb2RlbCA9IGVjTW9kZWwuZ2V0Q29tcG9uZW50KCd0aW1lbGluZScpO1xuXG4gICAgICBpZiAodGltZWxpbmVNb2RlbCkge1xuICAgICAgICBvcHRpb24gPSBjbG9uZSggLy8gRklYTUU6VFMgYXMgVGltZWxpbmVNb2RlbCBvciBxdWl2bGFudCBpbnRlcmZhY2VcbiAgICAgICAgdGltZWxpbmVPcHRpb25zW3RpbWVsaW5lTW9kZWwuZ2V0Q3VycmVudEluZGV4KCldKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb3B0aW9uO1xuICB9O1xuXG4gIE9wdGlvbk1hbmFnZXIucHJvdG90eXBlLmdldE1lZGlhT3B0aW9uID0gZnVuY3Rpb24gKGVjTW9kZWwpIHtcbiAgICB2YXIgZWNXaWR0aCA9IHRoaXMuX2FwaS5nZXRXaWR0aCgpO1xuXG4gICAgdmFyIGVjSGVpZ2h0ID0gdGhpcy5fYXBpLmdldEhlaWdodCgpO1xuXG4gICAgdmFyIG1lZGlhTGlzdCA9IHRoaXMuX21lZGlhTGlzdDtcbiAgICB2YXIgbWVkaWFEZWZhdWx0ID0gdGhpcy5fbWVkaWFEZWZhdWx0O1xuICAgIHZhciBpbmRpY2VzID0gW107XG4gICAgdmFyIHJlc3VsdCA9IFtdOyAvLyBObyBtZWRpYSBkZWZpbmVkLlxuXG4gICAgaWYgKCFtZWRpYUxpc3QubGVuZ3RoICYmICFtZWRpYURlZmF1bHQpIHtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSAvLyBNdWx0aSBtZWRpYSBtYXkgYmUgYXBwbGllZCwgdGhlIGxhdHRlciBkZWZpbmVkIG1lZGlhIGhhcyBoaWdoZXIgcHJpb3JpdHkuXG5cblxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBtZWRpYUxpc3QubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGlmIChhcHBseU1lZGlhUXVlcnkobWVkaWFMaXN0W2ldLnF1ZXJ5LCBlY1dpZHRoLCBlY0hlaWdodCkpIHtcbiAgICAgICAgaW5kaWNlcy5wdXNoKGkpO1xuICAgICAgfVxuICAgIH0gLy8gRklYTUVcbiAgICAvLyBXaGV0aGVyIG1lZGlhRGVmYXVsdCBzaG91bGQgZm9yY2UgdXNlcnMgdG8gcHJvdmlkZT8gT3RoZXJ3aXNlXG4gICAgLy8gdGhlIGNoYW5nZSBieSBtZWRpYSBxdWVyeSBjYW4gbm90IGJlIHJlY29ydmVyZWQuXG5cblxuICAgIGlmICghaW5kaWNlcy5sZW5ndGggJiYgbWVkaWFEZWZhdWx0KSB7XG4gICAgICBpbmRpY2VzID0gWy0xXTtcbiAgICB9XG5cbiAgICBpZiAoaW5kaWNlcy5sZW5ndGggJiYgIWluZGljZXNFcXVhbHMoaW5kaWNlcywgdGhpcy5fY3VycmVudE1lZGlhSW5kaWNlcykpIHtcbiAgICAgIHJlc3VsdCA9IG1hcChpbmRpY2VzLCBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGNsb25lKGluZGV4ID09PSAtMSA/IG1lZGlhRGVmYXVsdC5vcHRpb24gOiBtZWRpYUxpc3RbaW5kZXhdLm9wdGlvbik7XG4gICAgICB9KTtcbiAgICB9IC8vIE90aGVyd2lzZSByZXR1cm4gbm90aGluZy5cblxuXG4gICAgdGhpcy5fY3VycmVudE1lZGlhSW5kaWNlcyA9IGluZGljZXM7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICByZXR1cm4gT3B0aW9uTWFuYWdlcjtcbn0oKTtcbi8qKlxyXG4gKiBbUkFXX09QVElPTl9QQVRURVJOU11cclxuICogKE5vdGU6IFwic2VyaWVzOiBbXVwiIHJlcHJlc2VudHMgYWxsIG90aGVyIHByb3BzIGluIGBFQ1VuaXRPcHRpb25gKVxyXG4gKlxyXG4gKiAoMSkgTm8gcHJvcCBcImJhc2VPcHRpb25cIiBkZWNsYXJlZDpcclxuICogUm9vdCBvcHRpb24gaXMgdXNlZCBhcyBcImJhc2VPcHRpb25cIiAoZXhjZXB0IHByb3AgXCJvcHRpb25zXCIgYW5kIFwibWVkaWFcIikuXHJcbiAqIGBgYGpzXHJcbiAqIG9wdGlvbiA9IHtcclxuICogICAgIHNlcmllczogW10sXHJcbiAqICAgICB0aW1lbGluZToge30sXHJcbiAqICAgICBvcHRpb25zOiBbXSxcclxuICogfTtcclxuICogb3B0aW9uID0ge1xyXG4gKiAgICAgc2VyaWVzOiBbXSxcclxuICogICAgIG1lZGlhOiB7fSxcclxuICogfTtcclxuICogb3B0aW9uID0ge1xyXG4gKiAgICAgc2VyaWVzOiBbXSxcclxuICogICAgIHRpbWVsaW5lOiB7fSxcclxuICogICAgIG9wdGlvbnM6IFtdLFxyXG4gKiAgICAgbWVkaWE6IHt9LFxyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiAoMikgUHJvcCBcImJhc2VPcHRpb25cIiBkZWNsYXJlZDpcclxuICogSWYgXCJiYXNlT3B0aW9uXCIgZGVjbGFyZWQsIGBFQ1VuaXRPcHRpb25gIHByb3BzIGNhbiBvbmx5IGJlIGRlY2xhcmVkXHJcbiAqIGluc2lkZSBcImJhc2VPcHRpb25cIiBleGNlcHQgcHJvcCBcInRpbWVsaW5lXCIgKGNvbXBhdCBlYzIpLlxyXG4gKiBgYGBqc1xyXG4gKiBvcHRpb24gPSB7XHJcbiAqICAgICBiYXNlT3B0aW9uOiB7XHJcbiAqICAgICAgICAgdGltZWxpbmU6IHt9LFxyXG4gKiAgICAgICAgIHNlcmllczogW10sXHJcbiAqICAgICB9LFxyXG4gKiAgICAgb3B0aW9uczogW11cclxuICogfTtcclxuICogb3B0aW9uID0ge1xyXG4gKiAgICAgYmFzZU9wdGlvbjoge1xyXG4gKiAgICAgICAgIHNlcmllczogW10sXHJcbiAqICAgICB9LFxyXG4gKiAgICAgbWVkaWE6IFtdXHJcbiAqIH07XHJcbiAqIG9wdGlvbiA9IHtcclxuICogICAgIGJhc2VPcHRpb246IHtcclxuICogICAgICAgICB0aW1lbGluZToge30sXHJcbiAqICAgICAgICAgc2VyaWVzOiBbXSxcclxuICogICAgIH0sXHJcbiAqICAgICBvcHRpb25zOiBbXVxyXG4gKiAgICAgbWVkaWE6IFtdXHJcbiAqIH07XHJcbiAqIG9wdGlvbiA9IHtcclxuICogICAgIC8vIGVjMyBjb21wYXQgZWMyOiBhbGxvdyAob25seSkgYHRpbWVsaW5lYCBkZWNsYXJlZFxyXG4gKiAgICAgLy8gb3V0c2lkZSBiYXNlT3B0aW9uLiBLZWVwIHRoaXMgc2V0dGluZyBmb3IgY29tcGF0LlxyXG4gKiAgICAgdGltZWxpbmU6IHt9LFxyXG4gKiAgICAgYmFzZU9wdGlvbjoge1xyXG4gKiAgICAgICAgIHNlcmllczogW10sXHJcbiAqICAgICB9LFxyXG4gKiAgICAgb3B0aW9uczogW10sXHJcbiAqICAgICBtZWRpYTogW11cclxuICogfTtcclxuICogYGBgXHJcbiAqL1xuXG5cbmZ1bmN0aW9uIHBhcnNlUmF3T3B0aW9uKCAvLyBgcmF3T3B0aW9uYCBNYXkgYmUgbW9kaWZpZWRcbnJhd09wdGlvbiwgb3B0aW9uUHJlcHJvY2Vzc29yRnVuY3MsIGlzTmV3KSB7XG4gIHZhciBtZWRpYUxpc3QgPSBbXTtcbiAgdmFyIG1lZGlhRGVmYXVsdDtcbiAgdmFyIGJhc2VPcHRpb247XG4gIHZhciBkZWNsYXJlZEJhc2VPcHRpb24gPSByYXdPcHRpb24uYmFzZU9wdGlvbjsgLy8gQ29tcGF0aWJsZSB3aXRoIGVjMiwgW1JBV19PUFRJT05fUEFUVEVSTlNdIGFib3ZlLlxuXG4gIHZhciB0aW1lbGluZU9uUm9vdCA9IHJhd09wdGlvbi50aW1lbGluZTtcbiAgdmFyIHRpbWVsaW5lT3B0aW9uc09uUm9vdCA9IHJhd09wdGlvbi5vcHRpb25zO1xuICB2YXIgbWVkaWFPblJvb3QgPSByYXdPcHRpb24ubWVkaWE7XG4gIHZhciBoYXNNZWRpYSA9ICEhcmF3T3B0aW9uLm1lZGlhO1xuICB2YXIgaGFzVGltZWxpbmUgPSAhISh0aW1lbGluZU9wdGlvbnNPblJvb3QgfHwgdGltZWxpbmVPblJvb3QgfHwgZGVjbGFyZWRCYXNlT3B0aW9uICYmIGRlY2xhcmVkQmFzZU9wdGlvbi50aW1lbGluZSk7XG5cbiAgaWYgKGRlY2xhcmVkQmFzZU9wdGlvbikge1xuICAgIGJhc2VPcHRpb24gPSBkZWNsYXJlZEJhc2VPcHRpb247IC8vIEZvciBtZXJnZSBvcHRpb24uXG5cbiAgICBpZiAoIWJhc2VPcHRpb24udGltZWxpbmUpIHtcbiAgICAgIGJhc2VPcHRpb24udGltZWxpbmUgPSB0aW1lbGluZU9uUm9vdDtcbiAgICB9XG4gIH0gLy8gRm9yIGNvbnZlbmllbmNlLCBlbmFibGUgdG8gdXNlIHRoZSByb290IG9wdGlvbiBhcyB0aGUgYGJhc2VPcHRpb25gOlxuICAvLyBgeyAuLi5ub3JtYWxPcHRpb25Qcm9wcywgbWVkaWE6IFt7IC4uLiB9LCB7IC4uLiB9XSB9YFxuICBlbHNlIHtcbiAgICAgIGlmIChoYXNUaW1lbGluZSB8fCBoYXNNZWRpYSkge1xuICAgICAgICByYXdPcHRpb24ub3B0aW9ucyA9IHJhd09wdGlvbi5tZWRpYSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIGJhc2VPcHRpb24gPSByYXdPcHRpb247XG4gICAgfVxuXG4gIGlmIChoYXNNZWRpYSkge1xuICAgIGlmIChpc0FycmF5KG1lZGlhT25Sb290KSkge1xuICAgICAgZWFjaChtZWRpYU9uUm9vdCwgZnVuY3Rpb24gKHNpbmdsZU1lZGlhKSB7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgLy8gUmVhbCBjYXNlIG9mIHdyb25nIGNvbmZpZy5cbiAgICAgICAgICBpZiAoc2luZ2xlTWVkaWEgJiYgIXNpbmdsZU1lZGlhLm9wdGlvbiAmJiBpc09iamVjdChzaW5nbGVNZWRpYS5xdWVyeSkgJiYgaXNPYmplY3Qoc2luZ2xlTWVkaWEucXVlcnkub3B0aW9uKSkge1xuICAgICAgICAgICAgZXJyb3IoJ0lsbGVnYWwgbWVkaWEgb3B0aW9uLiBNdXN0IGJlIGxpa2UgeyBtZWRpYTogWyB7IHF1ZXJ5OiB7fSwgb3B0aW9uOiB7fSB9IF0gfScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzaW5nbGVNZWRpYSAmJiBzaW5nbGVNZWRpYS5vcHRpb24pIHtcbiAgICAgICAgICBpZiAoc2luZ2xlTWVkaWEucXVlcnkpIHtcbiAgICAgICAgICAgIG1lZGlhTGlzdC5wdXNoKHNpbmdsZU1lZGlhKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCFtZWRpYURlZmF1bHQpIHtcbiAgICAgICAgICAgIC8vIFVzZSB0aGUgZmlyc3QgbWVkaWEgZGVmYXVsdC5cbiAgICAgICAgICAgIG1lZGlhRGVmYXVsdCA9IHNpbmdsZU1lZGlhO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIC8vIFJlYWwgY2FzZSBvZiB3cm9uZyBjb25maWcuXG4gICAgICAgIGVycm9yKCdJbGxlZ2FsIG1lZGlhIG9wdGlvbi4gTXVzdCBiZSBhbiBhcnJheS4gTGlrZSB7IG1lZGlhOiBbIHsuLi59LCB7Li4ufSBdIH0nKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBkb1ByZXByb2Nlc3MoYmFzZU9wdGlvbik7XG4gIGVhY2godGltZWxpbmVPcHRpb25zT25Sb290LCBmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgcmV0dXJuIGRvUHJlcHJvY2VzcyhvcHRpb24pO1xuICB9KTtcbiAgZWFjaChtZWRpYUxpc3QsIGZ1bmN0aW9uIChtZWRpYSkge1xuICAgIHJldHVybiBkb1ByZXByb2Nlc3MobWVkaWEub3B0aW9uKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gZG9QcmVwcm9jZXNzKG9wdGlvbikge1xuICAgIGVhY2gob3B0aW9uUHJlcHJvY2Vzc29yRnVuY3MsIGZ1bmN0aW9uIChwcmVQcm9jZXNzKSB7XG4gICAgICBwcmVQcm9jZXNzKG9wdGlvbiwgaXNOZXcpO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBiYXNlT3B0aW9uOiBiYXNlT3B0aW9uLFxuICAgIHRpbWVsaW5lT3B0aW9uczogdGltZWxpbmVPcHRpb25zT25Sb290IHx8IFtdLFxuICAgIG1lZGlhRGVmYXVsdDogbWVkaWFEZWZhdWx0LFxuICAgIG1lZGlhTGlzdDogbWVkaWFMaXN0XG4gIH07XG59XG4vKipcclxuICogQHNlZSA8aHR0cDovL3d3dy53My5vcmcvVFIvY3NzMy1tZWRpYXF1ZXJpZXMvI21lZGlhMT5cclxuICogU3VwcG9ydDogd2lkdGgsIGhlaWdodCwgYXNwZWN0UmF0aW9cclxuICogQ2FuIHVzZSBtYXggb3IgbWluIGFzIHByZWZpeC5cclxuICovXG5cblxuZnVuY3Rpb24gYXBwbHlNZWRpYVF1ZXJ5KHF1ZXJ5LCBlY1dpZHRoLCBlY0hlaWdodCkge1xuICB2YXIgcmVhbE1hcCA9IHtcbiAgICB3aWR0aDogZWNXaWR0aCxcbiAgICBoZWlnaHQ6IGVjSGVpZ2h0LFxuICAgIGFzcGVjdHJhdGlvOiBlY1dpZHRoIC8gZWNIZWlnaHQgLy8gbG93ZXIgY2FzZSBmb3IgY29udmVuaWVuY2UuXG5cbiAgfTtcbiAgdmFyIGFwcGxpY2FibGUgPSB0cnVlO1xuICBlYWNoKHF1ZXJ5LCBmdW5jdGlvbiAodmFsdWUsIGF0dHIpIHtcbiAgICB2YXIgbWF0Y2hlZCA9IGF0dHIubWF0Y2goUVVFUllfUkVHKTtcblxuICAgIGlmICghbWF0Y2hlZCB8fCAhbWF0Y2hlZFsxXSB8fCAhbWF0Y2hlZFsyXSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBvcGVyYXRvciA9IG1hdGNoZWRbMV07XG4gICAgdmFyIHJlYWxBdHRyID0gbWF0Y2hlZFsyXS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgaWYgKCFjb21wYXJlKHJlYWxNYXBbcmVhbEF0dHJdLCB2YWx1ZSwgb3BlcmF0b3IpKSB7XG4gICAgICBhcHBsaWNhYmxlID0gZmFsc2U7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGFwcGxpY2FibGU7XG59XG5cbmZ1bmN0aW9uIGNvbXBhcmUocmVhbCwgZXhwZWN0LCBvcGVyYXRvcikge1xuICBpZiAob3BlcmF0b3IgPT09ICdtaW4nKSB7XG4gICAgcmV0dXJuIHJlYWwgPj0gZXhwZWN0O1xuICB9IGVsc2UgaWYgKG9wZXJhdG9yID09PSAnbWF4Jykge1xuICAgIHJldHVybiByZWFsIDw9IGV4cGVjdDtcbiAgfSBlbHNlIHtcbiAgICAvLyBFcXVhbHNcbiAgICByZXR1cm4gcmVhbCA9PT0gZXhwZWN0O1xuICB9XG59XG5cbmZ1bmN0aW9uIGluZGljZXNFcXVhbHMoaW5kaWNlczEsIGluZGljZXMyKSB7XG4gIC8vIGluZGljZXMgaXMgYWx3YXlzIG9yZGVyIGJ5IGFzYyBhbmQgaGFzIG9ubHkgZmluaXRlIG51bWJlci5cbiAgcmV0dXJuIGluZGljZXMxLmpvaW4oJywnKSA9PT0gaW5kaWNlczIuam9pbignLCcpO1xufVxuLyoqXHJcbiAqIENvbnNpZGVyIGNhc2U6XHJcbiAqIGBjaGFydC5zZXRPcHRpb24ob3B0MSk7YFxyXG4gKiBUaGVuIHVzZXIgZG8gc29tZSBpbnRlcmFjdGlvbiBsaWtlIGRhdGFab29tLCBkYXRhVmlldyBjaGFuZ2luZy5cclxuICogYGNoYXJ0LnNldE9wdGlvbihvcHQyKTtgXHJcbiAqIFRoZW4gdXNlciBwcmVzcyAncmVzZXQgYnV0dG9uJyBpbiB0b29sYm94LlxyXG4gKlxyXG4gKiBBZnRlciBkb2luZyB0aGF0IGFsbCBvZiB0aGUgaW50ZXJhY3Rpb24gZWZmZWN0cyBzaG91bGQgYmUgcmVzZXQsIHRoZVxyXG4gKiBjaGFydCBzaG91bGQgYmUgdGhlIHNhbWUgYXMgdGhlIHJlc3VsdCBvZiBpbnZva2VcclxuICogYGNoYXJ0LnNldE9wdGlvbihvcHQxKTsgY2hhcnQuc2V0T3B0aW9uKG9wdDIpO2AuXHJcbiAqXHJcbiAqIEFsdGhvdWdoIGl0IGlzIG5vdCBhYmxlIGVuc3VyZSB0aGF0XHJcbiAqIGBjaGFydC5zZXRPcHRpb24ob3B0MSk7IGNoYXJ0LnNldE9wdGlvbihvcHQyKTtgIGlzIGVxdWl2YWxlbnRzIHRvXHJcbiAqIGBjaGFydC5zZXRPcHRpb24obWVyZ2Uob3B0MSwgb3B0MikpO2AgZXhhY3RseSxcclxuICogdGhpcyBtaWdodCBiZSB0aGUgb25seSBzaW1wbGUgd2F5IHRvIGltcGxlbWVudCB0aGF0IGZlYXR1cmUuXHJcbiAqXHJcbiAqIE1FTU86IFdlJ3ZlIGNvbnNpZGVyZWQgc29tZSBvdGhlciBhcHByb2FjaGVzOlxyXG4gKiAxLiBFYWNoIG1vZGVsIGhhbmRsZXMgaXRzIHNlbGYgcmVzdG9yYXRpb24gYnV0IG5vdCB1bmlmb3JtIHRyZWF0bWVudC5cclxuICogICAgIChUb28gY29tcGxleCBpbiBsb2dpYyBhbmQgZXJyb3ItcHJvbmUpXHJcbiAqIDIuIFVzZSBhIHNoYWRvdyBlY01vZGVsLiAoUGVyZm9ybWFuY2UgZXhwZW5zaXZlKVxyXG4gKlxyXG4gKiBGSVhNRTogQSBwb3NzaWJsZSBzb2x1dGlvbjpcclxuICogQWRkIGEgZXh0cmEgbGV2ZWwgb2YgbW9kZWwgZm9yIGVhY2ggY29tcG9uZW50IG1vZGVsLiBUaGUgaW5oZXJpdGFuY2UgY2hhaW4gd291bGQgYmU6XHJcbiAqIGVjTW9kZWwgPC0gY29tcG9uZW50TW9kZWwgPC0gY29tcG9uZW50QWN0aW9uTW9kZWwgPC0gZGF0YUl0ZW1Nb2RlbFxyXG4gKiBBbmQgYWxsIG9mIHRoZSBhY3Rpb25zIGNhbiBvbmx5IG1vZGlmeSB0aGUgYGNvbXBvbmVudEFjdGlvbk1vZGVsYCByYXRoZXIgdGhhblxyXG4gKiBgY29tcG9uZW50TW9kZWxgLiBgc2V0T3B0aW9uYCB3aWxsIG9ubHkgbW9kaWZ5IHRoZSBgZWNNb2RlbGAgYW5kIGBjb21wb25lbnRNb2RlbGAuXHJcbiAqIFdoZW4gXCJyZXNvdHJlXCIgYWN0aW9uIHRyaWdnZXJlZCwgbW9kZWwgZnJvbSBgY29tcG9uZW50QWN0aW9uTW9kZWxgIHdpbGwgYmUgZGlzY2FyZGVkXHJcbiAqIGluc3RlYWQgb2YgcmVjcmVhdGluZyB0aGUgXCJlY01vZGVsXCIgZnJvbSB0aGUgXCJfb3B0aW9uQmFja3VwXCIuXHJcbiAqL1xuLy8gZnVuY3Rpb24gbWVyZ2VUb0JhY2t1cE9wdGlvbihcbi8vICAgICBmYWtlQ21wdHNNYXA6IEZha2VDb21wb25lbnRzTWFwLFxuLy8gICAgIC8vIGB0YXJPcHRpb25gIENhbiBiZSBudWxsL3VuZGVmaW5lZCwgbWVhbnMgaW5pdFxuLy8gICAgIHRhck9wdGlvbjogRUNVbml0T3B0aW9uLFxuLy8gICAgIG5ld09wdGlvbjogRUNVbml0T3B0aW9uLFxuLy8gICAgIC8vIENhbiBiZSBudWxsL3VuZGVmaW5lZFxuLy8gICAgIG9wdDogSW5uZXJTZXRPcHRpb25PcHRzXG4vLyApOiB2b2lkIHtcbi8vICAgICBuZXdPcHRpb24gPSBuZXdPcHRpb24gfHwge30gYXMgRUNVbml0T3B0aW9uO1xuLy8gICAgIGNvbnN0IG5vdEluaXQgPSAhIXRhck9wdGlvbjtcbi8vICAgICBlYWNoKG5ld09wdGlvbiwgZnVuY3Rpb24gKG5ld09wdHNJbk1haW5UeXBlLCBtYWluVHlwZSkge1xuLy8gICAgICAgICBpZiAobmV3T3B0c0luTWFpblR5cGUgPT0gbnVsbCkge1xuLy8gICAgICAgICAgICAgcmV0dXJuO1xuLy8gICAgICAgICB9XG4vLyAgICAgICAgIGlmICghQ29tcG9uZW50TW9kZWwuaGFzQ2xhc3MobWFpblR5cGUpKSB7XG4vLyAgICAgICAgICAgICBpZiAodGFyT3B0aW9uKSB7XG4vLyAgICAgICAgICAgICAgICAgdGFyT3B0aW9uW21haW5UeXBlXSA9IG1lcmdlKHRhck9wdGlvblttYWluVHlwZV0sIG5ld09wdHNJbk1haW5UeXBlLCB0cnVlKTtcbi8vICAgICAgICAgICAgIH1cbi8vICAgICAgICAgfVxuLy8gICAgICAgICBlbHNlIHtcbi8vICAgICAgICAgICAgIGNvbnN0IG9sZFRhck9wdHNJbk1haW5UeXBlID0gbm90SW5pdCA/IG5vcm1hbGl6ZVRvQXJyYXkodGFyT3B0aW9uW21haW5UeXBlXSkgOiBudWxsO1xuLy8gICAgICAgICAgICAgY29uc3Qgb2xkRmFrZUNtcHRzSW5NYWluVHlwZSA9IGZha2VDbXB0c01hcC5nZXQobWFpblR5cGUpIHx8IFtdO1xuLy8gICAgICAgICAgICAgY29uc3QgcmVzdWx0VGFyT3B0c0luTWFpblR5cGUgPSBub3RJbml0ID8gKHRhck9wdGlvblttYWluVHlwZV0gPSBbXSBhcyBDb21wb25lbnRPcHRpb25bXSkgOiBudWxsO1xuLy8gICAgICAgICAgICAgY29uc3QgcmVzdWx0RmFrZUNtcHRzSW5NYWluVHlwZSA9IGZha2VDbXB0c01hcC5zZXQobWFpblR5cGUsIFtdKTtcbi8vICAgICAgICAgICAgIGNvbnN0IG1hcHBpbmdSZXN1bHQgPSBtYXBwaW5nVG9FeGlzdHMoXG4vLyAgICAgICAgICAgICAgICAgb2xkRmFrZUNtcHRzSW5NYWluVHlwZSxcbi8vICAgICAgICAgICAgICAgICBub3JtYWxpemVUb0FycmF5KG5ld09wdHNJbk1haW5UeXBlKSxcbi8vICAgICAgICAgICAgICAgICAob3B0ICYmIG9wdC5yZXBsYWNlTWVyZ2VNYWluVHlwZU1hcC5nZXQobWFpblR5cGUpKSA/ICdyZXBsYWNlTWVyZ2UnIDogJ25vcm1hbE1lcmdlJ1xuLy8gICAgICAgICAgICAgKTtcbi8vICAgICAgICAgICAgIHNldENvbXBvbmVudFR5cGVUb0tleUluZm8obWFwcGluZ1Jlc3VsdCwgbWFpblR5cGUsIENvbXBvbmVudE1vZGVsIGFzIENvbXBvbmVudE1vZGVsQ29uc3RydWN0b3IpO1xuLy8gICAgICAgICAgICAgZWFjaChtYXBwaW5nUmVzdWx0LCBmdW5jdGlvbiAocmVzdWx0SXRlbSwgaW5kZXgpIHtcbi8vICAgICAgICAgICAgICAgICAvLyBUaGUgc2FtZSBsb2dpYyBhcyBgR2xvYmFsLnRzI19tZXJnZU9wdGlvbmAuXG4vLyAgICAgICAgICAgICAgICAgbGV0IGZha2VDbXB0ID0gcmVzdWx0SXRlbS5leGlzdGluZztcbi8vICAgICAgICAgICAgICAgICBjb25zdCBuZXdPcHRpb24gPSByZXN1bHRJdGVtLm5ld09wdGlvbjtcbi8vICAgICAgICAgICAgICAgICBjb25zdCBrZXlJbmZvID0gcmVzdWx0SXRlbS5rZXlJbmZvO1xuLy8gICAgICAgICAgICAgICAgIGxldCBmYWtlQ21wdE9wdDtcbi8vICAgICAgICAgICAgICAgICBpZiAoIW5ld09wdGlvbikge1xuLy8gICAgICAgICAgICAgICAgICAgICBmYWtlQ21wdE9wdCA9IG9sZFRhck9wdHNJbk1haW5UeXBlW2luZGV4XTtcbi8vICAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICAgICAgZWxzZSB7XG4vLyAgICAgICAgICAgICAgICAgICAgIGlmIChmYWtlQ21wdCAmJiBmYWtlQ21wdC5zdWJUeXBlID09PSBrZXlJbmZvLnN1YlR5cGUpIHtcbi8vICAgICAgICAgICAgICAgICAgICAgICAgIGZha2VDbXB0Lm5hbWUgPSBrZXlJbmZvLm5hbWU7XG4vLyAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90SW5pdCkge1xuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZha2VDbXB0T3B0ID0gbWVyZ2Uob2xkVGFyT3B0c0luTWFpblR5cGVbaW5kZXhdLCBuZXdPcHRpb24sIHRydWUpO1xuLy8gICAgICAgICAgICAgICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuLy8gICAgICAgICAgICAgICAgICAgICAgICAgZmFrZUNtcHQgPSBleHRlbmQoe30sIGtleUluZm8pO1xuLy8gICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdEluaXQpIHtcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWtlQ21wdE9wdCA9IGNsb25lKG5ld09wdGlvbik7XG4vLyAgICAgICAgICAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICAgICAgaWYgKGZha2VDbXB0KSB7XG4vLyAgICAgICAgICAgICAgICAgICAgIG5vdEluaXQgJiYgcmVzdWx0VGFyT3B0c0luTWFpblR5cGUucHVzaChmYWtlQ21wdE9wdCk7XG4vLyAgICAgICAgICAgICAgICAgICAgIHJlc3VsdEZha2VDbXB0c0luTWFpblR5cGUucHVzaChmYWtlQ21wdCk7XG4vLyAgICAgICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgICAgIGVsc2Uge1xuLy8gICAgICAgICAgICAgICAgICAgICBub3RJbml0ICYmIHJlc3VsdFRhck9wdHNJbk1haW5UeXBlLnB1c2godm9pZCAwKTtcbi8vICAgICAgICAgICAgICAgICAgICAgcmVzdWx0RmFrZUNtcHRzSW5NYWluVHlwZS5wdXNoKHZvaWQgMCk7XG4vLyAgICAgICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgIH1cbi8vICAgICB9KTtcbi8vIH1cblxuXG5leHBvcnQgZGVmYXVsdCBPcHRpb25NYW5hZ2VyOyIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0ICogYXMgenJVdGlsIGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgKiBhcyBtb2RlbFV0aWwgZnJvbSAnLi4vLi4vdXRpbC9tb2RlbC5qcyc7XG5pbXBvcnQgeyBkZXByZWNhdGVMb2csIGRlcHJlY2F0ZVJlcGxhY2VMb2cgfSBmcm9tICcuLi8uLi91dGlsL2xvZy5qcyc7XG52YXIgZWFjaCA9IHpyVXRpbC5lYWNoO1xudmFyIGlzT2JqZWN0ID0genJVdGlsLmlzT2JqZWN0O1xudmFyIFBPU1NJQkxFX1NUWUxFUyA9IFsnYXJlYVN0eWxlJywgJ2xpbmVTdHlsZScsICdub2RlU3R5bGUnLCAnbGlua1N0eWxlJywgJ2Nob3JkU3R5bGUnLCAnbGFiZWwnLCAnbGFiZWxMaW5lJ107XG5cbmZ1bmN0aW9uIGNvbXBhdEVDMkl0ZW1TdHlsZShvcHQpIHtcbiAgdmFyIGl0ZW1TdHlsZU9wdCA9IG9wdCAmJiBvcHQuaXRlbVN0eWxlO1xuXG4gIGlmICghaXRlbVN0eWxlT3B0KSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IFBPU1NJQkxFX1NUWUxFUy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIHZhciBzdHlsZU5hbWUgPSBQT1NTSUJMRV9TVFlMRVNbaV07XG4gICAgdmFyIG5vcm1hbEl0ZW1TdHlsZU9wdCA9IGl0ZW1TdHlsZU9wdC5ub3JtYWw7XG4gICAgdmFyIGVtcGhhc2lzSXRlbVN0eWxlT3B0ID0gaXRlbVN0eWxlT3B0LmVtcGhhc2lzO1xuXG4gICAgaWYgKG5vcm1hbEl0ZW1TdHlsZU9wdCAmJiBub3JtYWxJdGVtU3R5bGVPcHRbc3R5bGVOYW1lXSkge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgZGVwcmVjYXRlUmVwbGFjZUxvZyhcIml0ZW1TdHlsZS5ub3JtYWwuXCIgKyBzdHlsZU5hbWUsIHN0eWxlTmFtZSk7XG4gICAgICB9XG5cbiAgICAgIG9wdFtzdHlsZU5hbWVdID0gb3B0W3N0eWxlTmFtZV0gfHwge307XG5cbiAgICAgIGlmICghb3B0W3N0eWxlTmFtZV0ubm9ybWFsKSB7XG4gICAgICAgIG9wdFtzdHlsZU5hbWVdLm5vcm1hbCA9IG5vcm1hbEl0ZW1TdHlsZU9wdFtzdHlsZU5hbWVdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgenJVdGlsLm1lcmdlKG9wdFtzdHlsZU5hbWVdLm5vcm1hbCwgbm9ybWFsSXRlbVN0eWxlT3B0W3N0eWxlTmFtZV0pO1xuICAgICAgfVxuXG4gICAgICBub3JtYWxJdGVtU3R5bGVPcHRbc3R5bGVOYW1lXSA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKGVtcGhhc2lzSXRlbVN0eWxlT3B0ICYmIGVtcGhhc2lzSXRlbVN0eWxlT3B0W3N0eWxlTmFtZV0pIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGRlcHJlY2F0ZVJlcGxhY2VMb2coXCJpdGVtU3R5bGUuZW1waGFzaXMuXCIgKyBzdHlsZU5hbWUsIFwiZW1waGFzaXMuXCIgKyBzdHlsZU5hbWUpO1xuICAgICAgfVxuXG4gICAgICBvcHRbc3R5bGVOYW1lXSA9IG9wdFtzdHlsZU5hbWVdIHx8IHt9O1xuXG4gICAgICBpZiAoIW9wdFtzdHlsZU5hbWVdLmVtcGhhc2lzKSB7XG4gICAgICAgIG9wdFtzdHlsZU5hbWVdLmVtcGhhc2lzID0gZW1waGFzaXNJdGVtU3R5bGVPcHRbc3R5bGVOYW1lXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHpyVXRpbC5tZXJnZShvcHRbc3R5bGVOYW1lXS5lbXBoYXNpcywgZW1waGFzaXNJdGVtU3R5bGVPcHRbc3R5bGVOYW1lXSk7XG4gICAgICB9XG5cbiAgICAgIGVtcGhhc2lzSXRlbVN0eWxlT3B0W3N0eWxlTmFtZV0gPSBudWxsO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBjb252ZXJ0Tm9ybWFsRW1waGFzaXMob3B0LCBvcHRUeXBlLCB1c2VFeHRlbmQpIHtcbiAgaWYgKG9wdCAmJiBvcHRbb3B0VHlwZV0gJiYgKG9wdFtvcHRUeXBlXS5ub3JtYWwgfHwgb3B0W29wdFR5cGVdLmVtcGhhc2lzKSkge1xuICAgIHZhciBub3JtYWxPcHQgPSBvcHRbb3B0VHlwZV0ubm9ybWFsO1xuICAgIHZhciBlbXBoYXNpc09wdCA9IG9wdFtvcHRUeXBlXS5lbXBoYXNpcztcblxuICAgIGlmIChub3JtYWxPcHQpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG4gICAgICAgIGRlcHJlY2F0ZUxvZyhcIidub3JtYWwnIGhpZXJhcmNoeSBpbiBcIiArIG9wdFR5cGUgKyBcIiBoYXMgYmVlbiByZW1vdmVkIHNpbmNlIDQuMC4gQWxsIHN0eWxlIHByb3BlcnRpZXMgYXJlIGNvbmZpZ3VyZWQgaW4gXCIgKyBvcHRUeXBlICsgXCIgZGlyZWN0bHkgbm93LlwiKTtcbiAgICAgIH0gLy8gVGltZWxpbmUgY29udHJvbFN0eWxlIGhhcyBvdGhlciBwcm9wZXJ0aWVzIGJlc2lkZXMgbm9ybWFsIGFuZCBlbXBoYXNpc1xuXG5cbiAgICAgIGlmICh1c2VFeHRlbmQpIHtcbiAgICAgICAgb3B0W29wdFR5cGVdLm5vcm1hbCA9IG9wdFtvcHRUeXBlXS5lbXBoYXNpcyA9IG51bGw7XG4gICAgICAgIHpyVXRpbC5kZWZhdWx0cyhvcHRbb3B0VHlwZV0sIG5vcm1hbE9wdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRbb3B0VHlwZV0gPSBub3JtYWxPcHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGVtcGhhc2lzT3B0KSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBkZXByZWNhdGVMb2cob3B0VHlwZSArIFwiLmVtcGhhc2lzIGhhcyBiZWVuIGNoYW5nZWQgdG8gZW1waGFzaXMuXCIgKyBvcHRUeXBlICsgXCIgc2luY2UgNC4wXCIpO1xuICAgICAgfVxuXG4gICAgICBvcHQuZW1waGFzaXMgPSBvcHQuZW1waGFzaXMgfHwge307XG4gICAgICBvcHQuZW1waGFzaXNbb3B0VHlwZV0gPSBlbXBoYXNpc09wdDsgLy8gQWxzbyBjb21wYXQgdGhlIGNhc2UgdXNlciBtaXggdGhlIHN0eWxlIGFuZCBmb2N1cyB0b2dldGhlciBpbiBlYzMgc3R5bGVcbiAgICAgIC8vIGZvciBleGFtcGxlOiB7IGl0ZW1TdHlsZTogeyBub3JtYWw6IHt9LCBlbXBoYXNpczoge2ZvY3VzLCBzaGFkb3dCbHVyfSB9IH1cblxuICAgICAgaWYgKGVtcGhhc2lzT3B0LmZvY3VzKSB7XG4gICAgICAgIG9wdC5lbXBoYXNpcy5mb2N1cyA9IGVtcGhhc2lzT3B0LmZvY3VzO1xuICAgICAgfVxuXG4gICAgICBpZiAoZW1waGFzaXNPcHQuYmx1clNjb3BlKSB7XG4gICAgICAgIG9wdC5lbXBoYXNpcy5ibHVyU2NvcGUgPSBlbXBoYXNpc09wdC5ibHVyU2NvcGU7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUVDM05vcm1hbFN0YXR1cyhvcHQpIHtcbiAgY29udmVydE5vcm1hbEVtcGhhc2lzKG9wdCwgJ2l0ZW1TdHlsZScpO1xuICBjb252ZXJ0Tm9ybWFsRW1waGFzaXMob3B0LCAnbGluZVN0eWxlJyk7XG4gIGNvbnZlcnROb3JtYWxFbXBoYXNpcyhvcHQsICdhcmVhU3R5bGUnKTtcbiAgY29udmVydE5vcm1hbEVtcGhhc2lzKG9wdCwgJ2xhYmVsJyk7XG4gIGNvbnZlcnROb3JtYWxFbXBoYXNpcyhvcHQsICdsYWJlbExpbmUnKTsgLy8gdHJlZW1hcFxuXG4gIGNvbnZlcnROb3JtYWxFbXBoYXNpcyhvcHQsICd1cHBlckxhYmVsJyk7IC8vIGdyYXBoXG5cbiAgY29udmVydE5vcm1hbEVtcGhhc2lzKG9wdCwgJ2VkZ2VMYWJlbCcpO1xufVxuXG5mdW5jdGlvbiBjb21wYXRUZXh0U3R5bGUob3B0LCBwcm9wTmFtZSkge1xuICAvLyBDaGVjayB3aGV0aGVyIGlzIG5vdCBvYmplY3QgKHN0cmluZ1xcbnVsbFxcdW5kZWZpbmVkIC4uLilcbiAgdmFyIGxhYmVsT3B0U2luZ2xlID0gaXNPYmplY3Qob3B0KSAmJiBvcHRbcHJvcE5hbWVdO1xuICB2YXIgdGV4dFN0eWxlID0gaXNPYmplY3QobGFiZWxPcHRTaW5nbGUpICYmIGxhYmVsT3B0U2luZ2xlLnRleHRTdHlsZTtcblxuICBpZiAodGV4dFN0eWxlKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG4gICAgICBkZXByZWNhdGVMb2coXCJ0ZXh0U3R5bGUgaGllcmFyY2h5IGluIFwiICsgcHJvcE5hbWUgKyBcIiBoYXMgYmVlbiByZW1vdmVkIHNpbmNlIDQuMC4gQWxsIHRleHRTdHlsZSBwcm9wZXJ0aWVzIGFyZSBjb25maWd1cmVkIGluIFwiICsgcHJvcE5hbWUgKyBcIiBkaXJlY3RseSBub3cuXCIpO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBtb2RlbFV0aWwuVEVYVF9TVFlMRV9PUFRJT05TLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB2YXIgdGV4dFByb3BOYW1lID0gbW9kZWxVdGlsLlRFWFRfU1RZTEVfT1BUSU9OU1tpXTtcblxuICAgICAgaWYgKHRleHRTdHlsZS5oYXNPd25Qcm9wZXJ0eSh0ZXh0UHJvcE5hbWUpKSB7XG4gICAgICAgIGxhYmVsT3B0U2luZ2xlW3RleHRQcm9wTmFtZV0gPSB0ZXh0U3R5bGVbdGV4dFByb3BOYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gY29tcGF0RUMzQ29tbW9uU3R5bGVzKG9wdCkge1xuICBpZiAob3B0KSB7XG4gICAgcmVtb3ZlRUMzTm9ybWFsU3RhdHVzKG9wdCk7XG4gICAgY29tcGF0VGV4dFN0eWxlKG9wdCwgJ2xhYmVsJyk7XG4gICAgb3B0LmVtcGhhc2lzICYmIGNvbXBhdFRleHRTdHlsZShvcHQuZW1waGFzaXMsICdsYWJlbCcpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NTZXJpZXMoc2VyaWVzT3B0KSB7XG4gIGlmICghaXNPYmplY3Qoc2VyaWVzT3B0KSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbXBhdEVDMkl0ZW1TdHlsZShzZXJpZXNPcHQpO1xuICByZW1vdmVFQzNOb3JtYWxTdGF0dXMoc2VyaWVzT3B0KTtcbiAgY29tcGF0VGV4dFN0eWxlKHNlcmllc09wdCwgJ2xhYmVsJyk7IC8vIHRyZWVtYXBcblxuICBjb21wYXRUZXh0U3R5bGUoc2VyaWVzT3B0LCAndXBwZXJMYWJlbCcpOyAvLyBncmFwaFxuXG4gIGNvbXBhdFRleHRTdHlsZShzZXJpZXNPcHQsICdlZGdlTGFiZWwnKTtcblxuICBpZiAoc2VyaWVzT3B0LmVtcGhhc2lzKSB7XG4gICAgY29tcGF0VGV4dFN0eWxlKHNlcmllc09wdC5lbXBoYXNpcywgJ2xhYmVsJyk7IC8vIHRyZWVtYXBcblxuICAgIGNvbXBhdFRleHRTdHlsZShzZXJpZXNPcHQuZW1waGFzaXMsICd1cHBlckxhYmVsJyk7IC8vIGdyYXBoXG5cbiAgICBjb21wYXRUZXh0U3R5bGUoc2VyaWVzT3B0LmVtcGhhc2lzLCAnZWRnZUxhYmVsJyk7XG4gIH1cblxuICB2YXIgbWFya1BvaW50ID0gc2VyaWVzT3B0Lm1hcmtQb2ludDtcblxuICBpZiAobWFya1BvaW50KSB7XG4gICAgY29tcGF0RUMySXRlbVN0eWxlKG1hcmtQb2ludCk7XG4gICAgY29tcGF0RUMzQ29tbW9uU3R5bGVzKG1hcmtQb2ludCk7XG4gIH1cblxuICB2YXIgbWFya0xpbmUgPSBzZXJpZXNPcHQubWFya0xpbmU7XG5cbiAgaWYgKG1hcmtMaW5lKSB7XG4gICAgY29tcGF0RUMySXRlbVN0eWxlKG1hcmtMaW5lKTtcbiAgICBjb21wYXRFQzNDb21tb25TdHlsZXMobWFya0xpbmUpO1xuICB9XG5cbiAgdmFyIG1hcmtBcmVhID0gc2VyaWVzT3B0Lm1hcmtBcmVhO1xuXG4gIGlmIChtYXJrQXJlYSkge1xuICAgIGNvbXBhdEVDM0NvbW1vblN0eWxlcyhtYXJrQXJlYSk7XG4gIH1cblxuICB2YXIgZGF0YSA9IHNlcmllc09wdC5kYXRhOyAvLyBCcmVhayB3aXRoIGVjMzogaWYgYHNldE9wdGlvbmAgYWdhaW4sIHRoZXJlIG1heSBiZSBubyBgdHlwZWAgaW4gb3B0aW9uLFxuICAvLyB0aGVuIHRoZSBiYWNrd2FyZCBjb21wYXQgYmFzZWQgb24gb3B0aW9uIHR5cGUgd2lsbCBub3QgYmUgcGVyZm9ybWVkLlxuXG4gIGlmIChzZXJpZXNPcHQudHlwZSA9PT0gJ2dyYXBoJykge1xuICAgIGRhdGEgPSBkYXRhIHx8IHNlcmllc09wdC5ub2RlcztcbiAgICB2YXIgZWRnZURhdGEgPSBzZXJpZXNPcHQubGlua3MgfHwgc2VyaWVzT3B0LmVkZ2VzO1xuXG4gICAgaWYgKGVkZ2VEYXRhICYmICF6clV0aWwuaXNUeXBlZEFycmF5KGVkZ2VEYXRhKSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlZGdlRGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb21wYXRFQzNDb21tb25TdHlsZXMoZWRnZURhdGFbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHpyVXRpbC5lYWNoKHNlcmllc09wdC5jYXRlZ29yaWVzLCBmdW5jdGlvbiAob3B0KSB7XG4gICAgICByZW1vdmVFQzNOb3JtYWxTdGF0dXMob3B0KTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChkYXRhICYmICF6clV0aWwuaXNUeXBlZEFycmF5KGRhdGEpKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb21wYXRFQzNDb21tb25TdHlsZXMoZGF0YVtpXSk7XG4gICAgfVxuICB9IC8vIG1hcmsgcG9pbnQgZGF0YVxuXG5cbiAgbWFya1BvaW50ID0gc2VyaWVzT3B0Lm1hcmtQb2ludDtcblxuICBpZiAobWFya1BvaW50ICYmIG1hcmtQb2ludC5kYXRhKSB7XG4gICAgdmFyIG1wRGF0YSA9IG1hcmtQb2ludC5kYXRhO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtcERhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbXBhdEVDM0NvbW1vblN0eWxlcyhtcERhdGFbaV0pO1xuICAgIH1cbiAgfSAvLyBtYXJrIGxpbmUgZGF0YVxuXG5cbiAgbWFya0xpbmUgPSBzZXJpZXNPcHQubWFya0xpbmU7XG5cbiAgaWYgKG1hcmtMaW5lICYmIG1hcmtMaW5lLmRhdGEpIHtcbiAgICB2YXIgbWxEYXRhID0gbWFya0xpbmUuZGF0YTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWxEYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoenJVdGlsLmlzQXJyYXkobWxEYXRhW2ldKSkge1xuICAgICAgICBjb21wYXRFQzNDb21tb25TdHlsZXMobWxEYXRhW2ldWzBdKTtcbiAgICAgICAgY29tcGF0RUMzQ29tbW9uU3R5bGVzKG1sRGF0YVtpXVsxXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb21wYXRFQzNDb21tb25TdHlsZXMobWxEYXRhW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gLy8gU2VyaWVzXG5cblxuICBpZiAoc2VyaWVzT3B0LnR5cGUgPT09ICdnYXVnZScpIHtcbiAgICBjb21wYXRUZXh0U3R5bGUoc2VyaWVzT3B0LCAnYXhpc0xhYmVsJyk7XG4gICAgY29tcGF0VGV4dFN0eWxlKHNlcmllc09wdCwgJ3RpdGxlJyk7XG4gICAgY29tcGF0VGV4dFN0eWxlKHNlcmllc09wdCwgJ2RldGFpbCcpO1xuICB9IGVsc2UgaWYgKHNlcmllc09wdC50eXBlID09PSAndHJlZW1hcCcpIHtcbiAgICBjb252ZXJ0Tm9ybWFsRW1waGFzaXMoc2VyaWVzT3B0LmJyZWFkY3J1bWIsICdpdGVtU3R5bGUnKTtcbiAgICB6clV0aWwuZWFjaChzZXJpZXNPcHQubGV2ZWxzLCBmdW5jdGlvbiAob3B0KSB7XG4gICAgICByZW1vdmVFQzNOb3JtYWxTdGF0dXMob3B0KTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmIChzZXJpZXNPcHQudHlwZSA9PT0gJ3RyZWUnKSB7XG4gICAgcmVtb3ZlRUMzTm9ybWFsU3RhdHVzKHNlcmllc09wdC5sZWF2ZXMpO1xuICB9IC8vIHN1bmJ1cnN0IHN0YXJ0cyBmcm9tIGVjNCwgc28gaXQgZG9lcyBub3QgbmVlZCB0byBjb21wYXQgbGV2ZWxzLlxuXG59XG5cbmZ1bmN0aW9uIHRvQXJyKG8pIHtcbiAgcmV0dXJuIHpyVXRpbC5pc0FycmF5KG8pID8gbyA6IG8gPyBbb10gOiBbXTtcbn1cblxuZnVuY3Rpb24gdG9PYmoobykge1xuICByZXR1cm4gKHpyVXRpbC5pc0FycmF5KG8pID8gb1swXSA6IG8pIHx8IHt9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnbG9iYWxDb21wYXRTdHlsZShvcHRpb24sIGlzVGhlbWUpIHtcbiAgZWFjaCh0b0FycihvcHRpb24uc2VyaWVzKSwgZnVuY3Rpb24gKHNlcmllc09wdCkge1xuICAgIGlzT2JqZWN0KHNlcmllc09wdCkgJiYgcHJvY2Vzc1NlcmllcyhzZXJpZXNPcHQpO1xuICB9KTtcbiAgdmFyIGF4ZXMgPSBbJ3hBeGlzJywgJ3lBeGlzJywgJ3JhZGl1c0F4aXMnLCAnYW5nbGVBeGlzJywgJ3NpbmdsZUF4aXMnLCAncGFyYWxsZWxBeGlzJywgJ3JhZGFyJ107XG4gIGlzVGhlbWUgJiYgYXhlcy5wdXNoKCd2YWx1ZUF4aXMnLCAnY2F0ZWdvcnlBeGlzJywgJ2xvZ0F4aXMnLCAndGltZUF4aXMnKTtcbiAgZWFjaChheGVzLCBmdW5jdGlvbiAoYXhpc05hbWUpIHtcbiAgICBlYWNoKHRvQXJyKG9wdGlvbltheGlzTmFtZV0pLCBmdW5jdGlvbiAoYXhpc09wdCkge1xuICAgICAgaWYgKGF4aXNPcHQpIHtcbiAgICAgICAgY29tcGF0VGV4dFN0eWxlKGF4aXNPcHQsICdheGlzTGFiZWwnKTtcbiAgICAgICAgY29tcGF0VGV4dFN0eWxlKGF4aXNPcHQuYXhpc1BvaW50ZXIsICdsYWJlbCcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgZWFjaCh0b0FycihvcHRpb24ucGFyYWxsZWwpLCBmdW5jdGlvbiAocGFyYWxsZWxPcHQpIHtcbiAgICB2YXIgcGFyYWxsZWxBeGlzRGVmYXVsdCA9IHBhcmFsbGVsT3B0ICYmIHBhcmFsbGVsT3B0LnBhcmFsbGVsQXhpc0RlZmF1bHQ7XG4gICAgY29tcGF0VGV4dFN0eWxlKHBhcmFsbGVsQXhpc0RlZmF1bHQsICdheGlzTGFiZWwnKTtcbiAgICBjb21wYXRUZXh0U3R5bGUocGFyYWxsZWxBeGlzRGVmYXVsdCAmJiBwYXJhbGxlbEF4aXNEZWZhdWx0LmF4aXNQb2ludGVyLCAnbGFiZWwnKTtcbiAgfSk7XG4gIGVhY2godG9BcnIob3B0aW9uLmNhbGVuZGFyKSwgZnVuY3Rpb24gKGNhbGVuZGFyT3B0KSB7XG4gICAgY29udmVydE5vcm1hbEVtcGhhc2lzKGNhbGVuZGFyT3B0LCAnaXRlbVN0eWxlJyk7XG4gICAgY29tcGF0VGV4dFN0eWxlKGNhbGVuZGFyT3B0LCAnZGF5TGFiZWwnKTtcbiAgICBjb21wYXRUZXh0U3R5bGUoY2FsZW5kYXJPcHQsICdtb250aExhYmVsJyk7XG4gICAgY29tcGF0VGV4dFN0eWxlKGNhbGVuZGFyT3B0LCAneWVhckxhYmVsJyk7XG4gIH0pOyAvLyByYWRhci5uYW1lLnRleHRTdHlsZVxuXG4gIGVhY2godG9BcnIob3B0aW9uLnJhZGFyKSwgZnVuY3Rpb24gKHJhZGFyT3B0KSB7XG4gICAgY29tcGF0VGV4dFN0eWxlKHJhZGFyT3B0LCAnbmFtZScpOyAvLyBVc2UgYXhpc05hbWUgaW5zdGVhZCBvZiBuYW1lIGJlY2F1c2UgY29tcG9uZW50IGhhcyBuYW1lIHByb3BlcnR5XG5cbiAgICBpZiAocmFkYXJPcHQubmFtZSAmJiByYWRhck9wdC5heGlzTmFtZSA9PSBudWxsKSB7XG4gICAgICByYWRhck9wdC5heGlzTmFtZSA9IHJhZGFyT3B0Lm5hbWU7XG4gICAgICBkZWxldGUgcmFkYXJPcHQubmFtZTtcblxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgZGVwcmVjYXRlTG9nKCduYW1lIHByb3BlcnR5IGluIHJhZGFyIGNvbXBvbmVudCBoYXMgYmVlbiBjaGFuZ2VkIHRvIGF4aXNOYW1lJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHJhZGFyT3B0Lm5hbWVHYXAgIT0gbnVsbCAmJiByYWRhck9wdC5heGlzTmFtZUdhcCA9PSBudWxsKSB7XG4gICAgICByYWRhck9wdC5heGlzTmFtZUdhcCA9IHJhZGFyT3B0Lm5hbWVHYXA7XG4gICAgICBkZWxldGUgcmFkYXJPcHQubmFtZUdhcDtcblxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgZGVwcmVjYXRlTG9nKCduYW1lR2FwIHByb3BlcnR5IGluIHJhZGFyIGNvbXBvbmVudCBoYXMgYmVlbiBjaGFuZ2VkIHRvIGF4aXNOYW1lR2FwJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGVhY2gocmFkYXJPcHQuaW5kaWNhdG9yLCBmdW5jdGlvbiAoaW5kaWNhdG9yT3B0KSB7XG4gICAgICAgIGlmIChpbmRpY2F0b3JPcHQudGV4dCkge1xuICAgICAgICAgIGRlcHJlY2F0ZVJlcGxhY2VMb2coJ3RleHQnLCAnbmFtZScsICdyYWRhci5pbmRpY2F0b3InKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgZWFjaCh0b0FycihvcHRpb24uZ2VvKSwgZnVuY3Rpb24gKGdlb09wdCkge1xuICAgIGlmIChpc09iamVjdChnZW9PcHQpKSB7XG4gICAgICBjb21wYXRFQzNDb21tb25TdHlsZXMoZ2VvT3B0KTtcbiAgICAgIGVhY2godG9BcnIoZ2VvT3B0LnJlZ2lvbnMpLCBmdW5jdGlvbiAocmVnaW9uT2JqKSB7XG4gICAgICAgIGNvbXBhdEVDM0NvbW1vblN0eWxlcyhyZWdpb25PYmopO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgZWFjaCh0b0FycihvcHRpb24udGltZWxpbmUpLCBmdW5jdGlvbiAodGltZWxpbmVPcHQpIHtcbiAgICBjb21wYXRFQzNDb21tb25TdHlsZXModGltZWxpbmVPcHQpO1xuICAgIGNvbnZlcnROb3JtYWxFbXBoYXNpcyh0aW1lbGluZU9wdCwgJ2xhYmVsJyk7XG4gICAgY29udmVydE5vcm1hbEVtcGhhc2lzKHRpbWVsaW5lT3B0LCAnaXRlbVN0eWxlJyk7XG4gICAgY29udmVydE5vcm1hbEVtcGhhc2lzKHRpbWVsaW5lT3B0LCAnY29udHJvbFN0eWxlJywgdHJ1ZSk7XG4gICAgdmFyIGRhdGEgPSB0aW1lbGluZU9wdC5kYXRhO1xuICAgIHpyVXRpbC5pc0FycmF5KGRhdGEpICYmIHpyVXRpbC5lYWNoKGRhdGEsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICBpZiAoenJVdGlsLmlzT2JqZWN0KGl0ZW0pKSB7XG4gICAgICAgIGNvbnZlcnROb3JtYWxFbXBoYXNpcyhpdGVtLCAnbGFiZWwnKTtcbiAgICAgICAgY29udmVydE5vcm1hbEVtcGhhc2lzKGl0ZW0sICdpdGVtU3R5bGUnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIGVhY2godG9BcnIob3B0aW9uLnRvb2xib3gpLCBmdW5jdGlvbiAodG9vbGJveE9wdCkge1xuICAgIGNvbnZlcnROb3JtYWxFbXBoYXNpcyh0b29sYm94T3B0LCAnaWNvblN0eWxlJyk7XG4gICAgZWFjaCh0b29sYm94T3B0LmZlYXR1cmUsIGZ1bmN0aW9uIChmZWF0dXJlT3B0KSB7XG4gICAgICBjb252ZXJ0Tm9ybWFsRW1waGFzaXMoZmVhdHVyZU9wdCwgJ2ljb25TdHlsZScpO1xuICAgIH0pO1xuICB9KTtcbiAgY29tcGF0VGV4dFN0eWxlKHRvT2JqKG9wdGlvbi5heGlzUG9pbnRlciksICdsYWJlbCcpO1xuICBjb21wYXRUZXh0U3R5bGUodG9PYmoob3B0aW9uLnRvb2x0aXApLmF4aXNQb2ludGVyLCAnbGFiZWwnKTsgLy8gQ2xlYW4gbG9nc1xuICAvLyBzdG9yZWRMb2dzID0ge307XG59IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgeyBlYWNoLCBpc0FycmF5LCBpc09iamVjdCwgaXNUeXBlZEFycmF5LCBkZWZhdWx0cyB9IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgY29tcGF0U3R5bGUgZnJvbSAnLi9oZWxwZXIvY29tcGF0U3R5bGUuanMnO1xuaW1wb3J0IHsgbm9ybWFsaXplVG9BcnJheSB9IGZyb20gJy4uL3V0aWwvbW9kZWwuanMnO1xuaW1wb3J0IHsgZGVwcmVjYXRlTG9nLCBkZXByZWNhdGVSZXBsYWNlTG9nIH0gZnJvbSAnLi4vdXRpbC9sb2cuanMnO1xuXG5mdW5jdGlvbiBnZXQob3B0LCBwYXRoKSB7XG4gIHZhciBwYXRoQXJyID0gcGF0aC5zcGxpdCgnLCcpO1xuICB2YXIgb2JqID0gb3B0O1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aEFyci5sZW5ndGg7IGkrKykge1xuICAgIG9iaiA9IG9iaiAmJiBvYmpbcGF0aEFycltpXV07XG5cbiAgICBpZiAob2JqID09IG51bGwpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIHNldChvcHQsIHBhdGgsIHZhbCwgb3ZlcndyaXRlKSB7XG4gIHZhciBwYXRoQXJyID0gcGF0aC5zcGxpdCgnLCcpO1xuICB2YXIgb2JqID0gb3B0O1xuICB2YXIga2V5O1xuICB2YXIgaSA9IDA7XG5cbiAgZm9yICg7IGkgPCBwYXRoQXJyLmxlbmd0aCAtIDE7IGkrKykge1xuICAgIGtleSA9IHBhdGhBcnJbaV07XG5cbiAgICBpZiAob2JqW2tleV0gPT0gbnVsbCkge1xuICAgICAgb2JqW2tleV0gPSB7fTtcbiAgICB9XG5cbiAgICBvYmogPSBvYmpba2V5XTtcbiAgfVxuXG4gIGlmIChvdmVyd3JpdGUgfHwgb2JqW3BhdGhBcnJbaV1dID09IG51bGwpIHtcbiAgICBvYmpbcGF0aEFycltpXV0gPSB2YWw7XG4gIH1cbn1cblxuZnVuY3Rpb24gY29tcGF0TGF5b3V0UHJvcGVydGllcyhvcHRpb24pIHtcbiAgb3B0aW9uICYmIGVhY2goTEFZT1VUX1BST1BFUlRJRVMsIGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgaWYgKHByb3BbMF0gaW4gb3B0aW9uICYmICEocHJvcFsxXSBpbiBvcHRpb24pKSB7XG4gICAgICBvcHRpb25bcHJvcFsxXV0gPSBvcHRpb25bcHJvcFswXV07XG4gICAgfVxuICB9KTtcbn1cblxudmFyIExBWU9VVF9QUk9QRVJUSUVTID0gW1sneCcsICdsZWZ0J10sIFsneScsICd0b3AnXSwgWyd4MicsICdyaWdodCddLCBbJ3kyJywgJ2JvdHRvbSddXTtcbnZhciBDT01QQVRJVEFCTEVfQ09NUE9ORU5UUyA9IFsnZ3JpZCcsICdnZW8nLCAncGFyYWxsZWwnLCAnbGVnZW5kJywgJ3Rvb2xib3gnLCAndGl0bGUnLCAndmlzdWFsTWFwJywgJ2RhdGFab29tJywgJ3RpbWVsaW5lJ107XG52YXIgQkFSX0lURU1fU1RZTEVfTUFQID0gW1snYm9yZGVyUmFkaXVzJywgJ2JhckJvcmRlclJhZGl1cyddLCBbJ2JvcmRlckNvbG9yJywgJ2JhckJvcmRlckNvbG9yJ10sIFsnYm9yZGVyV2lkdGgnLCAnYmFyQm9yZGVyV2lkdGgnXV07XG5cbmZ1bmN0aW9uIGNvbXBhdEJhckl0ZW1TdHlsZShvcHRpb24pIHtcbiAgdmFyIGl0ZW1TdHlsZSA9IG9wdGlvbiAmJiBvcHRpb24uaXRlbVN0eWxlO1xuXG4gIGlmIChpdGVtU3R5bGUpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IEJBUl9JVEVNX1NUWUxFX01BUC5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIG9sZE5hbWUgPSBCQVJfSVRFTV9TVFlMRV9NQVBbaV1bMV07XG4gICAgICB2YXIgbmV3TmFtZSA9IEJBUl9JVEVNX1NUWUxFX01BUFtpXVswXTtcblxuICAgICAgaWYgKGl0ZW1TdHlsZVtvbGROYW1lXSAhPSBudWxsKSB7XG4gICAgICAgIGl0ZW1TdHlsZVtuZXdOYW1lXSA9IGl0ZW1TdHlsZVtvbGROYW1lXTtcblxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIGRlcHJlY2F0ZVJlcGxhY2VMb2cob2xkTmFtZSwgbmV3TmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gY29tcGF0UGllTGFiZWwob3B0aW9uKSB7XG4gIGlmICghb3B0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKG9wdGlvbi5hbGlnblRvID09PSAnZWRnZScgJiYgb3B0aW9uLm1hcmdpbiAhPSBudWxsICYmIG9wdGlvbi5lZGdlRGlzdGFuY2UgPT0gbnVsbCkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBkZXByZWNhdGVSZXBsYWNlTG9nKCdsYWJlbC5tYXJnaW4nLCAnbGFiZWwuZWRnZURpc3RhbmNlJywgJ3BpZScpO1xuICAgIH1cblxuICAgIG9wdGlvbi5lZGdlRGlzdGFuY2UgPSBvcHRpb24ubWFyZ2luO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNvbXBhdFN1bmJ1cnN0U3RhdGUob3B0aW9uKSB7XG4gIGlmICghb3B0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKG9wdGlvbi5kb3ducGxheSAmJiAhb3B0aW9uLmJsdXIpIHtcbiAgICBvcHRpb24uYmx1ciA9IG9wdGlvbi5kb3ducGxheTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBkZXByZWNhdGVSZXBsYWNlTG9nKCdkb3ducGxheScsICdibHVyJywgJ3N1bmJ1cnN0Jyk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNvbXBhdEdyYXBoRm9jdXMob3B0aW9uKSB7XG4gIGlmICghb3B0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKG9wdGlvbi5mb2N1c05vZGVBZGphY2VuY3kgIT0gbnVsbCkge1xuICAgIG9wdGlvbi5lbXBoYXNpcyA9IG9wdGlvbi5lbXBoYXNpcyB8fCB7fTtcblxuICAgIGlmIChvcHRpb24uZW1waGFzaXMuZm9jdXMgPT0gbnVsbCkge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgZGVwcmVjYXRlUmVwbGFjZUxvZygnZm9jdXNOb2RlQWRqYWNlbmN5JywgJ2VtcGhhc2lzOiB7IGZvY3VzOiBcXCdhZGphY2VuY3lcXCd9JywgJ2dyYXBoL3NhbmtleScpO1xuICAgICAgfVxuXG4gICAgICBvcHRpb24uZW1waGFzaXMuZm9jdXMgPSAnYWRqYWNlbmN5JztcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gdHJhdmVyc2VUcmVlKGRhdGEsIGNiKSB7XG4gIGlmIChkYXRhKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjYihkYXRhW2ldKTtcbiAgICAgIGRhdGFbaV0gJiYgdHJhdmVyc2VUcmVlKGRhdGFbaV0uY2hpbGRyZW4sIGNiKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2xvYmFsQmFja3dhcmRDb21wYXQob3B0aW9uLCBpc1RoZW1lKSB7XG4gIGNvbXBhdFN0eWxlKG9wdGlvbiwgaXNUaGVtZSk7IC8vIE1ha2Ugc3VyZSBzZXJpZXMgYXJyYXkgZm9yIG1vZGVsIGluaXRpYWxpemF0aW9uLlxuXG4gIG9wdGlvbi5zZXJpZXMgPSBub3JtYWxpemVUb0FycmF5KG9wdGlvbi5zZXJpZXMpO1xuICBlYWNoKG9wdGlvbi5zZXJpZXMsIGZ1bmN0aW9uIChzZXJpZXNPcHQpIHtcbiAgICBpZiAoIWlzT2JqZWN0KHNlcmllc09wdCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgc2VyaWVzVHlwZSA9IHNlcmllc09wdC50eXBlO1xuXG4gICAgaWYgKHNlcmllc1R5cGUgPT09ICdsaW5lJykge1xuICAgICAgaWYgKHNlcmllc09wdC5jbGlwT3ZlcmZsb3cgIT0gbnVsbCkge1xuICAgICAgICBzZXJpZXNPcHQuY2xpcCA9IHNlcmllc09wdC5jbGlwT3ZlcmZsb3c7XG5cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBkZXByZWNhdGVSZXBsYWNlTG9nKCdjbGlwT3ZlcmZsb3cnLCAnY2xpcCcsICdsaW5lJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHNlcmllc1R5cGUgPT09ICdwaWUnIHx8IHNlcmllc1R5cGUgPT09ICdnYXVnZScpIHtcbiAgICAgIGlmIChzZXJpZXNPcHQuY2xvY2tXaXNlICE9IG51bGwpIHtcbiAgICAgICAgc2VyaWVzT3B0LmNsb2Nrd2lzZSA9IHNlcmllc09wdC5jbG9ja1dpc2U7XG5cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBkZXByZWNhdGVSZXBsYWNlTG9nKCdjbG9ja1dpc2UnLCAnY2xvY2t3aXNlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29tcGF0UGllTGFiZWwoc2VyaWVzT3B0LmxhYmVsKTtcbiAgICAgIHZhciBkYXRhID0gc2VyaWVzT3B0LmRhdGE7XG5cbiAgICAgIGlmIChkYXRhICYmICFpc1R5cGVkQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29tcGF0UGllTGFiZWwoZGF0YVtpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHNlcmllc09wdC5ob3Zlck9mZnNldCAhPSBudWxsKSB7XG4gICAgICAgIHNlcmllc09wdC5lbXBoYXNpcyA9IHNlcmllc09wdC5lbXBoYXNpcyB8fCB7fTtcblxuICAgICAgICBpZiAoc2VyaWVzT3B0LmVtcGhhc2lzLnNjYWxlU2l6ZSA9IG51bGwpIHtcbiAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgZGVwcmVjYXRlUmVwbGFjZUxvZygnaG92ZXJPZmZzZXQnLCAnZW1waGFzaXMuc2NhbGVTaXplJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VyaWVzT3B0LmVtcGhhc2lzLnNjYWxlU2l6ZSA9IHNlcmllc09wdC5ob3Zlck9mZnNldDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc2VyaWVzVHlwZSA9PT0gJ2dhdWdlJykge1xuICAgICAgdmFyIHBvaW50ZXJDb2xvciA9IGdldChzZXJpZXNPcHQsICdwb2ludGVyLmNvbG9yJyk7XG4gICAgICBwb2ludGVyQ29sb3IgIT0gbnVsbCAmJiBzZXQoc2VyaWVzT3B0LCAnaXRlbVN0eWxlLmNvbG9yJywgcG9pbnRlckNvbG9yKTtcbiAgICB9IGVsc2UgaWYgKHNlcmllc1R5cGUgPT09ICdiYXInKSB7XG4gICAgICBjb21wYXRCYXJJdGVtU3R5bGUoc2VyaWVzT3B0KTtcbiAgICAgIGNvbXBhdEJhckl0ZW1TdHlsZShzZXJpZXNPcHQuYmFja2dyb3VuZFN0eWxlKTtcbiAgICAgIGNvbXBhdEJhckl0ZW1TdHlsZShzZXJpZXNPcHQuZW1waGFzaXMpO1xuICAgICAgdmFyIGRhdGEgPSBzZXJpZXNPcHQuZGF0YTtcblxuICAgICAgaWYgKGRhdGEgJiYgIWlzVHlwZWRBcnJheShkYXRhKSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGRhdGFbaV0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBjb21wYXRCYXJJdGVtU3R5bGUoZGF0YVtpXSk7XG4gICAgICAgICAgICBjb21wYXRCYXJJdGVtU3R5bGUoZGF0YVtpXSAmJiBkYXRhW2ldLmVtcGhhc2lzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHNlcmllc1R5cGUgPT09ICdzdW5idXJzdCcpIHtcbiAgICAgIHZhciBoaWdobGlnaHRQb2xpY3kgPSBzZXJpZXNPcHQuaGlnaGxpZ2h0UG9saWN5O1xuXG4gICAgICBpZiAoaGlnaGxpZ2h0UG9saWN5KSB7XG4gICAgICAgIHNlcmllc09wdC5lbXBoYXNpcyA9IHNlcmllc09wdC5lbXBoYXNpcyB8fCB7fTtcblxuICAgICAgICBpZiAoIXNlcmllc09wdC5lbXBoYXNpcy5mb2N1cykge1xuICAgICAgICAgIHNlcmllc09wdC5lbXBoYXNpcy5mb2N1cyA9IGhpZ2hsaWdodFBvbGljeTtcblxuICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICBkZXByZWNhdGVSZXBsYWNlTG9nKCdoaWdobGlnaHRQb2xpY3knLCAnZW1waGFzaXMuZm9jdXMnLCAnc3VuYnVyc3QnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29tcGF0U3VuYnVyc3RTdGF0ZShzZXJpZXNPcHQpO1xuICAgICAgdHJhdmVyc2VUcmVlKHNlcmllc09wdC5kYXRhLCBjb21wYXRTdW5idXJzdFN0YXRlKTtcbiAgICB9IGVsc2UgaWYgKHNlcmllc1R5cGUgPT09ICdncmFwaCcgfHwgc2VyaWVzVHlwZSA9PT0gJ3NhbmtleScpIHtcbiAgICAgIGNvbXBhdEdyYXBoRm9jdXMoc2VyaWVzT3B0KTsgLy8gVE9ETyBub2RlcywgZWRnZXM/XG4gICAgfSBlbHNlIGlmIChzZXJpZXNUeXBlID09PSAnbWFwJykge1xuICAgICAgaWYgKHNlcmllc09wdC5tYXBUeXBlICYmICFzZXJpZXNPcHQubWFwKSB7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgZGVwcmVjYXRlUmVwbGFjZUxvZygnbWFwVHlwZScsICdtYXAnLCAnbWFwJyk7XG4gICAgICAgIH1cblxuICAgICAgICBzZXJpZXNPcHQubWFwID0gc2VyaWVzT3B0Lm1hcFR5cGU7XG4gICAgICB9XG5cbiAgICAgIGlmIChzZXJpZXNPcHQubWFwTG9jYXRpb24pIHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBkZXByZWNhdGVMb2coJ2BtYXBMb2NhdGlvbmAgaXMgbm90IHVzZWQgYW55bW9yZS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlZmF1bHRzKHNlcmllc09wdCwgc2VyaWVzT3B0Lm1hcExvY2F0aW9uKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc2VyaWVzT3B0LmhvdmVyQW5pbWF0aW9uICE9IG51bGwpIHtcbiAgICAgIHNlcmllc09wdC5lbXBoYXNpcyA9IHNlcmllc09wdC5lbXBoYXNpcyB8fCB7fTtcblxuICAgICAgaWYgKHNlcmllc09wdC5lbXBoYXNpcyAmJiBzZXJpZXNPcHQuZW1waGFzaXMuc2NhbGUgPT0gbnVsbCkge1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIGRlcHJlY2F0ZVJlcGxhY2VMb2coJ2hvdmVyQW5pbWF0aW9uJywgJ2VtcGhhc2lzLnNjYWxlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBzZXJpZXNPcHQuZW1waGFzaXMuc2NhbGUgPSBzZXJpZXNPcHQuaG92ZXJBbmltYXRpb247XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29tcGF0TGF5b3V0UHJvcGVydGllcyhzZXJpZXNPcHQpO1xuICB9KTsgLy8gZGF0YVJhbmdlIGhhcyBjaGFuZ2VkIHRvIHZpc3VhbE1hcFxuXG4gIGlmIChvcHRpb24uZGF0YVJhbmdlKSB7XG4gICAgb3B0aW9uLnZpc3VhbE1hcCA9IG9wdGlvbi5kYXRhUmFuZ2U7XG4gIH1cblxuICBlYWNoKENPTVBBVElUQUJMRV9DT01QT05FTlRTLCBmdW5jdGlvbiAoY29tcG9uZW50TmFtZSkge1xuICAgIHZhciBvcHRpb25zID0gb3B0aW9uW2NvbXBvbmVudE5hbWVdO1xuXG4gICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgIGlmICghaXNBcnJheShvcHRpb25zKSkge1xuICAgICAgICBvcHRpb25zID0gW29wdGlvbnNdO1xuICAgICAgfVxuXG4gICAgICBlYWNoKG9wdGlvbnMsIGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgY29tcGF0TGF5b3V0UHJvcGVydGllcyhvcHRpb24pO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn0iLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCB7IGNyZWF0ZUhhc2hNYXAsIGVhY2ggfSBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0IHsgYWRkU2FmZSB9IGZyb20gJy4uL3V0aWwvbnVtYmVyLmpzJzsgLy8gKDEpIFtDYXV0aW9uXTogdGhlIGxvZ2ljIGlzIGNvcnJlY3QgYmFzZWQgb24gdGhlIHByZW1pc2VzOlxuLy8gICAgIGRhdGEgcHJvY2Vzc2luZyBzdGFnZSBpcyBibG9ja2VkIGluIHN0cmVhbS5cbi8vICAgICBTZWUgPG1vZHVsZTplY2hhcnRzL3N0cmVhbS9TY2hlZHVsZXIjcGVyZm9ybURhdGFQcm9jZXNzb3JUYXNrcz5cbi8vICgyKSBPbmx5IHJlZ2lzdGVyIG9uY2Ugd2hlbiBpbXBvcnQgcmVwZWF0ZWRseS5cbi8vICAgICBTaG91bGQgYmUgZXhlY3V0ZWQgYWZ0ZXIgc2VyaWVzIGlzIGZpbHRlcmVkIGFuZCBiZWZvcmUgc3RhY2sgY2FsY3VsYXRpb24uXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRhdGFTdGFjayhlY01vZGVsKSB7XG4gIHZhciBzdGFja0luZm9NYXAgPSBjcmVhdGVIYXNoTWFwKCk7XG4gIGVjTW9kZWwuZWFjaFNlcmllcyhmdW5jdGlvbiAoc2VyaWVzTW9kZWwpIHtcbiAgICB2YXIgc3RhY2sgPSBzZXJpZXNNb2RlbC5nZXQoJ3N0YWNrJyk7IC8vIENvbXBhdGlibGU6IHdoZW4gYHN0YWNrYCBpcyBzZXQgYXMgJycsIGRvIG5vdCBzdGFjay5cblxuICAgIGlmIChzdGFjaykge1xuICAgICAgdmFyIHN0YWNrSW5mb0xpc3QgPSBzdGFja0luZm9NYXAuZ2V0KHN0YWNrKSB8fCBzdGFja0luZm9NYXAuc2V0KHN0YWNrLCBbXSk7XG4gICAgICB2YXIgZGF0YSA9IHNlcmllc01vZGVsLmdldERhdGEoKTtcbiAgICAgIHZhciBzdGFja0luZm8gPSB7XG4gICAgICAgIC8vIFVzZWQgZm9yIGNhbGN1bGF0ZSBheGlzIGV4dGVudCBhdXRvbWF0aWNhbGx5LlxuICAgICAgICAvLyBUT0RPOiBUeXBlIGdldENhbGN1bGF0aW9uSW5mbyByZXR1cm4gbW9yZSBzcGVjaWZpYyB0eXBlP1xuICAgICAgICBzdGFja1Jlc3VsdERpbWVuc2lvbjogZGF0YS5nZXRDYWxjdWxhdGlvbkluZm8oJ3N0YWNrUmVzdWx0RGltZW5zaW9uJyksXG4gICAgICAgIHN0YWNrZWRPdmVyRGltZW5zaW9uOiBkYXRhLmdldENhbGN1bGF0aW9uSW5mbygnc3RhY2tlZE92ZXJEaW1lbnNpb24nKSxcbiAgICAgICAgc3RhY2tlZERpbWVuc2lvbjogZGF0YS5nZXRDYWxjdWxhdGlvbkluZm8oJ3N0YWNrZWREaW1lbnNpb24nKSxcbiAgICAgICAgc3RhY2tlZEJ5RGltZW5zaW9uOiBkYXRhLmdldENhbGN1bGF0aW9uSW5mbygnc3RhY2tlZEJ5RGltZW5zaW9uJyksXG4gICAgICAgIGlzU3RhY2tlZEJ5SW5kZXg6IGRhdGEuZ2V0Q2FsY3VsYXRpb25JbmZvKCdpc1N0YWNrZWRCeUluZGV4JyksXG4gICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgIHNlcmllc01vZGVsOiBzZXJpZXNNb2RlbFxuICAgICAgfTsgLy8gSWYgc3RhY2tlZCBvbiBheGlzIHRoYXQgZG8gbm90IHN1cHBvcnQgZGF0YSBzdGFjay5cblxuICAgICAgaWYgKCFzdGFja0luZm8uc3RhY2tlZERpbWVuc2lvbiB8fCAhKHN0YWNrSW5mby5pc1N0YWNrZWRCeUluZGV4IHx8IHN0YWNrSW5mby5zdGFja2VkQnlEaW1lbnNpb24pKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc3RhY2tJbmZvTGlzdC5sZW5ndGggJiYgZGF0YS5zZXRDYWxjdWxhdGlvbkluZm8oJ3N0YWNrZWRPblNlcmllcycsIHN0YWNrSW5mb0xpc3Rbc3RhY2tJbmZvTGlzdC5sZW5ndGggLSAxXS5zZXJpZXNNb2RlbCk7XG4gICAgICBzdGFja0luZm9MaXN0LnB1c2goc3RhY2tJbmZvKTtcbiAgICB9XG4gIH0pO1xuICBzdGFja0luZm9NYXAuZWFjaChjYWxjdWxhdGVTdGFjayk7XG59XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZVN0YWNrKHN0YWNrSW5mb0xpc3QpIHtcbiAgZWFjaChzdGFja0luZm9MaXN0LCBmdW5jdGlvbiAodGFyZ2V0U3RhY2tJbmZvLCBpZHhJblN0YWNrKSB7XG4gICAgdmFyIHJlc3VsdFZhbCA9IFtdO1xuICAgIHZhciByZXN1bHROYU4gPSBbTmFOLCBOYU5dO1xuICAgIHZhciBkaW1zID0gW3RhcmdldFN0YWNrSW5mby5zdGFja1Jlc3VsdERpbWVuc2lvbiwgdGFyZ2V0U3RhY2tJbmZvLnN0YWNrZWRPdmVyRGltZW5zaW9uXTtcbiAgICB2YXIgdGFyZ2V0RGF0YSA9IHRhcmdldFN0YWNrSW5mby5kYXRhO1xuICAgIHZhciBpc1N0YWNrZWRCeUluZGV4ID0gdGFyZ2V0U3RhY2tJbmZvLmlzU3RhY2tlZEJ5SW5kZXg7XG4gICAgdmFyIHN0YWNrU3RyYXRlZ3kgPSB0YXJnZXRTdGFja0luZm8uc2VyaWVzTW9kZWwuZ2V0KCdzdGFja1N0cmF0ZWd5JykgfHwgJ3NhbWVzaWduJzsgLy8gU2hvdWxkIG5vdCB3cml0ZSBvbiByYXcgZGF0YSwgYmVjYXVzZSBzdGFjayBzZXJpZXMgbW9kZWwgbGlzdCBjaGFuZ2VzXG4gICAgLy8gZGVwZW5kaW5nIG9uIGxlZ2VuZCBzZWxlY3Rpb24uXG5cbiAgICB0YXJnZXREYXRhLm1vZGlmeShkaW1zLCBmdW5jdGlvbiAodjAsIHYxLCBkYXRhSW5kZXgpIHtcbiAgICAgIHZhciBzdW0gPSB0YXJnZXREYXRhLmdldCh0YXJnZXRTdGFja0luZm8uc3RhY2tlZERpbWVuc2lvbiwgZGF0YUluZGV4KTsgLy8gQ29uc2lkZXIgYGNvbm5lY3ROdWxsc2Agb2YgbGluZSBhcmVhLCBpZiB2YWx1ZSBpcyBOYU4sIHN0YWNrZWRPdmVyXG4gICAgICAvLyBzaG91bGQgYWxzbyBiZSBOYU4sIHRvIGRyYXcgYSBhcHByb3ByaWF0ZSBiZWx0IGFyZWEuXG5cbiAgICAgIGlmIChpc05hTihzdW0pKSB7XG4gICAgICAgIHJldHVybiByZXN1bHROYU47XG4gICAgICB9XG5cbiAgICAgIHZhciBieVZhbHVlO1xuICAgICAgdmFyIHN0YWNrZWREYXRhUmF3SW5kZXg7XG5cbiAgICAgIGlmIChpc1N0YWNrZWRCeUluZGV4KSB7XG4gICAgICAgIHN0YWNrZWREYXRhUmF3SW5kZXggPSB0YXJnZXREYXRhLmdldFJhd0luZGV4KGRhdGFJbmRleCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBieVZhbHVlID0gdGFyZ2V0RGF0YS5nZXQodGFyZ2V0U3RhY2tJbmZvLnN0YWNrZWRCeURpbWVuc2lvbiwgZGF0YUluZGV4KTtcbiAgICAgIH0gLy8gSWYgc3RhY2tPdmVyIGlzIE5hTiwgY2hhcnQgdmlldyB3aWxsIHJlbmRlciBwb2ludCBvbiB2YWx1ZSBzdGFydC5cblxuXG4gICAgICB2YXIgc3RhY2tlZE92ZXIgPSBOYU47XG5cbiAgICAgIGZvciAodmFyIGogPSBpZHhJblN0YWNrIC0gMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgdmFyIHN0YWNrSW5mbyA9IHN0YWNrSW5mb0xpc3Rbal07IC8vIEhhcyBiZWVuIG9wdGltaXplZCBieSBpbnZlcnRlZCBpbmRpY2VzIG9uIGBzdGFja2VkQnlEaW1lbnNpb25gLlxuXG4gICAgICAgIGlmICghaXNTdGFja2VkQnlJbmRleCkge1xuICAgICAgICAgIHN0YWNrZWREYXRhUmF3SW5kZXggPSBzdGFja0luZm8uZGF0YS5yYXdJbmRleE9mKHN0YWNrSW5mby5zdGFja2VkQnlEaW1lbnNpb24sIGJ5VmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0YWNrZWREYXRhUmF3SW5kZXggPj0gMCkge1xuICAgICAgICAgIHZhciB2YWwgPSBzdGFja0luZm8uZGF0YS5nZXRCeVJhd0luZGV4KHN0YWNrSW5mby5zdGFja1Jlc3VsdERpbWVuc2lvbiwgc3RhY2tlZERhdGFSYXdJbmRleCk7IC8vIENvbnNpZGVyaW5nIHBvc2l0aXZlIHN0YWNrLCBuZWdhdGl2ZSBzdGFjayBhbmQgZW1wdHkgZGF0YVxuXG4gICAgICAgICAgaWYgKHN0YWNrU3RyYXRlZ3kgPT09ICdhbGwnIC8vIHNpbmdsZSBzdGFjayBncm91cFxuICAgICAgICAgIHx8IHN0YWNrU3RyYXRlZ3kgPT09ICdwb3NpdGl2ZScgJiYgdmFsID4gMCB8fCBzdGFja1N0cmF0ZWd5ID09PSAnbmVnYXRpdmUnICYmIHZhbCA8IDAgfHwgc3RhY2tTdHJhdGVneSA9PT0gJ3NhbWVzaWduJyAmJiBzdW0gPj0gMCAmJiB2YWwgPiAwIC8vIEFsbCBwb3NpdGl2ZSBzdGFja1xuICAgICAgICAgIHx8IHN0YWNrU3RyYXRlZ3kgPT09ICdzYW1lc2lnbicgJiYgc3VtIDw9IDAgJiYgdmFsIDwgMCAvLyBBbGwgbmVnYXRpdmUgc3RhY2tcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgLy8gVGhlIHN1bSBoYXMgdG8gYmUgdmVyeSBzbWFsbCB0byBiZSBhZmZlY3RlZCBieSB0aGVcbiAgICAgICAgICAgICAgLy8gZmxvYXRpbmcgYXJpdGhtZXRpYyBwcm9ibGVtLiBBbiBpbmNvcnJlY3QgcmVzdWx0IHdpbGwgcHJvYmFibHlcbiAgICAgICAgICAgICAgLy8gY2F1c2UgYXhpcyBtaW4vbWF4IHRvIGJlIGZpbHRlcmVkIGluY29ycmVjdGx5LlxuICAgICAgICAgICAgICBzdW0gPSBhZGRTYWZlKHN1bSwgdmFsKTtcbiAgICAgICAgICAgICAgc3RhY2tlZE92ZXIgPSB2YWw7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJlc3VsdFZhbFswXSA9IHN1bTtcbiAgICAgIHJlc3VsdFZhbFsxXSA9IHN0YWNrZWRPdmVyO1xuICAgICAgcmV0dXJuIHJlc3VsdFZhbDtcbiAgICB9KTtcbiAgfSk7XG59IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgeyBpc1R5cGVkQXJyYXksIGNsb25lLCBjcmVhdGVIYXNoTWFwLCBpc0FycmF5LCBpc09iamVjdCwgaXNBcnJheUxpa2UsIGhhc093biwgYXNzZXJ0LCBlYWNoLCBtYXAsIGlzTnVtYmVyLCBpc1N0cmluZywga2V5cyB9IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgeyBTT1VSQ0VfRk9STUFUX09SSUdJTkFMLCBTRVJJRVNfTEFZT1VUX0JZX0NPTFVNTiwgU09VUkNFX0ZPUk1BVF9VTktOT1dOLCBTT1VSQ0VfRk9STUFUX0tFWUVEX0NPTFVNTlMsIFNPVVJDRV9GT1JNQVRfVFlQRURfQVJSQVksIFNPVVJDRV9GT1JNQVRfQVJSQVlfUk9XUywgU09VUkNFX0ZPUk1BVF9PQkpFQ1RfUk9XUywgU0VSSUVTX0xBWU9VVF9CWV9ST1cgfSBmcm9tICcuLi91dGlsL3R5cGVzLmpzJztcbmltcG9ydCB7IGdldERhdGFJdGVtVmFsdWUgfSBmcm9tICcuLi91dGlsL21vZGVsLmpzJztcbmltcG9ydCB7IEJFX09SRElOQUwsIGd1ZXNzT3JkaW5hbCB9IGZyb20gJy4vaGVscGVyL3NvdXJjZUhlbHBlci5qcyc7XG47IC8vIEBpbm5lclxuXG52YXIgU291cmNlSW1wbCA9XG4vKiogQGNsYXNzICovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFNvdXJjZUltcGwoZmllbGRzKSB7XG4gICAgdGhpcy5kYXRhID0gZmllbGRzLmRhdGEgfHwgKGZpZWxkcy5zb3VyY2VGb3JtYXQgPT09IFNPVVJDRV9GT1JNQVRfS0VZRURfQ09MVU1OUyA/IHt9IDogW10pO1xuICAgIHRoaXMuc291cmNlRm9ybWF0ID0gZmllbGRzLnNvdXJjZUZvcm1hdCB8fCBTT1VSQ0VfRk9STUFUX1VOS05PV047IC8vIFZpc2l0IGNvbmZpZ1xuXG4gICAgdGhpcy5zZXJpZXNMYXlvdXRCeSA9IGZpZWxkcy5zZXJpZXNMYXlvdXRCeSB8fCBTRVJJRVNfTEFZT1VUX0JZX0NPTFVNTjtcbiAgICB0aGlzLnN0YXJ0SW5kZXggPSBmaWVsZHMuc3RhcnRJbmRleCB8fCAwO1xuICAgIHRoaXMuZGltZW5zaW9uc0RldGVjdGVkQ291bnQgPSBmaWVsZHMuZGltZW5zaW9uc0RldGVjdGVkQ291bnQ7XG4gICAgdGhpcy5tZXRhUmF3T3B0aW9uID0gZmllbGRzLm1ldGFSYXdPcHRpb247XG4gICAgdmFyIGRpbWVuc2lvbnNEZWZpbmUgPSB0aGlzLmRpbWVuc2lvbnNEZWZpbmUgPSBmaWVsZHMuZGltZW5zaW9uc0RlZmluZTtcblxuICAgIGlmIChkaW1lbnNpb25zRGVmaW5lKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpbWVuc2lvbnNEZWZpbmUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGRpbSA9IGRpbWVuc2lvbnNEZWZpbmVbaV07XG5cbiAgICAgICAgaWYgKGRpbS50eXBlID09IG51bGwpIHtcbiAgICAgICAgICBpZiAoZ3Vlc3NPcmRpbmFsKHRoaXMsIGkpID09PSBCRV9PUkRJTkFMLk11c3QpIHtcbiAgICAgICAgICAgIGRpbS50eXBlID0gJ29yZGluYWwnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBTb3VyY2VJbXBsO1xufSgpO1xuXG5leHBvcnQgZnVuY3Rpb24gaXNTb3VyY2VJbnN0YW5jZSh2YWwpIHtcbiAgcmV0dXJuIHZhbCBpbnN0YW5jZW9mIFNvdXJjZUltcGw7XG59XG4vKipcclxuICogQ3JlYXRlIGEgc291cmNlIGZyb20gb3B0aW9uLlxyXG4gKiBOT1RFOiBDcmVhdGVkIHNvdXJjZSBpcyBpbW11dGFibGUuIERvbid0IGNoYW5nZSBhbnkgcHJvcGVydGllcyBpbiBpdC5cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTb3VyY2Uoc291cmNlRGF0YSwgdGhpc01ldGFSYXdPcHRpb24sIC8vIGNhbiBiZSBudWxsLiBJZiBub3QgcHJvdmlkZWQsIGF1dG8gZGV0ZWN0IGl0IGZyb20gYHNvdXJjZURhdGFgLlxuc291cmNlRm9ybWF0KSB7XG4gIHNvdXJjZUZvcm1hdCA9IHNvdXJjZUZvcm1hdCB8fCBkZXRlY3RTb3VyY2VGb3JtYXQoc291cmNlRGF0YSk7XG4gIHZhciBzZXJpZXNMYXlvdXRCeSA9IHRoaXNNZXRhUmF3T3B0aW9uLnNlcmllc0xheW91dEJ5O1xuICB2YXIgZGV0ZXJtaW5lZCA9IGRldGVybWluZVNvdXJjZURpbWVuc2lvbnMoc291cmNlRGF0YSwgc291cmNlRm9ybWF0LCBzZXJpZXNMYXlvdXRCeSwgdGhpc01ldGFSYXdPcHRpb24uc291cmNlSGVhZGVyLCB0aGlzTWV0YVJhd09wdGlvbi5kaW1lbnNpb25zKTtcbiAgdmFyIHNvdXJjZSA9IG5ldyBTb3VyY2VJbXBsKHtcbiAgICBkYXRhOiBzb3VyY2VEYXRhLFxuICAgIHNvdXJjZUZvcm1hdDogc291cmNlRm9ybWF0LFxuICAgIHNlcmllc0xheW91dEJ5OiBzZXJpZXNMYXlvdXRCeSxcbiAgICBkaW1lbnNpb25zRGVmaW5lOiBkZXRlcm1pbmVkLmRpbWVuc2lvbnNEZWZpbmUsXG4gICAgc3RhcnRJbmRleDogZGV0ZXJtaW5lZC5zdGFydEluZGV4LFxuICAgIGRpbWVuc2lvbnNEZXRlY3RlZENvdW50OiBkZXRlcm1pbmVkLmRpbWVuc2lvbnNEZXRlY3RlZENvdW50LFxuICAgIG1ldGFSYXdPcHRpb246IGNsb25lKHRoaXNNZXRhUmF3T3B0aW9uKVxuICB9KTtcbiAgcmV0dXJuIHNvdXJjZTtcbn1cbi8qKlxyXG4gKiBXcmFwIG9yaWdpbmFsIHNlcmllcyBkYXRhIGZvciBzb21lIGNvbXBhdGliaWxpdHkgY2FzZXMuXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU291cmNlRnJvbVNlcmllc0RhdGFPcHRpb24oZGF0YSkge1xuICByZXR1cm4gbmV3IFNvdXJjZUltcGwoe1xuICAgIGRhdGE6IGRhdGEsXG4gICAgc291cmNlRm9ybWF0OiBpc1R5cGVkQXJyYXkoZGF0YSkgPyBTT1VSQ0VfRk9STUFUX1RZUEVEX0FSUkFZIDogU09VUkNFX0ZPUk1BVF9PUklHSU5BTFxuICB9KTtcbn1cbi8qKlxyXG4gKiBDbG9uZSBzb3VyY2UgYnV0IGV4Y2x1ZGVzIHNvdXJjZSBkYXRhLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lU291cmNlU2hhbGxvdyhzb3VyY2UpIHtcbiAgcmV0dXJuIG5ldyBTb3VyY2VJbXBsKHtcbiAgICBkYXRhOiBzb3VyY2UuZGF0YSxcbiAgICBzb3VyY2VGb3JtYXQ6IHNvdXJjZS5zb3VyY2VGb3JtYXQsXG4gICAgc2VyaWVzTGF5b3V0Qnk6IHNvdXJjZS5zZXJpZXNMYXlvdXRCeSxcbiAgICBkaW1lbnNpb25zRGVmaW5lOiBjbG9uZShzb3VyY2UuZGltZW5zaW9uc0RlZmluZSksXG4gICAgc3RhcnRJbmRleDogc291cmNlLnN0YXJ0SW5kZXgsXG4gICAgZGltZW5zaW9uc0RldGVjdGVkQ291bnQ6IHNvdXJjZS5kaW1lbnNpb25zRGV0ZWN0ZWRDb3VudFxuICB9KTtcbn1cbi8qKlxyXG4gKiBOb3RlOiBBbiBlbXB0eSBhcnJheSB3aWxsIGJlIGRldGVjdGVkIGFzIGBTT1VSQ0VfRk9STUFUX0FSUkFZX1JPV1NgLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRldGVjdFNvdXJjZUZvcm1hdChkYXRhKSB7XG4gIHZhciBzb3VyY2VGb3JtYXQgPSBTT1VSQ0VfRk9STUFUX1VOS05PV047XG5cbiAgaWYgKGlzVHlwZWRBcnJheShkYXRhKSkge1xuICAgIHNvdXJjZUZvcm1hdCA9IFNPVVJDRV9GT1JNQVRfVFlQRURfQVJSQVk7XG4gIH0gZWxzZSBpZiAoaXNBcnJheShkYXRhKSkge1xuICAgIC8vIEZJWE1FIFdoZXRoZXIgdG9sZXJhdGUgbnVsbCBpbiB0b3AgbGV2ZWwgYXJyYXk/XG4gICAgaWYgKGRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICBzb3VyY2VGb3JtYXQgPSBTT1VSQ0VfRk9STUFUX0FSUkFZX1JPV1M7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGRhdGEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gZGF0YVtpXTtcblxuICAgICAgaWYgKGl0ZW0gPT0gbnVsbCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSBpZiAoaXNBcnJheShpdGVtKSkge1xuICAgICAgICBzb3VyY2VGb3JtYXQgPSBTT1VSQ0VfRk9STUFUX0FSUkFZX1JPV1M7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfSBlbHNlIGlmIChpc09iamVjdChpdGVtKSkge1xuICAgICAgICBzb3VyY2VGb3JtYXQgPSBTT1VSQ0VfRk9STUFUX09CSkVDVF9ST1dTO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QoZGF0YSkpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgaWYgKGhhc093bihkYXRhLCBrZXkpICYmIGlzQXJyYXlMaWtlKGRhdGFba2V5XSkpIHtcbiAgICAgICAgc291cmNlRm9ybWF0ID0gU09VUkNFX0ZPUk1BVF9LRVlFRF9DT0xVTU5TO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gc291cmNlRm9ybWF0O1xufVxuLyoqXHJcbiAqIERldGVybWluZSB0aGUgc291cmNlIGRlZmluaXRpb25zIGZyb20gZGF0YSBzdGFuZGFsb25lIGRpbWVuc2lvbnMgZGVmaW5pdGlvbnNcclxuICogYXJlIG5vdCBzcGVjaWZpZWQuXHJcbiAqL1xuXG5mdW5jdGlvbiBkZXRlcm1pbmVTb3VyY2VEaW1lbnNpb25zKGRhdGEsIHNvdXJjZUZvcm1hdCwgc2VyaWVzTGF5b3V0QnksIHNvdXJjZUhlYWRlciwgLy8gc3RhbmRhbG9uZSByYXcgZGltZW5zaW9ucyBkZWZpbml0aW9uLCBsaWtlOlxuLy8ge1xuLy8gICAgIGRpbWVuc2lvbnM6IFsnYWEnLCAnYmInLCB7IG5hbWU6ICdjYycsIHR5cGU6ICd0aW1lJyB9XVxuLy8gfVxuLy8gaW4gYGRhdGFzZXRgIG9yIGBzZXJpZXNgXG5kaW1lbnNpb25zRGVmaW5lKSB7XG4gIHZhciBkaW1lbnNpb25zRGV0ZWN0ZWRDb3VudDtcbiAgdmFyIHN0YXJ0SW5kZXg7IC8vIFBFTkRJTkc6IENvdWxkIGRhdGEgYmUgbnVsbC91bmRlZmluZWQgaGVyZT9cbiAgLy8gY3VycmVudGx5LCBpZiBgZGF0YXNldC5zb3VyY2VgIG5vdCBzcGVjaWZpZWQsIGVycm9yIHRocm93bi5cbiAgLy8gaWYgYHNlcmllcy5kYXRhYCBub3Qgc3BlY2lmaWVkLCBub3RoaW5nIHJlbmRlcmVkIHdpdGhvdXQgZXJyb3IgdGhyb3duLlxuICAvLyBTaG91bGQgdGVzdCB0aGVzZSBjYXNlcy5cblxuICBpZiAoIWRhdGEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGltZW5zaW9uc0RlZmluZTogbm9ybWFsaXplRGltZW5zaW9uc09wdGlvbihkaW1lbnNpb25zRGVmaW5lKSxcbiAgICAgIHN0YXJ0SW5kZXg6IHN0YXJ0SW5kZXgsXG4gICAgICBkaW1lbnNpb25zRGV0ZWN0ZWRDb3VudDogZGltZW5zaW9uc0RldGVjdGVkQ291bnRcbiAgICB9O1xuICB9XG5cbiAgaWYgKHNvdXJjZUZvcm1hdCA9PT0gU09VUkNFX0ZPUk1BVF9BUlJBWV9ST1dTKSB7XG4gICAgdmFyIGRhdGFBcnJheVJvd3MgPSBkYXRhOyAvLyBSdWxlOiBNb3N0IG9mIHRoZSBmaXJzdCBsaW5lIGFyZSBzdHJpbmc6IGl0IGlzIGhlYWRlci5cbiAgICAvLyBDYXV0aW9uOiBjb25zaWRlciBhIGxpbmUgd2l0aCA1IHN0cmluZyBhbmQgMSBudW1iZXIsXG4gICAgLy8gaXQgc3RpbGwgY2FuIG5vdCBiZSBzdXJlIGl0IGlzIGEgaGVhZCwgYmVjYXVzZSB0aGVcbiAgICAvLyA1IHN0cmluZyBtYXkgYmUgNSB2YWx1ZXMgb2YgY2F0ZWdvcnkgY29sdW1ucy5cblxuICAgIGlmIChzb3VyY2VIZWFkZXIgPT09ICdhdXRvJyB8fCBzb3VyY2VIZWFkZXIgPT0gbnVsbCkge1xuICAgICAgYXJyYXlSb3dzVHJhdmVsRmlyc3QoZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAvLyAnLScgaXMgcmVnYXJkZWQgYXMgbnVsbC91bmRlZmluZWQuXG4gICAgICAgIGlmICh2YWwgIT0gbnVsbCAmJiB2YWwgIT09ICctJykge1xuICAgICAgICAgIGlmIChpc1N0cmluZyh2YWwpKSB7XG4gICAgICAgICAgICBzdGFydEluZGV4ID09IG51bGwgJiYgKHN0YXJ0SW5kZXggPSAxKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RhcnRJbmRleCA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9IC8vIDEwIGlzIGFuIGV4cGVyaWVuY2UgbnVtYmVyLCBhdm9pZCBsb25nIGxvb3AuXG5cbiAgICAgIH0sIHNlcmllc0xheW91dEJ5LCBkYXRhQXJyYXlSb3dzLCAxMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXJ0SW5kZXggPSBpc051bWJlcihzb3VyY2VIZWFkZXIpID8gc291cmNlSGVhZGVyIDogc291cmNlSGVhZGVyID8gMSA6IDA7XG4gICAgfVxuXG4gICAgaWYgKCFkaW1lbnNpb25zRGVmaW5lICYmIHN0YXJ0SW5kZXggPT09IDEpIHtcbiAgICAgIGRpbWVuc2lvbnNEZWZpbmUgPSBbXTtcbiAgICAgIGFycmF5Um93c1RyYXZlbEZpcnN0KGZ1bmN0aW9uICh2YWwsIGluZGV4KSB7XG4gICAgICAgIGRpbWVuc2lvbnNEZWZpbmVbaW5kZXhdID0gdmFsICE9IG51bGwgPyB2YWwgKyAnJyA6ICcnO1xuICAgICAgfSwgc2VyaWVzTGF5b3V0QnksIGRhdGFBcnJheVJvd3MsIEluZmluaXR5KTtcbiAgICB9XG5cbiAgICBkaW1lbnNpb25zRGV0ZWN0ZWRDb3VudCA9IGRpbWVuc2lvbnNEZWZpbmUgPyBkaW1lbnNpb25zRGVmaW5lLmxlbmd0aCA6IHNlcmllc0xheW91dEJ5ID09PSBTRVJJRVNfTEFZT1VUX0JZX1JPVyA/IGRhdGFBcnJheVJvd3MubGVuZ3RoIDogZGF0YUFycmF5Um93c1swXSA/IGRhdGFBcnJheVJvd3NbMF0ubGVuZ3RoIDogbnVsbDtcbiAgfSBlbHNlIGlmIChzb3VyY2VGb3JtYXQgPT09IFNPVVJDRV9GT1JNQVRfT0JKRUNUX1JPV1MpIHtcbiAgICBpZiAoIWRpbWVuc2lvbnNEZWZpbmUpIHtcbiAgICAgIGRpbWVuc2lvbnNEZWZpbmUgPSBvYmplY3RSb3dzQ29sbGVjdERpbWVuc2lvbnMoZGF0YSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHNvdXJjZUZvcm1hdCA9PT0gU09VUkNFX0ZPUk1BVF9LRVlFRF9DT0xVTU5TKSB7XG4gICAgaWYgKCFkaW1lbnNpb25zRGVmaW5lKSB7XG4gICAgICBkaW1lbnNpb25zRGVmaW5lID0gW107XG4gICAgICBlYWNoKGRhdGEsIGZ1bmN0aW9uIChjb2xBcnIsIGtleSkge1xuICAgICAgICBkaW1lbnNpb25zRGVmaW5lLnB1c2goa2V5KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSBlbHNlIGlmIChzb3VyY2VGb3JtYXQgPT09IFNPVVJDRV9GT1JNQVRfT1JJR0lOQUwpIHtcbiAgICB2YXIgdmFsdWUwID0gZ2V0RGF0YUl0ZW1WYWx1ZShkYXRhWzBdKTtcbiAgICBkaW1lbnNpb25zRGV0ZWN0ZWRDb3VudCA9IGlzQXJyYXkodmFsdWUwKSAmJiB2YWx1ZTAubGVuZ3RoIHx8IDE7XG4gIH0gZWxzZSBpZiAoc291cmNlRm9ybWF0ID09PSBTT1VSQ0VfRk9STUFUX1RZUEVEX0FSUkFZKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGFzc2VydCghIWRpbWVuc2lvbnNEZWZpbmUsICdkaW1lbnNpb25zIG11c3QgYmUgZ2l2ZW4gaWYgZGF0YSBpcyBUeXBlZEFycmF5LicpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgc3RhcnRJbmRleDogc3RhcnRJbmRleCxcbiAgICBkaW1lbnNpb25zRGVmaW5lOiBub3JtYWxpemVEaW1lbnNpb25zT3B0aW9uKGRpbWVuc2lvbnNEZWZpbmUpLFxuICAgIGRpbWVuc2lvbnNEZXRlY3RlZENvdW50OiBkaW1lbnNpb25zRGV0ZWN0ZWRDb3VudFxuICB9O1xufVxuXG5mdW5jdGlvbiBvYmplY3RSb3dzQ29sbGVjdERpbWVuc2lvbnMoZGF0YSkge1xuICB2YXIgZmlyc3RJbmRleCA9IDA7XG4gIHZhciBvYmo7XG5cbiAgd2hpbGUgKGZpcnN0SW5kZXggPCBkYXRhLmxlbmd0aCAmJiAhKG9iaiA9IGRhdGFbZmlyc3RJbmRleCsrXSkpIHt9IC8vIGpzaGludCBpZ25vcmU6IGxpbmVcblxuXG4gIGlmIChvYmopIHtcbiAgICByZXR1cm4ga2V5cyhvYmopO1xuICB9XG59IC8vIENvbnNpZGVyIGRpbWVuc2lvbnMgZGVmaW5lZCBsaWtlIFsnQScsICdwcmljZScsICdCJywgJ3ByaWNlJywgJ0MnLCAncHJpY2UnXSxcbi8vIHdoaWNoIGlzIHJlYXNvbmFibGUuIEJ1dCBkaW1lbnNpb24gbmFtZSBpcyBkdXBsaWNhdGVkLlxuLy8gUmV0dXJucyB1bmRlZmluZWQgb3IgYW4gYXJyYXkgY29udGFpbnMgb25seSBvYmplY3Qgd2l0aG91dCBudWxsL3VuZGVmaW5lZCBvciBzdHJpbmcuXG5cblxuZnVuY3Rpb24gbm9ybWFsaXplRGltZW5zaW9uc09wdGlvbihkaW1lbnNpb25zRGVmaW5lKSB7XG4gIGlmICghZGltZW5zaW9uc0RlZmluZSkge1xuICAgIC8vIFRoZSBtZWFuaW5nIG9mIG51bGwvdW5kZWZpbmVkIGlzIGRpZmZlcmVudCBmcm9tIGVtcHR5IGFycmF5LlxuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBuYW1lTWFwID0gY3JlYXRlSGFzaE1hcCgpO1xuICByZXR1cm4gbWFwKGRpbWVuc2lvbnNEZWZpbmUsIGZ1bmN0aW9uIChyYXdJdGVtLCBpbmRleCkge1xuICAgIHJhd0l0ZW0gPSBpc09iamVjdChyYXdJdGVtKSA/IHJhd0l0ZW0gOiB7XG4gICAgICBuYW1lOiByYXdJdGVtXG4gICAgfTsgLy8gT3RoZXIgZmllbGRzIHdpbGwgYmUgZGlzY2FyZGVkLlxuXG4gICAgdmFyIGl0ZW0gPSB7XG4gICAgICBuYW1lOiByYXdJdGVtLm5hbWUsXG4gICAgICBkaXNwbGF5TmFtZTogcmF3SXRlbS5kaXNwbGF5TmFtZSxcbiAgICAgIHR5cGU6IHJhd0l0ZW0udHlwZVxuICAgIH07IC8vIFVzZXIgY2FuIHNldCBudWxsIGluIGRpbWVuc2lvbnMuXG4gICAgLy8gV2UgZG9uJ3QgYXV0byBzcGVjaWZ5IG5hbWUsIG90aGVyd2lzZSBhIGdpdmVuIG5hbWUgbWF5XG4gICAgLy8gY2F1c2UgaXQgdG8gYmUgcmVmZXJyZWQgdW5leHBlY3RlZGx5LlxuXG4gICAgaWYgKGl0ZW0ubmFtZSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gaXRlbTtcbiAgICB9IC8vIEFsc28gY29uc2lkZXIgbnVtYmVyIGZvcm0gbGlrZSAyMDEyLlxuXG5cbiAgICBpdGVtLm5hbWUgKz0gJyc7IC8vIFVzZXIgbWF5IGFsc28gc3BlY2lmeSBkaXNwbGF5TmFtZS5cbiAgICAvLyBkaXNwbGF5TmFtZSB3aWxsIGFsd2F5cyBleGlzdHMgZXhjZXB0IHVzZXIgbm90XG4gICAgLy8gc3BlY2lmaWVkIG9yIGRpbSBuYW1lIGlzIG5vdCBzcGVjaWZpZWQgb3IgZGV0ZWN0ZWQuXG4gICAgLy8gKEEgYXV0byBnZW5lcmF0ZWQgZGltIG5hbWUgd2lsbCBub3QgYmUgdXNlZCBhc1xuICAgIC8vIGRpc3BsYXlOYW1lKS5cblxuICAgIGlmIChpdGVtLmRpc3BsYXlOYW1lID09IG51bGwpIHtcbiAgICAgIGl0ZW0uZGlzcGxheU5hbWUgPSBpdGVtLm5hbWU7XG4gICAgfVxuXG4gICAgdmFyIGV4aXN0ID0gbmFtZU1hcC5nZXQoaXRlbS5uYW1lKTtcblxuICAgIGlmICghZXhpc3QpIHtcbiAgICAgIG5hbWVNYXAuc2V0KGl0ZW0ubmFtZSwge1xuICAgICAgICBjb3VudDogMVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGl0ZW0ubmFtZSArPSAnLScgKyBleGlzdC5jb3VudCsrO1xuICAgIH1cblxuICAgIHJldHVybiBpdGVtO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gYXJyYXlSb3dzVHJhdmVsRmlyc3QoY2IsIHNlcmllc0xheW91dEJ5LCBkYXRhLCBtYXhMb29wKSB7XG4gIGlmIChzZXJpZXNMYXlvdXRCeSA9PT0gU0VSSUVTX0xBWU9VVF9CWV9ST1cpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoICYmIGkgPCBtYXhMb29wOyBpKyspIHtcbiAgICAgIGNiKGRhdGFbaV0gPyBkYXRhW2ldWzBdIDogbnVsbCwgaSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciB2YWx1ZTAgPSBkYXRhWzBdIHx8IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZTAubGVuZ3RoICYmIGkgPCBtYXhMb29wOyBpKyspIHtcbiAgICAgIGNiKHZhbHVlMFtpXSwgaSk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRSZXRyaWV2ZURhdGFCeU5hbWUoc291cmNlKSB7XG4gIHZhciBzb3VyY2VGb3JtYXQgPSBzb3VyY2Uuc291cmNlRm9ybWF0O1xuICByZXR1cm4gc291cmNlRm9ybWF0ID09PSBTT1VSQ0VfRk9STUFUX09CSkVDVF9ST1dTIHx8IHNvdXJjZUZvcm1hdCA9PT0gU09VUkNFX0ZPUk1BVF9LRVlFRF9DT0xVTU5TO1xufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xudmFyIF9hLCBfYiwgX2M7IC8vIFRPRE9cbi8vID8/PyByZWZhY3Rvcj8gY2hlY2sgdGhlIG91dGVyIHVzYWdlIG9mIGRhdGEgcHJvdmlkZXIuXG4vLyBtZXJnZSB3aXRoIGRlZmF1bHREaW1WYWx1ZUdldHRlcj9cblxuXG5pbXBvcnQgeyBpc1R5cGVkQXJyYXksIGV4dGVuZCwgYXNzZXJ0LCBlYWNoLCBpc09iamVjdCwgYmluZCB9IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgeyBnZXREYXRhSXRlbVZhbHVlIH0gZnJvbSAnLi4vLi4vdXRpbC9tb2RlbC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVTb3VyY2VGcm9tU2VyaWVzRGF0YU9wdGlvbiwgaXNTb3VyY2VJbnN0YW5jZSB9IGZyb20gJy4uL1NvdXJjZS5qcyc7XG5pbXBvcnQgeyBTT1VSQ0VfRk9STUFUX09SSUdJTkFMLCBTT1VSQ0VfRk9STUFUX09CSkVDVF9ST1dTLCBTT1VSQ0VfRk9STUFUX0tFWUVEX0NPTFVNTlMsIFNPVVJDRV9GT1JNQVRfVFlQRURfQVJSQVksIFNPVVJDRV9GT1JNQVRfQVJSQVlfUk9XUywgU0VSSUVTX0xBWU9VVF9CWV9DT0xVTU4sIFNFUklFU19MQVlPVVRfQllfUk9XIH0gZnJvbSAnLi4vLi4vdXRpbC90eXBlcy5qcyc7XG52YXIgcHJvdmlkZXJNZXRob2RzO1xudmFyIG1vdW50TWV0aG9kcztcbi8qKlxyXG4gKiBJZiBub3JtYWwgYXJyYXkgdXNlZCwgbXV0YWJsZSBjaHVuayBzaXplIGlzIHN1cHBvcnRlZC5cclxuICogSWYgdHlwZWQgYXJyYXkgdXNlZCwgY2h1bmsgc2l6ZSBtdXN0IGJlIGZpeGVkLlxyXG4gKi9cblxudmFyIERlZmF1bHREYXRhUHJvdmlkZXIgPVxuLyoqIEBjbGFzcyAqL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBEZWZhdWx0RGF0YVByb3ZpZGVyKHNvdXJjZVBhcmFtLCBkaW1TaXplKSB7XG4gICAgLy8gbGV0IHNvdXJjZTogU291cmNlO1xuICAgIHZhciBzb3VyY2UgPSAhaXNTb3VyY2VJbnN0YW5jZShzb3VyY2VQYXJhbSkgPyBjcmVhdGVTb3VyY2VGcm9tU2VyaWVzRGF0YU9wdGlvbihzb3VyY2VQYXJhbSkgOiBzb3VyY2VQYXJhbTsgLy8gZGVjbGFyZSBzb3VyY2UgaXMgU291cmNlO1xuXG4gICAgdGhpcy5fc291cmNlID0gc291cmNlO1xuICAgIHZhciBkYXRhID0gdGhpcy5fZGF0YSA9IHNvdXJjZS5kYXRhOyAvLyBUeXBlZCBhcnJheS4gVE9ETyBJRTEwKz9cblxuICAgIGlmIChzb3VyY2Uuc291cmNlRm9ybWF0ID09PSBTT1VSQ0VfRk9STUFUX1RZUEVEX0FSUkFZKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBpZiAoZGltU2l6ZSA9PSBudWxsKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUeXBlZCBhcnJheSBkYXRhIG11c3Qgc3BlY2lmeSBkaW1lbnNpb24gc2l6ZScpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX29mZnNldCA9IDA7XG4gICAgICB0aGlzLl9kaW1TaXplID0gZGltU2l6ZTtcbiAgICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgIH1cblxuICAgIG1vdW50TWV0aG9kcyh0aGlzLCBkYXRhLCBzb3VyY2UpO1xuICB9XG5cbiAgRGVmYXVsdERhdGFQcm92aWRlci5wcm90b3R5cGUuZ2V0U291cmNlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9zb3VyY2U7XG4gIH07XG5cbiAgRGVmYXVsdERhdGFQcm92aWRlci5wcm90b3R5cGUuY291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIDA7XG4gIH07XG5cbiAgRGVmYXVsdERhdGFQcm92aWRlci5wcm90b3R5cGUuZ2V0SXRlbSA9IGZ1bmN0aW9uIChpZHgsIG91dCkge1xuICAgIHJldHVybjtcbiAgfTtcblxuICBEZWZhdWx0RGF0YVByb3ZpZGVyLnByb3RvdHlwZS5hcHBlbmREYXRhID0gZnVuY3Rpb24gKG5ld0RhdGEpIHt9O1xuXG4gIERlZmF1bHREYXRhUHJvdmlkZXIucHJvdG90eXBlLmNsZWFuID0gZnVuY3Rpb24gKCkge307XG5cbiAgRGVmYXVsdERhdGFQcm92aWRlci5wcm90b0luaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gUEVORElORzogVG8gYXZvaWQgcG90ZW50aWFsIGluY29tcGF0IChlLmcuLCBwcm90b3R5cGVcbiAgICAvLyBpcyB2aXNpdGVkIHNvbWV3aGVyZSksIHN0aWxsIGluaXQgdGhlbSBvbiBwcm90b3R5cGUuXG4gICAgdmFyIHByb3RvID0gRGVmYXVsdERhdGFQcm92aWRlci5wcm90b3R5cGU7XG4gICAgcHJvdG8ucHVyZSA9IGZhbHNlO1xuICAgIHByb3RvLnBlcnNpc3RlbnQgPSB0cnVlO1xuICB9KCk7XG5cbiAgRGVmYXVsdERhdGFQcm92aWRlci5pbnRlcm5hbEZpZWxkID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBfYTtcblxuICAgIG1vdW50TWV0aG9kcyA9IGZ1bmN0aW9uIChwcm92aWRlciwgZGF0YSwgc291cmNlKSB7XG4gICAgICB2YXIgc291cmNlRm9ybWF0ID0gc291cmNlLnNvdXJjZUZvcm1hdDtcbiAgICAgIHZhciBzZXJpZXNMYXlvdXRCeSA9IHNvdXJjZS5zZXJpZXNMYXlvdXRCeTtcbiAgICAgIHZhciBzdGFydEluZGV4ID0gc291cmNlLnN0YXJ0SW5kZXg7XG4gICAgICB2YXIgZGltc0RlZiA9IHNvdXJjZS5kaW1lbnNpb25zRGVmaW5lO1xuICAgICAgdmFyIG1ldGhvZHMgPSBwcm92aWRlck1ldGhvZHNbZ2V0TWV0aG9kTWFwS2V5KHNvdXJjZUZvcm1hdCwgc2VyaWVzTGF5b3V0QnkpXTtcblxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgYXNzZXJ0KG1ldGhvZHMsICdJbnZhbGlkZSBzb3VyY2VGb3JtYXQ6ICcgKyBzb3VyY2VGb3JtYXQpO1xuICAgICAgfVxuXG4gICAgICBleHRlbmQocHJvdmlkZXIsIG1ldGhvZHMpO1xuXG4gICAgICBpZiAoc291cmNlRm9ybWF0ID09PSBTT1VSQ0VfRk9STUFUX1RZUEVEX0FSUkFZKSB7XG4gICAgICAgIHByb3ZpZGVyLmdldEl0ZW0gPSBnZXRJdGVtRm9yVHlwZWRBcnJheTtcbiAgICAgICAgcHJvdmlkZXIuY291bnQgPSBjb3VudEZvclR5cGVkQXJyYXk7XG4gICAgICAgIHByb3ZpZGVyLmZpbGxTdG9yYWdlID0gZmlsbFN0b3JhZ2VGb3JUeXBlZEFycmF5O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJhd0l0ZW1HZXR0ZXIgPSBnZXRSYXdTb3VyY2VJdGVtR2V0dGVyKHNvdXJjZUZvcm1hdCwgc2VyaWVzTGF5b3V0QnkpO1xuICAgICAgICBwcm92aWRlci5nZXRJdGVtID0gYmluZChyYXdJdGVtR2V0dGVyLCBudWxsLCBkYXRhLCBzdGFydEluZGV4LCBkaW1zRGVmKTtcbiAgICAgICAgdmFyIHJhd0NvdW50ZXIgPSBnZXRSYXdTb3VyY2VEYXRhQ291bnRlcihzb3VyY2VGb3JtYXQsIHNlcmllc0xheW91dEJ5KTtcbiAgICAgICAgcHJvdmlkZXIuY291bnQgPSBiaW5kKHJhd0NvdW50ZXIsIG51bGwsIGRhdGEsIHN0YXJ0SW5kZXgsIGRpbXNEZWYpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0SXRlbUZvclR5cGVkQXJyYXkgPSBmdW5jdGlvbiAoaWR4LCBvdXQpIHtcbiAgICAgIGlkeCA9IGlkeCAtIHRoaXMuX29mZnNldDtcbiAgICAgIG91dCA9IG91dCB8fCBbXTtcbiAgICAgIHZhciBkYXRhID0gdGhpcy5fZGF0YTtcbiAgICAgIHZhciBkaW1TaXplID0gdGhpcy5fZGltU2l6ZTtcbiAgICAgIHZhciBvZmZzZXQgPSBkaW1TaXplICogaWR4O1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpbVNpemU7IGkrKykge1xuICAgICAgICBvdXRbaV0gPSBkYXRhW29mZnNldCArIGldO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gb3V0O1xuICAgIH07XG5cbiAgICB2YXIgZmlsbFN0b3JhZ2VGb3JUeXBlZEFycmF5ID0gZnVuY3Rpb24gKHN0YXJ0LCBlbmQsIHN0b3JhZ2UsIGV4dGVudCkge1xuICAgICAgdmFyIGRhdGEgPSB0aGlzLl9kYXRhO1xuICAgICAgdmFyIGRpbVNpemUgPSB0aGlzLl9kaW1TaXplO1xuXG4gICAgICBmb3IgKHZhciBkaW0gPSAwOyBkaW0gPCBkaW1TaXplOyBkaW0rKykge1xuICAgICAgICB2YXIgZGltRXh0ZW50ID0gZXh0ZW50W2RpbV07XG4gICAgICAgIHZhciBtaW4gPSBkaW1FeHRlbnRbMF0gPT0gbnVsbCA/IEluZmluaXR5IDogZGltRXh0ZW50WzBdO1xuICAgICAgICB2YXIgbWF4ID0gZGltRXh0ZW50WzFdID09IG51bGwgPyAtSW5maW5pdHkgOiBkaW1FeHRlbnRbMV07XG4gICAgICAgIHZhciBjb3VudCA9IGVuZCAtIHN0YXJ0O1xuICAgICAgICB2YXIgYXJyID0gc3RvcmFnZVtkaW1dO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgICAgIC8vIGFwcGVuZERhdGEgd2l0aCBUeXBlZEFycmF5IHdpbGwgYWx3YXlzIGRvIHJlcGxhY2UgaW4gcHJvdmlkZXIuXG4gICAgICAgICAgdmFyIHZhbCA9IGRhdGFbaSAqIGRpbVNpemUgKyBkaW1dO1xuICAgICAgICAgIGFycltzdGFydCArIGldID0gdmFsO1xuICAgICAgICAgIHZhbCA8IG1pbiAmJiAobWluID0gdmFsKTtcbiAgICAgICAgICB2YWwgPiBtYXggJiYgKG1heCA9IHZhbCk7XG4gICAgICAgIH1cblxuICAgICAgICBkaW1FeHRlbnRbMF0gPSBtaW47XG4gICAgICAgIGRpbUV4dGVudFsxXSA9IG1heDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGNvdW50Rm9yVHlwZWRBcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9kYXRhID8gdGhpcy5fZGF0YS5sZW5ndGggLyB0aGlzLl9kaW1TaXplIDogMDtcbiAgICB9O1xuXG4gICAgcHJvdmlkZXJNZXRob2RzID0gKF9hID0ge30sIF9hW1NPVVJDRV9GT1JNQVRfQVJSQVlfUk9XUyArICdfJyArIFNFUklFU19MQVlPVVRfQllfQ09MVU1OXSA9IHtcbiAgICAgIHB1cmU6IHRydWUsXG4gICAgICBhcHBlbmREYXRhOiBhcHBlbmREYXRhU2ltcGx5XG4gICAgfSwgX2FbU09VUkNFX0ZPUk1BVF9BUlJBWV9ST1dTICsgJ18nICsgU0VSSUVTX0xBWU9VVF9CWV9ST1ddID0ge1xuICAgICAgcHVyZTogdHJ1ZSxcbiAgICAgIGFwcGVuZERhdGE6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEbyBub3Qgc3VwcG9ydCBhcHBlbmREYXRhIHdoZW4gc2V0IHNlcmllc0xheW91dEJ5OiBcInJvd1wiLicpO1xuICAgICAgfVxuICAgIH0sIF9hW1NPVVJDRV9GT1JNQVRfT0JKRUNUX1JPV1NdID0ge1xuICAgICAgcHVyZTogdHJ1ZSxcbiAgICAgIGFwcGVuZERhdGE6IGFwcGVuZERhdGFTaW1wbHlcbiAgICB9LCBfYVtTT1VSQ0VfRk9STUFUX0tFWUVEX0NPTFVNTlNdID0ge1xuICAgICAgcHVyZTogdHJ1ZSxcbiAgICAgIGFwcGVuZERhdGE6IGZ1bmN0aW9uIChuZXdEYXRhKSB7XG4gICAgICAgIHZhciBkYXRhID0gdGhpcy5fZGF0YTtcbiAgICAgICAgZWFjaChuZXdEYXRhLCBmdW5jdGlvbiAobmV3Q29sLCBrZXkpIHtcbiAgICAgICAgICB2YXIgb2xkQ29sID0gZGF0YVtrZXldIHx8IChkYXRhW2tleV0gPSBbXSk7XG5cbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IChuZXdDb2wgfHwgW10pLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvbGRDb2wucHVzaChuZXdDb2xbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSwgX2FbU09VUkNFX0ZPUk1BVF9PUklHSU5BTF0gPSB7XG4gICAgICBhcHBlbmREYXRhOiBhcHBlbmREYXRhU2ltcGx5XG4gICAgfSwgX2FbU09VUkNFX0ZPUk1BVF9UWVBFRF9BUlJBWV0gPSB7XG4gICAgICBwZXJzaXN0ZW50OiBmYWxzZSxcbiAgICAgIHB1cmU6IHRydWUsXG4gICAgICBhcHBlbmREYXRhOiBmdW5jdGlvbiAobmV3RGF0YSkge1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIGFzc2VydChpc1R5cGVkQXJyYXkobmV3RGF0YSksICdBZGRlZCBkYXRhIG11c3QgYmUgVHlwZWRBcnJheSBpZiBkYXRhIGluIGluaXRpYWxpemF0aW9uIGlzIFR5cGVkQXJyYXknKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2RhdGEgPSBuZXdEYXRhO1xuICAgICAgfSxcbiAgICAgIC8vIENsZWFuIHNlbGYgaWYgZGF0YSBpcyBhbHJlYWR5IHVzZWQuXG4gICAgICBjbGVhbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBQRU5ESU5HXG4gICAgICAgIHRoaXMuX29mZnNldCArPSB0aGlzLmNvdW50KCk7XG4gICAgICAgIHRoaXMuX2RhdGEgPSBudWxsO1xuICAgICAgfVxuICAgIH0sIF9hKTtcblxuICAgIGZ1bmN0aW9uIGFwcGVuZERhdGFTaW1wbHkobmV3RGF0YSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXdEYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuX2RhdGEucHVzaChuZXdEYXRhW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH0oKTtcblxuICByZXR1cm4gRGVmYXVsdERhdGFQcm92aWRlcjtcbn0oKTtcblxuZXhwb3J0IHsgRGVmYXVsdERhdGFQcm92aWRlciB9O1xuXG52YXIgZ2V0SXRlbVNpbXBseSA9IGZ1bmN0aW9uIChyYXdEYXRhLCBzdGFydEluZGV4LCBkaW1zRGVmLCBpZHgpIHtcbiAgcmV0dXJuIHJhd0RhdGFbaWR4XTtcbn07XG5cbnZhciByYXdTb3VyY2VJdGVtR2V0dGVyTWFwID0gKF9hID0ge30sIF9hW1NPVVJDRV9GT1JNQVRfQVJSQVlfUk9XUyArICdfJyArIFNFUklFU19MQVlPVVRfQllfQ09MVU1OXSA9IGZ1bmN0aW9uIChyYXdEYXRhLCBzdGFydEluZGV4LCBkaW1zRGVmLCBpZHgpIHtcbiAgcmV0dXJuIHJhd0RhdGFbaWR4ICsgc3RhcnRJbmRleF07XG59LCBfYVtTT1VSQ0VfRk9STUFUX0FSUkFZX1JPV1MgKyAnXycgKyBTRVJJRVNfTEFZT1VUX0JZX1JPV10gPSBmdW5jdGlvbiAocmF3RGF0YSwgc3RhcnRJbmRleCwgZGltc0RlZiwgaWR4LCBvdXQpIHtcbiAgaWR4ICs9IHN0YXJ0SW5kZXg7XG4gIHZhciBpdGVtID0gb3V0IHx8IFtdO1xuICB2YXIgZGF0YSA9IHJhd0RhdGE7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHJvdyA9IGRhdGFbaV07XG4gICAgaXRlbVtpXSA9IHJvdyA/IHJvd1tpZHhdIDogbnVsbDtcbiAgfVxuXG4gIHJldHVybiBpdGVtO1xufSwgX2FbU09VUkNFX0ZPUk1BVF9PQkpFQ1RfUk9XU10gPSBnZXRJdGVtU2ltcGx5LCBfYVtTT1VSQ0VfRk9STUFUX0tFWUVEX0NPTFVNTlNdID0gZnVuY3Rpb24gKHJhd0RhdGEsIHN0YXJ0SW5kZXgsIGRpbXNEZWYsIGlkeCwgb3V0KSB7XG4gIHZhciBpdGVtID0gb3V0IHx8IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZGltc0RlZi5sZW5ndGg7IGkrKykge1xuICAgIHZhciBkaW1OYW1lID0gZGltc0RlZltpXS5uYW1lO1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGlmIChkaW1OYW1lID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGNvbCA9IHJhd0RhdGFbZGltTmFtZV07XG4gICAgaXRlbVtpXSA9IGNvbCA/IGNvbFtpZHhdIDogbnVsbDtcbiAgfVxuXG4gIHJldHVybiBpdGVtO1xufSwgX2FbU09VUkNFX0ZPUk1BVF9PUklHSU5BTF0gPSBnZXRJdGVtU2ltcGx5LCBfYSk7XG5leHBvcnQgZnVuY3Rpb24gZ2V0UmF3U291cmNlSXRlbUdldHRlcihzb3VyY2VGb3JtYXQsIHNlcmllc0xheW91dEJ5KSB7XG4gIHZhciBtZXRob2QgPSByYXdTb3VyY2VJdGVtR2V0dGVyTWFwW2dldE1ldGhvZE1hcEtleShzb3VyY2VGb3JtYXQsIHNlcmllc0xheW91dEJ5KV07XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBhc3NlcnQobWV0aG9kLCAnRG8gbm90IHN1cHBvcnQgZ2V0IGl0ZW0gb24gXCInICsgc291cmNlRm9ybWF0ICsgJ1wiLCBcIicgKyBzZXJpZXNMYXlvdXRCeSArICdcIi4nKTtcbiAgfVxuXG4gIHJldHVybiBtZXRob2Q7XG59XG5cbnZhciBjb3VudFNpbXBseSA9IGZ1bmN0aW9uIChyYXdEYXRhLCBzdGFydEluZGV4LCBkaW1zRGVmKSB7XG4gIHJldHVybiByYXdEYXRhLmxlbmd0aDtcbn07XG5cbnZhciByYXdTb3VyY2VEYXRhQ291bnRlck1hcCA9IChfYiA9IHt9LCBfYltTT1VSQ0VfRk9STUFUX0FSUkFZX1JPV1MgKyAnXycgKyBTRVJJRVNfTEFZT1VUX0JZX0NPTFVNTl0gPSBmdW5jdGlvbiAocmF3RGF0YSwgc3RhcnRJbmRleCwgZGltc0RlZikge1xuICByZXR1cm4gTWF0aC5tYXgoMCwgcmF3RGF0YS5sZW5ndGggLSBzdGFydEluZGV4KTtcbn0sIF9iW1NPVVJDRV9GT1JNQVRfQVJSQVlfUk9XUyArICdfJyArIFNFUklFU19MQVlPVVRfQllfUk9XXSA9IGZ1bmN0aW9uIChyYXdEYXRhLCBzdGFydEluZGV4LCBkaW1zRGVmKSB7XG4gIHZhciByb3cgPSByYXdEYXRhWzBdO1xuICByZXR1cm4gcm93ID8gTWF0aC5tYXgoMCwgcm93Lmxlbmd0aCAtIHN0YXJ0SW5kZXgpIDogMDtcbn0sIF9iW1NPVVJDRV9GT1JNQVRfT0JKRUNUX1JPV1NdID0gY291bnRTaW1wbHksIF9iW1NPVVJDRV9GT1JNQVRfS0VZRURfQ09MVU1OU10gPSBmdW5jdGlvbiAocmF3RGF0YSwgc3RhcnRJbmRleCwgZGltc0RlZikge1xuICB2YXIgZGltTmFtZSA9IGRpbXNEZWZbMF0ubmFtZTtcblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChkaW1OYW1lID09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBjb2wgPSByYXdEYXRhW2RpbU5hbWVdO1xuICByZXR1cm4gY29sID8gY29sLmxlbmd0aCA6IDA7XG59LCBfYltTT1VSQ0VfRk9STUFUX09SSUdJTkFMXSA9IGNvdW50U2ltcGx5LCBfYik7XG5leHBvcnQgZnVuY3Rpb24gZ2V0UmF3U291cmNlRGF0YUNvdW50ZXIoc291cmNlRm9ybWF0LCBzZXJpZXNMYXlvdXRCeSkge1xuICB2YXIgbWV0aG9kID0gcmF3U291cmNlRGF0YUNvdW50ZXJNYXBbZ2V0TWV0aG9kTWFwS2V5KHNvdXJjZUZvcm1hdCwgc2VyaWVzTGF5b3V0QnkpXTtcblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGFzc2VydChtZXRob2QsICdEbyBub3Qgc3VwcG9ydCBjb3VudCBvbiBcIicgKyBzb3VyY2VGb3JtYXQgKyAnXCIsIFwiJyArIHNlcmllc0xheW91dEJ5ICsgJ1wiLicpO1xuICB9XG5cbiAgcmV0dXJuIG1ldGhvZDtcbn1cblxudmFyIGdldFJhd1ZhbHVlU2ltcGx5ID0gZnVuY3Rpb24gKGRhdGFJdGVtLCBkaW1JbmRleCwgcHJvcGVydHkpIHtcbiAgcmV0dXJuIGRhdGFJdGVtW2RpbUluZGV4XTtcbn07XG5cbnZhciByYXdTb3VyY2VWYWx1ZUdldHRlck1hcCA9IChfYyA9IHt9LCBfY1tTT1VSQ0VfRk9STUFUX0FSUkFZX1JPV1NdID0gZ2V0UmF3VmFsdWVTaW1wbHksIF9jW1NPVVJDRV9GT1JNQVRfT0JKRUNUX1JPV1NdID0gZnVuY3Rpb24gKGRhdGFJdGVtLCBkaW1JbmRleCwgcHJvcGVydHkpIHtcbiAgcmV0dXJuIGRhdGFJdGVtW3Byb3BlcnR5XTtcbn0sIF9jW1NPVVJDRV9GT1JNQVRfS0VZRURfQ09MVU1OU10gPSBnZXRSYXdWYWx1ZVNpbXBseSwgX2NbU09VUkNFX0ZPUk1BVF9PUklHSU5BTF0gPSBmdW5jdGlvbiAoZGF0YUl0ZW0sIGRpbUluZGV4LCBwcm9wZXJ0eSkge1xuICAvLyBGSVhNRTogSW4gc29tZSBjYXNlIChtYXJrcG9pbnQgaW4gZ2VvIChnZW8tbWFwLmh0bWwpKSxcbiAgLy8gZGF0YUl0ZW0gaXMge2Nvb3JkOiBbLi4uXX1cbiAgdmFyIHZhbHVlID0gZ2V0RGF0YUl0ZW1WYWx1ZShkYXRhSXRlbSk7XG4gIHJldHVybiAhKHZhbHVlIGluc3RhbmNlb2YgQXJyYXkpID8gdmFsdWUgOiB2YWx1ZVtkaW1JbmRleF07XG59LCBfY1tTT1VSQ0VfRk9STUFUX1RZUEVEX0FSUkFZXSA9IGdldFJhd1ZhbHVlU2ltcGx5LCBfYyk7XG5leHBvcnQgZnVuY3Rpb24gZ2V0UmF3U291cmNlVmFsdWVHZXR0ZXIoc291cmNlRm9ybWF0KSB7XG4gIHZhciBtZXRob2QgPSByYXdTb3VyY2VWYWx1ZUdldHRlck1hcFtzb3VyY2VGb3JtYXRdO1xuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgYXNzZXJ0KG1ldGhvZCwgJ0RvIG5vdCBzdXBwb3J0IGdldCB2YWx1ZSBvbiBcIicgKyBzb3VyY2VGb3JtYXQgKyAnXCIuJyk7XG4gIH1cblxuICByZXR1cm4gbWV0aG9kO1xufVxuXG5mdW5jdGlvbiBnZXRNZXRob2RNYXBLZXkoc291cmNlRm9ybWF0LCBzZXJpZXNMYXlvdXRCeSkge1xuICByZXR1cm4gc291cmNlRm9ybWF0ID09PSBTT1VSQ0VfRk9STUFUX0FSUkFZX1JPV1MgPyBzb3VyY2VGb3JtYXQgKyAnXycgKyBzZXJpZXNMYXlvdXRCeSA6IHNvdXJjZUZvcm1hdDtcbn0gLy8gPz8/IEZJWE1FIGNhbiB0aGVzZSBsb2dpYyBiZSBtb3JlIG5lYXQ6IGdldFJhd1ZhbHVlLCBnZXRSYXdEYXRhSXRlbSxcbi8vIENvbnNpZGVyIHBlcnNpc3RlbnQuXG4vLyBDYXV0aW9uOiB3aHkgdXNlIHJhdyB2YWx1ZSB0byBkaXNwbGF5IG9uIGxhYmVsIG9yIHRvb2x0aXA/XG4vLyBBIHJlYXNvbiBpcyB0byBhdm9pZCBmb3JtYXQuIEZvciBleGFtcGxlIHRpbWUgdmFsdWUgd2UgZG8gbm90IGtub3dcbi8vIGhvdyB0byBmb3JtYXQgaXMgZXhwZWN0ZWQuIE1vcmUgb3ZlciwgaWYgc3RhY2sgaXMgdXNlZCwgY2FsY3VsYXRlZFxuLy8gdmFsdWUgbWF5IGJlIDAuOTEwMDAwMDAwMDEsIHdoaWNoIGhhdmUgYnJpbmdzIHRyb3VibGUgdG8gZGlzcGxheS5cbi8vIFRPRE86IGNvbnNpZGVyIGhvdyB0byB0cmVhdCBudWxsL3VuZGVmaW5lZC9OYU4gd2hlbiBkaXNwbGF5P1xuXG5cbmV4cG9ydCBmdW5jdGlvbiByZXRyaWV2ZVJhd1ZhbHVlKGRhdGEsIGRhdGFJbmRleCwgLy8gSWYgZGltSW5kZXggaXMgbnVsbC91bmRlZmluZWQsIHJldHVybiBPcHRpb25EYXRhSXRlbS5cbi8vIE90aGVyd2lzZSwgcmV0dXJuIE9wdGlvbkRhdGFWYWx1ZS5cbmRpbSkge1xuICBpZiAoIWRhdGEpIHtcbiAgICByZXR1cm47XG4gIH0gLy8gQ29uc2lkZXIgZGF0YSBtYXkgYmUgbm90IHBlcnNpc3RlbnQuXG5cblxuICB2YXIgZGF0YUl0ZW0gPSBkYXRhLmdldFJhd0RhdGFJdGVtKGRhdGFJbmRleCk7XG5cbiAgaWYgKGRhdGFJdGVtID09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgc3RvcmUgPSBkYXRhLmdldFN0b3JlKCk7XG4gIHZhciBzb3VyY2VGb3JtYXQgPSBzdG9yZS5nZXRTb3VyY2UoKS5zb3VyY2VGb3JtYXQ7XG5cbiAgaWYgKGRpbSAhPSBudWxsKSB7XG4gICAgdmFyIGRpbUluZGV4ID0gZGF0YS5nZXREaW1lbnNpb25JbmRleChkaW0pO1xuICAgIHZhciBwcm9wZXJ0eSA9IHN0b3JlLmdldERpbWVuc2lvblByb3BlcnR5KGRpbUluZGV4KTtcbiAgICByZXR1cm4gZ2V0UmF3U291cmNlVmFsdWVHZXR0ZXIoc291cmNlRm9ybWF0KShkYXRhSXRlbSwgZGltSW5kZXgsIHByb3BlcnR5KTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcmVzdWx0ID0gZGF0YUl0ZW07XG5cbiAgICBpZiAoc291cmNlRm9ybWF0ID09PSBTT1VSQ0VfRk9STUFUX09SSUdJTkFMKSB7XG4gICAgICByZXN1bHQgPSBnZXREYXRhSXRlbVZhbHVlKGRhdGFJdGVtKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG4vKipcclxuICogQ29tcGF0aWJsZSB3aXRoIHNvbWUgY2FzZXMgKGluIHBpZSwgbWFwKSBsaWtlOlxyXG4gKiBkYXRhOiBbe25hbWU6ICd4eCcsIHZhbHVlOiA1LCBzZWxlY3RlZDogdHJ1ZX0sIC4uLl1cclxuICogd2hlcmUgb25seSBzb3VyY2VGb3JtYXQgaXMgJ29yaWdpbmFsJyBhbmQgJ29iamVjdFJvd3MnIHN1cHBvcnRlZC5cclxuICpcclxuICogLy8gVE9ET1xyXG4gKiBTdXBwb3J0ZWQgZGV0YWlsIG9wdGlvbnMgaW4gZGF0YSBpdGVtIHdoZW4gdXNpbmcgJ2FycmF5Um93cycuXHJcbiAqXHJcbiAqIEBwYXJhbSBkYXRhXHJcbiAqIEBwYXJhbSBkYXRhSW5kZXhcclxuICogQHBhcmFtIGF0dHIgbGlrZSAnc2VsZWN0ZWQnXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcmV0cmlldmVSYXdBdHRyKGRhdGEsIGRhdGFJbmRleCwgYXR0cikge1xuICBpZiAoIWRhdGEpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgc291cmNlRm9ybWF0ID0gZGF0YS5nZXRTdG9yZSgpLmdldFNvdXJjZSgpLnNvdXJjZUZvcm1hdDtcblxuICBpZiAoc291cmNlRm9ybWF0ICE9PSBTT1VSQ0VfRk9STUFUX09SSUdJTkFMICYmIHNvdXJjZUZvcm1hdCAhPT0gU09VUkNFX0ZPUk1BVF9PQkpFQ1RfUk9XUykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBkYXRhSXRlbSA9IGRhdGEuZ2V0UmF3RGF0YUl0ZW0oZGF0YUluZGV4KTtcblxuICBpZiAoc291cmNlRm9ybWF0ID09PSBTT1VSQ0VfRk9STUFUX09SSUdJTkFMICYmICFpc09iamVjdChkYXRhSXRlbSkpIHtcbiAgICBkYXRhSXRlbSA9IG51bGw7XG4gIH1cblxuICBpZiAoZGF0YUl0ZW0pIHtcbiAgICByZXR1cm4gZGF0YUl0ZW1bYXR0cl07XG4gIH1cbn0iLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCAqIGFzIHpyVXRpbCBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0IHsgcmV0cmlldmVSYXdWYWx1ZSB9IGZyb20gJy4uLy4uL2RhdGEvaGVscGVyL2RhdGFQcm92aWRlci5qcyc7XG5pbXBvcnQgeyBmb3JtYXRUcGwgfSBmcm9tICcuLi8uLi91dGlsL2Zvcm1hdC5qcyc7XG5pbXBvcnQgeyBlcnJvciwgbWFrZVByaW50YWJsZSB9IGZyb20gJy4uLy4uL3V0aWwvbG9nLmpzJztcbnZhciBESU1FTlNJT05fTEFCRUxfUkVHID0gL1xce0AoLis/KVxcfS9nO1xuXG52YXIgRGF0YUZvcm1hdE1peGluID1cbi8qKiBAY2xhc3MgKi9cbmZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRGF0YUZvcm1hdE1peGluKCkge31cbiAgLyoqXHJcbiAgICogR2V0IHBhcmFtcyBmb3IgZm9ybWF0dGVyXHJcbiAgICovXG5cblxuICBEYXRhRm9ybWF0TWl4aW4ucHJvdG90eXBlLmdldERhdGFQYXJhbXMgPSBmdW5jdGlvbiAoZGF0YUluZGV4LCBkYXRhVHlwZSkge1xuICAgIHZhciBkYXRhID0gdGhpcy5nZXREYXRhKGRhdGFUeXBlKTtcbiAgICB2YXIgcmF3VmFsdWUgPSB0aGlzLmdldFJhd1ZhbHVlKGRhdGFJbmRleCwgZGF0YVR5cGUpO1xuICAgIHZhciByYXdEYXRhSW5kZXggPSBkYXRhLmdldFJhd0luZGV4KGRhdGFJbmRleCk7XG4gICAgdmFyIG5hbWUgPSBkYXRhLmdldE5hbWUoZGF0YUluZGV4KTtcbiAgICB2YXIgaXRlbU9wdCA9IGRhdGEuZ2V0UmF3RGF0YUl0ZW0oZGF0YUluZGV4KTtcbiAgICB2YXIgc3R5bGUgPSBkYXRhLmdldEl0ZW1WaXN1YWwoZGF0YUluZGV4LCAnc3R5bGUnKTtcbiAgICB2YXIgY29sb3IgPSBzdHlsZSAmJiBzdHlsZVtkYXRhLmdldEl0ZW1WaXN1YWwoZGF0YUluZGV4LCAnZHJhd1R5cGUnKSB8fCAnZmlsbCddO1xuICAgIHZhciBib3JkZXJDb2xvciA9IHN0eWxlICYmIHN0eWxlLnN0cm9rZTtcbiAgICB2YXIgbWFpblR5cGUgPSB0aGlzLm1haW5UeXBlO1xuICAgIHZhciBpc1NlcmllcyA9IG1haW5UeXBlID09PSAnc2VyaWVzJztcbiAgICB2YXIgdXNlck91dHB1dCA9IGRhdGEudXNlck91dHB1dCAmJiBkYXRhLnVzZXJPdXRwdXQuZ2V0KCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbXBvbmVudFR5cGU6IG1haW5UeXBlLFxuICAgICAgY29tcG9uZW50U3ViVHlwZTogdGhpcy5zdWJUeXBlLFxuICAgICAgY29tcG9uZW50SW5kZXg6IHRoaXMuY29tcG9uZW50SW5kZXgsXG4gICAgICBzZXJpZXNUeXBlOiBpc1NlcmllcyA/IHRoaXMuc3ViVHlwZSA6IG51bGwsXG4gICAgICBzZXJpZXNJbmRleDogdGhpcy5zZXJpZXNJbmRleCxcbiAgICAgIHNlcmllc0lkOiBpc1NlcmllcyA/IHRoaXMuaWQgOiBudWxsLFxuICAgICAgc2VyaWVzTmFtZTogaXNTZXJpZXMgPyB0aGlzLm5hbWUgOiBudWxsLFxuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIGRhdGFJbmRleDogcmF3RGF0YUluZGV4LFxuICAgICAgZGF0YTogaXRlbU9wdCxcbiAgICAgIGRhdGFUeXBlOiBkYXRhVHlwZSxcbiAgICAgIHZhbHVlOiByYXdWYWx1ZSxcbiAgICAgIGNvbG9yOiBjb2xvcixcbiAgICAgIGJvcmRlckNvbG9yOiBib3JkZXJDb2xvcixcbiAgICAgIGRpbWVuc2lvbk5hbWVzOiB1c2VyT3V0cHV0ID8gdXNlck91dHB1dC5mdWxsRGltZW5zaW9ucyA6IG51bGwsXG4gICAgICBlbmNvZGU6IHVzZXJPdXRwdXQgPyB1c2VyT3V0cHV0LmVuY29kZSA6IG51bGwsXG4gICAgICAvLyBQYXJhbSBuYW1lIGxpc3QgZm9yIG1hcHBpbmcgYGFgLCBgYmAsIGBjYCwgYGRgLCBgZWBcbiAgICAgICR2YXJzOiBbJ3Nlcmllc05hbWUnLCAnbmFtZScsICd2YWx1ZSddXG4gICAgfTtcbiAgfTtcbiAgLyoqXHJcbiAgICogRm9ybWF0IGxhYmVsXHJcbiAgICogQHBhcmFtIGRhdGFJbmRleFxyXG4gICAqIEBwYXJhbSBzdGF0dXMgJ25vcm1hbCcgYnkgZGVmYXVsdFxyXG4gICAqIEBwYXJhbSBkYXRhVHlwZVxyXG4gICAqIEBwYXJhbSBsYWJlbERpbUluZGV4IE9ubHkgdXNlZCBpbiBzb21lIGNoYXJ0IHRoYXRcclxuICAgKiAgICAgICAgdXNlIGZvcm1hdHRlciBpbiBkaWZmZXJlbnQgZGltZW5zaW9ucywgbGlrZSByYWRhci5cclxuICAgKiBAcGFyYW0gZm9ybWF0dGVyIEZvcm1hdHRlciBnaXZlbiBvdXRzaWRlLlxyXG4gICAqIEByZXR1cm4gcmV0dXJuIG51bGwvdW5kZWZpbmVkIGlmIG5vIGZvcm1hdHRlclxyXG4gICAqL1xuXG5cbiAgRGF0YUZvcm1hdE1peGluLnByb3RvdHlwZS5nZXRGb3JtYXR0ZWRMYWJlbCA9IGZ1bmN0aW9uIChkYXRhSW5kZXgsIHN0YXR1cywgZGF0YVR5cGUsIGxhYmVsRGltSW5kZXgsIGZvcm1hdHRlciwgZXh0ZW5kUGFyYW1zKSB7XG4gICAgc3RhdHVzID0gc3RhdHVzIHx8ICdub3JtYWwnO1xuICAgIHZhciBkYXRhID0gdGhpcy5nZXREYXRhKGRhdGFUeXBlKTtcbiAgICB2YXIgcGFyYW1zID0gdGhpcy5nZXREYXRhUGFyYW1zKGRhdGFJbmRleCwgZGF0YVR5cGUpO1xuXG4gICAgaWYgKGV4dGVuZFBhcmFtcykge1xuICAgICAgcGFyYW1zLnZhbHVlID0gZXh0ZW5kUGFyYW1zLmludGVycG9sYXRlZFZhbHVlO1xuICAgIH1cblxuICAgIGlmIChsYWJlbERpbUluZGV4ICE9IG51bGwgJiYgenJVdGlsLmlzQXJyYXkocGFyYW1zLnZhbHVlKSkge1xuICAgICAgcGFyYW1zLnZhbHVlID0gcGFyYW1zLnZhbHVlW2xhYmVsRGltSW5kZXhdO1xuICAgIH1cblxuICAgIGlmICghZm9ybWF0dGVyKSB7XG4gICAgICB2YXIgaXRlbU1vZGVsID0gZGF0YS5nZXRJdGVtTW9kZWwoZGF0YUluZGV4KTsgLy8gQHRzLWlnbm9yZVxuXG4gICAgICBmb3JtYXR0ZXIgPSBpdGVtTW9kZWwuZ2V0KHN0YXR1cyA9PT0gJ25vcm1hbCcgPyBbJ2xhYmVsJywgJ2Zvcm1hdHRlciddIDogW3N0YXR1cywgJ2xhYmVsJywgJ2Zvcm1hdHRlciddKTtcbiAgICB9XG5cbiAgICBpZiAoenJVdGlsLmlzRnVuY3Rpb24oZm9ybWF0dGVyKSkge1xuICAgICAgcGFyYW1zLnN0YXR1cyA9IHN0YXR1cztcbiAgICAgIHBhcmFtcy5kaW1lbnNpb25JbmRleCA9IGxhYmVsRGltSW5kZXg7XG4gICAgICByZXR1cm4gZm9ybWF0dGVyKHBhcmFtcyk7XG4gICAgfSBlbHNlIGlmICh6clV0aWwuaXNTdHJpbmcoZm9ybWF0dGVyKSkge1xuICAgICAgdmFyIHN0ciA9IGZvcm1hdFRwbChmb3JtYXR0ZXIsIHBhcmFtcyk7IC8vIFN1cHBvcnQgJ2FhYXtAWzNdfWJiYntAcHJvZHVjdH1jY2MnLlxuICAgICAgLy8gRG8gbm90IHN1cHBvcnQgJ30nIGluIGRpbSBuYW1lIHV0aWwgaGF2ZSB0by5cblxuICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKERJTUVOU0lPTl9MQUJFTF9SRUcsIGZ1bmN0aW9uIChvcmlnaW4sIGRpbVN0cikge1xuICAgICAgICB2YXIgbGVuID0gZGltU3RyLmxlbmd0aDtcbiAgICAgICAgdmFyIGRpbUxvb3NlID0gZGltU3RyO1xuXG4gICAgICAgIGlmIChkaW1Mb29zZS5jaGFyQXQoMCkgPT09ICdbJyAmJiBkaW1Mb29zZS5jaGFyQXQobGVuIC0gMSkgPT09ICddJykge1xuICAgICAgICAgIGRpbUxvb3NlID0gK2RpbUxvb3NlLnNsaWNlKDEsIGxlbiAtIDEpOyAvLyBBbHNvIHN1cHBvcnQ6ICdbXScgPT4gMFxuXG4gICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgIGlmIChpc05hTihkaW1Mb29zZSkpIHtcbiAgICAgICAgICAgICAgZXJyb3IoXCJJbnZhbGlkZSBsYWJlbCBmb3JtYXR0ZXI6IEBcIiArIGRpbVN0ciArIFwiLCBvbmx5IHN1cHBvcnQgQFswXSwgQFsxXSwgQFsyXSwgLi4uXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB2YWwgPSByZXRyaWV2ZVJhd1ZhbHVlKGRhdGEsIGRhdGFJbmRleCwgZGltTG9vc2UpO1xuXG4gICAgICAgIGlmIChleHRlbmRQYXJhbXMgJiYgenJVdGlsLmlzQXJyYXkoZXh0ZW5kUGFyYW1zLmludGVycG9sYXRlZFZhbHVlKSkge1xuICAgICAgICAgIHZhciBkaW1JbmRleCA9IGRhdGEuZ2V0RGltZW5zaW9uSW5kZXgoZGltTG9vc2UpO1xuXG4gICAgICAgICAgaWYgKGRpbUluZGV4ID49IDApIHtcbiAgICAgICAgICAgIHZhbCA9IGV4dGVuZFBhcmFtcy5pbnRlcnBvbGF0ZWRWYWx1ZVtkaW1JbmRleF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhbCAhPSBudWxsID8gdmFsICsgJycgOiAnJztcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbiAgLyoqXHJcbiAgICogR2V0IHJhdyB2YWx1ZSBpbiBvcHRpb25cclxuICAgKi9cblxuXG4gIERhdGFGb3JtYXRNaXhpbi5wcm90b3R5cGUuZ2V0UmF3VmFsdWUgPSBmdW5jdGlvbiAoaWR4LCBkYXRhVHlwZSkge1xuICAgIHJldHVybiByZXRyaWV2ZVJhd1ZhbHVlKHRoaXMuZ2V0RGF0YShkYXRhVHlwZSksIGlkeCk7XG4gIH07XG4gIC8qKlxyXG4gICAqIFNob3VsZCBiZSBpbXBsZW1lbnRlZC5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gZGF0YUluZGV4XHJcbiAgICogQHBhcmFtIHtib29sZWFufSBbbXVsdGlwbGVTZXJpZXM9ZmFsc2VdXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtkYXRhVHlwZV1cclxuICAgKi9cblxuXG4gIERhdGFGb3JtYXRNaXhpbi5wcm90b3R5cGUuZm9ybWF0VG9vbHRpcCA9IGZ1bmN0aW9uIChkYXRhSW5kZXgsIG11bHRpcGxlU2VyaWVzLCBkYXRhVHlwZSkge1xuICAgIC8vIEVtcHR5IGZ1bmN0aW9uXG4gICAgcmV0dXJuO1xuICB9O1xuXG4gIHJldHVybiBEYXRhRm9ybWF0TWl4aW47XG59KCk7XG5cbmV4cG9ydCB7IERhdGFGb3JtYXRNaXhpbiB9O1xuOyAvLyBQRU5ESU5HOiBwcmV2aW91c2x5IHdlIGFjY2VwdCB0aGlzIHR5cGUgd2hlbiBjYWxsaW5nIGBmb3JtYXRUb29sdGlwYCxcbi8vIGJ1dCBndWVzcyBsaXR0bGUgY2hhbmNlIGhhcyBiZWVuIHVzZWQgb3V0c2lkZS4gRG8gd2UgbmVlZCB0byBiYWNrd2FyZFxuLy8gY29tcGF0IGl0P1xuLy8gdHlwZSBUb29sdGlwRm9ybWF0UmVzdWx0TGVnYWN5T2JqZWN0ID0ge1xuLy8gICAgIC8vIGBodG1sYCBtZWFucyB0aGUgbWFya3VwIGxhbmd1YWdlIHRleHQsIGVpdGhlciBpbiAnaHRtbCcgb3IgJ3JpY2hUZXh0Jy5cbi8vICAgICAvLyBUaGUgbmFtZSBgaHRtbGAgaXMgbm90IGFwcHJvcHJpYXRlIGJlY2F1c2UgaW4gJ3JpY2hUZXh0JyBpdCBpcyBub3QgYSBIVE1MXG4vLyAgICAgLy8gc3RyaW5nLiBCdXQgc3RpbGwgc3VwcG9ydCBpdCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eS5cbi8vICAgICBodG1sOiBzdHJpbmc7XG4vLyAgICAgbWFya2VyczogRGljdGlvbmFyeTxDb2xvclN0cmluZz47XG4vLyB9O1xuXG4vKipcclxuICogRm9yIGJhY2t3YXJkIGNvbXBhdCwgbm9ybWFsaXplIHRoZSByZXR1cm4gZnJvbSBgZm9ybWF0VG9vbHRpcGAuXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplVG9vbHRpcEZvcm1hdFJlc3VsdChyZXN1bHQpIHtcbiAgdmFyIG1hcmt1cFRleHQ7IC8vIGxldCBtYXJrZXJzOiBEaWN0aW9uYXJ5PENvbG9yU3RyaW5nPjtcblxuICB2YXIgbWFya3VwRnJhZ21lbnQ7XG5cbiAgaWYgKHpyVXRpbC5pc09iamVjdChyZXN1bHQpKSB7XG4gICAgaWYgKHJlc3VsdC50eXBlKSB7XG4gICAgICBtYXJrdXBGcmFnbWVudCA9IHJlc3VsdDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdUaGUgcmV0dXJuIHR5cGUgb2YgYGZvcm1hdFRvb2x0aXBgIGlzIG5vdCBzdXBwb3J0ZWQ6ICcgKyBtYWtlUHJpbnRhYmxlKHJlc3VsdCkpO1xuICAgICAgfVxuICAgIH0gLy8gZWxzZSB7XG4gICAgLy8gICAgIG1hcmt1cFRleHQgPSAocmVzdWx0IGFzIFRvb2x0aXBGb3JtYXRSZXN1bHRMZWdhY3lPYmplY3QpLmh0bWw7XG4gICAgLy8gICAgIG1hcmtlcnMgPSAocmVzdWx0IGFzIFRvb2x0aXBGb3JtYXRSZXN1bHRMZWdhY3lPYmplY3QpLm1hcmtlcnM7XG4gICAgLy8gICAgIGlmIChtYXJrZXJzRXhpc3RpbmcpIHtcbiAgICAvLyAgICAgICAgIG1hcmtlcnMgPSB6clV0aWwubWVyZ2UobWFya2Vyc0V4aXN0aW5nLCBtYXJrZXJzKTtcbiAgICAvLyAgICAgfVxuICAgIC8vIH1cblxuICB9IGVsc2Uge1xuICAgIG1hcmt1cFRleHQgPSByZXN1bHQ7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHRleHQ6IG1hcmt1cFRleHQsXG4gICAgLy8gbWFya2VyczogbWFya2VycyB8fCBtYXJrZXJzRXhpc3RpbmcsXG4gICAgZnJhZzogbWFya3VwRnJhZ21lbnRcbiAgfTtcbn0iLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCB7IGFzc2VydCwgaXNBcnJheSB9IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG47XG4vKipcclxuICogQHBhcmFtIHtPYmplY3R9IGRlZmluZVxyXG4gKiBAcmV0dXJuIFNlZSB0aGUgcmV0dXJuIG9mIGBjcmVhdGVUYXNrYC5cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUYXNrKGRlZmluZSkge1xuICByZXR1cm4gbmV3IFRhc2soZGVmaW5lKTtcbn1cblxudmFyIFRhc2sgPVxuLyoqIEBjbGFzcyAqL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBUYXNrKGRlZmluZSkge1xuICAgIGRlZmluZSA9IGRlZmluZSB8fCB7fTtcbiAgICB0aGlzLl9yZXNldCA9IGRlZmluZS5yZXNldDtcbiAgICB0aGlzLl9wbGFuID0gZGVmaW5lLnBsYW47XG4gICAgdGhpcy5fY291bnQgPSBkZWZpbmUuY291bnQ7XG4gICAgdGhpcy5fb25EaXJ0eSA9IGRlZmluZS5vbkRpcnR5O1xuICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgfVxuICAvKipcclxuICAgKiBAcGFyYW0gc3RlcCBTcGVjaWZpZWQgc3RlcC5cclxuICAgKiBAcGFyYW0gc2tpcCBTa2lwIGN1c3RvbWVyIHBlcmZvcm0gY2FsbC5cclxuICAgKiBAcGFyYW0gbW9kQnkgU2FtcGxpbmcgd2luZG93IHNpemUuXHJcbiAgICogQHBhcmFtIG1vZERhdGFDb3VudCBTYW1wbGluZyBjb3VudC5cclxuICAgKiBAcmV0dXJuIHdoZXRoZXIgdW5maW5pc2hlZC5cclxuICAgKi9cblxuXG4gIFRhc2sucHJvdG90eXBlLnBlcmZvcm0gPSBmdW5jdGlvbiAocGVyZm9ybUFyZ3MpIHtcbiAgICB2YXIgdXBUYXNrID0gdGhpcy5fdXBzdHJlYW07XG4gICAgdmFyIHNraXAgPSBwZXJmb3JtQXJncyAmJiBwZXJmb3JtQXJncy5za2lwOyAvLyBUT0RPIHNvbWUgcmVmYWN0b3IuXG4gICAgLy8gUHVsbCBkYXRhLiBNdXN0IHB1bGwgZGF0YSBlYWNoIHRpbWUsIGJlY2F1c2UgY29udGV4dC5kYXRhXG4gICAgLy8gbWF5IGJlIHVwZGF0ZWQgYnkgU2VyaWVzLnNldERhdGEuXG5cbiAgICBpZiAodGhpcy5fZGlydHkgJiYgdXBUYXNrKSB7XG4gICAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dDtcbiAgICAgIGNvbnRleHQuZGF0YSA9IGNvbnRleHQub3V0cHV0RGF0YSA9IHVwVGFzay5jb250ZXh0Lm91dHB1dERhdGE7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX19waXBlbGluZSkge1xuICAgICAgdGhpcy5fX3BpcGVsaW5lLmN1cnJlbnRUYXNrID0gdGhpcztcbiAgICB9XG5cbiAgICB2YXIgcGxhblJlc3VsdDtcblxuICAgIGlmICh0aGlzLl9wbGFuICYmICFza2lwKSB7XG4gICAgICBwbGFuUmVzdWx0ID0gdGhpcy5fcGxhbih0aGlzLmNvbnRleHQpO1xuICAgIH0gLy8gU3VwcG9ydCBzaGFyZGluZyBieSBtb2QsIHdoaWNoIGNoYW5nZXMgdGhlIHJlbmRlciBzZXF1ZW5jZSBhbmQgbWFrZXMgdGhlIHJlbmRlcmVkIGdyYXBoaWNcbiAgICAvLyBlbGVtZW50cyB1bmlmb3JtZWQgZGlzdHJpYnV0ZWQgd2hlbiBwcm9ncmVzcywgZXNwZWNpYWxseSB3aGVuIG1vdmluZyBvciB6b29taW5nLlxuXG5cbiAgICB2YXIgbGFzdE1vZEJ5ID0gbm9ybWFsaXplTW9kQnkodGhpcy5fbW9kQnkpO1xuICAgIHZhciBsYXN0TW9kRGF0YUNvdW50ID0gdGhpcy5fbW9kRGF0YUNvdW50IHx8IDA7XG4gICAgdmFyIG1vZEJ5ID0gbm9ybWFsaXplTW9kQnkocGVyZm9ybUFyZ3MgJiYgcGVyZm9ybUFyZ3MubW9kQnkpO1xuICAgIHZhciBtb2REYXRhQ291bnQgPSBwZXJmb3JtQXJncyAmJiBwZXJmb3JtQXJncy5tb2REYXRhQ291bnQgfHwgMDtcblxuICAgIGlmIChsYXN0TW9kQnkgIT09IG1vZEJ5IHx8IGxhc3RNb2REYXRhQ291bnQgIT09IG1vZERhdGFDb3VudCkge1xuICAgICAgcGxhblJlc3VsdCA9ICdyZXNldCc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbm9ybWFsaXplTW9kQnkodmFsKSB7XG4gICAgICAhKHZhbCA+PSAxKSAmJiAodmFsID0gMSk7IC8vIGpzaGludCBpZ25vcmU6bGluZVxuXG4gICAgICByZXR1cm4gdmFsO1xuICAgIH1cblxuICAgIHZhciBmb3JjZUZpcnN0UHJvZ3Jlc3M7XG5cbiAgICBpZiAodGhpcy5fZGlydHkgfHwgcGxhblJlc3VsdCA9PT0gJ3Jlc2V0Jykge1xuICAgICAgdGhpcy5fZGlydHkgPSBmYWxzZTtcbiAgICAgIGZvcmNlRmlyc3RQcm9ncmVzcyA9IHRoaXMuX2RvUmVzZXQoc2tpcCk7XG4gICAgfVxuXG4gICAgdGhpcy5fbW9kQnkgPSBtb2RCeTtcbiAgICB0aGlzLl9tb2REYXRhQ291bnQgPSBtb2REYXRhQ291bnQ7XG4gICAgdmFyIHN0ZXAgPSBwZXJmb3JtQXJncyAmJiBwZXJmb3JtQXJncy5zdGVwO1xuXG4gICAgaWYgKHVwVGFzaykge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgYXNzZXJ0KHVwVGFzay5fb3V0cHV0RHVlRW5kICE9IG51bGwpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9kdWVFbmQgPSB1cFRhc2suX291dHB1dER1ZUVuZDtcbiAgICB9IC8vIERhdGFUYXNrIG9yIG92ZXJhbGxUYXNrXG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgYXNzZXJ0KCF0aGlzLl9wcm9ncmVzcyB8fCB0aGlzLl9jb3VudCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9kdWVFbmQgPSB0aGlzLl9jb3VudCA/IHRoaXMuX2NvdW50KHRoaXMuY29udGV4dCkgOiBJbmZpbml0eTtcbiAgICAgIH0gLy8gTm90ZTogU3R1YnMsIHRoYXQgaXRzIGhvc3Qgb3ZlcmFsbCB0YXNrIGxldCBpdCBoYXMgcHJvZ3Jlc3MsIGhhcyBwcm9ncmVzcy5cbiAgICAvLyBJZiBubyBwcm9ncmVzcywgcGFzcyBpbmRleCBmcm9tIHVwc3RyZWFtIHRvIGRvd25zdHJlYW0gZWFjaCB0aW1lIHBsYW4gY2FsbGVkLlxuXG5cbiAgICBpZiAodGhpcy5fcHJvZ3Jlc3MpIHtcbiAgICAgIHZhciBzdGFydCA9IHRoaXMuX2R1ZUluZGV4O1xuICAgICAgdmFyIGVuZCA9IE1hdGgubWluKHN0ZXAgIT0gbnVsbCA/IHRoaXMuX2R1ZUluZGV4ICsgc3RlcCA6IEluZmluaXR5LCB0aGlzLl9kdWVFbmQpO1xuXG4gICAgICBpZiAoIXNraXAgJiYgKGZvcmNlRmlyc3RQcm9ncmVzcyB8fCBzdGFydCA8IGVuZCkpIHtcbiAgICAgICAgdmFyIHByb2dyZXNzID0gdGhpcy5fcHJvZ3Jlc3M7XG5cbiAgICAgICAgaWYgKGlzQXJyYXkocHJvZ3Jlc3MpKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9ncmVzcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5fZG9Qcm9ncmVzcyhwcm9ncmVzc1tpXSwgc3RhcnQsIGVuZCwgbW9kQnksIG1vZERhdGFDb3VudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX2RvUHJvZ3Jlc3MocHJvZ3Jlc3MsIHN0YXJ0LCBlbmQsIG1vZEJ5LCBtb2REYXRhQ291bnQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2R1ZUluZGV4ID0gZW5kOyAvLyBJZiBubyBgb3V0cHV0RHVlRW5kYCwgYXNzdW1lIHRoYXQgb3V0cHV0IGRhdGEgYW5kXG4gICAgICAvLyBpbnB1dCBkYXRhIGlzIHRoZSBzYW1lLCBzbyB1c2UgYGR1ZUluZGV4YCBhcyBgb3V0cHV0RHVlRW5kYC5cblxuICAgICAgdmFyIG91dHB1dER1ZUVuZCA9IHRoaXMuX3NldHRlZE91dHB1dEVuZCAhPSBudWxsID8gdGhpcy5fc2V0dGVkT3V0cHV0RW5kIDogZW5kO1xuXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAvLyA/Pz8gQ2FuIG5vdCByb2xsYmFjay5cbiAgICAgICAgYXNzZXJ0KG91dHB1dER1ZUVuZCA+PSB0aGlzLl9vdXRwdXREdWVFbmQpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9vdXRwdXREdWVFbmQgPSBvdXRwdXREdWVFbmQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vICgxKSBTb21lIG92ZXJhbGwgdGFzayBoYXMgbm8gcHJvZ3Jlc3MuXG4gICAgICAvLyAoMikgU3R1YnMsIHRoYXQgaXRzIGhvc3Qgb3ZlcmFsbCB0YXNrIGRvIG5vdCBsZXQgaXQgaGFzIHByb2dyZXNzLCBoYXMgbm8gcHJvZ3Jlc3MuXG4gICAgICAvLyBUaGlzIHNob3VsZCBhbHdheXMgYmUgcGVyZm9ybWVkIHNvIGl0IGNhbiBiZSBwYXNzZWQgdG8gZG93bnN0cmVhbS5cbiAgICAgIHRoaXMuX2R1ZUluZGV4ID0gdGhpcy5fb3V0cHV0RHVlRW5kID0gdGhpcy5fc2V0dGVkT3V0cHV0RW5kICE9IG51bGwgPyB0aGlzLl9zZXR0ZWRPdXRwdXRFbmQgOiB0aGlzLl9kdWVFbmQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMudW5maW5pc2hlZCgpO1xuICB9O1xuXG4gIFRhc2sucHJvdG90eXBlLmRpcnR5ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICB0aGlzLl9vbkRpcnR5ICYmIHRoaXMuX29uRGlydHkodGhpcy5jb250ZXh0KTtcbiAgfTtcblxuICBUYXNrLnByb3RvdHlwZS5fZG9Qcm9ncmVzcyA9IGZ1bmN0aW9uIChwcm9ncmVzcywgc3RhcnQsIGVuZCwgbW9kQnksIG1vZERhdGFDb3VudCkge1xuICAgIGl0ZXJhdG9yLnJlc2V0KHN0YXJ0LCBlbmQsIG1vZEJ5LCBtb2REYXRhQ291bnQpO1xuICAgIHRoaXMuX2NhbGxpbmdQcm9ncmVzcyA9IHByb2dyZXNzO1xuXG4gICAgdGhpcy5fY2FsbGluZ1Byb2dyZXNzKHtcbiAgICAgIHN0YXJ0OiBzdGFydCxcbiAgICAgIGVuZDogZW5kLFxuICAgICAgY291bnQ6IGVuZCAtIHN0YXJ0LFxuICAgICAgbmV4dDogaXRlcmF0b3IubmV4dFxuICAgIH0sIHRoaXMuY29udGV4dCk7XG4gIH07XG5cbiAgVGFzay5wcm90b3R5cGUuX2RvUmVzZXQgPSBmdW5jdGlvbiAoc2tpcCkge1xuICAgIHRoaXMuX2R1ZUluZGV4ID0gdGhpcy5fb3V0cHV0RHVlRW5kID0gdGhpcy5fZHVlRW5kID0gMDtcbiAgICB0aGlzLl9zZXR0ZWRPdXRwdXRFbmQgPSBudWxsO1xuICAgIHZhciBwcm9ncmVzcztcbiAgICB2YXIgZm9yY2VGaXJzdFByb2dyZXNzO1xuXG4gICAgaWYgKCFza2lwICYmIHRoaXMuX3Jlc2V0KSB7XG4gICAgICBwcm9ncmVzcyA9IHRoaXMuX3Jlc2V0KHRoaXMuY29udGV4dCk7XG5cbiAgICAgIGlmIChwcm9ncmVzcyAmJiBwcm9ncmVzcy5wcm9ncmVzcykge1xuICAgICAgICBmb3JjZUZpcnN0UHJvZ3Jlc3MgPSBwcm9ncmVzcy5mb3JjZUZpcnN0UHJvZ3Jlc3M7XG4gICAgICAgIHByb2dyZXNzID0gcHJvZ3Jlc3MucHJvZ3Jlc3M7XG4gICAgICB9IC8vIFRvIHNpbXBsaWZ5IG5vIHByb2dyZXNzIGNoZWNraW5nLCBhcnJheSBtdXN0IGhhcyBpdGVtLlxuXG5cbiAgICAgIGlmIChpc0FycmF5KHByb2dyZXNzKSAmJiAhcHJvZ3Jlc3MubGVuZ3RoKSB7XG4gICAgICAgIHByb2dyZXNzID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9wcm9ncmVzcyA9IHByb2dyZXNzO1xuICAgIHRoaXMuX21vZEJ5ID0gdGhpcy5fbW9kRGF0YUNvdW50ID0gbnVsbDtcbiAgICB2YXIgZG93bnN0cmVhbSA9IHRoaXMuX2Rvd25zdHJlYW07XG4gICAgZG93bnN0cmVhbSAmJiBkb3duc3RyZWFtLmRpcnR5KCk7XG4gICAgcmV0dXJuIGZvcmNlRmlyc3RQcm9ncmVzcztcbiAgfTtcblxuICBUYXNrLnByb3RvdHlwZS51bmZpbmlzaGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9wcm9ncmVzcyAmJiB0aGlzLl9kdWVJbmRleCA8IHRoaXMuX2R1ZUVuZDtcbiAgfTtcbiAgLyoqXHJcbiAgICogQHBhcmFtIGRvd25UYXNrIFRoZSBkb3duc3RyZWFtIHRhc2suXHJcbiAgICogQHJldHVybiBUaGUgZG93bnN0cmVhbSB0YXNrLlxyXG4gICAqL1xuXG5cbiAgVGFzay5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uIChkb3duVGFzaykge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBhc3NlcnQoZG93blRhc2sgJiYgIWRvd25UYXNrLl9kaXNwb3NlZCAmJiBkb3duVGFzayAhPT0gdGhpcyk7XG4gICAgfSAvLyBJZiBhbHJlYWR5IGRvd25zdHJlYW0sIGRvIG5vdCBkaXJ0eSBkb3duVGFzay5cblxuXG4gICAgaWYgKHRoaXMuX2Rvd25zdHJlYW0gIT09IGRvd25UYXNrIHx8IHRoaXMuX2RpcnR5KSB7XG4gICAgICB0aGlzLl9kb3duc3RyZWFtID0gZG93blRhc2s7XG4gICAgICBkb3duVGFzay5fdXBzdHJlYW0gPSB0aGlzO1xuICAgICAgZG93blRhc2suZGlydHkoKTtcbiAgICB9XG4gIH07XG5cbiAgVGFzay5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fZGlzcG9zZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl91cHN0cmVhbSAmJiAodGhpcy5fdXBzdHJlYW0uX2Rvd25zdHJlYW0gPSBudWxsKTtcbiAgICB0aGlzLl9kb3duc3RyZWFtICYmICh0aGlzLl9kb3duc3RyZWFtLl91cHN0cmVhbSA9IG51bGwpO1xuICAgIHRoaXMuX2RpcnR5ID0gZmFsc2U7XG4gICAgdGhpcy5fZGlzcG9zZWQgPSB0cnVlO1xuICB9O1xuXG4gIFRhc2sucHJvdG90eXBlLmdldFVwc3RyZWFtID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl91cHN0cmVhbTtcbiAgfTtcblxuICBUYXNrLnByb3RvdHlwZS5nZXREb3duc3RyZWFtID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9kb3duc3RyZWFtO1xuICB9O1xuXG4gIFRhc2sucHJvdG90eXBlLnNldE91dHB1dEVuZCA9IGZ1bmN0aW9uIChlbmQpIHtcbiAgICAvLyBUaGlzIG9ubHkgaGFwcGVucyBpbiBkYXRhVGFzaywgZGF0YVpvb20sIG1hcCwgY3VycmVudGx5LlxuICAgIC8vIHdoZXJlIGRhdGFab29tIGRvIG5vdCBzZXQgZW5kIGVhY2ggdGltZSwgYnV0IG9ubHkgc2V0XG4gICAgLy8gd2hlbiByZXNldC4gU28gd2Ugc2hvdWxkIHJlY29yZCB0aGUgc2V0IGVuZCwgaW4gY2FzZVxuICAgIC8vIHRoYXQgdGhlIHN0dWIgb2YgZGF0YVpvb20gcGVyZm9ybSBhZ2FpbiBhbmQgZWFyc2UgdGhlXG4gICAgLy8gc2V0IGVuZCBieSB1cHN0cmVhbS5cbiAgICB0aGlzLl9vdXRwdXREdWVFbmQgPSB0aGlzLl9zZXR0ZWRPdXRwdXRFbmQgPSBlbmQ7XG4gIH07XG5cbiAgcmV0dXJuIFRhc2s7XG59KCk7XG5cbmV4cG9ydCB7IFRhc2sgfTtcblxudmFyIGl0ZXJhdG9yID0gZnVuY3Rpb24gKCkge1xuICB2YXIgZW5kO1xuICB2YXIgY3VycmVudDtcbiAgdmFyIG1vZEJ5O1xuICB2YXIgbW9kRGF0YUNvdW50O1xuICB2YXIgd2luQ291bnQ7XG4gIHZhciBpdCA9IHtcbiAgICByZXNldDogZnVuY3Rpb24gKHMsIGUsIHNTdGVwLCBzQ291bnQpIHtcbiAgICAgIGN1cnJlbnQgPSBzO1xuICAgICAgZW5kID0gZTtcbiAgICAgIG1vZEJ5ID0gc1N0ZXA7XG4gICAgICBtb2REYXRhQ291bnQgPSBzQ291bnQ7XG4gICAgICB3aW5Db3VudCA9IE1hdGguY2VpbChtb2REYXRhQ291bnQgLyBtb2RCeSk7XG4gICAgICBpdC5uZXh0ID0gbW9kQnkgPiAxICYmIG1vZERhdGFDb3VudCA+IDAgPyBtb2ROZXh0IDogc2VxdWVudGlhbE5leHQ7XG4gICAgfVxuICB9O1xuICByZXR1cm4gaXQ7XG5cbiAgZnVuY3Rpb24gc2VxdWVudGlhbE5leHQoKSB7XG4gICAgcmV0dXJuIGN1cnJlbnQgPCBlbmQgPyBjdXJyZW50KysgOiBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gbW9kTmV4dCgpIHtcbiAgICB2YXIgZGF0YUluZGV4ID0gY3VycmVudCAlIHdpbkNvdW50ICogbW9kQnkgKyBNYXRoLmNlaWwoY3VycmVudCAvIHdpbkNvdW50KTtcbiAgICB2YXIgcmVzdWx0ID0gY3VycmVudCA+PSBlbmQgPyBudWxsIDogZGF0YUluZGV4IDwgbW9kRGF0YUNvdW50ID8gZGF0YUluZGV4IC8vIElmIG1vZERhdGFDb3VudCBpcyBzbWFsbGVyIHRoYW4gZGF0YS5jb3VudCgpIChjb25zaWRlciBgYXBwZW5kRGF0YWAgY2FzZSksXG4gICAgLy8gVXNlIG5vcm1hbCBsaW5lYXIgcmVuZGVyaW5nIG1vZGUuXG4gICAgOiBjdXJyZW50O1xuICAgIGN1cnJlbnQrKztcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59KCk7IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBGb3Igc3RyZWFtIGRlYnVnIChTaG91bGQgYmUgY29tbWVudGVkIG91dCBhZnRlciB1c2VkISlcbi8vIEB1c2FnZTogcHJpbnRUYXNrKHRoaXMsICdiZWdpbicpO1xuLy8gQHVzYWdlOiBwcmludFRhc2sodGhpcywgbnVsbCwge3NvbWVFeHRyYVByb3B9KTtcbi8vIEB1c2FnZTogVXNlIGBfX2lkeEluUGlwZWxpbmVgIGFzIGNvbmRpdGlvbmFsIGJyZWFrcGlvbnQuXG4vL1xuLy8gd2luZG93LnByaW50VGFzayA9IGZ1bmN0aW9uICh0YXNrOiBhbnksIHByZWZpeDogc3RyaW5nLCBleHRyYTogeyBba2V5OiBzdHJpbmddOiB1bmtub3duIH0pOiB2b2lkIHtcbi8vICAgICB3aW5kb3cuZWNUYXNrVUlEID09IG51bGwgJiYgKHdpbmRvdy5lY1Rhc2tVSUQgPSAwKTtcbi8vICAgICB0YXNrLnVpZERlYnVnID09IG51bGwgJiYgKHRhc2sudWlkRGVidWcgPSBgdGFza18ke3dpbmRvdy5lY1Rhc2tVSUQrK31gKTtcbi8vICAgICB0YXNrLmFnZW50ICYmIHRhc2suYWdlbnQudWlkRGVidWcgPT0gbnVsbCAmJiAodGFzay5hZ2VudC51aWREZWJ1ZyA9IGB0YXNrXyR7d2luZG93LmVjVGFza1VJRCsrfWApO1xuLy8gICAgIGxldCBwcm9wcyA9IFtdO1xuLy8gICAgIGlmICh0YXNrLl9fcGlwZWxpbmUpIHtcbi8vICAgICAgICAgbGV0IHZhbCA9IGAke3Rhc2suX19pZHhJblBpcGVsaW5lfS8ke3Rhc2suX19waXBlbGluZS50YWlsLl9faWR4SW5QaXBlbGluZX0gJHt0YXNrLmFnZW50ID8gJyhzdHViKScgOiAnJ31gO1xuLy8gICAgICAgICBwcm9wcy5wdXNoKHt0ZXh0OiAnX19pZHhJblBpcGVsaW5lL3RvdGFsJywgdmFsdWU6IHZhbH0pO1xuLy8gICAgIH0gZWxzZSB7XG4vLyAgICAgICAgIGxldCBzdHViQ291bnQgPSAwO1xuLy8gICAgICAgICB0YXNrLmFnZW50U3R1Yk1hcC5lYWNoKCgpID0+IHN0dWJDb3VudCsrKTtcbi8vICAgICAgICAgcHJvcHMucHVzaCh7dGV4dDogJ2lkeCcsIHZhbHVlOiBgb3ZlcmFsbCAoc3R1YnM6ICR7c3R1YkNvdW50fSlgfSk7XG4vLyAgICAgfVxuLy8gICAgIHByb3BzLnB1c2goe3RleHQ6ICd1aWQnLCB2YWx1ZTogdGFzay51aWREZWJ1Z30pO1xuLy8gICAgIGlmICh0YXNrLl9fcGlwZWxpbmUpIHtcbi8vICAgICAgICAgcHJvcHMucHVzaCh7dGV4dDogJ3BpcGVsaW5lSWQnLCB2YWx1ZTogdGFzay5fX3BpcGVsaW5lLmlkfSk7XG4vLyAgICAgICAgIHRhc2suYWdlbnQgJiYgcHJvcHMucHVzaChcbi8vICAgICAgICAgICAgIHt0ZXh0OiAnc3R1YkZvcicsIHZhbHVlOiB0YXNrLmFnZW50LnVpZERlYnVnfVxuLy8gICAgICAgICApO1xuLy8gICAgIH1cbi8vICAgICBwcm9wcy5wdXNoKFxuLy8gICAgICAgICB7dGV4dDogJ2RpcnR5JywgdmFsdWU6IHRhc2suX2RpcnR5fSxcbi8vICAgICAgICAge3RleHQ6ICdkdWVJbmRleCcsIHZhbHVlOiB0YXNrLl9kdWVJbmRleH0sXG4vLyAgICAgICAgIHt0ZXh0OiAnZHVlRW5kJywgdmFsdWU6IHRhc2suX2R1ZUVuZH0sXG4vLyAgICAgICAgIHt0ZXh0OiAnb3V0cHV0RHVlRW5kJywgdmFsdWU6IHRhc2suX291dHB1dER1ZUVuZH1cbi8vICAgICApO1xuLy8gICAgIGlmIChleHRyYSkge1xuLy8gICAgICAgICBPYmplY3Qua2V5cyhleHRyYSkuZm9yRWFjaChrZXkgPT4ge1xuLy8gICAgICAgICAgICAgcHJvcHMucHVzaCh7dGV4dDoga2V5LCB2YWx1ZTogZXh0cmFba2V5XX0pO1xuLy8gICAgICAgICB9KTtcbi8vICAgICB9XG4vLyAgICAgbGV0IGFyZ3MgPSBbJ2NvbG9yOiBibHVlJ107XG4vLyAgICAgbGV0IG1zZyA9IGAlY1ske3ByZWZpeCB8fCAnVCd9XSAlY2AgKyBwcm9wcy5tYXAoaXRlbSA9PiAoXG4vLyAgICAgICAgIGFyZ3MucHVzaCgnY29sb3I6IGdyZWVuJywgJ2NvbG9yOiByZWQnKSxcbi8vICAgICAgICAgYCR7aXRlbS50ZXh0fTogJWMke2l0ZW0udmFsdWV9YFxuLy8gICAgICkpLmpvaW4oJyVjLCAnKTtcbi8vICAgICBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBbbXNnXS5jb25jYXQoYXJncykpO1xuLy8gICAgIC8vIGNvbnNvbGUubG9nKHRoaXMpO1xuLy8gfTtcbi8vIHdpbmRvdy5wcmludFBpcGVsaW5lID0gZnVuY3Rpb24gKHRhc2s6IGFueSwgcHJlZml4OiBzdHJpbmcpIHtcbi8vICAgICBjb25zdCBwaXBlbGluZSA9IHRhc2suX19waXBlbGluZTtcbi8vICAgICBsZXQgY3VyclRhc2sgPSBwaXBlbGluZS5oZWFkO1xuLy8gICAgIHdoaWxlIChjdXJyVGFzaykge1xuLy8gICAgICAgICB3aW5kb3cucHJpbnRUYXNrKGN1cnJUYXNrLCBwcmVmaXgpO1xuLy8gICAgICAgICBjdXJyVGFzayA9IGN1cnJUYXNrLl9kb3duc3RyZWFtO1xuLy8gICAgIH1cbi8vIH07XG4vLyB3aW5kb3cuc2hvd0NoYWluID0gZnVuY3Rpb24gKGNoYWluSGVhZFRhc2spIHtcbi8vICAgICB2YXIgY2hhaW4gPSBbXTtcbi8vICAgICB2YXIgdGFzayA9IGNoYWluSGVhZFRhc2s7XG4vLyAgICAgd2hpbGUgKHRhc2spIHtcbi8vICAgICAgICAgY2hhaW4ucHVzaCh7XG4vLyAgICAgICAgICAgICB0YXNrOiB0YXNrLFxuLy8gICAgICAgICAgICAgdXA6IHRhc2suX3Vwc3RyZWFtLFxuLy8gICAgICAgICAgICAgZG93bjogdGFzay5fZG93bnN0cmVhbSxcbi8vICAgICAgICAgICAgIGlkeEluUGlwZWxpbmU6IHRhc2suX19pZHhJblBpcGVsaW5lXG4vLyAgICAgICAgIH0pO1xuLy8gICAgICAgICB0YXNrID0gdGFzay5fZG93bnN0cmVhbTtcbi8vICAgICB9XG4vLyAgICAgcmV0dXJuIGNoYWluO1xuLy8gfTtcbi8vIHdpbmRvdy5maW5kVGFza0luQ2hhaW4gPSBmdW5jdGlvbiAodGFzaywgY2hhaW5IZWFkVGFzaykge1xuLy8gICAgIGxldCBjaGFpbiA9IHdpbmRvdy5zaG93Q2hhaW4oY2hhaW5IZWFkVGFzayk7XG4vLyAgICAgbGV0IHJlc3VsdCA9IFtdO1xuLy8gICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhaW4ubGVuZ3RoOyBpKyspIHtcbi8vICAgICAgICAgbGV0IGNoYWluSXRlbSA9IGNoYWluW2ldO1xuLy8gICAgICAgICBpZiAoY2hhaW5JdGVtLnRhc2sgPT09IHRhc2spIHtcbi8vICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGkpO1xuLy8gICAgICAgICB9XG4vLyAgICAgfVxuLy8gICAgIHJldHVybiByZXN1bHQ7XG4vLyB9O1xuLy8gd2luZG93LnByaW50Q2hhaW5BRWFjaEluQ2hhaW5CID0gZnVuY3Rpb24gKGNoYWluSGVhZFRhc2tBLCBjaGFpbkhlYWRUYXNrQikge1xuLy8gICAgIGxldCBjaGFpbkEgPSB3aW5kb3cuc2hvd0NoYWluKGNoYWluSGVhZFRhc2tBKTtcbi8vICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYWluQS5sZW5ndGg7IGkrKykge1xuLy8gICAgICAgICBjb25zb2xlLmxvZygnY2hhaW5BSWR4OicsIGksICdpbkNoYWluQjonLCB3aW5kb3cuZmluZFRhc2tJbkNoYWluKGNoYWluQVtpXS50YXNrLCBjaGFpbkhlYWRUYXNrQikpO1xuLy8gICAgIH1cbi8vIH07IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgeyBwYXJzZURhdGUsIG51bWVyaWNUb051bWJlciB9IGZyb20gJy4uLy4uL3V0aWwvbnVtYmVyLmpzJztcbmltcG9ydCB7IGNyZWF0ZUhhc2hNYXAsIHRyaW0sIGhhc093biwgaXNTdHJpbmcsIGlzTnVtYmVyIH0gZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbmltcG9ydCB7IHRocm93RXJyb3IgfSBmcm9tICcuLi8uLi91dGlsL2xvZy5qcyc7XG4vKipcclxuICogQ29udmVydCByYXcgdGhlIHZhbHVlIGluIHRvIGlubmVyIHZhbHVlIGluIExpc3QuXHJcbiAqXHJcbiAqIFtQZXJmb3JtYW5jZSBzZW5zaXRpdmVdXHJcbiAqXHJcbiAqIFtDYXV0aW9uXTogdGhpcyBpcyB0aGUga2V5IGxvZ2ljIG9mIHVzZXIgdmFsdWUgcGFyc2VyLlxyXG4gKiBGb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgZG8gbm90IG1vZGlmeSBpdCB1bnRpbCB5b3UgaGF2ZSB0byFcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURhdGFWYWx1ZSh2YWx1ZSwgLy8gRm9yIGhpZ2ggcGVyZm9ybWFuY2UsIGRvIG5vdCBvbWl0IHRoZSBzZWNvbmQgcGFyYW0uXG5vcHQpIHtcbiAgLy8gUGVyZm9ybWFuY2Ugc2Vuc2l0aXZlLlxuICB2YXIgZGltVHlwZSA9IG9wdCAmJiBvcHQudHlwZTtcblxuICBpZiAoZGltVHlwZSA9PT0gJ29yZGluYWwnKSB7XG4gICAgLy8gSWYgZ2l2ZW4gdmFsdWUgaXMgYSBjYXRlZ29yeSBzdHJpbmdcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICBpZiAoZGltVHlwZSA9PT0gJ3RpbWUnIC8vIHNwZWFkIHVwIHdoZW4gdXNpbmcgdGltZXN0YW1wXG4gICYmICFpc051bWJlcih2YWx1ZSkgJiYgdmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSAhPT0gJy0nKSB7XG4gICAgdmFsdWUgPSArcGFyc2VEYXRlKHZhbHVlKTtcbiAgfSAvLyBkaW1UeXBlIGRlZmF1bHRzICdudW1iZXInLlxuICAvLyBJZiBkaW1UeXBlIGlzIG5vdCBvcmRpbmFsIGFuZCB2YWx1ZSBpcyBudWxsIG9yIHVuZGVmaW5lZCBvciBOYU4gb3IgJy0nLFxuICAvLyBwYXJzZSB0byBOYU4uXG4gIC8vIG51bWJlci1saWtlIHN0cmluZyAobGlrZSAnIDEyMyAnKSBjYW4gYmUgY29udmVydGVkIHRvIGEgbnVtYmVyLlxuICAvLyB3aGVyZSBudWxsL3VuZGVmaW5lZCBvciBvdGhlciBzdHJpbmcgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gTmFOLlxuXG5cbiAgcmV0dXJuIHZhbHVlID09IG51bGwgfHwgdmFsdWUgPT09ICcnID8gTmFOIC8vIElmIHN0cmluZyAobGlrZSAnLScpLCB1c2luZyAnKycgcGFyc2UgdG8gTmFOXG4gIC8vIElmIG9iamVjdCwgYWxzbyBwYXJzZSB0byBOYU5cbiAgOiArdmFsdWU7XG59XG47XG52YXIgdmFsdWVQYXJzZXJNYXAgPSBjcmVhdGVIYXNoTWFwKHtcbiAgJ251bWJlcic6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAvLyBEbyBub3QgdXNlIGBudW1lcmljVG9OdW1iZXJgIGhlcmUuIFdlIGhhdmUgYG51bWVyaWNUb051bWJlcmAgYnkgZGVmYXVsdC5cbiAgICAvLyBIZXJlIHRoZSBudW1iZXIgcGFyc2VyIGNhbiBoYXZlIGxvb3NlIHJ1bGU6XG4gICAgLy8gZW5hYmxlIHRvIGN1dCBzdWZmaXg6IFwiMTIwcHhcIiA9PiAxMjAsIFwiMTQlXCIgPT4gMTQuXG4gICAgcmV0dXJuIHBhcnNlRmxvYXQodmFsKTtcbiAgfSxcbiAgJ3RpbWUnOiBmdW5jdGlvbiAodmFsKSB7XG4gICAgLy8gcmV0dXJuIHRpbWVzdGFtcC5cbiAgICByZXR1cm4gK3BhcnNlRGF0ZSh2YWwpO1xuICB9LFxuICAndHJpbSc6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICByZXR1cm4gaXNTdHJpbmcodmFsKSA/IHRyaW0odmFsKSA6IHZhbDtcbiAgfVxufSk7XG5leHBvcnQgZnVuY3Rpb24gZ2V0UmF3VmFsdWVQYXJzZXIodHlwZSkge1xuICByZXR1cm4gdmFsdWVQYXJzZXJNYXAuZ2V0KHR5cGUpO1xufVxudmFyIE9SREVSX0NPTVBBUklTT05fT1BfTUFQID0ge1xuICBsdDogZnVuY3Rpb24gKGx2YWwsIHJ2YWwpIHtcbiAgICByZXR1cm4gbHZhbCA8IHJ2YWw7XG4gIH0sXG4gIGx0ZTogZnVuY3Rpb24gKGx2YWwsIHJ2YWwpIHtcbiAgICByZXR1cm4gbHZhbCA8PSBydmFsO1xuICB9LFxuICBndDogZnVuY3Rpb24gKGx2YWwsIHJ2YWwpIHtcbiAgICByZXR1cm4gbHZhbCA+IHJ2YWw7XG4gIH0sXG4gIGd0ZTogZnVuY3Rpb24gKGx2YWwsIHJ2YWwpIHtcbiAgICByZXR1cm4gbHZhbCA+PSBydmFsO1xuICB9XG59O1xuXG52YXIgRmlsdGVyT3JkZXJDb21wYXJhdG9yID1cbi8qKiBAY2xhc3MgKi9cbmZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRmlsdGVyT3JkZXJDb21wYXJhdG9yKG9wLCBydmFsKSB7XG4gICAgaWYgKCFpc051bWJlcihydmFsKSkge1xuICAgICAgdmFyIGVyck1zZyA9ICcnO1xuXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBlcnJNc2cgPSAncnZhbHVlIG9mIFwiPFwiLCBcIj5cIiwgXCI8PVwiLCBcIj49XCIgY2FuIG9ubHkgYmUgbnVtYmVyIGluIGZpbHRlci4nO1xuICAgICAgfVxuXG4gICAgICB0aHJvd0Vycm9yKGVyck1zZyk7XG4gICAgfVxuXG4gICAgdGhpcy5fb3BGbiA9IE9SREVSX0NPTVBBUklTT05fT1BfTUFQW29wXTtcbiAgICB0aGlzLl9ydmFsRmxvYXQgPSBudW1lcmljVG9OdW1iZXIocnZhbCk7XG4gIH0gLy8gUGVyZm9ybWFuY2Ugc2Vuc2l0aXZlLlxuXG5cbiAgRmlsdGVyT3JkZXJDb21wYXJhdG9yLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uIChsdmFsKSB7XG4gICAgLy8gTW9zdCBjYXNlcyBpcyAnbnVtYmVyJywgYW5kIHR5cGVvZiBtYXliZSAxMCB0aW1lcyBmYXNldGVyIHRoYW4gcGFyc2VGbG9hdC5cbiAgICByZXR1cm4gaXNOdW1iZXIobHZhbCkgPyB0aGlzLl9vcEZuKGx2YWwsIHRoaXMuX3J2YWxGbG9hdCkgOiB0aGlzLl9vcEZuKG51bWVyaWNUb051bWJlcihsdmFsKSwgdGhpcy5fcnZhbEZsb2F0KTtcbiAgfTtcblxuICByZXR1cm4gRmlsdGVyT3JkZXJDb21wYXJhdG9yO1xufSgpO1xuXG52YXIgU29ydE9yZGVyQ29tcGFyYXRvciA9XG4vKiogQGNsYXNzICovXG5mdW5jdGlvbiAoKSB7XG4gIC8qKlxyXG4gICAqIEBwYXJhbSBvcmRlciBieSBkZWZhdWx0OiAnYXNjJ1xyXG4gICAqIEBwYXJhbSBpbmNvbXBhcmFibGUgYnkgZGVmYXVsdDogQWx3YXlzIG9uIHRoZSB0YWlsLlxyXG4gICAqICAgICAgICBUaGF0IGlzLCBpZiAnYXNjJyA9PiAnbWF4JywgaWYgJ2Rlc2MnID0+ICdtaW4nXHJcbiAgICogICAgICAgIFNlZSB0aGUgZGVmaW5pdGlvbiBvZiBcImluY29tcGFyYWJsZVwiIGluIFtTT1JUX0NPTVBBUklTT05fUlVMRV0uXHJcbiAgICovXG4gIGZ1bmN0aW9uIFNvcnRPcmRlckNvbXBhcmF0b3Iob3JkZXIsIGluY29tcGFyYWJsZSkge1xuICAgIHZhciBpc0Rlc2MgPSBvcmRlciA9PT0gJ2Rlc2MnO1xuICAgIHRoaXMuX3Jlc3VsdExUID0gaXNEZXNjID8gMSA6IC0xO1xuXG4gICAgaWYgKGluY29tcGFyYWJsZSA9PSBudWxsKSB7XG4gICAgICBpbmNvbXBhcmFibGUgPSBpc0Rlc2MgPyAnbWluJyA6ICdtYXgnO1xuICAgIH1cblxuICAgIHRoaXMuX2luY29tcGFyYWJsZSA9IGluY29tcGFyYWJsZSA9PT0gJ21pbicgPyAtSW5maW5pdHkgOiBJbmZpbml0eTtcbiAgfSAvLyBTZWUgW1NPUlRfQ09NUEFSSVNPTl9SVUxFXS5cbiAgLy8gUGVyZm9ybWFuY2Ugc2Vuc2l0aXZlLlxuXG5cbiAgU29ydE9yZGVyQ29tcGFyYXRvci5wcm90b3R5cGUuZXZhbHVhdGUgPSBmdW5jdGlvbiAobHZhbCwgcnZhbCkge1xuICAgIC8vIE1vc3QgY2FzZXMgaXMgJ251bWJlcicsIGFuZCB0eXBlb2YgbWF5YmUgMTAgdGltZXMgZmFzZXRlciB0aGFuIHBhcnNlRmxvYXQuXG4gICAgdmFyIGx2YWxGbG9hdCA9IGlzTnVtYmVyKGx2YWwpID8gbHZhbCA6IG51bWVyaWNUb051bWJlcihsdmFsKTtcbiAgICB2YXIgcnZhbEZsb2F0ID0gaXNOdW1iZXIocnZhbCkgPyBydmFsIDogbnVtZXJpY1RvTnVtYmVyKHJ2YWwpO1xuICAgIHZhciBsdmFsTm90TnVtZXJpYyA9IGlzTmFOKGx2YWxGbG9hdCk7XG4gICAgdmFyIHJ2YWxOb3ROdW1lcmljID0gaXNOYU4ocnZhbEZsb2F0KTtcblxuICAgIGlmIChsdmFsTm90TnVtZXJpYykge1xuICAgICAgbHZhbEZsb2F0ID0gdGhpcy5faW5jb21wYXJhYmxlO1xuICAgIH1cblxuICAgIGlmIChydmFsTm90TnVtZXJpYykge1xuICAgICAgcnZhbEZsb2F0ID0gdGhpcy5faW5jb21wYXJhYmxlO1xuICAgIH1cblxuICAgIGlmIChsdmFsTm90TnVtZXJpYyAmJiBydmFsTm90TnVtZXJpYykge1xuICAgICAgdmFyIGx2YWxJc1N0ciA9IGlzU3RyaW5nKGx2YWwpO1xuICAgICAgdmFyIHJ2YWxJc1N0ciA9IGlzU3RyaW5nKHJ2YWwpO1xuXG4gICAgICBpZiAobHZhbElzU3RyKSB7XG4gICAgICAgIGx2YWxGbG9hdCA9IHJ2YWxJc1N0ciA/IGx2YWwgOiAwO1xuICAgICAgfVxuXG4gICAgICBpZiAocnZhbElzU3RyKSB7XG4gICAgICAgIHJ2YWxGbG9hdCA9IGx2YWxJc1N0ciA/IHJ2YWwgOiAwO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBsdmFsRmxvYXQgPCBydmFsRmxvYXQgPyB0aGlzLl9yZXN1bHRMVCA6IGx2YWxGbG9hdCA+IHJ2YWxGbG9hdCA/IC10aGlzLl9yZXN1bHRMVCA6IDA7XG4gIH07XG5cbiAgcmV0dXJuIFNvcnRPcmRlckNvbXBhcmF0b3I7XG59KCk7XG5cbmV4cG9ydCB7IFNvcnRPcmRlckNvbXBhcmF0b3IgfTtcblxudmFyIEZpbHRlckVxdWFsaXR5Q29tcGFyYXRvciA9XG4vKiogQGNsYXNzICovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEZpbHRlckVxdWFsaXR5Q29tcGFyYXRvcihpc0VxLCBydmFsKSB7XG4gICAgdGhpcy5fcnZhbCA9IHJ2YWw7XG4gICAgdGhpcy5faXNFUSA9IGlzRXE7XG4gICAgdGhpcy5fcnZhbFR5cGVvZiA9IHR5cGVvZiBydmFsO1xuICAgIHRoaXMuX3J2YWxGbG9hdCA9IG51bWVyaWNUb051bWJlcihydmFsKTtcbiAgfSAvLyBQZXJmb3JtYW5jZSBzZW5zaXRpdmUuXG5cblxuICBGaWx0ZXJFcXVhbGl0eUNvbXBhcmF0b3IucHJvdG90eXBlLmV2YWx1YXRlID0gZnVuY3Rpb24gKGx2YWwpIHtcbiAgICB2YXIgZXFSZXN1bHQgPSBsdmFsID09PSB0aGlzLl9ydmFsO1xuXG4gICAgaWYgKCFlcVJlc3VsdCkge1xuICAgICAgdmFyIGx2YWxUeXBlb2YgPSB0eXBlb2YgbHZhbDtcblxuICAgICAgaWYgKGx2YWxUeXBlb2YgIT09IHRoaXMuX3J2YWxUeXBlb2YgJiYgKGx2YWxUeXBlb2YgPT09ICdudW1iZXInIHx8IHRoaXMuX3J2YWxUeXBlb2YgPT09ICdudW1iZXInKSkge1xuICAgICAgICBlcVJlc3VsdCA9IG51bWVyaWNUb051bWJlcihsdmFsKSA9PT0gdGhpcy5fcnZhbEZsb2F0O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9pc0VRID8gZXFSZXN1bHQgOiAhZXFSZXN1bHQ7XG4gIH07XG5cbiAgcmV0dXJuIEZpbHRlckVxdWFsaXR5Q29tcGFyYXRvcjtcbn0oKTtcbi8qKlxyXG4gKiBbRklMVEVSX0NPTVBBUklTT05fUlVMRV1cclxuICogYGx0YHxgbHRlYHxgZ3RgfGBndGVgOlxyXG4gKiArIHJ2YWwgbXVzdCBiZSBhIG51bWJlci4gQW5kIGx2YWwgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gbnVtYmVyIChgbnVtZXJpY1RvTnVtYmVyYCkgdG8gY29tcGFyZS5cclxuICogYGVxYDpcclxuICogKyBJZiBzYW1lIHR5cGUsIGNvbXBhcmUgd2l0aCBgPT09YC5cclxuICogKyBJZiB0aGVyZSBpcyBvbmUgbnVtYmVyLCBjb252ZXJ0IHRvIG51bWJlciAoYG51bWVyaWNUb051bWJlcmApIHRvIGNvbXBhcmUuXHJcbiAqICsgRWxzZSByZXR1cm4gYGZhbHNlYC5cclxuICogYG5lYDpcclxuICogKyBOb3QgYGVxYC5cclxuICpcclxuICpcclxuICogW1NPUlRfQ09NUEFSSVNPTl9SVUxFXVxyXG4gKiBBbGwgdGhlIHZhbHVlcyBhcmUgZ3JvdXBlZCBpbnRvIHRocmVlIGNhdGVnb3JpZXM6XHJcbiAqICsgXCJudW1lcmljXCIgKG51bWJlciBhbmQgbnVtZXJpYyBzdHJpbmcpXHJcbiAqICsgXCJub24tbnVtZXJpYy1zdHJpbmdcIiAoc3RyaW5nIHRoYXQgZXhjbHVkaW5nIG51bWVyaWMgc3RyaW5nKVxyXG4gKiArIFwib3RoZXJzXCJcclxuICogXCJudW1lcmljXCIgdnMgXCJudW1lcmljXCI6IHZhbHVlcyBhcmUgb3JkZXJlZCBieSBudW1iZXIgb3JkZXIuXHJcbiAqIFwibm9uLW51bWVyaWMtc3RyaW5nXCIgdnMgXCJub24tbnVtZXJpYy1zdHJpbmdcIjogdmFsdWVzIGFyZSBvcmRlcmVkIGJ5IEVTIHNwZWMgKCNzZWMtYWJzdHJhY3QtcmVsYXRpb25hbC1jb21wYXJpc29uKS5cclxuICogXCJvdGhlcnNcIiB2cyBcIm90aGVyc1wiOiBkbyBub3QgY2hhbmdlIG9yZGVyIChhbHdheXMgcmV0dXJuIDApLlxyXG4gKiBcIm51bWVyaWNcIiB2cyBcIm5vbi1udW1lcmljLXN0cmluZ1wiOiBcIm5vbi1udW1lcmljLXN0cmluZ1wiIGlzIHRyZWF0ZWQgYXMgXCJpbmNvbXBhcmFibGVcIi5cclxuICogXCJudW1iZXJcIiB2cyBcIm90aGVyc1wiOiBcIm90aGVyc1wiIGlzIHRyZWF0ZWQgYXMgXCJpbmNvbXBhcmFibGVcIi5cclxuICogXCJub24tbnVtZXJpYy1zdHJpbmdcIiB2cyBcIm90aGVyc1wiOiBcIm90aGVyc1wiIGlzIHRyZWF0ZWQgYXMgXCJpbmNvbXBhcmFibGVcIi5cclxuICogXCJpbmNvbXBhcmFibGVcIiB3aWxsIGJlIHNlZW4gYXMgLUluZmluaXR5IG9yIEluZmluaXR5IChkZXBlbmRzIG9uIHRoZSBzZXR0aW5ncykuXHJcbiAqIE1FTU86XHJcbiAqICAgTm9uLW51bWVyaWMgc3RyaW5nIHNvcnQgbWFrZXMgc2Vuc2Ugd2hlbiB3ZSBuZWVkIHRvIHB1dCB0aGUgaXRlbXMgd2l0aCB0aGUgc2FtZSB0YWcgdG9nZXRoZXIuXHJcbiAqICAgQnV0IGlmIHdlIHN1cHBvcnQgc3RyaW5nIHNvcnQsIHdlIHN0aWxsIG5lZWQgdG8gYXZvaWQgdGhlIG1pc2xlYWRpbmcgbGlrZSBgJzInID4gJzEyJ2AsXHJcbiAqICAgU28gd2UgdHJlYXQgXCJudW1lcmljLXN0cmluZ1wiIHNvcnRlZCBieSBudW1iZXIgb3JkZXIgcmF0aGVyIHRoYW4gc3RyaW5nIGNvbXBhcmlzb24uXHJcbiAqXHJcbiAqXHJcbiAqIFtDSEVDS19MSVNUX09GX1RIRV9SVUxFX0RFU0lHTl1cclxuICogKyBEbyBub3Qgc3VwcG9ydCBzdHJpbmcgY29tcGFyaXNvbiB1bnRpbCByZXF1aXJlZC4gQW5kIGFsc28gbmVlZCB0b1xyXG4gKiAgIGF2b2lkIHRoZSBtaXNsZWFkaW5nIG9mIFwiMlwiID4gXCIxMlwiLlxyXG4gKiArIFNob3VsZCBhdm9pZCB0aGUgbWlzbGVhZGluZyBjYXNlOlxyXG4gKiAgIGBcIiAyMiBcIiBndGUgXCIyMlwiYCBpcyBgdHJ1ZWAgYnV0IGBcIiAyMiBcIiBlcSBcIjIyXCJgIGlzIGBmYWxzZWAuXHJcbiAqICsgSlMgYmFkIGNhc2Ugc2hvdWxkIGJlIGF2b2lkZWQ6IG51bGwgPD0gMCwgW10gPD0gMCwgJyAnIDw9IDAsIC4uLlxyXG4gKiArIE9ubHkgXCJudW1lcmljXCIgY2FuIGJlIGNvbnZlcnRlZCB0byBjb21wYXJhYmxlIG51bWJlciwgb3RoZXJ3aXNlIGNvbnZlcnRlZCB0byBOYU4uXHJcbiAqICAgU2VlIGB1dGlsL251bWJlci50cyNudW1lcmljVG9OdW1iZXJgLlxyXG4gKlxyXG4gKiBAcmV0dXJuIElmIGBvcGAgaXMgbm90IGBSZWxhdGlvbmFsT3BlcmF0b3JgLCByZXR1cm4gbnVsbDtcclxuICovXG5cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZpbHRlckNvbXBhcmF0b3Iob3AsIHJ2YWwpIHtcbiAgcmV0dXJuIG9wID09PSAnZXEnIHx8IG9wID09PSAnbmUnID8gbmV3IEZpbHRlckVxdWFsaXR5Q29tcGFyYXRvcihvcCA9PT0gJ2VxJywgcnZhbCkgOiBoYXNPd24oT1JERVJfQ09NUEFSSVNPTl9PUF9NQVAsIG9wKSA/IG5ldyBGaWx0ZXJPcmRlckNvbXBhcmF0b3Iob3AsIHJ2YWwpIDogbnVsbDtcbn0iLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCB7IFNFUklFU19MQVlPVVRfQllfQ09MVU1OLCBTT1VSQ0VfRk9STUFUX09CSkVDVF9ST1dTLCBTT1VSQ0VfRk9STUFUX0FSUkFZX1JPV1MgfSBmcm9tICcuLi8uLi91dGlsL3R5cGVzLmpzJztcbmltcG9ydCB7IG5vcm1hbGl6ZVRvQXJyYXkgfSBmcm9tICcuLi8uLi91dGlsL21vZGVsLmpzJztcbmltcG9ydCB7IGNyZWF0ZUhhc2hNYXAsIGJpbmQsIGVhY2gsIGhhc093biwgbWFwLCBjbG9uZSwgaXNPYmplY3QsIGV4dGVuZCwgaXNOdW1iZXIgfSBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0IHsgZ2V0UmF3U291cmNlSXRlbUdldHRlciwgZ2V0UmF3U291cmNlRGF0YUNvdW50ZXIsIGdldFJhd1NvdXJjZVZhbHVlR2V0dGVyIH0gZnJvbSAnLi9kYXRhUHJvdmlkZXIuanMnO1xuaW1wb3J0IHsgcGFyc2VEYXRhVmFsdWUgfSBmcm9tICcuL2RhdGFWYWx1ZUhlbHBlci5qcyc7XG5pbXBvcnQgeyBsb2csIG1ha2VQcmludGFibGUsIHRocm93RXJyb3IgfSBmcm9tICcuLi8uLi91dGlsL2xvZy5qcyc7XG5pbXBvcnQgeyBjcmVhdGVTb3VyY2UsIGRldGVjdFNvdXJjZUZvcm1hdCB9IGZyb20gJy4uL1NvdXJjZS5qcyc7XG4vKipcclxuICogVE9ETzogZGlzYWJsZSB3cml0YWJsZS5cclxuICogVGhpcyBzdHJ1Y3R1cmUgd2lsbCBiZSBleHBvc2VkIHRvIHVzZXJzLlxyXG4gKi9cblxudmFyIEV4dGVybmFsU291cmNlID1cbi8qKiBAY2xhc3MgKi9cbmZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRXh0ZXJuYWxTb3VyY2UoKSB7fVxuXG4gIEV4dGVybmFsU291cmNlLnByb3RvdHlwZS5nZXRSYXdEYXRhID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIE9ubHkgYnVpbHQtaW4gdHJhbnNmb3JtIGF2YWlsYWJsZS5cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBzdXBwb3J0ZWQnKTtcbiAgfTtcblxuICBFeHRlcm5hbFNvdXJjZS5wcm90b3R5cGUuZ2V0UmF3RGF0YUl0ZW0gPSBmdW5jdGlvbiAoZGF0YUluZGV4KSB7XG4gICAgLy8gT25seSBidWlsdC1pbiB0cmFuc2Zvcm0gYXZhaWxhYmxlLlxuICAgIHRocm93IG5ldyBFcnJvcignbm90IHN1cHBvcnRlZCcpO1xuICB9O1xuXG4gIEV4dGVybmFsU291cmNlLnByb3RvdHlwZS5jbG9uZVJhd0RhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuO1xuICB9O1xuICAvKipcclxuICAgKiBAcmV0dXJuIElmIGRpbWVuc2lvbiBub3QgZm91bmQsIHJldHVybiBudWxsL3VuZGVmaW5lZC5cclxuICAgKi9cblxuXG4gIEV4dGVybmFsU291cmNlLnByb3RvdHlwZS5nZXREaW1lbnNpb25JbmZvID0gZnVuY3Rpb24gKGRpbSkge1xuICAgIHJldHVybjtcbiAgfTtcbiAgLyoqXHJcbiAgICogZGltZW5zaW9ucyBkZWZpbmVkIGlmIGFuZCBvbmx5IGlmIGVpdGhlcjpcclxuICAgKiAoYSkgZGF0YXNldC5kaW1lbnNpb25zIGFyZSBkZWNsYXJlZC5cclxuICAgKiAoYikgZGF0YXNldCBkYXRhIGluY2x1ZGUgZGltZW5zaW9ucyBkZWZpbml0aW9ucyBpbiBkYXRhIChkZXRlY3RlZCBvciB2aWEgc3BlY2lmaWVkIGBzb3VyY2VIZWFkZXJgKS5cclxuICAgKiBJZiBkaW1lbnNpb25zIGFyZSBkZWZpbmVkLCBgZGltZW5zaW9uSW5mb0FsbGAgaXMgY29ycmVzcG9uZGluZyB0b1xyXG4gICAqIHRoZSBkZWZpbmVkIGRpbWVuc2lvbnMuXHJcbiAgICogT3RoZXJ3aXNlLCBgZGltZW5zaW9uSW5mb0FsbGAgaXMgZGV0ZXJtaW5lZCBieSBkYXRhIGNvbHVtbnMuXHJcbiAgICogQHJldHVybiBBbHdheXMgcmV0dXJuIGFuIGFycmF5IChldmVuIGVtcHR5IGFycmF5KS5cclxuICAgKi9cblxuXG4gIEV4dGVybmFsU291cmNlLnByb3RvdHlwZS5jbG9uZUFsbERpbWVuc2lvbkluZm8gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuO1xuICB9O1xuXG4gIEV4dGVybmFsU291cmNlLnByb3RvdHlwZS5jb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm47XG4gIH07XG4gIC8qKlxyXG4gICAqIE9ubHkgc3VwcG9ydCBieSBkaW1lbnNpb24gaW5kZXguXHJcbiAgICogTm8gbmVlZCB0byBzdXBwb3J0IGJ5IGRpbWVuc2lvbiBuYW1lIGluIHRyYW5zZm9ybSBmdW5jdGlvbixcclxuICAgKiBiZWNhdXNlIHRyYW5zZm9ybSBmdW5jdGlvbiBpcyBub3QgY2FzZS1zcGVjaWZpYywgbm8gbmVlZCB0byB1c2UgbmFtZSBsaXRlcmFsbHkuXHJcbiAgICovXG5cblxuICBFeHRlcm5hbFNvdXJjZS5wcm90b3R5cGUucmV0cmlldmVWYWx1ZSA9IGZ1bmN0aW9uIChkYXRhSW5kZXgsIGRpbUluZGV4KSB7XG4gICAgcmV0dXJuO1xuICB9O1xuXG4gIEV4dGVybmFsU291cmNlLnByb3RvdHlwZS5yZXRyaWV2ZVZhbHVlRnJvbUl0ZW0gPSBmdW5jdGlvbiAoZGF0YUl0ZW0sIGRpbUluZGV4KSB7XG4gICAgcmV0dXJuO1xuICB9O1xuXG4gIEV4dGVybmFsU291cmNlLnByb3RvdHlwZS5jb252ZXJ0VmFsdWUgPSBmdW5jdGlvbiAocmF3VmFsLCBkaW1JbmZvKSB7XG4gICAgcmV0dXJuIHBhcnNlRGF0YVZhbHVlKHJhd1ZhbCwgZGltSW5mbyk7XG4gIH07XG5cbiAgcmV0dXJuIEV4dGVybmFsU291cmNlO1xufSgpO1xuXG5leHBvcnQgeyBFeHRlcm5hbFNvdXJjZSB9O1xuXG5mdW5jdGlvbiBjcmVhdGVFeHRlcm5hbFNvdXJjZShpbnRlcm5hbFNvdXJjZSwgZXh0ZXJuYWxUcmFuc2Zvcm0pIHtcbiAgdmFyIGV4dFNvdXJjZSA9IG5ldyBFeHRlcm5hbFNvdXJjZSgpO1xuICB2YXIgZGF0YSA9IGludGVybmFsU291cmNlLmRhdGE7XG4gIHZhciBzb3VyY2VGb3JtYXQgPSBleHRTb3VyY2Uuc291cmNlRm9ybWF0ID0gaW50ZXJuYWxTb3VyY2Uuc291cmNlRm9ybWF0O1xuICB2YXIgc291cmNlSGVhZGVyQ291bnQgPSBpbnRlcm5hbFNvdXJjZS5zdGFydEluZGV4O1xuICB2YXIgZXJyTXNnID0gJyc7XG5cbiAgaWYgKGludGVybmFsU291cmNlLnNlcmllc0xheW91dEJ5ICE9PSBTRVJJRVNfTEFZT1VUX0JZX0NPTFVNTikge1xuICAgIC8vIEZvciB0aGUgbG9naWMgc2ltcGxpY2l0eSBpbiB0cmFuc2Zvcm1lciwgb25seSAnY3VsdW1uJyBpc1xuICAgIC8vIHN1cHBvcnRlZCBpbiBkYXRhIHRyYW5zZm9ybS4gT3RoZXJ3aXNlLCB0aGUgYGRpbWVuc2lvbnNEZWZpbmVgXG4gICAgLy8gbWlnaHQgYmUgZGV0ZWN0ZWQgYnkgJ3JvdycsIHdoaWNoIHByb2JhYmx5IGNvbmZ1c2VzIHVzZXJzLlxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBlcnJNc2cgPSAnYHNlcmllc0xheW91dEJ5YCBvZiB1cHN0cmVhbSBkYXRhc2V0IGNhbiBvbmx5IGJlIFwiY29sdW1uXCIgaW4gZGF0YSB0cmFuc2Zvcm0uJztcbiAgICB9XG5cbiAgICB0aHJvd0Vycm9yKGVyck1zZyk7XG4gIH0gLy8gW01FTU9dXG4gIC8vIENyZWF0ZSBhIG5ldyBkaW1lbnNpb25zIHN0cnVjdHVyZSBmb3IgZXhwb3NpbmcuXG4gIC8vIERvIG5vdCBleHBvc2UgYWxsIGRpbWVuc2lvbiBpbmZvIHRvIHVzZXJzIGRpcmVjdGx5LlxuICAvLyBCZWNhdXNlIHRoZSBkaW1lbnNpb24gaXMgcHJvYmFibHkgYXV0byBkZXRlY3RlZCBmcm9tIGRhdGEgYW5kIG5vdCBtaWdodCByZWxpYWJsZS5cbiAgLy8gU2hvdWxkIG5vdCBsZWFkIHRoZSB0cmFuc2Zvcm1lcnMgdG8gdGhpbmsgdGhhdCBpcyByZWxpYWJsZSBhbmQgcmV0dXJuIGl0LlxuICAvLyBTZWUgW0RJTUVOU0lPTl9JTkhFUklUX1JVTEVdIGluIGBzb3VyY2VNYW5hZ2VyLnRzYC5cblxuXG4gIHZhciBkaW1lbnNpb25zID0gW107XG4gIHZhciBkaW1zQnlOYW1lID0ge307XG4gIHZhciBkaW1zRGVmID0gaW50ZXJuYWxTb3VyY2UuZGltZW5zaW9uc0RlZmluZTtcblxuICBpZiAoZGltc0RlZikge1xuICAgIGVhY2goZGltc0RlZiwgZnVuY3Rpb24gKGRpbURlZiwgaWR4KSB7XG4gICAgICB2YXIgbmFtZSA9IGRpbURlZi5uYW1lO1xuICAgICAgdmFyIGRpbURlZkV4dCA9IHtcbiAgICAgICAgaW5kZXg6IGlkeCxcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgZGlzcGxheU5hbWU6IGRpbURlZi5kaXNwbGF5TmFtZVxuICAgICAgfTtcbiAgICAgIGRpbWVuc2lvbnMucHVzaChkaW1EZWZFeHQpOyAvLyBVc2VycyBwcm9iYWJseSBkbyBub3Qgc3BlY2lmeSBkaW1lbnNpb24gbmFtZS4gRm9yIHNpbXBsaWNpdHksIGRhdGEgdHJhbnNmb3JtXG4gICAgICAvLyBkb2VzIG5vdCBnZW5lcmF0ZSBkaW1lbnNpb24gbmFtZS5cblxuICAgICAgaWYgKG5hbWUgIT0gbnVsbCkge1xuICAgICAgICAvLyBEaW1lbnNpb24gbmFtZSBzaG91bGQgbm90IGJlIGR1cGxpY2F0ZWQuXG4gICAgICAgIC8vIEZvciBzaW1wbGljaXR5LCBkYXRhIHRyYW5zZm9ybSBmb3JiaWRzIG5hbWUgZHVwbGljYXRpb24sIGRvIG5vdCBnZW5lcmF0ZVxuICAgICAgICAvLyBuZXcgbmFtZSBsaWtlIG1vZHVsZSBgY29tcGxldGVEaW1lbnNpb25zLnRzYCBkaWQsIGJ1dCBqdXN0IHRlbGwgdXNlcnMuXG4gICAgICAgIHZhciBlcnJNc2dfMSA9ICcnO1xuXG4gICAgICAgIGlmIChoYXNPd24oZGltc0J5TmFtZSwgbmFtZSkpIHtcbiAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgZXJyTXNnXzEgPSAnZGltZW5zaW9uIG5hbWUgXCInICsgbmFtZSArICdcIiBkdXBsaWNhdGVkLic7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhyb3dFcnJvcihlcnJNc2dfMSk7XG4gICAgICAgIH1cblxuICAgICAgICBkaW1zQnlOYW1lW25hbWVdID0gZGltRGVmRXh0O1xuICAgICAgfVxuICAgIH0pO1xuICB9IC8vIElmIGRpbWVuc2lvbiBkZWZpbml0aW9ucyBhcmUgbm90IGRlZmluZWQgYW5kIGNhbiBub3QgYmUgZGV0ZWN0ZWQuXG4gIC8vIGUuZy4sIHB1cmUgZGF0YSBgW1sxMSwgMjJdLCAuLi5dYC5cbiAgZWxzZSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGludGVybmFsU291cmNlLmRpbWVuc2lvbnNEZXRlY3RlZENvdW50IHx8IDA7IGkrKykge1xuICAgICAgICAvLyBEbyBub3QgZ2VuZXJldGUgbmFtZSBvciBhbnl0aGluZyBvdGhlcnMuIFRoZSBjb25zZXF1ZW5jZSBwcm9jZXNzIGluXG4gICAgICAgIC8vIGB0cmFuc2Zvcm1gIG9yIGBzZXJpZXNgIHByb2JhYmx5IGhhdmUgdGhlcmUgb3duIG5hbWUgZ2VuZXJhdGlvbiBzdHJhdGVncnkuXG4gICAgICAgIGRpbWVuc2lvbnMucHVzaCh7XG4gICAgICAgICAgaW5kZXg6IGlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSAvLyBJbXBsZW1lbnQgcHVibGljIG1ldGhvZHM6XG5cblxuICB2YXIgcmF3SXRlbUdldHRlciA9IGdldFJhd1NvdXJjZUl0ZW1HZXR0ZXIoc291cmNlRm9ybWF0LCBTRVJJRVNfTEFZT1VUX0JZX0NPTFVNTik7XG5cbiAgaWYgKGV4dGVybmFsVHJhbnNmb3JtLl9faXNCdWlsdEluKSB7XG4gICAgZXh0U291cmNlLmdldFJhd0RhdGFJdGVtID0gZnVuY3Rpb24gKGRhdGFJbmRleCkge1xuICAgICAgcmV0dXJuIHJhd0l0ZW1HZXR0ZXIoZGF0YSwgc291cmNlSGVhZGVyQ291bnQsIGRpbWVuc2lvbnMsIGRhdGFJbmRleCk7XG4gICAgfTtcblxuICAgIGV4dFNvdXJjZS5nZXRSYXdEYXRhID0gYmluZChnZXRSYXdEYXRhLCBudWxsLCBpbnRlcm5hbFNvdXJjZSk7XG4gIH1cblxuICBleHRTb3VyY2UuY2xvbmVSYXdEYXRhID0gYmluZChjbG9uZVJhd0RhdGEsIG51bGwsIGludGVybmFsU291cmNlKTtcbiAgdmFyIHJhd0NvdW50ZXIgPSBnZXRSYXdTb3VyY2VEYXRhQ291bnRlcihzb3VyY2VGb3JtYXQsIFNFUklFU19MQVlPVVRfQllfQ09MVU1OKTtcbiAgZXh0U291cmNlLmNvdW50ID0gYmluZChyYXdDb3VudGVyLCBudWxsLCBkYXRhLCBzb3VyY2VIZWFkZXJDb3VudCwgZGltZW5zaW9ucyk7XG4gIHZhciByYXdWYWx1ZUdldHRlciA9IGdldFJhd1NvdXJjZVZhbHVlR2V0dGVyKHNvdXJjZUZvcm1hdCk7XG5cbiAgZXh0U291cmNlLnJldHJpZXZlVmFsdWUgPSBmdW5jdGlvbiAoZGF0YUluZGV4LCBkaW1JbmRleCkge1xuICAgIHZhciByYXdJdGVtID0gcmF3SXRlbUdldHRlcihkYXRhLCBzb3VyY2VIZWFkZXJDb3VudCwgZGltZW5zaW9ucywgZGF0YUluZGV4KTtcbiAgICByZXR1cm4gcmV0cmlldmVWYWx1ZUZyb21JdGVtKHJhd0l0ZW0sIGRpbUluZGV4KTtcbiAgfTtcblxuICB2YXIgcmV0cmlldmVWYWx1ZUZyb21JdGVtID0gZXh0U291cmNlLnJldHJpZXZlVmFsdWVGcm9tSXRlbSA9IGZ1bmN0aW9uIChkYXRhSXRlbSwgZGltSW5kZXgpIHtcbiAgICBpZiAoZGF0YUl0ZW0gPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBkaW1EZWYgPSBkaW1lbnNpb25zW2RpbUluZGV4XTsgLy8gV2hlbiBgZGltSW5kZXhgIGlzIGBudWxsYCwgYHJhd1ZhbHVlR2V0dGVyYCByZXR1cm4gdGhlIHdob2xlIGl0ZW0uXG5cbiAgICBpZiAoZGltRGVmKSB7XG4gICAgICByZXR1cm4gcmF3VmFsdWVHZXR0ZXIoZGF0YUl0ZW0sIGRpbUluZGV4LCBkaW1EZWYubmFtZSk7XG4gICAgfVxuICB9O1xuXG4gIGV4dFNvdXJjZS5nZXREaW1lbnNpb25JbmZvID0gYmluZChnZXREaW1lbnNpb25JbmZvLCBudWxsLCBkaW1lbnNpb25zLCBkaW1zQnlOYW1lKTtcbiAgZXh0U291cmNlLmNsb25lQWxsRGltZW5zaW9uSW5mbyA9IGJpbmQoY2xvbmVBbGxEaW1lbnNpb25JbmZvLCBudWxsLCBkaW1lbnNpb25zKTtcbiAgcmV0dXJuIGV4dFNvdXJjZTtcbn1cblxuZnVuY3Rpb24gZ2V0UmF3RGF0YSh1cHN0cmVhbSkge1xuICB2YXIgc291cmNlRm9ybWF0ID0gdXBzdHJlYW0uc291cmNlRm9ybWF0O1xuXG4gIGlmICghaXNTdXBwb3J0ZWRTb3VyY2VGb3JtYXQoc291cmNlRm9ybWF0KSkge1xuICAgIHZhciBlcnJNc2cgPSAnJztcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBlcnJNc2cgPSAnYGdldFJhd0RhdGFgIGlzIG5vdCBzdXBwb3J0ZWQgaW4gc291cmNlIGZvcm1hdCAnICsgc291cmNlRm9ybWF0O1xuICAgIH1cblxuICAgIHRocm93RXJyb3IoZXJyTXNnKTtcbiAgfVxuXG4gIHJldHVybiB1cHN0cmVhbS5kYXRhO1xufVxuXG5mdW5jdGlvbiBjbG9uZVJhd0RhdGEodXBzdHJlYW0pIHtcbiAgdmFyIHNvdXJjZUZvcm1hdCA9IHVwc3RyZWFtLnNvdXJjZUZvcm1hdDtcbiAgdmFyIGRhdGEgPSB1cHN0cmVhbS5kYXRhO1xuXG4gIGlmICghaXNTdXBwb3J0ZWRTb3VyY2VGb3JtYXQoc291cmNlRm9ybWF0KSkge1xuICAgIHZhciBlcnJNc2cgPSAnJztcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBlcnJNc2cgPSAnYGNsb25lUmF3RGF0YWAgaXMgbm90IHN1cHBvcnRlZCBpbiBzb3VyY2UgZm9ybWF0ICcgKyBzb3VyY2VGb3JtYXQ7XG4gICAgfVxuXG4gICAgdGhyb3dFcnJvcihlcnJNc2cpO1xuICB9XG5cbiAgaWYgKHNvdXJjZUZvcm1hdCA9PT0gU09VUkNFX0ZPUk1BVF9BUlJBWV9ST1dTKSB7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGRhdGEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIC8vIE5vdCBzdHJpY3RseSBjbG9uZSBmb3IgcGVyZm9ybWFuY2VcbiAgICAgIHJlc3VsdC5wdXNoKGRhdGFbaV0uc2xpY2UoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSBlbHNlIGlmIChzb3VyY2VGb3JtYXQgPT09IFNPVVJDRV9GT1JNQVRfT0JKRUNUX1JPV1MpIHtcbiAgICB2YXIgcmVzdWx0ID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZGF0YS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgLy8gTm90IHN0cmljdGx5IGNsb25lIGZvciBwZXJmb3JtYW5jZVxuICAgICAgcmVzdWx0LnB1c2goZXh0ZW5kKHt9LCBkYXRhW2ldKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXREaW1lbnNpb25JbmZvKGRpbWVuc2lvbnMsIGRpbXNCeU5hbWUsIGRpbSkge1xuICBpZiAoZGltID09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH0gLy8gS2VlcCB0aGUgc2FtZSBsb2dpYyBhcyBgTGlzdDo6Z2V0RGltZW5zaW9uYCBkaWQuXG5cblxuICBpZiAoaXNOdW1iZXIoZGltKSAvLyBJZiBiZWluZyBhIG51bWJlci1saWtlIHN0cmluZyBidXQgbm90IGJlaW5nIGRlZmluZWQgYSBkaW1lbnNpb24gbmFtZS5cbiAgfHwgIWlzTmFOKGRpbSkgJiYgIWhhc093bihkaW1zQnlOYW1lLCBkaW0pKSB7XG4gICAgcmV0dXJuIGRpbWVuc2lvbnNbZGltXTtcbiAgfSBlbHNlIGlmIChoYXNPd24oZGltc0J5TmFtZSwgZGltKSkge1xuICAgIHJldHVybiBkaW1zQnlOYW1lW2RpbV07XG4gIH1cbn1cblxuZnVuY3Rpb24gY2xvbmVBbGxEaW1lbnNpb25JbmZvKGRpbWVuc2lvbnMpIHtcbiAgcmV0dXJuIGNsb25lKGRpbWVuc2lvbnMpO1xufVxuXG52YXIgZXh0ZXJuYWxUcmFuc2Zvcm1NYXAgPSBjcmVhdGVIYXNoTWFwKCk7XG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJFeHRlcm5hbFRyYW5zZm9ybShleHRlcm5hbFRyYW5zZm9ybSkge1xuICBleHRlcm5hbFRyYW5zZm9ybSA9IGNsb25lKGV4dGVybmFsVHJhbnNmb3JtKTtcbiAgdmFyIHR5cGUgPSBleHRlcm5hbFRyYW5zZm9ybS50eXBlO1xuICB2YXIgZXJyTXNnID0gJyc7XG5cbiAgaWYgKCF0eXBlKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGVyck1zZyA9ICdNdXN0IGhhdmUgYSBgdHlwZWAgd2hlbiBgcmVnaXN0ZXJUcmFuc2Zvcm1gLic7XG4gICAgfVxuXG4gICAgdGhyb3dFcnJvcihlcnJNc2cpO1xuICB9XG5cbiAgdmFyIHR5cGVQYXJzZWQgPSB0eXBlLnNwbGl0KCc6Jyk7XG5cbiAgaWYgKHR5cGVQYXJzZWQubGVuZ3RoICE9PSAyKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGVyck1zZyA9ICdOYW1lIG11c3QgaW5jbHVkZSBuYW1lc3BhY2UgbGlrZSBcIm5zOnJlZ3Jlc3Npb25cIi4nO1xuICAgIH1cblxuICAgIHRocm93RXJyb3IoZXJyTXNnKTtcbiAgfSAvLyBOYW1lc3BhY2UgJ2VjaGFydHM6eHh4JyBpcyBvZmZpY2lhbCBuYW1lc3BhY2UsIHdoZXJlIHRoZSB0cmFuc2Zvcm1zIHNob3VsZFxuICAvLyBiZSBjYWxsZWQgZGlyZWN0bHkgdmlhICd4eHgnIHJhdGhlciB0aGFuICdlY2hhcnRzOnh4eCcuXG5cblxuICB2YXIgaXNCdWlsdEluID0gZmFsc2U7XG5cbiAgaWYgKHR5cGVQYXJzZWRbMF0gPT09ICdlY2hhcnRzJykge1xuICAgIHR5cGUgPSB0eXBlUGFyc2VkWzFdO1xuICAgIGlzQnVpbHRJbiA9IHRydWU7XG4gIH1cblxuICBleHRlcm5hbFRyYW5zZm9ybS5fX2lzQnVpbHRJbiA9IGlzQnVpbHRJbjtcbiAgZXh0ZXJuYWxUcmFuc2Zvcm1NYXAuc2V0KHR5cGUsIGV4dGVybmFsVHJhbnNmb3JtKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhcHBseURhdGFUcmFuc2Zvcm0ocmF3VHJhbnNPcHRpb24sIHNvdXJjZUxpc3QsIGluZm9Gb3JQcmludCkge1xuICB2YXIgcGlwZWRUcmFuc09wdGlvbiA9IG5vcm1hbGl6ZVRvQXJyYXkocmF3VHJhbnNPcHRpb24pO1xuICB2YXIgcGlwZUxlbiA9IHBpcGVkVHJhbnNPcHRpb24ubGVuZ3RoO1xuICB2YXIgZXJyTXNnID0gJyc7XG5cbiAgaWYgKCFwaXBlTGVuKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGVyck1zZyA9ICdJZiBgdHJhbnNmb3JtYCBkZWNsYXJlZCwgaXQgc2hvdWxkIGF0IGxlYXN0IGNvbnRhaW4gb25lIHRyYW5zZm9ybS4nO1xuICAgIH1cblxuICAgIHRocm93RXJyb3IoZXJyTXNnKTtcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBwaXBlTGVuOyBpIDwgbGVuOyBpKyspIHtcbiAgICB2YXIgdHJhbnNPcHRpb24gPSBwaXBlZFRyYW5zT3B0aW9uW2ldO1xuICAgIHNvdXJjZUxpc3QgPSBhcHBseVNpbmdsZURhdGFUcmFuc2Zvcm0odHJhbnNPcHRpb24sIHNvdXJjZUxpc3QsIGluZm9Gb3JQcmludCwgcGlwZUxlbiA9PT0gMSA/IG51bGwgOiBpKTsgLy8gcGlwZWQgdHJhbnNmb3JtIG9ubHkgc3VwcG9ydCBzaW5nbGUgaW5wdXQsIGV4Y2VwdCB0aGUgZmlzdCBvbmUuXG4gICAgLy8gcGlwZWQgdHJhbnNmb3JtIG9ubHkgc3VwcG9ydCBzaW5nbGUgb3V0cHV0LCBleGNlcHQgdGhlIGxhc3Qgb25lLlxuXG4gICAgaWYgKGkgIT09IGxlbiAtIDEpIHtcbiAgICAgIHNvdXJjZUxpc3QubGVuZ3RoID0gTWF0aC5tYXgoc291cmNlTGlzdC5sZW5ndGgsIDEpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzb3VyY2VMaXN0O1xufVxuXG5mdW5jdGlvbiBhcHBseVNpbmdsZURhdGFUcmFuc2Zvcm0odHJhbnNPcHRpb24sIHVwU291cmNlTGlzdCwgaW5mb0ZvclByaW50LCAvLyBJZiBgcGlwZUluZGV4YCBpcyBudWxsL3VuZGVmaW5lZCwgbm8gcGlwZWQgdHJhbnNmb3JtLlxucGlwZUluZGV4KSB7XG4gIHZhciBlcnJNc2cgPSAnJztcblxuICBpZiAoIXVwU291cmNlTGlzdC5sZW5ndGgpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgZXJyTXNnID0gJ011c3QgaGF2ZSBhdCBsZWFzdCBvbmUgdXBzdHJlYW0gZGF0YXNldC4nO1xuICAgIH1cblxuICAgIHRocm93RXJyb3IoZXJyTXNnKTtcbiAgfVxuXG4gIGlmICghaXNPYmplY3QodHJhbnNPcHRpb24pKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGVyck1zZyA9ICd0cmFuc2Zvcm0gZGVjbGFyYXRpb24gbXVzdCBiZSBhbiBvYmplY3QgcmF0aGVyIHRoYW4gJyArIHR5cGVvZiB0cmFuc09wdGlvbiArICcuJztcbiAgICB9XG5cbiAgICB0aHJvd0Vycm9yKGVyck1zZyk7XG4gIH1cblxuICB2YXIgdHJhbnNUeXBlID0gdHJhbnNPcHRpb24udHlwZTtcbiAgdmFyIGV4dGVybmFsVHJhbnNmb3JtID0gZXh0ZXJuYWxUcmFuc2Zvcm1NYXAuZ2V0KHRyYW5zVHlwZSk7XG5cbiAgaWYgKCFleHRlcm5hbFRyYW5zZm9ybSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBlcnJNc2cgPSAnQ2FuIG5vdCBmaW5kIHRyYW5zZm9ybSBvbiB0eXBlIFwiJyArIHRyYW5zVHlwZSArICdcIi4nO1xuICAgIH1cblxuICAgIHRocm93RXJyb3IoZXJyTXNnKTtcbiAgfSAvLyBQcmVwYXJlIHNvdXJjZVxuXG5cbiAgdmFyIGV4dFVwU291cmNlTGlzdCA9IG1hcCh1cFNvdXJjZUxpc3QsIGZ1bmN0aW9uICh1cFNvdXJjZSkge1xuICAgIHJldHVybiBjcmVhdGVFeHRlcm5hbFNvdXJjZSh1cFNvdXJjZSwgZXh0ZXJuYWxUcmFuc2Zvcm0pO1xuICB9KTtcbiAgdmFyIHJlc3VsdExpc3QgPSBub3JtYWxpemVUb0FycmF5KGV4dGVybmFsVHJhbnNmb3JtLnRyYW5zZm9ybSh7XG4gICAgdXBzdHJlYW06IGV4dFVwU291cmNlTGlzdFswXSxcbiAgICB1cHN0cmVhbUxpc3Q6IGV4dFVwU291cmNlTGlzdCxcbiAgICBjb25maWc6IGNsb25lKHRyYW5zT3B0aW9uLmNvbmZpZylcbiAgfSkpO1xuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKHRyYW5zT3B0aW9uLnByaW50KSB7XG4gICAgICB2YXIgcHJpbnRTdHJBcnIgPSBtYXAocmVzdWx0TGlzdCwgZnVuY3Rpb24gKGV4dFNvdXJjZSkge1xuICAgICAgICB2YXIgcGlwZUluZGV4U3RyID0gcGlwZUluZGV4ICE9IG51bGwgPyAnID09PSBwaXBlIGluZGV4OiAnICsgcGlwZUluZGV4IDogJyc7XG4gICAgICAgIHJldHVybiBbJz09PSBkYXRhc2V0IGluZGV4OiAnICsgaW5mb0ZvclByaW50LmRhdGFzZXRJbmRleCArIHBpcGVJbmRleFN0ciArICcgPT09JywgJy0gdHJhbnNmb3JtIHJlc3VsdCBkYXRhOicsIG1ha2VQcmludGFibGUoZXh0U291cmNlLmRhdGEpLCAnLSB0cmFuc2Zvcm0gcmVzdWx0IGRpbWVuc2lvbnM6JywgbWFrZVByaW50YWJsZShleHRTb3VyY2UuZGltZW5zaW9ucyldLmpvaW4oJ1xcbicpO1xuICAgICAgfSkuam9pbignXFxuJyk7XG4gICAgICBsb2cocHJpbnRTdHJBcnIpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtYXAocmVzdWx0TGlzdCwgZnVuY3Rpb24gKHJlc3VsdCwgcmVzdWx0SW5kZXgpIHtcbiAgICB2YXIgZXJyTXNnID0gJyc7XG5cbiAgICBpZiAoIWlzT2JqZWN0KHJlc3VsdCkpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGVyck1zZyA9ICdBIHRyYW5zZm9ybSBzaG91bGQgbm90IHJldHVybiBzb21lIGVtcHR5IHJlc3VsdHMuJztcbiAgICAgIH1cblxuICAgICAgdGhyb3dFcnJvcihlcnJNc2cpO1xuICAgIH1cblxuICAgIGlmICghcmVzdWx0LmRhdGEpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGVyck1zZyA9ICdUcmFuc2Zvcm0gcmVzdWx0IGRhdGEgc2hvdWxkIGJlIG5vdCBiZSBudWxsIG9yIHVuZGVmaW5lZCc7XG4gICAgICB9XG5cbiAgICAgIHRocm93RXJyb3IoZXJyTXNnKTtcbiAgICB9XG5cbiAgICB2YXIgc291cmNlRm9ybWF0ID0gZGV0ZWN0U291cmNlRm9ybWF0KHJlc3VsdC5kYXRhKTtcblxuICAgIGlmICghaXNTdXBwb3J0ZWRTb3VyY2VGb3JtYXQoc291cmNlRm9ybWF0KSkge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgZXJyTXNnID0gJ1RyYW5zZm9ybSByZXN1bHQgZGF0YSBzaG91bGQgYmUgYXJyYXkgcm93cyBvciBvYmplY3Qgcm93cy4nO1xuICAgICAgfVxuXG4gICAgICB0aHJvd0Vycm9yKGVyck1zZyk7XG4gICAgfVxuXG4gICAgdmFyIHJlc3VsdE1ldGFSYXdPcHRpb247XG4gICAgdmFyIGZpcnN0VXBTb3VyY2UgPSB1cFNvdXJjZUxpc3RbMF07XG4gICAgLyoqXHJcbiAgICAgKiBJbnR1aXRpdmVseSwgdGhlIGVuZCB1c2VycyBrbm93biB0aGUgY29udGVudCBvZiB0aGUgb3JpZ2luYWwgYGRhdGFzZXQuc291cmNlYCxcclxuICAgICAqIGNhbHVjYXRpbmcgdGhlIHRyYW5zZm9ybSByZXN1bHQgaW4gbWluZC5cclxuICAgICAqIFN1cHBvc2UgdGhlIG9yaWdpbmFsIGBkYXRhc2V0LnNvdXJjZWAgaXM6XHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogW1xyXG4gICAgICogICAgIFsncHJvZHVjdCcsICcyMDEyJywgJzIwMTMnLCAnMjAxNCcsICcyMDE1J10sXHJcbiAgICAgKiAgICAgWydBQUEnLCA0MS4xLCAzMC40LCA2NS4xLCA1My4zXSxcclxuICAgICAqICAgICBbJ0JCQicsIDg2LjUsIDkyLjEsIDg1LjcsIDgzLjFdLFxyXG4gICAgICogICAgIFsnQ0NDJywgMjQuMSwgNjcuMiwgNzkuNSwgODYuNF1cclxuICAgICAqIF1cclxuICAgICAqIGBgYFxyXG4gICAgICogVGhlIGRpbWVuc2lvbiBpbmZvIGhhdmUgdG8gYmUgZGV0ZWN0ZWQgZnJvbSB0aGUgc291cmNlIGRhdGEuXHJcbiAgICAgKiBTb21lIG9mIHRoZSB0cmFuc2Zvcm1lcnMgKGxpa2UgZmlsdGVyLCBzb3J0KSB3aWxsIGZvbGxvdyB0aGUgZGltZW5zaW9uIGluZm9cclxuICAgICAqIG9mIHVwc3RyZWFtLCB3aGlsZSBvdGhlcnMgdXNlIG5ldyBkaW1lbnNpb25zIChsaWtlIGFnZ3JlZ2F0ZSkuXHJcbiAgICAgKiBUcmFuc2Zvcm1lciBjYW4gb3V0cHV0IGEgZmllbGQgYGRpbWVuc2lvbnNgIHRvIGRlZmluZSB0aGUgaXRzIG93biBvdXRwdXQgZGltZW5zaW9ucy5cclxuICAgICAqIFdlIGFsc28gYWxsb3cgdHJhbnNmb3JtZXJzIHRvIGlnbm9yZSB0aGUgb3V0cHV0IGBkaW1lbnNpb25zYCBmaWVsZCwgYW5kXHJcbiAgICAgKiBpbmhlcml0IHRoZSB1cHN0cmVhbSBkaW1lbnNpb25zIGRlZmluaXRpb24uIEl0IGNhbiByZWR1Y2UgdGhlIGJ1cmRlbiBvZiBoYW5kbGluZ1xyXG4gICAgICogZGltZW5zaW9ucyBpbiB0cmFuc2Zvcm1lcnMuXHJcbiAgICAgKlxyXG4gICAgICogU2VlIGFsc28gW0RJTUVOU0lPTl9JTkhFUklUX1JVTEVdIGluIGBzb3VyY2VNYW5hZ2VyLnRzYC5cclxuICAgICAqL1xuXG4gICAgaWYgKGZpcnN0VXBTb3VyY2UgJiYgcmVzdWx0SW5kZXggPT09IDAgLy8gSWYgdHJhbnNmb3JtZXIgcmV0dXJucyBgZGltZW5zaW9uc2AsIGl0IG1lYW5zIHRoYXQgdGhlIHRyYW5zZm9ybWVyIGhhcyBkaWZmZXJlbnRcbiAgICAvLyBkaW1lbnNpb25zIGRlZmluaXRpb25zLiBXZSBkbyBub3QgaW5oZXJpdCBhbnl0aGluZyBmcm9tIHVwc3RyZWFtLlxuICAgICYmICFyZXN1bHQuZGltZW5zaW9ucykge1xuICAgICAgdmFyIHN0YXJ0SW5kZXggPSBmaXJzdFVwU291cmNlLnN0YXJ0SW5kZXg7IC8vIFdlIGNvcHkgdGhlIGhlYWRlciBvZiB1cHN0cmVhbSB0byB0aGUgcmVzdWx0LCBiZWNhdXNlOlxuICAgICAgLy8gKDEpIFRoZSByZXR1cm5lZCBkYXRhIGFsd2F5cyBkb2VzIG5vdCBjb250YWluIGhlYWRlciBsaW5lIGFuZCBjYW4gbm90IGJlIHVzZWRcbiAgICAgIC8vIGFzIGRpbWVuc2lvbi1kZXRlY3Rpb24uIEluIHRoaXMgY2FzZSB3ZSBjYW4gbm90IHVzZSBcImRldGVjdGVkIGRpbWVuc2lvbnNcIiBvZlxuICAgICAgLy8gdXBzdHJlYW0gZGlyZWN0bHksIGJlY2F1c2UgaXQgbWlnaHQgYmUgZGV0ZWN0ZWQgYmFzZWQgb24gZGlmZmVyZW50IGBzZXJpZXNMYXlvdXRCeWAuXG4gICAgICAvLyAoMikgV2Ugc2hvdWxkIHN1cHBvcnQgdGhhdCB0aGUgc2VyaWVzIHJlYWQgdGhlIHVwc3RyZWFtIHNvdXJjZSBpbiBgc2VyaWVzTGF5b3V0Qnk6ICdyb3cnYC5cbiAgICAgIC8vIFNvIHRoZSBvcmlnaW5hbCBkZXRlY3RlZCBoZWFkZXIgc2hvdWxkIGJlIGFkZCB0byB0aGUgcmVzdWx0LCBvdGhlcndpc2UgdGhleSBjYW4gbm90IGJlIHJlYWQuXG5cbiAgICAgIGlmIChzdGFydEluZGV4KSB7XG4gICAgICAgIHJlc3VsdC5kYXRhID0gZmlyc3RVcFNvdXJjZS5kYXRhLnNsaWNlKDAsIHN0YXJ0SW5kZXgpLmNvbmNhdChyZXN1bHQuZGF0YSk7XG4gICAgICB9XG5cbiAgICAgIHJlc3VsdE1ldGFSYXdPcHRpb24gPSB7XG4gICAgICAgIHNlcmllc0xheW91dEJ5OiBTRVJJRVNfTEFZT1VUX0JZX0NPTFVNTixcbiAgICAgICAgc291cmNlSGVhZGVyOiBzdGFydEluZGV4LFxuICAgICAgICBkaW1lbnNpb25zOiBmaXJzdFVwU291cmNlLm1ldGFSYXdPcHRpb24uZGltZW5zaW9uc1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0TWV0YVJhd09wdGlvbiA9IHtcbiAgICAgICAgc2VyaWVzTGF5b3V0Qnk6IFNFUklFU19MQVlPVVRfQllfQ09MVU1OLFxuICAgICAgICBzb3VyY2VIZWFkZXI6IDAsXG4gICAgICAgIGRpbWVuc2lvbnM6IHJlc3VsdC5kaW1lbnNpb25zXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBjcmVhdGVTb3VyY2UocmVzdWx0LmRhdGEsIHJlc3VsdE1ldGFSYXdPcHRpb24sIG51bGwpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaXNTdXBwb3J0ZWRTb3VyY2VGb3JtYXQoc291cmNlRm9ybWF0KSB7XG4gIHJldHVybiBzb3VyY2VGb3JtYXQgPT09IFNPVVJDRV9GT1JNQVRfQVJSQVlfUk9XUyB8fCBzb3VyY2VGb3JtYXQgPT09IFNPVVJDRV9GT1JNQVRfT0JKRUNUX1JPV1M7XG59IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgeyBhc3NlcnQsIGNsb25lLCBjcmVhdGVIYXNoTWFwLCBpc0Z1bmN0aW9uLCBrZXlzLCBtYXAsIHJlZHVjZSB9IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgeyBwYXJzZURhdGFWYWx1ZSB9IGZyb20gJy4vaGVscGVyL2RhdGFWYWx1ZUhlbHBlci5qcyc7XG5pbXBvcnQgeyBzaG91bGRSZXRyaWV2ZURhdGFCeU5hbWUgfSBmcm9tICcuL1NvdXJjZS5qcyc7XG52YXIgVU5ERUZJTkVEID0gJ3VuZGVmaW5lZCc7XG4vKiBnbG9iYWwgRmxvYXQ2NEFycmF5LCBJbnQzMkFycmF5LCBVaW50MzJBcnJheSwgVWludDE2QXJyYXkgKi9cbi8vIENhdXRpb246IE1VU1Qgbm90IHVzZSBgbmV3IEN0b3JVaW50MzJBcnJheShhcnIsIDAsIGxlbilgLCBiZWNhdXNlIHRoZSBDdG9yIG9mIGFycmF5IGlzXG4vLyBkaWZmZXJlbnQgZnJvbSB0aGUgQ3RvciBvZiB0eXBlZCBhcnJheS5cblxuZXhwb3J0IHZhciBDdG9yVWludDMyQXJyYXkgPSB0eXBlb2YgVWludDMyQXJyYXkgPT09IFVOREVGSU5FRCA/IEFycmF5IDogVWludDMyQXJyYXk7XG5leHBvcnQgdmFyIEN0b3JVaW50MTZBcnJheSA9IHR5cGVvZiBVaW50MTZBcnJheSA9PT0gVU5ERUZJTkVEID8gQXJyYXkgOiBVaW50MTZBcnJheTtcbmV4cG9ydCB2YXIgQ3RvckludDMyQXJyYXkgPSB0eXBlb2YgSW50MzJBcnJheSA9PT0gVU5ERUZJTkVEID8gQXJyYXkgOiBJbnQzMkFycmF5O1xuZXhwb3J0IHZhciBDdG9yRmxvYXQ2NEFycmF5ID0gdHlwZW9mIEZsb2F0NjRBcnJheSA9PT0gVU5ERUZJTkVEID8gQXJyYXkgOiBGbG9hdDY0QXJyYXk7XG4vKipcclxuICogTXVsdGkgZGltZW5zaW9uYWwgZGF0YSBzdG9yZVxyXG4gKi9cblxudmFyIGRhdGFDdG9ycyA9IHtcbiAgJ2Zsb2F0JzogQ3RvckZsb2F0NjRBcnJheSxcbiAgJ2ludCc6IEN0b3JJbnQzMkFycmF5LFxuICAvLyBPcmRpbmFsIGRhdGEgdHlwZSBjYW4gYmUgc3RyaW5nIG9yIGludFxuICAnb3JkaW5hbCc6IEFycmF5LFxuICAnbnVtYmVyJzogQXJyYXksXG4gICd0aW1lJzogQ3RvckZsb2F0NjRBcnJheVxufTtcbnZhciBkZWZhdWx0RGltVmFsdWVHZXR0ZXJzO1xuXG5mdW5jdGlvbiBnZXRJbmRpY2VzQ3RvcihyYXdDb3VudCkge1xuICAvLyBUaGUgcG9zc2libGUgbWF4IHZhbHVlIGluIHRoaXMuX2luZGljaWVzIGlzIGFsd2F5cyB0aGlzLl9yYXdDb3VudCBkZXNwaXRlIG9mIGZpbHRlcmluZy5cbiAgcmV0dXJuIHJhd0NvdW50ID4gNjU1MzUgPyBDdG9yVWludDMyQXJyYXkgOiBDdG9yVWludDE2QXJyYXk7XG59XG5cbjtcblxuZnVuY3Rpb24gZ2V0SW5pdGlhbEV4dGVudCgpIHtcbiAgcmV0dXJuIFtJbmZpbml0eSwgLUluZmluaXR5XTtcbn1cblxuO1xuXG5mdW5jdGlvbiBjbG9uZUNodW5rKG9yaWdpbmFsQ2h1bmspIHtcbiAgdmFyIEN0b3IgPSBvcmlnaW5hbENodW5rLmNvbnN0cnVjdG9yOyAvLyBPbmx5IHNoYWxsb3cgY2xvbmUgaXMgZW5vdWdoIHdoZW4gQXJyYXkuXG5cbiAgcmV0dXJuIEN0b3IgPT09IEFycmF5ID8gb3JpZ2luYWxDaHVuay5zbGljZSgpIDogbmV3IEN0b3Iob3JpZ2luYWxDaHVuayk7XG59XG5cbmZ1bmN0aW9uIHByZXBhcmVTdG9yZShzdG9yZSwgZGltSWR4LCBkaW1UeXBlLCBlbmQsIGFwcGVuZCkge1xuICB2YXIgRGF0YUN0b3IgPSBkYXRhQ3RvcnNbZGltVHlwZSB8fCAnZmxvYXQnXTtcblxuICBpZiAoYXBwZW5kKSB7XG4gICAgdmFyIG9sZFN0b3JlID0gc3RvcmVbZGltSWR4XTtcbiAgICB2YXIgb2xkTGVuID0gb2xkU3RvcmUgJiYgb2xkU3RvcmUubGVuZ3RoO1xuXG4gICAgaWYgKCEob2xkTGVuID09PSBlbmQpKSB7XG4gICAgICB2YXIgbmV3U3RvcmUgPSBuZXcgRGF0YUN0b3IoZW5kKTsgLy8gVGhlIGNvc3Qgb2YgdGhlIGNvcHkgaXMgcHJvYmFibHkgaW5jb25zaWRlcmFibGVcbiAgICAgIC8vIHdpdGhpbiB0aGUgaW5pdGlhbCBjaHVua1NpemUuXG5cbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb2xkTGVuOyBqKyspIHtcbiAgICAgICAgbmV3U3RvcmVbal0gPSBvbGRTdG9yZVtqXTtcbiAgICAgIH1cblxuICAgICAgc3RvcmVbZGltSWR4XSA9IG5ld1N0b3JlO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBzdG9yZVtkaW1JZHhdID0gbmV3IERhdGFDdG9yKGVuZCk7XG4gIH1cbn1cblxuO1xuLyoqXHJcbiAqIEJhc2ljYWxseSwgRGF0YVN0b3JlIEFQSSBrZWVwIGltbXV0YWJsZS5cclxuICovXG5cbnZhciBEYXRhU3RvcmUgPVxuLyoqIEBjbGFzcyAqL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBEYXRhU3RvcmUoKSB7XG4gICAgdGhpcy5fY2h1bmtzID0gW107IC8vIEl0IHdpbGwgbm90IGJlIGNhbGN1bGF0ZWQgdW50aWwgbmVlZGVkLlxuXG4gICAgdGhpcy5fcmF3RXh0ZW50ID0gW107XG4gICAgdGhpcy5fZXh0ZW50ID0gW107XG4gICAgdGhpcy5fY291bnQgPSAwO1xuICAgIHRoaXMuX3Jhd0NvdW50ID0gMDtcbiAgICB0aGlzLl9jYWxjRGltTmFtZVRvSWR4ID0gY3JlYXRlSGFzaE1hcCgpO1xuICB9XG4gIC8qKlxyXG4gICAqIEluaXRpYWxpemUgZnJvbSBkYXRhXHJcbiAgICovXG5cblxuICBEYXRhU3RvcmUucHJvdG90eXBlLmluaXREYXRhID0gZnVuY3Rpb24gKHByb3ZpZGVyLCBpbnB1dERpbWVuc2lvbnMsIGRpbVZhbHVlR2V0dGVyKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGFzc2VydChpc0Z1bmN0aW9uKHByb3ZpZGVyLmdldEl0ZW0pICYmIGlzRnVuY3Rpb24ocHJvdmlkZXIuY291bnQpLCAnSW52YWxpZCBkYXRhIHByb3ZpZGVyLicpO1xuICAgIH1cblxuICAgIHRoaXMuX3Byb3ZpZGVyID0gcHJvdmlkZXI7IC8vIENsZWFyXG5cbiAgICB0aGlzLl9jaHVua3MgPSBbXTtcbiAgICB0aGlzLl9pbmRpY2VzID0gbnVsbDtcbiAgICB0aGlzLmdldFJhd0luZGV4ID0gdGhpcy5fZ2V0UmF3SWR4SWRlbnRpdHk7XG4gICAgdmFyIHNvdXJjZSA9IHByb3ZpZGVyLmdldFNvdXJjZSgpO1xuICAgIHZhciBkZWZhdWx0R2V0dGVyID0gdGhpcy5kZWZhdWx0RGltVmFsdWVHZXR0ZXIgPSBkZWZhdWx0RGltVmFsdWVHZXR0ZXJzW3NvdXJjZS5zb3VyY2VGb3JtYXRdOyAvLyBEZWZhdWx0IGRpbSB2YWx1ZSBnZXR0ZXJcblxuICAgIHRoaXMuX2RpbVZhbHVlR2V0dGVyID0gZGltVmFsdWVHZXR0ZXIgfHwgZGVmYXVsdEdldHRlcjsgLy8gUmVzZXQgcmF3IGV4dGVudC5cblxuICAgIHRoaXMuX3Jhd0V4dGVudCA9IFtdO1xuICAgIHZhciB3aWxsUmV0cmlldmVEYXRhQnlOYW1lID0gc2hvdWxkUmV0cmlldmVEYXRhQnlOYW1lKHNvdXJjZSk7XG4gICAgdGhpcy5fZGltZW5zaW9ucyA9IG1hcChpbnB1dERpbWVuc2lvbnMsIGZ1bmN0aW9uIChkaW0pIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGlmICh3aWxsUmV0cmlldmVEYXRhQnlOYW1lKSB7XG4gICAgICAgICAgYXNzZXJ0KGRpbS5wcm9wZXJ0eSAhPSBudWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICAvLyBPbmx5IHBpY2sgdGhlc2UgdHdvIHByb3BzLiBOb3QgbGVhayBvdGhlciBwcm9wZXJ0aWVzIGxpa2Ugb3JkZXJNZXRhLlxuICAgICAgICB0eXBlOiBkaW0udHlwZSxcbiAgICAgICAgcHJvcGVydHk6IGRpbS5wcm9wZXJ0eVxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2luaXREYXRhRnJvbVByb3ZpZGVyKDAsIHByb3ZpZGVyLmNvdW50KCkpO1xuICB9O1xuXG4gIERhdGFTdG9yZS5wcm90b3R5cGUuZ2V0UHJvdmlkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb3ZpZGVyO1xuICB9O1xuICAvKipcclxuICAgKiBDYXV0aW9uOiBldmVuIHdoZW4gYSBgc291cmNlYCBpbnN0YW5jZSBvd25lZCBieSBhIHNlcmllcywgdGhlIGNyZWF0ZWQgZGF0YSBzdG9yZVxyXG4gICAqIG1heSBzdGlsbCBiZSBzaGFyZWQgYnkgZGlmZmVyZW50IHNlcmVpcyAodGhlIHNvdXJjZSBoYXNoIGRvZXMgbm90IHVzZSBhbGwgYHNvdXJjZWBcclxuICAgKiBwcm9wcywgc2VlIGBzb3VyY2VNYW5hZ2VyYCkuIEluIHRoaXMgY2FzZSwgdGhlIGBzb3VyY2VgIHByb3BzIHRoYXQgYXJlIG5vdCB1c2VkIGluXHJcbiAgICogaGFzaCAobGlrZSBgc291cmNlLmRpbWVuc2lvbkRlZmluZWApIHByb2JhYmx5IG9ubHkgYmVsb25ncyB0byBhIGNlcnRhaW4gc2VyaWVzIGFuZFxyXG4gICAqIHRodXMgc2hvdWxkIG5vdCBiZSBmZXRjaCBoZXJlLlxyXG4gICAqL1xuXG5cbiAgRGF0YVN0b3JlLnByb3RvdHlwZS5nZXRTb3VyY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb3ZpZGVyLmdldFNvdXJjZSgpO1xuICB9O1xuICAvKipcclxuICAgKiBAY2F1dGlvbiBPbmx5IHVzZWQgaW4gZGF0YVN0YWNrLlxyXG4gICAqL1xuXG5cbiAgRGF0YVN0b3JlLnByb3RvdHlwZS5lbnN1cmVDYWxjdWxhdGlvbkRpbWVuc2lvbiA9IGZ1bmN0aW9uIChkaW1OYW1lLCB0eXBlKSB7XG4gICAgdmFyIGNhbGNEaW1OYW1lVG9JZHggPSB0aGlzLl9jYWxjRGltTmFtZVRvSWR4O1xuICAgIHZhciBkaW1lbnNpb25zID0gdGhpcy5fZGltZW5zaW9ucztcbiAgICB2YXIgY2FsY0RpbUlkeCA9IGNhbGNEaW1OYW1lVG9JZHguZ2V0KGRpbU5hbWUpO1xuXG4gICAgaWYgKGNhbGNEaW1JZHggIT0gbnVsbCkge1xuICAgICAgaWYgKGRpbWVuc2lvbnNbY2FsY0RpbUlkeF0udHlwZSA9PT0gdHlwZSkge1xuICAgICAgICByZXR1cm4gY2FsY0RpbUlkeDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY2FsY0RpbUlkeCA9IGRpbWVuc2lvbnMubGVuZ3RoO1xuICAgIH1cblxuICAgIGRpbWVuc2lvbnNbY2FsY0RpbUlkeF0gPSB7XG4gICAgICB0eXBlOiB0eXBlXG4gICAgfTtcbiAgICBjYWxjRGltTmFtZVRvSWR4LnNldChkaW1OYW1lLCBjYWxjRGltSWR4KTtcbiAgICB0aGlzLl9jaHVua3NbY2FsY0RpbUlkeF0gPSBuZXcgZGF0YUN0b3JzW3R5cGUgfHwgJ2Zsb2F0J10odGhpcy5fcmF3Q291bnQpO1xuICAgIHRoaXMuX3Jhd0V4dGVudFtjYWxjRGltSWR4XSA9IGdldEluaXRpYWxFeHRlbnQoKTtcbiAgICByZXR1cm4gY2FsY0RpbUlkeDtcbiAgfTtcblxuICBEYXRhU3RvcmUucHJvdG90eXBlLmNvbGxlY3RPcmRpbmFsTWV0YSA9IGZ1bmN0aW9uIChkaW1JZHgsIG9yZGluYWxNZXRhKSB7XG4gICAgdmFyIGNodW5rID0gdGhpcy5fY2h1bmtzW2RpbUlkeF07XG4gICAgdmFyIGRpbSA9IHRoaXMuX2RpbWVuc2lvbnNbZGltSWR4XTtcbiAgICB2YXIgcmF3RXh0ZW50cyA9IHRoaXMuX3Jhd0V4dGVudDtcbiAgICB2YXIgb2Zmc2V0ID0gZGltLm9yZGluYWxPZmZzZXQgfHwgMDtcbiAgICB2YXIgbGVuID0gY2h1bmsubGVuZ3RoO1xuXG4gICAgaWYgKG9mZnNldCA9PT0gMCkge1xuICAgICAgLy8gV2UgbmVlZCB0byByZXNldCB0aGUgcmF3RXh0ZW50IGlmIGNvbGxlY3QgaXMgZnJvbSBzdGFydC5cbiAgICAgIC8vIEJlY2F1c2UgdGhpcyBkaW1lbnNpb24gbWF5IGJlIGd1ZXNzZWQgYXMgbnVtYmVyIGFuZCBjYWxjdWF0aW5nIGEgd3JvbmcgZXh0ZW50LlxuICAgICAgcmF3RXh0ZW50c1tkaW1JZHhdID0gZ2V0SW5pdGlhbEV4dGVudCgpO1xuICAgIH1cblxuICAgIHZhciBkaW1SYXdFeHRlbnQgPSByYXdFeHRlbnRzW2RpbUlkeF07IC8vIFBhcnNlIGZyb20gcHJldmlvdXMgZGF0YSBvZmZzZXQuIGxlbiBtYXkgYmUgY2hhbmdlZCBhZnRlciBhcHBlbmREYXRhXG5cbiAgICBmb3IgKHZhciBpID0gb2Zmc2V0OyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHZhciB2YWwgPSBjaHVua1tpXSA9IG9yZGluYWxNZXRhLnBhcnNlQW5kQ29sbGVjdChjaHVua1tpXSk7XG5cbiAgICAgIGlmICghaXNOYU4odmFsKSkge1xuICAgICAgICBkaW1SYXdFeHRlbnRbMF0gPSBNYXRoLm1pbih2YWwsIGRpbVJhd0V4dGVudFswXSk7XG4gICAgICAgIGRpbVJhd0V4dGVudFsxXSA9IE1hdGgubWF4KHZhbCwgZGltUmF3RXh0ZW50WzFdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBkaW0ub3JkaW5hbE1ldGEgPSBvcmRpbmFsTWV0YTtcbiAgICBkaW0ub3JkaW5hbE9mZnNldCA9IGxlbjtcbiAgICBkaW0udHlwZSA9ICdvcmRpbmFsJzsgLy8gRm9yY2UgdG8gYmUgb3JkaW5hbFxuICB9O1xuXG4gIERhdGFTdG9yZS5wcm90b3R5cGUuZ2V0T3JkaW5hbE1ldGEgPSBmdW5jdGlvbiAoZGltSWR4KSB7XG4gICAgdmFyIGRpbUluZm8gPSB0aGlzLl9kaW1lbnNpb25zW2RpbUlkeF07XG4gICAgdmFyIG9yZGluYWxNZXRhID0gZGltSW5mby5vcmRpbmFsTWV0YTtcbiAgICByZXR1cm4gb3JkaW5hbE1ldGE7XG4gIH07XG5cbiAgRGF0YVN0b3JlLnByb3RvdHlwZS5nZXREaW1lbnNpb25Qcm9wZXJ0eSA9IGZ1bmN0aW9uIChkaW1JbmRleCkge1xuICAgIHZhciBpdGVtID0gdGhpcy5fZGltZW5zaW9uc1tkaW1JbmRleF07XG4gICAgcmV0dXJuIGl0ZW0gJiYgaXRlbS5wcm9wZXJ0eTtcbiAgfTtcbiAgLyoqXHJcbiAgICogQ2F1dGlvbjogQ2FuIGJlIG9ubHkgY2FsbGVkIG9uIHJhdyBkYXRhIChiZWZvcmUgYHRoaXMuX2luZGljZXNgIGNyZWF0ZWQpLlxyXG4gICAqL1xuXG5cbiAgRGF0YVN0b3JlLnByb3RvdHlwZS5hcHBlbmREYXRhID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgYXNzZXJ0KCF0aGlzLl9pbmRpY2VzLCAnYXBwZW5kRGF0YSBjYW4gb25seSBiZSBjYWxsZWQgb24gcmF3IGRhdGEuJyk7XG4gICAgfVxuXG4gICAgdmFyIHByb3ZpZGVyID0gdGhpcy5fcHJvdmlkZXI7XG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5jb3VudCgpO1xuICAgIHByb3ZpZGVyLmFwcGVuZERhdGEoZGF0YSk7XG4gICAgdmFyIGVuZCA9IHByb3ZpZGVyLmNvdW50KCk7XG5cbiAgICBpZiAoIXByb3ZpZGVyLnBlcnNpc3RlbnQpIHtcbiAgICAgIGVuZCArPSBzdGFydDtcbiAgICB9XG5cbiAgICBpZiAoc3RhcnQgPCBlbmQpIHtcbiAgICAgIHRoaXMuX2luaXREYXRhRnJvbVByb3ZpZGVyKHN0YXJ0LCBlbmQsIHRydWUpO1xuICAgIH1cblxuICAgIHJldHVybiBbc3RhcnQsIGVuZF07XG4gIH07XG5cbiAgRGF0YVN0b3JlLnByb3RvdHlwZS5hcHBlbmRWYWx1ZXMgPSBmdW5jdGlvbiAodmFsdWVzLCBtaW5GaWxsTGVuKSB7XG4gICAgdmFyIGNodW5rcyA9IHRoaXMuX2NodW5rcztcbiAgICB2YXIgZGltZW5zaW9ucyA9IHRoaXMuX2RpbWVuc2lvbnM7XG4gICAgdmFyIGRpbUxlbiA9IGRpbWVuc2lvbnMubGVuZ3RoO1xuICAgIHZhciByYXdFeHRlbnQgPSB0aGlzLl9yYXdFeHRlbnQ7XG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5jb3VudCgpO1xuICAgIHZhciBlbmQgPSBzdGFydCArIE1hdGgubWF4KHZhbHVlcy5sZW5ndGgsIG1pbkZpbGxMZW4gfHwgMCk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpbUxlbjsgaSsrKSB7XG4gICAgICB2YXIgZGltID0gZGltZW5zaW9uc1tpXTtcbiAgICAgIHByZXBhcmVTdG9yZShjaHVua3MsIGksIGRpbS50eXBlLCBlbmQsIHRydWUpO1xuICAgIH1cblxuICAgIHZhciBlbXB0eURhdGFJdGVtID0gW107XG5cbiAgICBmb3IgKHZhciBpZHggPSBzdGFydDsgaWR4IDwgZW5kOyBpZHgrKykge1xuICAgICAgdmFyIHNvdXJjZUlkeCA9IGlkeCAtIHN0YXJ0OyAvLyBTdG9yZSB0aGUgZGF0YSBieSBkaW1lbnNpb25zXG5cbiAgICAgIGZvciAodmFyIGRpbUlkeCA9IDA7IGRpbUlkeCA8IGRpbUxlbjsgZGltSWR4KyspIHtcbiAgICAgICAgdmFyIGRpbSA9IGRpbWVuc2lvbnNbZGltSWR4XTtcbiAgICAgICAgdmFyIHZhbCA9IGRlZmF1bHREaW1WYWx1ZUdldHRlcnMuYXJyYXlSb3dzLmNhbGwodGhpcywgdmFsdWVzW3NvdXJjZUlkeF0gfHwgZW1wdHlEYXRhSXRlbSwgZGltLnByb3BlcnR5LCBzb3VyY2VJZHgsIGRpbUlkeCk7XG4gICAgICAgIGNodW5rc1tkaW1JZHhdW2lkeF0gPSB2YWw7XG4gICAgICAgIHZhciBkaW1SYXdFeHRlbnQgPSByYXdFeHRlbnRbZGltSWR4XTtcbiAgICAgICAgdmFsIDwgZGltUmF3RXh0ZW50WzBdICYmIChkaW1SYXdFeHRlbnRbMF0gPSB2YWwpO1xuICAgICAgICB2YWwgPiBkaW1SYXdFeHRlbnRbMV0gJiYgKGRpbVJhd0V4dGVudFsxXSA9IHZhbCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fcmF3Q291bnQgPSB0aGlzLl9jb3VudCA9IGVuZDtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgZW5kOiBlbmRcbiAgICB9O1xuICB9O1xuXG4gIERhdGFTdG9yZS5wcm90b3R5cGUuX2luaXREYXRhRnJvbVByb3ZpZGVyID0gZnVuY3Rpb24gKHN0YXJ0LCBlbmQsIGFwcGVuZCkge1xuICAgIHZhciBwcm92aWRlciA9IHRoaXMuX3Byb3ZpZGVyO1xuICAgIHZhciBjaHVua3MgPSB0aGlzLl9jaHVua3M7XG4gICAgdmFyIGRpbWVuc2lvbnMgPSB0aGlzLl9kaW1lbnNpb25zO1xuICAgIHZhciBkaW1MZW4gPSBkaW1lbnNpb25zLmxlbmd0aDtcbiAgICB2YXIgcmF3RXh0ZW50ID0gdGhpcy5fcmF3RXh0ZW50O1xuICAgIHZhciBkaW1OYW1lcyA9IG1hcChkaW1lbnNpb25zLCBmdW5jdGlvbiAoZGltKSB7XG4gICAgICByZXR1cm4gZGltLnByb3BlcnR5O1xuICAgIH0pO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaW1MZW47IGkrKykge1xuICAgICAgdmFyIGRpbSA9IGRpbWVuc2lvbnNbaV07XG5cbiAgICAgIGlmICghcmF3RXh0ZW50W2ldKSB7XG4gICAgICAgIHJhd0V4dGVudFtpXSA9IGdldEluaXRpYWxFeHRlbnQoKTtcbiAgICAgIH1cblxuICAgICAgcHJlcGFyZVN0b3JlKGNodW5rcywgaSwgZGltLnR5cGUsIGVuZCwgYXBwZW5kKTtcbiAgICB9XG5cbiAgICBpZiAocHJvdmlkZXIuZmlsbFN0b3JhZ2UpIHtcbiAgICAgIHByb3ZpZGVyLmZpbGxTdG9yYWdlKHN0YXJ0LCBlbmQsIGNodW5rcywgcmF3RXh0ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGRhdGFJdGVtID0gW107XG5cbiAgICAgIGZvciAodmFyIGlkeCA9IHN0YXJ0OyBpZHggPCBlbmQ7IGlkeCsrKSB7XG4gICAgICAgIC8vIE5PVElDRTogVHJ5IG5vdCB0byB3cml0ZSB0aGluZ3MgaW50byBkYXRhSXRlbVxuICAgICAgICBkYXRhSXRlbSA9IHByb3ZpZGVyLmdldEl0ZW0oaWR4LCBkYXRhSXRlbSk7IC8vIEVhY2ggZGF0YSBpdGVtIGlzIHZhbHVlXG4gICAgICAgIC8vIFsxLCAyXVxuICAgICAgICAvLyAyXG4gICAgICAgIC8vIEJhciBjaGFydCwgbGluZSBjaGFydCB3aGljaCB1c2VzIGNhdGVnb3J5IGF4aXNcbiAgICAgICAgLy8gb25seSBnaXZlcyB0aGUgJ3knIHZhbHVlLiAneCcgdmFsdWUgaXMgdGhlIGluZGljZXMgb2YgY2F0ZWdvcnlcbiAgICAgICAgLy8gVXNlIGEgdGVtcFZhbHVlIHRvIG5vcm1hbGl6ZSB0aGUgdmFsdWUgdG8gYmUgYSAoeCwgeSkgdmFsdWVcbiAgICAgICAgLy8gU3RvcmUgdGhlIGRhdGEgYnkgZGltZW5zaW9uc1xuXG4gICAgICAgIGZvciAodmFyIGRpbUlkeCA9IDA7IGRpbUlkeCA8IGRpbUxlbjsgZGltSWR4KyspIHtcbiAgICAgICAgICB2YXIgZGltU3RvcmFnZSA9IGNodW5rc1tkaW1JZHhdOyAvLyBQRU5ESU5HIE5VTEwgaXMgZW1wdHkgb3IgemVyb1xuXG4gICAgICAgICAgdmFyIHZhbCA9IHRoaXMuX2RpbVZhbHVlR2V0dGVyKGRhdGFJdGVtLCBkaW1OYW1lc1tkaW1JZHhdLCBpZHgsIGRpbUlkeCk7XG5cbiAgICAgICAgICBkaW1TdG9yYWdlW2lkeF0gPSB2YWw7XG4gICAgICAgICAgdmFyIGRpbVJhd0V4dGVudCA9IHJhd0V4dGVudFtkaW1JZHhdO1xuICAgICAgICAgIHZhbCA8IGRpbVJhd0V4dGVudFswXSAmJiAoZGltUmF3RXh0ZW50WzBdID0gdmFsKTtcbiAgICAgICAgICB2YWwgPiBkaW1SYXdFeHRlbnRbMV0gJiYgKGRpbVJhd0V4dGVudFsxXSA9IHZhbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXByb3ZpZGVyLnBlcnNpc3RlbnQgJiYgcHJvdmlkZXIuY2xlYW4pIHtcbiAgICAgIC8vIENsZWFuIHVudXNlZCBkYXRhIGlmIGRhdGEgc291cmNlIGlzIHR5cGVkIGFycmF5LlxuICAgICAgcHJvdmlkZXIuY2xlYW4oKTtcbiAgICB9XG5cbiAgICB0aGlzLl9yYXdDb3VudCA9IHRoaXMuX2NvdW50ID0gZW5kOyAvLyBSZXNldCBkYXRhIGV4dGVudFxuXG4gICAgdGhpcy5fZXh0ZW50ID0gW107XG4gIH07XG5cbiAgRGF0YVN0b3JlLnByb3RvdHlwZS5jb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fY291bnQ7XG4gIH07XG4gIC8qKlxyXG4gICAqIEdldCB2YWx1ZS4gUmV0dXJuIE5hTiBpZiBpZHggaXMgb3V0IG9mIHJhbmdlLlxyXG4gICAqL1xuXG5cbiAgRGF0YVN0b3JlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoZGltLCBpZHgpIHtcbiAgICBpZiAoIShpZHggPj0gMCAmJiBpZHggPCB0aGlzLl9jb3VudCkpIHtcbiAgICAgIHJldHVybiBOYU47XG4gICAgfVxuXG4gICAgdmFyIGRpbVN0b3JlID0gdGhpcy5fY2h1bmtzW2RpbV07XG4gICAgcmV0dXJuIGRpbVN0b3JlID8gZGltU3RvcmVbdGhpcy5nZXRSYXdJbmRleChpZHgpXSA6IE5hTjtcbiAgfTtcblxuICBEYXRhU3RvcmUucHJvdG90eXBlLmdldFZhbHVlcyA9IGZ1bmN0aW9uIChkaW1lbnNpb25zLCBpZHgpIHtcbiAgICB2YXIgdmFsdWVzID0gW107XG4gICAgdmFyIGRpbUFyciA9IFtdO1xuXG4gICAgaWYgKGlkeCA9PSBudWxsKSB7XG4gICAgICBpZHggPSBkaW1lbnNpb25zOyAvLyBUT0RPIGdldCBhbGwgZnJvbSBzdG9yZT9cblxuICAgICAgZGltZW5zaW9ucyA9IFtdOyAvLyBBbGwgZGltZW5zaW9uc1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2RpbWVuc2lvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZGltQXJyLnB1c2goaSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGRpbUFyciA9IGRpbWVuc2lvbnM7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGRpbUFyci5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgdmFsdWVzLnB1c2godGhpcy5nZXQoZGltQXJyW2ldLCBpZHgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWVzO1xuICB9O1xuICAvKipcclxuICAgKiBAcGFyYW0gZGltIGNvbmNyZXRlIGRpbVxyXG4gICAqL1xuXG5cbiAgRGF0YVN0b3JlLnByb3RvdHlwZS5nZXRCeVJhd0luZGV4ID0gZnVuY3Rpb24gKGRpbSwgcmF3SWR4KSB7XG4gICAgaWYgKCEocmF3SWR4ID49IDAgJiYgcmF3SWR4IDwgdGhpcy5fcmF3Q291bnQpKSB7XG4gICAgICByZXR1cm4gTmFOO1xuICAgIH1cblxuICAgIHZhciBkaW1TdG9yZSA9IHRoaXMuX2NodW5rc1tkaW1dO1xuICAgIHJldHVybiBkaW1TdG9yZSA/IGRpbVN0b3JlW3Jhd0lkeF0gOiBOYU47XG4gIH07XG4gIC8qKlxyXG4gICAqIEdldCBzdW0gb2YgZGF0YSBpbiBvbmUgZGltZW5zaW9uXHJcbiAgICovXG5cblxuICBEYXRhU3RvcmUucHJvdG90eXBlLmdldFN1bSA9IGZ1bmN0aW9uIChkaW0pIHtcbiAgICB2YXIgZGltRGF0YSA9IHRoaXMuX2NodW5rc1tkaW1dO1xuICAgIHZhciBzdW0gPSAwO1xuXG4gICAgaWYgKGRpbURhdGEpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLmNvdW50KCk7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmdldChkaW0sIGkpO1xuXG4gICAgICAgIGlmICghaXNOYU4odmFsdWUpKSB7XG4gICAgICAgICAgc3VtICs9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHN1bTtcbiAgfTtcbiAgLyoqXHJcbiAgICogR2V0IG1lZGlhbiBvZiBkYXRhIGluIG9uZSBkaW1lbnNpb25cclxuICAgKi9cblxuXG4gIERhdGFTdG9yZS5wcm90b3R5cGUuZ2V0TWVkaWFuID0gZnVuY3Rpb24gKGRpbSkge1xuICAgIHZhciBkaW1EYXRhQXJyYXkgPSBbXTsgLy8gbWFwIGFsbCBkYXRhIG9mIG9uZSBkaW1lbnNpb25cblxuICAgIHRoaXMuZWFjaChbZGltXSwgZnVuY3Rpb24gKHZhbCkge1xuICAgICAgaWYgKCFpc05hTih2YWwpKSB7XG4gICAgICAgIGRpbURhdGFBcnJheS5wdXNoKHZhbCk7XG4gICAgICB9XG4gICAgfSk7IC8vIFRPRE9cbiAgICAvLyBVc2UgcXVpY2sgc2VsZWN0P1xuXG4gICAgdmFyIHNvcnRlZERpbURhdGFBcnJheSA9IGRpbURhdGFBcnJheS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gYSAtIGI7XG4gICAgfSk7XG4gICAgdmFyIGxlbiA9IHRoaXMuY291bnQoKTsgLy8gY2FsY3VsYXRlIG1lZGlhblxuXG4gICAgcmV0dXJuIGxlbiA9PT0gMCA/IDAgOiBsZW4gJSAyID09PSAxID8gc29ydGVkRGltRGF0YUFycmF5WyhsZW4gLSAxKSAvIDJdIDogKHNvcnRlZERpbURhdGFBcnJheVtsZW4gLyAyXSArIHNvcnRlZERpbURhdGFBcnJheVtsZW4gLyAyIC0gMV0pIC8gMjtcbiAgfTtcbiAgLyoqXHJcbiAgICogUmV0cmlldmUgdGhlIGluZGV4IHdpdGggZ2l2ZW4gcmF3IGRhdGEgaW5kZXguXHJcbiAgICovXG5cblxuICBEYXRhU3RvcmUucHJvdG90eXBlLmluZGV4T2ZSYXdJbmRleCA9IGZ1bmN0aW9uIChyYXdJbmRleCkge1xuICAgIGlmIChyYXdJbmRleCA+PSB0aGlzLl9yYXdDb3VudCB8fCByYXdJbmRleCA8IDApIHtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX2luZGljZXMpIHtcbiAgICAgIHJldHVybiByYXdJbmRleDtcbiAgICB9IC8vIEluZGljZXMgYXJlIGFzY2VuZGluZ1xuXG5cbiAgICB2YXIgaW5kaWNlcyA9IHRoaXMuX2luZGljZXM7IC8vIElmIHJhd0luZGV4ID09PSBkYXRhSW5kZXhcblxuICAgIHZhciByYXdEYXRhSW5kZXggPSBpbmRpY2VzW3Jhd0luZGV4XTtcblxuICAgIGlmIChyYXdEYXRhSW5kZXggIT0gbnVsbCAmJiByYXdEYXRhSW5kZXggPCB0aGlzLl9jb3VudCAmJiByYXdEYXRhSW5kZXggPT09IHJhd0luZGV4KSB7XG4gICAgICByZXR1cm4gcmF3SW5kZXg7XG4gICAgfVxuXG4gICAgdmFyIGxlZnQgPSAwO1xuICAgIHZhciByaWdodCA9IHRoaXMuX2NvdW50IC0gMTtcblxuICAgIHdoaWxlIChsZWZ0IDw9IHJpZ2h0KSB7XG4gICAgICB2YXIgbWlkID0gKGxlZnQgKyByaWdodCkgLyAyIHwgMDtcblxuICAgICAgaWYgKGluZGljZXNbbWlkXSA8IHJhd0luZGV4KSB7XG4gICAgICAgIGxlZnQgPSBtaWQgKyAxO1xuICAgICAgfSBlbHNlIGlmIChpbmRpY2VzW21pZF0gPiByYXdJbmRleCkge1xuICAgICAgICByaWdodCA9IG1pZCAtIDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbWlkO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAtMTtcbiAgfTtcbiAgLyoqXHJcbiAgICogUmV0cmlldmUgdGhlIGluZGV4IG9mIG5lYXJlc3QgdmFsdWUuXHJcbiAgICogQHBhcmFtIGRpbVxyXG4gICAqIEBwYXJhbSB2YWx1ZVxyXG4gICAqIEBwYXJhbSBbbWF4RGlzdGFuY2U9SW5maW5pdHldXHJcbiAgICogQHJldHVybiBJZiBhbmQgb25seSBpZiBtdWx0aXBsZSBpbmRpY2VzIGhhdmVcclxuICAgKiAgICAgICAgIHRoZSBzYW1lIHZhbHVlLCB0aGV5IGFyZSBwdXQgdG8gdGhlIHJlc3VsdC5cclxuICAgKi9cblxuXG4gIERhdGFTdG9yZS5wcm90b3R5cGUuaW5kaWNlc09mTmVhcmVzdCA9IGZ1bmN0aW9uIChkaW0sIHZhbHVlLCBtYXhEaXN0YW5jZSkge1xuICAgIHZhciBjaHVua3MgPSB0aGlzLl9jaHVua3M7XG4gICAgdmFyIGRpbURhdGEgPSBjaHVua3NbZGltXTtcbiAgICB2YXIgbmVhcmVzdEluZGljZXMgPSBbXTtcblxuICAgIGlmICghZGltRGF0YSkge1xuICAgICAgcmV0dXJuIG5lYXJlc3RJbmRpY2VzO1xuICAgIH1cblxuICAgIGlmIChtYXhEaXN0YW5jZSA9PSBudWxsKSB7XG4gICAgICBtYXhEaXN0YW5jZSA9IEluZmluaXR5O1xuICAgIH1cblxuICAgIHZhciBtaW5EaXN0ID0gSW5maW5pdHk7XG4gICAgdmFyIG1pbkRpZmYgPSAtMTtcbiAgICB2YXIgbmVhcmVzdEluZGljZXNMZW4gPSAwOyAvLyBDaGVjayB0aGUgdGVzdCBjYXNlIG9mIGB0ZXN0L3V0L3NwZWMvZGF0YS9TZXJpZXNEYXRhLmpzYC5cblxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLmNvdW50KCk7IGkgPCBsZW47IGkrKykge1xuICAgICAgdmFyIGRhdGFJbmRleCA9IHRoaXMuZ2V0UmF3SW5kZXgoaSk7XG4gICAgICB2YXIgZGlmZiA9IHZhbHVlIC0gZGltRGF0YVtkYXRhSW5kZXhdO1xuICAgICAgdmFyIGRpc3QgPSBNYXRoLmFicyhkaWZmKTtcblxuICAgICAgaWYgKGRpc3QgPD0gbWF4RGlzdGFuY2UpIHtcbiAgICAgICAgLy8gV2hlbiB0aGUgYHZhbHVlYCBpcyBhdCB0aGUgbWlkZGxlIG9mIGB0aGlzLmdldChkaW0sIGkpYCBhbmQgYHRoaXMuZ2V0KGRpbSwgaSsxKWAsXG4gICAgICAgIC8vIHdlJ2QgYmV0dGVyIG5vdCBwdXNoIGJvdGggb2YgdGhlbSB0byBgbmVhcmVzdEluZGljZXNgLCBvdGhlcndpc2UgaXQgaXMgZWFzeSB0b1xuICAgICAgICAvLyBnZXQgbW9yZSB0aGFuIG9uZSBpdGVtIGluIGBuZWFyZXN0SW5kaWNlc2AgKG1vcmUgc3BlY2lmaWNhbGx5LCBpbiBgdG9vbHRpcGApLlxuICAgICAgICAvLyBTbyB3ZSBjaG9vc2UgdGhlIG9uZSB0aGF0IGBkaWZmID49IDBgIGluIHRoaXMgY2FzZS5cbiAgICAgICAgLy8gQnV0IGlmIGB0aGlzLmdldChkaW0sIGkpYCBhbmQgYHRoaXMuZ2V0KGRpbSwgailgIGdldCB0aGUgc2FtZSB2YWx1ZSwgYm90aCBvZiB0aGVtXG4gICAgICAgIC8vIHNob3VsZCBiZSBwdXNoIHRvIGBuZWFyZXN0SW5kaWNlc2AuXG4gICAgICAgIGlmIChkaXN0IDwgbWluRGlzdCB8fCBkaXN0ID09PSBtaW5EaXN0ICYmIGRpZmYgPj0gMCAmJiBtaW5EaWZmIDwgMCkge1xuICAgICAgICAgIG1pbkRpc3QgPSBkaXN0O1xuICAgICAgICAgIG1pbkRpZmYgPSBkaWZmO1xuICAgICAgICAgIG5lYXJlc3RJbmRpY2VzTGVuID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkaWZmID09PSBtaW5EaWZmKSB7XG4gICAgICAgICAgbmVhcmVzdEluZGljZXNbbmVhcmVzdEluZGljZXNMZW4rK10gPSBpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgbmVhcmVzdEluZGljZXMubGVuZ3RoID0gbmVhcmVzdEluZGljZXNMZW47XG4gICAgcmV0dXJuIG5lYXJlc3RJbmRpY2VzO1xuICB9O1xuXG4gIERhdGFTdG9yZS5wcm90b3R5cGUuZ2V0SW5kaWNlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbmV3SW5kaWNlcztcbiAgICB2YXIgaW5kaWNlcyA9IHRoaXMuX2luZGljZXM7XG5cbiAgICBpZiAoaW5kaWNlcykge1xuICAgICAgdmFyIEN0b3IgPSBpbmRpY2VzLmNvbnN0cnVjdG9yO1xuICAgICAgdmFyIHRoaXNDb3VudCA9IHRoaXMuX2NvdW50OyAvLyBgbmV3IEFycmF5KGEsIGIsIGMpYCBpcyBkaWZmZXJlbnQgZnJvbSBgbmV3IFVpbnQzMkFycmF5KGEsIGIsIGMpYC5cblxuICAgICAgaWYgKEN0b3IgPT09IEFycmF5KSB7XG4gICAgICAgIG5ld0luZGljZXMgPSBuZXcgQ3Rvcih0aGlzQ291bnQpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpc0NvdW50OyBpKyspIHtcbiAgICAgICAgICBuZXdJbmRpY2VzW2ldID0gaW5kaWNlc1tpXTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3SW5kaWNlcyA9IG5ldyBDdG9yKGluZGljZXMuYnVmZmVyLCAwLCB0aGlzQ291bnQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgQ3RvciA9IGdldEluZGljZXNDdG9yKHRoaXMuX3Jhd0NvdW50KTtcbiAgICAgIG5ld0luZGljZXMgPSBuZXcgQ3Rvcih0aGlzLmNvdW50KCkpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld0luZGljZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbmV3SW5kaWNlc1tpXSA9IGk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ld0luZGljZXM7XG4gIH07XG4gIC8qKlxyXG4gICAqIERhdGEgZmlsdGVyLlxyXG4gICAqL1xuXG5cbiAgRGF0YVN0b3JlLnByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbiAoZGltcywgY2IpIHtcbiAgICBpZiAoIXRoaXMuX2NvdW50KSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB2YXIgbmV3U3RvcmUgPSB0aGlzLmNsb25lKCk7XG4gICAgdmFyIGNvdW50ID0gbmV3U3RvcmUuY291bnQoKTtcbiAgICB2YXIgQ3RvciA9IGdldEluZGljZXNDdG9yKG5ld1N0b3JlLl9yYXdDb3VudCk7XG4gICAgdmFyIG5ld0luZGljZXMgPSBuZXcgQ3Rvcihjb3VudCk7XG4gICAgdmFyIHZhbHVlID0gW107XG4gICAgdmFyIGRpbVNpemUgPSBkaW1zLmxlbmd0aDtcbiAgICB2YXIgb2Zmc2V0ID0gMDtcbiAgICB2YXIgZGltMCA9IGRpbXNbMF07XG4gICAgdmFyIGNodW5rcyA9IG5ld1N0b3JlLl9jaHVua3M7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgIHZhciBrZWVwID0gdm9pZCAwO1xuICAgICAgdmFyIHJhd0lkeCA9IG5ld1N0b3JlLmdldFJhd0luZGV4KGkpOyAvLyBTaW1wbGUgb3B0aW1pemF0aW9uXG5cbiAgICAgIGlmIChkaW1TaXplID09PSAwKSB7XG4gICAgICAgIGtlZXAgPSBjYihpKTtcbiAgICAgIH0gZWxzZSBpZiAoZGltU2l6ZSA9PT0gMSkge1xuICAgICAgICB2YXIgdmFsID0gY2h1bmtzW2RpbTBdW3Jhd0lkeF07XG4gICAgICAgIGtlZXAgPSBjYih2YWwsIGkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGsgPSAwO1xuXG4gICAgICAgIGZvciAoOyBrIDwgZGltU2l6ZTsgaysrKSB7XG4gICAgICAgICAgdmFsdWVba10gPSBjaHVua3NbZGltc1trXV1bcmF3SWR4XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhbHVlW2tdID0gaTtcbiAgICAgICAga2VlcCA9IGNiLmFwcGx5KG51bGwsIHZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGtlZXApIHtcbiAgICAgICAgbmV3SW5kaWNlc1tvZmZzZXQrK10gPSByYXdJZHg7XG4gICAgICB9XG4gICAgfSAvLyBTZXQgaW5kaWNlcyBhZnRlciBmaWx0ZXJlZC5cblxuXG4gICAgaWYgKG9mZnNldCA8IGNvdW50KSB7XG4gICAgICBuZXdTdG9yZS5faW5kaWNlcyA9IG5ld0luZGljZXM7XG4gICAgfVxuXG4gICAgbmV3U3RvcmUuX2NvdW50ID0gb2Zmc2V0OyAvLyBSZXNldCBkYXRhIGV4dGVudFxuXG4gICAgbmV3U3RvcmUuX2V4dGVudCA9IFtdO1xuXG4gICAgbmV3U3RvcmUuX3VwZGF0ZUdldFJhd0lkeCgpO1xuXG4gICAgcmV0dXJuIG5ld1N0b3JlO1xuICB9O1xuICAvKipcclxuICAgKiBTZWxlY3QgZGF0YSBpbiByYW5nZS4gKEZvciBvcHRpbWl6YXRpb24gb2YgZmlsdGVyKVxyXG4gICAqIChNYW51YWxseSBpbmxpbmUgY29kZSwgc3VwcG9ydCA1IG1pbGxpb24gZGF0YSBmaWx0ZXJpbmcgaW4gZGF0YSB6b29tLilcclxuICAgKi9cblxuXG4gIERhdGFTdG9yZS5wcm90b3R5cGUuc2VsZWN0UmFuZ2UgPSBmdW5jdGlvbiAocmFuZ2UpIHtcbiAgICB2YXIgbmV3U3RvcmUgPSB0aGlzLmNsb25lKCk7XG4gICAgdmFyIGxlbiA9IG5ld1N0b3JlLl9jb3VudDtcblxuICAgIGlmICghbGVuKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB2YXIgZGltcyA9IGtleXMocmFuZ2UpO1xuICAgIHZhciBkaW1TaXplID0gZGltcy5sZW5ndGg7XG5cbiAgICBpZiAoIWRpbVNpemUpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHZhciBvcmlnaW5hbENvdW50ID0gbmV3U3RvcmUuY291bnQoKTtcbiAgICB2YXIgQ3RvciA9IGdldEluZGljZXNDdG9yKG5ld1N0b3JlLl9yYXdDb3VudCk7XG4gICAgdmFyIG5ld0luZGljZXMgPSBuZXcgQ3RvcihvcmlnaW5hbENvdW50KTtcbiAgICB2YXIgb2Zmc2V0ID0gMDtcbiAgICB2YXIgZGltMCA9IGRpbXNbMF07XG4gICAgdmFyIG1pbiA9IHJhbmdlW2RpbTBdWzBdO1xuICAgIHZhciBtYXggPSByYW5nZVtkaW0wXVsxXTtcbiAgICB2YXIgc3RvcmVBcnIgPSBuZXdTdG9yZS5fY2h1bmtzO1xuICAgIHZhciBxdWlja0ZpbmlzaGVkID0gZmFsc2U7XG5cbiAgICBpZiAoIW5ld1N0b3JlLl9pbmRpY2VzKSB7XG4gICAgICAvLyBFeHRyZW1lIG9wdGltaXphdGlvbiBmb3IgY29tbW9uIGNhc2UuIEFib3V0IDJ4IGZhc3RlciBpbiBjaHJvbWUuXG4gICAgICB2YXIgaWR4ID0gMDtcblxuICAgICAgaWYgKGRpbVNpemUgPT09IDEpIHtcbiAgICAgICAgdmFyIGRpbVN0b3JhZ2UgPSBzdG9yZUFycltkaW1zWzBdXTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgdmFyIHZhbCA9IGRpbVN0b3JhZ2VbaV07IC8vIE5hTiB3aWxsIG5vdCBiZSBmaWx0ZXJlZC4gQ29uc2lkZXIgdGhlIGNhc2UsIGluIGxpbmUgY2hhcnQsIGVtcHR5XG4gICAgICAgICAgLy8gdmFsdWUgaW5kaWNhdGVzIHRoZSBsaW5lIHNob3VsZCBiZSBicm9rZW4uIEJ1dCBmb3IgdGhlIGNhc2UgbGlrZVxuICAgICAgICAgIC8vIHNjYXR0ZXIgcGxvdCwgYSBkYXRhIGl0ZW0gd2l0aCBlbXB0eSB2YWx1ZSB3aWxsIG5vdCBiZSByZW5kZXJlZCxcbiAgICAgICAgICAvLyBidXQgdGhlIGF4aXMgZXh0ZW50IG1heSBiZSBlZmZlY3RlZCBpZiBzb21lIG90aGVyIGRpbSBvZiB0aGUgZGF0YVxuICAgICAgICAgIC8vIGl0ZW0gaGFzIHZhbHVlLiBGb3J0dW5hdGVseSBpdCBpcyBub3QgYSBzaWduaWZpY2FudCBuZWdhdGl2ZSBlZmZlY3QuXG5cbiAgICAgICAgICBpZiAodmFsID49IG1pbiAmJiB2YWwgPD0gbWF4IHx8IGlzTmFOKHZhbCkpIHtcbiAgICAgICAgICAgIG5ld0luZGljZXNbb2Zmc2V0KytdID0gaWR4O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlkeCsrO1xuICAgICAgICB9XG5cbiAgICAgICAgcXVpY2tGaW5pc2hlZCA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKGRpbVNpemUgPT09IDIpIHtcbiAgICAgICAgdmFyIGRpbVN0b3JhZ2UgPSBzdG9yZUFycltkaW1zWzBdXTtcbiAgICAgICAgdmFyIGRpbVN0b3JhZ2UyID0gc3RvcmVBcnJbZGltc1sxXV07XG4gICAgICAgIHZhciBtaW4yID0gcmFuZ2VbZGltc1sxXV1bMF07XG4gICAgICAgIHZhciBtYXgyID0gcmFuZ2VbZGltc1sxXV1bMV07XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIHZhciB2YWwgPSBkaW1TdG9yYWdlW2ldO1xuICAgICAgICAgIHZhciB2YWwyID0gZGltU3RvcmFnZTJbaV07IC8vIERvIG5vdCBmaWx0ZXIgTmFOLCBzZWUgY29tbWVudCBhYm92ZS5cblxuICAgICAgICAgIGlmICgodmFsID49IG1pbiAmJiB2YWwgPD0gbWF4IHx8IGlzTmFOKHZhbCkpICYmICh2YWwyID49IG1pbjIgJiYgdmFsMiA8PSBtYXgyIHx8IGlzTmFOKHZhbDIpKSkge1xuICAgICAgICAgICAgbmV3SW5kaWNlc1tvZmZzZXQrK10gPSBpZHg7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWR4Kys7XG4gICAgICAgIH1cblxuICAgICAgICBxdWlja0ZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXF1aWNrRmluaXNoZWQpIHtcbiAgICAgIGlmIChkaW1TaXplID09PSAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3JpZ2luYWxDb3VudDsgaSsrKSB7XG4gICAgICAgICAgdmFyIHJhd0luZGV4ID0gbmV3U3RvcmUuZ2V0UmF3SW5kZXgoaSk7XG4gICAgICAgICAgdmFyIHZhbCA9IHN0b3JlQXJyW2RpbXNbMF1dW3Jhd0luZGV4XTsgLy8gRG8gbm90IGZpbHRlciBOYU4sIHNlZSBjb21tZW50IGFib3ZlLlxuXG4gICAgICAgICAgaWYgKHZhbCA+PSBtaW4gJiYgdmFsIDw9IG1heCB8fCBpc05hTih2YWwpKSB7XG4gICAgICAgICAgICBuZXdJbmRpY2VzW29mZnNldCsrXSA9IHJhd0luZGV4O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcmlnaW5hbENvdW50OyBpKyspIHtcbiAgICAgICAgICB2YXIga2VlcCA9IHRydWU7XG4gICAgICAgICAgdmFyIHJhd0luZGV4ID0gbmV3U3RvcmUuZ2V0UmF3SW5kZXgoaSk7XG5cbiAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGRpbVNpemU7IGsrKykge1xuICAgICAgICAgICAgdmFyIGRpbWsgPSBkaW1zW2tdO1xuICAgICAgICAgICAgdmFyIHZhbCA9IHN0b3JlQXJyW2RpbWtdW3Jhd0luZGV4XTsgLy8gRG8gbm90IGZpbHRlciBOYU4sIHNlZSBjb21tZW50IGFib3ZlLlxuXG4gICAgICAgICAgICBpZiAodmFsIDwgcmFuZ2VbZGlta11bMF0gfHwgdmFsID4gcmFuZ2VbZGlta11bMV0pIHtcbiAgICAgICAgICAgICAga2VlcCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChrZWVwKSB7XG4gICAgICAgICAgICBuZXdJbmRpY2VzW29mZnNldCsrXSA9IG5ld1N0b3JlLmdldFJhd0luZGV4KGkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gU2V0IGluZGljZXMgYWZ0ZXIgZmlsdGVyZWQuXG5cblxuICAgIGlmIChvZmZzZXQgPCBvcmlnaW5hbENvdW50KSB7XG4gICAgICBuZXdTdG9yZS5faW5kaWNlcyA9IG5ld0luZGljZXM7XG4gICAgfVxuXG4gICAgbmV3U3RvcmUuX2NvdW50ID0gb2Zmc2V0OyAvLyBSZXNldCBkYXRhIGV4dGVudFxuXG4gICAgbmV3U3RvcmUuX2V4dGVudCA9IFtdO1xuXG4gICAgbmV3U3RvcmUuX3VwZGF0ZUdldFJhd0lkeCgpO1xuXG4gICAgcmV0dXJuIG5ld1N0b3JlO1xuICB9OyAvLyAvKipcbiAgLy8gICogRGF0YSBtYXBwaW5nIHRvIGEgcGxhaW4gYXJyYXlcbiAgLy8gICovXG4gIC8vIG1hcEFycmF5KGRpbXM6IERpbWVuc2lvbkluZGV4W10sIGNiOiBNYXBBcnJheUNiKTogYW55W10ge1xuICAvLyAgICAgY29uc3QgcmVzdWx0OiBhbnlbXSA9IFtdO1xuICAvLyAgICAgdGhpcy5lYWNoKGRpbXMsIGZ1bmN0aW9uICgpIHtcbiAgLy8gICAgICAgICByZXN1bHQucHVzaChjYiAmJiAoY2IgYXMgTWFwQXJyYXlDYikuYXBwbHkobnVsbCwgYXJndW1lbnRzKSk7XG4gIC8vICAgICB9KTtcbiAgLy8gICAgIHJldHVybiByZXN1bHQ7XG4gIC8vIH1cblxuICAvKipcclxuICAgKiBEYXRhIG1hcHBpbmcgdG8gYSBuZXcgTGlzdCB3aXRoIGdpdmVuIGRpbWVuc2lvbnNcclxuICAgKi9cblxuXG4gIERhdGFTdG9yZS5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24gKGRpbXMsIGNiKSB7XG4gICAgLy8gVE9ETyBvbmx5IGNsb25lIHBpY2tlZCBjaHVua3MuXG4gICAgdmFyIHRhcmdldCA9IHRoaXMuY2xvbmUoZGltcyk7XG5cbiAgICB0aGlzLl91cGRhdGVEaW1zKHRhcmdldCwgZGltcywgY2IpO1xuXG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfTtcbiAgLyoqXHJcbiAgICogQGNhdXRpb24gRGFuZ2VyISEgT25seSB1c2VkIGluIGRhdGFTdGFjay5cclxuICAgKi9cblxuXG4gIERhdGFTdG9yZS5wcm90b3R5cGUubW9kaWZ5ID0gZnVuY3Rpb24gKGRpbXMsIGNiKSB7XG4gICAgdGhpcy5fdXBkYXRlRGltcyh0aGlzLCBkaW1zLCBjYik7XG4gIH07XG5cbiAgRGF0YVN0b3JlLnByb3RvdHlwZS5fdXBkYXRlRGltcyA9IGZ1bmN0aW9uICh0YXJnZXQsIGRpbXMsIGNiKSB7XG4gICAgdmFyIHRhcmdldENodW5rcyA9IHRhcmdldC5fY2h1bmtzO1xuICAgIHZhciB0bXBSZXRWYWx1ZSA9IFtdO1xuICAgIHZhciBkaW1TaXplID0gZGltcy5sZW5ndGg7XG4gICAgdmFyIGRhdGFDb3VudCA9IHRhcmdldC5jb3VudCgpO1xuICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICB2YXIgcmF3RXh0ZW50ID0gdGFyZ2V0Ll9yYXdFeHRlbnQ7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHJhd0V4dGVudFtkaW1zW2ldXSA9IGdldEluaXRpYWxFeHRlbnQoKTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBkYXRhSW5kZXggPSAwOyBkYXRhSW5kZXggPCBkYXRhQ291bnQ7IGRhdGFJbmRleCsrKSB7XG4gICAgICB2YXIgcmF3SW5kZXggPSB0YXJnZXQuZ2V0UmF3SW5kZXgoZGF0YUluZGV4KTtcblxuICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBkaW1TaXplOyBrKyspIHtcbiAgICAgICAgdmFsdWVzW2tdID0gdGFyZ2V0Q2h1bmtzW2RpbXNba11dW3Jhd0luZGV4XTtcbiAgICAgIH1cblxuICAgICAgdmFsdWVzW2RpbVNpemVdID0gZGF0YUluZGV4O1xuICAgICAgdmFyIHJldFZhbHVlID0gY2IgJiYgY2IuYXBwbHkobnVsbCwgdmFsdWVzKTtcblxuICAgICAgaWYgKHJldFZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgLy8gYSBudW1iZXIgb3Igc3RyaW5nIChpbiBvcmlkaW5hbCBkaW1lbnNpb24pP1xuICAgICAgICBpZiAodHlwZW9mIHJldFZhbHVlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgIHRtcFJldFZhbHVlWzBdID0gcmV0VmFsdWU7XG4gICAgICAgICAgcmV0VmFsdWUgPSB0bXBSZXRWYWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmV0VmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgZGltID0gZGltc1tpXTtcbiAgICAgICAgICB2YXIgdmFsID0gcmV0VmFsdWVbaV07XG4gICAgICAgICAgdmFyIHJhd0V4dGVudE9uRGltID0gcmF3RXh0ZW50W2RpbV07XG4gICAgICAgICAgdmFyIGRpbVN0b3JlID0gdGFyZ2V0Q2h1bmtzW2RpbV07XG5cbiAgICAgICAgICBpZiAoZGltU3RvcmUpIHtcbiAgICAgICAgICAgIGRpbVN0b3JlW3Jhd0luZGV4XSA9IHZhbDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodmFsIDwgcmF3RXh0ZW50T25EaW1bMF0pIHtcbiAgICAgICAgICAgIHJhd0V4dGVudE9uRGltWzBdID0gdmFsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh2YWwgPiByYXdFeHRlbnRPbkRpbVsxXSkge1xuICAgICAgICAgICAgcmF3RXh0ZW50T25EaW1bMV0gPSB2YWw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuICAvKipcclxuICAgKiBMYXJnZSBkYXRhIGRvd24gc2FtcGxpbmcgdXNpbmcgbGFyZ2VzdC10cmlhbmdsZS10aHJlZS1idWNrZXRzXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlRGltZW5zaW9uXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldENvdW50XHJcbiAgICovXG5cblxuICBEYXRhU3RvcmUucHJvdG90eXBlLmx0dGJEb3duU2FtcGxlID0gZnVuY3Rpb24gKHZhbHVlRGltZW5zaW9uLCByYXRlKSB7XG4gICAgdmFyIHRhcmdldCA9IHRoaXMuY2xvbmUoW3ZhbHVlRGltZW5zaW9uXSwgdHJ1ZSk7XG4gICAgdmFyIHRhcmdldFN0b3JhZ2UgPSB0YXJnZXQuX2NodW5rcztcbiAgICB2YXIgZGltU3RvcmUgPSB0YXJnZXRTdG9yYWdlW3ZhbHVlRGltZW5zaW9uXTtcbiAgICB2YXIgbGVuID0gdGhpcy5jb3VudCgpO1xuICAgIHZhciBzYW1wbGVkSW5kZXggPSAwO1xuICAgIHZhciBmcmFtZVNpemUgPSBNYXRoLmZsb29yKDEgLyByYXRlKTtcbiAgICB2YXIgY3VycmVudFJhd0luZGV4ID0gdGhpcy5nZXRSYXdJbmRleCgwKTtcbiAgICB2YXIgbWF4QXJlYTtcbiAgICB2YXIgYXJlYTtcbiAgICB2YXIgbmV4dFJhd0luZGV4O1xuICAgIHZhciBuZXdJbmRpY2VzID0gbmV3IChnZXRJbmRpY2VzQ3Rvcih0aGlzLl9yYXdDb3VudCkpKE1hdGgubWluKChNYXRoLmNlaWwobGVuIC8gZnJhbWVTaXplKSArIDIpICogMiwgbGVuKSk7IC8vIEZpcnN0IGZyYW1lIHVzZSB0aGUgZmlyc3QgZGF0YS5cblxuICAgIG5ld0luZGljZXNbc2FtcGxlZEluZGV4KytdID0gY3VycmVudFJhd0luZGV4O1xuXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW4gLSAxOyBpICs9IGZyYW1lU2l6ZSkge1xuICAgICAgdmFyIG5leHRGcmFtZVN0YXJ0ID0gTWF0aC5taW4oaSArIGZyYW1lU2l6ZSwgbGVuIC0gMSk7XG4gICAgICB2YXIgbmV4dEZyYW1lRW5kID0gTWF0aC5taW4oaSArIGZyYW1lU2l6ZSAqIDIsIGxlbik7XG4gICAgICB2YXIgYXZnWCA9IChuZXh0RnJhbWVFbmQgKyBuZXh0RnJhbWVTdGFydCkgLyAyO1xuICAgICAgdmFyIGF2Z1kgPSAwO1xuXG4gICAgICBmb3IgKHZhciBpZHggPSBuZXh0RnJhbWVTdGFydDsgaWR4IDwgbmV4dEZyYW1lRW5kOyBpZHgrKykge1xuICAgICAgICB2YXIgcmF3SW5kZXggPSB0aGlzLmdldFJhd0luZGV4KGlkeCk7XG4gICAgICAgIHZhciB5ID0gZGltU3RvcmVbcmF3SW5kZXhdO1xuXG4gICAgICAgIGlmIChpc05hTih5KSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgYXZnWSArPSB5O1xuICAgICAgfVxuXG4gICAgICBhdmdZIC89IG5leHRGcmFtZUVuZCAtIG5leHRGcmFtZVN0YXJ0O1xuICAgICAgdmFyIGZyYW1lU3RhcnQgPSBpO1xuICAgICAgdmFyIGZyYW1lRW5kID0gTWF0aC5taW4oaSArIGZyYW1lU2l6ZSwgbGVuKTtcbiAgICAgIHZhciBwb2ludEFYID0gaSAtIDE7XG4gICAgICB2YXIgcG9pbnRBWSA9IGRpbVN0b3JlW2N1cnJlbnRSYXdJbmRleF07XG4gICAgICBtYXhBcmVhID0gLTE7XG4gICAgICBuZXh0UmF3SW5kZXggPSBmcmFtZVN0YXJ0O1xuICAgICAgdmFyIGZpcnN0TmFOSW5kZXggPSAtMTtcbiAgICAgIHZhciBjb3VudE5hTiA9IDA7IC8vIEZpbmQgYSBwb2ludCBmcm9tIGN1cnJlbnQgZnJhbWUgdGhhdCBjb25zdHJ1Y3QgYSB0cmlhbmdsZSB3aXRoIGxhcmdlc3QgYXJlYSB3aXRoIHByZXZpb3VzIHNlbGVjdGVkIHBvaW50XG4gICAgICAvLyBBbmQgdGhlIGF2ZXJhZ2Ugb2YgbmV4dCBmcmFtZS5cblxuICAgICAgZm9yICh2YXIgaWR4ID0gZnJhbWVTdGFydDsgaWR4IDwgZnJhbWVFbmQ7IGlkeCsrKSB7XG4gICAgICAgIHZhciByYXdJbmRleCA9IHRoaXMuZ2V0UmF3SW5kZXgoaWR4KTtcbiAgICAgICAgdmFyIHkgPSBkaW1TdG9yZVtyYXdJbmRleF07XG5cbiAgICAgICAgaWYgKGlzTmFOKHkpKSB7XG4gICAgICAgICAgY291bnROYU4rKztcblxuICAgICAgICAgIGlmIChmaXJzdE5hTkluZGV4IDwgMCkge1xuICAgICAgICAgICAgZmlyc3ROYU5JbmRleCA9IHJhd0luZGV4O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9IC8vIENhbGN1bGF0ZSB0cmlhbmdsZSBhcmVhIG92ZXIgdGhyZWUgYnVja2V0c1xuXG5cbiAgICAgICAgYXJlYSA9IE1hdGguYWJzKChwb2ludEFYIC0gYXZnWCkgKiAoeSAtIHBvaW50QVkpIC0gKHBvaW50QVggLSBpZHgpICogKGF2Z1kgLSBwb2ludEFZKSk7XG5cbiAgICAgICAgaWYgKGFyZWEgPiBtYXhBcmVhKSB7XG4gICAgICAgICAgbWF4QXJlYSA9IGFyZWE7XG4gICAgICAgICAgbmV4dFJhd0luZGV4ID0gcmF3SW5kZXg7IC8vIE5leHQgYSBpcyB0aGlzIGJcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY291bnROYU4gPiAwICYmIGNvdW50TmFOIDwgZnJhbWVFbmQgLSBmcmFtZVN0YXJ0KSB7XG4gICAgICAgIC8vIEFwcGVuZCBmaXJzdCBOYU4gcG9pbnQgaW4gZXZlcnkgYnVja2V0LlxuICAgICAgICAvLyBJdCBpcyBuZWNlc3NhcnkgdG8gZW5zdXJlIHRoZSBjb3JyZWN0IG9yZGVyIG9mIGluZGljZXMuXG4gICAgICAgIG5ld0luZGljZXNbc2FtcGxlZEluZGV4KytdID0gTWF0aC5taW4oZmlyc3ROYU5JbmRleCwgbmV4dFJhd0luZGV4KTtcbiAgICAgICAgbmV4dFJhd0luZGV4ID0gTWF0aC5tYXgoZmlyc3ROYU5JbmRleCwgbmV4dFJhd0luZGV4KTtcbiAgICAgIH1cblxuICAgICAgbmV3SW5kaWNlc1tzYW1wbGVkSW5kZXgrK10gPSBuZXh0UmF3SW5kZXg7XG4gICAgICBjdXJyZW50UmF3SW5kZXggPSBuZXh0UmF3SW5kZXg7IC8vIFRoaXMgYSBpcyB0aGUgbmV4dCBhIChjaG9zZW4gYilcbiAgICB9IC8vIEZpcnN0IGZyYW1lIHVzZSB0aGUgbGFzdCBkYXRhLlxuXG5cbiAgICBuZXdJbmRpY2VzW3NhbXBsZWRJbmRleCsrXSA9IHRoaXMuZ2V0UmF3SW5kZXgobGVuIC0gMSk7XG4gICAgdGFyZ2V0Ll9jb3VudCA9IHNhbXBsZWRJbmRleDtcbiAgICB0YXJnZXQuX2luZGljZXMgPSBuZXdJbmRpY2VzO1xuICAgIHRhcmdldC5nZXRSYXdJbmRleCA9IHRoaXMuX2dldFJhd0lkeDtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9O1xuICAvKipcclxuICAgKiBMYXJnZSBkYXRhIGRvd24gc2FtcGxpbmcgb24gZ2l2ZW4gZGltZW5zaW9uXHJcbiAgICogQHBhcmFtIHNhbXBsZUluZGV4IFNhbXBsZSBpbmRleCBmb3IgbmFtZSBhbmQgaWRcclxuICAgKi9cblxuXG4gIERhdGFTdG9yZS5wcm90b3R5cGUuZG93blNhbXBsZSA9IGZ1bmN0aW9uIChkaW1lbnNpb24sIHJhdGUsIHNhbXBsZVZhbHVlLCBzYW1wbGVJbmRleCkge1xuICAgIHZhciB0YXJnZXQgPSB0aGlzLmNsb25lKFtkaW1lbnNpb25dLCB0cnVlKTtcbiAgICB2YXIgdGFyZ2V0U3RvcmFnZSA9IHRhcmdldC5fY2h1bmtzO1xuICAgIHZhciBmcmFtZVZhbHVlcyA9IFtdO1xuICAgIHZhciBmcmFtZVNpemUgPSBNYXRoLmZsb29yKDEgLyByYXRlKTtcbiAgICB2YXIgZGltU3RvcmUgPSB0YXJnZXRTdG9yYWdlW2RpbWVuc2lvbl07XG4gICAgdmFyIGxlbiA9IHRoaXMuY291bnQoKTtcbiAgICB2YXIgcmF3RXh0ZW50T25EaW0gPSB0YXJnZXQuX3Jhd0V4dGVudFtkaW1lbnNpb25dID0gZ2V0SW5pdGlhbEV4dGVudCgpO1xuICAgIHZhciBuZXdJbmRpY2VzID0gbmV3IChnZXRJbmRpY2VzQ3Rvcih0aGlzLl9yYXdDb3VudCkpKE1hdGguY2VpbChsZW4gLyBmcmFtZVNpemUpKTtcbiAgICB2YXIgb2Zmc2V0ID0gMDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IGZyYW1lU2l6ZSkge1xuICAgICAgLy8gTGFzdCBmcmFtZVxuICAgICAgaWYgKGZyYW1lU2l6ZSA+IGxlbiAtIGkpIHtcbiAgICAgICAgZnJhbWVTaXplID0gbGVuIC0gaTtcbiAgICAgICAgZnJhbWVWYWx1ZXMubGVuZ3RoID0gZnJhbWVTaXplO1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBrID0gMDsgayA8IGZyYW1lU2l6ZTsgaysrKSB7XG4gICAgICAgIHZhciBkYXRhSWR4ID0gdGhpcy5nZXRSYXdJbmRleChpICsgayk7XG4gICAgICAgIGZyYW1lVmFsdWVzW2tdID0gZGltU3RvcmVbZGF0YUlkeF07XG4gICAgICB9XG5cbiAgICAgIHZhciB2YWx1ZSA9IHNhbXBsZVZhbHVlKGZyYW1lVmFsdWVzKTtcbiAgICAgIHZhciBzYW1wbGVGcmFtZUlkeCA9IHRoaXMuZ2V0UmF3SW5kZXgoTWF0aC5taW4oaSArIHNhbXBsZUluZGV4KGZyYW1lVmFsdWVzLCB2YWx1ZSkgfHwgMCwgbGVuIC0gMSkpOyAvLyBPbmx5IHdyaXRlIHZhbHVlIG9uIHRoZSBmaWx0ZXJlZCBkYXRhXG5cbiAgICAgIGRpbVN0b3JlW3NhbXBsZUZyYW1lSWR4XSA9IHZhbHVlO1xuXG4gICAgICBpZiAodmFsdWUgPCByYXdFeHRlbnRPbkRpbVswXSkge1xuICAgICAgICByYXdFeHRlbnRPbkRpbVswXSA9IHZhbHVlO1xuICAgICAgfVxuXG4gICAgICBpZiAodmFsdWUgPiByYXdFeHRlbnRPbkRpbVsxXSkge1xuICAgICAgICByYXdFeHRlbnRPbkRpbVsxXSA9IHZhbHVlO1xuICAgICAgfVxuXG4gICAgICBuZXdJbmRpY2VzW29mZnNldCsrXSA9IHNhbXBsZUZyYW1lSWR4O1xuICAgIH1cblxuICAgIHRhcmdldC5fY291bnQgPSBvZmZzZXQ7XG4gICAgdGFyZ2V0Ll9pbmRpY2VzID0gbmV3SW5kaWNlcztcblxuICAgIHRhcmdldC5fdXBkYXRlR2V0UmF3SWR4KCk7XG5cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9O1xuICAvKipcclxuICAgKiBEYXRhIGl0ZXJhdGlvblxyXG4gICAqIEBwYXJhbSBjdHggZGVmYXVsdCB0aGlzXHJcbiAgICogQGV4YW1wbGVcclxuICAgKiAgbGlzdC5lYWNoKCd4JywgZnVuY3Rpb24gKHgsIGlkeCkge30pO1xyXG4gICAqICBsaXN0LmVhY2goWyd4JywgJ3knXSwgZnVuY3Rpb24gKHgsIHksIGlkeCkge30pO1xyXG4gICAqICBsaXN0LmVhY2goZnVuY3Rpb24gKGlkeCkge30pXHJcbiAgICovXG5cblxuICBEYXRhU3RvcmUucHJvdG90eXBlLmVhY2ggPSBmdW5jdGlvbiAoZGltcywgY2IpIHtcbiAgICBpZiAoIXRoaXMuX2NvdW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGRpbVNpemUgPSBkaW1zLmxlbmd0aDtcbiAgICB2YXIgY2h1bmtzID0gdGhpcy5fY2h1bmtzO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuY291bnQoKTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB2YXIgcmF3SWR4ID0gdGhpcy5nZXRSYXdJbmRleChpKTsgLy8gU2ltcGxlIG9wdGltaXphdGlvblxuXG4gICAgICBzd2l0Y2ggKGRpbVNpemUpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIGNiKGkpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBjYihjaHVua3NbZGltc1swXV1bcmF3SWR4XSwgaSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIGNiKGNodW5rc1tkaW1zWzBdXVtyYXdJZHhdLCBjaHVua3NbZGltc1sxXV1bcmF3SWR4XSwgaSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB2YXIgayA9IDA7XG4gICAgICAgICAgdmFyIHZhbHVlID0gW107XG5cbiAgICAgICAgICBmb3IgKDsgayA8IGRpbVNpemU7IGsrKykge1xuICAgICAgICAgICAgdmFsdWVba10gPSBjaHVua3NbZGltc1trXV1bcmF3SWR4XTtcbiAgICAgICAgICB9IC8vIEluZGV4XG5cblxuICAgICAgICAgIHZhbHVlW2tdID0gaTtcbiAgICAgICAgICBjYi5hcHBseShudWxsLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICAvKipcclxuICAgKiBHZXQgZXh0ZW50IG9mIGRhdGEgaW4gb25lIGRpbWVuc2lvblxyXG4gICAqL1xuXG5cbiAgRGF0YVN0b3JlLnByb3RvdHlwZS5nZXREYXRhRXh0ZW50ID0gZnVuY3Rpb24gKGRpbSkge1xuICAgIC8vIE1ha2Ugc3VyZSB1c2UgY29uY3JldGUgZGltIGFzIGNhY2hlIG5hbWUuXG4gICAgdmFyIGRpbURhdGEgPSB0aGlzLl9jaHVua3NbZGltXTtcbiAgICB2YXIgaW5pdGlhbEV4dGVudCA9IGdldEluaXRpYWxFeHRlbnQoKTtcblxuICAgIGlmICghZGltRGF0YSkge1xuICAgICAgcmV0dXJuIGluaXRpYWxFeHRlbnQ7XG4gICAgfSAvLyBNYWtlIG1vcmUgc3RyaWN0IGNoZWNraW5ncyB0byBlbnN1cmUgaGl0dGluZyBjYWNoZS5cblxuXG4gICAgdmFyIGN1cnJFbmQgPSB0aGlzLmNvdW50KCk7IC8vIENvbnNpZGVyIHRoZSBtb3N0IGNhc2VzIHdoZW4gdXNpbmcgZGF0YSB6b29tLCBgZ2V0RGF0YUV4dGVudGBcbiAgICAvLyBoYXBwZW5lZCBiZWZvcmUgZmlsdGVyaW5nLiBXZSBjYWNoZSByYXcgZXh0ZW50LCB3aGljaCBpcyBub3RcbiAgICAvLyBuZWNlc3NhcnkgdG8gYmUgY2xlYXJlZCBhbmQgcmVjYWxjdWxhdGVkIHdoZW4gcmVzdG9yZSBkYXRhLlxuXG4gICAgdmFyIHVzZVJhdyA9ICF0aGlzLl9pbmRpY2VzO1xuICAgIHZhciBkaW1FeHRlbnQ7XG5cbiAgICBpZiAodXNlUmF3KSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmF3RXh0ZW50W2RpbV0uc2xpY2UoKTtcbiAgICB9XG5cbiAgICBkaW1FeHRlbnQgPSB0aGlzLl9leHRlbnRbZGltXTtcblxuICAgIGlmIChkaW1FeHRlbnQpIHtcbiAgICAgIHJldHVybiBkaW1FeHRlbnQuc2xpY2UoKTtcbiAgICB9XG5cbiAgICBkaW1FeHRlbnQgPSBpbml0aWFsRXh0ZW50O1xuICAgIHZhciBtaW4gPSBkaW1FeHRlbnRbMF07XG4gICAgdmFyIG1heCA9IGRpbUV4dGVudFsxXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY3VyckVuZDsgaSsrKSB7XG4gICAgICB2YXIgcmF3SWR4ID0gdGhpcy5nZXRSYXdJbmRleChpKTtcbiAgICAgIHZhciB2YWx1ZSA9IGRpbURhdGFbcmF3SWR4XTtcbiAgICAgIHZhbHVlIDwgbWluICYmIChtaW4gPSB2YWx1ZSk7XG4gICAgICB2YWx1ZSA+IG1heCAmJiAobWF4ID0gdmFsdWUpO1xuICAgIH1cblxuICAgIGRpbUV4dGVudCA9IFttaW4sIG1heF07XG4gICAgdGhpcy5fZXh0ZW50W2RpbV0gPSBkaW1FeHRlbnQ7XG4gICAgcmV0dXJuIGRpbUV4dGVudDtcbiAgfTtcbiAgLyoqXHJcbiAgICogR2V0IHJhdyBkYXRhIGl0ZW1cclxuICAgKi9cblxuXG4gIERhdGFTdG9yZS5wcm90b3R5cGUuZ2V0UmF3RGF0YUl0ZW0gPSBmdW5jdGlvbiAoaWR4KSB7XG4gICAgdmFyIHJhd0lkeCA9IHRoaXMuZ2V0UmF3SW5kZXgoaWR4KTtcblxuICAgIGlmICghdGhpcy5fcHJvdmlkZXIucGVyc2lzdGVudCkge1xuICAgICAgdmFyIHZhbCA9IFtdO1xuICAgICAgdmFyIGNodW5rcyA9IHRoaXMuX2NodW5rcztcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaHVua3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsLnB1c2goY2h1bmtzW2ldW3Jhd0lkeF0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5fcHJvdmlkZXIuZ2V0SXRlbShyYXdJZHgpO1xuICAgIH1cbiAgfTtcbiAgLyoqXHJcbiAgICogQ2xvbmUgc2hhbGxvdy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBjbG9uZWREaW1zIERldGVybWluZSB3aGljaCBkaW1zIHRvIGNsb25lLiBXaWxsIHNoYXJlIHRoZSBkYXRhIGlmIG5vdCBzcGVjaWZpZWQuXHJcbiAgICovXG5cblxuICBEYXRhU3RvcmUucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKGNsb25lZERpbXMsIGlnbm9yZUluZGljZXMpIHtcbiAgICB2YXIgdGFyZ2V0ID0gbmV3IERhdGFTdG9yZSgpO1xuICAgIHZhciBjaHVua3MgPSB0aGlzLl9jaHVua3M7XG4gICAgdmFyIGNsb25lZERpbXNNYXAgPSBjbG9uZWREaW1zICYmIHJlZHVjZShjbG9uZWREaW1zLCBmdW5jdGlvbiAob2JqLCBkaW1JZHgpIHtcbiAgICAgIG9ialtkaW1JZHhdID0gdHJ1ZTtcbiAgICAgIHJldHVybiBvYmo7XG4gICAgfSwge30pO1xuXG4gICAgaWYgKGNsb25lZERpbXNNYXApIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2h1bmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIE5vdCBjbG9uZSBpZiBkaW0gaXMgbm90IHBpY2tlZC5cbiAgICAgICAgdGFyZ2V0Ll9jaHVua3NbaV0gPSAhY2xvbmVkRGltc01hcFtpXSA/IGNodW5rc1tpXSA6IGNsb25lQ2h1bmsoY2h1bmtzW2ldKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0Ll9jaHVua3MgPSBjaHVua3M7XG4gICAgfVxuXG4gICAgdGhpcy5fY29weUNvbW1vblByb3BzKHRhcmdldCk7XG5cbiAgICBpZiAoIWlnbm9yZUluZGljZXMpIHtcbiAgICAgIHRhcmdldC5faW5kaWNlcyA9IHRoaXMuX2Nsb25lSW5kaWNlcygpO1xuICAgIH1cblxuICAgIHRhcmdldC5fdXBkYXRlR2V0UmF3SWR4KCk7XG5cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9O1xuXG4gIERhdGFTdG9yZS5wcm90b3R5cGUuX2NvcHlDb21tb25Qcm9wcyA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICB0YXJnZXQuX2NvdW50ID0gdGhpcy5fY291bnQ7XG4gICAgdGFyZ2V0Ll9yYXdDb3VudCA9IHRoaXMuX3Jhd0NvdW50O1xuICAgIHRhcmdldC5fcHJvdmlkZXIgPSB0aGlzLl9wcm92aWRlcjtcbiAgICB0YXJnZXQuX2RpbWVuc2lvbnMgPSB0aGlzLl9kaW1lbnNpb25zO1xuICAgIHRhcmdldC5fZXh0ZW50ID0gY2xvbmUodGhpcy5fZXh0ZW50KTtcbiAgICB0YXJnZXQuX3Jhd0V4dGVudCA9IGNsb25lKHRoaXMuX3Jhd0V4dGVudCk7XG4gIH07XG5cbiAgRGF0YVN0b3JlLnByb3RvdHlwZS5fY2xvbmVJbmRpY2VzID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9pbmRpY2VzKSB7XG4gICAgICB2YXIgQ3RvciA9IHRoaXMuX2luZGljZXMuY29uc3RydWN0b3I7XG4gICAgICB2YXIgaW5kaWNlcyA9IHZvaWQgMDtcblxuICAgICAgaWYgKEN0b3IgPT09IEFycmF5KSB7XG4gICAgICAgIHZhciB0aGlzQ291bnQgPSB0aGlzLl9pbmRpY2VzLmxlbmd0aDtcbiAgICAgICAgaW5kaWNlcyA9IG5ldyBDdG9yKHRoaXNDb3VudCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzQ291bnQ7IGkrKykge1xuICAgICAgICAgIGluZGljZXNbaV0gPSB0aGlzLl9pbmRpY2VzW2ldO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbmRpY2VzID0gbmV3IEN0b3IodGhpcy5faW5kaWNlcyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpbmRpY2VzO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIERhdGFTdG9yZS5wcm90b3R5cGUuX2dldFJhd0lkeElkZW50aXR5ID0gZnVuY3Rpb24gKGlkeCkge1xuICAgIHJldHVybiBpZHg7XG4gIH07XG5cbiAgRGF0YVN0b3JlLnByb3RvdHlwZS5fZ2V0UmF3SWR4ID0gZnVuY3Rpb24gKGlkeCkge1xuICAgIGlmIChpZHggPCB0aGlzLl9jb3VudCAmJiBpZHggPj0gMCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2luZGljZXNbaWR4XTtcbiAgICB9XG5cbiAgICByZXR1cm4gLTE7XG4gIH07XG5cbiAgRGF0YVN0b3JlLnByb3RvdHlwZS5fdXBkYXRlR2V0UmF3SWR4ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZ2V0UmF3SW5kZXggPSB0aGlzLl9pbmRpY2VzID8gdGhpcy5fZ2V0UmF3SWR4IDogdGhpcy5fZ2V0UmF3SWR4SWRlbnRpdHk7XG4gIH07XG5cbiAgRGF0YVN0b3JlLmludGVybmFsRmllbGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gZ2V0RGltVmFsdWVTaW1wbHkoZGF0YUl0ZW0sIHByb3BlcnR5LCBkYXRhSW5kZXgsIGRpbUluZGV4KSB7XG4gICAgICByZXR1cm4gcGFyc2VEYXRhVmFsdWUoZGF0YUl0ZW1bZGltSW5kZXhdLCB0aGlzLl9kaW1lbnNpb25zW2RpbUluZGV4XSk7XG4gICAgfVxuXG4gICAgZGVmYXVsdERpbVZhbHVlR2V0dGVycyA9IHtcbiAgICAgIGFycmF5Um93czogZ2V0RGltVmFsdWVTaW1wbHksXG4gICAgICBvYmplY3RSb3dzOiBmdW5jdGlvbiAoZGF0YUl0ZW0sIHByb3BlcnR5LCBkYXRhSW5kZXgsIGRpbUluZGV4KSB7XG4gICAgICAgIHJldHVybiBwYXJzZURhdGFWYWx1ZShkYXRhSXRlbVtwcm9wZXJ0eV0sIHRoaXMuX2RpbWVuc2lvbnNbZGltSW5kZXhdKTtcbiAgICAgIH0sXG4gICAgICBrZXllZENvbHVtbnM6IGdldERpbVZhbHVlU2ltcGx5LFxuICAgICAgb3JpZ2luYWw6IGZ1bmN0aW9uIChkYXRhSXRlbSwgcHJvcGVydHksIGRhdGFJbmRleCwgZGltSW5kZXgpIHtcbiAgICAgICAgLy8gUGVyZm9ybWFuY2Ugc2Vuc2l0aXZlLCBkbyBub3QgdXNlIG1vZGVsVXRpbC5nZXREYXRhSXRlbVZhbHVlLlxuICAgICAgICAvLyBJZiBkYXRhSXRlbSBpcyBhbiBwbGFpbiBvYmplY3Qgd2l0aCBubyB2YWx1ZSBmaWVsZCwgdGhlIGxldCBgdmFsdWVgXG4gICAgICAgIC8vIHdpbGwgYmUgYXNzaWduZWQgd2l0aCB0aGUgb2JqZWN0LCBidXQgaXQgd2lsbCBiZSB0cmVhZCBjb3JyZWN0bHlcbiAgICAgICAgLy8gaW4gdGhlIGBjb252ZXJ0VmFsdWVgLlxuICAgICAgICB2YXIgdmFsdWUgPSBkYXRhSXRlbSAmJiAoZGF0YUl0ZW0udmFsdWUgPT0gbnVsbCA/IGRhdGFJdGVtIDogZGF0YUl0ZW0udmFsdWUpO1xuICAgICAgICByZXR1cm4gcGFyc2VEYXRhVmFsdWUodmFsdWUgaW5zdGFuY2VvZiBBcnJheSA/IHZhbHVlW2RpbUluZGV4XSAvLyBJZiB2YWx1ZSBpcyBhIHNpbmdsZSBudW1iZXIgb3Igc29tZXRoaW5nIGVsc2Ugbm90IGFycmF5LlxuICAgICAgICA6IHZhbHVlLCB0aGlzLl9kaW1lbnNpb25zW2RpbUluZGV4XSk7XG4gICAgICB9LFxuICAgICAgdHlwZWRBcnJheTogZnVuY3Rpb24gKGRhdGFJdGVtLCBwcm9wZXJ0eSwgZGF0YUluZGV4LCBkaW1JbmRleCkge1xuICAgICAgICByZXR1cm4gZGF0YUl0ZW1bZGltSW5kZXhdO1xuICAgICAgfVxuICAgIH07XG4gIH0oKTtcblxuICByZXR1cm4gRGF0YVN0b3JlO1xufSgpO1xuXG5leHBvcnQgZGVmYXVsdCBEYXRhU3RvcmU7IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgeyBzZXRBc1ByaW1pdGl2ZSwgbWFwLCBpc1R5cGVkQXJyYXksIGFzc2VydCwgZWFjaCwgcmV0cmlldmUyIH0gZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbmltcG9ydCB7IGNyZWF0ZVNvdXJjZSwgY2xvbmVTb3VyY2VTaGFsbG93IH0gZnJvbSAnLi4vU291cmNlLmpzJztcbmltcG9ydCB7IFNPVVJDRV9GT1JNQVRfVFlQRURfQVJSQVksIFNPVVJDRV9GT1JNQVRfT1JJR0lOQUwgfSBmcm9tICcuLi8uLi91dGlsL3R5cGVzLmpzJztcbmltcG9ydCB7IHF1ZXJ5U2VyaWVzVXBzdHJlYW1EYXRhc2V0TW9kZWwsIHF1ZXJ5RGF0YXNldFVwc3RyZWFtRGF0YXNldE1vZGVscyB9IGZyb20gJy4vc291cmNlSGVscGVyLmpzJztcbmltcG9ydCB7IGFwcGx5RGF0YVRyYW5zZm9ybSB9IGZyb20gJy4vdHJhbnNmb3JtLmpzJztcbmltcG9ydCBEYXRhU3RvcmUgZnJvbSAnLi4vRGF0YVN0b3JlLmpzJztcbmltcG9ydCB7IERlZmF1bHREYXRhUHJvdmlkZXIgfSBmcm9tICcuL2RhdGFQcm92aWRlci5qcyc7XG4vKipcclxuICogW1JFUVVJUkVNRU5UX01FTU9dOlxyXG4gKiAoMCkgYG1ldGFSYXdPcHRpb25gIG1lYW5zIGBkaW1lbnNpb25zYC9gc291cmNlSGVhZGVyYC9gc2VyaWVzTGF5b3V0QnlgIGluIHJhdyBvcHRpb24uXHJcbiAqICgxKSBLZWVwIHN1cHBvcnQgdGhlIGZlYXR1cmU6IGBtZXRhUmF3T3B0aW9uYCBjYW4gYmUgc3BlY2lmaWVkIGJvdGggb24gYHNlcmllc2AgYW5kXHJcbiAqIGByb290LWRhdGFzZXRgLiBUaGVtIG9uIGBzZXJpZXNgIGhhcyBoaWdoZXIgcHJpb3JpdHkuXHJcbiAqICgyKSBEbyBub3Qgc3VwcG9ydCB0byBzZXQgYG1ldGFSYXdPcHRpb25gIG9uIGEgYG5vbi1yb290LWRhdGFzZXRgLCBiZWNhdXNlIGl0IG1pZ2h0XHJcbiAqIGNvbmZ1c2UgdXNlcnM6IHdoZXRoZXIgdGhvc2UgcHJvcHMgaW5kaWNhdGUgaG93IHRvIHZpc2l0IHRoZSB1cHN0cmVhbSBzb3VyY2Ugb3IgdmlzaXRcclxuICogdGhlIHRyYW5zZm9ybSByZXN1bHQgc291cmNlLCBhbmQgc29tZSB0cmFuc2Zvcm1zIGhhcyBub3RoaW5nIHRvIGRvIHdpdGggdGhlc2UgcHJvcHMsXHJcbiAqIGFuZCBzb21lIHRyYW5zZm9ybXMgbWlnaHQgaGF2ZSBtdWx0aXBsZSB1cHN0cmVhbS5cclxuICogKDMpIFRyYW5zZm9ybXMgc2hvdWxkIHNwZWNpZnkgYG1ldGFSYXdPcHRpb25gIGluIGVhY2ggb3V0cHV0LCBqdXN0IGxpa2UgdGhleSBjYW4gYmVcclxuICogZGVjbGFyZWQgaW4gYHJvb3QtZGF0YXNldGAuXHJcbiAqICg0KSBBdCBwcmVzZW50IG9ubHkgc3VwcG9ydCB2aXNpdCBzb3VyY2UgaW4gYFNFUklFU19MQVlPVVRfQllfQ09MVU1OYCBpbiB0cmFuc2Zvcm1zLlxyXG4gKiBUaGF0IGlzIGZvciByZWR1Y2luZyBjb21wbGV4aXR5IGluIHRyYW5zZm9ybXMuXHJcbiAqIFBFTkRJTkc6IFdoZXRoZXIgdG8gcHJvdmlkZSB0cmFuc3Bvc2l0aW9uIHRyYW5zZm9ybT9cclxuICpcclxuICogW0lNUExFTUVOVEFJT05fTUVNT106XHJcbiAqIFwic291cmNlVmlzaXRDb25maWdcIiBhcmUgY2FsY3VsYXRlZCBmcm9tIGBtZXRhUmF3T3B0aW9uYCBhbmQgYGRhdGFgLlxyXG4gKiBUaGV5IHdpbGwgbm90IGJlIGNhbGN1bGF0ZWQgdW50aWwgYHNvdXJjZWAgaXMgYWJvdXQgdG8gYmUgdmlzaXRlZCAodG8gcHJldmVudCBmcm9tXHJcbiAqIGR1cGxpY2F0ZSBjYWxjdWF0aW9uKS4gYHNvdXJjZWAgaXMgdmlzaXRlZCBvbmx5IGluIHNlcmllcyBhbmQgaW5wdXQgdG8gdHJhbnNmb3Jtcy5cclxuICpcclxuICogW0RJTUVOU0lPTl9JTkhFUklUX1JVTEVdOlxyXG4gKiBCeSBkZWZhdWx0IHRoZSBkaW1lbnNpb25zIGFyZSBpbmhlcml0ZWQgZnJvbSBhbmNlc3RvcnMsIHVubGVzcyBhIHRyYW5zZm9ybSByZXR1cm5cclxuICogYSBuZXcgZGltZW5zaW9ucyBkZWZpbml0aW9uLlxyXG4gKiBDb25zaWRlciB0aGUgY2FzZTpcclxuICogYGBganNcclxuICogZGF0YXNldDogW3tcclxuICogICAgIHNvdXJjZTogWyBbJ1Byb2R1Y3QnLCAnU2FsZXMnLCAnUHJpc2UnXSwgWydDb29raWVzJywgMzIxLCA0NC4yMV0sIC4uLl1cclxuICogfSwge1xyXG4gKiAgICAgdHJhbnNmb3JtOiB7IHR5cGU6ICdmaWx0ZXInLCAuLi4gfVxyXG4gKiB9XVxyXG4gKiBkYXRhc2V0OiBbe1xyXG4gKiAgICAgZGltZW5zaW9uOiBbJ1Byb2R1Y3QnLCAnU2FsZXMnLCAnUHJpc2UnXSxcclxuICogICAgIHNvdXJjZTogWyBbJ0Nvb2tpZXMnLCAzMjEsIDQ0LjIxXSwgLi4uXVxyXG4gKiB9LCB7XHJcbiAqICAgICB0cmFuc2Zvcm06IHsgdHlwZTogJ2ZpbHRlcicsIC4uLiB9XHJcbiAqIH1dXHJcbiAqIGBgYFxyXG4gKiBUaGUgdHdvIHR5cGVzIG9mIG9wdGlvbiBzaG91bGQgaGF2ZSB0aGUgc2FtZSBiZWhhdmlvciBhZnRlciB0cmFuc2Zvcm0uXHJcbiAqXHJcbiAqXHJcbiAqIFtTQ0VOQVJJT106XHJcbiAqICgxKSBQcm92aWRlIHNvdXJjZSBkYXRhIGRpcmVjdGx5OlxyXG4gKiBgYGBqc1xyXG4gKiBzZXJpZXM6IHtcclxuICogICAgIGVuY29kZTogey4uLn0sXHJcbiAqICAgICBkaW1lbnNpb25zOiBbLi4uXVxyXG4gKiAgICAgc2VyaWVzTGF5b3V0Qnk6ICdyb3cnLFxyXG4gKiAgICAgZGF0YTogW1suLi5dXVxyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKiAoMikgU2VyaWVzIHJlZmVyIHRvIGRhdGFzZXQuXHJcbiAqIGBgYGpzXHJcbiAqIHNlcmllczogW3tcclxuICogICAgIGVuY29kZTogey4uLn1cclxuICogICAgIC8vIElnbm9yZSBkYXRhc2V0SW5kZXggbWVhbnMgYGRhdGFzZXRJbmRleDogMGBcclxuICogICAgIC8vIGFuZCB0aGUgZGltZW5zaW9ucyBkZWZpbmF0aW9uIGluIGRhdGFzZXQgaXMgdXNlZFxyXG4gKiB9LCB7XHJcbiAqICAgICBlbmNvZGU6IHsuLi59LFxyXG4gKiAgICAgc2VyaWVzTGF5b3V0Qnk6ICdjb2x1bW4nLFxyXG4gKiAgICAgZGF0YXNldEluZGV4OiAxXHJcbiAqIH1dXHJcbiAqIGBgYFxyXG4gKiAoMykgZGF0YXNldCB0cmFuc2Zvcm1cclxuICogYGBganNcclxuICogZGF0YXNldDogW3tcclxuICogICAgIHNvdXJjZTogWy4uLl1cclxuICogfSwge1xyXG4gKiAgICAgc291cmNlOiBbLi4uXVxyXG4gKiB9LCB7XHJcbiAqICAgICAvLyBCeSBkZWZhdWx0IGZyb20gMC5cclxuICogICAgIHRyYW5zZm9ybTogeyB0eXBlOiAnZmlsdGVyJywgY29uZmlnOiB7Li4ufSB9XHJcbiAqIH0sIHtcclxuICogICAgIC8vIFBpcGVkLlxyXG4gKiAgICAgdHJhbnNmb3JtOiBbXHJcbiAqICAgICAgICAgeyB0eXBlOiAnZmlsdGVyJywgY29uZmlnOiB7Li4ufSB9LFxyXG4gKiAgICAgICAgIHsgdHlwZTogJ3NvcnQnLCBjb25maWc6IHsuLi59IH1cclxuICogICAgIF1cclxuICogfSwge1xyXG4gKiAgICAgaWQ6ICdyZWdyZXNzaW9uRGF0YScsXHJcbiAqICAgICBmcm9tRGF0YXNldEluZGV4OiAxLFxyXG4gKiAgICAgLy8gVGhpcmQtcGFydHkgdHJhbnNmb3JtXHJcbiAqICAgICB0cmFuc2Zvcm06IHsgdHlwZTogJ2VjU3RhdDpyZWdyZXNzaW9uJywgY29uZmlnOiB7Li4ufSB9XHJcbiAqIH0sIHtcclxuICogICAgIC8vIHJldHJpZXZlIHRoZSBleHRyYSByZXN1bHQuXHJcbiAqICAgICBpZDogJ3JlZ3Jlc3Npb25Gb3JtdWxhJyxcclxuICogICAgIGZyb21EYXRhc2V0SWQ6ICdyZWdyZXNzaW9uRGF0YScsXHJcbiAqICAgICBmcm9tVHJhbnNmb3JtUmVzdWx0OiAxXHJcbiAqIH1dXHJcbiAqIGBgYFxyXG4gKi9cblxudmFyIFNvdXJjZU1hbmFnZXIgPVxuLyoqIEBjbGFzcyAqL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTb3VyY2VNYW5hZ2VyKHNvdXJjZUhvc3QpIHtcbiAgICAvLyBDYWNoZWQgc291cmNlLiBEbyBub3QgcmVwZWF0IGNhbGN1bGF0aW5nIGlmIG5vdCBkaXJ0eS5cbiAgICB0aGlzLl9zb3VyY2VMaXN0ID0gW107XG4gICAgdGhpcy5fc3RvcmVMaXN0ID0gW107IC8vIHZlcnNpb24gc2lnbiBvZiBlYWNoIHVwc3RyZWFtIHNvdXJjZSBtYW5hZ2VyLlxuXG4gICAgdGhpcy5fdXBzdHJlYW1TaWduTGlzdCA9IFtdO1xuICAgIHRoaXMuX3ZlcnNpb25TaWduQmFzZSA9IDA7XG4gICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgIHRoaXMuX3NvdXJjZUhvc3QgPSBzb3VyY2VIb3N0O1xuICB9XG4gIC8qKlxyXG4gICAqIE1hcmsgZGlydHkuXHJcbiAgICovXG5cblxuICBTb3VyY2VNYW5hZ2VyLnByb3RvdHlwZS5kaXJ0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9zZXRMb2NhbFNvdXJjZShbXSwgW10pO1xuXG4gICAgdGhpcy5fc3RvcmVMaXN0ID0gW107XG4gICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICB9O1xuXG4gIFNvdXJjZU1hbmFnZXIucHJvdG90eXBlLl9zZXRMb2NhbFNvdXJjZSA9IGZ1bmN0aW9uIChzb3VyY2VMaXN0LCB1cHN0cmVhbVNpZ25MaXN0KSB7XG4gICAgdGhpcy5fc291cmNlTGlzdCA9IHNvdXJjZUxpc3Q7XG4gICAgdGhpcy5fdXBzdHJlYW1TaWduTGlzdCA9IHVwc3RyZWFtU2lnbkxpc3Q7XG4gICAgdGhpcy5fdmVyc2lvblNpZ25CYXNlKys7XG5cbiAgICBpZiAodGhpcy5fdmVyc2lvblNpZ25CYXNlID4gOWUxMCkge1xuICAgICAgdGhpcy5fdmVyc2lvblNpZ25CYXNlID0gMDtcbiAgICB9XG4gIH07XG4gIC8qKlxyXG4gICAqIEZvciBkZXRlY3Rpbmcgd2hldGhlciB0aGUgdXBzdHJlYW0gc291cmNlIGlzIGRpcnR5LCBzbyB0aGF0XHJcbiAgICogdGhlIGxvY2FsIGNhY2hlZCBzb3VyY2UgKGluIGBfc291cmNlTGlzdGApIHNob3VsZCBiZSBkaXNjYXJkZWQuXHJcbiAgICovXG5cblxuICBTb3VyY2VNYW5hZ2VyLnByb3RvdHlwZS5fZ2V0VmVyc2lvblNpZ24gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NvdXJjZUhvc3QudWlkICsgJ18nICsgdGhpcy5fdmVyc2lvblNpZ25CYXNlO1xuICB9O1xuICAvKipcclxuICAgKiBBbHdheXMgcmV0dXJuIGEgc291cmNlIGluc3RhbmNlLiBPdGhlcndpc2UgdGhyb3cgZXJyb3IuXHJcbiAgICovXG5cblxuICBTb3VyY2VNYW5hZ2VyLnByb3RvdHlwZS5wcmVwYXJlU291cmNlID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIEZvciB0aGUgY2FzZSB0aGF0IGNhbGwgYHNldE9wdGlvbmAgbXVsdGlwbGUgdGltZSBidXQgbm8gZGF0YSBjaGFuZ2VkLFxuICAgIC8vIGNhY2hlIHRoZSByZXN1bHQgc291cmNlIHRvIHByZXZlbnQgZnJvbSByZXBlYXRpbmcgdHJhbnNmb3JtLlxuICAgIGlmICh0aGlzLl9pc0RpcnR5KCkpIHtcbiAgICAgIHRoaXMuX2NyZWF0ZVNvdXJjZSgpO1xuXG4gICAgICB0aGlzLl9kaXJ0eSA9IGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICBTb3VyY2VNYW5hZ2VyLnByb3RvdHlwZS5fY3JlYXRlU291cmNlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX3NldExvY2FsU291cmNlKFtdLCBbXSk7XG5cbiAgICB2YXIgc291cmNlSG9zdCA9IHRoaXMuX3NvdXJjZUhvc3Q7XG5cbiAgICB2YXIgdXBTb3VyY2VNZ3JMaXN0ID0gdGhpcy5fZ2V0VXBzdHJlYW1Tb3VyY2VNYW5hZ2VycygpO1xuXG4gICAgdmFyIGhhc1Vwc3RyZWFtID0gISF1cFNvdXJjZU1nckxpc3QubGVuZ3RoO1xuICAgIHZhciByZXN1bHRTb3VyY2VMaXN0O1xuICAgIHZhciB1cHN0cmVhbVNpZ25MaXN0O1xuXG4gICAgaWYgKGlzU2VyaWVzKHNvdXJjZUhvc3QpKSB7XG4gICAgICB2YXIgc2VyaWVzTW9kZWwgPSBzb3VyY2VIb3N0O1xuICAgICAgdmFyIGRhdGEgPSB2b2lkIDA7XG4gICAgICB2YXIgc291cmNlRm9ybWF0ID0gdm9pZCAwO1xuICAgICAgdmFyIHVwU291cmNlID0gdm9pZCAwOyAvLyBIYXMgdXBzdHJlYW0gZGF0YXNldFxuXG4gICAgICBpZiAoaGFzVXBzdHJlYW0pIHtcbiAgICAgICAgdmFyIHVwU291cmNlTWdyID0gdXBTb3VyY2VNZ3JMaXN0WzBdO1xuICAgICAgICB1cFNvdXJjZU1nci5wcmVwYXJlU291cmNlKCk7XG4gICAgICAgIHVwU291cmNlID0gdXBTb3VyY2VNZ3IuZ2V0U291cmNlKCk7XG4gICAgICAgIGRhdGEgPSB1cFNvdXJjZS5kYXRhO1xuICAgICAgICBzb3VyY2VGb3JtYXQgPSB1cFNvdXJjZS5zb3VyY2VGb3JtYXQ7XG4gICAgICAgIHVwc3RyZWFtU2lnbkxpc3QgPSBbdXBTb3VyY2VNZ3IuX2dldFZlcnNpb25TaWduKCldO1xuICAgICAgfSAvLyBTZXJpZXMgZGF0YSBpcyBmcm9tIG93bi5cbiAgICAgIGVsc2Uge1xuICAgICAgICAgIGRhdGEgPSBzZXJpZXNNb2RlbC5nZXQoJ2RhdGEnLCB0cnVlKTtcbiAgICAgICAgICBzb3VyY2VGb3JtYXQgPSBpc1R5cGVkQXJyYXkoZGF0YSkgPyBTT1VSQ0VfRk9STUFUX1RZUEVEX0FSUkFZIDogU09VUkNFX0ZPUk1BVF9PUklHSU5BTDtcbiAgICAgICAgICB1cHN0cmVhbVNpZ25MaXN0ID0gW107XG4gICAgICAgIH0gLy8gU2VlIFtSRVFVSVJFTUVOVF9NRU1PXSwgbWVyZ2Ugc2V0dGluZ3Mgb24gc2VyaWVzIGFuZCBwYXJlbnQgZGF0YXNldCBpZiBpdCBpcyByb290LlxuXG5cbiAgICAgIHZhciBuZXdNZXRhUmF3T3B0aW9uID0gdGhpcy5fZ2V0U291cmNlTWV0YVJhd09wdGlvbigpIHx8IHt9O1xuICAgICAgdmFyIHVwTWV0YVJhd09wdGlvbiA9IHVwU291cmNlICYmIHVwU291cmNlLm1ldGFSYXdPcHRpb24gfHwge307XG4gICAgICB2YXIgc2VyaWVzTGF5b3V0QnkgPSByZXRyaWV2ZTIobmV3TWV0YVJhd09wdGlvbi5zZXJpZXNMYXlvdXRCeSwgdXBNZXRhUmF3T3B0aW9uLnNlcmllc0xheW91dEJ5KSB8fCBudWxsO1xuICAgICAgdmFyIHNvdXJjZUhlYWRlciA9IHJldHJpZXZlMihuZXdNZXRhUmF3T3B0aW9uLnNvdXJjZUhlYWRlciwgdXBNZXRhUmF3T3B0aW9uLnNvdXJjZUhlYWRlcik7IC8vIE5vdGUgaGVyZSB3ZSBzaG91bGQgbm90IHVzZSBgdXBTb3VyY2UuZGltZW5zaW9uc0RlZmluZWAuIENvbnNpZGVyIHRoZSBjYXNlOlxuICAgICAgLy8gYHVwU291cmNlLmRpbWVuc2lvbnNEZWZpbmVgIGlzIGRldGVjdGVkIGJ5IGBzZXJpZXNMYXlvdXRCeTogJ2NvbHVtbidgLFxuICAgICAgLy8gYnV0IHNlcmllcyBuZWVkIGBzZXJpZXNMYXlvdXRCeTogJ3JvdydgLlxuXG4gICAgICB2YXIgZGltZW5zaW9ucyA9IHJldHJpZXZlMihuZXdNZXRhUmF3T3B0aW9uLmRpbWVuc2lvbnMsIHVwTWV0YVJhd09wdGlvbi5kaW1lbnNpb25zKTsgLy8gV2Ugc2hhcmUgc291cmNlIHdpdGggZGF0YXNldCBhcyBtdWNoIGFzIHBvc3NpYmxlXG4gICAgICAvLyB0byBhdm9pZCBleHRyYSBtZW1vcnkgY29zdCBvZiBoaWdoIGRpbWVuc2lvbmFsIGRhdGEuXG5cbiAgICAgIHZhciBuZWVkc0NyZWF0ZVNvdXJjZSA9IHNlcmllc0xheW91dEJ5ICE9PSB1cE1ldGFSYXdPcHRpb24uc2VyaWVzTGF5b3V0QnkgfHwgISFzb3VyY2VIZWFkZXIgIT09ICEhdXBNZXRhUmF3T3B0aW9uLnNvdXJjZUhlYWRlciB8fCBkaW1lbnNpb25zO1xuICAgICAgcmVzdWx0U291cmNlTGlzdCA9IG5lZWRzQ3JlYXRlU291cmNlID8gW2NyZWF0ZVNvdXJjZShkYXRhLCB7XG4gICAgICAgIHNlcmllc0xheW91dEJ5OiBzZXJpZXNMYXlvdXRCeSxcbiAgICAgICAgc291cmNlSGVhZGVyOiBzb3VyY2VIZWFkZXIsXG4gICAgICAgIGRpbWVuc2lvbnM6IGRpbWVuc2lvbnNcbiAgICAgIH0sIHNvdXJjZUZvcm1hdCldIDogW107XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBkYXRhc2V0TW9kZWwgPSBzb3VyY2VIb3N0OyAvLyBIYXMgdXBzdHJlYW0gZGF0YXNldC5cblxuICAgICAgaWYgKGhhc1Vwc3RyZWFtKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLl9hcHBseVRyYW5zZm9ybSh1cFNvdXJjZU1nckxpc3QpO1xuXG4gICAgICAgIHJlc3VsdFNvdXJjZUxpc3QgPSByZXN1bHQuc291cmNlTGlzdDtcbiAgICAgICAgdXBzdHJlYW1TaWduTGlzdCA9IHJlc3VsdC51cHN0cmVhbVNpZ25MaXN0O1xuICAgICAgfSAvLyBJcyByb290IGRhdGFzZXQuXG4gICAgICBlbHNlIHtcbiAgICAgICAgICB2YXIgc291cmNlRGF0YSA9IGRhdGFzZXRNb2RlbC5nZXQoJ3NvdXJjZScsIHRydWUpO1xuICAgICAgICAgIHJlc3VsdFNvdXJjZUxpc3QgPSBbY3JlYXRlU291cmNlKHNvdXJjZURhdGEsIHRoaXMuX2dldFNvdXJjZU1ldGFSYXdPcHRpb24oKSwgbnVsbCldO1xuICAgICAgICAgIHVwc3RyZWFtU2lnbkxpc3QgPSBbXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBhc3NlcnQocmVzdWx0U291cmNlTGlzdCAmJiB1cHN0cmVhbVNpZ25MaXN0KTtcbiAgICB9XG5cbiAgICB0aGlzLl9zZXRMb2NhbFNvdXJjZShyZXN1bHRTb3VyY2VMaXN0LCB1cHN0cmVhbVNpZ25MaXN0KTtcbiAgfTtcblxuICBTb3VyY2VNYW5hZ2VyLnByb3RvdHlwZS5fYXBwbHlUcmFuc2Zvcm0gPSBmdW5jdGlvbiAodXBNZ3JMaXN0KSB7XG4gICAgdmFyIGRhdGFzZXRNb2RlbCA9IHRoaXMuX3NvdXJjZUhvc3Q7XG4gICAgdmFyIHRyYW5zZm9ybU9wdGlvbiA9IGRhdGFzZXRNb2RlbC5nZXQoJ3RyYW5zZm9ybScsIHRydWUpO1xuICAgIHZhciBmcm9tVHJhbnNmb3JtUmVzdWx0ID0gZGF0YXNldE1vZGVsLmdldCgnZnJvbVRyYW5zZm9ybVJlc3VsdCcsIHRydWUpO1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGFzc2VydChmcm9tVHJhbnNmb3JtUmVzdWx0ICE9IG51bGwgfHwgdHJhbnNmb3JtT3B0aW9uICE9IG51bGwpO1xuICAgIH1cblxuICAgIGlmIChmcm9tVHJhbnNmb3JtUmVzdWx0ICE9IG51bGwpIHtcbiAgICAgIHZhciBlcnJNc2cgPSAnJztcblxuICAgICAgaWYgKHVwTWdyTGlzdC5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBlcnJNc2cgPSAnV2hlbiB1c2luZyBgZnJvbVRyYW5zZm9ybVJlc3VsdGAsIHRoZXJlIHNob3VsZCBiZSBvbmx5IG9uZSB1cHN0cmVhbSBkYXRhc2V0JztcbiAgICAgICAgfVxuXG4gICAgICAgIGRvVGhyb3coZXJyTXNnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgc291cmNlTGlzdDtcbiAgICB2YXIgdXBTb3VyY2VMaXN0ID0gW107XG4gICAgdmFyIHVwc3RyZWFtU2lnbkxpc3QgPSBbXTtcbiAgICBlYWNoKHVwTWdyTGlzdCwgZnVuY3Rpb24gKHVwTWdyKSB7XG4gICAgICB1cE1nci5wcmVwYXJlU291cmNlKCk7XG4gICAgICB2YXIgdXBTb3VyY2UgPSB1cE1nci5nZXRTb3VyY2UoZnJvbVRyYW5zZm9ybVJlc3VsdCB8fCAwKTtcbiAgICAgIHZhciBlcnJNc2cgPSAnJztcblxuICAgICAgaWYgKGZyb21UcmFuc2Zvcm1SZXN1bHQgIT0gbnVsbCAmJiAhdXBTb3VyY2UpIHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBlcnJNc2cgPSAnQ2FuIG5vdCByZXRyaWV2ZSByZXN1bHQgYnkgYGZyb21UcmFuc2Zvcm1SZXN1bHRgOiAnICsgZnJvbVRyYW5zZm9ybVJlc3VsdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGRvVGhyb3coZXJyTXNnKTtcbiAgICAgIH1cblxuICAgICAgdXBTb3VyY2VMaXN0LnB1c2godXBTb3VyY2UpO1xuICAgICAgdXBzdHJlYW1TaWduTGlzdC5wdXNoKHVwTWdyLl9nZXRWZXJzaW9uU2lnbigpKTtcbiAgICB9KTtcblxuICAgIGlmICh0cmFuc2Zvcm1PcHRpb24pIHtcbiAgICAgIHNvdXJjZUxpc3QgPSBhcHBseURhdGFUcmFuc2Zvcm0odHJhbnNmb3JtT3B0aW9uLCB1cFNvdXJjZUxpc3QsIHtcbiAgICAgICAgZGF0YXNldEluZGV4OiBkYXRhc2V0TW9kZWwuY29tcG9uZW50SW5kZXhcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoZnJvbVRyYW5zZm9ybVJlc3VsdCAhPSBudWxsKSB7XG4gICAgICBzb3VyY2VMaXN0ID0gW2Nsb25lU291cmNlU2hhbGxvdyh1cFNvdXJjZUxpc3RbMF0pXTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc291cmNlTGlzdDogc291cmNlTGlzdCxcbiAgICAgIHVwc3RyZWFtU2lnbkxpc3Q6IHVwc3RyZWFtU2lnbkxpc3RcbiAgICB9O1xuICB9O1xuXG4gIFNvdXJjZU1hbmFnZXIucHJvdG90eXBlLl9pc0RpcnR5ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9kaXJ0eSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSAvLyBBbGwgc291cmNlTGlzdCBpcyBmcm9tIHRoZSBzb21lIHVwc3RyZWFtLlxuXG5cbiAgICB2YXIgdXBTb3VyY2VNZ3JMaXN0ID0gdGhpcy5fZ2V0VXBzdHJlYW1Tb3VyY2VNYW5hZ2VycygpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1cFNvdXJjZU1nckxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB1cFNyY01nciA9IHVwU291cmNlTWdyTGlzdFtpXTtcblxuICAgICAgaWYgKCAvLyBDb25zaWRlciB0aGUgY2FzZSB0aGF0IHRoZXJlIGlzIGFuY2VzdG9yIGRpcnksIGNhbGwgaXQgcmVjdXJzaXZlbHkuXG4gICAgICAvLyBUaGUgcGVyZm9ybWFuY2UgaXMgcHJvYmFibHkgbm90IGFuIGlzc3VlIGJlY2F1c2UgdXN1YWxseSB0aGUgY2hhaW4gaXMgbm90IGxvbmcuXG4gICAgICB1cFNyY01nci5faXNEaXJ0eSgpIHx8IHRoaXMuX3Vwc3RyZWFtU2lnbkxpc3RbaV0gIT09IHVwU3JjTWdyLl9nZXRWZXJzaW9uU2lnbigpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgLyoqXHJcbiAgICogQHBhcmFtIHNvdXJjZUluZGV4IEJ5IGRlZmF1bHQgMCwgbWVhbnMgXCJtYWluIHNvdXJjZVwiLlxyXG4gICAqICAgICAgICAgICAgICAgICAgICBJbiBtb3N0IGNhc2VzIHRoZXJlIGlzIG9ubHkgb25lIHNvdXJjZS5cclxuICAgKi9cblxuXG4gIFNvdXJjZU1hbmFnZXIucHJvdG90eXBlLmdldFNvdXJjZSA9IGZ1bmN0aW9uIChzb3VyY2VJbmRleCkge1xuICAgIHNvdXJjZUluZGV4ID0gc291cmNlSW5kZXggfHwgMDtcbiAgICB2YXIgc291cmNlID0gdGhpcy5fc291cmNlTGlzdFtzb3VyY2VJbmRleF07XG5cbiAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgLy8gU2VyaWVzIG1heSBzaGFyZSBzb3VyY2UgaW5zdGFuY2Ugd2l0aCBkYXRhc2V0LlxuICAgICAgdmFyIHVwU291cmNlTWdyTGlzdCA9IHRoaXMuX2dldFVwc3RyZWFtU291cmNlTWFuYWdlcnMoKTtcblxuICAgICAgcmV0dXJuIHVwU291cmNlTWdyTGlzdFswXSAmJiB1cFNvdXJjZU1nckxpc3RbMF0uZ2V0U291cmNlKHNvdXJjZUluZGV4KTtcbiAgICB9XG5cbiAgICByZXR1cm4gc291cmNlO1xuICB9O1xuICAvKipcclxuICAgKlxyXG4gICAqIEdldCBhIGRhdGEgc3RvcmUgd2hpY2ggY2FuIGJlIHNoYXJlZCBhY3Jvc3Mgc2VyaWVzLlxyXG4gICAqIE9ubHkgYXZhaWxhYmxlIGZvciBzZXJpZXMuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gc2VyaWVzRGltUmVxdWVzdCBEaW1lbnNpb25zIHRoYXQgYXJlIGdlbmVyYXRlZCBpbiBzZXJpZXMuXHJcbiAgICogICAgICAgIFNob3VsZCBoYXZlIGJlZW4gc29ydGVkIGJ5IGBzdG9yZURpbUluZGV4YCBhc2MuXHJcbiAgICovXG5cblxuICBTb3VyY2VNYW5hZ2VyLnByb3RvdHlwZS5nZXRTaGFyZWREYXRhU3RvcmUgPSBmdW5jdGlvbiAoc2VyaWVzRGltUmVxdWVzdCkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBhc3NlcnQoaXNTZXJpZXModGhpcy5fc291cmNlSG9zdCksICdDYW4gb25seSBjYWxsIGdldERhdGFTdG9yZSBvbiBzZXJpZXMgc291cmNlIG1hbmFnZXIuJyk7XG4gICAgfVxuXG4gICAgdmFyIHNjaGVtYSA9IHNlcmllc0RpbVJlcXVlc3QubWFrZVN0b3JlU2NoZW1hKCk7XG4gICAgcmV0dXJuIHRoaXMuX2lubmVyR2V0RGF0YVN0b3JlKHNjaGVtYS5kaW1lbnNpb25zLCBzZXJpZXNEaW1SZXF1ZXN0LnNvdXJjZSwgc2NoZW1hLmhhc2gpO1xuICB9O1xuXG4gIFNvdXJjZU1hbmFnZXIucHJvdG90eXBlLl9pbm5lckdldERhdGFTdG9yZSA9IGZ1bmN0aW9uIChzdG9yZURpbXMsIHNlcmllc1NvdXJjZSwgc291cmNlUmVhZEtleSkge1xuICAgIC8vIFRPRE8gQ2FuIHVzZSBvdGhlciBzb3VyY2VJbmRleD9cbiAgICB2YXIgc291cmNlSW5kZXggPSAwO1xuICAgIHZhciBzdG9yZUxpc3QgPSB0aGlzLl9zdG9yZUxpc3Q7XG4gICAgdmFyIGNhY2hlZFN0b3JlTWFwID0gc3RvcmVMaXN0W3NvdXJjZUluZGV4XTtcblxuICAgIGlmICghY2FjaGVkU3RvcmVNYXApIHtcbiAgICAgIGNhY2hlZFN0b3JlTWFwID0gc3RvcmVMaXN0W3NvdXJjZUluZGV4XSA9IHt9O1xuICAgIH1cblxuICAgIHZhciBjYWNoZWRTdG9yZSA9IGNhY2hlZFN0b3JlTWFwW3NvdXJjZVJlYWRLZXldO1xuXG4gICAgaWYgKCFjYWNoZWRTdG9yZSkge1xuICAgICAgdmFyIHVwU291cmNlTWdyID0gdGhpcy5fZ2V0VXBzdHJlYW1Tb3VyY2VNYW5hZ2VycygpWzBdO1xuXG4gICAgICBpZiAoaXNTZXJpZXModGhpcy5fc291cmNlSG9zdCkgJiYgdXBTb3VyY2VNZ3IpIHtcbiAgICAgICAgY2FjaGVkU3RvcmUgPSB1cFNvdXJjZU1nci5faW5uZXJHZXREYXRhU3RvcmUoc3RvcmVEaW1zLCBzZXJpZXNTb3VyY2UsIHNvdXJjZVJlYWRLZXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FjaGVkU3RvcmUgPSBuZXcgRGF0YVN0b3JlKCk7IC8vIEFsd2F5cyBjcmVhdGUgc3RvcmUgZnJvbSBzb3VyY2Ugb2Ygc2VyaWVzLlxuXG4gICAgICAgIGNhY2hlZFN0b3JlLmluaXREYXRhKG5ldyBEZWZhdWx0RGF0YVByb3ZpZGVyKHNlcmllc1NvdXJjZSwgc3RvcmVEaW1zLmxlbmd0aCksIHN0b3JlRGltcyk7XG4gICAgICB9XG5cbiAgICAgIGNhY2hlZFN0b3JlTWFwW3NvdXJjZVJlYWRLZXldID0gY2FjaGVkU3RvcmU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNhY2hlZFN0b3JlO1xuICB9O1xuICAvKipcclxuICAgKiBQRU5ESU5HOiBJcyBpdCBmYXN0IGVub3VnaD9cclxuICAgKiBJZiBubyB1cHN0cmVhbSwgcmV0dXJuIGVtcHR5IGFycmF5LlxyXG4gICAqL1xuXG5cbiAgU291cmNlTWFuYWdlci5wcm90b3R5cGUuX2dldFVwc3RyZWFtU291cmNlTWFuYWdlcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gQWx3YXlzIGdldCB0aGUgcmVsYXRpb25zaGlwIGZyb20gdGhlIHJhdyBvcHRpb24uXG4gICAgLy8gRG8gbm90IGNhY2hlIHRoZSBsaW5rIG9mIHRoZSBkZXBlbmRlbmN5IGdyYXBoLCBzbyB0aGF0XG4gICAgLy8gdGhlcmUgaXMgbm8gbmVlZCB0byB1cGRhdGUgdGhlbSB3aGVuIGNoYW5nZSBoYXBwZW5zLlxuICAgIHZhciBzb3VyY2VIb3N0ID0gdGhpcy5fc291cmNlSG9zdDtcblxuICAgIGlmIChpc1Nlcmllcyhzb3VyY2VIb3N0KSkge1xuICAgICAgdmFyIGRhdGFzZXRNb2RlbCA9IHF1ZXJ5U2VyaWVzVXBzdHJlYW1EYXRhc2V0TW9kZWwoc291cmNlSG9zdCk7XG4gICAgICByZXR1cm4gIWRhdGFzZXRNb2RlbCA/IFtdIDogW2RhdGFzZXRNb2RlbC5nZXRTb3VyY2VNYW5hZ2VyKCldO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbWFwKHF1ZXJ5RGF0YXNldFVwc3RyZWFtRGF0YXNldE1vZGVscyhzb3VyY2VIb3N0KSwgZnVuY3Rpb24gKGRhdGFzZXRNb2RlbCkge1xuICAgICAgICByZXR1cm4gZGF0YXNldE1vZGVsLmdldFNvdXJjZU1hbmFnZXIoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBTb3VyY2VNYW5hZ2VyLnByb3RvdHlwZS5fZ2V0U291cmNlTWV0YVJhd09wdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc291cmNlSG9zdCA9IHRoaXMuX3NvdXJjZUhvc3Q7XG4gICAgdmFyIHNlcmllc0xheW91dEJ5O1xuICAgIHZhciBzb3VyY2VIZWFkZXI7XG4gICAgdmFyIGRpbWVuc2lvbnM7XG5cbiAgICBpZiAoaXNTZXJpZXMoc291cmNlSG9zdCkpIHtcbiAgICAgIHNlcmllc0xheW91dEJ5ID0gc291cmNlSG9zdC5nZXQoJ3Nlcmllc0xheW91dEJ5JywgdHJ1ZSk7XG4gICAgICBzb3VyY2VIZWFkZXIgPSBzb3VyY2VIb3N0LmdldCgnc291cmNlSGVhZGVyJywgdHJ1ZSk7XG4gICAgICBkaW1lbnNpb25zID0gc291cmNlSG9zdC5nZXQoJ2RpbWVuc2lvbnMnLCB0cnVlKTtcbiAgICB9IC8vIFNlZSBbUkVRVUlSRU1FTlRfTUVNT10sIGBub24tcm9vdC1kYXRhc2V0YCBkbyBub3Qgc3VwcG9ydCB0aGVtLlxuICAgIGVsc2UgaWYgKCF0aGlzLl9nZXRVcHN0cmVhbVNvdXJjZU1hbmFnZXJzKCkubGVuZ3RoKSB7XG4gICAgICAgIHZhciBtb2RlbCA9IHNvdXJjZUhvc3Q7XG4gICAgICAgIHNlcmllc0xheW91dEJ5ID0gbW9kZWwuZ2V0KCdzZXJpZXNMYXlvdXRCeScsIHRydWUpO1xuICAgICAgICBzb3VyY2VIZWFkZXIgPSBtb2RlbC5nZXQoJ3NvdXJjZUhlYWRlcicsIHRydWUpO1xuICAgICAgICBkaW1lbnNpb25zID0gbW9kZWwuZ2V0KCdkaW1lbnNpb25zJywgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc2VyaWVzTGF5b3V0Qnk6IHNlcmllc0xheW91dEJ5LFxuICAgICAgc291cmNlSGVhZGVyOiBzb3VyY2VIZWFkZXIsXG4gICAgICBkaW1lbnNpb25zOiBkaW1lbnNpb25zXG4gICAgfTtcbiAgfTtcblxuICByZXR1cm4gU291cmNlTWFuYWdlcjtcbn0oKTtcblxuZXhwb3J0IHsgU291cmNlTWFuYWdlciB9OyAvLyBDYWxsIHRoaXMgbWV0aG9kIGFmdGVyIGBzdXBlci5pbml0YCBhbmQgYHN1cGVyLm1lcmdlT3B0aW9uYCB0b1xuLy8gZGlzYWJsZSB0aGUgdHJhbnNmb3JtIG1lcmdlLCBidXQgZG8gbm90IGRpc2FibGUgdHJhbnNmb3JtIGNsb25lIGZyb20gcmF3T3B0aW9uLlxuXG5leHBvcnQgZnVuY3Rpb24gZGlzYWJsZVRyYW5zZm9ybU9wdGlvbk1lcmdlKGRhdGFzZXRNb2RlbCkge1xuICB2YXIgdHJhbnNmb3JtT3B0aW9uID0gZGF0YXNldE1vZGVsLm9wdGlvbi50cmFuc2Zvcm07XG4gIHRyYW5zZm9ybU9wdGlvbiAmJiBzZXRBc1ByaW1pdGl2ZShkYXRhc2V0TW9kZWwub3B0aW9uLnRyYW5zZm9ybSk7XG59XG5cbmZ1bmN0aW9uIGlzU2VyaWVzKHNvdXJjZUhvc3QpIHtcbiAgLy8gQXZvaWQgY2lyY3VsYXIgZGVwZW5kZW5jeSB3aXRoIFNlcmllcy50c1xuICByZXR1cm4gc291cmNlSG9zdC5tYWluVHlwZSA9PT0gJ3Nlcmllcyc7XG59XG5cbmZ1bmN0aW9uIGRvVGhyb3coZXJyTXNnKSB7XG4gIHRocm93IG5ldyBFcnJvcihlcnJNc2cpO1xufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgZ2V0VG9vbHRpcE1hcmtlciwgZW5jb2RlSFRNTCwgbWFrZVZhbHVlUmVhZGFibGUsIGNvbnZlcnRUb0NvbG9yU3RyaW5nIH0gZnJvbSAnLi4vLi4vdXRpbC9mb3JtYXQuanMnO1xuaW1wb3J0IHsgaXNTdHJpbmcsIGVhY2gsIGhhc093biwgaXNBcnJheSwgbWFwLCBhc3NlcnQsIGV4dGVuZCB9IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgeyBTb3J0T3JkZXJDb21wYXJhdG9yIH0gZnJvbSAnLi4vLi4vZGF0YS9oZWxwZXIvZGF0YVZhbHVlSGVscGVyLmpzJztcbmltcG9ydCB7IGdldFJhbmRvbUlkQmFzZSB9IGZyb20gJy4uLy4uL3V0aWwvbnVtYmVyLmpzJztcbnZhciBUT09MVElQX0xJTkVfSEVJR0hUX0NTUyA9ICdsaW5lLWhlaWdodDoxJzsgLy8gVE9ETzogbW9yZSB0ZXh0U3R5bGUgb3B0aW9uXG5cbmZ1bmN0aW9uIGdldFRvb2x0aXBUZXh0U3R5bGUodGV4dFN0eWxlLCByZW5kZXJNb2RlKSB7XG4gIHZhciBuYW1lRm9udENvbG9yID0gdGV4dFN0eWxlLmNvbG9yIHx8ICcjNmU3MDc5JztcbiAgdmFyIG5hbWVGb250U2l6ZSA9IHRleHRTdHlsZS5mb250U2l6ZSB8fCAxMjtcbiAgdmFyIG5hbWVGb250V2VpZ2h0ID0gdGV4dFN0eWxlLmZvbnRXZWlnaHQgfHwgJzQwMCc7XG4gIHZhciB2YWx1ZUZvbnRDb2xvciA9IHRleHRTdHlsZS5jb2xvciB8fCAnIzQ2NDY0Nic7XG4gIHZhciB2YWx1ZUZvbnRTaXplID0gdGV4dFN0eWxlLmZvbnRTaXplIHx8IDE0O1xuICB2YXIgdmFsdWVGb250V2VpZ2h0ID0gdGV4dFN0eWxlLmZvbnRXZWlnaHQgfHwgJzkwMCc7XG5cbiAgaWYgKHJlbmRlck1vZGUgPT09ICdodG1sJykge1xuICAgIC8vIGB0ZXh0U3R5bGVgIGlzIHByb2JhYmx5IGZyb20gdXNlciBpbnB1dCwgc2hvdWxkIGJlIGVuY29kZWQgdG8gcmVkdWNlIHNlY3VyaXR5IHJpc2suXG4gICAgcmV0dXJuIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG4gICAgICBuYW1lU3R5bGU6IFwiZm9udC1zaXplOlwiICsgZW5jb2RlSFRNTChuYW1lRm9udFNpemUgKyAnJykgKyBcInB4O2NvbG9yOlwiICsgZW5jb2RlSFRNTChuYW1lRm9udENvbG9yKSArIFwiO2ZvbnQtd2VpZ2h0OlwiICsgZW5jb2RlSFRNTChuYW1lRm9udFdlaWdodCArICcnKSxcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG4gICAgICB2YWx1ZVN0eWxlOiBcImZvbnQtc2l6ZTpcIiArIGVuY29kZUhUTUwodmFsdWVGb250U2l6ZSArICcnKSArIFwicHg7Y29sb3I6XCIgKyBlbmNvZGVIVE1MKHZhbHVlRm9udENvbG9yKSArIFwiO2ZvbnQtd2VpZ2h0OlwiICsgZW5jb2RlSFRNTCh2YWx1ZUZvbnRXZWlnaHQgKyAnJylcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lU3R5bGU6IHtcbiAgICAgICAgZm9udFNpemU6IG5hbWVGb250U2l6ZSxcbiAgICAgICAgZmlsbDogbmFtZUZvbnRDb2xvcixcbiAgICAgICAgZm9udFdlaWdodDogbmFtZUZvbnRXZWlnaHRcbiAgICAgIH0sXG4gICAgICB2YWx1ZVN0eWxlOiB7XG4gICAgICAgIGZvbnRTaXplOiB2YWx1ZUZvbnRTaXplLFxuICAgICAgICBmaWxsOiB2YWx1ZUZvbnRDb2xvcixcbiAgICAgICAgZm9udFdlaWdodDogdmFsdWVGb250V2VpZ2h0XG4gICAgICB9XG4gICAgfTtcbiAgfVxufSAvLyBTZWUgYFRvb2x0aXBNYXJrdXBMYXlvdXRJbnRlbnRbJ2lubmVyR2FwTGV2ZWwnXWAuXG4vLyAodmFsdWUgZnJvbSBVSSBkZXNpZ24pXG5cblxudmFyIEhUTUxfR0FQUyA9IFswLCAxMCwgMjAsIDMwXTtcbnZhciBSSUNIX1RFWFRfR0FQUyA9IFsnJywgJ1xcbicsICdcXG5cXG4nLCAnXFxuXFxuXFxuJ107IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUb29sdGlwTWFya3VwKHR5cGUsIG9wdGlvbikge1xuICBvcHRpb24udHlwZSA9IHR5cGU7XG4gIHJldHVybiBvcHRpb247XG59XG5cbmZ1bmN0aW9uIGlzU2VjdGlvbkZyYWdtZW50KGZyYWcpIHtcbiAgcmV0dXJuIGZyYWcudHlwZSA9PT0gJ3NlY3Rpb24nO1xufVxuXG5mdW5jdGlvbiBnZXRCdWlsZGVyKGZyYWcpIHtcbiAgcmV0dXJuIGlzU2VjdGlvbkZyYWdtZW50KGZyYWcpID8gYnVpbGRTZWN0aW9uIDogYnVpbGROYW1lVmFsdWU7XG59XG5cbmZ1bmN0aW9uIGdldEJsb2NrR2FwTGV2ZWwoZnJhZykge1xuICBpZiAoaXNTZWN0aW9uRnJhZ21lbnQoZnJhZykpIHtcbiAgICB2YXIgZ2FwTGV2ZWxfMSA9IDA7XG4gICAgdmFyIHN1YkJsb2NrTGVuID0gZnJhZy5ibG9ja3MubGVuZ3RoO1xuICAgIHZhciBoYXNJbm5lckdhcF8xID0gc3ViQmxvY2tMZW4gPiAxIHx8IHN1YkJsb2NrTGVuID4gMCAmJiAhZnJhZy5ub0hlYWRlcjtcbiAgICBlYWNoKGZyYWcuYmxvY2tzLCBmdW5jdGlvbiAoc3ViQmxvY2spIHtcbiAgICAgIHZhciBzdWJHYXBMZXZlbCA9IGdldEJsb2NrR2FwTGV2ZWwoc3ViQmxvY2spOyAvLyBJZiB0aGUgc29tZSBvZiB0aGUgc3ViLWJsb2NrcyBoYXZlIHNvbWUgZ2FwcyAobGlrZSAxMHB4KSBpbnNpZGUsIHRoaXMgYmxvY2tcbiAgICAgIC8vIHNob3VsZCB1c2UgYSBsYXJnZXIgZ2FwIChsaWtlIDIwcHgpIHRvIGRpc3Rpbmd1aXNoIHRob3NlIHN1Yi1ibG9ja3MuXG5cbiAgICAgIGlmIChzdWJHYXBMZXZlbCA+PSBnYXBMZXZlbF8xKSB7XG4gICAgICAgIGdhcExldmVsXzEgPSBzdWJHYXBMZXZlbCArICsoaGFzSW5uZXJHYXBfMSAmJiAoIC8vIDAgYWx3YXlzIGNhbiBub3QgYmUgcmVhZGFibGUgZ2FwIGxldmVsLlxuICAgICAgICAhc3ViR2FwTGV2ZWwgLy8gSWYgbm8gaGVhZGVyLCBhbHdheXMga2VlcCB0aGUgc3ViIGdhcCBsZXZlbC4gT3RoZXJ3aXNlXG4gICAgICAgIC8vIGxvb2sgd2VpcmQgaW4gY2FzZSBgbXVsdGlwbGVTZXJpZXNgLlxuICAgICAgICB8fCBpc1NlY3Rpb25GcmFnbWVudChzdWJCbG9jaykgJiYgIXN1YkJsb2NrLm5vSGVhZGVyKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGdhcExldmVsXzE7XG4gIH1cblxuICByZXR1cm4gMDtcbn1cblxuZnVuY3Rpb24gYnVpbGRTZWN0aW9uKGN0eCwgZnJhZ21lbnQsIHRvcE1hcmdpbkZvck91dGVyR2FwLCB0b29sVGlwVGV4dFN0eWxlKSB7XG4gIHZhciBub0hlYWRlciA9IGZyYWdtZW50Lm5vSGVhZGVyO1xuICB2YXIgZ2FwcyA9IGdldEdhcChnZXRCbG9ja0dhcExldmVsKGZyYWdtZW50KSk7XG4gIHZhciBzdWJNYXJrdXBUZXh0TGlzdCA9IFtdO1xuICB2YXIgc3ViQmxvY2tzID0gZnJhZ21lbnQuYmxvY2tzIHx8IFtdO1xuICBhc3NlcnQoIXN1YkJsb2NrcyB8fCBpc0FycmF5KHN1YkJsb2NrcykpO1xuICBzdWJCbG9ja3MgPSBzdWJCbG9ja3MgfHwgW107XG4gIHZhciBvcmRlck1vZGUgPSBjdHgub3JkZXJNb2RlO1xuXG4gIGlmIChmcmFnbWVudC5zb3J0QmxvY2tzICYmIG9yZGVyTW9kZSkge1xuICAgIHN1YkJsb2NrcyA9IHN1YkJsb2Nrcy5zbGljZSgpO1xuICAgIHZhciBvcmRlck1hcCA9IHtcbiAgICAgIHZhbHVlQXNjOiAnYXNjJyxcbiAgICAgIHZhbHVlRGVzYzogJ2Rlc2MnXG4gICAgfTtcblxuICAgIGlmIChoYXNPd24ob3JkZXJNYXAsIG9yZGVyTW9kZSkpIHtcbiAgICAgIHZhciBjb21wYXJhdG9yXzEgPSBuZXcgU29ydE9yZGVyQ29tcGFyYXRvcihvcmRlck1hcFtvcmRlck1vZGVdLCBudWxsKTtcbiAgICAgIHN1YkJsb2Nrcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBjb21wYXJhdG9yXzEuZXZhbHVhdGUoYS5zb3J0UGFyYW0sIGIuc29ydFBhcmFtKTtcbiAgICAgIH0pO1xuICAgIH0gLy8gRklYTUUgJ3Nlcmllc0Rlc2MnIG5lY2Vzc2FyeT9cbiAgICBlbHNlIGlmIChvcmRlck1vZGUgPT09ICdzZXJpZXNEZXNjJykge1xuICAgICAgICBzdWJCbG9ja3MucmV2ZXJzZSgpO1xuICAgICAgfVxuICB9XG5cbiAgZWFjaChzdWJCbG9ja3MsIGZ1bmN0aW9uIChzdWJCbG9jaywgaWR4KSB7XG4gICAgdmFyIHZhbHVlRm9ybWF0dGVyID0gZnJhZ21lbnQudmFsdWVGb3JtYXR0ZXI7XG4gICAgdmFyIHN1Yk1hcmt1cFRleHQgPSBnZXRCdWlsZGVyKHN1YkJsb2NrKSggLy8gSW5oZXJpdCB2YWx1ZUZvcm1hdHRlclxuICAgIHZhbHVlRm9ybWF0dGVyID8gZXh0ZW5kKGV4dGVuZCh7fSwgY3R4KSwge1xuICAgICAgdmFsdWVGb3JtYXR0ZXI6IHZhbHVlRm9ybWF0dGVyXG4gICAgfSkgOiBjdHgsIHN1YkJsb2NrLCBpZHggPiAwID8gZ2Fwcy5odG1sIDogMCwgdG9vbFRpcFRleHRTdHlsZSk7XG4gICAgc3ViTWFya3VwVGV4dCAhPSBudWxsICYmIHN1Yk1hcmt1cFRleHRMaXN0LnB1c2goc3ViTWFya3VwVGV4dCk7XG4gIH0pO1xuICB2YXIgc3ViTWFya3VwVGV4dCA9IGN0eC5yZW5kZXJNb2RlID09PSAncmljaFRleHQnID8gc3ViTWFya3VwVGV4dExpc3Quam9pbihnYXBzLnJpY2hUZXh0KSA6IHdyYXBCbG9ja0hUTUwoc3ViTWFya3VwVGV4dExpc3Quam9pbignJyksIG5vSGVhZGVyID8gdG9wTWFyZ2luRm9yT3V0ZXJHYXAgOiBnYXBzLmh0bWwpO1xuXG4gIGlmIChub0hlYWRlcikge1xuICAgIHJldHVybiBzdWJNYXJrdXBUZXh0O1xuICB9XG5cbiAgdmFyIGRpc3BsYXlhYmxlSGVhZGVyID0gbWFrZVZhbHVlUmVhZGFibGUoZnJhZ21lbnQuaGVhZGVyLCAnb3JkaW5hbCcsIGN0eC51c2VVVEMpO1xuICB2YXIgbmFtZVN0eWxlID0gZ2V0VG9vbHRpcFRleHRTdHlsZSh0b29sVGlwVGV4dFN0eWxlLCBjdHgucmVuZGVyTW9kZSkubmFtZVN0eWxlO1xuXG4gIGlmIChjdHgucmVuZGVyTW9kZSA9PT0gJ3JpY2hUZXh0Jykge1xuICAgIHJldHVybiB3cmFwSW5saW5lTmFtZVJpY2hUZXh0KGN0eCwgZGlzcGxheWFibGVIZWFkZXIsIG5hbWVTdHlsZSkgKyBnYXBzLnJpY2hUZXh0ICsgc3ViTWFya3VwVGV4dDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gd3JhcEJsb2NrSFRNTChcIjxkaXYgc3R5bGU9XFxcIlwiICsgbmFtZVN0eWxlICsgXCI7XCIgKyBUT09MVElQX0xJTkVfSEVJR0hUX0NTUyArIFwiO1xcXCI+XCIgKyBlbmNvZGVIVE1MKGRpc3BsYXlhYmxlSGVhZGVyKSArICc8L2Rpdj4nICsgc3ViTWFya3VwVGV4dCwgdG9wTWFyZ2luRm9yT3V0ZXJHYXApO1xuICB9XG59XG5cbmZ1bmN0aW9uIGJ1aWxkTmFtZVZhbHVlKGN0eCwgZnJhZ21lbnQsIHRvcE1hcmdpbkZvck91dGVyR2FwLCB0b29sVGlwVGV4dFN0eWxlKSB7XG4gIHZhciByZW5kZXJNb2RlID0gY3R4LnJlbmRlck1vZGU7XG4gIHZhciBub05hbWUgPSBmcmFnbWVudC5ub05hbWU7XG4gIHZhciBub1ZhbHVlID0gZnJhZ21lbnQubm9WYWx1ZTtcbiAgdmFyIG5vTWFya2VyID0gIWZyYWdtZW50Lm1hcmtlclR5cGU7XG4gIHZhciBuYW1lID0gZnJhZ21lbnQubmFtZTtcbiAgdmFyIHVzZVVUQyA9IGN0eC51c2VVVEM7XG5cbiAgdmFyIHZhbHVlRm9ybWF0dGVyID0gZnJhZ21lbnQudmFsdWVGb3JtYXR0ZXIgfHwgY3R4LnZhbHVlRm9ybWF0dGVyIHx8IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHZhbHVlID0gaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFt2YWx1ZV07XG4gICAgcmV0dXJuIG1hcCh2YWx1ZSwgZnVuY3Rpb24gKHZhbCwgaWR4KSB7XG4gICAgICByZXR1cm4gbWFrZVZhbHVlUmVhZGFibGUodmFsLCBpc0FycmF5KHZhbHVlVHlwZU9wdGlvbikgPyB2YWx1ZVR5cGVPcHRpb25baWR4XSA6IHZhbHVlVHlwZU9wdGlvbiwgdXNlVVRDKTtcbiAgICB9KTtcbiAgfTtcblxuICBpZiAobm9OYW1lICYmIG5vVmFsdWUpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgbWFya2VyU3RyID0gbm9NYXJrZXIgPyAnJyA6IGN0eC5tYXJrdXBTdHlsZUNyZWF0b3IubWFrZVRvb2x0aXBNYXJrZXIoZnJhZ21lbnQubWFya2VyVHlwZSwgZnJhZ21lbnQubWFya2VyQ29sb3IgfHwgJyMzMzMnLCByZW5kZXJNb2RlKTtcbiAgdmFyIHJlYWRhYmxlTmFtZSA9IG5vTmFtZSA/ICcnIDogbWFrZVZhbHVlUmVhZGFibGUobmFtZSwgJ29yZGluYWwnLCB1c2VVVEMpO1xuICB2YXIgdmFsdWVUeXBlT3B0aW9uID0gZnJhZ21lbnQudmFsdWVUeXBlO1xuICB2YXIgcmVhZGFibGVWYWx1ZUxpc3QgPSBub1ZhbHVlID8gW10gOiB2YWx1ZUZvcm1hdHRlcihmcmFnbWVudC52YWx1ZSk7XG4gIHZhciB2YWx1ZUFsaWduUmlnaHQgPSAhbm9NYXJrZXIgfHwgIW5vTmFtZTsgLy8gSXQgbGl0dGxlIHdlaXJkIGlmIG9ubHkgdmFsdWUgbmV4dCB0byBtYXJrZXIgYnV0IGZhciBmcm9tIG1hcmtlci5cblxuICB2YXIgdmFsdWVDbG9zZVRvTWFya2VyID0gIW5vTWFya2VyICYmIG5vTmFtZTtcblxuICB2YXIgX2EgPSBnZXRUb29sdGlwVGV4dFN0eWxlKHRvb2xUaXBUZXh0U3R5bGUsIHJlbmRlck1vZGUpLFxuICAgICAgbmFtZVN0eWxlID0gX2EubmFtZVN0eWxlLFxuICAgICAgdmFsdWVTdHlsZSA9IF9hLnZhbHVlU3R5bGU7XG5cbiAgcmV0dXJuIHJlbmRlck1vZGUgPT09ICdyaWNoVGV4dCcgPyAobm9NYXJrZXIgPyAnJyA6IG1hcmtlclN0cikgKyAobm9OYW1lID8gJycgOiB3cmFwSW5saW5lTmFtZVJpY2hUZXh0KGN0eCwgcmVhZGFibGVOYW1lLCBuYW1lU3R5bGUpKSAvLyBWYWx1ZSBoYXMgY29tbWFzIGluc2lkZSwgc28gdXNlICcgJyBhcyBkZWxpbWl0ZXIgZm9yIG11bHRpcGxlIHZhbHVlcy5cbiAgKyAobm9WYWx1ZSA/ICcnIDogd3JhcElubGluZVZhbHVlUmljaFRleHQoY3R4LCByZWFkYWJsZVZhbHVlTGlzdCwgdmFsdWVBbGlnblJpZ2h0LCB2YWx1ZUNsb3NlVG9NYXJrZXIsIHZhbHVlU3R5bGUpKSA6IHdyYXBCbG9ja0hUTUwoKG5vTWFya2VyID8gJycgOiBtYXJrZXJTdHIpICsgKG5vTmFtZSA/ICcnIDogd3JhcElubGluZU5hbWVIVE1MKHJlYWRhYmxlTmFtZSwgIW5vTWFya2VyLCBuYW1lU3R5bGUpKSArIChub1ZhbHVlID8gJycgOiB3cmFwSW5saW5lVmFsdWVIVE1MKHJlYWRhYmxlVmFsdWVMaXN0LCB2YWx1ZUFsaWduUmlnaHQsIHZhbHVlQ2xvc2VUb01hcmtlciwgdmFsdWVTdHlsZSkpLCB0b3BNYXJnaW5Gb3JPdXRlckdhcCk7XG59XG4vKipcclxuICogQHJldHVybiBtYXJrdXBUZXh0LiBudWxsL3VuZGVmaW5lZCBtZWFucyBubyBjb250ZW50LlxyXG4gKi9cblxuXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRUb29sdGlwTWFya3VwKGZyYWdtZW50LCBtYXJrdXBTdHlsZUNyZWF0b3IsIHJlbmRlck1vZGUsIG9yZGVyTW9kZSwgdXNlVVRDLCB0b29sVGlwVGV4dFN0eWxlKSB7XG4gIGlmICghZnJhZ21lbnQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgYnVpbGRlciA9IGdldEJ1aWxkZXIoZnJhZ21lbnQpO1xuICB2YXIgY3R4ID0ge1xuICAgIHVzZVVUQzogdXNlVVRDLFxuICAgIHJlbmRlck1vZGU6IHJlbmRlck1vZGUsXG4gICAgb3JkZXJNb2RlOiBvcmRlck1vZGUsXG4gICAgbWFya3VwU3R5bGVDcmVhdG9yOiBtYXJrdXBTdHlsZUNyZWF0b3IsXG4gICAgdmFsdWVGb3JtYXR0ZXI6IGZyYWdtZW50LnZhbHVlRm9ybWF0dGVyXG4gIH07XG4gIHJldHVybiBidWlsZGVyKGN0eCwgZnJhZ21lbnQsIDAsIHRvb2xUaXBUZXh0U3R5bGUpO1xufVxuXG5mdW5jdGlvbiBnZXRHYXAoZ2FwTGV2ZWwpIHtcbiAgcmV0dXJuIHtcbiAgICBodG1sOiBIVE1MX0dBUFNbZ2FwTGV2ZWxdLFxuICAgIHJpY2hUZXh0OiBSSUNIX1RFWFRfR0FQU1tnYXBMZXZlbF1cbiAgfTtcbn1cblxuZnVuY3Rpb24gd3JhcEJsb2NrSFRNTChlbmNvZGVkQ29udGVudCwgdG9wR2FwKSB7XG4gIHZhciBjbGVhcmZpeCA9ICc8ZGl2IHN0eWxlPVwiY2xlYXI6Ym90aFwiPjwvZGl2Pic7XG4gIHZhciBtYXJnaW5DU1MgPSBcIm1hcmdpbjogXCIgKyB0b3BHYXAgKyBcInB4IDAgMFwiO1xuICByZXR1cm4gXCI8ZGl2IHN0eWxlPVxcXCJcIiArIG1hcmdpbkNTUyArIFwiO1wiICsgVE9PTFRJUF9MSU5FX0hFSUdIVF9DU1MgKyBcIjtcXFwiPlwiICsgZW5jb2RlZENvbnRlbnQgKyBjbGVhcmZpeCArICc8L2Rpdj4nO1xufVxuXG5mdW5jdGlvbiB3cmFwSW5saW5lTmFtZUhUTUwobmFtZSwgbGVmdEhhc01hcmtlciwgc3R5bGUpIHtcbiAgdmFyIG1hcmdpbkNzcyA9IGxlZnRIYXNNYXJrZXIgPyAnbWFyZ2luLWxlZnQ6MnB4JyA6ICcnO1xuICByZXR1cm4gXCI8c3BhbiBzdHlsZT1cXFwiXCIgKyBzdHlsZSArIFwiO1wiICsgbWFyZ2luQ3NzICsgXCJcXFwiPlwiICsgZW5jb2RlSFRNTChuYW1lKSArICc8L3NwYW4+Jztcbn1cblxuZnVuY3Rpb24gd3JhcElubGluZVZhbHVlSFRNTCh2YWx1ZUxpc3QsIGFsaWduUmlnaHQsIHZhbHVlQ2xvc2VUb01hcmtlciwgc3R5bGUpIHtcbiAgLy8gRG8gbm90IHRvbyBjbG9zZSB0byBtYXJrZXIsIGNvbnNpZGVyaW5nIHRoZXJlIGFyZSBtdWx0aXBsZSB2YWx1ZXMgc2VwYXJhdGVkIGJ5IHNwYWNlcy5cbiAgdmFyIHBhZGRpbmdTdHIgPSB2YWx1ZUNsb3NlVG9NYXJrZXIgPyAnMTBweCcgOiAnMjBweCc7XG4gIHZhciBhbGlnbkNTUyA9IGFsaWduUmlnaHQgPyBcImZsb2F0OnJpZ2h0O21hcmdpbi1sZWZ0OlwiICsgcGFkZGluZ1N0ciA6ICcnO1xuICB2YWx1ZUxpc3QgPSBpc0FycmF5KHZhbHVlTGlzdCkgPyB2YWx1ZUxpc3QgOiBbdmFsdWVMaXN0XTtcbiAgcmV0dXJuIFwiPHNwYW4gc3R5bGU9XFxcIlwiICsgYWxpZ25DU1MgKyBcIjtcIiArIHN0eWxlICsgXCJcXFwiPlwiIC8vIFZhbHVlIGhhcyBjb21tYXMgaW5zaWRlLCBzbyB1c2UgJyAgJyBhcyBkZWxpbWl0ZXIgZm9yIG11bHRpcGxlIHZhbHVlcy5cbiAgKyBtYXAodmFsdWVMaXN0LCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4gZW5jb2RlSFRNTCh2YWx1ZSk7XG4gIH0pLmpvaW4oJyZuYnNwOyZuYnNwOycpICsgJzwvc3Bhbj4nO1xufVxuXG5mdW5jdGlvbiB3cmFwSW5saW5lTmFtZVJpY2hUZXh0KGN0eCwgbmFtZSwgc3R5bGUpIHtcbiAgcmV0dXJuIGN0eC5tYXJrdXBTdHlsZUNyZWF0b3Iud3JhcFJpY2hUZXh0U3R5bGUobmFtZSwgc3R5bGUpO1xufVxuXG5mdW5jdGlvbiB3cmFwSW5saW5lVmFsdWVSaWNoVGV4dChjdHgsIHZhbHVlcywgYWxpZ25SaWdodCwgdmFsdWVDbG9zZVRvTWFya2VyLCBzdHlsZSkge1xuICB2YXIgc3R5bGVzID0gW3N0eWxlXTtcbiAgdmFyIHBhZGRpbmdMZWZ0ID0gdmFsdWVDbG9zZVRvTWFya2VyID8gMTAgOiAyMDtcbiAgYWxpZ25SaWdodCAmJiBzdHlsZXMucHVzaCh7XG4gICAgcGFkZGluZzogWzAsIDAsIDAsIHBhZGRpbmdMZWZ0XSxcbiAgICBhbGlnbjogJ3JpZ2h0J1xuICB9KTsgLy8gVmFsdWUgaGFzIGNvbW1hcyBpbnNpZGUsIHNvIHVzZSAnICAnIGFzIGRlbGltaXRlciBmb3IgbXVsdGlwbGUgdmFsdWVzLlxuXG4gIHJldHVybiBjdHgubWFya3VwU3R5bGVDcmVhdG9yLndyYXBSaWNoVGV4dFN0eWxlKGlzQXJyYXkodmFsdWVzKSA/IHZhbHVlcy5qb2luKCcgICcpIDogdmFsdWVzLCBzdHlsZXMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmV0cmlldmVWaXN1YWxDb2xvckZvclRvb2x0aXBNYXJrZXIoc2VyaWVzLCBkYXRhSW5kZXgpIHtcbiAgdmFyIHN0eWxlID0gc2VyaWVzLmdldERhdGEoKS5nZXRJdGVtVmlzdWFsKGRhdGFJbmRleCwgJ3N0eWxlJyk7XG4gIHZhciBjb2xvciA9IHN0eWxlW3Nlcmllcy52aXN1YWxEcmF3VHlwZV07XG4gIHJldHVybiBjb252ZXJ0VG9Db2xvclN0cmluZyhjb2xvcik7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0UGFkZGluZ0Zyb21Ub29sdGlwTW9kZWwobW9kZWwsIHJlbmRlck1vZGUpIHtcbiAgdmFyIHBhZGRpbmcgPSBtb2RlbC5nZXQoJ3BhZGRpbmcnKTtcbiAgcmV0dXJuIHBhZGRpbmcgIT0gbnVsbCA/IHBhZGRpbmcgLy8gV2UgZ2l2ZSBzbGlnaHRseSBkaWZmZXJlbnQgdG8gbG9vayBwcmV0dHkuXG4gIDogcmVuZGVyTW9kZSA9PT0gJ3JpY2hUZXh0JyA/IFs4LCAxMF0gOiAxMDtcbn1cbi8qKlxyXG4gKiBUaGUgbWFqb3IgZmVhdHVyZSBpcyBnZW5lcmF0ZSBzdHlsZXMgZm9yIGByZW5kZXJNb2RlOiAncmljaFRleHQnYC5cclxuICogQnV0IGl0IGFsc28gc2VydmVzIGByZW5kZXJNb2RlOiAnaHRtbCdgIHRvIHByb3ZpZGVcclxuICogXCJyZW5kZXJNb2RlLWluZGVwZW5kZW50XCIgQVBJLlxyXG4gKi9cblxudmFyIFRvb2x0aXBNYXJrdXBTdHlsZUNyZWF0b3IgPVxuLyoqIEBjbGFzcyAqL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBUb29sdGlwTWFya3VwU3R5bGVDcmVhdG9yKCkge1xuICAgIHRoaXMucmljaFRleHRTdHlsZXMgPSB7fTsgLy8gTm90aWNlIHRoYXQgXCJnZW5lcmF0ZSBhIHN0eWxlIG5hbWVcIiB1c3VhbGx5IGhhcHBlbnMgcmVwZWF0ZWRseSB3aGVuIG1vdXNlIGlzIG1vdmluZyBhbmRcbiAgICAvLyBhIHRvb2x0aXAgaXMgZGlzcGxheWVkLiBTbyB3ZSBwdXQgdGhlIGBfbmV4dFN0eWxlTmFtZUlkYCBhcyBhIG1lbWJlciBvZiBlYWNoIGNyZWF0b3JcbiAgICAvLyByYXRoZXIgdGhhbiBzdGF0aWMgc2hhcmVkIGJ5IGFsbCBjcmVhdG9ycyAod2hpY2ggd2lsbCBjYXVzZSBpdCBpbmNyZWFzZSB0byBmYXN0KS5cblxuICAgIHRoaXMuX25leHRTdHlsZU5hbWVJZCA9IGdldFJhbmRvbUlkQmFzZSgpO1xuICB9XG5cbiAgVG9vbHRpcE1hcmt1cFN0eWxlQ3JlYXRvci5wcm90b3R5cGUuX2dlbmVyYXRlU3R5bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAnX19FQ19hVVRvXycgKyB0aGlzLl9uZXh0U3R5bGVOYW1lSWQrKztcbiAgfTtcblxuICBUb29sdGlwTWFya3VwU3R5bGVDcmVhdG9yLnByb3RvdHlwZS5tYWtlVG9vbHRpcE1hcmtlciA9IGZ1bmN0aW9uIChtYXJrZXJUeXBlLCBjb2xvclN0ciwgcmVuZGVyTW9kZSkge1xuICAgIHZhciBtYXJrZXJJZCA9IHJlbmRlck1vZGUgPT09ICdyaWNoVGV4dCcgPyB0aGlzLl9nZW5lcmF0ZVN0eWxlTmFtZSgpIDogbnVsbDtcbiAgICB2YXIgbWFya2VyID0gZ2V0VG9vbHRpcE1hcmtlcih7XG4gICAgICBjb2xvcjogY29sb3JTdHIsXG4gICAgICB0eXBlOiBtYXJrZXJUeXBlLFxuICAgICAgcmVuZGVyTW9kZTogcmVuZGVyTW9kZSxcbiAgICAgIG1hcmtlcklkOiBtYXJrZXJJZFxuICAgIH0pO1xuXG4gICAgaWYgKGlzU3RyaW5nKG1hcmtlcikpIHtcbiAgICAgIHJldHVybiBtYXJrZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGFzc2VydChtYXJrZXJJZCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucmljaFRleHRTdHlsZXNbbWFya2VySWRdID0gbWFya2VyLnN0eWxlO1xuICAgICAgcmV0dXJuIG1hcmtlci5jb250ZW50O1xuICAgIH1cbiAgfTtcbiAgLyoqXHJcbiAgICogQHVzYWdlXHJcbiAgICogYGBgdHNcclxuICAgKiBjb25zdCBzdHlsZWRUZXh0ID0gbWFya3VwU3R5bGVDcmVhdG9yLndyYXBSaWNoVGV4dFN0eWxlKFtcclxuICAgKiAgICAgLy8gVGhlIHN0eWxlcyB3aWxsIGJlIGF1dG8gbWVyZ2VkLlxyXG4gICAqICAgICB7XHJcbiAgICogICAgICAgICBmb250U2l6ZTogMTIsXHJcbiAgICogICAgICAgICBjb2xvcjogJ2JsdWUnXHJcbiAgICogICAgIH0sXHJcbiAgICogICAgIHtcclxuICAgKiAgICAgICAgIHBhZGRpbmc6IDIwXHJcbiAgICogICAgIH1cclxuICAgKiBdKTtcclxuICAgKiBgYGBcclxuICAgKi9cblxuXG4gIFRvb2x0aXBNYXJrdXBTdHlsZUNyZWF0b3IucHJvdG90eXBlLndyYXBSaWNoVGV4dFN0eWxlID0gZnVuY3Rpb24gKHRleHQsIHN0eWxlcykge1xuICAgIHZhciBmaW5hbFN0bCA9IHt9O1xuXG4gICAgaWYgKGlzQXJyYXkoc3R5bGVzKSkge1xuICAgICAgZWFjaChzdHlsZXMsIGZ1bmN0aW9uIChzdGwpIHtcbiAgICAgICAgcmV0dXJuIGV4dGVuZChmaW5hbFN0bCwgc3RsKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBleHRlbmQoZmluYWxTdGwsIHN0eWxlcyk7XG4gICAgfVxuXG4gICAgdmFyIHN0eWxlTmFtZSA9IHRoaXMuX2dlbmVyYXRlU3R5bGVOYW1lKCk7XG5cbiAgICB0aGlzLnJpY2hUZXh0U3R5bGVzW3N0eWxlTmFtZV0gPSBmaW5hbFN0bDtcbiAgICByZXR1cm4gXCJ7XCIgKyBzdHlsZU5hbWUgKyBcInxcIiArIHRleHQgKyBcIn1cIjtcbiAgfTtcblxuICByZXR1cm4gVG9vbHRpcE1hcmt1cFN0eWxlQ3JlYXRvcjtcbn0oKTtcblxuZXhwb3J0IHsgVG9vbHRpcE1hcmt1cFN0eWxlQ3JlYXRvciB9OyIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgdHJpbSwgaXNBcnJheSwgZWFjaCwgcmVkdWNlIH0gZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbmltcG9ydCB7IHJldHJpZXZlVmlzdWFsQ29sb3JGb3JUb29sdGlwTWFya2VyLCBjcmVhdGVUb29sdGlwTWFya3VwIH0gZnJvbSAnLi90b29sdGlwTWFya3VwLmpzJztcbmltcG9ydCB7IHJldHJpZXZlUmF3VmFsdWUgfSBmcm9tICcuLi8uLi9kYXRhL2hlbHBlci9kYXRhUHJvdmlkZXIuanMnO1xuaW1wb3J0IHsgaXNOYW1lU3BlY2lmaWVkIH0gZnJvbSAnLi4vLi4vdXRpbC9tb2RlbC5qcyc7XG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdFNlcmllc0Zvcm1hdFRvb2x0aXAob3B0KSB7XG4gIHZhciBzZXJpZXMgPSBvcHQuc2VyaWVzO1xuICB2YXIgZGF0YUluZGV4ID0gb3B0LmRhdGFJbmRleDtcbiAgdmFyIG11bHRpcGxlU2VyaWVzID0gb3B0Lm11bHRpcGxlU2VyaWVzO1xuICB2YXIgZGF0YSA9IHNlcmllcy5nZXREYXRhKCk7XG4gIHZhciB0b29sdGlwRGltcyA9IGRhdGEubWFwRGltZW5zaW9uc0FsbCgnZGVmYXVsdGVkVG9vbHRpcCcpO1xuICB2YXIgdG9vbHRpcERpbUxlbiA9IHRvb2x0aXBEaW1zLmxlbmd0aDtcbiAgdmFyIHZhbHVlID0gc2VyaWVzLmdldFJhd1ZhbHVlKGRhdGFJbmRleCk7XG4gIHZhciBpc1ZhbHVlQXJyID0gaXNBcnJheSh2YWx1ZSk7XG4gIHZhciBtYXJrZXJDb2xvciA9IHJldHJpZXZlVmlzdWFsQ29sb3JGb3JUb29sdGlwTWFya2VyKHNlcmllcywgZGF0YUluZGV4KTsgLy8gQ29tcGxpY2F0ZWQgcnVsZSBmb3IgcHJldHR5IHRvb2x0aXAuXG5cbiAgdmFyIGlubGluZVZhbHVlO1xuICB2YXIgaW5saW5lVmFsdWVUeXBlO1xuICB2YXIgc3ViQmxvY2tzO1xuICB2YXIgc29ydFBhcmFtO1xuXG4gIGlmICh0b29sdGlwRGltTGVuID4gMSB8fCBpc1ZhbHVlQXJyICYmICF0b29sdGlwRGltTGVuKSB7XG4gICAgdmFyIGZvcm1hdEFyclJlc3VsdCA9IGZvcm1hdFRvb2x0aXBBcnJheVZhbHVlKHZhbHVlLCBzZXJpZXMsIGRhdGFJbmRleCwgdG9vbHRpcERpbXMsIG1hcmtlckNvbG9yKTtcbiAgICBpbmxpbmVWYWx1ZSA9IGZvcm1hdEFyclJlc3VsdC5pbmxpbmVWYWx1ZXM7XG4gICAgaW5saW5lVmFsdWVUeXBlID0gZm9ybWF0QXJyUmVzdWx0LmlubGluZVZhbHVlVHlwZXM7XG4gICAgc3ViQmxvY2tzID0gZm9ybWF0QXJyUmVzdWx0LmJsb2NrczsgLy8gT25seSBzdXBwb3J0IHRvb2x0aXAgc29ydCBieSB0aGUgZmlyc3QgaW5saW5lIHZhbHVlLiBJdCdzIGVub3VnaCBpbiBtb3N0IGNhc2VzLlxuXG4gICAgc29ydFBhcmFtID0gZm9ybWF0QXJyUmVzdWx0LmlubGluZVZhbHVlc1swXTtcbiAgfSBlbHNlIGlmICh0b29sdGlwRGltTGVuKSB7XG4gICAgdmFyIGRpbUluZm8gPSBkYXRhLmdldERpbWVuc2lvbkluZm8odG9vbHRpcERpbXNbMF0pO1xuICAgIHNvcnRQYXJhbSA9IGlubGluZVZhbHVlID0gcmV0cmlldmVSYXdWYWx1ZShkYXRhLCBkYXRhSW5kZXgsIHRvb2x0aXBEaW1zWzBdKTtcbiAgICBpbmxpbmVWYWx1ZVR5cGUgPSBkaW1JbmZvLnR5cGU7XG4gIH0gZWxzZSB7XG4gICAgc29ydFBhcmFtID0gaW5saW5lVmFsdWUgPSBpc1ZhbHVlQXJyID8gdmFsdWVbMF0gOiB2YWx1ZTtcbiAgfSAvLyBEbyBub3Qgc2hvdyBnZW5lcmF0ZWQgc2VyaWVzIG5hbWUuIEl0IG1pZ2h0IG5vdCBiZSByZWFkYWJsZS5cblxuXG4gIHZhciBzZXJpZXNOYW1lU3BlY2lmaWVkID0gaXNOYW1lU3BlY2lmaWVkKHNlcmllcyk7XG4gIHZhciBzZXJpZXNOYW1lID0gc2VyaWVzTmFtZVNwZWNpZmllZCAmJiBzZXJpZXMubmFtZSB8fCAnJztcbiAgdmFyIGl0ZW1OYW1lID0gZGF0YS5nZXROYW1lKGRhdGFJbmRleCk7XG4gIHZhciBpbmxpbmVOYW1lID0gbXVsdGlwbGVTZXJpZXMgPyBzZXJpZXNOYW1lIDogaXRlbU5hbWU7XG4gIHJldHVybiBjcmVhdGVUb29sdGlwTWFya3VwKCdzZWN0aW9uJywge1xuICAgIGhlYWRlcjogc2VyaWVzTmFtZSxcbiAgICAvLyBXaGVuIHNlcmllcyBuYW1lIGlzIG5vdCBzcGVjaWZpZWQsIGRvIG5vdCBzaG93IGEgaGVhZGVyIGxpbmUgd2l0aCBvbmx5ICctJy5cbiAgICAvLyBUaGlzIGNhc2UgYWx3YXlzIGhhcHBlbnMgaW4gdG9vbHRpcC50cmlnZ2VyOiAnaXRlbScuXG4gICAgbm9IZWFkZXI6IG11bHRpcGxlU2VyaWVzIHx8ICFzZXJpZXNOYW1lU3BlY2lmaWVkLFxuICAgIHNvcnRQYXJhbTogc29ydFBhcmFtLFxuICAgIGJsb2NrczogW2NyZWF0ZVRvb2x0aXBNYXJrdXAoJ25hbWVWYWx1ZScsIHtcbiAgICAgIG1hcmtlclR5cGU6ICdpdGVtJyxcbiAgICAgIG1hcmtlckNvbG9yOiBtYXJrZXJDb2xvcixcbiAgICAgIC8vIERvIG5vdCBtaXggZGlzcGxheSBzZXJpZXNOYW1lIGFuZCBpdGVtTmFtZSBpbiBvbmUgdG9vbHRpcCxcbiAgICAgIC8vIHdoaWNoIG1pZ2h0IGNvbmZ1c2VzIHVzZXJzLlxuICAgICAgbmFtZTogaW5saW5lTmFtZSxcbiAgICAgIC8vIG5hbWUgZGltZW5zaW9uIG1pZ2h0IGJlIGF1dG8gYXNzaWduZWQsIHdoZXJlIHRoZSBuYW1lIG1pZ2h0XG4gICAgICAvLyBiZSBub3QgcmVhZGFibGUuIFNvIHdlIGNoZWNrIHRyaW0gaGVyZS5cbiAgICAgIG5vTmFtZTogIXRyaW0oaW5saW5lTmFtZSksXG4gICAgICB2YWx1ZTogaW5saW5lVmFsdWUsXG4gICAgICB2YWx1ZVR5cGU6IGlubGluZVZhbHVlVHlwZVxuICAgIH0pXS5jb25jYXQoc3ViQmxvY2tzIHx8IFtdKVxuICB9KTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0VG9vbHRpcEFycmF5VmFsdWUodmFsdWUsIHNlcmllcywgZGF0YUluZGV4LCB0b29sdGlwRGltcywgY29sb3JTdHIpIHtcbiAgLy8gY2hlY2s6IGNhdGVnb3J5LW5vLWVuY29kZS1oYXMtYXhpcy1kYXRhIGluIGRhdGFzZXQuaHRtbFxuICB2YXIgZGF0YSA9IHNlcmllcy5nZXREYXRhKCk7XG4gIHZhciBpc1ZhbHVlTXVsdGlwbGVMaW5lID0gcmVkdWNlKHZhbHVlLCBmdW5jdGlvbiAoaXNWYWx1ZU11bHRpcGxlTGluZSwgdmFsLCBpZHgpIHtcbiAgICB2YXIgZGltSXRlbSA9IGRhdGEuZ2V0RGltZW5zaW9uSW5mbyhpZHgpO1xuICAgIHJldHVybiBpc1ZhbHVlTXVsdGlwbGVMaW5lID0gaXNWYWx1ZU11bHRpcGxlTGluZSB8fCBkaW1JdGVtICYmIGRpbUl0ZW0udG9vbHRpcCAhPT0gZmFsc2UgJiYgZGltSXRlbS5kaXNwbGF5TmFtZSAhPSBudWxsO1xuICB9LCBmYWxzZSk7XG4gIHZhciBpbmxpbmVWYWx1ZXMgPSBbXTtcbiAgdmFyIGlubGluZVZhbHVlVHlwZXMgPSBbXTtcbiAgdmFyIGJsb2NrcyA9IFtdO1xuICB0b29sdGlwRGltcy5sZW5ndGggPyBlYWNoKHRvb2x0aXBEaW1zLCBmdW5jdGlvbiAoZGltKSB7XG4gICAgc2V0RWFjaEl0ZW0ocmV0cmlldmVSYXdWYWx1ZShkYXRhLCBkYXRhSW5kZXgsIGRpbSksIGRpbSk7XG4gIH0pIC8vIEJ5IGRlZmF1bHQsIGFsbCBkaW1zIGlzIHVzZWQgb24gdG9vbHRpcC5cbiAgOiBlYWNoKHZhbHVlLCBzZXRFYWNoSXRlbSk7XG5cbiAgZnVuY3Rpb24gc2V0RWFjaEl0ZW0odmFsLCBkaW0pIHtcbiAgICB2YXIgZGltSW5mbyA9IGRhdGEuZ2V0RGltZW5zaW9uSW5mbyhkaW0pOyAvLyBJZiBgZGltSW5mby50b29sdGlwYCBpcyBub3Qgc2V0LCBzaG93IHRvb2x0aXAuXG5cbiAgICBpZiAoIWRpbUluZm8gfHwgZGltSW5mby5vdGhlckRpbXMudG9vbHRpcCA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaXNWYWx1ZU11bHRpcGxlTGluZSkge1xuICAgICAgYmxvY2tzLnB1c2goY3JlYXRlVG9vbHRpcE1hcmt1cCgnbmFtZVZhbHVlJywge1xuICAgICAgICBtYXJrZXJUeXBlOiAnc3ViSXRlbScsXG4gICAgICAgIG1hcmtlckNvbG9yOiBjb2xvclN0cixcbiAgICAgICAgbmFtZTogZGltSW5mby5kaXNwbGF5TmFtZSxcbiAgICAgICAgdmFsdWU6IHZhbCxcbiAgICAgICAgdmFsdWVUeXBlOiBkaW1JbmZvLnR5cGVcbiAgICAgIH0pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5saW5lVmFsdWVzLnB1c2godmFsKTtcbiAgICAgIGlubGluZVZhbHVlVHlwZXMucHVzaChkaW1JbmZvLnR5cGUpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaW5saW5lVmFsdWVzOiBpbmxpbmVWYWx1ZXMsXG4gICAgaW5saW5lVmFsdWVUeXBlczogaW5saW5lVmFsdWVUeXBlcyxcbiAgICBibG9ja3M6IGJsb2Nrc1xuICB9O1xufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgKiBhcyB6clV0aWwgZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbmltcG9ydCBlbnYgZnJvbSAnenJlbmRlci9saWIvY29yZS9lbnYuanMnO1xuaW1wb3J0ICogYXMgbW9kZWxVdGlsIGZyb20gJy4uL3V0aWwvbW9kZWwuanMnO1xuaW1wb3J0IENvbXBvbmVudE1vZGVsIGZyb20gJy4vQ29tcG9uZW50LmpzJztcbmltcG9ydCB7IFBhbGV0dGVNaXhpbiB9IGZyb20gJy4vbWl4aW4vcGFsZXR0ZS5qcyc7XG5pbXBvcnQgeyBEYXRhRm9ybWF0TWl4aW4gfSBmcm9tICcuLi9tb2RlbC9taXhpbi9kYXRhRm9ybWF0LmpzJztcbmltcG9ydCB7IGdldExheW91dFBhcmFtcywgbWVyZ2VMYXlvdXRQYXJhbSwgZmV0Y2hMYXlvdXRNb2RlIH0gZnJvbSAnLi4vdXRpbC9sYXlvdXQuanMnO1xuaW1wb3J0IHsgY3JlYXRlVGFzayB9IGZyb20gJy4uL2NvcmUvdGFzay5qcyc7XG5pbXBvcnQgeyBtb3VudEV4dGVuZCB9IGZyb20gJy4uL3V0aWwvY2xhenouanMnO1xuaW1wb3J0IHsgU291cmNlTWFuYWdlciB9IGZyb20gJy4uL2RhdGEvaGVscGVyL3NvdXJjZU1hbmFnZXIuanMnO1xuaW1wb3J0IHsgZGVmYXVsdFNlcmllc0Zvcm1hdFRvb2x0aXAgfSBmcm9tICcuLi9jb21wb25lbnQvdG9vbHRpcC9zZXJpZXNGb3JtYXRUb29sdGlwLmpzJztcbnZhciBpbm5lciA9IG1vZGVsVXRpbC5tYWtlSW5uZXIoKTtcblxuZnVuY3Rpb24gZ2V0U2VsZWN0aW9uS2V5KGRhdGEsIGRhdGFJbmRleCkge1xuICByZXR1cm4gZGF0YS5nZXROYW1lKGRhdGFJbmRleCkgfHwgZGF0YS5nZXRJZChkYXRhSW5kZXgpO1xufVxuXG5leHBvcnQgdmFyIFNFUklFU19VTklWRVJTQUxfVFJBTlNJVElPTl9QUk9QID0gJ19fdW5pdmVyc2FsVHJhbnNpdGlvbkVuYWJsZWQnO1xuXG52YXIgU2VyaWVzTW9kZWwgPVxuLyoqIEBjbGFzcyAqL1xuZnVuY3Rpb24gKF9zdXBlcikge1xuICBfX2V4dGVuZHMoU2VyaWVzTW9kZWwsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gU2VyaWVzTW9kZWwoKSB7XG4gICAgLy8gW0NhdXRpb25dOiBCZWNhdXNlIHRoaXMgY2xhc3Mgb3IgZGVzZWNlbmRhbnRzIGNhbiBiZSB1c2VkIGFzIGBYWFguZXh0ZW5kKHN1YlByb3RvKWAsXG4gICAgLy8gdGhlIGNsYXNzIG1lbWJlcnMgbXVzdCBub3QgYmUgaW5pdGlhbGl6ZWQgaW4gY29uc3RydWN0b3Igb3IgZGVjbGFyYXRpb24gcGxhY2UuXG4gICAgLy8gT3RoZXJ3aXNlIHRoZXJlIGlzIGJhZCBjYXNlOlxuICAgIC8vICAgY2xhc3MgQSB7eHh4ID0gMTt9XG4gICAgLy8gICBlbmFibGVDbGFzc0V4dGVuZChBKTtcbiAgICAvLyAgIGNsYXNzIEIgZXh0ZW5kcyBBIHt9XG4gICAgLy8gICB2YXIgQyA9IEIuZXh0ZW5kKHt4eHg6IDV9KTtcbiAgICAvLyAgIHZhciBjID0gbmV3IEMoKTtcbiAgICAvLyAgIGNvbnNvbGUubG9nKGMueHh4KTsgLy8gZXhwZWN0IDUgYnV0IGFsd2F5cyAxLlxuICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBQcm9wcyBhYm91dCBkYXRhIHNlbGVjdGlvblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cbiAgICBfdGhpcy5fc2VsZWN0ZWREYXRhSW5kaWNlc01hcCA9IHt9O1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIFNlcmllc01vZGVsLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKG9wdGlvbiwgcGFyZW50TW9kZWwsIGVjTW9kZWwpIHtcbiAgICB0aGlzLnNlcmllc0luZGV4ID0gdGhpcy5jb21wb25lbnRJbmRleDtcbiAgICB0aGlzLmRhdGFUYXNrID0gY3JlYXRlVGFzayh7XG4gICAgICBjb3VudDogZGF0YVRhc2tDb3VudCxcbiAgICAgIHJlc2V0OiBkYXRhVGFza1Jlc2V0XG4gICAgfSk7XG4gICAgdGhpcy5kYXRhVGFzay5jb250ZXh0ID0ge1xuICAgICAgbW9kZWw6IHRoaXNcbiAgICB9O1xuICAgIHRoaXMubWVyZ2VEZWZhdWx0QW5kVGhlbWUob3B0aW9uLCBlY01vZGVsKTtcbiAgICB2YXIgc291cmNlTWFuYWdlciA9IGlubmVyKHRoaXMpLnNvdXJjZU1hbmFnZXIgPSBuZXcgU291cmNlTWFuYWdlcih0aGlzKTtcbiAgICBzb3VyY2VNYW5hZ2VyLnByZXBhcmVTb3VyY2UoKTtcbiAgICB2YXIgZGF0YSA9IHRoaXMuZ2V0SW5pdGlhbERhdGEob3B0aW9uLCBlY01vZGVsKTtcbiAgICB3cmFwRGF0YShkYXRhLCB0aGlzKTtcbiAgICB0aGlzLmRhdGFUYXNrLmNvbnRleHQuZGF0YSA9IGRhdGE7XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgenJVdGlsLmFzc2VydChkYXRhLCAnZ2V0SW5pdGlhbERhdGEgcmV0dXJuZWQgaW52YWxpZCBkYXRhLicpO1xuICAgIH1cblxuICAgIGlubmVyKHRoaXMpLmRhdGFCZWZvcmVQcm9jZXNzZWQgPSBkYXRhOyAvLyBJZiB3ZSByZXZlcnNlIHRoZSBvcmRlciAobWFrZSBkYXRhIGZpcnN0bHksIGFuZCB0aGVuIG1ha2VcbiAgICAvLyBkYXRhQmVmb3JlUHJvY2Vzc2VkIGJ5IGNsb25lU2hhbGxvdyksIGNsb25lU2hhbGxvdyB3aWxsXG4gICAgLy8gY2F1c2UgZGF0YS5ncmFwaC5kYXRhICE9PSBkYXRhIHdoZW4gdXNpbmdcbiAgICAvLyBtb2R1bGU6ZWNoYXJ0cy9kYXRhL0dyYXBoIG9yIG1vZHVsZTplY2hhcnRzL2RhdGEvVHJlZS5cbiAgICAvLyBTZWUgbW9kdWxlOmVjaGFydHMvZGF0YS9oZWxwZXIvbGlua1Nlcmllc0RhdGFcbiAgICAvLyBUaGVvcmV0aWNhbGx5LCBpdCBpcyB1bnJlYXNvbmFibGUgdG8gY2FsbCBgc2VyaWVzTW9kZWwuZ2V0RGF0YSgpYCBpbiB0aGUgbW9kZWxcbiAgICAvLyBpbml0IG9yIG1lcmdlIHN0YWdlLCBiZWNhdXNlIHRoZSBkYXRhIGNhbiBiZSByZXN0b3JlZC4gU28gd2UgZG8gbm90IGByZXN0b3JlRGF0YWBcbiAgICAvLyBhbmQgYHNldERhdGFgIGhlcmUsIHdoaWNoIGZvcmJpZHMgY2FsbGluZyBgc2VyaWVzTW9kZWwuZ2V0RGF0YSgpYCBpbiB0aGlzIHN0YWdlLlxuICAgIC8vIENhbGwgYHNlcmllc01vZGVsLmdldFJhd0RhdGEoKWAgaW5zdGVhZC5cbiAgICAvLyB0aGlzLnJlc3RvcmVEYXRhKCk7XG5cbiAgICBhdXRvU2VyaWVzTmFtZSh0aGlzKTtcblxuICAgIHRoaXMuX2luaXRTZWxlY3RlZE1hcEZyb21EYXRhKGRhdGEpO1xuICB9O1xuICAvKipcclxuICAgKiBVdGlsIGZvciBtZXJnZSBkZWZhdWx0IGFuZCB0aGVtZSB0byBvcHRpb25cclxuICAgKi9cblxuXG4gIFNlcmllc01vZGVsLnByb3RvdHlwZS5tZXJnZURlZmF1bHRBbmRUaGVtZSA9IGZ1bmN0aW9uIChvcHRpb24sIGVjTW9kZWwpIHtcbiAgICB2YXIgbGF5b3V0TW9kZSA9IGZldGNoTGF5b3V0TW9kZSh0aGlzKTtcbiAgICB2YXIgaW5wdXRQb3NpdGlvblBhcmFtcyA9IGxheW91dE1vZGUgPyBnZXRMYXlvdXRQYXJhbXMob3B0aW9uKSA6IHt9OyAvLyBCYWNrd2FyZCBjb21wYXQ6IHVzaW5nIHN1YlR5cGUgb24gdGhlbWUuXG4gICAgLy8gQnV0IGlmIG5hbWUgZHVwbGljYXRlIGJldHdlZW4gc2VyaWVzIHN1YlR5cGVcbiAgICAvLyAoZm9yIGV4YW1wbGU6IHBhcmFsbGVsKSBhZGQgY29tcG9uZW50IG1haW5UeXBlLFxuICAgIC8vIGFkZCBzdWZmaXggJ1NlcmllcycuXG5cbiAgICB2YXIgdGhlbWVTdWJUeXBlID0gdGhpcy5zdWJUeXBlO1xuXG4gICAgaWYgKENvbXBvbmVudE1vZGVsLmhhc0NsYXNzKHRoZW1lU3ViVHlwZSkpIHtcbiAgICAgIHRoZW1lU3ViVHlwZSArPSAnU2VyaWVzJztcbiAgICB9XG5cbiAgICB6clV0aWwubWVyZ2Uob3B0aW9uLCBlY01vZGVsLmdldFRoZW1lKCkuZ2V0KHRoaXMuc3ViVHlwZSkpO1xuICAgIHpyVXRpbC5tZXJnZShvcHRpb24sIHRoaXMuZ2V0RGVmYXVsdE9wdGlvbigpKTsgLy8gRGVmYXVsdCBsYWJlbCBlbXBoYXNpcyBgc2hvd2BcblxuICAgIG1vZGVsVXRpbC5kZWZhdWx0RW1waGFzaXMob3B0aW9uLCAnbGFiZWwnLCBbJ3Nob3cnXSk7XG4gICAgdGhpcy5maWxsRGF0YVRleHRTdHlsZShvcHRpb24uZGF0YSk7XG5cbiAgICBpZiAobGF5b3V0TW9kZSkge1xuICAgICAgbWVyZ2VMYXlvdXRQYXJhbShvcHRpb24sIGlucHV0UG9zaXRpb25QYXJhbXMsIGxheW91dE1vZGUpO1xuICAgIH1cbiAgfTtcblxuICBTZXJpZXNNb2RlbC5wcm90b3R5cGUubWVyZ2VPcHRpb24gPSBmdW5jdGlvbiAobmV3U2VyaWVzT3B0aW9uLCBlY01vZGVsKSB7XG4gICAgLy8gdGhpcy5zZXR0aW5nVGFzay5kaXJ0eSgpO1xuICAgIG5ld1Nlcmllc09wdGlvbiA9IHpyVXRpbC5tZXJnZSh0aGlzLm9wdGlvbiwgbmV3U2VyaWVzT3B0aW9uLCB0cnVlKTtcbiAgICB0aGlzLmZpbGxEYXRhVGV4dFN0eWxlKG5ld1Nlcmllc09wdGlvbi5kYXRhKTtcbiAgICB2YXIgbGF5b3V0TW9kZSA9IGZldGNoTGF5b3V0TW9kZSh0aGlzKTtcblxuICAgIGlmIChsYXlvdXRNb2RlKSB7XG4gICAgICBtZXJnZUxheW91dFBhcmFtKHRoaXMub3B0aW9uLCBuZXdTZXJpZXNPcHRpb24sIGxheW91dE1vZGUpO1xuICAgIH1cblxuICAgIHZhciBzb3VyY2VNYW5hZ2VyID0gaW5uZXIodGhpcykuc291cmNlTWFuYWdlcjtcbiAgICBzb3VyY2VNYW5hZ2VyLmRpcnR5KCk7XG4gICAgc291cmNlTWFuYWdlci5wcmVwYXJlU291cmNlKCk7XG4gICAgdmFyIGRhdGEgPSB0aGlzLmdldEluaXRpYWxEYXRhKG5ld1Nlcmllc09wdGlvbiwgZWNNb2RlbCk7XG4gICAgd3JhcERhdGEoZGF0YSwgdGhpcyk7XG4gICAgdGhpcy5kYXRhVGFzay5kaXJ0eSgpO1xuICAgIHRoaXMuZGF0YVRhc2suY29udGV4dC5kYXRhID0gZGF0YTtcbiAgICBpbm5lcih0aGlzKS5kYXRhQmVmb3JlUHJvY2Vzc2VkID0gZGF0YTtcbiAgICBhdXRvU2VyaWVzTmFtZSh0aGlzKTtcblxuICAgIHRoaXMuX2luaXRTZWxlY3RlZE1hcEZyb21EYXRhKGRhdGEpO1xuICB9O1xuXG4gIFNlcmllc01vZGVsLnByb3RvdHlwZS5maWxsRGF0YVRleHRTdHlsZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgLy8gRGVmYXVsdCBkYXRhIGxhYmVsIGVtcGhhc2lzIGBzaG93YFxuICAgIC8vIEZJWE1FIFRyZWUgc3RydWN0dXJlIGRhdGEgP1xuICAgIC8vIEZJWE1FIFBlcmZvcm1hbmNlID9cbiAgICBpZiAoZGF0YSAmJiAhenJVdGlsLmlzVHlwZWRBcnJheShkYXRhKSkge1xuICAgICAgdmFyIHByb3BzID0gWydzaG93J107XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoZGF0YVtpXSAmJiBkYXRhW2ldLmxhYmVsKSB7XG4gICAgICAgICAgbW9kZWxVdGlsLmRlZmF1bHRFbXBoYXNpcyhkYXRhW2ldLCAnbGFiZWwnLCBwcm9wcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIC8qKlxyXG4gICAqIEluaXQgYSBkYXRhIHN0cnVjdHVyZSBmcm9tIGRhdGEgcmVsYXRlZCBvcHRpb24gaW4gc2VyaWVzXHJcbiAgICogTXVzdCBiZSBvdmVycmlkZGVuLlxyXG4gICAqL1xuXG5cbiAgU2VyaWVzTW9kZWwucHJvdG90eXBlLmdldEluaXRpYWxEYXRhID0gZnVuY3Rpb24gKG9wdGlvbiwgZWNNb2RlbCkge1xuICAgIHJldHVybjtcbiAgfTtcbiAgLyoqXHJcbiAgICogQXBwZW5kIGRhdGEgdG8gbGlzdFxyXG4gICAqL1xuXG5cbiAgU2VyaWVzTW9kZWwucHJvdG90eXBlLmFwcGVuZERhdGEgPSBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgLy8gRklYTUUgPz8/XG4gICAgLy8gKDEpIElmIGRhdGEgZnJvbSBkYXRhc2V0LCBmb3JiaWRkZW4gYXBwZW5kLlxuICAgIC8vICgyKSBzdXBwb3J0IGFwcGVuZCBkYXRhIG9mIGRhdGFzZXQuXG4gICAgdmFyIGRhdGEgPSB0aGlzLmdldFJhd0RhdGEoKTtcbiAgICBkYXRhLmFwcGVuZERhdGEocGFyYW1zLmRhdGEpO1xuICB9O1xuICAvKipcclxuICAgKiBDb25zaWRlciBzb21lIG1ldGhvZCBsaWtlIGBmaWx0ZXJgLCBgbWFwYCBuZWVkIG1ha2UgbmV3IGRhdGEsXHJcbiAgICogV2Ugc2hvdWxkIG1ha2Ugc3VyZSB0aGF0IGBzZXJpZXNNb2RlbC5nZXREYXRhKClgIGdldCBjb3JyZWN0XHJcbiAgICogZGF0YSBpbiB0aGUgc3RyZWFtIHByb2NlZHVyZS4gU28gd2UgZmV0Y2ggZGF0YSBmcm9tIHVwc3RyZWFtXHJcbiAgICogZWFjaCB0aW1lIGB0YXNrLnBlcmZvcm1gIGNhbGxlZC5cclxuICAgKi9cblxuXG4gIFNlcmllc01vZGVsLnByb3RvdHlwZS5nZXREYXRhID0gZnVuY3Rpb24gKGRhdGFUeXBlKSB7XG4gICAgdmFyIHRhc2sgPSBnZXRDdXJyZW50VGFzayh0aGlzKTtcblxuICAgIGlmICh0YXNrKSB7XG4gICAgICB2YXIgZGF0YSA9IHRhc2suY29udGV4dC5kYXRhO1xuICAgICAgcmV0dXJuIGRhdGFUeXBlID09IG51bGwgPyBkYXRhIDogZGF0YS5nZXRMaW5rZWREYXRhKGRhdGFUeXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gV2hlbiBzZXJpZXMgaXMgbm90IGFsaXZlICh0aGF0IG1heSBoYXBwZW4gd2hlbiBjbGljayB0b29sYm94XG4gICAgICAvLyByZXN0b3JlIG9yIHNldE9wdGlvbiB3aXRoIG5vdCBtZXJnZSBtb2RlKSwgc2VyaWVzIGRhdGEgbWF5XG4gICAgICAvLyBiZSBzdGlsbCBuZWVkIHRvIGp1ZGdlIGFuaW1hdGlvbiBvciBzb21ldGhpbmcgd2hlbiBncmFwaGljXG4gICAgICAvLyBlbGVtZW50cyB3YW50IHRvIGtub3cgd2hldGhlciBmYWRlIG91dC5cbiAgICAgIHJldHVybiBpbm5lcih0aGlzKS5kYXRhO1xuICAgIH1cbiAgfTtcblxuICBTZXJpZXNNb2RlbC5wcm90b3R5cGUuZ2V0QWxsRGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbWFpbkRhdGEgPSB0aGlzLmdldERhdGEoKTtcbiAgICByZXR1cm4gbWFpbkRhdGEgJiYgbWFpbkRhdGEuZ2V0TGlua2VkRGF0YUFsbCA/IG1haW5EYXRhLmdldExpbmtlZERhdGFBbGwoKSA6IFt7XG4gICAgICBkYXRhOiBtYWluRGF0YVxuICAgIH1dO1xuICB9O1xuXG4gIFNlcmllc01vZGVsLnByb3RvdHlwZS5zZXREYXRhID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICB2YXIgdGFzayA9IGdldEN1cnJlbnRUYXNrKHRoaXMpO1xuXG4gICAgaWYgKHRhc2spIHtcbiAgICAgIHZhciBjb250ZXh0ID0gdGFzay5jb250ZXh0OyAvLyBDb25zaWRlciBjYXNlOiBmaWx0ZXIsIGRhdGEgc2FtcGxlLlxuICAgICAgLy8gRklYTUU6VFMgbmV2ZXIgdXNlZCwgc28gY29tbWVudCBpdFxuICAgICAgLy8gaWYgKGNvbnRleHQuZGF0YSAhPT0gZGF0YSAmJiB0YXNrLm1vZGlmeU91dHB1dEVuZCkge1xuICAgICAgLy8gICAgIHRhc2suc2V0T3V0cHV0RW5kKGRhdGEuY291bnQoKSk7XG4gICAgICAvLyB9XG5cbiAgICAgIGNvbnRleHQub3V0cHV0RGF0YSA9IGRhdGE7IC8vIENhdXRpb246IHNldERhdGEgc2hvdWxkIHVwZGF0ZSBjb250ZXh0LmRhdGEsXG4gICAgICAvLyBCZWNhdXNlIGdldERhdGEgbWF5IGJlIGNhbGxlZCBtdWx0aXBseSBpbiBhXG4gICAgICAvLyBzaW5nbGUgc3RhZ2UgYW5kIGV4cGVjdCB0byBnZXQgdGhlIGRhdGEganVzdFxuICAgICAgLy8gc2V0LiAoRm9yIGV4YW1wbGUsIEF4aXNQcm94eSwgeCB5IGJvdGggY2FsbFxuICAgICAgLy8gZ2V0RGF0YSBhbmQgc2V0RGF0ZSBzZXF1ZW50aWFsbHkpLlxuICAgICAgLy8gU28gdGhlIGNvbnRleHQuZGF0YSBzaG91bGQgYmUgZmV0Y2hlZCBmcm9tXG4gICAgICAvLyB1cHN0cmVhbSBlYWNoIHRpbWUgd2hlbiBhIHN0YWdlIHN0YXJ0cyB0byBiZVxuICAgICAgLy8gcGVyZm9ybWVkLlxuXG4gICAgICBpZiAodGFzayAhPT0gdGhpcy5kYXRhVGFzaykge1xuICAgICAgICBjb250ZXh0LmRhdGEgPSBkYXRhO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlubmVyKHRoaXMpLmRhdGEgPSBkYXRhO1xuICB9O1xuXG4gIFNlcmllc01vZGVsLnByb3RvdHlwZS5nZXRFbmNvZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVuY29kZSA9IHRoaXMuZ2V0KCdlbmNvZGUnLCB0cnVlKTtcblxuICAgIGlmIChlbmNvZGUpIHtcbiAgICAgIHJldHVybiB6clV0aWwuY3JlYXRlSGFzaE1hcChlbmNvZGUpO1xuICAgIH1cbiAgfTtcblxuICBTZXJpZXNNb2RlbC5wcm90b3R5cGUuZ2V0U291cmNlTWFuYWdlciA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gaW5uZXIodGhpcykuc291cmNlTWFuYWdlcjtcbiAgfTtcblxuICBTZXJpZXNNb2RlbC5wcm90b3R5cGUuZ2V0U291cmNlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmdldFNvdXJjZU1hbmFnZXIoKS5nZXRTb3VyY2UoKTtcbiAgfTtcbiAgLyoqXHJcbiAgICogR2V0IGRhdGEgYmVmb3JlIHByb2Nlc3NlZFxyXG4gICAqL1xuXG5cbiAgU2VyaWVzTW9kZWwucHJvdG90eXBlLmdldFJhd0RhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGlubmVyKHRoaXMpLmRhdGFCZWZvcmVQcm9jZXNzZWQ7XG4gIH07XG5cbiAgU2VyaWVzTW9kZWwucHJvdG90eXBlLmdldENvbG9yQnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNvbG9yQnkgPSB0aGlzLmdldCgnY29sb3JCeScpO1xuICAgIHJldHVybiBjb2xvckJ5IHx8ICdzZXJpZXMnO1xuICB9O1xuXG4gIFNlcmllc01vZGVsLnByb3RvdHlwZS5pc0NvbG9yQnlTZXJpZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q29sb3JCeSgpID09PSAnc2VyaWVzJztcbiAgfTtcbiAgLyoqXHJcbiAgICogR2V0IGJhc2UgYXhpcyBpZiBoYXMgY29vcmRpbmF0ZSBzeXN0ZW0gYW5kIGhhcyBheGlzLlxyXG4gICAqIEJ5IGRlZmF1bHQgdXNlIGNvb3JkU3lzLmdldEJhc2VBeGlzKCk7XHJcbiAgICogQ2FuIGJlIG92ZXJyaWRkZW4gZm9yIHNvbWUgY2hhcnQuXHJcbiAgICogQHJldHVybiB7dHlwZX0gZGVzY3JpcHRpb25cclxuICAgKi9cblxuXG4gIFNlcmllc01vZGVsLnByb3RvdHlwZS5nZXRCYXNlQXhpcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY29vcmRTeXMgPSB0aGlzLmNvb3JkaW5hdGVTeXN0ZW07IC8vIEB0cy1pZ25vcmVcblxuICAgIHJldHVybiBjb29yZFN5cyAmJiBjb29yZFN5cy5nZXRCYXNlQXhpcyAmJiBjb29yZFN5cy5nZXRCYXNlQXhpcygpO1xuICB9O1xuICAvKipcclxuICAgKiBEZWZhdWx0IHRvb2x0aXAgZm9ybWF0dGVyXHJcbiAgICpcclxuICAgKiBAcGFyYW0gZGF0YUluZGV4XHJcbiAgICogQHBhcmFtIG11bHRpcGxlU2VyaWVzXHJcbiAgICogQHBhcmFtIGRhdGFUeXBlXHJcbiAgICogQHBhcmFtIHJlbmRlck1vZGUgdmFsaWQgdmFsdWVzOiAnaHRtbCcoYnkgZGVmYXVsdCkgYW5kICdyaWNoVGV4dCcuXHJcbiAgICogICAgICAgICdodG1sJyBpcyB1c2VkIGZvciByZW5kZXJpbmcgdG9vbHRpcCBpbiBleHRyYSBET00gZm9ybSwgYW5kIHRoZSByZXN1bHRcclxuICAgKiAgICAgICAgc3RyaW5nIGlzIHVzZWQgYXMgRE9NIEhUTUwgY29udGVudC5cclxuICAgKiAgICAgICAgJ3JpY2hUZXh0JyBpcyB1c2VkIGZvciByZW5kZXJpbmcgdG9vbHRpcCBpbiByaWNoIHRleHQgZm9ybSwgZm9yIHRob3NlIHdoZXJlXHJcbiAgICogICAgICAgIERPTSBvcGVyYXRpb24gaXMgbm90IHN1cHBvcnRlZC5cclxuICAgKiBAcmV0dXJuIGZvcm1hdHRlZCB0b29sdGlwIHdpdGggYGh0bWxgIGFuZCBgbWFya2Vyc2BcclxuICAgKiAgICAgICAgTm90aWNlOiBUaGUgb3ZlcnJpZGUgbWV0aG9kIGNhbiBhbHNvIHJldHVybiBzdHJpbmdcclxuICAgKi9cblxuXG4gIFNlcmllc01vZGVsLnByb3RvdHlwZS5mb3JtYXRUb29sdGlwID0gZnVuY3Rpb24gKGRhdGFJbmRleCwgbXVsdGlwbGVTZXJpZXMsIGRhdGFUeXBlKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRTZXJpZXNGb3JtYXRUb29sdGlwKHtcbiAgICAgIHNlcmllczogdGhpcyxcbiAgICAgIGRhdGFJbmRleDogZGF0YUluZGV4LFxuICAgICAgbXVsdGlwbGVTZXJpZXM6IG11bHRpcGxlU2VyaWVzXG4gICAgfSk7XG4gIH07XG5cbiAgU2VyaWVzTW9kZWwucHJvdG90eXBlLmlzQW5pbWF0aW9uRW5hYmxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZWNNb2RlbCA9IHRoaXMuZWNNb2RlbDsgLy8gRGlzYWJsZSBhbmltYXRpb24gaWYgdXNpbmcgZWNoYXJ0cyBpbiBub2RlIGJ1dCBub3QgZ2l2ZSBzc3IgZmxhZy5cbiAgICAvLyBJbiBzc3IgbW9kZSwgcmVuZGVyVG9TdHJpbmcgd2lsbCBnZW5lcmF0ZSBzdmcgd2l0aCBjc3MgYW5pbWF0aW9uLlxuXG4gICAgaWYgKGVudi5ub2RlICYmICEoZWNNb2RlbCAmJiBlY01vZGVsLnNzcikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgYW5pbWF0aW9uRW5hYmxlZCA9IHRoaXMuZ2V0U2hhbGxvdygnYW5pbWF0aW9uJyk7XG5cbiAgICBpZiAoYW5pbWF0aW9uRW5hYmxlZCkge1xuICAgICAgaWYgKHRoaXMuZ2V0RGF0YSgpLmNvdW50KCkgPiB0aGlzLmdldFNoYWxsb3coJ2FuaW1hdGlvblRocmVzaG9sZCcpKSB7XG4gICAgICAgIGFuaW1hdGlvbkVuYWJsZWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gISFhbmltYXRpb25FbmFibGVkO1xuICB9O1xuXG4gIFNlcmllc01vZGVsLnByb3RvdHlwZS5yZXN0b3JlRGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmRhdGFUYXNrLmRpcnR5KCk7XG4gIH07XG5cbiAgU2VyaWVzTW9kZWwucHJvdG90eXBlLmdldENvbG9yRnJvbVBhbGV0dGUgPSBmdW5jdGlvbiAobmFtZSwgc2NvcGUsIHJlcXVlc3RDb2xvck51bSkge1xuICAgIHZhciBlY01vZGVsID0gdGhpcy5lY01vZGVsOyAvLyBQRU5ESU5HXG5cbiAgICB2YXIgY29sb3IgPSBQYWxldHRlTWl4aW4ucHJvdG90eXBlLmdldENvbG9yRnJvbVBhbGV0dGUuY2FsbCh0aGlzLCBuYW1lLCBzY29wZSwgcmVxdWVzdENvbG9yTnVtKTtcblxuICAgIGlmICghY29sb3IpIHtcbiAgICAgIGNvbG9yID0gZWNNb2RlbC5nZXRDb2xvckZyb21QYWxldHRlKG5hbWUsIHNjb3BlLCByZXF1ZXN0Q29sb3JOdW0pO1xuICAgIH1cblxuICAgIHJldHVybiBjb2xvcjtcbiAgfTtcbiAgLyoqXHJcbiAgICogVXNlIGBkYXRhLm1hcERpbWVuc2lvbnNBbGwoY29vcmREaW0pYCBpbnN0ZWFkLlxyXG4gICAqIEBkZXByZWNhdGVkXHJcbiAgICovXG5cblxuICBTZXJpZXNNb2RlbC5wcm90b3R5cGUuY29vcmREaW1Ub0RhdGFEaW0gPSBmdW5jdGlvbiAoY29vcmREaW0pIHtcbiAgICByZXR1cm4gdGhpcy5nZXRSYXdEYXRhKCkubWFwRGltZW5zaW9uc0FsbChjb29yZERpbSk7XG4gIH07XG4gIC8qKlxyXG4gICAqIEdldCBwcm9ncmVzc2l2ZSByZW5kZXJpbmcgY291bnQgZWFjaCBzdGVwXHJcbiAgICovXG5cblxuICBTZXJpZXNNb2RlbC5wcm90b3R5cGUuZ2V0UHJvZ3Jlc3NpdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KCdwcm9ncmVzc2l2ZScpO1xuICB9O1xuICAvKipcclxuICAgKiBHZXQgcHJvZ3Jlc3NpdmUgcmVuZGVyaW5nIGNvdW50IGVhY2ggc3RlcFxyXG4gICAqL1xuXG5cbiAgU2VyaWVzTW9kZWwucHJvdG90eXBlLmdldFByb2dyZXNzaXZlVGhyZXNob2xkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmdldCgncHJvZ3Jlc3NpdmVUaHJlc2hvbGQnKTtcbiAgfTsgLy8gUEVOR0lORyBJZiBzZWxlY3RlZE1vZGUgaXMgbnVsbCA/XG5cblxuICBTZXJpZXNNb2RlbC5wcm90b3R5cGUuc2VsZWN0ID0gZnVuY3Rpb24gKGlubmVyRGF0YUluZGljZXMsIGRhdGFUeXBlKSB7XG4gICAgdGhpcy5faW5uZXJTZWxlY3QodGhpcy5nZXREYXRhKGRhdGFUeXBlKSwgaW5uZXJEYXRhSW5kaWNlcyk7XG4gIH07XG5cbiAgU2VyaWVzTW9kZWwucHJvdG90eXBlLnVuc2VsZWN0ID0gZnVuY3Rpb24gKGlubmVyRGF0YUluZGljZXMsIGRhdGFUeXBlKSB7XG4gICAgdmFyIHNlbGVjdGVkTWFwID0gdGhpcy5vcHRpb24uc2VsZWN0ZWRNYXA7XG5cbiAgICBpZiAoIXNlbGVjdGVkTWFwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHNlbGVjdGVkTW9kZSA9IHRoaXMub3B0aW9uLnNlbGVjdGVkTW9kZTtcbiAgICB2YXIgZGF0YSA9IHRoaXMuZ2V0RGF0YShkYXRhVHlwZSk7XG5cbiAgICBpZiAoc2VsZWN0ZWRNb2RlID09PSAnc2VyaWVzJyB8fCBzZWxlY3RlZE1hcCA9PT0gJ2FsbCcpIHtcbiAgICAgIHRoaXMub3B0aW9uLnNlbGVjdGVkTWFwID0ge307XG4gICAgICB0aGlzLl9zZWxlY3RlZERhdGFJbmRpY2VzTWFwID0ge307XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbm5lckRhdGFJbmRpY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZGF0YUluZGV4ID0gaW5uZXJEYXRhSW5kaWNlc1tpXTtcbiAgICAgIHZhciBuYW1lT3JJZCA9IGdldFNlbGVjdGlvbktleShkYXRhLCBkYXRhSW5kZXgpO1xuICAgICAgc2VsZWN0ZWRNYXBbbmFtZU9ySWRdID0gZmFsc2U7XG4gICAgICB0aGlzLl9zZWxlY3RlZERhdGFJbmRpY2VzTWFwW25hbWVPcklkXSA9IC0xO1xuICAgIH1cbiAgfTtcblxuICBTZXJpZXNNb2RlbC5wcm90b3R5cGUudG9nZ2xlU2VsZWN0ID0gZnVuY3Rpb24gKGlubmVyRGF0YUluZGljZXMsIGRhdGFUeXBlKSB7XG4gICAgdmFyIHRtcEFyciA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbm5lckRhdGFJbmRpY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0bXBBcnJbMF0gPSBpbm5lckRhdGFJbmRpY2VzW2ldO1xuICAgICAgdGhpcy5pc1NlbGVjdGVkKGlubmVyRGF0YUluZGljZXNbaV0sIGRhdGFUeXBlKSA/IHRoaXMudW5zZWxlY3QodG1wQXJyLCBkYXRhVHlwZSkgOiB0aGlzLnNlbGVjdCh0bXBBcnIsIGRhdGFUeXBlKTtcbiAgICB9XG4gIH07XG5cbiAgU2VyaWVzTW9kZWwucHJvdG90eXBlLmdldFNlbGVjdGVkRGF0YUluZGljZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMub3B0aW9uLnNlbGVjdGVkTWFwID09PSAnYWxsJykge1xuICAgICAgcmV0dXJuIFtdLnNsaWNlLmNhbGwodGhpcy5nZXREYXRhKCkuZ2V0SW5kaWNlcygpKTtcbiAgICB9XG5cbiAgICB2YXIgc2VsZWN0ZWREYXRhSW5kaWNlc01hcCA9IHRoaXMuX3NlbGVjdGVkRGF0YUluZGljZXNNYXA7XG4gICAgdmFyIG5hbWVPcklkcyA9IHpyVXRpbC5rZXlzKHNlbGVjdGVkRGF0YUluZGljZXNNYXApO1xuICAgIHZhciBkYXRhSW5kaWNlcyA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuYW1lT3JJZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBkYXRhSW5kZXggPSBzZWxlY3RlZERhdGFJbmRpY2VzTWFwW25hbWVPcklkc1tpXV07XG5cbiAgICAgIGlmIChkYXRhSW5kZXggPj0gMCkge1xuICAgICAgICBkYXRhSW5kaWNlcy5wdXNoKGRhdGFJbmRleCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGFJbmRpY2VzO1xuICB9O1xuXG4gIFNlcmllc01vZGVsLnByb3RvdHlwZS5pc1NlbGVjdGVkID0gZnVuY3Rpb24gKGRhdGFJbmRleCwgZGF0YVR5cGUpIHtcbiAgICB2YXIgc2VsZWN0ZWRNYXAgPSB0aGlzLm9wdGlvbi5zZWxlY3RlZE1hcDtcblxuICAgIGlmICghc2VsZWN0ZWRNYXApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgZGF0YSA9IHRoaXMuZ2V0RGF0YShkYXRhVHlwZSk7XG4gICAgcmV0dXJuIChzZWxlY3RlZE1hcCA9PT0gJ2FsbCcgfHwgc2VsZWN0ZWRNYXBbZ2V0U2VsZWN0aW9uS2V5KGRhdGEsIGRhdGFJbmRleCldKSAmJiAhZGF0YS5nZXRJdGVtTW9kZWwoZGF0YUluZGV4KS5nZXQoWydzZWxlY3QnLCAnZGlzYWJsZWQnXSk7XG4gIH07XG5cbiAgU2VyaWVzTW9kZWwucHJvdG90eXBlLmlzVW5pdmVyc2FsVHJhbnNpdGlvbkVuYWJsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXNbU0VSSUVTX1VOSVZFUlNBTF9UUkFOU0lUSU9OX1BST1BdKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgdW5pdmVyc2FsVHJhbnNpdGlvbk9wdCA9IHRoaXMub3B0aW9uLnVuaXZlcnNhbFRyYW5zaXRpb247IC8vIFF1aWNrIHJlamVjdFxuXG4gICAgaWYgKCF1bml2ZXJzYWxUcmFuc2l0aW9uT3B0KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHVuaXZlcnNhbFRyYW5zaXRpb25PcHQgPT09IHRydWUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gLy8gQ2FuIGJlIHNpbXBseSAndW5pdmVyc2FsVHJhbnNpdGlvbjogdHJ1ZSdcblxuXG4gICAgcmV0dXJuIHVuaXZlcnNhbFRyYW5zaXRpb25PcHQgJiYgdW5pdmVyc2FsVHJhbnNpdGlvbk9wdC5lbmFibGVkO1xuICB9O1xuXG4gIFNlcmllc01vZGVsLnByb3RvdHlwZS5faW5uZXJTZWxlY3QgPSBmdW5jdGlvbiAoZGF0YSwgaW5uZXJEYXRhSW5kaWNlcykge1xuICAgIHZhciBfYSwgX2I7XG5cbiAgICB2YXIgb3B0aW9uID0gdGhpcy5vcHRpb247XG4gICAgdmFyIHNlbGVjdGVkTW9kZSA9IG9wdGlvbi5zZWxlY3RlZE1vZGU7XG4gICAgdmFyIGxlbiA9IGlubmVyRGF0YUluZGljZXMubGVuZ3RoO1xuXG4gICAgaWYgKCFzZWxlY3RlZE1vZGUgfHwgIWxlbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChzZWxlY3RlZE1vZGUgPT09ICdzZXJpZXMnKSB7XG4gICAgICBvcHRpb24uc2VsZWN0ZWRNYXAgPSAnYWxsJztcbiAgICB9IGVsc2UgaWYgKHNlbGVjdGVkTW9kZSA9PT0gJ211bHRpcGxlJykge1xuICAgICAgaWYgKCF6clV0aWwuaXNPYmplY3Qob3B0aW9uLnNlbGVjdGVkTWFwKSkge1xuICAgICAgICBvcHRpb24uc2VsZWN0ZWRNYXAgPSB7fTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNlbGVjdGVkTWFwID0gb3B0aW9uLnNlbGVjdGVkTWFwO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHZhciBkYXRhSW5kZXggPSBpbm5lckRhdGFJbmRpY2VzW2ldOyAvLyBUT0RPIGRpZmZlcmVudCB0eXBlcyBvZiBkYXRhIHNoYXJlIHNhbWUgb2JqZWN0LlxuXG4gICAgICAgIHZhciBuYW1lT3JJZCA9IGdldFNlbGVjdGlvbktleShkYXRhLCBkYXRhSW5kZXgpO1xuICAgICAgICBzZWxlY3RlZE1hcFtuYW1lT3JJZF0gPSB0cnVlO1xuICAgICAgICB0aGlzLl9zZWxlY3RlZERhdGFJbmRpY2VzTWFwW25hbWVPcklkXSA9IGRhdGEuZ2V0UmF3SW5kZXgoZGF0YUluZGV4KTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHNlbGVjdGVkTW9kZSA9PT0gJ3NpbmdsZScgfHwgc2VsZWN0ZWRNb2RlID09PSB0cnVlKSB7XG4gICAgICB2YXIgbGFzdERhdGFJbmRleCA9IGlubmVyRGF0YUluZGljZXNbbGVuIC0gMV07XG4gICAgICB2YXIgbmFtZU9ySWQgPSBnZXRTZWxlY3Rpb25LZXkoZGF0YSwgbGFzdERhdGFJbmRleCk7XG4gICAgICBvcHRpb24uc2VsZWN0ZWRNYXAgPSAoX2EgPSB7fSwgX2FbbmFtZU9ySWRdID0gdHJ1ZSwgX2EpO1xuICAgICAgdGhpcy5fc2VsZWN0ZWREYXRhSW5kaWNlc01hcCA9IChfYiA9IHt9LCBfYltuYW1lT3JJZF0gPSBkYXRhLmdldFJhd0luZGV4KGxhc3REYXRhSW5kZXgpLCBfYik7XG4gICAgfVxuICB9O1xuXG4gIFNlcmllc01vZGVsLnByb3RvdHlwZS5faW5pdFNlbGVjdGVkTWFwRnJvbURhdGEgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgIC8vIElnbm9yZSBzZWxlY3QgaW5mbyBpbiBkYXRhIGlmIHNlbGVjdGVkTWFwIGV4aXN0cy5cbiAgICAvLyBOT1RFIEl0J3Mgb25seSBmb3IgbGVnYWN5IHVzYWdlLiBlZGdlIGRhdGEgaXMgbm90IHN1cHBvcnRlZC5cbiAgICBpZiAodGhpcy5vcHRpb24uc2VsZWN0ZWRNYXApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZGF0YUluZGljZXMgPSBbXTtcblxuICAgIGlmIChkYXRhLmhhc0l0ZW1PcHRpb24pIHtcbiAgICAgIGRhdGEuZWFjaChmdW5jdGlvbiAoaWR4KSB7XG4gICAgICAgIHZhciByYXdJdGVtID0gZGF0YS5nZXRSYXdEYXRhSXRlbShpZHgpO1xuXG4gICAgICAgIGlmIChyYXdJdGVtICYmIHJhd0l0ZW0uc2VsZWN0ZWQpIHtcbiAgICAgICAgICBkYXRhSW5kaWNlcy5wdXNoKGlkeCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChkYXRhSW5kaWNlcy5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLl9pbm5lclNlbGVjdChkYXRhLCBkYXRhSW5kaWNlcyk7XG4gICAgfVxuICB9OyAvLyAvKipcbiAgLy8gICogQHNlZSB7bW9kdWxlOmVjaGFydHMvc3RyZWFtL1NjaGVkdWxlcn1cbiAgLy8gICovXG4gIC8vIGFic3RyYWN0IHBpcGVUYXNrOiBudWxsXG5cblxuICBTZXJpZXNNb2RlbC5yZWdpc3RlckNsYXNzID0gZnVuY3Rpb24gKGNseikge1xuICAgIHJldHVybiBDb21wb25lbnRNb2RlbC5yZWdpc3RlckNsYXNzKGNseik7XG4gIH07XG5cbiAgU2VyaWVzTW9kZWwucHJvdG9Jbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBwcm90byA9IFNlcmllc01vZGVsLnByb3RvdHlwZTtcbiAgICBwcm90by50eXBlID0gJ3Nlcmllcy5fX2Jhc2VfXyc7XG4gICAgcHJvdG8uc2VyaWVzSW5kZXggPSAwO1xuICAgIHByb3RvLmlnbm9yZVN0eWxlT25EYXRhID0gZmFsc2U7XG4gICAgcHJvdG8uaGFzU3ltYm9sVmlzdWFsID0gZmFsc2U7XG4gICAgcHJvdG8uZGVmYXVsdFN5bWJvbCA9ICdjaXJjbGUnOyAvLyBNYWtlIHN1cmUgdGhlIHZhbHVlcyBjYW4gYmUgYWNjZXNzZWQhXG5cbiAgICBwcm90by52aXN1YWxTdHlsZUFjY2Vzc1BhdGggPSAnaXRlbVN0eWxlJztcbiAgICBwcm90by52aXN1YWxEcmF3VHlwZSA9ICdmaWxsJztcbiAgfSgpO1xuXG4gIHJldHVybiBTZXJpZXNNb2RlbDtcbn0oQ29tcG9uZW50TW9kZWwpO1xuXG56clV0aWwubWl4aW4oU2VyaWVzTW9kZWwsIERhdGFGb3JtYXRNaXhpbik7XG56clV0aWwubWl4aW4oU2VyaWVzTW9kZWwsIFBhbGV0dGVNaXhpbik7XG5tb3VudEV4dGVuZChTZXJpZXNNb2RlbCwgQ29tcG9uZW50TW9kZWwpO1xuLyoqXHJcbiAqIE1VU1QgYmUgY2FsbGVkIGFmdGVyIGBwcmVwYXJlU291cmNlYCBjYWxsZWRcclxuICogSGVyZSB3ZSBuZWVkIHRvIG1ha2UgYXV0byBzZXJpZXMsIGVzcGVjaWFsbHkgZm9yIGF1dG8gbGVnZW5kLiBCdXQgd2VcclxuICogZG8gbm90IG1vZGlmeSBzZXJpZXMubmFtZSBpbiBvcHRpb24gdG8gYXZvaWQgc2lkZSBlZmZlY3RzLlxyXG4gKi9cblxuZnVuY3Rpb24gYXV0b1Nlcmllc05hbWUoc2VyaWVzTW9kZWwpIHtcbiAgLy8gVXNlciBzcGVjaWZpZWQgbmFtZSBoYXMgaGlnaGVyIHByaW9yaXR5LCBvdGhlcndpc2UgaXQgbWF5IGNhdXNlXG4gIC8vIHNlcmllcyBjYW4gbm90IGJlIHF1ZXJpZWQgdW5leHBlY3RlZGx5LlxuICB2YXIgbmFtZSA9IHNlcmllc01vZGVsLm5hbWU7XG5cbiAgaWYgKCFtb2RlbFV0aWwuaXNOYW1lU3BlY2lmaWVkKHNlcmllc01vZGVsKSkge1xuICAgIHNlcmllc01vZGVsLm5hbWUgPSBnZXRTZXJpZXNBdXRvTmFtZShzZXJpZXNNb2RlbCkgfHwgbmFtZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRTZXJpZXNBdXRvTmFtZShzZXJpZXNNb2RlbCkge1xuICB2YXIgZGF0YSA9IHNlcmllc01vZGVsLmdldFJhd0RhdGEoKTtcbiAgdmFyIGRhdGFEaW1zID0gZGF0YS5tYXBEaW1lbnNpb25zQWxsKCdzZXJpZXNOYW1lJyk7XG4gIHZhciBuYW1lQXJyID0gW107XG4gIHpyVXRpbC5lYWNoKGRhdGFEaW1zLCBmdW5jdGlvbiAoZGF0YURpbSkge1xuICAgIHZhciBkaW1JbmZvID0gZGF0YS5nZXREaW1lbnNpb25JbmZvKGRhdGFEaW0pO1xuICAgIGRpbUluZm8uZGlzcGxheU5hbWUgJiYgbmFtZUFyci5wdXNoKGRpbUluZm8uZGlzcGxheU5hbWUpO1xuICB9KTtcbiAgcmV0dXJuIG5hbWVBcnIuam9pbignICcpO1xufVxuXG5mdW5jdGlvbiBkYXRhVGFza0NvdW50KGNvbnRleHQpIHtcbiAgcmV0dXJuIGNvbnRleHQubW9kZWwuZ2V0UmF3RGF0YSgpLmNvdW50KCk7XG59XG5cbmZ1bmN0aW9uIGRhdGFUYXNrUmVzZXQoY29udGV4dCkge1xuICB2YXIgc2VyaWVzTW9kZWwgPSBjb250ZXh0Lm1vZGVsO1xuICBzZXJpZXNNb2RlbC5zZXREYXRhKHNlcmllc01vZGVsLmdldFJhd0RhdGEoKS5jbG9uZVNoYWxsb3coKSk7XG4gIHJldHVybiBkYXRhVGFza1Byb2dyZXNzO1xufVxuXG5mdW5jdGlvbiBkYXRhVGFza1Byb2dyZXNzKHBhcmFtLCBjb250ZXh0KSB7XG4gIC8vIEF2b2lkIHJlcGVhdCBjbG9uZVNoYWxsb3cgd2hlbiBkYXRhIGp1c3QgY3JlYXRlZCBpbiByZXNldC5cbiAgaWYgKGNvbnRleHQub3V0cHV0RGF0YSAmJiBwYXJhbS5lbmQgPiBjb250ZXh0Lm91dHB1dERhdGEuY291bnQoKSkge1xuICAgIGNvbnRleHQubW9kZWwuZ2V0UmF3RGF0YSgpLmNsb25lU2hhbGxvdyhjb250ZXh0Lm91dHB1dERhdGEpO1xuICB9XG59IC8vIFRPRE8gcmVmYWN0b3JcblxuXG5mdW5jdGlvbiB3cmFwRGF0YShkYXRhLCBzZXJpZXNNb2RlbCkge1xuICB6clV0aWwuZWFjaCh6clV0aWwuY29uY2F0QXJyYXkoZGF0YS5DSEFOR0FCTEVfTUVUSE9EUywgZGF0YS5ET1dOU0FNUExFX01FVEhPRFMpLCBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICAgIGRhdGEud3JhcE1ldGhvZChtZXRob2ROYW1lLCB6clV0aWwuY3Vycnkob25EYXRhQ2hhbmdlLCBzZXJpZXNNb2RlbCkpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gb25EYXRhQ2hhbmdlKHNlcmllc01vZGVsLCBuZXdMaXN0KSB7XG4gIHZhciB0YXNrID0gZ2V0Q3VycmVudFRhc2soc2VyaWVzTW9kZWwpO1xuXG4gIGlmICh0YXNrKSB7XG4gICAgLy8gQ29uc2lkZXIgY2FzZTogZmlsdGVyLCBzZWxlY3RSYW5nZVxuICAgIHRhc2suc2V0T3V0cHV0RW5kKChuZXdMaXN0IHx8IHRoaXMpLmNvdW50KCkpO1xuICB9XG5cbiAgcmV0dXJuIG5ld0xpc3Q7XG59XG5cbmZ1bmN0aW9uIGdldEN1cnJlbnRUYXNrKHNlcmllc01vZGVsKSB7XG4gIHZhciBzY2hlZHVsZXIgPSAoc2VyaWVzTW9kZWwuZWNNb2RlbCB8fCB7fSkuc2NoZWR1bGVyO1xuICB2YXIgcGlwZWxpbmUgPSBzY2hlZHVsZXIgJiYgc2NoZWR1bGVyLmdldFBpcGVsaW5lKHNlcmllc01vZGVsLnVpZCk7XG5cbiAgaWYgKHBpcGVsaW5lKSB7XG4gICAgLy8gV2hlbiBwaXBsaW5lIGZpbmlzaGVkLCB0aGUgY3VycnJlbnRUYXNrIGtlZXAgdGhlIGxhc3RcbiAgICAvLyB0YXNrIChyZW5kZXJUYXNrKS5cbiAgICB2YXIgdGFzayA9IHBpcGVsaW5lLmN1cnJlbnRUYXNrO1xuXG4gICAgaWYgKHRhc2spIHtcbiAgICAgIHZhciBhZ2VudFN0dWJNYXAgPSB0YXNrLmFnZW50U3R1Yk1hcDtcblxuICAgICAgaWYgKGFnZW50U3R1Yk1hcCkge1xuICAgICAgICB0YXNrID0gYWdlbnRTdHViTWFwLmdldChzZXJpZXNNb2RlbC51aWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0YXNrO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlcmllc01vZGVsOyIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IEdyb3VwIGZyb20gJ3pyZW5kZXIvbGliL2dyYXBoaWMvR3JvdXAuanMnO1xuaW1wb3J0ICogYXMgY29tcG9uZW50VXRpbCBmcm9tICcuLi91dGlsL2NvbXBvbmVudC5qcyc7XG5pbXBvcnQgKiBhcyBjbGF6elV0aWwgZnJvbSAnLi4vdXRpbC9jbGF6ei5qcyc7XG5cbnZhciBDb21wb25lbnRWaWV3ID1cbi8qKiBAY2xhc3MgKi9cbmZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQ29tcG9uZW50VmlldygpIHtcbiAgICB0aGlzLmdyb3VwID0gbmV3IEdyb3VwKCk7XG4gICAgdGhpcy51aWQgPSBjb21wb25lbnRVdGlsLmdldFVJRCgndmlld0NvbXBvbmVudCcpO1xuICB9XG5cbiAgQ29tcG9uZW50Vmlldy5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIChlY01vZGVsLCBhcGkpIHt9O1xuXG4gIENvbXBvbmVudFZpZXcucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChtb2RlbCwgZWNNb2RlbCwgYXBpLCBwYXlsb2FkKSB7fTtcblxuICBDb21wb25lbnRWaWV3LnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKGVjTW9kZWwsIGFwaSkge307XG5cbiAgQ29tcG9uZW50Vmlldy5wcm90b3R5cGUudXBkYXRlVmlldyA9IGZ1bmN0aW9uIChtb2RlbCwgZWNNb2RlbCwgYXBpLCBwYXlsb2FkKSB7Ly8gRG8gbm90aGluZztcbiAgfTtcblxuICBDb21wb25lbnRWaWV3LnByb3RvdHlwZS51cGRhdGVMYXlvdXQgPSBmdW5jdGlvbiAobW9kZWwsIGVjTW9kZWwsIGFwaSwgcGF5bG9hZCkgey8vIERvIG5vdGhpbmc7XG4gIH07XG5cbiAgQ29tcG9uZW50Vmlldy5wcm90b3R5cGUudXBkYXRlVmlzdWFsID0gZnVuY3Rpb24gKG1vZGVsLCBlY01vZGVsLCBhcGksIHBheWxvYWQpIHsvLyBEbyBub3RoaW5nO1xuICB9O1xuICAvKipcclxuICAgKiBIb29rIGZvciB0b2dnbGUgYmx1ciB0YXJnZXQgc2VyaWVzLlxyXG4gICAqIENhbiBiZSB1c2VkIGluIG1hcmtlciBmb3IgYmx1ciBvciBsZWF2ZSBibHVyIHRoZSBtYXJrZXJzXHJcbiAgICovXG5cblxuICBDb21wb25lbnRWaWV3LnByb3RvdHlwZS50b2dnbGVCbHVyU2VyaWVzID0gZnVuY3Rpb24gKHNlcmllc01vZGVscywgaXNCbHVyLCBlY01vZGVsKSB7Ly8gRG8gbm90aGluZztcbiAgfTtcbiAgLyoqXHJcbiAgICogVHJhdmVyc2UgdGhlIG5ldyByZW5kZXJlZCBlbGVtZW50cy5cclxuICAgKlxyXG4gICAqIEl0IHdpbGwgdHJhdmVyc2UgdGhlIG5ldyBhZGRlZCBlbGVtZW50IGluIHByb2dyZXNzaXZlIHJlbmRlcmluZy5cclxuICAgKiBBbmQgdHJhdmVyc2UgYWxsIGluIG5vcm1hbCByZW5kZXJpbmcuXHJcbiAgICovXG5cblxuICBDb21wb25lbnRWaWV3LnByb3RvdHlwZS5lYWNoUmVuZGVyZWQgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICB2YXIgZ3JvdXAgPSB0aGlzLmdyb3VwO1xuXG4gICAgaWYgKGdyb3VwKSB7XG4gICAgICBncm91cC50cmF2ZXJzZShjYik7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBDb21wb25lbnRWaWV3O1xufSgpO1xuXG47XG5jbGF6elV0aWwuZW5hYmxlQ2xhc3NFeHRlbmQoQ29tcG9uZW50Vmlldyk7XG5jbGF6elV0aWwuZW5hYmxlQ2xhc3NNYW5hZ2VtZW50KENvbXBvbmVudFZpZXcpO1xuZXhwb3J0IGRlZmF1bHQgQ29tcG9uZW50VmlldzsiLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCB7IG1ha2VJbm5lciB9IGZyb20gJy4uLy4uL3V0aWwvbW9kZWwuanMnO1xuLyoqXHJcbiAqIEByZXR1cm4ge3N0cmluZ30gSWYgbGFyZ2UgbW9kZSBjaGFuZ2VkLCByZXR1cm4gc3RyaW5nICdyZXNldCc7XHJcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVSZW5kZXJQbGFubmVyKCkge1xuICB2YXIgaW5uZXIgPSBtYWtlSW5uZXIoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChzZXJpZXNNb2RlbCkge1xuICAgIHZhciBmaWVsZHMgPSBpbm5lcihzZXJpZXNNb2RlbCk7XG4gICAgdmFyIHBpcGVsaW5lQ29udGV4dCA9IHNlcmllc01vZGVsLnBpcGVsaW5lQ29udGV4dDtcbiAgICB2YXIgb3JpZ2luYWxMYXJnZSA9ICEhZmllbGRzLmxhcmdlO1xuICAgIHZhciBvcmlnaW5hbFByb2dyZXNzaXZlID0gISFmaWVsZHMucHJvZ3Jlc3NpdmVSZW5kZXI7IC8vIEZJWE1FOiBpZiB0aGUgcGxhbm5lciB3b3JrcyBvbiBhIGZpbHRlcmVkIHNlcmllcywgYHBpcGVsaW5lQ29udGV4dGAgZG9lcyBub3RcbiAgICAvLyBleGlzdHMuIFNlZSAjMTE2MTEgLiBQcm9iYWJseSB3ZSBuZWVkIHRvIG1vZGlmeSB0aGlzIHN0cnVjdHVyZSwgc2VlIHRoZSBjb21tZW50XG4gICAgLy8gb24gYHBlcmZvcm1SYXdTZXJpZXNgIGluIGBTY2hlZHVsYXIuanNgLlxuXG4gICAgdmFyIGxhcmdlID0gZmllbGRzLmxhcmdlID0gISEocGlwZWxpbmVDb250ZXh0ICYmIHBpcGVsaW5lQ29udGV4dC5sYXJnZSk7XG4gICAgdmFyIHByb2dyZXNzaXZlID0gZmllbGRzLnByb2dyZXNzaXZlUmVuZGVyID0gISEocGlwZWxpbmVDb250ZXh0ICYmIHBpcGVsaW5lQ29udGV4dC5wcm9ncmVzc2l2ZVJlbmRlcik7XG4gICAgcmV0dXJuICEhKG9yaWdpbmFsTGFyZ2UgIT09IGxhcmdlIHx8IG9yaWdpbmFsUHJvZ3Jlc3NpdmUgIT09IHByb2dyZXNzaXZlKSAmJiAncmVzZXQnO1xuICB9O1xufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgZWFjaCB9IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgR3JvdXAgZnJvbSAnenJlbmRlci9saWIvZ3JhcGhpYy9Hcm91cC5qcyc7XG5pbXBvcnQgKiBhcyBjb21wb25lbnRVdGlsIGZyb20gJy4uL3V0aWwvY29tcG9uZW50LmpzJztcbmltcG9ydCAqIGFzIGNsYXp6VXRpbCBmcm9tICcuLi91dGlsL2NsYXp6LmpzJztcbmltcG9ydCAqIGFzIG1vZGVsVXRpbCBmcm9tICcuLi91dGlsL21vZGVsLmpzJztcbmltcG9ydCB7IGVudGVyRW1waGFzaXMsIGxlYXZlRW1waGFzaXMsIGdldEhpZ2hsaWdodERpZ2l0LCBpc0hpZ2hEb3duRGlzcGF0Y2hlciB9IGZyb20gJy4uL3V0aWwvc3RhdGVzLmpzJztcbmltcG9ydCB7IGNyZWF0ZVRhc2sgfSBmcm9tICcuLi9jb3JlL3Rhc2suanMnO1xuaW1wb3J0IGNyZWF0ZVJlbmRlclBsYW5uZXIgZnJvbSAnLi4vY2hhcnQvaGVscGVyL2NyZWF0ZVJlbmRlclBsYW5uZXIuanMnO1xuaW1wb3J0IHsgdHJhdmVyc2VFbGVtZW50cyB9IGZyb20gJy4uL3V0aWwvZ3JhcGhpYy5qcyc7XG5pbXBvcnQgeyBlcnJvciB9IGZyb20gJy4uL3V0aWwvbG9nLmpzJztcbnZhciBpbm5lciA9IG1vZGVsVXRpbC5tYWtlSW5uZXIoKTtcbnZhciByZW5kZXJQbGFubmVyID0gY3JlYXRlUmVuZGVyUGxhbm5lcigpO1xuXG52YXIgQ2hhcnRWaWV3ID1cbi8qKiBAY2xhc3MgKi9cbmZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQ2hhcnRWaWV3KCkge1xuICAgIHRoaXMuZ3JvdXAgPSBuZXcgR3JvdXAoKTtcbiAgICB0aGlzLnVpZCA9IGNvbXBvbmVudFV0aWwuZ2V0VUlEKCd2aWV3Q2hhcnQnKTtcbiAgICB0aGlzLnJlbmRlclRhc2sgPSBjcmVhdGVUYXNrKHtcbiAgICAgIHBsYW46IHJlbmRlclRhc2tQbGFuLFxuICAgICAgcmVzZXQ6IHJlbmRlclRhc2tSZXNldFxuICAgIH0pO1xuICAgIHRoaXMucmVuZGVyVGFzay5jb250ZXh0ID0ge1xuICAgICAgdmlldzogdGhpc1xuICAgIH07XG4gIH1cblxuICBDaGFydFZpZXcucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoZWNNb2RlbCwgYXBpKSB7fTtcblxuICBDaGFydFZpZXcucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChzZXJpZXNNb2RlbCwgZWNNb2RlbCwgYXBpLCBwYXlsb2FkKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigncmVuZGVyIG1ldGhvZCBtdXN0IGJlZW4gaW1wbGVtZW50ZWQnKTtcbiAgICB9XG4gIH07XG4gIC8qKlxyXG4gICAqIEhpZ2hsaWdodCBzZXJpZXMgb3Igc3BlY2lmaWVkIGRhdGEgaXRlbS5cclxuICAgKi9cblxuXG4gIENoYXJ0Vmlldy5wcm90b3R5cGUuaGlnaGxpZ2h0ID0gZnVuY3Rpb24gKHNlcmllc01vZGVsLCBlY01vZGVsLCBhcGksIHBheWxvYWQpIHtcbiAgICB2YXIgZGF0YSA9IHNlcmllc01vZGVsLmdldERhdGEocGF5bG9hZCAmJiBwYXlsb2FkLmRhdGFUeXBlKTtcblxuICAgIGlmICghZGF0YSkge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgZXJyb3IoXCJVbmtub3duIGRhdGFUeXBlIFwiICsgcGF5bG9hZC5kYXRhVHlwZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0b2dnbGVIaWdobGlnaHQoZGF0YSwgcGF5bG9hZCwgJ2VtcGhhc2lzJyk7XG4gIH07XG4gIC8qKlxyXG4gICAqIERvd25wbGF5IHNlcmllcyBvciBzcGVjaWZpZWQgZGF0YSBpdGVtLlxyXG4gICAqL1xuXG5cbiAgQ2hhcnRWaWV3LnByb3RvdHlwZS5kb3ducGxheSA9IGZ1bmN0aW9uIChzZXJpZXNNb2RlbCwgZWNNb2RlbCwgYXBpLCBwYXlsb2FkKSB7XG4gICAgdmFyIGRhdGEgPSBzZXJpZXNNb2RlbC5nZXREYXRhKHBheWxvYWQgJiYgcGF5bG9hZC5kYXRhVHlwZSk7XG5cbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGVycm9yKFwiVW5rbm93biBkYXRhVHlwZSBcIiArIHBheWxvYWQuZGF0YVR5cGUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdG9nZ2xlSGlnaGxpZ2h0KGRhdGEsIHBheWxvYWQsICdub3JtYWwnKTtcbiAgfTtcbiAgLyoqXHJcbiAgICogUmVtb3ZlIHNlbGYuXHJcbiAgICovXG5cblxuICBDaGFydFZpZXcucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChlY01vZGVsLCBhcGkpIHtcbiAgICB0aGlzLmdyb3VwLnJlbW92ZUFsbCgpO1xuICB9O1xuICAvKipcclxuICAgKiBEaXNwb3NlIHNlbGYuXHJcbiAgICovXG5cblxuICBDaGFydFZpZXcucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoZWNNb2RlbCwgYXBpKSB7fTtcblxuICBDaGFydFZpZXcucHJvdG90eXBlLnVwZGF0ZVZpZXcgPSBmdW5jdGlvbiAoc2VyaWVzTW9kZWwsIGVjTW9kZWwsIGFwaSwgcGF5bG9hZCkge1xuICAgIHRoaXMucmVuZGVyKHNlcmllc01vZGVsLCBlY01vZGVsLCBhcGksIHBheWxvYWQpO1xuICB9OyAvLyBGSVhNRSBuZXZlciB1c2VkP1xuXG5cbiAgQ2hhcnRWaWV3LnByb3RvdHlwZS51cGRhdGVMYXlvdXQgPSBmdW5jdGlvbiAoc2VyaWVzTW9kZWwsIGVjTW9kZWwsIGFwaSwgcGF5bG9hZCkge1xuICAgIHRoaXMucmVuZGVyKHNlcmllc01vZGVsLCBlY01vZGVsLCBhcGksIHBheWxvYWQpO1xuICB9OyAvLyBGSVhNRSBuZXZlciB1c2VkP1xuXG5cbiAgQ2hhcnRWaWV3LnByb3RvdHlwZS51cGRhdGVWaXN1YWwgPSBmdW5jdGlvbiAoc2VyaWVzTW9kZWwsIGVjTW9kZWwsIGFwaSwgcGF5bG9hZCkge1xuICAgIHRoaXMucmVuZGVyKHNlcmllc01vZGVsLCBlY01vZGVsLCBhcGksIHBheWxvYWQpO1xuICB9O1xuICAvKipcclxuICAgKiBUcmF2ZXJzZSB0aGUgbmV3IHJlbmRlcmVkIGVsZW1lbnRzLlxyXG4gICAqXHJcbiAgICogSXQgd2lsbCB0cmF2ZXJzZSB0aGUgbmV3IGFkZGVkIGVsZW1lbnQgaW4gcHJvZ3Jlc3NpdmUgcmVuZGVyaW5nLlxyXG4gICAqIEFuZCB0cmF2ZXJzZSBhbGwgaW4gbm9ybWFsIHJlbmRlcmluZy5cclxuICAgKi9cblxuXG4gIENoYXJ0Vmlldy5wcm90b3R5cGUuZWFjaFJlbmRlcmVkID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgdHJhdmVyc2VFbGVtZW50cyh0aGlzLmdyb3VwLCBjYik7XG4gIH07XG5cbiAgQ2hhcnRWaWV3Lm1hcmtVcGRhdGVNZXRob2QgPSBmdW5jdGlvbiAocGF5bG9hZCwgbWV0aG9kTmFtZSkge1xuICAgIGlubmVyKHBheWxvYWQpLnVwZGF0ZU1ldGhvZCA9IG1ldGhvZE5hbWU7XG4gIH07XG5cbiAgQ2hhcnRWaWV3LnByb3RvSW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcHJvdG8gPSBDaGFydFZpZXcucHJvdG90eXBlO1xuICAgIHByb3RvLnR5cGUgPSAnY2hhcnQnO1xuICB9KCk7XG5cbiAgcmV0dXJuIENoYXJ0Vmlldztcbn0oKTtcblxuO1xuLyoqXHJcbiAqIFNldCBzdGF0ZSBvZiBzaW5nbGUgZWxlbWVudFxyXG4gKi9cblxuZnVuY3Rpb24gZWxTZXRTdGF0ZShlbCwgc3RhdGUsIGhpZ2hsaWdodERpZ2l0KSB7XG4gIGlmIChlbCAmJiBpc0hpZ2hEb3duRGlzcGF0Y2hlcihlbCkpIHtcbiAgICAoc3RhdGUgPT09ICdlbXBoYXNpcycgPyBlbnRlckVtcGhhc2lzIDogbGVhdmVFbXBoYXNpcykoZWwsIGhpZ2hsaWdodERpZ2l0KTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0b2dnbGVIaWdobGlnaHQoZGF0YSwgcGF5bG9hZCwgc3RhdGUpIHtcbiAgdmFyIGRhdGFJbmRleCA9IG1vZGVsVXRpbC5xdWVyeURhdGFJbmRleChkYXRhLCBwYXlsb2FkKTtcbiAgdmFyIGhpZ2hsaWdodERpZ2l0ID0gcGF5bG9hZCAmJiBwYXlsb2FkLmhpZ2hsaWdodEtleSAhPSBudWxsID8gZ2V0SGlnaGxpZ2h0RGlnaXQocGF5bG9hZC5oaWdobGlnaHRLZXkpIDogbnVsbDtcblxuICBpZiAoZGF0YUluZGV4ICE9IG51bGwpIHtcbiAgICBlYWNoKG1vZGVsVXRpbC5ub3JtYWxpemVUb0FycmF5KGRhdGFJbmRleCksIGZ1bmN0aW9uIChkYXRhSWR4KSB7XG4gICAgICBlbFNldFN0YXRlKGRhdGEuZ2V0SXRlbUdyYXBoaWNFbChkYXRhSWR4KSwgc3RhdGUsIGhpZ2hsaWdodERpZ2l0KTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBkYXRhLmVhY2hJdGVtR3JhcGhpY0VsKGZ1bmN0aW9uIChlbCkge1xuICAgICAgZWxTZXRTdGF0ZShlbCwgc3RhdGUsIGhpZ2hsaWdodERpZ2l0KTtcbiAgICB9KTtcbiAgfVxufVxuXG5jbGF6elV0aWwuZW5hYmxlQ2xhc3NFeHRlbmQoQ2hhcnRWaWV3LCBbJ2Rpc3Bvc2UnXSk7XG5jbGF6elV0aWwuZW5hYmxlQ2xhc3NNYW5hZ2VtZW50KENoYXJ0Vmlldyk7XG5cbmZ1bmN0aW9uIHJlbmRlclRhc2tQbGFuKGNvbnRleHQpIHtcbiAgcmV0dXJuIHJlbmRlclBsYW5uZXIoY29udGV4dC5tb2RlbCk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlclRhc2tSZXNldChjb250ZXh0KSB7XG4gIHZhciBzZXJpZXNNb2RlbCA9IGNvbnRleHQubW9kZWw7XG4gIHZhciBlY01vZGVsID0gY29udGV4dC5lY01vZGVsO1xuICB2YXIgYXBpID0gY29udGV4dC5hcGk7XG4gIHZhciBwYXlsb2FkID0gY29udGV4dC5wYXlsb2FkOyAvLyBGSVhNRTogcmVtb3ZlIHVwZGF0ZVZpZXcgdXBkYXRlVmlzdWFsXG5cbiAgdmFyIHByb2dyZXNzaXZlUmVuZGVyID0gc2VyaWVzTW9kZWwucGlwZWxpbmVDb250ZXh0LnByb2dyZXNzaXZlUmVuZGVyO1xuICB2YXIgdmlldyA9IGNvbnRleHQudmlldztcbiAgdmFyIHVwZGF0ZU1ldGhvZCA9IHBheWxvYWQgJiYgaW5uZXIocGF5bG9hZCkudXBkYXRlTWV0aG9kO1xuICB2YXIgbWV0aG9kTmFtZSA9IHByb2dyZXNzaXZlUmVuZGVyID8gJ2luY3JlbWVudGFsUHJlcGFyZVJlbmRlcicgOiB1cGRhdGVNZXRob2QgJiYgdmlld1t1cGRhdGVNZXRob2RdID8gdXBkYXRlTWV0aG9kIC8vIGBhcHBlbmREYXRhYCBpcyBhbHNvIHN1cHBvcnRlZCB3aGVuIGRhdGEgYW1vdW50XG4gIC8vIGlzIGxlc3MgdGhhbiBwcm9ncmVzc2l2ZSB0aHJlc2hvbGQuXG4gIDogJ3JlbmRlcic7XG5cbiAgaWYgKG1ldGhvZE5hbWUgIT09ICdyZW5kZXInKSB7XG4gICAgdmlld1ttZXRob2ROYW1lXShzZXJpZXNNb2RlbCwgZWNNb2RlbCwgYXBpLCBwYXlsb2FkKTtcbiAgfVxuXG4gIHJldHVybiBwcm9ncmVzc01ldGhvZE1hcFttZXRob2ROYW1lXTtcbn1cblxudmFyIHByb2dyZXNzTWV0aG9kTWFwID0ge1xuICBpbmNyZW1lbnRhbFByZXBhcmVSZW5kZXI6IHtcbiAgICBwcm9ncmVzczogZnVuY3Rpb24gKHBhcmFtcywgY29udGV4dCkge1xuICAgICAgY29udGV4dC52aWV3LmluY3JlbWVudGFsUmVuZGVyKHBhcmFtcywgY29udGV4dC5tb2RlbCwgY29udGV4dC5lY01vZGVsLCBjb250ZXh0LmFwaSwgY29udGV4dC5wYXlsb2FkKTtcbiAgICB9XG4gIH0sXG4gIHJlbmRlcjoge1xuICAgIC8vIFB1dCB2aWV3LnJlbmRlciBpbiBgcHJvZ3Jlc3NgIHRvIHN1cHBvcnQgYXBwZW5kRGF0YS4gQnV0IGluIHRoaXMgY2FzZVxuICAgIC8vIHZpZXcucmVuZGVyIHNob3VsZCBub3QgYmUgY2FsbGVkIGluIHJlc2V0LCBvdGhlcndpc2UgaXQgd2lsbCBiZSBjYWxsZWRcbiAgICAvLyB0d2lzZS4gVXNlIGBmb3JjZUZpcnN0UHJvZ3Jlc3NgIHRvIG1ha2Ugc3VyZSB0aGF0IHZpZXcucmVuZGVyIGlzIGNhbGxlZFxuICAgIC8vIGluIGFueSBjYXNlcy5cbiAgICBmb3JjZUZpcnN0UHJvZ3Jlc3M6IHRydWUsXG4gICAgcHJvZ3Jlc3M6IGZ1bmN0aW9uIChwYXJhbXMsIGNvbnRleHQpIHtcbiAgICAgIGNvbnRleHQudmlldy5yZW5kZXIoY29udGV4dC5tb2RlbCwgY29udGV4dC5lY01vZGVsLCBjb250ZXh0LmFwaSwgY29udGV4dC5wYXlsb2FkKTtcbiAgICB9XG4gIH1cbn07XG5leHBvcnQgZGVmYXVsdCBDaGFydFZpZXc7IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG52YXIgT1JJR0lOX01FVEhPRCA9ICdcXDBfX3Rocm90dGxlT3JpZ2luTWV0aG9kJztcbnZhciBSQVRFID0gJ1xcMF9fdGhyb3R0bGVSYXRlJztcbnZhciBUSFJPVFRMRV9UWVBFID0gJ1xcMF9fdGhyb3R0bGVUeXBlJztcbjtcbi8qKlxyXG4gKiBAcHVibGljXHJcbiAqIEBwYXJhbSB7KEZ1bmN0aW9uKX0gZm5cclxuICogQHBhcmFtIHtudW1iZXJ9IFtkZWxheT0wXSBVbml0OiBtcy5cclxuICogQHBhcmFtIHtib29sZWFufSBbZGVib3VuY2U9ZmFsc2VdXHJcbiAqICAgICAgICB0cnVlOiBJZiBjYWxsIGludGVydmFsIGxlc3MgdGhhbiBgZGVsYXlgLCBvbmx5IHRoZSBsYXN0IGNhbGwgd29ya3MuXHJcbiAqICAgICAgICBmYWxzZTogSWYgY2FsbCBpbnRlcnZhbCBsZXNzIHRoYW4gYGRlbGF5LCBjYWxsIHdvcmtzIG9uIGZpeGVkIHJhdGUuXHJcbiAqIEByZXR1cm4geyhGdW5jdGlvbil9IHRocm90dGxlZCBmbi5cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0aHJvdHRsZShmbiwgZGVsYXksIGRlYm91bmNlKSB7XG4gIHZhciBjdXJyQ2FsbDtcbiAgdmFyIGxhc3RDYWxsID0gMDtcbiAgdmFyIGxhc3RFeGVjID0gMDtcbiAgdmFyIHRpbWVyID0gbnVsbDtcbiAgdmFyIGRpZmY7XG4gIHZhciBzY29wZTtcbiAgdmFyIGFyZ3M7XG4gIHZhciBkZWJvdW5jZU5leHRDYWxsO1xuICBkZWxheSA9IGRlbGF5IHx8IDA7XG5cbiAgZnVuY3Rpb24gZXhlYygpIHtcbiAgICBsYXN0RXhlYyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIHRpbWVyID0gbnVsbDtcbiAgICBmbi5hcHBseShzY29wZSwgYXJncyB8fCBbXSk7XG4gIH1cblxuICB2YXIgY2IgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNiQXJncyA9IFtdO1xuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIGNiQXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cblxuICAgIGN1cnJDYWxsID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgc2NvcGUgPSB0aGlzO1xuICAgIGFyZ3MgPSBjYkFyZ3M7XG4gICAgdmFyIHRoaXNEZWxheSA9IGRlYm91bmNlTmV4dENhbGwgfHwgZGVsYXk7XG4gICAgdmFyIHRoaXNEZWJvdW5jZSA9IGRlYm91bmNlTmV4dENhbGwgfHwgZGVib3VuY2U7XG4gICAgZGVib3VuY2VOZXh0Q2FsbCA9IG51bGw7XG4gICAgZGlmZiA9IGN1cnJDYWxsIC0gKHRoaXNEZWJvdW5jZSA/IGxhc3RDYWxsIDogbGFzdEV4ZWMpIC0gdGhpc0RlbGF5O1xuICAgIGNsZWFyVGltZW91dCh0aW1lcik7IC8vIEhlcmUgd2Ugc2hvdWxkIG1ha2Ugc3VyZSB0aGF0OiB0aGUgYGV4ZWNgIFNIT1VMRCBOT1QgYmUgY2FsbGVkIGxhdGVyXG4gICAgLy8gdGhhbiBhIG5ldyBjYWxsIG9mIGBjYmAsIHRoYXQgaXMsIHByZXNlcnZpbmcgdGhlIGNvbW1hbmQgb3JkZXIuIENvbnNpZGVyXG4gICAgLy8gY2FsY3VsYXRpbmcgXCJzY2FsZSByYXRlXCIgd2hlbiByb2FtaW5nIGFzIGFuIGV4YW1wbGUuIFdoZW4gYSBjYWxsIG9mIGBjYmBcbiAgICAvLyBoYXBwZW5zLCBlaXRoZXIgdGhlIGBleGVjYCBpcyBjYWxsZWQgZGllcmVjdGx5LCBvciB0aGUgY2FsbCBpcyBkZWxheWVkLlxuICAgIC8vIEJ1dCB0aGUgZGVsYXllZCBjYWxsIHNob3VsZCBuZXZlciBiZSBsYXRlciB0aGFuIG5leHQgY2FsbCBvZiBgY2JgLiBVbmRlclxuICAgIC8vIHRoaXMgYXNzdXJhbmNlLCB3ZSBjYW4gc2ltcGx5IHVwZGF0ZSB2aWV3IHN0YXRlIGVhY2ggdGltZSBgZGlzcGF0Y2hBY3Rpb25gXG4gICAgLy8gdHJpZ2dlcmVkIGJ5IHVzZXIgcm9hbWluZywgYnV0IG5vdCBuZWVkIHRvIGFkZCBleHRyYSBjb2RlIHRvIGF2b2lkIHRoZVxuICAgIC8vIHN0YXRlIGJlaW5nIFwicm9sbGVkLWJhY2tcIi5cblxuICAgIGlmICh0aGlzRGVib3VuY2UpIHtcbiAgICAgIHRpbWVyID0gc2V0VGltZW91dChleGVjLCB0aGlzRGVsYXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZGlmZiA+PSAwKSB7XG4gICAgICAgIGV4ZWMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRpbWVyID0gc2V0VGltZW91dChleGVjLCAtZGlmZik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGFzdENhbGwgPSBjdXJyQ2FsbDtcbiAgfTtcbiAgLyoqXHJcbiAgICogQ2xlYXIgdGhyb3R0bGUuXHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xuXG5cbiAgY2IuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgdGltZXIgPSBudWxsO1xuICAgIH1cbiAgfTtcbiAgLyoqXHJcbiAgICogRW5hYmxlIGRlYm91bmNlIG9uY2UuXHJcbiAgICovXG5cblxuICBjYi5kZWJvdW5jZU5leHRDYWxsID0gZnVuY3Rpb24gKGRlYm91bmNlRGVsYXkpIHtcbiAgICBkZWJvdW5jZU5leHRDYWxsID0gZGVib3VuY2VEZWxheTtcbiAgfTtcblxuICByZXR1cm4gY2I7XG59XG4vKipcclxuICogQ3JlYXRlIHRocm90dGxlIG1ldGhvZCBvciB1cGRhdGUgdGhyb3R0bGUgcmF0ZS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogQ29tcG9uZW50Vmlldy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gKiAgICAgLi4uXHJcbiAqICAgICB0aHJvdHRsZS5jcmVhdGVPclVwZGF0ZShcclxuICogICAgICAgICB0aGlzLFxyXG4gKiAgICAgICAgICdfZGlzcGF0Y2hBY3Rpb24nLFxyXG4gKiAgICAgICAgIHRoaXMubW9kZWwuZ2V0KCd0aHJvdHRsZScpLFxyXG4gKiAgICAgICAgICdmaXhSYXRlJ1xyXG4gKiAgICAgKTtcclxuICogfTtcclxuICogQ29tcG9uZW50Vmlldy5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKCkge1xyXG4gKiAgICAgdGhyb3R0bGUuY2xlYXIodGhpcywgJ19kaXNwYXRjaEFjdGlvbicpO1xyXG4gKiB9O1xyXG4gKiBDb21wb25lbnRWaWV3LnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xyXG4gKiAgICAgdGhyb3R0bGUuY2xlYXIodGhpcywgJ19kaXNwYXRjaEFjdGlvbicpO1xyXG4gKiB9O1xyXG4gKlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlKG9iaiwgZm5BdHRyLCByYXRlLCB0aHJvdHRsZVR5cGUpIHtcbiAgdmFyIGZuID0gb2JqW2ZuQXR0cl07XG5cbiAgaWYgKCFmbikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBvcmlnaW5GbiA9IGZuW09SSUdJTl9NRVRIT0RdIHx8IGZuO1xuICB2YXIgbGFzdFRocm90dGxlVHlwZSA9IGZuW1RIUk9UVExFX1RZUEVdO1xuICB2YXIgbGFzdFJhdGUgPSBmbltSQVRFXTtcblxuICBpZiAobGFzdFJhdGUgIT09IHJhdGUgfHwgbGFzdFRocm90dGxlVHlwZSAhPT0gdGhyb3R0bGVUeXBlKSB7XG4gICAgaWYgKHJhdGUgPT0gbnVsbCB8fCAhdGhyb3R0bGVUeXBlKSB7XG4gICAgICByZXR1cm4gb2JqW2ZuQXR0cl0gPSBvcmlnaW5GbjtcbiAgICB9XG5cbiAgICBmbiA9IG9ialtmbkF0dHJdID0gdGhyb3R0bGUob3JpZ2luRm4sIHJhdGUsIHRocm90dGxlVHlwZSA9PT0gJ2RlYm91bmNlJyk7XG4gICAgZm5bT1JJR0lOX01FVEhPRF0gPSBvcmlnaW5GbjtcbiAgICBmbltUSFJPVFRMRV9UWVBFXSA9IHRocm90dGxlVHlwZTtcbiAgICBmbltSQVRFXSA9IHJhdGU7XG4gIH1cblxuICByZXR1cm4gZm47XG59XG4vKipcclxuICogQ2xlYXIgdGhyb3R0bGUuIEV4YW1wbGUgc2VlIHRocm90dGxlLmNyZWF0ZU9yVXBkYXRlLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyKG9iaiwgZm5BdHRyKSB7XG4gIHZhciBmbiA9IG9ialtmbkF0dHJdO1xuXG4gIGlmIChmbiAmJiBmbltPUklHSU5fTUVUSE9EXSkge1xuICAgIC8vIENsZWFyIHRocm90dGxlXG4gICAgZm4uY2xlYXIgJiYgZm4uY2xlYXIoKTtcbiAgICBvYmpbZm5BdHRyXSA9IGZuW09SSUdJTl9NRVRIT0RdO1xuICB9XG59IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgeyBpc0Z1bmN0aW9uLCBleHRlbmQsIGNyZWF0ZUhhc2hNYXAgfSBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0IG1ha2VTdHlsZU1hcHBlciBmcm9tICcuLi9tb2RlbC9taXhpbi9tYWtlU3R5bGVNYXBwZXIuanMnO1xuaW1wb3J0IHsgSVRFTV9TVFlMRV9LRVlfTUFQIH0gZnJvbSAnLi4vbW9kZWwvbWl4aW4vaXRlbVN0eWxlLmpzJztcbmltcG9ydCB7IExJTkVfU1RZTEVfS0VZX01BUCB9IGZyb20gJy4uL21vZGVsL21peGluL2xpbmVTdHlsZS5qcyc7XG5pbXBvcnQgTW9kZWwgZnJvbSAnLi4vbW9kZWwvTW9kZWwuanMnO1xuaW1wb3J0IHsgbWFrZUlubmVyIH0gZnJvbSAnLi4vdXRpbC9tb2RlbC5qcyc7XG52YXIgaW5uZXIgPSBtYWtlSW5uZXIoKTtcbnZhciBkZWZhdWx0U3R5bGVNYXBwZXJzID0ge1xuICBpdGVtU3R5bGU6IG1ha2VTdHlsZU1hcHBlcihJVEVNX1NUWUxFX0tFWV9NQVAsIHRydWUpLFxuICBsaW5lU3R5bGU6IG1ha2VTdHlsZU1hcHBlcihMSU5FX1NUWUxFX0tFWV9NQVAsIHRydWUpXG59O1xudmFyIGRlZmF1bHRDb2xvcktleSA9IHtcbiAgbGluZVN0eWxlOiAnc3Ryb2tlJyxcbiAgaXRlbVN0eWxlOiAnZmlsbCdcbn07XG5cbmZ1bmN0aW9uIGdldFN0eWxlTWFwcGVyKHNlcmllc01vZGVsLCBzdHlsZVBhdGgpIHtcbiAgdmFyIHN0eWxlTWFwcGVyID0gc2VyaWVzTW9kZWwudmlzdWFsU3R5bGVNYXBwZXIgfHwgZGVmYXVsdFN0eWxlTWFwcGVyc1tzdHlsZVBhdGhdO1xuXG4gIGlmICghc3R5bGVNYXBwZXIpIHtcbiAgICBjb25zb2xlLndhcm4oXCJVbmtub3duIHN0eWxlIHR5cGUgJ1wiICsgc3R5bGVQYXRoICsgXCInLlwiKTtcbiAgICByZXR1cm4gZGVmYXVsdFN0eWxlTWFwcGVycy5pdGVtU3R5bGU7XG4gIH1cblxuICByZXR1cm4gc3R5bGVNYXBwZXI7XG59XG5cbmZ1bmN0aW9uIGdldERlZmF1bHRDb2xvcktleShzZXJpZXNNb2RlbCwgc3R5bGVQYXRoKSB7XG4gIC8vIHJldHVybiBkZWZhdWx0Q29sb3JLZXlbc3R5bGVQYXRoXSB8fFxuICB2YXIgY29sb3JLZXkgPSBzZXJpZXNNb2RlbC52aXN1YWxEcmF3VHlwZSB8fCBkZWZhdWx0Q29sb3JLZXlbc3R5bGVQYXRoXTtcblxuICBpZiAoIWNvbG9yS2V5KSB7XG4gICAgY29uc29sZS53YXJuKFwiVW5rbm93biBzdHlsZSB0eXBlICdcIiArIHN0eWxlUGF0aCArIFwiJy5cIik7XG4gICAgcmV0dXJuICdmaWxsJztcbiAgfVxuXG4gIHJldHVybiBjb2xvcktleTtcbn1cblxudmFyIHNlcmllc1N0eWxlVGFzayA9IHtcbiAgY3JlYXRlT25BbGxTZXJpZXM6IHRydWUsXG4gIHBlcmZvcm1SYXdTZXJpZXM6IHRydWUsXG4gIHJlc2V0OiBmdW5jdGlvbiAoc2VyaWVzTW9kZWwsIGVjTW9kZWwpIHtcbiAgICB2YXIgZGF0YSA9IHNlcmllc01vZGVsLmdldERhdGEoKTtcbiAgICB2YXIgc3R5bGVQYXRoID0gc2VyaWVzTW9kZWwudmlzdWFsU3R5bGVBY2Nlc3NQYXRoIHx8ICdpdGVtU3R5bGUnOyAvLyBTZXQgaW4gaXRlbVN0eWxlXG5cbiAgICB2YXIgc3R5bGVNb2RlbCA9IHNlcmllc01vZGVsLmdldE1vZGVsKHN0eWxlUGF0aCk7XG4gICAgdmFyIGdldFN0eWxlID0gZ2V0U3R5bGVNYXBwZXIoc2VyaWVzTW9kZWwsIHN0eWxlUGF0aCk7XG4gICAgdmFyIGdsb2JhbFN0eWxlID0gZ2V0U3R5bGUoc3R5bGVNb2RlbCk7XG4gICAgdmFyIGRlY2FsT3B0aW9uID0gc3R5bGVNb2RlbC5nZXRTaGFsbG93KCdkZWNhbCcpO1xuXG4gICAgaWYgKGRlY2FsT3B0aW9uKSB7XG4gICAgICBkYXRhLnNldFZpc3VhbCgnZGVjYWwnLCBkZWNhbE9wdGlvbik7XG4gICAgICBkZWNhbE9wdGlvbi5kaXJ0eSA9IHRydWU7XG4gICAgfSAvLyBUT0RPXG5cblxuICAgIHZhciBjb2xvcktleSA9IGdldERlZmF1bHRDb2xvcktleShzZXJpZXNNb2RlbCwgc3R5bGVQYXRoKTtcbiAgICB2YXIgY29sb3IgPSBnbG9iYWxTdHlsZVtjb2xvcktleV07IC8vIFRPRE8gc3R5bGUgY2FsbGJhY2tcblxuICAgIHZhciBjb2xvckNhbGxiYWNrID0gaXNGdW5jdGlvbihjb2xvcikgPyBjb2xvciA6IG51bGw7XG4gICAgdmFyIGhhc0F1dG9Db2xvciA9IGdsb2JhbFN0eWxlLmZpbGwgPT09ICdhdXRvJyB8fCBnbG9iYWxTdHlsZS5zdHJva2UgPT09ICdhdXRvJzsgLy8gR2V0IGZyb20gY29sb3IgcGFsZXR0ZSBieSBkZWZhdWx0LlxuXG4gICAgaWYgKCFnbG9iYWxTdHlsZVtjb2xvcktleV0gfHwgY29sb3JDYWxsYmFjayB8fCBoYXNBdXRvQ29sb3IpIHtcbiAgICAgIC8vIE5vdGU6IElmIHNvbWUgc2VyaWVzIGhhcyBjb2xvciBzcGVjaWZpZWQgKGUuZy4sIGJ5IGl0ZW1TdHlsZS5jb2xvciksIHdlIERPIE5PVFxuICAgICAgLy8gbWFrZSBpdCBlZmZlY3QgcGFsZXR0ZS4gQmVjYXVzZSBzb21lIHNjZW5hcmlvcyB1c2VycyBuZWVkIHRvIG1ha2Ugc29tZSBzZXJpZXNcbiAgICAgIC8vIHRyYW5zcGFyZW50IG9yIGFzIGJhY2tncm91bmQsIHdoaWNoIHNob3VsZCBiZXR0ZXIgbm90IGVmZmVjdCB0aGUgcGFsZXR0ZS5cbiAgICAgIHZhciBjb2xvclBhbGV0dGUgPSBzZXJpZXNNb2RlbC5nZXRDb2xvckZyb21QYWxldHRlKCAvLyBUT0RPIHNlcmllcyBjb3VudCBjaGFuZ2VkLlxuICAgICAgc2VyaWVzTW9kZWwubmFtZSwgbnVsbCwgZWNNb2RlbC5nZXRTZXJpZXNDb3VudCgpKTtcblxuICAgICAgaWYgKCFnbG9iYWxTdHlsZVtjb2xvcktleV0pIHtcbiAgICAgICAgZ2xvYmFsU3R5bGVbY29sb3JLZXldID0gY29sb3JQYWxldHRlO1xuICAgICAgICBkYXRhLnNldFZpc3VhbCgnY29sb3JGcm9tUGFsZXR0ZScsIHRydWUpO1xuICAgICAgfVxuXG4gICAgICBnbG9iYWxTdHlsZS5maWxsID0gZ2xvYmFsU3R5bGUuZmlsbCA9PT0gJ2F1dG8nIHx8IGlzRnVuY3Rpb24oZ2xvYmFsU3R5bGUuZmlsbCkgPyBjb2xvclBhbGV0dGUgOiBnbG9iYWxTdHlsZS5maWxsO1xuICAgICAgZ2xvYmFsU3R5bGUuc3Ryb2tlID0gZ2xvYmFsU3R5bGUuc3Ryb2tlID09PSAnYXV0bycgfHwgaXNGdW5jdGlvbihnbG9iYWxTdHlsZS5zdHJva2UpID8gY29sb3JQYWxldHRlIDogZ2xvYmFsU3R5bGUuc3Ryb2tlO1xuICAgIH1cblxuICAgIGRhdGEuc2V0VmlzdWFsKCdzdHlsZScsIGdsb2JhbFN0eWxlKTtcbiAgICBkYXRhLnNldFZpc3VhbCgnZHJhd1R5cGUnLCBjb2xvcktleSk7IC8vIE9ubHkgdmlzaWJsZSBzZXJpZXMgaGFzIGVhY2ggZGF0YSBiZSB2aXN1YWwgZW5jb2RlZFxuXG4gICAgaWYgKCFlY01vZGVsLmlzU2VyaWVzRmlsdGVyZWQoc2VyaWVzTW9kZWwpICYmIGNvbG9yQ2FsbGJhY2spIHtcbiAgICAgIGRhdGEuc2V0VmlzdWFsKCdjb2xvckZyb21QYWxldHRlJywgZmFsc2UpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YUVhY2g6IGZ1bmN0aW9uIChkYXRhLCBpZHgpIHtcbiAgICAgICAgICB2YXIgZGF0YVBhcmFtcyA9IHNlcmllc01vZGVsLmdldERhdGFQYXJhbXMoaWR4KTtcbiAgICAgICAgICB2YXIgaXRlbVN0eWxlID0gZXh0ZW5kKHt9LCBnbG9iYWxTdHlsZSk7XG4gICAgICAgICAgaXRlbVN0eWxlW2NvbG9yS2V5XSA9IGNvbG9yQ2FsbGJhY2soZGF0YVBhcmFtcyk7XG4gICAgICAgICAgZGF0YS5zZXRJdGVtVmlzdWFsKGlkeCwgJ3N0eWxlJywgaXRlbVN0eWxlKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH1cbn07XG52YXIgc2hhcmVkTW9kZWwgPSBuZXcgTW9kZWwoKTtcbnZhciBkYXRhU3R5bGVUYXNrID0ge1xuICBjcmVhdGVPbkFsbFNlcmllczogdHJ1ZSxcbiAgcGVyZm9ybVJhd1NlcmllczogdHJ1ZSxcbiAgcmVzZXQ6IGZ1bmN0aW9uIChzZXJpZXNNb2RlbCwgZWNNb2RlbCkge1xuICAgIGlmIChzZXJpZXNNb2RlbC5pZ25vcmVTdHlsZU9uRGF0YSB8fCBlY01vZGVsLmlzU2VyaWVzRmlsdGVyZWQoc2VyaWVzTW9kZWwpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGRhdGEgPSBzZXJpZXNNb2RlbC5nZXREYXRhKCk7XG4gICAgdmFyIHN0eWxlUGF0aCA9IHNlcmllc01vZGVsLnZpc3VhbFN0eWxlQWNjZXNzUGF0aCB8fCAnaXRlbVN0eWxlJzsgLy8gU2V0IGluIGl0ZW1TdHlsZVxuXG4gICAgdmFyIGdldFN0eWxlID0gZ2V0U3R5bGVNYXBwZXIoc2VyaWVzTW9kZWwsIHN0eWxlUGF0aCk7XG4gICAgdmFyIGNvbG9yS2V5ID0gZGF0YS5nZXRWaXN1YWwoJ2RyYXdUeXBlJyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGFFYWNoOiBkYXRhLmhhc0l0ZW1PcHRpb24gPyBmdW5jdGlvbiAoZGF0YSwgaWR4KSB7XG4gICAgICAgIC8vIE5vdCB1c2UgZ2V0SXRlbU1vZGVsIGZvciBwZXJmb3JtYW5jZSBjb25zaWR1cmF0aW9uXG4gICAgICAgIHZhciByYXdJdGVtID0gZGF0YS5nZXRSYXdEYXRhSXRlbShpZHgpO1xuXG4gICAgICAgIGlmIChyYXdJdGVtICYmIHJhd0l0ZW1bc3R5bGVQYXRoXSkge1xuICAgICAgICAgIHNoYXJlZE1vZGVsLm9wdGlvbiA9IHJhd0l0ZW1bc3R5bGVQYXRoXTtcbiAgICAgICAgICB2YXIgc3R5bGUgPSBnZXRTdHlsZShzaGFyZWRNb2RlbCk7XG4gICAgICAgICAgdmFyIGV4aXN0c1N0eWxlID0gZGF0YS5lbnN1cmVVbmlxdWVJdGVtVmlzdWFsKGlkeCwgJ3N0eWxlJyk7XG4gICAgICAgICAgZXh0ZW5kKGV4aXN0c1N0eWxlLCBzdHlsZSk7XG5cbiAgICAgICAgICBpZiAoc2hhcmVkTW9kZWwub3B0aW9uLmRlY2FsKSB7XG4gICAgICAgICAgICBkYXRhLnNldEl0ZW1WaXN1YWwoaWR4LCAnZGVjYWwnLCBzaGFyZWRNb2RlbC5vcHRpb24uZGVjYWwpO1xuICAgICAgICAgICAgc2hhcmVkTW9kZWwub3B0aW9uLmRlY2FsLmRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoY29sb3JLZXkgaW4gc3R5bGUpIHtcbiAgICAgICAgICAgIGRhdGEuc2V0SXRlbVZpc3VhbChpZHgsICdjb2xvckZyb21QYWxldHRlJywgZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSA6IG51bGxcbiAgICB9O1xuICB9XG59OyAvLyBQaWNrIGNvbG9yIGZyb20gcGFsZXR0ZSBmb3IgdGhlIGRhdGEgd2hpY2ggaGFzIG5vdCBiZWVuIHNldCB3aXRoIGNvbG9yIHlldC5cbi8vIE5vdGU6IGRvIG5vdCBzdXBwb3J0IHN0cmVhbSByZW5kZXJpbmcuIE5vIHN1Y2ggY2FzZXMgeWV0LlxuXG52YXIgZGF0YUNvbG9yUGFsZXR0ZVRhc2sgPSB7XG4gIHBlcmZvcm1SYXdTZXJpZXM6IHRydWUsXG4gIG92ZXJhbGxSZXNldDogZnVuY3Rpb24gKGVjTW9kZWwpIHtcbiAgICAvLyBFYWNoIHR5cGUgb2Ygc2VyaWVzIHVzZXMgb25lIHNjb3BlLlxuICAgIC8vIFBpZSBhbmQgZnVubmVsIGFyZSB1c2luZyBkaWZmZXJlbnQgc2NvcGVzLlxuICAgIHZhciBwYWxldHRlU2NvcGVHcm91cEJ5VHlwZSA9IGNyZWF0ZUhhc2hNYXAoKTtcbiAgICBlY01vZGVsLmVhY2hTZXJpZXMoZnVuY3Rpb24gKHNlcmllc01vZGVsKSB7XG4gICAgICB2YXIgY29sb3JCeSA9IHNlcmllc01vZGVsLmdldENvbG9yQnkoKTtcblxuICAgICAgaWYgKHNlcmllc01vZGVsLmlzQ29sb3JCeVNlcmllcygpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGtleSA9IHNlcmllc01vZGVsLnR5cGUgKyAnLScgKyBjb2xvckJ5O1xuICAgICAgdmFyIGNvbG9yU2NvcGUgPSBwYWxldHRlU2NvcGVHcm91cEJ5VHlwZS5nZXQoa2V5KTtcblxuICAgICAgaWYgKCFjb2xvclNjb3BlKSB7XG4gICAgICAgIGNvbG9yU2NvcGUgPSB7fTtcbiAgICAgICAgcGFsZXR0ZVNjb3BlR3JvdXBCeVR5cGUuc2V0KGtleSwgY29sb3JTY29wZSk7XG4gICAgICB9XG5cbiAgICAgIGlubmVyKHNlcmllc01vZGVsKS5zY29wZSA9IGNvbG9yU2NvcGU7XG4gICAgfSk7XG4gICAgZWNNb2RlbC5lYWNoU2VyaWVzKGZ1bmN0aW9uIChzZXJpZXNNb2RlbCkge1xuICAgICAgaWYgKHNlcmllc01vZGVsLmlzQ29sb3JCeVNlcmllcygpIHx8IGVjTW9kZWwuaXNTZXJpZXNGaWx0ZXJlZChzZXJpZXNNb2RlbCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgZGF0YUFsbCA9IHNlcmllc01vZGVsLmdldFJhd0RhdGEoKTtcbiAgICAgIHZhciBpZHhNYXAgPSB7fTtcbiAgICAgIHZhciBkYXRhID0gc2VyaWVzTW9kZWwuZ2V0RGF0YSgpO1xuICAgICAgdmFyIGNvbG9yU2NvcGUgPSBpbm5lcihzZXJpZXNNb2RlbCkuc2NvcGU7XG4gICAgICB2YXIgc3R5bGVQYXRoID0gc2VyaWVzTW9kZWwudmlzdWFsU3R5bGVBY2Nlc3NQYXRoIHx8ICdpdGVtU3R5bGUnO1xuICAgICAgdmFyIGNvbG9yS2V5ID0gZ2V0RGVmYXVsdENvbG9yS2V5KHNlcmllc01vZGVsLCBzdHlsZVBhdGgpO1xuICAgICAgZGF0YS5lYWNoKGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgICAgdmFyIHJhd0lkeCA9IGRhdGEuZ2V0UmF3SW5kZXgoaWR4KTtcbiAgICAgICAgaWR4TWFwW3Jhd0lkeF0gPSBpZHg7XG4gICAgICB9KTsgLy8gSXRlcmF0ZSBvbiBkYXRhIGJlZm9yZSBmaWx0ZXJlZC4gVG8gbWFrZSBzdXJlIGNvbG9yIGZyb20gcGFsZXR0ZSBjYW4gYmVcbiAgICAgIC8vIENvbnNpc3RlbnQgd2hlbiB0b2dnbGluZyBsZWdlbmQuXG5cbiAgICAgIGRhdGFBbGwuZWFjaChmdW5jdGlvbiAocmF3SWR4KSB7XG4gICAgICAgIHZhciBpZHggPSBpZHhNYXBbcmF3SWR4XTtcbiAgICAgICAgdmFyIGZyb21QYWxldHRlID0gZGF0YS5nZXRJdGVtVmlzdWFsKGlkeCwgJ2NvbG9yRnJvbVBhbGV0dGUnKTsgLy8gR2V0IGNvbG9yIGZyb20gcGFsZXR0ZSBmb3IgZWFjaCBkYXRhIG9ubHkgd2hlbiB0aGUgY29sb3IgaXMgaW5oZXJpdGVkIGZyb20gc2VyaWVzIGNvbG9yLCB3aGljaCBpc1xuICAgICAgICAvLyBhbHNvIHBpY2tlZCBmcm9tIGNvbG9yIHBhbGV0dGUuIFNvIGZvbGxvd2luZyBzaXR1YXRpb24gaXMgbm90IGluIHRoZSBjYXNlOlxuICAgICAgICAvLyAxLiBzZXJpZXMuaXRlbVN0eWxlLmNvbG9yIGlzIHNldFxuICAgICAgICAvLyAyLiBjb2xvciBpcyBlbmNvZGVkIGJ5IHZpc3VhbE1hcFxuXG4gICAgICAgIGlmIChmcm9tUGFsZXR0ZSkge1xuICAgICAgICAgIHZhciBpdGVtU3R5bGUgPSBkYXRhLmVuc3VyZVVuaXF1ZUl0ZW1WaXN1YWwoaWR4LCAnc3R5bGUnKTtcbiAgICAgICAgICB2YXIgbmFtZV8xID0gZGF0YUFsbC5nZXROYW1lKHJhd0lkeCkgfHwgcmF3SWR4ICsgJyc7XG4gICAgICAgICAgdmFyIGRhdGFDb3VudCA9IGRhdGFBbGwuY291bnQoKTtcbiAgICAgICAgICBpdGVtU3R5bGVbY29sb3JLZXldID0gc2VyaWVzTW9kZWwuZ2V0Q29sb3JGcm9tUGFsZXR0ZShuYW1lXzEsIGNvbG9yU2NvcGUsIGRhdGFDb3VudCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59O1xuZXhwb3J0IHsgc2VyaWVzU3R5bGVUYXNrLCBkYXRhU3R5bGVUYXNrLCBkYXRhQ29sb3JQYWxldHRlVGFzayB9OyIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0ICogYXMgenJVdGlsIGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgKiBhcyBncmFwaGljIGZyb20gJy4uL3V0aWwvZ3JhcGhpYy5qcyc7XG52YXIgUEkgPSBNYXRoLlBJO1xuLyoqXHJcbiAqIEBwYXJhbSB7bW9kdWxlOmVjaGFydHMvRXh0ZW5zaW9uQVBJfSBhcGlcclxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdHMudGV4dF1cclxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmNvbG9yXVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdHMudGV4dENvbG9yXVxyXG4gKiBAcmV0dXJuIHttb2R1bGU6enJlbmRlci9FbGVtZW50fVxyXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZGVmYXVsdExvYWRpbmcoYXBpLCBvcHRzKSB7XG4gIG9wdHMgPSBvcHRzIHx8IHt9O1xuICB6clV0aWwuZGVmYXVsdHMob3B0cywge1xuICAgIHRleHQ6ICdsb2FkaW5nJyxcbiAgICB0ZXh0Q29sb3I6ICcjMDAwJyxcbiAgICBmb250U2l6ZTogMTIsXG4gICAgZm9udFdlaWdodDogJ25vcm1hbCcsXG4gICAgZm9udFN0eWxlOiAnbm9ybWFsJyxcbiAgICBmb250RmFtaWx5OiAnc2Fucy1zZXJpZicsXG4gICAgbWFza0NvbG9yOiAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpJyxcbiAgICBzaG93U3Bpbm5lcjogdHJ1ZSxcbiAgICBjb2xvcjogJyM1NDcwYzYnLFxuICAgIHNwaW5uZXJSYWRpdXM6IDEwLFxuICAgIGxpbmVXaWR0aDogNSxcbiAgICB6bGV2ZWw6IDBcbiAgfSk7XG4gIHZhciBncm91cCA9IG5ldyBncmFwaGljLkdyb3VwKCk7XG4gIHZhciBtYXNrID0gbmV3IGdyYXBoaWMuUmVjdCh7XG4gICAgc3R5bGU6IHtcbiAgICAgIGZpbGw6IG9wdHMubWFza0NvbG9yXG4gICAgfSxcbiAgICB6bGV2ZWw6IG9wdHMuemxldmVsLFxuICAgIHo6IDEwMDAwXG4gIH0pO1xuICBncm91cC5hZGQobWFzayk7XG4gIHZhciB0ZXh0Q29udGVudCA9IG5ldyBncmFwaGljLlRleHQoe1xuICAgIHN0eWxlOiB7XG4gICAgICB0ZXh0OiBvcHRzLnRleHQsXG4gICAgICBmaWxsOiBvcHRzLnRleHRDb2xvcixcbiAgICAgIGZvbnRTaXplOiBvcHRzLmZvbnRTaXplLFxuICAgICAgZm9udFdlaWdodDogb3B0cy5mb250V2VpZ2h0LFxuICAgICAgZm9udFN0eWxlOiBvcHRzLmZvbnRTdHlsZSxcbiAgICAgIGZvbnRGYW1pbHk6IG9wdHMuZm9udEZhbWlseVxuICAgIH0sXG4gICAgemxldmVsOiBvcHRzLnpsZXZlbCxcbiAgICB6OiAxMDAwMVxuICB9KTtcbiAgdmFyIGxhYmVsUmVjdCA9IG5ldyBncmFwaGljLlJlY3Qoe1xuICAgIHN0eWxlOiB7XG4gICAgICBmaWxsOiAnbm9uZSdcbiAgICB9LFxuICAgIHRleHRDb250ZW50OiB0ZXh0Q29udGVudCxcbiAgICB0ZXh0Q29uZmlnOiB7XG4gICAgICBwb3NpdGlvbjogJ3JpZ2h0JyxcbiAgICAgIGRpc3RhbmNlOiAxMFxuICAgIH0sXG4gICAgemxldmVsOiBvcHRzLnpsZXZlbCxcbiAgICB6OiAxMDAwMVxuICB9KTtcbiAgZ3JvdXAuYWRkKGxhYmVsUmVjdCk7XG4gIHZhciBhcmM7XG5cbiAgaWYgKG9wdHMuc2hvd1NwaW5uZXIpIHtcbiAgICBhcmMgPSBuZXcgZ3JhcGhpYy5BcmMoe1xuICAgICAgc2hhcGU6IHtcbiAgICAgICAgc3RhcnRBbmdsZTogLVBJIC8gMixcbiAgICAgICAgZW5kQW5nbGU6IC1QSSAvIDIgKyAwLjEsXG4gICAgICAgIHI6IG9wdHMuc3Bpbm5lclJhZGl1c1xuICAgICAgfSxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIHN0cm9rZTogb3B0cy5jb2xvcixcbiAgICAgICAgbGluZUNhcDogJ3JvdW5kJyxcbiAgICAgICAgbGluZVdpZHRoOiBvcHRzLmxpbmVXaWR0aFxuICAgICAgfSxcbiAgICAgIHpsZXZlbDogb3B0cy56bGV2ZWwsXG4gICAgICB6OiAxMDAwMVxuICAgIH0pO1xuICAgIGFyYy5hbmltYXRlU2hhcGUodHJ1ZSkud2hlbigxMDAwLCB7XG4gICAgICBlbmRBbmdsZTogUEkgKiAzIC8gMlxuICAgIH0pLnN0YXJ0KCdjaXJjdWxhckluT3V0Jyk7XG4gICAgYXJjLmFuaW1hdGVTaGFwZSh0cnVlKS53aGVuKDEwMDAsIHtcbiAgICAgIHN0YXJ0QW5nbGU6IFBJICogMyAvIDJcbiAgICB9KS5kZWxheSgzMDApLnN0YXJ0KCdjaXJjdWxhckluT3V0Jyk7XG4gICAgZ3JvdXAuYWRkKGFyYyk7XG4gIH0gLy8gSW5qZWN0IHJlc2l6ZVxuXG5cbiAgZ3JvdXAucmVzaXplID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB0ZXh0V2lkdGggPSB0ZXh0Q29udGVudC5nZXRCb3VuZGluZ1JlY3QoKS53aWR0aDtcbiAgICB2YXIgciA9IG9wdHMuc2hvd1NwaW5uZXIgPyBvcHRzLnNwaW5uZXJSYWRpdXMgOiAwOyAvLyBjeCA9IChjb250YWluZXJXaWR0aCAtIGFyY0RpYW1ldGVyIC0gdGV4dERpc3RhbmNlIC0gdGV4dFdpZHRoKSAvIDJcbiAgICAvLyB0ZXh0RGlzdGFuY2UgbmVlZHMgdG8gYmUgY2FsY3VsYXRlZCB3aGVuIGJvdGggYW5pbWF0aW9uIGFuZCB0ZXh0IGV4aXN0XG5cbiAgICB2YXIgY3ggPSAoYXBpLmdldFdpZHRoKCkgLSByICogMiAtIChvcHRzLnNob3dTcGlubmVyICYmIHRleHRXaWR0aCA/IDEwIDogMCkgLSB0ZXh0V2lkdGgpIC8gMiAtIChvcHRzLnNob3dTcGlubmVyICYmIHRleHRXaWR0aCA/IDAgOiA1ICsgdGV4dFdpZHRoIC8gMikgLy8gb25seSBzaG93IHRoZSB0ZXh0XG4gICAgKyAob3B0cy5zaG93U3Bpbm5lciA/IDAgOiB0ZXh0V2lkdGggLyAyKSAvLyBvbmx5IHNob3cgdGhlIHNwaW5uZXJcbiAgICArICh0ZXh0V2lkdGggPyAwIDogcik7XG4gICAgdmFyIGN5ID0gYXBpLmdldEhlaWdodCgpIC8gMjtcbiAgICBvcHRzLnNob3dTcGlubmVyICYmIGFyYy5zZXRTaGFwZSh7XG4gICAgICBjeDogY3gsXG4gICAgICBjeTogY3lcbiAgICB9KTtcbiAgICBsYWJlbFJlY3Quc2V0U2hhcGUoe1xuICAgICAgeDogY3ggLSByLFxuICAgICAgeTogY3kgLSByLFxuICAgICAgd2lkdGg6IHIgKiAyLFxuICAgICAgaGVpZ2h0OiByICogMlxuICAgIH0pO1xuICAgIG1hc2suc2V0U2hhcGUoe1xuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgICB3aWR0aDogYXBpLmdldFdpZHRoKCksXG4gICAgICBoZWlnaHQ6IGFwaS5nZXRIZWlnaHQoKVxuICAgIH0pO1xuICB9O1xuXG4gIGdyb3VwLnJlc2l6ZSgpO1xuICByZXR1cm4gZ3JvdXA7XG59IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgeyBlYWNoLCBtYXAsIGlzRnVuY3Rpb24sIGNyZWF0ZUhhc2hNYXAsIG5vb3AsIGFzc2VydCB9IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVUYXNrIH0gZnJvbSAnLi90YXNrLmpzJztcbmltcG9ydCB7IGdldFVJRCB9IGZyb20gJy4uL3V0aWwvY29tcG9uZW50LmpzJztcbmltcG9ydCBHbG9iYWxNb2RlbCBmcm9tICcuLi9tb2RlbC9HbG9iYWwuanMnO1xuaW1wb3J0IEV4dGVuc2lvbkFQSSBmcm9tICcuL0V4dGVuc2lvbkFQSS5qcyc7XG5pbXBvcnQgeyBub3JtYWxpemVUb0FycmF5IH0gZnJvbSAnLi4vdXRpbC9tb2RlbC5qcyc7XG47XG5cbnZhciBTY2hlZHVsZXIgPVxuLyoqIEBjbGFzcyAqL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTY2hlZHVsZXIoZWNJbnN0YW5jZSwgYXBpLCBkYXRhUHJvY2Vzc29ySGFuZGxlcnMsIHZpc3VhbEhhbmRsZXJzKSB7XG4gICAgLy8ga2V5OiBoYW5kbGVyVUlEXG4gICAgdGhpcy5fc3RhZ2VUYXNrTWFwID0gY3JlYXRlSGFzaE1hcCgpO1xuICAgIHRoaXMuZWNJbnN0YW5jZSA9IGVjSW5zdGFuY2U7XG4gICAgdGhpcy5hcGkgPSBhcGk7IC8vIEZpeCBjdXJyZW50IHByb2Nlc3NvcnMgaW4gY2FzZSB0aGF0IGluIHNvbWUgcmVhciBjYXNlcyB0aGF0XG4gICAgLy8gcHJvY2Vzc29ycyBtaWdodCBiZSByZWdpc3RlcmVkIGFmdGVyIGVjaGFydHMgaW5zdGFuY2UgY3JlYXRlZC5cbiAgICAvLyBSZWdpc3RlciBwcm9jZXNzb3JzIGluY3JlbWVudGFsbHkgZm9yIGEgZWNoYXJ0cyBpbnN0YW5jZSBpc1xuICAgIC8vIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBzdHJlYW0gYXJjaGl0ZWN0dXJlLlxuXG4gICAgZGF0YVByb2Nlc3NvckhhbmRsZXJzID0gdGhpcy5fZGF0YVByb2Nlc3NvckhhbmRsZXJzID0gZGF0YVByb2Nlc3NvckhhbmRsZXJzLnNsaWNlKCk7XG4gICAgdmlzdWFsSGFuZGxlcnMgPSB0aGlzLl92aXN1YWxIYW5kbGVycyA9IHZpc3VhbEhhbmRsZXJzLnNsaWNlKCk7XG4gICAgdGhpcy5fYWxsSGFuZGxlcnMgPSBkYXRhUHJvY2Vzc29ySGFuZGxlcnMuY29uY2F0KHZpc3VhbEhhbmRsZXJzKTtcbiAgfVxuXG4gIFNjaGVkdWxlci5wcm90b3R5cGUucmVzdG9yZURhdGEgPSBmdW5jdGlvbiAoZWNNb2RlbCwgcGF5bG9hZCkge1xuICAgIC8vIFRPRE86IE9ubHkgcmVzdG9yZSBuZWVkZWQgc2VyaWVzIGFuZCBjb21wb25lbnRzLCBidXQgbm90IGFsbCBjb21wb25lbnRzLlxuICAgIC8vIEN1cnJlbnRseSBgcmVzdG9yZURhdGFgIG9mIGFsbCBvZiB0aGUgc2VyaWVzIGFuZCBjb21wb25lbnQgd2lsbCBiZSBjYWxsZWQuXG4gICAgLy8gQnV0IHNvbWUgaW5kZXBlbmRlbnQgY29tcG9uZW50cyBsaWtlIGB0aXRsZWAsIGBsZWdlbmRgLCBgZ3JhcGhpY2AsIGB0b29sYm94YCxcbiAgICAvLyBgdG9vbHRpcGAsIGBheGlzUG9pbnRlcmAsIGV0YywgZG8gbm90IG5lZWQgc2VyaWVzIHJlZnJlc2ggd2hlbiBgc2V0T3B0aW9uYCxcbiAgICAvLyBhbmQgc29tZSBjb21wb25lbnRzIGxpa2UgY29vcmRpbmF0ZSBzeXN0ZW0sIGF4ZXMsIGRhdGFab29tLCB2aXN1YWxNYXAgb25seVxuICAgIC8vIG5lZWQgdGhlaXIgdGFyZ2V0IHNlcmllcyByZWZyZXNoLlxuICAgIC8vICgxKSBJZiB3ZSBhcmUgaW1wbGVtZW50aW5nIHRoaXMgZmVhdHVyZSBzb21lIGRheSwgd2Ugc2hvdWxkIGNvbnNpZGVyIHRoZXNlIGNhc2VzOlxuICAgIC8vIGlmIGEgZGF0YSBwcm9jZXNzb3IgZGVwZW5kcyBvbiBhIGNvbXBvbmVudCAoZS5nLiwgZGF0YVpvb21Qcm9jZXNzb3IgZGVwZW5kc1xuICAgIC8vIG9uIHRoZSBzZXR0aW5ncyBvZiBgZGF0YVpvb21gKSwgaXQgc2hvdWxkIGJlIHJlLXBlcmZvcm1lZCBpZiB0aGUgY29tcG9uZW50XG4gICAgLy8gaXMgbW9kaWZpZWQgYnkgYHNldE9wdGlvbmAuXG4gICAgLy8gKDIpIElmIGEgcHJvY2Vzc29yIGRlcGVuZHMgb24gc2V2cmFsIHNlcmllcywgc3BlaWNpZmllZCBieSBpdHMgYGdldFRhcmdldFNlcmllc2AsXG4gICAgLy8gaXQgc2hvdWxkIGJlIHJlLXBlcmZvcm1lZCB3aGVuIHRoZSByZXN1bHQgYXJyYXkgb2YgYGdldFRhcmdldFNlcmllc2AgY2hhbmdlZC5cbiAgICAvLyBXZSB1c2UgYGRlcGVuZGVuY2llc2AgdG8gY292ZXIgdGhlc2UgaXNzdWVzLlxuICAgIC8vICgzKSBIb3cgdG8gdXBkYXRlIHRhcmdldCBzZXJpZXMgd2hlbiBjb29yZGluYXRlIHN5c3RlbSByZWxhdGVkIGNvbXBvbmVudHMgbW9kaWZpZWQuXG4gICAgLy8gVE9ETzogc2ltcGx5IHRoZSBkaXJ0eSBtZWNoYW5pc20/IENoZWNrIHdoZXRoZXIgb25seSB0aGUgY2FzZSBoZXJlIGNhbiBzZXQgdGFza3MgZGlydHksXG4gICAgLy8gYW5kIHRoaXMgY2FzZSBhbGwgb2YgdGhlIHRhc2tzIHdpbGwgYmUgc2V0IGFzIGRpcnR5LlxuICAgIGVjTW9kZWwucmVzdG9yZURhdGEocGF5bG9hZCk7IC8vIFRoZW9yZXRpY2FsbHkgYW4gb3ZlcmFsbCB0YXNrIG5vdCBvbmx5IGRlcGVuZHMgb24gZWFjaCBvZiBpdHMgdGFyZ2V0IHNlcmllcywgYnV0IGFsc29cbiAgICAvLyBkZXBlbmRzIG9uIGFsbCBvZiB0aGUgc2VyaWVzLlxuICAgIC8vIFRoZSBvdmVyYWxsIHRhc2sgaXMgbm90IGluIHBpcGVsaW5lLCBhbmQgYGVjTW9kZWwucmVzdG9yZURhdGFgIG9ubHkgc2V0IHBpcGVsaW5lIHRhc2tzXG4gICAgLy8gZGlydHkuIElmIGBnZXRUYXJnZXRTZXJpZXNgIG9mIGFuIG92ZXJhbGwgdGFzayByZXR1cm5zIG5vdGhpbmcsIHdlIHNob3VsZCBhbHNvIGVuc3VyZVxuICAgIC8vIHRoYXQgdGhlIG92ZXJhbGwgdGFzayBpcyBzZXQgYXMgZGlydHkgYW5kIHRvIGJlIHBlcmZvcm1lZCwgb3RoZXJ3aXNlIGl0IHByb2JhYmx5IGNhdXNlXG4gICAgLy8gc3RhdGUgY2hhb3MuIFNvIHdlIGhhdmUgdG8gc2V0IGRpcnR5IG9mIGFsbCBvZiB0aGUgb3ZlcmFsbCB0YXNrcyBtYW51YWxseSwgb3RoZXJ3aXNlIGl0XG4gICAgLy8gcHJvYmFibHkgY2F1c2Ugc3RhdGUgY2hhb3MgKGNvbnNpZGVyIGBkYXRhWm9vbVByb2Nlc3NvcmApLlxuXG4gICAgdGhpcy5fc3RhZ2VUYXNrTWFwLmVhY2goZnVuY3Rpb24gKHRhc2tSZWNvcmQpIHtcbiAgICAgIHZhciBvdmVyYWxsVGFzayA9IHRhc2tSZWNvcmQub3ZlcmFsbFRhc2s7XG4gICAgICBvdmVyYWxsVGFzayAmJiBvdmVyYWxsVGFzay5kaXJ0eSgpO1xuICAgIH0pO1xuICB9OyAvLyBJZiBzZXJpZXNNb2RlbCBwcm92aWRlZCwgaW5jcmVtZW50YWwgdGhyZXNob2xkIGlzIGNoZWNrIGJ5IHNlcmllcyBkYXRhLlxuXG5cbiAgU2NoZWR1bGVyLnByb3RvdHlwZS5nZXRQZXJmb3JtQXJncyA9IGZ1bmN0aW9uICh0YXNrLCBpc0Jsb2NrKSB7XG4gICAgLy8gRm9yIG92ZXJhbGwgdGFza1xuICAgIGlmICghdGFzay5fX3BpcGVsaW5lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHBpcGVsaW5lID0gdGhpcy5fcGlwZWxpbmVNYXAuZ2V0KHRhc2suX19waXBlbGluZS5pZCk7XG5cbiAgICB2YXIgcEN0eCA9IHBpcGVsaW5lLmNvbnRleHQ7XG4gICAgdmFyIGluY3JlbWVudGFsID0gIWlzQmxvY2sgJiYgcGlwZWxpbmUucHJvZ3Jlc3NpdmVFbmFibGVkICYmICghcEN0eCB8fCBwQ3R4LnByb2dyZXNzaXZlUmVuZGVyKSAmJiB0YXNrLl9faWR4SW5QaXBlbGluZSA+IHBpcGVsaW5lLmJsb2NrSW5kZXg7XG4gICAgdmFyIHN0ZXAgPSBpbmNyZW1lbnRhbCA/IHBpcGVsaW5lLnN0ZXAgOiBudWxsO1xuICAgIHZhciBtb2REYXRhQ291bnQgPSBwQ3R4ICYmIHBDdHgubW9kRGF0YUNvdW50O1xuICAgIHZhciBtb2RCeSA9IG1vZERhdGFDb3VudCAhPSBudWxsID8gTWF0aC5jZWlsKG1vZERhdGFDb3VudCAvIHN0ZXApIDogbnVsbDtcbiAgICByZXR1cm4ge1xuICAgICAgc3RlcDogc3RlcCxcbiAgICAgIG1vZEJ5OiBtb2RCeSxcbiAgICAgIG1vZERhdGFDb3VudDogbW9kRGF0YUNvdW50XG4gICAgfTtcbiAgfTtcblxuICBTY2hlZHVsZXIucHJvdG90eXBlLmdldFBpcGVsaW5lID0gZnVuY3Rpb24gKHBpcGVsaW5lSWQpIHtcbiAgICByZXR1cm4gdGhpcy5fcGlwZWxpbmVNYXAuZ2V0KHBpcGVsaW5lSWQpO1xuICB9O1xuICAvKipcclxuICAgKiBDdXJyZW50LCBwcm9ncmVzc2l2ZSByZW5kZXJpbmcgc3RhcnRzIGZyb20gdmlzdWFsIGFuZCBsYXlvdXQuXHJcbiAgICogQWx3YXlzIGRldGVjdCByZW5kZXIgbW9kZSBpbiB0aGUgc2FtZSBzdGFnZSwgYXZvaWRpbmcgdGhhdCBpbmNvcnJlY3RcclxuICAgKiBkZXRlY3Rpb24gY2F1c2VkIGJ5IGRhdGEgZmlsdGVyaW5nLlxyXG4gICAqIENhdXRpb246XHJcbiAgICogYHVwZGF0ZVN0cmVhbU1vZGVzYCB1c2UgYHNlcmllc01vZGVsLmdldERhdGEoKWAuXHJcbiAgICovXG5cblxuICBTY2hlZHVsZXIucHJvdG90eXBlLnVwZGF0ZVN0cmVhbU1vZGVzID0gZnVuY3Rpb24gKHNlcmllc01vZGVsLCB2aWV3KSB7XG4gICAgdmFyIHBpcGVsaW5lID0gdGhpcy5fcGlwZWxpbmVNYXAuZ2V0KHNlcmllc01vZGVsLnVpZCk7XG5cbiAgICB2YXIgZGF0YSA9IHNlcmllc01vZGVsLmdldERhdGEoKTtcbiAgICB2YXIgZGF0YUxlbiA9IGRhdGEuY291bnQoKTsgLy8gYHByb2dyZXNzaXZlUmVuZGVyYCBtZWFucyB0aGF0IGNhbiByZW5kZXIgcHJvZ3Jlc3NpdmVseSBpbiBlYWNoXG4gICAgLy8gYW5pbWF0aW9uIGZyYW1lLiBOb3RlIHRoYXQgc29tZSB0eXBlcyBvZiBzZXJpZXMgZG8gbm90IHByb3ZpZGVcbiAgICAvLyBgdmlldy5pbmNyZW1lbnRhbFByZXBhcmVSZW5kZXJgIGJ1dCBzdXBwb3J0IGBjaGFydC5hcHBlbmREYXRhYC4gV2VcbiAgICAvLyB1c2UgdGhlIHRlcm0gYGluY3JlbWVudGFsYCBidXQgbm90IGBwcm9ncmVzc2l2ZWAgdG8gZGVzY3JpYmUgdGhlXG4gICAgLy8gY2FzZSB0aGF0IGBjaGFydC5hcHBlbmREYXRhYC5cblxuICAgIHZhciBwcm9ncmVzc2l2ZVJlbmRlciA9IHBpcGVsaW5lLnByb2dyZXNzaXZlRW5hYmxlZCAmJiB2aWV3LmluY3JlbWVudGFsUHJlcGFyZVJlbmRlciAmJiBkYXRhTGVuID49IHBpcGVsaW5lLnRocmVzaG9sZDtcbiAgICB2YXIgbGFyZ2UgPSBzZXJpZXNNb2RlbC5nZXQoJ2xhcmdlJykgJiYgZGF0YUxlbiA+PSBzZXJpZXNNb2RlbC5nZXQoJ2xhcmdlVGhyZXNob2xkJyk7IC8vIFRPRE86IG1vZERhdGFDb3VudCBzaG91bGQgbm90IHVwZGF0ZWQgaWYgYGFwcGVuZERhdGFgLCBvdGhlcndpc2UgY2F1c2Ugd2hvbGUgcmVwYWludC5cbiAgICAvLyBzZWUgYHRlc3QvY2FuZGxlc3RpY2stbGFyZ2UzLmh0bWxgXG5cbiAgICB2YXIgbW9kRGF0YUNvdW50ID0gc2VyaWVzTW9kZWwuZ2V0KCdwcm9ncmVzc2l2ZUNodW5rTW9kZScpID09PSAnbW9kJyA/IGRhdGFMZW4gOiBudWxsO1xuICAgIHNlcmllc01vZGVsLnBpcGVsaW5lQ29udGV4dCA9IHBpcGVsaW5lLmNvbnRleHQgPSB7XG4gICAgICBwcm9ncmVzc2l2ZVJlbmRlcjogcHJvZ3Jlc3NpdmVSZW5kZXIsXG4gICAgICBtb2REYXRhQ291bnQ6IG1vZERhdGFDb3VudCxcbiAgICAgIGxhcmdlOiBsYXJnZVxuICAgIH07XG4gIH07XG5cbiAgU2NoZWR1bGVyLnByb3RvdHlwZS5yZXN0b3JlUGlwZWxpbmVzID0gZnVuY3Rpb24gKGVjTW9kZWwpIHtcbiAgICB2YXIgc2NoZWR1bGVyID0gdGhpcztcbiAgICB2YXIgcGlwZWxpbmVNYXAgPSBzY2hlZHVsZXIuX3BpcGVsaW5lTWFwID0gY3JlYXRlSGFzaE1hcCgpO1xuICAgIGVjTW9kZWwuZWFjaFNlcmllcyhmdW5jdGlvbiAoc2VyaWVzTW9kZWwpIHtcbiAgICAgIHZhciBwcm9ncmVzc2l2ZSA9IHNlcmllc01vZGVsLmdldFByb2dyZXNzaXZlKCk7XG4gICAgICB2YXIgcGlwZWxpbmVJZCA9IHNlcmllc01vZGVsLnVpZDtcbiAgICAgIHBpcGVsaW5lTWFwLnNldChwaXBlbGluZUlkLCB7XG4gICAgICAgIGlkOiBwaXBlbGluZUlkLFxuICAgICAgICBoZWFkOiBudWxsLFxuICAgICAgICB0YWlsOiBudWxsLFxuICAgICAgICB0aHJlc2hvbGQ6IHNlcmllc01vZGVsLmdldFByb2dyZXNzaXZlVGhyZXNob2xkKCksXG4gICAgICAgIHByb2dyZXNzaXZlRW5hYmxlZDogcHJvZ3Jlc3NpdmUgJiYgIShzZXJpZXNNb2RlbC5wcmV2ZW50SW5jcmVtZW50YWwgJiYgc2VyaWVzTW9kZWwucHJldmVudEluY3JlbWVudGFsKCkpLFxuICAgICAgICBibG9ja0luZGV4OiAtMSxcbiAgICAgICAgc3RlcDogTWF0aC5yb3VuZChwcm9ncmVzc2l2ZSB8fCA3MDApLFxuICAgICAgICBjb3VudDogMFxuICAgICAgfSk7XG5cbiAgICAgIHNjaGVkdWxlci5fcGlwZShzZXJpZXNNb2RlbCwgc2VyaWVzTW9kZWwuZGF0YVRhc2spO1xuICAgIH0pO1xuICB9O1xuXG4gIFNjaGVkdWxlci5wcm90b3R5cGUucHJlcGFyZVN0YWdlVGFza3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHN0YWdlVGFza01hcCA9IHRoaXMuX3N0YWdlVGFza01hcDtcbiAgICB2YXIgZWNNb2RlbCA9IHRoaXMuYXBpLmdldE1vZGVsKCk7XG4gICAgdmFyIGFwaSA9IHRoaXMuYXBpO1xuICAgIGVhY2godGhpcy5fYWxsSGFuZGxlcnMsIGZ1bmN0aW9uIChoYW5kbGVyKSB7XG4gICAgICB2YXIgcmVjb3JkID0gc3RhZ2VUYXNrTWFwLmdldChoYW5kbGVyLnVpZCkgfHwgc3RhZ2VUYXNrTWFwLnNldChoYW5kbGVyLnVpZCwge30pO1xuICAgICAgdmFyIGVyck1zZyA9ICcnO1xuXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAvLyBDdXJyZW50bHkgZG8gbm90IG5lZWQgdG8gc3VwcG9ydCB0byBzZXBlY2lmeSB0aGVtIGJvdGguXG4gICAgICAgIGVyck1zZyA9ICdcInJlc2V0XCIgYW5kIFwib3ZlcmFsbFJlc2V0XCIgbXVzdCBub3QgYmUgYm90aCBzcGVjaWZpZWQuJztcbiAgICAgIH1cblxuICAgICAgYXNzZXJ0KCEoaGFuZGxlci5yZXNldCAmJiBoYW5kbGVyLm92ZXJhbGxSZXNldCksIGVyck1zZyk7XG4gICAgICBoYW5kbGVyLnJlc2V0ICYmIHRoaXMuX2NyZWF0ZVNlcmllc1N0YWdlVGFzayhoYW5kbGVyLCByZWNvcmQsIGVjTW9kZWwsIGFwaSk7XG4gICAgICBoYW5kbGVyLm92ZXJhbGxSZXNldCAmJiB0aGlzLl9jcmVhdGVPdmVyYWxsU3RhZ2VUYXNrKGhhbmRsZXIsIHJlY29yZCwgZWNNb2RlbCwgYXBpKTtcbiAgICB9LCB0aGlzKTtcbiAgfTtcblxuICBTY2hlZHVsZXIucHJvdG90eXBlLnByZXBhcmVWaWV3ID0gZnVuY3Rpb24gKHZpZXcsIG1vZGVsLCBlY01vZGVsLCBhcGkpIHtcbiAgICB2YXIgcmVuZGVyVGFzayA9IHZpZXcucmVuZGVyVGFzaztcbiAgICB2YXIgY29udGV4dCA9IHJlbmRlclRhc2suY29udGV4dDtcbiAgICBjb250ZXh0Lm1vZGVsID0gbW9kZWw7XG4gICAgY29udGV4dC5lY01vZGVsID0gZWNNb2RlbDtcbiAgICBjb250ZXh0LmFwaSA9IGFwaTtcbiAgICByZW5kZXJUYXNrLl9fYmxvY2sgPSAhdmlldy5pbmNyZW1lbnRhbFByZXBhcmVSZW5kZXI7XG5cbiAgICB0aGlzLl9waXBlKG1vZGVsLCByZW5kZXJUYXNrKTtcbiAgfTtcblxuICBTY2hlZHVsZXIucHJvdG90eXBlLnBlcmZvcm1EYXRhUHJvY2Vzc29yVGFza3MgPSBmdW5jdGlvbiAoZWNNb2RlbCwgcGF5bG9hZCkge1xuICAgIC8vIElmIHdlIGRvIG5vdCB1c2UgYGJsb2NrYCBoZXJlLCBpdCBzaG91bGQgYmUgY29uc2lkZXJlZCB3aGVuIHRvIHVwZGF0ZSBtb2Rlcy5cbiAgICB0aGlzLl9wZXJmb3JtU3RhZ2VUYXNrcyh0aGlzLl9kYXRhUHJvY2Vzc29ySGFuZGxlcnMsIGVjTW9kZWwsIHBheWxvYWQsIHtcbiAgICAgIGJsb2NrOiB0cnVlXG4gICAgfSk7XG4gIH07XG5cbiAgU2NoZWR1bGVyLnByb3RvdHlwZS5wZXJmb3JtVmlzdWFsVGFza3MgPSBmdW5jdGlvbiAoZWNNb2RlbCwgcGF5bG9hZCwgb3B0KSB7XG4gICAgdGhpcy5fcGVyZm9ybVN0YWdlVGFza3ModGhpcy5fdmlzdWFsSGFuZGxlcnMsIGVjTW9kZWwsIHBheWxvYWQsIG9wdCk7XG4gIH07XG5cbiAgU2NoZWR1bGVyLnByb3RvdHlwZS5fcGVyZm9ybVN0YWdlVGFza3MgPSBmdW5jdGlvbiAoc3RhZ2VIYW5kbGVycywgZWNNb2RlbCwgcGF5bG9hZCwgb3B0KSB7XG4gICAgb3B0ID0gb3B0IHx8IHt9O1xuICAgIHZhciB1bmZpbmlzaGVkID0gZmFsc2U7XG4gICAgdmFyIHNjaGVkdWxlciA9IHRoaXM7XG4gICAgZWFjaChzdGFnZUhhbmRsZXJzLCBmdW5jdGlvbiAoc3RhZ2VIYW5kbGVyLCBpZHgpIHtcbiAgICAgIGlmIChvcHQudmlzdWFsVHlwZSAmJiBvcHQudmlzdWFsVHlwZSAhPT0gc3RhZ2VIYW5kbGVyLnZpc3VhbFR5cGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgc3RhZ2VIYW5kbGVyUmVjb3JkID0gc2NoZWR1bGVyLl9zdGFnZVRhc2tNYXAuZ2V0KHN0YWdlSGFuZGxlci51aWQpO1xuXG4gICAgICB2YXIgc2VyaWVzVGFza01hcCA9IHN0YWdlSGFuZGxlclJlY29yZC5zZXJpZXNUYXNrTWFwO1xuICAgICAgdmFyIG92ZXJhbGxUYXNrID0gc3RhZ2VIYW5kbGVyUmVjb3JkLm92ZXJhbGxUYXNrO1xuXG4gICAgICBpZiAob3ZlcmFsbFRhc2spIHtcbiAgICAgICAgdmFyIG92ZXJhbGxOZWVkRGlydHlfMTtcbiAgICAgICAgdmFyIGFnZW50U3R1Yk1hcCA9IG92ZXJhbGxUYXNrLmFnZW50U3R1Yk1hcDtcbiAgICAgICAgYWdlbnRTdHViTWFwLmVhY2goZnVuY3Rpb24gKHN0dWIpIHtcbiAgICAgICAgICBpZiAobmVlZFNldERpcnR5KG9wdCwgc3R1YikpIHtcbiAgICAgICAgICAgIHN0dWIuZGlydHkoKTtcbiAgICAgICAgICAgIG92ZXJhbGxOZWVkRGlydHlfMSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgb3ZlcmFsbE5lZWREaXJ0eV8xICYmIG92ZXJhbGxUYXNrLmRpcnR5KCk7XG4gICAgICAgIHNjaGVkdWxlci51cGRhdGVQYXlsb2FkKG92ZXJhbGxUYXNrLCBwYXlsb2FkKTtcbiAgICAgICAgdmFyIHBlcmZvcm1BcmdzXzEgPSBzY2hlZHVsZXIuZ2V0UGVyZm9ybUFyZ3Mob3ZlcmFsbFRhc2ssIG9wdC5ibG9jayk7IC8vIEV4ZWN1dGUgc3R1YnMgZmlyc3RseSwgd2hpY2ggbWF5IHNldCB0aGUgb3ZlcmFsbCB0YXNrIGRpcnR5LFxuICAgICAgICAvLyB0aGVuIGV4ZWN1dGUgdGhlIG92ZXJhbGwgdGFzay4gQW5kIHN0dWIgd2lsbCBjYWxsIHNlcmllc01vZGVsLnNldERhdGEsXG4gICAgICAgIC8vIHdoaWNoIGVuc3VyZXMgdGhhdCBpbiB0aGUgb3ZlcmFsbFRhc2sgc2VyaWVzTW9kZWwuZ2V0RGF0YSgpIHdpbGwgbm90XG4gICAgICAgIC8vIHJldHVybiBpbmNvcnJlY3QgZGF0YS5cblxuICAgICAgICBhZ2VudFN0dWJNYXAuZWFjaChmdW5jdGlvbiAoc3R1Yikge1xuICAgICAgICAgIHN0dWIucGVyZm9ybShwZXJmb3JtQXJnc18xKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKG92ZXJhbGxUYXNrLnBlcmZvcm0ocGVyZm9ybUFyZ3NfMSkpIHtcbiAgICAgICAgICB1bmZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzZXJpZXNUYXNrTWFwKSB7XG4gICAgICAgIHNlcmllc1Rhc2tNYXAuZWFjaChmdW5jdGlvbiAodGFzaywgcGlwZWxpbmVJZCkge1xuICAgICAgICAgIGlmIChuZWVkU2V0RGlydHkob3B0LCB0YXNrKSkge1xuICAgICAgICAgICAgdGFzay5kaXJ0eSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBwZXJmb3JtQXJncyA9IHNjaGVkdWxlci5nZXRQZXJmb3JtQXJncyh0YXNrLCBvcHQuYmxvY2spOyAvLyBGSVhNRVxuICAgICAgICAgIC8vIGlmIGludGVuZGluZyB0byBkZWNsYXJlIGBwZXJmb3JtUmF3U2VyaWVzYCBpbiBoYW5kbGVycywgb25seVxuICAgICAgICAgIC8vIHN0cmVhbS1pbmRlcGVuZGVudCAoc3BlY2lmaWNhbGx5LCBkYXRhIGl0ZW0gaW5kZXBlbmRlbnQpIG9wZXJhdGlvbnMgY2FuIGJlXG4gICAgICAgICAgLy8gcGVyZm9ybWVkLiBCZWNhdXNlIGlmIGEgc2VyaWVzIGlzIGZpbHRlcmVkLCBtb3N0IG9mIHRoZSB0YXNrcyB3aWxsIG5vdFxuICAgICAgICAgIC8vIGJlIHBlcmZvcm1lZC4gQSBzdHJlYW0tZGVwZW5kZW50IG9wZXJhdGlvbiBwcm9iYWJseSBjYXVzZSB3cm9uZyBiaXogbG9naWMuXG4gICAgICAgICAgLy8gUGVyaGFwcyB3ZSBzaG91bGQgbm90IHByb3ZpZGUgYSBzZXBhcmF0ZSBjYWxsYmFjayBmb3IgdGhpcyBjYXNlIGluc3RlYWRcbiAgICAgICAgICAvLyBvZiBwcm92aWRpbmcgdGhlIGNvbmZpZyBgcGVyZm9ybVJhd1Nlcmllc2AuIFRoZSBzdHJlYW0tZGVwZW5kZW50IG9wZXJhdGlvbnNcbiAgICAgICAgICAvLyBhbmQgc3RyZWFtLWluZGVwZW5kZW50IG9wZXJhdGlvbnMgc2hvdWxkIGJldHRlciBub3QgYmUgbWl4ZWQuXG5cbiAgICAgICAgICBwZXJmb3JtQXJncy5za2lwID0gIXN0YWdlSGFuZGxlci5wZXJmb3JtUmF3U2VyaWVzICYmIGVjTW9kZWwuaXNTZXJpZXNGaWx0ZXJlZCh0YXNrLmNvbnRleHQubW9kZWwpO1xuICAgICAgICAgIHNjaGVkdWxlci51cGRhdGVQYXlsb2FkKHRhc2ssIHBheWxvYWQpO1xuXG4gICAgICAgICAgaWYgKHRhc2sucGVyZm9ybShwZXJmb3JtQXJncykpIHtcbiAgICAgICAgICAgIHVuZmluaXNoZWQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBuZWVkU2V0RGlydHkob3B0LCB0YXNrKSB7XG4gICAgICByZXR1cm4gb3B0LnNldERpcnR5ICYmICghb3B0LmRpcnR5TWFwIHx8IG9wdC5kaXJ0eU1hcC5nZXQodGFzay5fX3BpcGVsaW5lLmlkKSk7XG4gICAgfVxuXG4gICAgdGhpcy51bmZpbmlzaGVkID0gdW5maW5pc2hlZCB8fCB0aGlzLnVuZmluaXNoZWQ7XG4gIH07XG5cbiAgU2NoZWR1bGVyLnByb3RvdHlwZS5wZXJmb3JtU2VyaWVzVGFza3MgPSBmdW5jdGlvbiAoZWNNb2RlbCkge1xuICAgIHZhciB1bmZpbmlzaGVkO1xuICAgIGVjTW9kZWwuZWFjaFNlcmllcyhmdW5jdGlvbiAoc2VyaWVzTW9kZWwpIHtcbiAgICAgIC8vIFByb2dyZXNzIHRvIHRoZSBlbmQgZm9yIGRhdGFJbml0IGFuZCBkYXRhUmVzdG9yZS5cbiAgICAgIHVuZmluaXNoZWQgPSBzZXJpZXNNb2RlbC5kYXRhVGFzay5wZXJmb3JtKCkgfHwgdW5maW5pc2hlZDtcbiAgICB9KTtcbiAgICB0aGlzLnVuZmluaXNoZWQgPSB1bmZpbmlzaGVkIHx8IHRoaXMudW5maW5pc2hlZDtcbiAgfTtcblxuICBTY2hlZHVsZXIucHJvdG90eXBlLnBsYW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gVHJhdmVsIHBpcGVsaW5lcywgY2hlY2sgYmxvY2suXG4gICAgdGhpcy5fcGlwZWxpbmVNYXAuZWFjaChmdW5jdGlvbiAocGlwZWxpbmUpIHtcbiAgICAgIHZhciB0YXNrID0gcGlwZWxpbmUudGFpbDtcblxuICAgICAgZG8ge1xuICAgICAgICBpZiAodGFzay5fX2Jsb2NrKSB7XG4gICAgICAgICAgcGlwZWxpbmUuYmxvY2tJbmRleCA9IHRhc2suX19pZHhJblBpcGVsaW5lO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgdGFzayA9IHRhc2suZ2V0VXBzdHJlYW0oKTtcbiAgICAgIH0gd2hpbGUgKHRhc2spO1xuICAgIH0pO1xuICB9O1xuXG4gIFNjaGVkdWxlci5wcm90b3R5cGUudXBkYXRlUGF5bG9hZCA9IGZ1bmN0aW9uICh0YXNrLCBwYXlsb2FkKSB7XG4gICAgcGF5bG9hZCAhPT0gJ3JlbWFpbicgJiYgKHRhc2suY29udGV4dC5wYXlsb2FkID0gcGF5bG9hZCk7XG4gIH07XG5cbiAgU2NoZWR1bGVyLnByb3RvdHlwZS5fY3JlYXRlU2VyaWVzU3RhZ2VUYXNrID0gZnVuY3Rpb24gKHN0YWdlSGFuZGxlciwgc3RhZ2VIYW5kbGVyUmVjb3JkLCBlY01vZGVsLCBhcGkpIHtcbiAgICB2YXIgc2NoZWR1bGVyID0gdGhpcztcbiAgICB2YXIgb2xkU2VyaWVzVGFza01hcCA9IHN0YWdlSGFuZGxlclJlY29yZC5zZXJpZXNUYXNrTWFwOyAvLyBUaGUgY291bnQgb2Ygc3RhZ2VzIGFyZSB0b3RhbGx5IGFib3V0IG9ubHkgc2V2ZXJhbCBkb3plbiwgc29cbiAgICAvLyBkbyBub3QgbmVlZCB0byByZXVzZSB0aGUgbWFwLlxuXG4gICAgdmFyIG5ld1Nlcmllc1Rhc2tNYXAgPSBzdGFnZUhhbmRsZXJSZWNvcmQuc2VyaWVzVGFza01hcCA9IGNyZWF0ZUhhc2hNYXAoKTtcbiAgICB2YXIgc2VyaWVzVHlwZSA9IHN0YWdlSGFuZGxlci5zZXJpZXNUeXBlO1xuICAgIHZhciBnZXRUYXJnZXRTZXJpZXMgPSBzdGFnZUhhbmRsZXIuZ2V0VGFyZ2V0U2VyaWVzOyAvLyBJZiBhIHN0YWdlSGFuZGxlciBzaG91bGQgY292ZXIgYWxsIHNlcmllcywgYGNyZWF0ZU9uQWxsU2VyaWVzYCBzaG91bGQgYmUgZGVjbGFyZWQgbWFuZGF0b3JpbHksXG4gICAgLy8gdG8gYXZvaWQgc29tZSB0eXBvIG9yIGFidXNlLiBPdGhlcndpc2UgaWYgYW4gZXh0ZW5zaW9uIGRvIG5vdCBzcGVjaWZ5IGEgYHNlcmllc1R5cGVgLFxuICAgIC8vIGl0IHdvcmtzIGJ1dCBpdCBtYXkgY2F1c2Ugb3RoZXIgaXJyZWxldmFudCBjaGFydHMgYmxvY2tlZC5cblxuICAgIGlmIChzdGFnZUhhbmRsZXIuY3JlYXRlT25BbGxTZXJpZXMpIHtcbiAgICAgIGVjTW9kZWwuZWFjaFJhd1NlcmllcyhjcmVhdGUpO1xuICAgIH0gZWxzZSBpZiAoc2VyaWVzVHlwZSkge1xuICAgICAgZWNNb2RlbC5lYWNoUmF3U2VyaWVzQnlUeXBlKHNlcmllc1R5cGUsIGNyZWF0ZSk7XG4gICAgfSBlbHNlIGlmIChnZXRUYXJnZXRTZXJpZXMpIHtcbiAgICAgIGdldFRhcmdldFNlcmllcyhlY01vZGVsLCBhcGkpLmVhY2goY3JlYXRlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGUoc2VyaWVzTW9kZWwpIHtcbiAgICAgIHZhciBwaXBlbGluZUlkID0gc2VyaWVzTW9kZWwudWlkOyAvLyBJbml0IHRhc2tzIGZvciBlYWNoIHNlcmllc01vZGVsIG9ubHkgb25jZS5cbiAgICAgIC8vIFJldXNlIG9yaWdpbmFsIHRhc2sgaW5zdGFuY2UuXG5cbiAgICAgIHZhciB0YXNrID0gbmV3U2VyaWVzVGFza01hcC5zZXQocGlwZWxpbmVJZCwgb2xkU2VyaWVzVGFza01hcCAmJiBvbGRTZXJpZXNUYXNrTWFwLmdldChwaXBlbGluZUlkKSB8fCBjcmVhdGVUYXNrKHtcbiAgICAgICAgcGxhbjogc2VyaWVzVGFza1BsYW4sXG4gICAgICAgIHJlc2V0OiBzZXJpZXNUYXNrUmVzZXQsXG4gICAgICAgIGNvdW50OiBzZXJpZXNUYXNrQ291bnRcbiAgICAgIH0pKTtcbiAgICAgIHRhc2suY29udGV4dCA9IHtcbiAgICAgICAgbW9kZWw6IHNlcmllc01vZGVsLFxuICAgICAgICBlY01vZGVsOiBlY01vZGVsLFxuICAgICAgICBhcGk6IGFwaSxcbiAgICAgICAgLy8gUEVORElORzogYHVzZUNsZWFyVmlzdWFsYCBub3QgdXNlZD9cbiAgICAgICAgdXNlQ2xlYXJWaXN1YWw6IHN0YWdlSGFuZGxlci5pc1Zpc3VhbCAmJiAhc3RhZ2VIYW5kbGVyLmlzTGF5b3V0LFxuICAgICAgICBwbGFuOiBzdGFnZUhhbmRsZXIucGxhbixcbiAgICAgICAgcmVzZXQ6IHN0YWdlSGFuZGxlci5yZXNldCxcbiAgICAgICAgc2NoZWR1bGVyOiBzY2hlZHVsZXJcbiAgICAgIH07XG5cbiAgICAgIHNjaGVkdWxlci5fcGlwZShzZXJpZXNNb2RlbCwgdGFzayk7XG4gICAgfVxuICB9O1xuXG4gIFNjaGVkdWxlci5wcm90b3R5cGUuX2NyZWF0ZU92ZXJhbGxTdGFnZVRhc2sgPSBmdW5jdGlvbiAoc3RhZ2VIYW5kbGVyLCBzdGFnZUhhbmRsZXJSZWNvcmQsIGVjTW9kZWwsIGFwaSkge1xuICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzO1xuICAgIHZhciBvdmVyYWxsVGFzayA9IHN0YWdlSGFuZGxlclJlY29yZC5vdmVyYWxsVGFzayA9IHN0YWdlSGFuZGxlclJlY29yZC5vdmVyYWxsVGFzayAvLyBGb3Igb3ZlcmFsbCB0YXNrLCB0aGUgZnVuY3Rpb24gb25seSBiZSBjYWxsZWQgb24gcmVzZXQgc3RhZ2UuXG4gICAgfHwgY3JlYXRlVGFzayh7XG4gICAgICByZXNldDogb3ZlcmFsbFRhc2tSZXNldFxuICAgIH0pO1xuICAgIG92ZXJhbGxUYXNrLmNvbnRleHQgPSB7XG4gICAgICBlY01vZGVsOiBlY01vZGVsLFxuICAgICAgYXBpOiBhcGksXG4gICAgICBvdmVyYWxsUmVzZXQ6IHN0YWdlSGFuZGxlci5vdmVyYWxsUmVzZXQsXG4gICAgICBzY2hlZHVsZXI6IHNjaGVkdWxlclxuICAgIH07XG4gICAgdmFyIG9sZEFnZW50U3R1Yk1hcCA9IG92ZXJhbGxUYXNrLmFnZW50U3R1Yk1hcDsgLy8gVGhlIGNvdW50IG9mIHN0YWdlcyBhcmUgdG90YWxseSBhYm91dCBvbmx5IHNldmVyYWwgZG96ZW4sIHNvXG4gICAgLy8gZG8gbm90IG5lZWQgdG8gcmV1c2UgdGhlIG1hcC5cblxuICAgIHZhciBuZXdBZ2VudFN0dWJNYXAgPSBvdmVyYWxsVGFzay5hZ2VudFN0dWJNYXAgPSBjcmVhdGVIYXNoTWFwKCk7XG4gICAgdmFyIHNlcmllc1R5cGUgPSBzdGFnZUhhbmRsZXIuc2VyaWVzVHlwZTtcbiAgICB2YXIgZ2V0VGFyZ2V0U2VyaWVzID0gc3RhZ2VIYW5kbGVyLmdldFRhcmdldFNlcmllcztcbiAgICB2YXIgb3ZlcmFsbFByb2dyZXNzID0gdHJ1ZTtcbiAgICB2YXIgc2hvdWxkT3ZlcmFsbFRhc2tEaXJ0eSA9IGZhbHNlOyAvLyBGSVhNRTpUUyBuZXZlciB1c2VkLCBzbyBjb21tZW50IGl0XG4gICAgLy8gbGV0IG1vZGlmeU91dHB1dEVuZCA9IHN0YWdlSGFuZGxlci5tb2RpZnlPdXRwdXRFbmQ7XG4gICAgLy8gQW4gb3ZlcmFsbCB0YXNrIHdpdGggc2VyaWVzVHlwZSBkZXRlY3RlZCBvciBoYXMgYGdldFRhcmdldFNlcmllc2AsIHdlIGFkZFxuICAgIC8vIHN0dWIgaW4gZWFjaCBwaXBlbGluZXMsIGl0IHdpbGwgc2V0IHRoZSBvdmVyYWxsIHRhc2sgZGlydHkgd2hlbiB0aGUgcGlwZWxpbmVcbiAgICAvLyBwcm9ncmVzcy4gTW9yZW92ZXIsIHRvIGF2b2lkIGNhbGwgdGhlIG92ZXJhbGwgdGFzayBlYWNoIGZyYW1lICh0b28gZnJlcXVlbnQpLFxuICAgIC8vIHdlIHNldCB0aGUgcGlwZWxpbmUgYmxvY2suXG5cbiAgICB2YXIgZXJyTXNnID0gJyc7XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgZXJyTXNnID0gJ1wiY3JlYXRlT25BbGxTZXJpZXNcIiBpcyBub3Qgc3VwcG9ydGVkIGZvciBcIm92ZXJhbGxSZXNldFwiLCAnICsgJ2JlY2F1c2UgaXQgd2lsbCBibG9jayBhbGwgc3RyZWFtcy4nO1xuICAgIH1cblxuICAgIGFzc2VydCghc3RhZ2VIYW5kbGVyLmNyZWF0ZU9uQWxsU2VyaWVzLCBlcnJNc2cpO1xuXG4gICAgaWYgKHNlcmllc1R5cGUpIHtcbiAgICAgIGVjTW9kZWwuZWFjaFJhd1Nlcmllc0J5VHlwZShzZXJpZXNUeXBlLCBjcmVhdGVTdHViKTtcbiAgICB9IGVsc2UgaWYgKGdldFRhcmdldFNlcmllcykge1xuICAgICAgZ2V0VGFyZ2V0U2VyaWVzKGVjTW9kZWwsIGFwaSkuZWFjaChjcmVhdGVTdHViKTtcbiAgICB9IC8vIE90aGVyd2lzZSwgKHVzdWFsbHkgaXQgaXMgbGVnYWN5IGNhc2UpLCB0aGUgb3ZlcmFsbCB0YXNrIHdpbGwgb25seSBiZVxuICAgIC8vIGV4ZWN1dGVkIHdoZW4gdXBzdHJlYW0gaXMgZGlydHkuIE90aGVyd2lzZSB0aGUgcHJvZ3Jlc3NpdmUgcmVuZGVyaW5nIG9mIGFsbFxuICAgIC8vIHBpcGVsaW5lcyB3aWxsIGJlIGRpc2FibGVkIHVuZXhwZWN0ZWRseS4gQnV0IGl0IHN0aWxsIG5lZWRzIHN0dWJzIHRvIHJlY2VpdmVcbiAgICAvLyBkaXJ0eSBpbmZvIGZyb20gdXBzdHJlYW0uXG4gICAgZWxzZSB7XG4gICAgICAgIG92ZXJhbGxQcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICBlYWNoKGVjTW9kZWwuZ2V0U2VyaWVzKCksIGNyZWF0ZVN0dWIpO1xuICAgICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlU3R1YihzZXJpZXNNb2RlbCkge1xuICAgICAgdmFyIHBpcGVsaW5lSWQgPSBzZXJpZXNNb2RlbC51aWQ7XG4gICAgICB2YXIgc3R1YiA9IG5ld0FnZW50U3R1Yk1hcC5zZXQocGlwZWxpbmVJZCwgb2xkQWdlbnRTdHViTWFwICYmIG9sZEFnZW50U3R1Yk1hcC5nZXQocGlwZWxpbmVJZCkgfHwgKCAvLyBXaGVuIHRoZSByZXN1bHQgb2YgYGdldFRhcmdldFNlcmllc2AgY2hhbmdlZCwgdGhlIG92ZXJhbGxUYXNrXG4gICAgICAvLyBzaG91bGQgYmUgc2V0IGFzIGRpcnR5IGFuZCByZS1wZXJmb3JtZWQuXG4gICAgICBzaG91bGRPdmVyYWxsVGFza0RpcnR5ID0gdHJ1ZSwgY3JlYXRlVGFzayh7XG4gICAgICAgIHJlc2V0OiBzdHViUmVzZXQsXG4gICAgICAgIG9uRGlydHk6IHN0dWJPbkRpcnR5XG4gICAgICB9KSkpO1xuICAgICAgc3R1Yi5jb250ZXh0ID0ge1xuICAgICAgICBtb2RlbDogc2VyaWVzTW9kZWwsXG4gICAgICAgIG92ZXJhbGxQcm9ncmVzczogb3ZlcmFsbFByb2dyZXNzIC8vIEZJWE1FOlRTIG5ldmVyIHVzZWQsIHNvIGNvbW1lbnQgaXRcbiAgICAgICAgLy8gbW9kaWZ5T3V0cHV0RW5kOiBtb2RpZnlPdXRwdXRFbmRcblxuICAgICAgfTtcbiAgICAgIHN0dWIuYWdlbnQgPSBvdmVyYWxsVGFzaztcbiAgICAgIHN0dWIuX19ibG9jayA9IG92ZXJhbGxQcm9ncmVzcztcblxuICAgICAgc2NoZWR1bGVyLl9waXBlKHNlcmllc01vZGVsLCBzdHViKTtcbiAgICB9XG5cbiAgICBpZiAoc2hvdWxkT3ZlcmFsbFRhc2tEaXJ0eSkge1xuICAgICAgb3ZlcmFsbFRhc2suZGlydHkoKTtcbiAgICB9XG4gIH07XG5cbiAgU2NoZWR1bGVyLnByb3RvdHlwZS5fcGlwZSA9IGZ1bmN0aW9uIChzZXJpZXNNb2RlbCwgdGFzaykge1xuICAgIHZhciBwaXBlbGluZUlkID0gc2VyaWVzTW9kZWwudWlkO1xuXG4gICAgdmFyIHBpcGVsaW5lID0gdGhpcy5fcGlwZWxpbmVNYXAuZ2V0KHBpcGVsaW5lSWQpO1xuXG4gICAgIXBpcGVsaW5lLmhlYWQgJiYgKHBpcGVsaW5lLmhlYWQgPSB0YXNrKTtcbiAgICBwaXBlbGluZS50YWlsICYmIHBpcGVsaW5lLnRhaWwucGlwZSh0YXNrKTtcbiAgICBwaXBlbGluZS50YWlsID0gdGFzaztcbiAgICB0YXNrLl9faWR4SW5QaXBlbGluZSA9IHBpcGVsaW5lLmNvdW50Kys7XG4gICAgdGFzay5fX3BpcGVsaW5lID0gcGlwZWxpbmU7XG4gIH07XG5cbiAgU2NoZWR1bGVyLndyYXBTdGFnZUhhbmRsZXIgPSBmdW5jdGlvbiAoc3RhZ2VIYW5kbGVyLCB2aXN1YWxUeXBlKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24oc3RhZ2VIYW5kbGVyKSkge1xuICAgICAgc3RhZ2VIYW5kbGVyID0ge1xuICAgICAgICBvdmVyYWxsUmVzZXQ6IHN0YWdlSGFuZGxlcixcbiAgICAgICAgc2VyaWVzVHlwZTogZGV0ZWN0U2VyaXNlVHlwZShzdGFnZUhhbmRsZXIpXG4gICAgICB9O1xuICAgIH1cblxuICAgIHN0YWdlSGFuZGxlci51aWQgPSBnZXRVSUQoJ3N0YWdlSGFuZGxlcicpO1xuICAgIHZpc3VhbFR5cGUgJiYgKHN0YWdlSGFuZGxlci52aXN1YWxUeXBlID0gdmlzdWFsVHlwZSk7XG4gICAgcmV0dXJuIHN0YWdlSGFuZGxlcjtcbiAgfTtcblxuICA7XG4gIHJldHVybiBTY2hlZHVsZXI7XG59KCk7XG5cbmZ1bmN0aW9uIG92ZXJhbGxUYXNrUmVzZXQoY29udGV4dCkge1xuICBjb250ZXh0Lm92ZXJhbGxSZXNldChjb250ZXh0LmVjTW9kZWwsIGNvbnRleHQuYXBpLCBjb250ZXh0LnBheWxvYWQpO1xufVxuXG5mdW5jdGlvbiBzdHViUmVzZXQoY29udGV4dCkge1xuICByZXR1cm4gY29udGV4dC5vdmVyYWxsUHJvZ3Jlc3MgJiYgc3R1YlByb2dyZXNzO1xufVxuXG5mdW5jdGlvbiBzdHViUHJvZ3Jlc3MoKSB7XG4gIHRoaXMuYWdlbnQuZGlydHkoKTtcbiAgdGhpcy5nZXREb3duc3RyZWFtKCkuZGlydHkoKTtcbn1cblxuZnVuY3Rpb24gc3R1Yk9uRGlydHkoKSB7XG4gIHRoaXMuYWdlbnQgJiYgdGhpcy5hZ2VudC5kaXJ0eSgpO1xufVxuXG5mdW5jdGlvbiBzZXJpZXNUYXNrUGxhbihjb250ZXh0KSB7XG4gIHJldHVybiBjb250ZXh0LnBsYW4gPyBjb250ZXh0LnBsYW4oY29udGV4dC5tb2RlbCwgY29udGV4dC5lY01vZGVsLCBjb250ZXh0LmFwaSwgY29udGV4dC5wYXlsb2FkKSA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIHNlcmllc1Rhc2tSZXNldChjb250ZXh0KSB7XG4gIGlmIChjb250ZXh0LnVzZUNsZWFyVmlzdWFsKSB7XG4gICAgY29udGV4dC5kYXRhLmNsZWFyQWxsVmlzdWFsKCk7XG4gIH1cblxuICB2YXIgcmVzZXREZWZpbmVzID0gY29udGV4dC5yZXNldERlZmluZXMgPSBub3JtYWxpemVUb0FycmF5KGNvbnRleHQucmVzZXQoY29udGV4dC5tb2RlbCwgY29udGV4dC5lY01vZGVsLCBjb250ZXh0LmFwaSwgY29udGV4dC5wYXlsb2FkKSk7XG4gIHJldHVybiByZXNldERlZmluZXMubGVuZ3RoID4gMSA/IG1hcChyZXNldERlZmluZXMsIGZ1bmN0aW9uICh2LCBpZHgpIHtcbiAgICByZXR1cm4gbWFrZVNlcmllc1Rhc2tQcm9ncmVzcyhpZHgpO1xuICB9KSA6IHNpbmdsZVNlcmllc1Rhc2tQcm9ncmVzcztcbn1cblxudmFyIHNpbmdsZVNlcmllc1Rhc2tQcm9ncmVzcyA9IG1ha2VTZXJpZXNUYXNrUHJvZ3Jlc3MoMCk7XG5cbmZ1bmN0aW9uIG1ha2VTZXJpZXNUYXNrUHJvZ3Jlc3MocmVzZXREZWZpbmVJZHgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChwYXJhbXMsIGNvbnRleHQpIHtcbiAgICB2YXIgZGF0YSA9IGNvbnRleHQuZGF0YTtcbiAgICB2YXIgcmVzZXREZWZpbmUgPSBjb250ZXh0LnJlc2V0RGVmaW5lc1tyZXNldERlZmluZUlkeF07XG5cbiAgICBpZiAocmVzZXREZWZpbmUgJiYgcmVzZXREZWZpbmUuZGF0YUVhY2gpIHtcbiAgICAgIGZvciAodmFyIGkgPSBwYXJhbXMuc3RhcnQ7IGkgPCBwYXJhbXMuZW5kOyBpKyspIHtcbiAgICAgICAgcmVzZXREZWZpbmUuZGF0YUVhY2goZGF0YSwgaSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChyZXNldERlZmluZSAmJiByZXNldERlZmluZS5wcm9ncmVzcykge1xuICAgICAgcmVzZXREZWZpbmUucHJvZ3Jlc3MocGFyYW1zLCBkYXRhKTtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIHNlcmllc1Rhc2tDb3VudChjb250ZXh0KSB7XG4gIHJldHVybiBjb250ZXh0LmRhdGEuY291bnQoKTtcbn1cbi8qKlxyXG4gKiBPbmx5IHNvbWUgbGVnYWN5IHN0YWdlIGhhbmRsZXJzICh1c3VhbGx5IGluIGVjaGFydHMgZXh0ZW5zaW9ucykgYXJlIHB1cmUgZnVuY3Rpb24uXHJcbiAqIFRvIGVuc3VyZSB0aGF0IHRoZXkgY2FuIHdvcmsgbm9ybWFsbHksIHRoZXkgc2hvdWxkIHdvcmsgaW4gYmxvY2sgbW9kZSwgdGhhdCBpcyxcclxuICogdGhleSBzaG91bGQgbm90IGJlIHN0YXJ0ZWQgdXRpbCB0aGUgcHJldmlvdXMgdGFza3MgZmluaXNoZWQuIFNvIHRoZXkgY2F1c2UgdGhlXHJcbiAqIHByb2dyZXNzaXZlIHJlbmRlcmluZyBkaXNhYmxlZC4gV2UgdHJ5IHRvIGRldGVjdCB0aGUgc2VyaWVzIHR5cGUsIHRvIG5hcnJvdyBkb3duXHJcbiAqIHRoZSBibG9jayByYW5nZSB0byBvbmx5IHRoZSBzZXJpZXMgdHlwZSB0aGV5IGNvbmNlcm4sIGJ1dCBub3QgYWxsIHNlcmllcy5cclxuICovXG5cblxuZnVuY3Rpb24gZGV0ZWN0U2VyaXNlVHlwZShsZWdhY3lGdW5jKSB7XG4gIHNlcmllc1R5cGUgPSBudWxsO1xuXG4gIHRyeSB7XG4gICAgLy8gQXNzdW1lIHRoZXJlIGlzIG5vIGFzeW5jIHdoZW4gY2FsbGluZyBgZWFjaFNlcmllc0J5VHlwZWAuXG4gICAgbGVnYWN5RnVuYyhlY01vZGVsTW9jaywgYXBpTW9jayk7XG4gIH0gY2F0Y2ggKGUpIHt9XG5cbiAgcmV0dXJuIHNlcmllc1R5cGU7XG59XG5cbnZhciBlY01vZGVsTW9jayA9IHt9O1xudmFyIGFwaU1vY2sgPSB7fTtcbnZhciBzZXJpZXNUeXBlO1xubW9ja01ldGhvZHMoZWNNb2RlbE1vY2ssIEdsb2JhbE1vZGVsKTtcbm1vY2tNZXRob2RzKGFwaU1vY2ssIEV4dGVuc2lvbkFQSSk7XG5cbmVjTW9kZWxNb2NrLmVhY2hTZXJpZXNCeVR5cGUgPSBlY01vZGVsTW9jay5lYWNoUmF3U2VyaWVzQnlUeXBlID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgc2VyaWVzVHlwZSA9IHR5cGU7XG59O1xuXG5lY01vZGVsTW9jay5lYWNoQ29tcG9uZW50ID0gZnVuY3Rpb24gKGNvbmQpIHtcbiAgaWYgKGNvbmQubWFpblR5cGUgPT09ICdzZXJpZXMnICYmIGNvbmQuc3ViVHlwZSkge1xuICAgIHNlcmllc1R5cGUgPSBjb25kLnN1YlR5cGU7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIG1vY2tNZXRob2RzKHRhcmdldCwgQ2x6KSB7XG4gIC8qIGVzbGludC1kaXNhYmxlICovXG4gIGZvciAodmFyIG5hbWVfMSBpbiBDbHoucHJvdG90eXBlKSB7XG4gICAgLy8gRG8gbm90IHVzZSBoYXNPd25Qcm9wZXJ0eVxuICAgIHRhcmdldFtuYW1lXzFdID0gbm9vcDtcbiAgfVxuICAvKiBlc2xpbnQtZW5hYmxlICovXG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2NoZWR1bGVyOyIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xudmFyIGNvbG9yQWxsID0gWycjMzdBMkRBJywgJyMzMkM1RTknLCAnIzY3RTBFMycsICcjOUZFNkI4JywgJyNGRkRCNUMnLCAnI2ZmOWY3ZicsICcjZmI3MjkzJywgJyNFMDYyQUUnLCAnI0U2OTBEMScsICcjZTdiY2YzJywgJyM5ZDk2ZjUnLCAnIzgzNzhFQScsICcjOTZCRkZGJ107XG5leHBvcnQgZGVmYXVsdCB7XG4gIGNvbG9yOiBjb2xvckFsbCxcbiAgY29sb3JMYXllcjogW1snIzM3QTJEQScsICcjZmZkODVjJywgJyNmZDdiNWYnXSwgWycjMzdBMkRBJywgJyM2N0UwRTMnLCAnI0ZGREI1QycsICcjZmY5ZjdmJywgJyNFMDYyQUUnLCAnIzlkOTZmNSddLCBbJyMzN0EyREEnLCAnIzMyQzVFOScsICcjOUZFNkI4JywgJyNGRkRCNUMnLCAnI2ZmOWY3ZicsICcjZmI3MjkzJywgJyNlN2JjZjMnLCAnIzgzNzhFQScsICcjOTZCRkZGJ10sIGNvbG9yQWxsXVxufTsiLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbnZhciBjb250cmFzdENvbG9yID0gJyNCOUI4Q0UnO1xudmFyIGJhY2tncm91bmRDb2xvciA9ICcjMTAwQzJBJztcblxudmFyIGF4aXNDb21tb24gPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgYXhpc0xpbmU6IHtcbiAgICAgIGxpbmVTdHlsZToge1xuICAgICAgICBjb2xvcjogY29udHJhc3RDb2xvclxuICAgICAgfVxuICAgIH0sXG4gICAgc3BsaXRMaW5lOiB7XG4gICAgICBsaW5lU3R5bGU6IHtcbiAgICAgICAgY29sb3I6ICcjNDg0NzUzJ1xuICAgICAgfVxuICAgIH0sXG4gICAgc3BsaXRBcmVhOiB7XG4gICAgICBhcmVhU3R5bGU6IHtcbiAgICAgICAgY29sb3I6IFsncmdiYSgyNTUsMjU1LDI1NSwwLjAyKScsICdyZ2JhKDI1NSwyNTUsMjU1LDAuMDUpJ11cbiAgICAgIH1cbiAgICB9LFxuICAgIG1pbm9yU3BsaXRMaW5lOiB7XG4gICAgICBsaW5lU3R5bGU6IHtcbiAgICAgICAgY29sb3I6ICcjMjAyMDNCJ1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn07XG5cbnZhciBjb2xvclBhbGV0dGUgPSBbJyM0OTkyZmYnLCAnIzdjZmZiMicsICcjZmRkZDYwJywgJyNmZjZlNzYnLCAnIzU4ZDlmOScsICcjMDVjMDkxJywgJyNmZjhhNDUnLCAnIzhkNDhlMycsICcjZGQ3OWZmJ107XG52YXIgdGhlbWUgPSB7XG4gIGRhcmtNb2RlOiB0cnVlLFxuICBjb2xvcjogY29sb3JQYWxldHRlLFxuICBiYWNrZ3JvdW5kQ29sb3I6IGJhY2tncm91bmRDb2xvcixcbiAgYXhpc1BvaW50ZXI6IHtcbiAgICBsaW5lU3R5bGU6IHtcbiAgICAgIGNvbG9yOiAnIzgxN2Y5MSdcbiAgICB9LFxuICAgIGNyb3NzU3R5bGU6IHtcbiAgICAgIGNvbG9yOiAnIzgxN2Y5MSdcbiAgICB9LFxuICAgIGxhYmVsOiB7XG4gICAgICAvLyBUT0RPIENvbnRyYXN0IG9mIGxhYmVsIGJhY2tnb3J1bmRDb2xvclxuICAgICAgY29sb3I6ICcjZmZmJ1xuICAgIH1cbiAgfSxcbiAgbGVnZW5kOiB7XG4gICAgdGV4dFN0eWxlOiB7XG4gICAgICBjb2xvcjogY29udHJhc3RDb2xvclxuICAgIH1cbiAgfSxcbiAgdGV4dFN0eWxlOiB7XG4gICAgY29sb3I6IGNvbnRyYXN0Q29sb3JcbiAgfSxcbiAgdGl0bGU6IHtcbiAgICB0ZXh0U3R5bGU6IHtcbiAgICAgIGNvbG9yOiAnI0VFRjFGQSdcbiAgICB9LFxuICAgIHN1YnRleHRTdHlsZToge1xuICAgICAgY29sb3I6ICcjQjlCOENFJ1xuICAgIH1cbiAgfSxcbiAgdG9vbGJveDoge1xuICAgIGljb25TdHlsZToge1xuICAgICAgYm9yZGVyQ29sb3I6IGNvbnRyYXN0Q29sb3JcbiAgICB9XG4gIH0sXG4gIGRhdGFab29tOiB7XG4gICAgYm9yZGVyQ29sb3I6ICcjNzE3MDhBJyxcbiAgICB0ZXh0U3R5bGU6IHtcbiAgICAgIGNvbG9yOiBjb250cmFzdENvbG9yXG4gICAgfSxcbiAgICBicnVzaFN0eWxlOiB7XG4gICAgICBjb2xvcjogJ3JnYmEoMTM1LDE2MywyMDYsMC4zKSdcbiAgICB9LFxuICAgIGhhbmRsZVN0eWxlOiB7XG4gICAgICBjb2xvcjogJyMzNTM0NTAnLFxuICAgICAgYm9yZGVyQ29sb3I6ICcjQzVDQkUzJ1xuICAgIH0sXG4gICAgbW92ZUhhbmRsZVN0eWxlOiB7XG4gICAgICBjb2xvcjogJyNCMEI2QzMnLFxuICAgICAgb3BhY2l0eTogMC4zXG4gICAgfSxcbiAgICBmaWxsZXJDb2xvcjogJ3JnYmEoMTM1LDE2MywyMDYsMC4yKScsXG4gICAgZW1waGFzaXM6IHtcbiAgICAgIGhhbmRsZVN0eWxlOiB7XG4gICAgICAgIGJvcmRlckNvbG9yOiAnIzkxQjdGMicsXG4gICAgICAgIGNvbG9yOiAnIzRENTg3RCdcbiAgICAgIH0sXG4gICAgICBtb3ZlSGFuZGxlU3R5bGU6IHtcbiAgICAgICAgY29sb3I6ICcjNjM2RDlBJyxcbiAgICAgICAgb3BhY2l0eTogMC43XG4gICAgICB9XG4gICAgfSxcbiAgICBkYXRhQmFja2dyb3VuZDoge1xuICAgICAgbGluZVN0eWxlOiB7XG4gICAgICAgIGNvbG9yOiAnIzcxNzA4QScsXG4gICAgICAgIHdpZHRoOiAxXG4gICAgICB9LFxuICAgICAgYXJlYVN0eWxlOiB7XG4gICAgICAgIGNvbG9yOiAnIzcxNzA4QSdcbiAgICAgIH1cbiAgICB9LFxuICAgIHNlbGVjdGVkRGF0YUJhY2tncm91bmQ6IHtcbiAgICAgIGxpbmVTdHlsZToge1xuICAgICAgICBjb2xvcjogJyM4N0EzQ0UnXG4gICAgICB9LFxuICAgICAgYXJlYVN0eWxlOiB7XG4gICAgICAgIGNvbG9yOiAnIzg3QTNDRSdcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIHZpc3VhbE1hcDoge1xuICAgIHRleHRTdHlsZToge1xuICAgICAgY29sb3I6IGNvbnRyYXN0Q29sb3JcbiAgICB9XG4gIH0sXG4gIHRpbWVsaW5lOiB7XG4gICAgbGluZVN0eWxlOiB7XG4gICAgICBjb2xvcjogY29udHJhc3RDb2xvclxuICAgIH0sXG4gICAgbGFiZWw6IHtcbiAgICAgIGNvbG9yOiBjb250cmFzdENvbG9yXG4gICAgfSxcbiAgICBjb250cm9sU3R5bGU6IHtcbiAgICAgIGNvbG9yOiBjb250cmFzdENvbG9yLFxuICAgICAgYm9yZGVyQ29sb3I6IGNvbnRyYXN0Q29sb3JcbiAgICB9XG4gIH0sXG4gIGNhbGVuZGFyOiB7XG4gICAgaXRlbVN0eWxlOiB7XG4gICAgICBjb2xvcjogYmFja2dyb3VuZENvbG9yXG4gICAgfSxcbiAgICBkYXlMYWJlbDoge1xuICAgICAgY29sb3I6IGNvbnRyYXN0Q29sb3JcbiAgICB9LFxuICAgIG1vbnRoTGFiZWw6IHtcbiAgICAgIGNvbG9yOiBjb250cmFzdENvbG9yXG4gICAgfSxcbiAgICB5ZWFyTGFiZWw6IHtcbiAgICAgIGNvbG9yOiBjb250cmFzdENvbG9yXG4gICAgfVxuICB9LFxuICB0aW1lQXhpczogYXhpc0NvbW1vbigpLFxuICBsb2dBeGlzOiBheGlzQ29tbW9uKCksXG4gIHZhbHVlQXhpczogYXhpc0NvbW1vbigpLFxuICBjYXRlZ29yeUF4aXM6IGF4aXNDb21tb24oKSxcbiAgbGluZToge1xuICAgIHN5bWJvbDogJ2NpcmNsZSdcbiAgfSxcbiAgZ3JhcGg6IHtcbiAgICBjb2xvcjogY29sb3JQYWxldHRlXG4gIH0sXG4gIGdhdWdlOiB7XG4gICAgdGl0bGU6IHtcbiAgICAgIGNvbG9yOiBjb250cmFzdENvbG9yXG4gICAgfSxcbiAgICBheGlzTGluZToge1xuICAgICAgbGluZVN0eWxlOiB7XG4gICAgICAgIGNvbG9yOiBbWzEsICdyZ2JhKDIwNywyMTIsMjE5LDAuMiknXV1cbiAgICAgIH1cbiAgICB9LFxuICAgIGF4aXNMYWJlbDoge1xuICAgICAgY29sb3I6IGNvbnRyYXN0Q29sb3JcbiAgICB9LFxuICAgIGRldGFpbDoge1xuICAgICAgY29sb3I6ICcjRUVGMUZBJ1xuICAgIH1cbiAgfSxcbiAgY2FuZGxlc3RpY2s6IHtcbiAgICBpdGVtU3R5bGU6IHtcbiAgICAgIGNvbG9yOiAnI2Y2NGU1NicsXG4gICAgICBjb2xvcjA6ICcjNTRlYTkyJyxcbiAgICAgIGJvcmRlckNvbG9yOiAnI2Y2NGU1NicsXG4gICAgICBib3JkZXJDb2xvcjA6ICcjNTRlYTkyJyAvLyBib3JkZXJDb2xvcjogJyNjYTI4MjQnLFxuICAgICAgLy8gYm9yZGVyQ29sb3IwOiAnIzA5YTQ0MydcblxuICAgIH1cbiAgfVxufTtcbnRoZW1lLmNhdGVnb3J5QXhpcy5zcGxpdExpbmUuc2hvdyA9IGZhbHNlO1xuZXhwb3J0IGRlZmF1bHQgdGhlbWU7IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgKiBhcyB6clV0aWwgZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbmltcG9ydCB7IHBhcnNlQ2xhc3NUeXBlIH0gZnJvbSAnLi9jbGF6ei5qcyc7XG4vKipcclxuICogVXNhZ2Ugb2YgcXVlcnk6XHJcbiAqIGBjaGFydC5vbignY2xpY2snLCBxdWVyeSwgaGFuZGxlcik7YFxyXG4gKiBUaGUgYHF1ZXJ5YCBjYW4gYmU6XHJcbiAqICsgVGhlIGNvbXBvbmVudCB0eXBlIHF1ZXJ5IHN0cmluZywgb25seSBgbWFpblR5cGVgIG9yIGBtYWluVHlwZS5zdWJUeXBlYCxcclxuICogICBsaWtlOiAneEF4aXMnLCAnc2VyaWVzJywgJ3hBeGlzLmNhdGVnb3J5JyBvciAnc2VyaWVzLmxpbmUnLlxyXG4gKiArIFRoZSBjb21wb25lbnQgcXVlcnkgb2JqZWN0LCBsaWtlOlxyXG4gKiAgIGB7c2VyaWVzSW5kZXg6IDJ9YCwgYHtzZXJpZXNOYW1lOiAneHgnfWAsIGB7c2VyaWVzSWQ6ICdzb21lJ31gLFxyXG4gKiAgIGB7eEF4aXNJbmRleDogMn1gLCBge3hBeGlzTmFtZTogJ3h4J31gLCBge3hBeGlzSWQ6ICdzb21lJ31gLlxyXG4gKiArIFRoZSBkYXRhIHF1ZXJ5IG9iamVjdCwgbGlrZTpcclxuICogICBge2RhdGFJbmRleDogMTIzfWAsIGB7ZGF0YVR5cGU6ICdsaW5rJ31gLCBge25hbWU6ICdzb21lJ31gLlxyXG4gKiArIFRoZSBvdGhlciBxdWVyeSBvYmplY3QgKGNtcG9uZW50IGN1c3RvbWl6ZWQgcXVlcnkpLCBsaWtlOlxyXG4gKiAgIGB7ZWxlbWVudDogJ3NvbWUnfWAgKG9ubHkgYXZhaWxhYmxlIGluIGN1c3RvbSBzZXJpZXMpLlxyXG4gKlxyXG4gKiBDYXZlYXQ6IElmIGEgcHJvcCBpbiB0aGUgYHF1ZXJ5YCBvYmplY3QgaXMgYG51bGwvdW5kZWZpbmVkYCwgaXQgaXMgdGhlXHJcbiAqIHNhbWUgYXMgdGhlcmUgaXMgbm8gc3VjaCBwcm9wIGluIHRoZSBgcXVlcnlgIG9iamVjdC5cclxuICovXG5cbnZhciBFQ0V2ZW50UHJvY2Vzc29yID1cbi8qKiBAY2xhc3MgKi9cbmZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRUNFdmVudFByb2Nlc3NvcigpIHt9XG5cbiAgRUNFdmVudFByb2Nlc3Nvci5wcm90b3R5cGUubm9ybWFsaXplUXVlcnkgPSBmdW5jdGlvbiAocXVlcnkpIHtcbiAgICB2YXIgY3B0UXVlcnkgPSB7fTtcbiAgICB2YXIgZGF0YVF1ZXJ5ID0ge307XG4gICAgdmFyIG90aGVyUXVlcnkgPSB7fTsgLy8gYHF1ZXJ5YCBpcyBgbWFpblR5cGVgIG9yIGBtYWluVHlwZS5zdWJUeXBlYCBvZiBjb21wb25lbnQuXG5cbiAgICBpZiAoenJVdGlsLmlzU3RyaW5nKHF1ZXJ5KSkge1xuICAgICAgdmFyIGNvbmRDcHRUeXBlID0gcGFyc2VDbGFzc1R5cGUocXVlcnkpOyAvLyBgLm1haW5gIGFuZCBgLnN1YmAgbWF5IGJlICcnLlxuXG4gICAgICBjcHRRdWVyeS5tYWluVHlwZSA9IGNvbmRDcHRUeXBlLm1haW4gfHwgbnVsbDtcbiAgICAgIGNwdFF1ZXJ5LnN1YlR5cGUgPSBjb25kQ3B0VHlwZS5zdWIgfHwgbnVsbDtcbiAgICB9IC8vIGBxdWVyeWAgaXMgYW4gb2JqZWN0LCBjb252ZXJ0IHRvIHttYWluVHlwZSwgaW5kZXgsIG5hbWUsIGlkfS5cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gYHh4eEluZGV4YCwgYHh4eE5hbWVgLCBgeHh4SWRgLCBgbmFtZWAsIGBkYXRhSW5kZXhgLCBgZGF0YVR5cGVgIGlzIHJlc2VydmVkLFxuICAgICAgICAvLyBjYW4gbm90IGJlIHVzZWQgaW4gYGNvbXBvbWVudE1vZGVsLmZpbHRlckZvckV4cG9zZWRFdmVudGAuXG4gICAgICAgIHZhciBzdWZmaXhlc18xID0gWydJbmRleCcsICdOYW1lJywgJ0lkJ107XG4gICAgICAgIHZhciBkYXRhS2V5c18xID0ge1xuICAgICAgICAgIG5hbWU6IDEsXG4gICAgICAgICAgZGF0YUluZGV4OiAxLFxuICAgICAgICAgIGRhdGFUeXBlOiAxXG4gICAgICAgIH07XG4gICAgICAgIHpyVXRpbC5lYWNoKHF1ZXJ5LCBmdW5jdGlvbiAodmFsLCBrZXkpIHtcbiAgICAgICAgICB2YXIgcmVzZXJ2ZWQgPSBmYWxzZTtcblxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3VmZml4ZXNfMS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHByb3BTdWZmaXggPSBzdWZmaXhlc18xW2ldO1xuICAgICAgICAgICAgdmFyIHN1ZmZpeFBvcyA9IGtleS5sYXN0SW5kZXhPZihwcm9wU3VmZml4KTtcblxuICAgICAgICAgICAgaWYgKHN1ZmZpeFBvcyA+IDAgJiYgc3VmZml4UG9zID09PSBrZXkubGVuZ3RoIC0gcHJvcFN1ZmZpeC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgdmFyIG1haW5UeXBlID0ga2V5LnNsaWNlKDAsIHN1ZmZpeFBvcyk7IC8vIENvbnNpZGVyIGBkYXRhSW5kZXhgLlxuXG4gICAgICAgICAgICAgIGlmIChtYWluVHlwZSAhPT0gJ2RhdGEnKSB7XG4gICAgICAgICAgICAgICAgY3B0UXVlcnkubWFpblR5cGUgPSBtYWluVHlwZTtcbiAgICAgICAgICAgICAgICBjcHRRdWVyeVtwcm9wU3VmZml4LnRvTG93ZXJDYXNlKCldID0gdmFsO1xuICAgICAgICAgICAgICAgIHJlc2VydmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChkYXRhS2V5c18xLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIGRhdGFRdWVyeVtrZXldID0gdmFsO1xuICAgICAgICAgICAgcmVzZXJ2ZWQgPSB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghcmVzZXJ2ZWQpIHtcbiAgICAgICAgICAgIG90aGVyUXVlcnlba2V5XSA9IHZhbDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNwdFF1ZXJ5OiBjcHRRdWVyeSxcbiAgICAgIGRhdGFRdWVyeTogZGF0YVF1ZXJ5LFxuICAgICAgb3RoZXJRdWVyeTogb3RoZXJRdWVyeVxuICAgIH07XG4gIH07XG5cbiAgRUNFdmVudFByb2Nlc3Nvci5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24gKGV2ZW50VHlwZSwgcXVlcnkpIHtcbiAgICAvLyBUaGV5IHNob3VsZCBiZSBhc3NpZ25lZCBiZWZvcmUgZWFjaCB0cmlnZ2VyIGNhbGwuXG4gICAgdmFyIGV2ZW50SW5mbyA9IHRoaXMuZXZlbnRJbmZvO1xuXG4gICAgaWYgKCFldmVudEluZm8pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHZhciB0YXJnZXRFbCA9IGV2ZW50SW5mby50YXJnZXRFbDtcbiAgICB2YXIgcGFja2VkRXZlbnQgPSBldmVudEluZm8ucGFja2VkRXZlbnQ7XG4gICAgdmFyIG1vZGVsID0gZXZlbnRJbmZvLm1vZGVsO1xuICAgIHZhciB2aWV3ID0gZXZlbnRJbmZvLnZpZXc7IC8vIEZvciBldmVudCBsaWtlICdnbG9iYWxvdXQnLlxuXG4gICAgaWYgKCFtb2RlbCB8fCAhdmlldykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgdmFyIGNwdFF1ZXJ5ID0gcXVlcnkuY3B0UXVlcnk7XG4gICAgdmFyIGRhdGFRdWVyeSA9IHF1ZXJ5LmRhdGFRdWVyeTtcbiAgICByZXR1cm4gY2hlY2soY3B0UXVlcnksIG1vZGVsLCAnbWFpblR5cGUnKSAmJiBjaGVjayhjcHRRdWVyeSwgbW9kZWwsICdzdWJUeXBlJykgJiYgY2hlY2soY3B0UXVlcnksIG1vZGVsLCAnaW5kZXgnLCAnY29tcG9uZW50SW5kZXgnKSAmJiBjaGVjayhjcHRRdWVyeSwgbW9kZWwsICduYW1lJykgJiYgY2hlY2soY3B0UXVlcnksIG1vZGVsLCAnaWQnKSAmJiBjaGVjayhkYXRhUXVlcnksIHBhY2tlZEV2ZW50LCAnbmFtZScpICYmIGNoZWNrKGRhdGFRdWVyeSwgcGFja2VkRXZlbnQsICdkYXRhSW5kZXgnKSAmJiBjaGVjayhkYXRhUXVlcnksIHBhY2tlZEV2ZW50LCAnZGF0YVR5cGUnKSAmJiAoIXZpZXcuZmlsdGVyRm9yRXhwb3NlZEV2ZW50IHx8IHZpZXcuZmlsdGVyRm9yRXhwb3NlZEV2ZW50KGV2ZW50VHlwZSwgcXVlcnkub3RoZXJRdWVyeSwgdGFyZ2V0RWwsIHBhY2tlZEV2ZW50KSk7XG5cbiAgICBmdW5jdGlvbiBjaGVjayhxdWVyeSwgaG9zdCwgcHJvcCwgcHJvcE9uSG9zdCkge1xuICAgICAgcmV0dXJuIHF1ZXJ5W3Byb3BdID09IG51bGwgfHwgaG9zdFtwcm9wT25Ib3N0IHx8IHByb3BdID09PSBxdWVyeVtwcm9wXTtcbiAgICB9XG4gIH07XG5cbiAgRUNFdmVudFByb2Nlc3Nvci5wcm90b3R5cGUuYWZ0ZXJUcmlnZ2VyID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIE1ha2Ugc3VyZSB0aGUgZXZlbnRJbmZvIHdvbid0IGJlIHVzZWQgaW4gbmV4dCB0cmlnZ2VyLlxuICAgIHRoaXMuZXZlbnRJbmZvID0gbnVsbDtcbiAgfTtcblxuICByZXR1cm4gRUNFdmVudFByb2Nlc3Nvcjtcbn0oKTtcblxuZXhwb3J0IHsgRUNFdmVudFByb2Nlc3NvciB9O1xuOyIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgZXh0ZW5kLCBpc0Z1bmN0aW9uLCBrZXlzIH0gZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbnZhciBTWU1CT0xfUFJPUFNfV0lUSF9DQiA9IFsnc3ltYm9sJywgJ3N5bWJvbFNpemUnLCAnc3ltYm9sUm90YXRlJywgJ3N5bWJvbE9mZnNldCddO1xudmFyIFNZTUJPTF9QUk9QUyA9IFNZTUJPTF9QUk9QU19XSVRIX0NCLmNvbmNhdChbJ3N5bWJvbEtlZXBBc3BlY3QnXSk7IC8vIEVuY29kaW5nIHZpc3VhbCBmb3IgYWxsIHNlcmllcyBpbmNsdWRlIHdoaWNoIGlzIGZpbHRlcmVkIGZvciBsZWdlbmQgZHJhd2luZ1xuXG52YXIgc2VyaWVzU3ltYm9sVGFzayA9IHtcbiAgY3JlYXRlT25BbGxTZXJpZXM6IHRydWUsXG4gIC8vIEZvciBsZWdlbmQuXG4gIHBlcmZvcm1SYXdTZXJpZXM6IHRydWUsXG4gIHJlc2V0OiBmdW5jdGlvbiAoc2VyaWVzTW9kZWwsIGVjTW9kZWwpIHtcbiAgICB2YXIgZGF0YSA9IHNlcmllc01vZGVsLmdldERhdGEoKTtcblxuICAgIGlmIChzZXJpZXNNb2RlbC5sZWdlbmRJY29uKSB7XG4gICAgICBkYXRhLnNldFZpc3VhbCgnbGVnZW5kSWNvbicsIHNlcmllc01vZGVsLmxlZ2VuZEljb24pO1xuICAgIH1cblxuICAgIGlmICghc2VyaWVzTW9kZWwuaGFzU3ltYm9sVmlzdWFsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHN5bWJvbE9wdGlvbnMgPSB7fTtcbiAgICB2YXIgc3ltYm9sT3B0aW9uc0NiID0ge307XG4gICAgdmFyIGhhc0NhbGxiYWNrID0gZmFsc2U7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IFNZTUJPTF9QUk9QU19XSVRIX0NCLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc3ltYm9sUHJvcE5hbWUgPSBTWU1CT0xfUFJPUFNfV0lUSF9DQltpXTtcbiAgICAgIHZhciB2YWwgPSBzZXJpZXNNb2RlbC5nZXQoc3ltYm9sUHJvcE5hbWUpO1xuXG4gICAgICBpZiAoaXNGdW5jdGlvbih2YWwpKSB7XG4gICAgICAgIGhhc0NhbGxiYWNrID0gdHJ1ZTtcbiAgICAgICAgc3ltYm9sT3B0aW9uc0NiW3N5bWJvbFByb3BOYW1lXSA9IHZhbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN5bWJvbE9wdGlvbnNbc3ltYm9sUHJvcE5hbWVdID0gdmFsO1xuICAgICAgfVxuICAgIH1cblxuICAgIHN5bWJvbE9wdGlvbnMuc3ltYm9sID0gc3ltYm9sT3B0aW9ucy5zeW1ib2wgfHwgc2VyaWVzTW9kZWwuZGVmYXVsdFN5bWJvbDtcbiAgICBkYXRhLnNldFZpc3VhbChleHRlbmQoe1xuICAgICAgbGVnZW5kSWNvbjogc2VyaWVzTW9kZWwubGVnZW5kSWNvbiB8fCBzeW1ib2xPcHRpb25zLnN5bWJvbCxcbiAgICAgIHN5bWJvbEtlZXBBc3BlY3Q6IHNlcmllc01vZGVsLmdldCgnc3ltYm9sS2VlcEFzcGVjdCcpXG4gICAgfSwgc3ltYm9sT3B0aW9ucykpOyAvLyBPbmx5IHZpc2libGUgc2VyaWVzIGhhcyBlYWNoIGRhdGEgYmUgdmlzdWFsIGVuY29kZWRcblxuICAgIGlmIChlY01vZGVsLmlzU2VyaWVzRmlsdGVyZWQoc2VyaWVzTW9kZWwpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHN5bWJvbFByb3BzQ2IgPSBrZXlzKHN5bWJvbE9wdGlvbnNDYik7XG5cbiAgICBmdW5jdGlvbiBkYXRhRWFjaChkYXRhLCBpZHgpIHtcbiAgICAgIHZhciByYXdWYWx1ZSA9IHNlcmllc01vZGVsLmdldFJhd1ZhbHVlKGlkeCk7XG4gICAgICB2YXIgcGFyYW1zID0gc2VyaWVzTW9kZWwuZ2V0RGF0YVBhcmFtcyhpZHgpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN5bWJvbFByb3BzQ2IubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHN5bWJvbFByb3BOYW1lID0gc3ltYm9sUHJvcHNDYltpXTtcbiAgICAgICAgZGF0YS5zZXRJdGVtVmlzdWFsKGlkeCwgc3ltYm9sUHJvcE5hbWUsIHN5bWJvbE9wdGlvbnNDYltzeW1ib2xQcm9wTmFtZV0ocmF3VmFsdWUsIHBhcmFtcykpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBkYXRhRWFjaDogaGFzQ2FsbGJhY2sgPyBkYXRhRWFjaCA6IG51bGxcbiAgICB9O1xuICB9XG59O1xudmFyIGRhdGFTeW1ib2xUYXNrID0ge1xuICBjcmVhdGVPbkFsbFNlcmllczogdHJ1ZSxcbiAgLy8gRm9yIGxlZ2VuZC5cbiAgcGVyZm9ybVJhd1NlcmllczogdHJ1ZSxcbiAgcmVzZXQ6IGZ1bmN0aW9uIChzZXJpZXNNb2RlbCwgZWNNb2RlbCkge1xuICAgIGlmICghc2VyaWVzTW9kZWwuaGFzU3ltYm9sVmlzdWFsKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBPbmx5IHZpc2libGUgc2VyaWVzIGhhcyBlYWNoIGRhdGEgYmUgdmlzdWFsIGVuY29kZWRcblxuXG4gICAgaWYgKGVjTW9kZWwuaXNTZXJpZXNGaWx0ZXJlZChzZXJpZXNNb2RlbCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZGF0YSA9IHNlcmllc01vZGVsLmdldERhdGEoKTtcblxuICAgIGZ1bmN0aW9uIGRhdGFFYWNoKGRhdGEsIGlkeCkge1xuICAgICAgdmFyIGl0ZW1Nb2RlbCA9IGRhdGEuZ2V0SXRlbU1vZGVsKGlkeCk7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgU1lNQk9MX1BST1BTLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzeW1ib2xQcm9wTmFtZSA9IFNZTUJPTF9QUk9QU1tpXTtcbiAgICAgICAgdmFyIHZhbCA9IGl0ZW1Nb2RlbC5nZXRTaGFsbG93KHN5bWJvbFByb3BOYW1lLCB0cnVlKTtcblxuICAgICAgICBpZiAodmFsICE9IG51bGwpIHtcbiAgICAgICAgICBkYXRhLnNldEl0ZW1WaXN1YWwoaWR4LCBzeW1ib2xQcm9wTmFtZSwgdmFsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBkYXRhRWFjaDogZGF0YS5oYXNJdGVtT3B0aW9uID8gZGF0YUVhY2ggOiBudWxsXG4gICAgfTtcbiAgfVxufTtcbmV4cG9ydCB7IHNlcmllc1N5bWJvbFRhc2ssIGRhdGFTeW1ib2xUYXNrIH07IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SXRlbVZpc3VhbEZyb21EYXRhKGRhdGEsIGRhdGFJbmRleCwga2V5KSB7XG4gIHN3aXRjaCAoa2V5KSB7XG4gICAgY2FzZSAnY29sb3InOlxuICAgICAgdmFyIHN0eWxlID0gZGF0YS5nZXRJdGVtVmlzdWFsKGRhdGFJbmRleCwgJ3N0eWxlJyk7XG4gICAgICByZXR1cm4gc3R5bGVbZGF0YS5nZXRWaXN1YWwoJ2RyYXdUeXBlJyldO1xuXG4gICAgY2FzZSAnb3BhY2l0eSc6XG4gICAgICByZXR1cm4gZGF0YS5nZXRJdGVtVmlzdWFsKGRhdGFJbmRleCwgJ3N0eWxlJykub3BhY2l0eTtcblxuICAgIGNhc2UgJ3N5bWJvbCc6XG4gICAgY2FzZSAnc3ltYm9sU2l6ZSc6XG4gICAgY2FzZSAnbGlmdFonOlxuICAgICAgcmV0dXJuIGRhdGEuZ2V0SXRlbVZpc3VhbChkYXRhSW5kZXgsIGtleSk7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiVW5rbm93biB2aXN1YWwgdHlwZSBcIiArIGtleSk7XG4gICAgICB9XG5cbiAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFZpc3VhbEZyb21EYXRhKGRhdGEsIGtleSkge1xuICBzd2l0Y2ggKGtleSkge1xuICAgIGNhc2UgJ2NvbG9yJzpcbiAgICAgIHZhciBzdHlsZSA9IGRhdGEuZ2V0VmlzdWFsKCdzdHlsZScpO1xuICAgICAgcmV0dXJuIHN0eWxlW2RhdGEuZ2V0VmlzdWFsKCdkcmF3VHlwZScpXTtcblxuICAgIGNhc2UgJ29wYWNpdHknOlxuICAgICAgcmV0dXJuIGRhdGEuZ2V0VmlzdWFsKCdzdHlsZScpLm9wYWNpdHk7XG5cbiAgICBjYXNlICdzeW1ib2wnOlxuICAgIGNhc2UgJ3N5bWJvbFNpemUnOlxuICAgIGNhc2UgJ2xpZnRaJzpcbiAgICAgIHJldHVybiBkYXRhLmdldFZpc3VhbChrZXkpO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIlVua25vd24gdmlzdWFsIHR5cGUgXCIgKyBrZXkpO1xuICAgICAgfVxuXG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXRJdGVtVmlzdWFsRnJvbURhdGEoZGF0YSwgZGF0YUluZGV4LCBrZXksIHZhbHVlKSB7XG4gIHN3aXRjaCAoa2V5KSB7XG4gICAgY2FzZSAnY29sb3InOlxuICAgICAgLy8gTWFrZSBzdXJlIG5vdCBzaGFyaW5nIHN0eWxlIG9iamVjdC5cbiAgICAgIHZhciBzdHlsZSA9IGRhdGEuZW5zdXJlVW5pcXVlSXRlbVZpc3VhbChkYXRhSW5kZXgsICdzdHlsZScpO1xuICAgICAgc3R5bGVbZGF0YS5nZXRWaXN1YWwoJ2RyYXdUeXBlJyldID0gdmFsdWU7IC8vIE1hcmsgdGhlIGNvbG9yIGhhcyBiZWVuIGNoYW5nZWQsIG5vdCBmcm9tIHBhbGV0dGUgYW55bW9yZVxuXG4gICAgICBkYXRhLnNldEl0ZW1WaXN1YWwoZGF0YUluZGV4LCAnY29sb3JGcm9tUGFsZXR0ZScsIGZhbHNlKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnb3BhY2l0eSc6XG4gICAgICBkYXRhLmVuc3VyZVVuaXF1ZUl0ZW1WaXN1YWwoZGF0YUluZGV4LCAnc3R5bGUnKS5vcGFjaXR5ID0gdmFsdWU7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ3N5bWJvbCc6XG4gICAgY2FzZSAnc3ltYm9sU2l6ZSc6XG4gICAgY2FzZSAnbGlmdFonOlxuICAgICAgZGF0YS5zZXRJdGVtVmlzdWFsKGRhdGFJbmRleCwga2V5LCB2YWx1ZSk7XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJVbmtub3duIHZpc3VhbCB0eXBlIFwiICsga2V5KTtcbiAgICAgIH1cblxuICB9XG59IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgeyBleHRlbmQsIGVhY2gsIGlzQXJyYXksIGlzU3RyaW5nIH0gZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbmltcG9ydCB7IGRlcHJlY2F0ZVJlcGxhY2VMb2csIGRlcHJlY2F0ZUxvZyB9IGZyb20gJy4uL3V0aWwvbG9nLmpzJztcbmltcG9ydCB7IHF1ZXJ5RGF0YUluZGV4IH0gZnJvbSAnLi4vdXRpbC9tb2RlbC5qcyc7IC8vIExlZ2FjeSBkYXRhIHNlbGVjdGlvbiBhY3Rpb24uXG4vLyBJbmNsdWRlczogcGllU2VsZWN0LCBwaWVVblNlbGVjdCwgcGllVG9nZ2xlU2VsZWN0LCBtYXBTZWxlY3QsIG1hcFVuU2VsZWN0LCBtYXBUb2dnbGVTZWxlY3RcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUxlZ2FjeURhdGFTZWxlY3RBY3Rpb24oc2VyaWVzVHlwZSwgZWNSZWdpc3RlckFjdGlvbikge1xuICBmdW5jdGlvbiBnZXRTZXJpZXNJbmRpY2VzKGVjTW9kZWwsIHBheWxvYWQpIHtcbiAgICB2YXIgc2VyaWVzSW5kaWNlcyA9IFtdO1xuICAgIGVjTW9kZWwuZWFjaENvbXBvbmVudCh7XG4gICAgICBtYWluVHlwZTogJ3NlcmllcycsXG4gICAgICBzdWJUeXBlOiBzZXJpZXNUeXBlLFxuICAgICAgcXVlcnk6IHBheWxvYWRcbiAgICB9LCBmdW5jdGlvbiAoc2VyaWVzTW9kZWwpIHtcbiAgICAgIHNlcmllc0luZGljZXMucHVzaChzZXJpZXNNb2RlbC5zZXJpZXNJbmRleCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHNlcmllc0luZGljZXM7XG4gIH1cblxuICBlYWNoKFtbc2VyaWVzVHlwZSArICdUb2dnbGVTZWxlY3QnLCAndG9nZ2xlU2VsZWN0J10sIFtzZXJpZXNUeXBlICsgJ1NlbGVjdCcsICdzZWxlY3QnXSwgW3Nlcmllc1R5cGUgKyAnVW5TZWxlY3QnLCAndW5zZWxlY3QnXV0sIGZ1bmN0aW9uIChldmVudHNNYXApIHtcbiAgICBlY1JlZ2lzdGVyQWN0aW9uKGV2ZW50c01hcFswXSwgZnVuY3Rpb24gKHBheWxvYWQsIGVjTW9kZWwsIGFwaSkge1xuICAgICAgcGF5bG9hZCA9IGV4dGVuZCh7fSwgcGF5bG9hZCk7XG5cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGRlcHJlY2F0ZVJlcGxhY2VMb2cocGF5bG9hZC50eXBlLCBldmVudHNNYXBbMV0pO1xuICAgICAgfVxuXG4gICAgICBhcGkuZGlzcGF0Y2hBY3Rpb24oZXh0ZW5kKHBheWxvYWQsIHtcbiAgICAgICAgdHlwZTogZXZlbnRzTWFwWzFdLFxuICAgICAgICBzZXJpZXNJbmRleDogZ2V0U2VyaWVzSW5kaWNlcyhlY01vZGVsLCBwYXlsb2FkKVxuICAgICAgfSkpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlU2VyaWVzTGVnYWN5U2VsZWN0RXZlbnRzKHR5cGUsIGV2ZW50UG9zdGZpeCwgZWNJbnMsIGVjTW9kZWwsIHBheWxvYWQpIHtcbiAgdmFyIGxlZ2FjeUV2ZW50TmFtZSA9IHR5cGUgKyBldmVudFBvc3RmaXg7XG5cbiAgaWYgKCFlY0lucy5pc1NpbGVudChsZWdhY3lFdmVudE5hbWUpKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGRlcHJlY2F0ZUxvZyhcImV2ZW50IFwiICsgbGVnYWN5RXZlbnROYW1lICsgXCIgaXMgZGVwcmVjYXRlZC5cIik7XG4gICAgfVxuXG4gICAgZWNNb2RlbC5lYWNoQ29tcG9uZW50KHtcbiAgICAgIG1haW5UeXBlOiAnc2VyaWVzJyxcbiAgICAgIHN1YlR5cGU6ICdwaWUnXG4gICAgfSwgZnVuY3Rpb24gKHNlcmllc01vZGVsKSB7XG4gICAgICB2YXIgc2VyaWVzSW5kZXggPSBzZXJpZXNNb2RlbC5zZXJpZXNJbmRleDtcbiAgICAgIHZhciBzZWxlY3RlZE1hcCA9IHNlcmllc01vZGVsLm9wdGlvbi5zZWxlY3RlZE1hcDtcbiAgICAgIHZhciBzZWxlY3RlZCA9IHBheWxvYWQuc2VsZWN0ZWQ7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZWN0ZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHNlbGVjdGVkW2ldLnNlcmllc0luZGV4ID09PSBzZXJpZXNJbmRleCkge1xuICAgICAgICAgIHZhciBkYXRhID0gc2VyaWVzTW9kZWwuZ2V0RGF0YSgpO1xuICAgICAgICAgIHZhciBkYXRhSW5kZXggPSBxdWVyeURhdGFJbmRleChkYXRhLCBwYXlsb2FkLmZyb21BY3Rpb25QYXlsb2FkKTtcbiAgICAgICAgICBlY0lucy50cmlnZ2VyKGxlZ2FjeUV2ZW50TmFtZSwge1xuICAgICAgICAgICAgdHlwZTogbGVnYWN5RXZlbnROYW1lLFxuICAgICAgICAgICAgc2VyaWVzSWQ6IHNlcmllc01vZGVsLmlkLFxuICAgICAgICAgICAgbmFtZTogaXNBcnJheShkYXRhSW5kZXgpID8gZGF0YS5nZXROYW1lKGRhdGFJbmRleFswXSkgOiBkYXRhLmdldE5hbWUoZGF0YUluZGV4KSxcbiAgICAgICAgICAgIHNlbGVjdGVkOiBpc1N0cmluZyhzZWxlY3RlZE1hcCkgPyBzZWxlY3RlZE1hcCA6IGV4dGVuZCh7fSwgc2VsZWN0ZWRNYXApXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlTGVnYWN5U2VsZWN0RXZlbnRzKG1lc3NhZ2VDZW50ZXIsIGVjSW5zLCBhcGkpIHtcbiAgbWVzc2FnZUNlbnRlci5vbignc2VsZWN0Y2hhbmdlZCcsIGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICB2YXIgZWNNb2RlbCA9IGFwaS5nZXRNb2RlbCgpO1xuXG4gICAgaWYgKHBhcmFtcy5pc0Zyb21DbGljaykge1xuICAgICAgaGFuZGxlU2VyaWVzTGVnYWN5U2VsZWN0RXZlbnRzKCdtYXAnLCAnc2VsZWN0Y2hhbmdlZCcsIGVjSW5zLCBlY01vZGVsLCBwYXJhbXMpO1xuICAgICAgaGFuZGxlU2VyaWVzTGVnYWN5U2VsZWN0RXZlbnRzKCdwaWUnLCAnc2VsZWN0Y2hhbmdlZCcsIGVjSW5zLCBlY01vZGVsLCBwYXJhbXMpO1xuICAgIH0gZWxzZSBpZiAocGFyYW1zLmZyb21BY3Rpb24gPT09ICdzZWxlY3QnKSB7XG4gICAgICBoYW5kbGVTZXJpZXNMZWdhY3lTZWxlY3RFdmVudHMoJ21hcCcsICdzZWxlY3RlZCcsIGVjSW5zLCBlY01vZGVsLCBwYXJhbXMpO1xuICAgICAgaGFuZGxlU2VyaWVzTGVnYWN5U2VsZWN0RXZlbnRzKCdwaWUnLCAnc2VsZWN0ZWQnLCBlY0lucywgZWNNb2RlbCwgcGFyYW1zKTtcbiAgICB9IGVsc2UgaWYgKHBhcmFtcy5mcm9tQWN0aW9uID09PSAndW5zZWxlY3QnKSB7XG4gICAgICBoYW5kbGVTZXJpZXNMZWdhY3lTZWxlY3RFdmVudHMoJ21hcCcsICd1bnNlbGVjdGVkJywgZWNJbnMsIGVjTW9kZWwsIHBhcmFtcyk7XG4gICAgICBoYW5kbGVTZXJpZXNMZWdhY3lTZWxlY3RFdmVudHMoJ3BpZScsICd1bnNlbGVjdGVkJywgZWNJbnMsIGVjTW9kZWwsIHBhcmFtcyk7XG4gICAgfVxuICB9KTtcbn0iLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kRXZlbnREaXNwYXRjaGVyKHRhcmdldCwgZGV0LCByZXR1cm5GaXJzdE1hdGNoKSB7XG4gIHZhciBmb3VuZDtcblxuICB3aGlsZSAodGFyZ2V0KSB7XG4gICAgaWYgKGRldCh0YXJnZXQpKSB7XG4gICAgICBmb3VuZCA9IHRhcmdldDtcblxuICAgICAgaWYgKHJldHVybkZpcnN0TWF0Y2gpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGFyZ2V0ID0gdGFyZ2V0Ll9faG9zdFRhcmdldCB8fCB0YXJnZXQucGFyZW50O1xuICB9XG5cbiAgcmV0dXJuIGZvdW5kO1xufSIsInZhciB3bVVuaXF1ZUluZGV4ID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogOSk7XG52YXIgc3VwcG9ydERlZmluZVByb3BlcnR5ID0gdHlwZW9mIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSA9PT0gJ2Z1bmN0aW9uJztcbnZhciBXZWFrTWFwID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBXZWFrTWFwKCkge1xuICAgICAgICB0aGlzLl9pZCA9ICdfX2VjX2lubmVyXycgKyB3bVVuaXF1ZUluZGV4Kys7XG4gICAgfVxuICAgIFdlYWtNYXAucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2d1YXJkKGtleSlbdGhpcy5faWRdO1xuICAgIH07XG4gICAgV2Vha01hcC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMuX2d1YXJkKGtleSk7XG4gICAgICAgIGlmIChzdXBwb3J0RGVmaW5lUHJvcGVydHkpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHRoaXMuX2lkLCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXRbdGhpcy5faWRdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBXZWFrTWFwLnByb3RvdHlwZVtcImRlbGV0ZVwiXSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzKGtleSkpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9ndWFyZChrZXkpW3RoaXMuX2lkXTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIFdlYWtNYXAucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZ3VhcmQoa2V5KVt0aGlzLl9pZF07XG4gICAgfTtcbiAgICBXZWFrTWFwLnByb3RvdHlwZS5fZ3VhcmQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGlmIChrZXkgIT09IE9iamVjdChrZXkpKSB7XG4gICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIFdlYWtNYXAgaXMgbm90IGEgbm9uLW51bGwgb2JqZWN0LicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBrZXk7XG4gICAgfTtcbiAgICByZXR1cm4gV2Vha01hcDtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBXZWFrTWFwO1xuIiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG4vLyBTeW1ib2wgZmFjdG9yeVxuaW1wb3J0IHsgZWFjaCwgaXNBcnJheSwgcmV0cmlldmUyIH0gZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbmltcG9ydCAqIGFzIGdyYXBoaWMgZnJvbSAnLi9ncmFwaGljLmpzJztcbmltcG9ydCBCb3VuZGluZ1JlY3QgZnJvbSAnenJlbmRlci9saWIvY29yZS9Cb3VuZGluZ1JlY3QuanMnO1xuaW1wb3J0IHsgY2FsY3VsYXRlVGV4dFBvc2l0aW9uIH0gZnJvbSAnenJlbmRlci9saWIvY29udGFpbi90ZXh0LmpzJztcbmltcG9ydCB7IHBhcnNlUGVyY2VudCB9IGZyb20gJy4vbnVtYmVyLmpzJztcbi8qKlxyXG4gKiBUcmlhbmdsZSBzaGFwZVxyXG4gKiBAaW5uZXJcclxuICovXG5cbnZhciBUcmlhbmdsZSA9IGdyYXBoaWMuUGF0aC5leHRlbmQoe1xuICB0eXBlOiAndHJpYW5nbGUnLFxuICBzaGFwZToge1xuICAgIGN4OiAwLFxuICAgIGN5OiAwLFxuICAgIHdpZHRoOiAwLFxuICAgIGhlaWdodDogMFxuICB9LFxuICBidWlsZFBhdGg6IGZ1bmN0aW9uIChwYXRoLCBzaGFwZSkge1xuICAgIHZhciBjeCA9IHNoYXBlLmN4O1xuICAgIHZhciBjeSA9IHNoYXBlLmN5O1xuICAgIHZhciB3aWR0aCA9IHNoYXBlLndpZHRoIC8gMjtcbiAgICB2YXIgaGVpZ2h0ID0gc2hhcGUuaGVpZ2h0IC8gMjtcbiAgICBwYXRoLm1vdmVUbyhjeCwgY3kgLSBoZWlnaHQpO1xuICAgIHBhdGgubGluZVRvKGN4ICsgd2lkdGgsIGN5ICsgaGVpZ2h0KTtcbiAgICBwYXRoLmxpbmVUbyhjeCAtIHdpZHRoLCBjeSArIGhlaWdodCk7XG4gICAgcGF0aC5jbG9zZVBhdGgoKTtcbiAgfVxufSk7XG4vKipcclxuICogRGlhbW9uZCBzaGFwZVxyXG4gKiBAaW5uZXJcclxuICovXG5cbnZhciBEaWFtb25kID0gZ3JhcGhpYy5QYXRoLmV4dGVuZCh7XG4gIHR5cGU6ICdkaWFtb25kJyxcbiAgc2hhcGU6IHtcbiAgICBjeDogMCxcbiAgICBjeTogMCxcbiAgICB3aWR0aDogMCxcbiAgICBoZWlnaHQ6IDBcbiAgfSxcbiAgYnVpbGRQYXRoOiBmdW5jdGlvbiAocGF0aCwgc2hhcGUpIHtcbiAgICB2YXIgY3ggPSBzaGFwZS5jeDtcbiAgICB2YXIgY3kgPSBzaGFwZS5jeTtcbiAgICB2YXIgd2lkdGggPSBzaGFwZS53aWR0aCAvIDI7XG4gICAgdmFyIGhlaWdodCA9IHNoYXBlLmhlaWdodCAvIDI7XG4gICAgcGF0aC5tb3ZlVG8oY3gsIGN5IC0gaGVpZ2h0KTtcbiAgICBwYXRoLmxpbmVUbyhjeCArIHdpZHRoLCBjeSk7XG4gICAgcGF0aC5saW5lVG8oY3gsIGN5ICsgaGVpZ2h0KTtcbiAgICBwYXRoLmxpbmVUbyhjeCAtIHdpZHRoLCBjeSk7XG4gICAgcGF0aC5jbG9zZVBhdGgoKTtcbiAgfVxufSk7XG4vKipcclxuICogUGluIHNoYXBlXHJcbiAqIEBpbm5lclxyXG4gKi9cblxudmFyIFBpbiA9IGdyYXBoaWMuUGF0aC5leHRlbmQoe1xuICB0eXBlOiAncGluJyxcbiAgc2hhcGU6IHtcbiAgICAvLyB4LCB5IG9uIHRoZSBjdXNwXG4gICAgeDogMCxcbiAgICB5OiAwLFxuICAgIHdpZHRoOiAwLFxuICAgIGhlaWdodDogMFxuICB9LFxuICBidWlsZFBhdGg6IGZ1bmN0aW9uIChwYXRoLCBzaGFwZSkge1xuICAgIHZhciB4ID0gc2hhcGUueDtcbiAgICB2YXIgeSA9IHNoYXBlLnk7XG4gICAgdmFyIHcgPSBzaGFwZS53aWR0aCAvIDUgKiAzOyAvLyBIZWlnaHQgbXVzdCBiZSBsYXJnZXIgdGhhbiB3aWR0aFxuXG4gICAgdmFyIGggPSBNYXRoLm1heCh3LCBzaGFwZS5oZWlnaHQpO1xuICAgIHZhciByID0gdyAvIDI7IC8vIERpc3Qgb24geSB3aXRoIHRhbmdlbnQgcG9pbnQgYW5kIGNpcmNsZSBjZW50ZXJcblxuICAgIHZhciBkeSA9IHIgKiByIC8gKGggLSByKTtcbiAgICB2YXIgY3kgPSB5IC0gaCArIHIgKyBkeTtcbiAgICB2YXIgYW5nbGUgPSBNYXRoLmFzaW4oZHkgLyByKTsgLy8gRGlzdCBvbiB4IHdpdGggdGFuZ2VudCBwb2ludCBhbmQgY2lyY2xlIGNlbnRlclxuXG4gICAgdmFyIGR4ID0gTWF0aC5jb3MoYW5nbGUpICogcjtcbiAgICB2YXIgdGFuWCA9IE1hdGguc2luKGFuZ2xlKTtcbiAgICB2YXIgdGFuWSA9IE1hdGguY29zKGFuZ2xlKTtcbiAgICB2YXIgY3BMZW4gPSByICogMC42O1xuICAgIHZhciBjcExlbjIgPSByICogMC43O1xuICAgIHBhdGgubW92ZVRvKHggLSBkeCwgY3kgKyBkeSk7XG4gICAgcGF0aC5hcmMoeCwgY3ksIHIsIE1hdGguUEkgLSBhbmdsZSwgTWF0aC5QSSAqIDIgKyBhbmdsZSk7XG4gICAgcGF0aC5iZXppZXJDdXJ2ZVRvKHggKyBkeCAtIHRhblggKiBjcExlbiwgY3kgKyBkeSArIHRhblkgKiBjcExlbiwgeCwgeSAtIGNwTGVuMiwgeCwgeSk7XG4gICAgcGF0aC5iZXppZXJDdXJ2ZVRvKHgsIHkgLSBjcExlbjIsIHggLSBkeCArIHRhblggKiBjcExlbiwgY3kgKyBkeSArIHRhblkgKiBjcExlbiwgeCAtIGR4LCBjeSArIGR5KTtcbiAgICBwYXRoLmNsb3NlUGF0aCgpO1xuICB9XG59KTtcbi8qKlxyXG4gKiBBcnJvdyBzaGFwZVxyXG4gKiBAaW5uZXJcclxuICovXG5cbnZhciBBcnJvdyA9IGdyYXBoaWMuUGF0aC5leHRlbmQoe1xuICB0eXBlOiAnYXJyb3cnLFxuICBzaGFwZToge1xuICAgIHg6IDAsXG4gICAgeTogMCxcbiAgICB3aWR0aDogMCxcbiAgICBoZWlnaHQ6IDBcbiAgfSxcbiAgYnVpbGRQYXRoOiBmdW5jdGlvbiAoY3R4LCBzaGFwZSkge1xuICAgIHZhciBoZWlnaHQgPSBzaGFwZS5oZWlnaHQ7XG4gICAgdmFyIHdpZHRoID0gc2hhcGUud2lkdGg7XG4gICAgdmFyIHggPSBzaGFwZS54O1xuICAgIHZhciB5ID0gc2hhcGUueTtcbiAgICB2YXIgZHggPSB3aWR0aCAvIDMgKiAyO1xuICAgIGN0eC5tb3ZlVG8oeCwgeSk7XG4gICAgY3R4LmxpbmVUbyh4ICsgZHgsIHkgKyBoZWlnaHQpO1xuICAgIGN0eC5saW5lVG8oeCwgeSArIGhlaWdodCAvIDQgKiAzKTtcbiAgICBjdHgubGluZVRvKHggLSBkeCwgeSArIGhlaWdodCk7XG4gICAgY3R4LmxpbmVUbyh4LCB5KTtcbiAgICBjdHguY2xvc2VQYXRoKCk7XG4gIH1cbn0pO1xuLyoqXHJcbiAqIE1hcCBvZiBwYXRoIGNvbnN0cnVjdG9yc1xyXG4gKi9cbi8vIFRPRE8gVXNlIGZ1bmN0aW9uIHRvIGJ1aWxkIHN5bWJvbCBwYXRoLlxuXG52YXIgc3ltYm9sQ3RvcnMgPSB7XG4gIGxpbmU6IGdyYXBoaWMuTGluZSxcbiAgcmVjdDogZ3JhcGhpYy5SZWN0LFxuICByb3VuZFJlY3Q6IGdyYXBoaWMuUmVjdCxcbiAgc3F1YXJlOiBncmFwaGljLlJlY3QsXG4gIGNpcmNsZTogZ3JhcGhpYy5DaXJjbGUsXG4gIGRpYW1vbmQ6IERpYW1vbmQsXG4gIHBpbjogUGluLFxuICBhcnJvdzogQXJyb3csXG4gIHRyaWFuZ2xlOiBUcmlhbmdsZVxufTtcbnZhciBzeW1ib2xTaGFwZU1ha2VycyA9IHtcbiAgbGluZTogZnVuY3Rpb24gKHgsIHksIHcsIGgsIHNoYXBlKSB7XG4gICAgc2hhcGUueDEgPSB4O1xuICAgIHNoYXBlLnkxID0geSArIGggLyAyO1xuICAgIHNoYXBlLngyID0geCArIHc7XG4gICAgc2hhcGUueTIgPSB5ICsgaCAvIDI7XG4gIH0sXG4gIHJlY3Q6IGZ1bmN0aW9uICh4LCB5LCB3LCBoLCBzaGFwZSkge1xuICAgIHNoYXBlLnggPSB4O1xuICAgIHNoYXBlLnkgPSB5O1xuICAgIHNoYXBlLndpZHRoID0gdztcbiAgICBzaGFwZS5oZWlnaHQgPSBoO1xuICB9LFxuICByb3VuZFJlY3Q6IGZ1bmN0aW9uICh4LCB5LCB3LCBoLCBzaGFwZSkge1xuICAgIHNoYXBlLnggPSB4O1xuICAgIHNoYXBlLnkgPSB5O1xuICAgIHNoYXBlLndpZHRoID0gdztcbiAgICBzaGFwZS5oZWlnaHQgPSBoO1xuICAgIHNoYXBlLnIgPSBNYXRoLm1pbih3LCBoKSAvIDQ7XG4gIH0sXG4gIHNxdWFyZTogZnVuY3Rpb24gKHgsIHksIHcsIGgsIHNoYXBlKSB7XG4gICAgdmFyIHNpemUgPSBNYXRoLm1pbih3LCBoKTtcbiAgICBzaGFwZS54ID0geDtcbiAgICBzaGFwZS55ID0geTtcbiAgICBzaGFwZS53aWR0aCA9IHNpemU7XG4gICAgc2hhcGUuaGVpZ2h0ID0gc2l6ZTtcbiAgfSxcbiAgY2lyY2xlOiBmdW5jdGlvbiAoeCwgeSwgdywgaCwgc2hhcGUpIHtcbiAgICAvLyBQdXQgY2lyY2xlIGluIHRoZSBjZW50ZXIgb2Ygc3F1YXJlXG4gICAgc2hhcGUuY3ggPSB4ICsgdyAvIDI7XG4gICAgc2hhcGUuY3kgPSB5ICsgaCAvIDI7XG4gICAgc2hhcGUuciA9IE1hdGgubWluKHcsIGgpIC8gMjtcbiAgfSxcbiAgZGlhbW9uZDogZnVuY3Rpb24gKHgsIHksIHcsIGgsIHNoYXBlKSB7XG4gICAgc2hhcGUuY3ggPSB4ICsgdyAvIDI7XG4gICAgc2hhcGUuY3kgPSB5ICsgaCAvIDI7XG4gICAgc2hhcGUud2lkdGggPSB3O1xuICAgIHNoYXBlLmhlaWdodCA9IGg7XG4gIH0sXG4gIHBpbjogZnVuY3Rpb24gKHgsIHksIHcsIGgsIHNoYXBlKSB7XG4gICAgc2hhcGUueCA9IHggKyB3IC8gMjtcbiAgICBzaGFwZS55ID0geSArIGggLyAyO1xuICAgIHNoYXBlLndpZHRoID0gdztcbiAgICBzaGFwZS5oZWlnaHQgPSBoO1xuICB9LFxuICBhcnJvdzogZnVuY3Rpb24gKHgsIHksIHcsIGgsIHNoYXBlKSB7XG4gICAgc2hhcGUueCA9IHggKyB3IC8gMjtcbiAgICBzaGFwZS55ID0geSArIGggLyAyO1xuICAgIHNoYXBlLndpZHRoID0gdztcbiAgICBzaGFwZS5oZWlnaHQgPSBoO1xuICB9LFxuICB0cmlhbmdsZTogZnVuY3Rpb24gKHgsIHksIHcsIGgsIHNoYXBlKSB7XG4gICAgc2hhcGUuY3ggPSB4ICsgdyAvIDI7XG4gICAgc2hhcGUuY3kgPSB5ICsgaCAvIDI7XG4gICAgc2hhcGUud2lkdGggPSB3O1xuICAgIHNoYXBlLmhlaWdodCA9IGg7XG4gIH1cbn07XG5leHBvcnQgdmFyIHN5bWJvbEJ1aWxkUHJveGllcyA9IHt9O1xuZWFjaChzeW1ib2xDdG9ycywgZnVuY3Rpb24gKEN0b3IsIG5hbWUpIHtcbiAgc3ltYm9sQnVpbGRQcm94aWVzW25hbWVdID0gbmV3IEN0b3IoKTtcbn0pO1xudmFyIFN5bWJvbENseiA9IGdyYXBoaWMuUGF0aC5leHRlbmQoe1xuICB0eXBlOiAnc3ltYm9sJyxcbiAgc2hhcGU6IHtcbiAgICBzeW1ib2xUeXBlOiAnJyxcbiAgICB4OiAwLFxuICAgIHk6IDAsXG4gICAgd2lkdGg6IDAsXG4gICAgaGVpZ2h0OiAwXG4gIH0sXG4gIGNhbGN1bGF0ZVRleHRQb3NpdGlvbjogZnVuY3Rpb24gKG91dCwgY29uZmlnLCByZWN0KSB7XG4gICAgdmFyIHJlcyA9IGNhbGN1bGF0ZVRleHRQb3NpdGlvbihvdXQsIGNvbmZpZywgcmVjdCk7XG4gICAgdmFyIHNoYXBlID0gdGhpcy5zaGFwZTtcblxuICAgIGlmIChzaGFwZSAmJiBzaGFwZS5zeW1ib2xUeXBlID09PSAncGluJyAmJiBjb25maWcucG9zaXRpb24gPT09ICdpbnNpZGUnKSB7XG4gICAgICByZXMueSA9IHJlY3QueSArIHJlY3QuaGVpZ2h0ICogMC40O1xuICAgIH1cblxuICAgIHJldHVybiByZXM7XG4gIH0sXG4gIGJ1aWxkUGF0aDogZnVuY3Rpb24gKGN0eCwgc2hhcGUsIGluQnVuZGxlKSB7XG4gICAgdmFyIHN5bWJvbFR5cGUgPSBzaGFwZS5zeW1ib2xUeXBlO1xuXG4gICAgaWYgKHN5bWJvbFR5cGUgIT09ICdub25lJykge1xuICAgICAgdmFyIHByb3h5U3ltYm9sID0gc3ltYm9sQnVpbGRQcm94aWVzW3N5bWJvbFR5cGVdO1xuXG4gICAgICBpZiAoIXByb3h5U3ltYm9sKSB7XG4gICAgICAgIC8vIERlZmF1bHQgcmVjdFxuICAgICAgICBzeW1ib2xUeXBlID0gJ3JlY3QnO1xuICAgICAgICBwcm94eVN5bWJvbCA9IHN5bWJvbEJ1aWxkUHJveGllc1tzeW1ib2xUeXBlXTtcbiAgICAgIH1cblxuICAgICAgc3ltYm9sU2hhcGVNYWtlcnNbc3ltYm9sVHlwZV0oc2hhcGUueCwgc2hhcGUueSwgc2hhcGUud2lkdGgsIHNoYXBlLmhlaWdodCwgcHJveHlTeW1ib2wuc2hhcGUpO1xuICAgICAgcHJveHlTeW1ib2wuYnVpbGRQYXRoKGN0eCwgcHJveHlTeW1ib2wuc2hhcGUsIGluQnVuZGxlKTtcbiAgICB9XG4gIH1cbn0pOyAvLyBQcm92aWRlIHNldENvbG9yIGhlbHBlciBtZXRob2QgdG8gYXZvaWQgZGV0ZXJtaW5lIGlmIHNldCB0aGUgZmlsbCBvciBzdHJva2Ugb3V0c2lkZVxuXG5mdW5jdGlvbiBzeW1ib2xQYXRoU2V0Q29sb3IoY29sb3IsIGlubmVyQ29sb3IpIHtcbiAgaWYgKHRoaXMudHlwZSAhPT0gJ2ltYWdlJykge1xuICAgIHZhciBzeW1ib2xTdHlsZSA9IHRoaXMuc3R5bGU7XG5cbiAgICBpZiAodGhpcy5fX2lzRW1wdHlCcnVzaCkge1xuICAgICAgc3ltYm9sU3R5bGUuc3Ryb2tlID0gY29sb3I7XG4gICAgICBzeW1ib2xTdHlsZS5maWxsID0gaW5uZXJDb2xvciB8fCAnI2ZmZic7IC8vIFRPRE8gU2FtZSB3aWR0aCB3aXRoIGxpbmVTdHlsZSBpbiBMaW5lVmlld1xuXG4gICAgICBzeW1ib2xTdHlsZS5saW5lV2lkdGggPSAyO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zaGFwZS5zeW1ib2xUeXBlID09PSAnbGluZScpIHtcbiAgICAgIHN5bWJvbFN0eWxlLnN0cm9rZSA9IGNvbG9yO1xuICAgIH0gZWxzZSB7XG4gICAgICBzeW1ib2xTdHlsZS5maWxsID0gY29sb3I7XG4gICAgfVxuXG4gICAgdGhpcy5tYXJrUmVkcmF3KCk7XG4gIH1cbn1cbi8qKlxyXG4gKiBDcmVhdGUgYSBzeW1ib2wgZWxlbWVudCB3aXRoIGdpdmVuIHN5bWJvbCBjb25maWd1cmF0aW9uOiBzaGFwZSwgeCwgeSwgd2lkdGgsIGhlaWdodCwgY29sb3JcclxuICovXG5cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN5bWJvbChzeW1ib2xUeXBlLCB4LCB5LCB3LCBoLCBjb2xvciwgLy8gd2hldGhlciB0byBrZWVwIHRoZSByYXRpbyBvZiB3L2gsXG5rZWVwQXNwZWN0KSB7XG4gIC8vIFRPRE8gU3VwcG9ydCBpbWFnZSBvYmplY3QsIER5bmFtaWNJbWFnZS5cbiAgdmFyIGlzRW1wdHkgPSBzeW1ib2xUeXBlLmluZGV4T2YoJ2VtcHR5JykgPT09IDA7XG5cbiAgaWYgKGlzRW1wdHkpIHtcbiAgICBzeW1ib2xUeXBlID0gc3ltYm9sVHlwZS5zdWJzdHIoNSwgMSkudG9Mb3dlckNhc2UoKSArIHN5bWJvbFR5cGUuc3Vic3RyKDYpO1xuICB9XG5cbiAgdmFyIHN5bWJvbFBhdGg7XG5cbiAgaWYgKHN5bWJvbFR5cGUuaW5kZXhPZignaW1hZ2U6Ly8nKSA9PT0gMCkge1xuICAgIHN5bWJvbFBhdGggPSBncmFwaGljLm1ha2VJbWFnZShzeW1ib2xUeXBlLnNsaWNlKDgpLCBuZXcgQm91bmRpbmdSZWN0KHgsIHksIHcsIGgpLCBrZWVwQXNwZWN0ID8gJ2NlbnRlcicgOiAnY292ZXInKTtcbiAgfSBlbHNlIGlmIChzeW1ib2xUeXBlLmluZGV4T2YoJ3BhdGg6Ly8nKSA9PT0gMCkge1xuICAgIHN5bWJvbFBhdGggPSBncmFwaGljLm1ha2VQYXRoKHN5bWJvbFR5cGUuc2xpY2UoNyksIHt9LCBuZXcgQm91bmRpbmdSZWN0KHgsIHksIHcsIGgpLCBrZWVwQXNwZWN0ID8gJ2NlbnRlcicgOiAnY292ZXInKTtcbiAgfSBlbHNlIHtcbiAgICBzeW1ib2xQYXRoID0gbmV3IFN5bWJvbENseih7XG4gICAgICBzaGFwZToge1xuICAgICAgICBzeW1ib2xUeXBlOiBzeW1ib2xUeXBlLFxuICAgICAgICB4OiB4LFxuICAgICAgICB5OiB5LFxuICAgICAgICB3aWR0aDogdyxcbiAgICAgICAgaGVpZ2h0OiBoXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBzeW1ib2xQYXRoLl9faXNFbXB0eUJydXNoID0gaXNFbXB0eTsgLy8gVE9ETyBTaG91bGQgZGVwcmVjYXRlIHNldENvbG9yXG5cbiAgc3ltYm9sUGF0aC5zZXRDb2xvciA9IHN5bWJvbFBhdGhTZXRDb2xvcjtcblxuICBpZiAoY29sb3IpIHtcbiAgICBzeW1ib2xQYXRoLnNldENvbG9yKGNvbG9yKTtcbiAgfVxuXG4gIHJldHVybiBzeW1ib2xQYXRoO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVN5bWJvbFNpemUoc3ltYm9sU2l6ZSkge1xuICBpZiAoIWlzQXJyYXkoc3ltYm9sU2l6ZSkpIHtcbiAgICBzeW1ib2xTaXplID0gWytzeW1ib2xTaXplLCArc3ltYm9sU2l6ZV07XG4gIH1cblxuICByZXR1cm4gW3N5bWJvbFNpemVbMF0gfHwgMCwgc3ltYm9sU2l6ZVsxXSB8fCAwXTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVTeW1ib2xPZmZzZXQoc3ltYm9sT2Zmc2V0LCBzeW1ib2xTaXplKSB7XG4gIGlmIChzeW1ib2xPZmZzZXQgPT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICghaXNBcnJheShzeW1ib2xPZmZzZXQpKSB7XG4gICAgc3ltYm9sT2Zmc2V0ID0gW3N5bWJvbE9mZnNldCwgc3ltYm9sT2Zmc2V0XTtcbiAgfVxuXG4gIHJldHVybiBbcGFyc2VQZXJjZW50KHN5bWJvbE9mZnNldFswXSwgc3ltYm9sU2l6ZVswXSkgfHwgMCwgcGFyc2VQZXJjZW50KHJldHJpZXZlMihzeW1ib2xPZmZzZXRbMV0sIHN5bWJvbE9mZnNldFswXSksIHN5bWJvbFNpemVbMV0pIHx8IDBdO1xufSIsImZ1bmN0aW9uIGlzU2FmZU51bShudW0pIHtcbiAgICByZXR1cm4gaXNGaW5pdGUobnVtKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVMaW5lYXJHcmFkaWVudChjdHgsIG9iaiwgcmVjdCkge1xuICAgIHZhciB4ID0gb2JqLnggPT0gbnVsbCA/IDAgOiBvYmoueDtcbiAgICB2YXIgeDIgPSBvYmoueDIgPT0gbnVsbCA/IDEgOiBvYmoueDI7XG4gICAgdmFyIHkgPSBvYmoueSA9PSBudWxsID8gMCA6IG9iai55O1xuICAgIHZhciB5MiA9IG9iai55MiA9PSBudWxsID8gMCA6IG9iai55MjtcbiAgICBpZiAoIW9iai5nbG9iYWwpIHtcbiAgICAgICAgeCA9IHggKiByZWN0LndpZHRoICsgcmVjdC54O1xuICAgICAgICB4MiA9IHgyICogcmVjdC53aWR0aCArIHJlY3QueDtcbiAgICAgICAgeSA9IHkgKiByZWN0LmhlaWdodCArIHJlY3QueTtcbiAgICAgICAgeTIgPSB5MiAqIHJlY3QuaGVpZ2h0ICsgcmVjdC55O1xuICAgIH1cbiAgICB4ID0gaXNTYWZlTnVtKHgpID8geCA6IDA7XG4gICAgeDIgPSBpc1NhZmVOdW0oeDIpID8geDIgOiAxO1xuICAgIHkgPSBpc1NhZmVOdW0oeSkgPyB5IDogMDtcbiAgICB5MiA9IGlzU2FmZU51bSh5MikgPyB5MiA6IDA7XG4gICAgdmFyIGNhbnZhc0dyYWRpZW50ID0gY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KHgsIHksIHgyLCB5Mik7XG4gICAgcmV0dXJuIGNhbnZhc0dyYWRpZW50O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJhZGlhbEdyYWRpZW50KGN0eCwgb2JqLCByZWN0KSB7XG4gICAgdmFyIHdpZHRoID0gcmVjdC53aWR0aDtcbiAgICB2YXIgaGVpZ2h0ID0gcmVjdC5oZWlnaHQ7XG4gICAgdmFyIG1pbiA9IE1hdGgubWluKHdpZHRoLCBoZWlnaHQpO1xuICAgIHZhciB4ID0gb2JqLnggPT0gbnVsbCA/IDAuNSA6IG9iai54O1xuICAgIHZhciB5ID0gb2JqLnkgPT0gbnVsbCA/IDAuNSA6IG9iai55O1xuICAgIHZhciByID0gb2JqLnIgPT0gbnVsbCA/IDAuNSA6IG9iai5yO1xuICAgIGlmICghb2JqLmdsb2JhbCkge1xuICAgICAgICB4ID0geCAqIHdpZHRoICsgcmVjdC54O1xuICAgICAgICB5ID0geSAqIGhlaWdodCArIHJlY3QueTtcbiAgICAgICAgciA9IHIgKiBtaW47XG4gICAgfVxuICAgIHggPSBpc1NhZmVOdW0oeCkgPyB4IDogMC41O1xuICAgIHkgPSBpc1NhZmVOdW0oeSkgPyB5IDogMC41O1xuICAgIHIgPSByID49IDAgJiYgaXNTYWZlTnVtKHIpID8gciA6IDAuNTtcbiAgICB2YXIgY2FudmFzR3JhZGllbnQgPSBjdHguY3JlYXRlUmFkaWFsR3JhZGllbnQoeCwgeSwgMCwgeCwgeSwgcik7XG4gICAgcmV0dXJuIGNhbnZhc0dyYWRpZW50O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldENhbnZhc0dyYWRpZW50KGN0eCwgb2JqLCByZWN0KSB7XG4gICAgdmFyIGNhbnZhc0dyYWRpZW50ID0gb2JqLnR5cGUgPT09ICdyYWRpYWwnXG4gICAgICAgID8gY3JlYXRlUmFkaWFsR3JhZGllbnQoY3R4LCBvYmosIHJlY3QpXG4gICAgICAgIDogY3JlYXRlTGluZWFyR3JhZGllbnQoY3R4LCBvYmosIHJlY3QpO1xuICAgIHZhciBjb2xvclN0b3BzID0gb2JqLmNvbG9yU3RvcHM7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2xvclN0b3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNhbnZhc0dyYWRpZW50LmFkZENvbG9yU3RvcChjb2xvclN0b3BzW2ldLm9mZnNldCwgY29sb3JTdG9wc1tpXS5jb2xvcik7XG4gICAgfVxuICAgIHJldHVybiBjYW52YXNHcmFkaWVudDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0NsaXBQYXRoQ2hhbmdlZChjbGlwUGF0aHMsIHByZXZDbGlwUGF0aHMpIHtcbiAgICBpZiAoY2xpcFBhdGhzID09PSBwcmV2Q2xpcFBhdGhzIHx8ICghY2xpcFBhdGhzICYmICFwcmV2Q2xpcFBhdGhzKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICghY2xpcFBhdGhzIHx8ICFwcmV2Q2xpcFBhdGhzIHx8IChjbGlwUGF0aHMubGVuZ3RoICE9PSBwcmV2Q2xpcFBhdGhzLmxlbmd0aCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2xpcFBhdGhzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChjbGlwUGF0aHNbaV0gIT09IHByZXZDbGlwUGF0aHNbaV0pIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHBhcnNlSW50MTAodmFsKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHZhbCwgMTApO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFNpemUocm9vdCwgd2hJZHgsIG9wdHMpIHtcbiAgICB2YXIgd2ggPSBbJ3dpZHRoJywgJ2hlaWdodCddW3doSWR4XTtcbiAgICB2YXIgY3doID0gWydjbGllbnRXaWR0aCcsICdjbGllbnRIZWlnaHQnXVt3aElkeF07XG4gICAgdmFyIHBsdCA9IFsncGFkZGluZ0xlZnQnLCAncGFkZGluZ1RvcCddW3doSWR4XTtcbiAgICB2YXIgcHJiID0gWydwYWRkaW5nUmlnaHQnLCAncGFkZGluZ0JvdHRvbSddW3doSWR4XTtcbiAgICBpZiAob3B0c1t3aF0gIT0gbnVsbCAmJiBvcHRzW3doXSAhPT0gJ2F1dG8nKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUZsb2F0KG9wdHNbd2hdKTtcbiAgICB9XG4gICAgdmFyIHN0bCA9IGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUocm9vdCk7XG4gICAgcmV0dXJuICgocm9vdFtjd2hdIHx8IHBhcnNlSW50MTAoc3RsW3doXSkgfHwgcGFyc2VJbnQxMChyb290LnN0eWxlW3doXSkpXG4gICAgICAgIC0gKHBhcnNlSW50MTAoc3RsW3BsdF0pIHx8IDApXG4gICAgICAgIC0gKHBhcnNlSW50MTAoc3RsW3ByYl0pIHx8IDApKSB8IDA7XG59XG4iLCJpbXBvcnQgeyBpc0FycmF5LCBpc051bWJlciwgbWFwIH0gZnJvbSAnLi4vY29yZS91dGlsLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVMaW5lRGFzaChsaW5lVHlwZSwgbGluZVdpZHRoKSB7XG4gICAgaWYgKCFsaW5lVHlwZSB8fCBsaW5lVHlwZSA9PT0gJ3NvbGlkJyB8fCAhKGxpbmVXaWR0aCA+IDApKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gbGluZVR5cGUgPT09ICdkYXNoZWQnXG4gICAgICAgID8gWzQgKiBsaW5lV2lkdGgsIDIgKiBsaW5lV2lkdGhdXG4gICAgICAgIDogbGluZVR5cGUgPT09ICdkb3R0ZWQnXG4gICAgICAgICAgICA/IFtsaW5lV2lkdGhdXG4gICAgICAgICAgICA6IGlzTnVtYmVyKGxpbmVUeXBlKVxuICAgICAgICAgICAgICAgID8gW2xpbmVUeXBlXSA6IGlzQXJyYXkobGluZVR5cGUpID8gbGluZVR5cGUgOiBudWxsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldExpbmVEYXNoKGVsKSB7XG4gICAgdmFyIHN0eWxlID0gZWwuc3R5bGU7XG4gICAgdmFyIGxpbmVEYXNoID0gc3R5bGUubGluZURhc2ggJiYgc3R5bGUubGluZVdpZHRoID4gMCAmJiBub3JtYWxpemVMaW5lRGFzaChzdHlsZS5saW5lRGFzaCwgc3R5bGUubGluZVdpZHRoKTtcbiAgICB2YXIgbGluZURhc2hPZmZzZXQgPSBzdHlsZS5saW5lRGFzaE9mZnNldDtcbiAgICBpZiAobGluZURhc2gpIHtcbiAgICAgICAgdmFyIGxpbmVTY2FsZV8xID0gKHN0eWxlLnN0cm9rZU5vU2NhbGUgJiYgZWwuZ2V0TGluZVNjYWxlKSA/IGVsLmdldExpbmVTY2FsZSgpIDogMTtcbiAgICAgICAgaWYgKGxpbmVTY2FsZV8xICYmIGxpbmVTY2FsZV8xICE9PSAxKSB7XG4gICAgICAgICAgICBsaW5lRGFzaCA9IG1hcChsaW5lRGFzaCwgZnVuY3Rpb24gKHJhd1ZhbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByYXdWYWwgLyBsaW5lU2NhbGVfMTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGluZURhc2hPZmZzZXQgLz0gbGluZVNjYWxlXzE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lRGFzaCwgbGluZURhc2hPZmZzZXRdO1xufVxuIiwiaW1wb3J0IHsgREVGQVVMVF9DT01NT05fU1RZTEUgfSBmcm9tICcuLi9ncmFwaGljL0Rpc3BsYXlhYmxlLmpzJztcbmltcG9ydCBQYXRoUHJveHkgZnJvbSAnLi4vY29yZS9QYXRoUHJveHkuanMnO1xuaW1wb3J0IHsgY3JlYXRlT3JVcGRhdGVJbWFnZSwgaXNJbWFnZVJlYWR5IH0gZnJvbSAnLi4vZ3JhcGhpYy9oZWxwZXIvaW1hZ2UuanMnO1xuaW1wb3J0IHsgZ2V0Q2FudmFzR3JhZGllbnQsIGlzQ2xpcFBhdGhDaGFuZ2VkIH0gZnJvbSAnLi9oZWxwZXIuanMnO1xuaW1wb3J0IFBhdGggZnJvbSAnLi4vZ3JhcGhpYy9QYXRoLmpzJztcbmltcG9ydCBaUkltYWdlIGZyb20gJy4uL2dyYXBoaWMvSW1hZ2UuanMnO1xuaW1wb3J0IFRTcGFuIGZyb20gJy4uL2dyYXBoaWMvVFNwYW4uanMnO1xuaW1wb3J0IHsgUkFESUFOX1RPX0RFR1JFRSB9IGZyb20gJy4uL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgeyBnZXRMaW5lRGFzaCB9IGZyb20gJy4vZGFzaFN0eWxlLmpzJztcbmltcG9ydCB7IFJFRFJBV19CSVQsIFNIQVBFX0NIQU5HRURfQklUIH0gZnJvbSAnLi4vZ3JhcGhpYy9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgREVGQVVMVF9GT05UIH0gZnJvbSAnLi4vY29yZS9wbGF0Zm9ybS5qcyc7XG52YXIgcGF0aFByb3h5Rm9yRHJhdyA9IG5ldyBQYXRoUHJveHkodHJ1ZSk7XG5mdW5jdGlvbiBzdHlsZUhhc1N0cm9rZShzdHlsZSkge1xuICAgIHZhciBzdHJva2UgPSBzdHlsZS5zdHJva2U7XG4gICAgcmV0dXJuICEoc3Ryb2tlID09IG51bGwgfHwgc3Ryb2tlID09PSAnbm9uZScgfHwgIShzdHlsZS5saW5lV2lkdGggPiAwKSk7XG59XG5mdW5jdGlvbiBpc1ZhbGlkU3Ryb2tlRmlsbFN0eWxlKHN0cm9rZU9yRmlsbCkge1xuICAgIHJldHVybiB0eXBlb2Ygc3Ryb2tlT3JGaWxsID09PSAnc3RyaW5nJyAmJiBzdHJva2VPckZpbGwgIT09ICdub25lJztcbn1cbmZ1bmN0aW9uIHN0eWxlSGFzRmlsbChzdHlsZSkge1xuICAgIHZhciBmaWxsID0gc3R5bGUuZmlsbDtcbiAgICByZXR1cm4gZmlsbCAhPSBudWxsICYmIGZpbGwgIT09ICdub25lJztcbn1cbmZ1bmN0aW9uIGRvRmlsbFBhdGgoY3R4LCBzdHlsZSkge1xuICAgIGlmIChzdHlsZS5maWxsT3BhY2l0eSAhPSBudWxsICYmIHN0eWxlLmZpbGxPcGFjaXR5ICE9PSAxKSB7XG4gICAgICAgIHZhciBvcmlnaW5hbEdsb2JhbEFscGhhID0gY3R4Lmdsb2JhbEFscGhhO1xuICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBzdHlsZS5maWxsT3BhY2l0eSAqIHN0eWxlLm9wYWNpdHk7XG4gICAgICAgIGN0eC5maWxsKCk7XG4gICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IG9yaWdpbmFsR2xvYmFsQWxwaGE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjdHguZmlsbCgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRvU3Ryb2tlUGF0aChjdHgsIHN0eWxlKSB7XG4gICAgaWYgKHN0eWxlLnN0cm9rZU9wYWNpdHkgIT0gbnVsbCAmJiBzdHlsZS5zdHJva2VPcGFjaXR5ICE9PSAxKSB7XG4gICAgICAgIHZhciBvcmlnaW5hbEdsb2JhbEFscGhhID0gY3R4Lmdsb2JhbEFscGhhO1xuICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBzdHlsZS5zdHJva2VPcGFjaXR5ICogc3R5bGUub3BhY2l0eTtcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBvcmlnaW5hbEdsb2JhbEFscGhhO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDYW52YXNQYXR0ZXJuKGN0eCwgcGF0dGVybiwgZWwpIHtcbiAgICB2YXIgaW1hZ2UgPSBjcmVhdGVPclVwZGF0ZUltYWdlKHBhdHRlcm4uaW1hZ2UsIHBhdHRlcm4uX19pbWFnZSwgZWwpO1xuICAgIGlmIChpc0ltYWdlUmVhZHkoaW1hZ2UpKSB7XG4gICAgICAgIHZhciBjYW52YXNQYXR0ZXJuID0gY3R4LmNyZWF0ZVBhdHRlcm4oaW1hZ2UsIHBhdHRlcm4ucmVwZWF0IHx8ICdyZXBlYXQnKTtcbiAgICAgICAgaWYgKHR5cGVvZiBET01NYXRyaXggPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICYmIGNhbnZhc1BhdHRlcm5cbiAgICAgICAgICAgICYmIGNhbnZhc1BhdHRlcm4uc2V0VHJhbnNmb3JtKSB7XG4gICAgICAgICAgICB2YXIgbWF0cml4ID0gbmV3IERPTU1hdHJpeCgpO1xuICAgICAgICAgICAgbWF0cml4LnRyYW5zbGF0ZVNlbGYoKHBhdHRlcm4ueCB8fCAwKSwgKHBhdHRlcm4ueSB8fCAwKSk7XG4gICAgICAgICAgICBtYXRyaXgucm90YXRlU2VsZigwLCAwLCAocGF0dGVybi5yb3RhdGlvbiB8fCAwKSAqIFJBRElBTl9UT19ERUdSRUUpO1xuICAgICAgICAgICAgbWF0cml4LnNjYWxlU2VsZigocGF0dGVybi5zY2FsZVggfHwgMSksIChwYXR0ZXJuLnNjYWxlWSB8fCAxKSk7XG4gICAgICAgICAgICBjYW52YXNQYXR0ZXJuLnNldFRyYW5zZm9ybShtYXRyaXgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYW52YXNQYXR0ZXJuO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGJydXNoUGF0aChjdHgsIGVsLCBzdHlsZSwgaW5CYXRjaCkge1xuICAgIHZhciBfYTtcbiAgICB2YXIgaGFzU3Ryb2tlID0gc3R5bGVIYXNTdHJva2Uoc3R5bGUpO1xuICAgIHZhciBoYXNGaWxsID0gc3R5bGVIYXNGaWxsKHN0eWxlKTtcbiAgICB2YXIgc3Ryb2tlUGVyY2VudCA9IHN0eWxlLnN0cm9rZVBlcmNlbnQ7XG4gICAgdmFyIHN0cm9rZVBhcnQgPSBzdHJva2VQZXJjZW50IDwgMTtcbiAgICB2YXIgZmlyc3REcmF3ID0gIWVsLnBhdGg7XG4gICAgaWYgKCghZWwuc2lsZW50IHx8IHN0cm9rZVBhcnQpICYmIGZpcnN0RHJhdykge1xuICAgICAgICBlbC5jcmVhdGVQYXRoUHJveHkoKTtcbiAgICB9XG4gICAgdmFyIHBhdGggPSBlbC5wYXRoIHx8IHBhdGhQcm94eUZvckRyYXc7XG4gICAgdmFyIGRpcnR5RmxhZyA9IGVsLl9fZGlydHk7XG4gICAgaWYgKCFpbkJhdGNoKSB7XG4gICAgICAgIHZhciBmaWxsID0gc3R5bGUuZmlsbDtcbiAgICAgICAgdmFyIHN0cm9rZSA9IHN0eWxlLnN0cm9rZTtcbiAgICAgICAgdmFyIGhhc0ZpbGxHcmFkaWVudCA9IGhhc0ZpbGwgJiYgISFmaWxsLmNvbG9yU3RvcHM7XG4gICAgICAgIHZhciBoYXNTdHJva2VHcmFkaWVudCA9IGhhc1N0cm9rZSAmJiAhIXN0cm9rZS5jb2xvclN0b3BzO1xuICAgICAgICB2YXIgaGFzRmlsbFBhdHRlcm4gPSBoYXNGaWxsICYmICEhZmlsbC5pbWFnZTtcbiAgICAgICAgdmFyIGhhc1N0cm9rZVBhdHRlcm4gPSBoYXNTdHJva2UgJiYgISFzdHJva2UuaW1hZ2U7XG4gICAgICAgIHZhciBmaWxsR3JhZGllbnQgPSB2b2lkIDA7XG4gICAgICAgIHZhciBzdHJva2VHcmFkaWVudCA9IHZvaWQgMDtcbiAgICAgICAgdmFyIGZpbGxQYXR0ZXJuID0gdm9pZCAwO1xuICAgICAgICB2YXIgc3Ryb2tlUGF0dGVybiA9IHZvaWQgMDtcbiAgICAgICAgdmFyIHJlY3QgPSB2b2lkIDA7XG4gICAgICAgIGlmIChoYXNGaWxsR3JhZGllbnQgfHwgaGFzU3Ryb2tlR3JhZGllbnQpIHtcbiAgICAgICAgICAgIHJlY3QgPSBlbC5nZXRCb3VuZGluZ1JlY3QoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzRmlsbEdyYWRpZW50KSB7XG4gICAgICAgICAgICBmaWxsR3JhZGllbnQgPSBkaXJ0eUZsYWdcbiAgICAgICAgICAgICAgICA/IGdldENhbnZhc0dyYWRpZW50KGN0eCwgZmlsbCwgcmVjdClcbiAgICAgICAgICAgICAgICA6IGVsLl9fY2FudmFzRmlsbEdyYWRpZW50O1xuICAgICAgICAgICAgZWwuX19jYW52YXNGaWxsR3JhZGllbnQgPSBmaWxsR3JhZGllbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc1N0cm9rZUdyYWRpZW50KSB7XG4gICAgICAgICAgICBzdHJva2VHcmFkaWVudCA9IGRpcnR5RmxhZ1xuICAgICAgICAgICAgICAgID8gZ2V0Q2FudmFzR3JhZGllbnQoY3R4LCBzdHJva2UsIHJlY3QpXG4gICAgICAgICAgICAgICAgOiBlbC5fX2NhbnZhc1N0cm9rZUdyYWRpZW50O1xuICAgICAgICAgICAgZWwuX19jYW52YXNTdHJva2VHcmFkaWVudCA9IHN0cm9rZUdyYWRpZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNGaWxsUGF0dGVybikge1xuICAgICAgICAgICAgZmlsbFBhdHRlcm4gPSAoZGlydHlGbGFnIHx8ICFlbC5fX2NhbnZhc0ZpbGxQYXR0ZXJuKVxuICAgICAgICAgICAgICAgID8gY3JlYXRlQ2FudmFzUGF0dGVybihjdHgsIGZpbGwsIGVsKVxuICAgICAgICAgICAgICAgIDogZWwuX19jYW52YXNGaWxsUGF0dGVybjtcbiAgICAgICAgICAgIGVsLl9fY2FudmFzRmlsbFBhdHRlcm4gPSBmaWxsUGF0dGVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzU3Ryb2tlUGF0dGVybikge1xuICAgICAgICAgICAgc3Ryb2tlUGF0dGVybiA9IChkaXJ0eUZsYWcgfHwgIWVsLl9fY2FudmFzU3Ryb2tlUGF0dGVybilcbiAgICAgICAgICAgICAgICA/IGNyZWF0ZUNhbnZhc1BhdHRlcm4oY3R4LCBzdHJva2UsIGVsKVxuICAgICAgICAgICAgICAgIDogZWwuX19jYW52YXNTdHJva2VQYXR0ZXJuO1xuICAgICAgICAgICAgZWwuX19jYW52YXNTdHJva2VQYXR0ZXJuID0gZmlsbFBhdHRlcm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc0ZpbGxHcmFkaWVudCkge1xuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGZpbGxHcmFkaWVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChoYXNGaWxsUGF0dGVybikge1xuICAgICAgICAgICAgaWYgKGZpbGxQYXR0ZXJuKSB7XG4gICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGZpbGxQYXR0ZXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaGFzRmlsbCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNTdHJva2VHcmFkaWVudCkge1xuICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gc3Ryb2tlR3JhZGllbnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaGFzU3Ryb2tlUGF0dGVybikge1xuICAgICAgICAgICAgaWYgKHN0cm9rZVBhdHRlcm4pIHtcbiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBzdHJva2VQYXR0ZXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaGFzU3Ryb2tlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIHNjYWxlID0gZWwuZ2V0R2xvYmFsU2NhbGUoKTtcbiAgICBwYXRoLnNldFNjYWxlKHNjYWxlWzBdLCBzY2FsZVsxXSwgZWwuc2VnbWVudElnbm9yZVRocmVzaG9sZCk7XG4gICAgdmFyIGxpbmVEYXNoO1xuICAgIHZhciBsaW5lRGFzaE9mZnNldDtcbiAgICBpZiAoY3R4LnNldExpbmVEYXNoICYmIHN0eWxlLmxpbmVEYXNoKSB7XG4gICAgICAgIF9hID0gZ2V0TGluZURhc2goZWwpLCBsaW5lRGFzaCA9IF9hWzBdLCBsaW5lRGFzaE9mZnNldCA9IF9hWzFdO1xuICAgIH1cbiAgICB2YXIgbmVlZHNSZWJ1aWxkID0gdHJ1ZTtcbiAgICBpZiAoZmlyc3REcmF3IHx8IChkaXJ0eUZsYWcgJiBTSEFQRV9DSEFOR0VEX0JJVCkpIHtcbiAgICAgICAgcGF0aC5zZXREUFIoY3R4LmRwcik7XG4gICAgICAgIGlmIChzdHJva2VQYXJ0KSB7XG4gICAgICAgICAgICBwYXRoLnNldENvbnRleHQobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXRoLnNldENvbnRleHQoY3R4KTtcbiAgICAgICAgICAgIG5lZWRzUmVidWlsZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHBhdGgucmVzZXQoKTtcbiAgICAgICAgZWwuYnVpbGRQYXRoKHBhdGgsIGVsLnNoYXBlLCBpbkJhdGNoKTtcbiAgICAgICAgcGF0aC50b1N0YXRpYygpO1xuICAgICAgICBlbC5wYXRoVXBkYXRlZCgpO1xuICAgIH1cbiAgICBpZiAobmVlZHNSZWJ1aWxkKSB7XG4gICAgICAgIHBhdGgucmVidWlsZFBhdGgoY3R4LCBzdHJva2VQYXJ0ID8gc3Ryb2tlUGVyY2VudCA6IDEpO1xuICAgIH1cbiAgICBpZiAobGluZURhc2gpIHtcbiAgICAgICAgY3R4LnNldExpbmVEYXNoKGxpbmVEYXNoKTtcbiAgICAgICAgY3R4LmxpbmVEYXNoT2Zmc2V0ID0gbGluZURhc2hPZmZzZXQ7XG4gICAgfVxuICAgIGlmICghaW5CYXRjaCkge1xuICAgICAgICBpZiAoc3R5bGUuc3Ryb2tlRmlyc3QpIHtcbiAgICAgICAgICAgIGlmIChoYXNTdHJva2UpIHtcbiAgICAgICAgICAgICAgICBkb1N0cm9rZVBhdGgoY3R4LCBzdHlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGFzRmlsbCkge1xuICAgICAgICAgICAgICAgIGRvRmlsbFBhdGgoY3R4LCBzdHlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoaGFzRmlsbCkge1xuICAgICAgICAgICAgICAgIGRvRmlsbFBhdGgoY3R4LCBzdHlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGFzU3Ryb2tlKSB7XG4gICAgICAgICAgICAgICAgZG9TdHJva2VQYXRoKGN0eCwgc3R5bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChsaW5lRGFzaCkge1xuICAgICAgICBjdHguc2V0TGluZURhc2goW10pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGJydXNoSW1hZ2UoY3R4LCBlbCwgc3R5bGUpIHtcbiAgICB2YXIgaW1hZ2UgPSBlbC5fX2ltYWdlID0gY3JlYXRlT3JVcGRhdGVJbWFnZShzdHlsZS5pbWFnZSwgZWwuX19pbWFnZSwgZWwsIGVsLm9ubG9hZCk7XG4gICAgaWYgKCFpbWFnZSB8fCAhaXNJbWFnZVJlYWR5KGltYWdlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB4ID0gc3R5bGUueCB8fCAwO1xuICAgIHZhciB5ID0gc3R5bGUueSB8fCAwO1xuICAgIHZhciB3aWR0aCA9IGVsLmdldFdpZHRoKCk7XG4gICAgdmFyIGhlaWdodCA9IGVsLmdldEhlaWdodCgpO1xuICAgIHZhciBhc3BlY3QgPSBpbWFnZS53aWR0aCAvIGltYWdlLmhlaWdodDtcbiAgICBpZiAod2lkdGggPT0gbnVsbCAmJiBoZWlnaHQgIT0gbnVsbCkge1xuICAgICAgICB3aWR0aCA9IGhlaWdodCAqIGFzcGVjdDtcbiAgICB9XG4gICAgZWxzZSBpZiAoaGVpZ2h0ID09IG51bGwgJiYgd2lkdGggIT0gbnVsbCkge1xuICAgICAgICBoZWlnaHQgPSB3aWR0aCAvIGFzcGVjdDtcbiAgICB9XG4gICAgZWxzZSBpZiAod2lkdGggPT0gbnVsbCAmJiBoZWlnaHQgPT0gbnVsbCkge1xuICAgICAgICB3aWR0aCA9IGltYWdlLndpZHRoO1xuICAgICAgICBoZWlnaHQgPSBpbWFnZS5oZWlnaHQ7XG4gICAgfVxuICAgIGlmIChzdHlsZS5zV2lkdGggJiYgc3R5bGUuc0hlaWdodCkge1xuICAgICAgICB2YXIgc3ggPSBzdHlsZS5zeCB8fCAwO1xuICAgICAgICB2YXIgc3kgPSBzdHlsZS5zeSB8fCAwO1xuICAgICAgICBjdHguZHJhd0ltYWdlKGltYWdlLCBzeCwgc3ksIHN0eWxlLnNXaWR0aCwgc3R5bGUuc0hlaWdodCwgeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHN0eWxlLnN4ICYmIHN0eWxlLnN5KSB7XG4gICAgICAgIHZhciBzeCA9IHN0eWxlLnN4O1xuICAgICAgICB2YXIgc3kgPSBzdHlsZS5zeTtcbiAgICAgICAgdmFyIHNXaWR0aCA9IHdpZHRoIC0gc3g7XG4gICAgICAgIHZhciBzSGVpZ2h0ID0gaGVpZ2h0IC0gc3k7XG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1hZ2UsIHN4LCBzeSwgc1dpZHRoLCBzSGVpZ2h0LCB4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1hZ2UsIHgsIHksIHdpZHRoLCBoZWlnaHQpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGJydXNoVGV4dChjdHgsIGVsLCBzdHlsZSkge1xuICAgIHZhciBfYTtcbiAgICB2YXIgdGV4dCA9IHN0eWxlLnRleHQ7XG4gICAgdGV4dCAhPSBudWxsICYmICh0ZXh0ICs9ICcnKTtcbiAgICBpZiAodGV4dCkge1xuICAgICAgICBjdHguZm9udCA9IHN0eWxlLmZvbnQgfHwgREVGQVVMVF9GT05UO1xuICAgICAgICBjdHgudGV4dEFsaWduID0gc3R5bGUudGV4dEFsaWduO1xuICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gc3R5bGUudGV4dEJhc2VsaW5lO1xuICAgICAgICB2YXIgbGluZURhc2ggPSB2b2lkIDA7XG4gICAgICAgIHZhciBsaW5lRGFzaE9mZnNldCA9IHZvaWQgMDtcbiAgICAgICAgaWYgKGN0eC5zZXRMaW5lRGFzaCAmJiBzdHlsZS5saW5lRGFzaCkge1xuICAgICAgICAgICAgX2EgPSBnZXRMaW5lRGFzaChlbCksIGxpbmVEYXNoID0gX2FbMF0sIGxpbmVEYXNoT2Zmc2V0ID0gX2FbMV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxpbmVEYXNoKSB7XG4gICAgICAgICAgICBjdHguc2V0TGluZURhc2gobGluZURhc2gpO1xuICAgICAgICAgICAgY3R4LmxpbmVEYXNoT2Zmc2V0ID0gbGluZURhc2hPZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0eWxlLnN0cm9rZUZpcnN0KSB7XG4gICAgICAgICAgICBpZiAoc3R5bGVIYXNTdHJva2Uoc3R5bGUpKSB7XG4gICAgICAgICAgICAgICAgY3R4LnN0cm9rZVRleHQodGV4dCwgc3R5bGUueCwgc3R5bGUueSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3R5bGVIYXNGaWxsKHN0eWxlKSkge1xuICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCh0ZXh0LCBzdHlsZS54LCBzdHlsZS55KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChzdHlsZUhhc0ZpbGwoc3R5bGUpKSB7XG4gICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KHRleHQsIHN0eWxlLngsIHN0eWxlLnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0eWxlSGFzU3Ryb2tlKHN0eWxlKSkge1xuICAgICAgICAgICAgICAgIGN0eC5zdHJva2VUZXh0KHRleHQsIHN0eWxlLngsIHN0eWxlLnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChsaW5lRGFzaCkge1xuICAgICAgICAgICAgY3R4LnNldExpbmVEYXNoKFtdKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbnZhciBTSEFET1dfTlVNQkVSX1BST1BTID0gWydzaGFkb3dCbHVyJywgJ3NoYWRvd09mZnNldFgnLCAnc2hhZG93T2Zmc2V0WSddO1xudmFyIFNUUk9LRV9QUk9QUyA9IFtcbiAgICBbJ2xpbmVDYXAnLCAnYnV0dCddLCBbJ2xpbmVKb2luJywgJ21pdGVyJ10sIFsnbWl0ZXJMaW1pdCcsIDEwXVxuXTtcbmZ1bmN0aW9uIGJpbmRDb21tb25Qcm9wcyhjdHgsIHN0eWxlLCBwcmV2U3R5bGUsIGZvcmNlU2V0QWxsLCBzY29wZSkge1xuICAgIHZhciBzdHlsZUNoYW5nZWQgPSBmYWxzZTtcbiAgICBpZiAoIWZvcmNlU2V0QWxsKSB7XG4gICAgICAgIHByZXZTdHlsZSA9IHByZXZTdHlsZSB8fCB7fTtcbiAgICAgICAgaWYgKHN0eWxlID09PSBwcmV2U3R5bGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoZm9yY2VTZXRBbGwgfHwgc3R5bGUub3BhY2l0eSAhPT0gcHJldlN0eWxlLm9wYWNpdHkpIHtcbiAgICAgICAgZmx1c2hQYXRoRHJhd24oY3R4LCBzY29wZSk7XG4gICAgICAgIHN0eWxlQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgIHZhciBvcGFjaXR5ID0gTWF0aC5tYXgoTWF0aC5taW4oc3R5bGUub3BhY2l0eSwgMSksIDApO1xuICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBpc05hTihvcGFjaXR5KSA/IERFRkFVTFRfQ09NTU9OX1NUWUxFLm9wYWNpdHkgOiBvcGFjaXR5O1xuICAgIH1cbiAgICBpZiAoZm9yY2VTZXRBbGwgfHwgc3R5bGUuYmxlbmQgIT09IHByZXZTdHlsZS5ibGVuZCkge1xuICAgICAgICBpZiAoIXN0eWxlQ2hhbmdlZCkge1xuICAgICAgICAgICAgZmx1c2hQYXRoRHJhd24oY3R4LCBzY29wZSk7XG4gICAgICAgICAgICBzdHlsZUNoYW5nZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBzdHlsZS5ibGVuZCB8fCBERUZBVUxUX0NPTU1PTl9TVFlMRS5ibGVuZDtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBTSEFET1dfTlVNQkVSX1BST1BTLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBwcm9wTmFtZSA9IFNIQURPV19OVU1CRVJfUFJPUFNbaV07XG4gICAgICAgIGlmIChmb3JjZVNldEFsbCB8fCBzdHlsZVtwcm9wTmFtZV0gIT09IHByZXZTdHlsZVtwcm9wTmFtZV0pIHtcbiAgICAgICAgICAgIGlmICghc3R5bGVDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgZmx1c2hQYXRoRHJhd24oY3R4LCBzY29wZSk7XG4gICAgICAgICAgICAgICAgc3R5bGVDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN0eFtwcm9wTmFtZV0gPSBjdHguZHByICogKHN0eWxlW3Byb3BOYW1lXSB8fCAwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoZm9yY2VTZXRBbGwgfHwgc3R5bGUuc2hhZG93Q29sb3IgIT09IHByZXZTdHlsZS5zaGFkb3dDb2xvcikge1xuICAgICAgICBpZiAoIXN0eWxlQ2hhbmdlZCkge1xuICAgICAgICAgICAgZmx1c2hQYXRoRHJhd24oY3R4LCBzY29wZSk7XG4gICAgICAgICAgICBzdHlsZUNoYW5nZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5zaGFkb3dDb2xvciA9IHN0eWxlLnNoYWRvd0NvbG9yIHx8IERFRkFVTFRfQ09NTU9OX1NUWUxFLnNoYWRvd0NvbG9yO1xuICAgIH1cbiAgICByZXR1cm4gc3R5bGVDaGFuZ2VkO1xufVxuZnVuY3Rpb24gYmluZFBhdGhBbmRUZXh0Q29tbW9uU3R5bGUoY3R4LCBlbCwgcHJldkVsLCBmb3JjZVNldEFsbCwgc2NvcGUpIHtcbiAgICB2YXIgc3R5bGUgPSBnZXRTdHlsZShlbCwgc2NvcGUuaW5Ib3Zlcik7XG4gICAgdmFyIHByZXZTdHlsZSA9IGZvcmNlU2V0QWxsXG4gICAgICAgID8gbnVsbFxuICAgICAgICA6IChwcmV2RWwgJiYgZ2V0U3R5bGUocHJldkVsLCBzY29wZS5pbkhvdmVyKSB8fCB7fSk7XG4gICAgaWYgKHN0eWxlID09PSBwcmV2U3R5bGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgc3R5bGVDaGFuZ2VkID0gYmluZENvbW1vblByb3BzKGN0eCwgc3R5bGUsIHByZXZTdHlsZSwgZm9yY2VTZXRBbGwsIHNjb3BlKTtcbiAgICBpZiAoZm9yY2VTZXRBbGwgfHwgc3R5bGUuZmlsbCAhPT0gcHJldlN0eWxlLmZpbGwpIHtcbiAgICAgICAgaWYgKCFzdHlsZUNoYW5nZWQpIHtcbiAgICAgICAgICAgIGZsdXNoUGF0aERyYXduKGN0eCwgc2NvcGUpO1xuICAgICAgICAgICAgc3R5bGVDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpc1ZhbGlkU3Ryb2tlRmlsbFN0eWxlKHN0eWxlLmZpbGwpICYmIChjdHguZmlsbFN0eWxlID0gc3R5bGUuZmlsbCk7XG4gICAgfVxuICAgIGlmIChmb3JjZVNldEFsbCB8fCBzdHlsZS5zdHJva2UgIT09IHByZXZTdHlsZS5zdHJva2UpIHtcbiAgICAgICAgaWYgKCFzdHlsZUNoYW5nZWQpIHtcbiAgICAgICAgICAgIGZsdXNoUGF0aERyYXduKGN0eCwgc2NvcGUpO1xuICAgICAgICAgICAgc3R5bGVDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpc1ZhbGlkU3Ryb2tlRmlsbFN0eWxlKHN0eWxlLnN0cm9rZSkgJiYgKGN0eC5zdHJva2VTdHlsZSA9IHN0eWxlLnN0cm9rZSk7XG4gICAgfVxuICAgIGlmIChmb3JjZVNldEFsbCB8fCBzdHlsZS5vcGFjaXR5ICE9PSBwcmV2U3R5bGUub3BhY2l0eSkge1xuICAgICAgICBpZiAoIXN0eWxlQ2hhbmdlZCkge1xuICAgICAgICAgICAgZmx1c2hQYXRoRHJhd24oY3R4LCBzY29wZSk7XG4gICAgICAgICAgICBzdHlsZUNoYW5nZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IHN0eWxlLm9wYWNpdHkgPT0gbnVsbCA/IDEgOiBzdHlsZS5vcGFjaXR5O1xuICAgIH1cbiAgICBpZiAoZWwuaGFzU3Ryb2tlKCkpIHtcbiAgICAgICAgdmFyIGxpbmVXaWR0aCA9IHN0eWxlLmxpbmVXaWR0aDtcbiAgICAgICAgdmFyIG5ld0xpbmVXaWR0aCA9IGxpbmVXaWR0aCAvICgoc3R5bGUuc3Ryb2tlTm9TY2FsZSAmJiBlbC5nZXRMaW5lU2NhbGUpID8gZWwuZ2V0TGluZVNjYWxlKCkgOiAxKTtcbiAgICAgICAgaWYgKGN0eC5saW5lV2lkdGggIT09IG5ld0xpbmVXaWR0aCkge1xuICAgICAgICAgICAgaWYgKCFzdHlsZUNoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICBmbHVzaFBhdGhEcmF3bihjdHgsIHNjb3BlKTtcbiAgICAgICAgICAgICAgICBzdHlsZUNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IG5ld0xpbmVXaWR0aDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IFNUUk9LRV9QUk9QUy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcHJvcCA9IFNUUk9LRV9QUk9QU1tpXTtcbiAgICAgICAgdmFyIHByb3BOYW1lID0gcHJvcFswXTtcbiAgICAgICAgaWYgKGZvcmNlU2V0QWxsIHx8IHN0eWxlW3Byb3BOYW1lXSAhPT0gcHJldlN0eWxlW3Byb3BOYW1lXSkge1xuICAgICAgICAgICAgaWYgKCFzdHlsZUNoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICBmbHVzaFBhdGhEcmF3bihjdHgsIHNjb3BlKTtcbiAgICAgICAgICAgICAgICBzdHlsZUNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3R4W3Byb3BOYW1lXSA9IHN0eWxlW3Byb3BOYW1lXSB8fCBwcm9wWzFdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzdHlsZUNoYW5nZWQ7XG59XG5mdW5jdGlvbiBiaW5kSW1hZ2VTdHlsZShjdHgsIGVsLCBwcmV2RWwsIGZvcmNlU2V0QWxsLCBzY29wZSkge1xuICAgIHJldHVybiBiaW5kQ29tbW9uUHJvcHMoY3R4LCBnZXRTdHlsZShlbCwgc2NvcGUuaW5Ib3ZlciksIHByZXZFbCAmJiBnZXRTdHlsZShwcmV2RWwsIHNjb3BlLmluSG92ZXIpLCBmb3JjZVNldEFsbCwgc2NvcGUpO1xufVxuZnVuY3Rpb24gc2V0Q29udGV4dFRyYW5zZm9ybShjdHgsIGVsKSB7XG4gICAgdmFyIG0gPSBlbC50cmFuc2Zvcm07XG4gICAgdmFyIGRwciA9IGN0eC5kcHIgfHwgMTtcbiAgICBpZiAobSkge1xuICAgICAgICBjdHguc2V0VHJhbnNmb3JtKGRwciAqIG1bMF0sIGRwciAqIG1bMV0sIGRwciAqIG1bMl0sIGRwciAqIG1bM10sIGRwciAqIG1bNF0sIGRwciAqIG1bNV0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY3R4LnNldFRyYW5zZm9ybShkcHIsIDAsIDAsIGRwciwgMCwgMCk7XG4gICAgfVxufVxuZnVuY3Rpb24gdXBkYXRlQ2xpcFN0YXR1cyhjbGlwUGF0aHMsIGN0eCwgc2NvcGUpIHtcbiAgICB2YXIgYWxsQ2xpcHBlZCA9IGZhbHNlO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2xpcFBhdGhzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjbGlwUGF0aCA9IGNsaXBQYXRoc1tpXTtcbiAgICAgICAgYWxsQ2xpcHBlZCA9IGFsbENsaXBwZWQgfHwgY2xpcFBhdGguaXNaZXJvQXJlYSgpO1xuICAgICAgICBzZXRDb250ZXh0VHJhbnNmb3JtKGN0eCwgY2xpcFBhdGgpO1xuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGNsaXBQYXRoLmJ1aWxkUGF0aChjdHgsIGNsaXBQYXRoLnNoYXBlKTtcbiAgICAgICAgY3R4LmNsaXAoKTtcbiAgICB9XG4gICAgc2NvcGUuYWxsQ2xpcHBlZCA9IGFsbENsaXBwZWQ7XG59XG5mdW5jdGlvbiBpc1RyYW5zZm9ybUNoYW5nZWQobTAsIG0xKSB7XG4gICAgaWYgKG0wICYmIG0xKSB7XG4gICAgICAgIHJldHVybiBtMFswXSAhPT0gbTFbMF1cbiAgICAgICAgICAgIHx8IG0wWzFdICE9PSBtMVsxXVxuICAgICAgICAgICAgfHwgbTBbMl0gIT09IG0xWzJdXG4gICAgICAgICAgICB8fCBtMFszXSAhPT0gbTFbM11cbiAgICAgICAgICAgIHx8IG0wWzRdICE9PSBtMVs0XVxuICAgICAgICAgICAgfHwgbTBbNV0gIT09IG0xWzVdO1xuICAgIH1cbiAgICBlbHNlIGlmICghbTAgJiYgIW0xKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG52YXIgRFJBV19UWVBFX1BBVEggPSAxO1xudmFyIERSQVdfVFlQRV9JTUFHRSA9IDI7XG52YXIgRFJBV19UWVBFX1RFWFQgPSAzO1xudmFyIERSQVdfVFlQRV9JTkNSRU1FTlRBTCA9IDQ7XG5mdW5jdGlvbiBjYW5QYXRoQmF0Y2goc3R5bGUpIHtcbiAgICB2YXIgaGFzRmlsbCA9IHN0eWxlSGFzRmlsbChzdHlsZSk7XG4gICAgdmFyIGhhc1N0cm9rZSA9IHN0eWxlSGFzU3Ryb2tlKHN0eWxlKTtcbiAgICByZXR1cm4gIShzdHlsZS5saW5lRGFzaFxuICAgICAgICB8fCAhKCtoYXNGaWxsIF4gK2hhc1N0cm9rZSlcbiAgICAgICAgfHwgKGhhc0ZpbGwgJiYgdHlwZW9mIHN0eWxlLmZpbGwgIT09ICdzdHJpbmcnKVxuICAgICAgICB8fCAoaGFzU3Ryb2tlICYmIHR5cGVvZiBzdHlsZS5zdHJva2UgIT09ICdzdHJpbmcnKVxuICAgICAgICB8fCBzdHlsZS5zdHJva2VQZXJjZW50IDwgMVxuICAgICAgICB8fCBzdHlsZS5zdHJva2VPcGFjaXR5IDwgMVxuICAgICAgICB8fCBzdHlsZS5maWxsT3BhY2l0eSA8IDEpO1xufVxuZnVuY3Rpb24gZmx1c2hQYXRoRHJhd24oY3R4LCBzY29wZSkge1xuICAgIHNjb3BlLmJhdGNoRmlsbCAmJiBjdHguZmlsbCgpO1xuICAgIHNjb3BlLmJhdGNoU3Ryb2tlICYmIGN0eC5zdHJva2UoKTtcbiAgICBzY29wZS5iYXRjaEZpbGwgPSAnJztcbiAgICBzY29wZS5iYXRjaFN0cm9rZSA9ICcnO1xufVxuZnVuY3Rpb24gZ2V0U3R5bGUoZWwsIGluSG92ZXIpIHtcbiAgICByZXR1cm4gaW5Ib3ZlciA/IChlbC5fX2hvdmVyU3R5bGUgfHwgZWwuc3R5bGUpIDogZWwuc3R5bGU7XG59XG5leHBvcnQgZnVuY3Rpb24gYnJ1c2hTaW5nbGUoY3R4LCBlbCkge1xuICAgIGJydXNoKGN0eCwgZWwsIHsgaW5Ib3ZlcjogZmFsc2UsIHZpZXdXaWR0aDogMCwgdmlld0hlaWdodDogMCB9LCB0cnVlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBicnVzaChjdHgsIGVsLCBzY29wZSwgaXNMYXN0KSB7XG4gICAgdmFyIG0gPSBlbC50cmFuc2Zvcm07XG4gICAgaWYgKCFlbC5zaG91bGRCZVBhaW50ZWQoc2NvcGUudmlld1dpZHRoLCBzY29wZS52aWV3SGVpZ2h0LCBmYWxzZSwgZmFsc2UpKSB7XG4gICAgICAgIGVsLl9fZGlydHkgJj0gflJFRFJBV19CSVQ7XG4gICAgICAgIGVsLl9faXNSZW5kZXJlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBjbGlwUGF0aHMgPSBlbC5fX2NsaXBQYXRocztcbiAgICB2YXIgcHJldkVsQ2xpcFBhdGhzID0gc2NvcGUucHJldkVsQ2xpcFBhdGhzO1xuICAgIHZhciBmb3JjZVNldFRyYW5zZm9ybSA9IGZhbHNlO1xuICAgIHZhciBmb3JjZVNldFN0eWxlID0gZmFsc2U7XG4gICAgaWYgKCFwcmV2RWxDbGlwUGF0aHMgfHwgaXNDbGlwUGF0aENoYW5nZWQoY2xpcFBhdGhzLCBwcmV2RWxDbGlwUGF0aHMpKSB7XG4gICAgICAgIGlmIChwcmV2RWxDbGlwUGF0aHMgJiYgcHJldkVsQ2xpcFBhdGhzLmxlbmd0aCkge1xuICAgICAgICAgICAgZmx1c2hQYXRoRHJhd24oY3R4LCBzY29wZSk7XG4gICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICAgICAgZm9yY2VTZXRTdHlsZSA9IGZvcmNlU2V0VHJhbnNmb3JtID0gdHJ1ZTtcbiAgICAgICAgICAgIHNjb3BlLnByZXZFbENsaXBQYXRocyA9IG51bGw7XG4gICAgICAgICAgICBzY29wZS5hbGxDbGlwcGVkID0gZmFsc2U7XG4gICAgICAgICAgICBzY29wZS5wcmV2RWwgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjbGlwUGF0aHMgJiYgY2xpcFBhdGhzLmxlbmd0aCkge1xuICAgICAgICAgICAgZmx1c2hQYXRoRHJhd24oY3R4LCBzY29wZSk7XG4gICAgICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICAgICAgdXBkYXRlQ2xpcFN0YXR1cyhjbGlwUGF0aHMsIGN0eCwgc2NvcGUpO1xuICAgICAgICAgICAgZm9yY2VTZXRUcmFuc2Zvcm0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHNjb3BlLnByZXZFbENsaXBQYXRocyA9IGNsaXBQYXRocztcbiAgICB9XG4gICAgaWYgKHNjb3BlLmFsbENsaXBwZWQpIHtcbiAgICAgICAgZWwuX19pc1JlbmRlcmVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWwuYmVmb3JlQnJ1c2ggJiYgZWwuYmVmb3JlQnJ1c2goKTtcbiAgICBlbC5pbm5lckJlZm9yZUJydXNoKCk7XG4gICAgdmFyIHByZXZFbCA9IHNjb3BlLnByZXZFbDtcbiAgICBpZiAoIXByZXZFbCkge1xuICAgICAgICBmb3JjZVNldFN0eWxlID0gZm9yY2VTZXRUcmFuc2Zvcm0gPSB0cnVlO1xuICAgIH1cbiAgICB2YXIgY2FuQmF0Y2hQYXRoID0gZWwgaW5zdGFuY2VvZiBQYXRoXG4gICAgICAgICYmIGVsLmF1dG9CYXRjaFxuICAgICAgICAmJiBjYW5QYXRoQmF0Y2goZWwuc3R5bGUpO1xuICAgIGlmIChmb3JjZVNldFRyYW5zZm9ybSB8fCBpc1RyYW5zZm9ybUNoYW5nZWQobSwgcHJldkVsLnRyYW5zZm9ybSkpIHtcbiAgICAgICAgZmx1c2hQYXRoRHJhd24oY3R4LCBzY29wZSk7XG4gICAgICAgIHNldENvbnRleHRUcmFuc2Zvcm0oY3R4LCBlbCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKCFjYW5CYXRjaFBhdGgpIHtcbiAgICAgICAgZmx1c2hQYXRoRHJhd24oY3R4LCBzY29wZSk7XG4gICAgfVxuICAgIHZhciBzdHlsZSA9IGdldFN0eWxlKGVsLCBzY29wZS5pbkhvdmVyKTtcbiAgICBpZiAoZWwgaW5zdGFuY2VvZiBQYXRoKSB7XG4gICAgICAgIGlmIChzY29wZS5sYXN0RHJhd1R5cGUgIT09IERSQVdfVFlQRV9QQVRIKSB7XG4gICAgICAgICAgICBmb3JjZVNldFN0eWxlID0gdHJ1ZTtcbiAgICAgICAgICAgIHNjb3BlLmxhc3REcmF3VHlwZSA9IERSQVdfVFlQRV9QQVRIO1xuICAgICAgICB9XG4gICAgICAgIGJpbmRQYXRoQW5kVGV4dENvbW1vblN0eWxlKGN0eCwgZWwsIHByZXZFbCwgZm9yY2VTZXRTdHlsZSwgc2NvcGUpO1xuICAgICAgICBpZiAoIWNhbkJhdGNoUGF0aCB8fCAoIXNjb3BlLmJhdGNoRmlsbCAmJiAhc2NvcGUuYmF0Y2hTdHJva2UpKSB7XG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJ1c2hQYXRoKGN0eCwgZWwsIHN0eWxlLCBjYW5CYXRjaFBhdGgpO1xuICAgICAgICBpZiAoY2FuQmF0Y2hQYXRoKSB7XG4gICAgICAgICAgICBzY29wZS5iYXRjaEZpbGwgPSBzdHlsZS5maWxsIHx8ICcnO1xuICAgICAgICAgICAgc2NvcGUuYmF0Y2hTdHJva2UgPSBzdHlsZS5zdHJva2UgfHwgJyc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChlbCBpbnN0YW5jZW9mIFRTcGFuKSB7XG4gICAgICAgICAgICBpZiAoc2NvcGUubGFzdERyYXdUeXBlICE9PSBEUkFXX1RZUEVfVEVYVCkge1xuICAgICAgICAgICAgICAgIGZvcmNlU2V0U3R5bGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNjb3BlLmxhc3REcmF3VHlwZSA9IERSQVdfVFlQRV9URVhUO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmluZFBhdGhBbmRUZXh0Q29tbW9uU3R5bGUoY3R4LCBlbCwgcHJldkVsLCBmb3JjZVNldFN0eWxlLCBzY29wZSk7XG4gICAgICAgICAgICBicnVzaFRleHQoY3R4LCBlbCwgc3R5bGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGVsIGluc3RhbmNlb2YgWlJJbWFnZSkge1xuICAgICAgICAgICAgaWYgKHNjb3BlLmxhc3REcmF3VHlwZSAhPT0gRFJBV19UWVBFX0lNQUdFKSB7XG4gICAgICAgICAgICAgICAgZm9yY2VTZXRTdHlsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgc2NvcGUubGFzdERyYXdUeXBlID0gRFJBV19UWVBFX0lNQUdFO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmluZEltYWdlU3R5bGUoY3R4LCBlbCwgcHJldkVsLCBmb3JjZVNldFN0eWxlLCBzY29wZSk7XG4gICAgICAgICAgICBicnVzaEltYWdlKGN0eCwgZWwsIHN0eWxlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlbC5nZXRUZW1wb3JhbERpc3BsYXlhYmxlcykge1xuICAgICAgICAgICAgaWYgKHNjb3BlLmxhc3REcmF3VHlwZSAhPT0gRFJBV19UWVBFX0lOQ1JFTUVOVEFMKSB7XG4gICAgICAgICAgICAgICAgZm9yY2VTZXRTdHlsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgc2NvcGUubGFzdERyYXdUeXBlID0gRFJBV19UWVBFX0lOQ1JFTUVOVEFMO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJ1c2hJbmNyZW1lbnRhbChjdHgsIGVsLCBzY29wZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNhbkJhdGNoUGF0aCAmJiBpc0xhc3QpIHtcbiAgICAgICAgZmx1c2hQYXRoRHJhd24oY3R4LCBzY29wZSk7XG4gICAgfVxuICAgIGVsLmlubmVyQWZ0ZXJCcnVzaCgpO1xuICAgIGVsLmFmdGVyQnJ1c2ggJiYgZWwuYWZ0ZXJCcnVzaCgpO1xuICAgIHNjb3BlLnByZXZFbCA9IGVsO1xuICAgIGVsLl9fZGlydHkgPSAwO1xuICAgIGVsLl9faXNSZW5kZXJlZCA9IHRydWU7XG59XG5mdW5jdGlvbiBicnVzaEluY3JlbWVudGFsKGN0eCwgZWwsIHNjb3BlKSB7XG4gICAgdmFyIGRpc3BsYXlhYmxlcyA9IGVsLmdldERpc3BsYXlhYmxlcygpO1xuICAgIHZhciB0ZW1wb3JhbERpc3BsYXlhYmxlcyA9IGVsLmdldFRlbXBvcmFsRGlzcGxheWFibGVzKCk7XG4gICAgY3R4LnNhdmUoKTtcbiAgICB2YXIgaW5uZXJTY29wZSA9IHtcbiAgICAgICAgcHJldkVsQ2xpcFBhdGhzOiBudWxsLFxuICAgICAgICBwcmV2RWw6IG51bGwsXG4gICAgICAgIGFsbENsaXBwZWQ6IGZhbHNlLFxuICAgICAgICB2aWV3V2lkdGg6IHNjb3BlLnZpZXdXaWR0aCxcbiAgICAgICAgdmlld0hlaWdodDogc2NvcGUudmlld0hlaWdodCxcbiAgICAgICAgaW5Ib3Zlcjogc2NvcGUuaW5Ib3ZlclxuICAgIH07XG4gICAgdmFyIGk7XG4gICAgdmFyIGxlbjtcbiAgICBmb3IgKGkgPSBlbC5nZXRDdXJzb3IoKSwgbGVuID0gZGlzcGxheWFibGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHZhciBkaXNwbGF5YWJsZSA9IGRpc3BsYXlhYmxlc1tpXTtcbiAgICAgICAgZGlzcGxheWFibGUuYmVmb3JlQnJ1c2ggJiYgZGlzcGxheWFibGUuYmVmb3JlQnJ1c2goKTtcbiAgICAgICAgZGlzcGxheWFibGUuaW5uZXJCZWZvcmVCcnVzaCgpO1xuICAgICAgICBicnVzaChjdHgsIGRpc3BsYXlhYmxlLCBpbm5lclNjb3BlLCBpID09PSBsZW4gLSAxKTtcbiAgICAgICAgZGlzcGxheWFibGUuaW5uZXJBZnRlckJydXNoKCk7XG4gICAgICAgIGRpc3BsYXlhYmxlLmFmdGVyQnJ1c2ggJiYgZGlzcGxheWFibGUuYWZ0ZXJCcnVzaCgpO1xuICAgICAgICBpbm5lclNjb3BlLnByZXZFbCA9IGRpc3BsYXlhYmxlO1xuICAgIH1cbiAgICBmb3IgKHZhciBpXzEgPSAwLCBsZW5fMSA9IHRlbXBvcmFsRGlzcGxheWFibGVzLmxlbmd0aDsgaV8xIDwgbGVuXzE7IGlfMSsrKSB7XG4gICAgICAgIHZhciBkaXNwbGF5YWJsZSA9IHRlbXBvcmFsRGlzcGxheWFibGVzW2lfMV07XG4gICAgICAgIGRpc3BsYXlhYmxlLmJlZm9yZUJydXNoICYmIGRpc3BsYXlhYmxlLmJlZm9yZUJydXNoKCk7XG4gICAgICAgIGRpc3BsYXlhYmxlLmlubmVyQmVmb3JlQnJ1c2goKTtcbiAgICAgICAgYnJ1c2goY3R4LCBkaXNwbGF5YWJsZSwgaW5uZXJTY29wZSwgaV8xID09PSBsZW5fMSAtIDEpO1xuICAgICAgICBkaXNwbGF5YWJsZS5pbm5lckFmdGVyQnJ1c2goKTtcbiAgICAgICAgZGlzcGxheWFibGUuYWZ0ZXJCcnVzaCAmJiBkaXNwbGF5YWJsZS5hZnRlckJydXNoKCk7XG4gICAgICAgIGlubmVyU2NvcGUucHJldkVsID0gZGlzcGxheWFibGU7XG4gICAgfVxuICAgIGVsLmNsZWFyVGVtcG9yYWxEaXNwbGF5YWJsZXMoKTtcbiAgICBlbC5ub3RDbGVhciA9IHRydWU7XG4gICAgY3R4LnJlc3RvcmUoKTtcbn1cbiIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IFdlYWtNYXAgZnJvbSAnenJlbmRlci9saWIvY29yZS9XZWFrTWFwLmpzJztcbmltcG9ydCBMUlUgZnJvbSAnenJlbmRlci9saWIvY29yZS9MUlUuanMnO1xuaW1wb3J0IHsgZGVmYXVsdHMsIG1hcCwgaXNBcnJheSwgaXNTdHJpbmcsIGlzTnVtYmVyIH0gZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbmltcG9ydCB7IGdldExlYXN0Q29tbW9uTXVsdGlwbGUgfSBmcm9tICcuL251bWJlci5qcyc7XG5pbXBvcnQgeyBjcmVhdGVTeW1ib2wgfSBmcm9tICcuL3N5bWJvbC5qcyc7XG5pbXBvcnQgeyBicnVzaFNpbmdsZSB9IGZyb20gJ3pyZW5kZXIvbGliL2NhbnZhcy9ncmFwaGljLmpzJztcbmltcG9ydCB7IHBsYXRmb3JtQXBpIH0gZnJvbSAnenJlbmRlci9saWIvY29yZS9wbGF0Zm9ybS5qcyc7XG52YXIgZGVjYWxNYXAgPSBuZXcgV2Vha01hcCgpO1xudmFyIGRlY2FsQ2FjaGUgPSBuZXcgTFJVKDEwMCk7XG52YXIgZGVjYWxLZXlzID0gWydzeW1ib2wnLCAnc3ltYm9sU2l6ZScsICdzeW1ib2xLZWVwQXNwZWN0JywgJ2NvbG9yJywgJ2JhY2tncm91bmRDb2xvcicsICdkYXNoQXJyYXlYJywgJ2Rhc2hBcnJheVknLCAnbWF4VGlsZVdpZHRoJywgJ21heFRpbGVIZWlnaHQnXTtcbi8qKlxyXG4gKiBDcmVhdGUgb3IgdXBkYXRlIHBhdHRlcm4gaW1hZ2UgZnJvbSBkZWNhbCBvcHRpb25zXHJcbiAqXHJcbiAqIEBwYXJhbSB7SW5uZXJEZWNhbE9iamVjdCB8ICdub25lJ30gZGVjYWxPYmplY3QgZGVjYWwgb3B0aW9ucywgJ25vbmUnIGlmIG5vIGRlY2FsXHJcbiAqIEByZXR1cm4ge1BhdHRlcm59IHBhdHRlcm4gd2l0aCBnZW5lcmF0ZWQgaW1hZ2UsIG51bGwgaWYgbm8gZGVjYWxcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZVBhdHRlcm5Gcm9tRGVjYWwoZGVjYWxPYmplY3QsIGFwaSkge1xuICBpZiAoZGVjYWxPYmplY3QgPT09ICdub25lJykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIGRwciA9IGFwaS5nZXREZXZpY2VQaXhlbFJhdGlvKCk7XG4gIHZhciB6ciA9IGFwaS5nZXRacigpO1xuICB2YXIgaXNTVkcgPSB6ci5wYWludGVyLnR5cGUgPT09ICdzdmcnO1xuXG4gIGlmIChkZWNhbE9iamVjdC5kaXJ0eSkge1xuICAgIGRlY2FsTWFwW1wiZGVsZXRlXCJdKGRlY2FsT2JqZWN0KTtcbiAgfVxuXG4gIHZhciBvbGRQYXR0ZXJuID0gZGVjYWxNYXAuZ2V0KGRlY2FsT2JqZWN0KTtcblxuICBpZiAob2xkUGF0dGVybikge1xuICAgIHJldHVybiBvbGRQYXR0ZXJuO1xuICB9XG5cbiAgdmFyIGRlY2FsT3B0ID0gZGVmYXVsdHMoZGVjYWxPYmplY3QsIHtcbiAgICBzeW1ib2w6ICdyZWN0JyxcbiAgICBzeW1ib2xTaXplOiAxLFxuICAgIHN5bWJvbEtlZXBBc3BlY3Q6IHRydWUsXG4gICAgY29sb3I6ICdyZ2JhKDAsIDAsIDAsIDAuMiknLFxuICAgIGJhY2tncm91bmRDb2xvcjogbnVsbCxcbiAgICBkYXNoQXJyYXlYOiA1LFxuICAgIGRhc2hBcnJheVk6IDUsXG4gICAgcm90YXRpb246IDAsXG4gICAgbWF4VGlsZVdpZHRoOiA1MTIsXG4gICAgbWF4VGlsZUhlaWdodDogNTEyXG4gIH0pO1xuXG4gIGlmIChkZWNhbE9wdC5iYWNrZ3JvdW5kQ29sb3IgPT09ICdub25lJykge1xuICAgIGRlY2FsT3B0LmJhY2tncm91bmRDb2xvciA9IG51bGw7XG4gIH1cblxuICB2YXIgcGF0dGVybiA9IHtcbiAgICByZXBlYXQ6ICdyZXBlYXQnXG4gIH07XG4gIHNldFBhdHRlcm5uU291cmNlKHBhdHRlcm4pO1xuICBwYXR0ZXJuLnJvdGF0aW9uID0gZGVjYWxPcHQucm90YXRpb247XG4gIHBhdHRlcm4uc2NhbGVYID0gcGF0dGVybi5zY2FsZVkgPSBpc1NWRyA/IDEgOiAxIC8gZHByO1xuICBkZWNhbE1hcC5zZXQoZGVjYWxPYmplY3QsIHBhdHRlcm4pO1xuICBkZWNhbE9iamVjdC5kaXJ0eSA9IGZhbHNlO1xuICByZXR1cm4gcGF0dGVybjtcblxuICBmdW5jdGlvbiBzZXRQYXR0ZXJublNvdXJjZShwYXR0ZXJuKSB7XG4gICAgdmFyIGtleXMgPSBbZHByXTtcbiAgICB2YXIgaXNWYWxpZEtleSA9IHRydWU7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRlY2FsS2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHZhbHVlID0gZGVjYWxPcHRbZGVjYWxLZXlzW2ldXTtcblxuICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgIWlzQXJyYXkodmFsdWUpICYmICFpc1N0cmluZyh2YWx1ZSkgJiYgIWlzTnVtYmVyKHZhbHVlKSAmJiB0eXBlb2YgdmFsdWUgIT09ICdib29sZWFuJykge1xuICAgICAgICBpc1ZhbGlkS2V5ID0gZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBrZXlzLnB1c2godmFsdWUpO1xuICAgIH1cblxuICAgIHZhciBjYWNoZUtleTtcblxuICAgIGlmIChpc1ZhbGlkS2V5KSB7XG4gICAgICBjYWNoZUtleSA9IGtleXMuam9pbignLCcpICsgKGlzU1ZHID8gJy1zdmcnIDogJycpO1xuICAgICAgdmFyIGNhY2hlID0gZGVjYWxDYWNoZS5nZXQoY2FjaGVLZXkpO1xuXG4gICAgICBpZiAoY2FjaGUpIHtcbiAgICAgICAgaXNTVkcgPyBwYXR0ZXJuLnN2Z0VsZW1lbnQgPSBjYWNoZSA6IHBhdHRlcm4uaW1hZ2UgPSBjYWNoZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZGFzaEFycmF5WCA9IG5vcm1hbGl6ZURhc2hBcnJheVgoZGVjYWxPcHQuZGFzaEFycmF5WCk7XG4gICAgdmFyIGRhc2hBcnJheVkgPSBub3JtYWxpemVEYXNoQXJyYXlZKGRlY2FsT3B0LmRhc2hBcnJheVkpO1xuICAgIHZhciBzeW1ib2xBcnJheSA9IG5vcm1hbGl6ZVN5bWJvbEFycmF5KGRlY2FsT3B0LnN5bWJvbCk7XG4gICAgdmFyIGxpbmVCbG9ja0xlbmd0aHNYID0gZ2V0TGluZUJsb2NrTGVuZ3RoWChkYXNoQXJyYXlYKTtcbiAgICB2YXIgbGluZUJsb2NrTGVuZ3RoWSA9IGdldExpbmVCbG9ja0xlbmd0aFkoZGFzaEFycmF5WSk7XG4gICAgdmFyIGNhbnZhcyA9ICFpc1NWRyAmJiBwbGF0Zm9ybUFwaS5jcmVhdGVDYW52YXMoKTtcbiAgICB2YXIgc3ZnUm9vdCA9IGlzU1ZHICYmIHtcbiAgICAgIHRhZzogJ2cnLFxuICAgICAgYXR0cnM6IHt9LFxuICAgICAga2V5OiAnZGNsJyxcbiAgICAgIGNoaWxkcmVuOiBbXVxuICAgIH07XG4gICAgdmFyIHBTaXplID0gZ2V0UGF0dGVyblNpemUoKTtcbiAgICB2YXIgY3R4O1xuXG4gICAgaWYgKGNhbnZhcykge1xuICAgICAgY2FudmFzLndpZHRoID0gcFNpemUud2lkdGggKiBkcHI7XG4gICAgICBjYW52YXMuaGVpZ2h0ID0gcFNpemUuaGVpZ2h0ICogZHByO1xuICAgICAgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgfVxuXG4gICAgYnJ1c2hEZWNhbCgpO1xuXG4gICAgaWYgKGlzVmFsaWRLZXkpIHtcbiAgICAgIGRlY2FsQ2FjaGUucHV0KGNhY2hlS2V5LCBjYW52YXMgfHwgc3ZnUm9vdCk7XG4gICAgfVxuXG4gICAgcGF0dGVybi5pbWFnZSA9IGNhbnZhcztcbiAgICBwYXR0ZXJuLnN2Z0VsZW1lbnQgPSBzdmdSb290O1xuICAgIHBhdHRlcm4uc3ZnV2lkdGggPSBwU2l6ZS53aWR0aDtcbiAgICBwYXR0ZXJuLnN2Z0hlaWdodCA9IHBTaXplLmhlaWdodDtcbiAgICAvKipcclxuICAgICAqIEdldCBtaW5pbXVtIGxlbmd0aCB0aGF0IGNhbiBtYWtlIGEgcmVwZWF0YWJsZSBwYXR0ZXJuLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge09iamVjdH0gcGF0dGVybiB3aWR0aCBhbmQgaGVpZ2h0XHJcbiAgICAgKi9cblxuICAgIGZ1bmN0aW9uIGdldFBhdHRlcm5TaXplKCkge1xuICAgICAgLyoqXHJcbiAgICAgICAqIEZvciBleGFtcGxlLCBpZiBkYXNoIGlzIFtbMywgMl0sIFsyLCAxXV0gZm9yIFgsIGl0IGxvb2tzIGxpa2VcclxuICAgICAgICogfC0tLSAgLS0tICAtLS0gIC0tLSAgLS0tIC4uLlxyXG4gICAgICAgKiB8LS0gLS0gLS0gLS0gLS0gLS0gLS0gLS0gLi4uXHJcbiAgICAgICAqIHwtLS0gIC0tLSAgLS0tICAtLS0gIC0tLSAuLi5cclxuICAgICAgICogfC0tIC0tIC0tIC0tIC0tIC0tIC0tIC0tIC4uLlxyXG4gICAgICAgKiBTbyB0aGUgbWluaW11bSBsZW5ndGggb2YgWCBpcyAxNSxcclxuICAgICAgICogd2hpY2ggaXMgdGhlIGxlYXN0IGNvbW1vbiBtdWx0aXBsZSBvZiBgMyArIDJgIGFuZCBgMiArIDFgXHJcbiAgICAgICAqIHwtLS0gIC0tLSAgLS0tICB8LS0tICAtLS0gLi4uXHJcbiAgICAgICAqIHwtLSAtLSAtLSAtLSAtLSB8LS0gLS0gLS0gLi4uXHJcbiAgICAgICAqL1xuICAgICAgdmFyIHdpZHRoID0gMTtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIHhsZW4gPSBsaW5lQmxvY2tMZW5ndGhzWC5sZW5ndGg7IGkgPCB4bGVuOyArK2kpIHtcbiAgICAgICAgd2lkdGggPSBnZXRMZWFzdENvbW1vbk11bHRpcGxlKHdpZHRoLCBsaW5lQmxvY2tMZW5ndGhzWFtpXSk7XG4gICAgICB9XG5cbiAgICAgIHZhciBzeW1ib2xSZXBlYXRzID0gMTtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIHhsZW4gPSBzeW1ib2xBcnJheS5sZW5ndGg7IGkgPCB4bGVuOyArK2kpIHtcbiAgICAgICAgc3ltYm9sUmVwZWF0cyA9IGdldExlYXN0Q29tbW9uTXVsdGlwbGUoc3ltYm9sUmVwZWF0cywgc3ltYm9sQXJyYXlbaV0ubGVuZ3RoKTtcbiAgICAgIH1cblxuICAgICAgd2lkdGggKj0gc3ltYm9sUmVwZWF0cztcbiAgICAgIHZhciBoZWlnaHQgPSBsaW5lQmxvY2tMZW5ndGhZICogbGluZUJsb2NrTGVuZ3Roc1gubGVuZ3RoICogc3ltYm9sQXJyYXkubGVuZ3RoO1xuXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB2YXIgd2FybiA9IGZ1bmN0aW9uIChhdHRyTmFtZSkge1xuICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSAqL1xuICAgICAgICAgIGNvbnNvbGUud2FybihcIkNhbGN1bGF0ZWQgZGVjYWwgc2l6ZSBpcyBncmVhdGVyIHRoYW4gXCIgKyBhdHRyTmFtZSArIFwiIGR1ZSB0byBkZWNhbCBvcHRpb24gc2V0dGluZ3Mgc28gXCIgKyBhdHRyTmFtZSArIFwiIGlzIHVzZWQgZm9yIHRoZSBkZWNhbCBzaXplLiBQbGVhc2UgY29uc2lkZXIgY2hhbmdpbmcgdGhlIGRlY2FsIG9wdGlvbiB0byBtYWtlIGEgc21hbGxlciBkZWNhbCBvciBzZXQgXCIgKyBhdHRyTmFtZSArIFwiIHRvIGJlIGxhcmdlciB0byBhdm9pZCBpbmNvbnRpbnVpdHkuXCIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmICh3aWR0aCA+IGRlY2FsT3B0Lm1heFRpbGVXaWR0aCkge1xuICAgICAgICAgIHdhcm4oJ21heFRpbGVXaWR0aCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhlaWdodCA+IGRlY2FsT3B0Lm1heFRpbGVIZWlnaHQpIHtcbiAgICAgICAgICB3YXJuKCdtYXhUaWxlSGVpZ2h0Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgd2lkdGg6IE1hdGgubWF4KDEsIE1hdGgubWluKHdpZHRoLCBkZWNhbE9wdC5tYXhUaWxlV2lkdGgpKSxcbiAgICAgICAgaGVpZ2h0OiBNYXRoLm1heCgxLCBNYXRoLm1pbihoZWlnaHQsIGRlY2FsT3B0Lm1heFRpbGVIZWlnaHQpKVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBicnVzaERlY2FsKCkge1xuICAgICAgaWYgKGN0eCkge1xuICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5cbiAgICAgICAgaWYgKGRlY2FsT3B0LmJhY2tncm91bmRDb2xvcikge1xuICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBkZWNhbE9wdC5iYWNrZ3JvdW5kQ29sb3I7XG4gICAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIHlTdW0gPSAwO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhc2hBcnJheVkubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgeVN1bSArPSBkYXNoQXJyYXlZW2ldO1xuICAgICAgfVxuXG4gICAgICBpZiAoeVN1bSA8PSAwKSB7XG4gICAgICAgIC8vIGRhc2hBcnJheVkgaXMgMCwgZHJhdyBub3RoaW5nXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHkgPSAtbGluZUJsb2NrTGVuZ3RoWTtcbiAgICAgIHZhciB5SWQgPSAwO1xuICAgICAgdmFyIHlJZFRvdGFsID0gMDtcbiAgICAgIHZhciB4SWQwID0gMDtcblxuICAgICAgd2hpbGUgKHkgPCBwU2l6ZS5oZWlnaHQpIHtcbiAgICAgICAgaWYgKHlJZCAlIDIgPT09IDApIHtcbiAgICAgICAgICB2YXIgc3ltYm9sWUlkID0geUlkVG90YWwgLyAyICUgc3ltYm9sQXJyYXkubGVuZ3RoO1xuICAgICAgICAgIHZhciB4ID0gMDtcbiAgICAgICAgICB2YXIgeElkMSA9IDA7XG4gICAgICAgICAgdmFyIHhJZDFUb3RhbCA9IDA7XG5cbiAgICAgICAgICB3aGlsZSAoeCA8IHBTaXplLndpZHRoICogMikge1xuICAgICAgICAgICAgdmFyIHhTdW0gPSAwO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhc2hBcnJheVhbeElkMF0ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgeFN1bSArPSBkYXNoQXJyYXlYW3hJZDBdW2ldO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoeFN1bSA8PSAwKSB7XG4gICAgICAgICAgICAgIC8vIFNraXAgZW1wdHkgbGluZVxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH0gLy8gRS5nLiwgWzE1LCA1LCAyMCwgNV0gZHJhd3Mgb25seSBmb3IgMTUgYW5kIDIwXG5cblxuICAgICAgICAgICAgaWYgKHhJZDEgJSAyID09PSAwKSB7XG4gICAgICAgICAgICAgIHZhciBzaXplID0gKDEgLSBkZWNhbE9wdC5zeW1ib2xTaXplKSAqIDAuNTtcbiAgICAgICAgICAgICAgdmFyIGxlZnQgPSB4ICsgZGFzaEFycmF5WFt4SWQwXVt4SWQxXSAqIHNpemU7XG4gICAgICAgICAgICAgIHZhciB0b3BfMSA9IHkgKyBkYXNoQXJyYXlZW3lJZF0gKiBzaXplO1xuICAgICAgICAgICAgICB2YXIgd2lkdGggPSBkYXNoQXJyYXlYW3hJZDBdW3hJZDFdICogZGVjYWxPcHQuc3ltYm9sU2l6ZTtcbiAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IGRhc2hBcnJheVlbeUlkXSAqIGRlY2FsT3B0LnN5bWJvbFNpemU7XG4gICAgICAgICAgICAgIHZhciBzeW1ib2xYSWQgPSB4SWQxVG90YWwgLyAyICUgc3ltYm9sQXJyYXlbc3ltYm9sWUlkXS5sZW5ndGg7XG4gICAgICAgICAgICAgIGJydXNoU3ltYm9sKGxlZnQsIHRvcF8xLCB3aWR0aCwgaGVpZ2h0LCBzeW1ib2xBcnJheVtzeW1ib2xZSWRdW3N5bWJvbFhJZF0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB4ICs9IGRhc2hBcnJheVhbeElkMF1beElkMV07XG4gICAgICAgICAgICArK3hJZDFUb3RhbDtcbiAgICAgICAgICAgICsreElkMTtcblxuICAgICAgICAgICAgaWYgKHhJZDEgPT09IGRhc2hBcnJheVhbeElkMF0ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHhJZDEgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgICsreElkMDtcblxuICAgICAgICAgIGlmICh4SWQwID09PSBkYXNoQXJyYXlYLmxlbmd0aCkge1xuICAgICAgICAgICAgeElkMCA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgeSArPSBkYXNoQXJyYXlZW3lJZF07XG4gICAgICAgICsreUlkVG90YWw7XG4gICAgICAgICsreUlkO1xuXG4gICAgICAgIGlmICh5SWQgPT09IGRhc2hBcnJheVkubGVuZ3RoKSB7XG4gICAgICAgICAgeUlkID0gMDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBicnVzaFN5bWJvbCh4LCB5LCB3aWR0aCwgaGVpZ2h0LCBzeW1ib2xUeXBlKSB7XG4gICAgICAgIHZhciBzY2FsZSA9IGlzU1ZHID8gMSA6IGRwcjtcbiAgICAgICAgdmFyIHN5bWJvbCA9IGNyZWF0ZVN5bWJvbChzeW1ib2xUeXBlLCB4ICogc2NhbGUsIHkgKiBzY2FsZSwgd2lkdGggKiBzY2FsZSwgaGVpZ2h0ICogc2NhbGUsIGRlY2FsT3B0LmNvbG9yLCBkZWNhbE9wdC5zeW1ib2xLZWVwQXNwZWN0KTtcblxuICAgICAgICBpZiAoaXNTVkcpIHtcbiAgICAgICAgICB2YXIgc3ltYm9sVk5vZGUgPSB6ci5wYWludGVyLnJlbmRlck9uZVRvVk5vZGUoc3ltYm9sKTtcblxuICAgICAgICAgIGlmIChzeW1ib2xWTm9kZSkge1xuICAgICAgICAgICAgc3ZnUm9vdC5jaGlsZHJlbi5wdXNoKHN5bWJvbFZOb2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUGFpbnQgdG8gY2FudmFzIGZvciBhbGwgb3RoZXIgcmVuZGVyZXJzLlxuICAgICAgICAgIGJydXNoU2luZ2xlKGN0eCwgc3ltYm9sKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuLyoqXHJcbiAqIENvbnZlcnQgc3ltYm9sIGFycmF5IGludG8gbm9ybWFsaXplZCBhcnJheVxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZyB8IChzdHJpbmcgfCBzdHJpbmdbXSlbXX0gc3ltYm9sIHN5bWJvbCBpbnB1dFxyXG4gKiBAcmV0dXJuIHtzdHJpbmdbXVtdfSBub3Jtb2xpemVkIHN5bWJvbCBhcnJheVxyXG4gKi9cblxuZnVuY3Rpb24gbm9ybWFsaXplU3ltYm9sQXJyYXkoc3ltYm9sKSB7XG4gIGlmICghc3ltYm9sIHx8IHN5bWJvbC5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gW1sncmVjdCddXTtcbiAgfVxuXG4gIGlmIChpc1N0cmluZyhzeW1ib2wpKSB7XG4gICAgcmV0dXJuIFtbc3ltYm9sXV07XG4gIH1cblxuICB2YXIgaXNBbGxTdHJpbmcgPSB0cnVlO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3ltYm9sLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKCFpc1N0cmluZyhzeW1ib2xbaV0pKSB7XG4gICAgICBpc0FsbFN0cmluZyA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKGlzQWxsU3RyaW5nKSB7XG4gICAgcmV0dXJuIG5vcm1hbGl6ZVN5bWJvbEFycmF5KFtzeW1ib2xdKTtcbiAgfVxuXG4gIHZhciByZXN1bHQgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN5bWJvbC5sZW5ndGg7ICsraSkge1xuICAgIGlmIChpc1N0cmluZyhzeW1ib2xbaV0pKSB7XG4gICAgICByZXN1bHQucHVzaChbc3ltYm9sW2ldXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC5wdXNoKHN5bWJvbFtpXSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxyXG4gKiBDb252ZXJ0IGRhc2ggaW5wdXQgaW50byBkYXNoQXJyYXlcclxuICpcclxuICogQHBhcmFtIHtEZWNhbERhc2hBcnJheVh9IGRhc2ggZGFzaCBpbnB1dFxyXG4gKiBAcmV0dXJuIHtudW1iZXJbXVtdfSBub3Jtb2xpemVkIGRhc2ggYXJyYXlcclxuICovXG5cblxuZnVuY3Rpb24gbm9ybWFsaXplRGFzaEFycmF5WChkYXNoKSB7XG4gIGlmICghZGFzaCB8fCBkYXNoLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBbWzAsIDBdXTtcbiAgfVxuXG4gIGlmIChpc051bWJlcihkYXNoKSkge1xuICAgIHZhciBkYXNoVmFsdWUgPSBNYXRoLmNlaWwoZGFzaCk7XG4gICAgcmV0dXJuIFtbZGFzaFZhbHVlLCBkYXNoVmFsdWVdXTtcbiAgfVxuICAvKipcclxuICAgKiBbMjAsIDVdIHNob3VsZCBiZSBub3JtYWxpemVkIGludG8gW1syMCwgNV1dLFxyXG4gICAqIHdoaWxlIFsyMCwgWzUsIDEwXV0gc2hvdWxkIGJlIG5vcm1hbGl6ZWQgaW50byBbWzIwLCAyMF0sIFs1LCAxMF1dXHJcbiAgICovXG5cblxuICB2YXIgaXNBbGxOdW1iZXIgPSB0cnVlO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZGFzaC5sZW5ndGg7ICsraSkge1xuICAgIGlmICghaXNOdW1iZXIoZGFzaFtpXSkpIHtcbiAgICAgIGlzQWxsTnVtYmVyID0gZmFsc2U7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBpZiAoaXNBbGxOdW1iZXIpIHtcbiAgICByZXR1cm4gbm9ybWFsaXplRGFzaEFycmF5WChbZGFzaF0pO1xuICB9XG5cbiAgdmFyIHJlc3VsdCA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZGFzaC5sZW5ndGg7ICsraSkge1xuICAgIGlmIChpc051bWJlcihkYXNoW2ldKSkge1xuICAgICAgdmFyIGRhc2hWYWx1ZSA9IE1hdGguY2VpbChkYXNoW2ldKTtcbiAgICAgIHJlc3VsdC5wdXNoKFtkYXNoVmFsdWUsIGRhc2hWYWx1ZV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZGFzaFZhbHVlID0gbWFwKGRhc2hbaV0sIGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIHJldHVybiBNYXRoLmNlaWwobik7XG4gICAgICB9KTtcblxuICAgICAgaWYgKGRhc2hWYWx1ZS5sZW5ndGggJSAyID09PSAxKSB7XG4gICAgICAgIC8vIFs0LCAyLCAxXSBtZWFucyB8LS0tLSAgLSAgICAtLSB8LS0tLSAgLSAgICAtLSB8XG4gICAgICAgIC8vIHNvIG5vcm1hbGl6ZSBpdCB0byBiZSBbNCwgMiwgMSwgNCwgMiwgMV1cbiAgICAgICAgcmVzdWx0LnB1c2goZGFzaFZhbHVlLmNvbmNhdChkYXNoVmFsdWUpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKGRhc2hWYWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxyXG4gKiBDb252ZXJ0IGRhc2ggaW5wdXQgaW50byBkYXNoQXJyYXlcclxuICpcclxuICogQHBhcmFtIHtEZWNhbERhc2hBcnJheVl9IGRhc2ggZGFzaCBpbnB1dFxyXG4gKiBAcmV0dXJuIHtudW1iZXJbXX0gbm9ybW9saXplZCBkYXNoIGFycmF5XHJcbiAqL1xuXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZURhc2hBcnJheVkoZGFzaCkge1xuICBpZiAoIWRhc2ggfHwgdHlwZW9mIGRhc2ggPT09ICdvYmplY3QnICYmIGRhc2gubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFswLCAwXTtcbiAgfVxuXG4gIGlmIChpc051bWJlcihkYXNoKSkge1xuICAgIHZhciBkYXNoVmFsdWVfMSA9IE1hdGguY2VpbChkYXNoKTtcbiAgICByZXR1cm4gW2Rhc2hWYWx1ZV8xLCBkYXNoVmFsdWVfMV07XG4gIH1cblxuICB2YXIgZGFzaFZhbHVlID0gbWFwKGRhc2gsIGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIE1hdGguY2VpbChuKTtcbiAgfSk7XG4gIHJldHVybiBkYXNoLmxlbmd0aCAlIDIgPyBkYXNoVmFsdWUuY29uY2F0KGRhc2hWYWx1ZSkgOiBkYXNoVmFsdWU7XG59XG4vKipcclxuICogR2V0IGJsb2NrIGxlbmd0aCBvZiBlYWNoIGxpbmUuIEEgYmxvY2sgaXMgdGhlIGxlbmd0aCBvZiBkYXNoIGxpbmUgYW5kIHNwYWNlLlxyXG4gKiBGb3IgZXhhbXBsZSwgYSBsaW5lIHdpdGggWzQsIDFdIGhhcyBhIGRhc2ggbGluZSBvZiA0IGFuZCBhIHNwYWNlIG9mIDEgYWZ0ZXJcclxuICogdGhhdCwgc28gdGhlIGJsb2NrIGxlbmd0aCBvZiB0aGlzIGxpbmUgaXMgNS5cclxuICpcclxuICogQHBhcmFtIHtudW1iZXJbXVtdfSBkYXNoIGRhc2ggYXJyYXkgb2YgWCBvciBZXHJcbiAqIEByZXR1cm4ge251bWJlcltdfSBibG9jayBsZW5ndGggb2YgZWFjaCBsaW5lXHJcbiAqL1xuXG5cbmZ1bmN0aW9uIGdldExpbmVCbG9ja0xlbmd0aFgoZGFzaCkge1xuICByZXR1cm4gbWFwKGRhc2gsIGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgcmV0dXJuIGdldExpbmVCbG9ja0xlbmd0aFkobGluZSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRMaW5lQmxvY2tMZW5ndGhZKGRhc2gpIHtcbiAgdmFyIGJsb2NrTGVuZ3RoID0gMDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGRhc2gubGVuZ3RoOyArK2kpIHtcbiAgICBibG9ja0xlbmd0aCArPSBkYXNoW2ldO1xuICB9XG5cbiAgaWYgKGRhc2gubGVuZ3RoICUgMiA9PT0gMSkge1xuICAgIC8vIFs0LCAyLCAxXSBtZWFucyB8LS0tLSAgLSAgICAtLSB8LS0tLSAgLSAgICAtLSB8XG4gICAgLy8gU28gdG90YWwgbGVuZ3RoIGlzICg0ICsgMiArIDEpICogMlxuICAgIHJldHVybiBibG9ja0xlbmd0aCAqIDI7XG4gIH1cblxuICByZXR1cm4gYmxvY2tMZW5ndGg7XG59IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgeyBjcmVhdGVPclVwZGF0ZVBhdHRlcm5Gcm9tRGVjYWwgfSBmcm9tICcuLi91dGlsL2RlY2FsLmpzJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRlY2FsVmlzdWFsKGVjTW9kZWwsIGFwaSkge1xuICBlY01vZGVsLmVhY2hSYXdTZXJpZXMoZnVuY3Rpb24gKHNlcmllc01vZGVsKSB7XG4gICAgaWYgKGVjTW9kZWwuaXNTZXJpZXNGaWx0ZXJlZChzZXJpZXNNb2RlbCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZGF0YSA9IHNlcmllc01vZGVsLmdldERhdGEoKTtcblxuICAgIGlmIChkYXRhLmhhc0l0ZW1WaXN1YWwoKSkge1xuICAgICAgZGF0YS5lYWNoKGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgICAgdmFyIGRlY2FsID0gZGF0YS5nZXRJdGVtVmlzdWFsKGlkeCwgJ2RlY2FsJyk7XG5cbiAgICAgICAgaWYgKGRlY2FsKSB7XG4gICAgICAgICAgdmFyIGl0ZW1TdHlsZSA9IGRhdGEuZW5zdXJlVW5pcXVlSXRlbVZpc3VhbChpZHgsICdzdHlsZScpO1xuICAgICAgICAgIGl0ZW1TdHlsZS5kZWNhbCA9IGNyZWF0ZU9yVXBkYXRlUGF0dGVybkZyb21EZWNhbChkZWNhbCwgYXBpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyIGRlY2FsID0gZGF0YS5nZXRWaXN1YWwoJ2RlY2FsJyk7XG5cbiAgICBpZiAoZGVjYWwpIHtcbiAgICAgIHZhciBzdHlsZSA9IGRhdGEuZ2V0VmlzdWFsKCdzdHlsZScpO1xuICAgICAgc3R5bGUuZGVjYWwgPSBjcmVhdGVPclVwZGF0ZVBhdHRlcm5Gcm9tRGVjYWwoZGVjYWwsIGFwaSk7XG4gICAgfVxuICB9KTtcbn0iLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCBFdmVudGZ1bCBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL0V2ZW50ZnVsLmpzJztcbjtcbnZhciBsaWZlY3ljbGUgPSBuZXcgRXZlbnRmdWwoKTtcbmV4cG9ydCBkZWZhdWx0IGxpZmVjeWNsZTsiLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCB7IGVycm9yIH0gZnJvbSAnLi4vdXRpbC9sb2cuanMnOyAvLyBJbXBsZW1lbnRhdGlvbiBvZiBleHBvcnRlZCBBUElzLiBGb3IgZXhhbXBsZSByZWdpc3Rlck1hcCwgZ2V0TWFwLlxuLy8gVGhlIGltcGxlbWVudGF0aW9ucyB3aWxsIGJlIHJlZ2lzdGVyZWQgd2hlbiBpbnN0YWxsaW5nIHRoZSBjb21wb25lbnQuXG4vLyBBdm9pZCB0aGVzZSBjb2RlIGJlaW5nIGJ1bmRsZWQgdG8gdGhlIGNvcmUgbW9kdWxlLlxuXG52YXIgaW1wbHNTdG9yZSA9IHt9OyAvLyBUT0RPIFR5cGVcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVySW1wbChuYW1lLCBpbXBsKSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKGltcGxzU3RvcmVbbmFtZV0pIHtcbiAgICAgIGVycm9yKFwiQWxyZWFkeSBoYXMgYW4gaW1wbGVtZW50YXRpb24gb2YgXCIgKyBuYW1lICsgXCIuXCIpO1xuICAgIH1cbiAgfVxuXG4gIGltcGxzU3RvcmVbbmFtZV0gPSBpbXBsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEltcGwobmFtZSkge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmICghaW1wbHNTdG9yZVtuYW1lXSkge1xuICAgICAgZXJyb3IoXCJJbXBsZW1lbnRhdGlvbiBvZiBcIiArIG5hbWUgKyBcIiBkb2Vzbid0IGV4aXN0cy5cIik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGltcGxzU3RvcmVbbmFtZV07XG59IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbmltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cblxuaW1wb3J0ICogYXMgenJlbmRlciBmcm9tICd6cmVuZGVyL2xpYi96cmVuZGVyLmpzJztcbmltcG9ydCB7IGFzc2VydCwgZWFjaCwgaXNGdW5jdGlvbiwgaXNPYmplY3QsIGluZGV4T2YsIGJpbmQsIGNsb25lLCBzZXRBc1ByaW1pdGl2ZSwgZXh0ZW5kLCBjcmVhdGVIYXNoTWFwLCBtYXAsIGRlZmF1bHRzLCBpc0RvbSwgaXNBcnJheSwgbm9vcCwgaXNTdHJpbmcsIHJldHJpZXZlMiB9IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgZW52IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvZW52LmpzJztcbmltcG9ydCB0aW1zb3J0IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdGltc29ydC5qcyc7XG5pbXBvcnQgRXZlbnRmdWwgZnJvbSAnenJlbmRlci9saWIvY29yZS9FdmVudGZ1bC5qcyc7XG5pbXBvcnQgR2xvYmFsTW9kZWwgZnJvbSAnLi4vbW9kZWwvR2xvYmFsLmpzJztcbmltcG9ydCBFeHRlbnNpb25BUEkgZnJvbSAnLi9FeHRlbnNpb25BUEkuanMnO1xuaW1wb3J0IENvb3JkaW5hdGVTeXN0ZW1NYW5hZ2VyIGZyb20gJy4vQ29vcmRpbmF0ZVN5c3RlbS5qcyc7XG5pbXBvcnQgT3B0aW9uTWFuYWdlciBmcm9tICcuLi9tb2RlbC9PcHRpb25NYW5hZ2VyLmpzJztcbmltcG9ydCBiYWNrd2FyZENvbXBhdCBmcm9tICcuLi9wcmVwcm9jZXNzb3IvYmFja3dhcmRDb21wYXQuanMnO1xuaW1wb3J0IGRhdGFTdGFjayBmcm9tICcuLi9wcm9jZXNzb3IvZGF0YVN0YWNrLmpzJztcbmltcG9ydCBTZXJpZXNNb2RlbCBmcm9tICcuLi9tb2RlbC9TZXJpZXMuanMnO1xuaW1wb3J0IENvbXBvbmVudFZpZXcgZnJvbSAnLi4vdmlldy9Db21wb25lbnQuanMnO1xuaW1wb3J0IENoYXJ0VmlldyBmcm9tICcuLi92aWV3L0NoYXJ0LmpzJztcbmltcG9ydCAqIGFzIGdyYXBoaWMgZnJvbSAnLi4vdXRpbC9ncmFwaGljLmpzJztcbmltcG9ydCB7IGdldEVDRGF0YSB9IGZyb20gJy4uL3V0aWwvaW5uZXJTdG9yZS5qcyc7XG5pbXBvcnQgeyBpc0hpZ2hEb3duRGlzcGF0Y2hlciwgSE9WRVJfU1RBVEVfRU1QSEFTSVMsIEhPVkVSX1NUQVRFX0JMVVIsIGJsdXJTZXJpZXNGcm9tSGlnaGxpZ2h0UGF5bG9hZCwgdG9nZ2xlU2VsZWN0aW9uRnJvbVBheWxvYWQsIHVwZGF0ZVNlcmllc0VsZW1lbnRTZWxlY3Rpb24sIGdldEFsbFNlbGVjdGVkSW5kaWNlcywgaXNTZWxlY3RDaGFuZ2VQYXlsb2FkLCBpc0hpZ2hEb3duUGF5bG9hZCwgSElHSExJR0hUX0FDVElPTl9UWVBFLCBET1dOUExBWV9BQ1RJT05fVFlQRSwgU0VMRUNUX0FDVElPTl9UWVBFLCBVTlNFTEVDVF9BQ1RJT05fVFlQRSwgVE9HR0xFX1NFTEVDVF9BQ1RJT05fVFlQRSwgc2F2ZVBhdGhTdGF0ZXMsIGVudGVyRW1waGFzaXMsIGxlYXZlRW1waGFzaXMsIGxlYXZlQmx1ciwgZW50ZXJTZWxlY3QsIGxlYXZlU2VsZWN0LCBlbnRlckJsdXIsIGFsbExlYXZlQmx1ciwgZmluZENvbXBvbmVudEhpZ2hEb3duRGlzcGF0Y2hlcnMsIGJsdXJDb21wb25lbnQsIGhhbmRsZUdsb2JhbE1vdXNlT3ZlckZvckhpZ2hEb3duLCBoYW5kbGVHbG9iYWxNb3VzZU91dEZvckhpZ2hEb3duIH0gZnJvbSAnLi4vdXRpbC9zdGF0ZXMuanMnO1xuaW1wb3J0ICogYXMgbW9kZWxVdGlsIGZyb20gJy4uL3V0aWwvbW9kZWwuanMnO1xuaW1wb3J0IHsgdGhyb3R0bGUgfSBmcm9tICcuLi91dGlsL3Rocm90dGxlLmpzJztcbmltcG9ydCB7IHNlcmllc1N0eWxlVGFzaywgZGF0YVN0eWxlVGFzaywgZGF0YUNvbG9yUGFsZXR0ZVRhc2sgfSBmcm9tICcuLi92aXN1YWwvc3R5bGUuanMnO1xuaW1wb3J0IGxvYWRpbmdEZWZhdWx0IGZyb20gJy4uL2xvYWRpbmcvZGVmYXVsdC5qcyc7XG5pbXBvcnQgU2NoZWR1bGVyIGZyb20gJy4vU2NoZWR1bGVyLmpzJztcbmltcG9ydCBsaWdodFRoZW1lIGZyb20gJy4uL3RoZW1lL2xpZ2h0LmpzJztcbmltcG9ydCBkYXJrVGhlbWUgZnJvbSAnLi4vdGhlbWUvZGFyay5qcyc7XG5pbXBvcnQgeyBwYXJzZUNsYXNzVHlwZSB9IGZyb20gJy4uL3V0aWwvY2xhenouanMnO1xuaW1wb3J0IHsgRUNFdmVudFByb2Nlc3NvciB9IGZyb20gJy4uL3V0aWwvRUNFdmVudFByb2Nlc3Nvci5qcyc7XG5pbXBvcnQgeyBzZXJpZXNTeW1ib2xUYXNrLCBkYXRhU3ltYm9sVGFzayB9IGZyb20gJy4uL3Zpc3VhbC9zeW1ib2wuanMnO1xuaW1wb3J0IHsgZ2V0VmlzdWFsRnJvbURhdGEsIGdldEl0ZW1WaXN1YWxGcm9tRGF0YSB9IGZyb20gJy4uL3Zpc3VhbC9oZWxwZXIuanMnO1xuaW1wb3J0IHsgZGVwcmVjYXRlTG9nLCBkZXByZWNhdGVSZXBsYWNlTG9nLCBlcnJvciwgd2FybiB9IGZyb20gJy4uL3V0aWwvbG9nLmpzJztcbmltcG9ydCB7IGhhbmRsZUxlZ2FjeVNlbGVjdEV2ZW50cyB9IGZyb20gJy4uL2xlZ2FjeS9kYXRhU2VsZWN0QWN0aW9uLmpzJztcbmltcG9ydCB7IHJlZ2lzdGVyRXh0ZXJuYWxUcmFuc2Zvcm0gfSBmcm9tICcuLi9kYXRhL2hlbHBlci90cmFuc2Zvcm0uanMnO1xuaW1wb3J0IHsgY3JlYXRlTG9jYWxlT2JqZWN0LCBTWVNURU1fTEFORyB9IGZyb20gJy4vbG9jYWxlLmpzJztcbmltcG9ydCB7IGZpbmRFdmVudERpc3BhdGNoZXIgfSBmcm9tICcuLi91dGlsL2V2ZW50LmpzJztcbmltcG9ydCBkZWNhbCBmcm9tICcuLi92aXN1YWwvZGVjYWwuanMnO1xuaW1wb3J0IGxpZmVjeWNsZSBmcm9tICcuL2xpZmVjeWNsZS5qcyc7XG5pbXBvcnQgeyBwbGF0Zm9ybUFwaSwgc2V0UGxhdGZvcm1BUEkgfSBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3BsYXRmb3JtLmpzJztcbmltcG9ydCB7IGdldEltcGwgfSBmcm9tICcuL2ltcGwuanMnO1xuZXhwb3J0IHZhciB2ZXJzaW9uID0gJzUuNC4zJztcbmV4cG9ydCB2YXIgZGVwZW5kZW5jaWVzID0ge1xuICB6cmVuZGVyOiAnNS40LjQnXG59O1xudmFyIFRFU1RfRlJBTUVfUkVNQUlOX1RJTUUgPSAxO1xudmFyIFBSSU9SSVRZX1BST0NFU1NPUl9TRVJJRVNfRklMVEVSID0gODAwOyAvLyBTb21lIGRhdGEgcHJvY2Vzc29ycyBkZXBlbmRzIG9uIHRoZSBzdGFjayByZXN1bHQgZGltZW5zaW9uICh0byBjYWxjdWxhdGUgZGF0YSBleHRlbnQpLlxuLy8gU28gZGF0YSBzdGFjayBzdGFnZSBzaG91bGQgYmUgaW4gZnJvbnQgb2YgZGF0YSBwcm9jZXNzaW5nIHN0YWdlLlxuXG52YXIgUFJJT1JJVFlfUFJPQ0VTU09SX0RBVEFTVEFDSyA9IDkwMDsgLy8gXCJEYXRhIGZpbHRlclwiIHdpbGwgYmxvY2sgdGhlIHN0cmVhbSwgc28gaXQgc2hvdWxkIGJlXG4vLyBwdXQgYXQgdGhlIGJlZ2lubmluZyBvZiBkYXRhIHByb2Nlc3NpbmcuXG5cbnZhciBQUklPUklUWV9QUk9DRVNTT1JfRklMVEVSID0gMTAwMDtcbnZhciBQUklPUklUWV9QUk9DRVNTT1JfREVGQVVMVCA9IDIwMDA7XG52YXIgUFJJT1JJVFlfUFJPQ0VTU09SX1NUQVRJU1RJQyA9IDUwMDA7XG52YXIgUFJJT1JJVFlfVklTVUFMX0xBWU9VVCA9IDEwMDA7XG52YXIgUFJJT1JJVFlfVklTVUFMX1BST0dSRVNTSVZFX0xBWU9VVCA9IDExMDA7XG52YXIgUFJJT1JJVFlfVklTVUFMX0dMT0JBTCA9IDIwMDA7XG52YXIgUFJJT1JJVFlfVklTVUFMX0NIQVJUID0gMzAwMDtcbnZhciBQUklPUklUWV9WSVNVQUxfQ09NUE9ORU5UID0gNDAwMDsgLy8gVmlzdWFsIHByb3BlcnR5IGluIGRhdGEuIEdyZWF0ZXIgdGhhbiBgUFJJT1JJVFlfVklTVUFMX0NPTVBPTkVOVGAgdG8gZW5hYmxlIHRvXG4vLyBvdmVyd3JpdGUgdGhlIHZpdXNhbCByZXN1bHQgb2YgY29tcG9uZW50IChsaWtlIGB2aXN1YWxNYXBgKVxuLy8gdXNpbmcgZGF0YSBpdGVtIHNwZWNpZmljIHNldHRpbmcgKGxpa2UgaXRlbVN0eWxlLnh4eCBvbiBkYXRhIGl0ZW0pXG5cbnZhciBQUklPUklUWV9WSVNVQUxfQ0hBUlRfREFUQV9DVVNUT00gPSA0NTAwOyAvLyBHcmVhdGVyIHRoYW4gYFBSSU9SSVRZX1ZJU1VBTF9DSEFSVF9EQVRBX0NVU1RPTWAgdG8gZW5hYmxlIHRvIGxheW91dCBiYXNlZCBvblxuLy8gdmlzdWFsIHJlc3VsdCBsaWtlIGBzeW1ib2xTaXplYC5cblxudmFyIFBSSU9SSVRZX1ZJU1VBTF9QT1NUX0NIQVJUX0xBWU9VVCA9IDQ2MDA7XG52YXIgUFJJT1JJVFlfVklTVUFMX0JSVVNIID0gNTAwMDtcbnZhciBQUklPUklUWV9WSVNVQUxfQVJJQSA9IDYwMDA7XG52YXIgUFJJT1JJVFlfVklTVUFMX0RFQ0FMID0gNzAwMDtcbmV4cG9ydCB2YXIgUFJJT1JJVFkgPSB7XG4gIFBST0NFU1NPUjoge1xuICAgIEZJTFRFUjogUFJJT1JJVFlfUFJPQ0VTU09SX0ZJTFRFUixcbiAgICBTRVJJRVNfRklMVEVSOiBQUklPUklUWV9QUk9DRVNTT1JfU0VSSUVTX0ZJTFRFUixcbiAgICBTVEFUSVNUSUM6IFBSSU9SSVRZX1BST0NFU1NPUl9TVEFUSVNUSUNcbiAgfSxcbiAgVklTVUFMOiB7XG4gICAgTEFZT1VUOiBQUklPUklUWV9WSVNVQUxfTEFZT1VULFxuICAgIFBST0dSRVNTSVZFX0xBWU9VVDogUFJJT1JJVFlfVklTVUFMX1BST0dSRVNTSVZFX0xBWU9VVCxcbiAgICBHTE9CQUw6IFBSSU9SSVRZX1ZJU1VBTF9HTE9CQUwsXG4gICAgQ0hBUlQ6IFBSSU9SSVRZX1ZJU1VBTF9DSEFSVCxcbiAgICBQT1NUX0NIQVJUX0xBWU9VVDogUFJJT1JJVFlfVklTVUFMX1BPU1RfQ0hBUlRfTEFZT1VULFxuICAgIENPTVBPTkVOVDogUFJJT1JJVFlfVklTVUFMX0NPTVBPTkVOVCxcbiAgICBCUlVTSDogUFJJT1JJVFlfVklTVUFMX0JSVVNILFxuICAgIENIQVJUX0lURU06IFBSSU9SSVRZX1ZJU1VBTF9DSEFSVF9EQVRBX0NVU1RPTSxcbiAgICBBUklBOiBQUklPUklUWV9WSVNVQUxfQVJJQSxcbiAgICBERUNBTDogUFJJT1JJVFlfVklTVUFMX0RFQ0FMXG4gIH1cbn07IC8vIE1haW4gcHJvY2VzcyBoYXZlIHRocmVlIGVudHJpZXM6IGBzZXRPcHRpb25gLCBgZGlzcGF0Y2hBY3Rpb25gIGFuZCBgcmVzaXplYCxcbi8vIHdoZXJlIHRoZXkgbXVzdCBub3QgYmUgaW52b2tlZCBuZXN0ZWRseSwgZXhjZXB0IHRoZSBvbmx5IGNhc2U6IGludm9rZVxuLy8gZGlzcGF0Y2hBY3Rpb24gd2l0aCB1cGRhdGVNZXRob2QgXCJub25lXCIgaW4gbWFpbiBwcm9jZXNzLlxuLy8gVGhpcyBmbGFnIGlzIHVzZWQgdG8gY2Fycnkgb3V0IHRoaXMgcnVsZS5cbi8vIEFsbCBldmVudHMgd2lsbCBiZSB0cmlnZ2VyZWQgb3V0IHNpZGUgbWFpbiBwcm9jZXNzIChpLmUuIHdoZW4gIXRoaXNbSU5fTUFJTl9QUk9DRVNTXSkuXG5cbnZhciBJTl9NQUlOX1BST0NFU1NfS0VZID0gJ19fZmxhZ0luTWFpblByb2Nlc3MnO1xudmFyIFBFTkRJTkdfVVBEQVRFID0gJ19fcGVuZGluZ1VwZGF0ZSc7XG52YXIgU1RBVFVTX05FRURTX1VQREFURV9LRVkgPSAnX19uZWVkc1VwZGF0ZVN0YXR1cyc7XG52YXIgQUNUSU9OX1JFRyA9IC9eW2EtekEtWjAtOV9dKyQvO1xudmFyIENPTk5FQ1RfU1RBVFVTX0tFWSA9ICdfX2Nvbm5lY3RVcGRhdGVTdGF0dXMnO1xudmFyIENPTk5FQ1RfU1RBVFVTX1BFTkRJTkcgPSAwO1xudmFyIENPTk5FQ1RfU1RBVFVTX1VQREFUSU5HID0gMTtcbnZhciBDT05ORUNUX1NUQVRVU19VUERBVEVEID0gMjtcbjtcbjtcblxuZnVuY3Rpb24gY3JlYXRlUmVnaXN0ZXJFdmVudFdpdGhMb3dlcmNhc2VFQ2hhcnRzKG1ldGhvZCkge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzID0gW107XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzRGlzcG9zZWQoKSkge1xuICAgICAgZGlzcG9zZWRXYXJuaW5nKHRoaXMuaWQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiB0b0xvd2VyY2FzZU5hbWVBbmRDYWxsRXZlbnRmdWwodGhpcywgbWV0aG9kLCBhcmdzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlUmVnaXN0ZXJFdmVudFdpdGhMb3dlcmNhc2VNZXNzYWdlQ2VudGVyKG1ldGhvZCkge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzID0gW107XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cblxuICAgIHJldHVybiB0b0xvd2VyY2FzZU5hbWVBbmRDYWxsRXZlbnRmdWwodGhpcywgbWV0aG9kLCBhcmdzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdG9Mb3dlcmNhc2VOYW1lQW5kQ2FsbEV2ZW50ZnVsKGhvc3QsIG1ldGhvZCwgYXJncykge1xuICAvLyBgYXJnc1swXWAgaXMgZXZlbnQgbmFtZS4gRXZlbnQgbmFtZSBpcyBhbGwgbG93ZXJjYXNlLlxuICBhcmdzWzBdID0gYXJnc1swXSAmJiBhcmdzWzBdLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiBFdmVudGZ1bC5wcm90b3R5cGVbbWV0aG9kXS5hcHBseShob3N0LCBhcmdzKTtcbn1cblxudmFyIE1lc3NhZ2VDZW50ZXIgPVxuLyoqIEBjbGFzcyAqL1xuZnVuY3Rpb24gKF9zdXBlcikge1xuICBfX2V4dGVuZHMoTWVzc2FnZUNlbnRlciwgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBNZXNzYWdlQ2VudGVyKCkge1xuICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgfVxuXG4gIHJldHVybiBNZXNzYWdlQ2VudGVyO1xufShFdmVudGZ1bCk7XG5cbnZhciBtZXNzYWdlQ2VudGVyUHJvdG8gPSBNZXNzYWdlQ2VudGVyLnByb3RvdHlwZTtcbm1lc3NhZ2VDZW50ZXJQcm90by5vbiA9IGNyZWF0ZVJlZ2lzdGVyRXZlbnRXaXRoTG93ZXJjYXNlTWVzc2FnZUNlbnRlcignb24nKTtcbm1lc3NhZ2VDZW50ZXJQcm90by5vZmYgPSBjcmVhdGVSZWdpc3RlckV2ZW50V2l0aExvd2VyY2FzZU1lc3NhZ2VDZW50ZXIoJ29mZicpOyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEludGVybmFsIG1ldGhvZCBuYW1lcyBmb3IgY2xhc3MgRUNoYXJ0c1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbnZhciBwcmVwYXJlO1xudmFyIHByZXBhcmVWaWV3O1xudmFyIHVwZGF0ZURpcmVjdGx5O1xudmFyIHVwZGF0ZU1ldGhvZHM7XG52YXIgZG9Db252ZXJ0UGl4ZWw7XG52YXIgdXBkYXRlU3RyZWFtTW9kZXM7XG52YXIgZG9EaXNwYXRjaEFjdGlvbjtcbnZhciBmbHVzaFBlbmRpbmdBY3Rpb25zO1xudmFyIHRyaWdnZXJVcGRhdGVkRXZlbnQ7XG52YXIgYmluZFJlbmRlcmVkRXZlbnQ7XG52YXIgYmluZE1vdXNlRXZlbnQ7XG52YXIgcmVuZGVyO1xudmFyIHJlbmRlckNvbXBvbmVudHM7XG52YXIgcmVuZGVyU2VyaWVzO1xudmFyIGNyZWF0ZUV4dGVuc2lvbkFQSTtcbnZhciBlbmFibGVDb25uZWN0O1xudmFyIG1hcmtTdGF0dXNUb1VwZGF0ZTtcbnZhciBhcHBseUNoYW5nZWRTdGF0ZXM7XG5cbnZhciBFQ2hhcnRzID1cbi8qKiBAY2xhc3MgKi9cbmZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgX19leHRlbmRzKEVDaGFydHMsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gRUNoYXJ0cyhkb20sIC8vIFRoZW1lIG5hbWUgb3IgdGhlbWVPcHRpb24uXG4gIHRoZW1lLCBvcHRzKSB7XG4gICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbmV3IEVDRXZlbnRQcm9jZXNzb3IoKSkgfHwgdGhpcztcblxuICAgIF90aGlzLl9jaGFydHNWaWV3cyA9IFtdO1xuICAgIF90aGlzLl9jaGFydHNNYXAgPSB7fTtcbiAgICBfdGhpcy5fY29tcG9uZW50c1ZpZXdzID0gW107XG4gICAgX3RoaXMuX2NvbXBvbmVudHNNYXAgPSB7fTsgLy8gQ2FuJ3QgZGlzcGF0Y2ggYWN0aW9uIGR1cmluZyByZW5kZXJpbmcgcHJvY2VkdXJlXG5cbiAgICBfdGhpcy5fcGVuZGluZ0FjdGlvbnMgPSBbXTtcbiAgICBvcHRzID0gb3B0cyB8fCB7fTsgLy8gR2V0IHRoZW1lIGJ5IG5hbWVcblxuICAgIGlmIChpc1N0cmluZyh0aGVtZSkpIHtcbiAgICAgIHRoZW1lID0gdGhlbWVTdG9yYWdlW3RoZW1lXTtcbiAgICB9XG5cbiAgICBfdGhpcy5fZG9tID0gZG9tO1xuICAgIHZhciBkZWZhdWx0UmVuZGVyZXIgPSAnY2FudmFzJztcbiAgICB2YXIgZGVmYXVsdENvYXJzZVBvaW50ZXIgPSAnYXV0byc7XG4gICAgdmFyIGRlZmF1bHRVc2VEaXJ0eVJlY3QgPSBmYWxzZTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgcm9vdCA9XG4gICAgICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgKi9cbiAgICAgIGVudi5oYXNHbG9iYWxXaW5kb3cgPyB3aW5kb3cgOiBnbG9iYWw7XG4gICAgICBkZWZhdWx0UmVuZGVyZXIgPSByb290Ll9fRUNIQVJUU19fREVGQVVMVF9fUkVOREVSRVJfXyB8fCBkZWZhdWx0UmVuZGVyZXI7XG4gICAgICBkZWZhdWx0Q29hcnNlUG9pbnRlciA9IHJldHJpZXZlMihyb290Ll9fRUNIQVJUU19fREVGQVVMVF9fQ09BUlNFX1BPSU5URVIsIGRlZmF1bHRDb2Fyc2VQb2ludGVyKTtcbiAgICAgIHZhciBkZXZVc2VEaXJ0eVJlY3QgPSByb290Ll9fRUNIQVJUU19fREVGQVVMVF9fVVNFX0RJUlRZX1JFQ1RfXztcbiAgICAgIGRlZmF1bHRVc2VEaXJ0eVJlY3QgPSBkZXZVc2VEaXJ0eVJlY3QgPT0gbnVsbCA/IGRlZmF1bHRVc2VEaXJ0eVJlY3QgOiBkZXZVc2VEaXJ0eVJlY3Q7XG4gICAgfVxuXG4gICAgdmFyIHpyID0gX3RoaXMuX3pyID0genJlbmRlci5pbml0KGRvbSwge1xuICAgICAgcmVuZGVyZXI6IG9wdHMucmVuZGVyZXIgfHwgZGVmYXVsdFJlbmRlcmVyLFxuICAgICAgZGV2aWNlUGl4ZWxSYXRpbzogb3B0cy5kZXZpY2VQaXhlbFJhdGlvLFxuICAgICAgd2lkdGg6IG9wdHMud2lkdGgsXG4gICAgICBoZWlnaHQ6IG9wdHMuaGVpZ2h0LFxuICAgICAgc3NyOiBvcHRzLnNzcixcbiAgICAgIHVzZURpcnR5UmVjdDogcmV0cmlldmUyKG9wdHMudXNlRGlydHlSZWN0LCBkZWZhdWx0VXNlRGlydHlSZWN0KSxcbiAgICAgIHVzZUNvYXJzZVBvaW50ZXI6IHJldHJpZXZlMihvcHRzLnVzZUNvYXJzZVBvaW50ZXIsIGRlZmF1bHRDb2Fyc2VQb2ludGVyKSxcbiAgICAgIHBvaW50ZXJTaXplOiBvcHRzLnBvaW50ZXJTaXplXG4gICAgfSk7XG4gICAgX3RoaXMuX3NzciA9IG9wdHMuc3NyOyAvLyBFeHBlY3QgNjAgZnBzLlxuXG4gICAgX3RoaXMuX3Rocm90dGxlZFpyRmx1c2ggPSB0aHJvdHRsZShiaW5kKHpyLmZsdXNoLCB6ciksIDE3KTtcbiAgICB0aGVtZSA9IGNsb25lKHRoZW1lKTtcbiAgICB0aGVtZSAmJiBiYWNrd2FyZENvbXBhdCh0aGVtZSwgdHJ1ZSk7XG4gICAgX3RoaXMuX3RoZW1lID0gdGhlbWU7XG4gICAgX3RoaXMuX2xvY2FsZSA9IGNyZWF0ZUxvY2FsZU9iamVjdChvcHRzLmxvY2FsZSB8fCBTWVNURU1fTEFORyk7XG4gICAgX3RoaXMuX2Nvb3JkU3lzTWdyID0gbmV3IENvb3JkaW5hdGVTeXN0ZW1NYW5hZ2VyKCk7XG4gICAgdmFyIGFwaSA9IF90aGlzLl9hcGkgPSBjcmVhdGVFeHRlbnNpb25BUEkoX3RoaXMpOyAvLyBTb3J0IG9uIGRlbWFuZFxuXG4gICAgZnVuY3Rpb24gcHJpb3JpdHlTb3J0RnVuYyhhLCBiKSB7XG4gICAgICByZXR1cm4gYS5fX3ByaW8gLSBiLl9fcHJpbztcbiAgICB9XG5cbiAgICB0aW1zb3J0KHZpc3VhbEZ1bmNzLCBwcmlvcml0eVNvcnRGdW5jKTtcbiAgICB0aW1zb3J0KGRhdGFQcm9jZXNzb3JGdW5jcywgcHJpb3JpdHlTb3J0RnVuYyk7XG4gICAgX3RoaXMuX3NjaGVkdWxlciA9IG5ldyBTY2hlZHVsZXIoX3RoaXMsIGFwaSwgZGF0YVByb2Nlc3NvckZ1bmNzLCB2aXN1YWxGdW5jcyk7XG4gICAgX3RoaXMuX21lc3NhZ2VDZW50ZXIgPSBuZXcgTWVzc2FnZUNlbnRlcigpOyAvLyBJbml0IG1vdXNlIGV2ZW50c1xuXG4gICAgX3RoaXMuX2luaXRFdmVudHMoKTsgLy8gSW4gY2FzZSBzb21lIHBlb3BsZSB3cml0ZSBgd2luZG93Lm9ucmVzaXplID0gY2hhcnQucmVzaXplYFxuXG5cbiAgICBfdGhpcy5yZXNpemUgPSBiaW5kKF90aGlzLnJlc2l6ZSwgX3RoaXMpO1xuICAgIHpyLmFuaW1hdGlvbi5vbignZnJhbWUnLCBfdGhpcy5fb25mcmFtZSwgX3RoaXMpO1xuICAgIGJpbmRSZW5kZXJlZEV2ZW50KHpyLCBfdGhpcyk7XG4gICAgYmluZE1vdXNlRXZlbnQoenIsIF90aGlzKTsgLy8gRUNoYXJ0cyBpbnN0YW5jZSBjYW4gYmUgdXNlZCBhcyB2YWx1ZS5cblxuICAgIHNldEFzUHJpbWl0aXZlKF90aGlzKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBFQ2hhcnRzLnByb3RvdHlwZS5fb25mcmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fZGlzcG9zZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBhcHBseUNoYW5nZWRTdGF0ZXModGhpcyk7XG4gICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuX3NjaGVkdWxlcjsgLy8gTGF6eSB1cGRhdGVcblxuICAgIGlmICh0aGlzW1BFTkRJTkdfVVBEQVRFXSkge1xuICAgICAgdmFyIHNpbGVudCA9IHRoaXNbUEVORElOR19VUERBVEVdLnNpbGVudDtcbiAgICAgIHRoaXNbSU5fTUFJTl9QUk9DRVNTX0tFWV0gPSB0cnVlO1xuXG4gICAgICB0cnkge1xuICAgICAgICBwcmVwYXJlKHRoaXMpO1xuICAgICAgICB1cGRhdGVNZXRob2RzLnVwZGF0ZS5jYWxsKHRoaXMsIG51bGwsIHRoaXNbUEVORElOR19VUERBVEVdLnVwZGF0ZVBhcmFtcyk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHRoaXNbSU5fTUFJTl9QUk9DRVNTX0tFWV0gPSBmYWxzZTtcbiAgICAgICAgdGhpc1tQRU5ESU5HX1VQREFURV0gPSBudWxsO1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfSAvLyBBdCBwcmVzZW50LCBpbiBlYWNoIGZyYW1lLCB6cmVuZGVyIHBlcmZvcm1zOlxuICAgICAgLy8gICAoMSkgYW5pbWF0aW9uIHN0ZXAgZm9yd2FyZC5cbiAgICAgIC8vICAgKDIpIHRyaWdnZXIoJ2ZyYW1lJykgKHdoZXJlIHRoaXMgYF9vbmZyYW1lYCBpcyBjYWxsZWQpXG4gICAgICAvLyAgICgzKSB6cmVuZGVyIGZsdXNoIChyZW5kZXIpLlxuICAgICAgLy8gSWYgd2UgZG8gbm90aGluZyBoZXJlLCBzaW5jZSB3ZSB1c2UgYHNldFRvRmluYWw6IHRydWVgLCB0aGUgc3RlcCAoMykgYWJvdmVcbiAgICAgIC8vIHdpbGwgcmVuZGVyIHRoZSBmaW5hbCBzdGF0ZSBvZiB0aGUgZWxlbWVudHMgYmVmb3JlIHRoZSByZWFsIGFuaW1hdGlvbiBzdGFydGVkLlxuXG5cbiAgICAgIHRoaXMuX3pyLmZsdXNoKCk7XG5cbiAgICAgIHRoaXNbSU5fTUFJTl9QUk9DRVNTX0tFWV0gPSBmYWxzZTtcbiAgICAgIHRoaXNbUEVORElOR19VUERBVEVdID0gbnVsbDtcbiAgICAgIGZsdXNoUGVuZGluZ0FjdGlvbnMuY2FsbCh0aGlzLCBzaWxlbnQpO1xuICAgICAgdHJpZ2dlclVwZGF0ZWRFdmVudC5jYWxsKHRoaXMsIHNpbGVudCk7XG4gICAgfSAvLyBBdm9pZCBkbyBib3RoIGxhenkgdXBkYXRlIGFuZCBwcm9ncmVzcyBpbiBvbmUgZnJhbWUuXG4gICAgZWxzZSBpZiAoc2NoZWR1bGVyLnVuZmluaXNoZWQpIHtcbiAgICAgICAgLy8gU3RyZWFtIHByb2dyZXNzLlxuICAgICAgICB2YXIgcmVtYWluVGltZSA9IFRFU1RfRlJBTUVfUkVNQUlOX1RJTUU7XG4gICAgICAgIHZhciBlY01vZGVsID0gdGhpcy5fbW9kZWw7XG4gICAgICAgIHZhciBhcGkgPSB0aGlzLl9hcGk7XG4gICAgICAgIHNjaGVkdWxlci51bmZpbmlzaGVkID0gZmFsc2U7XG5cbiAgICAgICAgZG8ge1xuICAgICAgICAgIHZhciBzdGFydFRpbWUgPSArbmV3IERhdGUoKTtcbiAgICAgICAgICBzY2hlZHVsZXIucGVyZm9ybVNlcmllc1Rhc2tzKGVjTW9kZWwpOyAvLyBDdXJyZW50bHkgZGF0YVByb2Nlc3NvckZ1bmNzIGRvIG5vdCBjaGVjayB0aHJlc2hvbGQuXG5cbiAgICAgICAgICBzY2hlZHVsZXIucGVyZm9ybURhdGFQcm9jZXNzb3JUYXNrcyhlY01vZGVsKTtcbiAgICAgICAgICB1cGRhdGVTdHJlYW1Nb2Rlcyh0aGlzLCBlY01vZGVsKTsgLy8gRG8gbm90IHVwZGF0ZSBjb29yZGluYXRlIHN5c3RlbSBoZXJlLiBCZWNhdXNlIHRoYXQgY29vcmQgc3lzdGVtIHVwZGF0ZSBpblxuICAgICAgICAgIC8vIGVhY2ggZnJhbWUgaXMgbm90IGEgZ29vZCB1c2VyIGV4cGVyaWVuY2UuIFNvIHdlIGZvbGxvdyB0aGUgcnVsZSB0aGF0XG4gICAgICAgICAgLy8gdGhlIGV4dGVudCBvZiB0aGUgY29vcmRpbmF0ZSBzeXN0ZW0gaXMgZGV0ZXJtaW5lZCBpbiB0aGUgZmlyc3QgZnJhbWUgKHRoZVxuICAgICAgICAgIC8vIGZyYW1lIGlzIGV4ZWN1dGVkIGltbWVkaWF0ZWx5IGFmdGVyIHRhc2sgcmVzZXQuXG4gICAgICAgICAgLy8gdGhpcy5fY29vcmRTeXNNZ3IudXBkYXRlKGVjTW9kZWwsIGFwaSk7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coJy0tLSBlYyBmcmFtZSB2aXN1YWwgLS0tJywgcmVtYWluVGltZSk7XG5cbiAgICAgICAgICBzY2hlZHVsZXIucGVyZm9ybVZpc3VhbFRhc2tzKGVjTW9kZWwpO1xuICAgICAgICAgIHJlbmRlclNlcmllcyh0aGlzLCB0aGlzLl9tb2RlbCwgYXBpLCAncmVtYWluJywge30pO1xuICAgICAgICAgIHJlbWFpblRpbWUgLT0gK25ldyBEYXRlKCkgLSBzdGFydFRpbWU7XG4gICAgICAgIH0gd2hpbGUgKHJlbWFpblRpbWUgPiAwICYmIHNjaGVkdWxlci51bmZpbmlzaGVkKTsgLy8gQ2FsbCBmbHVzaCBleHBsaWNpdGx5IGZvciB0cmlnZ2VyIGZpbmlzaGVkIGV2ZW50LlxuXG5cbiAgICAgICAgaWYgKCFzY2hlZHVsZXIudW5maW5pc2hlZCkge1xuICAgICAgICAgIHRoaXMuX3pyLmZsdXNoKCk7XG4gICAgICAgIH0gLy8gRWxzZSwgenIgZmx1c2hpbmcgYmUgZW5zdWUgd2l0aGluIHRoZSBzYW1lIGZyYW1lLFxuICAgICAgICAvLyBiZWNhdXNlIHpyIGZsdXNoaW5nIGlzIGFmdGVyIG9uZnJhbWUgZXZlbnQuXG5cbiAgICAgIH1cbiAgfTtcblxuICBFQ2hhcnRzLnByb3RvdHlwZS5nZXREb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RvbTtcbiAgfTtcblxuICBFQ2hhcnRzLnByb3RvdHlwZS5nZXRJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5pZDtcbiAgfTtcblxuICBFQ2hhcnRzLnByb3RvdHlwZS5nZXRaciA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fenI7XG4gIH07XG5cbiAgRUNoYXJ0cy5wcm90b3R5cGUuaXNTU1IgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NzcjtcbiAgfTtcbiAgLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lICovXG5cblxuICBFQ2hhcnRzLnByb3RvdHlwZS5zZXRPcHRpb24gPSBmdW5jdGlvbiAob3B0aW9uLCBub3RNZXJnZSwgbGF6eVVwZGF0ZSkge1xuICAgIGlmICh0aGlzW0lOX01BSU5fUFJPQ0VTU19LRVldKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBlcnJvcignYHNldE9wdGlvbmAgc2hvdWxkIG5vdCBiZSBjYWxsZWQgZHVyaW5nIG1haW4gcHJvY2Vzcy4nKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9kaXNwb3NlZCkge1xuICAgICAgZGlzcG9zZWRXYXJuaW5nKHRoaXMuaWQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBzaWxlbnQ7XG4gICAgdmFyIHJlcGxhY2VNZXJnZTtcbiAgICB2YXIgdHJhbnNpdGlvbk9wdDtcblxuICAgIGlmIChpc09iamVjdChub3RNZXJnZSkpIHtcbiAgICAgIGxhenlVcGRhdGUgPSBub3RNZXJnZS5sYXp5VXBkYXRlO1xuICAgICAgc2lsZW50ID0gbm90TWVyZ2Uuc2lsZW50O1xuICAgICAgcmVwbGFjZU1lcmdlID0gbm90TWVyZ2UucmVwbGFjZU1lcmdlO1xuICAgICAgdHJhbnNpdGlvbk9wdCA9IG5vdE1lcmdlLnRyYW5zaXRpb247XG4gICAgICBub3RNZXJnZSA9IG5vdE1lcmdlLm5vdE1lcmdlO1xuICAgIH1cblxuICAgIHRoaXNbSU5fTUFJTl9QUk9DRVNTX0tFWV0gPSB0cnVlO1xuXG4gICAgaWYgKCF0aGlzLl9tb2RlbCB8fCBub3RNZXJnZSkge1xuICAgICAgdmFyIG9wdGlvbk1hbmFnZXIgPSBuZXcgT3B0aW9uTWFuYWdlcih0aGlzLl9hcGkpO1xuICAgICAgdmFyIHRoZW1lID0gdGhpcy5fdGhlbWU7XG4gICAgICB2YXIgZWNNb2RlbCA9IHRoaXMuX21vZGVsID0gbmV3IEdsb2JhbE1vZGVsKCk7XG4gICAgICBlY01vZGVsLnNjaGVkdWxlciA9IHRoaXMuX3NjaGVkdWxlcjtcbiAgICAgIGVjTW9kZWwuc3NyID0gdGhpcy5fc3NyO1xuICAgICAgZWNNb2RlbC5pbml0KG51bGwsIG51bGwsIG51bGwsIHRoZW1lLCB0aGlzLl9sb2NhbGUsIG9wdGlvbk1hbmFnZXIpO1xuICAgIH1cblxuICAgIHRoaXMuX21vZGVsLnNldE9wdGlvbihvcHRpb24sIHtcbiAgICAgIHJlcGxhY2VNZXJnZTogcmVwbGFjZU1lcmdlXG4gICAgfSwgb3B0aW9uUHJlcHJvY2Vzc29yRnVuY3MpO1xuXG4gICAgdmFyIHVwZGF0ZVBhcmFtcyA9IHtcbiAgICAgIHNlcmllc1RyYW5zaXRpb246IHRyYW5zaXRpb25PcHQsXG4gICAgICBvcHRpb25DaGFuZ2VkOiB0cnVlXG4gICAgfTtcblxuICAgIGlmIChsYXp5VXBkYXRlKSB7XG4gICAgICB0aGlzW1BFTkRJTkdfVVBEQVRFXSA9IHtcbiAgICAgICAgc2lsZW50OiBzaWxlbnQsXG4gICAgICAgIHVwZGF0ZVBhcmFtczogdXBkYXRlUGFyYW1zXG4gICAgICB9O1xuICAgICAgdGhpc1tJTl9NQUlOX1BST0NFU1NfS0VZXSA9IGZhbHNlOyAvLyBgc2V0T3B0aW9uKG9wdGlvbiwge2xhenlNb2RlOiB0cnVlfSlgIG1heSBiZSBjYWxsZWQgd2hlbiB6cmVuZGVyIGhhcyBiZWVuIHNsZXB0LlxuICAgICAgLy8gSXQgc2hvdWxkIHdha2UgaXQgdXAgdG8gbWFrZSBzdXJlIHpyZW5kZXIgc3RhcnQgdG8gcmVuZGVyIGF0IHRoZSBuZXh0IGZyYW1lLlxuXG4gICAgICB0aGlzLmdldFpyKCkud2FrZVVwKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHByZXBhcmUodGhpcyk7XG4gICAgICAgIHVwZGF0ZU1ldGhvZHMudXBkYXRlLmNhbGwodGhpcywgbnVsbCwgdXBkYXRlUGFyYW1zKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhpc1tQRU5ESU5HX1VQREFURV0gPSBudWxsO1xuICAgICAgICB0aGlzW0lOX01BSU5fUFJPQ0VTU19LRVldID0gZmFsc2U7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9IC8vIEVuc3VyZSB6ciByZWZyZXNoIHN5Y2hyb25vdXNseSwgYW5kIHRoZW4gcGl4ZWwgaW4gY2FudmFzIGNhbiBiZVxuICAgICAgLy8gZmV0Y2hlZCBhZnRlciBgc2V0T3B0aW9uYC5cblxuXG4gICAgICBpZiAoIXRoaXMuX3Nzcikge1xuICAgICAgICAvLyBub3QgdXNlIGZsdXNoIHdoZW4gdXNpbmcgc3NyIG1vZGUuXG4gICAgICAgIHRoaXMuX3pyLmZsdXNoKCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXNbUEVORElOR19VUERBVEVdID0gbnVsbDtcbiAgICAgIHRoaXNbSU5fTUFJTl9QUk9DRVNTX0tFWV0gPSBmYWxzZTtcbiAgICAgIGZsdXNoUGVuZGluZ0FjdGlvbnMuY2FsbCh0aGlzLCBzaWxlbnQpO1xuICAgICAgdHJpZ2dlclVwZGF0ZWRFdmVudC5jYWxsKHRoaXMsIHNpbGVudCk7XG4gICAgfVxuICB9O1xuICAvKipcclxuICAgKiBAZGVwcmVjYXRlZFxyXG4gICAqL1xuXG5cbiAgRUNoYXJ0cy5wcm90b3R5cGUuc2V0VGhlbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgZGVwcmVjYXRlTG9nKCdFQ2hhcnRzI3NldFRoZW1lKCkgaXMgREVQUkVDQVRFRCBpbiBFQ2hhcnRzIDMuMCcpO1xuICB9OyAvLyBXZSBkb24ndCB3YW50IGRldmVsb3BlcnMgdG8gdXNlIGdldE1vZGVsIGRpcmVjdGx5LlxuXG5cbiAgRUNoYXJ0cy5wcm90b3R5cGUuZ2V0TW9kZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX21vZGVsO1xuICB9O1xuXG4gIEVDaGFydHMucHJvdG90eXBlLmdldE9wdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fbW9kZWwgJiYgdGhpcy5fbW9kZWwuZ2V0T3B0aW9uKCk7XG4gIH07XG5cbiAgRUNoYXJ0cy5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3pyLmdldFdpZHRoKCk7XG4gIH07XG5cbiAgRUNoYXJ0cy5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl96ci5nZXRIZWlnaHQoKTtcbiAgfTtcblxuICBFQ2hhcnRzLnByb3RvdHlwZS5nZXREZXZpY2VQaXhlbFJhdGlvID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl96ci5wYWludGVyLmRwclxuICAgIC8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSAqL1xuICAgIHx8IGVudi5oYXNHbG9iYWxXaW5kb3cgJiYgd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMTtcbiAgfTtcbiAgLyoqXHJcbiAgICogR2V0IGNhbnZhcyB3aGljaCBoYXMgYWxsIHRoaW5nIHJlbmRlcmVkXHJcbiAgICogQGRlcHJlY2F0ZWQgVXNlIHJlbmRlclRvQ2FudmFzIGluc3RlYWQuXHJcbiAgICovXG5cblxuICBFQ2hhcnRzLnByb3RvdHlwZS5nZXRSZW5kZXJlZENhbnZhcyA9IGZ1bmN0aW9uIChvcHRzKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGRlcHJlY2F0ZVJlcGxhY2VMb2coJ2dldFJlbmRlcmVkQ2FudmFzJywgJ3JlbmRlclRvQ2FudmFzJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucmVuZGVyVG9DYW52YXMob3B0cyk7XG4gIH07XG5cbiAgRUNoYXJ0cy5wcm90b3R5cGUucmVuZGVyVG9DYW52YXMgPSBmdW5jdGlvbiAob3B0cykge1xuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuICAgIHZhciBwYWludGVyID0gdGhpcy5fenIucGFpbnRlcjtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAocGFpbnRlci50eXBlICE9PSAnY2FudmFzJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3JlbmRlclRvQ2FudmFzIGNhbiBvbmx5IGJlIHVzZWQgaW4gdGhlIGNhbnZhcyByZW5kZXJlci4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcGFpbnRlci5nZXRSZW5kZXJlZENhbnZhcyh7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IG9wdHMuYmFja2dyb3VuZENvbG9yIHx8IHRoaXMuX21vZGVsLmdldCgnYmFja2dyb3VuZENvbG9yJyksXG4gICAgICBwaXhlbFJhdGlvOiBvcHRzLnBpeGVsUmF0aW8gfHwgdGhpcy5nZXREZXZpY2VQaXhlbFJhdGlvKClcbiAgICB9KTtcbiAgfTtcblxuICBFQ2hhcnRzLnByb3RvdHlwZS5yZW5kZXJUb1NWR1N0cmluZyA9IGZ1bmN0aW9uIChvcHRzKSB7XG4gICAgb3B0cyA9IG9wdHMgfHwge307XG4gICAgdmFyIHBhaW50ZXIgPSB0aGlzLl96ci5wYWludGVyO1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGlmIChwYWludGVyLnR5cGUgIT09ICdzdmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigncmVuZGVyVG9TVkdTdHJpbmcgY2FuIG9ubHkgYmUgdXNlZCBpbiB0aGUgc3ZnIHJlbmRlcmVyLicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwYWludGVyLnJlbmRlclRvU3RyaW5nKHtcbiAgICAgIHVzZVZpZXdCb3g6IG9wdHMudXNlVmlld0JveFxuICAgIH0pO1xuICB9O1xuICAvKipcclxuICAgKiBHZXQgc3ZnIGRhdGEgdXJsXHJcbiAgICovXG5cblxuICBFQ2hhcnRzLnByb3RvdHlwZS5nZXRTdmdEYXRhVVJMID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghZW52LnN2Z1N1cHBvcnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciB6ciA9IHRoaXMuX3pyO1xuICAgIHZhciBsaXN0ID0genIuc3RvcmFnZS5nZXREaXNwbGF5TGlzdCgpOyAvLyBTdG9wIGFuaW1hdGlvbnNcblxuICAgIGVhY2gobGlzdCwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICBlbC5zdG9wQW5pbWF0aW9uKG51bGwsIHRydWUpO1xuICAgIH0pO1xuICAgIHJldHVybiB6ci5wYWludGVyLnRvRGF0YVVSTCgpO1xuICB9O1xuXG4gIEVDaGFydHMucHJvdG90eXBlLmdldERhdGFVUkwgPSBmdW5jdGlvbiAob3B0cykge1xuICAgIGlmICh0aGlzLl9kaXNwb3NlZCkge1xuICAgICAgZGlzcG9zZWRXYXJuaW5nKHRoaXMuaWQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuICAgIHZhciBleGNsdWRlQ29tcG9uZW50cyA9IG9wdHMuZXhjbHVkZUNvbXBvbmVudHM7XG4gICAgdmFyIGVjTW9kZWwgPSB0aGlzLl9tb2RlbDtcbiAgICB2YXIgZXhjbHVkZXNDb21wb25lbnRWaWV3cyA9IFtdO1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBlYWNoKGV4Y2x1ZGVDb21wb25lbnRzLCBmdW5jdGlvbiAoY29tcG9uZW50VHlwZSkge1xuICAgICAgZWNNb2RlbC5lYWNoQ29tcG9uZW50KHtcbiAgICAgICAgbWFpblR5cGU6IGNvbXBvbmVudFR5cGVcbiAgICAgIH0sIGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgICAgdmFyIHZpZXcgPSBzZWxmLl9jb21wb25lbnRzTWFwW2NvbXBvbmVudC5fX3ZpZXdJZF07XG5cbiAgICAgICAgaWYgKCF2aWV3Lmdyb3VwLmlnbm9yZSkge1xuICAgICAgICAgIGV4Y2x1ZGVzQ29tcG9uZW50Vmlld3MucHVzaCh2aWV3KTtcbiAgICAgICAgICB2aWV3Lmdyb3VwLmlnbm9yZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHZhciB1cmwgPSB0aGlzLl96ci5wYWludGVyLmdldFR5cGUoKSA9PT0gJ3N2ZycgPyB0aGlzLmdldFN2Z0RhdGFVUkwoKSA6IHRoaXMucmVuZGVyVG9DYW52YXMob3B0cykudG9EYXRhVVJMKCdpbWFnZS8nICsgKG9wdHMgJiYgb3B0cy50eXBlIHx8ICdwbmcnKSk7XG4gICAgZWFjaChleGNsdWRlc0NvbXBvbmVudFZpZXdzLCBmdW5jdGlvbiAodmlldykge1xuICAgICAgdmlldy5ncm91cC5pZ25vcmUgPSBmYWxzZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdXJsO1xuICB9O1xuXG4gIEVDaGFydHMucHJvdG90eXBlLmdldENvbm5lY3RlZERhdGFVUkwgPSBmdW5jdGlvbiAob3B0cykge1xuICAgIGlmICh0aGlzLl9kaXNwb3NlZCkge1xuICAgICAgZGlzcG9zZWRXYXJuaW5nKHRoaXMuaWQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBpc1N2ZyA9IG9wdHMudHlwZSA9PT0gJ3N2Zyc7XG4gICAgdmFyIGdyb3VwSWQgPSB0aGlzLmdyb3VwO1xuICAgIHZhciBtYXRoTWluID0gTWF0aC5taW47XG4gICAgdmFyIG1hdGhNYXggPSBNYXRoLm1heDtcbiAgICB2YXIgTUFYX05VTUJFUiA9IEluZmluaXR5O1xuXG4gICAgaWYgKGNvbm5lY3RlZEdyb3Vwc1tncm91cElkXSkge1xuICAgICAgdmFyIGxlZnRfMSA9IE1BWF9OVU1CRVI7XG4gICAgICB2YXIgdG9wXzEgPSBNQVhfTlVNQkVSO1xuICAgICAgdmFyIHJpZ2h0XzEgPSAtTUFYX05VTUJFUjtcbiAgICAgIHZhciBib3R0b21fMSA9IC1NQVhfTlVNQkVSO1xuICAgICAgdmFyIGNhbnZhc0xpc3RfMSA9IFtdO1xuICAgICAgdmFyIGRwcl8xID0gb3B0cyAmJiBvcHRzLnBpeGVsUmF0aW8gfHwgdGhpcy5nZXREZXZpY2VQaXhlbFJhdGlvKCk7XG4gICAgICBlYWNoKGluc3RhbmNlcywgZnVuY3Rpb24gKGNoYXJ0LCBpZCkge1xuICAgICAgICBpZiAoY2hhcnQuZ3JvdXAgPT09IGdyb3VwSWQpIHtcbiAgICAgICAgICB2YXIgY2FudmFzID0gaXNTdmcgPyBjaGFydC5nZXRacigpLnBhaW50ZXIuZ2V0U3ZnRG9tKCkuaW5uZXJIVE1MIDogY2hhcnQucmVuZGVyVG9DYW52YXMoY2xvbmUob3B0cykpO1xuICAgICAgICAgIHZhciBib3VuZGluZ1JlY3QgPSBjaGFydC5nZXREb20oKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICBsZWZ0XzEgPSBtYXRoTWluKGJvdW5kaW5nUmVjdC5sZWZ0LCBsZWZ0XzEpO1xuICAgICAgICAgIHRvcF8xID0gbWF0aE1pbihib3VuZGluZ1JlY3QudG9wLCB0b3BfMSk7XG4gICAgICAgICAgcmlnaHRfMSA9IG1hdGhNYXgoYm91bmRpbmdSZWN0LnJpZ2h0LCByaWdodF8xKTtcbiAgICAgICAgICBib3R0b21fMSA9IG1hdGhNYXgoYm91bmRpbmdSZWN0LmJvdHRvbSwgYm90dG9tXzEpO1xuICAgICAgICAgIGNhbnZhc0xpc3RfMS5wdXNoKHtcbiAgICAgICAgICAgIGRvbTogY2FudmFzLFxuICAgICAgICAgICAgbGVmdDogYm91bmRpbmdSZWN0LmxlZnQsXG4gICAgICAgICAgICB0b3A6IGJvdW5kaW5nUmVjdC50b3BcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsZWZ0XzEgKj0gZHByXzE7XG4gICAgICB0b3BfMSAqPSBkcHJfMTtcbiAgICAgIHJpZ2h0XzEgKj0gZHByXzE7XG4gICAgICBib3R0b21fMSAqPSBkcHJfMTtcbiAgICAgIHZhciB3aWR0aCA9IHJpZ2h0XzEgLSBsZWZ0XzE7XG4gICAgICB2YXIgaGVpZ2h0ID0gYm90dG9tXzEgLSB0b3BfMTtcbiAgICAgIHZhciB0YXJnZXRDYW52YXMgPSBwbGF0Zm9ybUFwaS5jcmVhdGVDYW52YXMoKTtcbiAgICAgIHZhciB6cl8xID0genJlbmRlci5pbml0KHRhcmdldENhbnZhcywge1xuICAgICAgICByZW5kZXJlcjogaXNTdmcgPyAnc3ZnJyA6ICdjYW52YXMnXG4gICAgICB9KTtcbiAgICAgIHpyXzEucmVzaXplKHtcbiAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICBoZWlnaHQ6IGhlaWdodFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChpc1N2Zykge1xuICAgICAgICB2YXIgY29udGVudF8xID0gJyc7XG4gICAgICAgIGVhY2goY2FudmFzTGlzdF8xLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgIHZhciB4ID0gaXRlbS5sZWZ0IC0gbGVmdF8xO1xuICAgICAgICAgIHZhciB5ID0gaXRlbS50b3AgLSB0b3BfMTtcbiAgICAgICAgICBjb250ZW50XzEgKz0gJzxnIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgnICsgeCArICcsJyArIHkgKyAnKVwiPicgKyBpdGVtLmRvbSArICc8L2c+JztcbiAgICAgICAgfSk7XG4gICAgICAgIHpyXzEucGFpbnRlci5nZXRTdmdSb290KCkuaW5uZXJIVE1MID0gY29udGVudF8xO1xuXG4gICAgICAgIGlmIChvcHRzLmNvbm5lY3RlZEJhY2tncm91bmRDb2xvcikge1xuICAgICAgICAgIHpyXzEucGFpbnRlci5zZXRCYWNrZ3JvdW5kQ29sb3Iob3B0cy5jb25uZWN0ZWRCYWNrZ3JvdW5kQ29sb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgenJfMS5yZWZyZXNoSW1tZWRpYXRlbHkoKTtcbiAgICAgICAgcmV0dXJuIHpyXzEucGFpbnRlci50b0RhdGFVUkwoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEJhY2tncm91bmQgYmV0d2VlbiB0aGUgY2hhcnRzXG4gICAgICAgIGlmIChvcHRzLmNvbm5lY3RlZEJhY2tncm91bmRDb2xvcikge1xuICAgICAgICAgIHpyXzEuYWRkKG5ldyBncmFwaGljLlJlY3Qoe1xuICAgICAgICAgICAgc2hhcGU6IHtcbiAgICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgICAgICBoZWlnaHQ6IGhlaWdodFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgIGZpbGw6IG9wdHMuY29ubmVjdGVkQmFja2dyb3VuZENvbG9yXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZWFjaChjYW52YXNMaXN0XzEsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgdmFyIGltZyA9IG5ldyBncmFwaGljLkltYWdlKHtcbiAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgIHg6IGl0ZW0ubGVmdCAqIGRwcl8xIC0gbGVmdF8xLFxuICAgICAgICAgICAgICB5OiBpdGVtLnRvcCAqIGRwcl8xIC0gdG9wXzEsXG4gICAgICAgICAgICAgIGltYWdlOiBpdGVtLmRvbVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHpyXzEuYWRkKGltZyk7XG4gICAgICAgIH0pO1xuICAgICAgICB6cl8xLnJlZnJlc2hJbW1lZGlhdGVseSgpO1xuICAgICAgICByZXR1cm4gdGFyZ2V0Q2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvJyArIChvcHRzICYmIG9wdHMudHlwZSB8fCAncG5nJykpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXREYXRhVVJMKG9wdHMpO1xuICAgIH1cbiAgfTtcblxuICBFQ2hhcnRzLnByb3RvdHlwZS5jb252ZXJ0VG9QaXhlbCA9IGZ1bmN0aW9uIChmaW5kZXIsIHZhbHVlKSB7XG4gICAgcmV0dXJuIGRvQ29udmVydFBpeGVsKHRoaXMsICdjb252ZXJ0VG9QaXhlbCcsIGZpbmRlciwgdmFsdWUpO1xuICB9O1xuXG4gIEVDaGFydHMucHJvdG90eXBlLmNvbnZlcnRGcm9tUGl4ZWwgPSBmdW5jdGlvbiAoZmluZGVyLCB2YWx1ZSkge1xuICAgIHJldHVybiBkb0NvbnZlcnRQaXhlbCh0aGlzLCAnY29udmVydEZyb21QaXhlbCcsIGZpbmRlciwgdmFsdWUpO1xuICB9O1xuICAvKipcclxuICAgKiBJcyB0aGUgc3BlY2lmaWVkIGNvb3JkaW5hdGUgc3lzdGVtcyBvciBjb21wb25lbnRzIGNvbnRhaW4gdGhlIGdpdmVuIHBpeGVsIHBvaW50LlxyXG4gICAqIEBwYXJhbSB7QXJyYXl8bnVtYmVyfSB2YWx1ZVxyXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IHJlc3VsdFxyXG4gICAqL1xuXG5cbiAgRUNoYXJ0cy5wcm90b3R5cGUuY29udGFpblBpeGVsID0gZnVuY3Rpb24gKGZpbmRlciwgdmFsdWUpIHtcbiAgICBpZiAodGhpcy5fZGlzcG9zZWQpIHtcbiAgICAgIGRpc3Bvc2VkV2FybmluZyh0aGlzLmlkKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZWNNb2RlbCA9IHRoaXMuX21vZGVsO1xuICAgIHZhciByZXN1bHQ7XG4gICAgdmFyIGZpbmRSZXN1bHQgPSBtb2RlbFV0aWwucGFyc2VGaW5kZXIoZWNNb2RlbCwgZmluZGVyKTtcbiAgICBlYWNoKGZpbmRSZXN1bHQsIGZ1bmN0aW9uIChtb2RlbHMsIGtleSkge1xuICAgICAga2V5LmluZGV4T2YoJ01vZGVscycpID49IDAgJiYgZWFjaChtb2RlbHMsIGZ1bmN0aW9uIChtb2RlbCkge1xuICAgICAgICB2YXIgY29vcmRTeXMgPSBtb2RlbC5jb29yZGluYXRlU3lzdGVtO1xuXG4gICAgICAgIGlmIChjb29yZFN5cyAmJiBjb29yZFN5cy5jb250YWluUG9pbnQpIHtcbiAgICAgICAgICByZXN1bHQgPSByZXN1bHQgfHwgISFjb29yZFN5cy5jb250YWluUG9pbnQodmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ3Nlcmllc01vZGVscycpIHtcbiAgICAgICAgICB2YXIgdmlldyA9IHRoaXMuX2NoYXJ0c01hcFttb2RlbC5fX3ZpZXdJZF07XG5cbiAgICAgICAgICBpZiAodmlldyAmJiB2aWV3LmNvbnRhaW5Qb2ludCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0IHx8IHZpZXcuY29udGFpblBvaW50KHZhbHVlLCBtb2RlbCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICAgIHdhcm4oa2V5ICsgJzogJyArICh2aWV3ID8gJ1RoZSBmb3VuZCBjb21wb25lbnQgZG8gbm90IHN1cHBvcnQgY29udGFpblBvaW50LicgOiAnTm8gdmlldyBtYXBwaW5nIHRvIHRoZSBmb3VuZCBjb21wb25lbnQuJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgd2FybihrZXkgKyAnOiBjb250YWluUG9pbnQgaXMgbm90IHN1cHBvcnRlZCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgdGhpcyk7XG4gICAgfSwgdGhpcyk7XG4gICAgcmV0dXJuICEhcmVzdWx0O1xuICB9O1xuICAvKipcclxuICAgKiBHZXQgdmlzdWFsIGZyb20gc2VyaWVzIG9yIGRhdGEuXHJcbiAgICogQHBhcmFtIGZpbmRlclxyXG4gICAqICAgICAgICBJZiBzdHJpbmcsIGUuZy4sICdzZXJpZXMnLCBtZWFucyB7c2VyaWVzSW5kZXg6IDB9LlxyXG4gICAqICAgICAgICBJZiBPYmplY3QsIGNvdWxkIGNvbnRhaW4gc29tZSBvZiB0aGVzZSBwcm9wZXJ0aWVzIGJlbG93OlxyXG4gICAqICAgICAgICB7XHJcbiAgICogICAgICAgICAgICBzZXJpZXNJbmRleCAvIHNlcmllc0lkIC8gc2VyaWVzTmFtZSxcclxuICAgKiAgICAgICAgICAgIGRhdGFJbmRleCAvIGRhdGFJbmRleEluc2lkZVxyXG4gICAqICAgICAgICB9XHJcbiAgICogICAgICAgIElmIGRhdGFJbmRleCBpcyBub3Qgc3BlY2lmaWVkLCBzZXJpZXMgdmlzdWFsIHdpbGwgYmUgZmV0Y2hlZCxcclxuICAgKiAgICAgICAgYnV0IG5vdCBkYXRhIGl0ZW0gdmlzdWFsLlxyXG4gICAqICAgICAgICBJZiBhbGwgb2Ygc2VyaWVzSW5kZXgsIHNlcmllc0lkLCBzZXJpZXNOYW1lIGFyZSBub3Qgc3BlY2lmaWVkLFxyXG4gICAqICAgICAgICB2aXN1YWwgd2lsbCBiZSBmZXRjaGVkIGZyb20gZmlyc3Qgc2VyaWVzLlxyXG4gICAqIEBwYXJhbSB2aXN1YWxUeXBlICdjb2xvcicsICdzeW1ib2wnLCAnc3ltYm9sU2l6ZSdcclxuICAgKi9cblxuXG4gIEVDaGFydHMucHJvdG90eXBlLmdldFZpc3VhbCA9IGZ1bmN0aW9uIChmaW5kZXIsIHZpc3VhbFR5cGUpIHtcbiAgICB2YXIgZWNNb2RlbCA9IHRoaXMuX21vZGVsO1xuICAgIHZhciBwYXJzZWRGaW5kZXIgPSBtb2RlbFV0aWwucGFyc2VGaW5kZXIoZWNNb2RlbCwgZmluZGVyLCB7XG4gICAgICBkZWZhdWx0TWFpblR5cGU6ICdzZXJpZXMnXG4gICAgfSk7XG4gICAgdmFyIHNlcmllc01vZGVsID0gcGFyc2VkRmluZGVyLnNlcmllc01vZGVsO1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGlmICghc2VyaWVzTW9kZWwpIHtcbiAgICAgICAgd2FybignVGhlcmUgaXMgbm8gc3BlY2lmaWVkIHNlcmllcyBtb2RlbCcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBkYXRhID0gc2VyaWVzTW9kZWwuZ2V0RGF0YSgpO1xuICAgIHZhciBkYXRhSW5kZXhJbnNpZGUgPSBwYXJzZWRGaW5kZXIuaGFzT3duUHJvcGVydHkoJ2RhdGFJbmRleEluc2lkZScpID8gcGFyc2VkRmluZGVyLmRhdGFJbmRleEluc2lkZSA6IHBhcnNlZEZpbmRlci5oYXNPd25Qcm9wZXJ0eSgnZGF0YUluZGV4JykgPyBkYXRhLmluZGV4T2ZSYXdJbmRleChwYXJzZWRGaW5kZXIuZGF0YUluZGV4KSA6IG51bGw7XG4gICAgcmV0dXJuIGRhdGFJbmRleEluc2lkZSAhPSBudWxsID8gZ2V0SXRlbVZpc3VhbEZyb21EYXRhKGRhdGEsIGRhdGFJbmRleEluc2lkZSwgdmlzdWFsVHlwZSkgOiBnZXRWaXN1YWxGcm9tRGF0YShkYXRhLCB2aXN1YWxUeXBlKTtcbiAgfTtcbiAgLyoqXHJcbiAgICogR2V0IHZpZXcgb2YgY29ycmVzcG9uZGluZyBjb21wb25lbnQgbW9kZWxcclxuICAgKi9cblxuXG4gIEVDaGFydHMucHJvdG90eXBlLmdldFZpZXdPZkNvbXBvbmVudE1vZGVsID0gZnVuY3Rpb24gKGNvbXBvbmVudE1vZGVsKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbXBvbmVudHNNYXBbY29tcG9uZW50TW9kZWwuX192aWV3SWRdO1xuICB9O1xuICAvKipcclxuICAgKiBHZXQgdmlldyBvZiBjb3JyZXNwb25kaW5nIHNlcmllcyBtb2RlbFxyXG4gICAqL1xuXG5cbiAgRUNoYXJ0cy5wcm90b3R5cGUuZ2V0Vmlld09mU2VyaWVzTW9kZWwgPSBmdW5jdGlvbiAoc2VyaWVzTW9kZWwpIHtcbiAgICByZXR1cm4gdGhpcy5fY2hhcnRzTWFwW3Nlcmllc01vZGVsLl9fdmlld0lkXTtcbiAgfTtcblxuICBFQ2hhcnRzLnByb3RvdHlwZS5faW5pdEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgZWFjaChNT1VTRV9FVkVOVF9OQU1FUywgZnVuY3Rpb24gKGV2ZU5hbWUpIHtcbiAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIGVjTW9kZWwgPSBfdGhpcy5nZXRNb2RlbCgpO1xuXG4gICAgICAgIHZhciBlbCA9IGUudGFyZ2V0O1xuICAgICAgICB2YXIgcGFyYW1zO1xuICAgICAgICB2YXIgaXNHbG9iYWxPdXQgPSBldmVOYW1lID09PSAnZ2xvYmFsb3V0JzsgLy8gbm8gZS50YXJnZXQgd2hlbiAnZ2xvYmFsb3V0Jy5cblxuICAgICAgICBpZiAoaXNHbG9iYWxPdXQpIHtcbiAgICAgICAgICBwYXJhbXMgPSB7fTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbCAmJiBmaW5kRXZlbnREaXNwYXRjaGVyKGVsLCBmdW5jdGlvbiAocGFyZW50KSB7XG4gICAgICAgICAgICB2YXIgZWNEYXRhID0gZ2V0RUNEYXRhKHBhcmVudCk7XG5cbiAgICAgICAgICAgIGlmIChlY0RhdGEgJiYgZWNEYXRhLmRhdGFJbmRleCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIHZhciBkYXRhTW9kZWwgPSBlY0RhdGEuZGF0YU1vZGVsIHx8IGVjTW9kZWwuZ2V0U2VyaWVzQnlJbmRleChlY0RhdGEuc2VyaWVzSW5kZXgpO1xuICAgICAgICAgICAgICBwYXJhbXMgPSBkYXRhTW9kZWwgJiYgZGF0YU1vZGVsLmdldERhdGFQYXJhbXMoZWNEYXRhLmRhdGFJbmRleCwgZWNEYXRhLmRhdGFUeXBlLCBlbCkgfHwge307XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSAvLyBJZiBlbGVtZW50IGhhcyBjdXN0b20gZXZlbnREYXRhIG9mIGNvbXBvbmVudHNcbiAgICAgICAgICAgIGVsc2UgaWYgKGVjRGF0YS5ldmVudERhdGEpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMgPSBleHRlbmQoe30sIGVjRGF0YS5ldmVudERhdGEpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgIH0gLy8gQ29udHJhY3Q6IGlmIHBhcmFtcyBwcmVwYXJlZCBpbiBtb3VzZSBldmVudCxcbiAgICAgICAgLy8gdGhlc2UgcHJvcGVydGllcyBtdXN0IGJlIHNwZWNpZmllZDpcbiAgICAgICAgLy8ge1xuICAgICAgICAvLyAgICBjb21wb25lbnRUeXBlOiBzdHJpbmcgKGNvbXBvbmVudCBtYWluIHR5cGUpXG4gICAgICAgIC8vICAgIGNvbXBvbmVudEluZGV4OiBudW1iZXJcbiAgICAgICAgLy8gfVxuICAgICAgICAvLyBPdGhlcndpc2UgZXZlbnQgcXVlcnkgY2FuIG5vdCB3b3JrLlxuXG5cbiAgICAgICAgaWYgKHBhcmFtcykge1xuICAgICAgICAgIHZhciBjb21wb25lbnRUeXBlID0gcGFyYW1zLmNvbXBvbmVudFR5cGU7XG4gICAgICAgICAgdmFyIGNvbXBvbmVudEluZGV4ID0gcGFyYW1zLmNvbXBvbmVudEluZGV4OyAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBoaXN0b3JpYyByZWFzb246IHdoZW4gdHJpZ2dlciBieVxuICAgICAgICAgIC8vIG1hcmtMaW5lL21hcmtQb2ludC9tYXJrQXJlYSwgdGhlIGNvbXBvbmVudFR5cGUgaXNcbiAgICAgICAgICAvLyAnbWFya0xpbmUnLydtYXJrUG9pbnQnLydtYXJrQXJlYScsIGJ1dCB3ZSBzaG91bGQgYmV0dGVyXG4gICAgICAgICAgLy8gZW5hYmxlIHRoZW0gdG8gYmUgcXVlcmllZCBieSBzZXJpZXNJbmRleCwgc2luY2UgdGhlaXJcbiAgICAgICAgICAvLyBvcHRpb24gaXMgc2V0IGluIGVhY2ggc2VyaWVzLlxuXG4gICAgICAgICAgaWYgKGNvbXBvbmVudFR5cGUgPT09ICdtYXJrTGluZScgfHwgY29tcG9uZW50VHlwZSA9PT0gJ21hcmtQb2ludCcgfHwgY29tcG9uZW50VHlwZSA9PT0gJ21hcmtBcmVhJykge1xuICAgICAgICAgICAgY29tcG9uZW50VHlwZSA9ICdzZXJpZXMnO1xuICAgICAgICAgICAgY29tcG9uZW50SW5kZXggPSBwYXJhbXMuc2VyaWVzSW5kZXg7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIG1vZGVsID0gY29tcG9uZW50VHlwZSAmJiBjb21wb25lbnRJbmRleCAhPSBudWxsICYmIGVjTW9kZWwuZ2V0Q29tcG9uZW50KGNvbXBvbmVudFR5cGUsIGNvbXBvbmVudEluZGV4KTtcbiAgICAgICAgICB2YXIgdmlldyA9IG1vZGVsICYmIF90aGlzW21vZGVsLm1haW5UeXBlID09PSAnc2VyaWVzJyA/ICdfY2hhcnRzTWFwJyA6ICdfY29tcG9uZW50c01hcCddW21vZGVsLl9fdmlld0lkXTtcblxuICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICAvLyBgZXZlbnQuY29tcG9uZW50VHlwZWAgYW5kIGBldmVudFtjb21wb25lbnRUcHlwZSArICdJbmRleCddYCBtdXN0IG5vdFxuICAgICAgICAgICAgLy8gYmUgbWlzc2VkLCBvdGhlcndpc2UgdGhlcmUgaXMgbm8gd2F5IHRvIGRpc3Rpbmd1aXNoIHNvdXJjZSBjb21wb25lbnQuXG4gICAgICAgICAgICAvLyBTZWUgYGRhdGFGb3JtYXQuZ2V0RGF0YVBhcmFtc2AuXG4gICAgICAgICAgICBpZiAoIWlzR2xvYmFsT3V0ICYmICEobW9kZWwgJiYgdmlldykpIHtcbiAgICAgICAgICAgICAgd2FybignbW9kZWwgb3IgdmlldyBjYW4gbm90IGJlIGZvdW5kIGJ5IHBhcmFtcycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHBhcmFtcy5ldmVudCA9IGU7XG4gICAgICAgICAgcGFyYW1zLnR5cGUgPSBldmVOYW1lO1xuICAgICAgICAgIF90aGlzLl8kZXZlbnRQcm9jZXNzb3IuZXZlbnRJbmZvID0ge1xuICAgICAgICAgICAgdGFyZ2V0RWw6IGVsLFxuICAgICAgICAgICAgcGFja2VkRXZlbnQ6IHBhcmFtcyxcbiAgICAgICAgICAgIG1vZGVsOiBtb2RlbCxcbiAgICAgICAgICAgIHZpZXc6IHZpZXdcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgX3RoaXMudHJpZ2dlcihldmVOYW1lLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICB9OyAvLyBDb25zaWRlciB0aGF0IHNvbWUgY29tcG9uZW50IChsaWtlIHRvb2x0aXAsIGJydXNoLCAuLi4pXG4gICAgICAvLyByZWdpc3RlciB6ciBldmVudCBoYW5kbGVyLCBidXQgdXNlciBldmVudCBoYW5kbGVyIG1pZ2h0XG4gICAgICAvLyBkbyBhbnl0aGluZywgc3VjaCBhcyBjYWxsIGBzZXRPcHRpb25gIG9yIGBkaXNwYXRjaEFjdGlvbmAsXG4gICAgICAvLyB3aGljaCBwcm9iYWJseSB1cGRhdGUgYW55IG9mIHRoZSBjb250ZW50IGFuZCBwcm9iYWJseVxuICAgICAgLy8gY2F1c2UgcHJvYmxlbSBpZiBpdCBpcyBjYWxsZWQgcHJldmlvdXMgb3RoZXIgaW5uZXIgaGFuZGxlcnMuXG5cblxuICAgICAgaGFuZGxlci56ckV2ZW50ZnVsQ2FsbEF0TGFzdCA9IHRydWU7XG5cbiAgICAgIF90aGlzLl96ci5vbihldmVOYW1lLCBoYW5kbGVyLCBfdGhpcyk7XG4gICAgfSk7XG4gICAgZWFjaChldmVudEFjdGlvbk1hcCwgZnVuY3Rpb24gKGFjdGlvblR5cGUsIGV2ZW50VHlwZSkge1xuICAgICAgX3RoaXMuX21lc3NhZ2VDZW50ZXIub24oZXZlbnRUeXBlLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyKGV2ZW50VHlwZSwgZXZlbnQpO1xuICAgICAgfSwgX3RoaXMpO1xuICAgIH0pOyAvLyBFeHRyYSBldmVudHNcbiAgICAvLyBUT0RPIHJlZ2lzdGVyP1xuXG4gICAgZWFjaChbJ3NlbGVjdGNoYW5nZWQnXSwgZnVuY3Rpb24gKGV2ZW50VHlwZSkge1xuICAgICAgX3RoaXMuX21lc3NhZ2VDZW50ZXIub24oZXZlbnRUeXBlLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyKGV2ZW50VHlwZSwgZXZlbnQpO1xuICAgICAgfSwgX3RoaXMpO1xuICAgIH0pO1xuICAgIGhhbmRsZUxlZ2FjeVNlbGVjdEV2ZW50cyh0aGlzLl9tZXNzYWdlQ2VudGVyLCB0aGlzLCB0aGlzLl9hcGkpO1xuICB9O1xuXG4gIEVDaGFydHMucHJvdG90eXBlLmlzRGlzcG9zZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Rpc3Bvc2VkO1xuICB9O1xuXG4gIEVDaGFydHMucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9kaXNwb3NlZCkge1xuICAgICAgZGlzcG9zZWRXYXJuaW5nKHRoaXMuaWQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuc2V0T3B0aW9uKHtcbiAgICAgIHNlcmllczogW11cbiAgICB9LCB0cnVlKTtcbiAgfTtcblxuICBFQ2hhcnRzLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9kaXNwb3NlZCkge1xuICAgICAgZGlzcG9zZWRXYXJuaW5nKHRoaXMuaWQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICB2YXIgZG9tID0gdGhpcy5nZXREb20oKTtcblxuICAgIGlmIChkb20pIHtcbiAgICAgIG1vZGVsVXRpbC5zZXRBdHRyaWJ1dGUodGhpcy5nZXREb20oKSwgRE9NX0FUVFJJQlVURV9LRVksICcnKTtcbiAgICB9XG5cbiAgICB2YXIgY2hhcnQgPSB0aGlzO1xuICAgIHZhciBhcGkgPSBjaGFydC5fYXBpO1xuICAgIHZhciBlY01vZGVsID0gY2hhcnQuX21vZGVsO1xuICAgIGVhY2goY2hhcnQuX2NvbXBvbmVudHNWaWV3cywgZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgY29tcG9uZW50LmRpc3Bvc2UoZWNNb2RlbCwgYXBpKTtcbiAgICB9KTtcbiAgICBlYWNoKGNoYXJ0Ll9jaGFydHNWaWV3cywgZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICBjaGFydC5kaXNwb3NlKGVjTW9kZWwsIGFwaSk7XG4gICAgfSk7IC8vIERpc3Bvc2UgYWZ0ZXIgYWxsIHZpZXdzIGRpc3Bvc2VkXG5cbiAgICBjaGFydC5fenIuZGlzcG9zZSgpOyAvLyBTZXQgcHJvcGVydGllcyB0byBudWxsLlxuICAgIC8vIFRvIHJlZHVjZSB0aGUgbWVtb3J5IGNvc3QgaW4gY2FzZSB0aGUgdG9wIGNvZGUgc3RpbGwgaG9sZHMgdGhpcyBpbnN0YW5jZSB1bmV4cGVjdGVkbHkuXG5cblxuICAgIGNoYXJ0Ll9kb20gPSBjaGFydC5fbW9kZWwgPSBjaGFydC5fY2hhcnRzTWFwID0gY2hhcnQuX2NvbXBvbmVudHNNYXAgPSBjaGFydC5fY2hhcnRzVmlld3MgPSBjaGFydC5fY29tcG9uZW50c1ZpZXdzID0gY2hhcnQuX3NjaGVkdWxlciA9IGNoYXJ0Ll9hcGkgPSBjaGFydC5fenIgPSBjaGFydC5fdGhyb3R0bGVkWnJGbHVzaCA9IGNoYXJ0Ll90aGVtZSA9IGNoYXJ0Ll9jb29yZFN5c01nciA9IGNoYXJ0Ll9tZXNzYWdlQ2VudGVyID0gbnVsbDtcbiAgICBkZWxldGUgaW5zdGFuY2VzW2NoYXJ0LmlkXTtcbiAgfTtcbiAgLyoqXHJcbiAgICogUmVzaXplIHRoZSBjaGFydFxyXG4gICAqL1xuXG5cbiAgRUNoYXJ0cy5wcm90b3R5cGUucmVzaXplID0gZnVuY3Rpb24gKG9wdHMpIHtcbiAgICBpZiAodGhpc1tJTl9NQUlOX1BST0NFU1NfS0VZXSkge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgZXJyb3IoJ2ByZXNpemVgIHNob3VsZCBub3QgYmUgY2FsbGVkIGR1cmluZyBtYWluIHByb2Nlc3MuJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZGlzcG9zZWQpIHtcbiAgICAgIGRpc3Bvc2VkV2FybmluZyh0aGlzLmlkKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl96ci5yZXNpemUob3B0cyk7XG5cbiAgICB2YXIgZWNNb2RlbCA9IHRoaXMuX21vZGVsOyAvLyBSZXNpemUgbG9hZGluZyBlZmZlY3RcblxuICAgIHRoaXMuX2xvYWRpbmdGWCAmJiB0aGlzLl9sb2FkaW5nRlgucmVzaXplKCk7XG5cbiAgICBpZiAoIWVjTW9kZWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbmVlZFByZXBhcmUgPSBlY01vZGVsLnJlc2V0T3B0aW9uKCdtZWRpYScpO1xuICAgIHZhciBzaWxlbnQgPSBvcHRzICYmIG9wdHMuc2lsZW50OyAvLyBUaGVyZSBpcyBzb21lIHJlYWwgY2FzZXMgdGhhdDpcbiAgICAvLyBjaGFydC5zZXRPcHRpb24ob3B0aW9uLCB7IGxhenlVcGRhdGU6IHRydWUgfSk7XG4gICAgLy8gY2hhcnQucmVzaXplKCk7XG5cbiAgICBpZiAodGhpc1tQRU5ESU5HX1VQREFURV0pIHtcbiAgICAgIGlmIChzaWxlbnQgPT0gbnVsbCkge1xuICAgICAgICBzaWxlbnQgPSB0aGlzW1BFTkRJTkdfVVBEQVRFXS5zaWxlbnQ7XG4gICAgICB9XG5cbiAgICAgIG5lZWRQcmVwYXJlID0gdHJ1ZTtcbiAgICAgIHRoaXNbUEVORElOR19VUERBVEVdID0gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzW0lOX01BSU5fUFJPQ0VTU19LRVldID0gdHJ1ZTtcblxuICAgIHRyeSB7XG4gICAgICBuZWVkUHJlcGFyZSAmJiBwcmVwYXJlKHRoaXMpO1xuICAgICAgdXBkYXRlTWV0aG9kcy51cGRhdGUuY2FsbCh0aGlzLCB7XG4gICAgICAgIHR5cGU6ICdyZXNpemUnLFxuICAgICAgICBhbmltYXRpb246IGV4dGVuZCh7XG4gICAgICAgICAgLy8gRGlzYWJsZSBhbmltYXRpb25cbiAgICAgICAgICBkdXJhdGlvbjogMFxuICAgICAgICB9LCBvcHRzICYmIG9wdHMuYW5pbWF0aW9uKVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhpc1tJTl9NQUlOX1BST0NFU1NfS0VZXSA9IGZhbHNlO1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG5cbiAgICB0aGlzW0lOX01BSU5fUFJPQ0VTU19LRVldID0gZmFsc2U7XG4gICAgZmx1c2hQZW5kaW5nQWN0aW9ucy5jYWxsKHRoaXMsIHNpbGVudCk7XG4gICAgdHJpZ2dlclVwZGF0ZWRFdmVudC5jYWxsKHRoaXMsIHNpbGVudCk7XG4gIH07XG5cbiAgRUNoYXJ0cy5wcm90b3R5cGUuc2hvd0xvYWRpbmcgPSBmdW5jdGlvbiAobmFtZSwgY2ZnKSB7XG4gICAgaWYgKHRoaXMuX2Rpc3Bvc2VkKSB7XG4gICAgICBkaXNwb3NlZFdhcm5pbmcodGhpcy5pZCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGlzT2JqZWN0KG5hbWUpKSB7XG4gICAgICBjZmcgPSBuYW1lO1xuICAgICAgbmFtZSA9ICcnO1xuICAgIH1cblxuICAgIG5hbWUgPSBuYW1lIHx8ICdkZWZhdWx0JztcbiAgICB0aGlzLmhpZGVMb2FkaW5nKCk7XG5cbiAgICBpZiAoIWxvYWRpbmdFZmZlY3RzW25hbWVdKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB3YXJuKCdMb2FkaW5nIGVmZmVjdHMgJyArIG5hbWUgKyAnIG5vdCBleGlzdHMuJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZWwgPSBsb2FkaW5nRWZmZWN0c1tuYW1lXSh0aGlzLl9hcGksIGNmZyk7XG4gICAgdmFyIHpyID0gdGhpcy5fenI7XG4gICAgdGhpcy5fbG9hZGluZ0ZYID0gZWw7XG4gICAgenIuYWRkKGVsKTtcbiAgfTtcbiAgLyoqXHJcbiAgICogSGlkZSBsb2FkaW5nIGVmZmVjdFxyXG4gICAqL1xuXG5cbiAgRUNoYXJ0cy5wcm90b3R5cGUuaGlkZUxvYWRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX2Rpc3Bvc2VkKSB7XG4gICAgICBkaXNwb3NlZFdhcm5pbmcodGhpcy5pZCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fbG9hZGluZ0ZYICYmIHRoaXMuX3pyLnJlbW92ZSh0aGlzLl9sb2FkaW5nRlgpO1xuICAgIHRoaXMuX2xvYWRpbmdGWCA9IG51bGw7XG4gIH07XG5cbiAgRUNoYXJ0cy5wcm90b3R5cGUubWFrZUFjdGlvbkZyb21FdmVudCA9IGZ1bmN0aW9uIChldmVudE9iaikge1xuICAgIHZhciBwYXlsb2FkID0gZXh0ZW5kKHt9LCBldmVudE9iaik7XG4gICAgcGF5bG9hZC50eXBlID0gZXZlbnRBY3Rpb25NYXBbZXZlbnRPYmoudHlwZV07XG4gICAgcmV0dXJuIHBheWxvYWQ7XG4gIH07XG4gIC8qKlxyXG4gICAqIEBwYXJhbSBvcHQgSWYgcGFzcyBib29sZWFuLCBtZWFucyBvcHQuc2lsZW50XHJcbiAgICogQHBhcmFtIG9wdC5zaWxlbnQgRGVmYXVsdCBgZmFsc2VgLiBXaGV0aGVyIHRyaWdnZXIgZXZlbnRzLlxyXG4gICAqIEBwYXJhbSBvcHQuZmx1c2ggRGVmYXVsdCBgdW5kZWZpbmVkYC5cclxuICAgKiAgICAgICAgdHJ1ZTogRmx1c2ggaW1tZWRpYXRlbHksIGFuZCB0aGVuIHBpeGVsIGluIGNhbnZhcyBjYW4gYmUgZmV0Y2hlZFxyXG4gICAqICAgICAgICAgICAgaW1tZWRpYXRlbHkuIENhdXRpb246IGl0IG1pZ2h0IGFmZmVjdCBwZXJmb3JtYW5jZS5cclxuICAgKiAgICAgICAgZmFsc2U6IE5vdCBmbHVzaC5cclxuICAgKiAgICAgICAgdW5kZWZpbmVkOiBBdXRvIGRlY2lkZSB3aGV0aGVyIHBlcmZvcm0gZmx1c2guXHJcbiAgICovXG5cblxuICBFQ2hhcnRzLnByb3RvdHlwZS5kaXNwYXRjaEFjdGlvbiA9IGZ1bmN0aW9uIChwYXlsb2FkLCBvcHQpIHtcbiAgICBpZiAodGhpcy5fZGlzcG9zZWQpIHtcbiAgICAgIGRpc3Bvc2VkV2FybmluZyh0aGlzLmlkKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWlzT2JqZWN0KG9wdCkpIHtcbiAgICAgIG9wdCA9IHtcbiAgICAgICAgc2lsZW50OiAhIW9wdFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoIWFjdGlvbnNbcGF5bG9hZC50eXBlXSkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gQXZvaWQgZGlzcGF0Y2ggYWN0aW9uIGJlZm9yZSBzZXRPcHRpb24uIEVzcGVjaWFsbHkgaW4gYGNvbm5lY3RgLlxuXG5cbiAgICBpZiAoIXRoaXMuX21vZGVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBNYXkgZGlzcGF0Y2hBY3Rpb24gaW4gcmVuZGVyaW5nIHByb2NlZHVyZVxuXG5cbiAgICBpZiAodGhpc1tJTl9NQUlOX1BST0NFU1NfS0VZXSkge1xuICAgICAgdGhpcy5fcGVuZGluZ0FjdGlvbnMucHVzaChwYXlsb2FkKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBzaWxlbnQgPSBvcHQuc2lsZW50O1xuICAgIGRvRGlzcGF0Y2hBY3Rpb24uY2FsbCh0aGlzLCBwYXlsb2FkLCBzaWxlbnQpO1xuICAgIHZhciBmbHVzaCA9IG9wdC5mbHVzaDtcblxuICAgIGlmIChmbHVzaCkge1xuICAgICAgdGhpcy5fenIuZmx1c2goKTtcbiAgICB9IGVsc2UgaWYgKGZsdXNoICE9PSBmYWxzZSAmJiBlbnYuYnJvd3Nlci53ZUNoYXQpIHtcbiAgICAgIC8vIEluIFdlQ2hhdCBlbWJlZGRlZCBicm93c2VyLCBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYCBhbmQgYHNldEludGVydmFsYFxuICAgICAgLy8gaGFuZyB3aGVuIHNsaWRpbmcgcGFnZSAob24gdG91Y2ggZXZlbnQpLCB3aGljaCBjYXVzZSB0aGF0IHpyIGRvZXMgbm90XG4gICAgICAvLyByZWZyZXNoIHVudGlsIHVzZXIgaW50ZXJhY3Rpb24gZmluaXNoZWQsIHdoaWNoIGlzIG5vdCBleHBlY3RlZC5cbiAgICAgIC8vIEJ1dCBgZGlzcGF0Y2hBY3Rpb25gIG1heSBiZSBjYWxsZWQgdG9vIGZyZXF1ZW50bHkgd2hlbiBwYW4gb24gdG91Y2hcbiAgICAgIC8vIHNjcmVlbiwgd2hpY2ggaW1wYWN0cyBwZXJmb3JtYW5jZSBpZiBkbyBub3QgdGhyb3R0bGUgdGhlbS5cbiAgICAgIHRoaXMuX3Rocm90dGxlZFpyRmx1c2goKTtcbiAgICB9XG5cbiAgICBmbHVzaFBlbmRpbmdBY3Rpb25zLmNhbGwodGhpcywgc2lsZW50KTtcbiAgICB0cmlnZ2VyVXBkYXRlZEV2ZW50LmNhbGwodGhpcywgc2lsZW50KTtcbiAgfTtcblxuICBFQ2hhcnRzLnByb3RvdHlwZS51cGRhdGVMYWJlbExheW91dCA9IGZ1bmN0aW9uICgpIHtcbiAgICBsaWZlY3ljbGUudHJpZ2dlcignc2VyaWVzOmxheW91dGxhYmVscycsIHRoaXMuX21vZGVsLCB0aGlzLl9hcGksIHtcbiAgICAgIC8vIE5vdCBhZGRpbmcgc2VyaWVzIGxhYmVscy5cbiAgICAgIC8vIFRPRE9cbiAgICAgIHVwZGF0ZWRTZXJpZXM6IFtdXG4gICAgfSk7XG4gIH07XG5cbiAgRUNoYXJ0cy5wcm90b3R5cGUuYXBwZW5kRGF0YSA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICBpZiAodGhpcy5fZGlzcG9zZWQpIHtcbiAgICAgIGRpc3Bvc2VkV2FybmluZyh0aGlzLmlkKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgc2VyaWVzSW5kZXggPSBwYXJhbXMuc2VyaWVzSW5kZXg7XG4gICAgdmFyIGVjTW9kZWwgPSB0aGlzLmdldE1vZGVsKCk7XG4gICAgdmFyIHNlcmllc01vZGVsID0gZWNNb2RlbC5nZXRTZXJpZXNCeUluZGV4KHNlcmllc0luZGV4KTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBhc3NlcnQocGFyYW1zLmRhdGEgJiYgc2VyaWVzTW9kZWwpO1xuICAgIH1cblxuICAgIHNlcmllc01vZGVsLmFwcGVuZERhdGEocGFyYW1zKTsgLy8gTm90ZTogYGFwcGVuZERhdGFgIGRvZXMgbm90IHN1cHBvcnQgdGhhdCB1cGRhdGUgZXh0ZW50IG9mIGNvb3JkaW5hdGVcbiAgICAvLyBzeXN0ZW0sIHV0aWwgc29tZSBzY2VuYXJpbyByZXF1aXJlIHRoYXQuIEluIHRoZSBleHBlY3RlZCB1c2FnZSBvZlxuICAgIC8vIGBhcHBlbmREYXRhYCwgdGhlIGluaXRpYWwgZXh0ZW50IG9mIGNvb3JkaW5hdGUgc3lzdGVtIHNob3VsZCBiZXR0ZXJcbiAgICAvLyBiZSBmaXhlZCBieSBheGlzIGBtaW5gL2BtYXhgIHNldHRpbmcgb3IgaW5pdGlhbCBkYXRhLCBvdGhlcndpc2UgaWZcbiAgICAvLyB0aGUgZXh0ZW50IGNoYW5nZWQgd2hpbGUgYGFwcGVuZERhdGFgLCB0aGUgbG9jYXRpb24gb2YgdGhlIHBhaW50ZWRcbiAgICAvLyBncmFwaGljIGVsZW1lbnRzIGhhdmUgdG8gYmUgY2hhbmdlZCwgd2hpY2ggbWFrZSB0aGUgdXNhZ2Ugb2ZcbiAgICAvLyBgYXBwZW5kRGF0YWAgbWVhbmluZ2xlc3MuXG5cbiAgICB0aGlzLl9zY2hlZHVsZXIudW5maW5pc2hlZCA9IHRydWU7XG4gICAgdGhpcy5nZXRacigpLndha2VVcCgpO1xuICB9OyAvLyBBIHdvcmsgYXJvdW5kIGZvciBubyBgaW50ZXJuYWxgIG1vZGlmaWVyIGluIHRzIHlldCBidXRcbiAgLy8gbmVlZCB0byBzdHJpY3RseSBoaWRlIHByaXZhdGUgbWV0aG9kcyB0byBKUyB1c2Vycy5cblxuXG4gIEVDaGFydHMuaW50ZXJuYWxGaWVsZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBwcmVwYXJlID0gZnVuY3Rpb24gKGVjSW5zKSB7XG4gICAgICB2YXIgc2NoZWR1bGVyID0gZWNJbnMuX3NjaGVkdWxlcjtcbiAgICAgIHNjaGVkdWxlci5yZXN0b3JlUGlwZWxpbmVzKGVjSW5zLl9tb2RlbCk7XG4gICAgICBzY2hlZHVsZXIucHJlcGFyZVN0YWdlVGFza3MoKTtcbiAgICAgIHByZXBhcmVWaWV3KGVjSW5zLCB0cnVlKTtcbiAgICAgIHByZXBhcmVWaWV3KGVjSW5zLCBmYWxzZSk7XG4gICAgICBzY2hlZHVsZXIucGxhbigpO1xuICAgIH07XG4gICAgLyoqXHJcbiAgICAgKiBQcmVwYXJlIHZpZXcgaW5zdGFuY2VzIG9mIGNoYXJ0cyBhbmQgY29tcG9uZW50c1xyXG4gICAgICovXG5cblxuICAgIHByZXBhcmVWaWV3ID0gZnVuY3Rpb24gKGVjSW5zLCBpc0NvbXBvbmVudCkge1xuICAgICAgdmFyIGVjTW9kZWwgPSBlY0lucy5fbW9kZWw7XG4gICAgICB2YXIgc2NoZWR1bGVyID0gZWNJbnMuX3NjaGVkdWxlcjtcbiAgICAgIHZhciB2aWV3TGlzdCA9IGlzQ29tcG9uZW50ID8gZWNJbnMuX2NvbXBvbmVudHNWaWV3cyA6IGVjSW5zLl9jaGFydHNWaWV3cztcbiAgICAgIHZhciB2aWV3TWFwID0gaXNDb21wb25lbnQgPyBlY0lucy5fY29tcG9uZW50c01hcCA6IGVjSW5zLl9jaGFydHNNYXA7XG4gICAgICB2YXIgenIgPSBlY0lucy5fenI7XG4gICAgICB2YXIgYXBpID0gZWNJbnMuX2FwaTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aWV3TGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICB2aWV3TGlzdFtpXS5fX2FsaXZlID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlzQ29tcG9uZW50ID8gZWNNb2RlbC5lYWNoQ29tcG9uZW50KGZ1bmN0aW9uIChjb21wb25lbnRUeXBlLCBtb2RlbCkge1xuICAgICAgICBjb21wb25lbnRUeXBlICE9PSAnc2VyaWVzJyAmJiBkb1ByZXBhcmUobW9kZWwpO1xuICAgICAgfSkgOiBlY01vZGVsLmVhY2hTZXJpZXMoZG9QcmVwYXJlKTtcblxuICAgICAgZnVuY3Rpb24gZG9QcmVwYXJlKG1vZGVsKSB7XG4gICAgICAgIC8vIEJ5IGRlZmF1bHQgdmlldyB3aWxsIGJlIHJldXNlZCBpZiBwb3NzaWJsZSBmb3IgdGhlIGNhc2UgdGhhdCBgc2V0T3B0aW9uYCB3aXRoIFwibm90TWVyZ2VcIlxuICAgICAgICAvLyBtb2RlIGFuZCBuZWVkIHRvIGVuYWJsZSB0cmFuc2l0aW9uIGFuaW1hdGlvbi4gKFVzdWFsbHksIHdoZW4gdGhleSBoYXZlIHRoZSBzYW1lIGlkLCBvclxuICAgICAgICAvLyBlc3BlY2lhbGx5IG5vIGlkIGJ1dCBoYXZlIHRoZSBzYW1lIHR5cGUgJiBuYW1lICYgaW5kZXguIFNlZSB0aGUgYG1vZGVsLmlkYCBnZW5lcmF0aW9uXG4gICAgICAgIC8vIHJ1bGUgaW4gYG1ha2VJZEFuZE5hbWVgIGFuZCBgdmlld0lkYCBnZW5lcmF0aW9uIHJ1bGUgaGVyZSkuXG4gICAgICAgIC8vIEJ1dCBpbiBgcmVwbGFjZU1lcmdlYCBtb2RlLCB0aGlzIGZlYXR1cmUgc2hvdWxkIGJlIGFibGUgdG8gZGlzYWJsZWQgd2hlbiBpdCBpcyBjbGVhciB0aGF0XG4gICAgICAgIC8vIHRoZSBuZXcgbW9kZWwgaGFzIG5vdGhpbmcgdG8gZG8gd2l0aCB0aGUgb2xkIG1vZGVsLlxuICAgICAgICB2YXIgcmVxdWlyZU5ld1ZpZXcgPSBtb2RlbC5fX3JlcXVpcmVOZXdWaWV3OyAvLyBUaGlzIGNvbW1hbmQgc2hvdWxkIG5vdCB3b3JrIHR3aWNlLlxuXG4gICAgICAgIG1vZGVsLl9fcmVxdWlyZU5ld1ZpZXcgPSBmYWxzZTsgLy8gQ29uc2lkZXI6IGlkIHNhbWUgYW5kIHR5cGUgY2hhbmdlZC5cblxuICAgICAgICB2YXIgdmlld0lkID0gJ19lY18nICsgbW9kZWwuaWQgKyAnXycgKyBtb2RlbC50eXBlO1xuICAgICAgICB2YXIgdmlldyA9ICFyZXF1aXJlTmV3VmlldyAmJiB2aWV3TWFwW3ZpZXdJZF07XG5cbiAgICAgICAgaWYgKCF2aWV3KSB7XG4gICAgICAgICAgdmFyIGNsYXNzVHlwZSA9IHBhcnNlQ2xhc3NUeXBlKG1vZGVsLnR5cGUpO1xuICAgICAgICAgIHZhciBDbGF6eiA9IGlzQ29tcG9uZW50ID8gQ29tcG9uZW50Vmlldy5nZXRDbGFzcyhjbGFzc1R5cGUubWFpbiwgY2xhc3NUeXBlLnN1YikgOiAvLyBGSVhNRTpUU1xuICAgICAgICAgIC8vIChDaGFydFZpZXcgYXMgQ2hhcnRWaWV3Q29uc3RydWN0b3IpLmdldENsYXNzKCdzZXJpZXMnLCBjbGFzc1R5cGUuc3ViKVxuICAgICAgICAgIC8vIEZvciBiYWNrd2FyZCBjb21wYXQsIHN0aWxsIHN1cHBvcnQgYSBjaGFydCB0eXBlIGRlY2xhcmVkIGFzIG9ubHkgc3ViVHlwZVxuICAgICAgICAgIC8vIGxpa2UgXCJsaXF1aWRmaWxsXCIsIGJ1dCByZWNvbW1lbmQgXCJzZXJpZXMubGlxdWlkZmlsbFwiXG4gICAgICAgICAgLy8gQnV0IG5lZWQgYSBiYXNlIGNsYXNzIHRvIG1ha2UgYSB0eXBlIHNlcmllcy5cbiAgICAgICAgICBDaGFydFZpZXcuZ2V0Q2xhc3MoY2xhc3NUeXBlLnN1Yik7XG5cbiAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgYXNzZXJ0KENsYXp6LCBjbGFzc1R5cGUuc3ViICsgJyBkb2VzIG5vdCBleGlzdC4nKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2aWV3ID0gbmV3IENsYXp6KCk7XG4gICAgICAgICAgdmlldy5pbml0KGVjTW9kZWwsIGFwaSk7XG4gICAgICAgICAgdmlld01hcFt2aWV3SWRdID0gdmlldztcbiAgICAgICAgICB2aWV3TGlzdC5wdXNoKHZpZXcpO1xuICAgICAgICAgIHpyLmFkZCh2aWV3Lmdyb3VwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1vZGVsLl9fdmlld0lkID0gdmlldy5fX2lkID0gdmlld0lkO1xuICAgICAgICB2aWV3Ll9fYWxpdmUgPSB0cnVlO1xuICAgICAgICB2aWV3Ll9fbW9kZWwgPSBtb2RlbDtcbiAgICAgICAgdmlldy5ncm91cC5fX2VjQ29tcG9uZW50SW5mbyA9IHtcbiAgICAgICAgICBtYWluVHlwZTogbW9kZWwubWFpblR5cGUsXG4gICAgICAgICAgaW5kZXg6IG1vZGVsLmNvbXBvbmVudEluZGV4XG4gICAgICAgIH07XG4gICAgICAgICFpc0NvbXBvbmVudCAmJiBzY2hlZHVsZXIucHJlcGFyZVZpZXcodmlldywgbW9kZWwsIGVjTW9kZWwsIGFwaSk7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmlld0xpc3QubGVuZ3RoOykge1xuICAgICAgICB2YXIgdmlldyA9IHZpZXdMaXN0W2ldO1xuXG4gICAgICAgIGlmICghdmlldy5fX2FsaXZlKSB7XG4gICAgICAgICAgIWlzQ29tcG9uZW50ICYmIHZpZXcucmVuZGVyVGFzay5kaXNwb3NlKCk7XG4gICAgICAgICAgenIucmVtb3ZlKHZpZXcuZ3JvdXApO1xuICAgICAgICAgIHZpZXcuZGlzcG9zZShlY01vZGVsLCBhcGkpO1xuICAgICAgICAgIHZpZXdMaXN0LnNwbGljZShpLCAxKTtcblxuICAgICAgICAgIGlmICh2aWV3TWFwW3ZpZXcuX19pZF0gPT09IHZpZXcpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB2aWV3TWFwW3ZpZXcuX19pZF07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmlldy5fX2lkID0gdmlldy5ncm91cC5fX2VjQ29tcG9uZW50SW5mbyA9IG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHVwZGF0ZURpcmVjdGx5ID0gZnVuY3Rpb24gKGVjSW5zLCBtZXRob2QsIHBheWxvYWQsIG1haW5UeXBlLCBzdWJUeXBlKSB7XG4gICAgICB2YXIgZWNNb2RlbCA9IGVjSW5zLl9tb2RlbDtcbiAgICAgIGVjTW9kZWwuc2V0VXBkYXRlUGF5bG9hZChwYXlsb2FkKTsgLy8gYnJvYWRjYXN0XG5cbiAgICAgIGlmICghbWFpblR5cGUpIHtcbiAgICAgICAgLy8gRklYTUVcbiAgICAgICAgLy8gQ2hhcnQgd2lsbCBub3QgYmUgdXBkYXRlIGRpcmVjdGx5IGhlcmUsIGV4Y2VwdCBzZXQgZGlydHkuXG4gICAgICAgIC8vIEJ1dCB0aGVyZSBpcyBubyBzdWNoIHNjZW5hcmlvIG5vdy5cbiAgICAgICAgZWFjaChbXS5jb25jYXQoZWNJbnMuX2NvbXBvbmVudHNWaWV3cykuY29uY2F0KGVjSW5zLl9jaGFydHNWaWV3cyksIGNhbGxWaWV3KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgcXVlcnkgPSB7fTtcbiAgICAgIHF1ZXJ5W21haW5UeXBlICsgJ0lkJ10gPSBwYXlsb2FkW21haW5UeXBlICsgJ0lkJ107XG4gICAgICBxdWVyeVttYWluVHlwZSArICdJbmRleCddID0gcGF5bG9hZFttYWluVHlwZSArICdJbmRleCddO1xuICAgICAgcXVlcnlbbWFpblR5cGUgKyAnTmFtZSddID0gcGF5bG9hZFttYWluVHlwZSArICdOYW1lJ107XG4gICAgICB2YXIgY29uZGl0aW9uID0ge1xuICAgICAgICBtYWluVHlwZTogbWFpblR5cGUsXG4gICAgICAgIHF1ZXJ5OiBxdWVyeVxuICAgICAgfTtcbiAgICAgIHN1YlR5cGUgJiYgKGNvbmRpdGlvbi5zdWJUeXBlID0gc3ViVHlwZSk7IC8vIHN1YlR5cGUgbWF5IGJlICcnIGJ5IHBhcnNlQ2xhc3NUeXBlO1xuXG4gICAgICB2YXIgZXhjbHVkZVNlcmllc0lkID0gcGF5bG9hZC5leGNsdWRlU2VyaWVzSWQ7XG4gICAgICB2YXIgZXhjbHVkZVNlcmllc0lkTWFwO1xuXG4gICAgICBpZiAoZXhjbHVkZVNlcmllc0lkICE9IG51bGwpIHtcbiAgICAgICAgZXhjbHVkZVNlcmllc0lkTWFwID0gY3JlYXRlSGFzaE1hcCgpO1xuICAgICAgICBlYWNoKG1vZGVsVXRpbC5ub3JtYWxpemVUb0FycmF5KGV4Y2x1ZGVTZXJpZXNJZCksIGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgIHZhciBtb2RlbElkID0gbW9kZWxVdGlsLmNvbnZlcnRPcHRpb25JZE5hbWUoaWQsIG51bGwpO1xuXG4gICAgICAgICAgaWYgKG1vZGVsSWQgIT0gbnVsbCkge1xuICAgICAgICAgICAgZXhjbHVkZVNlcmllc0lkTWFwLnNldChtb2RlbElkLCB0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSAvLyBJZiBkaXNwYXRjaEFjdGlvbiBiZWZvcmUgc2V0T3B0aW9uLCBkbyBub3RoaW5nLlxuXG5cbiAgICAgIGVjTW9kZWwgJiYgZWNNb2RlbC5lYWNoQ29tcG9uZW50KGNvbmRpdGlvbiwgZnVuY3Rpb24gKG1vZGVsKSB7XG4gICAgICAgIHZhciBpc0V4Y2x1ZGVkID0gZXhjbHVkZVNlcmllc0lkTWFwICYmIGV4Y2x1ZGVTZXJpZXNJZE1hcC5nZXQobW9kZWwuaWQpICE9IG51bGw7XG5cbiAgICAgICAgaWYgKGlzRXhjbHVkZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICA7XG5cbiAgICAgICAgaWYgKGlzSGlnaERvd25QYXlsb2FkKHBheWxvYWQpKSB7XG4gICAgICAgICAgaWYgKG1vZGVsIGluc3RhbmNlb2YgU2VyaWVzTW9kZWwpIHtcbiAgICAgICAgICAgIGlmIChwYXlsb2FkLnR5cGUgPT09IEhJR0hMSUdIVF9BQ1RJT05fVFlQRSAmJiAhcGF5bG9hZC5ub3RCbHVyICYmICFtb2RlbC5nZXQoWydlbXBoYXNpcycsICdkaXNhYmxlZCddKSkge1xuICAgICAgICAgICAgICBibHVyU2VyaWVzRnJvbUhpZ2hsaWdodFBheWxvYWQobW9kZWwsIHBheWxvYWQsIGVjSW5zLl9hcGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBmaW5kQ29tcG9uZW50SGlnaERvd25EaXNwYXRjaGVycyhtb2RlbC5tYWluVHlwZSwgbW9kZWwuY29tcG9uZW50SW5kZXgsIHBheWxvYWQubmFtZSwgZWNJbnMuX2FwaSksXG4gICAgICAgICAgICAgICAgZm9jdXNTZWxmID0gX2EuZm9jdXNTZWxmLFxuICAgICAgICAgICAgICAgIGRpc3BhdGNoZXJzID0gX2EuZGlzcGF0Y2hlcnM7XG5cbiAgICAgICAgICAgIGlmIChwYXlsb2FkLnR5cGUgPT09IEhJR0hMSUdIVF9BQ1RJT05fVFlQRSAmJiBmb2N1c1NlbGYgJiYgIXBheWxvYWQubm90Qmx1cikge1xuICAgICAgICAgICAgICBibHVyQ29tcG9uZW50KG1vZGVsLm1haW5UeXBlLCBtb2RlbC5jb21wb25lbnRJbmRleCwgZWNJbnMuX2FwaSk7XG4gICAgICAgICAgICB9IC8vIFBFTkRJTkc6XG4gICAgICAgICAgICAvLyBXaGV0aGVyIHRvIHB1dCB0aGlzIFwiZW50ZXIgZW1waGFzaXNcIiBjb2RlIGluIGBDb21wb25lbnRWaWV3YCxcbiAgICAgICAgICAgIC8vIHdoaWNoIHdpbGwgYmUgdGhlIHNhbWUgYXMgYENoYXJ0Vmlld2AgYnV0IG1pZ2h0IGJlIG5vdCBuZWNlc3NhcnlcbiAgICAgICAgICAgIC8vIGFuZCB3aWxsIGJlIGZhciBmcm9tIHRoaXMgbG9naWMuXG5cblxuICAgICAgICAgICAgaWYgKGRpc3BhdGNoZXJzKSB7XG4gICAgICAgICAgICAgIGVhY2goZGlzcGF0Y2hlcnMsIGZ1bmN0aW9uIChkaXNwYXRjaGVyKSB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZC50eXBlID09PSBISUdITElHSFRfQUNUSU9OX1RZUEUgPyBlbnRlckVtcGhhc2lzKGRpc3BhdGNoZXIpIDogbGVhdmVFbXBoYXNpcyhkaXNwYXRjaGVyKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGlzU2VsZWN0Q2hhbmdlUGF5bG9hZChwYXlsb2FkKSkge1xuICAgICAgICAgIC8vIFRPRE8gZ2VvXG4gICAgICAgICAgaWYgKG1vZGVsIGluc3RhbmNlb2YgU2VyaWVzTW9kZWwpIHtcbiAgICAgICAgICAgIHRvZ2dsZVNlbGVjdGlvbkZyb21QYXlsb2FkKG1vZGVsLCBwYXlsb2FkLCBlY0lucy5fYXBpKTtcbiAgICAgICAgICAgIHVwZGF0ZVNlcmllc0VsZW1lbnRTZWxlY3Rpb24obW9kZWwpO1xuICAgICAgICAgICAgbWFya1N0YXR1c1RvVXBkYXRlKGVjSW5zKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIGVjSW5zKTtcbiAgICAgIGVjTW9kZWwgJiYgZWNNb2RlbC5lYWNoQ29tcG9uZW50KGNvbmRpdGlvbiwgZnVuY3Rpb24gKG1vZGVsKSB7XG4gICAgICAgIHZhciBpc0V4Y2x1ZGVkID0gZXhjbHVkZVNlcmllc0lkTWFwICYmIGV4Y2x1ZGVTZXJpZXNJZE1hcC5nZXQobW9kZWwuaWQpICE9IG51bGw7XG5cbiAgICAgICAgaWYgKGlzRXhjbHVkZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICA7XG4gICAgICAgIGNhbGxWaWV3KGVjSW5zW21haW5UeXBlID09PSAnc2VyaWVzJyA/ICdfY2hhcnRzTWFwJyA6ICdfY29tcG9uZW50c01hcCddW21vZGVsLl9fdmlld0lkXSk7XG4gICAgICB9LCBlY0lucyk7XG5cbiAgICAgIGZ1bmN0aW9uIGNhbGxWaWV3KHZpZXcpIHtcbiAgICAgICAgdmlldyAmJiB2aWV3Ll9fYWxpdmUgJiYgdmlld1ttZXRob2RdICYmIHZpZXdbbWV0aG9kXSh2aWV3Ll9fbW9kZWwsIGVjTW9kZWwsIGVjSW5zLl9hcGksIHBheWxvYWQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB1cGRhdGVNZXRob2RzID0ge1xuICAgICAgcHJlcGFyZUFuZFVwZGF0ZTogZnVuY3Rpb24gKHBheWxvYWQpIHtcbiAgICAgICAgcHJlcGFyZSh0aGlzKTtcbiAgICAgICAgdXBkYXRlTWV0aG9kcy51cGRhdGUuY2FsbCh0aGlzLCBwYXlsb2FkLCB7XG4gICAgICAgICAgLy8gTmVlZHMgdG8gbWFyayBvcHRpb24gY2hhbmdlZCBpZiBuZXdPcHRpb24gaXMgZ2l2ZW4uXG4gICAgICAgICAgLy8gSXQncyBmcm9tIE1hZ2ljVHlwZS5cbiAgICAgICAgICAvLyBUT0RPIElmIHVzZSBhIHNlcGFyYXRlIGZsYWcgb3B0aW9uQ2hhbmdlZCBpbiBwYXlsb2FkP1xuICAgICAgICAgIG9wdGlvbkNoYW5nZWQ6IHBheWxvYWQubmV3T3B0aW9uICE9IG51bGxcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgdXBkYXRlOiBmdW5jdGlvbiAocGF5bG9hZCwgdXBkYXRlUGFyYW1zKSB7XG4gICAgICAgIHZhciBlY01vZGVsID0gdGhpcy5fbW9kZWw7XG4gICAgICAgIHZhciBhcGkgPSB0aGlzLl9hcGk7XG4gICAgICAgIHZhciB6ciA9IHRoaXMuX3pyO1xuICAgICAgICB2YXIgY29vcmRTeXNNZ3IgPSB0aGlzLl9jb29yZFN5c01ncjtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuX3NjaGVkdWxlcjsgLy8gdXBkYXRlIGJlZm9yZSBzZXRPcHRpb25cblxuICAgICAgICBpZiAoIWVjTW9kZWwpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBlY01vZGVsLnNldFVwZGF0ZVBheWxvYWQocGF5bG9hZCk7XG4gICAgICAgIHNjaGVkdWxlci5yZXN0b3JlRGF0YShlY01vZGVsLCBwYXlsb2FkKTtcbiAgICAgICAgc2NoZWR1bGVyLnBlcmZvcm1TZXJpZXNUYXNrcyhlY01vZGVsKTsgLy8gVE9ET1xuICAgICAgICAvLyBTYXZlIHRvdGFsIGVjTW9kZWwgaGVyZSBmb3IgdW5kby9yZWRvIChhZnRlciByZXN0b3JpbmcgZGF0YSBhbmQgYmVmb3JlIHByb2Nlc3NpbmcgZGF0YSkuXG4gICAgICAgIC8vIFVuZG8gKHJlc3RvcmF0aW9uIG9mIHRvdGFsIGVjTW9kZWwpIGNhbiBiZSBjYXJyaWVkIG91dCBpbiAnYWN0aW9uJyBvciBvdXRzaWRlIEFQSSBjYWxsLlxuICAgICAgICAvLyBDcmVhdGUgbmV3IGNvb3JkaW5hdGUgc3lzdGVtIGVhY2ggdXBkYXRlXG4gICAgICAgIC8vIEluIExpbmVWaWV3IG1heSBzYXZlIHRoZSBvbGQgY29vcmRpbmF0ZSBzeXN0ZW0gYW5kIHVzZSBpdCB0byBnZXQgdGhlIG9yaWdpbmFsIHBvaW50LlxuXG4gICAgICAgIGNvb3JkU3lzTWdyLmNyZWF0ZShlY01vZGVsLCBhcGkpO1xuICAgICAgICBzY2hlZHVsZXIucGVyZm9ybURhdGFQcm9jZXNzb3JUYXNrcyhlY01vZGVsLCBwYXlsb2FkKTsgLy8gQ3VycmVudCBzdHJlYW0gcmVuZGVyIGlzIG5vdCBzdXBwb3J0ZWQgaW4gZGF0YSBwcm9jZXNzLiBTbyB3ZSBjYW4gdXBkYXRlXG4gICAgICAgIC8vIHN0cmVhbSBtb2RlcyBhZnRlciBkYXRhIHByb2Nlc3NpbmcsIHdoZXJlIHRoZSBmaWx0ZXJlZCBkYXRhIGlzIHVzZWQgdG9cbiAgICAgICAgLy8gZGV0ZXJtaW5lIHdoZXRoZXIgdG8gdXNlIHByb2dyZXNzaXZlIHJlbmRlcmluZy5cblxuICAgICAgICB1cGRhdGVTdHJlYW1Nb2Rlcyh0aGlzLCBlY01vZGVsKTsgLy8gV2UgdXBkYXRlIHN0cmVhbSBtb2RlcyBiZWZvcmUgY29vcmRpbmF0ZSBzeXN0ZW0gdXBkYXRlZCwgdGhlbiB0aGUgbW9kZXMgaW5mb1xuICAgICAgICAvLyBjYW4gYmUgZmV0Y2hlZCB3aGVuIGNvb3JkIHN5cyB1cGRhdGluZyAoY29uc2lkZXIgdGhlIGJhckdyaWQgZXh0ZW50IGZpeCkuIEJ1dFxuICAgICAgICAvLyB0aGUgZHJhd2JhY2sgaXMgdGhlIGZ1bGwgY29vcmQgaW5mbyBjYW4gbm90IGJlIGZldGNoZWQuIEZvcnR1bmF0ZWx5IHRoaXMgZnVsbFxuICAgICAgICAvLyBjb29yZCBpcyBub3QgcmVxdWlyZWQgaW4gc3RyZWFtIG1vZGUgdXBkYXRlciBjdXJyZW50bHkuXG5cbiAgICAgICAgY29vcmRTeXNNZ3IudXBkYXRlKGVjTW9kZWwsIGFwaSk7XG4gICAgICAgIGNsZWFyQ29sb3JQYWxldHRlKGVjTW9kZWwpO1xuICAgICAgICBzY2hlZHVsZXIucGVyZm9ybVZpc3VhbFRhc2tzKGVjTW9kZWwsIHBheWxvYWQpO1xuICAgICAgICByZW5kZXIodGhpcywgZWNNb2RlbCwgYXBpLCBwYXlsb2FkLCB1cGRhdGVQYXJhbXMpOyAvLyBTZXQgYmFja2dyb3VuZFxuXG4gICAgICAgIHZhciBiYWNrZ3JvdW5kQ29sb3IgPSBlY01vZGVsLmdldCgnYmFja2dyb3VuZENvbG9yJykgfHwgJ3RyYW5zcGFyZW50JztcbiAgICAgICAgdmFyIGRhcmtNb2RlID0gZWNNb2RlbC5nZXQoJ2RhcmtNb2RlJyk7XG4gICAgICAgIHpyLnNldEJhY2tncm91bmRDb2xvcihiYWNrZ3JvdW5kQ29sb3IpOyAvLyBGb3JjZSBzZXQgZGFyayBtb2RlLlxuXG4gICAgICAgIGlmIChkYXJrTW9kZSAhPSBudWxsICYmIGRhcmtNb2RlICE9PSAnYXV0bycpIHtcbiAgICAgICAgICB6ci5zZXREYXJrTW9kZShkYXJrTW9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICBsaWZlY3ljbGUudHJpZ2dlcignYWZ0ZXJ1cGRhdGUnLCBlY01vZGVsLCBhcGkpO1xuICAgICAgfSxcbiAgICAgIHVwZGF0ZVRyYW5zZm9ybTogZnVuY3Rpb24gKHBheWxvYWQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICB2YXIgZWNNb2RlbCA9IHRoaXMuX21vZGVsO1xuICAgICAgICB2YXIgYXBpID0gdGhpcy5fYXBpOyAvLyB1cGRhdGUgYmVmb3JlIHNldE9wdGlvblxuXG4gICAgICAgIGlmICghZWNNb2RlbCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGVjTW9kZWwuc2V0VXBkYXRlUGF5bG9hZChwYXlsb2FkKTsgLy8gQ2hhcnRWaWV3Lm1hcmtVcGRhdGVNZXRob2QocGF5bG9hZCwgJ3VwZGF0ZVRyYW5zZm9ybScpO1xuXG4gICAgICAgIHZhciBjb21wb25lbnREaXJ0eUxpc3QgPSBbXTtcbiAgICAgICAgZWNNb2RlbC5lYWNoQ29tcG9uZW50KGZ1bmN0aW9uIChjb21wb25lbnRUeXBlLCBjb21wb25lbnRNb2RlbCkge1xuICAgICAgICAgIGlmIChjb21wb25lbnRUeXBlID09PSAnc2VyaWVzJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBjb21wb25lbnRWaWV3ID0gX3RoaXMuZ2V0Vmlld09mQ29tcG9uZW50TW9kZWwoY29tcG9uZW50TW9kZWwpO1xuXG4gICAgICAgICAgaWYgKGNvbXBvbmVudFZpZXcgJiYgY29tcG9uZW50Vmlldy5fX2FsaXZlKSB7XG4gICAgICAgICAgICBpZiAoY29tcG9uZW50Vmlldy51cGRhdGVUcmFuc2Zvcm0pIHtcbiAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGNvbXBvbmVudFZpZXcudXBkYXRlVHJhbnNmb3JtKGNvbXBvbmVudE1vZGVsLCBlY01vZGVsLCBhcGksIHBheWxvYWQpO1xuICAgICAgICAgICAgICByZXN1bHQgJiYgcmVzdWx0LnVwZGF0ZSAmJiBjb21wb25lbnREaXJ0eUxpc3QucHVzaChjb21wb25lbnRWaWV3KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbXBvbmVudERpcnR5TGlzdC5wdXNoKGNvbXBvbmVudFZpZXcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBzZXJpZXNEaXJ0eU1hcCA9IGNyZWF0ZUhhc2hNYXAoKTtcbiAgICAgICAgZWNNb2RlbC5lYWNoU2VyaWVzKGZ1bmN0aW9uIChzZXJpZXNNb2RlbCkge1xuICAgICAgICAgIHZhciBjaGFydFZpZXcgPSBfdGhpcy5fY2hhcnRzTWFwW3Nlcmllc01vZGVsLl9fdmlld0lkXTtcblxuICAgICAgICAgIGlmIChjaGFydFZpZXcudXBkYXRlVHJhbnNmb3JtKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gY2hhcnRWaWV3LnVwZGF0ZVRyYW5zZm9ybShzZXJpZXNNb2RlbCwgZWNNb2RlbCwgYXBpLCBwYXlsb2FkKTtcbiAgICAgICAgICAgIHJlc3VsdCAmJiByZXN1bHQudXBkYXRlICYmIHNlcmllc0RpcnR5TWFwLnNldChzZXJpZXNNb2RlbC51aWQsIDEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXJpZXNEaXJ0eU1hcC5zZXQoc2VyaWVzTW9kZWwudWlkLCAxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjbGVhckNvbG9yUGFsZXR0ZShlY01vZGVsKTsgLy8gS2VlcCBwaXBlIHRvIHRoZSBleGlzdCBwaXBlbGluZSBiZWNhdXNlIGl0IGRlcGVuZHMgb24gdGhlIHJlbmRlciB0YXNrIG9mIHRoZSBmdWxsIHBpcGVsaW5lLlxuICAgICAgICAvLyB0aGlzLl9zY2hlZHVsZXIucGVyZm9ybVZpc3VhbFRhc2tzKGVjTW9kZWwsIHBheWxvYWQsICdsYXlvdXQnLCB0cnVlKTtcblxuICAgICAgICB0aGlzLl9zY2hlZHVsZXIucGVyZm9ybVZpc3VhbFRhc2tzKGVjTW9kZWwsIHBheWxvYWQsIHtcbiAgICAgICAgICBzZXREaXJ0eTogdHJ1ZSxcbiAgICAgICAgICBkaXJ0eU1hcDogc2VyaWVzRGlydHlNYXBcbiAgICAgICAgfSk7IC8vIEN1cnJlbnRseSwgbm90IGNhbGwgcmVuZGVyIG9mIGNvbXBvbmVudHMuIEdlbyByZW5kZXIgY29zdCBhIGxvdC5cbiAgICAgICAgLy8gcmVuZGVyQ29tcG9uZW50cyhlY0lucywgZWNNb2RlbCwgYXBpLCBwYXlsb2FkLCBjb21wb25lbnREaXJ0eUxpc3QpO1xuXG5cbiAgICAgICAgcmVuZGVyU2VyaWVzKHRoaXMsIGVjTW9kZWwsIGFwaSwgcGF5bG9hZCwge30sIHNlcmllc0RpcnR5TWFwKTtcbiAgICAgICAgbGlmZWN5Y2xlLnRyaWdnZXIoJ2FmdGVydXBkYXRlJywgZWNNb2RlbCwgYXBpKTtcbiAgICAgIH0sXG4gICAgICB1cGRhdGVWaWV3OiBmdW5jdGlvbiAocGF5bG9hZCkge1xuICAgICAgICB2YXIgZWNNb2RlbCA9IHRoaXMuX21vZGVsOyAvLyB1cGRhdGUgYmVmb3JlIHNldE9wdGlvblxuXG4gICAgICAgIGlmICghZWNNb2RlbCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGVjTW9kZWwuc2V0VXBkYXRlUGF5bG9hZChwYXlsb2FkKTtcbiAgICAgICAgQ2hhcnRWaWV3Lm1hcmtVcGRhdGVNZXRob2QocGF5bG9hZCwgJ3VwZGF0ZVZpZXcnKTtcbiAgICAgICAgY2xlYXJDb2xvclBhbGV0dGUoZWNNb2RlbCk7IC8vIEtlZXAgcGlwZSB0byB0aGUgZXhpc3QgcGlwZWxpbmUgYmVjYXVzZSBpdCBkZXBlbmRzIG9uIHRoZSByZW5kZXIgdGFzayBvZiB0aGUgZnVsbCBwaXBlbGluZS5cblxuICAgICAgICB0aGlzLl9zY2hlZHVsZXIucGVyZm9ybVZpc3VhbFRhc2tzKGVjTW9kZWwsIHBheWxvYWQsIHtcbiAgICAgICAgICBzZXREaXJ0eTogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICByZW5kZXIodGhpcywgZWNNb2RlbCwgdGhpcy5fYXBpLCBwYXlsb2FkLCB7fSk7XG4gICAgICAgIGxpZmVjeWNsZS50cmlnZ2VyKCdhZnRlcnVwZGF0ZScsIGVjTW9kZWwsIHRoaXMuX2FwaSk7XG4gICAgICB9LFxuICAgICAgdXBkYXRlVmlzdWFsOiBmdW5jdGlvbiAocGF5bG9hZCkge1xuICAgICAgICAvLyB1cGRhdGVNZXRob2RzLnVwZGF0ZS5jYWxsKHRoaXMsIHBheWxvYWQpO1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIHZhciBlY01vZGVsID0gdGhpcy5fbW9kZWw7IC8vIHVwZGF0ZSBiZWZvcmUgc2V0T3B0aW9uXG5cbiAgICAgICAgaWYgKCFlY01vZGVsKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZWNNb2RlbC5zZXRVcGRhdGVQYXlsb2FkKHBheWxvYWQpOyAvLyBjbGVhciBhbGwgdmlzdWFsXG5cbiAgICAgICAgZWNNb2RlbC5lYWNoU2VyaWVzKGZ1bmN0aW9uIChzZXJpZXNNb2RlbCkge1xuICAgICAgICAgIHNlcmllc01vZGVsLmdldERhdGEoKS5jbGVhckFsbFZpc3VhbCgpO1xuICAgICAgICB9KTsgLy8gUGVyZm9ybSB2aXN1YWxcblxuICAgICAgICBDaGFydFZpZXcubWFya1VwZGF0ZU1ldGhvZChwYXlsb2FkLCAndXBkYXRlVmlzdWFsJyk7XG4gICAgICAgIGNsZWFyQ29sb3JQYWxldHRlKGVjTW9kZWwpOyAvLyBLZWVwIHBpcGUgdG8gdGhlIGV4aXN0IHBpcGVsaW5lIGJlY2F1c2UgaXQgZGVwZW5kcyBvbiB0aGUgcmVuZGVyIHRhc2sgb2YgdGhlIGZ1bGwgcGlwZWxpbmUuXG5cbiAgICAgICAgdGhpcy5fc2NoZWR1bGVyLnBlcmZvcm1WaXN1YWxUYXNrcyhlY01vZGVsLCBwYXlsb2FkLCB7XG4gICAgICAgICAgdmlzdWFsVHlwZTogJ3Zpc3VhbCcsXG4gICAgICAgICAgc2V0RGlydHk6IHRydWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZWNNb2RlbC5lYWNoQ29tcG9uZW50KGZ1bmN0aW9uIChjb21wb25lbnRUeXBlLCBjb21wb25lbnRNb2RlbCkge1xuICAgICAgICAgIGlmIChjb21wb25lbnRUeXBlICE9PSAnc2VyaWVzJykge1xuICAgICAgICAgICAgdmFyIGNvbXBvbmVudFZpZXcgPSBfdGhpcy5nZXRWaWV3T2ZDb21wb25lbnRNb2RlbChjb21wb25lbnRNb2RlbCk7XG5cbiAgICAgICAgICAgIGNvbXBvbmVudFZpZXcgJiYgY29tcG9uZW50Vmlldy5fX2FsaXZlICYmIGNvbXBvbmVudFZpZXcudXBkYXRlVmlzdWFsKGNvbXBvbmVudE1vZGVsLCBlY01vZGVsLCBfdGhpcy5fYXBpLCBwYXlsb2FkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBlY01vZGVsLmVhY2hTZXJpZXMoZnVuY3Rpb24gKHNlcmllc01vZGVsKSB7XG4gICAgICAgICAgdmFyIGNoYXJ0VmlldyA9IF90aGlzLl9jaGFydHNNYXBbc2VyaWVzTW9kZWwuX192aWV3SWRdO1xuICAgICAgICAgIGNoYXJ0Vmlldy51cGRhdGVWaXN1YWwoc2VyaWVzTW9kZWwsIGVjTW9kZWwsIF90aGlzLl9hcGksIHBheWxvYWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgbGlmZWN5Y2xlLnRyaWdnZXIoJ2FmdGVydXBkYXRlJywgZWNNb2RlbCwgdGhpcy5fYXBpKTtcbiAgICAgIH0sXG4gICAgICB1cGRhdGVMYXlvdXQ6IGZ1bmN0aW9uIChwYXlsb2FkKSB7XG4gICAgICAgIHVwZGF0ZU1ldGhvZHMudXBkYXRlLmNhbGwodGhpcywgcGF5bG9hZCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGRvQ29udmVydFBpeGVsID0gZnVuY3Rpb24gKGVjSW5zLCBtZXRob2ROYW1lLCBmaW5kZXIsIHZhbHVlKSB7XG4gICAgICBpZiAoZWNJbnMuX2Rpc3Bvc2VkKSB7XG4gICAgICAgIGRpc3Bvc2VkV2FybmluZyhlY0lucy5pZCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGVjTW9kZWwgPSBlY0lucy5fbW9kZWw7XG5cbiAgICAgIHZhciBjb29yZFN5c0xpc3QgPSBlY0lucy5fY29vcmRTeXNNZ3IuZ2V0Q29vcmRpbmF0ZVN5c3RlbXMoKTtcblxuICAgICAgdmFyIHJlc3VsdDtcbiAgICAgIHZhciBwYXJzZWRGaW5kZXIgPSBtb2RlbFV0aWwucGFyc2VGaW5kZXIoZWNNb2RlbCwgZmluZGVyKTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb29yZFN5c0xpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGNvb3JkU3lzID0gY29vcmRTeXNMaXN0W2ldO1xuXG4gICAgICAgIGlmIChjb29yZFN5c1ttZXRob2ROYW1lXSAmJiAocmVzdWx0ID0gY29vcmRTeXNbbWV0aG9kTmFtZV0oZWNNb2RlbCwgcGFyc2VkRmluZGVyLCB2YWx1ZSkpICE9IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHdhcm4oJ05vIGNvb3JkaW5hdGUgc3lzdGVtIHRoYXQgc3VwcG9ydHMgJyArIG1ldGhvZE5hbWUgKyAnIGZvdW5kIGJ5IHRoZSBnaXZlbiBmaW5kZXIuJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHVwZGF0ZVN0cmVhbU1vZGVzID0gZnVuY3Rpb24gKGVjSW5zLCBlY01vZGVsKSB7XG4gICAgICB2YXIgY2hhcnRzTWFwID0gZWNJbnMuX2NoYXJ0c01hcDtcbiAgICAgIHZhciBzY2hlZHVsZXIgPSBlY0lucy5fc2NoZWR1bGVyO1xuICAgICAgZWNNb2RlbC5lYWNoU2VyaWVzKGZ1bmN0aW9uIChzZXJpZXNNb2RlbCkge1xuICAgICAgICBzY2hlZHVsZXIudXBkYXRlU3RyZWFtTW9kZXMoc2VyaWVzTW9kZWwsIGNoYXJ0c01hcFtzZXJpZXNNb2RlbC5fX3ZpZXdJZF0pO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGRvRGlzcGF0Y2hBY3Rpb24gPSBmdW5jdGlvbiAocGF5bG9hZCwgc2lsZW50KSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB2YXIgZWNNb2RlbCA9IHRoaXMuZ2V0TW9kZWwoKTtcbiAgICAgIHZhciBwYXlsb2FkVHlwZSA9IHBheWxvYWQudHlwZTtcbiAgICAgIHZhciBlc2NhcGVDb25uZWN0ID0gcGF5bG9hZC5lc2NhcGVDb25uZWN0O1xuICAgICAgdmFyIGFjdGlvbldyYXAgPSBhY3Rpb25zW3BheWxvYWRUeXBlXTtcbiAgICAgIHZhciBhY3Rpb25JbmZvID0gYWN0aW9uV3JhcC5hY3Rpb25JbmZvO1xuICAgICAgdmFyIGNwdFR5cGVUbXAgPSAoYWN0aW9uSW5mby51cGRhdGUgfHwgJ3VwZGF0ZScpLnNwbGl0KCc6Jyk7XG4gICAgICB2YXIgdXBkYXRlTWV0aG9kID0gY3B0VHlwZVRtcC5wb3AoKTtcbiAgICAgIHZhciBjcHRUeXBlID0gY3B0VHlwZVRtcFswXSAhPSBudWxsICYmIHBhcnNlQ2xhc3NUeXBlKGNwdFR5cGVUbXBbMF0pO1xuICAgICAgdGhpc1tJTl9NQUlOX1BST0NFU1NfS0VZXSA9IHRydWU7XG4gICAgICB2YXIgcGF5bG9hZHMgPSBbcGF5bG9hZF07XG4gICAgICB2YXIgYmF0Y2hlZCA9IGZhbHNlOyAvLyBCYXRjaCBhY3Rpb25cblxuICAgICAgaWYgKHBheWxvYWQuYmF0Y2gpIHtcbiAgICAgICAgYmF0Y2hlZCA9IHRydWU7XG4gICAgICAgIHBheWxvYWRzID0gbWFwKHBheWxvYWQuYmF0Y2gsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgaXRlbSA9IGRlZmF1bHRzKGV4dGVuZCh7fSwgaXRlbSksIHBheWxvYWQpO1xuICAgICAgICAgIGl0ZW0uYmF0Y2ggPSBudWxsO1xuICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdmFyIGV2ZW50T2JqQmF0Y2ggPSBbXTtcbiAgICAgIHZhciBldmVudE9iajtcbiAgICAgIHZhciBpc1NlbGVjdENoYW5nZSA9IGlzU2VsZWN0Q2hhbmdlUGF5bG9hZChwYXlsb2FkKTtcbiAgICAgIHZhciBpc0hpZ2hEb3duID0gaXNIaWdoRG93blBheWxvYWQocGF5bG9hZCk7IC8vIE9ubHkgbGVhdmUgYmx1ciBvbmNlIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSBiYXRjaGVzLlxuXG4gICAgICBpZiAoaXNIaWdoRG93bikge1xuICAgICAgICBhbGxMZWF2ZUJsdXIodGhpcy5fYXBpKTtcbiAgICAgIH1cblxuICAgICAgZWFjaChwYXlsb2FkcywgZnVuY3Rpb24gKGJhdGNoSXRlbSkge1xuICAgICAgICAvLyBBY3Rpb24gY2FuIHNwZWNpZnkgdGhlIGV2ZW50IGJ5IHJldHVybiBpdC5cbiAgICAgICAgZXZlbnRPYmogPSBhY3Rpb25XcmFwLmFjdGlvbihiYXRjaEl0ZW0sIF90aGlzLl9tb2RlbCwgX3RoaXMuX2FwaSk7IC8vIEVtaXQgZXZlbnQgb3V0c2lkZVxuXG4gICAgICAgIGV2ZW50T2JqID0gZXZlbnRPYmogfHwgZXh0ZW5kKHt9LCBiYXRjaEl0ZW0pOyAvLyBDb252ZXJ0IHR5cGUgdG8gZXZlbnRUeXBlXG5cbiAgICAgICAgZXZlbnRPYmoudHlwZSA9IGFjdGlvbkluZm8uZXZlbnQgfHwgZXZlbnRPYmoudHlwZTtcbiAgICAgICAgZXZlbnRPYmpCYXRjaC5wdXNoKGV2ZW50T2JqKTsgLy8gbGlnaHQgdXBkYXRlIGRvZXMgbm90IHBlcmZvcm0gZGF0YSBwcm9jZXNzLCBsYXlvdXQgYW5kIHZpc3VhbC5cblxuICAgICAgICBpZiAoaXNIaWdoRG93bikge1xuICAgICAgICAgIHZhciBfYSA9IG1vZGVsVXRpbC5wcmVQYXJzZUZpbmRlcihwYXlsb2FkKSxcbiAgICAgICAgICAgICAgcXVlcnlPcHRpb25NYXAgPSBfYS5xdWVyeU9wdGlvbk1hcCxcbiAgICAgICAgICAgICAgbWFpblR5cGVTcGVjaWZpZWQgPSBfYS5tYWluVHlwZVNwZWNpZmllZDtcblxuICAgICAgICAgIHZhciBjb21wb25lbnRNYWluVHlwZSA9IG1haW5UeXBlU3BlY2lmaWVkID8gcXVlcnlPcHRpb25NYXAua2V5cygpWzBdIDogJ3Nlcmllcyc7XG4gICAgICAgICAgdXBkYXRlRGlyZWN0bHkoX3RoaXMsIHVwZGF0ZU1ldGhvZCwgYmF0Y2hJdGVtLCBjb21wb25lbnRNYWluVHlwZSk7XG4gICAgICAgICAgbWFya1N0YXR1c1RvVXBkYXRlKF90aGlzKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc1NlbGVjdENoYW5nZSkge1xuICAgICAgICAgIC8vIEF0IHByZXNlbnQgYGRpc3BhdGNoQWN0aW9uKHsgdHlwZTogJ3NlbGVjdCcsIC4uLiB9KWAgaXMgbm90IHN1cHBvcnRlZCBvbiBjb21wb25lbnRzLlxuICAgICAgICAgIC8vIGdlbyBzdGlsbCB1c2UgJ2dlb3NlbGVjdCcuXG4gICAgICAgICAgdXBkYXRlRGlyZWN0bHkoX3RoaXMsIHVwZGF0ZU1ldGhvZCwgYmF0Y2hJdGVtLCAnc2VyaWVzJyk7XG4gICAgICAgICAgbWFya1N0YXR1c1RvVXBkYXRlKF90aGlzKTtcbiAgICAgICAgfSBlbHNlIGlmIChjcHRUeXBlKSB7XG4gICAgICAgICAgdXBkYXRlRGlyZWN0bHkoX3RoaXMsIHVwZGF0ZU1ldGhvZCwgYmF0Y2hJdGVtLCBjcHRUeXBlLm1haW4sIGNwdFR5cGUuc3ViKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmICh1cGRhdGVNZXRob2QgIT09ICdub25lJyAmJiAhaXNIaWdoRG93biAmJiAhaXNTZWxlY3RDaGFuZ2UgJiYgIWNwdFR5cGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBTdGlsbCBkaXJ0eVxuICAgICAgICAgIGlmICh0aGlzW1BFTkRJTkdfVVBEQVRFXSkge1xuICAgICAgICAgICAgcHJlcGFyZSh0aGlzKTtcbiAgICAgICAgICAgIHVwZGF0ZU1ldGhvZHMudXBkYXRlLmNhbGwodGhpcywgcGF5bG9hZCk7XG4gICAgICAgICAgICB0aGlzW1BFTkRJTkdfVVBEQVRFXSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVwZGF0ZU1ldGhvZHNbdXBkYXRlTWV0aG9kXS5jYWxsKHRoaXMsIHBheWxvYWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHRoaXNbSU5fTUFJTl9QUk9DRVNTX0tFWV0gPSBmYWxzZTtcbiAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICB9IC8vIEZvbGxvdyB0aGUgcnVsZSBvZiBhY3Rpb24gYmF0Y2hcblxuXG4gICAgICBpZiAoYmF0Y2hlZCkge1xuICAgICAgICBldmVudE9iaiA9IHtcbiAgICAgICAgICB0eXBlOiBhY3Rpb25JbmZvLmV2ZW50IHx8IHBheWxvYWRUeXBlLFxuICAgICAgICAgIGVzY2FwZUNvbm5lY3Q6IGVzY2FwZUNvbm5lY3QsXG4gICAgICAgICAgYmF0Y2g6IGV2ZW50T2JqQmF0Y2hcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGV2ZW50T2JqID0gZXZlbnRPYmpCYXRjaFswXTtcbiAgICAgIH1cblxuICAgICAgdGhpc1tJTl9NQUlOX1BST0NFU1NfS0VZXSA9IGZhbHNlO1xuXG4gICAgICBpZiAoIXNpbGVudCkge1xuICAgICAgICB2YXIgbWVzc2FnZUNlbnRlciA9IHRoaXMuX21lc3NhZ2VDZW50ZXI7XG4gICAgICAgIG1lc3NhZ2VDZW50ZXIudHJpZ2dlcihldmVudE9iai50eXBlLCBldmVudE9iaik7IC8vIEV4dHJhIHRyaWdnZXJlZCAnc2VsZWN0Y2hhbmdlZCcgZXZlbnRcblxuICAgICAgICBpZiAoaXNTZWxlY3RDaGFuZ2UpIHtcbiAgICAgICAgICB2YXIgbmV3T2JqID0ge1xuICAgICAgICAgICAgdHlwZTogJ3NlbGVjdGNoYW5nZWQnLFxuICAgICAgICAgICAgZXNjYXBlQ29ubmVjdDogZXNjYXBlQ29ubmVjdCxcbiAgICAgICAgICAgIHNlbGVjdGVkOiBnZXRBbGxTZWxlY3RlZEluZGljZXMoZWNNb2RlbCksXG4gICAgICAgICAgICBpc0Zyb21DbGljazogcGF5bG9hZC5pc0Zyb21DbGljayB8fCBmYWxzZSxcbiAgICAgICAgICAgIGZyb21BY3Rpb246IHBheWxvYWQudHlwZSxcbiAgICAgICAgICAgIGZyb21BY3Rpb25QYXlsb2FkOiBwYXlsb2FkXG4gICAgICAgICAgfTtcbiAgICAgICAgICBtZXNzYWdlQ2VudGVyLnRyaWdnZXIobmV3T2JqLnR5cGUsIG5ld09iaik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZmx1c2hQZW5kaW5nQWN0aW9ucyA9IGZ1bmN0aW9uIChzaWxlbnQpIHtcbiAgICAgIHZhciBwZW5kaW5nQWN0aW9ucyA9IHRoaXMuX3BlbmRpbmdBY3Rpb25zO1xuXG4gICAgICB3aGlsZSAocGVuZGluZ0FjdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgIHZhciBwYXlsb2FkID0gcGVuZGluZ0FjdGlvbnMuc2hpZnQoKTtcbiAgICAgICAgZG9EaXNwYXRjaEFjdGlvbi5jYWxsKHRoaXMsIHBheWxvYWQsIHNpbGVudCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRyaWdnZXJVcGRhdGVkRXZlbnQgPSBmdW5jdGlvbiAoc2lsZW50KSB7XG4gICAgICAhc2lsZW50ICYmIHRoaXMudHJpZ2dlcigndXBkYXRlZCcpO1xuICAgIH07XG4gICAgLyoqXHJcbiAgICAgKiBFdmVudCBgcmVuZGVyZWRgIGlzIHRyaWdnZXJlZCB3aGVuIHpyXHJcbiAgICAgKiByZW5kZXJlZC4gSXQgaXMgdXNlZnVsIGZvciByZWFsdGltZVxyXG4gICAgICogc25hcHNob3QgKHJlZmxlY3QgYW5pbWF0aW9uKS5cclxuICAgICAqXHJcbiAgICAgKiBFdmVudCBgZmluaXNoZWRgIGlzIHRyaWdnZXJlZCB3aGVuOlxyXG4gICAgICogKDEpIHpyZW5kZXIgcmVuZGVyaW5nIGZpbmlzaGVkLlxyXG4gICAgICogKDIpIGluaXRpYWwgYW5pbWF0aW9uIGZpbmlzaGVkLlxyXG4gICAgICogKDMpIHByb2dyZXNzaXZlIHJlbmRlcmluZyBmaW5pc2hlZC5cclxuICAgICAqICg0KSBubyBwZW5kaW5nIGFjdGlvbi5cclxuICAgICAqICg1KSBubyBkZWxheWVkIHNldE9wdGlvbiBuZWVkcyB0byBiZSBwcm9jZXNzZWQuXHJcbiAgICAgKi9cblxuXG4gICAgYmluZFJlbmRlcmVkRXZlbnQgPSBmdW5jdGlvbiAoenIsIGVjSW5zKSB7XG4gICAgICB6ci5vbigncmVuZGVyZWQnLCBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgIGVjSW5zLnRyaWdnZXIoJ3JlbmRlcmVkJywgcGFyYW1zKTsgLy8gVGhlIGBmaW5pc2hlZGAgZXZlbnQgc2hvdWxkIG5vdCBiZSB0cmlnZ2VyZWQgcmVwZWF0ZWRseSxcbiAgICAgICAgLy8gc28gaXQgc2hvdWxkIG9ubHkgYmUgdHJpZ2dlcmVkIHdoZW4gcmVuZGVyaW5nIGluZGVlZCBoYXBwZW5zXG4gICAgICAgIC8vIGluIHpyZW5kZXIuIChDb25zaWRlciB0aGUgY2FzZSB0aGF0IGRpcGF0Y2hBY3Rpb24gaXMga2VlcFxuICAgICAgICAvLyB0cmlnZ2VyaW5nIHdoZW4gbW91c2UgbW92ZSkuXG5cbiAgICAgICAgaWYgKCAvLyBBbHRob3VnaCB6ciBpcyBkaXJ0eSBpZiBpbml0aWFsIGFuaW1hdGlvbiBpcyBub3QgZmluaXNoZWRcbiAgICAgICAgLy8gYW5kIHRoaXMgY2hlY2tpbmcgaXMgY2FsbGVkIG9uIGZyYW1lLCB3ZSBhbHNvIGNoZWNrXG4gICAgICAgIC8vIGFuaW1hdGlvbiBmaW5pc2hlZCBmb3Igcm9idXN0bmVzcy5cbiAgICAgICAgenIuYW5pbWF0aW9uLmlzRmluaXNoZWQoKSAmJiAhZWNJbnNbUEVORElOR19VUERBVEVdICYmICFlY0lucy5fc2NoZWR1bGVyLnVuZmluaXNoZWQgJiYgIWVjSW5zLl9wZW5kaW5nQWN0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICBlY0lucy50cmlnZ2VyKCdmaW5pc2hlZCcpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgYmluZE1vdXNlRXZlbnQgPSBmdW5jdGlvbiAoenIsIGVjSW5zKSB7XG4gICAgICB6ci5vbignbW91c2VvdmVyJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIGVsID0gZS50YXJnZXQ7XG4gICAgICAgIHZhciBkaXNwYXRjaGVyID0gZmluZEV2ZW50RGlzcGF0Y2hlcihlbCwgaXNIaWdoRG93bkRpc3BhdGNoZXIpO1xuXG4gICAgICAgIGlmIChkaXNwYXRjaGVyKSB7XG4gICAgICAgICAgaGFuZGxlR2xvYmFsTW91c2VPdmVyRm9ySGlnaERvd24oZGlzcGF0Y2hlciwgZSwgZWNJbnMuX2FwaSk7XG4gICAgICAgICAgbWFya1N0YXR1c1RvVXBkYXRlKGVjSW5zKTtcbiAgICAgICAgfVxuICAgICAgfSkub24oJ21vdXNlb3V0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIGVsID0gZS50YXJnZXQ7XG4gICAgICAgIHZhciBkaXNwYXRjaGVyID0gZmluZEV2ZW50RGlzcGF0Y2hlcihlbCwgaXNIaWdoRG93bkRpc3BhdGNoZXIpO1xuXG4gICAgICAgIGlmIChkaXNwYXRjaGVyKSB7XG4gICAgICAgICAgaGFuZGxlR2xvYmFsTW91c2VPdXRGb3JIaWdoRG93bihkaXNwYXRjaGVyLCBlLCBlY0lucy5fYXBpKTtcbiAgICAgICAgICBtYXJrU3RhdHVzVG9VcGRhdGUoZWNJbnMpO1xuICAgICAgICB9XG4gICAgICB9KS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgZWwgPSBlLnRhcmdldDtcbiAgICAgICAgdmFyIGRpc3BhdGNoZXIgPSBmaW5kRXZlbnREaXNwYXRjaGVyKGVsLCBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgcmV0dXJuIGdldEVDRGF0YSh0YXJnZXQpLmRhdGFJbmRleCAhPSBudWxsO1xuICAgICAgICB9LCB0cnVlKTtcblxuICAgICAgICBpZiAoZGlzcGF0Y2hlcikge1xuICAgICAgICAgIHZhciBhY3Rpb25UeXBlID0gZGlzcGF0Y2hlci5zZWxlY3RlZCA/ICd1bnNlbGVjdCcgOiAnc2VsZWN0JztcbiAgICAgICAgICB2YXIgZWNEYXRhID0gZ2V0RUNEYXRhKGRpc3BhdGNoZXIpO1xuXG4gICAgICAgICAgZWNJbnMuX2FwaS5kaXNwYXRjaEFjdGlvbih7XG4gICAgICAgICAgICB0eXBlOiBhY3Rpb25UeXBlLFxuICAgICAgICAgICAgZGF0YVR5cGU6IGVjRGF0YS5kYXRhVHlwZSxcbiAgICAgICAgICAgIGRhdGFJbmRleEluc2lkZTogZWNEYXRhLmRhdGFJbmRleCxcbiAgICAgICAgICAgIHNlcmllc0luZGV4OiBlY0RhdGEuc2VyaWVzSW5kZXgsXG4gICAgICAgICAgICBpc0Zyb21DbGljazogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gY2xlYXJDb2xvclBhbGV0dGUoZWNNb2RlbCkge1xuICAgICAgZWNNb2RlbC5jbGVhckNvbG9yUGFsZXR0ZSgpO1xuICAgICAgZWNNb2RlbC5lYWNoU2VyaWVzKGZ1bmN0aW9uIChzZXJpZXNNb2RlbCkge1xuICAgICAgICBzZXJpZXNNb2RlbC5jbGVhckNvbG9yUGFsZXR0ZSgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgOyAvLyBBbGxvY2F0ZSB6bGV2ZWxzIGZvciBzZXJpZXMgYW5kIGNvbXBvbmVudHNcblxuICAgIGZ1bmN0aW9uIGFsbG9jYXRlWmxldmVscyhlY01vZGVsKSB7XG4gICAgICA7XG4gICAgICB2YXIgY29tcG9uZW50WkxldmVscyA9IFtdO1xuICAgICAgdmFyIHNlcmllc1pMZXZlbHMgPSBbXTtcbiAgICAgIHZhciBoYXNTZXBlcmF0ZVpMZXZlbCA9IGZhbHNlO1xuICAgICAgZWNNb2RlbC5lYWNoQ29tcG9uZW50KGZ1bmN0aW9uIChjb21wb25lbnRUeXBlLCBjb21wb25lbnRNb2RlbCkge1xuICAgICAgICB2YXIgemxldmVsID0gY29tcG9uZW50TW9kZWwuZ2V0KCd6bGV2ZWwnKSB8fCAwO1xuICAgICAgICB2YXIgeiA9IGNvbXBvbmVudE1vZGVsLmdldCgneicpIHx8IDA7XG4gICAgICAgIHZhciB6bGV2ZWxLZXkgPSBjb21wb25lbnRNb2RlbC5nZXRaTGV2ZWxLZXkoKTtcbiAgICAgICAgaGFzU2VwZXJhdGVaTGV2ZWwgPSBoYXNTZXBlcmF0ZVpMZXZlbCB8fCAhIXpsZXZlbEtleTtcbiAgICAgICAgKGNvbXBvbmVudFR5cGUgPT09ICdzZXJpZXMnID8gc2VyaWVzWkxldmVscyA6IGNvbXBvbmVudFpMZXZlbHMpLnB1c2goe1xuICAgICAgICAgIHpsZXZlbDogemxldmVsLFxuICAgICAgICAgIHo6IHosXG4gICAgICAgICAgaWR4OiBjb21wb25lbnRNb2RlbC5jb21wb25lbnRJbmRleCxcbiAgICAgICAgICB0eXBlOiBjb21wb25lbnRUeXBlLFxuICAgICAgICAgIGtleTogemxldmVsS2V5XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChoYXNTZXBlcmF0ZVpMZXZlbCkge1xuICAgICAgICAvLyBTZXJpZXMgYWZ0ZXIgY29tcG9uZW50XG4gICAgICAgIHZhciB6TGV2ZWxzID0gY29tcG9uZW50WkxldmVscy5jb25jYXQoc2VyaWVzWkxldmVscyk7XG4gICAgICAgIHZhciBsYXN0U2VyaWVzWkxldmVsXzE7XG4gICAgICAgIHZhciBsYXN0U2VyaWVzS2V5XzE7XG4gICAgICAgIHRpbXNvcnQoekxldmVscywgZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICBpZiAoYS56bGV2ZWwgPT09IGIuemxldmVsKSB7XG4gICAgICAgICAgICByZXR1cm4gYS56IC0gYi56O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBhLnpsZXZlbCAtIGIuemxldmVsO1xuICAgICAgICB9KTtcbiAgICAgICAgZWFjaCh6TGV2ZWxzLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgIHZhciBjb21wb25lbnRNb2RlbCA9IGVjTW9kZWwuZ2V0Q29tcG9uZW50KGl0ZW0udHlwZSwgaXRlbS5pZHgpO1xuICAgICAgICAgIHZhciB6bGV2ZWwgPSBpdGVtLnpsZXZlbDtcbiAgICAgICAgICB2YXIga2V5ID0gaXRlbS5rZXk7XG5cbiAgICAgICAgICBpZiAobGFzdFNlcmllc1pMZXZlbF8xICE9IG51bGwpIHtcbiAgICAgICAgICAgIHpsZXZlbCA9IE1hdGgubWF4KGxhc3RTZXJpZXNaTGV2ZWxfMSwgemxldmVsKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICBpZiAoemxldmVsID09PSBsYXN0U2VyaWVzWkxldmVsXzEgJiYga2V5ICE9PSBsYXN0U2VyaWVzS2V5XzEpIHtcbiAgICAgICAgICAgICAgemxldmVsKys7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxhc3RTZXJpZXNLZXlfMSA9IGtleTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGxhc3RTZXJpZXNLZXlfMSkge1xuICAgICAgICAgICAgaWYgKHpsZXZlbCA9PT0gbGFzdFNlcmllc1pMZXZlbF8xKSB7XG4gICAgICAgICAgICAgIHpsZXZlbCsrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsYXN0U2VyaWVzS2V5XzEgPSAnJztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsYXN0U2VyaWVzWkxldmVsXzEgPSB6bGV2ZWw7XG4gICAgICAgICAgY29tcG9uZW50TW9kZWwuc2V0WkxldmVsKHpsZXZlbCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlciA9IGZ1bmN0aW9uIChlY0lucywgZWNNb2RlbCwgYXBpLCBwYXlsb2FkLCB1cGRhdGVQYXJhbXMpIHtcbiAgICAgIGFsbG9jYXRlWmxldmVscyhlY01vZGVsKTtcbiAgICAgIHJlbmRlckNvbXBvbmVudHMoZWNJbnMsIGVjTW9kZWwsIGFwaSwgcGF5bG9hZCwgdXBkYXRlUGFyYW1zKTtcbiAgICAgIGVhY2goZWNJbnMuX2NoYXJ0c1ZpZXdzLCBmdW5jdGlvbiAoY2hhcnQpIHtcbiAgICAgICAgY2hhcnQuX19hbGl2ZSA9IGZhbHNlO1xuICAgICAgfSk7XG4gICAgICByZW5kZXJTZXJpZXMoZWNJbnMsIGVjTW9kZWwsIGFwaSwgcGF5bG9hZCwgdXBkYXRlUGFyYW1zKTsgLy8gUmVtb3ZlIGdyb3VwcyBvZiB1bnJlbmRlcmVkIGNoYXJ0c1xuXG4gICAgICBlYWNoKGVjSW5zLl9jaGFydHNWaWV3cywgZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICAgIGlmICghY2hhcnQuX19hbGl2ZSkge1xuICAgICAgICAgIGNoYXJ0LnJlbW92ZShlY01vZGVsLCBhcGkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgcmVuZGVyQ29tcG9uZW50cyA9IGZ1bmN0aW9uIChlY0lucywgZWNNb2RlbCwgYXBpLCBwYXlsb2FkLCB1cGRhdGVQYXJhbXMsIGRpcnR5TGlzdCkge1xuICAgICAgZWFjaChkaXJ0eUxpc3QgfHwgZWNJbnMuX2NvbXBvbmVudHNWaWV3cywgZnVuY3Rpb24gKGNvbXBvbmVudFZpZXcpIHtcbiAgICAgICAgdmFyIGNvbXBvbmVudE1vZGVsID0gY29tcG9uZW50Vmlldy5fX21vZGVsO1xuICAgICAgICBjbGVhclN0YXRlcyhjb21wb25lbnRNb2RlbCwgY29tcG9uZW50Vmlldyk7XG4gICAgICAgIGNvbXBvbmVudFZpZXcucmVuZGVyKGNvbXBvbmVudE1vZGVsLCBlY01vZGVsLCBhcGksIHBheWxvYWQpO1xuICAgICAgICB1cGRhdGVaKGNvbXBvbmVudE1vZGVsLCBjb21wb25lbnRWaWV3KTtcbiAgICAgICAgdXBkYXRlU3RhdGVzKGNvbXBvbmVudE1vZGVsLCBjb21wb25lbnRWaWV3KTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXIgZWFjaCBjaGFydCBhbmQgY29tcG9uZW50XHJcbiAgICAgKi9cblxuXG4gICAgcmVuZGVyU2VyaWVzID0gZnVuY3Rpb24gKGVjSW5zLCBlY01vZGVsLCBhcGksIHBheWxvYWQsIHVwZGF0ZVBhcmFtcywgZGlydHlNYXApIHtcbiAgICAgIC8vIFJlbmRlciBhbGwgY2hhcnRzXG4gICAgICB2YXIgc2NoZWR1bGVyID0gZWNJbnMuX3NjaGVkdWxlcjtcbiAgICAgIHVwZGF0ZVBhcmFtcyA9IGV4dGVuZCh1cGRhdGVQYXJhbXMgfHwge30sIHtcbiAgICAgICAgdXBkYXRlZFNlcmllczogZWNNb2RlbC5nZXRTZXJpZXMoKVxuICAgICAgfSk7IC8vIFRPRE8gcHJvZ3Jlc3NpdmU/XG5cbiAgICAgIGxpZmVjeWNsZS50cmlnZ2VyKCdzZXJpZXM6YmVmb3JldXBkYXRlJywgZWNNb2RlbCwgYXBpLCB1cGRhdGVQYXJhbXMpO1xuICAgICAgdmFyIHVuZmluaXNoZWQgPSBmYWxzZTtcbiAgICAgIGVjTW9kZWwuZWFjaFNlcmllcyhmdW5jdGlvbiAoc2VyaWVzTW9kZWwpIHtcbiAgICAgICAgdmFyIGNoYXJ0VmlldyA9IGVjSW5zLl9jaGFydHNNYXBbc2VyaWVzTW9kZWwuX192aWV3SWRdO1xuICAgICAgICBjaGFydFZpZXcuX19hbGl2ZSA9IHRydWU7XG4gICAgICAgIHZhciByZW5kZXJUYXNrID0gY2hhcnRWaWV3LnJlbmRlclRhc2s7XG4gICAgICAgIHNjaGVkdWxlci51cGRhdGVQYXlsb2FkKHJlbmRlclRhc2ssIHBheWxvYWQpOyAvLyBUT0RPIHN0YXRlcyBvbiBtYXJrZXIuXG5cbiAgICAgICAgY2xlYXJTdGF0ZXMoc2VyaWVzTW9kZWwsIGNoYXJ0Vmlldyk7XG5cbiAgICAgICAgaWYgKGRpcnR5TWFwICYmIGRpcnR5TWFwLmdldChzZXJpZXNNb2RlbC51aWQpKSB7XG4gICAgICAgICAgcmVuZGVyVGFzay5kaXJ0eSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlbmRlclRhc2sucGVyZm9ybShzY2hlZHVsZXIuZ2V0UGVyZm9ybUFyZ3MocmVuZGVyVGFzaykpKSB7XG4gICAgICAgICAgdW5maW5pc2hlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBjaGFydFZpZXcuZ3JvdXAuc2lsZW50ID0gISFzZXJpZXNNb2RlbC5nZXQoJ3NpbGVudCcpOyAvLyBTaG91bGQgbm90IGNhbGwgbWFya1JlZHJhdyBvbiBncm91cCwgYmVjYXVzZSBpdCB3aWxsIGRpc2FibGUgenJlbmRlclxuICAgICAgICAvLyBpbmNyZW1lbnRhbCByZW5kZXIgKGFsd2F5cyByZW5kZXIgZnJvbSB0aGUgX19zdGFydEluZGV4IGVhY2ggZnJhbWUpXG4gICAgICAgIC8vIGNoYXJ0Vmlldy5ncm91cC5tYXJrUmVkcmF3KCk7XG5cbiAgICAgICAgdXBkYXRlQmxlbmQoc2VyaWVzTW9kZWwsIGNoYXJ0Vmlldyk7XG4gICAgICAgIHVwZGF0ZVNlcmllc0VsZW1lbnRTZWxlY3Rpb24oc2VyaWVzTW9kZWwpO1xuICAgICAgfSk7XG4gICAgICBzY2hlZHVsZXIudW5maW5pc2hlZCA9IHVuZmluaXNoZWQgfHwgc2NoZWR1bGVyLnVuZmluaXNoZWQ7XG4gICAgICBsaWZlY3ljbGUudHJpZ2dlcignc2VyaWVzOmxheW91dGxhYmVscycsIGVjTW9kZWwsIGFwaSwgdXBkYXRlUGFyYW1zKTsgLy8gdHJhbnNpdGlvbiBhZnRlciBsYWJlbCBpcyBsYXlvdXRlZC5cblxuICAgICAgbGlmZWN5Y2xlLnRyaWdnZXIoJ3Nlcmllczp0cmFuc2l0aW9uJywgZWNNb2RlbCwgYXBpLCB1cGRhdGVQYXJhbXMpO1xuICAgICAgZWNNb2RlbC5lYWNoU2VyaWVzKGZ1bmN0aW9uIChzZXJpZXNNb2RlbCkge1xuICAgICAgICB2YXIgY2hhcnRWaWV3ID0gZWNJbnMuX2NoYXJ0c01hcFtzZXJpZXNNb2RlbC5fX3ZpZXdJZF07IC8vIFVwZGF0ZSBaIGFmdGVyIGxhYmVscyB1cGRhdGVkLiBCZWZvcmUgYXBwbHlpbmcgc3RhdGVzLlxuXG4gICAgICAgIHVwZGF0ZVooc2VyaWVzTW9kZWwsIGNoYXJ0Vmlldyk7IC8vIE5PVEU6IFVwZGF0ZSBzdGF0ZXMgYWZ0ZXIgbGFiZWwgaXMgdXBkYXRlZC5cbiAgICAgICAgLy8gbGFiZWwgc2hvdWxkIGJlIGluIG5vcm1hbCBzdGF0dXMgd2hlbiBsYXlvdXRpbmcuXG5cbiAgICAgICAgdXBkYXRlU3RhdGVzKHNlcmllc01vZGVsLCBjaGFydFZpZXcpO1xuICAgICAgfSk7IC8vIElmIHVzZSBob3ZlciBsYXllclxuXG4gICAgICB1cGRhdGVIb3ZlckxheWVyU3RhdHVzKGVjSW5zLCBlY01vZGVsKTtcbiAgICAgIGxpZmVjeWNsZS50cmlnZ2VyKCdzZXJpZXM6YWZ0ZXJ1cGRhdGUnLCBlY01vZGVsLCBhcGksIHVwZGF0ZVBhcmFtcyk7XG4gICAgfTtcblxuICAgIG1hcmtTdGF0dXNUb1VwZGF0ZSA9IGZ1bmN0aW9uIChlY0lucykge1xuICAgICAgZWNJbnNbU1RBVFVTX05FRURTX1VQREFURV9LRVldID0gdHJ1ZTsgLy8gV2FrZSB1cCB6cmVuZGVyIGlmIGl0J3Mgc2xlZXAuIExldCBpdCB1cGRhdGUgc3RhdGVzIGluIHRoZSBuZXh0IGZyYW1lLlxuXG4gICAgICBlY0lucy5nZXRacigpLndha2VVcCgpO1xuICAgIH07XG5cbiAgICBhcHBseUNoYW5nZWRTdGF0ZXMgPSBmdW5jdGlvbiAoZWNJbnMpIHtcbiAgICAgIGlmICghZWNJbnNbU1RBVFVTX05FRURTX1VQREFURV9LRVldKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgZWNJbnMuZ2V0WnIoKS5zdG9yYWdlLnRyYXZlcnNlKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAvLyBOb3QgYXBwbGllZCBvbiByZW1vdmVkIGVsZW1lbnRzLCBpdCBtYXkgc3RpbGwgaW4gZmFkaW5nLlxuICAgICAgICBpZiAoZ3JhcGhpYy5pc0VsZW1lbnRSZW1vdmVkKGVsKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGFwcGx5RWxlbWVudFN0YXRlcyhlbCk7XG4gICAgICB9KTtcbiAgICAgIGVjSW5zW1NUQVRVU19ORUVEU19VUERBVEVfS0VZXSA9IGZhbHNlO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBhcHBseUVsZW1lbnRTdGF0ZXMoZWwpIHtcbiAgICAgIHZhciBuZXdTdGF0ZXMgPSBbXTtcbiAgICAgIHZhciBvbGRTdGF0ZXMgPSBlbC5jdXJyZW50U3RhdGVzOyAvLyBLZWVwIG90aGVyIHN0YXRlcy5cblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvbGRTdGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHN0YXRlTmFtZSA9IG9sZFN0YXRlc1tpXTtcblxuICAgICAgICBpZiAoIShzdGF0ZU5hbWUgPT09ICdlbXBoYXNpcycgfHwgc3RhdGVOYW1lID09PSAnYmx1cicgfHwgc3RhdGVOYW1lID09PSAnc2VsZWN0JykpIHtcbiAgICAgICAgICBuZXdTdGF0ZXMucHVzaChzdGF0ZU5hbWUpO1xuICAgICAgICB9XG4gICAgICB9IC8vIE9ubHkgdXNlIHN0YXRlcyB3aGVuIGl0J3MgZXhpc3RzLlxuXG5cbiAgICAgIGlmIChlbC5zZWxlY3RlZCAmJiBlbC5zdGF0ZXMuc2VsZWN0KSB7XG4gICAgICAgIG5ld1N0YXRlcy5wdXNoKCdzZWxlY3QnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGVsLmhvdmVyU3RhdGUgPT09IEhPVkVSX1NUQVRFX0VNUEhBU0lTICYmIGVsLnN0YXRlcy5lbXBoYXNpcykge1xuICAgICAgICBuZXdTdGF0ZXMucHVzaCgnZW1waGFzaXMnKTtcbiAgICAgIH0gZWxzZSBpZiAoZWwuaG92ZXJTdGF0ZSA9PT0gSE9WRVJfU1RBVEVfQkxVUiAmJiBlbC5zdGF0ZXMuYmx1cikge1xuICAgICAgICBuZXdTdGF0ZXMucHVzaCgnYmx1cicpO1xuICAgICAgfVxuXG4gICAgICBlbC51c2VTdGF0ZXMobmV3U3RhdGVzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVIb3ZlckxheWVyU3RhdHVzKGVjSW5zLCBlY01vZGVsKSB7XG4gICAgICB2YXIgenIgPSBlY0lucy5fenI7XG4gICAgICB2YXIgc3RvcmFnZSA9IHpyLnN0b3JhZ2U7XG4gICAgICB2YXIgZWxDb3VudCA9IDA7XG4gICAgICBzdG9yYWdlLnRyYXZlcnNlKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICBpZiAoIWVsLmlzR3JvdXApIHtcbiAgICAgICAgICBlbENvdW50Kys7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoZWxDb3VudCA+IGVjTW9kZWwuZ2V0KCdob3ZlckxheWVyVGhyZXNob2xkJykgJiYgIWVudi5ub2RlICYmICFlbnYud29ya2VyKSB7XG4gICAgICAgIGVjTW9kZWwuZWFjaFNlcmllcyhmdW5jdGlvbiAoc2VyaWVzTW9kZWwpIHtcbiAgICAgICAgICBpZiAoc2VyaWVzTW9kZWwucHJldmVudFVzaW5nSG92ZXJMYXllcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBjaGFydFZpZXcgPSBlY0lucy5fY2hhcnRzTWFwW3Nlcmllc01vZGVsLl9fdmlld0lkXTtcblxuICAgICAgICAgIGlmIChjaGFydFZpZXcuX19hbGl2ZSkge1xuICAgICAgICAgICAgY2hhcnRWaWV3LmVhY2hSZW5kZXJlZChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgaWYgKGVsLnN0YXRlcy5lbXBoYXNpcykge1xuICAgICAgICAgICAgICAgIGVsLnN0YXRlcy5lbXBoYXNpcy5ob3ZlckxheWVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICA7XG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgY2hhcnQgYW5kIGJsZW5kLlxyXG4gICAgICovXG5cbiAgICBmdW5jdGlvbiB1cGRhdGVCbGVuZChzZXJpZXNNb2RlbCwgY2hhcnRWaWV3KSB7XG4gICAgICB2YXIgYmxlbmRNb2RlID0gc2VyaWVzTW9kZWwuZ2V0KCdibGVuZE1vZGUnKSB8fCBudWxsO1xuICAgICAgY2hhcnRWaWV3LmVhY2hSZW5kZXJlZChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgLy8gRklYTUUgbWFya2VyIGFuZCBvdGhlciBjb21wb25lbnRzXG4gICAgICAgIGlmICghZWwuaXNHcm91cCkge1xuICAgICAgICAgIC8vIERPTidUIG1hcmsgdGhlIGVsZW1lbnQgZGlydHkuIEluIGNhc2UgZWxlbWVudCBpcyBpbmNyZW1lbnRhbCBhbmQgZG9uJ3Qgd2FudCB0byByZXJlbmRlci5cbiAgICAgICAgICBlbC5zdHlsZS5ibGVuZCA9IGJsZW5kTW9kZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgO1xuXG4gICAgZnVuY3Rpb24gdXBkYXRlWihtb2RlbCwgdmlldykge1xuICAgICAgaWYgKG1vZGVsLnByZXZlbnRBdXRvWikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciB6ID0gbW9kZWwuZ2V0KCd6JykgfHwgMDtcbiAgICAgIHZhciB6bGV2ZWwgPSBtb2RlbC5nZXQoJ3psZXZlbCcpIHx8IDA7IC8vIFNldCB6IGFuZCB6bGV2ZWxcblxuICAgICAgdmlldy5lYWNoUmVuZGVyZWQoZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIGRvVXBkYXRlWihlbCwgeiwgemxldmVsLCAtSW5maW5pdHkpOyAvLyBEb24ndCB0cmF2ZXJzZSB0aGUgY2hpbGRyZW4gYmVjYXVzZSBpdCBoYXMgYmVlbiB0cmF2ZXJzZWQgaW4gX3VwZGF0ZVouXG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICA7XG5cbiAgICBmdW5jdGlvbiBkb1VwZGF0ZVooZWwsIHosIHpsZXZlbCwgbWF4WjIpIHtcbiAgICAgIC8vIEdyb3VwIG1heSBhbHNvIGhhdmUgdGV4dENvbnRlbnRcbiAgICAgIHZhciBsYWJlbCA9IGVsLmdldFRleHRDb250ZW50KCk7XG4gICAgICB2YXIgbGFiZWxMaW5lID0gZWwuZ2V0VGV4dEd1aWRlTGluZSgpO1xuICAgICAgdmFyIGlzR3JvdXAgPSBlbC5pc0dyb3VwO1xuXG4gICAgICBpZiAoaXNHcm91cCkge1xuICAgICAgICAvLyBzZXQgeiAmIHpsZXZlbCBvZiBjaGlsZHJlbiBlbGVtZW50cyBvZiBHcm91cFxuICAgICAgICB2YXIgY2hpbGRyZW4gPSBlbC5jaGlsZHJlblJlZigpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBtYXhaMiA9IE1hdGgubWF4KGRvVXBkYXRlWihjaGlsZHJlbltpXSwgeiwgemxldmVsLCBtYXhaMiksIG1heFoyKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbm90IEdyb3VwXG4gICAgICAgIGVsLnogPSB6O1xuICAgICAgICBlbC56bGV2ZWwgPSB6bGV2ZWw7XG4gICAgICAgIG1heFoyID0gTWF0aC5tYXgoZWwuejIsIG1heFoyKTtcbiAgICAgIH0gLy8gYWx3YXlzIHNldCB6IGFuZCB6bGV2ZWwgaWYgbGFiZWwvbGFiZWxMaW5lIGV4aXN0c1xuXG5cbiAgICAgIGlmIChsYWJlbCkge1xuICAgICAgICBsYWJlbC56ID0gejtcbiAgICAgICAgbGFiZWwuemxldmVsID0gemxldmVsOyAvLyBsaWZ0IHoyIG9mIHRleHQgY29udGVudFxuICAgICAgICAvLyBUT0RPIGlmIGVsLmVtcGhhc2lzLnoyIGlzIHNwY2VmaWVkLCB3aGF0IGFib3V0IHRleHRDb250ZW50LlxuXG4gICAgICAgIGlzRmluaXRlKG1heFoyKSAmJiAobGFiZWwuejIgPSBtYXhaMiArIDIpO1xuICAgICAgfVxuXG4gICAgICBpZiAobGFiZWxMaW5lKSB7XG4gICAgICAgIHZhciB0ZXh0R3VpZGVMaW5lQ29uZmlnID0gZWwudGV4dEd1aWRlTGluZUNvbmZpZztcbiAgICAgICAgbGFiZWxMaW5lLnogPSB6O1xuICAgICAgICBsYWJlbExpbmUuemxldmVsID0gemxldmVsO1xuICAgICAgICBpc0Zpbml0ZShtYXhaMikgJiYgKGxhYmVsTGluZS56MiA9IG1heFoyICsgKHRleHRHdWlkZUxpbmVDb25maWcgJiYgdGV4dEd1aWRlTGluZUNvbmZpZy5zaG93QWJvdmUgPyAxIDogLTEpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG1heFoyO1xuICAgIH0gLy8gQ2xlYXIgc3RhdGVzIHdpdGhvdXQgYW5pbWF0aW9uLlxuICAgIC8vIFRPRE8gU3RhdGVzIG9uIGNvbXBvbmVudC5cblxuXG4gICAgZnVuY3Rpb24gY2xlYXJTdGF0ZXMobW9kZWwsIHZpZXcpIHtcbiAgICAgIHZpZXcuZWFjaFJlbmRlcmVkKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAvLyBOb3QgYXBwbGllZCBvbiByZW1vdmVkIGVsZW1lbnRzLCBpdCBtYXkgc3RpbGwgaW4gZmFkaW5nLlxuICAgICAgICBpZiAoZ3JhcGhpYy5pc0VsZW1lbnRSZW1vdmVkKGVsKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0ZXh0Q29udGVudCA9IGVsLmdldFRleHRDb250ZW50KCk7XG4gICAgICAgIHZhciB0ZXh0R3VpZGUgPSBlbC5nZXRUZXh0R3VpZGVMaW5lKCk7XG5cbiAgICAgICAgaWYgKGVsLnN0YXRlVHJhbnNpdGlvbikge1xuICAgICAgICAgIGVsLnN0YXRlVHJhbnNpdGlvbiA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGV4dENvbnRlbnQgJiYgdGV4dENvbnRlbnQuc3RhdGVUcmFuc2l0aW9uKSB7XG4gICAgICAgICAgdGV4dENvbnRlbnQuc3RhdGVUcmFuc2l0aW9uID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0ZXh0R3VpZGUgJiYgdGV4dEd1aWRlLnN0YXRlVHJhbnNpdGlvbikge1xuICAgICAgICAgIHRleHRHdWlkZS5zdGF0ZVRyYW5zaXRpb24gPSBudWxsO1xuICAgICAgICB9IC8vIFRPRE8gSWYgZWwgaXMgaW5jcmVtZW50YWwuXG5cblxuICAgICAgICBpZiAoZWwuaGFzU3RhdGUoKSkge1xuICAgICAgICAgIGVsLnByZXZTdGF0ZXMgPSBlbC5jdXJyZW50U3RhdGVzO1xuICAgICAgICAgIGVsLmNsZWFyU3RhdGVzKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZWwucHJldlN0YXRlcykge1xuICAgICAgICAgIGVsLnByZXZTdGF0ZXMgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVTdGF0ZXMobW9kZWwsIHZpZXcpIHtcbiAgICAgIHZhciBzdGF0ZUFuaW1hdGlvbk1vZGVsID0gbW9kZWwuZ2V0TW9kZWwoJ3N0YXRlQW5pbWF0aW9uJyk7XG4gICAgICB2YXIgZW5hYmxlQW5pbWF0aW9uID0gbW9kZWwuaXNBbmltYXRpb25FbmFibGVkKCk7XG4gICAgICB2YXIgZHVyYXRpb24gPSBzdGF0ZUFuaW1hdGlvbk1vZGVsLmdldCgnZHVyYXRpb24nKTtcbiAgICAgIHZhciBzdGF0ZVRyYW5zaXRpb24gPSBkdXJhdGlvbiA+IDAgPyB7XG4gICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcbiAgICAgICAgZGVsYXk6IHN0YXRlQW5pbWF0aW9uTW9kZWwuZ2V0KCdkZWxheScpLFxuICAgICAgICBlYXNpbmc6IHN0YXRlQW5pbWF0aW9uTW9kZWwuZ2V0KCdlYXNpbmcnKSAvLyBhZGRpdGl2ZTogc3RhdGVBbmltYXRpb25Nb2RlbC5nZXQoJ2FkZGl0aXZlJylcblxuICAgICAgfSA6IG51bGw7XG4gICAgICB2aWV3LmVhY2hSZW5kZXJlZChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgaWYgKGVsLnN0YXRlcyAmJiBlbC5zdGF0ZXMuZW1waGFzaXMpIHtcbiAgICAgICAgICAvLyBOb3QgYXBwbGllZCBvbiByZW1vdmVkIGVsZW1lbnRzLCBpdCBtYXkgc3RpbGwgaW4gZmFkaW5nLlxuICAgICAgICAgIGlmIChncmFwaGljLmlzRWxlbWVudFJlbW92ZWQoZWwpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGVsIGluc3RhbmNlb2YgZ3JhcGhpYy5QYXRoKSB7XG4gICAgICAgICAgICBzYXZlUGF0aFN0YXRlcyhlbCk7XG4gICAgICAgICAgfSAvLyBPbmx5IHVwZGF0ZWQgb24gY2hhbmdlZCBlbGVtZW50LiBJbiBjYXNlIGVsZW1lbnQgaXMgaW5jcmVtZW50YWwgYW5kIGRvbid0IHdhbnQgdG8gcmVyZW5kZXIuXG4gICAgICAgICAgLy8gVE9ETywgYSBtb3JlIHByb3BlciB3YXk/XG5cblxuICAgICAgICAgIGlmIChlbC5fX2RpcnR5KSB7XG4gICAgICAgICAgICB2YXIgcHJldlN0YXRlcyA9IGVsLnByZXZTdGF0ZXM7IC8vIFJlc3RvcmUgc3RhdGVzIHdpdGhvdXQgYW5pbWF0aW9uXG5cbiAgICAgICAgICAgIGlmIChwcmV2U3RhdGVzKSB7XG4gICAgICAgICAgICAgIGVsLnVzZVN0YXRlcyhwcmV2U3RhdGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IC8vIFVwZGF0ZSBzdGF0ZSB0cmFuc2l0aW9uIGFuZCBlbmFibGUgYW5pbWF0aW9uIGFnYWluLlxuXG5cbiAgICAgICAgICBpZiAoZW5hYmxlQW5pbWF0aW9uKSB7XG4gICAgICAgICAgICBlbC5zdGF0ZVRyYW5zaXRpb24gPSBzdGF0ZVRyYW5zaXRpb247XG4gICAgICAgICAgICB2YXIgdGV4dENvbnRlbnQgPSBlbC5nZXRUZXh0Q29udGVudCgpO1xuICAgICAgICAgICAgdmFyIHRleHRHdWlkZSA9IGVsLmdldFRleHRHdWlkZUxpbmUoKTsgLy8gVE9ETyBJcyBpdCBuZWNlc3NhcnkgdG8gYW5pbWF0ZSBsYWJlbD9cblxuICAgICAgICAgICAgaWYgKHRleHRDb250ZW50KSB7XG4gICAgICAgICAgICAgIHRleHRDb250ZW50LnN0YXRlVHJhbnNpdGlvbiA9IHN0YXRlVHJhbnNpdGlvbjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRleHRHdWlkZSkge1xuICAgICAgICAgICAgICB0ZXh0R3VpZGUuc3RhdGVUcmFuc2l0aW9uID0gc3RhdGVUcmFuc2l0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gLy8gVXNlIGhpZ2hsaWdodGVkIGFuZCBzZWxlY3RlZCBmbGFnIHRvIHRvZ2dsZSBzdGF0ZXMuXG5cblxuICAgICAgICAgIGlmIChlbC5fX2RpcnR5KSB7XG4gICAgICAgICAgICBhcHBseUVsZW1lbnRTdGF0ZXMoZWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgO1xuXG4gICAgY3JlYXRlRXh0ZW5zaW9uQVBJID0gZnVuY3Rpb24gKGVjSW5zKSB7XG4gICAgICByZXR1cm4gbmV3IChcbiAgICAgIC8qKiBAY2xhc3MgKi9cbiAgICAgIGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKGNsYXNzXzEsIF9zdXBlcik7XG5cbiAgICAgICAgZnVuY3Rpb24gY2xhc3NfMSgpIHtcbiAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBjbGFzc18xLnByb3RvdHlwZS5nZXRDb29yZGluYXRlU3lzdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gZWNJbnMuX2Nvb3JkU3lzTWdyLmdldENvb3JkaW5hdGVTeXN0ZW1zKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuZ2V0Q29tcG9uZW50QnlFbGVtZW50ID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgd2hpbGUgKGVsKSB7XG4gICAgICAgICAgICB2YXIgbW9kZWxJbmZvID0gZWwuX19lY0NvbXBvbmVudEluZm87XG5cbiAgICAgICAgICAgIGlmIChtb2RlbEluZm8gIT0gbnVsbCkge1xuICAgICAgICAgICAgICByZXR1cm4gZWNJbnMuX21vZGVsLmdldENvbXBvbmVudChtb2RlbEluZm8ubWFpblR5cGUsIG1vZGVsSW5mby5pbmRleCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsID0gZWwucGFyZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjbGFzc18xLnByb3RvdHlwZS5lbnRlckVtcGhhc2lzID0gZnVuY3Rpb24gKGVsLCBoaWdobGlnaHREaWdpdCkge1xuICAgICAgICAgIGVudGVyRW1waGFzaXMoZWwsIGhpZ2hsaWdodERpZ2l0KTtcbiAgICAgICAgICBtYXJrU3RhdHVzVG9VcGRhdGUoZWNJbnMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNsYXNzXzEucHJvdG90eXBlLmxlYXZlRW1waGFzaXMgPSBmdW5jdGlvbiAoZWwsIGhpZ2hsaWdodERpZ2l0KSB7XG4gICAgICAgICAgbGVhdmVFbXBoYXNpcyhlbCwgaGlnaGxpZ2h0RGlnaXQpO1xuICAgICAgICAgIG1hcmtTdGF0dXNUb1VwZGF0ZShlY0lucyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuZW50ZXJCbHVyID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgZW50ZXJCbHVyKGVsKTtcbiAgICAgICAgICBtYXJrU3RhdHVzVG9VcGRhdGUoZWNJbnMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNsYXNzXzEucHJvdG90eXBlLmxlYXZlQmx1ciA9IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgIGxlYXZlQmx1cihlbCk7XG4gICAgICAgICAgbWFya1N0YXR1c1RvVXBkYXRlKGVjSW5zKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjbGFzc18xLnByb3RvdHlwZS5lbnRlclNlbGVjdCA9IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgIGVudGVyU2VsZWN0KGVsKTtcbiAgICAgICAgICBtYXJrU3RhdHVzVG9VcGRhdGUoZWNJbnMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNsYXNzXzEucHJvdG90eXBlLmxlYXZlU2VsZWN0ID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgbGVhdmVTZWxlY3QoZWwpO1xuICAgICAgICAgIG1hcmtTdGF0dXNUb1VwZGF0ZShlY0lucyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuZ2V0TW9kZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGVjSW5zLmdldE1vZGVsKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuZ2V0Vmlld09mQ29tcG9uZW50TW9kZWwgPSBmdW5jdGlvbiAoY29tcG9uZW50TW9kZWwpIHtcbiAgICAgICAgICByZXR1cm4gZWNJbnMuZ2V0Vmlld09mQ29tcG9uZW50TW9kZWwoY29tcG9uZW50TW9kZWwpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNsYXNzXzEucHJvdG90eXBlLmdldFZpZXdPZlNlcmllc01vZGVsID0gZnVuY3Rpb24gKHNlcmllc01vZGVsKSB7XG4gICAgICAgICAgcmV0dXJuIGVjSW5zLmdldFZpZXdPZlNlcmllc01vZGVsKHNlcmllc01vZGVsKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gY2xhc3NfMTtcbiAgICAgIH0oRXh0ZW5zaW9uQVBJKSkoZWNJbnMpO1xuICAgIH07XG5cbiAgICBlbmFibGVDb25uZWN0ID0gZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICBmdW5jdGlvbiB1cGRhdGVDb25uZWN0ZWRDaGFydHNTdGF0dXMoY2hhcnRzLCBzdGF0dXMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgb3RoZXJDaGFydCA9IGNoYXJ0c1tpXTtcbiAgICAgICAgICBvdGhlckNoYXJ0W0NPTk5FQ1RfU1RBVFVTX0tFWV0gPSBzdGF0dXM7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZWFjaChldmVudEFjdGlvbk1hcCwgZnVuY3Rpb24gKGFjdGlvblR5cGUsIGV2ZW50VHlwZSkge1xuICAgICAgICBjaGFydC5fbWVzc2FnZUNlbnRlci5vbihldmVudFR5cGUsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIGlmIChjb25uZWN0ZWRHcm91cHNbY2hhcnQuZ3JvdXBdICYmIGNoYXJ0W0NPTk5FQ1RfU1RBVFVTX0tFWV0gIT09IENPTk5FQ1RfU1RBVFVTX1BFTkRJTkcpIHtcbiAgICAgICAgICAgIGlmIChldmVudCAmJiBldmVudC5lc2NhcGVDb25uZWN0KSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGFjdGlvbl8xID0gY2hhcnQubWFrZUFjdGlvbkZyb21FdmVudChldmVudCk7XG4gICAgICAgICAgICB2YXIgb3RoZXJDaGFydHNfMSA9IFtdO1xuICAgICAgICAgICAgZWFjaChpbnN0YW5jZXMsIGZ1bmN0aW9uIChvdGhlckNoYXJ0KSB7XG4gICAgICAgICAgICAgIGlmIChvdGhlckNoYXJ0ICE9PSBjaGFydCAmJiBvdGhlckNoYXJ0Lmdyb3VwID09PSBjaGFydC5ncm91cCkge1xuICAgICAgICAgICAgICAgIG90aGVyQ2hhcnRzXzEucHVzaChvdGhlckNoYXJ0KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB1cGRhdGVDb25uZWN0ZWRDaGFydHNTdGF0dXMob3RoZXJDaGFydHNfMSwgQ09OTkVDVF9TVEFUVVNfUEVORElORyk7XG4gICAgICAgICAgICBlYWNoKG90aGVyQ2hhcnRzXzEsIGZ1bmN0aW9uIChvdGhlckNoYXJ0KSB7XG4gICAgICAgICAgICAgIGlmIChvdGhlckNoYXJ0W0NPTk5FQ1RfU1RBVFVTX0tFWV0gIT09IENPTk5FQ1RfU1RBVFVTX1VQREFUSU5HKSB7XG4gICAgICAgICAgICAgICAgb3RoZXJDaGFydC5kaXNwYXRjaEFjdGlvbihhY3Rpb25fMSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdXBkYXRlQ29ubmVjdGVkQ2hhcnRzU3RhdHVzKG90aGVyQ2hhcnRzXzEsIENPTk5FQ1RfU1RBVFVTX1VQREFURUQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KCk7XG5cbiAgcmV0dXJuIEVDaGFydHM7XG59KEV2ZW50ZnVsKTtcblxudmFyIGVjaGFydHNQcm90byA9IEVDaGFydHMucHJvdG90eXBlO1xuZWNoYXJ0c1Byb3RvLm9uID0gY3JlYXRlUmVnaXN0ZXJFdmVudFdpdGhMb3dlcmNhc2VFQ2hhcnRzKCdvbicpO1xuZWNoYXJ0c1Byb3RvLm9mZiA9IGNyZWF0ZVJlZ2lzdGVyRXZlbnRXaXRoTG93ZXJjYXNlRUNoYXJ0cygnb2ZmJyk7XG4vKipcclxuICogQGRlcHJlY2F0ZWRcclxuICovXG4vLyBAdHMtaWdub3JlXG5cbmVjaGFydHNQcm90by5vbmUgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYiwgY3R4KSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgZGVwcmVjYXRlTG9nKCdFQ2hhcnRzI29uZSBpcyBkZXByZWNhdGVkLicpO1xuXG4gIGZ1bmN0aW9uIHdyYXBwZWQoKSB7XG4gICAgdmFyIGFyZ3MyID0gW107XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgYXJnczJbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG5cbiAgICBjYiAmJiBjYi5hcHBseSAmJiBjYi5hcHBseSh0aGlzLCBhcmdzMik7IC8vIEB0cy1pZ25vcmVcblxuICAgIHNlbGYub2ZmKGV2ZW50TmFtZSwgd3JhcHBlZCk7XG4gIH1cblxuICA7IC8vIEB0cy1pZ25vcmVcblxuICB0aGlzLm9uLmNhbGwodGhpcywgZXZlbnROYW1lLCB3cmFwcGVkLCBjdHgpO1xufTtcblxudmFyIE1PVVNFX0VWRU5UX05BTUVTID0gWydjbGljaycsICdkYmxjbGljaycsICdtb3VzZW92ZXInLCAnbW91c2VvdXQnLCAnbW91c2Vtb3ZlJywgJ21vdXNlZG93bicsICdtb3VzZXVwJywgJ2dsb2JhbG91dCcsICdjb250ZXh0bWVudSddO1xuXG5mdW5jdGlvbiBkaXNwb3NlZFdhcm5pbmcoaWQpIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB3YXJuKCdJbnN0YW5jZSAnICsgaWQgKyAnIGhhcyBiZWVuIGRpc3Bvc2VkJyk7XG4gIH1cbn1cblxudmFyIGFjdGlvbnMgPSB7fTtcbi8qKlxyXG4gKiBNYXAgZXZlbnRUeXBlIHRvIGFjdGlvblR5cGVcclxuICovXG5cbnZhciBldmVudEFjdGlvbk1hcCA9IHt9O1xudmFyIGRhdGFQcm9jZXNzb3JGdW5jcyA9IFtdO1xudmFyIG9wdGlvblByZXByb2Nlc3NvckZ1bmNzID0gW107XG52YXIgdmlzdWFsRnVuY3MgPSBbXTtcbnZhciB0aGVtZVN0b3JhZ2UgPSB7fTtcbnZhciBsb2FkaW5nRWZmZWN0cyA9IHt9O1xudmFyIGluc3RhbmNlcyA9IHt9O1xudmFyIGNvbm5lY3RlZEdyb3VwcyA9IHt9O1xudmFyIGlkQmFzZSA9ICtuZXcgRGF0ZSgpIC0gMDtcbnZhciBncm91cElkQmFzZSA9ICtuZXcgRGF0ZSgpIC0gMDtcbnZhciBET01fQVRUUklCVVRFX0tFWSA9ICdfZWNoYXJ0c19pbnN0YW5jZV8nO1xuLyoqXHJcbiAqIEBwYXJhbSBvcHRzLmRldmljZVBpeGVsUmF0aW8gVXNlIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIGJ5IGRlZmF1bHRcclxuICogQHBhcmFtIG9wdHMucmVuZGVyZXIgQ2FuIGNob29zZSAnY2FudmFzJyBvciAnc3ZnJyB0byByZW5kZXIgdGhlIGNoYXJ0LlxyXG4gKiBAcGFyYW0gb3B0cy53aWR0aCBVc2UgY2xpZW50V2lkdGggb2YgdGhlIGlucHV0IGBkb21gIGJ5IGRlZmF1bHQuXHJcbiAqICAgICAgICBDYW4gYmUgJ2F1dG8nICh0aGUgc2FtZSBhcyBudWxsL3VuZGVmaW5lZClcclxuICogQHBhcmFtIG9wdHMuaGVpZ2h0IFVzZSBjbGllbnRIZWlnaHQgb2YgdGhlIGlucHV0IGBkb21gIGJ5IGRlZmF1bHQuXHJcbiAqICAgICAgICBDYW4gYmUgJ2F1dG8nICh0aGUgc2FtZSBhcyBudWxsL3VuZGVmaW5lZClcclxuICogQHBhcmFtIG9wdHMubG9jYWxlIFNwZWNpZnkgdGhlIGxvY2FsZS5cclxuICogQHBhcmFtIG9wdHMudXNlRGlydHlSZWN0IEVuYWJsZSBkaXJ0eSByZWN0YW5nbGUgcmVuZGVyaW5nIG9yIG5vdC5cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0KGRvbSwgdGhlbWUsIG9wdHMpIHtcbiAgdmFyIGlzQ2xpZW50ID0gIShvcHRzICYmIG9wdHMuc3NyKTtcblxuICBpZiAoaXNDbGllbnQpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgaWYgKCFkb20pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbml0aWFsaXplIGZhaWxlZDogaW52YWxpZCBkb20uJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGV4aXN0SW5zdGFuY2UgPSBnZXRJbnN0YW5jZUJ5RG9tKGRvbSk7XG5cbiAgICBpZiAoZXhpc3RJbnN0YW5jZSkge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgd2FybignVGhlcmUgaXMgYSBjaGFydCBpbnN0YW5jZSBhbHJlYWR5IGluaXRpYWxpemVkIG9uIHRoZSBkb20uJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBleGlzdEluc3RhbmNlO1xuICAgIH1cblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAoaXNEb20oZG9tKSAmJiBkb20ubm9kZU5hbWUudG9VcHBlckNhc2UoKSAhPT0gJ0NBTlZBUycgJiYgKCFkb20uY2xpZW50V2lkdGggJiYgKCFvcHRzIHx8IG9wdHMud2lkdGggPT0gbnVsbCkgfHwgIWRvbS5jbGllbnRIZWlnaHQgJiYgKCFvcHRzIHx8IG9wdHMuaGVpZ2h0ID09IG51bGwpKSkge1xuICAgICAgICB3YXJuKCdDYW5cXCd0IGdldCBET00gd2lkdGggb3IgaGVpZ2h0LiBQbGVhc2UgY2hlY2sgJyArICdkb20uY2xpZW50V2lkdGggYW5kIGRvbS5jbGllbnRIZWlnaHQuIFRoZXkgc2hvdWxkIG5vdCBiZSAwLicgKyAnRm9yIGV4YW1wbGUsIHlvdSBtYXkgbmVlZCB0byBjYWxsIHRoaXMgaW4gdGhlIGNhbGxiYWNrICcgKyAnb2Ygd2luZG93Lm9ubG9hZC4nKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB2YXIgY2hhcnQgPSBuZXcgRUNoYXJ0cyhkb20sIHRoZW1lLCBvcHRzKTtcbiAgY2hhcnQuaWQgPSAnZWNfJyArIGlkQmFzZSsrO1xuICBpbnN0YW5jZXNbY2hhcnQuaWRdID0gY2hhcnQ7XG4gIGlzQ2xpZW50ICYmIG1vZGVsVXRpbC5zZXRBdHRyaWJ1dGUoZG9tLCBET01fQVRUUklCVVRFX0tFWSwgY2hhcnQuaWQpO1xuICBlbmFibGVDb25uZWN0KGNoYXJ0KTtcbiAgbGlmZWN5Y2xlLnRyaWdnZXIoJ2FmdGVyaW5pdCcsIGNoYXJ0KTtcbiAgcmV0dXJuIGNoYXJ0O1xufVxuLyoqXHJcbiAqIEB1c2FnZVxyXG4gKiAoQSlcclxuICogYGBganNcclxuICogbGV0IGNoYXJ0MSA9IGVjaGFydHMuaW5pdChkb20xKTtcclxuICogbGV0IGNoYXJ0MiA9IGVjaGFydHMuaW5pdChkb20yKTtcclxuICogY2hhcnQxLmdyb3VwID0gJ3h4eCc7XHJcbiAqIGNoYXJ0Mi5ncm91cCA9ICd4eHgnO1xyXG4gKiBlY2hhcnRzLmNvbm5lY3QoJ3h4eCcpO1xyXG4gKiBgYGBcclxuICogKEIpXHJcbiAqIGBgYGpzXHJcbiAqIGxldCBjaGFydDEgPSBlY2hhcnRzLmluaXQoZG9tMSk7XHJcbiAqIGxldCBjaGFydDIgPSBlY2hhcnRzLmluaXQoZG9tMik7XHJcbiAqIGVjaGFydHMuY29ubmVjdCgneHh4JywgW2NoYXJ0MSwgY2hhcnQyXSk7XHJcbiAqIGBgYFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbm5lY3QoZ3JvdXBJZCkge1xuICAvLyBJcyBhcnJheSBvZiBjaGFydHNcbiAgaWYgKGlzQXJyYXkoZ3JvdXBJZCkpIHtcbiAgICB2YXIgY2hhcnRzID0gZ3JvdXBJZDtcbiAgICBncm91cElkID0gbnVsbDsgLy8gSWYgYW55IGNoYXJ0IGhhcyBncm91cFxuXG4gICAgZWFjaChjaGFydHMsIGZ1bmN0aW9uIChjaGFydCkge1xuICAgICAgaWYgKGNoYXJ0Lmdyb3VwICE9IG51bGwpIHtcbiAgICAgICAgZ3JvdXBJZCA9IGNoYXJ0Lmdyb3VwO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGdyb3VwSWQgPSBncm91cElkIHx8ICdnXycgKyBncm91cElkQmFzZSsrO1xuICAgIGVhY2goY2hhcnRzLCBmdW5jdGlvbiAoY2hhcnQpIHtcbiAgICAgIGNoYXJ0Lmdyb3VwID0gZ3JvdXBJZDtcbiAgICB9KTtcbiAgfVxuXG4gIGNvbm5lY3RlZEdyb3Vwc1tncm91cElkXSA9IHRydWU7XG4gIHJldHVybiBncm91cElkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRpc2Nvbm5lY3QoZ3JvdXBJZCkge1xuICBjb25uZWN0ZWRHcm91cHNbZ3JvdXBJZF0gPSBmYWxzZTtcbn1cbi8qKlxyXG4gKiBBbGlhcyBhbmQgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxyXG4gKiBAZGVwcmVjYXRlZFxyXG4gKi9cblxuZXhwb3J0IHZhciBkaXNDb25uZWN0ID0gZGlzY29ubmVjdDtcbi8qKlxyXG4gKiBEaXNwb3NlIGEgY2hhcnQgaW5zdGFuY2VcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwb3NlKGNoYXJ0KSB7XG4gIGlmIChpc1N0cmluZyhjaGFydCkpIHtcbiAgICBjaGFydCA9IGluc3RhbmNlc1tjaGFydF07XG4gIH0gZWxzZSBpZiAoIShjaGFydCBpbnN0YW5jZW9mIEVDaGFydHMpKSB7XG4gICAgLy8gVHJ5IHRvIHRyZWF0IGFzIGRvbVxuICAgIGNoYXJ0ID0gZ2V0SW5zdGFuY2VCeURvbShjaGFydCk7XG4gIH1cblxuICBpZiAoY2hhcnQgaW5zdGFuY2VvZiBFQ2hhcnRzICYmICFjaGFydC5pc0Rpc3Bvc2VkKCkpIHtcbiAgICBjaGFydC5kaXNwb3NlKCk7XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnN0YW5jZUJ5RG9tKGRvbSkge1xuICByZXR1cm4gaW5zdGFuY2VzW21vZGVsVXRpbC5nZXRBdHRyaWJ1dGUoZG9tLCBET01fQVRUUklCVVRFX0tFWSldO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEluc3RhbmNlQnlJZChrZXkpIHtcbiAgcmV0dXJuIGluc3RhbmNlc1trZXldO1xufVxuLyoqXHJcbiAqIFJlZ2lzdGVyIHRoZW1lXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJUaGVtZShuYW1lLCB0aGVtZSkge1xuICB0aGVtZVN0b3JhZ2VbbmFtZV0gPSB0aGVtZTtcbn1cbi8qKlxyXG4gKiBSZWdpc3RlciBvcHRpb24gcHJlcHJvY2Vzc29yXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJQcmVwcm9jZXNzb3IocHJlcHJvY2Vzc29yRnVuYykge1xuICBpZiAoaW5kZXhPZihvcHRpb25QcmVwcm9jZXNzb3JGdW5jcywgcHJlcHJvY2Vzc29yRnVuYykgPCAwKSB7XG4gICAgb3B0aW9uUHJlcHJvY2Vzc29yRnVuY3MucHVzaChwcmVwcm9jZXNzb3JGdW5jKTtcbiAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyUHJvY2Vzc29yKHByaW9yaXR5LCBwcm9jZXNzb3IpIHtcbiAgbm9ybWFsaXplUmVnaXN0ZXIoZGF0YVByb2Nlc3NvckZ1bmNzLCBwcmlvcml0eSwgcHJvY2Vzc29yLCBQUklPUklUWV9QUk9DRVNTT1JfREVGQVVMVCk7XG59XG4vKipcclxuICogUmVnaXN0ZXIgcG9zdEluaXRlclxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwb3N0SW5pdEZ1bmNcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclBvc3RJbml0KHBvc3RJbml0RnVuYykge1xuICByZWdpc3RlclVwZGF0ZUxpZmVjeWNsZSgnYWZ0ZXJpbml0JywgcG9zdEluaXRGdW5jKTtcbn1cbi8qKlxyXG4gKiBSZWdpc3RlciBwb3N0VXBkYXRlclxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwb3N0VXBkYXRlRnVuY1xyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyUG9zdFVwZGF0ZShwb3N0VXBkYXRlRnVuYykge1xuICByZWdpc3RlclVwZGF0ZUxpZmVjeWNsZSgnYWZ0ZXJ1cGRhdGUnLCBwb3N0VXBkYXRlRnVuYyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJVcGRhdGVMaWZlY3ljbGUobmFtZSwgY2IpIHtcbiAgbGlmZWN5Y2xlLm9uKG5hbWUsIGNiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckFjdGlvbihhY3Rpb25JbmZvLCBldmVudE5hbWUsIGFjdGlvbikge1xuICBpZiAoaXNGdW5jdGlvbihldmVudE5hbWUpKSB7XG4gICAgYWN0aW9uID0gZXZlbnROYW1lO1xuICAgIGV2ZW50TmFtZSA9ICcnO1xuICB9XG5cbiAgdmFyIGFjdGlvblR5cGUgPSBpc09iamVjdChhY3Rpb25JbmZvKSA/IGFjdGlvbkluZm8udHlwZSA6IFthY3Rpb25JbmZvLCBhY3Rpb25JbmZvID0ge1xuICAgIGV2ZW50OiBldmVudE5hbWVcbiAgfV1bMF07IC8vIEV2ZW50IG5hbWUgaXMgYWxsIGxvd2VyY2FzZVxuXG4gIGFjdGlvbkluZm8uZXZlbnQgPSAoYWN0aW9uSW5mby5ldmVudCB8fCBhY3Rpb25UeXBlKS50b0xvd2VyQ2FzZSgpO1xuICBldmVudE5hbWUgPSBhY3Rpb25JbmZvLmV2ZW50O1xuXG4gIGlmIChldmVudEFjdGlvbk1hcFtldmVudE5hbWVdKSB7XG4gICAgLy8gQWxyZWFkeSByZWdpc3RlcmVkLlxuICAgIHJldHVybjtcbiAgfSAvLyBWYWxpZGF0ZSBhY3Rpb24gdHlwZSBhbmQgZXZlbnQgbmFtZS5cblxuXG4gIGFzc2VydChBQ1RJT05fUkVHLnRlc3QoYWN0aW9uVHlwZSkgJiYgQUNUSU9OX1JFRy50ZXN0KGV2ZW50TmFtZSkpO1xuXG4gIGlmICghYWN0aW9uc1thY3Rpb25UeXBlXSkge1xuICAgIGFjdGlvbnNbYWN0aW9uVHlwZV0gPSB7XG4gICAgICBhY3Rpb246IGFjdGlvbixcbiAgICAgIGFjdGlvbkluZm86IGFjdGlvbkluZm9cbiAgICB9O1xuICB9XG5cbiAgZXZlbnRBY3Rpb25NYXBbZXZlbnROYW1lXSA9IGFjdGlvblR5cGU7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJDb29yZGluYXRlU3lzdGVtKHR5cGUsIGNvb3JkU3lzQ3JlYXRvcikge1xuICBDb29yZGluYXRlU3lzdGVtTWFuYWdlci5yZWdpc3Rlcih0eXBlLCBjb29yZFN5c0NyZWF0b3IpO1xufVxuLyoqXHJcbiAqIEdldCBkaW1lbnNpb25zIG9mIHNwZWNpZmllZCBjb29yZGluYXRlIHN5c3RlbS5cclxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcclxuICogQHJldHVybiB7QXJyYXkuPHN0cmluZ3xPYmplY3Q+fVxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvb3JkaW5hdGVTeXN0ZW1EaW1lbnNpb25zKHR5cGUpIHtcbiAgdmFyIGNvb3JkU3lzQ3JlYXRvciA9IENvb3JkaW5hdGVTeXN0ZW1NYW5hZ2VyLmdldCh0eXBlKTtcblxuICBpZiAoY29vcmRTeXNDcmVhdG9yKSB7XG4gICAgcmV0dXJuIGNvb3JkU3lzQ3JlYXRvci5nZXREaW1lbnNpb25zSW5mbyA/IGNvb3JkU3lzQ3JlYXRvci5nZXREaW1lbnNpb25zSW5mbygpIDogY29vcmRTeXNDcmVhdG9yLmRpbWVuc2lvbnMuc2xpY2UoKTtcbiAgfVxufVxuZXhwb3J0IHsgcmVnaXN0ZXJMb2NhbGUgfSBmcm9tICcuL2xvY2FsZS5qcyc7XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyTGF5b3V0KHByaW9yaXR5LCBsYXlvdXRUYXNrKSB7XG4gIG5vcm1hbGl6ZVJlZ2lzdGVyKHZpc3VhbEZ1bmNzLCBwcmlvcml0eSwgbGF5b3V0VGFzaywgUFJJT1JJVFlfVklTVUFMX0xBWU9VVCwgJ2xheW91dCcpO1xufVxuXG5mdW5jdGlvbiByZWdpc3RlclZpc3VhbChwcmlvcml0eSwgdmlzdWFsVGFzaykge1xuICBub3JtYWxpemVSZWdpc3Rlcih2aXN1YWxGdW5jcywgcHJpb3JpdHksIHZpc3VhbFRhc2ssIFBSSU9SSVRZX1ZJU1VBTF9DSEFSVCwgJ3Zpc3VhbCcpO1xufVxuXG5leHBvcnQgeyByZWdpc3RlckxheW91dCwgcmVnaXN0ZXJWaXN1YWwgfTtcbnZhciByZWdpc3RlcmVkVGFza3MgPSBbXTtcblxuZnVuY3Rpb24gbm9ybWFsaXplUmVnaXN0ZXIodGFyZ2V0TGlzdCwgcHJpb3JpdHksIGZuLCBkZWZhdWx0UHJpb3JpdHksIHZpc3VhbFR5cGUpIHtcbiAgaWYgKGlzRnVuY3Rpb24ocHJpb3JpdHkpIHx8IGlzT2JqZWN0KHByaW9yaXR5KSkge1xuICAgIGZuID0gcHJpb3JpdHk7XG4gICAgcHJpb3JpdHkgPSBkZWZhdWx0UHJpb3JpdHk7XG4gIH1cblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChpc05hTihwcmlvcml0eSkgfHwgcHJpb3JpdHkgPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbGxlZ2FsIHByaW9yaXR5Jyk7XG4gICAgfSAvLyBDaGVjayBkdXBsaWNhdGVcblxuXG4gICAgZWFjaCh0YXJnZXRMaXN0LCBmdW5jdGlvbiAod3JhcCkge1xuICAgICAgYXNzZXJ0KHdyYXAuX19yYXcgIT09IGZuKTtcbiAgICB9KTtcbiAgfSAvLyBBbHJlYWR5IHJlZ2lzdGVyZWRcblxuXG4gIGlmIChpbmRleE9mKHJlZ2lzdGVyZWRUYXNrcywgZm4pID49IDApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICByZWdpc3RlcmVkVGFza3MucHVzaChmbik7XG4gIHZhciBzdGFnZUhhbmRsZXIgPSBTY2hlZHVsZXIud3JhcFN0YWdlSGFuZGxlcihmbiwgdmlzdWFsVHlwZSk7XG4gIHN0YWdlSGFuZGxlci5fX3ByaW8gPSBwcmlvcml0eTtcbiAgc3RhZ2VIYW5kbGVyLl9fcmF3ID0gZm47XG4gIHRhcmdldExpc3QucHVzaChzdGFnZUhhbmRsZXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJMb2FkaW5nKG5hbWUsIGxvYWRpbmdGeCkge1xuICBsb2FkaW5nRWZmZWN0c1tuYW1lXSA9IGxvYWRpbmdGeDtcbn1cbi8qKlxyXG4gKiBaUmVuZGVyIG5lZWQgYSBjYW52YXMgY29udGV4dCB0byBkbyBtZWFzdXJlVGV4dC5cclxuICogQnV0IGluIG5vZGUgZW52aXJvbm1lbnQgY2FudmFzIG1heSBiZSBjcmVhdGVkIGJ5IG5vZGUtY2FudmFzLlxyXG4gKiBTbyB3ZSBuZWVkIHRvIHNwZWNpZnkgaG93IHRvIGNyZWF0ZSBhIGNhbnZhcyBpbnN0ZWFkIG9mIHVzaW5nIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpXHJcbiAqXHJcbiAqXHJcbiAqIEBkZXByZWNhdGVkIHVzZSBzZXRQbGF0Zm9ybUFQSSh7IGNyZWF0ZUNhbnZhcyB9KSBpbnN0ZWFkLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiAgICAgbGV0IENhbnZhcyA9IHJlcXVpcmUoJ2NhbnZhcycpO1xyXG4gKiAgICAgbGV0IGVjaGFydHMgPSByZXF1aXJlKCdlY2hhcnRzJyk7XHJcbiAqICAgICBlY2hhcnRzLnNldENhbnZhc0NyZWF0b3IoZnVuY3Rpb24gKCkge1xyXG4gKiAgICAgICAgIC8vIFNtYWxsIHNpemUgaXMgZW5vdWdoLlxyXG4gKiAgICAgICAgIHJldHVybiBuZXcgQ2FudmFzKDMyLCAzMik7XHJcbiAqICAgICB9KTtcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRDYW52YXNDcmVhdG9yKGNyZWF0b3IpIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBkZXByZWNhdGVMb2coJ3NldENhbnZhc0NyZWF0b3IgaXMgZGVwcmVjYXRlZC4gVXNlIHNldFBsYXRmb3JtQVBJKHsgY3JlYXRlQ2FudmFzIH0pIGluc3RlYWQuJyk7XG4gIH1cblxuICBzZXRQbGF0Zm9ybUFQSSh7XG4gICAgY3JlYXRlQ2FudmFzOiBjcmVhdG9yXG4gIH0pO1xufVxuLyoqXHJcbiAqIFRoZSBwYXJhbWV0ZXJzIGFuZCB1c2FnZTogc2VlIGBnZW9Tb3VyY2VNYW5hZ2VyLnJlZ2lzdGVyTWFwYC5cclxuICogQ29tcGF0aWJsZSB3aXRoIHByZXZpb3VzIGBlY2hhcnRzLnJlZ2lzdGVyTWFwYC5cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3Rlck1hcChtYXBOYW1lLCBnZW9Kc29uLCBzcGVjaWFsQXJlYXMpIHtcbiAgdmFyIHJlZ2lzdGVyTWFwID0gZ2V0SW1wbCgncmVnaXN0ZXJNYXAnKTtcbiAgcmVnaXN0ZXJNYXAgJiYgcmVnaXN0ZXJNYXAobWFwTmFtZSwgZ2VvSnNvbiwgc3BlY2lhbEFyZWFzKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRNYXAobWFwTmFtZSkge1xuICB2YXIgZ2V0TWFwID0gZ2V0SW1wbCgnZ2V0TWFwJyk7XG4gIHJldHVybiBnZXRNYXAgJiYgZ2V0TWFwKG1hcE5hbWUpO1xufVxuZXhwb3J0IHZhciByZWdpc3RlclRyYW5zZm9ybSA9IHJlZ2lzdGVyRXh0ZXJuYWxUcmFuc2Zvcm07XG4vKipcclxuICogR2xvYmEgZGlzcGF0Y2hBY3Rpb24gdG8gYSBzcGVjaWZpZWQgY2hhcnQgaW5zdGFuY2UuXHJcbiAqL1xuLy8gZXhwb3J0IGZ1bmN0aW9uIGRpc3BhdGNoQWN0aW9uKHBheWxvYWQ6IHsgY2hhcnRJZDogc3RyaW5nIH0gJiBQYXlsb2FkLCBvcHQ/OiBQYXJhbWV0ZXJzPEVDaGFydHNbJ2Rpc3BhdGNoQWN0aW9uJ10+WzFdKSB7XG4vLyAgICAgaWYgKCFwYXlsb2FkIHx8ICFwYXlsb2FkLmNoYXJ0SWQpIHtcbi8vICAgICAgICAgLy8gTXVzdCBoYXZlIGNoYXJ0SWQgdG8gZmluZCBjaGFydFxuLy8gICAgICAgICByZXR1cm47XG4vLyAgICAgfVxuLy8gICAgIGNvbnN0IGNoYXJ0ID0gaW5zdGFuY2VzW3BheWxvYWQuY2hhcnRJZF07XG4vLyAgICAgaWYgKGNoYXJ0KSB7XG4vLyAgICAgICAgIGNoYXJ0LmRpc3BhdGNoQWN0aW9uKHBheWxvYWQsIG9wdCk7XG4vLyAgICAgfVxuLy8gfVxuLy8gQnVpbHRpbiBnbG9iYWwgdmlzdWFsXG5cbnJlZ2lzdGVyVmlzdWFsKFBSSU9SSVRZX1ZJU1VBTF9HTE9CQUwsIHNlcmllc1N0eWxlVGFzayk7XG5yZWdpc3RlclZpc3VhbChQUklPUklUWV9WSVNVQUxfQ0hBUlRfREFUQV9DVVNUT00sIGRhdGFTdHlsZVRhc2spO1xucmVnaXN0ZXJWaXN1YWwoUFJJT1JJVFlfVklTVUFMX0NIQVJUX0RBVEFfQ1VTVE9NLCBkYXRhQ29sb3JQYWxldHRlVGFzayk7XG5yZWdpc3RlclZpc3VhbChQUklPUklUWV9WSVNVQUxfR0xPQkFMLCBzZXJpZXNTeW1ib2xUYXNrKTtcbnJlZ2lzdGVyVmlzdWFsKFBSSU9SSVRZX1ZJU1VBTF9DSEFSVF9EQVRBX0NVU1RPTSwgZGF0YVN5bWJvbFRhc2spO1xucmVnaXN0ZXJWaXN1YWwoUFJJT1JJVFlfVklTVUFMX0RFQ0FMLCBkZWNhbCk7XG5yZWdpc3RlclByZXByb2Nlc3NvcihiYWNrd2FyZENvbXBhdCk7XG5yZWdpc3RlclByb2Nlc3NvcihQUklPUklUWV9QUk9DRVNTT1JfREFUQVNUQUNLLCBkYXRhU3RhY2spO1xucmVnaXN0ZXJMb2FkaW5nKCdkZWZhdWx0JywgbG9hZGluZ0RlZmF1bHQpOyAvLyBEZWZhdWx0IGFjdGlvbnNcblxucmVnaXN0ZXJBY3Rpb24oe1xuICB0eXBlOiBISUdITElHSFRfQUNUSU9OX1RZUEUsXG4gIGV2ZW50OiBISUdITElHSFRfQUNUSU9OX1RZUEUsXG4gIHVwZGF0ZTogSElHSExJR0hUX0FDVElPTl9UWVBFXG59LCBub29wKTtcbnJlZ2lzdGVyQWN0aW9uKHtcbiAgdHlwZTogRE9XTlBMQVlfQUNUSU9OX1RZUEUsXG4gIGV2ZW50OiBET1dOUExBWV9BQ1RJT05fVFlQRSxcbiAgdXBkYXRlOiBET1dOUExBWV9BQ1RJT05fVFlQRVxufSwgbm9vcCk7XG5yZWdpc3RlckFjdGlvbih7XG4gIHR5cGU6IFNFTEVDVF9BQ1RJT05fVFlQRSxcbiAgZXZlbnQ6IFNFTEVDVF9BQ1RJT05fVFlQRSxcbiAgdXBkYXRlOiBTRUxFQ1RfQUNUSU9OX1RZUEVcbn0sIG5vb3ApO1xucmVnaXN0ZXJBY3Rpb24oe1xuICB0eXBlOiBVTlNFTEVDVF9BQ1RJT05fVFlQRSxcbiAgZXZlbnQ6IFVOU0VMRUNUX0FDVElPTl9UWVBFLFxuICB1cGRhdGU6IFVOU0VMRUNUX0FDVElPTl9UWVBFXG59LCBub29wKTtcbnJlZ2lzdGVyQWN0aW9uKHtcbiAgdHlwZTogVE9HR0xFX1NFTEVDVF9BQ1RJT05fVFlQRSxcbiAgZXZlbnQ6IFRPR0dMRV9TRUxFQ1RfQUNUSU9OX1RZUEUsXG4gIHVwZGF0ZTogVE9HR0xFX1NFTEVDVF9BQ1RJT05fVFlQRVxufSwgbm9vcCk7IC8vIERlZmF1bHQgdGhlbWVcblxucmVnaXN0ZXJUaGVtZSgnbGlnaHQnLCBsaWdodFRoZW1lKTtcbnJlZ2lzdGVyVGhlbWUoJ2RhcmsnLCBkYXJrVGhlbWUpOyAvLyBGb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgd2hlcmUgdGhlIG5hbWVzcGFjZSBgZGF0YVRvb2xgIHdpbGxcbi8vIGJlIG1vdW50ZWQgb24gYGVjaGFydHNgIGlzIHRoZSBleHRlbnNpb24gYGRhdGFUb29sYCBpcyBpbXBvcnRlZC5cblxuZXhwb3J0IHZhciBkYXRhVG9vbCA9IHt9OyIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuZnVuY3Rpb24gZGF0YUluZGV4TWFwVmFsdWVMZW5ndGgodmFsTnVtT3JBcnJMZW5ndGhNb3JlVGhhbjIpIHtcbiAgcmV0dXJuIHZhbE51bU9yQXJyTGVuZ3RoTW9yZVRoYW4yID09IG51bGwgPyAwIDogdmFsTnVtT3JBcnJMZW5ndGhNb3JlVGhhbjIubGVuZ3RoIHx8IDE7XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRLZXlHZXR0ZXIoaXRlbSkge1xuICByZXR1cm4gaXRlbTtcbn1cblxudmFyIERhdGFEaWZmZXIgPVxuLyoqIEBjbGFzcyAqL1xuZnVuY3Rpb24gKCkge1xuICAvKipcclxuICAgKiBAcGFyYW0gY29udGV4dCBDYW4gYmUgdmlzaXRlZCBieSB0aGlzLmNvbnRleHQgaW4gY2FsbGJhY2suXHJcbiAgICovXG4gIGZ1bmN0aW9uIERhdGFEaWZmZXIob2xkQXJyLCBuZXdBcnIsIG9sZEtleUdldHRlciwgbmV3S2V5R2V0dGVyLCBjb250ZXh0LCAvLyBCeSBkZWZhdWx0OiAnb25lVG9PbmUnLlxuICBkaWZmTW9kZSkge1xuICAgIHRoaXMuX29sZCA9IG9sZEFycjtcbiAgICB0aGlzLl9uZXcgPSBuZXdBcnI7XG4gICAgdGhpcy5fb2xkS2V5R2V0dGVyID0gb2xkS2V5R2V0dGVyIHx8IGRlZmF1bHRLZXlHZXR0ZXI7XG4gICAgdGhpcy5fbmV3S2V5R2V0dGVyID0gbmV3S2V5R2V0dGVyIHx8IGRlZmF1bHRLZXlHZXR0ZXI7IC8vIFZpc2libGUgaW4gY2FsbGJhY2sgdmlhIGB0aGlzLmNvbnRleHRgO1xuXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICB0aGlzLl9kaWZmTW9kZU11bHRpcGxlID0gZGlmZk1vZGUgPT09ICdtdWx0aXBsZSc7XG4gIH1cbiAgLyoqXHJcbiAgICogQ2FsbGJhY2sgZnVuY3Rpb24gd2hlbiBhZGQgYSBkYXRhXHJcbiAgICovXG5cblxuICBEYXRhRGlmZmVyLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoZnVuYykge1xuICAgIHRoaXMuX2FkZCA9IGZ1bmM7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIC8qKlxyXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIHdoZW4gdXBkYXRlIGEgZGF0YVxyXG4gICAqL1xuXG5cbiAgRGF0YURpZmZlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGZ1bmMpIHtcbiAgICB0aGlzLl91cGRhdGUgPSBmdW5jO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICAvKipcclxuICAgKiBDYWxsYmFjayBmdW5jdGlvbiB3aGVuIHVwZGF0ZSBhIGRhdGEgYW5kIG9ubHkgd29yayBpbiBgY2JNb2RlOiAnYnlLZXknYC5cclxuICAgKi9cblxuXG4gIERhdGFEaWZmZXIucHJvdG90eXBlLnVwZGF0ZU1hbnlUb09uZSA9IGZ1bmN0aW9uIChmdW5jKSB7XG4gICAgdGhpcy5fdXBkYXRlTWFueVRvT25lID0gZnVuYztcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbiAgLyoqXHJcbiAgICogQ2FsbGJhY2sgZnVuY3Rpb24gd2hlbiB1cGRhdGUgYSBkYXRhIGFuZCBvbmx5IHdvcmsgaW4gYGNiTW9kZTogJ2J5S2V5J2AuXHJcbiAgICovXG5cblxuICBEYXRhRGlmZmVyLnByb3RvdHlwZS51cGRhdGVPbmVUb01hbnkgPSBmdW5jdGlvbiAoZnVuYykge1xuICAgIHRoaXMuX3VwZGF0ZU9uZVRvTWFueSA9IGZ1bmM7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIC8qKlxyXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIHdoZW4gdXBkYXRlIGEgZGF0YSBhbmQgb25seSB3b3JrIGluIGBjYk1vZGU6ICdieUtleSdgLlxyXG4gICAqL1xuXG5cbiAgRGF0YURpZmZlci5wcm90b3R5cGUudXBkYXRlTWFueVRvTWFueSA9IGZ1bmN0aW9uIChmdW5jKSB7XG4gICAgdGhpcy5fdXBkYXRlTWFueVRvTWFueSA9IGZ1bmM7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIC8qKlxyXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIHdoZW4gcmVtb3ZlIGEgZGF0YVxyXG4gICAqL1xuXG5cbiAgRGF0YURpZmZlci5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGZ1bmMpIHtcbiAgICB0aGlzLl9yZW1vdmUgPSBmdW5jO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIERhdGFEaWZmZXIucHJvdG90eXBlLmV4ZWN1dGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpc1t0aGlzLl9kaWZmTW9kZU11bHRpcGxlID8gJ19leGVjdXRlTXVsdGlwbGUnIDogJ19leGVjdXRlT25lVG9PbmUnXSgpO1xuICB9O1xuXG4gIERhdGFEaWZmZXIucHJvdG90eXBlLl9leGVjdXRlT25lVG9PbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG9sZEFyciA9IHRoaXMuX29sZDtcbiAgICB2YXIgbmV3QXJyID0gdGhpcy5fbmV3O1xuICAgIHZhciBuZXdEYXRhSW5kZXhNYXAgPSB7fTtcbiAgICB2YXIgb2xkRGF0YUtleUFyciA9IG5ldyBBcnJheShvbGRBcnIubGVuZ3RoKTtcbiAgICB2YXIgbmV3RGF0YUtleUFyciA9IG5ldyBBcnJheShuZXdBcnIubGVuZ3RoKTtcblxuICAgIHRoaXMuX2luaXRJbmRleE1hcChvbGRBcnIsIG51bGwsIG9sZERhdGFLZXlBcnIsICdfb2xkS2V5R2V0dGVyJyk7XG5cbiAgICB0aGlzLl9pbml0SW5kZXhNYXAobmV3QXJyLCBuZXdEYXRhSW5kZXhNYXAsIG5ld0RhdGFLZXlBcnIsICdfbmV3S2V5R2V0dGVyJyk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9sZEFyci5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIG9sZEtleSA9IG9sZERhdGFLZXlBcnJbaV07XG4gICAgICB2YXIgbmV3SWR4TWFwVmFsID0gbmV3RGF0YUluZGV4TWFwW29sZEtleV07XG4gICAgICB2YXIgbmV3SWR4TWFwVmFsTGVuID0gZGF0YUluZGV4TWFwVmFsdWVMZW5ndGgobmV3SWR4TWFwVmFsKTsgLy8gaWR4IGNhbiBuZXZlciBiZSBlbXB0eSBhcnJheSBoZXJlLiBzZWUgJ3NldCBudWxsJyBsb2dpYyBiZWxvdy5cblxuICAgICAgaWYgKG5ld0lkeE1hcFZhbExlbiA+IDEpIHtcbiAgICAgICAgLy8gQ29uc2lkZXIgdGhlcmUgaXMgZHVwbGljYXRlIGtleSAoZm9yIGV4YW1wbGUsIHVzZSBkYXRhSXRlbS5uYW1lIGFzIGtleSkuXG4gICAgICAgIC8vIFdlIHNob3VsZCBtYWtlIHN1cmUgZXZlcnkgaXRlbSBpbiBuZXdBcnIgYW5kIG9sZEFyciBjYW4gYmUgdmlzaXRlZC5cbiAgICAgICAgdmFyIG5ld0lkeCA9IG5ld0lkeE1hcFZhbC5zaGlmdCgpO1xuXG4gICAgICAgIGlmIChuZXdJZHhNYXBWYWwubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgbmV3RGF0YUluZGV4TWFwW29sZEtleV0gPSBuZXdJZHhNYXBWYWxbMF07XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl91cGRhdGUgJiYgdGhpcy5fdXBkYXRlKG5ld0lkeCwgaSk7XG4gICAgICB9IGVsc2UgaWYgKG5ld0lkeE1hcFZhbExlbiA9PT0gMSkge1xuICAgICAgICBuZXdEYXRhSW5kZXhNYXBbb2xkS2V5XSA9IG51bGw7XG4gICAgICAgIHRoaXMuX3VwZGF0ZSAmJiB0aGlzLl91cGRhdGUobmV3SWR4TWFwVmFsLCBpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3JlbW92ZSAmJiB0aGlzLl9yZW1vdmUoaSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fcGVyZm9ybVJlc3RBZGQobmV3RGF0YUtleUFyciwgbmV3RGF0YUluZGV4TWFwKTtcbiAgfTtcbiAgLyoqXHJcbiAgICogRm9yIGV4YW1wbGUsIGNvbnNpZGVyIHRoZSBjYXNlOlxyXG4gICAqIG9sZERhdGE6IFtvMCwgbzEsIG8yLCBvMywgbzQsIG81LCBvNiwgbzddLFxyXG4gICAqIG5ld0RhdGE6IFtuMCwgbjEsIG4yLCBuMywgbjQsIG41LCBuNiwgbjcsIG44XSxcclxuICAgKiBXaGVyZTpcclxuICAgKiAgICAgbzAsIG8xLCBuMCBoYXMga2V5ICdhJyAobWFueSB0byBvbmUpXHJcbiAgICogICAgIG81LCBuNCwgbjUsIG42IGhhcyBrZXkgJ2InIChvbmUgdG8gbWFueSlcclxuICAgKiAgICAgbzIsIG4xIGhhcyBrZXkgJ2MnIChvbmUgdG8gb25lKVxyXG4gICAqICAgICBuMiwgbjMgaGFzIGtleSAnZCcgKGFkZClcclxuICAgKiAgICAgbzMsIG80IGhhcyBrZXkgJ2UnIChyZW1vdmUpXHJcbiAgICogICAgIG82LCBvNywgbjcsIG44IGhhcyBrZXkgJ2YnIChtYW55IHRvIG1hbnksIHRyZWF0ZWQgYXMgYWRkIGFuZCByZW1vdmUpXHJcbiAgICogVGhlbjpcclxuICAgKiAgICAgKFRoZSBvcmRlciBvZiB0aGUgZm9sbG93aW5nIGRpcmVjdGl2ZXMgYXJlIG5vdCBlbnN1cmVkLilcclxuICAgKiAgICAgdGhpcy5fdXBkYXRlTWFueVRvT25lKG4wLCBbbzAsIG8xXSk7XHJcbiAgICogICAgIHRoaXMuX3VwZGF0ZU9uZVRvTWFueShbbjQsIG41LCBuNl0sIG81KTtcclxuICAgKiAgICAgdGhpcy5fdXBkYXRlKG4xLCBvMik7XHJcbiAgICogICAgIHRoaXMuX3JlbW92ZShvMyk7XHJcbiAgICogICAgIHRoaXMuX3JlbW92ZShvNCk7XHJcbiAgICogICAgIHRoaXMuX3JlbW92ZShvNik7XHJcbiAgICogICAgIHRoaXMuX3JlbW92ZShvNyk7XHJcbiAgICogICAgIHRoaXMuX2FkZChuMik7XHJcbiAgICogICAgIHRoaXMuX2FkZChuMyk7XHJcbiAgICogICAgIHRoaXMuX2FkZChuNyk7XHJcbiAgICogICAgIHRoaXMuX2FkZChuOCk7XHJcbiAgICovXG5cblxuICBEYXRhRGlmZmVyLnByb3RvdHlwZS5fZXhlY3V0ZU11bHRpcGxlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvbGRBcnIgPSB0aGlzLl9vbGQ7XG4gICAgdmFyIG5ld0FyciA9IHRoaXMuX25ldztcbiAgICB2YXIgb2xkRGF0YUluZGV4TWFwID0ge307XG4gICAgdmFyIG5ld0RhdGFJbmRleE1hcCA9IHt9O1xuICAgIHZhciBvbGREYXRhS2V5QXJyID0gW107XG4gICAgdmFyIG5ld0RhdGFLZXlBcnIgPSBbXTtcblxuICAgIHRoaXMuX2luaXRJbmRleE1hcChvbGRBcnIsIG9sZERhdGFJbmRleE1hcCwgb2xkRGF0YUtleUFyciwgJ19vbGRLZXlHZXR0ZXInKTtcblxuICAgIHRoaXMuX2luaXRJbmRleE1hcChuZXdBcnIsIG5ld0RhdGFJbmRleE1hcCwgbmV3RGF0YUtleUFyciwgJ19uZXdLZXlHZXR0ZXInKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkRGF0YUtleUFyci5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIG9sZEtleSA9IG9sZERhdGFLZXlBcnJbaV07XG4gICAgICB2YXIgb2xkSWR4TWFwVmFsID0gb2xkRGF0YUluZGV4TWFwW29sZEtleV07XG4gICAgICB2YXIgbmV3SWR4TWFwVmFsID0gbmV3RGF0YUluZGV4TWFwW29sZEtleV07XG4gICAgICB2YXIgb2xkSWR4TWFwVmFsTGVuID0gZGF0YUluZGV4TWFwVmFsdWVMZW5ndGgob2xkSWR4TWFwVmFsKTtcbiAgICAgIHZhciBuZXdJZHhNYXBWYWxMZW4gPSBkYXRhSW5kZXhNYXBWYWx1ZUxlbmd0aChuZXdJZHhNYXBWYWwpO1xuXG4gICAgICBpZiAob2xkSWR4TWFwVmFsTGVuID4gMSAmJiBuZXdJZHhNYXBWYWxMZW4gPT09IDEpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlTWFueVRvT25lICYmIHRoaXMuX3VwZGF0ZU1hbnlUb09uZShuZXdJZHhNYXBWYWwsIG9sZElkeE1hcFZhbCk7XG4gICAgICAgIG5ld0RhdGFJbmRleE1hcFtvbGRLZXldID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAob2xkSWR4TWFwVmFsTGVuID09PSAxICYmIG5ld0lkeE1hcFZhbExlbiA+IDEpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlT25lVG9NYW55ICYmIHRoaXMuX3VwZGF0ZU9uZVRvTWFueShuZXdJZHhNYXBWYWwsIG9sZElkeE1hcFZhbCk7XG4gICAgICAgIG5ld0RhdGFJbmRleE1hcFtvbGRLZXldID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAob2xkSWR4TWFwVmFsTGVuID09PSAxICYmIG5ld0lkeE1hcFZhbExlbiA9PT0gMSkge1xuICAgICAgICB0aGlzLl91cGRhdGUgJiYgdGhpcy5fdXBkYXRlKG5ld0lkeE1hcFZhbCwgb2xkSWR4TWFwVmFsKTtcbiAgICAgICAgbmV3RGF0YUluZGV4TWFwW29sZEtleV0gPSBudWxsO1xuICAgICAgfSBlbHNlIGlmIChvbGRJZHhNYXBWYWxMZW4gPiAxICYmIG5ld0lkeE1hcFZhbExlbiA+IDEpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlTWFueVRvTWFueSAmJiB0aGlzLl91cGRhdGVNYW55VG9NYW55KG5ld0lkeE1hcFZhbCwgb2xkSWR4TWFwVmFsKTtcbiAgICAgICAgbmV3RGF0YUluZGV4TWFwW29sZEtleV0gPSBudWxsO1xuICAgICAgfSBlbHNlIGlmIChvbGRJZHhNYXBWYWxMZW4gPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGlfMSA9IDA7IGlfMSA8IG9sZElkeE1hcFZhbExlbjsgaV8xKyspIHtcbiAgICAgICAgICB0aGlzLl9yZW1vdmUgJiYgdGhpcy5fcmVtb3ZlKG9sZElkeE1hcFZhbFtpXzFdKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlICYmIHRoaXMuX3JlbW92ZShvbGRJZHhNYXBWYWwpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX3BlcmZvcm1SZXN0QWRkKG5ld0RhdGFLZXlBcnIsIG5ld0RhdGFJbmRleE1hcCk7XG4gIH07XG5cbiAgRGF0YURpZmZlci5wcm90b3R5cGUuX3BlcmZvcm1SZXN0QWRkID0gZnVuY3Rpb24gKG5ld0RhdGFLZXlBcnIsIG5ld0RhdGFJbmRleE1hcCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV3RGF0YUtleUFyci5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIG5ld0tleSA9IG5ld0RhdGFLZXlBcnJbaV07XG4gICAgICB2YXIgbmV3SWR4TWFwVmFsID0gbmV3RGF0YUluZGV4TWFwW25ld0tleV07XG4gICAgICB2YXIgaWR4TWFwVmFsTGVuID0gZGF0YUluZGV4TWFwVmFsdWVMZW5ndGgobmV3SWR4TWFwVmFsKTtcblxuICAgICAgaWYgKGlkeE1hcFZhbExlbiA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBpZHhNYXBWYWxMZW47IGorKykge1xuICAgICAgICAgIHRoaXMuX2FkZCAmJiB0aGlzLl9hZGQobmV3SWR4TWFwVmFsW2pdKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpZHhNYXBWYWxMZW4gPT09IDEpIHtcbiAgICAgICAgdGhpcy5fYWRkICYmIHRoaXMuX2FkZChuZXdJZHhNYXBWYWwpO1xuICAgICAgfSAvLyBTdXBwb3J0IGJvdGggYG5ld0RhdGFLZXlBcnJgIGFyZSBkdXBsaWNhdGlvbiByZW1vdmVkIG9yIG5vdCByZW1vdmVkLlxuXG5cbiAgICAgIG5ld0RhdGFJbmRleE1hcFtuZXdLZXldID0gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgRGF0YURpZmZlci5wcm90b3R5cGUuX2luaXRJbmRleE1hcCA9IGZ1bmN0aW9uIChhcnIsIC8vIENhbiBiZSBudWxsLlxuICBtYXAsIC8vIEluICdieUtleScsIHRoZSBvdXRwdXQgYGtleUFycmAgaXMgZHVwbGljYXRpb24gcmVtb3ZlZC5cbiAgLy8gSW4gJ2J5SW5kZXgnLCB0aGUgb3V0cHV0IGBrZXlBcnJgIGlzIG5vdCBkdXBsaWNhdGlvbiByZW1vdmVkIGFuZFxuICAvLyAgICAgaXRzIGluZGljZXMgYXJlIGFjY3VyYXRlbHkgY29ycmVzcG9uZGluZyB0byBgYXJyYC5cbiAga2V5QXJyLCBrZXlHZXR0ZXJOYW1lKSB7XG4gICAgdmFyIGNiTW9kZU11bHRpcGxlID0gdGhpcy5fZGlmZk1vZGVNdWx0aXBsZTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBBZGQgcHJlZml4IHRvIGF2b2lkIGNvbmZsaWN0IHdpdGggT2JqZWN0LnByb3RvdHlwZS5cbiAgICAgIHZhciBrZXkgPSAnX2VjXycgKyB0aGlzW2tleUdldHRlck5hbWVdKGFycltpXSwgaSk7XG5cbiAgICAgIGlmICghY2JNb2RlTXVsdGlwbGUpIHtcbiAgICAgICAga2V5QXJyW2ldID0ga2V5O1xuICAgICAgfVxuXG4gICAgICBpZiAoIW1hcCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGlkeE1hcFZhbCA9IG1hcFtrZXldO1xuICAgICAgdmFyIGlkeE1hcFZhbExlbiA9IGRhdGFJbmRleE1hcFZhbHVlTGVuZ3RoKGlkeE1hcFZhbCk7XG5cbiAgICAgIGlmIChpZHhNYXBWYWxMZW4gPT09IDApIHtcbiAgICAgICAgLy8gU2ltcGxlIG9wdGltaXplOiBpbiBtb3N0IGNhc2VzLCBvbmUgaW5kZXggaGFzIG9uZSBrZXksXG4gICAgICAgIC8vIGRvIG5vdCBuZWVkIGFycmF5LlxuICAgICAgICBtYXBba2V5XSA9IGk7XG5cbiAgICAgICAgaWYgKGNiTW9kZU11bHRpcGxlKSB7XG4gICAgICAgICAga2V5QXJyLnB1c2goa2V5KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpZHhNYXBWYWxMZW4gPT09IDEpIHtcbiAgICAgICAgbWFwW2tleV0gPSBbaWR4TWFwVmFsLCBpXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlkeE1hcFZhbC5wdXNoKGkpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gRGF0YURpZmZlcjtcbn0oKTtcblxuZXhwb3J0IGRlZmF1bHQgRGF0YURpZmZlcjsiLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCB7IGVhY2gsIGNyZWF0ZUhhc2hNYXAsIGFzc2VydCwgbWFwIH0gZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbmltcG9ydCB7IFZJU1VBTF9ESU1FTlNJT05TIH0gZnJvbSAnLi4vLi4vdXRpbC90eXBlcy5qcyc7XG5cbnZhciBEaW1lbnNpb25Vc2VyT3VwdXQgPVxuLyoqIEBjbGFzcyAqL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBEaW1lbnNpb25Vc2VyT3VwdXQoZW5jb2RlLCBkaW1SZXF1ZXN0KSB7XG4gICAgdGhpcy5fZW5jb2RlID0gZW5jb2RlO1xuICAgIHRoaXMuX3NjaGVtYSA9IGRpbVJlcXVlc3Q7XG4gIH1cblxuICBEaW1lbnNpb25Vc2VyT3VwdXQucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLy8gRG8gbm90IGdlbmVyYXRlIGZ1bGwgZGltZW5zaW9uIG5hbWUgdW50aWwgZmlzdCB1c2VkLlxuICAgICAgZnVsbERpbWVuc2lvbnM6IHRoaXMuX2dldEZ1bGxEaW1lbnNpb25OYW1lcygpLFxuICAgICAgZW5jb2RlOiB0aGlzLl9lbmNvZGVcbiAgICB9O1xuICB9O1xuICAvKipcclxuICAgKiBHZXQgYWxsIGRhdGEgc3RvcmUgZGltZW5zaW9uIG5hbWVzLlxyXG4gICAqIFRoZW9yZXRpY2FsbHkgYSBzZXJpZXMgZGF0YSBzdG9yZSBpcyBkZWZpbmVkIGJvdGggYnkgc2VyaWVzIGFuZCB1c2VkIGRhdGFzZXQgKGlmIGFueSkuXHJcbiAgICogSWYgc29tZSBkaW1lbnNpb25zIGFyZSBvbWl0dGVkIGZvciBwZXJmb3JtYW5jZSByZWFzb24gaW4gYHRoaXMuZGltZW5zaW9uc2AsXHJcbiAgICogdGhlIGRpbWVuc2lvbiBuYW1lIG1heSBub3QgYmUgYXV0by1nZW5lcmF0ZWQgaWYgdXNlciBkb2VzIG5vdCBzcGVjaWZ5IGEgZGltZW5zaW9uIG5hbWUuXHJcbiAgICogSW4gdGhpcyBjYXNlLCB0aGUgZGltZW5zaW9uIG5hbWUgaXMgYG51bGxgL2B1bmRlZmluZWRgLlxyXG4gICAqL1xuXG5cbiAgRGltZW5zaW9uVXNlck91cHV0LnByb3RvdHlwZS5fZ2V0RnVsbERpbWVuc2lvbk5hbWVzID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5fY2FjaGVkRGltTmFtZXMpIHtcbiAgICAgIHRoaXMuX2NhY2hlZERpbU5hbWVzID0gdGhpcy5fc2NoZW1hID8gdGhpcy5fc2NoZW1hLm1ha2VPdXRwdXREaW1lbnNpb25OYW1lcygpIDogW107XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2NhY2hlZERpbU5hbWVzO1xuICB9O1xuXG4gIHJldHVybiBEaW1lbnNpb25Vc2VyT3VwdXQ7XG59KCk7XG5cbjtcbmV4cG9ydCBmdW5jdGlvbiBzdW1tYXJpemVEaW1lbnNpb25zKGRhdGEsIHNjaGVtYSkge1xuICB2YXIgc3VtbWFyeSA9IHt9O1xuICB2YXIgZW5jb2RlID0gc3VtbWFyeS5lbmNvZGUgPSB7fTtcbiAgdmFyIG5vdEV4dHJhQ29vcmREaW1NYXAgPSBjcmVhdGVIYXNoTWFwKCk7XG4gIHZhciBkZWZhdWx0ZWRMYWJlbCA9IFtdO1xuICB2YXIgZGVmYXVsdGVkVG9vbHRpcCA9IFtdO1xuICB2YXIgdXNlck91dHB1dEVuY29kZSA9IHt9O1xuICBlYWNoKGRhdGEuZGltZW5zaW9ucywgZnVuY3Rpb24gKGRpbU5hbWUpIHtcbiAgICB2YXIgZGltSXRlbSA9IGRhdGEuZ2V0RGltZW5zaW9uSW5mbyhkaW1OYW1lKTtcbiAgICB2YXIgY29vcmREaW0gPSBkaW1JdGVtLmNvb3JkRGltO1xuXG4gICAgaWYgKGNvb3JkRGltKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBhc3NlcnQoVklTVUFMX0RJTUVOU0lPTlMuZ2V0KGNvb3JkRGltKSA9PSBudWxsKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGNvb3JkRGltSW5kZXggPSBkaW1JdGVtLmNvb3JkRGltSW5kZXg7XG4gICAgICBnZXRPckNyZWF0ZUVuY29kZUFycihlbmNvZGUsIGNvb3JkRGltKVtjb29yZERpbUluZGV4XSA9IGRpbU5hbWU7XG5cbiAgICAgIGlmICghZGltSXRlbS5pc0V4dHJhQ29vcmQpIHtcbiAgICAgICAgbm90RXh0cmFDb29yZERpbU1hcC5zZXQoY29vcmREaW0sIDEpOyAvLyBVc2UgdGhlIGxhc3QgY29vcmQgZGltIChhbmQgbGFiZWwgZnJpZW5kbHkpIGFzIGRlZmF1bHQgbGFiZWwsXG4gICAgICAgIC8vIGJlY2F1c2Ugd2hlbiBkYXRhc2V0IGlzIHVzZWQsIGl0IGlzIGhhcmQgdG8gZ3Vlc3Mgd2hpY2ggZGltZW5zaW9uXG4gICAgICAgIC8vIGNhbiBiZSB2YWx1ZSBkaW1lbnNpb24uIElmIGJvdGggc2hvdyB4LCB5IG9uIGxhYmVsIGlzIG5vdCBsb29rIGdvb2QsXG4gICAgICAgIC8vIGFuZCBjb252ZW50aW9uYWxseSB5IGF4aXMgaXMgZm9jdXNlZCBtb3JlLlxuXG4gICAgICAgIGlmIChtYXlMYWJlbERpbVR5cGUoZGltSXRlbS50eXBlKSkge1xuICAgICAgICAgIGRlZmF1bHRlZExhYmVsWzBdID0gZGltTmFtZTtcbiAgICAgICAgfSAvLyBVc2VyIG91dHB1dCBlbmNvZGUgZG8gbm90IGNvbnRhaW4gZ2VuZXJhdGVkIGNvb3Jkcy5cbiAgICAgICAgLy8gQW5kIGl0IG9ubHkgaGFzIGluZGV4LiBVc2VyIGNhbiB1c2UgaW5kZXggdG8gcmV0cmlldmUgdmFsdWUgZnJvbSB0aGUgcmF3IGl0ZW0gYXJyYXkuXG5cblxuICAgICAgICBnZXRPckNyZWF0ZUVuY29kZUFycih1c2VyT3V0cHV0RW5jb2RlLCBjb29yZERpbSlbY29vcmREaW1JbmRleF0gPSBkYXRhLmdldERpbWVuc2lvbkluZGV4KGRpbUl0ZW0ubmFtZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkaW1JdGVtLmRlZmF1bHRUb29sdGlwKSB7XG4gICAgICAgIGRlZmF1bHRlZFRvb2x0aXAucHVzaChkaW1OYW1lKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBWSVNVQUxfRElNRU5TSU9OUy5lYWNoKGZ1bmN0aW9uICh2LCBvdGhlckRpbSkge1xuICAgICAgdmFyIGVuY29kZUFyciA9IGdldE9yQ3JlYXRlRW5jb2RlQXJyKGVuY29kZSwgb3RoZXJEaW0pO1xuICAgICAgdmFyIGRpbUluZGV4ID0gZGltSXRlbS5vdGhlckRpbXNbb3RoZXJEaW1dO1xuXG4gICAgICBpZiAoZGltSW5kZXggIT0gbnVsbCAmJiBkaW1JbmRleCAhPT0gZmFsc2UpIHtcbiAgICAgICAgZW5jb2RlQXJyW2RpbUluZGV4XSA9IGRpbUl0ZW0ubmFtZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIHZhciBkYXRhRGltc09uQ29vcmQgPSBbXTtcbiAgdmFyIGVuY29kZUZpcnN0RGltTm90RXh0cmEgPSB7fTtcbiAgbm90RXh0cmFDb29yZERpbU1hcC5lYWNoKGZ1bmN0aW9uICh2LCBjb29yZERpbSkge1xuICAgIHZhciBkaW1BcnIgPSBlbmNvZGVbY29vcmREaW1dO1xuICAgIGVuY29kZUZpcnN0RGltTm90RXh0cmFbY29vcmREaW1dID0gZGltQXJyWzBdOyAvLyBOb3QgbmVjZXNzYXJ5IHRvIHJlbW92ZSBkdXBsaWNhdGUsIGJlY2F1c2UgYSBkYXRhXG4gICAgLy8gZGltIGNhbm90IG9uIG1vcmUgdGhhbiBvbmUgY29vcmREaW0uXG5cbiAgICBkYXRhRGltc09uQ29vcmQgPSBkYXRhRGltc09uQ29vcmQuY29uY2F0KGRpbUFycik7XG4gIH0pO1xuICBzdW1tYXJ5LmRhdGFEaW1zT25Db29yZCA9IGRhdGFEaW1zT25Db29yZDtcbiAgc3VtbWFyeS5kYXRhRGltSW5kaWNlc09uQ29vcmQgPSBtYXAoZGF0YURpbXNPbkNvb3JkLCBmdW5jdGlvbiAoZGltTmFtZSkge1xuICAgIHJldHVybiBkYXRhLmdldERpbWVuc2lvbkluZm8oZGltTmFtZSkuc3RvcmVEaW1JbmRleDtcbiAgfSk7XG4gIHN1bW1hcnkuZW5jb2RlRmlyc3REaW1Ob3RFeHRyYSA9IGVuY29kZUZpcnN0RGltTm90RXh0cmE7XG4gIHZhciBlbmNvZGVMYWJlbCA9IGVuY29kZS5sYWJlbDsgLy8gRklYTUUgYGVuY29kZS5sYWJlbGAgaXMgbm90IHJlY29tbWVuZGVkLCBiZWNhdXNlIGZvcm1hdHRlciBjYW5ub3QgYmUgc2V0XG4gIC8vIGluIHRoaXMgd2F5LiBVc2UgbGFiZWwuZm9ybWF0dGVyIGluc3RlYWQuIE1heWJlIHJlbW92ZSB0aGlzIGFwcHJvYWNoIHNvbWVkYXkuXG5cbiAgaWYgKGVuY29kZUxhYmVsICYmIGVuY29kZUxhYmVsLmxlbmd0aCkge1xuICAgIGRlZmF1bHRlZExhYmVsID0gZW5jb2RlTGFiZWwuc2xpY2UoKTtcbiAgfVxuXG4gIHZhciBlbmNvZGVUb29sdGlwID0gZW5jb2RlLnRvb2x0aXA7XG5cbiAgaWYgKGVuY29kZVRvb2x0aXAgJiYgZW5jb2RlVG9vbHRpcC5sZW5ndGgpIHtcbiAgICBkZWZhdWx0ZWRUb29sdGlwID0gZW5jb2RlVG9vbHRpcC5zbGljZSgpO1xuICB9IGVsc2UgaWYgKCFkZWZhdWx0ZWRUb29sdGlwLmxlbmd0aCkge1xuICAgIGRlZmF1bHRlZFRvb2x0aXAgPSBkZWZhdWx0ZWRMYWJlbC5zbGljZSgpO1xuICB9XG5cbiAgZW5jb2RlLmRlZmF1bHRlZExhYmVsID0gZGVmYXVsdGVkTGFiZWw7XG4gIGVuY29kZS5kZWZhdWx0ZWRUb29sdGlwID0gZGVmYXVsdGVkVG9vbHRpcDtcbiAgc3VtbWFyeS51c2VyT3V0cHV0ID0gbmV3IERpbWVuc2lvblVzZXJPdXB1dCh1c2VyT3V0cHV0RW5jb2RlLCBzY2hlbWEpO1xuICByZXR1cm4gc3VtbWFyeTtcbn1cblxuZnVuY3Rpb24gZ2V0T3JDcmVhdGVFbmNvZGVBcnIoZW5jb2RlLCBkaW0pIHtcbiAgaWYgKCFlbmNvZGUuaGFzT3duUHJvcGVydHkoZGltKSkge1xuICAgIGVuY29kZVtkaW1dID0gW107XG4gIH1cblxuICByZXR1cm4gZW5jb2RlW2RpbV07XG59IC8vIEZJWE1FOlRTIHNob3VsZCBiZSB0eXBlIGBBeGlzVHlwZWBcblxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGltZW5zaW9uVHlwZUJ5QXhpcyhheGlzVHlwZSkge1xuICByZXR1cm4gYXhpc1R5cGUgPT09ICdjYXRlZ29yeScgPyAnb3JkaW5hbCcgOiBheGlzVHlwZSA9PT0gJ3RpbWUnID8gJ3RpbWUnIDogJ2Zsb2F0Jztcbn1cblxuZnVuY3Rpb24gbWF5TGFiZWxEaW1UeXBlKGRpbVR5cGUpIHtcbiAgLy8gSW4gbW9zdCBjYXNlcywgb3JkaW5hbCBhbmQgdGltZSBkbyBub3Qgc3VpdGFibGUgZm9yIGxhYmVsLlxuICAvLyBPcmRpbmFsIGluZm8gY2FuIGJlIGRpc3BsYXllZCBvbiBheGlzLiBUaW1lIGlzIHRvbyBsb25nLlxuICByZXR1cm4gIShkaW1UeXBlID09PSAnb3JkaW5hbCcgfHwgZGltVHlwZSA9PT0gJ3RpbWUnKTtcbn0gLy8gZnVuY3Rpb24gZmluZFRoZUxhc3REaW1NYXlMYWJlbChkYXRhKSB7XG4vLyAgICAgLy8gR2V0IGxhc3QgdmFsdWUgZGltXG4vLyAgICAgbGV0IGRpbWVuc2lvbnMgPSBkYXRhLmRpbWVuc2lvbnMuc2xpY2UoKTtcbi8vICAgICBsZXQgdmFsdWVUeXBlO1xuLy8gICAgIGxldCB2YWx1ZURpbTtcbi8vICAgICB3aGlsZSAoZGltZW5zaW9ucy5sZW5ndGggJiYgKFxuLy8gICAgICAgICB2YWx1ZURpbSA9IGRpbWVuc2lvbnMucG9wKCksXG4vLyAgICAgICAgIHZhbHVlVHlwZSA9IGRhdGEuZ2V0RGltZW5zaW9uSW5mbyh2YWx1ZURpbSkudHlwZSxcbi8vICAgICAgICAgdmFsdWVUeXBlID09PSAnb3JkaW5hbCcgfHwgdmFsdWVUeXBlID09PSAndGltZSdcbi8vICAgICApKSB7fSAvLyBqc2hpbnQgaWdub3JlOmxpbmVcbi8vICAgICByZXR1cm4gdmFsdWVEaW07XG4vLyB9IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgKiBhcyB6clV0aWwgZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcblxudmFyIFNlcmllc0RpbWVuc2lvbkRlZmluZSA9XG4vKiogQGNsYXNzICovXG5mdW5jdGlvbiAoKSB7XG4gIC8qKlxyXG4gICAqIEBwYXJhbSBvcHQgQWxsIG9mIHRoZSBmaWVsZHMgd2lsbCBiZSBzaGFsbG93IGNvcGllZC5cclxuICAgKi9cbiAgZnVuY3Rpb24gU2VyaWVzRGltZW5zaW9uRGVmaW5lKG9wdCkge1xuICAgIC8qKlxyXG4gICAgICogVGhlIGZvcm1hdCBvZiBgb3RoZXJEaW1zYCBpczpcclxuICAgICAqIGBgYGpzXHJcbiAgICAgKiB7XHJcbiAgICAgKiAgICAgdG9vbHRpcD86IG51bWJlclxyXG4gICAgICogICAgIGxhYmVsPzogbnVtYmVyXHJcbiAgICAgKiAgICAgaXRlbU5hbWU/OiBudW1iZXJcclxuICAgICAqICAgICBzZXJpZXNOYW1lPzogbnVtYmVyXHJcbiAgICAgKiB9XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBBIGBzZXJpZXMuZW5jb2RlYCBjYW4gc3BlY2lmaWVkIHRoZXNlIGZpZWxkczpcclxuICAgICAqIGBgYGpzXHJcbiAgICAgKiBlbmNvZGU6IHtcclxuICAgICAqICAgICAvLyBcIjMsIDEsIDVcIiBpcyB0aGUgaW5kZXggb2YgZGF0YSBkaW1lbnNpb24uXHJcbiAgICAgKiAgICAgdG9vbHRpcDogWzMsIDEsIDVdLFxyXG4gICAgICogICAgIGxhYmVsOiBbMCwgM10sXHJcbiAgICAgKiAgICAgLi4uXHJcbiAgICAgKiB9XHJcbiAgICAgKiBgYGBcclxuICAgICAqIGBvdGhlckRpbXNgIGlzIHRoZSBwYXJzZSByZXN1bHQgb2YgdGhlIGBzZXJpZXMuZW5jb2RlYCBhYm92ZSwgbGlrZTpcclxuICAgICAqIGBgYGpzXHJcbiAgICAgKiAvLyBTdXBwb3NlIHRoZSBpbmRleCBvZiB0aGlzIGRhdGEgZGltZW5zaW9uIGlzIGAzYC5cclxuICAgICAqIHRoaXMub3RoZXJEaW1zID0ge1xyXG4gICAgICogICAgIC8vIGAzYCBpcyBhdCB0aGUgaW5kZXggYDBgIG9mIHRoZSBgZW5jb2RlLnRvb2x0aXBgXHJcbiAgICAgKiAgICAgdG9vbHRpcDogMCxcclxuICAgICAqICAgICAvLyBgM2AgaXMgYXQgdGhlIGluZGV4IGAxYCBvZiB0aGUgYGVuY29kZS5sYWJlbGBcclxuICAgICAqICAgICBsYWJlbDogMVxyXG4gICAgICogfTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIFRoaXMgcHJvcCBzaG91bGQgbmV2ZXIgYmUgYG51bGxgL2B1bmRlZmluZWRgIGFmdGVyIGluaXRpYWxpemVkLlxyXG4gICAgICovXG4gICAgdGhpcy5vdGhlckRpbXMgPSB7fTtcblxuICAgIGlmIChvcHQgIT0gbnVsbCkge1xuICAgICAgenJVdGlsLmV4dGVuZCh0aGlzLCBvcHQpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBTZXJpZXNEaW1lbnNpb25EZWZpbmU7XG59KCk7XG5cbjtcbmV4cG9ydCBkZWZhdWx0IFNlcmllc0RpbWVuc2lvbkRlZmluZTsiLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCB7IGNyZWF0ZUhhc2hNYXAsIGlzT2JqZWN0LCByZXRyaWV2ZTIgfSBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0IHsgbWFrZUlubmVyIH0gZnJvbSAnLi4vLi4vdXRpbC9tb2RlbC5qcyc7XG5pbXBvcnQgeyBzaG91bGRSZXRyaWV2ZURhdGFCeU5hbWUgfSBmcm9tICcuLi9Tb3VyY2UuanMnO1xudmFyIGlubmVyID0gbWFrZUlubmVyKCk7XG52YXIgZGltVHlwZVNob3J0ID0ge1xuICBmbG9hdDogJ2YnLFxuICBpbnQ6ICdpJyxcbiAgb3JkaW5hbDogJ28nLFxuICBudW1iZXI6ICduJyxcbiAgdGltZTogJ3QnXG59O1xuLyoqXHJcbiAqIFJlcHJlc2VudHMgdGhlIGRpbWVuc2lvbiByZXF1aXJlbWVudCBvZiBhIHNlcmllcy5cclxuICpcclxuICogTk9USUNFOlxyXG4gKiBXaGVuIHRoZXJlIGFyZSB0b28gbWFueSBkaW1lbnNpb25zIGluIGRhdGFzZXQgYW5kIG1hbnkgc2VyaWVzLCBvbmx5IHRoZSB1c2VkIGRpbWVuc2lvbnNcclxuICogKGkuZS4sIHVzZWQgYnkgY29vcmQgc3lzIGFuZCBkZWNsYXJlZCBpbiBgc2VyaWVzLmVuY29kZWApIGFyZSBhZGQgdG8gYGRpbWVuc2lvbkRlZmluZUxpc3RgLlxyXG4gKiBCdXQgdXNlcnMgbWF5IHF1ZXJ5IGRhdGEgYnkgb3RoZXIgdW51c2VkIGRpbWVuc2lvbiBuYW1lcy5cclxuICogSW4gdGhpcyBjYXNlLCB1c2VycyBjYW4gb25seSBxdWVyeSBkYXRhIGlmIGFuZCBvbmx5IGlmIHRoZXkgaGF2ZSBkZWZpbmVkIGRpbWVuc2lvbiBuYW1lc1xyXG4gKiB2aWEgZWMgb3B0aW9uLCBzbyB3ZSBwcm92aWRlIGBnZXREaW1lbnNpb25JbmRleEZyb21Tb3VyY2VgLCB3aGljaCBvbmx5IHF1ZXJ5IHRoZW0gZnJvbVxyXG4gKiBgc291cmNlYCBkaW1lbnNpb25zLlxyXG4gKi9cblxudmFyIFNlcmllc0RhdGFTY2hlbWEgPVxuLyoqIEBjbGFzcyAqL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTZXJpZXNEYXRhU2NoZW1hKG9wdCkge1xuICAgIHRoaXMuZGltZW5zaW9ucyA9IG9wdC5kaW1lbnNpb25zO1xuICAgIHRoaXMuX2RpbU9taXR0ZWQgPSBvcHQuZGltZW5zaW9uT21pdHRlZDtcbiAgICB0aGlzLnNvdXJjZSA9IG9wdC5zb3VyY2U7XG4gICAgdGhpcy5fZnVsbERpbUNvdW50ID0gb3B0LmZ1bGxEaW1lbnNpb25Db3VudDtcblxuICAgIHRoaXMuX3VwZGF0ZURpbU9taXR0ZWQob3B0LmRpbWVuc2lvbk9taXR0ZWQpO1xuICB9XG5cbiAgU2VyaWVzRGF0YVNjaGVtYS5wcm90b3R5cGUuaXNEaW1lbnNpb25PbWl0dGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9kaW1PbWl0dGVkO1xuICB9O1xuXG4gIFNlcmllc0RhdGFTY2hlbWEucHJvdG90eXBlLl91cGRhdGVEaW1PbWl0dGVkID0gZnVuY3Rpb24gKGRpbWVuc2lvbk9taXR0ZWQpIHtcbiAgICB0aGlzLl9kaW1PbWl0dGVkID0gZGltZW5zaW9uT21pdHRlZDtcblxuICAgIGlmICghZGltZW5zaW9uT21pdHRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fZGltTmFtZU1hcCkge1xuICAgICAgdGhpcy5fZGltTmFtZU1hcCA9IGVuc3VyZVNvdXJjZURpbU5hbWVNYXAodGhpcy5zb3VyY2UpO1xuICAgIH1cbiAgfTtcbiAgLyoqXHJcbiAgICogQGNhdXRpb24gQ2FuIG9ubHkgYmUgdXNlZCB3aGVuIGBkaW1lbnNpb25PbWl0dGVkOiB0cnVlYC5cclxuICAgKlxyXG4gICAqIEdldCBpbmRleCBieSB1c2VyIGRlZmluZWQgZGltZW5zaW9uIG5hbWUgKGkuZS4sIG5vdCBpbnRlcm5hbCBnZW5lcmF0ZSBuYW1lKS5cclxuICAgKiBUaGF0IGlzLCBnZXQgaW5kZXggZnJvbSBgZGltZW5zaW9uc0RlZmluZWAuXHJcbiAgICogSWYgbm8gYGRpbWVuc2lvbnNEZWZpbmVgLCBvciBubyBuYW1lIGdldCwgcmV0dXJuIC0xLlxyXG4gICAqL1xuXG5cbiAgU2VyaWVzRGF0YVNjaGVtYS5wcm90b3R5cGUuZ2V0U291cmNlRGltZW5zaW9uSW5kZXggPSBmdW5jdGlvbiAoZGltTmFtZSkge1xuICAgIHJldHVybiByZXRyaWV2ZTIodGhpcy5fZGltTmFtZU1hcC5nZXQoZGltTmFtZSksIC0xKTtcbiAgfTtcbiAgLyoqXHJcbiAgICogQGNhdXRpb24gQ2FuIG9ubHkgYmUgdXNlZCB3aGVuIGBkaW1lbnNpb25PbWl0dGVkOiB0cnVlYC5cclxuICAgKlxyXG4gICAqIE5vdGljZTogbWF5IHJldHVybiBgbnVsbGAvYHVuZGVmaW5lZGAgaWYgdXNlciBub3Qgc3BlY2lmeSBkaW1lbnNpb24gbmFtZXMuXHJcbiAgICovXG5cblxuICBTZXJpZXNEYXRhU2NoZW1hLnByb3RvdHlwZS5nZXRTb3VyY2VEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltSW5kZXgpIHtcbiAgICB2YXIgZGltZW5zaW9uc0RlZmluZSA9IHRoaXMuc291cmNlLmRpbWVuc2lvbnNEZWZpbmU7XG5cbiAgICBpZiAoZGltZW5zaW9uc0RlZmluZSkge1xuICAgICAgcmV0dXJuIGRpbWVuc2lvbnNEZWZpbmVbZGltSW5kZXhdO1xuICAgIH1cbiAgfTtcblxuICBTZXJpZXNEYXRhU2NoZW1hLnByb3RvdHlwZS5tYWtlU3RvcmVTY2hlbWEgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGRpbUNvdW50ID0gdGhpcy5fZnVsbERpbUNvdW50O1xuICAgIHZhciB3aWxsUmV0cmlldmVEYXRhQnlOYW1lID0gc2hvdWxkUmV0cmlldmVEYXRhQnlOYW1lKHRoaXMuc291cmNlKTtcbiAgICB2YXIgbWFrZUhhc2hTdHJpY3QgPSAhc2hvdWxkT21pdFVudXNlZERpbWVuc2lvbnMoZGltQ291bnQpOyAvLyBJZiBzb3VyY2UgZG9uJ3QgaGF2ZSBkaW1lbnNpb25zIG9yIHNlcmllcyBkb24ndCBvbWl0IHVuc2VkIGRpbWVuc2lvbnMuXG4gICAgLy8gR2VuZXJhdGUgZnJvbSBzZXJpZXNEaW1MaXN0IGRpcmVjdGx5XG5cbiAgICB2YXIgZGltSGFzaCA9ICcnO1xuICAgIHZhciBkaW1zID0gW107XG5cbiAgICBmb3IgKHZhciBmdWxsRGltSWR4ID0gMCwgc2VyaWVzRGltSWR4ID0gMDsgZnVsbERpbUlkeCA8IGRpbUNvdW50OyBmdWxsRGltSWR4KyspIHtcbiAgICAgIHZhciBwcm9wZXJ0eSA9IHZvaWQgMDtcbiAgICAgIHZhciB0eXBlID0gdm9pZCAwO1xuICAgICAgdmFyIG9yZGluYWxNZXRhID0gdm9pZCAwO1xuICAgICAgdmFyIHNlcmllc0RpbURlZiA9IHRoaXMuZGltZW5zaW9uc1tzZXJpZXNEaW1JZHhdOyAvLyBUaGUgbGlzdCBoYXMgYmVlbiBzb3J0ZWQgYnkgYHN0b3JlRGltSW5kZXhgIGFzYy5cblxuICAgICAgaWYgKHNlcmllc0RpbURlZiAmJiBzZXJpZXNEaW1EZWYuc3RvcmVEaW1JbmRleCA9PT0gZnVsbERpbUlkeCkge1xuICAgICAgICBwcm9wZXJ0eSA9IHdpbGxSZXRyaWV2ZURhdGFCeU5hbWUgPyBzZXJpZXNEaW1EZWYubmFtZSA6IG51bGw7XG4gICAgICAgIHR5cGUgPSBzZXJpZXNEaW1EZWYudHlwZTtcbiAgICAgICAgb3JkaW5hbE1ldGEgPSBzZXJpZXNEaW1EZWYub3JkaW5hbE1ldGE7XG4gICAgICAgIHNlcmllc0RpbUlkeCsrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHNvdXJjZURpbURlZiA9IHRoaXMuZ2V0U291cmNlRGltZW5zaW9uKGZ1bGxEaW1JZHgpO1xuXG4gICAgICAgIGlmIChzb3VyY2VEaW1EZWYpIHtcbiAgICAgICAgICBwcm9wZXJ0eSA9IHdpbGxSZXRyaWV2ZURhdGFCeU5hbWUgPyBzb3VyY2VEaW1EZWYubmFtZSA6IG51bGw7XG4gICAgICAgICAgdHlwZSA9IHNvdXJjZURpbURlZi50eXBlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGRpbXMucHVzaCh7XG4gICAgICAgIHByb3BlcnR5OiBwcm9wZXJ0eSxcbiAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgb3JkaW5hbE1ldGE6IG9yZGluYWxNZXRhXG4gICAgICB9KTsgLy8gSWYgcmV0cmlldmluZyBkYXRhIGJ5IGluZGV4LFxuICAgICAgLy8gICB1c2UgPGluZGV4LCB0eXBlLCBvcmRpbmFsTWV0YT4gdG8gZGV0ZXJtaW5lIHdoZXRoZXIgZGF0YSBjYW4gYmUgc2hhcmVkLlxuICAgICAgLy8gICAoQmVjYXVzZSBpbiB0aGlzIGNhc2UgdGhlcmUgbWlnaHQgYmUgbm8gZGltZW5zaW9uIG5hbWUgZGVmaW5lZCBpbiBkYXRhc2V0LCBidXQgaW5kaWNlcyBhbHdheXMgZXhpc3RzKS5cbiAgICAgIC8vICAgKEluZGljZXMgYXJlIGFsd2F5cyAwLCAxLCAyLCAuLi4sIHNvIHdlIGNhbiBpZ25vcmUgdGhlbSB0byBzaG9ydGVuIHRoZSBoYXNoKS5cbiAgICAgIC8vIE90aGVyd2lzZSBpZiByZXRyaWV2aW5nIGRhdGEgYnkgcHJvcGVydHkgbmFtZSAobGlrZSBgZGF0YTogW3thYTogMTIzLCBiYjogNzY1fSwgLi4uXWApLFxuICAgICAgLy8gICB1c2UgPHByb3BlcnR5LCB0eXBlLCBvcmRpbmFsTWV0YT4gaW4gaGFzaC5cblxuICAgICAgaWYgKHdpbGxSZXRyaWV2ZURhdGFCeU5hbWUgJiYgcHJvcGVydHkgIT0gbnVsbCAvLyBGb3IgZGF0YSBzdGFjaywgd2UgaGF2ZSBtYWtlIHN1cmUgZWFjaCBzZXJpZXMgaGFzIGl0cyBvd24gZGltIG9uIHRoaXMgc3RvcmUuXG4gICAgICAvLyBTbyB3ZSBkbyBub3QgYWRkIHByb3BlcnR5IHRvIGhhc2ggdG8gbWFrZSBzdXJlIHRoZXkgY2FuIHNoYXJlIHRoaXMgc3RvcmUuXG4gICAgICAmJiAoIXNlcmllc0RpbURlZiB8fCAhc2VyaWVzRGltRGVmLmlzQ2FsY3VsYXRpb25Db29yZCkpIHtcbiAgICAgICAgZGltSGFzaCArPSBtYWtlSGFzaFN0cmljdCAvLyBVc2UgZXNjYXBlIGNoYXJhY3RlciAnYCcgaW4gY2FzZSB0aGF0IHByb3BlcnR5IG5hbWUgY29udGFpbnMgJyQnLlxuICAgICAgICA/IHByb3BlcnR5LnJlcGxhY2UoL1xcYC9nLCAnYDEnKS5yZXBsYWNlKC9cXCQvZywgJ2AyJykgLy8gRm9yIGJldHRlciBwZXJmb3JtYW5jZSwgd2hlbiB0aGVyZSBhcmUgbGFyZ2UgZGltZW5zaW9ucywgdG9sZXJhbnQgdGhpcyBkZWZlY3RzIHRoYXQgaGFyZGx5IG1lZXQuXG4gICAgICAgIDogcHJvcGVydHk7XG4gICAgICB9XG5cbiAgICAgIGRpbUhhc2ggKz0gJyQnO1xuICAgICAgZGltSGFzaCArPSBkaW1UeXBlU2hvcnRbdHlwZV0gfHwgJ2YnO1xuXG4gICAgICBpZiAob3JkaW5hbE1ldGEpIHtcbiAgICAgICAgZGltSGFzaCArPSBvcmRpbmFsTWV0YS51aWQ7XG4gICAgICB9XG5cbiAgICAgIGRpbUhhc2ggKz0gJyQnO1xuICAgIH0gLy8gU291cmNlIGZyb20gZW5kcG9pbnQodXN1YWxseSBzZXJpZXMpIHdpbGwgYmUgcmVhZCBkaWZmZXJlbnRseVxuICAgIC8vIHdoZW4gc2VyaWVzTGF5b3V0Qnkgb3Igc3RhcnRJbmRleCh3aGljaCBpcyBhZmZlY3RlZCBieSBzb3VyY2VIZWFkZXIpIGFyZSBkaWZmZXJlbnQuXG4gICAgLy8gU28gd2UgdXNlIHRoaXMgdGhyZWUgcHJvcHMgYXMga2V5LlxuXG5cbiAgICB2YXIgc291cmNlID0gdGhpcy5zb3VyY2U7XG4gICAgdmFyIGhhc2ggPSBbc291cmNlLnNlcmllc0xheW91dEJ5LCBzb3VyY2Uuc3RhcnRJbmRleCwgZGltSGFzaF0uam9pbignJCQnKTtcbiAgICByZXR1cm4ge1xuICAgICAgZGltZW5zaW9uczogZGltcyxcbiAgICAgIGhhc2g6IGhhc2hcbiAgICB9O1xuICB9O1xuXG4gIFNlcmllc0RhdGFTY2hlbWEucHJvdG90eXBlLm1ha2VPdXRwdXREaW1lbnNpb25OYW1lcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmVzdWx0ID0gW107XG5cbiAgICBmb3IgKHZhciBmdWxsRGltSWR4ID0gMCwgc2VyaWVzRGltSWR4ID0gMDsgZnVsbERpbUlkeCA8IHRoaXMuX2Z1bGxEaW1Db3VudDsgZnVsbERpbUlkeCsrKSB7XG4gICAgICB2YXIgbmFtZV8xID0gdm9pZCAwO1xuICAgICAgdmFyIHNlcmllc0RpbURlZiA9IHRoaXMuZGltZW5zaW9uc1tzZXJpZXNEaW1JZHhdOyAvLyBUaGUgbGlzdCBoYXMgYmVlbiBzb3J0ZWQgYnkgYHN0b3JlRGltSW5kZXhgIGFzYy5cblxuICAgICAgaWYgKHNlcmllc0RpbURlZiAmJiBzZXJpZXNEaW1EZWYuc3RvcmVEaW1JbmRleCA9PT0gZnVsbERpbUlkeCkge1xuICAgICAgICBpZiAoIXNlcmllc0RpbURlZi5pc0NhbGN1bGF0aW9uQ29vcmQpIHtcbiAgICAgICAgICBuYW1lXzEgPSBzZXJpZXNEaW1EZWYubmFtZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlcmllc0RpbUlkeCsrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHNvdXJjZURpbURlZiA9IHRoaXMuZ2V0U291cmNlRGltZW5zaW9uKGZ1bGxEaW1JZHgpO1xuXG4gICAgICAgIGlmIChzb3VyY2VEaW1EZWYpIHtcbiAgICAgICAgICBuYW1lXzEgPSBzb3VyY2VEaW1EZWYubmFtZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXN1bHQucHVzaChuYW1lXzEpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgU2VyaWVzRGF0YVNjaGVtYS5wcm90b3R5cGUuYXBwZW5kQ2FsY3VsYXRpb25EaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltRGVmKSB7XG4gICAgdGhpcy5kaW1lbnNpb25zLnB1c2goZGltRGVmKTtcbiAgICBkaW1EZWYuaXNDYWxjdWxhdGlvbkNvb3JkID0gdHJ1ZTtcbiAgICB0aGlzLl9mdWxsRGltQ291bnQrKzsgLy8gSWYgYXBwZW5kIGRpbWVuc2lvbiBvbiBhIGRhdGEgc3RvcmUsIGNvbnNpZGVyIHRoZSBzdG9yZVxuICAgIC8vIG1pZ2h0IGJlIHNoYXJlZCBieSBkaWZmZXJlbnQgc2VyaWVzLCBzZXJpZXMgZGltZW5zaW9ucyBub3RcbiAgICAvLyByZWFsbHkgbWFwIHRvIHN0b3JlIGRpbWVuc2lvbnMuXG5cbiAgICB0aGlzLl91cGRhdGVEaW1PbWl0dGVkKHRydWUpO1xuICB9O1xuXG4gIHJldHVybiBTZXJpZXNEYXRhU2NoZW1hO1xufSgpO1xuXG5leHBvcnQgeyBTZXJpZXNEYXRhU2NoZW1hIH07XG5leHBvcnQgZnVuY3Rpb24gaXNTZXJpZXNEYXRhU2NoZW1hKHNjaGVtYSkge1xuICByZXR1cm4gc2NoZW1hIGluc3RhbmNlb2YgU2VyaWVzRGF0YVNjaGVtYTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEaW1OYW1lTWFwKGRpbXNEZWYpIHtcbiAgdmFyIGRhdGFEaW1OYW1lTWFwID0gY3JlYXRlSGFzaE1hcCgpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgKGRpbXNEZWYgfHwgW10pLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGRpbURlZkl0ZW1SYXcgPSBkaW1zRGVmW2ldO1xuICAgIHZhciB1c2VyRGltTmFtZSA9IGlzT2JqZWN0KGRpbURlZkl0ZW1SYXcpID8gZGltRGVmSXRlbVJhdy5uYW1lIDogZGltRGVmSXRlbVJhdztcblxuICAgIGlmICh1c2VyRGltTmFtZSAhPSBudWxsICYmIGRhdGFEaW1OYW1lTWFwLmdldCh1c2VyRGltTmFtZSkgPT0gbnVsbCkge1xuICAgICAgZGF0YURpbU5hbWVNYXAuc2V0KHVzZXJEaW1OYW1lLCBpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZGF0YURpbU5hbWVNYXA7XG59XG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlU291cmNlRGltTmFtZU1hcChzb3VyY2UpIHtcbiAgdmFyIGlubmVyU291cmNlID0gaW5uZXIoc291cmNlKTtcbiAgcmV0dXJuIGlubmVyU291cmNlLmRpbU5hbWVNYXAgfHwgKGlubmVyU291cmNlLmRpbU5hbWVNYXAgPSBjcmVhdGVEaW1OYW1lTWFwKHNvdXJjZS5kaW1lbnNpb25zRGVmaW5lKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gc2hvdWxkT21pdFVudXNlZERpbWVuc2lvbnMoZGltQ291bnQpIHtcbiAgcmV0dXJuIGRpbUNvdW50ID4gMzA7XG59IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5cbi8qIGdsb2JhbCBJbnQzMkFycmF5ICovXG5pbXBvcnQgKiBhcyB6clV0aWwgZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbmltcG9ydCBNb2RlbCBmcm9tICcuLi9tb2RlbC9Nb2RlbC5qcyc7XG5pbXBvcnQgRGF0YURpZmZlciBmcm9tICcuL0RhdGFEaWZmZXIuanMnO1xuaW1wb3J0IHsgRGVmYXVsdERhdGFQcm92aWRlciB9IGZyb20gJy4vaGVscGVyL2RhdGFQcm92aWRlci5qcyc7XG5pbXBvcnQgeyBzdW1tYXJpemVEaW1lbnNpb25zIH0gZnJvbSAnLi9oZWxwZXIvZGltZW5zaW9uSGVscGVyLmpzJztcbmltcG9ydCBTZXJpZXNEaW1lbnNpb25EZWZpbmUgZnJvbSAnLi9TZXJpZXNEaW1lbnNpb25EZWZpbmUuanMnO1xuaW1wb3J0IHsgU09VUkNFX0ZPUk1BVF9UWVBFRF9BUlJBWSwgU09VUkNFX0ZPUk1BVF9PUklHSU5BTCB9IGZyb20gJy4uL3V0aWwvdHlwZXMuanMnO1xuaW1wb3J0IHsgY29udmVydE9wdGlvbklkTmFtZSwgaXNEYXRhSXRlbU9wdGlvbiB9IGZyb20gJy4uL3V0aWwvbW9kZWwuanMnO1xuaW1wb3J0IHsgc2V0Q29tbW9uRUNEYXRhIH0gZnJvbSAnLi4vdXRpbC9pbm5lclN0b3JlLmpzJztcbmltcG9ydCB7IGlzU291cmNlSW5zdGFuY2UgfSBmcm9tICcuL1NvdXJjZS5qcyc7XG5pbXBvcnQgRGF0YVN0b3JlIGZyb20gJy4vRGF0YVN0b3JlLmpzJztcbmltcG9ydCB7IGlzU2VyaWVzRGF0YVNjaGVtYSB9IGZyb20gJy4vaGVscGVyL1Nlcmllc0RhdGFTY2hlbWEuanMnO1xudmFyIGlzT2JqZWN0ID0genJVdGlsLmlzT2JqZWN0O1xudmFyIG1hcCA9IHpyVXRpbC5tYXA7XG52YXIgQ3RvckludDMyQXJyYXkgPSB0eXBlb2YgSW50MzJBcnJheSA9PT0gJ3VuZGVmaW5lZCcgPyBBcnJheSA6IEludDMyQXJyYXk7IC8vIFVzZSBwcmVmaXggdG8gYXZvaWQgaW5kZXggdG8gYmUgdGhlIHNhbWUgYXMgb3RoZXJJZExpc3RbaWR4XSxcbi8vIHdoaWNoIHdpbGwgY2F1c2Ugd2VpcmQgdXBkYXRlIGFuaW1hdGlvbi5cblxudmFyIElEX1BSRUZJWCA9ICdlXFwwXFwwJztcbnZhciBJTkRFWF9OT1RfRk9VTkQgPSAtMTsgLy8gdHlwZSBTZXJpZXNEaW1lbnNpb25JbmRleCA9IERpbWVuc2lvbkluZGV4O1xuXG52YXIgVFJBTlNGRVJBQkxFX1BST1BFUlRJRVMgPSBbJ2hhc0l0ZW1PcHRpb24nLCAnX25hbWVMaXN0JywgJ19pZExpc3QnLCAnX2ludmVydGVkSW5kaWNlc01hcCcsICdfZGltU3VtbWFyeScsICd1c2VyT3V0cHV0JywgJ19yYXdEYXRhJywgJ19kaW1WYWx1ZUdldHRlcicsICdfbmFtZURpbUlkeCcsICdfaWREaW1JZHgnLCAnX25hbWVSZXBlYXRDb3VudCddO1xudmFyIENMT05FX1BST1BFUlRJRVMgPSBbJ19hcHByb3hpbWF0ZUV4dGVudCddOyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gSW50ZXJuYWwgbWV0aG9kIGRlY2xhcmF0aW9uczpcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbnZhciBwcmVwYXJlSW52ZXJ0ZWRJbmRleDtcbnZhciBnZXRJZDtcbnZhciBnZXRJZE5hbWVGcm9tU3RvcmU7XG52YXIgbm9ybWFsaXplRGltZW5zaW9ucztcbnZhciB0cmFuc2ZlclByb3BlcnRpZXM7XG52YXIgY2xvbmVMaXN0Rm9yTWFwQW5kU2FtcGxlO1xudmFyIG1ha2VJZEZyb21OYW1lO1xuXG52YXIgU2VyaWVzRGF0YSA9XG4vKiogQGNsYXNzICovXG5mdW5jdGlvbiAoKSB7XG4gIC8qKlxyXG4gICAqIEBwYXJhbSBkaW1lbnNpb25zSW5wdXQuZGltZW5zaW9uc1xyXG4gICAqICAgICAgICBGb3IgZXhhbXBsZSwgWydzb21lRGltTmFtZScsIHtuYW1lOiAnc29tZURpbU5hbWUnLCB0eXBlOiAnc29tZURpbVR5cGUnfSwgLi4uXS5cclxuICAgKiAgICAgICAgRGltZW5zaW9ucyBzaG91bGQgYmUgY29uY3JldGUgbmFtZXMgbGlrZSB4LCB5LCB6LCBsbmcsIGxhdCwgYW5nbGUsIHJhZGl1c1xyXG4gICAqL1xuICBmdW5jdGlvbiBTZXJpZXNEYXRhKGRpbWVuc2lvbnNJbnB1dCwgaG9zdE1vZGVsKSB7XG4gICAgdGhpcy50eXBlID0gJ2xpc3QnO1xuICAgIHRoaXMuX2RpbU9taXR0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9uYW1lTGlzdCA9IFtdO1xuICAgIHRoaXMuX2lkTGlzdCA9IFtdOyAvLyBNb2RlbHMgb2YgZGF0YSBvcHRpb24gaXMgc3RvcmVkIHNwYXJzZSBmb3Igb3B0aW1pemluZyBtZW1vcnkgY29zdFxuICAgIC8vIE5ldmVyIHVzZWQgeWV0IChub3QgdXNlZCB5ZXQpLlxuICAgIC8vIHByaXZhdGUgX29wdGlvbk1vZGVsczogTW9kZWxbXSA9IFtdO1xuICAgIC8vIEdsb2JhbCB2aXN1YWwgcHJvcGVydGllcyBhZnRlciB2aXN1YWwgY29kaW5nXG5cbiAgICB0aGlzLl92aXN1YWwgPSB7fTsgLy8gR2xvYmFsIGxheW91dCBwcm9wZXJ0aWVzLlxuXG4gICAgdGhpcy5fbGF5b3V0ID0ge307IC8vIEl0ZW0gdmlzdWFsIHByb3BlcnRpZXMgYWZ0ZXIgdmlzdWFsIGNvZGluZ1xuXG4gICAgdGhpcy5faXRlbVZpc3VhbHMgPSBbXTsgLy8gSXRlbSBsYXlvdXQgcHJvcGVydGllcyBhZnRlciBsYXlvdXRcblxuICAgIHRoaXMuX2l0ZW1MYXlvdXRzID0gW107IC8vIEdyYXBoaWMgZWxlbWVudHNcblxuICAgIHRoaXMuX2dyYXBoaWNFbHMgPSBbXTsgLy8ga2V5OiBkaW0sIHZhbHVlOiBleHRlbnRcblxuICAgIHRoaXMuX2FwcHJveGltYXRlRXh0ZW50ID0ge307XG4gICAgdGhpcy5fY2FsY3VsYXRpb25JbmZvID0ge307IC8vIEhhdmluZyBkZXRlY3RlZCB0aGF0IHRoZXJlIGlzIGRhdGEgaXRlbSBpcyBub24gcHJpbWl0aXZlIHR5cGVcbiAgICAvLyAoaW4gdHlwZSBgT3B0aW9uRGF0YUl0ZW1PYmplY3RgKS5cbiAgICAvLyBMaWtlIGBkYXRhOiBbIHsgdmFsdWU6IHh4LCBpdGVtU3R5bGU6IHsuLi59IH0sIC4uLl1gXG4gICAgLy8gQXQgcHJlc2VudCBpdCBvbmx5IGhhcHBlbiBpbiBgU09VUkNFX0ZPUk1BVF9PUklHSU5BTGAuXG5cbiAgICB0aGlzLmhhc0l0ZW1PcHRpb24gPSBmYWxzZTsgLy8gTWV0aG9kcyB0aGF0IGNyZWF0ZSBhIG5ldyBsaXN0IGJhc2VkIG9uIHRoaXMgbGlzdCBzaG91bGQgYmUgbGlzdGVkIGhlcmUuXG4gICAgLy8gTm90aWNlIHRoYXQgdGhvc2UgbWV0aG9kIHNob3VsZCBgUkVUVVJOYCB0aGUgbmV3IGxpc3QuXG5cbiAgICB0aGlzLlRSQU5TRkVSQUJMRV9NRVRIT0RTID0gWydjbG9uZVNoYWxsb3cnLCAnZG93blNhbXBsZScsICdsdHRiRG93blNhbXBsZScsICdtYXAnXTsgLy8gTWV0aG9kcyB0aGF0IGNoYW5nZSBpbmRpY2VzIG9mIHRoaXMgbGlzdCBzaG91bGQgYmUgbGlzdGVkIGhlcmUuXG5cbiAgICB0aGlzLkNIQU5HQUJMRV9NRVRIT0RTID0gWydmaWx0ZXJTZWxmJywgJ3NlbGVjdFJhbmdlJ107XG4gICAgdGhpcy5ET1dOU0FNUExFX01FVEhPRFMgPSBbJ2Rvd25TYW1wbGUnLCAnbHR0YkRvd25TYW1wbGUnXTtcbiAgICB2YXIgZGltZW5zaW9ucztcbiAgICB2YXIgYXNzaWduU3RvcmVEaW1JZHggPSBmYWxzZTtcblxuICAgIGlmIChpc1Nlcmllc0RhdGFTY2hlbWEoZGltZW5zaW9uc0lucHV0KSkge1xuICAgICAgZGltZW5zaW9ucyA9IGRpbWVuc2lvbnNJbnB1dC5kaW1lbnNpb25zO1xuICAgICAgdGhpcy5fZGltT21pdHRlZCA9IGRpbWVuc2lvbnNJbnB1dC5pc0RpbWVuc2lvbk9taXR0ZWQoKTtcbiAgICAgIHRoaXMuX3NjaGVtYSA9IGRpbWVuc2lvbnNJbnB1dDtcbiAgICB9IGVsc2Uge1xuICAgICAgYXNzaWduU3RvcmVEaW1JZHggPSB0cnVlO1xuICAgICAgZGltZW5zaW9ucyA9IGRpbWVuc2lvbnNJbnB1dDtcbiAgICB9XG5cbiAgICBkaW1lbnNpb25zID0gZGltZW5zaW9ucyB8fCBbJ3gnLCAneSddO1xuICAgIHZhciBkaW1lbnNpb25JbmZvcyA9IHt9O1xuICAgIHZhciBkaW1lbnNpb25OYW1lcyA9IFtdO1xuICAgIHZhciBpbnZlcnRlZEluZGljZXNNYXAgPSB7fTtcbiAgICB2YXIgbmVlZHNIYXNPd24gPSBmYWxzZTtcbiAgICB2YXIgZW1wdHlPYmogPSB7fTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gVXNlIHRoZSBvcmlnaW5hbCBkaW1lbnNpb25zW2ldLCB3aGVyZSBvdGhlciBmbGFnIHByb3BzIG1heSBleGlzdHMuXG4gICAgICB2YXIgZGltSW5mb0lucHV0ID0gZGltZW5zaW9uc1tpXTtcbiAgICAgIHZhciBkaW1lbnNpb25JbmZvID0genJVdGlsLmlzU3RyaW5nKGRpbUluZm9JbnB1dCkgPyBuZXcgU2VyaWVzRGltZW5zaW9uRGVmaW5lKHtcbiAgICAgICAgbmFtZTogZGltSW5mb0lucHV0XG4gICAgICB9KSA6ICEoZGltSW5mb0lucHV0IGluc3RhbmNlb2YgU2VyaWVzRGltZW5zaW9uRGVmaW5lKSA/IG5ldyBTZXJpZXNEaW1lbnNpb25EZWZpbmUoZGltSW5mb0lucHV0KSA6IGRpbUluZm9JbnB1dDtcbiAgICAgIHZhciBkaW1lbnNpb25OYW1lID0gZGltZW5zaW9uSW5mby5uYW1lO1xuICAgICAgZGltZW5zaW9uSW5mby50eXBlID0gZGltZW5zaW9uSW5mby50eXBlIHx8ICdmbG9hdCc7XG5cbiAgICAgIGlmICghZGltZW5zaW9uSW5mby5jb29yZERpbSkge1xuICAgICAgICBkaW1lbnNpb25JbmZvLmNvb3JkRGltID0gZGltZW5zaW9uTmFtZTtcbiAgICAgICAgZGltZW5zaW9uSW5mby5jb29yZERpbUluZGV4ID0gMDtcbiAgICAgIH1cblxuICAgICAgdmFyIG90aGVyRGltcyA9IGRpbWVuc2lvbkluZm8ub3RoZXJEaW1zID0gZGltZW5zaW9uSW5mby5vdGhlckRpbXMgfHwge307XG4gICAgICBkaW1lbnNpb25OYW1lcy5wdXNoKGRpbWVuc2lvbk5hbWUpO1xuICAgICAgZGltZW5zaW9uSW5mb3NbZGltZW5zaW9uTmFtZV0gPSBkaW1lbnNpb25JbmZvO1xuXG4gICAgICBpZiAoZW1wdHlPYmpbZGltZW5zaW9uTmFtZV0gIT0gbnVsbCkge1xuICAgICAgICBuZWVkc0hhc093biA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChkaW1lbnNpb25JbmZvLmNyZWF0ZUludmVydGVkSW5kaWNlcykge1xuICAgICAgICBpbnZlcnRlZEluZGljZXNNYXBbZGltZW5zaW9uTmFtZV0gPSBbXTtcbiAgICAgIH1cblxuICAgICAgaWYgKG90aGVyRGltcy5pdGVtTmFtZSA9PT0gMCkge1xuICAgICAgICB0aGlzLl9uYW1lRGltSWR4ID0gaTtcbiAgICAgIH1cblxuICAgICAgaWYgKG90aGVyRGltcy5pdGVtSWQgPT09IDApIHtcbiAgICAgICAgdGhpcy5faWREaW1JZHggPSBpO1xuICAgICAgfVxuXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB6clV0aWwuYXNzZXJ0KGFzc2lnblN0b3JlRGltSWR4IHx8IGRpbWVuc2lvbkluZm8uc3RvcmVEaW1JbmRleCA+PSAwKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGFzc2lnblN0b3JlRGltSWR4KSB7XG4gICAgICAgIGRpbWVuc2lvbkluZm8uc3RvcmVEaW1JbmRleCA9IGk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5kaW1lbnNpb25zID0gZGltZW5zaW9uTmFtZXM7XG4gICAgdGhpcy5fZGltSW5mb3MgPSBkaW1lbnNpb25JbmZvcztcblxuICAgIHRoaXMuX2luaXRHZXREaW1lbnNpb25JbmZvKG5lZWRzSGFzT3duKTtcblxuICAgIHRoaXMuaG9zdE1vZGVsID0gaG9zdE1vZGVsO1xuICAgIHRoaXMuX2ludmVydGVkSW5kaWNlc01hcCA9IGludmVydGVkSW5kaWNlc01hcDtcblxuICAgIGlmICh0aGlzLl9kaW1PbWl0dGVkKSB7XG4gICAgICB2YXIgZGltSWR4VG9OYW1lXzEgPSB0aGlzLl9kaW1JZHhUb05hbWUgPSB6clV0aWwuY3JlYXRlSGFzaE1hcCgpO1xuICAgICAgenJVdGlsLmVhY2goZGltZW5zaW9uTmFtZXMsIGZ1bmN0aW9uIChkaW1OYW1lKSB7XG4gICAgICAgIGRpbUlkeFRvTmFtZV8xLnNldChkaW1lbnNpb25JbmZvc1tkaW1OYW1lXS5zdG9yZURpbUluZGV4LCBkaW1OYW1lKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICAvKipcclxuICAgKlxyXG4gICAqIEdldCBjb25jcmV0ZSBkaW1lbnNpb24gbmFtZSBieSBkaW1lbnNpb24gbmFtZSBvciBkaW1lbnNpb24gaW5kZXguXHJcbiAgICogSWYgaW5wdXQgYSBkaW1lbnNpb24gbmFtZSwgZG8gbm90IHZhbGlkYXRlIHdoZXRoZXIgdGhlIGRpbWVuc2lvbiBuYW1lIGV4aXRzLlxyXG4gICAqXHJcbiAgICogQGNhdXRpb25cclxuICAgKiBAcGFyYW0gZGltIE11c3QgbWFrZSBzdXJlIHRoZSBkaW1lbnNpb24gaXMgYFNlcmllc0RpbWVuc2lvbkxvb3NlYC5cclxuICAgKiBCZWNhdXNlIG9ubHkgdGhvc2UgZGltZW5zaW9ucyB3aWxsIGhhdmUgYXV0by1nZW5lcmF0ZWQgZGltZW5zaW9uIG5hbWVzIGlmIG5vdFxyXG4gICAqIGhhdmUgYSB1c2VyLXNwZWNpZmllZCBuYW1lLCBhbmQgb3RoZXIgZGltZW5zaW9ucyB3aWxsIGdldCBhIHJldHVybiBvZiBudWxsL3VuZGVmaW5lZC5cclxuICAgKlxyXG4gICAqIEBub3RpY2UgQmVjYXVzZSBvZiB0aGlzIHJlYXNvbiwgc2hvdWxkIGJldHRlciB1c2UgYGdldERpbWVuc2lvbkluZGV4YCBpbnN0ZWFkLCBmb3IgZXhhbXBsZXM6XHJcbiAgICogYGBganNcclxuICAgKiBjb25zdCB2YWwgPSBkYXRhLmdldFN0b3JlKCkuZ2V0KGRhdGEuZ2V0RGltZW5zaW9uSW5kZXgoZGltKSwgZGF0YUlkeCk7XHJcbiAgICogYGBgXHJcbiAgICpcclxuICAgKiBAcmV0dXJuIENvbmNyZXRlIGRpbSBuYW1lLlxyXG4gICAqL1xuXG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUuZ2V0RGltZW5zaW9uID0gZnVuY3Rpb24gKGRpbSkge1xuICAgIHZhciBkaW1JZHggPSB0aGlzLl9yZWNvZ25pemVEaW1JbmRleChkaW0pO1xuXG4gICAgaWYgKGRpbUlkeCA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gZGltO1xuICAgIH1cblxuICAgIGRpbUlkeCA9IGRpbTtcblxuICAgIGlmICghdGhpcy5fZGltT21pdHRlZCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGltZW5zaW9uc1tkaW1JZHhdO1xuICAgIH0gLy8gUmV0cmlldmUgZnJvbSBzZXJpZXMgZGltZW5zaW9uIGRlZmluaXRpb24gYmVjYXVzZSBpdCBwcm9iYWJseSBjb250YWluc1xuICAgIC8vIGdlbmVyYXRlZCBkaW1lbnNpb24gbmFtZSAobGlrZSAneCcsICd5JykuXG5cblxuICAgIHZhciBkaW1OYW1lID0gdGhpcy5fZGltSWR4VG9OYW1lLmdldChkaW1JZHgpO1xuXG4gICAgaWYgKGRpbU5hbWUgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGRpbU5hbWU7XG4gICAgfVxuXG4gICAgdmFyIHNvdXJjZURpbURlZiA9IHRoaXMuX3NjaGVtYS5nZXRTb3VyY2VEaW1lbnNpb24oZGltSWR4KTtcblxuICAgIGlmIChzb3VyY2VEaW1EZWYpIHtcbiAgICAgIHJldHVybiBzb3VyY2VEaW1EZWYubmFtZTtcbiAgICB9XG4gIH07XG4gIC8qKlxyXG4gICAqIEdldCBkaW1lbnNpb24gaW5kZXggaW4gZGF0YSBzdG9yZS4gUmV0dXJuIC0xIGlmIG5vdCBmb3VuZC5cclxuICAgKiBDYW4gYmUgdXNlZCB0byBpbmRleCB2YWx1ZSBmcm9tIGdldFJhd1ZhbHVlLlxyXG4gICAqL1xuXG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUuZ2V0RGltZW5zaW9uSW5kZXggPSBmdW5jdGlvbiAoZGltKSB7XG4gICAgdmFyIGRpbUlkeCA9IHRoaXMuX3JlY29nbml6ZURpbUluZGV4KGRpbSk7XG5cbiAgICBpZiAoZGltSWR4ICE9IG51bGwpIHtcbiAgICAgIHJldHVybiBkaW1JZHg7XG4gICAgfVxuXG4gICAgaWYgKGRpbSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuXG4gICAgdmFyIGRpbUluZm8gPSB0aGlzLl9nZXREaW1JbmZvKGRpbSk7XG5cbiAgICByZXR1cm4gZGltSW5mbyA/IGRpbUluZm8uc3RvcmVEaW1JbmRleCA6IHRoaXMuX2RpbU9taXR0ZWQgPyB0aGlzLl9zY2hlbWEuZ2V0U291cmNlRGltZW5zaW9uSW5kZXgoZGltKSA6IC0xO1xuICB9O1xuICAvKipcclxuICAgKiBUaGUgbWVhbmluZ3Mgb2YgdGhlIGlucHV0IHBhcmFtZXRlciBgZGltYDpcclxuICAgKlxyXG4gICAqICsgSWYgZGltIGlzIGEgbnVtYmVyIChlLmcuLCBgMWApLCBpdCBtZWFucyB0aGUgaW5kZXggb2YgdGhlIGRpbWVuc2lvbi5cclxuICAgKiAgIEZvciBleGFtcGxlLCBgZ2V0RGltZW5zaW9uKDApYCB3aWxsIHJldHVybiAneCcgb3IgJ2xuZycgb3IgJ3JhZGl1cycuXHJcbiAgICogKyBJZiBkaW0gaXMgYSBudW1iZXItbGlrZSBzdHJpbmcgKGUuZy4sIGBcIjFcImApOlxyXG4gICAqICAgICArIElmIHRoZXJlIGlzIHRoZSBzYW1lIGNvbmNyZXRlIGRpbSBuYW1lIGRlZmluZWQgaW4gYHNlcmllcy5kaW1lbnNpb25zYCBvciBgZGF0YXNldC5kaW1lbnNpb25zYCxcclxuICAgKiAgICAgICAgaXQgbWVhbnMgdGhhdCBjb25jcmV0ZSBuYW1lLlxyXG4gICAqICAgICArIElmIG5vdCwgaXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSBudW1iZXIsIHdoaWNoIG1lYW5zIHRoZSBpbmRleCBvZiB0aGUgZGltZW5zaW9uLlxyXG4gICAqICAgICAgICAod2h5PyBiZWNhdXNlIG9mIHRoZSBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LiBXZSBoYXZlIGJlZW4gdG9sZXJhdGluZyBudW1iZXItbGlrZSBzdHJpbmcgaW5cclxuICAgKiAgICAgICAgZGltZW5zaW9uIHNldHRpbmcsIGFsdGhvdWdoIG5vdyBpdCBzZWVtcyB0aGF0IGl0IGlzIG5vdCBhIGdvb2QgaWRlYS4pXHJcbiAgICogICAgIEZvciBleGFtcGxlLCBgdmlzdWFsTWFwW2ldLmRpbWVuc2lvbjogXCIxXCJgIGlzIHRoZSBzYW1lIG1lYW5pbmcgYXMgYHZpc3VhbE1hcFtpXS5kaW1lbnNpb246IDFgLFxyXG4gICAqICAgICBpZiBubyBkaW1lbnNpb24gbmFtZSBpcyBkZWZpbmVkIGFzIGBcIjFcImAuXHJcbiAgICogKyBJZiBkaW0gaXMgYSBub3QtbnVtYmVyLWxpa2Ugc3RyaW5nLCBpdCBtZWFucyB0aGUgY29uY3JldGUgZGltIG5hbWUuXHJcbiAgICogICBGb3IgZXhhbXBsZSwgaXQgY2FuIGJlIGJlIGRlZmF1bHQgbmFtZSBgXCJ4XCJgLCBgXCJ5XCJgLCBgXCJ6XCJgLCBgXCJsbmdcImAsIGBcImxhdFwiYCwgYFwiYW5nbGVcImAsIGBcInJhZGl1c1wiYCxcclxuICAgKiAgIG9yIGN1c3RvbWl6ZWQgaW4gYGRpbWVuc2lvbnNgIHByb3BlcnR5IG9mIG9wdGlvbiBsaWtlIGBcImFnZVwiYC5cclxuICAgKlxyXG4gICAqIEByZXR1cm4gcmVjb2duaXplZCBgRGltZW5zaW9uSW5kZXhgLiBPdGhlcndpc2UgcmV0dXJuIG51bGwvdW5kZWZpbmVkIChtZWFucyB0aGF0IGRpbSBpcyBgRGltZW5zaW9uTmFtZWApLlxyXG4gICAqL1xuXG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUuX3JlY29nbml6ZURpbUluZGV4ID0gZnVuY3Rpb24gKGRpbSkge1xuICAgIGlmICh6clV0aWwuaXNOdW1iZXIoZGltKSAvLyBJZiBiZWluZyBhIG51bWJlci1saWtlIHN0cmluZyBidXQgbm90IGJlaW5nIGRlZmluZWQgYXMgYSBkaW1lbnNpb24gbmFtZS5cbiAgICB8fCBkaW0gIT0gbnVsbCAmJiAhaXNOYU4oZGltKSAmJiAhdGhpcy5fZ2V0RGltSW5mbyhkaW0pICYmICghdGhpcy5fZGltT21pdHRlZCB8fCB0aGlzLl9zY2hlbWEuZ2V0U291cmNlRGltZW5zaW9uSW5kZXgoZGltKSA8IDApKSB7XG4gICAgICByZXR1cm4gK2RpbTtcbiAgICB9XG4gIH07XG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUuX2dldFN0b3JlRGltSW5kZXggPSBmdW5jdGlvbiAoZGltKSB7XG4gICAgdmFyIGRpbUlkeCA9IHRoaXMuZ2V0RGltZW5zaW9uSW5kZXgoZGltKTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAoZGltSWR4ID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGRpbWVuc2lvbiAnICsgZGltKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGltSWR4O1xuICB9O1xuICAvKipcclxuICAgKiBHZXQgdHlwZSBhbmQgY2FsY3VsYXRpb24gaW5mbyBvZiBwYXJ0aWN1bGFyIGRpbWVuc2lvblxyXG4gICAqIEBwYXJhbSBkaW1cclxuICAgKiAgICAgICAgRGltZW5zaW9uIGNhbiBiZSBjb25jcmV0ZSBuYW1lcyBsaWtlIHgsIHksIHosIGxuZywgbGF0LCBhbmdsZSwgcmFkaXVzXHJcbiAgICogICAgICAgIE9yIGEgb3JkaW5hbCBudW1iZXIuIEZvciBleGFtcGxlIGdldERpbWVuc2lvbkluZm8oMCkgd2lsbCByZXR1cm4gJ3gnIG9yICdsbmcnIG9yICdyYWRpdXMnXHJcbiAgICovXG5cblxuICBTZXJpZXNEYXRhLnByb3RvdHlwZS5nZXREaW1lbnNpb25JbmZvID0gZnVuY3Rpb24gKGRpbSkge1xuICAgIC8vIERvIG5vdCBjbG9uZSwgYmVjYXVzZSB0aGVyZSBtYXkgYmUgY2F0ZWdvcmllcyBpbiBkaW1JbmZvLlxuICAgIHJldHVybiB0aGlzLl9nZXREaW1JbmZvKHRoaXMuZ2V0RGltZW5zaW9uKGRpbSkpO1xuICB9O1xuXG4gIFNlcmllc0RhdGEucHJvdG90eXBlLl9pbml0R2V0RGltZW5zaW9uSW5mbyA9IGZ1bmN0aW9uIChuZWVkc0hhc093bikge1xuICAgIHZhciBkaW1lbnNpb25JbmZvcyA9IHRoaXMuX2RpbUluZm9zO1xuICAgIHRoaXMuX2dldERpbUluZm8gPSBuZWVkc0hhc093biA/IGZ1bmN0aW9uIChkaW1OYW1lKSB7XG4gICAgICByZXR1cm4gZGltZW5zaW9uSW5mb3MuaGFzT3duUHJvcGVydHkoZGltTmFtZSkgPyBkaW1lbnNpb25JbmZvc1tkaW1OYW1lXSA6IHVuZGVmaW5lZDtcbiAgICB9IDogZnVuY3Rpb24gKGRpbU5hbWUpIHtcbiAgICAgIHJldHVybiBkaW1lbnNpb25JbmZvc1tkaW1OYW1lXTtcbiAgICB9O1xuICB9O1xuICAvKipcclxuICAgKiBjb25jcmV0ZSBkaW1lbnNpb24gbmFtZSBsaXN0IG9uIGNvb3JkLlxyXG4gICAqL1xuXG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUuZ2V0RGltZW5zaW9uc09uQ29vcmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RpbVN1bW1hcnkuZGF0YURpbXNPbkNvb3JkLnNsaWNlKCk7XG4gIH07XG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUubWFwRGltZW5zaW9uID0gZnVuY3Rpb24gKGNvb3JkRGltLCBpZHgpIHtcbiAgICB2YXIgZGltZW5zaW9uc1N1bW1hcnkgPSB0aGlzLl9kaW1TdW1tYXJ5O1xuXG4gICAgaWYgKGlkeCA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gZGltZW5zaW9uc1N1bW1hcnkuZW5jb2RlRmlyc3REaW1Ob3RFeHRyYVtjb29yZERpbV07XG4gICAgfVxuXG4gICAgdmFyIGRpbXMgPSBkaW1lbnNpb25zU3VtbWFyeS5lbmNvZGVbY29vcmREaW1dO1xuICAgIHJldHVybiBkaW1zID8gZGltc1tpZHhdIDogbnVsbDtcbiAgfTtcblxuICBTZXJpZXNEYXRhLnByb3RvdHlwZS5tYXBEaW1lbnNpb25zQWxsID0gZnVuY3Rpb24gKGNvb3JkRGltKSB7XG4gICAgdmFyIGRpbWVuc2lvbnNTdW1tYXJ5ID0gdGhpcy5fZGltU3VtbWFyeTtcbiAgICB2YXIgZGltcyA9IGRpbWVuc2lvbnNTdW1tYXJ5LmVuY29kZVtjb29yZERpbV07XG4gICAgcmV0dXJuIChkaW1zIHx8IFtdKS5zbGljZSgpO1xuICB9O1xuXG4gIFNlcmllc0RhdGEucHJvdG90eXBlLmdldFN0b3JlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZTtcbiAgfTtcbiAgLyoqXHJcbiAgICogSW5pdGlhbGl6ZSBmcm9tIGRhdGFcclxuICAgKiBAcGFyYW0gZGF0YSBzb3VyY2Ugb3IgZGF0YSBvciBkYXRhIHN0b3JlLlxyXG4gICAqIEBwYXJhbSBuYW1lTGlzdCBUaGUgbmFtZSBvZiBhIGRhdHVtIGlzIHVzZWQgb24gZGF0YSBkaWZmIGFuZFxyXG4gICAqICAgICAgICBkZWZhdWx0IGxhYmVsL3Rvb2x0aXAuXHJcbiAgICogICAgICAgIEEgbmFtZSBjYW4gYmUgc3BlY2lmaWVkIGluIGVuY29kZS5pdGVtTmFtZSxcclxuICAgKiAgICAgICAgb3IgZGF0YUl0ZW0ubmFtZSAob25seSBmb3Igc2VyaWVzIG9wdGlvbiBkYXRhKSxcclxuICAgKiAgICAgICAgb3IgcHJvdmlkZWQgaW4gbmFtZUxpc3QgZnJvbSBvdXRzaWRlLlxyXG4gICAqL1xuXG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUuaW5pdERhdGEgPSBmdW5jdGlvbiAoZGF0YSwgbmFtZUxpc3QsIGRpbVZhbHVlR2V0dGVyKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBzdG9yZTtcblxuICAgIGlmIChkYXRhIGluc3RhbmNlb2YgRGF0YVN0b3JlKSB7XG4gICAgICBzdG9yZSA9IGRhdGE7XG4gICAgfVxuXG4gICAgaWYgKCFzdG9yZSkge1xuICAgICAgdmFyIGRpbWVuc2lvbnMgPSB0aGlzLmRpbWVuc2lvbnM7XG4gICAgICB2YXIgcHJvdmlkZXIgPSBpc1NvdXJjZUluc3RhbmNlKGRhdGEpIHx8IHpyVXRpbC5pc0FycmF5TGlrZShkYXRhKSA/IG5ldyBEZWZhdWx0RGF0YVByb3ZpZGVyKGRhdGEsIGRpbWVuc2lvbnMubGVuZ3RoKSA6IGRhdGE7XG4gICAgICBzdG9yZSA9IG5ldyBEYXRhU3RvcmUoKTtcbiAgICAgIHZhciBkaW1lbnNpb25JbmZvcyA9IG1hcChkaW1lbnNpb25zLCBmdW5jdGlvbiAoZGltTmFtZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6IF90aGlzLl9kaW1JbmZvc1tkaW1OYW1lXS50eXBlLFxuICAgICAgICAgIHByb3BlcnR5OiBkaW1OYW1lXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICAgIHN0b3JlLmluaXREYXRhKHByb3ZpZGVyLCBkaW1lbnNpb25JbmZvcywgZGltVmFsdWVHZXR0ZXIpO1xuICAgIH1cblxuICAgIHRoaXMuX3N0b3JlID0gc3RvcmU7IC8vIFJlc2V0XG5cbiAgICB0aGlzLl9uYW1lTGlzdCA9IChuYW1lTGlzdCB8fCBbXSkuc2xpY2UoKTtcbiAgICB0aGlzLl9pZExpc3QgPSBbXTtcbiAgICB0aGlzLl9uYW1lUmVwZWF0Q291bnQgPSB7fTtcblxuICAgIHRoaXMuX2RvSW5pdCgwLCBzdG9yZS5jb3VudCgpKTsgLy8gQ2FjaGUgc3VtbWFyeSBpbmZvIGZvciBmYXN0IHZpc2l0LiBTZWUgXCJkaW1lbnNpb25IZWxwZXJcIi5cbiAgICAvLyBOZWVkcyB0byBiZSBpbml0aWFsaXplZCBhZnRlciBzdG9yZSBpcyBwcmVwYXJlZC5cblxuXG4gICAgdGhpcy5fZGltU3VtbWFyeSA9IHN1bW1hcml6ZURpbWVuc2lvbnModGhpcywgdGhpcy5fc2NoZW1hKTtcbiAgICB0aGlzLnVzZXJPdXRwdXQgPSB0aGlzLl9kaW1TdW1tYXJ5LnVzZXJPdXRwdXQ7XG4gIH07XG4gIC8qKlxyXG4gICAqIENhdXRpb246IENhbiBiZSBvbmx5IGNhbGxlZCBvbiByYXcgZGF0YSAoYmVmb3JlIGB0aGlzLl9pbmRpY2VzYCBjcmVhdGVkKS5cclxuICAgKi9cblxuXG4gIFNlcmllc0RhdGEucHJvdG90eXBlLmFwcGVuZERhdGEgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgIHZhciByYW5nZSA9IHRoaXMuX3N0b3JlLmFwcGVuZERhdGEoZGF0YSk7XG5cbiAgICB0aGlzLl9kb0luaXQocmFuZ2VbMF0sIHJhbmdlWzFdKTtcbiAgfTtcbiAgLyoqXHJcbiAgICogQ2F1dGlvbjogQ2FuIGJlIG9ubHkgY2FsbGVkIG9uIHJhdyBkYXRhIChiZWZvcmUgYHRoaXMuX2luZGljZXNgIGNyZWF0ZWQpLlxyXG4gICAqIFRoaXMgbWV0aG9kIGRvZXMgbm90IG1vZGlmeSBgcmF3RGF0YWAgKGBkYXRhUHJvdmlkZXJgKSwgYnV0IG9ubHlcclxuICAgKiBhZGQgdmFsdWVzIHRvIHN0b3JlLlxyXG4gICAqXHJcbiAgICogVGhlIGZpbmFsIGNvdW50IHdpbGwgYmUgaW5jcmVhc2VkIGJ5IGBNYXRoLm1heCh2YWx1ZXMubGVuZ3RoLCBuYW1lcy5sZW5ndGgpYC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB2YWx1ZXMgVGhhdCBpcyB0aGUgU291cmNlVHlwZTogJ2FycmF5Um93cycsIGxpa2VcclxuICAgKiAgICAgICAgW1xyXG4gICAqICAgICAgICAgICAgWzEyLCAzMywgNDRdLFxyXG4gICAqICAgICAgICAgICAgW05hTiwgNDMsIDFdLFxyXG4gICAqICAgICAgICAgICAgWyctJywgJ2FzZGYnLCAwXVxyXG4gICAqICAgICAgICBdXHJcbiAgICogICAgICAgIEVhY2ggaXRlbSBpcyBleGFjdGx5IGNvcnJlc3BvbmRpbmcgdG8gYSBkaW1lbnNpb24uXHJcbiAgICovXG5cblxuICBTZXJpZXNEYXRhLnByb3RvdHlwZS5hcHBlbmRWYWx1ZXMgPSBmdW5jdGlvbiAodmFsdWVzLCBuYW1lcykge1xuICAgIHZhciBfYSA9IHRoaXMuX3N0b3JlLmFwcGVuZFZhbHVlcyh2YWx1ZXMsIG5hbWVzLmxlbmd0aCksXG4gICAgICAgIHN0YXJ0ID0gX2Euc3RhcnQsXG4gICAgICAgIGVuZCA9IF9hLmVuZDtcblxuICAgIHZhciBzaG91bGRNYWtlSWRGcm9tTmFtZSA9IHRoaXMuX3Nob3VsZE1ha2VJZEZyb21OYW1lKCk7XG5cbiAgICB0aGlzLl91cGRhdGVPcmRpbmFsTWV0YSgpO1xuXG4gICAgaWYgKG5hbWVzKSB7XG4gICAgICBmb3IgKHZhciBpZHggPSBzdGFydDsgaWR4IDwgZW5kOyBpZHgrKykge1xuICAgICAgICB2YXIgc291cmNlSWR4ID0gaWR4IC0gc3RhcnQ7XG4gICAgICAgIHRoaXMuX25hbWVMaXN0W2lkeF0gPSBuYW1lc1tzb3VyY2VJZHhdO1xuXG4gICAgICAgIGlmIChzaG91bGRNYWtlSWRGcm9tTmFtZSkge1xuICAgICAgICAgIG1ha2VJZEZyb21OYW1lKHRoaXMsIGlkeCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUuX3VwZGF0ZU9yZGluYWxNZXRhID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzdG9yZSA9IHRoaXMuX3N0b3JlO1xuICAgIHZhciBkaW1lbnNpb25zID0gdGhpcy5kaW1lbnNpb25zO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaW1lbnNpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZGltSW5mbyA9IHRoaXMuX2RpbUluZm9zW2RpbWVuc2lvbnNbaV1dO1xuXG4gICAgICBpZiAoZGltSW5mby5vcmRpbmFsTWV0YSkge1xuICAgICAgICBzdG9yZS5jb2xsZWN0T3JkaW5hbE1ldGEoZGltSW5mby5zdG9yZURpbUluZGV4LCBkaW1JbmZvLm9yZGluYWxNZXRhKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUuX3Nob3VsZE1ha2VJZEZyb21OYW1lID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBwcm92aWRlciA9IHRoaXMuX3N0b3JlLmdldFByb3ZpZGVyKCk7XG5cbiAgICByZXR1cm4gdGhpcy5faWREaW1JZHggPT0gbnVsbCAmJiBwcm92aWRlci5nZXRTb3VyY2UoKS5zb3VyY2VGb3JtYXQgIT09IFNPVVJDRV9GT1JNQVRfVFlQRURfQVJSQVkgJiYgIXByb3ZpZGVyLmZpbGxTdG9yYWdlO1xuICB9O1xuXG4gIFNlcmllc0RhdGEucHJvdG90eXBlLl9kb0luaXQgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgIGlmIChzdGFydCA+PSBlbmQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgc3RvcmUgPSB0aGlzLl9zdG9yZTtcbiAgICB2YXIgcHJvdmlkZXIgPSBzdG9yZS5nZXRQcm92aWRlcigpO1xuXG4gICAgdGhpcy5fdXBkYXRlT3JkaW5hbE1ldGEoKTtcblxuICAgIHZhciBuYW1lTGlzdCA9IHRoaXMuX25hbWVMaXN0O1xuICAgIHZhciBpZExpc3QgPSB0aGlzLl9pZExpc3Q7XG4gICAgdmFyIHNvdXJjZUZvcm1hdCA9IHByb3ZpZGVyLmdldFNvdXJjZSgpLnNvdXJjZUZvcm1hdDtcbiAgICB2YXIgaXNGb3JtYXRPcmlnaW5hbCA9IHNvdXJjZUZvcm1hdCA9PT0gU09VUkNFX0ZPUk1BVF9PUklHSU5BTDsgLy8gRWFjaCBkYXRhIGl0ZW0gaXMgdmFsdWVcbiAgICAvLyBbMSwgMl1cbiAgICAvLyAyXG4gICAgLy8gQmFyIGNoYXJ0LCBsaW5lIGNoYXJ0IHdoaWNoIHVzZXMgY2F0ZWdvcnkgYXhpc1xuICAgIC8vIG9ubHkgZ2l2ZXMgdGhlICd5JyB2YWx1ZS4gJ3gnIHZhbHVlIGlzIHRoZSBpbmRpY2VzIG9mIGNhdGVnb3J5XG4gICAgLy8gVXNlIGEgdGVtcFZhbHVlIHRvIG5vcm1hbGl6ZSB0aGUgdmFsdWUgdG8gYmUgYSAoeCwgeSkgdmFsdWVcbiAgICAvLyBJZiBkYXRhSXRlbSBpcyB7bmFtZTogLi4ufSBvciB7aWQ6IC4uLn0sIGl0IGhhcyBoaWdoZXN0IHByaW9yaXR5LlxuICAgIC8vIFRoaXMga2luZCBvZiBpZHMgYW5kIG5hbWVzIGFyZSBhbHdheXMgc3RvcmVkIGBfbmFtZUxpc3RgIGFuZCBgX2lkTGlzdGAuXG5cbiAgICBpZiAoaXNGb3JtYXRPcmlnaW5hbCAmJiAhcHJvdmlkZXIucHVyZSkge1xuICAgICAgdmFyIHNoYXJlZERhdGFJdGVtID0gW107XG5cbiAgICAgIGZvciAodmFyIGlkeCA9IHN0YXJ0OyBpZHggPCBlbmQ7IGlkeCsrKSB7XG4gICAgICAgIC8vIE5PVElDRTogVHJ5IG5vdCB0byB3cml0ZSB0aGluZ3MgaW50byBkYXRhSXRlbVxuICAgICAgICB2YXIgZGF0YUl0ZW0gPSBwcm92aWRlci5nZXRJdGVtKGlkeCwgc2hhcmVkRGF0YUl0ZW0pO1xuXG4gICAgICAgIGlmICghdGhpcy5oYXNJdGVtT3B0aW9uICYmIGlzRGF0YUl0ZW1PcHRpb24oZGF0YUl0ZW0pKSB7XG4gICAgICAgICAgdGhpcy5oYXNJdGVtT3B0aW9uID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRhSXRlbSkge1xuICAgICAgICAgIHZhciBpdGVtTmFtZSA9IGRhdGFJdGVtLm5hbWU7XG5cbiAgICAgICAgICBpZiAobmFtZUxpc3RbaWR4XSA9PSBudWxsICYmIGl0ZW1OYW1lICE9IG51bGwpIHtcbiAgICAgICAgICAgIG5hbWVMaXN0W2lkeF0gPSBjb252ZXJ0T3B0aW9uSWROYW1lKGl0ZW1OYW1lLCBudWxsKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgaXRlbUlkID0gZGF0YUl0ZW0uaWQ7XG5cbiAgICAgICAgICBpZiAoaWRMaXN0W2lkeF0gPT0gbnVsbCAmJiBpdGVtSWQgIT0gbnVsbCkge1xuICAgICAgICAgICAgaWRMaXN0W2lkeF0gPSBjb252ZXJ0T3B0aW9uSWROYW1lKGl0ZW1JZCwgbnVsbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Nob3VsZE1ha2VJZEZyb21OYW1lKCkpIHtcbiAgICAgIGZvciAodmFyIGlkeCA9IHN0YXJ0OyBpZHggPCBlbmQ7IGlkeCsrKSB7XG4gICAgICAgIG1ha2VJZEZyb21OYW1lKHRoaXMsIGlkeCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcHJlcGFyZUludmVydGVkSW5kZXgodGhpcyk7XG4gIH07XG4gIC8qKlxyXG4gICAqIFBFTkRJTkc6IEluIGZhY3QgY3VycmVudGx5IHRoaXMgZnVuY3Rpb24gaXMgb25seSB1c2VkIHRvIHNob3J0LWNpcmN1aXRcclxuICAgKiB0aGUgY2FsbGluZyBvZiBgc2NhbGUudW5pb25FeHRlbnRGcm9tRGF0YWAgd2hlbiBkYXRhIGhhdmUgYmVlbiBmaWx0ZXJlZCBieSBtb2R1bGVzXHJcbiAgICogbGlrZSBcImRhdGFab29tXCIuIGBzY2FsZS51bmlvbkV4dGVudEZyb21EYXRhYCBpcyB1c2VkIHRvIGNhbGN1bGF0ZSBkYXRhIGV4dGVudCBmb3Igc2VyaWVzIG9uXHJcbiAgICogYW4gYXhpcywgYnV0IGlmIGEgXCJheGlzIHJlbGF0ZWQgZGF0YSBmaWx0ZXIgbW9kdWxlXCIgaXMgdXNlZCwgdGhlIGV4dGVudCBvZiB0aGUgYXhpcyBoYXZlXHJcbiAgICogYmVlbiBmaXhlZCBhbmQgbm8gbmVlZCB0byBjYWxsaW5nIGBzY2FsZS51bmlvbkV4dGVudEZyb21EYXRhYCBhY3R1YWxseS5cclxuICAgKiBCdXQgaWYgd2UgYWRkIFwiY3VzdG9tIGRhdGEgZmlsdGVyXCIgaW4gZnV0dXJlLCB3aGljaCBpcyBub3QgXCJheGlzIHJlbGF0ZWRcIiwgdGhpcyBtZXRob2QgbWF5XHJcbiAgICogYmUgc3RpbGwgbmVlZGVkLlxyXG4gICAqXHJcbiAgICogT3B0aW1pemUgZm9yIHRoZSBzY2VuYXJpbyB0aGF0IGRhdGEgaXMgZmlsdGVyZWQgYnkgYSBnaXZlbiBleHRlbnQuXHJcbiAgICogQ29uc2lkZXIgdGhhdCBpZiBkYXRhIGFtb3VudCBpcyBtb3JlIHRoYW4gaHVuZHJlZHMgb2YgdGhvdXNhbmQsXHJcbiAgICogZXh0ZW50IGNhbGN1bGF0aW9uIHdpbGwgY29zdCBtb3JlIHRoYW4gMTBtcyBhbmQgdGhlIGNhY2hlIHdpbGxcclxuICAgKiBiZSBlcmFzZWQgYmVjYXVzZSBvZiB0aGUgZmlsdGVyaW5nLlxyXG4gICAqL1xuXG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUuZ2V0QXBwcm94aW1hdGVFeHRlbnQgPSBmdW5jdGlvbiAoZGltKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FwcHJveGltYXRlRXh0ZW50W2RpbV0gfHwgdGhpcy5fc3RvcmUuZ2V0RGF0YUV4dGVudCh0aGlzLl9nZXRTdG9yZURpbUluZGV4KGRpbSkpO1xuICB9O1xuICAvKipcclxuICAgKiBDYWxjdWxhdGUgZXh0ZW50IG9uIGEgZmlsdGVyZWQgZGF0YSBtaWdodCBiZSB0aW1lIGNvbnN1bWluZy5cclxuICAgKiBBcHByb3hpbWF0ZSBleHRlbnQgaXMgb25seSB1c2VkIGZvcjogY2FsY3VsYXRlIGV4dGVudCBvZiBmaWx0ZXJlZCBkYXRhIG91dHNpZGUuXHJcbiAgICovXG5cblxuICBTZXJpZXNEYXRhLnByb3RvdHlwZS5zZXRBcHByb3hpbWF0ZUV4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQsIGRpbSkge1xuICAgIGRpbSA9IHRoaXMuZ2V0RGltZW5zaW9uKGRpbSk7XG4gICAgdGhpcy5fYXBwcm94aW1hdGVFeHRlbnRbZGltXSA9IGV4dGVudC5zbGljZSgpO1xuICB9O1xuXG4gIFNlcmllc0RhdGEucHJvdG90eXBlLmdldENhbGN1bGF0aW9uSW5mbyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5fY2FsY3VsYXRpb25JbmZvW2tleV07XG4gIH07XG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUuc2V0Q2FsY3VsYXRpb25JbmZvID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICBpc09iamVjdChrZXkpID8genJVdGlsLmV4dGVuZCh0aGlzLl9jYWxjdWxhdGlvbkluZm8sIGtleSkgOiB0aGlzLl9jYWxjdWxhdGlvbkluZm9ba2V5XSA9IHZhbHVlO1xuICB9O1xuICAvKipcclxuICAgKiBAcmV0dXJuIE5ldmVyIGJlIG51bGwvdW5kZWZpbmVkLiBgbnVtYmVyYCB3aWxsIGJlIGNvbnZlcnRlZCB0byBzdHJpbmcuIEJlY2F1c2U6XHJcbiAgICogSW4gbW9zdCBjYXNlcywgbmFtZSBpcyB1c2VkIGluIGRpc3BsYXksIHdoZXJlIHJldHVybmluZyBhIHN0cmluZyBpcyBtb3JlIGNvbnZlbmllbnQuXHJcbiAgICogSW4gb3RoZXIgY2FzZXMsIG5hbWUgaXMgdXNlZCBpbiBxdWVyeSAoc2VlIGBpbmRleE9mTmFtZWApLCB3aGVyZSB3ZSBjYW4ga2VlcCB0aGVcclxuICAgKiBydWxlIHRoYXQgbmFtZSBgMmAgZXF1YWxzIHRvIG5hbWUgYCcyJ2AuXHJcbiAgICovXG5cblxuICBTZXJpZXNEYXRhLnByb3RvdHlwZS5nZXROYW1lID0gZnVuY3Rpb24gKGlkeCkge1xuICAgIHZhciByYXdJbmRleCA9IHRoaXMuZ2V0UmF3SW5kZXgoaWR4KTtcbiAgICB2YXIgbmFtZSA9IHRoaXMuX25hbWVMaXN0W3Jhd0luZGV4XTtcblxuICAgIGlmIChuYW1lID09IG51bGwgJiYgdGhpcy5fbmFtZURpbUlkeCAhPSBudWxsKSB7XG4gICAgICBuYW1lID0gZ2V0SWROYW1lRnJvbVN0b3JlKHRoaXMsIHRoaXMuX25hbWVEaW1JZHgsIHJhd0luZGV4KTtcbiAgICB9XG5cbiAgICBpZiAobmFtZSA9PSBudWxsKSB7XG4gICAgICBuYW1lID0gJyc7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5hbWU7XG4gIH07XG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUuX2dldENhdGVnb3J5ID0gZnVuY3Rpb24gKGRpbUlkeCwgaWR4KSB7XG4gICAgdmFyIG9yZGluYWwgPSB0aGlzLl9zdG9yZS5nZXQoZGltSWR4LCBpZHgpO1xuXG4gICAgdmFyIG9yZGluYWxNZXRhID0gdGhpcy5fc3RvcmUuZ2V0T3JkaW5hbE1ldGEoZGltSWR4KTtcblxuICAgIGlmIChvcmRpbmFsTWV0YSkge1xuICAgICAgcmV0dXJuIG9yZGluYWxNZXRhLmNhdGVnb3JpZXNbb3JkaW5hbF07XG4gICAgfVxuXG4gICAgcmV0dXJuIG9yZGluYWw7XG4gIH07XG4gIC8qKlxyXG4gICAqIEByZXR1cm4gTmV2ZXIgbnVsbC91bmRlZmluZWQuIGBudW1iZXJgIHdpbGwgYmUgY29udmVydGVkIHRvIHN0cmluZy4gQmVjYXVzZTpcclxuICAgKiBJbiBhbGwgY2FzZXMgaGF2aW5nIGVuY291bnRlcmVkIGF0IHByZXNlbnQsIGlkIGlzIHVzZWQgaW4gbWFraW5nIGRpZmYgY29tcGFyaXNvbiwgd2hpY2hcclxuICAgKiBhcmUgdXN1YWxseSBiYXNlZCBvbiBoYXNoIG1hcC4gV2UgY2FuIGtlZXAgdGhlIHJ1bGUgdGhhdCB0aGUgaW50ZXJuYWwgaWQgYXJlIGFsd2F5cyBzdHJpbmdcclxuICAgKiAodHJlYXQgYDJgIGlzIHRoZSBzYW1lIGFzIGAnMidgKSB0byBtYWtlIHRoZSByZWxhdGVkIGxvZ2ljIHNpbXBsZS5cclxuICAgKi9cblxuXG4gIFNlcmllc0RhdGEucHJvdG90eXBlLmdldElkID0gZnVuY3Rpb24gKGlkeCkge1xuICAgIHJldHVybiBnZXRJZCh0aGlzLCB0aGlzLmdldFJhd0luZGV4KGlkeCkpO1xuICB9O1xuXG4gIFNlcmllc0RhdGEucHJvdG90eXBlLmNvdW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5jb3VudCgpO1xuICB9O1xuICAvKipcclxuICAgKiBHZXQgdmFsdWUuIFJldHVybiBOYU4gaWYgaWR4IGlzIG91dCBvZiByYW5nZS5cclxuICAgKlxyXG4gICAqIEBub3RpY2UgU2hvdWxkIGJldHRlciB0byB1c2UgYGRhdGEuZ2V0U3RvcmUoKS5nZXQoZGltSW5kZXgsIGRhdGFJZHgpYCBpbnN0ZWFkLlxyXG4gICAqL1xuXG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGRpbSwgaWR4KSB7XG4gICAgdmFyIHN0b3JlID0gdGhpcy5fc3RvcmU7XG4gICAgdmFyIGRpbUluZm8gPSB0aGlzLl9kaW1JbmZvc1tkaW1dO1xuXG4gICAgaWYgKGRpbUluZm8pIHtcbiAgICAgIHJldHVybiBzdG9yZS5nZXQoZGltSW5mby5zdG9yZURpbUluZGV4LCBpZHgpO1xuICAgIH1cbiAgfTtcbiAgLyoqXHJcbiAgICogQG5vdGljZSBTaG91bGQgYmV0dGVyIHRvIHVzZSBgZGF0YS5nZXRTdG9yZSgpLmdldEJ5UmF3SW5kZXgoZGltSW5kZXgsIGRhdGFJZHgpYCBpbnN0ZWFkLlxyXG4gICAqL1xuXG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUuZ2V0QnlSYXdJbmRleCA9IGZ1bmN0aW9uIChkaW0sIHJhd0lkeCkge1xuICAgIHZhciBzdG9yZSA9IHRoaXMuX3N0b3JlO1xuICAgIHZhciBkaW1JbmZvID0gdGhpcy5fZGltSW5mb3NbZGltXTtcblxuICAgIGlmIChkaW1JbmZvKSB7XG4gICAgICByZXR1cm4gc3RvcmUuZ2V0QnlSYXdJbmRleChkaW1JbmZvLnN0b3JlRGltSW5kZXgsIHJhd0lkeCk7XG4gICAgfVxuICB9O1xuXG4gIFNlcmllc0RhdGEucHJvdG90eXBlLmdldEluZGljZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0b3JlLmdldEluZGljZXMoKTtcbiAgfTtcblxuICBTZXJpZXNEYXRhLnByb3RvdHlwZS5nZXREYXRhRXh0ZW50ID0gZnVuY3Rpb24gKGRpbSkge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5nZXREYXRhRXh0ZW50KHRoaXMuX2dldFN0b3JlRGltSW5kZXgoZGltKSk7XG4gIH07XG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUuZ2V0U3VtID0gZnVuY3Rpb24gKGRpbSkge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5nZXRTdW0odGhpcy5fZ2V0U3RvcmVEaW1JbmRleChkaW0pKTtcbiAgfTtcblxuICBTZXJpZXNEYXRhLnByb3RvdHlwZS5nZXRNZWRpYW4gPSBmdW5jdGlvbiAoZGltKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0b3JlLmdldE1lZGlhbih0aGlzLl9nZXRTdG9yZURpbUluZGV4KGRpbSkpO1xuICB9O1xuXG4gIFNlcmllc0RhdGEucHJvdG90eXBlLmdldFZhbHVlcyA9IGZ1bmN0aW9uIChkaW1lbnNpb25zLCBpZHgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIHN0b3JlID0gdGhpcy5fc3RvcmU7XG4gICAgcmV0dXJuIHpyVXRpbC5pc0FycmF5KGRpbWVuc2lvbnMpID8gc3RvcmUuZ2V0VmFsdWVzKG1hcChkaW1lbnNpb25zLCBmdW5jdGlvbiAoZGltKSB7XG4gICAgICByZXR1cm4gX3RoaXMuX2dldFN0b3JlRGltSW5kZXgoZGltKTtcbiAgICB9KSwgaWR4KSA6IHN0b3JlLmdldFZhbHVlcyhkaW1lbnNpb25zKTtcbiAgfTtcbiAgLyoqXHJcbiAgICogSWYgdmFsdWUgaXMgTmFOLiBJbmNsdWRpbmcgJy0nXHJcbiAgICogT25seSBjaGVjayB0aGUgY29vcmQgZGltZW5zaW9ucy5cclxuICAgKi9cblxuXG4gIFNlcmllc0RhdGEucHJvdG90eXBlLmhhc1ZhbHVlID0gZnVuY3Rpb24gKGlkeCkge1xuICAgIHZhciBkYXRhRGltSW5kaWNlc09uQ29vcmQgPSB0aGlzLl9kaW1TdW1tYXJ5LmRhdGFEaW1JbmRpY2VzT25Db29yZDtcblxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBkYXRhRGltSW5kaWNlc09uQ29vcmQubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIC8vIE9yZGluYWwgdHlwZSBvcmlnaW5hbGx5IGNhbiBiZSBzdHJpbmcgb3IgbnVtYmVyLlxuICAgICAgLy8gQnV0IHdoZW4gYW4gb3JkaW5hbCB0eXBlIGlzIHVzZWQgb24gY29vcmQsIGl0IGNhblxuICAgICAgLy8gbm90IGJlIHN0cmluZyBidXQgb25seSBudW1iZXIuIFNvIHdlIGNhbiBhbHNvIHVzZSBpc05hTi5cbiAgICAgIGlmIChpc05hTih0aGlzLl9zdG9yZS5nZXQoZGF0YURpbUluZGljZXNPbkNvb3JkW2ldLCBpZHgpKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG4gIC8qKlxyXG4gICAqIFJldHJpZXZlIHRoZSBpbmRleCB3aXRoIGdpdmVuIG5hbWVcclxuICAgKi9cblxuXG4gIFNlcmllc0RhdGEucHJvdG90eXBlLmluZGV4T2ZOYW1lID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5fc3RvcmUuY291bnQoKTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5nZXROYW1lKGkpID09PSBuYW1lKSB7XG4gICAgICAgIHJldHVybiBpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAtMTtcbiAgfTtcblxuICBTZXJpZXNEYXRhLnByb3RvdHlwZS5nZXRSYXdJbmRleCA9IGZ1bmN0aW9uIChpZHgpIHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcmUuZ2V0UmF3SW5kZXgoaWR4KTtcbiAgfTtcblxuICBTZXJpZXNEYXRhLnByb3RvdHlwZS5pbmRleE9mUmF3SW5kZXggPSBmdW5jdGlvbiAocmF3SW5kZXgpIHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcmUuaW5kZXhPZlJhd0luZGV4KHJhd0luZGV4KTtcbiAgfTtcbiAgLyoqXHJcbiAgICogT25seSBzdXBwb3J0IHRoZSBkaW1lbnNpb24gd2hpY2ggaW52ZXJ0ZWQgaW5kZXggY3JlYXRlZC5cclxuICAgKiBEbyBub3Qgc3VwcG9ydCBvdGhlciBjYXNlcyB1bnRpbCByZXF1aXJlZC5cclxuICAgKiBAcGFyYW0gZGltIGNvbmNyZXRlIGRpbVxyXG4gICAqIEBwYXJhbSB2YWx1ZSBvcmRpbmFsIGluZGV4XHJcbiAgICogQHJldHVybiByYXdJbmRleFxyXG4gICAqL1xuXG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUucmF3SW5kZXhPZiA9IGZ1bmN0aW9uIChkaW0sIHZhbHVlKSB7XG4gICAgdmFyIGludmVydGVkSW5kaWNlcyA9IGRpbSAmJiB0aGlzLl9pbnZlcnRlZEluZGljZXNNYXBbZGltXTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAoIWludmVydGVkSW5kaWNlcykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RvIG5vdCBzdXBwb3J0ZWQgeWV0Jyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHJhd0luZGV4ID0gaW52ZXJ0ZWRJbmRpY2VzW3ZhbHVlXTtcblxuICAgIGlmIChyYXdJbmRleCA9PSBudWxsIHx8IGlzTmFOKHJhd0luZGV4KSkge1xuICAgICAgcmV0dXJuIElOREVYX05PVF9GT1VORDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmF3SW5kZXg7XG4gIH07XG4gIC8qKlxyXG4gICAqIFJldHJpZXZlIHRoZSBpbmRleCBvZiBuZWFyZXN0IHZhbHVlXHJcbiAgICogQHBhcmFtIGRpbVxyXG4gICAqIEBwYXJhbSB2YWx1ZVxyXG4gICAqIEBwYXJhbSBbbWF4RGlzdGFuY2U9SW5maW5pdHldXHJcbiAgICogQHJldHVybiBJZiBhbmQgb25seSBpZiBtdWx0aXBsZSBpbmRpY2VzIGhhc1xyXG4gICAqICAgICAgICAgdGhlIHNhbWUgdmFsdWUsIHRoZXkgYXJlIHB1dCB0byB0aGUgcmVzdWx0LlxyXG4gICAqL1xuXG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUuaW5kaWNlc09mTmVhcmVzdCA9IGZ1bmN0aW9uIChkaW0sIHZhbHVlLCBtYXhEaXN0YW5jZSkge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5pbmRpY2VzT2ZOZWFyZXN0KHRoaXMuX2dldFN0b3JlRGltSW5kZXgoZGltKSwgdmFsdWUsIG1heERpc3RhbmNlKTtcbiAgfTtcblxuICBTZXJpZXNEYXRhLnByb3RvdHlwZS5lYWNoID0gZnVuY3Rpb24gKGRpbXMsIGNiLCBjdHgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBpZiAoenJVdGlsLmlzRnVuY3Rpb24oZGltcykpIHtcbiAgICAgIGN0eCA9IGNiO1xuICAgICAgY2IgPSBkaW1zO1xuICAgICAgZGltcyA9IFtdO1xuICAgIH0gLy8gY3R4Q29tcGF0IGp1c3QgZm9yIGNvbXBhdCBlY2hhcnRzM1xuXG5cbiAgICB2YXIgZkN0eCA9IGN0eCB8fCB0aGlzO1xuICAgIHZhciBkaW1JbmRpY2VzID0gbWFwKG5vcm1hbGl6ZURpbWVuc2lvbnMoZGltcyksIHRoaXMuX2dldFN0b3JlRGltSW5kZXgsIHRoaXMpO1xuXG4gICAgdGhpcy5fc3RvcmUuZWFjaChkaW1JbmRpY2VzLCBmQ3R4ID8genJVdGlsLmJpbmQoY2IsIGZDdHgpIDogY2IpO1xuICB9O1xuXG4gIFNlcmllc0RhdGEucHJvdG90eXBlLmZpbHRlclNlbGYgPSBmdW5jdGlvbiAoZGltcywgY2IsIGN0eCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGlmICh6clV0aWwuaXNGdW5jdGlvbihkaW1zKSkge1xuICAgICAgY3R4ID0gY2I7XG4gICAgICBjYiA9IGRpbXM7XG4gICAgICBkaW1zID0gW107XG4gICAgfSAvLyBjdHhDb21wYXQganVzdCBmb3IgY29tcGF0IGVjaGFydHMzXG5cblxuICAgIHZhciBmQ3R4ID0gY3R4IHx8IHRoaXM7XG4gICAgdmFyIGRpbUluZGljZXMgPSBtYXAobm9ybWFsaXplRGltZW5zaW9ucyhkaW1zKSwgdGhpcy5fZ2V0U3RvcmVEaW1JbmRleCwgdGhpcyk7XG4gICAgdGhpcy5fc3RvcmUgPSB0aGlzLl9zdG9yZS5maWx0ZXIoZGltSW5kaWNlcywgZkN0eCA/IHpyVXRpbC5iaW5kKGNiLCBmQ3R4KSA6IGNiKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbiAgLyoqXHJcbiAgICogU2VsZWN0IGRhdGEgaW4gcmFuZ2UuIChGb3Igb3B0aW1pemF0aW9uIG9mIGZpbHRlcilcclxuICAgKiAoTWFudWFsbHkgaW5saW5lIGNvZGUsIHN1cHBvcnQgNSBtaWxsaW9uIGRhdGEgZmlsdGVyaW5nIGluIGRhdGEgem9vbS4pXHJcbiAgICovXG5cblxuICBTZXJpZXNEYXRhLnByb3RvdHlwZS5zZWxlY3RSYW5nZSA9IGZ1bmN0aW9uIChyYW5nZSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgaW5uZXJSYW5nZSA9IHt9O1xuICAgIHZhciBkaW1zID0genJVdGlsLmtleXMocmFuZ2UpO1xuICAgIHZhciBkaW1JbmRpY2VzID0gW107XG4gICAgenJVdGlsLmVhY2goZGltcywgZnVuY3Rpb24gKGRpbSkge1xuICAgICAgdmFyIGRpbUlkeCA9IF90aGlzLl9nZXRTdG9yZURpbUluZGV4KGRpbSk7XG5cbiAgICAgIGlubmVyUmFuZ2VbZGltSWR4XSA9IHJhbmdlW2RpbV07XG4gICAgICBkaW1JbmRpY2VzLnB1c2goZGltSWR4KTtcbiAgICB9KTtcbiAgICB0aGlzLl9zdG9yZSA9IHRoaXMuX3N0b3JlLnNlbGVjdFJhbmdlKGlubmVyUmFuZ2UpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICAvKiBlc2xpbnQtZW5hYmxlIG1heC1sZW4gKi9cblxuXG4gIFNlcmllc0RhdGEucHJvdG90eXBlLm1hcEFycmF5ID0gZnVuY3Rpb24gKGRpbXMsIGNiLCBjdHgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBpZiAoenJVdGlsLmlzRnVuY3Rpb24oZGltcykpIHtcbiAgICAgIGN0eCA9IGNiO1xuICAgICAgY2IgPSBkaW1zO1xuICAgICAgZGltcyA9IFtdO1xuICAgIH0gLy8gY3R4Q29tcGF0IGp1c3QgZm9yIGNvbXBhdCBlY2hhcnRzM1xuXG5cbiAgICBjdHggPSBjdHggfHwgdGhpcztcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgdGhpcy5lYWNoKGRpbXMsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGNiICYmIGNiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgIH0sIGN0eCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICBTZXJpZXNEYXRhLnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbiAoZGltcywgY2IsIGN0eCwgY3R4Q29tcGF0KSB7XG4gICAgJ3VzZSBzdHJpY3QnOyAvLyBjdHhDb21wYXQganVzdCBmb3IgY29tcGF0IGVjaGFydHMzXG5cbiAgICB2YXIgZkN0eCA9IGN0eCB8fCBjdHhDb21wYXQgfHwgdGhpcztcbiAgICB2YXIgZGltSW5kaWNlcyA9IG1hcChub3JtYWxpemVEaW1lbnNpb25zKGRpbXMpLCB0aGlzLl9nZXRTdG9yZURpbUluZGV4LCB0aGlzKTtcbiAgICB2YXIgbGlzdCA9IGNsb25lTGlzdEZvck1hcEFuZFNhbXBsZSh0aGlzKTtcbiAgICBsaXN0Ll9zdG9yZSA9IHRoaXMuX3N0b3JlLm1hcChkaW1JbmRpY2VzLCBmQ3R4ID8genJVdGlsLmJpbmQoY2IsIGZDdHgpIDogY2IpO1xuICAgIHJldHVybiBsaXN0O1xuICB9O1xuXG4gIFNlcmllc0RhdGEucHJvdG90eXBlLm1vZGlmeSA9IGZ1bmN0aW9uIChkaW1zLCBjYiwgY3R4LCBjdHhDb21wYXQpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzOyAvLyBjdHhDb21wYXQganVzdCBmb3IgY29tcGF0IGVjaGFydHMzXG5cblxuICAgIHZhciBmQ3R4ID0gY3R4IHx8IGN0eENvbXBhdCB8fCB0aGlzO1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHpyVXRpbC5lYWNoKG5vcm1hbGl6ZURpbWVuc2lvbnMoZGltcyksIGZ1bmN0aW9uIChkaW0pIHtcbiAgICAgICAgdmFyIGRpbUluZm8gPSBfdGhpcy5nZXREaW1lbnNpb25JbmZvKGRpbSk7XG5cbiAgICAgICAgaWYgKCFkaW1JbmZvLmlzQ2FsY3VsYXRpb25Db29yZCkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Rhbmdlcjogb25seSBzdGFjayBkaW1lbnNpb24gY2FuIGJlIG1vZGlmaWVkJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBkaW1JbmRpY2VzID0gbWFwKG5vcm1hbGl6ZURpbWVuc2lvbnMoZGltcyksIHRoaXMuX2dldFN0b3JlRGltSW5kZXgsIHRoaXMpOyAvLyBJZiBkbyBzaGFsbG93IGNsb25lIGhlcmUsIGlmIHRoZXJlIGFyZSB0b28gbWFueSBzdGFja2VkIHNlcmllcyxcbiAgICAvLyBpdCBzdGlsbCBjb3N0IGxvdHMgb2YgbWVtb3J5LCBiZWNhdXNlIGBfc3RvcmUuZGltZW5zaW9uc2AgYXJlIG5vdCBzaGFyZWQuXG4gICAgLy8gV2Ugc2hvdWxkIGNvbnNpZGVyIHRoZXJlIHByb2JhYmx5IGJlIHNoYWxsb3cgY2xvbmUgaGFwcGVuIGluIGVhY2ggc2VyaWVzXG4gICAgLy8gaW4gY29uc2VxdWVudCBmaWx0ZXIvbWFwLlxuXG4gICAgdGhpcy5fc3RvcmUubW9kaWZ5KGRpbUluZGljZXMsIGZDdHggPyB6clV0aWwuYmluZChjYiwgZkN0eCkgOiBjYik7XG4gIH07XG4gIC8qKlxyXG4gICAqIExhcmdlIGRhdGEgZG93biBzYW1wbGluZyBvbiBnaXZlbiBkaW1lbnNpb25cclxuICAgKiBAcGFyYW0gc2FtcGxlSW5kZXggU2FtcGxlIGluZGV4IGZvciBuYW1lIGFuZCBpZFxyXG4gICAqL1xuXG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUuZG93blNhbXBsZSA9IGZ1bmN0aW9uIChkaW1lbnNpb24sIHJhdGUsIHNhbXBsZVZhbHVlLCBzYW1wbGVJbmRleCkge1xuICAgIHZhciBsaXN0ID0gY2xvbmVMaXN0Rm9yTWFwQW5kU2FtcGxlKHRoaXMpO1xuICAgIGxpc3QuX3N0b3JlID0gdGhpcy5fc3RvcmUuZG93blNhbXBsZSh0aGlzLl9nZXRTdG9yZURpbUluZGV4KGRpbWVuc2lvbiksIHJhdGUsIHNhbXBsZVZhbHVlLCBzYW1wbGVJbmRleCk7XG4gICAgcmV0dXJuIGxpc3Q7XG4gIH07XG4gIC8qKlxyXG4gICAqIExhcmdlIGRhdGEgZG93biBzYW1wbGluZyB1c2luZyBsYXJnZXN0LXRyaWFuZ2xlLXRocmVlLWJ1Y2tldHNcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVEaW1lbnNpb25cclxuICAgKiBAcGFyYW0ge251bWJlcn0gdGFyZ2V0Q291bnRcclxuICAgKi9cblxuXG4gIFNlcmllc0RhdGEucHJvdG90eXBlLmx0dGJEb3duU2FtcGxlID0gZnVuY3Rpb24gKHZhbHVlRGltZW5zaW9uLCByYXRlKSB7XG4gICAgdmFyIGxpc3QgPSBjbG9uZUxpc3RGb3JNYXBBbmRTYW1wbGUodGhpcyk7XG4gICAgbGlzdC5fc3RvcmUgPSB0aGlzLl9zdG9yZS5sdHRiRG93blNhbXBsZSh0aGlzLl9nZXRTdG9yZURpbUluZGV4KHZhbHVlRGltZW5zaW9uKSwgcmF0ZSk7XG4gICAgcmV0dXJuIGxpc3Q7XG4gIH07XG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUuZ2V0UmF3RGF0YUl0ZW0gPSBmdW5jdGlvbiAoaWR4KSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0b3JlLmdldFJhd0RhdGFJdGVtKGlkeCk7XG4gIH07XG4gIC8qKlxyXG4gICAqIEdldCBtb2RlbCBvZiBvbmUgZGF0YSBpdGVtLlxyXG4gICAqL1xuICAvLyBUT0RPOiBUeXBlIG9mIGRhdGEgaXRlbVxuXG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUuZ2V0SXRlbU1vZGVsID0gZnVuY3Rpb24gKGlkeCkge1xuICAgIHZhciBob3N0TW9kZWwgPSB0aGlzLmhvc3RNb2RlbDtcbiAgICB2YXIgZGF0YUl0ZW0gPSB0aGlzLmdldFJhd0RhdGFJdGVtKGlkeCk7XG4gICAgcmV0dXJuIG5ldyBNb2RlbChkYXRhSXRlbSwgaG9zdE1vZGVsLCBob3N0TW9kZWwgJiYgaG9zdE1vZGVsLmVjTW9kZWwpO1xuICB9O1xuICAvKipcclxuICAgKiBDcmVhdGUgYSBkYXRhIGRpZmZlclxyXG4gICAqL1xuXG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUuZGlmZiA9IGZ1bmN0aW9uIChvdGhlckxpc3QpIHtcbiAgICB2YXIgdGhpc0xpc3QgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgRGF0YURpZmZlcihvdGhlckxpc3QgPyBvdGhlckxpc3QuZ2V0U3RvcmUoKS5nZXRJbmRpY2VzKCkgOiBbXSwgdGhpcy5nZXRTdG9yZSgpLmdldEluZGljZXMoKSwgZnVuY3Rpb24gKGlkeCkge1xuICAgICAgcmV0dXJuIGdldElkKG90aGVyTGlzdCwgaWR4KTtcbiAgICB9LCBmdW5jdGlvbiAoaWR4KSB7XG4gICAgICByZXR1cm4gZ2V0SWQodGhpc0xpc3QsIGlkeCk7XG4gICAgfSk7XG4gIH07XG4gIC8qKlxyXG4gICAqIEdldCB2aXN1YWwgcHJvcGVydHkuXHJcbiAgICovXG5cblxuICBTZXJpZXNEYXRhLnByb3RvdHlwZS5nZXRWaXN1YWwgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIHZpc3VhbCA9IHRoaXMuX3Zpc3VhbDtcbiAgICByZXR1cm4gdmlzdWFsICYmIHZpc3VhbFtrZXldO1xuICB9O1xuXG4gIFNlcmllc0RhdGEucHJvdG90eXBlLnNldFZpc3VhbCA9IGZ1bmN0aW9uIChrdk9iaiwgdmFsKSB7XG4gICAgdGhpcy5fdmlzdWFsID0gdGhpcy5fdmlzdWFsIHx8IHt9O1xuXG4gICAgaWYgKGlzT2JqZWN0KGt2T2JqKSkge1xuICAgICAgenJVdGlsLmV4dGVuZCh0aGlzLl92aXN1YWwsIGt2T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fdmlzdWFsW2t2T2JqXSA9IHZhbDtcbiAgICB9XG4gIH07XG4gIC8qKlxyXG4gICAqIEdldCB2aXN1YWwgcHJvcGVydHkgb2Ygc2luZ2xlIGRhdGEgaXRlbVxyXG4gICAqL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcblxuXG4gIFNlcmllc0RhdGEucHJvdG90eXBlLmdldEl0ZW1WaXN1YWwgPSBmdW5jdGlvbiAoaWR4LCBrZXkpIHtcbiAgICB2YXIgaXRlbVZpc3VhbCA9IHRoaXMuX2l0ZW1WaXN1YWxzW2lkeF07XG4gICAgdmFyIHZhbCA9IGl0ZW1WaXN1YWwgJiYgaXRlbVZpc3VhbFtrZXldO1xuXG4gICAgaWYgKHZhbCA9PSBudWxsKSB7XG4gICAgICAvLyBVc2UgZ2xvYmFsIHZpc3VhbCBwcm9wZXJ0eVxuICAgICAgcmV0dXJuIHRoaXMuZ2V0VmlzdWFsKGtleSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbDtcbiAgfTtcbiAgLyoqXHJcbiAgICogSWYgZXhpc3RzIHZpc3VhbCBwcm9wZXJ0eSBvZiBzaW5nbGUgZGF0YSBpdGVtXHJcbiAgICovXG5cblxuICBTZXJpZXNEYXRhLnByb3RvdHlwZS5oYXNJdGVtVmlzdWFsID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9pdGVtVmlzdWFscy5sZW5ndGggPiAwO1xuICB9O1xuICAvKipcclxuICAgKiBNYWtlIHN1cmUgaXRlbVZpc3VhbCBwcm9wZXJ0eSBpcyB1bmlxdWVcclxuICAgKi9cbiAgLy8gVE9ETzogdXNlIGtleSB0byBzYXZlIHZpc3VhbCB0byByZWR1Y2UgbWVtb3J5LlxuXG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUuZW5zdXJlVW5pcXVlSXRlbVZpc3VhbCA9IGZ1bmN0aW9uIChpZHgsIGtleSkge1xuICAgIHZhciBpdGVtVmlzdWFscyA9IHRoaXMuX2l0ZW1WaXN1YWxzO1xuICAgIHZhciBpdGVtVmlzdWFsID0gaXRlbVZpc3VhbHNbaWR4XTtcblxuICAgIGlmICghaXRlbVZpc3VhbCkge1xuICAgICAgaXRlbVZpc3VhbCA9IGl0ZW1WaXN1YWxzW2lkeF0gPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgdmFsID0gaXRlbVZpc3VhbFtrZXldO1xuXG4gICAgaWYgKHZhbCA9PSBudWxsKSB7XG4gICAgICB2YWwgPSB0aGlzLmdldFZpc3VhbChrZXkpOyAvLyBUT0RPIFBlcmZvcm1hbmNlP1xuXG4gICAgICBpZiAoenJVdGlsLmlzQXJyYXkodmFsKSkge1xuICAgICAgICB2YWwgPSB2YWwuc2xpY2UoKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsKSkge1xuICAgICAgICB2YWwgPSB6clV0aWwuZXh0ZW5kKHt9LCB2YWwpO1xuICAgICAgfVxuXG4gICAgICBpdGVtVmlzdWFsW2tleV0gPSB2YWw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbDtcbiAgfTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG5cblxuICBTZXJpZXNEYXRhLnByb3RvdHlwZS5zZXRJdGVtVmlzdWFsID0gZnVuY3Rpb24gKGlkeCwga2V5LCB2YWx1ZSkge1xuICAgIHZhciBpdGVtVmlzdWFsID0gdGhpcy5faXRlbVZpc3VhbHNbaWR4XSB8fCB7fTtcbiAgICB0aGlzLl9pdGVtVmlzdWFsc1tpZHhdID0gaXRlbVZpc3VhbDtcblxuICAgIGlmIChpc09iamVjdChrZXkpKSB7XG4gICAgICB6clV0aWwuZXh0ZW5kKGl0ZW1WaXN1YWwsIGtleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGl0ZW1WaXN1YWxba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgfTtcbiAgLyoqXHJcbiAgICogQ2xlYXIgaXRlbVZpc3VhbHMgYW5kIGxpc3QgdmlzdWFsLlxyXG4gICAqL1xuXG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUuY2xlYXJBbGxWaXN1YWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fdmlzdWFsID0ge307XG4gICAgdGhpcy5faXRlbVZpc3VhbHMgPSBbXTtcbiAgfTtcblxuICBTZXJpZXNEYXRhLnByb3RvdHlwZS5zZXRMYXlvdXQgPSBmdW5jdGlvbiAoa2V5LCB2YWwpIHtcbiAgICBpc09iamVjdChrZXkpID8genJVdGlsLmV4dGVuZCh0aGlzLl9sYXlvdXQsIGtleSkgOiB0aGlzLl9sYXlvdXRba2V5XSA9IHZhbDtcbiAgfTtcbiAgLyoqXHJcbiAgICogR2V0IGxheW91dCBwcm9wZXJ0eS5cclxuICAgKi9cblxuXG4gIFNlcmllc0RhdGEucHJvdG90eXBlLmdldExheW91dCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5fbGF5b3V0W2tleV07XG4gIH07XG4gIC8qKlxyXG4gICAqIEdldCBsYXlvdXQgb2Ygc2luZ2xlIGRhdGEgaXRlbVxyXG4gICAqL1xuXG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUuZ2V0SXRlbUxheW91dCA9IGZ1bmN0aW9uIChpZHgpIHtcbiAgICByZXR1cm4gdGhpcy5faXRlbUxheW91dHNbaWR4XTtcbiAgfTtcbiAgLyoqXHJcbiAgICogU2V0IGxheW91dCBvZiBzaW5nbGUgZGF0YSBpdGVtXHJcbiAgICovXG5cblxuICBTZXJpZXNEYXRhLnByb3RvdHlwZS5zZXRJdGVtTGF5b3V0ID0gZnVuY3Rpb24gKGlkeCwgbGF5b3V0LCBtZXJnZSkge1xuICAgIHRoaXMuX2l0ZW1MYXlvdXRzW2lkeF0gPSBtZXJnZSA/IHpyVXRpbC5leHRlbmQodGhpcy5faXRlbUxheW91dHNbaWR4XSB8fCB7fSwgbGF5b3V0KSA6IGxheW91dDtcbiAgfTtcbiAgLyoqXHJcbiAgICogQ2xlYXIgYWxsIGxheW91dCBvZiBzaW5nbGUgZGF0YSBpdGVtXHJcbiAgICovXG5cblxuICBTZXJpZXNEYXRhLnByb3RvdHlwZS5jbGVhckl0ZW1MYXlvdXRzID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2l0ZW1MYXlvdXRzLmxlbmd0aCA9IDA7XG4gIH07XG4gIC8qKlxyXG4gICAqIFNldCBncmFwaGljIGVsZW1lbnQgcmVsYXRpdmUgdG8gZGF0YS4gSXQgY2FuIGJlIHNldCBhcyBudWxsXHJcbiAgICovXG5cblxuICBTZXJpZXNEYXRhLnByb3RvdHlwZS5zZXRJdGVtR3JhcGhpY0VsID0gZnVuY3Rpb24gKGlkeCwgZWwpIHtcbiAgICB2YXIgc2VyaWVzSW5kZXggPSB0aGlzLmhvc3RNb2RlbCAmJiB0aGlzLmhvc3RNb2RlbC5zZXJpZXNJbmRleDtcbiAgICBzZXRDb21tb25FQ0RhdGEoc2VyaWVzSW5kZXgsIHRoaXMuZGF0YVR5cGUsIGlkeCwgZWwpO1xuICAgIHRoaXMuX2dyYXBoaWNFbHNbaWR4XSA9IGVsO1xuICB9O1xuXG4gIFNlcmllc0RhdGEucHJvdG90eXBlLmdldEl0ZW1HcmFwaGljRWwgPSBmdW5jdGlvbiAoaWR4KSB7XG4gICAgcmV0dXJuIHRoaXMuX2dyYXBoaWNFbHNbaWR4XTtcbiAgfTtcblxuICBTZXJpZXNEYXRhLnByb3RvdHlwZS5lYWNoSXRlbUdyYXBoaWNFbCA9IGZ1bmN0aW9uIChjYiwgY29udGV4dCkge1xuICAgIHpyVXRpbC5lYWNoKHRoaXMuX2dyYXBoaWNFbHMsIGZ1bmN0aW9uIChlbCwgaWR4KSB7XG4gICAgICBpZiAoZWwpIHtcbiAgICAgICAgY2IgJiYgY2IuY2FsbChjb250ZXh0LCBlbCwgaWR4KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbiAgLyoqXHJcbiAgICogU2hhbGxvdyBjbG9uZSBhIG5ldyBsaXN0IGV4Y2VwdCB2aXN1YWwgYW5kIGxheW91dCBwcm9wZXJ0aWVzLCBhbmQgZ3JhcGggZWxlbWVudHMuXHJcbiAgICogTmV3IGxpc3Qgb25seSBjaGFuZ2UgdGhlIGluZGljZXMuXHJcbiAgICovXG5cblxuICBTZXJpZXNEYXRhLnByb3RvdHlwZS5jbG9uZVNoYWxsb3cgPSBmdW5jdGlvbiAobGlzdCkge1xuICAgIGlmICghbGlzdCkge1xuICAgICAgbGlzdCA9IG5ldyBTZXJpZXNEYXRhKHRoaXMuX3NjaGVtYSA/IHRoaXMuX3NjaGVtYSA6IG1hcCh0aGlzLmRpbWVuc2lvbnMsIHRoaXMuX2dldERpbUluZm8sIHRoaXMpLCB0aGlzLmhvc3RNb2RlbCk7XG4gICAgfVxuXG4gICAgdHJhbnNmZXJQcm9wZXJ0aWVzKGxpc3QsIHRoaXMpO1xuICAgIGxpc3QuX3N0b3JlID0gdGhpcy5fc3RvcmU7XG4gICAgcmV0dXJuIGxpc3Q7XG4gIH07XG4gIC8qKlxyXG4gICAqIFdyYXAgc29tZSBtZXRob2QgdG8gYWRkIG1vcmUgZmVhdHVyZVxyXG4gICAqL1xuXG5cbiAgU2VyaWVzRGF0YS5wcm90b3R5cGUud3JhcE1ldGhvZCA9IGZ1bmN0aW9uIChtZXRob2ROYW1lLCBpbmplY3RGdW5jdGlvbikge1xuICAgIHZhciBvcmlnaW5hbE1ldGhvZCA9IHRoaXNbbWV0aG9kTmFtZV07XG5cbiAgICBpZiAoIXpyVXRpbC5pc0Z1bmN0aW9uKG9yaWdpbmFsTWV0aG9kKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX193cmFwcGVkTWV0aG9kcyA9IHRoaXMuX193cmFwcGVkTWV0aG9kcyB8fCBbXTtcblxuICAgIHRoaXMuX193cmFwcGVkTWV0aG9kcy5wdXNoKG1ldGhvZE5hbWUpO1xuXG4gICAgdGhpc1ttZXRob2ROYW1lXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciByZXMgPSBvcmlnaW5hbE1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgcmV0dXJuIGluamVjdEZ1bmN0aW9uLmFwcGx5KHRoaXMsIFtyZXNdLmNvbmNhdCh6clV0aWwuc2xpY2UoYXJndW1lbnRzKSkpO1xuICAgIH07XG4gIH07IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gQSB3b3JrIGFyb3VuZCBmb3IgaW50ZXJuYWwgbWV0aG9kIHZpc2l0aW5nIHByaXZhdGUgbWVtYmVyLlxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuICBTZXJpZXNEYXRhLmludGVybmFsRmllbGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcHJlcGFyZUludmVydGVkSW5kZXggPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgdmFyIGludmVydGVkSW5kaWNlc01hcCA9IGRhdGEuX2ludmVydGVkSW5kaWNlc01hcDtcbiAgICAgIHpyVXRpbC5lYWNoKGludmVydGVkSW5kaWNlc01hcCwgZnVuY3Rpb24gKGludmVydGVkSW5kaWNlcywgZGltKSB7XG4gICAgICAgIHZhciBkaW1JbmZvID0gZGF0YS5fZGltSW5mb3NbZGltXTsgLy8gQ3VycmVudGx5LCBvbmx5IGRpbWVuc2lvbnMgdGhhdCBoYXMgb3JkaW5hbE1ldGEgY2FuIGNyZWF0ZSBpbnZlcnRlZCBpbmRpY2VzLlxuXG4gICAgICAgIHZhciBvcmRpbmFsTWV0YSA9IGRpbUluZm8ub3JkaW5hbE1ldGE7XG4gICAgICAgIHZhciBzdG9yZSA9IGRhdGEuX3N0b3JlO1xuXG4gICAgICAgIGlmIChvcmRpbmFsTWV0YSkge1xuICAgICAgICAgIGludmVydGVkSW5kaWNlcyA9IGludmVydGVkSW5kaWNlc01hcFtkaW1dID0gbmV3IEN0b3JJbnQzMkFycmF5KG9yZGluYWxNZXRhLmNhdGVnb3JpZXMubGVuZ3RoKTsgLy8gVGhlIGRlZmF1bHQgdmFsdWUgb2YgVHlwZWRBcnJheSBpcyAwLiBUbyBhdm9pZCBtaXNzXG4gICAgICAgICAgLy8gbWFwcGluZyB0byAwLCB3ZSBzaG91bGQgc2V0IGl0IGFzIElOREVYX05PVF9GT1VORC5cblxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW52ZXJ0ZWRJbmRpY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpbnZlcnRlZEluZGljZXNbaV0gPSBJTkRFWF9OT1RfRk9VTkQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdG9yZS5jb3VudCgpOyBpKyspIHtcbiAgICAgICAgICAgIC8vIE9ubHkgc3VwcG9ydCB0aGUgY2FzZSB0aGF0IGFsbCB2YWx1ZXMgYXJlIGRpc3RpbmN0LlxuICAgICAgICAgICAgaW52ZXJ0ZWRJbmRpY2VzW3N0b3JlLmdldChkaW1JbmZvLnN0b3JlRGltSW5kZXgsIGkpXSA9IGk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgZ2V0SWROYW1lRnJvbVN0b3JlID0gZnVuY3Rpb24gKGRhdGEsIGRpbUlkeCwgaWR4KSB7XG4gICAgICByZXR1cm4gY29udmVydE9wdGlvbklkTmFtZShkYXRhLl9nZXRDYXRlZ29yeShkaW1JZHgsIGlkeCksIG51bGwpO1xuICAgIH07XG4gICAgLyoqXHJcbiAgICAgKiBAc2VlIHRoZSBjb21tZW50IG9mIGBMaXN0WydnZXRJZCddYC5cclxuICAgICAqL1xuXG5cbiAgICBnZXRJZCA9IGZ1bmN0aW9uIChkYXRhLCByYXdJbmRleCkge1xuICAgICAgdmFyIGlkID0gZGF0YS5faWRMaXN0W3Jhd0luZGV4XTtcblxuICAgICAgaWYgKGlkID09IG51bGwgJiYgZGF0YS5faWREaW1JZHggIT0gbnVsbCkge1xuICAgICAgICBpZCA9IGdldElkTmFtZUZyb21TdG9yZShkYXRhLCBkYXRhLl9pZERpbUlkeCwgcmF3SW5kZXgpO1xuICAgICAgfVxuXG4gICAgICBpZiAoaWQgPT0gbnVsbCkge1xuICAgICAgICBpZCA9IElEX1BSRUZJWCArIHJhd0luZGV4O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gaWQ7XG4gICAgfTtcblxuICAgIG5vcm1hbGl6ZURpbWVuc2lvbnMgPSBmdW5jdGlvbiAoZGltZW5zaW9ucykge1xuICAgICAgaWYgKCF6clV0aWwuaXNBcnJheShkaW1lbnNpb25zKSkge1xuICAgICAgICBkaW1lbnNpb25zID0gZGltZW5zaW9ucyAhPSBudWxsID8gW2RpbWVuc2lvbnNdIDogW107XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkaW1lbnNpb25zO1xuICAgIH07XG4gICAgLyoqXHJcbiAgICAgKiBEYXRhIGluIGV4Y2x1ZGVEaW1lbnNpb25zIGlzIGNvcGllZCwgb3RoZXJ3aXNlIHRyYW5zZmVycmVkLlxyXG4gICAgICovXG5cblxuICAgIGNsb25lTGlzdEZvck1hcEFuZFNhbXBsZSA9IGZ1bmN0aW9uIChvcmlnaW5hbCkge1xuICAgICAgdmFyIGxpc3QgPSBuZXcgU2VyaWVzRGF0YShvcmlnaW5hbC5fc2NoZW1hID8gb3JpZ2luYWwuX3NjaGVtYSA6IG1hcChvcmlnaW5hbC5kaW1lbnNpb25zLCBvcmlnaW5hbC5fZ2V0RGltSW5mbywgb3JpZ2luYWwpLCBvcmlnaW5hbC5ob3N0TW9kZWwpOyAvLyBGSVhNRSBJZiBuZWVkcyBzdGFja2VkT24sIHZhbHVlIG1heSBhbHJlYWR5IGJlZW4gc3RhY2tlZFxuXG4gICAgICB0cmFuc2ZlclByb3BlcnRpZXMobGlzdCwgb3JpZ2luYWwpO1xuICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgfTtcblxuICAgIHRyYW5zZmVyUHJvcGVydGllcyA9IGZ1bmN0aW9uICh0YXJnZXQsIHNvdXJjZSkge1xuICAgICAgenJVdGlsLmVhY2goVFJBTlNGRVJBQkxFX1BST1BFUlRJRVMuY29uY2F0KHNvdXJjZS5fX3dyYXBwZWRNZXRob2RzIHx8IFtdKSwgZnVuY3Rpb24gKHByb3BOYW1lKSB7XG4gICAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgICAgdGFyZ2V0W3Byb3BOYW1lXSA9IHNvdXJjZVtwcm9wTmFtZV07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdGFyZ2V0Ll9fd3JhcHBlZE1ldGhvZHMgPSBzb3VyY2UuX193cmFwcGVkTWV0aG9kcztcbiAgICAgIHpyVXRpbC5lYWNoKENMT05FX1BST1BFUlRJRVMsIGZ1bmN0aW9uIChwcm9wTmFtZSkge1xuICAgICAgICB0YXJnZXRbcHJvcE5hbWVdID0genJVdGlsLmNsb25lKHNvdXJjZVtwcm9wTmFtZV0pO1xuICAgICAgfSk7XG4gICAgICB0YXJnZXQuX2NhbGN1bGF0aW9uSW5mbyA9IHpyVXRpbC5leHRlbmQoe30sIHNvdXJjZS5fY2FsY3VsYXRpb25JbmZvKTtcbiAgICB9O1xuXG4gICAgbWFrZUlkRnJvbU5hbWUgPSBmdW5jdGlvbiAoZGF0YSwgaWR4KSB7XG4gICAgICB2YXIgbmFtZUxpc3QgPSBkYXRhLl9uYW1lTGlzdDtcbiAgICAgIHZhciBpZExpc3QgPSBkYXRhLl9pZExpc3Q7XG4gICAgICB2YXIgbmFtZURpbUlkeCA9IGRhdGEuX25hbWVEaW1JZHg7XG4gICAgICB2YXIgaWREaW1JZHggPSBkYXRhLl9pZERpbUlkeDtcbiAgICAgIHZhciBuYW1lID0gbmFtZUxpc3RbaWR4XTtcbiAgICAgIHZhciBpZCA9IGlkTGlzdFtpZHhdO1xuXG4gICAgICBpZiAobmFtZSA9PSBudWxsICYmIG5hbWVEaW1JZHggIT0gbnVsbCkge1xuICAgICAgICBuYW1lTGlzdFtpZHhdID0gbmFtZSA9IGdldElkTmFtZUZyb21TdG9yZShkYXRhLCBuYW1lRGltSWR4LCBpZHgpO1xuICAgICAgfVxuXG4gICAgICBpZiAoaWQgPT0gbnVsbCAmJiBpZERpbUlkeCAhPSBudWxsKSB7XG4gICAgICAgIGlkTGlzdFtpZHhdID0gaWQgPSBnZXRJZE5hbWVGcm9tU3RvcmUoZGF0YSwgaWREaW1JZHgsIGlkeCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpZCA9PSBudWxsICYmIG5hbWUgIT0gbnVsbCkge1xuICAgICAgICB2YXIgbmFtZVJlcGVhdENvdW50ID0gZGF0YS5fbmFtZVJlcGVhdENvdW50O1xuICAgICAgICB2YXIgbm1DbnQgPSBuYW1lUmVwZWF0Q291bnRbbmFtZV0gPSAobmFtZVJlcGVhdENvdW50W25hbWVdIHx8IDApICsgMTtcbiAgICAgICAgaWQgPSBuYW1lO1xuXG4gICAgICAgIGlmIChubUNudCA+IDEpIHtcbiAgICAgICAgICBpZCArPSAnX19lY19fJyArIG5tQ250O1xuICAgICAgICB9XG5cbiAgICAgICAgaWRMaXN0W2lkeF0gPSBpZDtcbiAgICAgIH1cbiAgICB9O1xuICB9KCk7XG5cbiAgcmV0dXJuIFNlcmllc0RhdGE7XG59KCk7XG5cbmV4cG9ydCBkZWZhdWx0IFNlcmllc0RhdGE7IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgeyBWSVNVQUxfRElNRU5TSU9OUyB9IGZyb20gJy4uLy4uL3V0aWwvdHlwZXMuanMnO1xuaW1wb3J0IFNlcmllc0RpbWVuc2lvbkRlZmluZSBmcm9tICcuLi9TZXJpZXNEaW1lbnNpb25EZWZpbmUuanMnO1xuaW1wb3J0IHsgY3JlYXRlSGFzaE1hcCwgZGVmYXVsdHMsIGVhY2gsIGV4dGVuZCwgaXNPYmplY3QsIGlzU3RyaW5nIH0gZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbmltcG9ydCB7IGNyZWF0ZVNvdXJjZUZyb21TZXJpZXNEYXRhT3B0aW9uLCBpc1NvdXJjZUluc3RhbmNlIH0gZnJvbSAnLi4vU291cmNlLmpzJztcbmltcG9ydCB7IEN0b3JJbnQzMkFycmF5IH0gZnJvbSAnLi4vRGF0YVN0b3JlLmpzJztcbmltcG9ydCB7IG5vcm1hbGl6ZVRvQXJyYXkgfSBmcm9tICcuLi8uLi91dGlsL21vZGVsLmpzJztcbmltcG9ydCB7IEJFX09SRElOQUwsIGd1ZXNzT3JkaW5hbCB9IGZyb20gJy4vc291cmNlSGVscGVyLmpzJztcbmltcG9ydCB7IGNyZWF0ZURpbU5hbWVNYXAsIGVuc3VyZVNvdXJjZURpbU5hbWVNYXAsIFNlcmllc0RhdGFTY2hlbWEsIHNob3VsZE9taXRVbnVzZWREaW1lbnNpb25zIH0gZnJvbSAnLi9TZXJpZXNEYXRhU2NoZW1hLmpzJztcbi8qKlxyXG4gKiBGb3Igb3V0c2lkZSB1c2FnZSBjb21wYXQgKGxpa2UgZWNoYXJ0cy1nbCBhcmUgdXNpbmcgaXQpLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURpbWVuc2lvbnMoc291cmNlLCBvcHQpIHtcbiAgcmV0dXJuIHByZXBhcmVTZXJpZXNEYXRhU2NoZW1hKHNvdXJjZSwgb3B0KS5kaW1lbnNpb25zO1xufVxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIGJ1aWxkcyB0aGUgcmVsYXRpb25zaGlwIGJldHdlZW46XHJcbiAqICsgXCJ3aGF0IHRoZSBjb29yZCBzeXMgb3Igc2VyaWVzIHJlcXVpcmVzIChzZWUgYGNvb3JkRGltZW5zaW9uc2ApXCIsXHJcbiAqICsgXCJ3aGF0IHRoZSB1c2VyIGRlZmluZXMgKGluIGBlbmNvZGVgIGFuZCBgZGltZW5zaW9uc2AsIHNlZSBgb3B0LmRpbWVuc2lvbnNEZWZpbmVgIGFuZCBgb3B0LmVuY29kZURlZmluZWApXCJcclxuICogKyBcIndoYXQgdGhlIGRhdGEgc291cmNlIHByb3ZpZHMgKHNlZSBgc291cmNlYClcIi5cclxuICpcclxuICogU29tZSBndWVzcyBzdHJhdGVneSB3aWxsIGJlIGFkYXB0ZWQgaWYgdXNlciBkb2VzIG5vdCBkZWZpbmUgc29tZXRoaW5nLlxyXG4gKiBJZiBubyAndmFsdWUnIGRpbWVuc2lvbiBzcGVjaWZpZWQsIHRoZSBmaXJzdCBuby1uYW1lZCBkaW1lbnNpb24gd2lsbCBiZVxyXG4gKiBuYW1lZCBhcyAndmFsdWUnLlxyXG4gKlxyXG4gKiBAcmV0dXJuIFRoZSByZXN1bHRzIGFyZSBhbHdheXMgc29ydGVkIGJ5IGBzdG9yZURpbUluZGV4YCBhc2MuXHJcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwcmVwYXJlU2VyaWVzRGF0YVNjaGVtYSggLy8gVE9ETzogVFlQRSBjb21wbGV0ZURpbWVuc2lvbnMgdHlwZVxuc291cmNlLCBvcHQpIHtcbiAgaWYgKCFpc1NvdXJjZUluc3RhbmNlKHNvdXJjZSkpIHtcbiAgICBzb3VyY2UgPSBjcmVhdGVTb3VyY2VGcm9tU2VyaWVzRGF0YU9wdGlvbihzb3VyY2UpO1xuICB9XG5cbiAgb3B0ID0gb3B0IHx8IHt9O1xuICB2YXIgc3lzRGltcyA9IG9wdC5jb29yZERpbWVuc2lvbnMgfHwgW107XG4gIHZhciBkaW1zRGVmID0gb3B0LmRpbWVuc2lvbnNEZWZpbmUgfHwgc291cmNlLmRpbWVuc2lvbnNEZWZpbmUgfHwgW107XG4gIHZhciBjb29yZERpbU5hbWVNYXAgPSBjcmVhdGVIYXNoTWFwKCk7XG4gIHZhciByZXN1bHRMaXN0ID0gW107XG4gIHZhciBkaW1Db3VudCA9IGdldERpbUNvdW50KHNvdXJjZSwgc3lzRGltcywgZGltc0RlZiwgb3B0LmRpbWVuc2lvbnNDb3VudCk7IC8vIFRyeSB0byBpZ25vcmUgdW51c2VkIGRpbWVuc2lvbnMgaWYgc2hhcmluZyBhIGhpZ2ggZGltZW5zaW9uIGRhdGFzdG9yZVxuICAvLyAzMCBpcyBhbiBleHBlcmllbmNlIHZhbHVlLlxuXG4gIHZhciBvbWl0VW51c2VkRGltZW5zaW9ucyA9IG9wdC5jYW5PbWl0VW51c2VkRGltZW5zaW9ucyAmJiBzaG91bGRPbWl0VW51c2VkRGltZW5zaW9ucyhkaW1Db3VudCk7XG4gIHZhciBpc1VzaW5nU291cmNlRGltZW5zaW9uc0RlZiA9IGRpbXNEZWYgPT09IHNvdXJjZS5kaW1lbnNpb25zRGVmaW5lO1xuICB2YXIgZGF0YURpbU5hbWVNYXAgPSBpc1VzaW5nU291cmNlRGltZW5zaW9uc0RlZiA/IGVuc3VyZVNvdXJjZURpbU5hbWVNYXAoc291cmNlKSA6IGNyZWF0ZURpbU5hbWVNYXAoZGltc0RlZik7XG4gIHZhciBlbmNvZGVEZWYgPSBvcHQuZW5jb2RlRGVmaW5lO1xuXG4gIGlmICghZW5jb2RlRGVmICYmIG9wdC5lbmNvZGVEZWZhdWx0ZXIpIHtcbiAgICBlbmNvZGVEZWYgPSBvcHQuZW5jb2RlRGVmYXVsdGVyKHNvdXJjZSwgZGltQ291bnQpO1xuICB9XG5cbiAgdmFyIGVuY29kZURlZk1hcCA9IGNyZWF0ZUhhc2hNYXAoZW5jb2RlRGVmKTtcbiAgdmFyIGluZGljZXNNYXAgPSBuZXcgQ3RvckludDMyQXJyYXkoZGltQ291bnQpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgaW5kaWNlc01hcC5sZW5ndGg7IGkrKykge1xuICAgIGluZGljZXNNYXBbaV0gPSAtMTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFJlc3VsdEl0ZW0oZGltSWR4KSB7XG4gICAgdmFyIGlkeCA9IGluZGljZXNNYXBbZGltSWR4XTtcblxuICAgIGlmIChpZHggPCAwKSB7XG4gICAgICB2YXIgZGltRGVmSXRlbVJhdyA9IGRpbXNEZWZbZGltSWR4XTtcbiAgICAgIHZhciBkaW1EZWZJdGVtID0gaXNPYmplY3QoZGltRGVmSXRlbVJhdykgPyBkaW1EZWZJdGVtUmF3IDoge1xuICAgICAgICBuYW1lOiBkaW1EZWZJdGVtUmF3XG4gICAgICB9O1xuICAgICAgdmFyIHJlc3VsdEl0ZW0gPSBuZXcgU2VyaWVzRGltZW5zaW9uRGVmaW5lKCk7XG4gICAgICB2YXIgdXNlckRpbU5hbWUgPSBkaW1EZWZJdGVtLm5hbWU7XG5cbiAgICAgIGlmICh1c2VyRGltTmFtZSAhPSBudWxsICYmIGRhdGFEaW1OYW1lTWFwLmdldCh1c2VyRGltTmFtZSkgIT0gbnVsbCkge1xuICAgICAgICAvLyBPbmx5IGlmIGBzZXJpZXMuZGltZW5zaW9uc2AgaXMgZGVmaW5lZCBpbiBvcHRpb25cbiAgICAgICAgLy8gZGlzcGxheU5hbWUsIHdpbGwgYmUgc2V0LCBhbmQgZGltZW5zaW9uIHdpbGwgYmUgZGlzcGxheWVkIHZlcnRpY2FsbHkgaW5cbiAgICAgICAgLy8gdG9vbHRpcCBieSBkZWZhdWx0LlxuICAgICAgICByZXN1bHRJdGVtLm5hbWUgPSByZXN1bHRJdGVtLmRpc3BsYXlOYW1lID0gdXNlckRpbU5hbWU7XG4gICAgICB9XG5cbiAgICAgIGRpbURlZkl0ZW0udHlwZSAhPSBudWxsICYmIChyZXN1bHRJdGVtLnR5cGUgPSBkaW1EZWZJdGVtLnR5cGUpO1xuICAgICAgZGltRGVmSXRlbS5kaXNwbGF5TmFtZSAhPSBudWxsICYmIChyZXN1bHRJdGVtLmRpc3BsYXlOYW1lID0gZGltRGVmSXRlbS5kaXNwbGF5TmFtZSk7XG4gICAgICB2YXIgbmV3SWR4ID0gcmVzdWx0TGlzdC5sZW5ndGg7XG4gICAgICBpbmRpY2VzTWFwW2RpbUlkeF0gPSBuZXdJZHg7XG4gICAgICByZXN1bHRJdGVtLnN0b3JlRGltSW5kZXggPSBkaW1JZHg7XG4gICAgICByZXN1bHRMaXN0LnB1c2gocmVzdWx0SXRlbSk7XG4gICAgICByZXR1cm4gcmVzdWx0SXRlbTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0TGlzdFtpZHhdO1xuICB9XG5cbiAgaWYgKCFvbWl0VW51c2VkRGltZW5zaW9ucykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltQ291bnQ7IGkrKykge1xuICAgICAgZ2V0UmVzdWx0SXRlbShpKTtcbiAgICB9XG4gIH0gLy8gU2V0IGBjb29yZERpbWAgYW5kIGBjb29yZERpbUluZGV4YCBieSBgZW5jb2RlRGVmTWFwYCBhbmQgbm9ybWFsaXplIGBlbmNvZGVEZWZNYXBgLlxuXG5cbiAgZW5jb2RlRGVmTWFwLmVhY2goZnVuY3Rpb24gKGRhdGFEaW1zUmF3LCBjb29yZERpbSkge1xuICAgIHZhciBkYXRhRGltcyA9IG5vcm1hbGl6ZVRvQXJyYXkoZGF0YURpbXNSYXcpLnNsaWNlKCk7IC8vIE5vdGU6IEl0IGlzIGFsbG93ZWQgdGhhdCBgZGF0YURpbXMubGVuZ3RoYCBpcyBgMGAsIGUuZy4sIG9wdGlvbnMgaXNcbiAgICAvLyBge2VuY29kZToge3g6IC0xLCB5OiAxfX1gLiBTaG91bGQgbm90IGZpbHRlciBhbnl0aGluZyBpblxuICAgIC8vIHRoaXMgY2FzZS5cblxuICAgIGlmIChkYXRhRGltcy5sZW5ndGggPT09IDEgJiYgIWlzU3RyaW5nKGRhdGFEaW1zWzBdKSAmJiBkYXRhRGltc1swXSA8IDApIHtcbiAgICAgIGVuY29kZURlZk1hcC5zZXQoY29vcmREaW0sIGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgdmFsaWREYXRhRGltcyA9IGVuY29kZURlZk1hcC5zZXQoY29vcmREaW0sIFtdKTtcbiAgICBlYWNoKGRhdGFEaW1zLCBmdW5jdGlvbiAocmVzdWx0RGltSWR4T3JOYW1lLCBpZHgpIHtcbiAgICAgIC8vIFRoZSBpbnB1dCByZXN1bHREaW1JZHggY2FuIGJlIGRpbSBuYW1lIG9yIGluZGV4LlxuICAgICAgdmFyIHJlc3VsdERpbUlkeCA9IGlzU3RyaW5nKHJlc3VsdERpbUlkeE9yTmFtZSkgPyBkYXRhRGltTmFtZU1hcC5nZXQocmVzdWx0RGltSWR4T3JOYW1lKSA6IHJlc3VsdERpbUlkeE9yTmFtZTtcblxuICAgICAgaWYgKHJlc3VsdERpbUlkeCAhPSBudWxsICYmIHJlc3VsdERpbUlkeCA8IGRpbUNvdW50KSB7XG4gICAgICAgIHZhbGlkRGF0YURpbXNbaWR4XSA9IHJlc3VsdERpbUlkeDtcbiAgICAgICAgYXBwbHlEaW0oZ2V0UmVzdWx0SXRlbShyZXN1bHREaW1JZHgpLCBjb29yZERpbSwgaWR4KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7IC8vIEFwcGx5IHRlbXBsYXRlcyBhbmQgZGVmYXVsdCBvcmRlciBmcm9tIGBzeXNEaW1zYC5cblxuICB2YXIgYXZhaWxEaW1JZHggPSAwO1xuICBlYWNoKHN5c0RpbXMsIGZ1bmN0aW9uIChzeXNEaW1JdGVtUmF3KSB7XG4gICAgdmFyIGNvb3JkRGltO1xuICAgIHZhciBzeXNEaW1JdGVtRGltc0RlZjtcbiAgICB2YXIgc3lzRGltSXRlbU90aGVyRGltcztcbiAgICB2YXIgc3lzRGltSXRlbTtcblxuICAgIGlmIChpc1N0cmluZyhzeXNEaW1JdGVtUmF3KSkge1xuICAgICAgY29vcmREaW0gPSBzeXNEaW1JdGVtUmF3O1xuICAgICAgc3lzRGltSXRlbSA9IHt9O1xuICAgIH0gZWxzZSB7XG4gICAgICBzeXNEaW1JdGVtID0gc3lzRGltSXRlbVJhdztcbiAgICAgIGNvb3JkRGltID0gc3lzRGltSXRlbS5uYW1lO1xuICAgICAgdmFyIG9yZGluYWxNZXRhID0gc3lzRGltSXRlbS5vcmRpbmFsTWV0YTtcbiAgICAgIHN5c0RpbUl0ZW0ub3JkaW5hbE1ldGEgPSBudWxsO1xuICAgICAgc3lzRGltSXRlbSA9IGV4dGVuZCh7fSwgc3lzRGltSXRlbSk7XG4gICAgICBzeXNEaW1JdGVtLm9yZGluYWxNZXRhID0gb3JkaW5hbE1ldGE7IC8vIGBjb29yZERpbUluZGV4YCBzaG91bGQgbm90IGJlIHNldCBkaXJlY3RseS5cblxuICAgICAgc3lzRGltSXRlbURpbXNEZWYgPSBzeXNEaW1JdGVtLmRpbXNEZWY7XG4gICAgICBzeXNEaW1JdGVtT3RoZXJEaW1zID0gc3lzRGltSXRlbS5vdGhlckRpbXM7XG4gICAgICBzeXNEaW1JdGVtLm5hbWUgPSBzeXNEaW1JdGVtLmNvb3JkRGltID0gc3lzRGltSXRlbS5jb29yZERpbUluZGV4ID0gc3lzRGltSXRlbS5kaW1zRGVmID0gc3lzRGltSXRlbS5vdGhlckRpbXMgPSBudWxsO1xuICAgIH1cblxuICAgIHZhciBkYXRhRGltcyA9IGVuY29kZURlZk1hcC5nZXQoY29vcmREaW0pOyAvLyBuZWdhdGl2ZSByZXN1bHREaW1JZHggbWVhbnMgbm8gbmVlZCB0byBtYXBwaW5nLlxuXG4gICAgaWYgKGRhdGFEaW1zID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGRhdGFEaW1zID0gbm9ybWFsaXplVG9BcnJheShkYXRhRGltcyk7IC8vIGRpbWVuc2lvbnMgcHJvdmlkZXMgZGVmYXVsdCBkaW0gc2VxdWVuY2VzLlxuXG4gICAgaWYgKCFkYXRhRGltcy5sZW5ndGgpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgKHN5c0RpbUl0ZW1EaW1zRGVmICYmIHN5c0RpbUl0ZW1EaW1zRGVmLmxlbmd0aCB8fCAxKTsgaSsrKSB7XG4gICAgICAgIHdoaWxlIChhdmFpbERpbUlkeCA8IGRpbUNvdW50ICYmIGdldFJlc3VsdEl0ZW0oYXZhaWxEaW1JZHgpLmNvb3JkRGltICE9IG51bGwpIHtcbiAgICAgICAgICBhdmFpbERpbUlkeCsrO1xuICAgICAgICB9XG5cbiAgICAgICAgYXZhaWxEaW1JZHggPCBkaW1Db3VudCAmJiBkYXRhRGltcy5wdXNoKGF2YWlsRGltSWR4KyspO1xuICAgICAgfVxuICAgIH0gLy8gQXBwbHkgdGVtcGxhdGVzLlxuXG5cbiAgICBlYWNoKGRhdGFEaW1zLCBmdW5jdGlvbiAocmVzdWx0RGltSWR4LCBjb29yZERpbUluZGV4KSB7XG4gICAgICB2YXIgcmVzdWx0SXRlbSA9IGdldFJlc3VsdEl0ZW0ocmVzdWx0RGltSWR4KTsgLy8gQ29vcmRpbmF0ZSBzeXN0ZW0gaGFzIGEgaGlnaGVyIHByaW9yaXR5IG9uIGRpbSB0eXBlIHRoYW4gc291cmNlLlxuXG4gICAgICBpZiAoaXNVc2luZ1NvdXJjZURpbWVuc2lvbnNEZWYgJiYgc3lzRGltSXRlbS50eXBlICE9IG51bGwpIHtcbiAgICAgICAgcmVzdWx0SXRlbS50eXBlID0gc3lzRGltSXRlbS50eXBlO1xuICAgICAgfVxuXG4gICAgICBhcHBseURpbShkZWZhdWx0cyhyZXN1bHRJdGVtLCBzeXNEaW1JdGVtKSwgY29vcmREaW0sIGNvb3JkRGltSW5kZXgpO1xuXG4gICAgICBpZiAocmVzdWx0SXRlbS5uYW1lID09IG51bGwgJiYgc3lzRGltSXRlbURpbXNEZWYpIHtcbiAgICAgICAgdmFyIHN5c0RpbUl0ZW1EaW1zRGVmSXRlbSA9IHN5c0RpbUl0ZW1EaW1zRGVmW2Nvb3JkRGltSW5kZXhdO1xuICAgICAgICAhaXNPYmplY3Qoc3lzRGltSXRlbURpbXNEZWZJdGVtKSAmJiAoc3lzRGltSXRlbURpbXNEZWZJdGVtID0ge1xuICAgICAgICAgIG5hbWU6IHN5c0RpbUl0ZW1EaW1zRGVmSXRlbVxuICAgICAgICB9KTtcbiAgICAgICAgcmVzdWx0SXRlbS5uYW1lID0gcmVzdWx0SXRlbS5kaXNwbGF5TmFtZSA9IHN5c0RpbUl0ZW1EaW1zRGVmSXRlbS5uYW1lO1xuICAgICAgICByZXN1bHRJdGVtLmRlZmF1bHRUb29sdGlwID0gc3lzRGltSXRlbURpbXNEZWZJdGVtLmRlZmF1bHRUb29sdGlwO1xuICAgICAgfSAvLyBGSVhNRSByZWZhY3RvciwgY3VycmVudGx5IG9ubHkgdXNlZCBpbiBjYXNlOiB7b3RoZXJEaW1zOiB7dG9vbHRpcDogZmFsc2V9fVxuXG5cbiAgICAgIHN5c0RpbUl0ZW1PdGhlckRpbXMgJiYgZGVmYXVsdHMocmVzdWx0SXRlbS5vdGhlckRpbXMsIHN5c0RpbUl0ZW1PdGhlckRpbXMpO1xuICAgIH0pO1xuICB9KTtcblxuICBmdW5jdGlvbiBhcHBseURpbShyZXN1bHRJdGVtLCBjb29yZERpbSwgY29vcmREaW1JbmRleCkge1xuICAgIGlmIChWSVNVQUxfRElNRU5TSU9OUy5nZXQoY29vcmREaW0pICE9IG51bGwpIHtcbiAgICAgIHJlc3VsdEl0ZW0ub3RoZXJEaW1zW2Nvb3JkRGltXSA9IGNvb3JkRGltSW5kZXg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdEl0ZW0uY29vcmREaW0gPSBjb29yZERpbTtcbiAgICAgIHJlc3VsdEl0ZW0uY29vcmREaW1JbmRleCA9IGNvb3JkRGltSW5kZXg7XG4gICAgICBjb29yZERpbU5hbWVNYXAuc2V0KGNvb3JkRGltLCB0cnVlKTtcbiAgICB9XG4gIH0gLy8gTWFrZSBzdXJlIHRoZSBmaXJzdCBleHRyYSBkaW0gaXMgJ3ZhbHVlJy5cblxuXG4gIHZhciBnZW5lcmF0ZUNvb3JkID0gb3B0LmdlbmVyYXRlQ29vcmQ7XG4gIHZhciBnZW5lcmF0ZUNvb3JkQ291bnQgPSBvcHQuZ2VuZXJhdGVDb29yZENvdW50O1xuICB2YXIgZnJvbVplcm8gPSBnZW5lcmF0ZUNvb3JkQ291bnQgIT0gbnVsbDtcbiAgZ2VuZXJhdGVDb29yZENvdW50ID0gZ2VuZXJhdGVDb29yZCA/IGdlbmVyYXRlQ29vcmRDb3VudCB8fCAxIDogMDtcbiAgdmFyIGV4dHJhID0gZ2VuZXJhdGVDb29yZCB8fCAndmFsdWUnO1xuXG4gIGZ1bmN0aW9uIGlmTm9OYW1lRmlsbFdpdGhDb29yZE5hbWUocmVzdWx0SXRlbSkge1xuICAgIGlmIChyZXN1bHRJdGVtLm5hbWUgPT0gbnVsbCkge1xuICAgICAgLy8gRHVwbGljYXRpb24gd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IHN0ZXAuXG4gICAgICByZXN1bHRJdGVtLm5hbWUgPSByZXN1bHRJdGVtLmNvb3JkRGltO1xuICAgIH1cbiAgfSAvLyBTZXQgZGltIGBuYW1lYCBhbmQgb3RoZXIgYGNvb3JkRGltYCBhbmQgb3RoZXIgcHJvcHMuXG5cblxuICBpZiAoIW9taXRVbnVzZWREaW1lbnNpb25zKSB7XG4gICAgZm9yICh2YXIgcmVzdWx0RGltSWR4ID0gMDsgcmVzdWx0RGltSWR4IDwgZGltQ291bnQ7IHJlc3VsdERpbUlkeCsrKSB7XG4gICAgICB2YXIgcmVzdWx0SXRlbSA9IGdldFJlc3VsdEl0ZW0ocmVzdWx0RGltSWR4KTtcbiAgICAgIHZhciBjb29yZERpbSA9IHJlc3VsdEl0ZW0uY29vcmREaW07XG5cbiAgICAgIGlmIChjb29yZERpbSA9PSBudWxsKSB7XG4gICAgICAgIC8vIFRPRE8gbm8gbmVlZCB0byBnZW5lcmF0ZSBjb29yZERpbSBmb3IgaXNFeHRyYUNvb3JkP1xuICAgICAgICByZXN1bHRJdGVtLmNvb3JkRGltID0gZ2VuQ29vcmREaW1OYW1lKGV4dHJhLCBjb29yZERpbU5hbWVNYXAsIGZyb21aZXJvKTtcbiAgICAgICAgcmVzdWx0SXRlbS5jb29yZERpbUluZGV4ID0gMDsgLy8gU2VyaWVzIHNwZWNpZmllZCBnZW5lcmF0ZUNvb3JkIGlzIHVzaW5nIG91dC5cblxuICAgICAgICBpZiAoIWdlbmVyYXRlQ29vcmQgfHwgZ2VuZXJhdGVDb29yZENvdW50IDw9IDApIHtcbiAgICAgICAgICByZXN1bHRJdGVtLmlzRXh0cmFDb29yZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBnZW5lcmF0ZUNvb3JkQ291bnQtLTtcbiAgICAgIH1cblxuICAgICAgaWZOb05hbWVGaWxsV2l0aENvb3JkTmFtZShyZXN1bHRJdGVtKTtcblxuICAgICAgaWYgKHJlc3VsdEl0ZW0udHlwZSA9PSBudWxsICYmIChndWVzc09yZGluYWwoc291cmNlLCByZXN1bHREaW1JZHgpID09PSBCRV9PUkRJTkFMLk11c3QgLy8gQ29uc2lkZXIgdGhlIGNhc2U6XG4gICAgICAvLyB7XG4gICAgICAvLyAgICBkYXRhc2V0OiB7c291cmNlOiBbXG4gICAgICAvLyAgICAgICAgWycyMDAxJywgMTIzXSxcbiAgICAgIC8vICAgICAgICBbJzIwMDInLCA0NTZdLFxuICAgICAgLy8gICAgICAgIC4uLlxuICAgICAgLy8gICAgICAgIFsnVGhlIG90aGVycycsIDk4N10sXG4gICAgICAvLyAgICBdfSxcbiAgICAgIC8vICAgIHNlcmllczoge3R5cGU6ICdwaWUnfVxuICAgICAgLy8gfVxuICAgICAgLy8gVGhlIGZpcnN0IGNvbHVtbiBzaG91bGQgYmV0dGVyIGJlIHRyZWF0ZWQgYXMgYSBcIm9yZGluYWxcIiBhbHRob3VnaCBpdFxuICAgICAgLy8gbWlnaHQgbm90IGJlIGRldGVjdGVkIGFzIGFuIFwib3JkaW5hbFwiIGJ5IGBndWVzc09yZGluYWxgLlxuICAgICAgfHwgcmVzdWx0SXRlbS5pc0V4dHJhQ29vcmQgJiYgKHJlc3VsdEl0ZW0ub3RoZXJEaW1zLml0ZW1OYW1lICE9IG51bGwgfHwgcmVzdWx0SXRlbS5vdGhlckRpbXMuc2VyaWVzTmFtZSAhPSBudWxsKSkpIHtcbiAgICAgICAgcmVzdWx0SXRlbS50eXBlID0gJ29yZGluYWwnO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBlYWNoKHJlc3VsdExpc3QsIGZ1bmN0aW9uIChyZXN1bHRJdGVtKSB7XG4gICAgICAvLyBQRU5ESU5HOiBndWVzc09yZGluYWwgb3IgbGV0IHVzZXIgc3BlY2lmeSB0eXBlOiAnb3JkaW5hbCcgbWFudWFsbHk/XG4gICAgICBpZk5vTmFtZUZpbGxXaXRoQ29vcmROYW1lKHJlc3VsdEl0ZW0pO1xuICAgIH0pOyAvLyBTb3J0IGRpbWVuc2lvbnM6IHRoZXJlIGFyZSBzb21lIHJ1bGUgdGhhdCB1c2UgdGhlIGxhc3QgZGltIGFzIGxhYmVsLFxuICAgIC8vIGFuZCBmb3Igc29tZSBsYXR0ZXIgdHJhdmVsIHByb2Nlc3MgZWFzaWVyLlxuXG4gICAgcmVzdWx0TGlzdC5zb3J0KGZ1bmN0aW9uIChpdGVtMCwgaXRlbTEpIHtcbiAgICAgIHJldHVybiBpdGVtMC5zdG9yZURpbUluZGV4IC0gaXRlbTEuc3RvcmVEaW1JbmRleDtcbiAgICB9KTtcbiAgfVxuXG4gIHJlbW92ZUR1cGxpY2F0aW9uKHJlc3VsdExpc3QpO1xuICByZXR1cm4gbmV3IFNlcmllc0RhdGFTY2hlbWEoe1xuICAgIHNvdXJjZTogc291cmNlLFxuICAgIGRpbWVuc2lvbnM6IHJlc3VsdExpc3QsXG4gICAgZnVsbERpbWVuc2lvbkNvdW50OiBkaW1Db3VudCxcbiAgICBkaW1lbnNpb25PbWl0dGVkOiBvbWl0VW51c2VkRGltZW5zaW9uc1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRHVwbGljYXRpb24ocmVzdWx0KSB7XG4gIHZhciBkdXBsaWNhdGlvbk1hcCA9IGNyZWF0ZUhhc2hNYXAoKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBkaW0gPSByZXN1bHRbaV07XG4gICAgdmFyIGRpbU9yaWdpbmFsTmFtZSA9IGRpbS5uYW1lO1xuICAgIHZhciBjb3VudCA9IGR1cGxpY2F0aW9uTWFwLmdldChkaW1PcmlnaW5hbE5hbWUpIHx8IDA7XG5cbiAgICBpZiAoY291bnQgPiAwKSB7XG4gICAgICAvLyBTdGFydHMgZnJvbSAwLlxuICAgICAgZGltLm5hbWUgPSBkaW1PcmlnaW5hbE5hbWUgKyAoY291bnQgLSAxKTtcbiAgICB9XG5cbiAgICBjb3VudCsrO1xuICAgIGR1cGxpY2F0aW9uTWFwLnNldChkaW1PcmlnaW5hbE5hbWUsIGNvdW50KTtcbiAgfVxufSAvLyA/Pz8gVE9ET1xuLy8gT3JpZ2luYWxseSBkZXRlY3QgZGltQ291bnQgYnkgZGF0YVswXS4gU2hvdWxkIHdlXG4vLyBvcHRpbWl6ZSBpdCB0byBvbmx5IGJ5IHN5c0RpbXMgYW5kIGRpbWVuc2lvbnMgYW5kIGVuY29kZS5cbi8vIFNvIG9ubHkgbmVjZXNzYXJ5IGRpbXMgd2lsbCBiZSBpbml0aWFsaXplZC5cbi8vIEJ1dFxuLy8gKDEpIGN1c3RvbSBzZXJpZXMgc2hvdWxkIGJlIGNvbnNpZGVyZWQuIHdoZXJlIG90aGVyIGRpbXNcbi8vIG1heSBiZSB2aXNpdGVkLlxuLy8gKDIpIHNvbWV0aW1lcyB1c2VyIG5lZWQgdG8gY2FsY3VsYXRlIGJ1YmJsZSBzaXplIG9yIHVzZSB2aXN1YWxNYXBcbi8vIG9uIG90aGVyIGRpbWVuc2lvbnMgYmVzaWRlcyBjb29yZFN5cyBuZWVkZWQuXG4vLyBTbywgZGltcyB0aGF0IGlzIG5vdCB1c2VkIGJ5IHN5c3RlbSwgc2hvdWxkIGJlIHNoYXJlZCBpbiBkYXRhIHN0b3JlP1xuXG5cbmZ1bmN0aW9uIGdldERpbUNvdW50KHNvdXJjZSwgc3lzRGltcywgZGltc0RlZiwgb3B0RGltQ291bnQpIHtcbiAgLy8gTm90ZSB0aGF0IHRoZSByZXN1bHQgZGltQ291bnQgc2hvdWxkIG5vdCBzbWFsbCB0aGFuIGNvbHVtbnMgY291bnRcbiAgLy8gb2YgZGF0YSwgb3RoZXJ3aXNlIGBkYXRhRGltTmFtZU1hcGAgY2hlY2tpbmcgd2lsbCBiZSBpbmNvcnJlY3QuXG4gIHZhciBkaW1Db3VudCA9IE1hdGgubWF4KHNvdXJjZS5kaW1lbnNpb25zRGV0ZWN0ZWRDb3VudCB8fCAxLCBzeXNEaW1zLmxlbmd0aCwgZGltc0RlZi5sZW5ndGgsIG9wdERpbUNvdW50IHx8IDApO1xuICBlYWNoKHN5c0RpbXMsIGZ1bmN0aW9uIChzeXNEaW1JdGVtKSB7XG4gICAgdmFyIHN5c0RpbUl0ZW1EaW1zRGVmO1xuXG4gICAgaWYgKGlzT2JqZWN0KHN5c0RpbUl0ZW0pICYmIChzeXNEaW1JdGVtRGltc0RlZiA9IHN5c0RpbUl0ZW0uZGltc0RlZikpIHtcbiAgICAgIGRpbUNvdW50ID0gTWF0aC5tYXgoZGltQ291bnQsIHN5c0RpbUl0ZW1EaW1zRGVmLmxlbmd0aCk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGRpbUNvdW50O1xufVxuXG5mdW5jdGlvbiBnZW5Db29yZERpbU5hbWUobmFtZSwgbWFwLCBmcm9tWmVybykge1xuICBpZiAoZnJvbVplcm8gfHwgbWFwLmhhc0tleShuYW1lKSkge1xuICAgIHZhciBpID0gMDtcblxuICAgIHdoaWxlIChtYXAuaGFzS2V5KG5hbWUgKyBpKSkge1xuICAgICAgaSsrO1xuICAgIH1cblxuICAgIG5hbWUgKz0gaTtcbiAgfVxuXG4gIG1hcC5zZXQobmFtZSwgdHJ1ZSk7XG4gIHJldHVybiBuYW1lO1xufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0ICogYXMgenJVdGlsIGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgT3JkaW5hbFNjYWxlIGZyb20gJy4uL3NjYWxlL09yZGluYWwuanMnO1xuaW1wb3J0IEludGVydmFsU2NhbGUgZnJvbSAnLi4vc2NhbGUvSW50ZXJ2YWwuanMnO1xuaW1wb3J0IFNjYWxlIGZyb20gJy4uL3NjYWxlL1NjYWxlLmpzJztcbmltcG9ydCB7IHByZXBhcmVMYXlvdXRCYXJTZXJpZXMsIG1ha2VDb2x1bW5MYXlvdXQsIHJldHJpZXZlQ29sdW1uTGF5b3V0IH0gZnJvbSAnLi4vbGF5b3V0L2JhckdyaWQuanMnO1xuaW1wb3J0IEJvdW5kaW5nUmVjdCBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL0JvdW5kaW5nUmVjdC5qcyc7XG5pbXBvcnQgVGltZVNjYWxlIGZyb20gJy4uL3NjYWxlL1RpbWUuanMnO1xuaW1wb3J0IExvZ1NjYWxlIGZyb20gJy4uL3NjYWxlL0xvZy5qcyc7XG5pbXBvcnQgeyBnZXRTdGFja2VkRGltZW5zaW9uIH0gZnJvbSAnLi4vZGF0YS9oZWxwZXIvZGF0YVN0YWNrSGVscGVyLmpzJztcbmltcG9ydCB7IGVuc3VyZVNjYWxlUmF3RXh0ZW50SW5mbyB9IGZyb20gJy4vc2NhbGVSYXdFeHRlbnRJbmZvLmpzJztcbi8qKlxyXG4gKiBHZXQgYXhpcyBzY2FsZSBleHRlbnQgYmVmb3JlIG5pY2VkLlxyXG4gKiBJdGVtIG9mIHJldHVybmVkIGFycmF5IGNhbiBvbmx5IGJlIG51bWJlciAoaW5jbHVkaW5nIEluZmluaXR5IGFuZCBOYU4pLlxyXG4gKlxyXG4gKiBDYXV0aW9uOlxyXG4gKiBQcmVjb25kaXRpb24gb2YgY2FsbGluZyB0aGlzIG1ldGhvZDpcclxuICogVGhlIHNjYWxlIGV4dGVudCBoYXMgYmVlbiBpbml0aWFsaXplZCB1c2luZyBzZXJpZXMgZGF0YSBleHRlbnQgdmlhXHJcbiAqIGBzY2FsZS5zZXRFeHRlbnRgIG9yIGBzY2FsZS51bmlvbkV4dGVudEZyb21EYXRhYDtcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTY2FsZUV4dGVudChzY2FsZSwgbW9kZWwpIHtcbiAgdmFyIHNjYWxlVHlwZSA9IHNjYWxlLnR5cGU7XG4gIHZhciByYXdFeHRlbnRSZXN1bHQgPSBlbnN1cmVTY2FsZVJhd0V4dGVudEluZm8oc2NhbGUsIG1vZGVsLCBzY2FsZS5nZXRFeHRlbnQoKSkuY2FsY3VsYXRlKCk7XG4gIHNjYWxlLnNldEJsYW5rKHJhd0V4dGVudFJlc3VsdC5pc0JsYW5rKTtcbiAgdmFyIG1pbiA9IHJhd0V4dGVudFJlc3VsdC5taW47XG4gIHZhciBtYXggPSByYXdFeHRlbnRSZXN1bHQubWF4OyAvLyBJZiBiYXJzIGFyZSBwbGFjZWQgb24gYSBiYXNlIGF4aXMgb2YgdHlwZSB0aW1lIG9yIGludGVydmFsIGFjY291bnQgZm9yIGF4aXMgYm91bmRhcnkgb3ZlcmZsb3cgYW5kIGN1cnJlbnQgYXhpc1xuICAvLyBpcyBiYXNlIGF4aXNcbiAgLy8gRklYTUVcbiAgLy8gKDEpIENvbnNpZGVyIHN1cHBvcnQgdmFsdWUgYXhpcywgd2hlcmUgYmVsb3cgemVybyBhbmQgYXhpcyBgb25aZXJvYCBzaG91bGQgYmUgaGFuZGxlZCBwcm9wZXJseS5cbiAgLy8gKDIpIFJlZmFjdG9yIHRoZSBsb2dpYyB3aXRoIGBiYXJHcmlkYC4gSXMgaXQgbm90IG5lZWQgdG8gYG1ha2VCYXJXaWR0aEFuZE9mZnNldEluZm9gIHR3aWNlIHdpdGggZGlmZmVyZW50IGV4dGVudD9cbiAgLy8gICAgIFNob3VsZCBub3QgZGVwZW5kIG9uIHNlcmllcyB0eXBlIGBiYXJgP1xuICAvLyAoMykgRml4IHRoYXQgbWlnaHQgb3ZlcmxhcCB3aGVuIHVzaW5nIGRhdGFab29tLlxuICAvLyAoNCkgQ29uc2lkZXIgb3RoZXIgY2hhcnQgdHlwZXMgdXNpbmcgYGJhckdyaWRgP1xuICAvLyBTZWUgIzY3MjgsICM0ODYyLCBgdGVzdC9iYXItb3ZlcmZsb3ctdGltZS1wbG90Lmh0bWxgXG5cbiAgdmFyIGVjTW9kZWwgPSBtb2RlbC5lY01vZGVsO1xuXG4gIGlmIChlY01vZGVsICYmIHNjYWxlVHlwZSA9PT0gJ3RpbWUnXG4gIC8qIHx8IHNjYWxlVHlwZSA9PT0gJ2ludGVydmFsJyAqL1xuICApIHtcbiAgICB2YXIgYmFyU2VyaWVzTW9kZWxzID0gcHJlcGFyZUxheW91dEJhclNlcmllcygnYmFyJywgZWNNb2RlbCk7XG4gICAgdmFyIGlzQmFzZUF4aXNBbmRIYXNCYXJTZXJpZXNfMSA9IGZhbHNlO1xuICAgIHpyVXRpbC5lYWNoKGJhclNlcmllc01vZGVscywgZnVuY3Rpb24gKHNlcmllc01vZGVsKSB7XG4gICAgICBpc0Jhc2VBeGlzQW5kSGFzQmFyU2VyaWVzXzEgPSBpc0Jhc2VBeGlzQW5kSGFzQmFyU2VyaWVzXzEgfHwgc2VyaWVzTW9kZWwuZ2V0QmFzZUF4aXMoKSA9PT0gbW9kZWwuYXhpcztcbiAgICB9KTtcblxuICAgIGlmIChpc0Jhc2VBeGlzQW5kSGFzQmFyU2VyaWVzXzEpIHtcbiAgICAgIC8vIENhbGN1bGF0ZSBwbGFjZW1lbnQgb2YgYmFycyBvbiBheGlzLiBUT0RPIHNob3VsZCBiZSBkZWNvdXBsZWRcbiAgICAgIC8vIHdpdGggYmFyTGF5b3V0XG4gICAgICB2YXIgYmFyV2lkdGhBbmRPZmZzZXQgPSBtYWtlQ29sdW1uTGF5b3V0KGJhclNlcmllc01vZGVscyk7IC8vIEFkanVzdCBheGlzIG1pbiBhbmQgbWF4IHRvIGFjY291bnQgZm9yIG92ZXJmbG93XG5cbiAgICAgIHZhciBhZGp1c3RlZFNjYWxlID0gYWRqdXN0U2NhbGVGb3JPdmVyZmxvdyhtaW4sIG1heCwgbW9kZWwsIGJhcldpZHRoQW5kT2Zmc2V0KTtcbiAgICAgIG1pbiA9IGFkanVzdGVkU2NhbGUubWluO1xuICAgICAgbWF4ID0gYWRqdXN0ZWRTY2FsZS5tYXg7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBleHRlbnQ6IFttaW4sIG1heF0sXG4gICAgLy8gXCJmaXhcIiBtZWFucyBcImZpeGVkXCIsIHRoZSB2YWx1ZSBzaG91bGQgbm90IGJlXG4gICAgLy8gY2hhbmdlZCBpbiB0aGUgc3Vic2VxdWVudCBzdGVwcy5cbiAgICBmaXhNaW46IHJhd0V4dGVudFJlc3VsdC5taW5GaXhlZCxcbiAgICBmaXhNYXg6IHJhd0V4dGVudFJlc3VsdC5tYXhGaXhlZFxuICB9O1xufVxuXG5mdW5jdGlvbiBhZGp1c3RTY2FsZUZvck92ZXJmbG93KG1pbiwgbWF4LCBtb2RlbCwgLy8gT25seSBzdXBwb3J0IGNhcnRlc2lhbiBjb29yZCB5ZXQuXG5iYXJXaWR0aEFuZE9mZnNldCkge1xuICAvLyBHZXQgQXhpcyBMZW5ndGhcbiAgdmFyIGF4aXNFeHRlbnQgPSBtb2RlbC5heGlzLmdldEV4dGVudCgpO1xuICB2YXIgYXhpc0xlbmd0aCA9IGF4aXNFeHRlbnRbMV0gLSBheGlzRXh0ZW50WzBdOyAvLyBHZXQgYmFycyBvbiBjdXJyZW50IGJhc2UgYXhpcyBhbmQgY2FsY3VsYXRlIG1pbiBhbmQgbWF4IG92ZXJmbG93XG5cbiAgdmFyIGJhcnNPbkN1cnJlbnRBeGlzID0gcmV0cmlldmVDb2x1bW5MYXlvdXQoYmFyV2lkdGhBbmRPZmZzZXQsIG1vZGVsLmF4aXMpO1xuXG4gIGlmIChiYXJzT25DdXJyZW50QXhpcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1pbjogbWluLFxuICAgICAgbWF4OiBtYXhcbiAgICB9O1xuICB9XG5cbiAgdmFyIG1pbk92ZXJmbG93ID0gSW5maW5pdHk7XG4gIHpyVXRpbC5lYWNoKGJhcnNPbkN1cnJlbnRBeGlzLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgIG1pbk92ZXJmbG93ID0gTWF0aC5taW4oaXRlbS5vZmZzZXQsIG1pbk92ZXJmbG93KTtcbiAgfSk7XG4gIHZhciBtYXhPdmVyZmxvdyA9IC1JbmZpbml0eTtcbiAgenJVdGlsLmVhY2goYmFyc09uQ3VycmVudEF4aXMsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgbWF4T3ZlcmZsb3cgPSBNYXRoLm1heChpdGVtLm9mZnNldCArIGl0ZW0ud2lkdGgsIG1heE92ZXJmbG93KTtcbiAgfSk7XG4gIG1pbk92ZXJmbG93ID0gTWF0aC5hYnMobWluT3ZlcmZsb3cpO1xuICBtYXhPdmVyZmxvdyA9IE1hdGguYWJzKG1heE92ZXJmbG93KTtcbiAgdmFyIHRvdGFsT3ZlckZsb3cgPSBtaW5PdmVyZmxvdyArIG1heE92ZXJmbG93OyAvLyBDYWxjdWxhdGUgcmVxdWlyZWQgYnVmZmVyIGJhc2VkIG9uIG9sZCByYW5nZSBhbmQgb3ZlcmZsb3dcblxuICB2YXIgb2xkUmFuZ2UgPSBtYXggLSBtaW47XG4gIHZhciBvbGRSYW5nZVBlcmNlbnRPZk5ldyA9IDEgLSAobWluT3ZlcmZsb3cgKyBtYXhPdmVyZmxvdykgLyBheGlzTGVuZ3RoO1xuICB2YXIgb3ZlcmZsb3dCdWZmZXIgPSBvbGRSYW5nZSAvIG9sZFJhbmdlUGVyY2VudE9mTmV3IC0gb2xkUmFuZ2U7XG4gIG1heCArPSBvdmVyZmxvd0J1ZmZlciAqIChtYXhPdmVyZmxvdyAvIHRvdGFsT3ZlckZsb3cpO1xuICBtaW4gLT0gb3ZlcmZsb3dCdWZmZXIgKiAobWluT3ZlcmZsb3cgLyB0b3RhbE92ZXJGbG93KTtcbiAgcmV0dXJuIHtcbiAgICBtaW46IG1pbixcbiAgICBtYXg6IG1heFxuICB9O1xufSAvLyBQcmVjb25kaXRpb24gb2YgY2FsbGluZyB0aGlzIG1ldGhvZDpcbi8vIFRoZSBzY2FsZSBleHRlbnQgaGFzIGJlZW4gaW5pdGlhbGl6ZWQgdXNpbmcgc2VyaWVzIGRhdGEgZXh0ZW50IHZpYVxuLy8gYHNjYWxlLnNldEV4dGVudGAgb3IgYHNjYWxlLnVuaW9uRXh0ZW50RnJvbURhdGFgO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBuaWNlU2NhbGVFeHRlbnQoc2NhbGUsIGluTW9kZWwpIHtcbiAgdmFyIG1vZGVsID0gaW5Nb2RlbDtcbiAgdmFyIGV4dGVudEluZm8gPSBnZXRTY2FsZUV4dGVudChzY2FsZSwgbW9kZWwpO1xuICB2YXIgZXh0ZW50ID0gZXh0ZW50SW5mby5leHRlbnQ7XG4gIHZhciBzcGxpdE51bWJlciA9IG1vZGVsLmdldCgnc3BsaXROdW1iZXInKTtcblxuICBpZiAoc2NhbGUgaW5zdGFuY2VvZiBMb2dTY2FsZSkge1xuICAgIHNjYWxlLmJhc2UgPSBtb2RlbC5nZXQoJ2xvZ0Jhc2UnKTtcbiAgfVxuXG4gIHZhciBzY2FsZVR5cGUgPSBzY2FsZS50eXBlO1xuICB2YXIgaW50ZXJ2YWwgPSBtb2RlbC5nZXQoJ2ludGVydmFsJyk7XG4gIHZhciBpc0ludGVydmFsT3JUaW1lID0gc2NhbGVUeXBlID09PSAnaW50ZXJ2YWwnIHx8IHNjYWxlVHlwZSA9PT0gJ3RpbWUnO1xuICBzY2FsZS5zZXRFeHRlbnQoZXh0ZW50WzBdLCBleHRlbnRbMV0pO1xuICBzY2FsZS5jYWxjTmljZUV4dGVudCh7XG4gICAgc3BsaXROdW1iZXI6IHNwbGl0TnVtYmVyLFxuICAgIGZpeE1pbjogZXh0ZW50SW5mby5maXhNaW4sXG4gICAgZml4TWF4OiBleHRlbnRJbmZvLmZpeE1heCxcbiAgICBtaW5JbnRlcnZhbDogaXNJbnRlcnZhbE9yVGltZSA/IG1vZGVsLmdldCgnbWluSW50ZXJ2YWwnKSA6IG51bGwsXG4gICAgbWF4SW50ZXJ2YWw6IGlzSW50ZXJ2YWxPclRpbWUgPyBtb2RlbC5nZXQoJ21heEludGVydmFsJykgOiBudWxsXG4gIH0pOyAvLyBJZiBzb21lIG9uZSBzcGVjaWZpZWQgdGhlIG1pbiwgbWF4LiBBbmQgdGhlIGRlZmF1bHQgY2FsY3VsYXRlZCBpbnRlcnZhbFxuICAvLyBpcyBub3QgZ29vZCBlbm91Z2guIEhlIGNhbiBzcGVjaWZ5IHRoZSBpbnRlcnZhbC4gSXQgaXMgb2Z0ZW4gYXBwZWFyZWRcbiAgLy8gaW4gYW5nbGUgYXhpcyB3aXRoIGFuZ2xlIDAgLSAzNjAuIEludGVydmFsIGNhbGN1bGF0ZWQgaW4gaW50ZXJ2YWwgc2NhbGUgaXMgaGFyZFxuICAvLyB0byBiZSA2MC5cbiAgLy8gRklYTUVcblxuICBpZiAoaW50ZXJ2YWwgIT0gbnVsbCkge1xuICAgIHNjYWxlLnNldEludGVydmFsICYmIHNjYWxlLnNldEludGVydmFsKGludGVydmFsKTtcbiAgfVxufVxuLyoqXHJcbiAqIEBwYXJhbSBheGlzVHlwZSBEZWZhdWx0IHJldHJpZXZlIGZyb20gbW9kZWwudHlwZVxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNjYWxlQnlNb2RlbChtb2RlbCwgYXhpc1R5cGUpIHtcbiAgYXhpc1R5cGUgPSBheGlzVHlwZSB8fCBtb2RlbC5nZXQoJ3R5cGUnKTtcblxuICBpZiAoYXhpc1R5cGUpIHtcbiAgICBzd2l0Y2ggKGF4aXNUeXBlKSB7XG4gICAgICAvLyBCdWlsZGluIHNjYWxlXG4gICAgICBjYXNlICdjYXRlZ29yeSc6XG4gICAgICAgIHJldHVybiBuZXcgT3JkaW5hbFNjYWxlKHtcbiAgICAgICAgICBvcmRpbmFsTWV0YTogbW9kZWwuZ2V0T3JkaW5hbE1ldGEgPyBtb2RlbC5nZXRPcmRpbmFsTWV0YSgpIDogbW9kZWwuZ2V0Q2F0ZWdvcmllcygpLFxuICAgICAgICAgIGV4dGVudDogW0luZmluaXR5LCAtSW5maW5pdHldXG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlICd0aW1lJzpcbiAgICAgICAgcmV0dXJuIG5ldyBUaW1lU2NhbGUoe1xuICAgICAgICAgIGxvY2FsZTogbW9kZWwuZWNNb2RlbC5nZXRMb2NhbGVNb2RlbCgpLFxuICAgICAgICAgIHVzZVVUQzogbW9kZWwuZWNNb2RlbC5nZXQoJ3VzZVVUQycpXG4gICAgICAgIH0pO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICAvLyBjYXNlICd2YWx1ZScvJ2ludGVydmFsJywgJ2xvZycsIG9yIG90aGVycy5cbiAgICAgICAgcmV0dXJuIG5ldyAoU2NhbGUuZ2V0Q2xhc3MoYXhpc1R5cGUpIHx8IEludGVydmFsU2NhbGUpKCk7XG4gICAgfVxuICB9XG59XG4vKipcclxuICogQ2hlY2sgaWYgdGhlIGF4aXMgY3Jvc3MgMFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGlmQXhpc0Nyb3NzWmVybyhheGlzKSB7XG4gIHZhciBkYXRhRXh0ZW50ID0gYXhpcy5zY2FsZS5nZXRFeHRlbnQoKTtcbiAgdmFyIG1pbiA9IGRhdGFFeHRlbnRbMF07XG4gIHZhciBtYXggPSBkYXRhRXh0ZW50WzFdO1xuICByZXR1cm4gIShtaW4gPiAwICYmIG1heCA+IDAgfHwgbWluIDwgMCAmJiBtYXggPCAwKTtcbn1cbi8qKlxyXG4gKiBAcGFyYW0gYXhpc1xyXG4gKiBAcmV0dXJuIExhYmVsIGZvcm1hdHRlciBmdW5jdGlvbi5cclxuICogICAgICAgICBwYXJhbToge251bWJlcn0gdGlja1ZhbHVlLFxyXG4gKiAgICAgICAgIHBhcmFtOiB7bnVtYmVyfSBpZHgsIHRoZSBpbmRleCBpbiBhbGwgdGlja3MuXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgIElmIGNhdGVnb3J5IGF4aXMsIHRoaXMgcGFyYW0gaXMgbm90IHJlcXVpcmVkLlxyXG4gKiAgICAgICAgIHJldHVybjoge3N0cmluZ30gbGFiZWwgc3RyaW5nLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VMYWJlbEZvcm1hdHRlcihheGlzKSB7XG4gIHZhciBsYWJlbEZvcm1hdHRlciA9IGF4aXMuZ2V0TGFiZWxNb2RlbCgpLmdldCgnZm9ybWF0dGVyJyk7XG4gIHZhciBjYXRlZ29yeVRpY2tTdGFydCA9IGF4aXMudHlwZSA9PT0gJ2NhdGVnb3J5JyA/IGF4aXMuc2NhbGUuZ2V0RXh0ZW50KClbMF0gOiBudWxsO1xuXG4gIGlmIChheGlzLnNjYWxlLnR5cGUgPT09ICd0aW1lJykge1xuICAgIHJldHVybiBmdW5jdGlvbiAodHBsKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKHRpY2ssIGlkeCkge1xuICAgICAgICByZXR1cm4gYXhpcy5zY2FsZS5nZXRGb3JtYXR0ZWRMYWJlbCh0aWNrLCBpZHgsIHRwbCk7XG4gICAgICB9O1xuICAgIH0obGFiZWxGb3JtYXR0ZXIpO1xuICB9IGVsc2UgaWYgKHpyVXRpbC5pc1N0cmluZyhsYWJlbEZvcm1hdHRlcikpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRwbCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0aWNrKSB7XG4gICAgICAgIC8vIEZvciBjYXRlZ29yeSBheGlzLCBnZXQgcmF3IHZhbHVlOyBmb3IgbnVtZXJpYyBheGlzLFxuICAgICAgICAvLyBnZXQgZm9ybWF0dGVkIGxhYmVsIGxpa2UgJzEsMzMzLDQ0NCcuXG4gICAgICAgIHZhciBsYWJlbCA9IGF4aXMuc2NhbGUuZ2V0TGFiZWwodGljayk7XG4gICAgICAgIHZhciB0ZXh0ID0gdHBsLnJlcGxhY2UoJ3t2YWx1ZX0nLCBsYWJlbCAhPSBudWxsID8gbGFiZWwgOiAnJyk7XG4gICAgICAgIHJldHVybiB0ZXh0O1xuICAgICAgfTtcbiAgICB9KGxhYmVsRm9ybWF0dGVyKTtcbiAgfSBlbHNlIGlmICh6clV0aWwuaXNGdW5jdGlvbihsYWJlbEZvcm1hdHRlcikpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGNiKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKHRpY2ssIGlkeCkge1xuICAgICAgICAvLyBUaGUgb3JpZ2luYWwgaW50ZW50aW9uIG9mIGBpZHhgIGlzIFwidGhlIGluZGV4IG9mIHRoZSB0aWNrIGluIGFsbCB0aWNrc1wiLlxuICAgICAgICAvLyBCdXQgdGhlIHByZXZpb3VzIGltcGxlbWVudGF0aW9uIG9mIGNhdGVnb3J5IGF4aXMgZG8gbm90IGNvbnNpZGVyIHRoZVxuICAgICAgICAvLyBgYXhpc0xhYmVsLmludGVydmFsYCwgd2hpY2ggY2F1c2UgdGhhdCwgZm9yIGV4YW1wbGUsIHRoZSBgaW50ZXJ2YWxgIGlzXG4gICAgICAgIC8vIGAxYCwgdGhlbiB0aGUgdGlja3MgXCJuYW1lNVwiLCBcIm5hbWU3XCIsIFwibmFtZTlcIiBhcmUgZGlzcGxheWVkLCB3aGVyZSB0aGVcbiAgICAgICAgLy8gY29ycmVzcG9uZGluZyBgaWR4YCBhcmUgYDBgLCBgMmAsIGA0YCwgYnV0IG5vdCBgMGAsIGAxYCwgYDJgLiBTbyB3ZSBrZWVwXG4gICAgICAgIC8vIHRoZSBkZWZpbml0aW9uIGhlcmUgZm9yIGJhY2sgY29tcGF0aWJpbGl0eS5cbiAgICAgICAgaWYgKGNhdGVnb3J5VGlja1N0YXJ0ICE9IG51bGwpIHtcbiAgICAgICAgICBpZHggPSB0aWNrLnZhbHVlIC0gY2F0ZWdvcnlUaWNrU3RhcnQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2IoZ2V0QXhpc1Jhd1ZhbHVlKGF4aXMsIHRpY2spLCBpZHgsIHRpY2subGV2ZWwgIT0gbnVsbCA/IHtcbiAgICAgICAgICBsZXZlbDogdGljay5sZXZlbFxuICAgICAgICB9IDogbnVsbCk7XG4gICAgICB9O1xuICAgIH0obGFiZWxGb3JtYXR0ZXIpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGljaykge1xuICAgICAgcmV0dXJuIGF4aXMuc2NhbGUuZ2V0TGFiZWwodGljayk7XG4gICAgfTtcbiAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEF4aXNSYXdWYWx1ZShheGlzLCB0aWNrKSB7XG4gIC8vIEluIGNhdGVnb3J5IGF4aXMgd2l0aCBkYXRhIHpvb20sIHRpY2sgaXMgbm90IHRoZSBvcmlnaW5hbFxuICAvLyBpbmRleCBvZiBheGlzLmRhdGEuIFNvIHRpY2sgc2hvdWxkIG5vdCBiZSBleHBvc2VkIHRvIHVzZXJcbiAgLy8gaW4gY2F0ZWdvcnkgYXhpcy5cbiAgcmV0dXJuIGF4aXMudHlwZSA9PT0gJ2NhdGVnb3J5JyA/IGF4aXMuc2NhbGUuZ2V0TGFiZWwodGljaykgOiB0aWNrLnZhbHVlO1xufVxuLyoqXHJcbiAqIEBwYXJhbSBheGlzXHJcbiAqIEByZXR1cm4gQmUgbnVsbC91bmRlZmluZWQgaWYgbm8gbGFiZWxzLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGVzdGltYXRlTGFiZWxVbmlvblJlY3QoYXhpcykge1xuICB2YXIgYXhpc01vZGVsID0gYXhpcy5tb2RlbDtcbiAgdmFyIHNjYWxlID0gYXhpcy5zY2FsZTtcblxuICBpZiAoIWF4aXNNb2RlbC5nZXQoWydheGlzTGFiZWwnLCAnc2hvdyddKSB8fCBzY2FsZS5pc0JsYW5rKCkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgcmVhbE51bWJlclNjYWxlVGlja3M7XG4gIHZhciB0aWNrQ291bnQ7XG4gIHZhciBjYXRlZ29yeVNjYWxlRXh0ZW50ID0gc2NhbGUuZ2V0RXh0ZW50KCk7IC8vIE9wdGltaXplIGZvciBsYXJnZSBjYXRlZ29yeSBkYXRhLCBhdm9pZCBjYWxsIGBnZXRUaWNrcygpYC5cblxuICBpZiAoc2NhbGUgaW5zdGFuY2VvZiBPcmRpbmFsU2NhbGUpIHtcbiAgICB0aWNrQ291bnQgPSBzY2FsZS5jb3VudCgpO1xuICB9IGVsc2Uge1xuICAgIHJlYWxOdW1iZXJTY2FsZVRpY2tzID0gc2NhbGUuZ2V0VGlja3MoKTtcbiAgICB0aWNrQ291bnQgPSByZWFsTnVtYmVyU2NhbGVUaWNrcy5sZW5ndGg7XG4gIH1cblxuICB2YXIgYXhpc0xhYmVsTW9kZWwgPSBheGlzLmdldExhYmVsTW9kZWwoKTtcbiAgdmFyIGxhYmVsRm9ybWF0dGVyID0gbWFrZUxhYmVsRm9ybWF0dGVyKGF4aXMpO1xuICB2YXIgcmVjdDtcbiAgdmFyIHN0ZXAgPSAxOyAvLyBTaW1wbGUgb3B0aW1pemF0aW9uIGZvciBsYXJnZSBhbW91bnQgb2YgbGFiZWxzXG5cbiAgaWYgKHRpY2tDb3VudCA+IDQwKSB7XG4gICAgc3RlcCA9IE1hdGguY2VpbCh0aWNrQ291bnQgLyA0MCk7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRpY2tDb3VudDsgaSArPSBzdGVwKSB7XG4gICAgdmFyIHRpY2sgPSByZWFsTnVtYmVyU2NhbGVUaWNrcyA/IHJlYWxOdW1iZXJTY2FsZVRpY2tzW2ldIDoge1xuICAgICAgdmFsdWU6IGNhdGVnb3J5U2NhbGVFeHRlbnRbMF0gKyBpXG4gICAgfTtcbiAgICB2YXIgbGFiZWwgPSBsYWJlbEZvcm1hdHRlcih0aWNrLCBpKTtcbiAgICB2YXIgdW5yb3RhdGVkU2luZ2xlUmVjdCA9IGF4aXNMYWJlbE1vZGVsLmdldFRleHRSZWN0KGxhYmVsKTtcbiAgICB2YXIgc2luZ2xlUmVjdCA9IHJvdGF0ZVRleHRSZWN0KHVucm90YXRlZFNpbmdsZVJlY3QsIGF4aXNMYWJlbE1vZGVsLmdldCgncm90YXRlJykgfHwgMCk7XG4gICAgcmVjdCA/IHJlY3QudW5pb24oc2luZ2xlUmVjdCkgOiByZWN0ID0gc2luZ2xlUmVjdDtcbiAgfVxuXG4gIHJldHVybiByZWN0O1xufVxuXG5mdW5jdGlvbiByb3RhdGVUZXh0UmVjdCh0ZXh0UmVjdCwgcm90YXRlKSB7XG4gIHZhciByb3RhdGVSYWRpYW5zID0gcm90YXRlICogTWF0aC5QSSAvIDE4MDtcbiAgdmFyIGJlZm9yZVdpZHRoID0gdGV4dFJlY3Qud2lkdGg7XG4gIHZhciBiZWZvcmVIZWlnaHQgPSB0ZXh0UmVjdC5oZWlnaHQ7XG4gIHZhciBhZnRlcldpZHRoID0gYmVmb3JlV2lkdGggKiBNYXRoLmFicyhNYXRoLmNvcyhyb3RhdGVSYWRpYW5zKSkgKyBNYXRoLmFicyhiZWZvcmVIZWlnaHQgKiBNYXRoLnNpbihyb3RhdGVSYWRpYW5zKSk7XG4gIHZhciBhZnRlckhlaWdodCA9IGJlZm9yZVdpZHRoICogTWF0aC5hYnMoTWF0aC5zaW4ocm90YXRlUmFkaWFucykpICsgTWF0aC5hYnMoYmVmb3JlSGVpZ2h0ICogTWF0aC5jb3Mocm90YXRlUmFkaWFucykpO1xuICB2YXIgcm90YXRlZFJlY3QgPSBuZXcgQm91bmRpbmdSZWN0KHRleHRSZWN0LngsIHRleHRSZWN0LnksIGFmdGVyV2lkdGgsIGFmdGVySGVpZ2h0KTtcbiAgcmV0dXJuIHJvdGF0ZWRSZWN0O1xufVxuLyoqXHJcbiAqIEBwYXJhbSBtb2RlbCBheGlzTGFiZWxNb2RlbCBvciBheGlzVGlja01vZGVsXHJcbiAqIEByZXR1cm4ge251bWJlcnxTdHJpbmd9IENhbiBiZSBudWxsfCdhdXRvJ3xudW1iZXJ8ZnVuY3Rpb25cclxuICovXG5cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE9wdGlvbkNhdGVnb3J5SW50ZXJ2YWwobW9kZWwpIHtcbiAgdmFyIGludGVydmFsID0gbW9kZWwuZ2V0KCdpbnRlcnZhbCcpO1xuICByZXR1cm4gaW50ZXJ2YWwgPT0gbnVsbCA/ICdhdXRvJyA6IGludGVydmFsO1xufVxuLyoqXHJcbiAqIFNldCBgY2F0ZWdvcnlJbnRlcnZhbGAgYXMgMCBpbXBsaWNpdGx5IGluZGljYXRlcyB0aGF0XHJcbiAqIHNob3cgYWxsIGxhYmVscyByZWdhcmRsZXNzIG9mIG92ZXJsYXAuXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBheGlzIGF4aXNNb2RlbC5heGlzXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2hvdWxkU2hvd0FsbExhYmVscyhheGlzKSB7XG4gIHJldHVybiBheGlzLnR5cGUgPT09ICdjYXRlZ29yeScgJiYgZ2V0T3B0aW9uQ2F0ZWdvcnlJbnRlcnZhbChheGlzLmdldExhYmVsTW9kZWwoKSkgPT09IDA7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF0YURpbWVuc2lvbnNPbkF4aXMoZGF0YSwgYXhpc0RpbSkge1xuICAvLyBSZW1vdmUgZHVwbGljYXRlZCBkYXQgZGltZW5zaW9ucyBjYXVzZWQgYnkgYGdldFN0YWNrZWREaW1lbnNpb25gLlxuICB2YXIgZGF0YURpbU1hcCA9IHt9OyAvLyBDdXJyZW50bHkgYG1hcERpbWVuc2lvbnNBbGxgIHdpbGwgY29udGFpbiBzdGFjayByZXN1bHQgZGltZW5zaW9uICgnX19cXDBlY3N0YWNrcmVzdWx0JykuXG4gIC8vIFBFTkRJTkc6IGlzIGl0IHJlYXNvbmFibGU/IERvIHdlIG5lZWQgdG8gcmVtb3ZlIHRoZSBvcmlnaW5hbCBkaW0gZnJvbSBcImNvb3JkIGRpbVwiIHNpbmNlXG4gIC8vIHRoZXJlIGhhcyBiZWVuIHN0YWNrZWQgcmVzdWx0IGRpbT9cblxuICB6clV0aWwuZWFjaChkYXRhLm1hcERpbWVuc2lvbnNBbGwoYXhpc0RpbSksIGZ1bmN0aW9uIChkYXRhRGltKSB7XG4gICAgLy8gRm9yIGV4YW1wbGUsIHRoZSBleHRlbnQgb2YgdGhlIG9yaWdpbmFsIGRpbWVuc2lvblxuICAgIC8vIGlzIFswLjEsIDAuNV0sIHRoZSBleHRlbnQgb2YgdGhlIGBzdGFja1Jlc3VsdERpbWVuc2lvbmBcbiAgICAvLyBpcyBbNywgOV0sIHRoZSBmaW5hbCBleHRlbnQgc2hvdWxkIE5PVCBpbmNsdWRlIFswLjEsIDAuNV0sXG4gICAgLy8gYmVjYXVzZSB0aGVyZSBpcyBubyBncmFwaGljIGNvcnJlc3BvbmRpbmcgdG8gWzAuMSwgMC41XS5cbiAgICAvLyBTZWUgdGhlIGNhc2UgaW4gYHRlc3QvYXJlYS1zdGFjay5odG1sYCBgbWFpbjFgLCB3aGVyZSBhcmVhIGxpbmVcbiAgICAvLyBzdGFjayBuZWVkcyBgeUF4aXNgIG5vdCBzdGFydCBmcm9tIDAuXG4gICAgZGF0YURpbU1hcFtnZXRTdGFja2VkRGltZW5zaW9uKGRhdGEsIGRhdGFEaW0pXSA9IHRydWU7XG4gIH0pO1xuICByZXR1cm4genJVdGlsLmtleXMoZGF0YURpbU1hcCk7XG59XG5leHBvcnQgZnVuY3Rpb24gdW5pb25BeGlzRXh0ZW50RnJvbURhdGEoZGF0YUV4dGVudCwgZGF0YSwgYXhpc0RpbSkge1xuICBpZiAoZGF0YSkge1xuICAgIHpyVXRpbC5lYWNoKGdldERhdGFEaW1lbnNpb25zT25BeGlzKGRhdGEsIGF4aXNEaW0pLCBmdW5jdGlvbiAoZGltKSB7XG4gICAgICB2YXIgc2VyaWVzRXh0ZW50ID0gZGF0YS5nZXRBcHByb3hpbWF0ZUV4dGVudChkaW0pO1xuICAgICAgc2VyaWVzRXh0ZW50WzBdIDwgZGF0YUV4dGVudFswXSAmJiAoZGF0YUV4dGVudFswXSA9IHNlcmllc0V4dGVudFswXSk7XG4gICAgICBzZXJpZXNFeHRlbnRbMV0gPiBkYXRhRXh0ZW50WzFdICYmIChkYXRhRXh0ZW50WzFdID0gc2VyaWVzRXh0ZW50WzFdKTtcbiAgICB9KTtcbiAgfVxufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgcmVnaXN0ZXJQcmVwcm9jZXNzb3IsIHJlZ2lzdGVyUHJvY2Vzc29yLCByZWdpc3RlclBvc3RJbml0LCByZWdpc3RlclBvc3RVcGRhdGUsIHJlZ2lzdGVyQWN0aW9uLCByZWdpc3RlckNvb3JkaW5hdGVTeXN0ZW0sIHJlZ2lzdGVyTGF5b3V0LCByZWdpc3RlclZpc3VhbCwgcmVnaXN0ZXJUcmFuc2Zvcm0sIHJlZ2lzdGVyTG9hZGluZywgcmVnaXN0ZXJNYXAsIHJlZ2lzdGVyVXBkYXRlTGlmZWN5Y2xlLCBQUklPUklUWSB9IGZyb20gJy4vY29yZS9lY2hhcnRzLmpzJztcbmltcG9ydCBDb21wb25lbnRWaWV3IGZyb20gJy4vdmlldy9Db21wb25lbnQuanMnO1xuaW1wb3J0IENoYXJ0VmlldyBmcm9tICcuL3ZpZXcvQ2hhcnQuanMnO1xuaW1wb3J0IENvbXBvbmVudE1vZGVsIGZyb20gJy4vbW9kZWwvQ29tcG9uZW50LmpzJztcbmltcG9ydCBTZXJpZXNNb2RlbCBmcm9tICcuL21vZGVsL1Nlcmllcy5qcyc7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uLCBpbmRleE9mLCBpc0FycmF5LCBlYWNoIH0gZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbmltcG9ydCB7IHJlZ2lzdGVySW1wbCB9IGZyb20gJy4vY29yZS9pbXBsLmpzJztcbmltcG9ydCB7IHJlZ2lzdGVyUGFpbnRlciB9IGZyb20gJ3pyZW5kZXIvbGliL3pyZW5kZXIuanMnO1xudmFyIGV4dGVuc2lvbnMgPSBbXTtcbnZhciBleHRlbnNpb25SZWdpc3RlcnMgPSB7XG4gIHJlZ2lzdGVyUHJlcHJvY2Vzc29yOiByZWdpc3RlclByZXByb2Nlc3NvcixcbiAgcmVnaXN0ZXJQcm9jZXNzb3I6IHJlZ2lzdGVyUHJvY2Vzc29yLFxuICByZWdpc3RlclBvc3RJbml0OiByZWdpc3RlclBvc3RJbml0LFxuICByZWdpc3RlclBvc3RVcGRhdGU6IHJlZ2lzdGVyUG9zdFVwZGF0ZSxcbiAgcmVnaXN0ZXJVcGRhdGVMaWZlY3ljbGU6IHJlZ2lzdGVyVXBkYXRlTGlmZWN5Y2xlLFxuICByZWdpc3RlckFjdGlvbjogcmVnaXN0ZXJBY3Rpb24sXG4gIHJlZ2lzdGVyQ29vcmRpbmF0ZVN5c3RlbTogcmVnaXN0ZXJDb29yZGluYXRlU3lzdGVtLFxuICByZWdpc3RlckxheW91dDogcmVnaXN0ZXJMYXlvdXQsXG4gIHJlZ2lzdGVyVmlzdWFsOiByZWdpc3RlclZpc3VhbCxcbiAgcmVnaXN0ZXJUcmFuc2Zvcm06IHJlZ2lzdGVyVHJhbnNmb3JtLFxuICByZWdpc3RlckxvYWRpbmc6IHJlZ2lzdGVyTG9hZGluZyxcbiAgcmVnaXN0ZXJNYXA6IHJlZ2lzdGVyTWFwLFxuICByZWdpc3RlckltcGw6IHJlZ2lzdGVySW1wbCxcbiAgUFJJT1JJVFk6IFBSSU9SSVRZLFxuICBDb21wb25lbnRNb2RlbDogQ29tcG9uZW50TW9kZWwsXG4gIENvbXBvbmVudFZpZXc6IENvbXBvbmVudFZpZXcsXG4gIFNlcmllc01vZGVsOiBTZXJpZXNNb2RlbCxcbiAgQ2hhcnRWaWV3OiBDaGFydFZpZXcsXG4gIC8vIFRPRE8gVXNlIENvbXBvbmVudE1vZGVsIGFuZCBTZXJpZXNNb2RlbCBpbnN0ZWFkIG9mIENvbnN0cnVjdG9yXG4gIHJlZ2lzdGVyQ29tcG9uZW50TW9kZWw6IGZ1bmN0aW9uIChDb21wb25lbnRNb2RlbENsYXNzKSB7XG4gICAgQ29tcG9uZW50TW9kZWwucmVnaXN0ZXJDbGFzcyhDb21wb25lbnRNb2RlbENsYXNzKTtcbiAgfSxcbiAgcmVnaXN0ZXJDb21wb25lbnRWaWV3OiBmdW5jdGlvbiAoQ29tcG9uZW50Vmlld0NsYXNzKSB7XG4gICAgQ29tcG9uZW50Vmlldy5yZWdpc3RlckNsYXNzKENvbXBvbmVudFZpZXdDbGFzcyk7XG4gIH0sXG4gIHJlZ2lzdGVyU2VyaWVzTW9kZWw6IGZ1bmN0aW9uIChTZXJpZXNNb2RlbENsYXNzKSB7XG4gICAgU2VyaWVzTW9kZWwucmVnaXN0ZXJDbGFzcyhTZXJpZXNNb2RlbENsYXNzKTtcbiAgfSxcbiAgcmVnaXN0ZXJDaGFydFZpZXc6IGZ1bmN0aW9uIChDaGFydFZpZXdDbGFzcykge1xuICAgIENoYXJ0Vmlldy5yZWdpc3RlckNsYXNzKENoYXJ0Vmlld0NsYXNzKTtcbiAgfSxcbiAgcmVnaXN0ZXJTdWJUeXBlRGVmYXVsdGVyOiBmdW5jdGlvbiAoY29tcG9uZW50VHlwZSwgZGVmYXVsdGVyKSB7XG4gICAgQ29tcG9uZW50TW9kZWwucmVnaXN0ZXJTdWJUeXBlRGVmYXVsdGVyKGNvbXBvbmVudFR5cGUsIGRlZmF1bHRlcik7XG4gIH0sXG4gIHJlZ2lzdGVyUGFpbnRlcjogZnVuY3Rpb24gKHBhaW50ZXJUeXBlLCBQYWludGVyQ3Rvcikge1xuICAgIHJlZ2lzdGVyUGFpbnRlcihwYWludGVyVHlwZSwgUGFpbnRlckN0b3IpO1xuICB9XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHVzZShleHQpIHtcbiAgaWYgKGlzQXJyYXkoZXh0KSkge1xuICAgIC8vIHVzZShbQ2hhcnRMaW5lLCBDaGFydEJhcl0pO1xuICAgIGVhY2goZXh0LCBmdW5jdGlvbiAoc2luZ2xlRXh0KSB7XG4gICAgICB1c2Uoc2luZ2xlRXh0KTtcbiAgICB9KTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoaW5kZXhPZihleHRlbnNpb25zLCBleHQpID49IDApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBleHRlbnNpb25zLnB1c2goZXh0KTtcblxuICBpZiAoaXNGdW5jdGlvbihleHQpKSB7XG4gICAgZXh0ID0ge1xuICAgICAgaW5zdGFsbDogZXh0XG4gICAgfTtcbiAgfVxuXG4gIGV4dC5pbnN0YWxsKGV4dGVuc2lvblJlZ2lzdGVycyk7XG59IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgeyBQb2ludCwgUGF0aCwgUG9seWxpbmUgfSBmcm9tICcuLi91dGlsL2dyYXBoaWMuanMnO1xuaW1wb3J0IFBhdGhQcm94eSBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL1BhdGhQcm94eS5qcyc7XG5pbXBvcnQgeyBub3JtYWxpemVSYWRpYW4gfSBmcm9tICd6cmVuZGVyL2xpYi9jb250YWluL3V0aWwuanMnO1xuaW1wb3J0IHsgY3ViaWNQcm9qZWN0UG9pbnQsIHF1YWRyYXRpY1Byb2plY3RQb2ludCB9IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvY3VydmUuanMnO1xuaW1wb3J0IHsgZGVmYXVsdHMsIHJldHJpZXZlMiB9IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgeyBpbnZlcnQgfSBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL21hdHJpeC5qcyc7XG5pbXBvcnQgKiBhcyB2ZWN0b3IgZnJvbSAnenJlbmRlci9saWIvY29yZS92ZWN0b3IuanMnO1xuaW1wb3J0IHsgRElTUExBWV9TVEFURVMsIFNQRUNJQUxfU1RBVEVTIH0gZnJvbSAnLi4vdXRpbC9zdGF0ZXMuanMnO1xudmFyIFBJMiA9IE1hdGguUEkgKiAyO1xudmFyIENNRCA9IFBhdGhQcm94eS5DTUQ7XG52YXIgREVGQVVMVF9TRUFSQ0hfU1BBQ0UgPSBbJ3RvcCcsICdyaWdodCcsICdib3R0b20nLCAnbGVmdCddO1xuXG5mdW5jdGlvbiBnZXRDYW5kaWRhdGVBbmNob3IocG9zLCBkaXN0YW5jZSwgcmVjdCwgb3V0UHQsIG91dERpcikge1xuICB2YXIgd2lkdGggPSByZWN0LndpZHRoO1xuICB2YXIgaGVpZ2h0ID0gcmVjdC5oZWlnaHQ7XG5cbiAgc3dpdGNoIChwb3MpIHtcbiAgICBjYXNlICd0b3AnOlxuICAgICAgb3V0UHQuc2V0KHJlY3QueCArIHdpZHRoIC8gMiwgcmVjdC55IC0gZGlzdGFuY2UpO1xuICAgICAgb3V0RGlyLnNldCgwLCAtMSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2JvdHRvbSc6XG4gICAgICBvdXRQdC5zZXQocmVjdC54ICsgd2lkdGggLyAyLCByZWN0LnkgKyBoZWlnaHQgKyBkaXN0YW5jZSk7XG4gICAgICBvdXREaXIuc2V0KDAsIDEpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdsZWZ0JzpcbiAgICAgIG91dFB0LnNldChyZWN0LnggLSBkaXN0YW5jZSwgcmVjdC55ICsgaGVpZ2h0IC8gMik7XG4gICAgICBvdXREaXIuc2V0KC0xLCAwKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAncmlnaHQnOlxuICAgICAgb3V0UHQuc2V0KHJlY3QueCArIHdpZHRoICsgZGlzdGFuY2UsIHJlY3QueSArIGhlaWdodCAvIDIpO1xuICAgICAgb3V0RGlyLnNldCgxLCAwKTtcbiAgICAgIGJyZWFrO1xuICB9XG59XG5cbmZ1bmN0aW9uIHByb2plY3RQb2ludFRvQXJjKGN4LCBjeSwgciwgc3RhcnRBbmdsZSwgZW5kQW5nbGUsIGFudGljbG9ja3dpc2UsIHgsIHksIG91dCkge1xuICB4IC09IGN4O1xuICB5IC09IGN5O1xuICB2YXIgZCA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5KTtcbiAgeCAvPSBkO1xuICB5IC89IGQ7IC8vIEludGVyc2VjdCBwb2ludC5cblxuICB2YXIgb3ggPSB4ICogciArIGN4O1xuICB2YXIgb3kgPSB5ICogciArIGN5O1xuXG4gIGlmIChNYXRoLmFicyhzdGFydEFuZ2xlIC0gZW5kQW5nbGUpICUgUEkyIDwgMWUtNCkge1xuICAgIC8vIElzIGEgY2lyY2xlXG4gICAgb3V0WzBdID0gb3g7XG4gICAgb3V0WzFdID0gb3k7XG4gICAgcmV0dXJuIGQgLSByO1xuICB9XG5cbiAgaWYgKGFudGljbG9ja3dpc2UpIHtcbiAgICB2YXIgdG1wID0gc3RhcnRBbmdsZTtcbiAgICBzdGFydEFuZ2xlID0gbm9ybWFsaXplUmFkaWFuKGVuZEFuZ2xlKTtcbiAgICBlbmRBbmdsZSA9IG5vcm1hbGl6ZVJhZGlhbih0bXApO1xuICB9IGVsc2Uge1xuICAgIHN0YXJ0QW5nbGUgPSBub3JtYWxpemVSYWRpYW4oc3RhcnRBbmdsZSk7XG4gICAgZW5kQW5nbGUgPSBub3JtYWxpemVSYWRpYW4oZW5kQW5nbGUpO1xuICB9XG5cbiAgaWYgKHN0YXJ0QW5nbGUgPiBlbmRBbmdsZSkge1xuICAgIGVuZEFuZ2xlICs9IFBJMjtcbiAgfVxuXG4gIHZhciBhbmdsZSA9IE1hdGguYXRhbjIoeSwgeCk7XG5cbiAgaWYgKGFuZ2xlIDwgMCkge1xuICAgIGFuZ2xlICs9IFBJMjtcbiAgfVxuXG4gIGlmIChhbmdsZSA+PSBzdGFydEFuZ2xlICYmIGFuZ2xlIDw9IGVuZEFuZ2xlIHx8IGFuZ2xlICsgUEkyID49IHN0YXJ0QW5nbGUgJiYgYW5nbGUgKyBQSTIgPD0gZW5kQW5nbGUpIHtcbiAgICAvLyBQcm9qZWN0IHBvaW50IGlzIG9uIHRoZSBhcmMuXG4gICAgb3V0WzBdID0gb3g7XG4gICAgb3V0WzFdID0gb3k7XG4gICAgcmV0dXJuIGQgLSByO1xuICB9XG5cbiAgdmFyIHgxID0gciAqIE1hdGguY29zKHN0YXJ0QW5nbGUpICsgY3g7XG4gIHZhciB5MSA9IHIgKiBNYXRoLnNpbihzdGFydEFuZ2xlKSArIGN5O1xuICB2YXIgeDIgPSByICogTWF0aC5jb3MoZW5kQW5nbGUpICsgY3g7XG4gIHZhciB5MiA9IHIgKiBNYXRoLnNpbihlbmRBbmdsZSkgKyBjeTtcbiAgdmFyIGQxID0gKHgxIC0geCkgKiAoeDEgLSB4KSArICh5MSAtIHkpICogKHkxIC0geSk7XG4gIHZhciBkMiA9ICh4MiAtIHgpICogKHgyIC0geCkgKyAoeTIgLSB5KSAqICh5MiAtIHkpO1xuXG4gIGlmIChkMSA8IGQyKSB7XG4gICAgb3V0WzBdID0geDE7XG4gICAgb3V0WzFdID0geTE7XG4gICAgcmV0dXJuIE1hdGguc3FydChkMSk7XG4gIH0gZWxzZSB7XG4gICAgb3V0WzBdID0geDI7XG4gICAgb3V0WzFdID0geTI7XG4gICAgcmV0dXJuIE1hdGguc3FydChkMik7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJvamVjdFBvaW50VG9MaW5lKHgxLCB5MSwgeDIsIHkyLCB4LCB5LCBvdXQsIGxpbWl0VG9FbmRzKSB7XG4gIHZhciBkeCA9IHggLSB4MTtcbiAgdmFyIGR5ID0geSAtIHkxO1xuICB2YXIgZHgxID0geDIgLSB4MTtcbiAgdmFyIGR5MSA9IHkyIC0geTE7XG4gIHZhciBsaW5lTGVuID0gTWF0aC5zcXJ0KGR4MSAqIGR4MSArIGR5MSAqIGR5MSk7XG4gIGR4MSAvPSBsaW5lTGVuO1xuICBkeTEgLz0gbGluZUxlbjsgLy8gZG90IHByb2R1Y3RcblxuICB2YXIgcHJvamVjdGVkTGVuID0gZHggKiBkeDEgKyBkeSAqIGR5MTtcbiAgdmFyIHQgPSBwcm9qZWN0ZWRMZW4gLyBsaW5lTGVuO1xuXG4gIGlmIChsaW1pdFRvRW5kcykge1xuICAgIHQgPSBNYXRoLm1pbihNYXRoLm1heCh0LCAwKSwgMSk7XG4gIH1cblxuICB0ICo9IGxpbmVMZW47XG4gIHZhciBveCA9IG91dFswXSA9IHgxICsgdCAqIGR4MTtcbiAgdmFyIG95ID0gb3V0WzFdID0geTEgKyB0ICogZHkxO1xuICByZXR1cm4gTWF0aC5zcXJ0KChveCAtIHgpICogKG94IC0geCkgKyAob3kgLSB5KSAqIChveSAtIHkpKTtcbn1cblxuZnVuY3Rpb24gcHJvamVjdFBvaW50VG9SZWN0KHgxLCB5MSwgd2lkdGgsIGhlaWdodCwgeCwgeSwgb3V0KSB7XG4gIGlmICh3aWR0aCA8IDApIHtcbiAgICB4MSA9IHgxICsgd2lkdGg7XG4gICAgd2lkdGggPSAtd2lkdGg7XG4gIH1cblxuICBpZiAoaGVpZ2h0IDwgMCkge1xuICAgIHkxID0geTEgKyBoZWlnaHQ7XG4gICAgaGVpZ2h0ID0gLWhlaWdodDtcbiAgfVxuXG4gIHZhciB4MiA9IHgxICsgd2lkdGg7XG4gIHZhciB5MiA9IHkxICsgaGVpZ2h0O1xuICB2YXIgb3ggPSBvdXRbMF0gPSBNYXRoLm1pbihNYXRoLm1heCh4LCB4MSksIHgyKTtcbiAgdmFyIG95ID0gb3V0WzFdID0gTWF0aC5taW4oTWF0aC5tYXgoeSwgeTEpLCB5Mik7XG4gIHJldHVybiBNYXRoLnNxcnQoKG94IC0geCkgKiAob3ggLSB4KSArIChveSAtIHkpICogKG95IC0geSkpO1xufVxuXG52YXIgdG1wUHQgPSBbXTtcblxuZnVuY3Rpb24gbmVhcmVzdFBvaW50T25SZWN0KHB0LCByZWN0LCBvdXQpIHtcbiAgdmFyIGRpc3QgPSBwcm9qZWN0UG9pbnRUb1JlY3QocmVjdC54LCByZWN0LnksIHJlY3Qud2lkdGgsIHJlY3QuaGVpZ2h0LCBwdC54LCBwdC55LCB0bXBQdCk7XG4gIG91dC5zZXQodG1wUHRbMF0sIHRtcFB0WzFdKTtcbiAgcmV0dXJuIGRpc3Q7XG59XG4vKipcclxuICogQ2FsY3VsYXRlIG1pbiBkaXN0YW5jZSBjb3JyZXNwb25kaW5nIHBvaW50LlxyXG4gKiBUaGlzIG1ldGhvZCB3b24ndCBldmFsdWF0ZSBpZiBwb2ludCBpcyBpbiB0aGUgcGF0aC5cclxuICovXG5cblxuZnVuY3Rpb24gbmVhcmVzdFBvaW50T25QYXRoKHB0LCBwYXRoLCBvdXQpIHtcbiAgdmFyIHhpID0gMDtcbiAgdmFyIHlpID0gMDtcbiAgdmFyIHgwID0gMDtcbiAgdmFyIHkwID0gMDtcbiAgdmFyIHgxO1xuICB2YXIgeTE7XG4gIHZhciBtaW5EaXN0ID0gSW5maW5pdHk7XG4gIHZhciBkYXRhID0gcGF0aC5kYXRhO1xuICB2YXIgeCA9IHB0Lng7XG4gIHZhciB5ID0gcHQueTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOykge1xuICAgIHZhciBjbWQgPSBkYXRhW2krK107XG5cbiAgICBpZiAoaSA9PT0gMSkge1xuICAgICAgeGkgPSBkYXRhW2ldO1xuICAgICAgeWkgPSBkYXRhW2kgKyAxXTtcbiAgICAgIHgwID0geGk7XG4gICAgICB5MCA9IHlpO1xuICAgIH1cblxuICAgIHZhciBkID0gbWluRGlzdDtcblxuICAgIHN3aXRjaCAoY21kKSB7XG4gICAgICBjYXNlIENNRC5NOlxuICAgICAgICAvLyBtb3ZlVG8g5ZG95Luk6YeN5paw5Yib5bu65LiA5Liq5paw55qEIHN1YnBhdGgsIOW5tuS4lOabtOaWsOaWsOeahOi1t+eCuVxuICAgICAgICAvLyDlnKggY2xvc2VQYXRoIOeahOaXtuWAmeS9v+eUqFxuICAgICAgICB4MCA9IGRhdGFbaSsrXTtcbiAgICAgICAgeTAgPSBkYXRhW2krK107XG4gICAgICAgIHhpID0geDA7XG4gICAgICAgIHlpID0geTA7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIENNRC5MOlxuICAgICAgICBkID0gcHJvamVjdFBvaW50VG9MaW5lKHhpLCB5aSwgZGF0YVtpXSwgZGF0YVtpICsgMV0sIHgsIHksIHRtcFB0LCB0cnVlKTtcbiAgICAgICAgeGkgPSBkYXRhW2krK107XG4gICAgICAgIHlpID0gZGF0YVtpKytdO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBDTUQuQzpcbiAgICAgICAgZCA9IGN1YmljUHJvamVjdFBvaW50KHhpLCB5aSwgZGF0YVtpKytdLCBkYXRhW2krK10sIGRhdGFbaSsrXSwgZGF0YVtpKytdLCBkYXRhW2ldLCBkYXRhW2kgKyAxXSwgeCwgeSwgdG1wUHQpO1xuICAgICAgICB4aSA9IGRhdGFbaSsrXTtcbiAgICAgICAgeWkgPSBkYXRhW2krK107XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIENNRC5ROlxuICAgICAgICBkID0gcXVhZHJhdGljUHJvamVjdFBvaW50KHhpLCB5aSwgZGF0YVtpKytdLCBkYXRhW2krK10sIGRhdGFbaV0sIGRhdGFbaSArIDFdLCB4LCB5LCB0bXBQdCk7XG4gICAgICAgIHhpID0gZGF0YVtpKytdO1xuICAgICAgICB5aSA9IGRhdGFbaSsrXTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgQ01ELkE6XG4gICAgICAgIC8vIFRPRE8gQXJjIOWIpOaWreeahOW8gOmUgOavlOi+g+Wkp1xuICAgICAgICB2YXIgY3ggPSBkYXRhW2krK107XG4gICAgICAgIHZhciBjeSA9IGRhdGFbaSsrXTtcbiAgICAgICAgdmFyIHJ4ID0gZGF0YVtpKytdO1xuICAgICAgICB2YXIgcnkgPSBkYXRhW2krK107XG4gICAgICAgIHZhciB0aGV0YSA9IGRhdGFbaSsrXTtcbiAgICAgICAgdmFyIGRUaGV0YSA9IGRhdGFbaSsrXTsgLy8gVE9ETyBBcmMg5peL6L2sXG5cbiAgICAgICAgaSArPSAxO1xuICAgICAgICB2YXIgYW50aWNsb2Nrd2lzZSA9ICEhKDEgLSBkYXRhW2krK10pO1xuICAgICAgICB4MSA9IE1hdGguY29zKHRoZXRhKSAqIHJ4ICsgY3g7XG4gICAgICAgIHkxID0gTWF0aC5zaW4odGhldGEpICogcnkgKyBjeTsgLy8g5LiN5piv55u05o6l5L2/55SoIGFyYyDlkb3ku6RcblxuICAgICAgICBpZiAoaSA8PSAxKSB7XG4gICAgICAgICAgLy8g56ys5LiA5Liq5ZG95Luk6LW354K56L+Y5pyq5a6a5LmJXG4gICAgICAgICAgeDAgPSB4MTtcbiAgICAgICAgICB5MCA9IHkxO1xuICAgICAgICB9IC8vIHpyIOS9v+eUqHNjYWxl5p2l5qih5ouf5qSt5ZyGLCDov5nph4zkuZ/lr7l45YGa5LiA5a6a55qE57yp5pS+XG5cblxuICAgICAgICB2YXIgX3ggPSAoeCAtIGN4KSAqIHJ5IC8gcnggKyBjeDtcblxuICAgICAgICBkID0gcHJvamVjdFBvaW50VG9BcmMoY3gsIGN5LCByeSwgdGhldGEsIHRoZXRhICsgZFRoZXRhLCBhbnRpY2xvY2t3aXNlLCBfeCwgeSwgdG1wUHQpO1xuICAgICAgICB4aSA9IE1hdGguY29zKHRoZXRhICsgZFRoZXRhKSAqIHJ4ICsgY3g7XG4gICAgICAgIHlpID0gTWF0aC5zaW4odGhldGEgKyBkVGhldGEpICogcnkgKyBjeTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgQ01ELlI6XG4gICAgICAgIHgwID0geGkgPSBkYXRhW2krK107XG4gICAgICAgIHkwID0geWkgPSBkYXRhW2krK107XG4gICAgICAgIHZhciB3aWR0aCA9IGRhdGFbaSsrXTtcbiAgICAgICAgdmFyIGhlaWdodCA9IGRhdGFbaSsrXTtcbiAgICAgICAgZCA9IHByb2plY3RQb2ludFRvUmVjdCh4MCwgeTAsIHdpZHRoLCBoZWlnaHQsIHgsIHksIHRtcFB0KTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgQ01ELlo6XG4gICAgICAgIGQgPSBwcm9qZWN0UG9pbnRUb0xpbmUoeGksIHlpLCB4MCwgeTAsIHgsIHksIHRtcFB0LCB0cnVlKTtcbiAgICAgICAgeGkgPSB4MDtcbiAgICAgICAgeWkgPSB5MDtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYgKGQgPCBtaW5EaXN0KSB7XG4gICAgICBtaW5EaXN0ID0gZDtcbiAgICAgIG91dC5zZXQodG1wUHRbMF0sIHRtcFB0WzFdKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbWluRGlzdDtcbn0gLy8gVGVtcG9yYWwgdmFyaWFibGUgZm9yIGludGVybWVkaWF0ZSB1c2FnZS5cblxuXG52YXIgcHQwID0gbmV3IFBvaW50KCk7XG52YXIgcHQxID0gbmV3IFBvaW50KCk7XG52YXIgcHQyID0gbmV3IFBvaW50KCk7XG52YXIgZGlyID0gbmV3IFBvaW50KCk7XG52YXIgZGlyMiA9IG5ldyBQb2ludCgpO1xuLyoqXHJcbiAqIENhbGN1bGF0ZSBhIHByb3BlciBndWlkZSBsaW5lIGJhc2VkIG9uIHRoZSBsYWJlbCBwb3NpdGlvbiBhbmQgZ3JhcGhpYyBlbGVtZW50IGRlZmluaXRpb25cclxuICogQHBhcmFtIGxhYmVsXHJcbiAqIEBwYXJhbSBsYWJlbFJlY3RcclxuICogQHBhcmFtIHRhcmdldFxyXG4gKiBAcGFyYW0gdGFyZ2V0UmVjdFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUxhYmVsTGluZVBvaW50cyh0YXJnZXQsIGxhYmVsTGluZU1vZGVsKSB7XG4gIGlmICghdGFyZ2V0KSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGxhYmVsTGluZSA9IHRhcmdldC5nZXRUZXh0R3VpZGVMaW5lKCk7XG4gIHZhciBsYWJlbCA9IHRhcmdldC5nZXRUZXh0Q29udGVudCgpOyAvLyBOZWVkcyB0byBjcmVhdGUgdGV4dCBndWlkZSBpbiBlYWNoIGNoYXJ0cy5cblxuICBpZiAoIShsYWJlbCAmJiBsYWJlbExpbmUpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGxhYmVsR3VpZGVDb25maWcgPSB0YXJnZXQudGV4dEd1aWRlTGluZUNvbmZpZyB8fCB7fTtcbiAgdmFyIHBvaW50cyA9IFtbMCwgMF0sIFswLCAwXSwgWzAsIDBdXTtcbiAgdmFyIHNlYXJjaFNwYWNlID0gbGFiZWxHdWlkZUNvbmZpZy5jYW5kaWRhdGVzIHx8IERFRkFVTFRfU0VBUkNIX1NQQUNFO1xuICB2YXIgbGFiZWxSZWN0ID0gbGFiZWwuZ2V0Qm91bmRpbmdSZWN0KCkuY2xvbmUoKTtcbiAgbGFiZWxSZWN0LmFwcGx5VHJhbnNmb3JtKGxhYmVsLmdldENvbXB1dGVkVHJhbnNmb3JtKCkpO1xuICB2YXIgbWluRGlzdCA9IEluZmluaXR5O1xuICB2YXIgYW5jaG9yUG9pbnQgPSBsYWJlbEd1aWRlQ29uZmlnLmFuY2hvcjtcbiAgdmFyIHRhcmdldFRyYW5zZm9ybSA9IHRhcmdldC5nZXRDb21wdXRlZFRyYW5zZm9ybSgpO1xuICB2YXIgdGFyZ2V0SW52ZXJzZWRUcmFuc2Zvcm0gPSB0YXJnZXRUcmFuc2Zvcm0gJiYgaW52ZXJ0KFtdLCB0YXJnZXRUcmFuc2Zvcm0pO1xuICB2YXIgbGVuID0gbGFiZWxMaW5lTW9kZWwuZ2V0KCdsZW5ndGgyJykgfHwgMDtcblxuICBpZiAoYW5jaG9yUG9pbnQpIHtcbiAgICBwdDIuY29weShhbmNob3JQb2ludCk7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHNlYXJjaFNwYWNlLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGNhbmRpZGF0ZSA9IHNlYXJjaFNwYWNlW2ldO1xuICAgIGdldENhbmRpZGF0ZUFuY2hvcihjYW5kaWRhdGUsIDAsIGxhYmVsUmVjdCwgcHQwLCBkaXIpO1xuICAgIFBvaW50LnNjYWxlQW5kQWRkKHB0MSwgcHQwLCBkaXIsIGxlbik7IC8vIFRyYW5zZm9ybSB0byB0YXJnZXQgY29vcmQgc3BhY2UuXG5cbiAgICBwdDEudHJhbnNmb3JtKHRhcmdldEludmVyc2VkVHJhbnNmb3JtKTsgLy8gTm90ZTogZ2V0Qm91bmRpbmdSZWN0IHdpbGwgZW5zdXJlIHRoZSBgcGF0aGAgYmVpbmcgY3JlYXRlZC5cblxuICAgIHZhciBib3VuZGluZ1JlY3QgPSB0YXJnZXQuZ2V0Qm91bmRpbmdSZWN0KCk7XG4gICAgdmFyIGRpc3QgPSBhbmNob3JQb2ludCA/IGFuY2hvclBvaW50LmRpc3RhbmNlKHB0MSkgOiB0YXJnZXQgaW5zdGFuY2VvZiBQYXRoID8gbmVhcmVzdFBvaW50T25QYXRoKHB0MSwgdGFyZ2V0LnBhdGgsIHB0MikgOiBuZWFyZXN0UG9pbnRPblJlY3QocHQxLCBib3VuZGluZ1JlY3QsIHB0Mik7IC8vIFRPRE8gcHQyIGlzIGluIHRoZSBwYXRoXG5cbiAgICBpZiAoZGlzdCA8IG1pbkRpc3QpIHtcbiAgICAgIG1pbkRpc3QgPSBkaXN0OyAvLyBUcmFuc2Zvcm0gYmFjayB0byBnbG9iYWwgc3BhY2UuXG5cbiAgICAgIHB0MS50cmFuc2Zvcm0odGFyZ2V0VHJhbnNmb3JtKTtcbiAgICAgIHB0Mi50cmFuc2Zvcm0odGFyZ2V0VHJhbnNmb3JtKTtcbiAgICAgIHB0Mi50b0FycmF5KHBvaW50c1swXSk7XG4gICAgICBwdDEudG9BcnJheShwb2ludHNbMV0pO1xuICAgICAgcHQwLnRvQXJyYXkocG9pbnRzWzJdKTtcbiAgICB9XG4gIH1cblxuICBsaW1pdFR1cm5BbmdsZShwb2ludHMsIGxhYmVsTGluZU1vZGVsLmdldCgnbWluVHVybkFuZ2xlJykpO1xuICBsYWJlbExpbmUuc2V0U2hhcGUoe1xuICAgIHBvaW50czogcG9pbnRzXG4gIH0pO1xufSAvLyBUZW1wb3JhbCB2YXJpYWJsZSBmb3IgdGhlIGxpbWl0VHVybkFuZ2xlIGZ1bmN0aW9uXG5cbnZhciB0bXBBcnIgPSBbXTtcbnZhciB0bXBQcm9qUG9pbnQgPSBuZXcgUG9pbnQoKTtcbi8qKlxyXG4gKiBSZWR1Y2UgdGhlIGxpbmUgc2VnbWVudCBhdHRhY2hlZCB0byB0aGUgbGFiZWwgdG8gbGltaXQgdGhlIHR1cm4gYW5nbGUgYmV0d2VlbiB0d28gc2VnbWVudHMuXHJcbiAqIEBwYXJhbSBsaW5lUG9pbnRzXHJcbiAqIEBwYXJhbSBtaW5UdXJuQW5nbGUgUmFkaWFuIG9mIG1pbmltdW0gdHVybiBhbmdsZS4gMCAtIDE4MFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxpbWl0VHVybkFuZ2xlKGxpbmVQb2ludHMsIG1pblR1cm5BbmdsZSkge1xuICBpZiAoIShtaW5UdXJuQW5nbGUgPD0gMTgwICYmIG1pblR1cm5BbmdsZSA+IDApKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbWluVHVybkFuZ2xlID0gbWluVHVybkFuZ2xlIC8gMTgwICogTWF0aC5QSTsgLy8gVGhlIGxpbmUgcG9pbnRzIGNhbiBiZVxuICAvLyAgICAgIC9wdDEtLS0tcHQyIChsYWJlbClcbiAgLy8gICAgIC9cbiAgLy8gcHQwL1xuXG4gIHB0MC5mcm9tQXJyYXkobGluZVBvaW50c1swXSk7XG4gIHB0MS5mcm9tQXJyYXkobGluZVBvaW50c1sxXSk7XG4gIHB0Mi5mcm9tQXJyYXkobGluZVBvaW50c1syXSk7XG4gIFBvaW50LnN1YihkaXIsIHB0MCwgcHQxKTtcbiAgUG9pbnQuc3ViKGRpcjIsIHB0MiwgcHQxKTtcbiAgdmFyIGxlbjEgPSBkaXIubGVuKCk7XG4gIHZhciBsZW4yID0gZGlyMi5sZW4oKTtcblxuICBpZiAobGVuMSA8IDFlLTMgfHwgbGVuMiA8IDFlLTMpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBkaXIuc2NhbGUoMSAvIGxlbjEpO1xuICBkaXIyLnNjYWxlKDEgLyBsZW4yKTtcbiAgdmFyIGFuZ2xlQ29zID0gZGlyLmRvdChkaXIyKTtcbiAgdmFyIG1pblR1cm5BbmdsZUNvcyA9IE1hdGguY29zKG1pblR1cm5BbmdsZSk7XG5cbiAgaWYgKG1pblR1cm5BbmdsZUNvcyA8IGFuZ2xlQ29zKSB7XG4gICAgLy8gU21hbGxlciB0aGFuIG1pblR1cm5BbmdsZVxuICAgIC8vIENhbGN1bGF0ZSBwcm9qZWN0IHBvaW50IG9mIHB0MCBvbiBwdDEtcHQyXG4gICAgdmFyIGQgPSBwcm9qZWN0UG9pbnRUb0xpbmUocHQxLngsIHB0MS55LCBwdDIueCwgcHQyLnksIHB0MC54LCBwdDAueSwgdG1wQXJyLCBmYWxzZSk7XG4gICAgdG1wUHJvalBvaW50LmZyb21BcnJheSh0bXBBcnIpOyAvLyBDYWxjdWxhdGUgbmV3IHByb2plY3RlZCBsZW5ndGggd2l0aCBsaW1pdGVkIG1pblR1cm5BbmdsZSBhbmQgZ2V0IHRoZSBuZXcgY29ubmVjdCBwb2ludFxuXG4gICAgdG1wUHJvalBvaW50LnNjYWxlQW5kQWRkKGRpcjIsIGQgLyBNYXRoLnRhbihNYXRoLlBJIC0gbWluVHVybkFuZ2xlKSk7IC8vIExpbWl0IHRoZSBuZXcgY2FsY3VsYXRlZCBjb25uZWN0IHBvaW50IGJldHdlZW4gcHQxIGFuZCBwdDIuXG5cbiAgICB2YXIgdCA9IHB0Mi54ICE9PSBwdDEueCA/ICh0bXBQcm9qUG9pbnQueCAtIHB0MS54KSAvIChwdDIueCAtIHB0MS54KSA6ICh0bXBQcm9qUG9pbnQueSAtIHB0MS55KSAvIChwdDIueSAtIHB0MS55KTtcblxuICAgIGlmIChpc05hTih0KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0IDwgMCkge1xuICAgICAgUG9pbnQuY29weSh0bXBQcm9qUG9pbnQsIHB0MSk7XG4gICAgfSBlbHNlIGlmICh0ID4gMSkge1xuICAgICAgUG9pbnQuY29weSh0bXBQcm9qUG9pbnQsIHB0Mik7XG4gICAgfVxuXG4gICAgdG1wUHJvalBvaW50LnRvQXJyYXkobGluZVBvaW50c1sxXSk7XG4gIH1cbn1cbi8qKlxyXG4gKiBMaW1pdCB0aGUgYW5nbGUgb2YgbGluZSBhbmQgdGhlIHN1cmZhY2VcclxuICogQHBhcmFtIG1heFN1cmZhY2VBbmdsZSBSYWRpYW4gb2YgbWluaW11bSB0dXJuIGFuZ2xlLiAwIC0gMTgwLiAwIGlzIHNhbWUgZGlyZWN0aW9uIHRvIG5vcm1hbC4gMTgwIGlzIG9wcG9zaXRlXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGltaXRTdXJmYWNlQW5nbGUobGluZVBvaW50cywgc3VyZmFjZU5vcm1hbCwgbWF4U3VyZmFjZUFuZ2xlKSB7XG4gIGlmICghKG1heFN1cmZhY2VBbmdsZSA8PSAxODAgJiYgbWF4U3VyZmFjZUFuZ2xlID4gMCkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBtYXhTdXJmYWNlQW5nbGUgPSBtYXhTdXJmYWNlQW5nbGUgLyAxODAgKiBNYXRoLlBJO1xuICBwdDAuZnJvbUFycmF5KGxpbmVQb2ludHNbMF0pO1xuICBwdDEuZnJvbUFycmF5KGxpbmVQb2ludHNbMV0pO1xuICBwdDIuZnJvbUFycmF5KGxpbmVQb2ludHNbMl0pO1xuICBQb2ludC5zdWIoZGlyLCBwdDEsIHB0MCk7XG4gIFBvaW50LnN1YihkaXIyLCBwdDIsIHB0MSk7XG4gIHZhciBsZW4xID0gZGlyLmxlbigpO1xuICB2YXIgbGVuMiA9IGRpcjIubGVuKCk7XG5cbiAgaWYgKGxlbjEgPCAxZS0zIHx8IGxlbjIgPCAxZS0zKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZGlyLnNjYWxlKDEgLyBsZW4xKTtcbiAgZGlyMi5zY2FsZSgxIC8gbGVuMik7XG4gIHZhciBhbmdsZUNvcyA9IGRpci5kb3Qoc3VyZmFjZU5vcm1hbCk7XG4gIHZhciBtYXhTdXJmYWNlQW5nbGVDb3MgPSBNYXRoLmNvcyhtYXhTdXJmYWNlQW5nbGUpO1xuXG4gIGlmIChhbmdsZUNvcyA8IG1heFN1cmZhY2VBbmdsZUNvcykge1xuICAgIC8vIENhbGN1bGF0ZSBwcm9qZWN0IHBvaW50IG9mIHB0MCBvbiBwdDEtcHQyXG4gICAgdmFyIGQgPSBwcm9qZWN0UG9pbnRUb0xpbmUocHQxLngsIHB0MS55LCBwdDIueCwgcHQyLnksIHB0MC54LCBwdDAueSwgdG1wQXJyLCBmYWxzZSk7XG4gICAgdG1wUHJvalBvaW50LmZyb21BcnJheSh0bXBBcnIpO1xuICAgIHZhciBIQUxGX1BJID0gTWF0aC5QSSAvIDI7XG4gICAgdmFyIGFuZ2xlMiA9IE1hdGguYWNvcyhkaXIyLmRvdChzdXJmYWNlTm9ybWFsKSk7XG4gICAgdmFyIG5ld0FuZ2xlID0gSEFMRl9QSSArIGFuZ2xlMiAtIG1heFN1cmZhY2VBbmdsZTtcblxuICAgIGlmIChuZXdBbmdsZSA+PSBIQUxGX1BJKSB7XG4gICAgICAvLyBwYXJhbGxlbFxuICAgICAgUG9pbnQuY29weSh0bXBQcm9qUG9pbnQsIHB0Mik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENhbGN1bGF0ZSBuZXcgcHJvamVjdGVkIGxlbmd0aCB3aXRoIGxpbWl0ZWQgbWluVHVybkFuZ2xlIGFuZCBnZXQgdGhlIG5ldyBjb25uZWN0IHBvaW50XG4gICAgICB0bXBQcm9qUG9pbnQuc2NhbGVBbmRBZGQoZGlyMiwgZCAvIE1hdGgudGFuKE1hdGguUEkgLyAyIC0gbmV3QW5nbGUpKTsgLy8gTGltaXQgdGhlIG5ldyBjYWxjdWxhdGVkIGNvbm5lY3QgcG9pbnQgYmV0d2VlbiBwdDEgYW5kIHB0Mi5cblxuICAgICAgdmFyIHQgPSBwdDIueCAhPT0gcHQxLnggPyAodG1wUHJvalBvaW50LnggLSBwdDEueCkgLyAocHQyLnggLSBwdDEueCkgOiAodG1wUHJvalBvaW50LnkgLSBwdDEueSkgLyAocHQyLnkgLSBwdDEueSk7XG5cbiAgICAgIGlmIChpc05hTih0KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0IDwgMCkge1xuICAgICAgICBQb2ludC5jb3B5KHRtcFByb2pQb2ludCwgcHQxKTtcbiAgICAgIH0gZWxzZSBpZiAodCA+IDEpIHtcbiAgICAgICAgUG9pbnQuY29weSh0bXBQcm9qUG9pbnQsIHB0Mik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdG1wUHJvalBvaW50LnRvQXJyYXkobGluZVBvaW50c1sxXSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0TGFiZWxMaW5lU3RhdGUobGFiZWxMaW5lLCBpZ25vcmUsIHN0YXRlTmFtZSwgc3RhdGVNb2RlbCkge1xuICB2YXIgaXNOb3JtYWwgPSBzdGF0ZU5hbWUgPT09ICdub3JtYWwnO1xuICB2YXIgc3RhdGVPYmogPSBpc05vcm1hbCA/IGxhYmVsTGluZSA6IGxhYmVsTGluZS5lbnN1cmVTdGF0ZShzdGF0ZU5hbWUpOyAvLyBNYWtlIHN1cmUgZGlzcGxheS5cblxuICBzdGF0ZU9iai5pZ25vcmUgPSBpZ25vcmU7IC8vIFNldCBzbW9vdGhcblxuICB2YXIgc21vb3RoID0gc3RhdGVNb2RlbC5nZXQoJ3Ntb290aCcpO1xuXG4gIGlmIChzbW9vdGggJiYgc21vb3RoID09PSB0cnVlKSB7XG4gICAgc21vb3RoID0gMC4zO1xuICB9XG5cbiAgc3RhdGVPYmouc2hhcGUgPSBzdGF0ZU9iai5zaGFwZSB8fCB7fTtcblxuICBpZiAoc21vb3RoID4gMCkge1xuICAgIHN0YXRlT2JqLnNoYXBlLnNtb290aCA9IHNtb290aDtcbiAgfVxuXG4gIHZhciBzdHlsZU9iaiA9IHN0YXRlTW9kZWwuZ2V0TW9kZWwoJ2xpbmVTdHlsZScpLmdldExpbmVTdHlsZSgpO1xuICBpc05vcm1hbCA/IGxhYmVsTGluZS51c2VTdHlsZShzdHlsZU9iaikgOiBzdGF0ZU9iai5zdHlsZSA9IHN0eWxlT2JqO1xufVxuXG5mdW5jdGlvbiBidWlsZExhYmVsTGluZVBhdGgocGF0aCwgc2hhcGUpIHtcbiAgdmFyIHNtb290aCA9IHNoYXBlLnNtb290aDtcbiAgdmFyIHBvaW50cyA9IHNoYXBlLnBvaW50cztcblxuICBpZiAoIXBvaW50cykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHBhdGgubW92ZVRvKHBvaW50c1swXVswXSwgcG9pbnRzWzBdWzFdKTtcblxuICBpZiAoc21vb3RoID4gMCAmJiBwb2ludHMubGVuZ3RoID49IDMpIHtcbiAgICB2YXIgbGVuMSA9IHZlY3Rvci5kaXN0KHBvaW50c1swXSwgcG9pbnRzWzFdKTtcbiAgICB2YXIgbGVuMiA9IHZlY3Rvci5kaXN0KHBvaW50c1sxXSwgcG9pbnRzWzJdKTtcblxuICAgIGlmICghbGVuMSB8fCAhbGVuMikge1xuICAgICAgcGF0aC5saW5lVG8ocG9pbnRzWzFdWzBdLCBwb2ludHNbMV1bMV0pO1xuICAgICAgcGF0aC5saW5lVG8ocG9pbnRzWzJdWzBdLCBwb2ludHNbMl1bMV0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBtb3ZlTGVuID0gTWF0aC5taW4obGVuMSwgbGVuMikgKiBzbW9vdGg7XG4gICAgdmFyIG1pZFBvaW50MCA9IHZlY3Rvci5sZXJwKFtdLCBwb2ludHNbMV0sIHBvaW50c1swXSwgbW92ZUxlbiAvIGxlbjEpO1xuICAgIHZhciBtaWRQb2ludDIgPSB2ZWN0b3IubGVycChbXSwgcG9pbnRzWzFdLCBwb2ludHNbMl0sIG1vdmVMZW4gLyBsZW4yKTtcbiAgICB2YXIgbWlkUG9pbnQxID0gdmVjdG9yLmxlcnAoW10sIG1pZFBvaW50MCwgbWlkUG9pbnQyLCAwLjUpO1xuICAgIHBhdGguYmV6aWVyQ3VydmVUbyhtaWRQb2ludDBbMF0sIG1pZFBvaW50MFsxXSwgbWlkUG9pbnQwWzBdLCBtaWRQb2ludDBbMV0sIG1pZFBvaW50MVswXSwgbWlkUG9pbnQxWzFdKTtcbiAgICBwYXRoLmJlemllckN1cnZlVG8obWlkUG9pbnQyWzBdLCBtaWRQb2ludDJbMV0sIG1pZFBvaW50MlswXSwgbWlkUG9pbnQyWzFdLCBwb2ludHNbMl1bMF0sIHBvaW50c1syXVsxXSk7XG4gIH0gZWxzZSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHBhdGgubGluZVRvKHBvaW50c1tpXVswXSwgcG9pbnRzW2ldWzFdKTtcbiAgICB9XG4gIH1cbn1cbi8qKlxyXG4gKiBDcmVhdGUgYSBsYWJlbCBsaW5lIGlmIG5lY2Vzc2FyeSBhbmQgc2V0IGl0J3Mgc3R5bGUuXHJcbiAqL1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRMYWJlbExpbmVTdHlsZSh0YXJnZXRFbCwgc3RhdGVzTW9kZWxzLCBkZWZhdWx0U3R5bGUpIHtcbiAgdmFyIGxhYmVsTGluZSA9IHRhcmdldEVsLmdldFRleHRHdWlkZUxpbmUoKTtcbiAgdmFyIGxhYmVsID0gdGFyZ2V0RWwuZ2V0VGV4dENvbnRlbnQoKTtcblxuICBpZiAoIWxhYmVsKSB7XG4gICAgLy8gTm90IHNob3cgbGFiZWwgbGluZSBpZiB0aGVyZSBpcyBubyBsYWJlbC5cbiAgICBpZiAobGFiZWxMaW5lKSB7XG4gICAgICB0YXJnZXRFbC5yZW1vdmVUZXh0R3VpZGVMaW5lKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIG5vcm1hbE1vZGVsID0gc3RhdGVzTW9kZWxzLm5vcm1hbDtcbiAgdmFyIHNob3dOb3JtYWwgPSBub3JtYWxNb2RlbC5nZXQoJ3Nob3cnKTtcbiAgdmFyIGxhYmVsSWdub3JlTm9ybWFsID0gbGFiZWwuaWdub3JlO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgRElTUExBWV9TVEFURVMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc3RhdGVOYW1lID0gRElTUExBWV9TVEFURVNbaV07XG4gICAgdmFyIHN0YXRlTW9kZWwgPSBzdGF0ZXNNb2RlbHNbc3RhdGVOYW1lXTtcbiAgICB2YXIgaXNOb3JtYWwgPSBzdGF0ZU5hbWUgPT09ICdub3JtYWwnO1xuXG4gICAgaWYgKHN0YXRlTW9kZWwpIHtcbiAgICAgIHZhciBzdGF0ZVNob3cgPSBzdGF0ZU1vZGVsLmdldCgnc2hvdycpO1xuICAgICAgdmFyIGlzTGFiZWxJZ25vcmVkID0gaXNOb3JtYWwgPyBsYWJlbElnbm9yZU5vcm1hbCA6IHJldHJpZXZlMihsYWJlbC5zdGF0ZXNbc3RhdGVOYW1lXSAmJiBsYWJlbC5zdGF0ZXNbc3RhdGVOYW1lXS5pZ25vcmUsIGxhYmVsSWdub3JlTm9ybWFsKTtcblxuICAgICAgaWYgKGlzTGFiZWxJZ25vcmVkIC8vIE5vdCBzaG93IHdoZW4gbGFiZWwgaXMgbm90IHNob3duIGluIHRoaXMgc3RhdGUuXG4gICAgICB8fCAhcmV0cmlldmUyKHN0YXRlU2hvdywgc2hvd05vcm1hbCkgLy8gVXNlIG5vcm1hbCBzdGF0ZSBieSBkZWZhdWx0IGlmIG5vdCBzZXQuXG4gICAgICApIHtcbiAgICAgICAgICB2YXIgc3RhdGVPYmogPSBpc05vcm1hbCA/IGxhYmVsTGluZSA6IGxhYmVsTGluZSAmJiBsYWJlbExpbmUuc3RhdGVzW3N0YXRlTmFtZV07XG5cbiAgICAgICAgICBpZiAoc3RhdGVPYmopIHtcbiAgICAgICAgICAgIHN0YXRlT2JqLmlnbm9yZSA9IHRydWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gLy8gQ3JlYXRlIGxhYmVsTGluZSBpZiBub3QgZXhpc3RzXG5cblxuICAgICAgaWYgKCFsYWJlbExpbmUpIHtcbiAgICAgICAgbGFiZWxMaW5lID0gbmV3IFBvbHlsaW5lKCk7XG4gICAgICAgIHRhcmdldEVsLnNldFRleHRHdWlkZUxpbmUobGFiZWxMaW5lKTsgLy8gUmVzZXQgc3RhdGUgb2Ygbm9ybWFsIGJlY2F1c2UgaXQncyBuZXcgY3JlYXRlZC5cbiAgICAgICAgLy8gTk9URTogTk9STUFMIHNob3VsZCBhbHdheXMgYmVlbiB0aGUgZmlyc3QhXG5cbiAgICAgICAgaWYgKCFpc05vcm1hbCAmJiAobGFiZWxJZ25vcmVOb3JtYWwgfHwgIXNob3dOb3JtYWwpKSB7XG4gICAgICAgICAgc2V0TGFiZWxMaW5lU3RhdGUobGFiZWxMaW5lLCB0cnVlLCAnbm9ybWFsJywgc3RhdGVzTW9kZWxzLm5vcm1hbCk7XG4gICAgICAgIH0gLy8gVXNlIHNhbWUgc3RhdGUgcHJveHkuXG5cblxuICAgICAgICBpZiAodGFyZ2V0RWwuc3RhdGVQcm94eSkge1xuICAgICAgICAgIGxhYmVsTGluZS5zdGF0ZVByb3h5ID0gdGFyZ2V0RWwuc3RhdGVQcm94eTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzZXRMYWJlbExpbmVTdGF0ZShsYWJlbExpbmUsIGZhbHNlLCBzdGF0ZU5hbWUsIHN0YXRlTW9kZWwpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChsYWJlbExpbmUpIHtcbiAgICBkZWZhdWx0cyhsYWJlbExpbmUuc3R5bGUsIGRlZmF1bHRTdHlsZSk7IC8vIE5vdCBmaWxsLlxuXG4gICAgbGFiZWxMaW5lLnN0eWxlLmZpbGwgPSBudWxsO1xuICAgIHZhciBzaG93QWJvdmUgPSBub3JtYWxNb2RlbC5nZXQoJ3Nob3dBYm92ZScpO1xuICAgIHZhciBsYWJlbExpbmVDb25maWcgPSB0YXJnZXRFbC50ZXh0R3VpZGVMaW5lQ29uZmlnID0gdGFyZ2V0RWwudGV4dEd1aWRlTGluZUNvbmZpZyB8fCB7fTtcbiAgICBsYWJlbExpbmVDb25maWcuc2hvd0Fib3ZlID0gc2hvd0Fib3ZlIHx8IGZhbHNlOyAvLyBDdXN0b20gdGhlIGJ1aWxkUGF0aC5cblxuICAgIGxhYmVsTGluZS5idWlsZFBhdGggPSBidWlsZExhYmVsTGluZVBhdGg7XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRMYWJlbExpbmVTdGF0ZXNNb2RlbHMoaXRlbU1vZGVsLCBsYWJlbExpbmVOYW1lKSB7XG4gIGxhYmVsTGluZU5hbWUgPSBsYWJlbExpbmVOYW1lIHx8ICdsYWJlbExpbmUnO1xuICB2YXIgc3RhdGVzTW9kZWxzID0ge1xuICAgIG5vcm1hbDogaXRlbU1vZGVsLmdldE1vZGVsKGxhYmVsTGluZU5hbWUpXG4gIH07XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBTUEVDSUFMX1NUQVRFUy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzdGF0ZU5hbWUgPSBTUEVDSUFMX1NUQVRFU1tpXTtcbiAgICBzdGF0ZXNNb2RlbHNbc3RhdGVOYW1lXSA9IGl0ZW1Nb2RlbC5nZXRNb2RlbChbc3RhdGVOYW1lLCBsYWJlbExpbmVOYW1lXSk7XG4gIH1cblxuICByZXR1cm4gc3RhdGVzTW9kZWxzO1xufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgQm91bmRpbmdSZWN0LCBPcmllbnRlZEJvdW5kaW5nUmVjdCB9IGZyb20gJy4uL3V0aWwvZ3JhcGhpYy5qcyc7XG5leHBvcnQgZnVuY3Rpb24gcHJlcGFyZUxheW91dExpc3QoaW5wdXQpIHtcbiAgdmFyIGxpc3QgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHJhd0l0ZW0gPSBpbnB1dFtpXTtcblxuICAgIGlmIChyYXdJdGVtLmRlZmF1bHRBdHRyLmlnbm9yZSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgdmFyIGxhYmVsID0gcmF3SXRlbS5sYWJlbDtcbiAgICB2YXIgdHJhbnNmb3JtID0gbGFiZWwuZ2V0Q29tcHV0ZWRUcmFuc2Zvcm0oKTsgLy8gTk9URTogR2V0IGJvdW5kaW5nIHJlY3QgYWZ0ZXIgZ2V0Q29tcHV0ZWRUcmFuc2Zvcm0sIG9yIGxhYmVsIG1heSBub3QgYmVlbiB1cGRhdGVkIGJ5IHRoZSBob3N0IGVsLlxuXG4gICAgdmFyIGxvY2FsUmVjdCA9IGxhYmVsLmdldEJvdW5kaW5nUmVjdCgpO1xuICAgIHZhciBpc0F4aXNBbGlnbmVkID0gIXRyYW5zZm9ybSB8fCB0cmFuc2Zvcm1bMV0gPCAxZS01ICYmIHRyYW5zZm9ybVsyXSA8IDFlLTU7XG4gICAgdmFyIG1pbk1hcmdpbiA9IGxhYmVsLnN0eWxlLm1hcmdpbiB8fCAwO1xuICAgIHZhciBnbG9iYWxSZWN0ID0gbG9jYWxSZWN0LmNsb25lKCk7XG4gICAgZ2xvYmFsUmVjdC5hcHBseVRyYW5zZm9ybSh0cmFuc2Zvcm0pO1xuICAgIGdsb2JhbFJlY3QueCAtPSBtaW5NYXJnaW4gLyAyO1xuICAgIGdsb2JhbFJlY3QueSAtPSBtaW5NYXJnaW4gLyAyO1xuICAgIGdsb2JhbFJlY3Qud2lkdGggKz0gbWluTWFyZ2luO1xuICAgIGdsb2JhbFJlY3QuaGVpZ2h0ICs9IG1pbk1hcmdpbjtcbiAgICB2YXIgb2JiID0gaXNBeGlzQWxpZ25lZCA/IG5ldyBPcmllbnRlZEJvdW5kaW5nUmVjdChsb2NhbFJlY3QsIHRyYW5zZm9ybSkgOiBudWxsO1xuICAgIGxpc3QucHVzaCh7XG4gICAgICBsYWJlbDogbGFiZWwsXG4gICAgICBsYWJlbExpbmU6IHJhd0l0ZW0ubGFiZWxMaW5lLFxuICAgICAgcmVjdDogZ2xvYmFsUmVjdCxcbiAgICAgIGxvY2FsUmVjdDogbG9jYWxSZWN0LFxuICAgICAgb2JiOiBvYmIsXG4gICAgICBwcmlvcml0eTogcmF3SXRlbS5wcmlvcml0eSxcbiAgICAgIGRlZmF1bHRBdHRyOiByYXdJdGVtLmRlZmF1bHRBdHRyLFxuICAgICAgbGF5b3V0T3B0aW9uOiByYXdJdGVtLmNvbXB1dGVkTGF5b3V0T3B0aW9uLFxuICAgICAgYXhpc0FsaWduZWQ6IGlzQXhpc0FsaWduZWQsXG4gICAgICB0cmFuc2Zvcm06IHRyYW5zZm9ybVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGxpc3Q7XG59XG5cbmZ1bmN0aW9uIHNoaWZ0TGF5b3V0KGxpc3QsIHh5RGltLCBzaXplRGltLCBtaW5Cb3VuZCwgbWF4Qm91bmQsIGJhbGFuY2VTaGlmdCkge1xuICB2YXIgbGVuID0gbGlzdC5sZW5ndGg7XG5cbiAgaWYgKGxlbiA8IDIpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBsaXN0LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gYS5yZWN0W3h5RGltXSAtIGIucmVjdFt4eURpbV07XG4gIH0pO1xuICB2YXIgbGFzdFBvcyA9IDA7XG4gIHZhciBkZWx0YTtcbiAgdmFyIGFkanVzdGVkID0gZmFsc2U7XG4gIHZhciBzaGlmdHMgPSBbXTtcbiAgdmFyIHRvdGFsU2hpZnRzID0gMDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciByZWN0ID0gaXRlbS5yZWN0O1xuICAgIGRlbHRhID0gcmVjdFt4eURpbV0gLSBsYXN0UG9zO1xuXG4gICAgaWYgKGRlbHRhIDwgMCkge1xuICAgICAgLy8gc2hpZnRGb3J3YXJkKGksIGxlbiwgLWRlbHRhKTtcbiAgICAgIHJlY3RbeHlEaW1dIC09IGRlbHRhO1xuICAgICAgaXRlbS5sYWJlbFt4eURpbV0gLT0gZGVsdGE7XG4gICAgICBhZGp1c3RlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgdmFyIHNoaWZ0ID0gTWF0aC5tYXgoLWRlbHRhLCAwKTtcbiAgICBzaGlmdHMucHVzaChzaGlmdCk7XG4gICAgdG90YWxTaGlmdHMgKz0gc2hpZnQ7XG4gICAgbGFzdFBvcyA9IHJlY3RbeHlEaW1dICsgcmVjdFtzaXplRGltXTtcbiAgfVxuXG4gIGlmICh0b3RhbFNoaWZ0cyA+IDAgJiYgYmFsYW5jZVNoaWZ0KSB7XG4gICAgLy8gU2hpZnQgYmFjayB0byBtYWtlIHRoZSBkaXN0cmlidXRpb24gbW9yZSBlcXVhbGx5LlxuICAgIHNoaWZ0TGlzdCgtdG90YWxTaGlmdHMgLyBsZW4sIDAsIGxlbik7XG4gIH0gLy8gVE9ETyBibGVlZE1hcmdpbj9cblxuXG4gIHZhciBmaXJzdCA9IGxpc3RbMF07XG4gIHZhciBsYXN0ID0gbGlzdFtsZW4gLSAxXTtcbiAgdmFyIG1pbkdhcDtcbiAgdmFyIG1heEdhcDtcbiAgdXBkYXRlTWluTWF4R2FwKCk7IC8vIElmIGVuZHMgZXhjZWVkIHR3byBib3VuZHMsIHNxdWVlemUgYXQgbW9zdCA4MCUsIHRoZW4gdGFrZSB0aGUgZ2FwIG9mIHR3byBib3VuZHMuXG5cbiAgbWluR2FwIDwgMCAmJiBzcXVlZXplR2FwcygtbWluR2FwLCAwLjgpO1xuICBtYXhHYXAgPCAwICYmIHNxdWVlemVHYXBzKG1heEdhcCwgMC44KTtcbiAgdXBkYXRlTWluTWF4R2FwKCk7XG4gIHRha2VCb3VuZHNHYXAobWluR2FwLCBtYXhHYXAsIDEpO1xuICB0YWtlQm91bmRzR2FwKG1heEdhcCwgbWluR2FwLCAtMSk7IC8vIEhhbmRsZSBiYWlsb3V0IHdoZW4gdGhlcmUgaXMgbm90IGVub3VnaCBzcGFjZS5cblxuICB1cGRhdGVNaW5NYXhHYXAoKTtcblxuICBpZiAobWluR2FwIDwgMCkge1xuICAgIHNxdWVlemVXaGVuQmFpbG91dCgtbWluR2FwKTtcbiAgfVxuXG4gIGlmIChtYXhHYXAgPCAwKSB7XG4gICAgc3F1ZWV6ZVdoZW5CYWlsb3V0KG1heEdhcCk7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVNaW5NYXhHYXAoKSB7XG4gICAgbWluR2FwID0gZmlyc3QucmVjdFt4eURpbV0gLSBtaW5Cb3VuZDtcbiAgICBtYXhHYXAgPSBtYXhCb3VuZCAtIGxhc3QucmVjdFt4eURpbV0gLSBsYXN0LnJlY3Rbc2l6ZURpbV07XG4gIH1cblxuICBmdW5jdGlvbiB0YWtlQm91bmRzR2FwKGdhcFRoaXNCb3VuZCwgZ2FwT3RoZXJCb3VuZCwgbW92ZURpcikge1xuICAgIGlmIChnYXBUaGlzQm91bmQgPCAwKSB7XG4gICAgICAvLyBNb3ZlIGZyb20gb3RoZXIgZ2FwIGlmIGNhbi5cbiAgICAgIHZhciBtb3ZlRnJvbU1heEdhcCA9IE1hdGgubWluKGdhcE90aGVyQm91bmQsIC1nYXBUaGlzQm91bmQpO1xuXG4gICAgICBpZiAobW92ZUZyb21NYXhHYXAgPiAwKSB7XG4gICAgICAgIHNoaWZ0TGlzdChtb3ZlRnJvbU1heEdhcCAqIG1vdmVEaXIsIDAsIGxlbik7XG4gICAgICAgIHZhciByZW1haW5lZCA9IG1vdmVGcm9tTWF4R2FwICsgZ2FwVGhpc0JvdW5kO1xuXG4gICAgICAgIGlmIChyZW1haW5lZCA8IDApIHtcbiAgICAgICAgICBzcXVlZXplR2FwcygtcmVtYWluZWQgKiBtb3ZlRGlyLCAxKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3F1ZWV6ZUdhcHMoLWdhcFRoaXNCb3VuZCAqIG1vdmVEaXIsIDEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNoaWZ0TGlzdChkZWx0YSwgc3RhcnQsIGVuZCkge1xuICAgIGlmIChkZWx0YSAhPT0gMCkge1xuICAgICAgYWRqdXN0ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IGxpc3RbaV07XG4gICAgICB2YXIgcmVjdCA9IGl0ZW0ucmVjdDtcbiAgICAgIHJlY3RbeHlEaW1dICs9IGRlbHRhO1xuICAgICAgaXRlbS5sYWJlbFt4eURpbV0gKz0gZGVsdGE7XG4gICAgfVxuICB9IC8vIFNxdWVlemUgZ2FwcyBpZiB0aGUgbGFiZWxzIGV4Y2VlZCBtYXJnaW4uXG5cblxuICBmdW5jdGlvbiBzcXVlZXplR2FwcyhkZWx0YSwgbWF4U3FlZXplUGVyY2VudCkge1xuICAgIHZhciBnYXBzID0gW107XG4gICAgdmFyIHRvdGFsR2FwcyA9IDA7XG5cbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB2YXIgcHJldkl0ZW1SZWN0ID0gbGlzdFtpIC0gMV0ucmVjdDtcbiAgICAgIHZhciBnYXAgPSBNYXRoLm1heChsaXN0W2ldLnJlY3RbeHlEaW1dIC0gcHJldkl0ZW1SZWN0W3h5RGltXSAtIHByZXZJdGVtUmVjdFtzaXplRGltXSwgMCk7XG4gICAgICBnYXBzLnB1c2goZ2FwKTtcbiAgICAgIHRvdGFsR2FwcyArPSBnYXA7XG4gICAgfVxuXG4gICAgaWYgKCF0b3RhbEdhcHMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgc3F1ZWV6ZVBlcmNlbnQgPSBNYXRoLm1pbihNYXRoLmFicyhkZWx0YSkgLyB0b3RhbEdhcHMsIG1heFNxZWV6ZVBlcmNlbnQpO1xuXG4gICAgaWYgKGRlbHRhID4gMCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW4gLSAxOyBpKyspIHtcbiAgICAgICAgLy8gRGlzdHJpYnV0ZSB0aGUgc2hpZnQgZGVsdGEgdG8gYWxsIGdhcHMuXG4gICAgICAgIHZhciBtb3ZlbWVudCA9IGdhcHNbaV0gKiBzcXVlZXplUGVyY2VudDsgLy8gRm9yd2FyZFxuXG4gICAgICAgIHNoaWZ0TGlzdChtb3ZlbWVudCwgMCwgaSArIDEpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBCYWNrd2FyZFxuICAgICAgZm9yICh2YXIgaSA9IGxlbiAtIDE7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgLy8gRGlzdHJpYnV0ZSB0aGUgc2hpZnQgZGVsdGEgdG8gYWxsIGdhcHMuXG4gICAgICAgIHZhciBtb3ZlbWVudCA9IGdhcHNbaSAtIDFdICogc3F1ZWV6ZVBlcmNlbnQ7XG4gICAgICAgIHNoaWZ0TGlzdCgtbW92ZW1lbnQsIGksIGxlbik7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxyXG4gICAqIFNxdWVlemUgdG8gYWxsb3cgb3ZlcmxhcCBpZiB0aGVyZSBpcyBubyBtb3JlIHNwYWNlIGF2YWlsYWJsZS5cclxuICAgKiBMZXQgb3RoZXIgb3ZlcmxhcHBpbmcgc3RyYXRlZ3kgbGlrZSBoaWRlT3ZlcmxhcCBkbyB0aGUgam9iIGluc3RlYWQgb2Yga2VlcCBleGNlZWRpbmcgdGhlIGJvdW5kcy5cclxuICAgKi9cblxuXG4gIGZ1bmN0aW9uIHNxdWVlemVXaGVuQmFpbG91dChkZWx0YSkge1xuICAgIHZhciBkaXIgPSBkZWx0YSA8IDAgPyAtMSA6IDE7XG4gICAgZGVsdGEgPSBNYXRoLmFicyhkZWx0YSk7XG4gICAgdmFyIG1vdmVGb3JFYWNoTGFiZWwgPSBNYXRoLmNlaWwoZGVsdGEgLyAobGVuIC0gMSkpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW4gLSAxOyBpKyspIHtcbiAgICAgIGlmIChkaXIgPiAwKSB7XG4gICAgICAgIC8vIEZvcndhcmRcbiAgICAgICAgc2hpZnRMaXN0KG1vdmVGb3JFYWNoTGFiZWwsIDAsIGkgKyAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEJhY2t3YXJkXG4gICAgICAgIHNoaWZ0TGlzdCgtbW92ZUZvckVhY2hMYWJlbCwgbGVuIC0gaSAtIDEsIGxlbik7XG4gICAgICB9XG5cbiAgICAgIGRlbHRhIC09IG1vdmVGb3JFYWNoTGFiZWw7XG5cbiAgICAgIGlmIChkZWx0YSA8PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gYWRqdXN0ZWQ7XG59XG4vKipcclxuICogQWRqdXN0IGxhYmVscyBvbiB4IGRpcmVjdGlvbiB0byBhdm9pZCBvdmVybGFwLlxyXG4gKi9cblxuXG5leHBvcnQgZnVuY3Rpb24gc2hpZnRMYXlvdXRPblgobGlzdCwgbGVmdEJvdW5kLCByaWdodEJvdW5kLCAvLyBJZiBhdmVyYWdlIHRoZSBzaGlmdHMgb24gYWxsIGxhYmVscyBhbmQgYWRkIHRoZW0gdG8gMFxuLy8gVE9ETzogTm90IHN1cmUgaWYgc2hvdWxkIGVuYWJsZSBpdC5cbi8vIFByb3M6IFRoZSBhbmdsZSBvZiBsaW5lcyB3aWxsIGRpc3RyaWJ1dGUgbW9yZSBlcXVhbGx5XG4vLyBDb25zOiBJbiBzb21lIGxheW91dC4gSXQgbWF5IG5vdCB3aGF0IHVzZXIgd2FudGVkLiBsaWtlIGluIHBpZS4gdGhlIGxhYmVsIG9mIGxhc3Qgc2VjdG9yIGlzIHVzdWFsbHkgY2hhbmdlZCB1bmV4cGVjdGVkbHkuXG5iYWxhbmNlU2hpZnQpIHtcbiAgcmV0dXJuIHNoaWZ0TGF5b3V0KGxpc3QsICd4JywgJ3dpZHRoJywgbGVmdEJvdW5kLCByaWdodEJvdW5kLCBiYWxhbmNlU2hpZnQpO1xufVxuLyoqXHJcbiAqIEFkanVzdCBsYWJlbHMgb24geSBkaXJlY3Rpb24gdG8gYXZvaWQgb3ZlcmxhcC5cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzaGlmdExheW91dE9uWShsaXN0LCB0b3BCb3VuZCwgYm90dG9tQm91bmQsIC8vIElmIGF2ZXJhZ2UgdGhlIHNoaWZ0cyBvbiBhbGwgbGFiZWxzIGFuZCBhZGQgdGhlbSB0byAwXG5iYWxhbmNlU2hpZnQpIHtcbiAgcmV0dXJuIHNoaWZ0TGF5b3V0KGxpc3QsICd5JywgJ2hlaWdodCcsIHRvcEJvdW5kLCBib3R0b21Cb3VuZCwgYmFsYW5jZVNoaWZ0KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBoaWRlT3ZlcmxhcChsYWJlbExpc3QpIHtcbiAgdmFyIGRpc3BsYXllZExhYmVscyA9IFtdOyAvLyBUT0RPLCByZW5kZXIgb3ZlcmZsb3cgdmlzaWJsZSBmaXJzdCwgcHV0IGluIHRoZSBkaXNwbGF5ZWRMYWJlbHMuXG5cbiAgbGFiZWxMaXN0LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gYi5wcmlvcml0eSAtIGEucHJpb3JpdHk7XG4gIH0pO1xuICB2YXIgZ2xvYmFsUmVjdCA9IG5ldyBCb3VuZGluZ1JlY3QoMCwgMCwgMCwgMCk7XG5cbiAgZnVuY3Rpb24gaGlkZUVsKGVsKSB7XG4gICAgaWYgKCFlbC5pZ25vcmUpIHtcbiAgICAgIC8vIFNob3cgb24gZW1waGFzaXMuXG4gICAgICB2YXIgZW1waGFzaXNTdGF0ZSA9IGVsLmVuc3VyZVN0YXRlKCdlbXBoYXNpcycpO1xuXG4gICAgICBpZiAoZW1waGFzaXNTdGF0ZS5pZ25vcmUgPT0gbnVsbCkge1xuICAgICAgICBlbXBoYXNpc1N0YXRlLmlnbm9yZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGVsLmlnbm9yZSA9IHRydWU7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxhYmVsTGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBsYWJlbEl0ZW0gPSBsYWJlbExpc3RbaV07XG4gICAgdmFyIGlzQXhpc0FsaWduZWQgPSBsYWJlbEl0ZW0uYXhpc0FsaWduZWQ7XG4gICAgdmFyIGxvY2FsUmVjdCA9IGxhYmVsSXRlbS5sb2NhbFJlY3Q7XG4gICAgdmFyIHRyYW5zZm9ybSA9IGxhYmVsSXRlbS50cmFuc2Zvcm07XG4gICAgdmFyIGxhYmVsID0gbGFiZWxJdGVtLmxhYmVsO1xuICAgIHZhciBsYWJlbExpbmUgPSBsYWJlbEl0ZW0ubGFiZWxMaW5lO1xuICAgIGdsb2JhbFJlY3QuY29weShsYWJlbEl0ZW0ucmVjdCk7IC8vIEFkZCBhIHRocmVzaG9sZCBiZWNhdXNlIGxheW91dCBtYXkgYmUgYWxpZ25lZCBwcmVjaXNlbHkuXG5cbiAgICBnbG9iYWxSZWN0LndpZHRoIC09IDAuMTtcbiAgICBnbG9iYWxSZWN0LmhlaWdodCAtPSAwLjE7XG4gICAgZ2xvYmFsUmVjdC54ICs9IDAuMDU7XG4gICAgZ2xvYmFsUmVjdC55ICs9IDAuMDU7XG4gICAgdmFyIG9iYiA9IGxhYmVsSXRlbS5vYmI7XG4gICAgdmFyIG92ZXJsYXBwZWQgPSBmYWxzZTtcblxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGlzcGxheWVkTGFiZWxzLmxlbmd0aDsgaisrKSB7XG4gICAgICB2YXIgZXhpc3RzVGV4dENmZyA9IGRpc3BsYXllZExhYmVsc1tqXTsgLy8gRmFzdCByZWplY3Rpb24uXG5cbiAgICAgIGlmICghZ2xvYmFsUmVjdC5pbnRlcnNlY3QoZXhpc3RzVGV4dENmZy5yZWN0KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzQXhpc0FsaWduZWQgJiYgZXhpc3RzVGV4dENmZy5heGlzQWxpZ25lZCkge1xuICAgICAgICAvLyBJcyBvdmVybGFwcGVkXG4gICAgICAgIG92ZXJsYXBwZWQgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgaWYgKCFleGlzdHNUZXh0Q2ZnLm9iYikge1xuICAgICAgICAvLyBJZiBzZWxmIGlzIG5vdCBheGlzIGFsaWduZWQuIEJ1dCBvdGhlciBpcy5cbiAgICAgICAgZXhpc3RzVGV4dENmZy5vYmIgPSBuZXcgT3JpZW50ZWRCb3VuZGluZ1JlY3QoZXhpc3RzVGV4dENmZy5sb2NhbFJlY3QsIGV4aXN0c1RleHRDZmcudHJhbnNmb3JtKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFvYmIpIHtcbiAgICAgICAgLy8gSWYgc2VsZiBpcyBheGlzIGFsaWduZWQuIEJ1dCBvdGhlciBpcyBub3QuXG4gICAgICAgIG9iYiA9IG5ldyBPcmllbnRlZEJvdW5kaW5nUmVjdChsb2NhbFJlY3QsIHRyYW5zZm9ybSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChvYmIuaW50ZXJzZWN0KGV4aXN0c1RleHRDZmcub2JiKSkge1xuICAgICAgICBvdmVybGFwcGVkID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSAvLyBUT0RPIENhbGxiYWNrIHRvIGRldGVybWluZSBpZiB0aGlzIG92ZXJsYXAgc2hvdWxkIGJlIGhhbmRsZWQ/XG5cblxuICAgIGlmIChvdmVybGFwcGVkKSB7XG4gICAgICBoaWRlRWwobGFiZWwpO1xuICAgICAgbGFiZWxMaW5lICYmIGhpZGVFbChsYWJlbExpbmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsYWJlbC5hdHRyKCdpZ25vcmUnLCBsYWJlbEl0ZW0uZGVmYXVsdEF0dHIuaWdub3JlKTtcbiAgICAgIGxhYmVsTGluZSAmJiBsYWJlbExpbmUuYXR0cignaWdub3JlJywgbGFiZWxJdGVtLmRlZmF1bHRBdHRyLmxhYmVsR3VpZGVJZ25vcmUpO1xuICAgICAgZGlzcGxheWVkTGFiZWxzLnB1c2gobGFiZWxJdGVtKTtcbiAgICB9XG4gIH1cbn0iLCJpbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCAqIGFzIHV0aWwgZnJvbSAnLi4vY29yZS91dGlsLmpzJztcbmltcG9ydCB7IGRldmljZVBpeGVsUmF0aW8gfSBmcm9tICcuLi9jb25maWcuanMnO1xuaW1wb3J0IEV2ZW50ZnVsIGZyb20gJy4uL2NvcmUvRXZlbnRmdWwuanMnO1xuaW1wb3J0IHsgZ2V0Q2FudmFzR3JhZGllbnQgfSBmcm9tICcuL2hlbHBlci5qcyc7XG5pbXBvcnQgeyBjcmVhdGVDYW52YXNQYXR0ZXJuIH0gZnJvbSAnLi9ncmFwaGljLmpzJztcbmltcG9ydCBCb3VuZGluZ1JlY3QgZnJvbSAnLi4vY29yZS9Cb3VuZGluZ1JlY3QuanMnO1xuaW1wb3J0IHsgUkVEUkFXX0JJVCB9IGZyb20gJy4uL2dyYXBoaWMvY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IHBsYXRmb3JtQXBpIH0gZnJvbSAnLi4vY29yZS9wbGF0Zm9ybS5qcyc7XG5mdW5jdGlvbiBjcmVhdGVEb20oaWQsIHBhaW50ZXIsIGRwcikge1xuICAgIHZhciBuZXdEb20gPSBwbGF0Zm9ybUFwaS5jcmVhdGVDYW52YXMoKTtcbiAgICB2YXIgd2lkdGggPSBwYWludGVyLmdldFdpZHRoKCk7XG4gICAgdmFyIGhlaWdodCA9IHBhaW50ZXIuZ2V0SGVpZ2h0KCk7XG4gICAgdmFyIG5ld0RvbVN0eWxlID0gbmV3RG9tLnN0eWxlO1xuICAgIGlmIChuZXdEb21TdHlsZSkge1xuICAgICAgICBuZXdEb21TdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIG5ld0RvbVN0eWxlLmxlZnQgPSAnMCc7XG4gICAgICAgIG5ld0RvbVN0eWxlLnRvcCA9ICcwJztcbiAgICAgICAgbmV3RG9tU3R5bGUud2lkdGggPSB3aWR0aCArICdweCc7XG4gICAgICAgIG5ld0RvbVN0eWxlLmhlaWdodCA9IGhlaWdodCArICdweCc7XG4gICAgICAgIG5ld0RvbS5zZXRBdHRyaWJ1dGUoJ2RhdGEtenItZG9tLWlkJywgaWQpO1xuICAgIH1cbiAgICBuZXdEb20ud2lkdGggPSB3aWR0aCAqIGRwcjtcbiAgICBuZXdEb20uaGVpZ2h0ID0gaGVpZ2h0ICogZHByO1xuICAgIHJldHVybiBuZXdEb207XG59XG47XG52YXIgTGF5ZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhMYXllciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBMYXllcihpZCwgcGFpbnRlciwgZHByKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm1vdGlvbkJsdXIgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMubGFzdEZyYW1lQWxwaGEgPSAwLjc7XG4gICAgICAgIF90aGlzLmRwciA9IDE7XG4gICAgICAgIF90aGlzLnZpcnR1YWwgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMuY29uZmlnID0ge307XG4gICAgICAgIF90aGlzLmluY3JlbWVudGFsID0gZmFsc2U7XG4gICAgICAgIF90aGlzLnpsZXZlbCA9IDA7XG4gICAgICAgIF90aGlzLm1heFJlcGFpbnRSZWN0Q291bnQgPSA1O1xuICAgICAgICBfdGhpcy5fX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgX3RoaXMuX19maXJzdFRpbWVQYWludCA9IHRydWU7XG4gICAgICAgIF90aGlzLl9fdXNlZCA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5fX2RyYXdJbmRleCA9IDA7XG4gICAgICAgIF90aGlzLl9fc3RhcnRJbmRleCA9IDA7XG4gICAgICAgIF90aGlzLl9fZW5kSW5kZXggPSAwO1xuICAgICAgICBfdGhpcy5fX3ByZXZTdGFydEluZGV4ID0gbnVsbDtcbiAgICAgICAgX3RoaXMuX19wcmV2RW5kSW5kZXggPSBudWxsO1xuICAgICAgICB2YXIgZG9tO1xuICAgICAgICBkcHIgPSBkcHIgfHwgZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGRvbSA9IGNyZWF0ZURvbShpZCwgcGFpbnRlciwgZHByKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh1dGlsLmlzT2JqZWN0KGlkKSkge1xuICAgICAgICAgICAgZG9tID0gaWQ7XG4gICAgICAgICAgICBpZCA9IGRvbS5pZDtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5pZCA9IGlkO1xuICAgICAgICBfdGhpcy5kb20gPSBkb207XG4gICAgICAgIHZhciBkb21TdHlsZSA9IGRvbS5zdHlsZTtcbiAgICAgICAgaWYgKGRvbVN0eWxlKSB7XG4gICAgICAgICAgICB1dGlsLmRpc2FibGVVc2VyU2VsZWN0KGRvbSk7XG4gICAgICAgICAgICBkb20ub25zZWxlY3RzdGFydCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZhbHNlOyB9O1xuICAgICAgICAgICAgZG9tU3R5bGUucGFkZGluZyA9ICcwJztcbiAgICAgICAgICAgIGRvbVN0eWxlLm1hcmdpbiA9ICcwJztcbiAgICAgICAgICAgIGRvbVN0eWxlLmJvcmRlcldpZHRoID0gJzAnO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLnBhaW50ZXIgPSBwYWludGVyO1xuICAgICAgICBfdGhpcy5kcHIgPSBkcHI7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgTGF5ZXIucHJvdG90eXBlLmdldEVsZW1lbnRDb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX19lbmRJbmRleCAtIHRoaXMuX19zdGFydEluZGV4O1xuICAgIH07XG4gICAgTGF5ZXIucHJvdG90eXBlLmFmdGVyQnJ1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX19wcmV2U3RhcnRJbmRleCA9IHRoaXMuX19zdGFydEluZGV4O1xuICAgICAgICB0aGlzLl9fcHJldkVuZEluZGV4ID0gdGhpcy5fX2VuZEluZGV4O1xuICAgIH07XG4gICAgTGF5ZXIucHJvdG90eXBlLmluaXRDb250ZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmN0eCA9IHRoaXMuZG9tLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIHRoaXMuY3R4LmRwciA9IHRoaXMuZHByO1xuICAgIH07XG4gICAgTGF5ZXIucHJvdG90eXBlLnNldFVucGFpbnRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fX2ZpcnN0VGltZVBhaW50ID0gdHJ1ZTtcbiAgICB9O1xuICAgIExheWVyLnByb3RvdHlwZS5jcmVhdGVCYWNrQnVmZmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZHByID0gdGhpcy5kcHI7XG4gICAgICAgIHRoaXMuZG9tQmFjayA9IGNyZWF0ZURvbSgnYmFjay0nICsgdGhpcy5pZCwgdGhpcy5wYWludGVyLCBkcHIpO1xuICAgICAgICB0aGlzLmN0eEJhY2sgPSB0aGlzLmRvbUJhY2suZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgaWYgKGRwciAhPT0gMSkge1xuICAgICAgICAgICAgdGhpcy5jdHhCYWNrLnNjYWxlKGRwciwgZHByKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTGF5ZXIucHJvdG90eXBlLmNyZWF0ZVJlcGFpbnRSZWN0cyA9IGZ1bmN0aW9uIChkaXNwbGF5TGlzdCwgcHJldkxpc3QsIHZpZXdXaWR0aCwgdmlld0hlaWdodCkge1xuICAgICAgICBpZiAodGhpcy5fX2ZpcnN0VGltZVBhaW50KSB7XG4gICAgICAgICAgICB0aGlzLl9fZmlyc3RUaW1lUGFpbnQgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtZXJnZWRSZXBhaW50UmVjdHMgPSBbXTtcbiAgICAgICAgdmFyIG1heFJlcGFpbnRSZWN0Q291bnQgPSB0aGlzLm1heFJlcGFpbnRSZWN0Q291bnQ7XG4gICAgICAgIHZhciBmdWxsID0gZmFsc2U7XG4gICAgICAgIHZhciBwZW5kaW5nUmVjdCA9IG5ldyBCb3VuZGluZ1JlY3QoMCwgMCwgMCwgMCk7XG4gICAgICAgIGZ1bmN0aW9uIGFkZFJlY3RUb01lcmdlUG9vbChyZWN0KSB7XG4gICAgICAgICAgICBpZiAoIXJlY3QuaXNGaW5pdGUoKSB8fCByZWN0LmlzWmVybygpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lcmdlZFJlcGFpbnRSZWN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgYm91bmRpbmdSZWN0ID0gbmV3IEJvdW5kaW5nUmVjdCgwLCAwLCAwLCAwKTtcbiAgICAgICAgICAgICAgICBib3VuZGluZ1JlY3QuY29weShyZWN0KTtcbiAgICAgICAgICAgICAgICBtZXJnZWRSZXBhaW50UmVjdHMucHVzaChib3VuZGluZ1JlY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGlzTWVyZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIG1pbkRlbHRhQXJlYSA9IEluZmluaXR5O1xuICAgICAgICAgICAgICAgIHZhciBiZXN0UmVjdFRvTWVyZ2VJZHggPSAwO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVyZ2VkUmVwYWludFJlY3RzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXJnZWRSZWN0ID0gbWVyZ2VkUmVwYWludFJlY3RzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVyZ2VkUmVjdC5pbnRlcnNlY3QocmVjdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwZW5kaW5nUmVjdF8xID0gbmV3IEJvdW5kaW5nUmVjdCgwLCAwLCAwLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdSZWN0XzEuY29weShtZXJnZWRSZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdSZWN0XzEudW5pb24ocmVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXJnZWRSZXBhaW50UmVjdHNbaV0gPSBwZW5kaW5nUmVjdF8xO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNNZXJnZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1JlY3QuY29weShyZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdSZWN0LnVuaW9uKG1lcmdlZFJlY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFBcmVhID0gcmVjdC53aWR0aCAqIHJlY3QuaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJBcmVhID0gbWVyZ2VkUmVjdC53aWR0aCAqIG1lcmdlZFJlY3QuaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBlbmRpbmdBcmVhID0gcGVuZGluZ1JlY3Qud2lkdGggKiBwZW5kaW5nUmVjdC5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGFBcmVhID0gcGVuZGluZ0FyZWEgLSBhQXJlYSAtIGJBcmVhO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlbHRhQXJlYSA8IG1pbkRlbHRhQXJlYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbkRlbHRhQXJlYSA9IGRlbHRhQXJlYTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0UmVjdFRvTWVyZ2VJZHggPSBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmdWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lcmdlZFJlcGFpbnRSZWN0c1tiZXN0UmVjdFRvTWVyZ2VJZHhdLnVuaW9uKHJlY3QpO1xuICAgICAgICAgICAgICAgICAgICBpc01lcmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghaXNNZXJnZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvdW5kaW5nUmVjdCA9IG5ldyBCb3VuZGluZ1JlY3QoMCwgMCwgMCwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGJvdW5kaW5nUmVjdC5jb3B5KHJlY3QpO1xuICAgICAgICAgICAgICAgICAgICBtZXJnZWRSZXBhaW50UmVjdHMucHVzaChib3VuZGluZ1JlY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWZ1bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgZnVsbCA9IG1lcmdlZFJlcGFpbnRSZWN0cy5sZW5ndGggPj0gbWF4UmVwYWludFJlY3RDb3VudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuX19zdGFydEluZGV4OyBpIDwgdGhpcy5fX2VuZEluZGV4OyArK2kpIHtcbiAgICAgICAgICAgIHZhciBlbCA9IGRpc3BsYXlMaXN0W2ldO1xuICAgICAgICAgICAgaWYgKGVsKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNob3VsZFBhaW50ID0gZWwuc2hvdWxkQmVQYWludGVkKHZpZXdXaWR0aCwgdmlld0hlaWdodCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdmFyIHByZXZSZWN0ID0gZWwuX19pc1JlbmRlcmVkICYmICgoZWwuX19kaXJ0eSAmIFJFRFJBV19CSVQpIHx8ICFzaG91bGRQYWludClcbiAgICAgICAgICAgICAgICAgICAgPyBlbC5nZXRQcmV2UGFpbnRSZWN0KClcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChwcmV2UmVjdCkge1xuICAgICAgICAgICAgICAgICAgICBhZGRSZWN0VG9NZXJnZVBvb2wocHJldlJlY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY3VyUmVjdCA9IHNob3VsZFBhaW50ICYmICgoZWwuX19kaXJ0eSAmIFJFRFJBV19CSVQpIHx8ICFlbC5fX2lzUmVuZGVyZWQpXG4gICAgICAgICAgICAgICAgICAgID8gZWwuZ2V0UGFpbnRSZWN0KClcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChjdXJSZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFJlY3RUb01lcmdlUG9vbChjdXJSZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuX19wcmV2U3RhcnRJbmRleDsgaSA8IHRoaXMuX19wcmV2RW5kSW5kZXg7ICsraSkge1xuICAgICAgICAgICAgdmFyIGVsID0gcHJldkxpc3RbaV07XG4gICAgICAgICAgICB2YXIgc2hvdWxkUGFpbnQgPSBlbC5zaG91bGRCZVBhaW50ZWQodmlld1dpZHRoLCB2aWV3SGVpZ2h0LCB0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgIGlmIChlbCAmJiAoIXNob3VsZFBhaW50IHx8ICFlbC5fX3pyKSAmJiBlbC5fX2lzUmVuZGVyZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJldlJlY3QgPSBlbC5nZXRQcmV2UGFpbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgaWYgKHByZXZSZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFJlY3RUb01lcmdlUG9vbChwcmV2UmVjdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBoYXNJbnRlcnNlY3Rpb25zO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICBoYXNJbnRlcnNlY3Rpb25zID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lcmdlZFJlcGFpbnRSZWN0cy5sZW5ndGg7KSB7XG4gICAgICAgICAgICAgICAgaWYgKG1lcmdlZFJlcGFpbnRSZWN0c1tpXS5pc1plcm8oKSkge1xuICAgICAgICAgICAgICAgICAgICBtZXJnZWRSZXBhaW50UmVjdHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IGkgKyAxOyBqIDwgbWVyZ2VkUmVwYWludFJlY3RzLmxlbmd0aDspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lcmdlZFJlcGFpbnRSZWN0c1tpXS5pbnRlcnNlY3QobWVyZ2VkUmVwYWludFJlY3RzW2pdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzSW50ZXJzZWN0aW9ucyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXJnZWRSZXBhaW50UmVjdHNbaV0udW5pb24obWVyZ2VkUmVwYWludFJlY3RzW2pdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlZFJlcGFpbnRSZWN0cy5zcGxpY2UoaiwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChoYXNJbnRlcnNlY3Rpb25zKTtcbiAgICAgICAgdGhpcy5fcGFpbnRSZWN0cyA9IG1lcmdlZFJlcGFpbnRSZWN0cztcbiAgICAgICAgcmV0dXJuIG1lcmdlZFJlcGFpbnRSZWN0cztcbiAgICB9O1xuICAgIExheWVyLnByb3RvdHlwZS5kZWJ1Z0dldFBhaW50UmVjdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5fcGFpbnRSZWN0cyB8fCBbXSkuc2xpY2UoKTtcbiAgICB9O1xuICAgIExheWVyLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkge1xuICAgICAgICB2YXIgZHByID0gdGhpcy5kcHI7XG4gICAgICAgIHZhciBkb20gPSB0aGlzLmRvbTtcbiAgICAgICAgdmFyIGRvbVN0eWxlID0gZG9tLnN0eWxlO1xuICAgICAgICB2YXIgZG9tQmFjayA9IHRoaXMuZG9tQmFjaztcbiAgICAgICAgaWYgKGRvbVN0eWxlKSB7XG4gICAgICAgICAgICBkb21TdHlsZS53aWR0aCA9IHdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgIGRvbVN0eWxlLmhlaWdodCA9IGhlaWdodCArICdweCc7XG4gICAgICAgIH1cbiAgICAgICAgZG9tLndpZHRoID0gd2lkdGggKiBkcHI7XG4gICAgICAgIGRvbS5oZWlnaHQgPSBoZWlnaHQgKiBkcHI7XG4gICAgICAgIGlmIChkb21CYWNrKSB7XG4gICAgICAgICAgICBkb21CYWNrLndpZHRoID0gd2lkdGggKiBkcHI7XG4gICAgICAgICAgICBkb21CYWNrLmhlaWdodCA9IGhlaWdodCAqIGRwcjtcbiAgICAgICAgICAgIGlmIChkcHIgIT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN0eEJhY2suc2NhbGUoZHByLCBkcHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBMYXllci5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoY2xlYXJBbGwsIGNsZWFyQ29sb3IsIHJlcGFpbnRSZWN0cykge1xuICAgICAgICB2YXIgZG9tID0gdGhpcy5kb207XG4gICAgICAgIHZhciBjdHggPSB0aGlzLmN0eDtcbiAgICAgICAgdmFyIHdpZHRoID0gZG9tLndpZHRoO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gZG9tLmhlaWdodDtcbiAgICAgICAgY2xlYXJDb2xvciA9IGNsZWFyQ29sb3IgfHwgdGhpcy5jbGVhckNvbG9yO1xuICAgICAgICB2YXIgaGF2ZU1vdGlvbkJMdXIgPSB0aGlzLm1vdGlvbkJsdXIgJiYgIWNsZWFyQWxsO1xuICAgICAgICB2YXIgbGFzdEZyYW1lQWxwaGEgPSB0aGlzLmxhc3RGcmFtZUFscGhhO1xuICAgICAgICB2YXIgZHByID0gdGhpcy5kcHI7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgaWYgKGhhdmVNb3Rpb25CTHVyKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZG9tQmFjaykge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlQmFja0J1ZmZlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jdHhCYWNrLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdjb3B5JztcbiAgICAgICAgICAgIHRoaXMuY3R4QmFjay5kcmF3SW1hZ2UoZG9tLCAwLCAwLCB3aWR0aCAvIGRwciwgaGVpZ2h0IC8gZHByKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZG9tQmFjayA9IHRoaXMuZG9tQmFjaztcbiAgICAgICAgZnVuY3Rpb24gZG9DbGVhcih4LCB5LCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgICAgICBjdHguY2xlYXJSZWN0KHgsIHksIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgaWYgKGNsZWFyQ29sb3IgJiYgY2xlYXJDb2xvciAhPT0gJ3RyYW5zcGFyZW50Jykge1xuICAgICAgICAgICAgICAgIHZhciBjbGVhckNvbG9yR3JhZGllbnRPclBhdHRlcm4gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKHV0aWwuaXNHcmFkaWVudE9iamVjdChjbGVhckNvbG9yKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvdWxkQ2FjaGUgPSBjbGVhckNvbG9yLmdsb2JhbCB8fCAoY2xlYXJDb2xvci5fX3dpZHRoID09PSB3aWR0aFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgY2xlYXJDb2xvci5fX2hlaWdodCA9PT0gaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJDb2xvckdyYWRpZW50T3JQYXR0ZXJuID0gc2hvdWxkQ2FjaGVcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIGNsZWFyQ29sb3IuX19jYW52YXNHcmFkaWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgZ2V0Q2FudmFzR3JhZGllbnQoY3R4LCBjbGVhckNvbG9yLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGhlaWdodFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyQ29sb3IuX19jYW52YXNHcmFkaWVudCA9IGNsZWFyQ29sb3JHcmFkaWVudE9yUGF0dGVybjtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJDb2xvci5fX3dpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyQ29sb3IuX19oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHV0aWwuaXNJbWFnZVBhdHRlcm5PYmplY3QoY2xlYXJDb2xvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJDb2xvci5zY2FsZVggPSBjbGVhckNvbG9yLnNjYWxlWCB8fCBkcHI7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyQ29sb3Iuc2NhbGVZID0gY2xlYXJDb2xvci5zY2FsZVkgfHwgZHByO1xuICAgICAgICAgICAgICAgICAgICBjbGVhckNvbG9yR3JhZGllbnRPclBhdHRlcm4gPSBjcmVhdGVDYW52YXNQYXR0ZXJuKGN0eCwgY2xlYXJDb2xvciwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlydHk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNldFVucGFpbnRlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX19wYWludGVyLnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGNsZWFyQ29sb3JHcmFkaWVudE9yUGF0dGVybiB8fCBjbGVhckNvbG9yO1xuICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhdmVNb3Rpb25CTHVyKSB7XG4gICAgICAgICAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBsYXN0RnJhbWVBbHBoYTtcbiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGRvbUJhY2ssIHgsIHksIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgO1xuICAgICAgICBpZiAoIXJlcGFpbnRSZWN0cyB8fCBoYXZlTW90aW9uQkx1cikge1xuICAgICAgICAgICAgZG9DbGVhcigwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyZXBhaW50UmVjdHMubGVuZ3RoKSB7XG4gICAgICAgICAgICB1dGlsLmVhY2gocmVwYWludFJlY3RzLCBmdW5jdGlvbiAocmVjdCkge1xuICAgICAgICAgICAgICAgIGRvQ2xlYXIocmVjdC54ICogZHByLCByZWN0LnkgKiBkcHIsIHJlY3Qud2lkdGggKiBkcHIsIHJlY3QuaGVpZ2h0ICogZHByKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gTGF5ZXI7XG59KEV2ZW50ZnVsKSk7XG5leHBvcnQgZGVmYXVsdCBMYXllcjtcbiIsImltcG9ydCB7IGRldmljZVBpeGVsUmF0aW8gfSBmcm9tICcuLi9jb25maWcuanMnO1xuaW1wb3J0ICogYXMgdXRpbCBmcm9tICcuLi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0IExheWVyIGZyb20gJy4vTGF5ZXIuanMnO1xuaW1wb3J0IHJlcXVlc3RBbmltYXRpb25GcmFtZSBmcm9tICcuLi9hbmltYXRpb24vcmVxdWVzdEFuaW1hdGlvbkZyYW1lLmpzJztcbmltcG9ydCBlbnYgZnJvbSAnLi4vY29yZS9lbnYuanMnO1xuaW1wb3J0IHsgYnJ1c2gsIGJydXNoU2luZ2xlIH0gZnJvbSAnLi9ncmFwaGljLmpzJztcbmltcG9ydCB7IFJFRFJBV19CSVQgfSBmcm9tICcuLi9ncmFwaGljL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBnZXRTaXplIH0gZnJvbSAnLi9oZWxwZXIuanMnO1xudmFyIEhPVkVSX0xBWUVSX1pMRVZFTCA9IDFlNTtcbnZhciBDQU5WQVNfWkxFVkVMID0gMzE0MTU5O1xudmFyIEVMX0FGVEVSX0lOQ1JFTUVOVEFMX0lOQyA9IDAuMDE7XG52YXIgSU5DUkVNRU5UQUxfSU5DID0gMC4wMDE7XG5mdW5jdGlvbiBpc0xheWVyVmFsaWQobGF5ZXIpIHtcbiAgICBpZiAoIWxheWVyKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGxheWVyLl9fYnVpbHRpbl9fKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIChsYXllci5yZXNpemUpICE9PSAnZnVuY3Rpb24nXG4gICAgICAgIHx8IHR5cGVvZiAobGF5ZXIucmVmcmVzaCkgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVJvb3Qod2lkdGgsIGhlaWdodCkge1xuICAgIHZhciBkb21Sb290ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZG9tUm9vdC5zdHlsZS5jc3NUZXh0ID0gW1xuICAgICAgICAncG9zaXRpb246cmVsYXRpdmUnLFxuICAgICAgICAnd2lkdGg6JyArIHdpZHRoICsgJ3B4JyxcbiAgICAgICAgJ2hlaWdodDonICsgaGVpZ2h0ICsgJ3B4JyxcbiAgICAgICAgJ3BhZGRpbmc6MCcsXG4gICAgICAgICdtYXJnaW46MCcsXG4gICAgICAgICdib3JkZXItd2lkdGg6MCdcbiAgICBdLmpvaW4oJzsnKSArICc7JztcbiAgICByZXR1cm4gZG9tUm9vdDtcbn1cbnZhciBDYW52YXNQYWludGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDYW52YXNQYWludGVyKHJvb3QsIHN0b3JhZ2UsIG9wdHMsIGlkKSB7XG4gICAgICAgIHRoaXMudHlwZSA9ICdjYW52YXMnO1xuICAgICAgICB0aGlzLl96bGV2ZWxMaXN0ID0gW107XG4gICAgICAgIHRoaXMuX3ByZXZEaXNwbGF5TGlzdCA9IFtdO1xuICAgICAgICB0aGlzLl9sYXllcnMgPSB7fTtcbiAgICAgICAgdGhpcy5fbGF5ZXJDb25maWcgPSB7fTtcbiAgICAgICAgdGhpcy5fbmVlZHNNYW51YWxseUNvbXBvc2l0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMudHlwZSA9ICdjYW52YXMnO1xuICAgICAgICB2YXIgc2luZ2xlQ2FudmFzID0gIXJvb3Qubm9kZU5hbWVcbiAgICAgICAgICAgIHx8IHJvb3Qubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gJ0NBTlZBUyc7XG4gICAgICAgIHRoaXMuX29wdHMgPSBvcHRzID0gdXRpbC5leHRlbmQoe30sIG9wdHMgfHwge30pO1xuICAgICAgICB0aGlzLmRwciA9IG9wdHMuZGV2aWNlUGl4ZWxSYXRpbyB8fCBkZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgICB0aGlzLl9zaW5nbGVDYW52YXMgPSBzaW5nbGVDYW52YXM7XG4gICAgICAgIHRoaXMucm9vdCA9IHJvb3Q7XG4gICAgICAgIHZhciByb290U3R5bGUgPSByb290LnN0eWxlO1xuICAgICAgICBpZiAocm9vdFN0eWxlKSB7XG4gICAgICAgICAgICB1dGlsLmRpc2FibGVVc2VyU2VsZWN0KHJvb3QpO1xuICAgICAgICAgICAgcm9vdC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0b3JhZ2UgPSBzdG9yYWdlO1xuICAgICAgICB2YXIgemxldmVsTGlzdCA9IHRoaXMuX3psZXZlbExpc3Q7XG4gICAgICAgIHRoaXMuX3ByZXZEaXNwbGF5TGlzdCA9IFtdO1xuICAgICAgICB2YXIgbGF5ZXJzID0gdGhpcy5fbGF5ZXJzO1xuICAgICAgICBpZiAoIXNpbmdsZUNhbnZhcykge1xuICAgICAgICAgICAgdGhpcy5fd2lkdGggPSBnZXRTaXplKHJvb3QsIDAsIG9wdHMpO1xuICAgICAgICAgICAgdGhpcy5faGVpZ2h0ID0gZ2V0U2l6ZShyb290LCAxLCBvcHRzKTtcbiAgICAgICAgICAgIHZhciBkb21Sb290ID0gdGhpcy5fZG9tUm9vdCA9IGNyZWF0ZVJvb3QodGhpcy5fd2lkdGgsIHRoaXMuX2hlaWdodCk7XG4gICAgICAgICAgICByb290LmFwcGVuZENoaWxkKGRvbVJvb3QpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHJvb3RDYW52YXMgPSByb290O1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gcm9vdENhbnZhcy53aWR0aDtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSByb290Q2FudmFzLmhlaWdodDtcbiAgICAgICAgICAgIGlmIChvcHRzLndpZHRoICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB3aWR0aCA9IG9wdHMud2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0cy5oZWlnaHQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGhlaWdodCA9IG9wdHMuaGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kcHIgPSBvcHRzLmRldmljZVBpeGVsUmF0aW8gfHwgMTtcbiAgICAgICAgICAgIHJvb3RDYW52YXMud2lkdGggPSB3aWR0aCAqIHRoaXMuZHByO1xuICAgICAgICAgICAgcm9vdENhbnZhcy5oZWlnaHQgPSBoZWlnaHQgKiB0aGlzLmRwcjtcbiAgICAgICAgICAgIHRoaXMuX3dpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICB2YXIgbWFpbkxheWVyID0gbmV3IExheWVyKHJvb3RDYW52YXMsIHRoaXMsIHRoaXMuZHByKTtcbiAgICAgICAgICAgIG1haW5MYXllci5fX2J1aWx0aW5fXyA9IHRydWU7XG4gICAgICAgICAgICBtYWluTGF5ZXIuaW5pdENvbnRleHQoKTtcbiAgICAgICAgICAgIGxheWVyc1tDQU5WQVNfWkxFVkVMXSA9IG1haW5MYXllcjtcbiAgICAgICAgICAgIG1haW5MYXllci56bGV2ZWwgPSBDQU5WQVNfWkxFVkVMO1xuICAgICAgICAgICAgemxldmVsTGlzdC5wdXNoKENBTlZBU19aTEVWRUwpO1xuICAgICAgICAgICAgdGhpcy5fZG9tUm9vdCA9IHJvb3Q7XG4gICAgICAgIH1cbiAgICB9XG4gICAgQ2FudmFzUGFpbnRlci5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICdjYW52YXMnO1xuICAgIH07XG4gICAgQ2FudmFzUGFpbnRlci5wcm90b3R5cGUuaXNTaW5nbGVDYW52YXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zaW5nbGVDYW52YXM7XG4gICAgfTtcbiAgICBDYW52YXNQYWludGVyLnByb3RvdHlwZS5nZXRWaWV3cG9ydFJvb3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kb21Sb290O1xuICAgIH07XG4gICAgQ2FudmFzUGFpbnRlci5wcm90b3R5cGUuZ2V0Vmlld3BvcnRSb290T2Zmc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdmlld3BvcnRSb290ID0gdGhpcy5nZXRWaWV3cG9ydFJvb3QoKTtcbiAgICAgICAgaWYgKHZpZXdwb3J0Um9vdCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBvZmZzZXRMZWZ0OiB2aWV3cG9ydFJvb3Qub2Zmc2V0TGVmdCB8fCAwLFxuICAgICAgICAgICAgICAgIG9mZnNldFRvcDogdmlld3BvcnRSb290Lm9mZnNldFRvcCB8fCAwXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDYW52YXNQYWludGVyLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKHBhaW50QWxsKSB7XG4gICAgICAgIHZhciBsaXN0ID0gdGhpcy5zdG9yYWdlLmdldERpc3BsYXlMaXN0KHRydWUpO1xuICAgICAgICB2YXIgcHJldkxpc3QgPSB0aGlzLl9wcmV2RGlzcGxheUxpc3Q7XG4gICAgICAgIHZhciB6bGV2ZWxMaXN0ID0gdGhpcy5femxldmVsTGlzdDtcbiAgICAgICAgdGhpcy5fcmVkcmF3SWQgPSBNYXRoLnJhbmRvbSgpO1xuICAgICAgICB0aGlzLl9wYWludExpc3QobGlzdCwgcHJldkxpc3QsIHBhaW50QWxsLCB0aGlzLl9yZWRyYXdJZCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgemxldmVsTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHogPSB6bGV2ZWxMaXN0W2ldO1xuICAgICAgICAgICAgdmFyIGxheWVyID0gdGhpcy5fbGF5ZXJzW3pdO1xuICAgICAgICAgICAgaWYgKCFsYXllci5fX2J1aWx0aW5fXyAmJiBsYXllci5yZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNsZWFyQ29sb3IgPSBpID09PSAwID8gdGhpcy5fYmFja2dyb3VuZENvbG9yIDogbnVsbDtcbiAgICAgICAgICAgICAgICBsYXllci5yZWZyZXNoKGNsZWFyQ29sb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9vcHRzLnVzZURpcnR5UmVjdCkge1xuICAgICAgICAgICAgdGhpcy5fcHJldkRpc3BsYXlMaXN0ID0gbGlzdC5zbGljZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgQ2FudmFzUGFpbnRlci5wcm90b3R5cGUucmVmcmVzaEhvdmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9wYWludEhvdmVyTGlzdCh0aGlzLnN0b3JhZ2UuZ2V0RGlzcGxheUxpc3QoZmFsc2UpKTtcbiAgICB9O1xuICAgIENhbnZhc1BhaW50ZXIucHJvdG90eXBlLl9wYWludEhvdmVyTGlzdCA9IGZ1bmN0aW9uIChsaXN0KSB7XG4gICAgICAgIHZhciBsZW4gPSBsaXN0Lmxlbmd0aDtcbiAgICAgICAgdmFyIGhvdmVyTGF5ZXIgPSB0aGlzLl9ob3ZlcmxheWVyO1xuICAgICAgICBob3ZlckxheWVyICYmIGhvdmVyTGF5ZXIuY2xlYXIoKTtcbiAgICAgICAgaWYgKCFsZW4pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2NvcGUgPSB7XG4gICAgICAgICAgICBpbkhvdmVyOiB0cnVlLFxuICAgICAgICAgICAgdmlld1dpZHRoOiB0aGlzLl93aWR0aCxcbiAgICAgICAgICAgIHZpZXdIZWlnaHQ6IHRoaXMuX2hlaWdodFxuICAgICAgICB9O1xuICAgICAgICB2YXIgY3R4O1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgZWwgPSBsaXN0W2ldO1xuICAgICAgICAgICAgaWYgKGVsLl9faW5Ib3Zlcikge1xuICAgICAgICAgICAgICAgIGlmICghaG92ZXJMYXllcikge1xuICAgICAgICAgICAgICAgICAgICBob3ZlckxheWVyID0gdGhpcy5faG92ZXJsYXllciA9IHRoaXMuZ2V0TGF5ZXIoSE9WRVJfTEFZRVJfWkxFVkVMKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFjdHgpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gaG92ZXJMYXllci5jdHg7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJydXNoKGN0eCwgZWwsIHNjb3BlLCBpID09PSBsZW4gLSAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4KSB7XG4gICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDYW52YXNQYWludGVyLnByb3RvdHlwZS5nZXRIb3ZlckxheWVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRMYXllcihIT1ZFUl9MQVlFUl9aTEVWRUwpO1xuICAgIH07XG4gICAgQ2FudmFzUGFpbnRlci5wcm90b3R5cGUucGFpbnRPbmUgPSBmdW5jdGlvbiAoY3R4LCBlbCkge1xuICAgICAgICBicnVzaFNpbmdsZShjdHgsIGVsKTtcbiAgICB9O1xuICAgIENhbnZhc1BhaW50ZXIucHJvdG90eXBlLl9wYWludExpc3QgPSBmdW5jdGlvbiAobGlzdCwgcHJldkxpc3QsIHBhaW50QWxsLCByZWRyYXdJZCkge1xuICAgICAgICBpZiAodGhpcy5fcmVkcmF3SWQgIT09IHJlZHJhd0lkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcGFpbnRBbGwgPSBwYWludEFsbCB8fCBmYWxzZTtcbiAgICAgICAgdGhpcy5fdXBkYXRlTGF5ZXJTdGF0dXMobGlzdCk7XG4gICAgICAgIHZhciBfYSA9IHRoaXMuX2RvUGFpbnRMaXN0KGxpc3QsIHByZXZMaXN0LCBwYWludEFsbCksIGZpbmlzaGVkID0gX2EuZmluaXNoZWQsIG5lZWRzUmVmcmVzaEhvdmVyID0gX2EubmVlZHNSZWZyZXNoSG92ZXI7XG4gICAgICAgIGlmICh0aGlzLl9uZWVkc01hbnVhbGx5Q29tcG9zaXRpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuX2NvbXBvc2l0ZU1hbnVhbGx5KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5lZWRzUmVmcmVzaEhvdmVyKSB7XG4gICAgICAgICAgICB0aGlzLl9wYWludEhvdmVyTGlzdChsaXN0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZpbmlzaGVkKSB7XG4gICAgICAgICAgICB2YXIgc2VsZl8xID0gdGhpcztcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2VsZl8xLl9wYWludExpc3QobGlzdCwgcHJldkxpc3QsIHBhaW50QWxsLCByZWRyYXdJZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICAgICAgICAgIGxheWVyLmFmdGVyQnJ1c2ggJiYgbGF5ZXIuYWZ0ZXJCcnVzaCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENhbnZhc1BhaW50ZXIucHJvdG90eXBlLl9jb21wb3NpdGVNYW51YWxseSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGN0eCA9IHRoaXMuZ2V0TGF5ZXIoQ0FOVkFTX1pMRVZFTCkuY3R4O1xuICAgICAgICB2YXIgd2lkdGggPSB0aGlzLl9kb21Sb290LndpZHRoO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5fZG9tUm9vdC5oZWlnaHQ7XG4gICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIHRoaXMuZWFjaEJ1aWx0aW5MYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIGlmIChsYXllci52aXJ0dWFsKSB7XG4gICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShsYXllci5kb20sIDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENhbnZhc1BhaW50ZXIucHJvdG90eXBlLl9kb1BhaW50TGlzdCA9IGZ1bmN0aW9uIChsaXN0LCBwcmV2TGlzdCwgcGFpbnRBbGwpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGxheWVyTGlzdCA9IFtdO1xuICAgICAgICB2YXIgdXNlRGlydHlSZWN0ID0gdGhpcy5fb3B0cy51c2VEaXJ0eVJlY3Q7XG4gICAgICAgIGZvciAodmFyIHppID0gMDsgemkgPCB0aGlzLl96bGV2ZWxMaXN0Lmxlbmd0aDsgemkrKykge1xuICAgICAgICAgICAgdmFyIHpsZXZlbCA9IHRoaXMuX3psZXZlbExpc3RbemldO1xuICAgICAgICAgICAgdmFyIGxheWVyID0gdGhpcy5fbGF5ZXJzW3psZXZlbF07XG4gICAgICAgICAgICBpZiAobGF5ZXIuX19idWlsdGluX19cbiAgICAgICAgICAgICAgICAmJiBsYXllciAhPT0gdGhpcy5faG92ZXJsYXllclxuICAgICAgICAgICAgICAgICYmIChsYXllci5fX2RpcnR5IHx8IHBhaW50QWxsKSkge1xuICAgICAgICAgICAgICAgIGxheWVyTGlzdC5wdXNoKGxheWVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgZmluaXNoZWQgPSB0cnVlO1xuICAgICAgICB2YXIgbmVlZHNSZWZyZXNoSG92ZXIgPSBmYWxzZTtcbiAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoaykge1xuICAgICAgICAgICAgdmFyIGxheWVyID0gbGF5ZXJMaXN0W2tdO1xuICAgICAgICAgICAgdmFyIGN0eCA9IGxheWVyLmN0eDtcbiAgICAgICAgICAgIHZhciByZXBhaW50UmVjdHMgPSB1c2VEaXJ0eVJlY3RcbiAgICAgICAgICAgICAgICAmJiBsYXllci5jcmVhdGVSZXBhaW50UmVjdHMobGlzdCwgcHJldkxpc3QsIHRoaXNfMS5fd2lkdGgsIHRoaXNfMS5faGVpZ2h0KTtcbiAgICAgICAgICAgIHZhciBzdGFydCA9IHBhaW50QWxsID8gbGF5ZXIuX19zdGFydEluZGV4IDogbGF5ZXIuX19kcmF3SW5kZXg7XG4gICAgICAgICAgICB2YXIgdXNlVGltZXIgPSAhcGFpbnRBbGwgJiYgbGF5ZXIuaW5jcmVtZW50YWwgJiYgRGF0ZS5ub3c7XG4gICAgICAgICAgICB2YXIgc3RhcnRUaW1lID0gdXNlVGltZXIgJiYgRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIHZhciBjbGVhckNvbG9yID0gbGF5ZXIuemxldmVsID09PSB0aGlzXzEuX3psZXZlbExpc3RbMF1cbiAgICAgICAgICAgICAgICA/IHRoaXNfMS5fYmFja2dyb3VuZENvbG9yIDogbnVsbDtcbiAgICAgICAgICAgIGlmIChsYXllci5fX3N0YXJ0SW5kZXggPT09IGxheWVyLl9fZW5kSW5kZXgpIHtcbiAgICAgICAgICAgICAgICBsYXllci5jbGVhcihmYWxzZSwgY2xlYXJDb2xvciwgcmVwYWludFJlY3RzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHN0YXJ0ID09PSBsYXllci5fX3N0YXJ0SW5kZXgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlyc3RFbCA9IGxpc3Rbc3RhcnRdO1xuICAgICAgICAgICAgICAgIGlmICghZmlyc3RFbC5pbmNyZW1lbnRhbCB8fCAhZmlyc3RFbC5ub3RDbGVhciB8fCBwYWludEFsbCkge1xuICAgICAgICAgICAgICAgICAgICBsYXllci5jbGVhcihmYWxzZSwgY2xlYXJDb2xvciwgcmVwYWludFJlY3RzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RhcnQgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRm9yIHNvbWUgdW5rbm93biByZWFzb24uIGRyYXdJbmRleCBpcyAtMScpO1xuICAgICAgICAgICAgICAgIHN0YXJ0ID0gbGF5ZXIuX19zdGFydEluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICB2YXIgcmVwYWludCA9IGZ1bmN0aW9uIChyZXBhaW50UmVjdCkge1xuICAgICAgICAgICAgICAgIHZhciBzY29wZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaW5Ib3ZlcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGFsbENsaXBwZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBwcmV2RWw6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHZpZXdXaWR0aDogX3RoaXMuX3dpZHRoLFxuICAgICAgICAgICAgICAgICAgICB2aWV3SGVpZ2h0OiBfdGhpcy5faGVpZ2h0XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGxheWVyLl9fZW5kSW5kZXg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWwgPSBsaXN0W2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWwuX19pbkhvdmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZWVkc1JlZnJlc2hIb3ZlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2RvUGFpbnRFbChlbCwgbGF5ZXIsIHVzZURpcnR5UmVjdCwgcmVwYWludFJlY3QsIHNjb3BlLCBpID09PSBsYXllci5fX2VuZEluZGV4IC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VUaW1lcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRUaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkVGltZSA+IDE1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNjb3BlLnByZXZFbENsaXBQYXRocykge1xuICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAocmVwYWludFJlY3RzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcGFpbnRSZWN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaSA9IGxheWVyLl9fZW5kSW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZHByID0gdGhpc18xLmRwcjtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IDA7IHIgPCByZXBhaW50UmVjdHMubGVuZ3RoOyArK3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWN0ID0gcmVwYWludFJlY3RzW3JdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yZWN0KHJlY3QueCAqIGRwciwgcmVjdC55ICogZHByLCByZWN0LndpZHRoICogZHByLCByZWN0LmhlaWdodCAqIGRwcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xpcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVwYWludChyZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICAgICAgICAgIHJlcGFpbnQoKTtcbiAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGF5ZXIuX19kcmF3SW5kZXggPSBpO1xuICAgICAgICAgICAgaWYgKGxheWVyLl9fZHJhd0luZGV4IDwgbGF5ZXIuX19lbmRJbmRleCkge1xuICAgICAgICAgICAgICAgIGZpbmlzaGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHZhciB0aGlzXzEgPSB0aGlzO1xuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGxheWVyTGlzdC5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgX2xvb3BfMShrKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZW52Lnd4YSkge1xuICAgICAgICAgICAgdXRpbC5lYWNoKHRoaXMuX2xheWVycywgZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxheWVyICYmIGxheWVyLmN0eCAmJiBsYXllci5jdHguZHJhdykge1xuICAgICAgICAgICAgICAgICAgICBsYXllci5jdHguZHJhdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaW5pc2hlZDogZmluaXNoZWQsXG4gICAgICAgICAgICBuZWVkc1JlZnJlc2hIb3ZlcjogbmVlZHNSZWZyZXNoSG92ZXJcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIENhbnZhc1BhaW50ZXIucHJvdG90eXBlLl9kb1BhaW50RWwgPSBmdW5jdGlvbiAoZWwsIGN1cnJlbnRMYXllciwgdXNlRGlydHlSZWN0LCByZXBhaW50UmVjdCwgc2NvcGUsIGlzTGFzdCkge1xuICAgICAgICB2YXIgY3R4ID0gY3VycmVudExheWVyLmN0eDtcbiAgICAgICAgaWYgKHVzZURpcnR5UmVjdCkge1xuICAgICAgICAgICAgdmFyIHBhaW50UmVjdCA9IGVsLmdldFBhaW50UmVjdCgpO1xuICAgICAgICAgICAgaWYgKCFyZXBhaW50UmVjdCB8fCBwYWludFJlY3QgJiYgcGFpbnRSZWN0LmludGVyc2VjdChyZXBhaW50UmVjdCkpIHtcbiAgICAgICAgICAgICAgICBicnVzaChjdHgsIGVsLCBzY29wZSwgaXNMYXN0KTtcbiAgICAgICAgICAgICAgICBlbC5zZXRQcmV2UGFpbnRSZWN0KHBhaW50UmVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBicnVzaChjdHgsIGVsLCBzY29wZSwgaXNMYXN0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ2FudmFzUGFpbnRlci5wcm90b3R5cGUuZ2V0TGF5ZXIgPSBmdW5jdGlvbiAoemxldmVsLCB2aXJ0dWFsKSB7XG4gICAgICAgIGlmICh0aGlzLl9zaW5nbGVDYW52YXMgJiYgIXRoaXMuX25lZWRzTWFudWFsbHlDb21wb3NpdGluZykge1xuICAgICAgICAgICAgemxldmVsID0gQ0FOVkFTX1pMRVZFTDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGF5ZXIgPSB0aGlzLl9sYXllcnNbemxldmVsXTtcbiAgICAgICAgaWYgKCFsYXllcikge1xuICAgICAgICAgICAgbGF5ZXIgPSBuZXcgTGF5ZXIoJ3pyXycgKyB6bGV2ZWwsIHRoaXMsIHRoaXMuZHByKTtcbiAgICAgICAgICAgIGxheWVyLnpsZXZlbCA9IHpsZXZlbDtcbiAgICAgICAgICAgIGxheWVyLl9fYnVpbHRpbl9fID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9sYXllckNvbmZpZ1t6bGV2ZWxdKSB7XG4gICAgICAgICAgICAgICAgdXRpbC5tZXJnZShsYXllciwgdGhpcy5fbGF5ZXJDb25maWdbemxldmVsXSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLl9sYXllckNvbmZpZ1t6bGV2ZWwgLSBFTF9BRlRFUl9JTkNSRU1FTlRBTF9JTkNdKSB7XG4gICAgICAgICAgICAgICAgdXRpbC5tZXJnZShsYXllciwgdGhpcy5fbGF5ZXJDb25maWdbemxldmVsIC0gRUxfQUZURVJfSU5DUkVNRU5UQUxfSU5DXSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmlydHVhbCkge1xuICAgICAgICAgICAgICAgIGxheWVyLnZpcnR1YWwgPSB2aXJ0dWFsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbnNlcnRMYXllcih6bGV2ZWwsIGxheWVyKTtcbiAgICAgICAgICAgIGxheWVyLmluaXRDb250ZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxheWVyO1xuICAgIH07XG4gICAgQ2FudmFzUGFpbnRlci5wcm90b3R5cGUuaW5zZXJ0TGF5ZXIgPSBmdW5jdGlvbiAoemxldmVsLCBsYXllcikge1xuICAgICAgICB2YXIgbGF5ZXJzTWFwID0gdGhpcy5fbGF5ZXJzO1xuICAgICAgICB2YXIgemxldmVsTGlzdCA9IHRoaXMuX3psZXZlbExpc3Q7XG4gICAgICAgIHZhciBsZW4gPSB6bGV2ZWxMaXN0Lmxlbmd0aDtcbiAgICAgICAgdmFyIGRvbVJvb3QgPSB0aGlzLl9kb21Sb290O1xuICAgICAgICB2YXIgcHJldkxheWVyID0gbnVsbDtcbiAgICAgICAgdmFyIGkgPSAtMTtcbiAgICAgICAgaWYgKGxheWVyc01hcFt6bGV2ZWxdKSB7XG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgICAgIHV0aWwubG9nRXJyb3IoJ1pMZXZlbCAnICsgemxldmVsICsgJyBoYXMgYmVlbiB1c2VkIGFscmVhZHknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzTGF5ZXJWYWxpZChsYXllcikpIHtcbiAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdXRpbC5sb2dFcnJvcignTGF5ZXIgb2YgemxldmVsICcgKyB6bGV2ZWwgKyAnIGlzIG5vdCB2YWxpZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsZW4gPiAwICYmIHpsZXZlbCA+IHpsZXZlbExpc3RbMF0pIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW4gLSAxOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoemxldmVsTGlzdFtpXSA8IHpsZXZlbFxuICAgICAgICAgICAgICAgICAgICAmJiB6bGV2ZWxMaXN0W2kgKyAxXSA+IHpsZXZlbCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcmV2TGF5ZXIgPSBsYXllcnNNYXBbemxldmVsTGlzdFtpXV07XG4gICAgICAgIH1cbiAgICAgICAgemxldmVsTGlzdC5zcGxpY2UoaSArIDEsIDAsIHpsZXZlbCk7XG4gICAgICAgIGxheWVyc01hcFt6bGV2ZWxdID0gbGF5ZXI7XG4gICAgICAgIGlmICghbGF5ZXIudmlydHVhbCkge1xuICAgICAgICAgICAgaWYgKHByZXZMYXllcikge1xuICAgICAgICAgICAgICAgIHZhciBwcmV2RG9tID0gcHJldkxheWVyLmRvbTtcbiAgICAgICAgICAgICAgICBpZiAocHJldkRvbS5uZXh0U2libGluZykge1xuICAgICAgICAgICAgICAgICAgICBkb21Sb290Lmluc2VydEJlZm9yZShsYXllci5kb20sIHByZXZEb20ubmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZG9tUm9vdC5hcHBlbmRDaGlsZChsYXllci5kb20pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChkb21Sb290LmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9tUm9vdC5pbnNlcnRCZWZvcmUobGF5ZXIuZG9tLCBkb21Sb290LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZG9tUm9vdC5hcHBlbmRDaGlsZChsYXllci5kb20pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsYXllci5fX3BhaW50ZXIgPSB0aGlzO1xuICAgIH07XG4gICAgQ2FudmFzUGFpbnRlci5wcm90b3R5cGUuZWFjaExheWVyID0gZnVuY3Rpb24gKGNiLCBjb250ZXh0KSB7XG4gICAgICAgIHZhciB6bGV2ZWxMaXN0ID0gdGhpcy5femxldmVsTGlzdDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB6bGV2ZWxMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgeiA9IHpsZXZlbExpc3RbaV07XG4gICAgICAgICAgICBjYi5jYWxsKGNvbnRleHQsIHRoaXMuX2xheWVyc1t6XSwgeik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENhbnZhc1BhaW50ZXIucHJvdG90eXBlLmVhY2hCdWlsdGluTGF5ZXIgPSBmdW5jdGlvbiAoY2IsIGNvbnRleHQpIHtcbiAgICAgICAgdmFyIHpsZXZlbExpc3QgPSB0aGlzLl96bGV2ZWxMaXN0O1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHpsZXZlbExpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB6ID0gemxldmVsTGlzdFtpXTtcbiAgICAgICAgICAgIHZhciBsYXllciA9IHRoaXMuX2xheWVyc1t6XTtcbiAgICAgICAgICAgIGlmIChsYXllci5fX2J1aWx0aW5fXykge1xuICAgICAgICAgICAgICAgIGNiLmNhbGwoY29udGV4dCwgbGF5ZXIsIHopO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBDYW52YXNQYWludGVyLnByb3RvdHlwZS5lYWNoT3RoZXJMYXllciA9IGZ1bmN0aW9uIChjYiwgY29udGV4dCkge1xuICAgICAgICB2YXIgemxldmVsTGlzdCA9IHRoaXMuX3psZXZlbExpc3Q7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgemxldmVsTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHogPSB6bGV2ZWxMaXN0W2ldO1xuICAgICAgICAgICAgdmFyIGxheWVyID0gdGhpcy5fbGF5ZXJzW3pdO1xuICAgICAgICAgICAgaWYgKCFsYXllci5fX2J1aWx0aW5fXykge1xuICAgICAgICAgICAgICAgIGNiLmNhbGwoY29udGV4dCwgbGF5ZXIsIHopO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBDYW52YXNQYWludGVyLnByb3RvdHlwZS5nZXRMYXllcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sYXllcnM7XG4gICAgfTtcbiAgICBDYW52YXNQYWludGVyLnByb3RvdHlwZS5fdXBkYXRlTGF5ZXJTdGF0dXMgPSBmdW5jdGlvbiAobGlzdCkge1xuICAgICAgICB0aGlzLmVhY2hCdWlsdGluTGF5ZXIoZnVuY3Rpb24gKGxheWVyLCB6KSB7XG4gICAgICAgICAgICBsYXllci5fX2RpcnR5ID0gbGF5ZXIuX191c2VkID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgICBmdW5jdGlvbiB1cGRhdGVQcmV2TGF5ZXIoaWR4KSB7XG4gICAgICAgICAgICBpZiAocHJldkxheWVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByZXZMYXllci5fX2VuZEluZGV4ICE9PSBpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJldkxheWVyLl9fZGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcmV2TGF5ZXIuX19lbmRJbmRleCA9IGlkeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fc2luZ2xlQ2FudmFzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpXzEgPSAxOyBpXzEgPCBsaXN0Lmxlbmd0aDsgaV8xKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZWwgPSBsaXN0W2lfMV07XG4gICAgICAgICAgICAgICAgaWYgKGVsLnpsZXZlbCAhPT0gbGlzdFtpXzEgLSAxXS56bGV2ZWwgfHwgZWwuaW5jcmVtZW50YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbmVlZHNNYW51YWxseUNvbXBvc2l0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBwcmV2TGF5ZXIgPSBudWxsO1xuICAgICAgICB2YXIgaW5jcmVtZW50YWxMYXllckNvdW50ID0gMDtcbiAgICAgICAgdmFyIHByZXZabGV2ZWw7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGVsID0gbGlzdFtpXTtcbiAgICAgICAgICAgIHZhciB6bGV2ZWwgPSBlbC56bGV2ZWw7XG4gICAgICAgICAgICB2YXIgbGF5ZXIgPSB2b2lkIDA7XG4gICAgICAgICAgICBpZiAocHJldlpsZXZlbCAhPT0gemxldmVsKSB7XG4gICAgICAgICAgICAgICAgcHJldlpsZXZlbCA9IHpsZXZlbDtcbiAgICAgICAgICAgICAgICBpbmNyZW1lbnRhbExheWVyQ291bnQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVsLmluY3JlbWVudGFsKSB7XG4gICAgICAgICAgICAgICAgbGF5ZXIgPSB0aGlzLmdldExheWVyKHpsZXZlbCArIElOQ1JFTUVOVEFMX0lOQywgdGhpcy5fbmVlZHNNYW51YWxseUNvbXBvc2l0aW5nKTtcbiAgICAgICAgICAgICAgICBsYXllci5pbmNyZW1lbnRhbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaW5jcmVtZW50YWxMYXllckNvdW50ID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxheWVyID0gdGhpcy5nZXRMYXllcih6bGV2ZWwgKyAoaW5jcmVtZW50YWxMYXllckNvdW50ID4gMCA/IEVMX0FGVEVSX0lOQ1JFTUVOVEFMX0lOQyA6IDApLCB0aGlzLl9uZWVkc01hbnVhbGx5Q29tcG9zaXRpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFsYXllci5fX2J1aWx0aW5fXykge1xuICAgICAgICAgICAgICAgIHV0aWwubG9nRXJyb3IoJ1pMZXZlbCAnICsgemxldmVsICsgJyBoYXMgYmVlbiB1c2VkIGJ5IHVua293biBsYXllciAnICsgbGF5ZXIuaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxheWVyICE9PSBwcmV2TGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBsYXllci5fX3VzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChsYXllci5fX3N0YXJ0SW5kZXggIT09IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuX19kaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxheWVyLl9fc3RhcnRJbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgaWYgKCFsYXllci5pbmNyZW1lbnRhbCkge1xuICAgICAgICAgICAgICAgICAgICBsYXllci5fX2RyYXdJbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsYXllci5fX2RyYXdJbmRleCA9IC0xO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1cGRhdGVQcmV2TGF5ZXIoaSk7XG4gICAgICAgICAgICAgICAgcHJldkxheWVyID0gbGF5ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGVsLl9fZGlydHkgJiBSRURSQVdfQklUKSAmJiAhZWwuX19pbkhvdmVyKSB7XG4gICAgICAgICAgICAgICAgbGF5ZXIuX19kaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKGxheWVyLmluY3JlbWVudGFsICYmIGxheWVyLl9fZHJhd0luZGV4IDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBsYXllci5fX2RyYXdJbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZVByZXZMYXllcihpKTtcbiAgICAgICAgdGhpcy5lYWNoQnVpbHRpbkxheWVyKGZ1bmN0aW9uIChsYXllciwgeikge1xuICAgICAgICAgICAgaWYgKCFsYXllci5fX3VzZWQgJiYgbGF5ZXIuZ2V0RWxlbWVudENvdW50KCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgbGF5ZXIuX19kaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICAgICAgbGF5ZXIuX19zdGFydEluZGV4ID0gbGF5ZXIuX19lbmRJbmRleCA9IGxheWVyLl9fZHJhd0luZGV4ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsYXllci5fX2RpcnR5ICYmIGxheWVyLl9fZHJhd0luZGV4IDwgMCkge1xuICAgICAgICAgICAgICAgIGxheWVyLl9fZHJhd0luZGV4ID0gbGF5ZXIuX19zdGFydEluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENhbnZhc1BhaW50ZXIucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVhY2hCdWlsdGluTGF5ZXIodGhpcy5fY2xlYXJMYXllcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgQ2FudmFzUGFpbnRlci5wcm90b3R5cGUuX2NsZWFyTGF5ZXIgPSBmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgbGF5ZXIuY2xlYXIoKTtcbiAgICB9O1xuICAgIENhbnZhc1BhaW50ZXIucHJvdG90eXBlLnNldEJhY2tncm91bmRDb2xvciA9IGZ1bmN0aW9uIChiYWNrZ3JvdW5kQ29sb3IpIHtcbiAgICAgICAgdGhpcy5fYmFja2dyb3VuZENvbG9yID0gYmFja2dyb3VuZENvbG9yO1xuICAgICAgICB1dGlsLmVhY2godGhpcy5fbGF5ZXJzLCBmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIGxheWVyLnNldFVucGFpbnRlZCgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENhbnZhc1BhaW50ZXIucHJvdG90eXBlLmNvbmZpZ0xheWVyID0gZnVuY3Rpb24gKHpsZXZlbCwgY29uZmlnKSB7XG4gICAgICAgIGlmIChjb25maWcpIHtcbiAgICAgICAgICAgIHZhciBsYXllckNvbmZpZyA9IHRoaXMuX2xheWVyQ29uZmlnO1xuICAgICAgICAgICAgaWYgKCFsYXllckNvbmZpZ1t6bGV2ZWxdKSB7XG4gICAgICAgICAgICAgICAgbGF5ZXJDb25maWdbemxldmVsXSA9IGNvbmZpZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwubWVyZ2UobGF5ZXJDb25maWdbemxldmVsXSwgY29uZmlnLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5femxldmVsTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBfemxldmVsID0gdGhpcy5femxldmVsTGlzdFtpXTtcbiAgICAgICAgICAgICAgICBpZiAoX3psZXZlbCA9PT0gemxldmVsIHx8IF96bGV2ZWwgPT09IHpsZXZlbCArIEVMX0FGVEVSX0lOQ1JFTUVOVEFMX0lOQykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGF5ZXIgPSB0aGlzLl9sYXllcnNbX3psZXZlbF07XG4gICAgICAgICAgICAgICAgICAgIHV0aWwubWVyZ2UobGF5ZXIsIGxheWVyQ29uZmlnW3psZXZlbF0sIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgQ2FudmFzUGFpbnRlci5wcm90b3R5cGUuZGVsTGF5ZXIgPSBmdW5jdGlvbiAoemxldmVsKSB7XG4gICAgICAgIHZhciBsYXllcnMgPSB0aGlzLl9sYXllcnM7XG4gICAgICAgIHZhciB6bGV2ZWxMaXN0ID0gdGhpcy5femxldmVsTGlzdDtcbiAgICAgICAgdmFyIGxheWVyID0gbGF5ZXJzW3psZXZlbF07XG4gICAgICAgIGlmICghbGF5ZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsYXllci5kb20ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChsYXllci5kb20pO1xuICAgICAgICBkZWxldGUgbGF5ZXJzW3psZXZlbF07XG4gICAgICAgIHpsZXZlbExpc3Quc3BsaWNlKHV0aWwuaW5kZXhPZih6bGV2ZWxMaXN0LCB6bGV2ZWwpLCAxKTtcbiAgICB9O1xuICAgIENhbnZhc1BhaW50ZXIucHJvdG90eXBlLnJlc2l6ZSA9IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIGlmICghdGhpcy5fZG9tUm9vdC5zdHlsZSkge1xuICAgICAgICAgICAgaWYgKHdpZHRoID09IG51bGwgfHwgaGVpZ2h0ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl93aWR0aCA9IHdpZHRoO1xuICAgICAgICAgICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy5nZXRMYXllcihDQU5WQVNfWkxFVkVMKS5yZXNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgZG9tUm9vdCA9IHRoaXMuX2RvbVJvb3Q7XG4gICAgICAgICAgICBkb21Sb290LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB2YXIgb3B0cyA9IHRoaXMuX29wdHM7XG4gICAgICAgICAgICB2YXIgcm9vdCA9IHRoaXMucm9vdDtcbiAgICAgICAgICAgIHdpZHRoICE9IG51bGwgJiYgKG9wdHMud2lkdGggPSB3aWR0aCk7XG4gICAgICAgICAgICBoZWlnaHQgIT0gbnVsbCAmJiAob3B0cy5oZWlnaHQgPSBoZWlnaHQpO1xuICAgICAgICAgICAgd2lkdGggPSBnZXRTaXplKHJvb3QsIDAsIG9wdHMpO1xuICAgICAgICAgICAgaGVpZ2h0ID0gZ2V0U2l6ZShyb290LCAxLCBvcHRzKTtcbiAgICAgICAgICAgIGRvbVJvb3Quc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgaWYgKHRoaXMuX3dpZHRoICE9PSB3aWR0aCB8fCBoZWlnaHQgIT09IHRoaXMuX2hlaWdodCkge1xuICAgICAgICAgICAgICAgIGRvbVJvb3Quc3R5bGUud2lkdGggPSB3aWR0aCArICdweCc7XG4gICAgICAgICAgICAgICAgZG9tUm9vdC5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGlkIGluIHRoaXMuX2xheWVycykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fbGF5ZXJzLmhhc093blByb3BlcnR5KGlkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGF5ZXJzW2lkXS5yZXNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fd2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIENhbnZhc1BhaW50ZXIucHJvdG90eXBlLmNsZWFyTGF5ZXIgPSBmdW5jdGlvbiAoemxldmVsKSB7XG4gICAgICAgIHZhciBsYXllciA9IHRoaXMuX2xheWVyc1t6bGV2ZWxdO1xuICAgICAgICBpZiAobGF5ZXIpIHtcbiAgICAgICAgICAgIGxheWVyLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENhbnZhc1BhaW50ZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucm9vdC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgdGhpcy5yb290ID1cbiAgICAgICAgICAgIHRoaXMuc3RvcmFnZSA9XG4gICAgICAgICAgICAgICAgdGhpcy5fZG9tUm9vdCA9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xheWVycyA9IG51bGw7XG4gICAgfTtcbiAgICBDYW52YXNQYWludGVyLnByb3RvdHlwZS5nZXRSZW5kZXJlZENhbnZhcyA9IGZ1bmN0aW9uIChvcHRzKSB7XG4gICAgICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuICAgICAgICBpZiAodGhpcy5fc2luZ2xlQ2FudmFzICYmICF0aGlzLl9jb21wb3NpdGVNYW51YWxseSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xheWVyc1tDQU5WQVNfWkxFVkVMXS5kb207XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGltYWdlTGF5ZXIgPSBuZXcgTGF5ZXIoJ2ltYWdlJywgdGhpcywgb3B0cy5waXhlbFJhdGlvIHx8IHRoaXMuZHByKTtcbiAgICAgICAgaW1hZ2VMYXllci5pbml0Q29udGV4dCgpO1xuICAgICAgICBpbWFnZUxheWVyLmNsZWFyKGZhbHNlLCBvcHRzLmJhY2tncm91bmRDb2xvciB8fCB0aGlzLl9iYWNrZ3JvdW5kQ29sb3IpO1xuICAgICAgICB2YXIgY3R4ID0gaW1hZ2VMYXllci5jdHg7XG4gICAgICAgIGlmIChvcHRzLnBpeGVsUmF0aW8gPD0gdGhpcy5kcHIpIHtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgdmFyIHdpZHRoXzEgPSBpbWFnZUxheWVyLmRvbS53aWR0aDtcbiAgICAgICAgICAgIHZhciBoZWlnaHRfMSA9IGltYWdlTGF5ZXIuZG9tLmhlaWdodDtcbiAgICAgICAgICAgIHRoaXMuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICAgICAgICAgIGlmIChsYXllci5fX2J1aWx0aW5fXykge1xuICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGxheWVyLmRvbSwgMCwgMCwgd2lkdGhfMSwgaGVpZ2h0XzEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChsYXllci5yZW5kZXJUb0NhbnZhcykge1xuICAgICAgICAgICAgICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICAgICAgICAgICAgICBsYXllci5yZW5kZXJUb0NhbnZhcyhjdHgpO1xuICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHNjb3BlID0ge1xuICAgICAgICAgICAgICAgIGluSG92ZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHZpZXdXaWR0aDogdGhpcy5fd2lkdGgsXG4gICAgICAgICAgICAgICAgdmlld0hlaWdodDogdGhpcy5faGVpZ2h0XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGRpc3BsYXlMaXN0ID0gdGhpcy5zdG9yYWdlLmdldERpc3BsYXlMaXN0KHRydWUpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGRpc3BsYXlMaXN0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsID0gZGlzcGxheUxpc3RbaV07XG4gICAgICAgICAgICAgICAgYnJ1c2goY3R4LCBlbCwgc2NvcGUsIGkgPT09IGxlbiAtIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbWFnZUxheWVyLmRvbTtcbiAgICB9O1xuICAgIENhbnZhc1BhaW50ZXIucHJvdG90eXBlLmdldFdpZHRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fd2lkdGg7XG4gICAgfTtcbiAgICBDYW52YXNQYWludGVyLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XG4gICAgfTtcbiAgICByZXR1cm4gQ2FudmFzUGFpbnRlcjtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBDYW52YXNQYWludGVyO1xuO1xuIiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgQ2FudmFzUGFpbnRlciBmcm9tICd6cmVuZGVyL2xpYi9jYW52YXMvUGFpbnRlci5qcyc7XG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbChyZWdpc3RlcnMpIHtcbiAgcmVnaXN0ZXJzLnJlZ2lzdGVyUGFpbnRlcignY2FudmFzJywgQ2FudmFzUGFpbnRlcik7XG59IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgeyBpc0FycmF5LCBtYXAgfSBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0IHsgcGFyc2VQZXJjZW50IH0gZnJvbSAnenJlbmRlci9saWIvY29udGFpbi90ZXh0LmpzJztcbmV4cG9ydCBmdW5jdGlvbiBnZXRTZWN0b3JDb3JuZXJSYWRpdXMobW9kZWwsIHNoYXBlLCB6ZXJvSWZOdWxsKSB7XG4gIHZhciBjb3JuZXJSYWRpdXMgPSBtb2RlbC5nZXQoJ2JvcmRlclJhZGl1cycpO1xuXG4gIGlmIChjb3JuZXJSYWRpdXMgPT0gbnVsbCkge1xuICAgIHJldHVybiB6ZXJvSWZOdWxsID8ge1xuICAgICAgY29ybmVyUmFkaXVzOiAwXG4gICAgfSA6IG51bGw7XG4gIH1cblxuICBpZiAoIWlzQXJyYXkoY29ybmVyUmFkaXVzKSkge1xuICAgIGNvcm5lclJhZGl1cyA9IFtjb3JuZXJSYWRpdXMsIGNvcm5lclJhZGl1cywgY29ybmVyUmFkaXVzLCBjb3JuZXJSYWRpdXNdO1xuICB9XG5cbiAgdmFyIGRyID0gTWF0aC5hYnMoc2hhcGUuciB8fCAwIC0gc2hhcGUucjAgfHwgMCk7XG4gIHJldHVybiB7XG4gICAgY29ybmVyUmFkaXVzOiBtYXAoY29ybmVyUmFkaXVzLCBmdW5jdGlvbiAoY3IpIHtcbiAgICAgIHJldHVybiBwYXJzZVBlcmNlbnQoY3IsIGRyKTtcbiAgICB9KVxuICB9O1xufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgcGFyc2VQZXJjZW50LCBsaW5lYXJNYXAgfSBmcm9tICcuLi8uLi91dGlsL251bWJlci5qcyc7XG5pbXBvcnQgKiBhcyBsYXlvdXQgZnJvbSAnLi4vLi4vdXRpbC9sYXlvdXQuanMnO1xuaW1wb3J0ICogYXMgenJVdGlsIGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG52YXIgUEkyID0gTWF0aC5QSSAqIDI7XG52YXIgUkFESUFOID0gTWF0aC5QSSAvIDE4MDtcblxuZnVuY3Rpb24gZ2V0Vmlld1JlY3Qoc2VyaWVzTW9kZWwsIGFwaSkge1xuICByZXR1cm4gbGF5b3V0LmdldExheW91dFJlY3Qoc2VyaWVzTW9kZWwuZ2V0Qm94TGF5b3V0UGFyYW1zKCksIHtcbiAgICB3aWR0aDogYXBpLmdldFdpZHRoKCksXG4gICAgaGVpZ2h0OiBhcGkuZ2V0SGVpZ2h0KClcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRCYXNpY1BpZUxheW91dChzZXJpZXNNb2RlbCwgYXBpKSB7XG4gIHZhciB2aWV3UmVjdCA9IGdldFZpZXdSZWN0KHNlcmllc01vZGVsLCBhcGkpOyAvLyBjZW50ZXIgY2FuIGJlIHN0cmluZyBvciBudW1iZXIgd2hlbiBjb29yZGluYXRlU3lzdGVtIGlzIHNwZWNpZmllZFxuXG4gIHZhciBjZW50ZXIgPSBzZXJpZXNNb2RlbC5nZXQoJ2NlbnRlcicpO1xuICB2YXIgcmFkaXVzID0gc2VyaWVzTW9kZWwuZ2V0KCdyYWRpdXMnKTtcblxuICBpZiAoIXpyVXRpbC5pc0FycmF5KHJhZGl1cykpIHtcbiAgICByYWRpdXMgPSBbMCwgcmFkaXVzXTtcbiAgfVxuXG4gIHZhciB3aWR0aCA9IHBhcnNlUGVyY2VudCh2aWV3UmVjdC53aWR0aCwgYXBpLmdldFdpZHRoKCkpO1xuICB2YXIgaGVpZ2h0ID0gcGFyc2VQZXJjZW50KHZpZXdSZWN0LmhlaWdodCwgYXBpLmdldEhlaWdodCgpKTtcbiAgdmFyIHNpemUgPSBNYXRoLm1pbih3aWR0aCwgaGVpZ2h0KTtcbiAgdmFyIHIwID0gcGFyc2VQZXJjZW50KHJhZGl1c1swXSwgc2l6ZSAvIDIpO1xuICB2YXIgciA9IHBhcnNlUGVyY2VudChyYWRpdXNbMV0sIHNpemUgLyAyKTtcbiAgdmFyIGN4O1xuICB2YXIgY3k7XG4gIHZhciBjb29yZFN5cyA9IHNlcmllc01vZGVsLmNvb3JkaW5hdGVTeXN0ZW07XG5cbiAgaWYgKGNvb3JkU3lzKSB7XG4gICAgLy8gcGVyY2VudGFnZSBpcyBub3QgYWxsb3dlZCB3aGVuIGNvb3JkaW5hdGUgc3lzdGVtIGlzIHNwZWNpZmllZFxuICAgIHZhciBwb2ludCA9IGNvb3JkU3lzLmRhdGFUb1BvaW50KGNlbnRlcik7XG4gICAgY3ggPSBwb2ludFswXSB8fCAwO1xuICAgIGN5ID0gcG9pbnRbMV0gfHwgMDtcbiAgfSBlbHNlIHtcbiAgICBpZiAoIXpyVXRpbC5pc0FycmF5KGNlbnRlcikpIHtcbiAgICAgIGNlbnRlciA9IFtjZW50ZXIsIGNlbnRlcl07XG4gICAgfVxuXG4gICAgY3ggPSBwYXJzZVBlcmNlbnQoY2VudGVyWzBdLCB3aWR0aCkgKyB2aWV3UmVjdC54O1xuICAgIGN5ID0gcGFyc2VQZXJjZW50KGNlbnRlclsxXSwgaGVpZ2h0KSArIHZpZXdSZWN0Lnk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGN4OiBjeCxcbiAgICBjeTogY3ksXG4gICAgcjA6IHIwLFxuICAgIHI6IHJcbiAgfTtcbn1cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHBpZUxheW91dChzZXJpZXNUeXBlLCBlY01vZGVsLCBhcGkpIHtcbiAgZWNNb2RlbC5lYWNoU2VyaWVzQnlUeXBlKHNlcmllc1R5cGUsIGZ1bmN0aW9uIChzZXJpZXNNb2RlbCkge1xuICAgIHZhciBkYXRhID0gc2VyaWVzTW9kZWwuZ2V0RGF0YSgpO1xuICAgIHZhciB2YWx1ZURpbSA9IGRhdGEubWFwRGltZW5zaW9uKCd2YWx1ZScpO1xuICAgIHZhciB2aWV3UmVjdCA9IGdldFZpZXdSZWN0KHNlcmllc01vZGVsLCBhcGkpO1xuXG4gICAgdmFyIF9hID0gZ2V0QmFzaWNQaWVMYXlvdXQoc2VyaWVzTW9kZWwsIGFwaSksXG4gICAgICAgIGN4ID0gX2EuY3gsXG4gICAgICAgIGN5ID0gX2EuY3ksXG4gICAgICAgIHIgPSBfYS5yLFxuICAgICAgICByMCA9IF9hLnIwO1xuXG4gICAgdmFyIHN0YXJ0QW5nbGUgPSAtc2VyaWVzTW9kZWwuZ2V0KCdzdGFydEFuZ2xlJykgKiBSQURJQU47XG4gICAgdmFyIG1pbkFuZ2xlID0gc2VyaWVzTW9kZWwuZ2V0KCdtaW5BbmdsZScpICogUkFESUFOO1xuICAgIHZhciB2YWxpZERhdGFDb3VudCA9IDA7XG4gICAgZGF0YS5lYWNoKHZhbHVlRGltLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICFpc05hTih2YWx1ZSkgJiYgdmFsaWREYXRhQ291bnQrKztcbiAgICB9KTtcbiAgICB2YXIgc3VtID0gZGF0YS5nZXRTdW0odmFsdWVEaW0pOyAvLyBTdW0gbWF5IGJlIDBcblxuICAgIHZhciB1bml0UmFkaWFuID0gTWF0aC5QSSAvIChzdW0gfHwgdmFsaWREYXRhQ291bnQpICogMjtcbiAgICB2YXIgY2xvY2t3aXNlID0gc2VyaWVzTW9kZWwuZ2V0KCdjbG9ja3dpc2UnKTtcbiAgICB2YXIgcm9zZVR5cGUgPSBzZXJpZXNNb2RlbC5nZXQoJ3Jvc2VUeXBlJyk7XG4gICAgdmFyIHN0aWxsU2hvd1plcm9TdW0gPSBzZXJpZXNNb2RlbC5nZXQoJ3N0aWxsU2hvd1plcm9TdW0nKTsgLy8gWzAuLi5tYXhdXG5cbiAgICB2YXIgZXh0ZW50ID0gZGF0YS5nZXREYXRhRXh0ZW50KHZhbHVlRGltKTtcbiAgICBleHRlbnRbMF0gPSAwOyAvLyBJbiB0aGUgY2FzZSBzb21lIHNlY3RvciBhbmdsZSBpcyBzbWFsbGVyIHRoYW4gbWluQW5nbGVcblxuICAgIHZhciByZXN0QW5nbGUgPSBQSTI7XG4gICAgdmFyIHZhbHVlU3VtTGFyZ2VyVGhhbk1pbkFuZ2xlID0gMDtcbiAgICB2YXIgY3VycmVudEFuZ2xlID0gc3RhcnRBbmdsZTtcbiAgICB2YXIgZGlyID0gY2xvY2t3aXNlID8gMSA6IC0xO1xuICAgIGRhdGEuc2V0TGF5b3V0KHtcbiAgICAgIHZpZXdSZWN0OiB2aWV3UmVjdCxcbiAgICAgIHI6IHJcbiAgICB9KTtcbiAgICBkYXRhLmVhY2godmFsdWVEaW0sIGZ1bmN0aW9uICh2YWx1ZSwgaWR4KSB7XG4gICAgICB2YXIgYW5nbGU7XG5cbiAgICAgIGlmIChpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgZGF0YS5zZXRJdGVtTGF5b3V0KGlkeCwge1xuICAgICAgICAgIGFuZ2xlOiBOYU4sXG4gICAgICAgICAgc3RhcnRBbmdsZTogTmFOLFxuICAgICAgICAgIGVuZEFuZ2xlOiBOYU4sXG4gICAgICAgICAgY2xvY2t3aXNlOiBjbG9ja3dpc2UsXG4gICAgICAgICAgY3g6IGN4LFxuICAgICAgICAgIGN5OiBjeSxcbiAgICAgICAgICByMDogcjAsXG4gICAgICAgICAgcjogcm9zZVR5cGUgPyBOYU4gOiByXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIEZJWE1FIOWFvOWuuSAyLjAg5L2G5pivIHJvc2VUeXBlIOaYryBhcmVhIOeahOaXtuWAmeaJjeaYr+i/meagt++8n1xuXG5cbiAgICAgIGlmIChyb3NlVHlwZSAhPT0gJ2FyZWEnKSB7XG4gICAgICAgIGFuZ2xlID0gc3VtID09PSAwICYmIHN0aWxsU2hvd1plcm9TdW0gPyB1bml0UmFkaWFuIDogdmFsdWUgKiB1bml0UmFkaWFuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYW5nbGUgPSBQSTIgLyB2YWxpZERhdGFDb3VudDtcbiAgICAgIH1cblxuICAgICAgaWYgKGFuZ2xlIDwgbWluQW5nbGUpIHtcbiAgICAgICAgYW5nbGUgPSBtaW5BbmdsZTtcbiAgICAgICAgcmVzdEFuZ2xlIC09IG1pbkFuZ2xlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWVTdW1MYXJnZXJUaGFuTWluQW5nbGUgKz0gdmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBlbmRBbmdsZSA9IGN1cnJlbnRBbmdsZSArIGRpciAqIGFuZ2xlO1xuICAgICAgZGF0YS5zZXRJdGVtTGF5b3V0KGlkeCwge1xuICAgICAgICBhbmdsZTogYW5nbGUsXG4gICAgICAgIHN0YXJ0QW5nbGU6IGN1cnJlbnRBbmdsZSxcbiAgICAgICAgZW5kQW5nbGU6IGVuZEFuZ2xlLFxuICAgICAgICBjbG9ja3dpc2U6IGNsb2Nrd2lzZSxcbiAgICAgICAgY3g6IGN4LFxuICAgICAgICBjeTogY3ksXG4gICAgICAgIHIwOiByMCxcbiAgICAgICAgcjogcm9zZVR5cGUgPyBsaW5lYXJNYXAodmFsdWUsIGV4dGVudCwgW3IwLCByXSkgOiByXG4gICAgICB9KTtcbiAgICAgIGN1cnJlbnRBbmdsZSA9IGVuZEFuZ2xlO1xuICAgIH0pOyAvLyBTb21lIHNlY3RvciBpcyBjb25zdHJhaW5lZCBieSBtaW5BbmdsZVxuICAgIC8vIFJlc3Qgc2VjdG9ycyBuZWVkcyByZWNhbGN1bGF0ZSBhbmdsZVxuXG4gICAgaWYgKHJlc3RBbmdsZSA8IFBJMiAmJiB2YWxpZERhdGFDb3VudCkge1xuICAgICAgLy8gQXZlcmFnZSB0aGUgYW5nbGUgaWYgcmVzdCBhbmdsZSBpcyBub3QgZW5vdWdoIGFmdGVyIGFsbCBhbmdsZXMgaXNcbiAgICAgIC8vIENvbnN0cmFpbmVkIGJ5IG1pbkFuZ2xlXG4gICAgICBpZiAocmVzdEFuZ2xlIDw9IDFlLTMpIHtcbiAgICAgICAgdmFyIGFuZ2xlXzEgPSBQSTIgLyB2YWxpZERhdGFDb3VudDtcbiAgICAgICAgZGF0YS5lYWNoKHZhbHVlRGltLCBmdW5jdGlvbiAodmFsdWUsIGlkeCkge1xuICAgICAgICAgIGlmICghaXNOYU4odmFsdWUpKSB7XG4gICAgICAgICAgICB2YXIgbGF5b3V0XzEgPSBkYXRhLmdldEl0ZW1MYXlvdXQoaWR4KTtcbiAgICAgICAgICAgIGxheW91dF8xLmFuZ2xlID0gYW5nbGVfMTtcbiAgICAgICAgICAgIGxheW91dF8xLnN0YXJ0QW5nbGUgPSBzdGFydEFuZ2xlICsgZGlyICogaWR4ICogYW5nbGVfMTtcbiAgICAgICAgICAgIGxheW91dF8xLmVuZEFuZ2xlID0gc3RhcnRBbmdsZSArIGRpciAqIChpZHggKyAxKSAqIGFuZ2xlXzE7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVuaXRSYWRpYW4gPSByZXN0QW5nbGUgLyB2YWx1ZVN1bUxhcmdlclRoYW5NaW5BbmdsZTtcbiAgICAgICAgY3VycmVudEFuZ2xlID0gc3RhcnRBbmdsZTtcbiAgICAgICAgZGF0YS5lYWNoKHZhbHVlRGltLCBmdW5jdGlvbiAodmFsdWUsIGlkeCkge1xuICAgICAgICAgIGlmICghaXNOYU4odmFsdWUpKSB7XG4gICAgICAgICAgICB2YXIgbGF5b3V0XzIgPSBkYXRhLmdldEl0ZW1MYXlvdXQoaWR4KTtcbiAgICAgICAgICAgIHZhciBhbmdsZSA9IGxheW91dF8yLmFuZ2xlID09PSBtaW5BbmdsZSA/IG1pbkFuZ2xlIDogdmFsdWUgKiB1bml0UmFkaWFuO1xuICAgICAgICAgICAgbGF5b3V0XzIuc3RhcnRBbmdsZSA9IGN1cnJlbnRBbmdsZTtcbiAgICAgICAgICAgIGxheW91dF8yLmVuZEFuZ2xlID0gY3VycmVudEFuZ2xlICsgZGlyICogYW5nbGU7XG4gICAgICAgICAgICBjdXJyZW50QW5nbGUgKz0gZGlyICogYW5nbGU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZGF0YUZpbHRlcihzZXJpZXNUeXBlKSB7XG4gIHJldHVybiB7XG4gICAgc2VyaWVzVHlwZTogc2VyaWVzVHlwZSxcbiAgICByZXNldDogZnVuY3Rpb24gKHNlcmllc01vZGVsLCBlY01vZGVsKSB7XG4gICAgICB2YXIgbGVnZW5kTW9kZWxzID0gZWNNb2RlbC5maW5kQ29tcG9uZW50cyh7XG4gICAgICAgIG1haW5UeXBlOiAnbGVnZW5kJ1xuICAgICAgfSk7XG5cbiAgICAgIGlmICghbGVnZW5kTW9kZWxzIHx8ICFsZWdlbmRNb2RlbHMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGRhdGEgPSBzZXJpZXNNb2RlbC5nZXREYXRhKCk7XG4gICAgICBkYXRhLmZpbHRlclNlbGYoZnVuY3Rpb24gKGlkeCkge1xuICAgICAgICB2YXIgbmFtZSA9IGRhdGEuZ2V0TmFtZShpZHgpOyAvLyBJZiBpbiBhbnkgbGVnZW5kIGNvbXBvbmVudCB0aGUgc3RhdHVzIGlzIG5vdCBzZWxlY3RlZC5cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlZ2VuZE1vZGVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIC8vIEB0cy1pZ25vcmUgRklYTUU6IExlZ2VuZE1vZGVsXG4gICAgICAgICAgaWYgKCFsZWdlbmRNb2RlbHNbaV0uaXNTZWxlY3RlZChuYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuLy8gRklYTUUgZW1waGFzaXMgbGFiZWwgcG9zaXRpb24gaXMgbm90IHNhbWUgd2l0aCBub3JtYWwgbGFiZWwgcG9zaXRpb25cbmltcG9ydCB7IHBhcnNlUGVyY2VudCB9IGZyb20gJy4uLy4uL3V0aWwvbnVtYmVyLmpzJztcbmltcG9ydCB7IFBvaW50IH0gZnJvbSAnLi4vLi4vdXRpbC9ncmFwaGljLmpzJztcbmltcG9ydCB7IGVhY2gsIGlzTnVtYmVyIH0gZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbmltcG9ydCB7IGxpbWl0VHVybkFuZ2xlLCBsaW1pdFN1cmZhY2VBbmdsZSB9IGZyb20gJy4uLy4uL2xhYmVsL2xhYmVsR3VpZGVIZWxwZXIuanMnO1xuaW1wb3J0IHsgc2hpZnRMYXlvdXRPblkgfSBmcm9tICcuLi8uLi9sYWJlbC9sYWJlbExheW91dEhlbHBlci5qcyc7XG52YXIgUkFESUFOID0gTWF0aC5QSSAvIDE4MDtcblxuZnVuY3Rpb24gYWRqdXN0U2luZ2xlU2lkZShsaXN0LCBjeCwgY3ksIHIsIGRpciwgdmlld1dpZHRoLCB2aWV3SGVpZ2h0LCB2aWV3TGVmdCwgdmlld1RvcCwgZmFydGhlc3RYKSB7XG4gIGlmIChsaXN0Lmxlbmd0aCA8IDIpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICA7XG5cbiAgZnVuY3Rpb24gcmVjYWxjdWxhdGVYT25TZW1pVG9BbGlnbk9uRWxsaXBzZUN1cnZlKHNlbWkpIHtcbiAgICB2YXIgckIgPSBzZW1pLnJCO1xuICAgIHZhciByQjIgPSByQiAqIHJCO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZW1pLmxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gc2VtaS5saXN0W2ldO1xuICAgICAgdmFyIGR5ID0gTWF0aC5hYnMoaXRlbS5sYWJlbC55IC0gY3kpOyAvLyBob3Jpem9udGFsIHIgaXMgYWx3YXlzIHNhbWUgd2l0aCBvcmlnaW5hbCByIGJlY2F1c2UgeCBpcyBub3QgY2hhbmdlZC5cblxuICAgICAgdmFyIHJBID0gciArIGl0ZW0ubGVuO1xuICAgICAgdmFyIHJBMiA9IHJBICogckE7IC8vIFVzZSBlbGxpcHNlIGltcGxpY2l0IGZ1bmN0aW9uIHRvIGNhbGN1bGF0ZSB4XG5cbiAgICAgIHZhciBkeCA9IE1hdGguc3FydCgoMSAtIE1hdGguYWJzKGR5ICogZHkgLyByQjIpKSAqIHJBMik7XG4gICAgICB2YXIgbmV3WCA9IGN4ICsgKGR4ICsgaXRlbS5sZW4yKSAqIGRpcjtcbiAgICAgIHZhciBkZWx0YVggPSBuZXdYIC0gaXRlbS5sYWJlbC54O1xuICAgICAgdmFyIG5ld1RhcmdldFdpZHRoID0gaXRlbS50YXJnZXRUZXh0V2lkdGggLSBkZWx0YVggKiBkaXI7IC8vIHRleHQgeCBpcyBjaGFuZ2VkLCBzbyBuZWVkIHRvIHJlY2FsY3VsYXRlIHdpZHRoLlxuXG4gICAgICBjb25zdHJhaW5UZXh0V2lkdGgoaXRlbSwgbmV3VGFyZ2V0V2lkdGgsIHRydWUpO1xuICAgICAgaXRlbS5sYWJlbC54ID0gbmV3WDtcbiAgICB9XG4gIH0gLy8gQWRqdXN0IFggYmFzZWQgb24gdGhlIHNoaWZ0ZWQgeS4gTWFrZSB0aWdodCBsYWJlbHMgYWxpZ25lZCBvbiBhbiBlbGxpcHNlIGN1cnZlLlxuXG5cbiAgZnVuY3Rpb24gcmVjYWxjdWxhdGVYKGl0ZW1zKSB7XG4gICAgLy8gRXh0cmVtZXMgb2ZcbiAgICB2YXIgdG9wU2VtaSA9IHtcbiAgICAgIGxpc3Q6IFtdLFxuICAgICAgbWF4WTogMFxuICAgIH07XG4gICAgdmFyIGJvdHRvbVNlbWkgPSB7XG4gICAgICBsaXN0OiBbXSxcbiAgICAgIG1heFk6IDBcbiAgICB9O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGl0ZW1zW2ldLmxhYmVsQWxpZ25UbyAhPT0gJ25vbmUnKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICB2YXIgaXRlbSA9IGl0ZW1zW2ldO1xuICAgICAgdmFyIHNlbWkgPSBpdGVtLmxhYmVsLnkgPiBjeSA/IGJvdHRvbVNlbWkgOiB0b3BTZW1pO1xuICAgICAgdmFyIGR5ID0gTWF0aC5hYnMoaXRlbS5sYWJlbC55IC0gY3kpO1xuXG4gICAgICBpZiAoZHkgPj0gc2VtaS5tYXhZKSB7XG4gICAgICAgIHZhciBkeCA9IGl0ZW0ubGFiZWwueCAtIGN4IC0gaXRlbS5sZW4yICogZGlyOyAvLyBob3Jpem9udGFsIHIgaXMgYWx3YXlzIHNhbWUgd2l0aCBvcmlnaW5hbCByIGJlY2F1c2UgeCBpcyBub3QgY2hhbmdlZC5cblxuICAgICAgICB2YXIgckEgPSByICsgaXRlbS5sZW47IC8vIENhbmN1bGF0ZSByQiBiYXNlZCBvbiB0aGUgdG9wZXN0IC8gYm90dGVtZXN0IGxhYmVsLlxuXG4gICAgICAgIHZhciByQiA9IE1hdGguYWJzKGR4KSA8IHJBID8gTWF0aC5zcXJ0KGR5ICogZHkgLyAoMSAtIGR4ICogZHggLyByQSAvIHJBKSkgOiByQTtcbiAgICAgICAgc2VtaS5yQiA9IHJCO1xuICAgICAgICBzZW1pLm1heFkgPSBkeTtcbiAgICAgIH1cblxuICAgICAgc2VtaS5saXN0LnB1c2goaXRlbSk7XG4gICAgfVxuXG4gICAgcmVjYWxjdWxhdGVYT25TZW1pVG9BbGlnbk9uRWxsaXBzZUN1cnZlKHRvcFNlbWkpO1xuICAgIHJlY2FsY3VsYXRlWE9uU2VtaVRvQWxpZ25PbkVsbGlwc2VDdXJ2ZShib3R0b21TZW1pKTtcbiAgfVxuXG4gIHZhciBsZW4gPSBsaXN0Lmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgaWYgKGxpc3RbaV0ucG9zaXRpb24gPT09ICdvdXRlcicgJiYgbGlzdFtpXS5sYWJlbEFsaWduVG8gPT09ICdsYWJlbExpbmUnKSB7XG4gICAgICB2YXIgZHggPSBsaXN0W2ldLmxhYmVsLnggLSBmYXJ0aGVzdFg7XG4gICAgICBsaXN0W2ldLmxpbmVQb2ludHNbMV1bMF0gKz0gZHg7XG4gICAgICBsaXN0W2ldLmxhYmVsLnggPSBmYXJ0aGVzdFg7XG4gICAgfVxuICB9XG5cbiAgaWYgKHNoaWZ0TGF5b3V0T25ZKGxpc3QsIHZpZXdUb3AsIHZpZXdUb3AgKyB2aWV3SGVpZ2h0KSkge1xuICAgIHJlY2FsY3VsYXRlWChsaXN0KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhdm9pZE92ZXJsYXAobGFiZWxMYXlvdXRMaXN0LCBjeCwgY3ksIHIsIHZpZXdXaWR0aCwgdmlld0hlaWdodCwgdmlld0xlZnQsIHZpZXdUb3ApIHtcbiAgdmFyIGxlZnRMaXN0ID0gW107XG4gIHZhciByaWdodExpc3QgPSBbXTtcbiAgdmFyIGxlZnRtb3N0WCA9IE51bWJlci5NQVhfVkFMVUU7XG4gIHZhciByaWdodG1vc3RYID0gLU51bWJlci5NQVhfVkFMVUU7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYWJlbExheW91dExpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgbGFiZWwgPSBsYWJlbExheW91dExpc3RbaV0ubGFiZWw7XG5cbiAgICBpZiAoaXNQb3NpdGlvbkNlbnRlcihsYWJlbExheW91dExpc3RbaV0pKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAobGFiZWwueCA8IGN4KSB7XG4gICAgICBsZWZ0bW9zdFggPSBNYXRoLm1pbihsZWZ0bW9zdFgsIGxhYmVsLngpO1xuICAgICAgbGVmdExpc3QucHVzaChsYWJlbExheW91dExpc3RbaV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByaWdodG1vc3RYID0gTWF0aC5tYXgocmlnaHRtb3N0WCwgbGFiZWwueCk7XG4gICAgICByaWdodExpc3QucHVzaChsYWJlbExheW91dExpc3RbaV0pO1xuICAgIH1cbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGFiZWxMYXlvdXRMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGxheW91dCA9IGxhYmVsTGF5b3V0TGlzdFtpXTtcblxuICAgIGlmICghaXNQb3NpdGlvbkNlbnRlcihsYXlvdXQpICYmIGxheW91dC5saW5lUG9pbnRzKSB7XG4gICAgICBpZiAobGF5b3V0LmxhYmVsU3R5bGVXaWR0aCAhPSBudWxsKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICB2YXIgbGFiZWwgPSBsYXlvdXQubGFiZWw7XG4gICAgICB2YXIgbGluZVBvaW50cyA9IGxheW91dC5saW5lUG9pbnRzO1xuICAgICAgdmFyIHRhcmdldFRleHRXaWR0aCA9IHZvaWQgMDtcblxuICAgICAgaWYgKGxheW91dC5sYWJlbEFsaWduVG8gPT09ICdlZGdlJykge1xuICAgICAgICBpZiAobGFiZWwueCA8IGN4KSB7XG4gICAgICAgICAgdGFyZ2V0VGV4dFdpZHRoID0gbGluZVBvaW50c1syXVswXSAtIGxheW91dC5sYWJlbERpc3RhbmNlIC0gdmlld0xlZnQgLSBsYXlvdXQuZWRnZURpc3RhbmNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRhcmdldFRleHRXaWR0aCA9IHZpZXdMZWZ0ICsgdmlld1dpZHRoIC0gbGF5b3V0LmVkZ2VEaXN0YW5jZSAtIGxpbmVQb2ludHNbMl1bMF0gLSBsYXlvdXQubGFiZWxEaXN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChsYXlvdXQubGFiZWxBbGlnblRvID09PSAnbGFiZWxMaW5lJykge1xuICAgICAgICBpZiAobGFiZWwueCA8IGN4KSB7XG4gICAgICAgICAgdGFyZ2V0VGV4dFdpZHRoID0gbGVmdG1vc3RYIC0gdmlld0xlZnQgLSBsYXlvdXQuYmxlZWRNYXJnaW47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGFyZ2V0VGV4dFdpZHRoID0gdmlld0xlZnQgKyB2aWV3V2lkdGggLSByaWdodG1vc3RYIC0gbGF5b3V0LmJsZWVkTWFyZ2luO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobGFiZWwueCA8IGN4KSB7XG4gICAgICAgICAgdGFyZ2V0VGV4dFdpZHRoID0gbGFiZWwueCAtIHZpZXdMZWZ0IC0gbGF5b3V0LmJsZWVkTWFyZ2luO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRhcmdldFRleHRXaWR0aCA9IHZpZXdMZWZ0ICsgdmlld1dpZHRoIC0gbGFiZWwueCAtIGxheW91dC5ibGVlZE1hcmdpbjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsYXlvdXQudGFyZ2V0VGV4dFdpZHRoID0gdGFyZ2V0VGV4dFdpZHRoO1xuICAgICAgY29uc3RyYWluVGV4dFdpZHRoKGxheW91dCwgdGFyZ2V0VGV4dFdpZHRoKTtcbiAgICB9XG4gIH1cblxuICBhZGp1c3RTaW5nbGVTaWRlKHJpZ2h0TGlzdCwgY3gsIGN5LCByLCAxLCB2aWV3V2lkdGgsIHZpZXdIZWlnaHQsIHZpZXdMZWZ0LCB2aWV3VG9wLCByaWdodG1vc3RYKTtcbiAgYWRqdXN0U2luZ2xlU2lkZShsZWZ0TGlzdCwgY3gsIGN5LCByLCAtMSwgdmlld1dpZHRoLCB2aWV3SGVpZ2h0LCB2aWV3TGVmdCwgdmlld1RvcCwgbGVmdG1vc3RYKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxhYmVsTGF5b3V0TGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBsYXlvdXQgPSBsYWJlbExheW91dExpc3RbaV07XG5cbiAgICBpZiAoIWlzUG9zaXRpb25DZW50ZXIobGF5b3V0KSAmJiBsYXlvdXQubGluZVBvaW50cykge1xuICAgICAgdmFyIGxhYmVsID0gbGF5b3V0LmxhYmVsO1xuICAgICAgdmFyIGxpbmVQb2ludHMgPSBsYXlvdXQubGluZVBvaW50cztcbiAgICAgIHZhciBpc0FsaWduVG9FZGdlID0gbGF5b3V0LmxhYmVsQWxpZ25UbyA9PT0gJ2VkZ2UnO1xuICAgICAgdmFyIHBhZGRpbmcgPSBsYWJlbC5zdHlsZS5wYWRkaW5nO1xuICAgICAgdmFyIHBhZGRpbmdIID0gcGFkZGluZyA/IHBhZGRpbmdbMV0gKyBwYWRkaW5nWzNdIDogMDsgLy8gdGV4dFJlY3Qud2lkdGggYWxyZWFkeSBjb250YWlucyBwYWRkaW5nSCBpZiBiZ0NvbG9yIGlzIHNldFxuXG4gICAgICB2YXIgZXh0cmFQYWRkaW5nSCA9IGxhYmVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA/IDAgOiBwYWRkaW5nSDtcbiAgICAgIHZhciByZWFsVGV4dFdpZHRoID0gbGF5b3V0LnJlY3Qud2lkdGggKyBleHRyYVBhZGRpbmdIO1xuICAgICAgdmFyIGRpc3QgPSBsaW5lUG9pbnRzWzFdWzBdIC0gbGluZVBvaW50c1syXVswXTtcblxuICAgICAgaWYgKGlzQWxpZ25Ub0VkZ2UpIHtcbiAgICAgICAgaWYgKGxhYmVsLnggPCBjeCkge1xuICAgICAgICAgIGxpbmVQb2ludHNbMl1bMF0gPSB2aWV3TGVmdCArIGxheW91dC5lZGdlRGlzdGFuY2UgKyByZWFsVGV4dFdpZHRoICsgbGF5b3V0LmxhYmVsRGlzdGFuY2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGluZVBvaW50c1syXVswXSA9IHZpZXdMZWZ0ICsgdmlld1dpZHRoIC0gbGF5b3V0LmVkZ2VEaXN0YW5jZSAtIHJlYWxUZXh0V2lkdGggLSBsYXlvdXQubGFiZWxEaXN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGxhYmVsLnggPCBjeCkge1xuICAgICAgICAgIGxpbmVQb2ludHNbMl1bMF0gPSBsYWJlbC54ICsgbGF5b3V0LmxhYmVsRGlzdGFuY2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGluZVBvaW50c1syXVswXSA9IGxhYmVsLnggLSBsYXlvdXQubGFiZWxEaXN0YW5jZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxpbmVQb2ludHNbMV1bMF0gPSBsaW5lUG9pbnRzWzJdWzBdICsgZGlzdDtcbiAgICAgIH1cblxuICAgICAgbGluZVBvaW50c1sxXVsxXSA9IGxpbmVQb2ludHNbMl1bMV0gPSBsYWJlbC55O1xuICAgIH1cbiAgfVxufVxuLyoqXHJcbiAqIFNldCBtYXggd2lkdGggb2YgZWFjaCBsYWJlbCwgYW5kIHRoZW4gd3JhcCBlYWNoIGxhYmVsIHRvIHRoZSBtYXggd2lkdGguXHJcbiAqXHJcbiAqIEBwYXJhbSBsYXlvdXQgbGFiZWwgbGF5b3V0XHJcbiAqIEBwYXJhbSBhdmFpbGFibGVXaWR0aCBtYXggd2lkdGggZm9yIHRoZSBsYWJlbCB0byBkaXNwbGF5XHJcbiAqIEBwYXJhbSBmb3JjZVJlY2FsY3VsYXRlIHJlY2FjdWxhdGUgdGhlIHRleHQgbGF5b3V0IGV2ZW4gaWYgdGhlIGN1cnJlbnQgd2lkdGhcclxuICogaXMgc21hbGxlciB0aGFuIGBhdmFpbGFibGVXaWR0aGAuIFRoaXMgaXMgdXNlZnVsIHdoZW4gdGhlIHRleHQgd2FzIHByZXZpb3VzbHlcclxuICogd3JhcHBlZCBieSBjYWxsaW5nIGBjb25zdHJhaW5UZXh0V2lkdGhgIGJ1dCBub3cgYGF2YWlsYWJsZVdpZHRoYCBjaGFuZ2VkLCBpblxyXG4gKiB3aGljaCBjYXNlLCBwcmV2aW91cyB3cmFwcGluZyBzaG91bGQgYmUgcmVkby5cclxuICovXG5cblxuZnVuY3Rpb24gY29uc3RyYWluVGV4dFdpZHRoKGxheW91dCwgYXZhaWxhYmxlV2lkdGgsIGZvcmNlUmVjYWxjdWxhdGUpIHtcbiAgaWYgKGZvcmNlUmVjYWxjdWxhdGUgPT09IHZvaWQgMCkge1xuICAgIGZvcmNlUmVjYWxjdWxhdGUgPSBmYWxzZTtcbiAgfVxuXG4gIGlmIChsYXlvdXQubGFiZWxTdHlsZVdpZHRoICE9IG51bGwpIHtcbiAgICAvLyBVc2VyLWRlZmluZWQgc3R5bGUud2lkdGggaGFzIHRoZSBoaWdoZXN0IHByaW9yaXR5LlxuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBsYWJlbCA9IGxheW91dC5sYWJlbDtcbiAgdmFyIHN0eWxlID0gbGFiZWwuc3R5bGU7XG4gIHZhciB0ZXh0UmVjdCA9IGxheW91dC5yZWN0O1xuICB2YXIgYmdDb2xvciA9IHN0eWxlLmJhY2tncm91bmRDb2xvcjtcbiAgdmFyIHBhZGRpbmcgPSBzdHlsZS5wYWRkaW5nO1xuICB2YXIgcGFkZGluZ0ggPSBwYWRkaW5nID8gcGFkZGluZ1sxXSArIHBhZGRpbmdbM10gOiAwO1xuICB2YXIgb3ZlcmZsb3cgPSBzdHlsZS5vdmVyZmxvdzsgLy8gdGV4dFJlY3Qud2lkdGggYWxyZWFkeSBjb250YWlucyBwYWRkaW5nSCBpZiBiZ0NvbG9yIGlzIHNldFxuXG4gIHZhciBvbGRPdXRlcldpZHRoID0gdGV4dFJlY3Qud2lkdGggKyAoYmdDb2xvciA/IDAgOiBwYWRkaW5nSCk7XG5cbiAgaWYgKGF2YWlsYWJsZVdpZHRoIDwgb2xkT3V0ZXJXaWR0aCB8fCBmb3JjZVJlY2FsY3VsYXRlKSB7XG4gICAgdmFyIG9sZEhlaWdodCA9IHRleHRSZWN0LmhlaWdodDtcblxuICAgIGlmIChvdmVyZmxvdyAmJiBvdmVyZmxvdy5tYXRjaCgnYnJlYWsnKSkge1xuICAgICAgLy8gVGVtcG9yYXJpbHkgc2V0IGJhY2tncm91bmQgdG8gYmUgbnVsbCB0byBjYWxjdWxhdGVcbiAgICAgIC8vIHRoZSBib3VuZGluZyBib3ggd2l0aG91dCBiYWNrZ3JvdW5kLlxuICAgICAgbGFiZWwuc2V0U3R5bGUoJ2JhY2tncm91bmRDb2xvcicsIG51bGwpOyAvLyBTZXQgY29uc3RyYWluaW5nIHdpZHRoXG5cbiAgICAgIGxhYmVsLnNldFN0eWxlKCd3aWR0aCcsIGF2YWlsYWJsZVdpZHRoIC0gcGFkZGluZ0gpOyAvLyBUaGlzIGlzIHRoZSByZWFsIGJvdW5kaW5nIGJveCBvZiB0aGUgdGV4dCB3aXRob3V0IHBhZGRpbmcuXG5cbiAgICAgIHZhciBpbm5lclJlY3QgPSBsYWJlbC5nZXRCb3VuZGluZ1JlY3QoKTtcbiAgICAgIGxhYmVsLnNldFN0eWxlKCd3aWR0aCcsIE1hdGguY2VpbChpbm5lclJlY3Qud2lkdGgpKTtcbiAgICAgIGxhYmVsLnNldFN0eWxlKCdiYWNrZ3JvdW5kQ29sb3InLCBiZ0NvbG9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGF2YWlsYWJsZUlubmVyV2lkdGggPSBhdmFpbGFibGVXaWR0aCAtIHBhZGRpbmdIO1xuICAgICAgdmFyIG5ld1dpZHRoID0gYXZhaWxhYmxlV2lkdGggPCBvbGRPdXRlcldpZHRoIC8vIEN1cnJlbnQgdGV4dCBpcyB0b28gd2lkZSwgdXNlIGBhdmFpbGFibGVXaWR0aGAgYXMgbWF4IHdpZHRoLlxuICAgICAgPyBhdmFpbGFibGVJbm5lcldpZHRoIDogLy8gQ3VycmVudCBhdmFpbGFibGUgd2lkdGggaXMgZW5vdWdoLCBidXQgdGhlIHRleHQgbWF5IGhhdmVcbiAgICAgIC8vIGFscmVhZHkgYmVlbiB3cmFwcGVkIHdpdGggYSBzbWFsbGVyIGF2YWlsYWJsZSB3aWR0aC5cbiAgICAgIGZvcmNlUmVjYWxjdWxhdGUgPyBhdmFpbGFibGVJbm5lcldpZHRoID4gbGF5b3V0LnVuY29uc3RyYWluZWRXaWR0aCAvLyBDdXJyZW50IGF2YWlsYWJsZSBpcyBsYXJnZXIgdGhhbiB0ZXh0IHdpZHRoLFxuICAgICAgLy8gc28gZG9uJ3QgY29uc3RyYWluIHdpZHRoIChvdGhlcndpc2UgaXQgbWF5IGhhdmVcbiAgICAgIC8vIGVtcHR5IHNwYWNlIGluIHRoZSBiYWNrZ3JvdW5kKS5cbiAgICAgID8gbnVsbCAvLyBDdXJyZW50IGF2YWlsYWJsZSBpcyBzbWFsbGVyIHRoYW4gdGV4dCB3aWR0aCwgc29cbiAgICAgIC8vIHVzZSB0aGUgY3VycmVudCBhdmFpbGFibGUgd2lkdGggYXMgY29uc3RyYWluaW5nXG4gICAgICAvLyB3aWR0aC5cbiAgICAgIDogYXZhaWxhYmxlSW5uZXJXaWR0aCA6IC8vIEN1cnJlbnQgYXZhaWxhYmxlIHdpZHRoIGlzIGVub3VnaCwgc28gbm8gbmVlZCB0b1xuICAgICAgLy8gY29uc3RyYWluLlxuICAgICAgbnVsbDtcbiAgICAgIGxhYmVsLnNldFN0eWxlKCd3aWR0aCcsIG5ld1dpZHRoKTtcbiAgICB9XG5cbiAgICB2YXIgbmV3UmVjdCA9IGxhYmVsLmdldEJvdW5kaW5nUmVjdCgpO1xuICAgIHRleHRSZWN0LndpZHRoID0gbmV3UmVjdC53aWR0aDtcbiAgICB2YXIgbWFyZ2luID0gKGxhYmVsLnN0eWxlLm1hcmdpbiB8fCAwKSArIDIuMTtcbiAgICB0ZXh0UmVjdC5oZWlnaHQgPSBuZXdSZWN0LmhlaWdodCArIG1hcmdpbjtcbiAgICB0ZXh0UmVjdC55IC09ICh0ZXh0UmVjdC5oZWlnaHQgLSBvbGRIZWlnaHQpIC8gMjtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc1Bvc2l0aW9uQ2VudGVyKHNlY3RvclNoYXBlKSB7XG4gIC8vIE5vdCBjaGFuZ2UgeCBmb3IgY2VudGVyIGxhYmVsXG4gIHJldHVybiBzZWN0b3JTaGFwZS5wb3NpdGlvbiA9PT0gJ2NlbnRlcic7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHBpZUxhYmVsTGF5b3V0KHNlcmllc01vZGVsKSB7XG4gIHZhciBkYXRhID0gc2VyaWVzTW9kZWwuZ2V0RGF0YSgpO1xuICB2YXIgbGFiZWxMYXlvdXRMaXN0ID0gW107XG4gIHZhciBjeDtcbiAgdmFyIGN5O1xuICB2YXIgaGFzTGFiZWxSb3RhdGUgPSBmYWxzZTtcbiAgdmFyIG1pblNob3dMYWJlbFJhZGlhbiA9IChzZXJpZXNNb2RlbC5nZXQoJ21pblNob3dMYWJlbEFuZ2xlJykgfHwgMCkgKiBSQURJQU47XG4gIHZhciB2aWV3UmVjdCA9IGRhdGEuZ2V0TGF5b3V0KCd2aWV3UmVjdCcpO1xuICB2YXIgciA9IGRhdGEuZ2V0TGF5b3V0KCdyJyk7XG4gIHZhciB2aWV3V2lkdGggPSB2aWV3UmVjdC53aWR0aDtcbiAgdmFyIHZpZXdMZWZ0ID0gdmlld1JlY3QueDtcbiAgdmFyIHZpZXdUb3AgPSB2aWV3UmVjdC55O1xuICB2YXIgdmlld0hlaWdodCA9IHZpZXdSZWN0LmhlaWdodDtcblxuICBmdW5jdGlvbiBzZXROb3RTaG93KGVsKSB7XG4gICAgZWwuaWdub3JlID0gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzTGFiZWxTaG93bihsYWJlbCkge1xuICAgIGlmICghbGFiZWwuaWdub3JlKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBrZXkgaW4gbGFiZWwuc3RhdGVzKSB7XG4gICAgICBpZiAobGFiZWwuc3RhdGVzW2tleV0uaWdub3JlID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBkYXRhLmVhY2goZnVuY3Rpb24gKGlkeCkge1xuICAgIHZhciBzZWN0b3IgPSBkYXRhLmdldEl0ZW1HcmFwaGljRWwoaWR4KTtcbiAgICB2YXIgc2VjdG9yU2hhcGUgPSBzZWN0b3Iuc2hhcGU7XG4gICAgdmFyIGxhYmVsID0gc2VjdG9yLmdldFRleHRDb250ZW50KCk7XG4gICAgdmFyIGxhYmVsTGluZSA9IHNlY3Rvci5nZXRUZXh0R3VpZGVMaW5lKCk7XG4gICAgdmFyIGl0ZW1Nb2RlbCA9IGRhdGEuZ2V0SXRlbU1vZGVsKGlkeCk7XG4gICAgdmFyIGxhYmVsTW9kZWwgPSBpdGVtTW9kZWwuZ2V0TW9kZWwoJ2xhYmVsJyk7IC8vIFVzZSBwb3NpdGlvbiBpbiBub3JtYWwgb3IgZW1waGFzaXNcblxuICAgIHZhciBsYWJlbFBvc2l0aW9uID0gbGFiZWxNb2RlbC5nZXQoJ3Bvc2l0aW9uJykgfHwgaXRlbU1vZGVsLmdldChbJ2VtcGhhc2lzJywgJ2xhYmVsJywgJ3Bvc2l0aW9uJ10pO1xuICAgIHZhciBsYWJlbERpc3RhbmNlID0gbGFiZWxNb2RlbC5nZXQoJ2Rpc3RhbmNlVG9MYWJlbExpbmUnKTtcbiAgICB2YXIgbGFiZWxBbGlnblRvID0gbGFiZWxNb2RlbC5nZXQoJ2FsaWduVG8nKTtcbiAgICB2YXIgZWRnZURpc3RhbmNlID0gcGFyc2VQZXJjZW50KGxhYmVsTW9kZWwuZ2V0KCdlZGdlRGlzdGFuY2UnKSwgdmlld1dpZHRoKTtcbiAgICB2YXIgYmxlZWRNYXJnaW4gPSBsYWJlbE1vZGVsLmdldCgnYmxlZWRNYXJnaW4nKTtcbiAgICB2YXIgbGFiZWxMaW5lTW9kZWwgPSBpdGVtTW9kZWwuZ2V0TW9kZWwoJ2xhYmVsTGluZScpO1xuICAgIHZhciBsYWJlbExpbmVMZW4gPSBsYWJlbExpbmVNb2RlbC5nZXQoJ2xlbmd0aCcpO1xuICAgIGxhYmVsTGluZUxlbiA9IHBhcnNlUGVyY2VudChsYWJlbExpbmVMZW4sIHZpZXdXaWR0aCk7XG4gICAgdmFyIGxhYmVsTGluZUxlbjIgPSBsYWJlbExpbmVNb2RlbC5nZXQoJ2xlbmd0aDInKTtcbiAgICBsYWJlbExpbmVMZW4yID0gcGFyc2VQZXJjZW50KGxhYmVsTGluZUxlbjIsIHZpZXdXaWR0aCk7XG5cbiAgICBpZiAoTWF0aC5hYnMoc2VjdG9yU2hhcGUuZW5kQW5nbGUgLSBzZWN0b3JTaGFwZS5zdGFydEFuZ2xlKSA8IG1pblNob3dMYWJlbFJhZGlhbikge1xuICAgICAgZWFjaChsYWJlbC5zdGF0ZXMsIHNldE5vdFNob3cpO1xuICAgICAgbGFiZWwuaWdub3JlID0gdHJ1ZTtcblxuICAgICAgaWYgKGxhYmVsTGluZSkge1xuICAgICAgICBlYWNoKGxhYmVsTGluZS5zdGF0ZXMsIHNldE5vdFNob3cpO1xuICAgICAgICBsYWJlbExpbmUuaWdub3JlID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghaXNMYWJlbFNob3duKGxhYmVsKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBtaWRBbmdsZSA9IChzZWN0b3JTaGFwZS5zdGFydEFuZ2xlICsgc2VjdG9yU2hhcGUuZW5kQW5nbGUpIC8gMjtcbiAgICB2YXIgbnggPSBNYXRoLmNvcyhtaWRBbmdsZSk7XG4gICAgdmFyIG55ID0gTWF0aC5zaW4obWlkQW5nbGUpO1xuICAgIHZhciB0ZXh0WDtcbiAgICB2YXIgdGV4dFk7XG4gICAgdmFyIGxpbmVQb2ludHM7XG4gICAgdmFyIHRleHRBbGlnbjtcbiAgICBjeCA9IHNlY3RvclNoYXBlLmN4O1xuICAgIGN5ID0gc2VjdG9yU2hhcGUuY3k7XG4gICAgdmFyIGlzTGFiZWxJbnNpZGUgPSBsYWJlbFBvc2l0aW9uID09PSAnaW5zaWRlJyB8fCBsYWJlbFBvc2l0aW9uID09PSAnaW5uZXInO1xuXG4gICAgaWYgKGxhYmVsUG9zaXRpb24gPT09ICdjZW50ZXInKSB7XG4gICAgICB0ZXh0WCA9IHNlY3RvclNoYXBlLmN4O1xuICAgICAgdGV4dFkgPSBzZWN0b3JTaGFwZS5jeTtcbiAgICAgIHRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgeDEgPSAoaXNMYWJlbEluc2lkZSA/IChzZWN0b3JTaGFwZS5yICsgc2VjdG9yU2hhcGUucjApIC8gMiAqIG54IDogc2VjdG9yU2hhcGUuciAqIG54KSArIGN4O1xuICAgICAgdmFyIHkxID0gKGlzTGFiZWxJbnNpZGUgPyAoc2VjdG9yU2hhcGUuciArIHNlY3RvclNoYXBlLnIwKSAvIDIgKiBueSA6IHNlY3RvclNoYXBlLnIgKiBueSkgKyBjeTtcbiAgICAgIHRleHRYID0geDEgKyBueCAqIDM7XG4gICAgICB0ZXh0WSA9IHkxICsgbnkgKiAzO1xuXG4gICAgICBpZiAoIWlzTGFiZWxJbnNpZGUpIHtcbiAgICAgICAgLy8gRm9yIHJvc2VUeXBlXG4gICAgICAgIHZhciB4MiA9IHgxICsgbnggKiAobGFiZWxMaW5lTGVuICsgciAtIHNlY3RvclNoYXBlLnIpO1xuICAgICAgICB2YXIgeTIgPSB5MSArIG55ICogKGxhYmVsTGluZUxlbiArIHIgLSBzZWN0b3JTaGFwZS5yKTtcbiAgICAgICAgdmFyIHgzID0geDIgKyAobnggPCAwID8gLTEgOiAxKSAqIGxhYmVsTGluZUxlbjI7XG4gICAgICAgIHZhciB5MyA9IHkyO1xuXG4gICAgICAgIGlmIChsYWJlbEFsaWduVG8gPT09ICdlZGdlJykge1xuICAgICAgICAgIC8vIEFkanVzdCB0ZXh0WCBiZWNhdXNlIHRleHQgYWxpZ24gb2YgZWRnZSBpcyBvcHBvc2l0ZVxuICAgICAgICAgIHRleHRYID0gbnggPCAwID8gdmlld0xlZnQgKyBlZGdlRGlzdGFuY2UgOiB2aWV3TGVmdCArIHZpZXdXaWR0aCAtIGVkZ2VEaXN0YW5jZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0ZXh0WCA9IHgzICsgKG54IDwgMCA/IC1sYWJlbERpc3RhbmNlIDogbGFiZWxEaXN0YW5jZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0WSA9IHkzO1xuICAgICAgICBsaW5lUG9pbnRzID0gW1t4MSwgeTFdLCBbeDIsIHkyXSwgW3gzLCB5M11dO1xuICAgICAgfVxuXG4gICAgICB0ZXh0QWxpZ24gPSBpc0xhYmVsSW5zaWRlID8gJ2NlbnRlcicgOiBsYWJlbEFsaWduVG8gPT09ICdlZGdlJyA/IG54ID4gMCA/ICdyaWdodCcgOiAnbGVmdCcgOiBueCA+IDAgPyAnbGVmdCcgOiAncmlnaHQnO1xuICAgIH1cblxuICAgIHZhciBQSSA9IE1hdGguUEk7XG4gICAgdmFyIGxhYmVsUm90YXRlID0gMDtcbiAgICB2YXIgcm90YXRlID0gbGFiZWxNb2RlbC5nZXQoJ3JvdGF0ZScpO1xuXG4gICAgaWYgKGlzTnVtYmVyKHJvdGF0ZSkpIHtcbiAgICAgIGxhYmVsUm90YXRlID0gcm90YXRlICogKFBJIC8gMTgwKTtcbiAgICB9IGVsc2UgaWYgKGxhYmVsUG9zaXRpb24gPT09ICdjZW50ZXInKSB7XG4gICAgICBsYWJlbFJvdGF0ZSA9IDA7XG4gICAgfSBlbHNlIGlmIChyb3RhdGUgPT09ICdyYWRpYWwnIHx8IHJvdGF0ZSA9PT0gdHJ1ZSkge1xuICAgICAgdmFyIHJhZGlhbEFuZ2xlID0gbnggPCAwID8gLW1pZEFuZ2xlICsgUEkgOiAtbWlkQW5nbGU7XG4gICAgICBsYWJlbFJvdGF0ZSA9IHJhZGlhbEFuZ2xlO1xuICAgIH0gZWxzZSBpZiAocm90YXRlID09PSAndGFuZ2VudGlhbCcgJiYgbGFiZWxQb3NpdGlvbiAhPT0gJ291dHNpZGUnICYmIGxhYmVsUG9zaXRpb24gIT09ICdvdXRlcicpIHtcbiAgICAgIHZhciByYWQgPSBNYXRoLmF0YW4yKG54LCBueSk7XG5cbiAgICAgIGlmIChyYWQgPCAwKSB7XG4gICAgICAgIHJhZCA9IFBJICogMiArIHJhZDtcbiAgICAgIH1cblxuICAgICAgdmFyIGlzRG93biA9IG55ID4gMDtcblxuICAgICAgaWYgKGlzRG93bikge1xuICAgICAgICByYWQgPSBQSSArIHJhZDtcbiAgICAgIH1cblxuICAgICAgbGFiZWxSb3RhdGUgPSByYWQgLSBQSTtcbiAgICB9XG5cbiAgICBoYXNMYWJlbFJvdGF0ZSA9ICEhbGFiZWxSb3RhdGU7XG4gICAgbGFiZWwueCA9IHRleHRYO1xuICAgIGxhYmVsLnkgPSB0ZXh0WTtcbiAgICBsYWJlbC5yb3RhdGlvbiA9IGxhYmVsUm90YXRlO1xuICAgIGxhYmVsLnNldFN0eWxlKHtcbiAgICAgIHZlcnRpY2FsQWxpZ246ICdtaWRkbGUnXG4gICAgfSk7IC8vIE5vdCBzZWN0b3JTaGFwZSB0aGUgaW5zaWRlIGxhYmVsXG5cbiAgICBpZiAoIWlzTGFiZWxJbnNpZGUpIHtcbiAgICAgIHZhciB0ZXh0UmVjdCA9IGxhYmVsLmdldEJvdW5kaW5nUmVjdCgpLmNsb25lKCk7XG4gICAgICB0ZXh0UmVjdC5hcHBseVRyYW5zZm9ybShsYWJlbC5nZXRDb21wdXRlZFRyYW5zZm9ybSgpKTsgLy8gVGV4dCBoYXMgYSBkZWZhdWx0IDFweCBzdHJva2UuIEV4Y2x1ZGUgdGhpcy5cblxuICAgICAgdmFyIG1hcmdpbiA9IChsYWJlbC5zdHlsZS5tYXJnaW4gfHwgMCkgKyAyLjE7XG4gICAgICB0ZXh0UmVjdC55IC09IG1hcmdpbiAvIDI7XG4gICAgICB0ZXh0UmVjdC5oZWlnaHQgKz0gbWFyZ2luO1xuICAgICAgbGFiZWxMYXlvdXRMaXN0LnB1c2goe1xuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIGxhYmVsTGluZTogbGFiZWxMaW5lLFxuICAgICAgICBwb3NpdGlvbjogbGFiZWxQb3NpdGlvbixcbiAgICAgICAgbGVuOiBsYWJlbExpbmVMZW4sXG4gICAgICAgIGxlbjI6IGxhYmVsTGluZUxlbjIsXG4gICAgICAgIG1pblR1cm5BbmdsZTogbGFiZWxMaW5lTW9kZWwuZ2V0KCdtaW5UdXJuQW5nbGUnKSxcbiAgICAgICAgbWF4U3VyZmFjZUFuZ2xlOiBsYWJlbExpbmVNb2RlbC5nZXQoJ21heFN1cmZhY2VBbmdsZScpLFxuICAgICAgICBzdXJmYWNlTm9ybWFsOiBuZXcgUG9pbnQobngsIG55KSxcbiAgICAgICAgbGluZVBvaW50czogbGluZVBvaW50cyxcbiAgICAgICAgdGV4dEFsaWduOiB0ZXh0QWxpZ24sXG4gICAgICAgIGxhYmVsRGlzdGFuY2U6IGxhYmVsRGlzdGFuY2UsXG4gICAgICAgIGxhYmVsQWxpZ25UbzogbGFiZWxBbGlnblRvLFxuICAgICAgICBlZGdlRGlzdGFuY2U6IGVkZ2VEaXN0YW5jZSxcbiAgICAgICAgYmxlZWRNYXJnaW46IGJsZWVkTWFyZ2luLFxuICAgICAgICByZWN0OiB0ZXh0UmVjdCxcbiAgICAgICAgdW5jb25zdHJhaW5lZFdpZHRoOiB0ZXh0UmVjdC53aWR0aCxcbiAgICAgICAgbGFiZWxTdHlsZVdpZHRoOiBsYWJlbC5zdHlsZS53aWR0aFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxhYmVsLnNldFN0eWxlKHtcbiAgICAgICAgYWxpZ246IHRleHRBbGlnblxuICAgICAgfSk7XG4gICAgICB2YXIgc2VsZWN0U3RhdGUgPSBsYWJlbC5zdGF0ZXMuc2VsZWN0O1xuXG4gICAgICBpZiAoc2VsZWN0U3RhdGUpIHtcbiAgICAgICAgc2VsZWN0U3RhdGUueCArPSBsYWJlbC54O1xuICAgICAgICBzZWxlY3RTdGF0ZS55ICs9IGxhYmVsLnk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2VjdG9yLnNldFRleHRDb25maWcoe1xuICAgICAgaW5zaWRlOiBpc0xhYmVsSW5zaWRlXG4gICAgfSk7XG4gIH0pO1xuXG4gIGlmICghaGFzTGFiZWxSb3RhdGUgJiYgc2VyaWVzTW9kZWwuZ2V0KCdhdm9pZExhYmVsT3ZlcmxhcCcpKSB7XG4gICAgYXZvaWRPdmVybGFwKGxhYmVsTGF5b3V0TGlzdCwgY3gsIGN5LCByLCB2aWV3V2lkdGgsIHZpZXdIZWlnaHQsIHZpZXdMZWZ0LCB2aWV3VG9wKTtcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGFiZWxMYXlvdXRMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGxheW91dCA9IGxhYmVsTGF5b3V0TGlzdFtpXTtcbiAgICB2YXIgbGFiZWwgPSBsYXlvdXQubGFiZWw7XG4gICAgdmFyIGxhYmVsTGluZSA9IGxheW91dC5sYWJlbExpbmU7XG4gICAgdmFyIG5vdFNob3dMYWJlbCA9IGlzTmFOKGxhYmVsLngpIHx8IGlzTmFOKGxhYmVsLnkpO1xuXG4gICAgaWYgKGxhYmVsKSB7XG4gICAgICBsYWJlbC5zZXRTdHlsZSh7XG4gICAgICAgIGFsaWduOiBsYXlvdXQudGV4dEFsaWduXG4gICAgICB9KTtcblxuICAgICAgaWYgKG5vdFNob3dMYWJlbCkge1xuICAgICAgICBlYWNoKGxhYmVsLnN0YXRlcywgc2V0Tm90U2hvdyk7XG4gICAgICAgIGxhYmVsLmlnbm9yZSA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBzZWxlY3RTdGF0ZSA9IGxhYmVsLnN0YXRlcy5zZWxlY3Q7XG5cbiAgICAgIGlmIChzZWxlY3RTdGF0ZSkge1xuICAgICAgICBzZWxlY3RTdGF0ZS54ICs9IGxhYmVsLng7XG4gICAgICAgIHNlbGVjdFN0YXRlLnkgKz0gbGFiZWwueTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobGFiZWxMaW5lKSB7XG4gICAgICB2YXIgbGluZVBvaW50cyA9IGxheW91dC5saW5lUG9pbnRzO1xuXG4gICAgICBpZiAobm90U2hvd0xhYmVsIHx8ICFsaW5lUG9pbnRzKSB7XG4gICAgICAgIGVhY2gobGFiZWxMaW5lLnN0YXRlcywgc2V0Tm90U2hvdyk7XG4gICAgICAgIGxhYmVsTGluZS5pZ25vcmUgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGltaXRUdXJuQW5nbGUobGluZVBvaW50cywgbGF5b3V0Lm1pblR1cm5BbmdsZSk7XG4gICAgICAgIGxpbWl0U3VyZmFjZUFuZ2xlKGxpbmVQb2ludHMsIGxheW91dC5zdXJmYWNlTm9ybWFsLCBsYXlvdXQubWF4U3VyZmFjZUFuZ2xlKTtcbiAgICAgICAgbGFiZWxMaW5lLnNldFNoYXBlKHtcbiAgICAgICAgICBwb2ludHM6IGxpbmVQb2ludHNcbiAgICAgICAgfSk7IC8vIFNldCB0aGUgYW5jaG9yIHRvIHRoZSBtaWRwb2ludCBvZiBzZWN0b3JcblxuICAgICAgICBsYWJlbC5fX2hvc3RUYXJnZXQudGV4dEd1aWRlTGluZUNvbmZpZyA9IHtcbiAgICAgICAgICBhbmNob3I6IG5ldyBQb2ludChsaW5lUG9pbnRzWzBdWzBdLCBsaW5lUG9pbnRzWzBdWzFdKVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgfVxufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBleHRlbmQsIHJldHJpZXZlMyB9IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgKiBhcyBncmFwaGljIGZyb20gJy4uLy4uL3V0aWwvZ3JhcGhpYy5qcyc7XG5pbXBvcnQgeyBzZXRTdGF0ZXNTdHlsZXNGcm9tTW9kZWwsIHRvZ2dsZUhvdmVyRW1waGFzaXMgfSBmcm9tICcuLi8uLi91dGlsL3N0YXRlcy5qcyc7XG5pbXBvcnQgQ2hhcnRWaWV3IGZyb20gJy4uLy4uL3ZpZXcvQ2hhcnQuanMnO1xuaW1wb3J0IGxhYmVsTGF5b3V0IGZyb20gJy4vbGFiZWxMYXlvdXQuanMnO1xuaW1wb3J0IHsgc2V0TGFiZWxMaW5lU3R5bGUsIGdldExhYmVsTGluZVN0YXRlc01vZGVscyB9IGZyb20gJy4uLy4uL2xhYmVsL2xhYmVsR3VpZGVIZWxwZXIuanMnO1xuaW1wb3J0IHsgc2V0TGFiZWxTdHlsZSwgZ2V0TGFiZWxTdGF0ZXNNb2RlbHMgfSBmcm9tICcuLi8uLi9sYWJlbC9sYWJlbFN0eWxlLmpzJztcbmltcG9ydCB7IGdldFNlY3RvckNvcm5lclJhZGl1cyB9IGZyb20gJy4uL2hlbHBlci9zZWN0b3JIZWxwZXIuanMnO1xuaW1wb3J0IHsgc2F2ZU9sZFN0eWxlIH0gZnJvbSAnLi4vLi4vYW5pbWF0aW9uL2Jhc2ljVHJhbnNpdGlvbi5qcyc7XG5pbXBvcnQgeyBnZXRCYXNpY1BpZUxheW91dCB9IGZyb20gJy4vcGllTGF5b3V0LmpzJztcbi8qKlxyXG4gKiBQaWVjZSBvZiBwaWUgaW5jbHVkaW5nIFNlY3RvciwgTGFiZWwsIExhYmVsTGluZVxyXG4gKi9cblxudmFyIFBpZVBpZWNlID1cbi8qKiBAY2xhc3MgKi9cbmZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgX19leHRlbmRzKFBpZVBpZWNlLCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIFBpZVBpZWNlKGRhdGEsIGlkeCwgc3RhcnRBbmdsZSkge1xuICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG5cbiAgICBfdGhpcy56MiA9IDI7XG4gICAgdmFyIHRleHQgPSBuZXcgZ3JhcGhpYy5UZXh0KCk7XG5cbiAgICBfdGhpcy5zZXRUZXh0Q29udGVudCh0ZXh0KTtcblxuICAgIF90aGlzLnVwZGF0ZURhdGEoZGF0YSwgaWR4LCBzdGFydEFuZ2xlLCB0cnVlKTtcblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIFBpZVBpZWNlLnByb3RvdHlwZS51cGRhdGVEYXRhID0gZnVuY3Rpb24gKGRhdGEsIGlkeCwgc3RhcnRBbmdsZSwgZmlyc3RDcmVhdGUpIHtcbiAgICB2YXIgc2VjdG9yID0gdGhpcztcbiAgICB2YXIgc2VyaWVzTW9kZWwgPSBkYXRhLmhvc3RNb2RlbDtcbiAgICB2YXIgaXRlbU1vZGVsID0gZGF0YS5nZXRJdGVtTW9kZWwoaWR4KTtcbiAgICB2YXIgZW1waGFzaXNNb2RlbCA9IGl0ZW1Nb2RlbC5nZXRNb2RlbCgnZW1waGFzaXMnKTtcbiAgICB2YXIgbGF5b3V0ID0gZGF0YS5nZXRJdGVtTGF5b3V0KGlkeCk7IC8vIGNvcm5lclJhZGl1cyAmIGlubmVyQ29ybmVyUmFkaXVzIGRvZXNuJ3QgZXhpc3QgaW4gdGhlIGl0ZW0gbGF5b3V0LiBVc2UgYDBgIGlmIG51bGwgdmFsdWUgaXMgc3BlY2lmaWVkLlxuICAgIC8vIHNlZSBgc2V0SXRlbUxheW91dGAgaW4gYHBpZUxheW91dC50c2AuXG5cbiAgICB2YXIgc2VjdG9yU2hhcGUgPSBleHRlbmQoZ2V0U2VjdG9yQ29ybmVyUmFkaXVzKGl0ZW1Nb2RlbC5nZXRNb2RlbCgnaXRlbVN0eWxlJyksIGxheW91dCwgdHJ1ZSksIGxheW91dCk7IC8vIElnbm9yZSBOYU4gZGF0YS5cblxuICAgIGlmIChpc05hTihzZWN0b3JTaGFwZS5zdGFydEFuZ2xlKSkge1xuICAgICAgLy8gVXNlIE5hTiBzaGFwZSB0byBhdm9pZCBkcmF3aW5nIHNoYXBlLlxuICAgICAgc2VjdG9yLnNldFNoYXBlKHNlY3RvclNoYXBlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZmlyc3RDcmVhdGUpIHtcbiAgICAgIHNlY3Rvci5zZXRTaGFwZShzZWN0b3JTaGFwZSk7XG4gICAgICB2YXIgYW5pbWF0aW9uVHlwZSA9IHNlcmllc01vZGVsLmdldFNoYWxsb3coJ2FuaW1hdGlvblR5cGUnKTtcblxuICAgICAgaWYgKHNlcmllc01vZGVsLmVjTW9kZWwuc3NyKSB7XG4gICAgICAgIC8vIFVzZSBzY2FsZSBhbmltYXRpb24gaW4gU1NSIG1vZGUob3BhY2l0eT8pXG4gICAgICAgIC8vIEJlY2F1c2UgQ1NTIFNWRyBhbmltYXRpb24gZG9lc24ndCBzdXBwb3J0IHZlcnkgY3VzdG9taXplZCBzaGFwZSBhbmltYXRpb24uXG4gICAgICAgIGdyYXBoaWMuaW5pdFByb3BzKHNlY3Rvciwge1xuICAgICAgICAgIHNjYWxlWDogMCxcbiAgICAgICAgICBzY2FsZVk6IDBcbiAgICAgICAgfSwgc2VyaWVzTW9kZWwsIHtcbiAgICAgICAgICBkYXRhSW5kZXg6IGlkeCxcbiAgICAgICAgICBpc0Zyb206IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHNlY3Rvci5vcmlnaW5YID0gc2VjdG9yU2hhcGUuY3g7XG4gICAgICAgIHNlY3Rvci5vcmlnaW5ZID0gc2VjdG9yU2hhcGUuY3k7XG4gICAgICB9IGVsc2UgaWYgKGFuaW1hdGlvblR5cGUgPT09ICdzY2FsZScpIHtcbiAgICAgICAgc2VjdG9yLnNoYXBlLnIgPSBsYXlvdXQucjA7XG4gICAgICAgIGdyYXBoaWMuaW5pdFByb3BzKHNlY3Rvciwge1xuICAgICAgICAgIHNoYXBlOiB7XG4gICAgICAgICAgICByOiBsYXlvdXQuclxuICAgICAgICAgIH1cbiAgICAgICAgfSwgc2VyaWVzTW9kZWwsIGlkeCk7XG4gICAgICB9IC8vIEV4cGFuc2lvblxuICAgICAgZWxzZSB7XG4gICAgICAgICAgaWYgKHN0YXJ0QW5nbGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgc2VjdG9yLnNldFNoYXBlKHtcbiAgICAgICAgICAgICAgc3RhcnRBbmdsZTogc3RhcnRBbmdsZSxcbiAgICAgICAgICAgICAgZW5kQW5nbGU6IHN0YXJ0QW5nbGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZ3JhcGhpYy5pbml0UHJvcHMoc2VjdG9yLCB7XG4gICAgICAgICAgICAgIHNoYXBlOiB7XG4gICAgICAgICAgICAgICAgc3RhcnRBbmdsZTogbGF5b3V0LnN0YXJ0QW5nbGUsXG4gICAgICAgICAgICAgICAgZW5kQW5nbGU6IGxheW91dC5lbmRBbmdsZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBzZXJpZXNNb2RlbCwgaWR4KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VjdG9yLnNoYXBlLmVuZEFuZ2xlID0gbGF5b3V0LnN0YXJ0QW5nbGU7XG4gICAgICAgICAgICBncmFwaGljLnVwZGF0ZVByb3BzKHNlY3Rvciwge1xuICAgICAgICAgICAgICBzaGFwZToge1xuICAgICAgICAgICAgICAgIGVuZEFuZ2xlOiBsYXlvdXQuZW5kQW5nbGVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgc2VyaWVzTW9kZWwsIGlkeCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHNhdmVPbGRTdHlsZShzZWN0b3IpOyAvLyBUcmFuc2l0aW9uIGFuaW1hdGlvbiBmcm9tIHRoZSBvbGQgc2hhcGVcblxuICAgICAgZ3JhcGhpYy51cGRhdGVQcm9wcyhzZWN0b3IsIHtcbiAgICAgICAgc2hhcGU6IHNlY3RvclNoYXBlXG4gICAgICB9LCBzZXJpZXNNb2RlbCwgaWR4KTtcbiAgICB9XG5cbiAgICBzZWN0b3IudXNlU3R5bGUoZGF0YS5nZXRJdGVtVmlzdWFsKGlkeCwgJ3N0eWxlJykpO1xuICAgIHNldFN0YXRlc1N0eWxlc0Zyb21Nb2RlbChzZWN0b3IsIGl0ZW1Nb2RlbCk7XG4gICAgdmFyIG1pZEFuZ2xlID0gKGxheW91dC5zdGFydEFuZ2xlICsgbGF5b3V0LmVuZEFuZ2xlKSAvIDI7XG4gICAgdmFyIG9mZnNldCA9IHNlcmllc01vZGVsLmdldCgnc2VsZWN0ZWRPZmZzZXQnKTtcbiAgICB2YXIgZHggPSBNYXRoLmNvcyhtaWRBbmdsZSkgKiBvZmZzZXQ7XG4gICAgdmFyIGR5ID0gTWF0aC5zaW4obWlkQW5nbGUpICogb2Zmc2V0O1xuICAgIHZhciBjdXJzb3JTdHlsZSA9IGl0ZW1Nb2RlbC5nZXRTaGFsbG93KCdjdXJzb3InKTtcbiAgICBjdXJzb3JTdHlsZSAmJiBzZWN0b3IuYXR0cignY3Vyc29yJywgY3Vyc29yU3R5bGUpO1xuXG4gICAgdGhpcy5fdXBkYXRlTGFiZWwoc2VyaWVzTW9kZWwsIGRhdGEsIGlkeCk7XG5cbiAgICBzZWN0b3IuZW5zdXJlU3RhdGUoJ2VtcGhhc2lzJykuc2hhcGUgPSBleHRlbmQoe1xuICAgICAgcjogbGF5b3V0LnIgKyAoZW1waGFzaXNNb2RlbC5nZXQoJ3NjYWxlJykgPyBlbXBoYXNpc01vZGVsLmdldCgnc2NhbGVTaXplJykgfHwgMCA6IDApXG4gICAgfSwgZ2V0U2VjdG9yQ29ybmVyUmFkaXVzKGVtcGhhc2lzTW9kZWwuZ2V0TW9kZWwoJ2l0ZW1TdHlsZScpLCBsYXlvdXQpKTtcbiAgICBleHRlbmQoc2VjdG9yLmVuc3VyZVN0YXRlKCdzZWxlY3QnKSwge1xuICAgICAgeDogZHgsXG4gICAgICB5OiBkeSxcbiAgICAgIHNoYXBlOiBnZXRTZWN0b3JDb3JuZXJSYWRpdXMoaXRlbU1vZGVsLmdldE1vZGVsKFsnc2VsZWN0JywgJ2l0ZW1TdHlsZSddKSwgbGF5b3V0KVxuICAgIH0pO1xuICAgIGV4dGVuZChzZWN0b3IuZW5zdXJlU3RhdGUoJ2JsdXInKSwge1xuICAgICAgc2hhcGU6IGdldFNlY3RvckNvcm5lclJhZGl1cyhpdGVtTW9kZWwuZ2V0TW9kZWwoWydibHVyJywgJ2l0ZW1TdHlsZSddKSwgbGF5b3V0KVxuICAgIH0pO1xuICAgIHZhciBsYWJlbExpbmUgPSBzZWN0b3IuZ2V0VGV4dEd1aWRlTGluZSgpO1xuICAgIHZhciBsYWJlbFRleHQgPSBzZWN0b3IuZ2V0VGV4dENvbnRlbnQoKTtcbiAgICBsYWJlbExpbmUgJiYgZXh0ZW5kKGxhYmVsTGluZS5lbnN1cmVTdGF0ZSgnc2VsZWN0JyksIHtcbiAgICAgIHg6IGR4LFxuICAgICAgeTogZHlcbiAgICB9KTsgLy8gVE9ETzogbmVlZHMgZHgsIGR5IGluIHpyZW5kZXI/XG5cbiAgICBleHRlbmQobGFiZWxUZXh0LmVuc3VyZVN0YXRlKCdzZWxlY3QnKSwge1xuICAgICAgeDogZHgsXG4gICAgICB5OiBkeVxuICAgIH0pO1xuICAgIHRvZ2dsZUhvdmVyRW1waGFzaXModGhpcywgZW1waGFzaXNNb2RlbC5nZXQoJ2ZvY3VzJyksIGVtcGhhc2lzTW9kZWwuZ2V0KCdibHVyU2NvcGUnKSwgZW1waGFzaXNNb2RlbC5nZXQoJ2Rpc2FibGVkJykpO1xuICB9O1xuXG4gIFBpZVBpZWNlLnByb3RvdHlwZS5fdXBkYXRlTGFiZWwgPSBmdW5jdGlvbiAoc2VyaWVzTW9kZWwsIGRhdGEsIGlkeCkge1xuICAgIHZhciBzZWN0b3IgPSB0aGlzO1xuICAgIHZhciBpdGVtTW9kZWwgPSBkYXRhLmdldEl0ZW1Nb2RlbChpZHgpO1xuICAgIHZhciBsYWJlbExpbmVNb2RlbCA9IGl0ZW1Nb2RlbC5nZXRNb2RlbCgnbGFiZWxMaW5lJyk7XG4gICAgdmFyIHN0eWxlID0gZGF0YS5nZXRJdGVtVmlzdWFsKGlkeCwgJ3N0eWxlJyk7XG4gICAgdmFyIHZpc3VhbENvbG9yID0gc3R5bGUgJiYgc3R5bGUuZmlsbDtcbiAgICB2YXIgdmlzdWFsT3BhY2l0eSA9IHN0eWxlICYmIHN0eWxlLm9wYWNpdHk7XG4gICAgc2V0TGFiZWxTdHlsZShzZWN0b3IsIGdldExhYmVsU3RhdGVzTW9kZWxzKGl0ZW1Nb2RlbCksIHtcbiAgICAgIGxhYmVsRmV0Y2hlcjogZGF0YS5ob3N0TW9kZWwsXG4gICAgICBsYWJlbERhdGFJbmRleDogaWR4LFxuICAgICAgaW5oZXJpdENvbG9yOiB2aXN1YWxDb2xvcixcbiAgICAgIGRlZmF1bHRPcGFjaXR5OiB2aXN1YWxPcGFjaXR5LFxuICAgICAgZGVmYXVsdFRleHQ6IHNlcmllc01vZGVsLmdldEZvcm1hdHRlZExhYmVsKGlkeCwgJ25vcm1hbCcpIHx8IGRhdGEuZ2V0TmFtZShpZHgpXG4gICAgfSk7XG4gICAgdmFyIGxhYmVsVGV4dCA9IHNlY3Rvci5nZXRUZXh0Q29udGVudCgpOyAvLyBTZXQgdGV4dENvbmZpZyBvbiBzZWN0b3IuXG5cbiAgICBzZWN0b3Iuc2V0VGV4dENvbmZpZyh7XG4gICAgICAvLyByZXNldCBwb3NpdGlvbiwgcm90YXRpb25cbiAgICAgIHBvc2l0aW9uOiBudWxsLFxuICAgICAgcm90YXRpb246IG51bGxcbiAgICB9KTsgLy8gTWFrZSBzdXJlIHVwZGF0ZSBzdHlsZSBvbiBsYWJlbFRleHQgYWZ0ZXIgc2V0TGFiZWxTdHlsZS5cbiAgICAvLyBCZWNhdXNlIHNldExhYmVsU3R5bGUgd2lsbCByZXBsYWNlIGEgbmV3IHN0eWxlIG9uIGl0LlxuXG4gICAgbGFiZWxUZXh0LmF0dHIoe1xuICAgICAgejI6IDEwXG4gICAgfSk7XG4gICAgdmFyIGxhYmVsUG9zaXRpb24gPSBzZXJpZXNNb2RlbC5nZXQoWydsYWJlbCcsICdwb3NpdGlvbiddKTtcblxuICAgIGlmIChsYWJlbFBvc2l0aW9uICE9PSAnb3V0c2lkZScgJiYgbGFiZWxQb3NpdGlvbiAhPT0gJ291dGVyJykge1xuICAgICAgc2VjdG9yLnJlbW92ZVRleHRHdWlkZUxpbmUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHBvbHlsaW5lID0gdGhpcy5nZXRUZXh0R3VpZGVMaW5lKCk7XG5cbiAgICAgIGlmICghcG9seWxpbmUpIHtcbiAgICAgICAgcG9seWxpbmUgPSBuZXcgZ3JhcGhpYy5Qb2x5bGluZSgpO1xuICAgICAgICB0aGlzLnNldFRleHRHdWlkZUxpbmUocG9seWxpbmUpO1xuICAgICAgfSAvLyBEZWZhdWx0IHVzZSBpdGVtIHZpc3VhbCBjb2xvclxuXG5cbiAgICAgIHNldExhYmVsTGluZVN0eWxlKHRoaXMsIGdldExhYmVsTGluZVN0YXRlc01vZGVscyhpdGVtTW9kZWwpLCB7XG4gICAgICAgIHN0cm9rZTogdmlzdWFsQ29sb3IsXG4gICAgICAgIG9wYWNpdHk6IHJldHJpZXZlMyhsYWJlbExpbmVNb2RlbC5nZXQoWydsaW5lU3R5bGUnLCAnb3BhY2l0eSddKSwgdmlzdWFsT3BhY2l0eSwgMSlcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gUGllUGllY2U7XG59KGdyYXBoaWMuU2VjdG9yKTsgLy8gUGllIHZpZXdcblxuXG52YXIgUGllVmlldyA9XG4vKiogQGNsYXNzICovXG5mdW5jdGlvbiAoX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhQaWVWaWV3LCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIFBpZVZpZXcoKSB7XG4gICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG5cbiAgICBfdGhpcy5pZ25vcmVMYWJlbExpbmVVcGRhdGUgPSB0cnVlO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIFBpZVZpZXcucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChzZXJpZXNNb2RlbCwgZWNNb2RlbCwgYXBpLCBwYXlsb2FkKSB7XG4gICAgdmFyIGRhdGEgPSBzZXJpZXNNb2RlbC5nZXREYXRhKCk7XG4gICAgdmFyIG9sZERhdGEgPSB0aGlzLl9kYXRhO1xuICAgIHZhciBncm91cCA9IHRoaXMuZ3JvdXA7XG4gICAgdmFyIHN0YXJ0QW5nbGU7IC8vIEZpcnN0IHJlbmRlclxuXG4gICAgaWYgKCFvbGREYXRhICYmIGRhdGEuY291bnQoKSA+IDApIHtcbiAgICAgIHZhciBzaGFwZSA9IGRhdGEuZ2V0SXRlbUxheW91dCgwKTtcblxuICAgICAgZm9yICh2YXIgcyA9IDE7IGlzTmFOKHNoYXBlICYmIHNoYXBlLnN0YXJ0QW5nbGUpICYmIHMgPCBkYXRhLmNvdW50KCk7ICsrcykge1xuICAgICAgICBzaGFwZSA9IGRhdGEuZ2V0SXRlbUxheW91dChzKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNoYXBlKSB7XG4gICAgICAgIHN0YXJ0QW5nbGUgPSBzaGFwZS5zdGFydEFuZ2xlO1xuICAgICAgfVxuICAgIH0gLy8gcmVtb3ZlIGVtcHR5LWNpcmNsZSBpZiBpdCBleGlzdHNcblxuXG4gICAgaWYgKHRoaXMuX2VtcHR5Q2lyY2xlU2VjdG9yKSB7XG4gICAgICBncm91cC5yZW1vdmUodGhpcy5fZW1wdHlDaXJjbGVTZWN0b3IpO1xuICAgIH0gLy8gd2hlbiBhbGwgZGF0YSBhcmUgZmlsdGVyZWQsIHNob3cgbGlnaHRncmF5IGVtcHR5IGNpcmNsZVxuXG5cbiAgICBpZiAoZGF0YS5jb3VudCgpID09PSAwICYmIHNlcmllc01vZGVsLmdldCgnc2hvd0VtcHR5Q2lyY2xlJykpIHtcbiAgICAgIHZhciBzZWN0b3IgPSBuZXcgZ3JhcGhpYy5TZWN0b3Ioe1xuICAgICAgICBzaGFwZTogZ2V0QmFzaWNQaWVMYXlvdXQoc2VyaWVzTW9kZWwsIGFwaSlcbiAgICAgIH0pO1xuICAgICAgc2VjdG9yLnVzZVN0eWxlKHNlcmllc01vZGVsLmdldE1vZGVsKCdlbXB0eUNpcmNsZVN0eWxlJykuZ2V0SXRlbVN0eWxlKCkpO1xuICAgICAgdGhpcy5fZW1wdHlDaXJjbGVTZWN0b3IgPSBzZWN0b3I7XG4gICAgICBncm91cC5hZGQoc2VjdG9yKTtcbiAgICB9XG5cbiAgICBkYXRhLmRpZmYob2xkRGF0YSkuYWRkKGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgIHZhciBwaWVQaWVjZSA9IG5ldyBQaWVQaWVjZShkYXRhLCBpZHgsIHN0YXJ0QW5nbGUpO1xuICAgICAgZGF0YS5zZXRJdGVtR3JhcGhpY0VsKGlkeCwgcGllUGllY2UpO1xuICAgICAgZ3JvdXAuYWRkKHBpZVBpZWNlKTtcbiAgICB9KS51cGRhdGUoZnVuY3Rpb24gKG5ld0lkeCwgb2xkSWR4KSB7XG4gICAgICB2YXIgcGllUGllY2UgPSBvbGREYXRhLmdldEl0ZW1HcmFwaGljRWwob2xkSWR4KTtcbiAgICAgIHBpZVBpZWNlLnVwZGF0ZURhdGEoZGF0YSwgbmV3SWR4LCBzdGFydEFuZ2xlKTtcbiAgICAgIHBpZVBpZWNlLm9mZignY2xpY2snKTtcbiAgICAgIGdyb3VwLmFkZChwaWVQaWVjZSk7XG4gICAgICBkYXRhLnNldEl0ZW1HcmFwaGljRWwobmV3SWR4LCBwaWVQaWVjZSk7XG4gICAgfSkucmVtb3ZlKGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgIHZhciBwaWVQaWVjZSA9IG9sZERhdGEuZ2V0SXRlbUdyYXBoaWNFbChpZHgpO1xuICAgICAgZ3JhcGhpYy5yZW1vdmVFbGVtZW50V2l0aEZhZGVPdXQocGllUGllY2UsIHNlcmllc01vZGVsLCBpZHgpO1xuICAgIH0pLmV4ZWN1dGUoKTtcbiAgICBsYWJlbExheW91dChzZXJpZXNNb2RlbCk7IC8vIEFsd2F5cyB1c2UgaW5pdGlhbCBhbmltYXRpb24uXG5cbiAgICBpZiAoc2VyaWVzTW9kZWwuZ2V0KCdhbmltYXRpb25UeXBlVXBkYXRlJykgIT09ICdleHBhbnNpb24nKSB7XG4gICAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICB9XG4gIH07XG5cbiAgUGllVmlldy5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHt9O1xuXG4gIFBpZVZpZXcucHJvdG90eXBlLmNvbnRhaW5Qb2ludCA9IGZ1bmN0aW9uIChwb2ludCwgc2VyaWVzTW9kZWwpIHtcbiAgICB2YXIgZGF0YSA9IHNlcmllc01vZGVsLmdldERhdGEoKTtcbiAgICB2YXIgaXRlbUxheW91dCA9IGRhdGEuZ2V0SXRlbUxheW91dCgwKTtcblxuICAgIGlmIChpdGVtTGF5b3V0KSB7XG4gICAgICB2YXIgZHggPSBwb2ludFswXSAtIGl0ZW1MYXlvdXQuY3g7XG4gICAgICB2YXIgZHkgPSBwb2ludFsxXSAtIGl0ZW1MYXlvdXQuY3k7XG4gICAgICB2YXIgcmFkaXVzID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICAgIHJldHVybiByYWRpdXMgPD0gaXRlbUxheW91dC5yICYmIHJhZGl1cyA+PSBpdGVtTGF5b3V0LnIwO1xuICAgIH1cbiAgfTtcblxuICBQaWVWaWV3LnR5cGUgPSAncGllJztcbiAgcmV0dXJuIFBpZVZpZXc7XG59KENoYXJ0Vmlldyk7XG5cbmV4cG9ydCBkZWZhdWx0IFBpZVZpZXc7IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgcHJlcGFyZVNlcmllc0RhdGFTY2hlbWEgZnJvbSAnLi4vLi4vZGF0YS9oZWxwZXIvY3JlYXRlRGltZW5zaW9ucy5qcyc7XG5pbXBvcnQgU2VyaWVzRGF0YSBmcm9tICcuLi8uLi9kYXRhL1Nlcmllc0RhdGEuanMnO1xuaW1wb3J0IHsgZXh0ZW5kLCBpc0FycmF5IH0gZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbi8qKlxyXG4gKiBbVXNhZ2VdOlxyXG4gKiAoMSlcclxuICogY3JlYXRlTGlzdFNpbXBseShzZXJpZXNNb2RlbCwgWyd2YWx1ZSddKTtcclxuICogKDIpXHJcbiAqIGNyZWF0ZUxpc3RTaW1wbHkoc2VyaWVzTW9kZWwsIHtcclxuICogICAgIGNvb3JkRGltZW5zaW9uczogWyd2YWx1ZSddLFxyXG4gKiAgICAgZGltZW5zaW9uc0NvdW50OiA1XHJcbiAqIH0pO1xyXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlU2VyaWVzRGF0YVNpbXBseShzZXJpZXNNb2RlbCwgb3B0LCBuYW1lTGlzdCkge1xuICBvcHQgPSBpc0FycmF5KG9wdCkgJiYge1xuICAgIGNvb3JkRGltZW5zaW9uczogb3B0XG4gIH0gfHwgZXh0ZW5kKHtcbiAgICBlbmNvZGVEZWZpbmU6IHNlcmllc01vZGVsLmdldEVuY29kZSgpXG4gIH0sIG9wdCk7XG4gIHZhciBzb3VyY2UgPSBzZXJpZXNNb2RlbC5nZXRTb3VyY2UoKTtcbiAgdmFyIGRpbWVuc2lvbnMgPSBwcmVwYXJlU2VyaWVzRGF0YVNjaGVtYShzb3VyY2UsIG9wdCkuZGltZW5zaW9ucztcbiAgdmFyIGxpc3QgPSBuZXcgU2VyaWVzRGF0YShkaW1lbnNpb25zLCBzZXJpZXNNb2RlbCk7XG4gIGxpc3QuaW5pdERhdGEoc291cmNlLCBuYW1lTGlzdCk7XG4gIHJldHVybiBsaXN0O1xufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuXG4vKipcclxuICogTGVnZW5kVmlzdWFsUHJvdmlkZXIgaXMgYW4gYnJpZGdlIHRoYXQgcGljayBlbmNvZGVkIGNvbG9yIGZyb20gZGF0YSBhbmRcclxuICogcHJvdmlkZSB0byB0aGUgbGVnZW5kIGNvbXBvbmVudC5cclxuICovXG52YXIgTGVnZW5kVmlzdWFsUHJvdmlkZXIgPVxuLyoqIEBjbGFzcyAqL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBMZWdlbmRWaXN1YWxQcm92aWRlciggLy8gRnVuY3Rpb24gdG8gZ2V0IGRhdGEgYWZ0ZXIgZmlsdGVyZWQuIEl0IHN0b3JlcyBhbGwgdGhlIGVuY29kaW5nIGluZm9cbiAgZ2V0RGF0YVdpdGhFbmNvZGVkVmlzdWFsLCAvLyBGdW5jdGlvbiB0byBnZXQgcmF3IGRhdGEgYmVmb3JlIGZpbHRlcmVkLlxuICBnZXRSYXdEYXRhKSB7XG4gICAgdGhpcy5fZ2V0RGF0YVdpdGhFbmNvZGVkVmlzdWFsID0gZ2V0RGF0YVdpdGhFbmNvZGVkVmlzdWFsO1xuICAgIHRoaXMuX2dldFJhd0RhdGEgPSBnZXRSYXdEYXRhO1xuICB9XG5cbiAgTGVnZW5kVmlzdWFsUHJvdmlkZXIucHJvdG90eXBlLmdldEFsbE5hbWVzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByYXdEYXRhID0gdGhpcy5fZ2V0UmF3RGF0YSgpOyAvLyBXZSBmaW5kIHRoZSBuYW1lIGZyb20gdGhlIHJhdyBkYXRhLiBJbiBjYXNlIGl0J3MgZmlsdGVyZWQgYnkgdGhlIGxlZ2VuZCBjb21wb25lbnQuXG4gICAgLy8gTm9ybWFsbHksIHRoZSBuYW1lIGNhbiBiZSBmb3VuZCBpbiByYXdEYXRhLCBidXQgY2FuJ3QgYmUgZm91bmQgaW4gZmlsdGVyZWQgZGF0YSB3aWxsIGRpc3BsYXkgYXMgZ3JheS5cblxuXG4gICAgcmV0dXJuIHJhd0RhdGEubWFwQXJyYXkocmF3RGF0YS5nZXROYW1lKTtcbiAgfTtcblxuICBMZWdlbmRWaXN1YWxQcm92aWRlci5wcm90b3R5cGUuY29udGFpbk5hbWUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHZhciByYXdEYXRhID0gdGhpcy5fZ2V0UmF3RGF0YSgpO1xuXG4gICAgcmV0dXJuIHJhd0RhdGEuaW5kZXhPZk5hbWUobmFtZSkgPj0gMDtcbiAgfTtcblxuICBMZWdlbmRWaXN1YWxQcm92aWRlci5wcm90b3R5cGUuaW5kZXhPZk5hbWUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIC8vIE9ubHkgZ2V0IGRhdGEgd2hlbiBuZWNlc3NhcnkuXG4gICAgLy8gQmVjYXVzZSBMZWdlbmRWaXN1YWxQcm92aWRlciBjb25zdHJ1Y3RvciBtYXkgYmUgbmV3IGluIHRoZSBzdGFnZSB0aGF0IGRhdGEgaXMgbm90IHByZXBhcmVkIHlldC5cbiAgICAvLyBJbnZva2luZyBTZXJpZXMjZ2V0RGF0YSBpbW1lZGlhdGVseSB3aWxsIHRocm93IGFuIGVycm9yLlxuICAgIHZhciBkYXRhV2l0aEVuY29kZWRWaXN1YWwgPSB0aGlzLl9nZXREYXRhV2l0aEVuY29kZWRWaXN1YWwoKTtcblxuICAgIHJldHVybiBkYXRhV2l0aEVuY29kZWRWaXN1YWwuaW5kZXhPZk5hbWUobmFtZSk7XG4gIH07XG5cbiAgTGVnZW5kVmlzdWFsUHJvdmlkZXIucHJvdG90eXBlLmdldEl0ZW1WaXN1YWwgPSBmdW5jdGlvbiAoZGF0YUluZGV4LCBrZXkpIHtcbiAgICAvLyBHZXQgZW5jb2RlZCB2aXN1YWwgcHJvcGVydGllcyBmcm9tIGZpbmFsIGZpbHRlcmVkIGRhdGEuXG4gICAgdmFyIGRhdGFXaXRoRW5jb2RlZFZpc3VhbCA9IHRoaXMuX2dldERhdGFXaXRoRW5jb2RlZFZpc3VhbCgpO1xuXG4gICAgcmV0dXJuIGRhdGFXaXRoRW5jb2RlZFZpc3VhbC5nZXRJdGVtVmlzdWFsKGRhdGFJbmRleCwga2V5KTtcbiAgfTtcblxuICByZXR1cm4gTGVnZW5kVmlzdWFsUHJvdmlkZXI7XG59KCk7XG5cbmV4cG9ydCBkZWZhdWx0IExlZ2VuZFZpc3VhbFByb3ZpZGVyOyIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgY3JlYXRlU2VyaWVzRGF0YVNpbXBseSBmcm9tICcuLi9oZWxwZXIvY3JlYXRlU2VyaWVzRGF0YVNpbXBseS5qcyc7XG5pbXBvcnQgKiBhcyB6clV0aWwgZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbmltcG9ydCAqIGFzIG1vZGVsVXRpbCBmcm9tICcuLi8uLi91dGlsL21vZGVsLmpzJztcbmltcG9ydCB7IGdldFBlcmNlbnRTZWF0cyB9IGZyb20gJy4uLy4uL3V0aWwvbnVtYmVyLmpzJztcbmltcG9ydCB7IG1ha2VTZXJpZXNFbmNvZGVGb3JOYW1lQmFzZWQgfSBmcm9tICcuLi8uLi9kYXRhL2hlbHBlci9zb3VyY2VIZWxwZXIuanMnO1xuaW1wb3J0IExlZ2VuZFZpc3VhbFByb3ZpZGVyIGZyb20gJy4uLy4uL3Zpc3VhbC9MZWdlbmRWaXN1YWxQcm92aWRlci5qcyc7XG5pbXBvcnQgU2VyaWVzTW9kZWwgZnJvbSAnLi4vLi4vbW9kZWwvU2VyaWVzLmpzJztcbnZhciBpbm5lckRhdGEgPSBtb2RlbFV0aWwubWFrZUlubmVyKCk7XG5cbnZhciBQaWVTZXJpZXNNb2RlbCA9XG4vKiogQGNsYXNzICovXG5mdW5jdGlvbiAoX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhQaWVTZXJpZXNNb2RlbCwgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBQaWVTZXJpZXNNb2RlbCgpIHtcbiAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gIH1cbiAgLyoqXHJcbiAgICogQG92ZXJ3cml0ZVxyXG4gICAqL1xuXG5cbiAgUGllU2VyaWVzTW9kZWwucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgX3N1cGVyLnByb3RvdHlwZS5pbml0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IC8vIEVuYWJsZSBsZWdlbmQgc2VsZWN0aW9uIGZvciBlYWNoIGRhdGEgaXRlbVxuICAgIC8vIFVzZSBhIGZ1bmN0aW9uIGluc3RlYWQgb2YgZGlyZWN0IGFjY2VzcyBiZWNhdXNlIGRhdGEgcmVmZXJlbmNlIG1heSBjaGFuZ2VkXG5cblxuICAgIHRoaXMubGVnZW5kVmlzdWFsUHJvdmlkZXIgPSBuZXcgTGVnZW5kVmlzdWFsUHJvdmlkZXIoenJVdGlsLmJpbmQodGhpcy5nZXREYXRhLCB0aGlzKSwgenJVdGlsLmJpbmQodGhpcy5nZXRSYXdEYXRhLCB0aGlzKSk7XG5cbiAgICB0aGlzLl9kZWZhdWx0TGFiZWxMaW5lKG9wdGlvbik7XG4gIH07XG4gIC8qKlxyXG4gICAqIEBvdmVyd3JpdGVcclxuICAgKi9cblxuXG4gIFBpZVNlcmllc01vZGVsLnByb3RvdHlwZS5tZXJnZU9wdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBfc3VwZXIucHJvdG90eXBlLm1lcmdlT3B0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG4gIC8qKlxyXG4gICAqIEBvdmVyd3JpdGVcclxuICAgKi9cblxuXG4gIFBpZVNlcmllc01vZGVsLnByb3RvdHlwZS5nZXRJbml0aWFsRGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gY3JlYXRlU2VyaWVzRGF0YVNpbXBseSh0aGlzLCB7XG4gICAgICBjb29yZERpbWVuc2lvbnM6IFsndmFsdWUnXSxcbiAgICAgIGVuY29kZURlZmF1bHRlcjogenJVdGlsLmN1cnJ5KG1ha2VTZXJpZXNFbmNvZGVGb3JOYW1lQmFzZWQsIHRoaXMpXG4gICAgfSk7XG4gIH07XG4gIC8qKlxyXG4gICAqIEBvdmVyd3JpdGVcclxuICAgKi9cblxuXG4gIFBpZVNlcmllc01vZGVsLnByb3RvdHlwZS5nZXREYXRhUGFyYW1zID0gZnVuY3Rpb24gKGRhdGFJbmRleCkge1xuICAgIHZhciBkYXRhID0gdGhpcy5nZXREYXRhKCk7IC8vIHVwZGF0ZSBzZWF0cyB3aGVuIGRhdGEgaXMgY2hhbmdlZFxuXG4gICAgdmFyIGRhdGFJbm5lciA9IGlubmVyRGF0YShkYXRhKTtcbiAgICB2YXIgc2VhdHMgPSBkYXRhSW5uZXIuc2VhdHM7XG5cbiAgICBpZiAoIXNlYXRzKSB7XG4gICAgICB2YXIgdmFsdWVMaXN0XzEgPSBbXTtcbiAgICAgIGRhdGEuZWFjaChkYXRhLm1hcERpbWVuc2lvbigndmFsdWUnKSwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhbHVlTGlzdF8xLnB1c2godmFsdWUpO1xuICAgICAgfSk7XG4gICAgICBzZWF0cyA9IGRhdGFJbm5lci5zZWF0cyA9IGdldFBlcmNlbnRTZWF0cyh2YWx1ZUxpc3RfMSwgZGF0YS5ob3N0TW9kZWwuZ2V0KCdwZXJjZW50UHJlY2lzaW9uJykpO1xuICAgIH1cblxuICAgIHZhciBwYXJhbXMgPSBfc3VwZXIucHJvdG90eXBlLmdldERhdGFQYXJhbXMuY2FsbCh0aGlzLCBkYXRhSW5kZXgpOyAvLyBzZWF0cyBtYXkgYmUgZW1wdHkgd2hlbiBzdW0gaXMgMFxuXG5cbiAgICBwYXJhbXMucGVyY2VudCA9IHNlYXRzW2RhdGFJbmRleF0gfHwgMDtcbiAgICBwYXJhbXMuJHZhcnMucHVzaCgncGVyY2VudCcpO1xuICAgIHJldHVybiBwYXJhbXM7XG4gIH07XG5cbiAgUGllU2VyaWVzTW9kZWwucHJvdG90eXBlLl9kZWZhdWx0TGFiZWxMaW5lID0gZnVuY3Rpb24gKG9wdGlvbikge1xuICAgIC8vIEV4dGVuZCBsYWJlbExpbmUgZW1waGFzaXNcbiAgICBtb2RlbFV0aWwuZGVmYXVsdEVtcGhhc2lzKG9wdGlvbiwgJ2xhYmVsTGluZScsIFsnc2hvdyddKTtcbiAgICB2YXIgbGFiZWxMaW5lTm9ybWFsT3B0ID0gb3B0aW9uLmxhYmVsTGluZTtcbiAgICB2YXIgbGFiZWxMaW5lRW1waGFzaXNPcHQgPSBvcHRpb24uZW1waGFzaXMubGFiZWxMaW5lOyAvLyBOb3Qgc2hvdyBsYWJlbCBsaW5lIGlmIGBsYWJlbC5ub3JtYWwuc2hvdyA9IGZhbHNlYFxuXG4gICAgbGFiZWxMaW5lTm9ybWFsT3B0LnNob3cgPSBsYWJlbExpbmVOb3JtYWxPcHQuc2hvdyAmJiBvcHRpb24ubGFiZWwuc2hvdztcbiAgICBsYWJlbExpbmVFbXBoYXNpc09wdC5zaG93ID0gbGFiZWxMaW5lRW1waGFzaXNPcHQuc2hvdyAmJiBvcHRpb24uZW1waGFzaXMubGFiZWwuc2hvdztcbiAgfTtcblxuICBQaWVTZXJpZXNNb2RlbC50eXBlID0gJ3Nlcmllcy5waWUnO1xuICBQaWVTZXJpZXNNb2RlbC5kZWZhdWx0T3B0aW9uID0ge1xuICAgIC8vIHpsZXZlbDogMCxcbiAgICB6OiAyLFxuICAgIGxlZ2VuZEhvdmVyTGluazogdHJ1ZSxcbiAgICBjb2xvckJ5OiAnZGF0YScsXG4gICAgLy8g6buY6K6k5YWo5bGA5bGF5LitXG4gICAgY2VudGVyOiBbJzUwJScsICc1MCUnXSxcbiAgICByYWRpdXM6IFswLCAnNzUlJ10sXG4gICAgLy8g6buY6K6k6aG65pe26ZKIXG4gICAgY2xvY2t3aXNlOiB0cnVlLFxuICAgIHN0YXJ0QW5nbGU6IDkwLFxuICAgIC8vIOacgOWwj+inkuW6puaUueS4ujBcbiAgICBtaW5BbmdsZTogMCxcbiAgICAvLyBJZiB0aGUgYW5nbGUgb2YgYSBzZWN0b3IgbGVzcyB0aGFuIGBtaW5TaG93TGFiZWxBbmdsZWAsXG4gICAgLy8gdGhlIGxhYmVsIHdpbGwgbm90IGJlIGRpc3BsYXllZC5cbiAgICBtaW5TaG93TGFiZWxBbmdsZTogMCxcbiAgICAvLyDpgInkuK3ml7bmiYfljLrlgY/np7vph49cbiAgICBzZWxlY3RlZE9mZnNldDogMTAsXG4gICAgLy8g6YCJ5oup5qih5byP77yM6buY6K6k5YWz6Zet77yM5Y+v6YCJc2luZ2xl77yMbXVsdGlwbGVcbiAgICAvLyBzZWxlY3RlZE1vZGU6IGZhbHNlLFxuICAgIC8vIOWNl+S4geagvOWwlOeOq+eRsOWbvuaooeW8j++8jCdyYWRpdXMn77yI5Y2K5b6E77yJIHwgJ2FyZWEn77yI6Z2i56ev77yJXG4gICAgLy8gcm9zZVR5cGU6IG51bGwsXG4gICAgcGVyY2VudFByZWNpc2lvbjogMixcbiAgICAvLyBJZiBzdGlsbCBzaG93IHdoZW4gYWxsIGRhdGEgemVyby5cbiAgICBzdGlsbFNob3daZXJvU3VtOiB0cnVlLFxuICAgIC8vIGN1cnNvcjogbnVsbCxcbiAgICBsZWZ0OiAwLFxuICAgIHRvcDogMCxcbiAgICByaWdodDogMCxcbiAgICBib3R0b206IDAsXG4gICAgd2lkdGg6IG51bGwsXG4gICAgaGVpZ2h0OiBudWxsLFxuICAgIGxhYmVsOiB7XG4gICAgICAvLyBjb2xvcjogJ2luaGVyaXQnLFxuICAgICAgLy8gSWYgcm90YXRlIGFyb3VuZCBjaXJjbGVcbiAgICAgIHJvdGF0ZTogMCxcbiAgICAgIHNob3c6IHRydWUsXG4gICAgICBvdmVyZmxvdzogJ3RydW5jYXRlJyxcbiAgICAgIC8vICdvdXRlcicsICdpbnNpZGUnLCAnY2VudGVyJ1xuICAgICAgcG9zaXRpb246ICdvdXRlcicsXG4gICAgICAvLyAnbm9uZScsICdsYWJlbExpbmUnLCAnZWRnZScuIFdvcmtzIG9ubHkgd2hlbiBwb3NpdGlvbiBpcyAnb3V0ZXInXG4gICAgICBhbGlnblRvOiAnbm9uZScsXG4gICAgICAvLyBDbG9zZXN0IGRpc3RhbmNlIGJldHdlZW4gbGFiZWwgYW5kIGNoYXJ0IGVkZ2UuXG4gICAgICAvLyBXb3JrcyBvbmx5IHBvc2l0aW9uIGlzICdvdXRlcicgYW5kIGFsaWduVG8gaXMgJ2VkZ2UnLlxuICAgICAgZWRnZURpc3RhbmNlOiAnMjUlJyxcbiAgICAgIC8vIFdvcmtzIG9ubHkgcG9zaXRpb24gaXMgJ291dGVyJyBhbmQgYWxpZ25UbyBpcyBub3QgJ2VkZ2UnLlxuICAgICAgYmxlZWRNYXJnaW46IDEwLFxuICAgICAgLy8gRGlzdGFuY2UgYmV0d2VlbiB0ZXh0IGFuZCBsYWJlbCBsaW5lLlxuICAgICAgZGlzdGFuY2VUb0xhYmVsTGluZTogNSAvLyBmb3JtYXR0ZXI6IOagh+etvuaWh+acrOagvOW8j+WZqO+8jOWQjCB0b29sdGlwLmZvcm1hdHRlcu+8jOS4jeaUr+aMgeW8guatpeWbnuiwg1xuICAgICAgLy8g6buY6K6k5L2/55So5YWo5bGA5paH5pys5qC35byP77yM6K+m6KeBIHRleHRTdHlsZVxuICAgICAgLy8gZGlzdGFuY2U6IOW9k3Bvc2l0aW9u5Li6aW5uZXLml7bmnInmlYjvvIzkuLpsYWJlbOS9jee9ruWIsOWchuW/g+eahOi3neemu+S4juWchuWNiuW+hCjnjq/nirblm77kuLrlhoXlpJbljYrlvoTlkowp55qE5q+U5L6L57O75pWwXG5cbiAgICB9LFxuICAgIC8vIEVuYWJsZWQgd2hlbiBsYWJlbC5ub3JtYWwucG9zaXRpb24gaXMgJ291dGVyJ1xuICAgIGxhYmVsTGluZToge1xuICAgICAgc2hvdzogdHJ1ZSxcbiAgICAgIC8vIOW8leWvvOe6v+S4pOauteS4reeahOesrOS4gOautemVv+W6plxuICAgICAgbGVuZ3RoOiAxNSxcbiAgICAgIC8vIOW8leWvvOe6v+S4pOauteS4reeahOesrOS6jOautemVv+W6plxuICAgICAgbGVuZ3RoMjogMTUsXG4gICAgICBzbW9vdGg6IGZhbHNlLFxuICAgICAgbWluVHVybkFuZ2xlOiA5MCxcbiAgICAgIG1heFN1cmZhY2VBbmdsZTogOTAsXG4gICAgICBsaW5lU3R5bGU6IHtcbiAgICAgICAgLy8gY29sb3I6IOWQhOW8gixcbiAgICAgICAgd2lkdGg6IDEsXG4gICAgICAgIHR5cGU6ICdzb2xpZCdcbiAgICAgIH1cbiAgICB9LFxuICAgIGl0ZW1TdHlsZToge1xuICAgICAgYm9yZGVyV2lkdGg6IDEsXG4gICAgICBib3JkZXJKb2luOiAncm91bmQnXG4gICAgfSxcbiAgICBzaG93RW1wdHlDaXJjbGU6IHRydWUsXG4gICAgZW1wdHlDaXJjbGVTdHlsZToge1xuICAgICAgY29sb3I6ICdsaWdodGdyYXknLFxuICAgICAgb3BhY2l0eTogMVxuICAgIH0sXG4gICAgbGFiZWxMYXlvdXQ6IHtcbiAgICAgIC8vIEhpZGUgdGhlIG92ZXJsYXBwZWQgbGFiZWwuXG4gICAgICBoaWRlT3ZlcmxhcDogdHJ1ZVxuICAgIH0sXG4gICAgZW1waGFzaXM6IHtcbiAgICAgIHNjYWxlOiB0cnVlLFxuICAgICAgc2NhbGVTaXplOiA1XG4gICAgfSxcbiAgICAvLyBJZiB1c2Ugc3RyYXRlZ3kgdG8gYXZvaWQgbGFiZWwgb3ZlcmxhcHBpbmdcbiAgICBhdm9pZExhYmVsT3ZlcmxhcDogdHJ1ZSxcbiAgICAvLyBBbmltYXRpb24gdHlwZS4gVmFsaWQgdmFsdWVzOiBleHBhbnNpb24sIHNjYWxlXG4gICAgYW5pbWF0aW9uVHlwZTogJ2V4cGFuc2lvbicsXG4gICAgYW5pbWF0aW9uRHVyYXRpb246IDEwMDAsXG4gICAgLy8gQW5pbWF0aW9uIHR5cGUgd2hlbiB1cGRhdGUuIFZhbGlkIHZhbHVlczogdHJhbnNpdGlvbiwgZXhwYW5zaW9uXG4gICAgYW5pbWF0aW9uVHlwZVVwZGF0ZTogJ3RyYW5zaXRpb24nLFxuICAgIGFuaW1hdGlvbkVhc2luZ1VwZGF0ZTogJ2N1YmljSW5PdXQnLFxuICAgIGFuaW1hdGlvbkR1cmF0aW9uVXBkYXRlOiA1MDAsXG4gICAgYW5pbWF0aW9uRWFzaW5nOiAnY3ViaWNJbk91dCdcbiAgfTtcbiAgcmV0dXJuIFBpZVNlcmllc01vZGVsO1xufShTZXJpZXNNb2RlbCk7XG5cbmV4cG9ydCBkZWZhdWx0IFBpZVNlcmllc01vZGVsOyIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgaXNOdW1iZXIgfSBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbmVnYXRpdmVEYXRhRmlsdGVyKHNlcmllc1R5cGUpIHtcbiAgcmV0dXJuIHtcbiAgICBzZXJpZXNUeXBlOiBzZXJpZXNUeXBlLFxuICAgIHJlc2V0OiBmdW5jdGlvbiAoc2VyaWVzTW9kZWwsIGVjTW9kZWwpIHtcbiAgICAgIHZhciBkYXRhID0gc2VyaWVzTW9kZWwuZ2V0RGF0YSgpO1xuICAgICAgZGF0YS5maWx0ZXJTZWxmKGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgICAgLy8gaGFuZGxlIG5lZ2F0aXZlIHZhbHVlIGNvbmRpdGlvblxuICAgICAgICB2YXIgdmFsdWVEaW0gPSBkYXRhLm1hcERpbWVuc2lvbigndmFsdWUnKTtcbiAgICAgICAgdmFyIGN1clZhbHVlID0gZGF0YS5nZXQodmFsdWVEaW0sIGlkeCk7XG5cbiAgICAgICAgaWYgKGlzTnVtYmVyKGN1clZhbHVlKSAmJiAhaXNOYU4oY3VyVmFsdWUpICYmIGN1clZhbHVlIDwgMCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgY3JlYXRlTGVnYWN5RGF0YVNlbGVjdEFjdGlvbiB9IGZyb20gJy4uLy4uL2xlZ2FjeS9kYXRhU2VsZWN0QWN0aW9uLmpzJztcbmltcG9ydCBwaWVMYXlvdXQgZnJvbSAnLi4vcGllL3BpZUxheW91dC5qcyc7XG5pbXBvcnQgZGF0YUZpbHRlciBmcm9tICcuLi8uLi9wcm9jZXNzb3IvZGF0YUZpbHRlci5qcyc7XG5pbXBvcnQgeyBjdXJyeSB9IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgUGllVmlldyBmcm9tICcuL1BpZVZpZXcuanMnO1xuaW1wb3J0IFBpZVNlcmllc01vZGVsIGZyb20gJy4vUGllU2VyaWVzLmpzJztcbmltcG9ydCBuZWdhdGl2ZURhdGFGaWx0ZXIgZnJvbSAnLi4vLi4vcHJvY2Vzc29yL25lZ2F0aXZlRGF0YUZpbHRlci5qcyc7XG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbChyZWdpc3RlcnMpIHtcbiAgcmVnaXN0ZXJzLnJlZ2lzdGVyQ2hhcnRWaWV3KFBpZVZpZXcpO1xuICByZWdpc3RlcnMucmVnaXN0ZXJTZXJpZXNNb2RlbChQaWVTZXJpZXNNb2RlbCk7XG4gIGNyZWF0ZUxlZ2FjeURhdGFTZWxlY3RBY3Rpb24oJ3BpZScsIHJlZ2lzdGVycy5yZWdpc3RlckFjdGlvbik7XG4gIHJlZ2lzdGVycy5yZWdpc3RlckxheW91dChjdXJyeShwaWVMYXlvdXQsICdwaWUnKSk7XG4gIHJlZ2lzdGVycy5yZWdpc3RlclByb2Nlc3NvcihkYXRhRmlsdGVyKCdwaWUnKSk7XG4gIHJlZ2lzdGVycy5yZWdpc3RlclByb2Nlc3NvcihuZWdhdGl2ZURhdGFGaWx0ZXIoJ3BpZScpKTtcbn0iLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCAqIGFzIHpyVXRpbCBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0IHsgU0lOR0xFX1JFRkVSUklORyB9IGZyb20gJy4uLy4uL3V0aWwvbW9kZWwuanMnO1xuLyoqXHJcbiAqIENhbiBvbmx5IGJlIGNhbGxlZCBhZnRlciBjb29yZGluYXRlIHN5c3RlbSBjcmVhdGlvbiBzdGFnZS5cclxuICogKENhbiBiZSBjYWxsZWQgYmVmb3JlIGNvb3JkaW5hdGUgc3lzdGVtIHVwZGF0ZSBzdGFnZSkuXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGF5b3V0KGdyaWRNb2RlbCwgYXhpc01vZGVsLCBvcHQpIHtcbiAgb3B0ID0gb3B0IHx8IHt9O1xuICB2YXIgZ3JpZCA9IGdyaWRNb2RlbC5jb29yZGluYXRlU3lzdGVtO1xuICB2YXIgYXhpcyA9IGF4aXNNb2RlbC5heGlzO1xuICB2YXIgbGF5b3V0ID0ge307XG4gIHZhciBvdGhlckF4aXNPblplcm9PZiA9IGF4aXMuZ2V0QXhlc09uWmVyb09mKClbMF07XG4gIHZhciByYXdBeGlzUG9zaXRpb24gPSBheGlzLnBvc2l0aW9uO1xuICB2YXIgYXhpc1Bvc2l0aW9uID0gb3RoZXJBeGlzT25aZXJvT2YgPyAnb25aZXJvJyA6IHJhd0F4aXNQb3NpdGlvbjtcbiAgdmFyIGF4aXNEaW0gPSBheGlzLmRpbTtcbiAgdmFyIHJlY3QgPSBncmlkLmdldFJlY3QoKTtcbiAgdmFyIHJlY3RCb3VuZCA9IFtyZWN0LngsIHJlY3QueCArIHJlY3Qud2lkdGgsIHJlY3QueSwgcmVjdC55ICsgcmVjdC5oZWlnaHRdO1xuICB2YXIgaWR4ID0ge1xuICAgIGxlZnQ6IDAsXG4gICAgcmlnaHQ6IDEsXG4gICAgdG9wOiAwLFxuICAgIGJvdHRvbTogMSxcbiAgICBvblplcm86IDJcbiAgfTtcbiAgdmFyIGF4aXNPZmZzZXQgPSBheGlzTW9kZWwuZ2V0KCdvZmZzZXQnKSB8fCAwO1xuICB2YXIgcG9zQm91bmQgPSBheGlzRGltID09PSAneCcgPyBbcmVjdEJvdW5kWzJdIC0gYXhpc09mZnNldCwgcmVjdEJvdW5kWzNdICsgYXhpc09mZnNldF0gOiBbcmVjdEJvdW5kWzBdIC0gYXhpc09mZnNldCwgcmVjdEJvdW5kWzFdICsgYXhpc09mZnNldF07XG5cbiAgaWYgKG90aGVyQXhpc09uWmVyb09mKSB7XG4gICAgdmFyIG9uWmVyb0Nvb3JkID0gb3RoZXJBeGlzT25aZXJvT2YudG9HbG9iYWxDb29yZChvdGhlckF4aXNPblplcm9PZi5kYXRhVG9Db29yZCgwKSk7XG4gICAgcG9zQm91bmRbaWR4Lm9uWmVyb10gPSBNYXRoLm1heChNYXRoLm1pbihvblplcm9Db29yZCwgcG9zQm91bmRbMV0pLCBwb3NCb3VuZFswXSk7XG4gIH0gLy8gQXhpcyBwb3NpdGlvblxuXG5cbiAgbGF5b3V0LnBvc2l0aW9uID0gW2F4aXNEaW0gPT09ICd5JyA/IHBvc0JvdW5kW2lkeFtheGlzUG9zaXRpb25dXSA6IHJlY3RCb3VuZFswXSwgYXhpc0RpbSA9PT0gJ3gnID8gcG9zQm91bmRbaWR4W2F4aXNQb3NpdGlvbl1dIDogcmVjdEJvdW5kWzNdXTsgLy8gQXhpcyByb3RhdGlvblxuXG4gIGxheW91dC5yb3RhdGlvbiA9IE1hdGguUEkgLyAyICogKGF4aXNEaW0gPT09ICd4JyA/IDAgOiAxKTsgLy8gVGljayBhbmQgbGFiZWwgZGlyZWN0aW9uLCB4IHkgaXMgYXhpc0RpbVxuXG4gIHZhciBkaXJNYXAgPSB7XG4gICAgdG9wOiAtMSxcbiAgICBib3R0b206IDEsXG4gICAgbGVmdDogLTEsXG4gICAgcmlnaHQ6IDFcbiAgfTtcbiAgbGF5b3V0LmxhYmVsRGlyZWN0aW9uID0gbGF5b3V0LnRpY2tEaXJlY3Rpb24gPSBsYXlvdXQubmFtZURpcmVjdGlvbiA9IGRpck1hcFtyYXdBeGlzUG9zaXRpb25dO1xuICBsYXlvdXQubGFiZWxPZmZzZXQgPSBvdGhlckF4aXNPblplcm9PZiA/IHBvc0JvdW5kW2lkeFtyYXdBeGlzUG9zaXRpb25dXSAtIHBvc0JvdW5kW2lkeC5vblplcm9dIDogMDtcblxuICBpZiAoYXhpc01vZGVsLmdldChbJ2F4aXNUaWNrJywgJ2luc2lkZSddKSkge1xuICAgIGxheW91dC50aWNrRGlyZWN0aW9uID0gLWxheW91dC50aWNrRGlyZWN0aW9uO1xuICB9XG5cbiAgaWYgKHpyVXRpbC5yZXRyaWV2ZShvcHQubGFiZWxJbnNpZGUsIGF4aXNNb2RlbC5nZXQoWydheGlzTGFiZWwnLCAnaW5zaWRlJ10pKSkge1xuICAgIGxheW91dC5sYWJlbERpcmVjdGlvbiA9IC1sYXlvdXQubGFiZWxEaXJlY3Rpb247XG4gIH0gLy8gU3BlY2lhbCBsYWJlbCByb3RhdGlvblxuXG5cbiAgdmFyIGxhYmVsUm90YXRlID0gYXhpc01vZGVsLmdldChbJ2F4aXNMYWJlbCcsICdyb3RhdGUnXSk7XG4gIGxheW91dC5sYWJlbFJvdGF0ZSA9IGF4aXNQb3NpdGlvbiA9PT0gJ3RvcCcgPyAtbGFiZWxSb3RhdGUgOiBsYWJlbFJvdGF0ZTsgLy8gT3ZlciBzcGxpdExpbmUgYW5kIHNwbGl0QXJlYVxuXG4gIGxheW91dC56MiA9IDE7XG4gIHJldHVybiBsYXlvdXQ7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNDYXJ0ZXNpYW4yRFNlcmllcyhzZXJpZXNNb2RlbCkge1xuICByZXR1cm4gc2VyaWVzTW9kZWwuZ2V0KCdjb29yZGluYXRlU3lzdGVtJykgPT09ICdjYXJ0ZXNpYW4yZCc7XG59XG5leHBvcnQgZnVuY3Rpb24gZmluZEF4aXNNb2RlbHMoc2VyaWVzTW9kZWwpIHtcbiAgdmFyIGF4aXNNb2RlbE1hcCA9IHtcbiAgICB4QXhpc01vZGVsOiBudWxsLFxuICAgIHlBeGlzTW9kZWw6IG51bGxcbiAgfTtcbiAgenJVdGlsLmVhY2goYXhpc01vZGVsTWFwLCBmdW5jdGlvbiAodiwga2V5KSB7XG4gICAgdmFyIGF4aXNUeXBlID0ga2V5LnJlcGxhY2UoL01vZGVsJC8sICcnKTtcbiAgICB2YXIgYXhpc01vZGVsID0gc2VyaWVzTW9kZWwuZ2V0UmVmZXJyaW5nQ29tcG9uZW50cyhheGlzVHlwZSwgU0lOR0xFX1JFRkVSUklORykubW9kZWxzWzBdO1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGlmICghYXhpc01vZGVsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihheGlzVHlwZSArICcgXCInICsgenJVdGlsLnJldHJpZXZlMyhzZXJpZXNNb2RlbC5nZXQoYXhpc1R5cGUgKyAnSW5kZXgnKSwgc2VyaWVzTW9kZWwuZ2V0KGF4aXNUeXBlICsgJ0lkJyksIDApICsgJ1wiIG5vdCBmb3VuZCcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGF4aXNNb2RlbE1hcFtrZXldID0gYXhpc01vZGVsO1xuICB9KTtcbiAgcmV0dXJuIGF4aXNNb2RlbE1hcDtcbn0iLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCB7IHJldHJpZXZlLCBkZWZhdWx0cywgZXh0ZW5kLCBlYWNoLCBpc09iamVjdCwgbWFwLCBpc1N0cmluZywgaXNOdW1iZXIsIGlzRnVuY3Rpb24gfSBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0ICogYXMgZ3JhcGhpYyBmcm9tICcuLi8uLi91dGlsL2dyYXBoaWMuanMnO1xuaW1wb3J0IHsgZ2V0RUNEYXRhIH0gZnJvbSAnLi4vLi4vdXRpbC9pbm5lclN0b3JlLmpzJztcbmltcG9ydCB7IGNyZWF0ZVRleHRTdHlsZSB9IGZyb20gJy4uLy4uL2xhYmVsL2xhYmVsU3R5bGUuanMnO1xuaW1wb3J0IE1vZGVsIGZyb20gJy4uLy4uL21vZGVsL01vZGVsLmpzJztcbmltcG9ydCB7IGlzUmFkaWFuQXJvdW5kWmVybywgcmVtUmFkaWFuIH0gZnJvbSAnLi4vLi4vdXRpbC9udW1iZXIuanMnO1xuaW1wb3J0IHsgY3JlYXRlU3ltYm9sLCBub3JtYWxpemVTeW1ib2xPZmZzZXQgfSBmcm9tICcuLi8uLi91dGlsL3N5bWJvbC5qcyc7XG5pbXBvcnQgKiBhcyBtYXRyaXhVdGlsIGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvbWF0cml4LmpzJztcbmltcG9ydCB7IGFwcGx5VHJhbnNmb3JtIGFzIHYyQXBwbHlUcmFuc2Zvcm0gfSBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3ZlY3Rvci5qcyc7XG5pbXBvcnQgeyBzaG91bGRTaG93QWxsTGFiZWxzIH0gZnJvbSAnLi4vLi4vY29vcmQvYXhpc0hlbHBlci5qcyc7XG5pbXBvcnQgeyBwcmVwYXJlTGF5b3V0TGlzdCwgaGlkZU92ZXJsYXAgfSBmcm9tICcuLi8uLi9sYWJlbC9sYWJlbExheW91dEhlbHBlci5qcyc7XG52YXIgUEkgPSBNYXRoLlBJO1xuLyoqXHJcbiAqIEEgZmluYWwgYXhpcyBpcyB0cmFuc2xhdGVkIGFuZCByb3RhdGVkIGZyb20gYSBcInN0YW5kYXJkIGF4aXNcIi5cclxuICogU28gb3B0LnBvc2l0aW9uIGFuZCBvcHQucm90YXRpb24gaXMgcmVxdWlyZWQuXHJcbiAqXHJcbiAqIEEgc3RhbmRhcmQgYXhpcyBpcyBhbmQgYXhpcyBmcm9tIFswLCAwXSB0byBbMCwgYXhpc0V4dGVudFsxXV0sXHJcbiAqIGZvciBleGFtcGxlOiAoMCwgMCkgLS0tLS0tLS0tLS0tPiAoMCwgNTApXHJcbiAqXHJcbiAqIG5hbWVEaXJlY3Rpb24gb3IgdGlja0RpcmVjdGlvbiBvciBsYWJlbERpcmVjdGlvbiBpcyAxIG1lYW5zIHRpY2tcclxuICogb3IgbGFiZWwgaXMgYmVsb3cgdGhlIHN0YW5kYXJkIGF4aXMsIHdoZXJlYXMgaXMgLTEgbWVhbnMgYWJvdmVcclxuICogdGhlIHN0YW5kYXJkIGF4aXMuIGxhYmVsT2Zmc2V0IG1lYW5zIG9mZnNldCBiZXR3ZWVuIGxhYmVsIGFuZCBheGlzLFxyXG4gKiB3aGljaCBpcyB1c2VmdWwgd2hlbiAnb25aZXJvJywgd2hlcmUgYXhpc0xhYmVsIGlzIGluIHRoZSBncmlkIGFuZFxyXG4gKiBsYWJlbCBpbiBvdXRzaWRlIGdyaWQuXHJcbiAqXHJcbiAqIFRpcHM6IGxpa2UgYWx3YXlzLFxyXG4gKiBwb3NpdGl2ZSByb3RhdGlvbiByZXByZXNlbnRzIGFudGljbG9ja3dpc2UsIGFuZCBuZWdhdGl2ZSByb3RhdGlvblxyXG4gKiByZXByZXNlbnRzIGNsb2Nrd2lzZS5cclxuICogVGhlIGRpcmVjdGlvbiBvZiBwb3NpdGlvbiBjb29yZGluYXRlIGlzIHRoZSBzYW1lIGFzIHRoZSBkaXJlY3Rpb25cclxuICogb2Ygc2NyZWVuIGNvb3JkaW5hdGUuXHJcbiAqXHJcbiAqIERvIG5vdCBuZWVkIHRvIGNvbnNpZGVyIGF4aXMgJ2ludmVyc2UnLCB3aGljaCBpcyBhdXRvIHByb2Nlc3NlZCBieVxyXG4gKiBheGlzIGV4dGVudC5cclxuICovXG5cbnZhciBBeGlzQnVpbGRlciA9XG4vKiogQGNsYXNzICovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEF4aXNCdWlsZGVyKGF4aXNNb2RlbCwgb3B0KSB7XG4gICAgdGhpcy5ncm91cCA9IG5ldyBncmFwaGljLkdyb3VwKCk7XG4gICAgdGhpcy5vcHQgPSBvcHQ7XG4gICAgdGhpcy5heGlzTW9kZWwgPSBheGlzTW9kZWw7IC8vIERlZmF1bHQgdmFsdWVcblxuICAgIGRlZmF1bHRzKG9wdCwge1xuICAgICAgbGFiZWxPZmZzZXQ6IDAsXG4gICAgICBuYW1lRGlyZWN0aW9uOiAxLFxuICAgICAgdGlja0RpcmVjdGlvbjogMSxcbiAgICAgIGxhYmVsRGlyZWN0aW9uOiAxLFxuICAgICAgc2lsZW50OiB0cnVlLFxuICAgICAgaGFuZGxlQXV0b1Nob3duOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0pOyAvLyBGSVhNRSBOb3QgdXNlIGEgc2VwYXJhdGUgdGV4dCBncm91cD9cblxuICAgIHZhciB0cmFuc2Zvcm1Hcm91cCA9IG5ldyBncmFwaGljLkdyb3VwKHtcbiAgICAgIHg6IG9wdC5wb3NpdGlvblswXSxcbiAgICAgIHk6IG9wdC5wb3NpdGlvblsxXSxcbiAgICAgIHJvdGF0aW9uOiBvcHQucm90YXRpb25cbiAgICB9KTsgLy8gdGhpcy5ncm91cC5hZGQodHJhbnNmb3JtR3JvdXApO1xuICAgIC8vIHRoaXMuX3RyYW5zZm9ybUdyb3VwID0gdHJhbnNmb3JtR3JvdXA7XG5cbiAgICB0cmFuc2Zvcm1Hcm91cC51cGRhdGVUcmFuc2Zvcm0oKTtcbiAgICB0aGlzLl90cmFuc2Zvcm1Hcm91cCA9IHRyYW5zZm9ybUdyb3VwO1xuICB9XG5cbiAgQXhpc0J1aWxkZXIucHJvdG90eXBlLmhhc0J1aWxkZXIgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHJldHVybiAhIWJ1aWxkZXJzW25hbWVdO1xuICB9O1xuXG4gIEF4aXNCdWlsZGVyLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIGJ1aWxkZXJzW25hbWVdKHRoaXMub3B0LCB0aGlzLmF4aXNNb2RlbCwgdGhpcy5ncm91cCwgdGhpcy5fdHJhbnNmb3JtR3JvdXApO1xuICB9O1xuXG4gIEF4aXNCdWlsZGVyLnByb3RvdHlwZS5nZXRHcm91cCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5ncm91cDtcbiAgfTtcblxuICBBeGlzQnVpbGRlci5pbm5lclRleHRMYXlvdXQgPSBmdW5jdGlvbiAoYXhpc1JvdGF0aW9uLCB0ZXh0Um90YXRpb24sIGRpcmVjdGlvbikge1xuICAgIHZhciByb3RhdGlvbkRpZmYgPSByZW1SYWRpYW4odGV4dFJvdGF0aW9uIC0gYXhpc1JvdGF0aW9uKTtcbiAgICB2YXIgdGV4dEFsaWduO1xuICAgIHZhciB0ZXh0VmVydGljYWxBbGlnbjtcblxuICAgIGlmIChpc1JhZGlhbkFyb3VuZFplcm8ocm90YXRpb25EaWZmKSkge1xuICAgICAgLy8gTGFiZWwgaXMgcGFyYWxsZWwgd2l0aCBheGlzIGxpbmUuXG4gICAgICB0ZXh0VmVydGljYWxBbGlnbiA9IGRpcmVjdGlvbiA+IDAgPyAndG9wJyA6ICdib3R0b20nO1xuICAgICAgdGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgfSBlbHNlIGlmIChpc1JhZGlhbkFyb3VuZFplcm8ocm90YXRpb25EaWZmIC0gUEkpKSB7XG4gICAgICAvLyBMYWJlbCBpcyBpbnZlcnNlIHBhcmFsbGVsIHdpdGggYXhpcyBsaW5lLlxuICAgICAgdGV4dFZlcnRpY2FsQWxpZ24gPSBkaXJlY3Rpb24gPiAwID8gJ2JvdHRvbScgOiAndG9wJztcbiAgICAgIHRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgIH0gZWxzZSB7XG4gICAgICB0ZXh0VmVydGljYWxBbGlnbiA9ICdtaWRkbGUnO1xuXG4gICAgICBpZiAocm90YXRpb25EaWZmID4gMCAmJiByb3RhdGlvbkRpZmYgPCBQSSkge1xuICAgICAgICB0ZXh0QWxpZ24gPSBkaXJlY3Rpb24gPiAwID8gJ3JpZ2h0JyA6ICdsZWZ0JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRleHRBbGlnbiA9IGRpcmVjdGlvbiA+IDAgPyAnbGVmdCcgOiAncmlnaHQnO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICByb3RhdGlvbjogcm90YXRpb25EaWZmLFxuICAgICAgdGV4dEFsaWduOiB0ZXh0QWxpZ24sXG4gICAgICB0ZXh0VmVydGljYWxBbGlnbjogdGV4dFZlcnRpY2FsQWxpZ25cbiAgICB9O1xuICB9O1xuXG4gIEF4aXNCdWlsZGVyLm1ha2VBeGlzRXZlbnREYXRhQmFzZSA9IGZ1bmN0aW9uIChheGlzTW9kZWwpIHtcbiAgICB2YXIgZXZlbnREYXRhID0ge1xuICAgICAgY29tcG9uZW50VHlwZTogYXhpc01vZGVsLm1haW5UeXBlLFxuICAgICAgY29tcG9uZW50SW5kZXg6IGF4aXNNb2RlbC5jb21wb25lbnRJbmRleFxuICAgIH07XG4gICAgZXZlbnREYXRhW2F4aXNNb2RlbC5tYWluVHlwZSArICdJbmRleCddID0gYXhpc01vZGVsLmNvbXBvbmVudEluZGV4O1xuICAgIHJldHVybiBldmVudERhdGE7XG4gIH07XG5cbiAgQXhpc0J1aWxkZXIuaXNMYWJlbFNpbGVudCA9IGZ1bmN0aW9uIChheGlzTW9kZWwpIHtcbiAgICB2YXIgdG9vbHRpcE9wdCA9IGF4aXNNb2RlbC5nZXQoJ3Rvb2x0aXAnKTtcbiAgICByZXR1cm4gYXhpc01vZGVsLmdldCgnc2lsZW50JykgLy8gQ29uc2lkZXIgbW91c2UgY3Vyc29yLCBhZGQgdGhlc2UgcmVzdHJpY3Rpb25zLlxuICAgIHx8ICEoYXhpc01vZGVsLmdldCgndHJpZ2dlckV2ZW50JykgfHwgdG9vbHRpcE9wdCAmJiB0b29sdGlwT3B0LnNob3cpO1xuICB9O1xuXG4gIHJldHVybiBBeGlzQnVpbGRlcjtcbn0oKTtcblxuO1xudmFyIGJ1aWxkZXJzID0ge1xuICBheGlzTGluZTogZnVuY3Rpb24gKG9wdCwgYXhpc01vZGVsLCBncm91cCwgdHJhbnNmb3JtR3JvdXApIHtcbiAgICB2YXIgc2hvd24gPSBheGlzTW9kZWwuZ2V0KFsnYXhpc0xpbmUnLCAnc2hvdyddKTtcblxuICAgIGlmIChzaG93biA9PT0gJ2F1dG8nICYmIG9wdC5oYW5kbGVBdXRvU2hvd24pIHtcbiAgICAgIHNob3duID0gb3B0LmhhbmRsZUF1dG9TaG93bignYXhpc0xpbmUnKTtcbiAgICB9XG5cbiAgICBpZiAoIXNob3duKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGV4dGVudCA9IGF4aXNNb2RlbC5heGlzLmdldEV4dGVudCgpO1xuICAgIHZhciBtYXRyaXggPSB0cmFuc2Zvcm1Hcm91cC50cmFuc2Zvcm07XG4gICAgdmFyIHB0MSA9IFtleHRlbnRbMF0sIDBdO1xuICAgIHZhciBwdDIgPSBbZXh0ZW50WzFdLCAwXTtcbiAgICB2YXIgaW52ZXJzZSA9IHB0MVswXSA+IHB0MlswXTtcblxuICAgIGlmIChtYXRyaXgpIHtcbiAgICAgIHYyQXBwbHlUcmFuc2Zvcm0ocHQxLCBwdDEsIG1hdHJpeCk7XG4gICAgICB2MkFwcGx5VHJhbnNmb3JtKHB0MiwgcHQyLCBtYXRyaXgpO1xuICAgIH1cblxuICAgIHZhciBsaW5lU3R5bGUgPSBleHRlbmQoe1xuICAgICAgbGluZUNhcDogJ3JvdW5kJ1xuICAgIH0sIGF4aXNNb2RlbC5nZXRNb2RlbChbJ2F4aXNMaW5lJywgJ2xpbmVTdHlsZSddKS5nZXRMaW5lU3R5bGUoKSk7XG4gICAgdmFyIGxpbmUgPSBuZXcgZ3JhcGhpYy5MaW5lKHtcbiAgICAgIHNoYXBlOiB7XG4gICAgICAgIHgxOiBwdDFbMF0sXG4gICAgICAgIHkxOiBwdDFbMV0sXG4gICAgICAgIHgyOiBwdDJbMF0sXG4gICAgICAgIHkyOiBwdDJbMV1cbiAgICAgIH0sXG4gICAgICBzdHlsZTogbGluZVN0eWxlLFxuICAgICAgc3Ryb2tlQ29udGFpblRocmVzaG9sZDogb3B0LnN0cm9rZUNvbnRhaW5UaHJlc2hvbGQgfHwgNSxcbiAgICAgIHNpbGVudDogdHJ1ZSxcbiAgICAgIHoyOiAxXG4gICAgfSk7XG4gICAgZ3JhcGhpYy5zdWJQaXhlbE9wdGltaXplTGluZShsaW5lLnNoYXBlLCBsaW5lLnN0eWxlLmxpbmVXaWR0aCk7XG4gICAgbGluZS5hbmlkID0gJ2xpbmUnO1xuICAgIGdyb3VwLmFkZChsaW5lKTtcbiAgICB2YXIgYXJyb3dzID0gYXhpc01vZGVsLmdldChbJ2F4aXNMaW5lJywgJ3N5bWJvbCddKTtcblxuICAgIGlmIChhcnJvd3MgIT0gbnVsbCkge1xuICAgICAgdmFyIGFycm93U2l6ZSA9IGF4aXNNb2RlbC5nZXQoWydheGlzTGluZScsICdzeW1ib2xTaXplJ10pO1xuXG4gICAgICBpZiAoaXNTdHJpbmcoYXJyb3dzKSkge1xuICAgICAgICAvLyBVc2UgdGhlIHNhbWUgYXJyb3cgZm9yIHN0YXJ0IGFuZCBlbmQgcG9pbnRcbiAgICAgICAgYXJyb3dzID0gW2Fycm93cywgYXJyb3dzXTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzU3RyaW5nKGFycm93U2l6ZSkgfHwgaXNOdW1iZXIoYXJyb3dTaXplKSkge1xuICAgICAgICAvLyBVc2UgdGhlIHNhbWUgc2l6ZSBmb3Igd2lkdGggYW5kIGhlaWdodFxuICAgICAgICBhcnJvd1NpemUgPSBbYXJyb3dTaXplLCBhcnJvd1NpemVdO1xuICAgICAgfVxuXG4gICAgICB2YXIgYXJyb3dPZmZzZXQgPSBub3JtYWxpemVTeW1ib2xPZmZzZXQoYXhpc01vZGVsLmdldChbJ2F4aXNMaW5lJywgJ3N5bWJvbE9mZnNldCddKSB8fCAwLCBhcnJvd1NpemUpO1xuICAgICAgdmFyIHN5bWJvbFdpZHRoXzEgPSBhcnJvd1NpemVbMF07XG4gICAgICB2YXIgc3ltYm9sSGVpZ2h0XzEgPSBhcnJvd1NpemVbMV07XG4gICAgICBlYWNoKFt7XG4gICAgICAgIHJvdGF0ZTogb3B0LnJvdGF0aW9uICsgTWF0aC5QSSAvIDIsXG4gICAgICAgIG9mZnNldDogYXJyb3dPZmZzZXRbMF0sXG4gICAgICAgIHI6IDBcbiAgICAgIH0sIHtcbiAgICAgICAgcm90YXRlOiBvcHQucm90YXRpb24gLSBNYXRoLlBJIC8gMixcbiAgICAgICAgb2Zmc2V0OiBhcnJvd09mZnNldFsxXSxcbiAgICAgICAgcjogTWF0aC5zcXJ0KChwdDFbMF0gLSBwdDJbMF0pICogKHB0MVswXSAtIHB0MlswXSkgKyAocHQxWzFdIC0gcHQyWzFdKSAqIChwdDFbMV0gLSBwdDJbMV0pKVxuICAgICAgfV0sIGZ1bmN0aW9uIChwb2ludCwgaW5kZXgpIHtcbiAgICAgICAgaWYgKGFycm93c1tpbmRleF0gIT09ICdub25lJyAmJiBhcnJvd3NbaW5kZXhdICE9IG51bGwpIHtcbiAgICAgICAgICB2YXIgc3ltYm9sID0gY3JlYXRlU3ltYm9sKGFycm93c1tpbmRleF0sIC1zeW1ib2xXaWR0aF8xIC8gMiwgLXN5bWJvbEhlaWdodF8xIC8gMiwgc3ltYm9sV2lkdGhfMSwgc3ltYm9sSGVpZ2h0XzEsIGxpbmVTdHlsZS5zdHJva2UsIHRydWUpOyAvLyBDYWxjdWxhdGUgYXJyb3cgcG9zaXRpb24gd2l0aCBvZmZzZXRcblxuICAgICAgICAgIHZhciByID0gcG9pbnQuciArIHBvaW50Lm9mZnNldDtcbiAgICAgICAgICB2YXIgcHQgPSBpbnZlcnNlID8gcHQyIDogcHQxO1xuICAgICAgICAgIHN5bWJvbC5hdHRyKHtcbiAgICAgICAgICAgIHJvdGF0aW9uOiBwb2ludC5yb3RhdGUsXG4gICAgICAgICAgICB4OiBwdFswXSArIHIgKiBNYXRoLmNvcyhvcHQucm90YXRpb24pLFxuICAgICAgICAgICAgeTogcHRbMV0gLSByICogTWF0aC5zaW4ob3B0LnJvdGF0aW9uKSxcbiAgICAgICAgICAgIHNpbGVudDogdHJ1ZSxcbiAgICAgICAgICAgIHoyOiAxMVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGdyb3VwLmFkZChzeW1ib2wpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIGF4aXNUaWNrTGFiZWw6IGZ1bmN0aW9uIChvcHQsIGF4aXNNb2RlbCwgZ3JvdXAsIHRyYW5zZm9ybUdyb3VwKSB7XG4gICAgdmFyIHRpY2tzRWxzID0gYnVpbGRBeGlzTWFqb3JUaWNrcyhncm91cCwgdHJhbnNmb3JtR3JvdXAsIGF4aXNNb2RlbCwgb3B0KTtcbiAgICB2YXIgbGFiZWxFbHMgPSBidWlsZEF4aXNMYWJlbChncm91cCwgdHJhbnNmb3JtR3JvdXAsIGF4aXNNb2RlbCwgb3B0KTtcbiAgICBmaXhNaW5NYXhMYWJlbFNob3coYXhpc01vZGVsLCBsYWJlbEVscywgdGlja3NFbHMpO1xuICAgIGJ1aWxkQXhpc01pbm9yVGlja3MoZ3JvdXAsIHRyYW5zZm9ybUdyb3VwLCBheGlzTW9kZWwsIG9wdC50aWNrRGlyZWN0aW9uKTsgLy8gVGhpcyBiaXQgZml4ZXMgdGhlIGxhYmVsIG92ZXJsYXAgaXNzdWUgZm9yIHRoZSB0aW1lIGNoYXJ0LlxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYXBhY2hlL2VjaGFydHMvaXNzdWVzLzE0MjY2IGZvciBtb3JlLlxuXG4gICAgaWYgKGF4aXNNb2RlbC5nZXQoWydheGlzTGFiZWwnLCAnaGlkZU92ZXJsYXAnXSkpIHtcbiAgICAgIHZhciBsYWJlbExpc3QgPSBwcmVwYXJlTGF5b3V0TGlzdChtYXAobGFiZWxFbHMsIGZ1bmN0aW9uIChsYWJlbCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgICBwcmlvcml0eTogbGFiZWwuejIsXG4gICAgICAgICAgZGVmYXVsdEF0dHI6IHtcbiAgICAgICAgICAgIGlnbm9yZTogbGFiZWwuaWdub3JlXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSkpO1xuICAgICAgaGlkZU92ZXJsYXAobGFiZWxMaXN0KTtcbiAgICB9XG4gIH0sXG4gIGF4aXNOYW1lOiBmdW5jdGlvbiAob3B0LCBheGlzTW9kZWwsIGdyb3VwLCB0cmFuc2Zvcm1Hcm91cCkge1xuICAgIHZhciBuYW1lID0gcmV0cmlldmUob3B0LmF4aXNOYW1lLCBheGlzTW9kZWwuZ2V0KCduYW1lJykpO1xuXG4gICAgaWYgKCFuYW1lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG5hbWVMb2NhdGlvbiA9IGF4aXNNb2RlbC5nZXQoJ25hbWVMb2NhdGlvbicpO1xuICAgIHZhciBuYW1lRGlyZWN0aW9uID0gb3B0Lm5hbWVEaXJlY3Rpb247XG4gICAgdmFyIHRleHRTdHlsZU1vZGVsID0gYXhpc01vZGVsLmdldE1vZGVsKCduYW1lVGV4dFN0eWxlJyk7XG4gICAgdmFyIGdhcCA9IGF4aXNNb2RlbC5nZXQoJ25hbWVHYXAnKSB8fCAwO1xuICAgIHZhciBleHRlbnQgPSBheGlzTW9kZWwuYXhpcy5nZXRFeHRlbnQoKTtcbiAgICB2YXIgZ2FwU2lnbmFsID0gZXh0ZW50WzBdID4gZXh0ZW50WzFdID8gLTEgOiAxO1xuICAgIHZhciBwb3MgPSBbbmFtZUxvY2F0aW9uID09PSAnc3RhcnQnID8gZXh0ZW50WzBdIC0gZ2FwU2lnbmFsICogZ2FwIDogbmFtZUxvY2F0aW9uID09PSAnZW5kJyA/IGV4dGVudFsxXSArIGdhcFNpZ25hbCAqIGdhcCA6IChleHRlbnRbMF0gKyBleHRlbnRbMV0pIC8gMiwgLy8gUmV1c2UgbGFiZWxPZmZzZXQuXG4gICAgaXNOYW1lTG9jYXRpb25DZW50ZXIobmFtZUxvY2F0aW9uKSA/IG9wdC5sYWJlbE9mZnNldCArIG5hbWVEaXJlY3Rpb24gKiBnYXAgOiAwXTtcbiAgICB2YXIgbGFiZWxMYXlvdXQ7XG4gICAgdmFyIG5hbWVSb3RhdGlvbiA9IGF4aXNNb2RlbC5nZXQoJ25hbWVSb3RhdGUnKTtcblxuICAgIGlmIChuYW1lUm90YXRpb24gIT0gbnVsbCkge1xuICAgICAgbmFtZVJvdGF0aW9uID0gbmFtZVJvdGF0aW9uICogUEkgLyAxODA7IC8vIFRvIHJhZGlhbi5cbiAgICB9XG5cbiAgICB2YXIgYXhpc05hbWVBdmFpbGFibGVXaWR0aDtcblxuICAgIGlmIChpc05hbWVMb2NhdGlvbkNlbnRlcihuYW1lTG9jYXRpb24pKSB7XG4gICAgICBsYWJlbExheW91dCA9IEF4aXNCdWlsZGVyLmlubmVyVGV4dExheW91dChvcHQucm90YXRpb24sIG5hbWVSb3RhdGlvbiAhPSBudWxsID8gbmFtZVJvdGF0aW9uIDogb3B0LnJvdGF0aW9uLCAvLyBBZGFwdCB0byBheGlzLlxuICAgICAgbmFtZURpcmVjdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxhYmVsTGF5b3V0ID0gZW5kVGV4dExheW91dChvcHQucm90YXRpb24sIG5hbWVMb2NhdGlvbiwgbmFtZVJvdGF0aW9uIHx8IDAsIGV4dGVudCk7XG4gICAgICBheGlzTmFtZUF2YWlsYWJsZVdpZHRoID0gb3B0LmF4aXNOYW1lQXZhaWxhYmxlV2lkdGg7XG5cbiAgICAgIGlmIChheGlzTmFtZUF2YWlsYWJsZVdpZHRoICE9IG51bGwpIHtcbiAgICAgICAgYXhpc05hbWVBdmFpbGFibGVXaWR0aCA9IE1hdGguYWJzKGF4aXNOYW1lQXZhaWxhYmxlV2lkdGggLyBNYXRoLnNpbihsYWJlbExheW91dC5yb3RhdGlvbikpO1xuICAgICAgICAhaXNGaW5pdGUoYXhpc05hbWVBdmFpbGFibGVXaWR0aCkgJiYgKGF4aXNOYW1lQXZhaWxhYmxlV2lkdGggPSBudWxsKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgdGV4dEZvbnQgPSB0ZXh0U3R5bGVNb2RlbC5nZXRGb250KCk7XG4gICAgdmFyIHRydW5jYXRlT3B0ID0gYXhpc01vZGVsLmdldCgnbmFtZVRydW5jYXRlJywgdHJ1ZSkgfHwge307XG4gICAgdmFyIGVsbGlwc2lzID0gdHJ1bmNhdGVPcHQuZWxsaXBzaXM7XG4gICAgdmFyIG1heFdpZHRoID0gcmV0cmlldmUob3B0Lm5hbWVUcnVuY2F0ZU1heFdpZHRoLCB0cnVuY2F0ZU9wdC5tYXhXaWR0aCwgYXhpc05hbWVBdmFpbGFibGVXaWR0aCk7XG4gICAgdmFyIHRleHRFbCA9IG5ldyBncmFwaGljLlRleHQoe1xuICAgICAgeDogcG9zWzBdLFxuICAgICAgeTogcG9zWzFdLFxuICAgICAgcm90YXRpb246IGxhYmVsTGF5b3V0LnJvdGF0aW9uLFxuICAgICAgc2lsZW50OiBBeGlzQnVpbGRlci5pc0xhYmVsU2lsZW50KGF4aXNNb2RlbCksXG4gICAgICBzdHlsZTogY3JlYXRlVGV4dFN0eWxlKHRleHRTdHlsZU1vZGVsLCB7XG4gICAgICAgIHRleHQ6IG5hbWUsXG4gICAgICAgIGZvbnQ6IHRleHRGb250LFxuICAgICAgICBvdmVyZmxvdzogJ3RydW5jYXRlJyxcbiAgICAgICAgd2lkdGg6IG1heFdpZHRoLFxuICAgICAgICBlbGxpcHNpczogZWxsaXBzaXMsXG4gICAgICAgIGZpbGw6IHRleHRTdHlsZU1vZGVsLmdldFRleHRDb2xvcigpIHx8IGF4aXNNb2RlbC5nZXQoWydheGlzTGluZScsICdsaW5lU3R5bGUnLCAnY29sb3InXSksXG4gICAgICAgIGFsaWduOiB0ZXh0U3R5bGVNb2RlbC5nZXQoJ2FsaWduJykgfHwgbGFiZWxMYXlvdXQudGV4dEFsaWduLFxuICAgICAgICB2ZXJ0aWNhbEFsaWduOiB0ZXh0U3R5bGVNb2RlbC5nZXQoJ3ZlcnRpY2FsQWxpZ24nKSB8fCBsYWJlbExheW91dC50ZXh0VmVydGljYWxBbGlnblxuICAgICAgfSksXG4gICAgICB6MjogMVxuICAgIH0pO1xuICAgIGdyYXBoaWMuc2V0VG9vbHRpcENvbmZpZyh7XG4gICAgICBlbDogdGV4dEVsLFxuICAgICAgY29tcG9uZW50TW9kZWw6IGF4aXNNb2RlbCxcbiAgICAgIGl0ZW1OYW1lOiBuYW1lXG4gICAgfSk7XG4gICAgdGV4dEVsLl9fZnVsbFRleHQgPSBuYW1lOyAvLyBJZCBmb3IgYW5pbWF0aW9uXG5cbiAgICB0ZXh0RWwuYW5pZCA9ICduYW1lJztcblxuICAgIGlmIChheGlzTW9kZWwuZ2V0KCd0cmlnZ2VyRXZlbnQnKSkge1xuICAgICAgdmFyIGV2ZW50RGF0YSA9IEF4aXNCdWlsZGVyLm1ha2VBeGlzRXZlbnREYXRhQmFzZShheGlzTW9kZWwpO1xuICAgICAgZXZlbnREYXRhLnRhcmdldFR5cGUgPSAnYXhpc05hbWUnO1xuICAgICAgZXZlbnREYXRhLm5hbWUgPSBuYW1lO1xuICAgICAgZ2V0RUNEYXRhKHRleHRFbCkuZXZlbnREYXRhID0gZXZlbnREYXRhO1xuICAgIH0gLy8gRklYTUVcblxuXG4gICAgdHJhbnNmb3JtR3JvdXAuYWRkKHRleHRFbCk7XG4gICAgdGV4dEVsLnVwZGF0ZVRyYW5zZm9ybSgpO1xuICAgIGdyb3VwLmFkZCh0ZXh0RWwpO1xuICAgIHRleHRFbC5kZWNvbXBvc2VUcmFuc2Zvcm0oKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gZW5kVGV4dExheW91dChyb3RhdGlvbiwgdGV4dFBvc2l0aW9uLCB0ZXh0Um90YXRlLCBleHRlbnQpIHtcbiAgdmFyIHJvdGF0aW9uRGlmZiA9IHJlbVJhZGlhbih0ZXh0Um90YXRlIC0gcm90YXRpb24pO1xuICB2YXIgdGV4dEFsaWduO1xuICB2YXIgdGV4dFZlcnRpY2FsQWxpZ247XG4gIHZhciBpbnZlcnNlID0gZXh0ZW50WzBdID4gZXh0ZW50WzFdO1xuICB2YXIgb25MZWZ0ID0gdGV4dFBvc2l0aW9uID09PSAnc3RhcnQnICYmICFpbnZlcnNlIHx8IHRleHRQb3NpdGlvbiAhPT0gJ3N0YXJ0JyAmJiBpbnZlcnNlO1xuXG4gIGlmIChpc1JhZGlhbkFyb3VuZFplcm8ocm90YXRpb25EaWZmIC0gUEkgLyAyKSkge1xuICAgIHRleHRWZXJ0aWNhbEFsaWduID0gb25MZWZ0ID8gJ2JvdHRvbScgOiAndG9wJztcbiAgICB0ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgfSBlbHNlIGlmIChpc1JhZGlhbkFyb3VuZFplcm8ocm90YXRpb25EaWZmIC0gUEkgKiAxLjUpKSB7XG4gICAgdGV4dFZlcnRpY2FsQWxpZ24gPSBvbkxlZnQgPyAndG9wJyA6ICdib3R0b20nO1xuICAgIHRleHRBbGlnbiA9ICdjZW50ZXInO1xuICB9IGVsc2Uge1xuICAgIHRleHRWZXJ0aWNhbEFsaWduID0gJ21pZGRsZSc7XG5cbiAgICBpZiAocm90YXRpb25EaWZmIDwgUEkgKiAxLjUgJiYgcm90YXRpb25EaWZmID4gUEkgLyAyKSB7XG4gICAgICB0ZXh0QWxpZ24gPSBvbkxlZnQgPyAnbGVmdCcgOiAncmlnaHQnO1xuICAgIH0gZWxzZSB7XG4gICAgICB0ZXh0QWxpZ24gPSBvbkxlZnQgPyAncmlnaHQnIDogJ2xlZnQnO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcm90YXRpb246IHJvdGF0aW9uRGlmZixcbiAgICB0ZXh0QWxpZ246IHRleHRBbGlnbixcbiAgICB0ZXh0VmVydGljYWxBbGlnbjogdGV4dFZlcnRpY2FsQWxpZ25cbiAgfTtcbn1cblxuZnVuY3Rpb24gZml4TWluTWF4TGFiZWxTaG93KGF4aXNNb2RlbCwgbGFiZWxFbHMsIHRpY2tFbHMpIHtcbiAgaWYgKHNob3VsZFNob3dBbGxMYWJlbHMoYXhpc01vZGVsLmF4aXMpKSB7XG4gICAgcmV0dXJuO1xuICB9IC8vIElmIG1pbiBvciBtYXggYXJlIHVzZXIgc2V0LCB3ZSBuZWVkIHRvIGNoZWNrXG4gIC8vIElmIHRoZSB0aWNrIG9uIG1pbihtYXgpIGFyZSBvdmVybGFwIG9uIHRoZWlyIG5laWdoYm91ciB0aWNrXG4gIC8vIElmIHRoZXkgYXJlIG92ZXJsYXBwZWQsIHdlIG5lZWQgdG8gaGlkZSB0aGUgbWluKG1heCkgdGljayBsYWJlbFxuXG5cbiAgdmFyIHNob3dNaW5MYWJlbCA9IGF4aXNNb2RlbC5nZXQoWydheGlzTGFiZWwnLCAnc2hvd01pbkxhYmVsJ10pO1xuICB2YXIgc2hvd01heExhYmVsID0gYXhpc01vZGVsLmdldChbJ2F4aXNMYWJlbCcsICdzaG93TWF4TGFiZWwnXSk7IC8vIEZJWE1FXG4gIC8vIEhhdmUgbm90IGNvbnNpZGVyIG9uQmFuZCB5ZXQsIHdoZXJlIHRpY2sgZWxzIGlzIG1vcmUgdGhhbiBsYWJlbCBlbHMuXG5cbiAgbGFiZWxFbHMgPSBsYWJlbEVscyB8fCBbXTtcbiAgdGlja0VscyA9IHRpY2tFbHMgfHwgW107XG4gIHZhciBmaXJzdExhYmVsID0gbGFiZWxFbHNbMF07XG4gIHZhciBuZXh0TGFiZWwgPSBsYWJlbEVsc1sxXTtcbiAgdmFyIGxhc3RMYWJlbCA9IGxhYmVsRWxzW2xhYmVsRWxzLmxlbmd0aCAtIDFdO1xuICB2YXIgcHJldkxhYmVsID0gbGFiZWxFbHNbbGFiZWxFbHMubGVuZ3RoIC0gMl07XG4gIHZhciBmaXJzdFRpY2sgPSB0aWNrRWxzWzBdO1xuICB2YXIgbmV4dFRpY2sgPSB0aWNrRWxzWzFdO1xuICB2YXIgbGFzdFRpY2sgPSB0aWNrRWxzW3RpY2tFbHMubGVuZ3RoIC0gMV07XG4gIHZhciBwcmV2VGljayA9IHRpY2tFbHNbdGlja0Vscy5sZW5ndGggLSAyXTtcblxuICBpZiAoc2hvd01pbkxhYmVsID09PSBmYWxzZSkge1xuICAgIGlnbm9yZUVsKGZpcnN0TGFiZWwpO1xuICAgIGlnbm9yZUVsKGZpcnN0VGljayk7XG4gIH0gZWxzZSBpZiAoaXNUd29MYWJlbE92ZXJsYXBwZWQoZmlyc3RMYWJlbCwgbmV4dExhYmVsKSkge1xuICAgIGlmIChzaG93TWluTGFiZWwpIHtcbiAgICAgIGlnbm9yZUVsKG5leHRMYWJlbCk7XG4gICAgICBpZ25vcmVFbChuZXh0VGljayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlnbm9yZUVsKGZpcnN0TGFiZWwpO1xuICAgICAgaWdub3JlRWwoZmlyc3RUaWNrKTtcbiAgICB9XG4gIH1cblxuICBpZiAoc2hvd01heExhYmVsID09PSBmYWxzZSkge1xuICAgIGlnbm9yZUVsKGxhc3RMYWJlbCk7XG4gICAgaWdub3JlRWwobGFzdFRpY2spO1xuICB9IGVsc2UgaWYgKGlzVHdvTGFiZWxPdmVybGFwcGVkKHByZXZMYWJlbCwgbGFzdExhYmVsKSkge1xuICAgIGlmIChzaG93TWF4TGFiZWwpIHtcbiAgICAgIGlnbm9yZUVsKHByZXZMYWJlbCk7XG4gICAgICBpZ25vcmVFbChwcmV2VGljayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlnbm9yZUVsKGxhc3RMYWJlbCk7XG4gICAgICBpZ25vcmVFbChsYXN0VGljayk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGlnbm9yZUVsKGVsKSB7XG4gIGVsICYmIChlbC5pZ25vcmUgPSB0cnVlKTtcbn1cblxuZnVuY3Rpb24gaXNUd29MYWJlbE92ZXJsYXBwZWQoY3VycmVudCwgbmV4dCkge1xuICAvLyBjdXJyZW50IGFuZCBuZXh0IGhhcyB0aGUgc2FtZSByb3RhdGlvbi5cbiAgdmFyIGZpcnN0UmVjdCA9IGN1cnJlbnQgJiYgY3VycmVudC5nZXRCb3VuZGluZ1JlY3QoKS5jbG9uZSgpO1xuICB2YXIgbmV4dFJlY3QgPSBuZXh0ICYmIG5leHQuZ2V0Qm91bmRpbmdSZWN0KCkuY2xvbmUoKTtcblxuICBpZiAoIWZpcnN0UmVjdCB8fCAhbmV4dFJlY3QpIHtcbiAgICByZXR1cm47XG4gIH0gLy8gV2hlbiBjaGVja2luZyBpbnRlcnNlY3Qgb2YgdHdvIHJvdGF0ZWQgbGFiZWxzLCB3ZSB1c2UgbVJvdGF0aW9uQmFja1xuICAvLyB0byBhdm9pZCB0aGF0IGJvdW5kaW5nUmVjdCBpcyBlbmxhcmdlIHdoZW4gdXNpbmcgYGJvdW5kaW5nUmVjdC5hcHBseVRyYW5zZm9ybWAuXG5cblxuICB2YXIgbVJvdGF0aW9uQmFjayA9IG1hdHJpeFV0aWwuaWRlbnRpdHkoW10pO1xuICBtYXRyaXhVdGlsLnJvdGF0ZShtUm90YXRpb25CYWNrLCBtUm90YXRpb25CYWNrLCAtY3VycmVudC5yb3RhdGlvbik7XG4gIGZpcnN0UmVjdC5hcHBseVRyYW5zZm9ybShtYXRyaXhVdGlsLm11bChbXSwgbVJvdGF0aW9uQmFjaywgY3VycmVudC5nZXRMb2NhbFRyYW5zZm9ybSgpKSk7XG4gIG5leHRSZWN0LmFwcGx5VHJhbnNmb3JtKG1hdHJpeFV0aWwubXVsKFtdLCBtUm90YXRpb25CYWNrLCBuZXh0LmdldExvY2FsVHJhbnNmb3JtKCkpKTtcbiAgcmV0dXJuIGZpcnN0UmVjdC5pbnRlcnNlY3QobmV4dFJlY3QpO1xufVxuXG5mdW5jdGlvbiBpc05hbWVMb2NhdGlvbkNlbnRlcihuYW1lTG9jYXRpb24pIHtcbiAgcmV0dXJuIG5hbWVMb2NhdGlvbiA9PT0gJ21pZGRsZScgfHwgbmFtZUxvY2F0aW9uID09PSAnY2VudGVyJztcbn1cblxuZnVuY3Rpb24gY3JlYXRlVGlja3ModGlja3NDb29yZHMsIHRpY2tUcmFuc2Zvcm0sIHRpY2tFbmRDb29yZCwgdGlja0xpbmVTdHlsZSwgYW5pZFByZWZpeCkge1xuICB2YXIgdGlja0VscyA9IFtdO1xuICB2YXIgcHQxID0gW107XG4gIHZhciBwdDIgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRpY2tzQ29vcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHRpY2tDb29yZCA9IHRpY2tzQ29vcmRzW2ldLmNvb3JkO1xuICAgIHB0MVswXSA9IHRpY2tDb29yZDtcbiAgICBwdDFbMV0gPSAwO1xuICAgIHB0MlswXSA9IHRpY2tDb29yZDtcbiAgICBwdDJbMV0gPSB0aWNrRW5kQ29vcmQ7XG5cbiAgICBpZiAodGlja1RyYW5zZm9ybSkge1xuICAgICAgdjJBcHBseVRyYW5zZm9ybShwdDEsIHB0MSwgdGlja1RyYW5zZm9ybSk7XG4gICAgICB2MkFwcGx5VHJhbnNmb3JtKHB0MiwgcHQyLCB0aWNrVHJhbnNmb3JtKTtcbiAgICB9IC8vIFRpY2sgbGluZSwgTm90IHVzZSBncm91cCB0cmFuc2Zvcm0gdG8gaGF2ZSBiZXR0ZXIgbGluZSBkcmF3XG5cblxuICAgIHZhciB0aWNrRWwgPSBuZXcgZ3JhcGhpYy5MaW5lKHtcbiAgICAgIHNoYXBlOiB7XG4gICAgICAgIHgxOiBwdDFbMF0sXG4gICAgICAgIHkxOiBwdDFbMV0sXG4gICAgICAgIHgyOiBwdDJbMF0sXG4gICAgICAgIHkyOiBwdDJbMV1cbiAgICAgIH0sXG4gICAgICBzdHlsZTogdGlja0xpbmVTdHlsZSxcbiAgICAgIHoyOiAyLFxuICAgICAgYXV0b0JhdGNoOiB0cnVlLFxuICAgICAgc2lsZW50OiB0cnVlXG4gICAgfSk7XG4gICAgZ3JhcGhpYy5zdWJQaXhlbE9wdGltaXplTGluZSh0aWNrRWwuc2hhcGUsIHRpY2tFbC5zdHlsZS5saW5lV2lkdGgpO1xuICAgIHRpY2tFbC5hbmlkID0gYW5pZFByZWZpeCArICdfJyArIHRpY2tzQ29vcmRzW2ldLnRpY2tWYWx1ZTtcbiAgICB0aWNrRWxzLnB1c2godGlja0VsKTtcbiAgfVxuXG4gIHJldHVybiB0aWNrRWxzO1xufVxuXG5mdW5jdGlvbiBidWlsZEF4aXNNYWpvclRpY2tzKGdyb3VwLCB0cmFuc2Zvcm1Hcm91cCwgYXhpc01vZGVsLCBvcHQpIHtcbiAgdmFyIGF4aXMgPSBheGlzTW9kZWwuYXhpcztcbiAgdmFyIHRpY2tNb2RlbCA9IGF4aXNNb2RlbC5nZXRNb2RlbCgnYXhpc1RpY2snKTtcbiAgdmFyIHNob3duID0gdGlja01vZGVsLmdldCgnc2hvdycpO1xuXG4gIGlmIChzaG93biA9PT0gJ2F1dG8nICYmIG9wdC5oYW5kbGVBdXRvU2hvd24pIHtcbiAgICBzaG93biA9IG9wdC5oYW5kbGVBdXRvU2hvd24oJ2F4aXNUaWNrJyk7XG4gIH1cblxuICBpZiAoIXNob3duIHx8IGF4aXMuc2NhbGUuaXNCbGFuaygpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGxpbmVTdHlsZU1vZGVsID0gdGlja01vZGVsLmdldE1vZGVsKCdsaW5lU3R5bGUnKTtcbiAgdmFyIHRpY2tFbmRDb29yZCA9IG9wdC50aWNrRGlyZWN0aW9uICogdGlja01vZGVsLmdldCgnbGVuZ3RoJyk7XG4gIHZhciB0aWNrc0Nvb3JkcyA9IGF4aXMuZ2V0VGlja3NDb29yZHMoKTtcbiAgdmFyIHRpY2tzRWxzID0gY3JlYXRlVGlja3ModGlja3NDb29yZHMsIHRyYW5zZm9ybUdyb3VwLnRyYW5zZm9ybSwgdGlja0VuZENvb3JkLCBkZWZhdWx0cyhsaW5lU3R5bGVNb2RlbC5nZXRMaW5lU3R5bGUoKSwge1xuICAgIHN0cm9rZTogYXhpc01vZGVsLmdldChbJ2F4aXNMaW5lJywgJ2xpbmVTdHlsZScsICdjb2xvciddKVxuICB9KSwgJ3RpY2tzJyk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aWNrc0Vscy5sZW5ndGg7IGkrKykge1xuICAgIGdyb3VwLmFkZCh0aWNrc0Vsc1tpXSk7XG4gIH1cblxuICByZXR1cm4gdGlja3NFbHM7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkQXhpc01pbm9yVGlja3MoZ3JvdXAsIHRyYW5zZm9ybUdyb3VwLCBheGlzTW9kZWwsIHRpY2tEaXJlY3Rpb24pIHtcbiAgdmFyIGF4aXMgPSBheGlzTW9kZWwuYXhpcztcbiAgdmFyIG1pbm9yVGlja01vZGVsID0gYXhpc01vZGVsLmdldE1vZGVsKCdtaW5vclRpY2snKTtcblxuICBpZiAoIW1pbm9yVGlja01vZGVsLmdldCgnc2hvdycpIHx8IGF4aXMuc2NhbGUuaXNCbGFuaygpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIG1pbm9yVGlja3NDb29yZHMgPSBheGlzLmdldE1pbm9yVGlja3NDb29yZHMoKTtcblxuICBpZiAoIW1pbm9yVGlja3NDb29yZHMubGVuZ3RoKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGxpbmVTdHlsZU1vZGVsID0gbWlub3JUaWNrTW9kZWwuZ2V0TW9kZWwoJ2xpbmVTdHlsZScpO1xuICB2YXIgdGlja0VuZENvb3JkID0gdGlja0RpcmVjdGlvbiAqIG1pbm9yVGlja01vZGVsLmdldCgnbGVuZ3RoJyk7XG4gIHZhciBtaW5vclRpY2tMaW5lU3R5bGUgPSBkZWZhdWx0cyhsaW5lU3R5bGVNb2RlbC5nZXRMaW5lU3R5bGUoKSwgZGVmYXVsdHMoYXhpc01vZGVsLmdldE1vZGVsKCdheGlzVGljaycpLmdldExpbmVTdHlsZSgpLCB7XG4gICAgc3Ryb2tlOiBheGlzTW9kZWwuZ2V0KFsnYXhpc0xpbmUnLCAnbGluZVN0eWxlJywgJ2NvbG9yJ10pXG4gIH0pKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IG1pbm9yVGlja3NDb29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgbWlub3JUaWNrc0VscyA9IGNyZWF0ZVRpY2tzKG1pbm9yVGlja3NDb29yZHNbaV0sIHRyYW5zZm9ybUdyb3VwLnRyYW5zZm9ybSwgdGlja0VuZENvb3JkLCBtaW5vclRpY2tMaW5lU3R5bGUsICdtaW5vcnRpY2tzXycgKyBpKTtcblxuICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbWlub3JUaWNrc0Vscy5sZW5ndGg7IGsrKykge1xuICAgICAgZ3JvdXAuYWRkKG1pbm9yVGlja3NFbHNba10pO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBidWlsZEF4aXNMYWJlbChncm91cCwgdHJhbnNmb3JtR3JvdXAsIGF4aXNNb2RlbCwgb3B0KSB7XG4gIHZhciBheGlzID0gYXhpc01vZGVsLmF4aXM7XG4gIHZhciBzaG93ID0gcmV0cmlldmUob3B0LmF4aXNMYWJlbFNob3csIGF4aXNNb2RlbC5nZXQoWydheGlzTGFiZWwnLCAnc2hvdyddKSk7XG5cbiAgaWYgKCFzaG93IHx8IGF4aXMuc2NhbGUuaXNCbGFuaygpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGxhYmVsTW9kZWwgPSBheGlzTW9kZWwuZ2V0TW9kZWwoJ2F4aXNMYWJlbCcpO1xuICB2YXIgbGFiZWxNYXJnaW4gPSBsYWJlbE1vZGVsLmdldCgnbWFyZ2luJyk7XG4gIHZhciBsYWJlbHMgPSBheGlzLmdldFZpZXdMYWJlbHMoKTsgLy8gU3BlY2lhbCBsYWJlbCByb3RhdGUuXG5cbiAgdmFyIGxhYmVsUm90YXRpb24gPSAocmV0cmlldmUob3B0LmxhYmVsUm90YXRlLCBsYWJlbE1vZGVsLmdldCgncm90YXRlJykpIHx8IDApICogUEkgLyAxODA7XG4gIHZhciBsYWJlbExheW91dCA9IEF4aXNCdWlsZGVyLmlubmVyVGV4dExheW91dChvcHQucm90YXRpb24sIGxhYmVsUm90YXRpb24sIG9wdC5sYWJlbERpcmVjdGlvbik7XG4gIHZhciByYXdDYXRlZ29yeURhdGEgPSBheGlzTW9kZWwuZ2V0Q2F0ZWdvcmllcyAmJiBheGlzTW9kZWwuZ2V0Q2F0ZWdvcmllcyh0cnVlKTtcbiAgdmFyIGxhYmVsRWxzID0gW107XG4gIHZhciBzaWxlbnQgPSBBeGlzQnVpbGRlci5pc0xhYmVsU2lsZW50KGF4aXNNb2RlbCk7XG4gIHZhciB0cmlnZ2VyRXZlbnQgPSBheGlzTW9kZWwuZ2V0KCd0cmlnZ2VyRXZlbnQnKTtcbiAgZWFjaChsYWJlbHMsIGZ1bmN0aW9uIChsYWJlbEl0ZW0sIGluZGV4KSB7XG4gICAgdmFyIHRpY2tWYWx1ZSA9IGF4aXMuc2NhbGUudHlwZSA9PT0gJ29yZGluYWwnID8gYXhpcy5zY2FsZS5nZXRSYXdPcmRpbmFsTnVtYmVyKGxhYmVsSXRlbS50aWNrVmFsdWUpIDogbGFiZWxJdGVtLnRpY2tWYWx1ZTtcbiAgICB2YXIgZm9ybWF0dGVkTGFiZWwgPSBsYWJlbEl0ZW0uZm9ybWF0dGVkTGFiZWw7XG4gICAgdmFyIHJhd0xhYmVsID0gbGFiZWxJdGVtLnJhd0xhYmVsO1xuICAgIHZhciBpdGVtTGFiZWxNb2RlbCA9IGxhYmVsTW9kZWw7XG5cbiAgICBpZiAocmF3Q2F0ZWdvcnlEYXRhICYmIHJhd0NhdGVnb3J5RGF0YVt0aWNrVmFsdWVdKSB7XG4gICAgICB2YXIgcmF3Q2F0ZWdvcnlJdGVtID0gcmF3Q2F0ZWdvcnlEYXRhW3RpY2tWYWx1ZV07XG5cbiAgICAgIGlmIChpc09iamVjdChyYXdDYXRlZ29yeUl0ZW0pICYmIHJhd0NhdGVnb3J5SXRlbS50ZXh0U3R5bGUpIHtcbiAgICAgICAgaXRlbUxhYmVsTW9kZWwgPSBuZXcgTW9kZWwocmF3Q2F0ZWdvcnlJdGVtLnRleHRTdHlsZSwgbGFiZWxNb2RlbCwgYXhpc01vZGVsLmVjTW9kZWwpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciB0ZXh0Q29sb3IgPSBpdGVtTGFiZWxNb2RlbC5nZXRUZXh0Q29sb3IoKSB8fCBheGlzTW9kZWwuZ2V0KFsnYXhpc0xpbmUnLCAnbGluZVN0eWxlJywgJ2NvbG9yJ10pO1xuICAgIHZhciB0aWNrQ29vcmQgPSBheGlzLmRhdGFUb0Nvb3JkKHRpY2tWYWx1ZSk7XG4gICAgdmFyIHRleHRFbCA9IG5ldyBncmFwaGljLlRleHQoe1xuICAgICAgeDogdGlja0Nvb3JkLFxuICAgICAgeTogb3B0LmxhYmVsT2Zmc2V0ICsgb3B0LmxhYmVsRGlyZWN0aW9uICogbGFiZWxNYXJnaW4sXG4gICAgICByb3RhdGlvbjogbGFiZWxMYXlvdXQucm90YXRpb24sXG4gICAgICBzaWxlbnQ6IHNpbGVudCxcbiAgICAgIHoyOiAxMCArIChsYWJlbEl0ZW0ubGV2ZWwgfHwgMCksXG4gICAgICBzdHlsZTogY3JlYXRlVGV4dFN0eWxlKGl0ZW1MYWJlbE1vZGVsLCB7XG4gICAgICAgIHRleHQ6IGZvcm1hdHRlZExhYmVsLFxuICAgICAgICBhbGlnbjogaXRlbUxhYmVsTW9kZWwuZ2V0U2hhbGxvdygnYWxpZ24nLCB0cnVlKSB8fCBsYWJlbExheW91dC50ZXh0QWxpZ24sXG4gICAgICAgIHZlcnRpY2FsQWxpZ246IGl0ZW1MYWJlbE1vZGVsLmdldFNoYWxsb3coJ3ZlcnRpY2FsQWxpZ24nLCB0cnVlKSB8fCBpdGVtTGFiZWxNb2RlbC5nZXRTaGFsbG93KCdiYXNlbGluZScsIHRydWUpIHx8IGxhYmVsTGF5b3V0LnRleHRWZXJ0aWNhbEFsaWduLFxuICAgICAgICBmaWxsOiBpc0Z1bmN0aW9uKHRleHRDb2xvcikgPyB0ZXh0Q29sb3IoIC8vICgxKSBJbiBjYXRlZ29yeSBheGlzIHdpdGggZGF0YSB6b29tLCB0aWNrIGlzIG5vdCB0aGUgb3JpZ2luYWxcbiAgICAgICAgLy8gaW5kZXggb2YgYXhpcy5kYXRhLiBTbyB0aWNrIHNob3VsZCBub3QgYmUgZXhwb3NlZCB0byB1c2VyXG4gICAgICAgIC8vIGluIGNhdGVnb3J5IGF4aXMuXG4gICAgICAgIC8vICgyKSBDb21wYXRpYmxlIHdpdGggcHJldmlvdXMgdmVyc2lvbiwgd2hpY2ggYWx3YXlzIHVzZSBmb3JtYXR0ZWQgbGFiZWwgYXNcbiAgICAgICAgLy8gaW5wdXQuIEJ1dCBpbiBpbnRlcnZhbCBzY2FsZSB0aGUgZm9ybWF0dGVkIGxhYmVsIGlzIGxpa2UgJzIyMyw0NDUnLCB3aGljaFxuICAgICAgICAvLyBtYWtlZCB1c2VyIHJlcGxhY2UgJywnLiBTbyB3ZSBtb2RpZnkgaXQgdG8gcmV0dXJuIG9yaWdpbmFsIHZhbCBidXQgcmVtYWluXG4gICAgICAgIC8vIGl0IGFzICdzdHJpbmcnIHRvIGF2b2lkIGVycm9yIGluIHJlcGxhY2luZy5cbiAgICAgICAgYXhpcy50eXBlID09PSAnY2F0ZWdvcnknID8gcmF3TGFiZWwgOiBheGlzLnR5cGUgPT09ICd2YWx1ZScgPyB0aWNrVmFsdWUgKyAnJyA6IHRpY2tWYWx1ZSwgaW5kZXgpIDogdGV4dENvbG9yXG4gICAgICB9KVxuICAgIH0pO1xuICAgIHRleHRFbC5hbmlkID0gJ2xhYmVsXycgKyB0aWNrVmFsdWU7IC8vIFBhY2sgZGF0YSBmb3IgbW91c2UgZXZlbnRcblxuICAgIGlmICh0cmlnZ2VyRXZlbnQpIHtcbiAgICAgIHZhciBldmVudERhdGEgPSBBeGlzQnVpbGRlci5tYWtlQXhpc0V2ZW50RGF0YUJhc2UoYXhpc01vZGVsKTtcbiAgICAgIGV2ZW50RGF0YS50YXJnZXRUeXBlID0gJ2F4aXNMYWJlbCc7XG4gICAgICBldmVudERhdGEudmFsdWUgPSByYXdMYWJlbDtcbiAgICAgIGV2ZW50RGF0YS50aWNrSW5kZXggPSBpbmRleDtcblxuICAgICAgaWYgKGF4aXMudHlwZSA9PT0gJ2NhdGVnb3J5Jykge1xuICAgICAgICBldmVudERhdGEuZGF0YUluZGV4ID0gdGlja1ZhbHVlO1xuICAgICAgfVxuXG4gICAgICBnZXRFQ0RhdGEodGV4dEVsKS5ldmVudERhdGEgPSBldmVudERhdGE7XG4gICAgfSAvLyBGSVhNRVxuXG5cbiAgICB0cmFuc2Zvcm1Hcm91cC5hZGQodGV4dEVsKTtcbiAgICB0ZXh0RWwudXBkYXRlVHJhbnNmb3JtKCk7XG4gICAgbGFiZWxFbHMucHVzaCh0ZXh0RWwpO1xuICAgIGdyb3VwLmFkZCh0ZXh0RWwpO1xuICAgIHRleHRFbC5kZWNvbXBvc2VUcmFuc2Zvcm0oKTtcbiAgfSk7XG4gIHJldHVybiBsYWJlbEVscztcbn1cblxuZXhwb3J0IGRlZmF1bHQgQXhpc0J1aWxkZXI7IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgTW9kZWwgZnJvbSAnLi4vLi4vbW9kZWwvTW9kZWwuanMnO1xuaW1wb3J0IHsgZWFjaCwgY3VycnksIGNsb25lLCBkZWZhdWx0cywgaXNBcnJheSwgaW5kZXhPZiB9IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7IC8vIEJ1aWxkIGF4aXNQb2ludGVyTW9kZWwsIG1lcmdpbiB0b29sdGlwLmF4aXNQb2ludGVyIG1vZGVsIGZvciBlYWNoIGF4aXMuXG4vLyBhbGxBeGVzSW5mbyBzaG91bGQgYmUgdXBkYXRlZCB3aGVuIHNldE9wdGlvbiBwZXJmb3JtZWQuXG5cbmV4cG9ydCBmdW5jdGlvbiBjb2xsZWN0KGVjTW9kZWwsIGFwaSkge1xuICB2YXIgcmVzdWx0ID0ge1xuICAgIC8qKlxyXG4gICAgICoga2V5OiBtYWtlS2V5KGF4aXMubW9kZWwpXHJcbiAgICAgKiB2YWx1ZToge1xyXG4gICAgICogICAgICBheGlzLFxyXG4gICAgICogICAgICBjb29yZFN5cyxcclxuICAgICAqICAgICAgYXhpc1BvaW50ZXJNb2RlbCxcclxuICAgICAqICAgICAgdHJpZ2dlclRvb2x0aXAsXHJcbiAgICAgKiAgICAgIHRyaWdnZXJFbXBoYXNpcyxcclxuICAgICAqICAgICAgaW52b2x2ZVNlcmllcyxcclxuICAgICAqICAgICAgc25hcCxcclxuICAgICAqICAgICAgc2VyaWVzTW9kZWxzLFxyXG4gICAgICogICAgICBzZXJpZXNEYXRhQ291bnRcclxuICAgICAqIH1cclxuICAgICAqL1xuICAgIGF4ZXNJbmZvOiB7fSxcbiAgICBzZXJpZXNJbnZvbHZlZDogZmFsc2UsXG5cbiAgICAvKipcclxuICAgICAqIGtleTogbWFrZUtleShjb29yZFN5cy5tb2RlbClcclxuICAgICAqIHZhbHVlOiBPYmplY3Q6IGtleSBtYWtlS2V5KGF4aXMubW9kZWwpLCB2YWx1ZTogYXhpc0luZm9cclxuICAgICAqL1xuICAgIGNvb3JkU3lzQXhlc0luZm86IHt9LFxuICAgIGNvb3JkU3lzTWFwOiB7fVxuICB9O1xuICBjb2xsZWN0QXhlc0luZm8ocmVzdWx0LCBlY01vZGVsLCBhcGkpOyAvLyBDaGVjayBzZXJpZXNJbnZvbHZlZCBmb3IgcGVyZm9ybWFuY2UsIGluIGNhc2UgdG9vIG1hbnkgc2VyaWVzIGluIHNvbWUgY2hhcnQuXG5cbiAgcmVzdWx0LnNlcmllc0ludm9sdmVkICYmIGNvbGxlY3RTZXJpZXNJbmZvKHJlc3VsdCwgZWNNb2RlbCk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGNvbGxlY3RBeGVzSW5mbyhyZXN1bHQsIGVjTW9kZWwsIGFwaSkge1xuICB2YXIgZ2xvYmFsVG9vbHRpcE1vZGVsID0gZWNNb2RlbC5nZXRDb21wb25lbnQoJ3Rvb2x0aXAnKTtcbiAgdmFyIGdsb2JhbEF4aXNQb2ludGVyTW9kZWwgPSBlY01vZGVsLmdldENvbXBvbmVudCgnYXhpc1BvaW50ZXInKTsgLy8gbGlua3MgY2FuIG9ubHkgYmUgc2V0IG9uIGdsb2JhbC5cblxuICB2YXIgbGlua3NPcHRpb24gPSBnbG9iYWxBeGlzUG9pbnRlck1vZGVsLmdldCgnbGluaycsIHRydWUpIHx8IFtdO1xuICB2YXIgbGlua0dyb3VwcyA9IFtdOyAvLyBDb2xsZWN0IGF4ZXMgaW5mby5cblxuICBlYWNoKGFwaS5nZXRDb29yZGluYXRlU3lzdGVtcygpLCBmdW5jdGlvbiAoY29vcmRTeXMpIHtcbiAgICAvLyBTb21lIGNvb3JkaW5hdGUgc3lzdGVtIGRvIG5vdCBzdXBwb3J0IGF4ZXMsIGxpa2UgZ2VvLlxuICAgIGlmICghY29vcmRTeXMuYXhpc1BvaW50ZXJFbmFibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGNvb3JkU3lzS2V5ID0gbWFrZUtleShjb29yZFN5cy5tb2RlbCk7XG4gICAgdmFyIGF4ZXNJbmZvSW5Db29yZFN5cyA9IHJlc3VsdC5jb29yZFN5c0F4ZXNJbmZvW2Nvb3JkU3lzS2V5XSA9IHt9O1xuICAgIHJlc3VsdC5jb29yZFN5c01hcFtjb29yZFN5c0tleV0gPSBjb29yZFN5czsgLy8gU2V0IHRvb2x0aXAgKGxpa2UgJ2Nyb3NzJykgaXMgYSBjb252ZW5pZW50IHdheSB0byBzaG93IGF4aXNQb2ludGVyXG4gICAgLy8gZm9yIHVzZXIuIFNvIHdlIGVuYWJsZSBzZXR0aW5nIHRvb2x0aXAgb24gY29vcmRTeXMgbW9kZWwuXG5cbiAgICB2YXIgY29vcmRTeXNNb2RlbCA9IGNvb3JkU3lzLm1vZGVsO1xuICAgIHZhciBiYXNlVG9vbHRpcE1vZGVsID0gY29vcmRTeXNNb2RlbC5nZXRNb2RlbCgndG9vbHRpcCcsIGdsb2JhbFRvb2x0aXBNb2RlbCk7XG4gICAgZWFjaChjb29yZFN5cy5nZXRBeGVzKCksIGN1cnJ5KHNhdmVUb29sdGlwQXhpc0luZm8sIGZhbHNlLCBudWxsKSk7IC8vIElmIGF4aXMgdG9vbHRpcCB1c2VkLCBjaG9vc2UgdG9vbHRpcCBheGlzIGZvciBlYWNoIGNvb3JkU3lzLlxuICAgIC8vIE5vdGljZSB0aGlzIGNhc2U6IGNvb3JkU3lzIGlzIGBncmlkYCBidXQgbm90IGBjYXJ0ZXNpYW4yRGAgaGVyZS5cblxuICAgIGlmIChjb29yZFN5cy5nZXRUb29sdGlwQXhlcyAmJiBnbG9iYWxUb29sdGlwTW9kZWwgLy8gSWYgdG9vbHRpcC5zaG93Q29udGVudCBpcyBzZXQgYXMgZmFsc2UsIHRvb2x0aXAgd2lsbCBub3RcbiAgICAvLyBzaG93IGJ1dCBheGlzUG9pbnRlciB3aWxsIHNob3cgYXMgbm9ybWFsLlxuICAgICYmIGJhc2VUb29sdGlwTW9kZWwuZ2V0KCdzaG93JykpIHtcbiAgICAgIC8vIENvbXBhdGlibGUgd2l0aCBwcmV2aW91cyBsb2dpYy4gQnV0IHNlcmllcy50b29sdGlwLnRyaWdnZXI6ICdheGlzJ1xuICAgICAgLy8gb3Igc2VyaWVzLmRhdGFbbl0udG9vbHRpcC50cmlnZ2VyOiAnYXhpcycgYXJlIG5vdCBzdXBwb3J0IGFueSBtb3JlLlxuICAgICAgdmFyIHRyaWdnZXJBeGlzID0gYmFzZVRvb2x0aXBNb2RlbC5nZXQoJ3RyaWdnZXInKSA9PT0gJ2F4aXMnO1xuICAgICAgdmFyIGNyb3NzID0gYmFzZVRvb2x0aXBNb2RlbC5nZXQoWydheGlzUG9pbnRlcicsICd0eXBlJ10pID09PSAnY3Jvc3MnO1xuICAgICAgdmFyIHRvb2x0aXBBeGVzID0gY29vcmRTeXMuZ2V0VG9vbHRpcEF4ZXMoYmFzZVRvb2x0aXBNb2RlbC5nZXQoWydheGlzUG9pbnRlcicsICdheGlzJ10pKTtcblxuICAgICAgaWYgKHRyaWdnZXJBeGlzIHx8IGNyb3NzKSB7XG4gICAgICAgIGVhY2godG9vbHRpcEF4ZXMuYmFzZUF4ZXMsIGN1cnJ5KHNhdmVUb29sdGlwQXhpc0luZm8sIGNyb3NzID8gJ2Nyb3NzJyA6IHRydWUsIHRyaWdnZXJBeGlzKSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjcm9zcykge1xuICAgICAgICBlYWNoKHRvb2x0aXBBeGVzLm90aGVyQXhlcywgY3Vycnkoc2F2ZVRvb2x0aXBBeGlzSW5mbywgJ2Nyb3NzJywgZmFsc2UpKTtcbiAgICAgIH1cbiAgICB9IC8vIGZyb21Ub29sdGlwOiB0cnVlIHwgZmFsc2UgfCAnY3Jvc3MnXG4gICAgLy8gdHJpZ2dlclRvb2x0aXA6IHRydWUgfCBmYWxzZSB8IG51bGxcblxuXG4gICAgZnVuY3Rpb24gc2F2ZVRvb2x0aXBBeGlzSW5mbyhmcm9tVG9vbHRpcCwgdHJpZ2dlclRvb2x0aXAsIGF4aXMpIHtcbiAgICAgIHZhciBheGlzUG9pbnRlck1vZGVsID0gYXhpcy5tb2RlbC5nZXRNb2RlbCgnYXhpc1BvaW50ZXInLCBnbG9iYWxBeGlzUG9pbnRlck1vZGVsKTtcbiAgICAgIHZhciBheGlzUG9pbnRlclNob3cgPSBheGlzUG9pbnRlck1vZGVsLmdldCgnc2hvdycpO1xuXG4gICAgICBpZiAoIWF4aXNQb2ludGVyU2hvdyB8fCBheGlzUG9pbnRlclNob3cgPT09ICdhdXRvJyAmJiAhZnJvbVRvb2x0aXAgJiYgIWlzSGFuZGxlVHJpZ2dlcihheGlzUG9pbnRlck1vZGVsKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0cmlnZ2VyVG9vbHRpcCA9PSBudWxsKSB7XG4gICAgICAgIHRyaWdnZXJUb29sdGlwID0gYXhpc1BvaW50ZXJNb2RlbC5nZXQoJ3RyaWdnZXJUb29sdGlwJyk7XG4gICAgICB9XG5cbiAgICAgIGF4aXNQb2ludGVyTW9kZWwgPSBmcm9tVG9vbHRpcCA/IG1ha2VBeGlzUG9pbnRlck1vZGVsKGF4aXMsIGJhc2VUb29sdGlwTW9kZWwsIGdsb2JhbEF4aXNQb2ludGVyTW9kZWwsIGVjTW9kZWwsIGZyb21Ub29sdGlwLCB0cmlnZ2VyVG9vbHRpcCkgOiBheGlzUG9pbnRlck1vZGVsO1xuICAgICAgdmFyIHNuYXAgPSBheGlzUG9pbnRlck1vZGVsLmdldCgnc25hcCcpO1xuICAgICAgdmFyIHRyaWdnZXJFbXBoYXNpcyA9IGF4aXNQb2ludGVyTW9kZWwuZ2V0KCd0cmlnZ2VyRW1waGFzaXMnKTtcbiAgICAgIHZhciBheGlzS2V5ID0gbWFrZUtleShheGlzLm1vZGVsKTtcbiAgICAgIHZhciBpbnZvbHZlU2VyaWVzID0gdHJpZ2dlclRvb2x0aXAgfHwgc25hcCB8fCBheGlzLnR5cGUgPT09ICdjYXRlZ29yeSc7IC8vIElmIHJlc3VsdC5heGVzSW5mb1trZXldIGV4aXN0LCBvdmVycmlkZSBpdCAodG9vbHRpcCBoYXMgaGlnaGVyIHByaW9yaXR5KS5cblxuICAgICAgdmFyIGF4aXNJbmZvID0gcmVzdWx0LmF4ZXNJbmZvW2F4aXNLZXldID0ge1xuICAgICAgICBrZXk6IGF4aXNLZXksXG4gICAgICAgIGF4aXM6IGF4aXMsXG4gICAgICAgIGNvb3JkU3lzOiBjb29yZFN5cyxcbiAgICAgICAgYXhpc1BvaW50ZXJNb2RlbDogYXhpc1BvaW50ZXJNb2RlbCxcbiAgICAgICAgdHJpZ2dlclRvb2x0aXA6IHRyaWdnZXJUb29sdGlwLFxuICAgICAgICB0cmlnZ2VyRW1waGFzaXM6IHRyaWdnZXJFbXBoYXNpcyxcbiAgICAgICAgaW52b2x2ZVNlcmllczogaW52b2x2ZVNlcmllcyxcbiAgICAgICAgc25hcDogc25hcCxcbiAgICAgICAgdXNlSGFuZGxlOiBpc0hhbmRsZVRyaWdnZXIoYXhpc1BvaW50ZXJNb2RlbCksXG4gICAgICAgIHNlcmllc01vZGVsczogW10sXG4gICAgICAgIGxpbmtHcm91cDogbnVsbFxuICAgICAgfTtcbiAgICAgIGF4ZXNJbmZvSW5Db29yZFN5c1theGlzS2V5XSA9IGF4aXNJbmZvO1xuICAgICAgcmVzdWx0LnNlcmllc0ludm9sdmVkID0gcmVzdWx0LnNlcmllc0ludm9sdmVkIHx8IGludm9sdmVTZXJpZXM7XG4gICAgICB2YXIgZ3JvdXBJbmRleCA9IGdldExpbmtHcm91cEluZGV4KGxpbmtzT3B0aW9uLCBheGlzKTtcblxuICAgICAgaWYgKGdyb3VwSW5kZXggIT0gbnVsbCkge1xuICAgICAgICB2YXIgbGlua0dyb3VwID0gbGlua0dyb3Vwc1tncm91cEluZGV4XSB8fCAobGlua0dyb3Vwc1tncm91cEluZGV4XSA9IHtcbiAgICAgICAgICBheGVzSW5mbzoge31cbiAgICAgICAgfSk7XG4gICAgICAgIGxpbmtHcm91cC5heGVzSW5mb1theGlzS2V5XSA9IGF4aXNJbmZvO1xuICAgICAgICBsaW5rR3JvdXAubWFwcGVyID0gbGlua3NPcHRpb25bZ3JvdXBJbmRleF0ubWFwcGVyO1xuICAgICAgICBheGlzSW5mby5saW5rR3JvdXAgPSBsaW5rR3JvdXA7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gbWFrZUF4aXNQb2ludGVyTW9kZWwoYXhpcywgYmFzZVRvb2x0aXBNb2RlbCwgZ2xvYmFsQXhpc1BvaW50ZXJNb2RlbCwgZWNNb2RlbCwgZnJvbVRvb2x0aXAsIHRyaWdnZXJUb29sdGlwKSB7XG4gIHZhciB0b29sdGlwQXhpc1BvaW50ZXJNb2RlbCA9IGJhc2VUb29sdGlwTW9kZWwuZ2V0TW9kZWwoJ2F4aXNQb2ludGVyJyk7XG4gIHZhciBmaWVsZHMgPSBbJ3R5cGUnLCAnc25hcCcsICdsaW5lU3R5bGUnLCAnc2hhZG93U3R5bGUnLCAnbGFiZWwnLCAnYW5pbWF0aW9uJywgJ2FuaW1hdGlvbkR1cmF0aW9uVXBkYXRlJywgJ2FuaW1hdGlvbkVhc2luZ1VwZGF0ZScsICd6J107XG4gIHZhciB2b2xhdGlsZU9wdGlvbiA9IHt9O1xuICBlYWNoKGZpZWxkcywgZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgdm9sYXRpbGVPcHRpb25bZmllbGRdID0gY2xvbmUodG9vbHRpcEF4aXNQb2ludGVyTW9kZWwuZ2V0KGZpZWxkKSk7XG4gIH0pOyAvLyBjYXRlZ29yeSBheGlzIGRvIG5vdCBhdXRvIHNuYXAsIG90aGVyd2lzZSBzb21lIHRpY2sgdGhhdCBkbyBub3RcbiAgLy8gaGFzIHZhbHVlIGNhbiBub3QgYmUgaG92ZXJlZC4gdmFsdWUvdGltZS9sb2cgYXhpcyBkZWZhdWx0IHNuYXAgaWZcbiAgLy8gdHJpZ2dlcmVkIGZyb20gdG9vbHRpcCBhbmQgdHJpZ2dlciB0b29sdGlwLlxuXG4gIHZvbGF0aWxlT3B0aW9uLnNuYXAgPSBheGlzLnR5cGUgIT09ICdjYXRlZ29yeScgJiYgISF0cmlnZ2VyVG9vbHRpcDsgLy8gQ29tcGF0aWJsZSB3aXRoIHByZXZpb3VzIGJlaGF2aW9yLCB0b29sdGlwIGF4aXMgZG9lcyBub3Qgc2hvdyBsYWJlbCBieSBkZWZhdWx0LlxuICAvLyBPbmx5IHRoZXNlIHByb3BlcnRpZXMgY2FuIGJlIG92ZXJyaWRkZW4gZnJvbSB0b29sdGlwIHRvIGF4aXNQb2ludGVyLlxuXG4gIGlmICh0b29sdGlwQXhpc1BvaW50ZXJNb2RlbC5nZXQoJ3R5cGUnKSA9PT0gJ2Nyb3NzJykge1xuICAgIHZvbGF0aWxlT3B0aW9uLnR5cGUgPSAnbGluZSc7XG4gIH1cblxuICB2YXIgbGFiZWxPcHRpb24gPSB2b2xhdGlsZU9wdGlvbi5sYWJlbCB8fCAodm9sYXRpbGVPcHRpb24ubGFiZWwgPSB7fSk7IC8vIEZvbGxvdyB0aGUgY29udmVudGlvbiwgZG8gbm90IHNob3cgbGFiZWwgd2hlbiB0cmlnZ2VyZWQgYnkgdG9vbHRpcCBieSBkZWZhdWx0LlxuXG4gIGxhYmVsT3B0aW9uLnNob3cgPT0gbnVsbCAmJiAobGFiZWxPcHRpb24uc2hvdyA9IGZhbHNlKTtcblxuICBpZiAoZnJvbVRvb2x0aXAgPT09ICdjcm9zcycpIHtcbiAgICAvLyBXaGVuICdjcm9zcycsIGJvdGggYXhlcyBzaG93IGxhYmVscy5cbiAgICB2YXIgdG9vbHRpcEF4aXNQb2ludGVyTGFiZWxTaG93ID0gdG9vbHRpcEF4aXNQb2ludGVyTW9kZWwuZ2V0KFsnbGFiZWwnLCAnc2hvdyddKTtcbiAgICBsYWJlbE9wdGlvbi5zaG93ID0gdG9vbHRpcEF4aXNQb2ludGVyTGFiZWxTaG93ICE9IG51bGwgPyB0b29sdGlwQXhpc1BvaW50ZXJMYWJlbFNob3cgOiB0cnVlOyAvLyBJZiB0cmlnZ2VyVG9vbHRpcCwgdGhpcyBpcyBhIGJhc2UgYXhpcywgd2hpY2ggc2hvdWxkIGJldHRlciBub3QgdXNlIGNyb3NzIHN0eWxlXG4gICAgLy8gKGNyb3NzIHN0eWxlIGlzIGRhc2hlZCBieSBkZWZhdWx0KVxuXG4gICAgaWYgKCF0cmlnZ2VyVG9vbHRpcCkge1xuICAgICAgdmFyIGNyb3NzU3R5bGUgPSB2b2xhdGlsZU9wdGlvbi5saW5lU3R5bGUgPSB0b29sdGlwQXhpc1BvaW50ZXJNb2RlbC5nZXQoJ2Nyb3NzU3R5bGUnKTtcbiAgICAgIGNyb3NzU3R5bGUgJiYgZGVmYXVsdHMobGFiZWxPcHRpb24sIGNyb3NzU3R5bGUudGV4dFN0eWxlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYXhpcy5tb2RlbC5nZXRNb2RlbCgnYXhpc1BvaW50ZXInLCBuZXcgTW9kZWwodm9sYXRpbGVPcHRpb24sIGdsb2JhbEF4aXNQb2ludGVyTW9kZWwsIGVjTW9kZWwpKTtcbn1cblxuZnVuY3Rpb24gY29sbGVjdFNlcmllc0luZm8ocmVzdWx0LCBlY01vZGVsKSB7XG4gIC8vIFByZXBhcmUgZGF0YSBmb3IgYXhpcyB0cmlnZ2VyXG4gIGVjTW9kZWwuZWFjaFNlcmllcyhmdW5jdGlvbiAoc2VyaWVzTW9kZWwpIHtcbiAgICAvLyBOb3RpY2UgdGhpcyBjYXNlOiB0aGlzIGNvb3JkU3lzIGlzIGBjYXJ0ZXNpYW4yRGAgYnV0IG5vdCBgZ3JpZGAuXG4gICAgdmFyIGNvb3JkU3lzID0gc2VyaWVzTW9kZWwuY29vcmRpbmF0ZVN5c3RlbTtcbiAgICB2YXIgc2VyaWVzVG9vbHRpcFRyaWdnZXIgPSBzZXJpZXNNb2RlbC5nZXQoWyd0b29sdGlwJywgJ3RyaWdnZXInXSwgdHJ1ZSk7XG4gICAgdmFyIHNlcmllc1Rvb2x0aXBTaG93ID0gc2VyaWVzTW9kZWwuZ2V0KFsndG9vbHRpcCcsICdzaG93J10sIHRydWUpO1xuXG4gICAgaWYgKCFjb29yZFN5cyB8fCBzZXJpZXNUb29sdGlwVHJpZ2dlciA9PT0gJ25vbmUnIHx8IHNlcmllc1Rvb2x0aXBUcmlnZ2VyID09PSBmYWxzZSB8fCBzZXJpZXNUb29sdGlwVHJpZ2dlciA9PT0gJ2l0ZW0nIHx8IHNlcmllc1Rvb2x0aXBTaG93ID09PSBmYWxzZSB8fCBzZXJpZXNNb2RlbC5nZXQoWydheGlzUG9pbnRlcicsICdzaG93J10sIHRydWUpID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGVhY2gocmVzdWx0LmNvb3JkU3lzQXhlc0luZm9bbWFrZUtleShjb29yZFN5cy5tb2RlbCldLCBmdW5jdGlvbiAoYXhpc0luZm8pIHtcbiAgICAgIHZhciBheGlzID0gYXhpc0luZm8uYXhpcztcblxuICAgICAgaWYgKGNvb3JkU3lzLmdldEF4aXMoYXhpcy5kaW0pID09PSBheGlzKSB7XG4gICAgICAgIGF4aXNJbmZvLnNlcmllc01vZGVscy5wdXNoKHNlcmllc01vZGVsKTtcbiAgICAgICAgYXhpc0luZm8uc2VyaWVzRGF0YUNvdW50ID09IG51bGwgJiYgKGF4aXNJbmZvLnNlcmllc0RhdGFDb3VudCA9IDApO1xuICAgICAgICBheGlzSW5mby5zZXJpZXNEYXRhQ291bnQgKz0gc2VyaWVzTW9kZWwuZ2V0RGF0YSgpLmNvdW50KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuLyoqXHJcbiAqIEZvciBleGFtcGxlOlxyXG4gKiB7XHJcbiAqICAgICBheGlzUG9pbnRlcjoge1xyXG4gKiAgICAgICAgIGxpbmtzOiBbe1xyXG4gKiAgICAgICAgICAgICB4QXhpc0luZGV4OiBbMiwgNF0sXHJcbiAqICAgICAgICAgICAgIHlBeGlzSW5kZXg6ICdhbGwnXHJcbiAqICAgICAgICAgfSwge1xyXG4gKiAgICAgICAgICAgICB4QXhpc0lkOiBbJ2E1JywgJ2E3J10sXHJcbiAqICAgICAgICAgICAgIHhBeGlzTmFtZTogJ3h4eCdcclxuICogICAgICAgICB9XVxyXG4gKiAgICAgfVxyXG4gKiB9XHJcbiAqL1xuXG5cbmZ1bmN0aW9uIGdldExpbmtHcm91cEluZGV4KGxpbmtzT3B0aW9uLCBheGlzKSB7XG4gIHZhciBheGlzTW9kZWwgPSBheGlzLm1vZGVsO1xuICB2YXIgZGltID0gYXhpcy5kaW07XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5rc09wdGlvbi5sZW5ndGg7IGkrKykge1xuICAgIHZhciBsaW5rT3B0aW9uID0gbGlua3NPcHRpb25baV0gfHwge307XG5cbiAgICBpZiAoY2hlY2tQcm9wSW5MaW5rKGxpbmtPcHRpb25bZGltICsgJ0F4aXNJZCddLCBheGlzTW9kZWwuaWQpIHx8IGNoZWNrUHJvcEluTGluayhsaW5rT3B0aW9uW2RpbSArICdBeGlzSW5kZXgnXSwgYXhpc01vZGVsLmNvbXBvbmVudEluZGV4KSB8fCBjaGVja1Byb3BJbkxpbmsobGlua09wdGlvbltkaW0gKyAnQXhpc05hbWUnXSwgYXhpc01vZGVsLm5hbWUpKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tQcm9wSW5MaW5rKGxpbmtQcm9wVmFsdWUsIGF4aXNQcm9wVmFsdWUpIHtcbiAgcmV0dXJuIGxpbmtQcm9wVmFsdWUgPT09ICdhbGwnIHx8IGlzQXJyYXkobGlua1Byb3BWYWx1ZSkgJiYgaW5kZXhPZihsaW5rUHJvcFZhbHVlLCBheGlzUHJvcFZhbHVlKSA+PSAwIHx8IGxpbmtQcm9wVmFsdWUgPT09IGF4aXNQcm9wVmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaXhWYWx1ZShheGlzTW9kZWwpIHtcbiAgdmFyIGF4aXNJbmZvID0gZ2V0QXhpc0luZm8oYXhpc01vZGVsKTtcblxuICBpZiAoIWF4aXNJbmZvKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGF4aXNQb2ludGVyTW9kZWwgPSBheGlzSW5mby5heGlzUG9pbnRlck1vZGVsO1xuICB2YXIgc2NhbGUgPSBheGlzSW5mby5heGlzLnNjYWxlO1xuICB2YXIgb3B0aW9uID0gYXhpc1BvaW50ZXJNb2RlbC5vcHRpb247XG4gIHZhciBzdGF0dXMgPSBheGlzUG9pbnRlck1vZGVsLmdldCgnc3RhdHVzJyk7XG4gIHZhciB2YWx1ZSA9IGF4aXNQb2ludGVyTW9kZWwuZ2V0KCd2YWx1ZScpOyAvLyBQYXJzZSBpbml0IHZhbHVlIGZvciBjYXRlZ29yeSBhbmQgdGltZSBheGlzLlxuXG4gIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgdmFsdWUgPSBzY2FsZS5wYXJzZSh2YWx1ZSk7XG4gIH1cblxuICB2YXIgdXNlSGFuZGxlID0gaXNIYW5kbGVUcmlnZ2VyKGF4aXNQb2ludGVyTW9kZWwpOyAvLyBJZiBgaGFuZGxlYCB1c2VkLCBgYXhpc1BvaW50ZXJgIHdpbGwgYWx3YXlzIGJlIGRpc3BsYXllZCwgc28gdmFsdWVcbiAgLy8gYW5kIHN0YXR1cyBzaG91bGQgYmUgaW5pdGlhbGl6ZWQuXG5cbiAgaWYgKHN0YXR1cyA9PSBudWxsKSB7XG4gICAgb3B0aW9uLnN0YXR1cyA9IHVzZUhhbmRsZSA/ICdzaG93JyA6ICdoaWRlJztcbiAgfVxuXG4gIHZhciBleHRlbnQgPSBzY2FsZS5nZXRFeHRlbnQoKS5zbGljZSgpO1xuICBleHRlbnRbMF0gPiBleHRlbnRbMV0gJiYgZXh0ZW50LnJldmVyc2UoKTtcblxuICBpZiAoIC8vIFBpY2sgYSB2YWx1ZSBvbiBheGlzIHdoZW4gaW5pdGlhbGl6aW5nLlxuICB2YWx1ZSA9PSBudWxsIC8vIElmIGJvdGggYGhhbmRsZWAgYW5kIGBkYXRhWm9vbWAgYXJlIHVzZWQsIHZhbHVlIG1heSBiZSBvdXQgb2YgYXhpcyBleHRlbnQsXG4gIC8vIHdoZXJlIHdlIHNob3VsZCByZS1waWNrIGEgdmFsdWUgdG8ga2VlcCBgaGFuZGxlYCBkaXNwbGF5aW5nIG5vcm1hbGx5LlxuICB8fCB2YWx1ZSA+IGV4dGVudFsxXSkge1xuICAgIC8vIE1ha2UgaGFuZGxlIGRpc3BsYXllZCBvbiB0aGUgZW5kIG9mIHRoZSBheGlzIHdoZW4gaW5pdCwgd2hpY2ggbG9va3MgYmV0dGVyLlxuICAgIHZhbHVlID0gZXh0ZW50WzFdO1xuICB9XG5cbiAgaWYgKHZhbHVlIDwgZXh0ZW50WzBdKSB7XG4gICAgdmFsdWUgPSBleHRlbnRbMF07XG4gIH1cblxuICBvcHRpb24udmFsdWUgPSB2YWx1ZTtcblxuICBpZiAodXNlSGFuZGxlKSB7XG4gICAgb3B0aW9uLnN0YXR1cyA9IGF4aXNJbmZvLmF4aXMuc2NhbGUuaXNCbGFuaygpID8gJ2hpZGUnIDogJ3Nob3cnO1xuICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0QXhpc0luZm8oYXhpc01vZGVsKSB7XG4gIHZhciBjb29yZFN5c0F4ZXNJbmZvID0gKGF4aXNNb2RlbC5lY01vZGVsLmdldENvbXBvbmVudCgnYXhpc1BvaW50ZXInKSB8fCB7fSkuY29vcmRTeXNBeGVzSW5mbztcbiAgcmV0dXJuIGNvb3JkU3lzQXhlc0luZm8gJiYgY29vcmRTeXNBeGVzSW5mby5heGVzSW5mb1ttYWtlS2V5KGF4aXNNb2RlbCldO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEF4aXNQb2ludGVyTW9kZWwoYXhpc01vZGVsKSB7XG4gIHZhciBheGlzSW5mbyA9IGdldEF4aXNJbmZvKGF4aXNNb2RlbCk7XG4gIHJldHVybiBheGlzSW5mbyAmJiBheGlzSW5mby5heGlzUG9pbnRlck1vZGVsO1xufVxuXG5mdW5jdGlvbiBpc0hhbmRsZVRyaWdnZXIoYXhpc1BvaW50ZXJNb2RlbCkge1xuICByZXR1cm4gISFheGlzUG9pbnRlck1vZGVsLmdldChbJ2hhbmRsZScsICdzaG93J10pO1xufVxuLyoqXHJcbiAqIEBwYXJhbSB7bW9kdWxlOmVjaGFydHMvbW9kZWwvTW9kZWx9IG1vZGVsXHJcbiAqIEByZXR1cm4ge3N0cmluZ30gdW5pcXVlIGtleVxyXG4gKi9cblxuXG5leHBvcnQgZnVuY3Rpb24gbWFrZUtleShtb2RlbCkge1xuICByZXR1cm4gbW9kZWwudHlwZSArICd8fCcgKyBtb2RlbC5pZDtcbn0iLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0ICogYXMgYXhpc1BvaW50ZXJNb2RlbEhlbHBlciBmcm9tICcuLi9heGlzUG9pbnRlci9tb2RlbEhlbHBlci5qcyc7XG5pbXBvcnQgQ29tcG9uZW50VmlldyBmcm9tICcuLi8uLi92aWV3L0NvbXBvbmVudC5qcyc7XG52YXIgYXhpc1BvaW50ZXJDbGF6eiA9IHt9O1xuLyoqXHJcbiAqIEJhc2UgY2xhc3Mgb2YgQXhpc1ZpZXcuXHJcbiAqL1xuXG52YXIgQXhpc1ZpZXcgPVxuLyoqIEBjbGFzcyAqL1xuZnVuY3Rpb24gKF9zdXBlcikge1xuICBfX2V4dGVuZHMoQXhpc1ZpZXcsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gQXhpc1ZpZXcoKSB7XG4gICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG5cbiAgICBfdGhpcy50eXBlID0gQXhpc1ZpZXcudHlwZTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgLyoqXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICovXG5cblxuICBBeGlzVmlldy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGF4aXNNb2RlbCwgZWNNb2RlbCwgYXBpLCBwYXlsb2FkKSB7XG4gICAgLy8gRklYTUVcbiAgICAvLyBUaGlzIHByb2Nlc3Mgc2hvdWxkIHByb2Zvcm1lZCBhZnRlciBjb29yZGluYXRlIHN5c3RlbXMgdXBkYXRlZFxuICAgIC8vIChheGlzIHNjYWxlIHVwZGF0ZWQpLCBhbmQgc2hvdWxkIGJlIHBlcmZvcm1lZCBlYWNoIHRpbWUgdXBkYXRlLlxuICAgIC8vIFNvIHB1dCBpdCBoZXJlIHRlbXBvcmFyaWx5LCBhbHRob3VnaCBpdCBpcyBub3QgYXBwcm9wcmlhdGUgdG9cbiAgICAvLyBwdXQgYSBtb2RlbC13cml0aW5nIHByb2NlZHVyZSBpbiBgdmlld2AuXG4gICAgdGhpcy5heGlzUG9pbnRlckNsYXNzICYmIGF4aXNQb2ludGVyTW9kZWxIZWxwZXIuZml4VmFsdWUoYXhpc01vZGVsKTtcblxuICAgIF9zdXBlci5wcm90b3R5cGUucmVuZGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICB0aGlzLl9kb1VwZGF0ZUF4aXNQb2ludGVyQ2xhc3MoYXhpc01vZGVsLCBhcGksIHRydWUpO1xuICB9O1xuICAvKipcclxuICAgKiBBY3Rpb24gaGFuZGxlci5cclxuICAgKi9cblxuXG4gIEF4aXNWaWV3LnByb3RvdHlwZS51cGRhdGVBeGlzUG9pbnRlciA9IGZ1bmN0aW9uIChheGlzTW9kZWwsIGVjTW9kZWwsIGFwaSwgcGF5bG9hZCkge1xuICAgIHRoaXMuX2RvVXBkYXRlQXhpc1BvaW50ZXJDbGFzcyhheGlzTW9kZWwsIGFwaSwgZmFsc2UpO1xuICB9O1xuICAvKipcclxuICAgKiBAb3ZlcnJpZGVcclxuICAgKi9cblxuXG4gIEF4aXNWaWV3LnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoZWNNb2RlbCwgYXBpKSB7XG4gICAgdmFyIGF4aXNQb2ludGVyID0gdGhpcy5fYXhpc1BvaW50ZXI7XG4gICAgYXhpc1BvaW50ZXIgJiYgYXhpc1BvaW50ZXIucmVtb3ZlKGFwaSk7XG4gIH07XG4gIC8qKlxyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqL1xuXG5cbiAgQXhpc1ZpZXcucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoZWNNb2RlbCwgYXBpKSB7XG4gICAgdGhpcy5fZGlzcG9zZUF4aXNQb2ludGVyKGFwaSk7XG5cbiAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcblxuICBBeGlzVmlldy5wcm90b3R5cGUuX2RvVXBkYXRlQXhpc1BvaW50ZXJDbGFzcyA9IGZ1bmN0aW9uIChheGlzTW9kZWwsIGFwaSwgZm9yY2VSZW5kZXIpIHtcbiAgICB2YXIgQ2xhenogPSBBeGlzVmlldy5nZXRBeGlzUG9pbnRlckNsYXNzKHRoaXMuYXhpc1BvaW50ZXJDbGFzcyk7XG5cbiAgICBpZiAoIUNsYXp6KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGF4aXNQb2ludGVyTW9kZWwgPSBheGlzUG9pbnRlck1vZGVsSGVscGVyLmdldEF4aXNQb2ludGVyTW9kZWwoYXhpc01vZGVsKTtcbiAgICBheGlzUG9pbnRlck1vZGVsID8gKHRoaXMuX2F4aXNQb2ludGVyIHx8ICh0aGlzLl9heGlzUG9pbnRlciA9IG5ldyBDbGF6eigpKSkucmVuZGVyKGF4aXNNb2RlbCwgYXhpc1BvaW50ZXJNb2RlbCwgYXBpLCBmb3JjZVJlbmRlcikgOiB0aGlzLl9kaXNwb3NlQXhpc1BvaW50ZXIoYXBpKTtcbiAgfTtcblxuICBBeGlzVmlldy5wcm90b3R5cGUuX2Rpc3Bvc2VBeGlzUG9pbnRlciA9IGZ1bmN0aW9uIChhcGkpIHtcbiAgICB0aGlzLl9heGlzUG9pbnRlciAmJiB0aGlzLl9heGlzUG9pbnRlci5kaXNwb3NlKGFwaSk7XG4gICAgdGhpcy5fYXhpc1BvaW50ZXIgPSBudWxsO1xuICB9O1xuXG4gIEF4aXNWaWV3LnJlZ2lzdGVyQXhpc1BvaW50ZXJDbGFzcyA9IGZ1bmN0aW9uICh0eXBlLCBjbGF6eikge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAoYXhpc1BvaW50ZXJDbGF6elt0eXBlXSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2F4aXNQb2ludGVyICcgKyB0eXBlICsgJyBleGlzdHMnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBheGlzUG9pbnRlckNsYXp6W3R5cGVdID0gY2xheno7XG4gIH07XG5cbiAgO1xuXG4gIEF4aXNWaWV3LmdldEF4aXNQb2ludGVyQ2xhc3MgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgIHJldHVybiB0eXBlICYmIGF4aXNQb2ludGVyQ2xhenpbdHlwZV07XG4gIH07XG5cbiAgO1xuICBBeGlzVmlldy50eXBlID0gJ2F4aXMnO1xuICByZXR1cm4gQXhpc1ZpZXc7XG59KENvbXBvbmVudFZpZXcpO1xuXG5leHBvcnQgZGVmYXVsdCBBeGlzVmlldzsiLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCAqIGFzIHpyVXRpbCBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0ICogYXMgZ3JhcGhpYyBmcm9tICcuLi8uLi91dGlsL2dyYXBoaWMuanMnO1xuaW1wb3J0ICogYXMgYXhpc1BvaW50ZXJNb2RlbEhlbHBlciBmcm9tICcuL21vZGVsSGVscGVyLmpzJztcbmltcG9ydCAqIGFzIGV2ZW50VG9vbCBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL2V2ZW50LmpzJztcbmltcG9ydCAqIGFzIHRocm90dGxlVXRpbCBmcm9tICcuLi8uLi91dGlsL3Rocm90dGxlLmpzJztcbmltcG9ydCB7IG1ha2VJbm5lciB9IGZyb20gJy4uLy4uL3V0aWwvbW9kZWwuanMnO1xudmFyIGlubmVyID0gbWFrZUlubmVyKCk7XG52YXIgY2xvbmUgPSB6clV0aWwuY2xvbmU7XG52YXIgYmluZCA9IHpyVXRpbC5iaW5kO1xuLyoqXHJcbiAqIEJhc2UgYXhpcyBwb2ludGVyIGNsYXNzIGluIDJELlxyXG4gKi9cblxudmFyIEJhc2VBeGlzUG9pbnRlciA9XG4vKiogQGNsYXNzICovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEJhc2VBeGlzUG9pbnRlcigpIHtcbiAgICB0aGlzLl9kcmFnZ2luZyA9IGZhbHNlO1xuICAgIC8qKlxyXG4gICAgICogSW4gcHgsIGFyYml0cmFyeSB2YWx1ZS4gRG8gbm90IHNldCB0b28gc21hbGwsXHJcbiAgICAgKiBubyBhbmltYXRpb24gaXMgb2sgZm9yIG1vc3QgY2FzZXMuXHJcbiAgICAgKi9cblxuICAgIHRoaXMuYW5pbWF0aW9uVGhyZXNob2xkID0gMTU7XG4gIH1cbiAgLyoqXHJcbiAgICogQGltcGxlbWVudFxyXG4gICAqL1xuXG5cbiAgQmFzZUF4aXNQb2ludGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoYXhpc01vZGVsLCBheGlzUG9pbnRlck1vZGVsLCBhcGksIGZvcmNlUmVuZGVyKSB7XG4gICAgdmFyIHZhbHVlID0gYXhpc1BvaW50ZXJNb2RlbC5nZXQoJ3ZhbHVlJyk7XG4gICAgdmFyIHN0YXR1cyA9IGF4aXNQb2ludGVyTW9kZWwuZ2V0KCdzdGF0dXMnKTsgLy8gQmluZCB0aGVtIHRvIGB0aGlzYCwgbm90IGluIGNsb3N1cmUsIG90aGVyd2lzZSB0aGV5IHdpbGwgbm90XG4gICAgLy8gYmUgcmVwbGFjZWQgd2hlbiB1c2VyIGNhbGxpbmcgc2V0T3B0aW9uIGluIG5vdCBtZXJnZSBtb2RlLlxuXG4gICAgdGhpcy5fYXhpc01vZGVsID0gYXhpc01vZGVsO1xuICAgIHRoaXMuX2F4aXNQb2ludGVyTW9kZWwgPSBheGlzUG9pbnRlck1vZGVsO1xuICAgIHRoaXMuX2FwaSA9IGFwaTsgLy8gT3B0aW1pemU6IGByZW5kZXJgIHdpbGwgYmUgY2FsbGVkIHJlcGVhdGVkbHkgZHVyaW5nIG1vdXNlIG1vdmUuXG4gICAgLy8gU28gaXQgaXMgcG93ZXIgY29uc3VtaW5nIGlmIHBlcmZvcm1pbmcgYHJlbmRlcmAgZWFjaCB0aW1lLFxuICAgIC8vIGVzcGVjaWFsbHkgb24gbW9iaWxlIGRldmljZS5cblxuICAgIGlmICghZm9yY2VSZW5kZXIgJiYgdGhpcy5fbGFzdFZhbHVlID09PSB2YWx1ZSAmJiB0aGlzLl9sYXN0U3RhdHVzID09PSBzdGF0dXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9sYXN0VmFsdWUgPSB2YWx1ZTtcbiAgICB0aGlzLl9sYXN0U3RhdHVzID0gc3RhdHVzO1xuICAgIHZhciBncm91cCA9IHRoaXMuX2dyb3VwO1xuICAgIHZhciBoYW5kbGUgPSB0aGlzLl9oYW5kbGU7XG5cbiAgICBpZiAoIXN0YXR1cyB8fCBzdGF0dXMgPT09ICdoaWRlJykge1xuICAgICAgLy8gRG8gbm90IGNsZWFyIGhlcmUsIGZvciBhbmltYXRpb24gYmV0dGVyLlxuICAgICAgZ3JvdXAgJiYgZ3JvdXAuaGlkZSgpO1xuICAgICAgaGFuZGxlICYmIGhhbmRsZS5oaWRlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZ3JvdXAgJiYgZ3JvdXAuc2hvdygpO1xuICAgIGhhbmRsZSAmJiBoYW5kbGUuc2hvdygpOyAvLyBPdGhlcndpc2Ugc3RhdHVzIGlzICdzaG93J1xuXG4gICAgdmFyIGVsT3B0aW9uID0ge307XG4gICAgdGhpcy5tYWtlRWxPcHRpb24oZWxPcHRpb24sIHZhbHVlLCBheGlzTW9kZWwsIGF4aXNQb2ludGVyTW9kZWwsIGFwaSk7IC8vIEVuYWJsZSBjaGFuZ2UgYXhpcyBwb2ludGVyIHR5cGUuXG5cbiAgICB2YXIgZ3JhcGhpY0tleSA9IGVsT3B0aW9uLmdyYXBoaWNLZXk7XG5cbiAgICBpZiAoZ3JhcGhpY0tleSAhPT0gdGhpcy5fbGFzdEdyYXBoaWNLZXkpIHtcbiAgICAgIHRoaXMuY2xlYXIoYXBpKTtcbiAgICB9XG5cbiAgICB0aGlzLl9sYXN0R3JhcGhpY0tleSA9IGdyYXBoaWNLZXk7XG4gICAgdmFyIG1vdmVBbmltYXRpb24gPSB0aGlzLl9tb3ZlQW5pbWF0aW9uID0gdGhpcy5kZXRlcm1pbmVBbmltYXRpb24oYXhpc01vZGVsLCBheGlzUG9pbnRlck1vZGVsKTtcblxuICAgIGlmICghZ3JvdXApIHtcbiAgICAgIGdyb3VwID0gdGhpcy5fZ3JvdXAgPSBuZXcgZ3JhcGhpYy5Hcm91cCgpO1xuICAgICAgdGhpcy5jcmVhdGVQb2ludGVyRWwoZ3JvdXAsIGVsT3B0aW9uLCBheGlzTW9kZWwsIGF4aXNQb2ludGVyTW9kZWwpO1xuICAgICAgdGhpcy5jcmVhdGVMYWJlbEVsKGdyb3VwLCBlbE9wdGlvbiwgYXhpc01vZGVsLCBheGlzUG9pbnRlck1vZGVsKTtcbiAgICAgIGFwaS5nZXRacigpLmFkZChncm91cCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBkb1VwZGF0ZVByb3BzID0genJVdGlsLmN1cnJ5KHVwZGF0ZVByb3BzLCBheGlzUG9pbnRlck1vZGVsLCBtb3ZlQW5pbWF0aW9uKTtcbiAgICAgIHRoaXMudXBkYXRlUG9pbnRlckVsKGdyb3VwLCBlbE9wdGlvbiwgZG9VcGRhdGVQcm9wcyk7XG4gICAgICB0aGlzLnVwZGF0ZUxhYmVsRWwoZ3JvdXAsIGVsT3B0aW9uLCBkb1VwZGF0ZVByb3BzLCBheGlzUG9pbnRlck1vZGVsKTtcbiAgICB9XG5cbiAgICB1cGRhdGVNYW5kYXRvcnlQcm9wcyhncm91cCwgYXhpc1BvaW50ZXJNb2RlbCwgdHJ1ZSk7XG5cbiAgICB0aGlzLl9yZW5kZXJIYW5kbGUodmFsdWUpO1xuICB9O1xuICAvKipcclxuICAgKiBAaW1wbGVtZW50XHJcbiAgICovXG5cblxuICBCYXNlQXhpc1BvaW50ZXIucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChhcGkpIHtcbiAgICB0aGlzLmNsZWFyKGFwaSk7XG4gIH07XG4gIC8qKlxyXG4gICAqIEBpbXBsZW1lbnRcclxuICAgKi9cblxuXG4gIEJhc2VBeGlzUG9pbnRlci5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uIChhcGkpIHtcbiAgICB0aGlzLmNsZWFyKGFwaSk7XG4gIH07XG4gIC8qKlxyXG4gICAqIEBwcm90ZWN0ZWRcclxuICAgKi9cblxuXG4gIEJhc2VBeGlzUG9pbnRlci5wcm90b3R5cGUuZGV0ZXJtaW5lQW5pbWF0aW9uID0gZnVuY3Rpb24gKGF4aXNNb2RlbCwgYXhpc1BvaW50ZXJNb2RlbCkge1xuICAgIHZhciBhbmltYXRpb24gPSBheGlzUG9pbnRlck1vZGVsLmdldCgnYW5pbWF0aW9uJyk7XG4gICAgdmFyIGF4aXMgPSBheGlzTW9kZWwuYXhpcztcbiAgICB2YXIgaXNDYXRlZ29yeUF4aXMgPSBheGlzLnR5cGUgPT09ICdjYXRlZ29yeSc7XG4gICAgdmFyIHVzZVNuYXAgPSBheGlzUG9pbnRlck1vZGVsLmdldCgnc25hcCcpOyAvLyBWYWx1ZSBheGlzIHdpdGhvdXQgc25hcCBhbHdheXMgZG8gbm90IHNuYXAuXG5cbiAgICBpZiAoIXVzZVNuYXAgJiYgIWlzQ2F0ZWdvcnlBeGlzKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGFuaW1hdGlvbiA9PT0gJ2F1dG8nIHx8IGFuaW1hdGlvbiA9PSBudWxsKSB7XG4gICAgICB2YXIgYW5pbWF0aW9uVGhyZXNob2xkID0gdGhpcy5hbmltYXRpb25UaHJlc2hvbGQ7XG5cbiAgICAgIGlmIChpc0NhdGVnb3J5QXhpcyAmJiBheGlzLmdldEJhbmRXaWR0aCgpID4gYW5pbWF0aW9uVGhyZXNob2xkKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSAvLyBJdCBpcyBpbXBvcnRhbnQgdG8gYXV0byBhbmltYXRpb24gd2hlbiBzbmFwIHVzZWQuIENvbnNpZGVyIGlmIHRoZXJlIGlzXG4gICAgICAvLyBhIGRhdGFab29tLCBhbmltYXRpb24gd2lsbCBiZSBkaXNhYmxlZCB3aGVuIHRvbyBtYW55IHBvaW50cyBleGlzdCwgd2hpbGVcbiAgICAgIC8vIGl0IHdpbGwgYmUgZW5hYmxlZCBmb3IgYmV0dGVyIHZpc3VhbCBlZmZlY3Qgd2hlbiBsaXR0bGUgcG9pbnRzIGV4aXN0LlxuXG5cbiAgICAgIGlmICh1c2VTbmFwKSB7XG4gICAgICAgIHZhciBzZXJpZXNEYXRhQ291bnQgPSBheGlzUG9pbnRlck1vZGVsSGVscGVyLmdldEF4aXNJbmZvKGF4aXNNb2RlbCkuc2VyaWVzRGF0YUNvdW50O1xuICAgICAgICB2YXIgYXhpc0V4dGVudCA9IGF4aXMuZ2V0RXh0ZW50KCk7IC8vIEFwcHJveGltYXRlIGJhbmQgd2lkdGhcblxuICAgICAgICByZXR1cm4gTWF0aC5hYnMoYXhpc0V4dGVudFswXSAtIGF4aXNFeHRlbnRbMV0pIC8gc2VyaWVzRGF0YUNvdW50ID4gYW5pbWF0aW9uVGhyZXNob2xkO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFuaW1hdGlvbiA9PT0gdHJ1ZTtcbiAgfTtcbiAgLyoqXHJcbiAgICogYWRkIHtwb2ludGVyLCBsYWJlbCwgZ3JhcGhpY0tleX0gdG8gZWxPcHRpb25cclxuICAgKiBAcHJvdGVjdGVkXHJcbiAgICovXG5cblxuICBCYXNlQXhpc1BvaW50ZXIucHJvdG90eXBlLm1ha2VFbE9wdGlvbiA9IGZ1bmN0aW9uIChlbE9wdGlvbiwgdmFsdWUsIGF4aXNNb2RlbCwgYXhpc1BvaW50ZXJNb2RlbCwgYXBpKSB7Ly8gU2hvdWxkIGJlIGltcGxlbWVuZW50ZWQgYnkgc3ViLWNsYXNzLlxuICB9O1xuICAvKipcclxuICAgKiBAcHJvdGVjdGVkXHJcbiAgICovXG5cblxuICBCYXNlQXhpc1BvaW50ZXIucHJvdG90eXBlLmNyZWF0ZVBvaW50ZXJFbCA9IGZ1bmN0aW9uIChncm91cCwgZWxPcHRpb24sIGF4aXNNb2RlbCwgYXhpc1BvaW50ZXJNb2RlbCkge1xuICAgIHZhciBwb2ludGVyT3B0aW9uID0gZWxPcHRpb24ucG9pbnRlcjtcblxuICAgIGlmIChwb2ludGVyT3B0aW9uKSB7XG4gICAgICB2YXIgcG9pbnRlckVsID0gaW5uZXIoZ3JvdXApLnBvaW50ZXJFbCA9IG5ldyBncmFwaGljW3BvaW50ZXJPcHRpb24udHlwZV0oY2xvbmUoZWxPcHRpb24ucG9pbnRlcikpO1xuICAgICAgZ3JvdXAuYWRkKHBvaW50ZXJFbCk7XG4gICAgfVxuICB9O1xuICAvKipcclxuICAgKiBAcHJvdGVjdGVkXHJcbiAgICovXG5cblxuICBCYXNlQXhpc1BvaW50ZXIucHJvdG90eXBlLmNyZWF0ZUxhYmVsRWwgPSBmdW5jdGlvbiAoZ3JvdXAsIGVsT3B0aW9uLCBheGlzTW9kZWwsIGF4aXNQb2ludGVyTW9kZWwpIHtcbiAgICBpZiAoZWxPcHRpb24ubGFiZWwpIHtcbiAgICAgIHZhciBsYWJlbEVsID0gaW5uZXIoZ3JvdXApLmxhYmVsRWwgPSBuZXcgZ3JhcGhpYy5UZXh0KGNsb25lKGVsT3B0aW9uLmxhYmVsKSk7XG4gICAgICBncm91cC5hZGQobGFiZWxFbCk7XG4gICAgICB1cGRhdGVMYWJlbFNob3dIaWRlKGxhYmVsRWwsIGF4aXNQb2ludGVyTW9kZWwpO1xuICAgIH1cbiAgfTtcbiAgLyoqXHJcbiAgICogQHByb3RlY3RlZFxyXG4gICAqL1xuXG5cbiAgQmFzZUF4aXNQb2ludGVyLnByb3RvdHlwZS51cGRhdGVQb2ludGVyRWwgPSBmdW5jdGlvbiAoZ3JvdXAsIGVsT3B0aW9uLCB1cGRhdGVQcm9wcykge1xuICAgIHZhciBwb2ludGVyRWwgPSBpbm5lcihncm91cCkucG9pbnRlckVsO1xuXG4gICAgaWYgKHBvaW50ZXJFbCAmJiBlbE9wdGlvbi5wb2ludGVyKSB7XG4gICAgICBwb2ludGVyRWwuc2V0U3R5bGUoZWxPcHRpb24ucG9pbnRlci5zdHlsZSk7XG4gICAgICB1cGRhdGVQcm9wcyhwb2ludGVyRWwsIHtcbiAgICAgICAgc2hhcGU6IGVsT3B0aW9uLnBvaW50ZXIuc2hhcGVcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbiAgLyoqXHJcbiAgICogQHByb3RlY3RlZFxyXG4gICAqL1xuXG5cbiAgQmFzZUF4aXNQb2ludGVyLnByb3RvdHlwZS51cGRhdGVMYWJlbEVsID0gZnVuY3Rpb24gKGdyb3VwLCBlbE9wdGlvbiwgdXBkYXRlUHJvcHMsIGF4aXNQb2ludGVyTW9kZWwpIHtcbiAgICB2YXIgbGFiZWxFbCA9IGlubmVyKGdyb3VwKS5sYWJlbEVsO1xuXG4gICAgaWYgKGxhYmVsRWwpIHtcbiAgICAgIGxhYmVsRWwuc2V0U3R5bGUoZWxPcHRpb24ubGFiZWwuc3R5bGUpO1xuICAgICAgdXBkYXRlUHJvcHMobGFiZWxFbCwge1xuICAgICAgICAvLyBDb25zaWRlciB0ZXh0IGxlbmd0aCBjaGFuZ2UgaW4gdmVydGljYWwgYXhpcywgYW5pbWF0aW9uIHNob3VsZFxuICAgICAgICAvLyBiZSB1c2VkIG9uIHNoYXBlLCBvdGhlcndpc2UgdGhlIGVmZmVjdCB3aWxsIGJlIHdlaXJkLlxuICAgICAgICAvLyBUT0RPVE9ET1xuICAgICAgICAvLyBzaGFwZTogZWxPcHRpb24ubGFiZWwuc2hhcGUsXG4gICAgICAgIHg6IGVsT3B0aW9uLmxhYmVsLngsXG4gICAgICAgIHk6IGVsT3B0aW9uLmxhYmVsLnlcbiAgICAgIH0pO1xuICAgICAgdXBkYXRlTGFiZWxTaG93SGlkZShsYWJlbEVsLCBheGlzUG9pbnRlck1vZGVsKTtcbiAgICB9XG4gIH07XG4gIC8qKlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXG5cblxuICBCYXNlQXhpc1BvaW50ZXIucHJvdG90eXBlLl9yZW5kZXJIYW5kbGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBpZiAodGhpcy5fZHJhZ2dpbmcgfHwgIXRoaXMudXBkYXRlSGFuZGxlVHJhbnNmb3JtKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGF4aXNQb2ludGVyTW9kZWwgPSB0aGlzLl9heGlzUG9pbnRlck1vZGVsO1xuXG4gICAgdmFyIHpyID0gdGhpcy5fYXBpLmdldFpyKCk7XG5cbiAgICB2YXIgaGFuZGxlID0gdGhpcy5faGFuZGxlO1xuICAgIHZhciBoYW5kbGVNb2RlbCA9IGF4aXNQb2ludGVyTW9kZWwuZ2V0TW9kZWwoJ2hhbmRsZScpO1xuICAgIHZhciBzdGF0dXMgPSBheGlzUG9pbnRlck1vZGVsLmdldCgnc3RhdHVzJyk7XG5cbiAgICBpZiAoIWhhbmRsZU1vZGVsLmdldCgnc2hvdycpIHx8ICFzdGF0dXMgfHwgc3RhdHVzID09PSAnaGlkZScpIHtcbiAgICAgIGhhbmRsZSAmJiB6ci5yZW1vdmUoaGFuZGxlKTtcbiAgICAgIHRoaXMuX2hhbmRsZSA9IG51bGw7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGlzSW5pdDtcblxuICAgIGlmICghdGhpcy5faGFuZGxlKSB7XG4gICAgICBpc0luaXQgPSB0cnVlO1xuICAgICAgaGFuZGxlID0gdGhpcy5faGFuZGxlID0gZ3JhcGhpYy5jcmVhdGVJY29uKGhhbmRsZU1vZGVsLmdldCgnaWNvbicpLCB7XG4gICAgICAgIGN1cnNvcjogJ21vdmUnLFxuICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICAgIG9ubW91c2Vtb3ZlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIC8vIEZvciBtb2JpbGUgZGV2aWNlLCBwcmV2ZW50IHNjcmVlbiBzbGlkZXIgb24gdGhlIGJ1dHRvbi5cbiAgICAgICAgICBldmVudFRvb2wuc3RvcChlLmV2ZW50KTtcbiAgICAgICAgfSxcbiAgICAgICAgb25tb3VzZWRvd246IGJpbmQodGhpcy5fb25IYW5kbGVEcmFnTW92ZSwgdGhpcywgMCwgMCksXG4gICAgICAgIGRyaWZ0OiBiaW5kKHRoaXMuX29uSGFuZGxlRHJhZ01vdmUsIHRoaXMpLFxuICAgICAgICBvbmRyYWdlbmQ6IGJpbmQodGhpcy5fb25IYW5kbGVEcmFnRW5kLCB0aGlzKVxuICAgICAgfSk7XG4gICAgICB6ci5hZGQoaGFuZGxlKTtcbiAgICB9XG5cbiAgICB1cGRhdGVNYW5kYXRvcnlQcm9wcyhoYW5kbGUsIGF4aXNQb2ludGVyTW9kZWwsIGZhbHNlKTsgLy8gdXBkYXRlIHN0eWxlXG5cbiAgICBoYW5kbGUuc2V0U3R5bGUoaGFuZGxlTW9kZWwuZ2V0SXRlbVN0eWxlKG51bGwsIFsnY29sb3InLCAnYm9yZGVyQ29sb3InLCAnYm9yZGVyV2lkdGgnLCAnb3BhY2l0eScsICdzaGFkb3dDb2xvcicsICdzaGFkb3dCbHVyJywgJ3NoYWRvd09mZnNldFgnLCAnc2hhZG93T2Zmc2V0WSddKSk7IC8vIHVwZGF0ZSBwb3NpdGlvblxuXG4gICAgdmFyIGhhbmRsZVNpemUgPSBoYW5kbGVNb2RlbC5nZXQoJ3NpemUnKTtcblxuICAgIGlmICghenJVdGlsLmlzQXJyYXkoaGFuZGxlU2l6ZSkpIHtcbiAgICAgIGhhbmRsZVNpemUgPSBbaGFuZGxlU2l6ZSwgaGFuZGxlU2l6ZV07XG4gICAgfVxuXG4gICAgaGFuZGxlLnNjYWxlWCA9IGhhbmRsZVNpemVbMF0gLyAyO1xuICAgIGhhbmRsZS5zY2FsZVkgPSBoYW5kbGVTaXplWzFdIC8gMjtcbiAgICB0aHJvdHRsZVV0aWwuY3JlYXRlT3JVcGRhdGUodGhpcywgJ19kb0Rpc3BhdGNoQXhpc1BvaW50ZXInLCBoYW5kbGVNb2RlbC5nZXQoJ3Rocm90dGxlJykgfHwgMCwgJ2ZpeFJhdGUnKTtcblxuICAgIHRoaXMuX21vdmVIYW5kbGVUb1ZhbHVlKHZhbHVlLCBpc0luaXQpO1xuICB9O1xuXG4gIEJhc2VBeGlzUG9pbnRlci5wcm90b3R5cGUuX21vdmVIYW5kbGVUb1ZhbHVlID0gZnVuY3Rpb24gKHZhbHVlLCBpc0luaXQpIHtcbiAgICB1cGRhdGVQcm9wcyh0aGlzLl9heGlzUG9pbnRlck1vZGVsLCAhaXNJbml0ICYmIHRoaXMuX21vdmVBbmltYXRpb24sIHRoaXMuX2hhbmRsZSwgZ2V0SGFuZGxlVHJhbnNQcm9wcyh0aGlzLmdldEhhbmRsZVRyYW5zZm9ybSh2YWx1ZSwgdGhpcy5fYXhpc01vZGVsLCB0aGlzLl9heGlzUG9pbnRlck1vZGVsKSkpO1xuICB9O1xuXG4gIEJhc2VBeGlzUG9pbnRlci5wcm90b3R5cGUuX29uSGFuZGxlRHJhZ01vdmUgPSBmdW5jdGlvbiAoZHgsIGR5KSB7XG4gICAgdmFyIGhhbmRsZSA9IHRoaXMuX2hhbmRsZTtcblxuICAgIGlmICghaGFuZGxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fZHJhZ2dpbmcgPSB0cnVlOyAvLyBQZXJzaXN0ZW50IGZvciB0aHJvdHRsZS5cblxuICAgIHZhciB0cmFucyA9IHRoaXMudXBkYXRlSGFuZGxlVHJhbnNmb3JtKGdldEhhbmRsZVRyYW5zUHJvcHMoaGFuZGxlKSwgW2R4LCBkeV0sIHRoaXMuX2F4aXNNb2RlbCwgdGhpcy5fYXhpc1BvaW50ZXJNb2RlbCk7XG4gICAgdGhpcy5fcGF5bG9hZEluZm8gPSB0cmFucztcbiAgICBoYW5kbGUuc3RvcEFuaW1hdGlvbigpO1xuICAgIGhhbmRsZS5hdHRyKGdldEhhbmRsZVRyYW5zUHJvcHModHJhbnMpKTtcbiAgICBpbm5lcihoYW5kbGUpLmxhc3RQcm9wID0gbnVsbDtcblxuICAgIHRoaXMuX2RvRGlzcGF0Y2hBeGlzUG9pbnRlcigpO1xuICB9O1xuICAvKipcclxuICAgKiBUaHJvdHRsZWQgbWV0aG9kLlxyXG4gICAqL1xuXG5cbiAgQmFzZUF4aXNQb2ludGVyLnByb3RvdHlwZS5fZG9EaXNwYXRjaEF4aXNQb2ludGVyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBoYW5kbGUgPSB0aGlzLl9oYW5kbGU7XG5cbiAgICBpZiAoIWhhbmRsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBwYXlsb2FkSW5mbyA9IHRoaXMuX3BheWxvYWRJbmZvO1xuICAgIHZhciBheGlzTW9kZWwgPSB0aGlzLl9heGlzTW9kZWw7XG5cbiAgICB0aGlzLl9hcGkuZGlzcGF0Y2hBY3Rpb24oe1xuICAgICAgdHlwZTogJ3VwZGF0ZUF4aXNQb2ludGVyJyxcbiAgICAgIHg6IHBheWxvYWRJbmZvLmN1cnNvclBvaW50WzBdLFxuICAgICAgeTogcGF5bG9hZEluZm8uY3Vyc29yUG9pbnRbMV0sXG4gICAgICB0b29sdGlwT3B0aW9uOiBwYXlsb2FkSW5mby50b29sdGlwT3B0aW9uLFxuICAgICAgYXhlc0luZm86IFt7XG4gICAgICAgIGF4aXNEaW06IGF4aXNNb2RlbC5heGlzLmRpbSxcbiAgICAgICAgYXhpc0luZGV4OiBheGlzTW9kZWwuY29tcG9uZW50SW5kZXhcbiAgICAgIH1dXG4gICAgfSk7XG4gIH07XG5cbiAgQmFzZUF4aXNQb2ludGVyLnByb3RvdHlwZS5fb25IYW5kbGVEcmFnRW5kID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2RyYWdnaW5nID0gZmFsc2U7XG4gICAgdmFyIGhhbmRsZSA9IHRoaXMuX2hhbmRsZTtcblxuICAgIGlmICghaGFuZGxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHZhbHVlID0gdGhpcy5fYXhpc1BvaW50ZXJNb2RlbC5nZXQoJ3ZhbHVlJyk7IC8vIENvbnNpZGVyIHNuYXAgb3IgY2F0ZWdyb3kgYXhpcywgaGFuZGxlIG1heSBiZSBub3QgY29uc2lzdGVudCB3aXRoXG4gICAgLy8gYXhpc1BvaW50ZXIuIFNvIG1vdmUgaGFuZGxlIHRvIGFsaWduIHRoZSBleGFjdCB2YWx1ZSBwb3NpdGlvbiB3aGVuXG4gICAgLy8gZHJhZyBlbmRlZC5cblxuXG4gICAgdGhpcy5fbW92ZUhhbmRsZVRvVmFsdWUodmFsdWUpOyAvLyBGb3IgdGhlIGVmZmVjdDogdG9vbHRpcCB3aWxsIGJlIHNob3duIHdoZW4gZmluZ2VyIGhvbGRpbmcgb24gaGFuZGxlXG4gICAgLy8gYnV0dG9uLCBhbmQgd2lsbCBiZSBoaWRkZW4gYWZ0ZXIgZmluZ2VyIGxlZnQgaGFuZGxlIGJ1dHRvbi5cblxuXG4gICAgdGhpcy5fYXBpLmRpc3BhdGNoQWN0aW9uKHtcbiAgICAgIHR5cGU6ICdoaWRlVGlwJ1xuICAgIH0pO1xuICB9O1xuICAvKipcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xuXG5cbiAgQmFzZUF4aXNQb2ludGVyLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uIChhcGkpIHtcbiAgICB0aGlzLl9sYXN0VmFsdWUgPSBudWxsO1xuICAgIHRoaXMuX2xhc3RTdGF0dXMgPSBudWxsO1xuICAgIHZhciB6ciA9IGFwaS5nZXRacigpO1xuICAgIHZhciBncm91cCA9IHRoaXMuX2dyb3VwO1xuICAgIHZhciBoYW5kbGUgPSB0aGlzLl9oYW5kbGU7XG5cbiAgICBpZiAoenIgJiYgZ3JvdXApIHtcbiAgICAgIHRoaXMuX2xhc3RHcmFwaGljS2V5ID0gbnVsbDtcbiAgICAgIGdyb3VwICYmIHpyLnJlbW92ZShncm91cCk7XG4gICAgICBoYW5kbGUgJiYgenIucmVtb3ZlKGhhbmRsZSk7XG4gICAgICB0aGlzLl9ncm91cCA9IG51bGw7XG4gICAgICB0aGlzLl9oYW5kbGUgPSBudWxsO1xuICAgICAgdGhpcy5fcGF5bG9hZEluZm8gPSBudWxsO1xuICAgIH1cblxuICAgIHRocm90dGxlVXRpbC5jbGVhcih0aGlzLCAnX2RvRGlzcGF0Y2hBeGlzUG9pbnRlcicpO1xuICB9O1xuICAvKipcclxuICAgKiBAcHJvdGVjdGVkXHJcbiAgICovXG5cblxuICBCYXNlQXhpc1BvaW50ZXIucHJvdG90eXBlLmRvQ2xlYXIgPSBmdW5jdGlvbiAoKSB7Ly8gSW1wbGVtZW50ZWQgYnkgc3ViLWNsYXNzIGlmIG5lY2Vzc2FyeS5cbiAgfTtcblxuICBCYXNlQXhpc1BvaW50ZXIucHJvdG90eXBlLmJ1aWxkTGFiZWwgPSBmdW5jdGlvbiAoeHksIHdoLCB4RGltSW5kZXgpIHtcbiAgICB4RGltSW5kZXggPSB4RGltSW5kZXggfHwgMDtcbiAgICByZXR1cm4ge1xuICAgICAgeDogeHlbeERpbUluZGV4XSxcbiAgICAgIHk6IHh5WzEgLSB4RGltSW5kZXhdLFxuICAgICAgd2lkdGg6IHdoW3hEaW1JbmRleF0sXG4gICAgICBoZWlnaHQ6IHdoWzEgLSB4RGltSW5kZXhdXG4gICAgfTtcbiAgfTtcblxuICByZXR1cm4gQmFzZUF4aXNQb2ludGVyO1xufSgpO1xuXG5mdW5jdGlvbiB1cGRhdGVQcm9wcyhhbmltYXRpb25Nb2RlbCwgbW92ZUFuaW1hdGlvbiwgZWwsIHByb3BzKSB7XG4gIC8vIEFuaW1hdGlvbiBvcHRpbWl6ZS5cbiAgaWYgKCFwcm9wc0VxdWFsKGlubmVyKGVsKS5sYXN0UHJvcCwgcHJvcHMpKSB7XG4gICAgaW5uZXIoZWwpLmxhc3RQcm9wID0gcHJvcHM7XG4gICAgbW92ZUFuaW1hdGlvbiA/IGdyYXBoaWMudXBkYXRlUHJvcHMoZWwsIHByb3BzLCBhbmltYXRpb25Nb2RlbCkgOiAoZWwuc3RvcEFuaW1hdGlvbigpLCBlbC5hdHRyKHByb3BzKSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJvcHNFcXVhbChsYXN0UHJvcHMsIG5ld1Byb3BzKSB7XG4gIGlmICh6clV0aWwuaXNPYmplY3QobGFzdFByb3BzKSAmJiB6clV0aWwuaXNPYmplY3QobmV3UHJvcHMpKSB7XG4gICAgdmFyIGVxdWFsc18xID0gdHJ1ZTtcbiAgICB6clV0aWwuZWFjaChuZXdQcm9wcywgZnVuY3Rpb24gKGl0ZW0sIGtleSkge1xuICAgICAgZXF1YWxzXzEgPSBlcXVhbHNfMSAmJiBwcm9wc0VxdWFsKGxhc3RQcm9wc1trZXldLCBpdGVtKTtcbiAgICB9KTtcbiAgICByZXR1cm4gISFlcXVhbHNfMTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbGFzdFByb3BzID09PSBuZXdQcm9wcztcbiAgfVxufVxuXG5mdW5jdGlvbiB1cGRhdGVMYWJlbFNob3dIaWRlKGxhYmVsRWwsIGF4aXNQb2ludGVyTW9kZWwpIHtcbiAgbGFiZWxFbFtheGlzUG9pbnRlck1vZGVsLmdldChbJ2xhYmVsJywgJ3Nob3cnXSkgPyAnc2hvdycgOiAnaGlkZSddKCk7XG59XG5cbmZ1bmN0aW9uIGdldEhhbmRsZVRyYW5zUHJvcHModHJhbnMpIHtcbiAgcmV0dXJuIHtcbiAgICB4OiB0cmFucy54IHx8IDAsXG4gICAgeTogdHJhbnMueSB8fCAwLFxuICAgIHJvdGF0aW9uOiB0cmFucy5yb3RhdGlvbiB8fCAwXG4gIH07XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZU1hbmRhdG9yeVByb3BzKGdyb3VwLCBheGlzUG9pbnRlck1vZGVsLCBzaWxlbnQpIHtcbiAgdmFyIHogPSBheGlzUG9pbnRlck1vZGVsLmdldCgneicpO1xuICB2YXIgemxldmVsID0gYXhpc1BvaW50ZXJNb2RlbC5nZXQoJ3psZXZlbCcpO1xuICBncm91cCAmJiBncm91cC50cmF2ZXJzZShmdW5jdGlvbiAoZWwpIHtcbiAgICBpZiAoZWwudHlwZSAhPT0gJ2dyb3VwJykge1xuICAgICAgeiAhPSBudWxsICYmIChlbC56ID0geik7XG4gICAgICB6bGV2ZWwgIT0gbnVsbCAmJiAoZWwuemxldmVsID0gemxldmVsKTtcbiAgICAgIGVsLnNpbGVudCA9IHNpbGVudDtcbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBCYXNlQXhpc1BvaW50ZXI7IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgKiBhcyB6clV0aWwgZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbmltcG9ydCAqIGFzIGdyYXBoaWMgZnJvbSAnLi4vLi4vdXRpbC9ncmFwaGljLmpzJztcbmltcG9ydCAqIGFzIHRleHRDb250YWluIGZyb20gJ3pyZW5kZXIvbGliL2NvbnRhaW4vdGV4dC5qcyc7XG5pbXBvcnQgKiBhcyBmb3JtYXRVdGlsIGZyb20gJy4uLy4uL3V0aWwvZm9ybWF0LmpzJztcbmltcG9ydCAqIGFzIG1hdHJpeCBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL21hdHJpeC5qcyc7XG5pbXBvcnQgKiBhcyBheGlzSGVscGVyIGZyb20gJy4uLy4uL2Nvb3JkL2F4aXNIZWxwZXIuanMnO1xuaW1wb3J0IEF4aXNCdWlsZGVyIGZyb20gJy4uL2F4aXMvQXhpc0J1aWxkZXIuanMnO1xuaW1wb3J0IHsgY3JlYXRlVGV4dFN0eWxlIH0gZnJvbSAnLi4vLi4vbGFiZWwvbGFiZWxTdHlsZS5qcyc7XG5leHBvcnQgZnVuY3Rpb24gYnVpbGRFbFN0eWxlKGF4aXNQb2ludGVyTW9kZWwpIHtcbiAgdmFyIGF4aXNQb2ludGVyVHlwZSA9IGF4aXNQb2ludGVyTW9kZWwuZ2V0KCd0eXBlJyk7XG4gIHZhciBzdHlsZU1vZGVsID0gYXhpc1BvaW50ZXJNb2RlbC5nZXRNb2RlbChheGlzUG9pbnRlclR5cGUgKyAnU3R5bGUnKTtcbiAgdmFyIHN0eWxlO1xuXG4gIGlmIChheGlzUG9pbnRlclR5cGUgPT09ICdsaW5lJykge1xuICAgIHN0eWxlID0gc3R5bGVNb2RlbC5nZXRMaW5lU3R5bGUoKTtcbiAgICBzdHlsZS5maWxsID0gbnVsbDtcbiAgfSBlbHNlIGlmIChheGlzUG9pbnRlclR5cGUgPT09ICdzaGFkb3cnKSB7XG4gICAgc3R5bGUgPSBzdHlsZU1vZGVsLmdldEFyZWFTdHlsZSgpO1xuICAgIHN0eWxlLnN0cm9rZSA9IG51bGw7XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59XG4vKipcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gbGFiZWxQb3Mge2FsaWduLCB2ZXJ0aWNhbEFsaWduLCBwb3NpdGlvbn1cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZExhYmVsRWxPcHRpb24oZWxPcHRpb24sIGF4aXNNb2RlbCwgYXhpc1BvaW50ZXJNb2RlbCwgYXBpLCBsYWJlbFBvcykge1xuICB2YXIgdmFsdWUgPSBheGlzUG9pbnRlck1vZGVsLmdldCgndmFsdWUnKTtcbiAgdmFyIHRleHQgPSBnZXRWYWx1ZUxhYmVsKHZhbHVlLCBheGlzTW9kZWwuYXhpcywgYXhpc01vZGVsLmVjTW9kZWwsIGF4aXNQb2ludGVyTW9kZWwuZ2V0KCdzZXJpZXNEYXRhSW5kaWNlcycpLCB7XG4gICAgcHJlY2lzaW9uOiBheGlzUG9pbnRlck1vZGVsLmdldChbJ2xhYmVsJywgJ3ByZWNpc2lvbiddKSxcbiAgICBmb3JtYXR0ZXI6IGF4aXNQb2ludGVyTW9kZWwuZ2V0KFsnbGFiZWwnLCAnZm9ybWF0dGVyJ10pXG4gIH0pO1xuICB2YXIgbGFiZWxNb2RlbCA9IGF4aXNQb2ludGVyTW9kZWwuZ2V0TW9kZWwoJ2xhYmVsJyk7XG4gIHZhciBwYWRkaW5ncyA9IGZvcm1hdFV0aWwubm9ybWFsaXplQ3NzQXJyYXkobGFiZWxNb2RlbC5nZXQoJ3BhZGRpbmcnKSB8fCAwKTtcbiAgdmFyIGZvbnQgPSBsYWJlbE1vZGVsLmdldEZvbnQoKTtcbiAgdmFyIHRleHRSZWN0ID0gdGV4dENvbnRhaW4uZ2V0Qm91bmRpbmdSZWN0KHRleHQsIGZvbnQpO1xuICB2YXIgcG9zaXRpb24gPSBsYWJlbFBvcy5wb3NpdGlvbjtcbiAgdmFyIHdpZHRoID0gdGV4dFJlY3Qud2lkdGggKyBwYWRkaW5nc1sxXSArIHBhZGRpbmdzWzNdO1xuICB2YXIgaGVpZ2h0ID0gdGV4dFJlY3QuaGVpZ2h0ICsgcGFkZGluZ3NbMF0gKyBwYWRkaW5nc1syXTsgLy8gQWRqdXN0IGJ5IGFsaWduLlxuXG4gIHZhciBhbGlnbiA9IGxhYmVsUG9zLmFsaWduO1xuICBhbGlnbiA9PT0gJ3JpZ2h0JyAmJiAocG9zaXRpb25bMF0gLT0gd2lkdGgpO1xuICBhbGlnbiA9PT0gJ2NlbnRlcicgJiYgKHBvc2l0aW9uWzBdIC09IHdpZHRoIC8gMik7XG4gIHZhciB2ZXJ0aWNhbEFsaWduID0gbGFiZWxQb3MudmVydGljYWxBbGlnbjtcbiAgdmVydGljYWxBbGlnbiA9PT0gJ2JvdHRvbScgJiYgKHBvc2l0aW9uWzFdIC09IGhlaWdodCk7XG4gIHZlcnRpY2FsQWxpZ24gPT09ICdtaWRkbGUnICYmIChwb3NpdGlvblsxXSAtPSBoZWlnaHQgLyAyKTsgLy8gTm90IG92ZXJmbG93IGVjIGNvbnRhaW5lclxuXG4gIGNvbmZpbmVJbkNvbnRhaW5lcihwb3NpdGlvbiwgd2lkdGgsIGhlaWdodCwgYXBpKTtcbiAgdmFyIGJnQ29sb3IgPSBsYWJlbE1vZGVsLmdldCgnYmFja2dyb3VuZENvbG9yJyk7XG5cbiAgaWYgKCFiZ0NvbG9yIHx8IGJnQ29sb3IgPT09ICdhdXRvJykge1xuICAgIGJnQ29sb3IgPSBheGlzTW9kZWwuZ2V0KFsnYXhpc0xpbmUnLCAnbGluZVN0eWxlJywgJ2NvbG9yJ10pO1xuICB9XG5cbiAgZWxPcHRpb24ubGFiZWwgPSB7XG4gICAgLy8gc2hhcGU6IHt4OiAwLCB5OiAwLCB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0LCByOiBsYWJlbE1vZGVsLmdldCgnYm9yZGVyUmFkaXVzJyl9LFxuICAgIHg6IHBvc2l0aW9uWzBdLFxuICAgIHk6IHBvc2l0aW9uWzFdLFxuICAgIHN0eWxlOiBjcmVhdGVUZXh0U3R5bGUobGFiZWxNb2RlbCwge1xuICAgICAgdGV4dDogdGV4dCxcbiAgICAgIGZvbnQ6IGZvbnQsXG4gICAgICBmaWxsOiBsYWJlbE1vZGVsLmdldFRleHRDb2xvcigpLFxuICAgICAgcGFkZGluZzogcGFkZGluZ3MsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJnQ29sb3JcbiAgICB9KSxcbiAgICAvLyBMYWJlbCBzaG91bGQgYmUgb3ZlciBheGlzUG9pbnRlci5cbiAgICB6MjogMTBcbiAgfTtcbn0gLy8gRG8gbm90IG92ZXJmbG93IGVjIGNvbnRhaW5lclxuXG5mdW5jdGlvbiBjb25maW5lSW5Db250YWluZXIocG9zaXRpb24sIHdpZHRoLCBoZWlnaHQsIGFwaSkge1xuICB2YXIgdmlld1dpZHRoID0gYXBpLmdldFdpZHRoKCk7XG4gIHZhciB2aWV3SGVpZ2h0ID0gYXBpLmdldEhlaWdodCgpO1xuICBwb3NpdGlvblswXSA9IE1hdGgubWluKHBvc2l0aW9uWzBdICsgd2lkdGgsIHZpZXdXaWR0aCkgLSB3aWR0aDtcbiAgcG9zaXRpb25bMV0gPSBNYXRoLm1pbihwb3NpdGlvblsxXSArIGhlaWdodCwgdmlld0hlaWdodCkgLSBoZWlnaHQ7XG4gIHBvc2l0aW9uWzBdID0gTWF0aC5tYXgocG9zaXRpb25bMF0sIDApO1xuICBwb3NpdGlvblsxXSA9IE1hdGgubWF4KHBvc2l0aW9uWzFdLCAwKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFZhbHVlTGFiZWwodmFsdWUsIGF4aXMsIGVjTW9kZWwsIHNlcmllc0RhdGFJbmRpY2VzLCBvcHQpIHtcbiAgdmFsdWUgPSBheGlzLnNjYWxlLnBhcnNlKHZhbHVlKTtcbiAgdmFyIHRleHQgPSBheGlzLnNjYWxlLmdldExhYmVsKHtcbiAgICB2YWx1ZTogdmFsdWVcbiAgfSwge1xuICAgIC8vIElmIGBwcmVjaXNpb25gIGlzIHNldCwgd2lkdGggY2FuIGJlIGZpeGVkIChsaWtlICcxMi4wMDUwMCcpLCB3aGljaFxuICAgIC8vIGhlbHBzIHRvIGRlYm91bmNlIHdoZW4gd2hlbiBtb3ZpbmcgbGFiZWwuXG4gICAgcHJlY2lzaW9uOiBvcHQucHJlY2lzaW9uXG4gIH0pO1xuICB2YXIgZm9ybWF0dGVyID0gb3B0LmZvcm1hdHRlcjtcblxuICBpZiAoZm9ybWF0dGVyKSB7XG4gICAgdmFyIHBhcmFtc18xID0ge1xuICAgICAgdmFsdWU6IGF4aXNIZWxwZXIuZ2V0QXhpc1Jhd1ZhbHVlKGF4aXMsIHtcbiAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICB9KSxcbiAgICAgIGF4aXNEaW1lbnNpb246IGF4aXMuZGltLFxuICAgICAgYXhpc0luZGV4OiBheGlzLmluZGV4LFxuICAgICAgc2VyaWVzRGF0YTogW11cbiAgICB9O1xuICAgIHpyVXRpbC5lYWNoKHNlcmllc0RhdGFJbmRpY2VzLCBmdW5jdGlvbiAoaWR4SXRlbSkge1xuICAgICAgdmFyIHNlcmllcyA9IGVjTW9kZWwuZ2V0U2VyaWVzQnlJbmRleChpZHhJdGVtLnNlcmllc0luZGV4KTtcbiAgICAgIHZhciBkYXRhSW5kZXggPSBpZHhJdGVtLmRhdGFJbmRleEluc2lkZTtcbiAgICAgIHZhciBkYXRhUGFyYW1zID0gc2VyaWVzICYmIHNlcmllcy5nZXREYXRhUGFyYW1zKGRhdGFJbmRleCk7XG4gICAgICBkYXRhUGFyYW1zICYmIHBhcmFtc18xLnNlcmllc0RhdGEucHVzaChkYXRhUGFyYW1zKTtcbiAgICB9KTtcblxuICAgIGlmICh6clV0aWwuaXNTdHJpbmcoZm9ybWF0dGVyKSkge1xuICAgICAgdGV4dCA9IGZvcm1hdHRlci5yZXBsYWNlKCd7dmFsdWV9JywgdGV4dCk7XG4gICAgfSBlbHNlIGlmICh6clV0aWwuaXNGdW5jdGlvbihmb3JtYXR0ZXIpKSB7XG4gICAgICB0ZXh0ID0gZm9ybWF0dGVyKHBhcmFtc18xKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGV4dDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmFuc2Zvcm1lZFBvc2l0aW9uKGF4aXMsIHZhbHVlLCBsYXlvdXRJbmZvKSB7XG4gIHZhciB0cmFuc2Zvcm0gPSBtYXRyaXguY3JlYXRlKCk7XG4gIG1hdHJpeC5yb3RhdGUodHJhbnNmb3JtLCB0cmFuc2Zvcm0sIGxheW91dEluZm8ucm90YXRpb24pO1xuICBtYXRyaXgudHJhbnNsYXRlKHRyYW5zZm9ybSwgdHJhbnNmb3JtLCBsYXlvdXRJbmZvLnBvc2l0aW9uKTtcbiAgcmV0dXJuIGdyYXBoaWMuYXBwbHlUcmFuc2Zvcm0oW2F4aXMuZGF0YVRvQ29vcmQodmFsdWUpLCAobGF5b3V0SW5mby5sYWJlbE9mZnNldCB8fCAwKSArIChsYXlvdXRJbmZvLmxhYmVsRGlyZWN0aW9uIHx8IDEpICogKGxheW91dEluZm8ubGFiZWxNYXJnaW4gfHwgMCldLCB0cmFuc2Zvcm0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkQ2FydGVzaWFuU2luZ2xlTGFiZWxFbE9wdGlvbih2YWx1ZSwgZWxPcHRpb24sIGxheW91dEluZm8sIGF4aXNNb2RlbCwgYXhpc1BvaW50ZXJNb2RlbCwgYXBpKSB7XG4gIC8vIEB0cy1pZ25vcmVcbiAgdmFyIHRleHRMYXlvdXQgPSBBeGlzQnVpbGRlci5pbm5lclRleHRMYXlvdXQobGF5b3V0SW5mby5yb3RhdGlvbiwgMCwgbGF5b3V0SW5mby5sYWJlbERpcmVjdGlvbik7XG4gIGxheW91dEluZm8ubGFiZWxNYXJnaW4gPSBheGlzUG9pbnRlck1vZGVsLmdldChbJ2xhYmVsJywgJ21hcmdpbiddKTtcbiAgYnVpbGRMYWJlbEVsT3B0aW9uKGVsT3B0aW9uLCBheGlzTW9kZWwsIGF4aXNQb2ludGVyTW9kZWwsIGFwaSwge1xuICAgIHBvc2l0aW9uOiBnZXRUcmFuc2Zvcm1lZFBvc2l0aW9uKGF4aXNNb2RlbC5heGlzLCB2YWx1ZSwgbGF5b3V0SW5mbyksXG4gICAgYWxpZ246IHRleHRMYXlvdXQudGV4dEFsaWduLFxuICAgIHZlcnRpY2FsQWxpZ246IHRleHRMYXlvdXQudGV4dFZlcnRpY2FsQWxpZ25cbiAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZUxpbmVTaGFwZShwMSwgcDIsIHhEaW1JbmRleCkge1xuICB4RGltSW5kZXggPSB4RGltSW5kZXggfHwgMDtcbiAgcmV0dXJuIHtcbiAgICB4MTogcDFbeERpbUluZGV4XSxcbiAgICB5MTogcDFbMSAtIHhEaW1JbmRleF0sXG4gICAgeDI6IHAyW3hEaW1JbmRleF0sXG4gICAgeTI6IHAyWzEgLSB4RGltSW5kZXhdXG4gIH07XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZVJlY3RTaGFwZSh4eSwgd2gsIHhEaW1JbmRleCkge1xuICB4RGltSW5kZXggPSB4RGltSW5kZXggfHwgMDtcbiAgcmV0dXJuIHtcbiAgICB4OiB4eVt4RGltSW5kZXhdLFxuICAgIHk6IHh5WzEgLSB4RGltSW5kZXhdLFxuICAgIHdpZHRoOiB3aFt4RGltSW5kZXhdLFxuICAgIGhlaWdodDogd2hbMSAtIHhEaW1JbmRleF1cbiAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYWtlU2VjdG9yU2hhcGUoY3gsIGN5LCByMCwgciwgc3RhcnRBbmdsZSwgZW5kQW5nbGUpIHtcbiAgcmV0dXJuIHtcbiAgICBjeDogY3gsXG4gICAgY3k6IGN5LFxuICAgIHIwOiByMCxcbiAgICByOiByLFxuICAgIHN0YXJ0QW5nbGU6IHN0YXJ0QW5nbGUsXG4gICAgZW5kQW5nbGU6IGVuZEFuZ2xlLFxuICAgIGNsb2Nrd2lzZTogdHJ1ZVxuICB9O1xufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgQmFzZUF4aXNQb2ludGVyIGZyb20gJy4vQmFzZUF4aXNQb2ludGVyLmpzJztcbmltcG9ydCAqIGFzIHZpZXdIZWxwZXIgZnJvbSAnLi92aWV3SGVscGVyLmpzJztcbmltcG9ydCAqIGFzIGNhcnRlc2lhbkF4aXNIZWxwZXIgZnJvbSAnLi4vLi4vY29vcmQvY2FydGVzaWFuL2NhcnRlc2lhbkF4aXNIZWxwZXIuanMnO1xuXG52YXIgQ2FydGVzaWFuQXhpc1BvaW50ZXIgPVxuLyoqIEBjbGFzcyAqL1xuZnVuY3Rpb24gKF9zdXBlcikge1xuICBfX2V4dGVuZHMoQ2FydGVzaWFuQXhpc1BvaW50ZXIsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gQ2FydGVzaWFuQXhpc1BvaW50ZXIoKSB7XG4gICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICB9XG4gIC8qKlxyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqL1xuXG5cbiAgQ2FydGVzaWFuQXhpc1BvaW50ZXIucHJvdG90eXBlLm1ha2VFbE9wdGlvbiA9IGZ1bmN0aW9uIChlbE9wdGlvbiwgdmFsdWUsIGF4aXNNb2RlbCwgYXhpc1BvaW50ZXJNb2RlbCwgYXBpKSB7XG4gICAgdmFyIGF4aXMgPSBheGlzTW9kZWwuYXhpcztcbiAgICB2YXIgZ3JpZCA9IGF4aXMuZ3JpZDtcbiAgICB2YXIgYXhpc1BvaW50ZXJUeXBlID0gYXhpc1BvaW50ZXJNb2RlbC5nZXQoJ3R5cGUnKTtcbiAgICB2YXIgb3RoZXJFeHRlbnQgPSBnZXRDYXJ0ZXNpYW4oZ3JpZCwgYXhpcykuZ2V0T3RoZXJBeGlzKGF4aXMpLmdldEdsb2JhbEV4dGVudCgpO1xuICAgIHZhciBwaXhlbFZhbHVlID0gYXhpcy50b0dsb2JhbENvb3JkKGF4aXMuZGF0YVRvQ29vcmQodmFsdWUsIHRydWUpKTtcblxuICAgIGlmIChheGlzUG9pbnRlclR5cGUgJiYgYXhpc1BvaW50ZXJUeXBlICE9PSAnbm9uZScpIHtcbiAgICAgIHZhciBlbFN0eWxlID0gdmlld0hlbHBlci5idWlsZEVsU3R5bGUoYXhpc1BvaW50ZXJNb2RlbCk7XG4gICAgICB2YXIgcG9pbnRlck9wdGlvbiA9IHBvaW50ZXJTaGFwZUJ1aWxkZXJbYXhpc1BvaW50ZXJUeXBlXShheGlzLCBwaXhlbFZhbHVlLCBvdGhlckV4dGVudCk7XG4gICAgICBwb2ludGVyT3B0aW9uLnN0eWxlID0gZWxTdHlsZTtcbiAgICAgIGVsT3B0aW9uLmdyYXBoaWNLZXkgPSBwb2ludGVyT3B0aW9uLnR5cGU7XG4gICAgICBlbE9wdGlvbi5wb2ludGVyID0gcG9pbnRlck9wdGlvbjtcbiAgICB9XG5cbiAgICB2YXIgbGF5b3V0SW5mbyA9IGNhcnRlc2lhbkF4aXNIZWxwZXIubGF5b3V0KGdyaWQubW9kZWwsIGF4aXNNb2RlbCk7XG4gICAgdmlld0hlbHBlci5idWlsZENhcnRlc2lhblNpbmdsZUxhYmVsRWxPcHRpb24oIC8vIEB0cy1pZ25vcmVcbiAgICB2YWx1ZSwgZWxPcHRpb24sIGxheW91dEluZm8sIGF4aXNNb2RlbCwgYXhpc1BvaW50ZXJNb2RlbCwgYXBpKTtcbiAgfTtcbiAgLyoqXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICovXG5cblxuICBDYXJ0ZXNpYW5BeGlzUG9pbnRlci5wcm90b3R5cGUuZ2V0SGFuZGxlVHJhbnNmb3JtID0gZnVuY3Rpb24gKHZhbHVlLCBheGlzTW9kZWwsIGF4aXNQb2ludGVyTW9kZWwpIHtcbiAgICB2YXIgbGF5b3V0SW5mbyA9IGNhcnRlc2lhbkF4aXNIZWxwZXIubGF5b3V0KGF4aXNNb2RlbC5heGlzLmdyaWQubW9kZWwsIGF4aXNNb2RlbCwge1xuICAgICAgbGFiZWxJbnNpZGU6IGZhbHNlXG4gICAgfSk7IC8vIEB0cy1pZ25vcmVcblxuICAgIGxheW91dEluZm8ubGFiZWxNYXJnaW4gPSBheGlzUG9pbnRlck1vZGVsLmdldChbJ2hhbmRsZScsICdtYXJnaW4nXSk7XG4gICAgdmFyIHBvcyA9IHZpZXdIZWxwZXIuZ2V0VHJhbnNmb3JtZWRQb3NpdGlvbihheGlzTW9kZWwuYXhpcywgdmFsdWUsIGxheW91dEluZm8pO1xuICAgIHJldHVybiB7XG4gICAgICB4OiBwb3NbMF0sXG4gICAgICB5OiBwb3NbMV0sXG4gICAgICByb3RhdGlvbjogbGF5b3V0SW5mby5yb3RhdGlvbiArIChsYXlvdXRJbmZvLmxhYmVsRGlyZWN0aW9uIDwgMCA/IE1hdGguUEkgOiAwKVxuICAgIH07XG4gIH07XG4gIC8qKlxyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqL1xuXG5cbiAgQ2FydGVzaWFuQXhpc1BvaW50ZXIucHJvdG90eXBlLnVwZGF0ZUhhbmRsZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0cmFuc2Zvcm0sIGRlbHRhLCBheGlzTW9kZWwsIGF4aXNQb2ludGVyTW9kZWwpIHtcbiAgICB2YXIgYXhpcyA9IGF4aXNNb2RlbC5heGlzO1xuICAgIHZhciBncmlkID0gYXhpcy5ncmlkO1xuICAgIHZhciBheGlzRXh0ZW50ID0gYXhpcy5nZXRHbG9iYWxFeHRlbnQodHJ1ZSk7XG4gICAgdmFyIG90aGVyRXh0ZW50ID0gZ2V0Q2FydGVzaWFuKGdyaWQsIGF4aXMpLmdldE90aGVyQXhpcyhheGlzKS5nZXRHbG9iYWxFeHRlbnQoKTtcbiAgICB2YXIgZGltSW5kZXggPSBheGlzLmRpbSA9PT0gJ3gnID8gMCA6IDE7XG4gICAgdmFyIGN1cnJQb3NpdGlvbiA9IFt0cmFuc2Zvcm0ueCwgdHJhbnNmb3JtLnldO1xuICAgIGN1cnJQb3NpdGlvbltkaW1JbmRleF0gKz0gZGVsdGFbZGltSW5kZXhdO1xuICAgIGN1cnJQb3NpdGlvbltkaW1JbmRleF0gPSBNYXRoLm1pbihheGlzRXh0ZW50WzFdLCBjdXJyUG9zaXRpb25bZGltSW5kZXhdKTtcbiAgICBjdXJyUG9zaXRpb25bZGltSW5kZXhdID0gTWF0aC5tYXgoYXhpc0V4dGVudFswXSwgY3VyclBvc2l0aW9uW2RpbUluZGV4XSk7XG4gICAgdmFyIGN1cnNvck90aGVyVmFsdWUgPSAob3RoZXJFeHRlbnRbMV0gKyBvdGhlckV4dGVudFswXSkgLyAyO1xuICAgIHZhciBjdXJzb3JQb2ludCA9IFtjdXJzb3JPdGhlclZhbHVlLCBjdXJzb3JPdGhlclZhbHVlXTtcbiAgICBjdXJzb3JQb2ludFtkaW1JbmRleF0gPSBjdXJyUG9zaXRpb25bZGltSW5kZXhdOyAvLyBNYWtlIHRvb2x0aXAgZG8gbm90IG92ZXJsYXAgYXhpc1BvaW50ZXIgYW5kIGluIHRoZSBtaWRkbGUgb2YgdGhlIGdyaWQuXG5cbiAgICB2YXIgdG9vbHRpcE9wdGlvbnMgPSBbe1xuICAgICAgdmVydGljYWxBbGlnbjogJ21pZGRsZSdcbiAgICB9LCB7XG4gICAgICBhbGlnbjogJ2NlbnRlcidcbiAgICB9XTtcbiAgICByZXR1cm4ge1xuICAgICAgeDogY3VyclBvc2l0aW9uWzBdLFxuICAgICAgeTogY3VyclBvc2l0aW9uWzFdLFxuICAgICAgcm90YXRpb246IHRyYW5zZm9ybS5yb3RhdGlvbixcbiAgICAgIGN1cnNvclBvaW50OiBjdXJzb3JQb2ludCxcbiAgICAgIHRvb2x0aXBPcHRpb246IHRvb2x0aXBPcHRpb25zW2RpbUluZGV4XVxuICAgIH07XG4gIH07XG5cbiAgcmV0dXJuIENhcnRlc2lhbkF4aXNQb2ludGVyO1xufShCYXNlQXhpc1BvaW50ZXIpO1xuXG5mdW5jdGlvbiBnZXRDYXJ0ZXNpYW4oZ3JpZCwgYXhpcykge1xuICB2YXIgb3B0ID0ge307XG4gIG9wdFtheGlzLmRpbSArICdBeGlzSW5kZXgnXSA9IGF4aXMuaW5kZXg7XG4gIHJldHVybiBncmlkLmdldENhcnRlc2lhbihvcHQpO1xufVxuXG52YXIgcG9pbnRlclNoYXBlQnVpbGRlciA9IHtcbiAgbGluZTogZnVuY3Rpb24gKGF4aXMsIHBpeGVsVmFsdWUsIG90aGVyRXh0ZW50KSB7XG4gICAgdmFyIHRhcmdldFNoYXBlID0gdmlld0hlbHBlci5tYWtlTGluZVNoYXBlKFtwaXhlbFZhbHVlLCBvdGhlckV4dGVudFswXV0sIFtwaXhlbFZhbHVlLCBvdGhlckV4dGVudFsxXV0sIGdldEF4aXNEaW1JbmRleChheGlzKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdMaW5lJyxcbiAgICAgIHN1YlBpeGVsT3B0aW1pemU6IHRydWUsXG4gICAgICBzaGFwZTogdGFyZ2V0U2hhcGVcbiAgICB9O1xuICB9LFxuICBzaGFkb3c6IGZ1bmN0aW9uIChheGlzLCBwaXhlbFZhbHVlLCBvdGhlckV4dGVudCkge1xuICAgIHZhciBiYW5kV2lkdGggPSBNYXRoLm1heCgxLCBheGlzLmdldEJhbmRXaWR0aCgpKTtcbiAgICB2YXIgc3BhbiA9IG90aGVyRXh0ZW50WzFdIC0gb3RoZXJFeHRlbnRbMF07XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdSZWN0JyxcbiAgICAgIHNoYXBlOiB2aWV3SGVscGVyLm1ha2VSZWN0U2hhcGUoW3BpeGVsVmFsdWUgLSBiYW5kV2lkdGggLyAyLCBvdGhlckV4dGVudFswXV0sIFtiYW5kV2lkdGgsIHNwYW5dLCBnZXRBeGlzRGltSW5kZXgoYXhpcykpXG4gICAgfTtcbiAgfVxufTtcblxuZnVuY3Rpb24gZ2V0QXhpc0RpbUluZGV4KGF4aXMpIHtcbiAgcmV0dXJuIGF4aXMuZGltID09PSAneCcgPyAwIDogMTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FydGVzaWFuQXhpc1BvaW50ZXI7IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCBDb21wb25lbnRNb2RlbCBmcm9tICcuLi8uLi9tb2RlbC9Db21wb25lbnQuanMnO1xuXG52YXIgQXhpc1BvaW50ZXJNb2RlbCA9XG4vKiogQGNsYXNzICovXG5mdW5jdGlvbiAoX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhBeGlzUG9pbnRlck1vZGVsLCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIEF4aXNQb2ludGVyTW9kZWwoKSB7XG4gICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG5cbiAgICBfdGhpcy50eXBlID0gQXhpc1BvaW50ZXJNb2RlbC50eXBlO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIEF4aXNQb2ludGVyTW9kZWwudHlwZSA9ICdheGlzUG9pbnRlcic7XG4gIEF4aXNQb2ludGVyTW9kZWwuZGVmYXVsdE9wdGlvbiA9IHtcbiAgICAvLyAnYXV0bycgbWVhbnMgdGhhdCBzaG93IHdoZW4gdHJpZ2dlcmVkIGJ5IHRvb2x0aXAgb3IgaGFuZGxlLlxuICAgIHNob3c6ICdhdXRvJyxcbiAgICAvLyB6bGV2ZWw6IDAsXG4gICAgejogNTAsXG4gICAgdHlwZTogJ2xpbmUnLFxuICAgIC8vIGF4aXNwb2ludGVyIHRyaWdnZXJlZCBieSB0b290aXAgZGV0ZXJtaW5lIHNuYXAgYXV0b21hdGljYWxseSxcbiAgICAvLyBzZWUgYG1vZGVsSGVscGVyYC5cbiAgICBzbmFwOiBmYWxzZSxcbiAgICB0cmlnZ2VyVG9vbHRpcDogdHJ1ZSxcbiAgICB0cmlnZ2VyRW1waGFzaXM6IHRydWUsXG4gICAgdmFsdWU6IG51bGwsXG4gICAgc3RhdHVzOiBudWxsLFxuICAgIGxpbms6IFtdLFxuICAgIC8vIERvIG5vdCBzZXQgJ2F1dG8nIGhlcmUsIG90aGVyd2lzZSBnbG9iYWwgYW5pbWF0aW9uOiBmYWxzZVxuICAgIC8vIHdpbGwgbm90IGVmZmVjdCBhdCB0aGlzIGF4aXNwb2ludGVyLlxuICAgIGFuaW1hdGlvbjogbnVsbCxcbiAgICBhbmltYXRpb25EdXJhdGlvblVwZGF0ZTogMjAwLFxuICAgIGxpbmVTdHlsZToge1xuICAgICAgY29sb3I6ICcjQjlCRUM5JyxcbiAgICAgIHdpZHRoOiAxLFxuICAgICAgdHlwZTogJ2Rhc2hlZCdcbiAgICB9LFxuICAgIHNoYWRvd1N0eWxlOiB7XG4gICAgICBjb2xvcjogJ3JnYmEoMjEwLDIxOSwyMzgsMC4yKSdcbiAgICB9LFxuICAgIGxhYmVsOiB7XG4gICAgICBzaG93OiB0cnVlLFxuICAgICAgZm9ybWF0dGVyOiBudWxsLFxuICAgICAgcHJlY2lzaW9uOiAnYXV0bycsXG4gICAgICBtYXJnaW46IDMsXG4gICAgICBjb2xvcjogJyNmZmYnLFxuICAgICAgcGFkZGluZzogWzUsIDcsIDUsIDddLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiAnYXV0bycsXG4gICAgICBib3JkZXJDb2xvcjogbnVsbCxcbiAgICAgIGJvcmRlcldpZHRoOiAwLFxuICAgICAgYm9yZGVyUmFkaXVzOiAzXG4gICAgfSxcbiAgICBoYW5kbGU6IHtcbiAgICAgIHNob3c6IGZhbHNlLFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICBpY29uOiAnTTEwLjcsMTEuOXYtMS4zSDkuM3YxLjNjLTQuOSwwLjMtOC44LDQuNC04LjgsOS40YzAsNSwzLjksOS4xLDguOCw5LjRoMS4zYzQuOS0wLjMsOC44LTQuNCw4LjgtOS40QzE5LjUsMTYuMywxNS42LDEyLjIsMTAuNywxMS45eiBNMTMuMywyNC40SDYuN3YtMS4yaDYuNnogTTEzLjMsMjJINi43di0xLjJoNi42eiBNMTMuMywxOS42SDYuN3YtMS4yaDYuNnonLFxuICAgICAgc2l6ZTogNDUsXG4gICAgICAvLyBoYW5kbGUgbWFyZ2luIGlzIGZyb20gc3ltYm9sIGNlbnRlciB0byBheGlzLCB3aGljaCBpcyBzdGFibGUgd2hlbiBjaXJjdWxhciBtb3ZlLlxuICAgICAgbWFyZ2luOiA1MCxcbiAgICAgIC8vIGNvbG9yOiAnIzFiOGJiZCdcbiAgICAgIC8vIGNvbG9yOiAnIzJmNDU1NCdcbiAgICAgIGNvbG9yOiAnIzMzMycsXG4gICAgICBzaGFkb3dCbHVyOiAzLFxuICAgICAgc2hhZG93Q29sb3I6ICcjYWFhJyxcbiAgICAgIHNoYWRvd09mZnNldFg6IDAsXG4gICAgICBzaGFkb3dPZmZzZXRZOiAyLFxuICAgICAgLy8gRm9yIG1vYmlsZSBwZXJmb3JtYW5jZVxuICAgICAgdGhyb3R0bGU6IDQwXG4gICAgfVxuICB9O1xuICByZXR1cm4gQXhpc1BvaW50ZXJNb2RlbDtcbn0oQ29tcG9uZW50TW9kZWwpO1xuXG5leHBvcnQgZGVmYXVsdCBBeGlzUG9pbnRlck1vZGVsOyIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0ICogYXMgenJVdGlsIGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgZW52IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvZW52LmpzJztcbmltcG9ydCB7IG1ha2VJbm5lciB9IGZyb20gJy4uLy4uL3V0aWwvbW9kZWwuanMnO1xudmFyIGlubmVyID0gbWFrZUlubmVyKCk7XG52YXIgZWFjaCA9IHpyVXRpbC5lYWNoO1xuLyoqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcclxuICogQHBhcmFtIHttb2R1bGU6ZWNoYXJ0cy9FeHRlbnNpb25BUEl9IGFwaVxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXHJcbiAqICAgICAgcGFyYW06IHtzdHJpbmd9IGN1cnJUcmlnZ2VyXHJcbiAqICAgICAgcGFyYW06IHtBcnJheS48bnVtYmVyPn0gcG9pbnRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlcihrZXksIGFwaSwgaGFuZGxlcikge1xuICBpZiAoZW52Lm5vZGUpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgenIgPSBhcGkuZ2V0WnIoKTtcbiAgaW5uZXIoenIpLnJlY29yZHMgfHwgKGlubmVyKHpyKS5yZWNvcmRzID0ge30pO1xuICBpbml0R2xvYmFsTGlzdGVuZXJzKHpyLCBhcGkpO1xuICB2YXIgcmVjb3JkID0gaW5uZXIoenIpLnJlY29yZHNba2V5XSB8fCAoaW5uZXIoenIpLnJlY29yZHNba2V5XSA9IHt9KTtcbiAgcmVjb3JkLmhhbmRsZXIgPSBoYW5kbGVyO1xufVxuXG5mdW5jdGlvbiBpbml0R2xvYmFsTGlzdGVuZXJzKHpyLCBhcGkpIHtcbiAgaWYgKGlubmVyKHpyKS5pbml0aWFsaXplZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlubmVyKHpyKS5pbml0aWFsaXplZCA9IHRydWU7XG4gIHVzZUhhbmRsZXIoJ2NsaWNrJywgenJVdGlsLmN1cnJ5KGRvRW50ZXIsICdjbGljaycpKTtcbiAgdXNlSGFuZGxlcignbW91c2Vtb3ZlJywgenJVdGlsLmN1cnJ5KGRvRW50ZXIsICdtb3VzZW1vdmUnKSk7IC8vIHVzZUhhbmRsZXIoJ21vdXNlb3V0Jywgb25MZWF2ZSk7XG5cbiAgdXNlSGFuZGxlcignZ2xvYmFsb3V0Jywgb25MZWF2ZSk7XG5cbiAgZnVuY3Rpb24gdXNlSGFuZGxlcihldmVudFR5cGUsIGNiKSB7XG4gICAgenIub24oZXZlbnRUeXBlLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIGRpcyA9IG1ha2VEaXNwYXRjaEFjdGlvbihhcGkpO1xuICAgICAgZWFjaChpbm5lcih6cikucmVjb3JkcywgZnVuY3Rpb24gKHJlY29yZCkge1xuICAgICAgICByZWNvcmQgJiYgY2IocmVjb3JkLCBlLCBkaXMuZGlzcGF0Y2hBY3Rpb24pO1xuICAgICAgfSk7XG4gICAgICBkaXNwYXRjaFRvb2x0aXBGaW5hbGx5KGRpcy5wZW5kaW5ncywgYXBpKTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkaXNwYXRjaFRvb2x0aXBGaW5hbGx5KHBlbmRpbmdzLCBhcGkpIHtcbiAgdmFyIHNob3dMZW4gPSBwZW5kaW5ncy5zaG93VGlwLmxlbmd0aDtcbiAgdmFyIGhpZGVMZW4gPSBwZW5kaW5ncy5oaWRlVGlwLmxlbmd0aDtcbiAgdmFyIGFjdHVhbGx5UGF5bG9hZDtcblxuICBpZiAoc2hvd0xlbikge1xuICAgIGFjdHVhbGx5UGF5bG9hZCA9IHBlbmRpbmdzLnNob3dUaXBbc2hvd0xlbiAtIDFdO1xuICB9IGVsc2UgaWYgKGhpZGVMZW4pIHtcbiAgICBhY3R1YWxseVBheWxvYWQgPSBwZW5kaW5ncy5oaWRlVGlwW2hpZGVMZW4gLSAxXTtcbiAgfVxuXG4gIGlmIChhY3R1YWxseVBheWxvYWQpIHtcbiAgICBhY3R1YWxseVBheWxvYWQuZGlzcGF0Y2hBY3Rpb24gPSBudWxsO1xuICAgIGFwaS5kaXNwYXRjaEFjdGlvbihhY3R1YWxseVBheWxvYWQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG9uTGVhdmUocmVjb3JkLCBlLCBkaXNwYXRjaEFjdGlvbikge1xuICByZWNvcmQuaGFuZGxlcignbGVhdmUnLCBudWxsLCBkaXNwYXRjaEFjdGlvbik7XG59XG5cbmZ1bmN0aW9uIGRvRW50ZXIoY3VyclRyaWdnZXIsIHJlY29yZCwgZSwgZGlzcGF0Y2hBY3Rpb24pIHtcbiAgcmVjb3JkLmhhbmRsZXIoY3VyclRyaWdnZXIsIGUsIGRpc3BhdGNoQWN0aW9uKTtcbn1cblxuZnVuY3Rpb24gbWFrZURpc3BhdGNoQWN0aW9uKGFwaSkge1xuICB2YXIgcGVuZGluZ3MgPSB7XG4gICAgc2hvd1RpcDogW10sXG4gICAgaGlkZVRpcDogW11cbiAgfTsgLy8gRklYTUVcbiAgLy8gYmV0dGVyIGFwcHJvYWNoP1xuICAvLyAnc2hvd1RpcCcgYW5kICdoaWRlVGlwJyBjYW4gYmUgdHJpZ2dlcmVkIGJ5IGF4aXNQb2ludGVyIGFuZCB0b29sdGlwLFxuICAvLyB3aGljaCBtYXkgYmUgY29uZmxpY3QsIChheGlzUG9pbnRlciBjYWxsIHNob3dUaXAgYnV0IHRvb2x0aXAgY2FsbCBoaWRlVGlwKTtcbiAgLy8gU28gd2UgaGF2ZSB0byBhZGQgXCJmaW5hbCBzdGFnZVwiIHRvIG1lcmdlIHRob3NlIGRpc3BhdGNoZWQgYWN0aW9ucy5cblxuICB2YXIgZGlzcGF0Y2hBY3Rpb24gPSBmdW5jdGlvbiAocGF5bG9hZCkge1xuICAgIHZhciBwZW5kaW5nTGlzdCA9IHBlbmRpbmdzW3BheWxvYWQudHlwZV07XG5cbiAgICBpZiAocGVuZGluZ0xpc3QpIHtcbiAgICAgIHBlbmRpbmdMaXN0LnB1c2gocGF5bG9hZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBheWxvYWQuZGlzcGF0Y2hBY3Rpb24gPSBkaXNwYXRjaEFjdGlvbjtcbiAgICAgIGFwaS5kaXNwYXRjaEFjdGlvbihwYXlsb2FkKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBkaXNwYXRjaEFjdGlvbjogZGlzcGF0Y2hBY3Rpb24sXG4gICAgcGVuZGluZ3M6IHBlbmRpbmdzXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bnJlZ2lzdGVyKGtleSwgYXBpKSB7XG4gIGlmIChlbnYubm9kZSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciB6ciA9IGFwaS5nZXRacigpO1xuICB2YXIgcmVjb3JkID0gKGlubmVyKHpyKS5yZWNvcmRzIHx8IHt9KVtrZXldO1xuXG4gIGlmIChyZWNvcmQpIHtcbiAgICBpbm5lcih6cikucmVjb3Jkc1trZXldID0gbnVsbDtcbiAgfVxufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgKiBhcyBnbG9iYWxMaXN0ZW5lciBmcm9tICcuL2dsb2JhbExpc3RlbmVyLmpzJztcbmltcG9ydCBDb21wb25lbnRWaWV3IGZyb20gJy4uLy4uL3ZpZXcvQ29tcG9uZW50LmpzJztcblxudmFyIEF4aXNQb2ludGVyVmlldyA9XG4vKiogQGNsYXNzICovXG5mdW5jdGlvbiAoX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhBeGlzUG9pbnRlclZpZXcsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gQXhpc1BvaW50ZXJWaWV3KCkge1xuICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuXG4gICAgX3RoaXMudHlwZSA9IEF4aXNQb2ludGVyVmlldy50eXBlO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIEF4aXNQb2ludGVyVmlldy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGdsb2JhbEF4aXNQb2ludGVyTW9kZWwsIGVjTW9kZWwsIGFwaSkge1xuICAgIHZhciBnbG9iYWxUb29sdGlwTW9kZWwgPSBlY01vZGVsLmdldENvbXBvbmVudCgndG9vbHRpcCcpO1xuICAgIHZhciB0cmlnZ2VyT24gPSBnbG9iYWxBeGlzUG9pbnRlck1vZGVsLmdldCgndHJpZ2dlck9uJykgfHwgZ2xvYmFsVG9vbHRpcE1vZGVsICYmIGdsb2JhbFRvb2x0aXBNb2RlbC5nZXQoJ3RyaWdnZXJPbicpIHx8ICdtb3VzZW1vdmV8Y2xpY2snOyAvLyBSZWdpc3RlciBnbG9iYWwgbGlzdGVuZXIgaW4gQXhpc1BvaW50ZXJWaWV3IHRvIGVuYWJsZVxuICAgIC8vIEF4aXNQb2ludGVyVmlldyB0byBiZSBpbmRlcGVuZGVudCB0byBUb29sdGlwLlxuXG4gICAgZ2xvYmFsTGlzdGVuZXIucmVnaXN0ZXIoJ2F4aXNQb2ludGVyJywgYXBpLCBmdW5jdGlvbiAoY3VyclRyaWdnZXIsIGUsIGRpc3BhdGNoQWN0aW9uKSB7XG4gICAgICAvLyBJZiAnbm9uZScsIGl0IGlzIG5vdCBjb250cm9sbGVkIGJ5IG1vdXNlIHRvdGFsbHkuXG4gICAgICBpZiAodHJpZ2dlck9uICE9PSAnbm9uZScgJiYgKGN1cnJUcmlnZ2VyID09PSAnbGVhdmUnIHx8IHRyaWdnZXJPbi5pbmRleE9mKGN1cnJUcmlnZ2VyKSA+PSAwKSkge1xuICAgICAgICBkaXNwYXRjaEFjdGlvbih7XG4gICAgICAgICAgdHlwZTogJ3VwZGF0ZUF4aXNQb2ludGVyJyxcbiAgICAgICAgICBjdXJyVHJpZ2dlcjogY3VyclRyaWdnZXIsXG4gICAgICAgICAgeDogZSAmJiBlLm9mZnNldFgsXG4gICAgICAgICAgeTogZSAmJiBlLm9mZnNldFlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgQXhpc1BvaW50ZXJWaWV3LnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoZWNNb2RlbCwgYXBpKSB7XG4gICAgZ2xvYmFsTGlzdGVuZXIudW5yZWdpc3RlcignYXhpc1BvaW50ZXInLCBhcGkpO1xuICB9O1xuXG4gIEF4aXNQb2ludGVyVmlldy5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uIChlY01vZGVsLCBhcGkpIHtcbiAgICBnbG9iYWxMaXN0ZW5lci51bnJlZ2lzdGVyKCdheGlzUG9pbnRlcicsIGFwaSk7XG4gIH07XG5cbiAgQXhpc1BvaW50ZXJWaWV3LnR5cGUgPSAnYXhpc1BvaW50ZXInO1xuICByZXR1cm4gQXhpc1BvaW50ZXJWaWV3O1xufShDb21wb25lbnRWaWV3KTtcblxuZXhwb3J0IGRlZmF1bHQgQXhpc1BvaW50ZXJWaWV3OyIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0ICogYXMgenJVdGlsIGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgKiBhcyBtb2RlbFV0aWwgZnJvbSAnLi4vLi4vdXRpbC9tb2RlbC5qcyc7XG4vKipcclxuICogQHBhcmFtIGZpbmRlciBjb250YWlucyB7c2VyaWVzSW5kZXgsIGRhdGFJbmRleCwgZGF0YUluZGV4SW5zaWRlfVxyXG4gKiBAcGFyYW0gZWNNb2RlbFxyXG4gKiBAcmV0dXJuICB7cG9pbnQ6IFt4LCB5XSwgZWw6IC4uLn0gcG9pbnQgV2lsbCBub3QgYmUgbnVsbC5cclxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGZpbmRQb2ludEZyb21TZXJpZXMoZmluZGVyLCBlY01vZGVsKSB7XG4gIHZhciBwb2ludCA9IFtdO1xuICB2YXIgc2VyaWVzSW5kZXggPSBmaW5kZXIuc2VyaWVzSW5kZXg7XG4gIHZhciBzZXJpZXNNb2RlbDtcblxuICBpZiAoc2VyaWVzSW5kZXggPT0gbnVsbCB8fCAhKHNlcmllc01vZGVsID0gZWNNb2RlbC5nZXRTZXJpZXNCeUluZGV4KHNlcmllc0luZGV4KSkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcG9pbnQ6IFtdXG4gICAgfTtcbiAgfVxuXG4gIHZhciBkYXRhID0gc2VyaWVzTW9kZWwuZ2V0RGF0YSgpO1xuICB2YXIgZGF0YUluZGV4ID0gbW9kZWxVdGlsLnF1ZXJ5RGF0YUluZGV4KGRhdGEsIGZpbmRlcik7XG5cbiAgaWYgKGRhdGFJbmRleCA9PSBudWxsIHx8IGRhdGFJbmRleCA8IDAgfHwgenJVdGlsLmlzQXJyYXkoZGF0YUluZGV4KSkge1xuICAgIHJldHVybiB7XG4gICAgICBwb2ludDogW11cbiAgICB9O1xuICB9XG5cbiAgdmFyIGVsID0gZGF0YS5nZXRJdGVtR3JhcGhpY0VsKGRhdGFJbmRleCk7XG4gIHZhciBjb29yZFN5cyA9IHNlcmllc01vZGVsLmNvb3JkaW5hdGVTeXN0ZW07XG5cbiAgaWYgKHNlcmllc01vZGVsLmdldFRvb2x0aXBQb3NpdGlvbikge1xuICAgIHBvaW50ID0gc2VyaWVzTW9kZWwuZ2V0VG9vbHRpcFBvc2l0aW9uKGRhdGFJbmRleCkgfHwgW107XG4gIH0gZWxzZSBpZiAoY29vcmRTeXMgJiYgY29vcmRTeXMuZGF0YVRvUG9pbnQpIHtcbiAgICBpZiAoZmluZGVyLmlzU3RhY2tlZCkge1xuICAgICAgdmFyIGJhc2VBeGlzID0gY29vcmRTeXMuZ2V0QmFzZUF4aXMoKTtcbiAgICAgIHZhciB2YWx1ZUF4aXMgPSBjb29yZFN5cy5nZXRPdGhlckF4aXMoYmFzZUF4aXMpO1xuICAgICAgdmFyIHZhbHVlQXhpc0RpbSA9IHZhbHVlQXhpcy5kaW07XG4gICAgICB2YXIgYmFzZUF4aXNEaW0gPSBiYXNlQXhpcy5kaW07XG4gICAgICB2YXIgYmFzZURhdGFPZmZzZXQgPSB2YWx1ZUF4aXNEaW0gPT09ICd4JyB8fCB2YWx1ZUF4aXNEaW0gPT09ICdyYWRpdXMnID8gMSA6IDA7XG4gICAgICB2YXIgYmFzZURpbSA9IGRhdGEubWFwRGltZW5zaW9uKGJhc2VBeGlzRGltKTtcbiAgICAgIHZhciBzdGFja2VkRGF0YSA9IFtdO1xuICAgICAgc3RhY2tlZERhdGFbYmFzZURhdGFPZmZzZXRdID0gZGF0YS5nZXQoYmFzZURpbSwgZGF0YUluZGV4KTtcbiAgICAgIHN0YWNrZWREYXRhWzEgLSBiYXNlRGF0YU9mZnNldF0gPSBkYXRhLmdldChkYXRhLmdldENhbGN1bGF0aW9uSW5mbygnc3RhY2tSZXN1bHREaW1lbnNpb24nKSwgZGF0YUluZGV4KTtcbiAgICAgIHBvaW50ID0gY29vcmRTeXMuZGF0YVRvUG9pbnQoc3RhY2tlZERhdGEpIHx8IFtdO1xuICAgIH0gZWxzZSB7XG4gICAgICBwb2ludCA9IGNvb3JkU3lzLmRhdGFUb1BvaW50KGRhdGEuZ2V0VmFsdWVzKHpyVXRpbC5tYXAoY29vcmRTeXMuZGltZW5zaW9ucywgZnVuY3Rpb24gKGRpbSkge1xuICAgICAgICByZXR1cm4gZGF0YS5tYXBEaW1lbnNpb24oZGltKTtcbiAgICAgIH0pLCBkYXRhSW5kZXgpKSB8fCBbXTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZWwpIHtcbiAgICAvLyBVc2UgZ3JhcGhpYyBib3VuZGluZyByZWN0XG4gICAgdmFyIHJlY3QgPSBlbC5nZXRCb3VuZGluZ1JlY3QoKS5jbG9uZSgpO1xuICAgIHJlY3QuYXBwbHlUcmFuc2Zvcm0oZWwudHJhbnNmb3JtKTtcbiAgICBwb2ludCA9IFtyZWN0LnggKyByZWN0LndpZHRoIC8gMiwgcmVjdC55ICsgcmVjdC5oZWlnaHQgLyAyXTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcG9pbnQ6IHBvaW50LFxuICAgIGVsOiBlbFxuICB9O1xufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgbWFrZUlubmVyIH0gZnJvbSAnLi4vLi4vdXRpbC9tb2RlbC5qcyc7XG5pbXBvcnQgKiBhcyBtb2RlbEhlbHBlciBmcm9tICcuL21vZGVsSGVscGVyLmpzJztcbmltcG9ydCBmaW5kUG9pbnRGcm9tU2VyaWVzIGZyb20gJy4vZmluZFBvaW50RnJvbVNlcmllcy5qcyc7XG5pbXBvcnQgeyBlYWNoLCBjdXJyeSwgYmluZCwgZXh0ZW5kIH0gZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbnZhciBpbm5lciA9IG1ha2VJbm5lcigpO1xuLyoqXHJcbiAqIEJhc2ljIGxvZ2ljOiBjaGVjayBhbGwgYXhpcywgaWYgdGhleSBkbyBub3QgZGVtYW5kIHNob3cvaGlnaGxpZ2h0LFxyXG4gKiB0aGVuIGhpZGUvZG93bnBsYXkgdGhlbS5cclxuICpcclxuICogQHJldHVybiBjb250ZW50IG9mIGV2ZW50IG9iaiBmb3IgZWNoYXJ0cy5jb25uZWN0LlxyXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYXhpc1RyaWdnZXIocGF5bG9hZCwgZWNNb2RlbCwgYXBpKSB7XG4gIHZhciBjdXJyVHJpZ2dlciA9IHBheWxvYWQuY3VyclRyaWdnZXI7XG4gIHZhciBwb2ludCA9IFtwYXlsb2FkLngsIHBheWxvYWQueV07XG4gIHZhciBmaW5kZXIgPSBwYXlsb2FkO1xuICB2YXIgZGlzcGF0Y2hBY3Rpb24gPSBwYXlsb2FkLmRpc3BhdGNoQWN0aW9uIHx8IGJpbmQoYXBpLmRpc3BhdGNoQWN0aW9uLCBhcGkpO1xuICB2YXIgY29vcmRTeXNBeGVzSW5mbyA9IGVjTW9kZWwuZ2V0Q29tcG9uZW50KCdheGlzUG9pbnRlcicpLmNvb3JkU3lzQXhlc0luZm87IC8vIFBlbmRpbmdcbiAgLy8gU2VlICM2MTIxLiBCdXQgd2UgYXJlIG5vdCBhYmxlIHRvIHJlcHJvZHVjZSBpdCB5ZXQuXG5cbiAgaWYgKCFjb29yZFN5c0F4ZXNJbmZvKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGlsbGVnYWxQb2ludChwb2ludCkpIHtcbiAgICAvLyBVc2VkIGluIHRoZSBkZWZhdWx0IGJlaGF2aW9yIG9mIGBjb25uZWN0aW9uYDogdXNlIHRoZSBzYW1wbGUgc2VyaWVzSW5kZXhcbiAgICAvLyBhbmQgZGF0YUluZGV4LiBBbmQgYWxzbyB1c2VkIGluIHRoZSB0b29sdGlwVmlldyB0cmlnZ2VyLlxuICAgIHBvaW50ID0gZmluZFBvaW50RnJvbVNlcmllcyh7XG4gICAgICBzZXJpZXNJbmRleDogZmluZGVyLnNlcmllc0luZGV4LFxuICAgICAgLy8gRG8gbm90IHVzZSBkYXRhSW5kZXhJbnNpZGUgZnJvbSBvdGhlciBlYyBpbnN0YW5jZS5cbiAgICAgIC8vIEZJWE1FOiBhdXRvIGRldGVjdCBpdD9cbiAgICAgIGRhdGFJbmRleDogZmluZGVyLmRhdGFJbmRleFxuICAgIH0sIGVjTW9kZWwpLnBvaW50O1xuICB9XG5cbiAgdmFyIGlzSWxsZWdhbFBvaW50ID0gaWxsZWdhbFBvaW50KHBvaW50KTsgLy8gQXhpcyBhbmQgdmFsdWUgY2FuIGJlIHNwZWNpZmllZCB3aGVuIGNhbGxpbmcgZGlzcGF0Y2hBY3Rpb24oe3R5cGU6ICd1cGRhdGVBeGlzUG9pbnRlcid9KS5cbiAgLy8gTm90aWNlOiBJbiB0aGlzIGNhc2UsIGl0IGlzIGRpZmZpY3VsdCB0byBnZXQgdGhlIGBwb2ludGAgKHdoaWNoIGlzIG5lY2Vzc2FyeSB0byBzaG93XG4gIC8vIHRvb2x0aXAsIHNvIGlmIHBvaW50IGlzIG5vdCBnaXZlbiwgd2UganVzdCB1c2UgdGhlIHBvaW50IGZvdW5kIGJ5IHNhbXBsZSBzZXJpZXNJbmRleFxuICAvLyBhbmQgZGF0YUluZGV4LlxuXG4gIHZhciBpbnB1dEF4ZXNJbmZvID0gZmluZGVyLmF4ZXNJbmZvO1xuICB2YXIgYXhlc0luZm8gPSBjb29yZFN5c0F4ZXNJbmZvLmF4ZXNJbmZvO1xuICB2YXIgc2hvdWxkSGlkZSA9IGN1cnJUcmlnZ2VyID09PSAnbGVhdmUnIHx8IGlsbGVnYWxQb2ludChwb2ludCk7XG4gIHZhciBvdXRwdXRQYXlsb2FkID0ge307XG4gIHZhciBzaG93VmFsdWVNYXAgPSB7fTtcbiAgdmFyIGRhdGFCeUNvb3JkU3lzID0ge1xuICAgIGxpc3Q6IFtdLFxuICAgIG1hcDoge31cbiAgfTtcbiAgdmFyIHVwZGF0ZXJzID0ge1xuICAgIHNob3dQb2ludGVyOiBjdXJyeShzaG93UG9pbnRlciwgc2hvd1ZhbHVlTWFwKSxcbiAgICBzaG93VG9vbHRpcDogY3Vycnkoc2hvd1Rvb2x0aXAsIGRhdGFCeUNvb3JkU3lzKVxuICB9OyAvLyBQcm9jZXNzIGZvciB0cmlnZ2VyZWQgYXhlcy5cblxuICBlYWNoKGNvb3JkU3lzQXhlc0luZm8uY29vcmRTeXNNYXAsIGZ1bmN0aW9uIChjb29yZFN5cywgY29vcmRTeXNLZXkpIHtcbiAgICAvLyBJZiBhIHBvaW50IGdpdmVuLCBpdCBtdXN0IGJlIGNvbnRhaW5lZCBieSB0aGUgY29vcmRpbmF0ZSBzeXN0ZW0uXG4gICAgdmFyIGNvb3JkU3lzQ29udGFpbnNQb2ludCA9IGlzSWxsZWdhbFBvaW50IHx8IGNvb3JkU3lzLmNvbnRhaW5Qb2ludChwb2ludCk7XG4gICAgZWFjaChjb29yZFN5c0F4ZXNJbmZvLmNvb3JkU3lzQXhlc0luZm9bY29vcmRTeXNLZXldLCBmdW5jdGlvbiAoYXhpc0luZm8sIGtleSkge1xuICAgICAgdmFyIGF4aXMgPSBheGlzSW5mby5heGlzO1xuICAgICAgdmFyIGlucHV0QXhpc0luZm8gPSBmaW5kSW5wdXRBeGlzSW5mbyhpbnB1dEF4ZXNJbmZvLCBheGlzSW5mbyk7IC8vIElmIG5vIGlucHV0QXhlc0luZm8sIG5vIGF4aXMgaXMgcmVzdHJpY3RlZC5cblxuICAgICAgaWYgKCFzaG91bGRIaWRlICYmIGNvb3JkU3lzQ29udGFpbnNQb2ludCAmJiAoIWlucHV0QXhlc0luZm8gfHwgaW5wdXRBeGlzSW5mbykpIHtcbiAgICAgICAgdmFyIHZhbCA9IGlucHV0QXhpc0luZm8gJiYgaW5wdXRBeGlzSW5mby52YWx1ZTtcblxuICAgICAgICBpZiAodmFsID09IG51bGwgJiYgIWlzSWxsZWdhbFBvaW50KSB7XG4gICAgICAgICAgdmFsID0gYXhpcy5wb2ludFRvRGF0YShwb2ludCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YWwgIT0gbnVsbCAmJiBwcm9jZXNzT25BeGlzKGF4aXNJbmZvLCB2YWwsIHVwZGF0ZXJzLCBmYWxzZSwgb3V0cHV0UGF5bG9hZCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pOyAvLyBQcm9jZXNzIGZvciBsaW5rZWQgYXhlcy5cblxuICB2YXIgbGlua1RyaWdnZXJzID0ge307XG4gIGVhY2goYXhlc0luZm8sIGZ1bmN0aW9uICh0YXJBeGlzSW5mbywgdGFyS2V5KSB7XG4gICAgdmFyIGxpbmtHcm91cCA9IHRhckF4aXNJbmZvLmxpbmtHcm91cDsgLy8gSWYgYXhpcyBoYXMgYmVlbiB0cmlnZ2VyZWQgaW4gdGhlIHByZXZpb3VzIHN0YWdlLCBpdCBzaG91bGQgbm90IGJlIHRyaWdnZXJlZCBieSBsaW5rLlxuXG4gICAgaWYgKGxpbmtHcm91cCAmJiAhc2hvd1ZhbHVlTWFwW3RhcktleV0pIHtcbiAgICAgIGVhY2gobGlua0dyb3VwLmF4ZXNJbmZvLCBmdW5jdGlvbiAoc3JjQXhpc0luZm8sIHNyY0tleSkge1xuICAgICAgICB2YXIgc3JjVmFsSXRlbSA9IHNob3dWYWx1ZU1hcFtzcmNLZXldOyAvLyBJZiBzcmNWYWxJdGVtIGV4aXN0LCBzb3VyY2UgYXhpcyBpcyB0cmlnZ2VyZWQsIHNvIGxpbmsgdG8gdGFyZ2V0IGF4aXMuXG5cbiAgICAgICAgaWYgKHNyY0F4aXNJbmZvICE9PSB0YXJBeGlzSW5mbyAmJiBzcmNWYWxJdGVtKSB7XG4gICAgICAgICAgdmFyIHZhbCA9IHNyY1ZhbEl0ZW0udmFsdWU7XG4gICAgICAgICAgbGlua0dyb3VwLm1hcHBlciAmJiAodmFsID0gdGFyQXhpc0luZm8uYXhpcy5zY2FsZS5wYXJzZShsaW5rR3JvdXAubWFwcGVyKHZhbCwgbWFrZU1hcHBlclBhcmFtKHNyY0F4aXNJbmZvKSwgbWFrZU1hcHBlclBhcmFtKHRhckF4aXNJbmZvKSkpKTtcbiAgICAgICAgICBsaW5rVHJpZ2dlcnNbdGFyQXhpc0luZm8ua2V5XSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgZWFjaChsaW5rVHJpZ2dlcnMsIGZ1bmN0aW9uICh2YWwsIHRhcktleSkge1xuICAgIHByb2Nlc3NPbkF4aXMoYXhlc0luZm9bdGFyS2V5XSwgdmFsLCB1cGRhdGVycywgdHJ1ZSwgb3V0cHV0UGF5bG9hZCk7XG4gIH0pO1xuICB1cGRhdGVNb2RlbEFjdHVhbGx5KHNob3dWYWx1ZU1hcCwgYXhlc0luZm8sIG91dHB1dFBheWxvYWQpO1xuICBkaXNwYXRjaFRvb2x0aXBBY3R1YWxseShkYXRhQnlDb29yZFN5cywgcG9pbnQsIHBheWxvYWQsIGRpc3BhdGNoQWN0aW9uKTtcbiAgZGlzcGF0Y2hIaWdoRG93bkFjdHVhbGx5KGF4ZXNJbmZvLCBkaXNwYXRjaEFjdGlvbiwgYXBpKTtcbiAgcmV0dXJuIG91dHB1dFBheWxvYWQ7XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NPbkF4aXMoYXhpc0luZm8sIG5ld1ZhbHVlLCB1cGRhdGVycywgbm9TbmFwLCBvdXRwdXRGaW5kZXIpIHtcbiAgdmFyIGF4aXMgPSBheGlzSW5mby5heGlzO1xuXG4gIGlmIChheGlzLnNjYWxlLmlzQmxhbmsoKSB8fCAhYXhpcy5jb250YWluRGF0YShuZXdWYWx1ZSkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoIWF4aXNJbmZvLmludm9sdmVTZXJpZXMpIHtcbiAgICB1cGRhdGVycy5zaG93UG9pbnRlcihheGlzSW5mbywgbmV3VmFsdWUpO1xuICAgIHJldHVybjtcbiAgfSAvLyBIZWF2eSBjYWxjdWxhdGlvbi4gU28gcHV0IGl0IGFmdGVyIGF4aXMuY29udGFpbkRhdGEgY2hlY2tpbmcuXG5cblxuICB2YXIgcGF5bG9hZEluZm8gPSBidWlsZFBheWxvYWRzQnlTZXJpZXMobmV3VmFsdWUsIGF4aXNJbmZvKTtcbiAgdmFyIHBheWxvYWRCYXRjaCA9IHBheWxvYWRJbmZvLnBheWxvYWRCYXRjaDtcbiAgdmFyIHNuYXBUb1ZhbHVlID0gcGF5bG9hZEluZm8uc25hcFRvVmFsdWU7IC8vIEZpbGwgY29udGVudCBvZiBldmVudCBvYmogZm9yIGVjaGFydHMuY29ubmVjdC5cbiAgLy8gQnkgZGVmYXVsdCB1c2UgdGhlIGZpcnN0IGludm9sdmVkIHNlcmllcyBkYXRhIGFzIGEgc2FtcGxlIHRvIGNvbm5lY3QuXG5cbiAgaWYgKHBheWxvYWRCYXRjaFswXSAmJiBvdXRwdXRGaW5kZXIuc2VyaWVzSW5kZXggPT0gbnVsbCkge1xuICAgIGV4dGVuZChvdXRwdXRGaW5kZXIsIHBheWxvYWRCYXRjaFswXSk7XG4gIH0gLy8gSWYgbm8gbGlua1NvdXJjZSBpbnB1dCwgdGhpcyBwcm9jZXNzIGlzIGZvciBjb2xsZWN0aW5nIGxpbmtcbiAgLy8gdGFyZ2V0LCB3aGVyZSBzbmFwIHNob3VsZCBub3QgYmUgYWNjZXB0ZWQuXG5cblxuICBpZiAoIW5vU25hcCAmJiBheGlzSW5mby5zbmFwKSB7XG4gICAgaWYgKGF4aXMuY29udGFpbkRhdGEoc25hcFRvVmFsdWUpICYmIHNuYXBUb1ZhbHVlICE9IG51bGwpIHtcbiAgICAgIG5ld1ZhbHVlID0gc25hcFRvVmFsdWU7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlcnMuc2hvd1BvaW50ZXIoYXhpc0luZm8sIG5ld1ZhbHVlLCBwYXlsb2FkQmF0Y2gpOyAvLyBUb29sdGlwIHNob3VsZCBhbHdheXMgYmUgc25hcFRvVmFsdWUsIG90aGVyd2lzZSB0aGVyZSB3aWxsIGJlXG4gIC8vIGluY29ycmVjdCBcImF4aXMgdmFsdWUgfiBzZXJpZXMgdmFsdWVcIiBtYXBwaW5nIGRpc3BsYXllZCBpbiB0b29sdGlwLlxuXG4gIHVwZGF0ZXJzLnNob3dUb29sdGlwKGF4aXNJbmZvLCBwYXlsb2FkSW5mbywgc25hcFRvVmFsdWUpO1xufVxuXG5mdW5jdGlvbiBidWlsZFBheWxvYWRzQnlTZXJpZXModmFsdWUsIGF4aXNJbmZvKSB7XG4gIHZhciBheGlzID0gYXhpc0luZm8uYXhpcztcbiAgdmFyIGRpbSA9IGF4aXMuZGltO1xuICB2YXIgc25hcFRvVmFsdWUgPSB2YWx1ZTtcbiAgdmFyIHBheWxvYWRCYXRjaCA9IFtdO1xuICB2YXIgbWluRGlzdCA9IE51bWJlci5NQVhfVkFMVUU7XG4gIHZhciBtaW5EaWZmID0gLTE7XG4gIGVhY2goYXhpc0luZm8uc2VyaWVzTW9kZWxzLCBmdW5jdGlvbiAoc2VyaWVzLCBpZHgpIHtcbiAgICB2YXIgZGF0YURpbSA9IHNlcmllcy5nZXREYXRhKCkubWFwRGltZW5zaW9uc0FsbChkaW0pO1xuICAgIHZhciBzZXJpZXNOZXN0ZXN0VmFsdWU7XG4gICAgdmFyIGRhdGFJbmRpY2VzO1xuXG4gICAgaWYgKHNlcmllcy5nZXRBeGlzVG9vbHRpcERhdGEpIHtcbiAgICAgIHZhciByZXN1bHQgPSBzZXJpZXMuZ2V0QXhpc1Rvb2x0aXBEYXRhKGRhdGFEaW0sIHZhbHVlLCBheGlzKTtcbiAgICAgIGRhdGFJbmRpY2VzID0gcmVzdWx0LmRhdGFJbmRpY2VzO1xuICAgICAgc2VyaWVzTmVzdGVzdFZhbHVlID0gcmVzdWx0Lm5lc3Rlc3RWYWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YUluZGljZXMgPSBzZXJpZXMuZ2V0RGF0YSgpLmluZGljZXNPZk5lYXJlc3QoZGF0YURpbVswXSwgdmFsdWUsIC8vIEFkZCBhIHRocmVzaG9sZCB0byBhdm9pZCBmaW5kIHRoZSB3cm9uZyBkYXRhSW5kZXhcbiAgICAgIC8vIHdoZW4gZGF0YSBsZW5ndGggaXMgbm90IHNhbWUuXG4gICAgICAvLyBmYWxzZSxcbiAgICAgIGF4aXMudHlwZSA9PT0gJ2NhdGVnb3J5JyA/IDAuNSA6IG51bGwpO1xuXG4gICAgICBpZiAoIWRhdGFJbmRpY2VzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNlcmllc05lc3Rlc3RWYWx1ZSA9IHNlcmllcy5nZXREYXRhKCkuZ2V0KGRhdGFEaW1bMF0sIGRhdGFJbmRpY2VzWzBdKTtcbiAgICB9XG5cbiAgICBpZiAoc2VyaWVzTmVzdGVzdFZhbHVlID09IG51bGwgfHwgIWlzRmluaXRlKHNlcmllc05lc3Rlc3RWYWx1ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZGlmZiA9IHZhbHVlIC0gc2VyaWVzTmVzdGVzdFZhbHVlO1xuICAgIHZhciBkaXN0ID0gTWF0aC5hYnMoZGlmZik7IC8vIENvbnNpZGVyIGNhdGVnb3J5IGNhc2VcblxuICAgIGlmIChkaXN0IDw9IG1pbkRpc3QpIHtcbiAgICAgIGlmIChkaXN0IDwgbWluRGlzdCB8fCBkaWZmID49IDAgJiYgbWluRGlmZiA8IDApIHtcbiAgICAgICAgbWluRGlzdCA9IGRpc3Q7XG4gICAgICAgIG1pbkRpZmYgPSBkaWZmO1xuICAgICAgICBzbmFwVG9WYWx1ZSA9IHNlcmllc05lc3Rlc3RWYWx1ZTtcbiAgICAgICAgcGF5bG9hZEJhdGNoLmxlbmd0aCA9IDA7XG4gICAgICB9XG5cbiAgICAgIGVhY2goZGF0YUluZGljZXMsIGZ1bmN0aW9uIChkYXRhSW5kZXgpIHtcbiAgICAgICAgcGF5bG9hZEJhdGNoLnB1c2goe1xuICAgICAgICAgIHNlcmllc0luZGV4OiBzZXJpZXMuc2VyaWVzSW5kZXgsXG4gICAgICAgICAgZGF0YUluZGV4SW5zaWRlOiBkYXRhSW5kZXgsXG4gICAgICAgICAgZGF0YUluZGV4OiBzZXJpZXMuZ2V0RGF0YSgpLmdldFJhd0luZGV4KGRhdGFJbmRleClcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIHBheWxvYWRCYXRjaDogcGF5bG9hZEJhdGNoLFxuICAgIHNuYXBUb1ZhbHVlOiBzbmFwVG9WYWx1ZVxuICB9O1xufVxuXG5mdW5jdGlvbiBzaG93UG9pbnRlcihzaG93VmFsdWVNYXAsIGF4aXNJbmZvLCB2YWx1ZSwgcGF5bG9hZEJhdGNoKSB7XG4gIHNob3dWYWx1ZU1hcFtheGlzSW5mby5rZXldID0ge1xuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBwYXlsb2FkQmF0Y2g6IHBheWxvYWRCYXRjaFxuICB9O1xufVxuXG5mdW5jdGlvbiBzaG93VG9vbHRpcChkYXRhQnlDb29yZFN5cywgYXhpc0luZm8sIHBheWxvYWRJbmZvLCB2YWx1ZSkge1xuICB2YXIgcGF5bG9hZEJhdGNoID0gcGF5bG9hZEluZm8ucGF5bG9hZEJhdGNoO1xuICB2YXIgYXhpcyA9IGF4aXNJbmZvLmF4aXM7XG4gIHZhciBheGlzTW9kZWwgPSBheGlzLm1vZGVsO1xuICB2YXIgYXhpc1BvaW50ZXJNb2RlbCA9IGF4aXNJbmZvLmF4aXNQb2ludGVyTW9kZWw7IC8vIElmIG5vIGRhdGEsIGRvIG5vdCBjcmVhdGUgYW55dGhpbmcgaW4gZGF0YUJ5Q29vcmRTeXMsXG4gIC8vIHdob3NlIGxlbmd0aCB3aWxsIGJlIHVzZWQgdG8ganVkZ2Ugd2hldGhlciBkaXNwYXRjaCBhY3Rpb24uXG5cbiAgaWYgKCFheGlzSW5mby50cmlnZ2VyVG9vbHRpcCB8fCAhcGF5bG9hZEJhdGNoLmxlbmd0aCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBjb29yZFN5c01vZGVsID0gYXhpc0luZm8uY29vcmRTeXMubW9kZWw7XG4gIHZhciBjb29yZFN5c0tleSA9IG1vZGVsSGVscGVyLm1ha2VLZXkoY29vcmRTeXNNb2RlbCk7XG4gIHZhciBjb29yZFN5c0l0ZW0gPSBkYXRhQnlDb29yZFN5cy5tYXBbY29vcmRTeXNLZXldO1xuXG4gIGlmICghY29vcmRTeXNJdGVtKSB7XG4gICAgY29vcmRTeXNJdGVtID0gZGF0YUJ5Q29vcmRTeXMubWFwW2Nvb3JkU3lzS2V5XSA9IHtcbiAgICAgIGNvb3JkU3lzSWQ6IGNvb3JkU3lzTW9kZWwuaWQsXG4gICAgICBjb29yZFN5c0luZGV4OiBjb29yZFN5c01vZGVsLmNvbXBvbmVudEluZGV4LFxuICAgICAgY29vcmRTeXNUeXBlOiBjb29yZFN5c01vZGVsLnR5cGUsXG4gICAgICBjb29yZFN5c01haW5UeXBlOiBjb29yZFN5c01vZGVsLm1haW5UeXBlLFxuICAgICAgZGF0YUJ5QXhpczogW11cbiAgICB9O1xuICAgIGRhdGFCeUNvb3JkU3lzLmxpc3QucHVzaChjb29yZFN5c0l0ZW0pO1xuICB9XG5cbiAgY29vcmRTeXNJdGVtLmRhdGFCeUF4aXMucHVzaCh7XG4gICAgYXhpc0RpbTogYXhpcy5kaW0sXG4gICAgYXhpc0luZGV4OiBheGlzTW9kZWwuY29tcG9uZW50SW5kZXgsXG4gICAgYXhpc1R5cGU6IGF4aXNNb2RlbC50eXBlLFxuICAgIGF4aXNJZDogYXhpc01vZGVsLmlkLFxuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAvLyBDYXVzdGlvbjogdmlld0hlbHBlci5nZXRWYWx1ZUxhYmVsIGlzIGFjdHVhbGx5IG9uIFwidmlldyBzdGFnZVwiLCB3aGljaFxuICAgIC8vIGRlcGVuZHMgdGhhdCBhbGwgbW9kZWxzIGhhdmUgYmVlbiB1cGRhdGVkLiBTbyBpdCBzaG91bGQgbm90IGJlIHBlcmZvcm1lZFxuICAgIC8vIGhlcmUuIENvbnNpZGVyaW5nIGF4aXNQb2ludGVyTW9kZWwgdXNlZCBoZXJlIGlzIHZvbGF0aWxlLCB3aGljaCBpcyBoYXJkXG4gICAgLy8gdG8gYmUgcmV0cmlldmUgaW4gVG9vbHRpcFZpZXcsIHdlIHByZXBhcmUgcGFyYW1ldGVycyBoZXJlLlxuICAgIHZhbHVlTGFiZWxPcHQ6IHtcbiAgICAgIHByZWNpc2lvbjogYXhpc1BvaW50ZXJNb2RlbC5nZXQoWydsYWJlbCcsICdwcmVjaXNpb24nXSksXG4gICAgICBmb3JtYXR0ZXI6IGF4aXNQb2ludGVyTW9kZWwuZ2V0KFsnbGFiZWwnLCAnZm9ybWF0dGVyJ10pXG4gICAgfSxcbiAgICBzZXJpZXNEYXRhSW5kaWNlczogcGF5bG9hZEJhdGNoLnNsaWNlKClcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZU1vZGVsQWN0dWFsbHkoc2hvd1ZhbHVlTWFwLCBheGVzSW5mbywgb3V0cHV0UGF5bG9hZCkge1xuICB2YXIgb3V0cHV0QXhlc0luZm8gPSBvdXRwdXRQYXlsb2FkLmF4ZXNJbmZvID0gW107IC8vIEJhc2ljIGxvZ2ljOiBJZiBubyAnc2hvdycgcmVxdWlyZWQsICdoaWRlJyB0aGlzIGF4aXNQb2ludGVyLlxuXG4gIGVhY2goYXhlc0luZm8sIGZ1bmN0aW9uIChheGlzSW5mbywga2V5KSB7XG4gICAgdmFyIG9wdGlvbiA9IGF4aXNJbmZvLmF4aXNQb2ludGVyTW9kZWwub3B0aW9uO1xuICAgIHZhciB2YWxJdGVtID0gc2hvd1ZhbHVlTWFwW2tleV07XG5cbiAgICBpZiAodmFsSXRlbSkge1xuICAgICAgIWF4aXNJbmZvLnVzZUhhbmRsZSAmJiAob3B0aW9uLnN0YXR1cyA9ICdzaG93Jyk7XG4gICAgICBvcHRpb24udmFsdWUgPSB2YWxJdGVtLnZhbHVlOyAvLyBGb3IgbGFiZWwgZm9ybWF0dGVyIHBhcmFtIGFuZCBoaWdobGlnaHQuXG5cbiAgICAgIG9wdGlvbi5zZXJpZXNEYXRhSW5kaWNlcyA9ICh2YWxJdGVtLnBheWxvYWRCYXRjaCB8fCBbXSkuc2xpY2UoKTtcbiAgICB9IC8vIFdoZW4gYWx3YXlzIHNob3cgKGUuZy4sIGhhbmRsZSB1c2VkKSwgcmVtYWluXG4gICAgLy8gb3JpZ2luYWwgdmFsdWUgYW5kIHN0YXR1cy5cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gSWYgaGlkZSwgdmFsdWUgc3RpbGwgbmVlZCB0byBiZSBzZXQsIGNvbnNpZGVyXG4gICAgICAgIC8vIGNsaWNrIGxlZ2VuZCB0byB0b2dnbGUgYXhpcyBibGFuay5cbiAgICAgICAgIWF4aXNJbmZvLnVzZUhhbmRsZSAmJiAob3B0aW9uLnN0YXR1cyA9ICdoaWRlJyk7XG4gICAgICB9IC8vIElmIHN0YXR1cyBpcyAnaGlkZScsIHNob3VsZCBiZSBubyBpbmZvIGluIHBheWxvYWQuXG5cblxuICAgIG9wdGlvbi5zdGF0dXMgPT09ICdzaG93JyAmJiBvdXRwdXRBeGVzSW5mby5wdXNoKHtcbiAgICAgIGF4aXNEaW06IGF4aXNJbmZvLmF4aXMuZGltLFxuICAgICAgYXhpc0luZGV4OiBheGlzSW5mby5heGlzLm1vZGVsLmNvbXBvbmVudEluZGV4LFxuICAgICAgdmFsdWU6IG9wdGlvbi52YWx1ZVxuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZGlzcGF0Y2hUb29sdGlwQWN0dWFsbHkoZGF0YUJ5Q29vcmRTeXMsIHBvaW50LCBwYXlsb2FkLCBkaXNwYXRjaEFjdGlvbikge1xuICAvLyBCYXNpYyBsb2dpYzogSWYgbm8gc2hvd1RpcCByZXF1aXJlZCwgaGlkZVRpcCB3aWxsIGJlIGRpc3BhdGNoZWQuXG4gIGlmIChpbGxlZ2FsUG9pbnQocG9pbnQpIHx8ICFkYXRhQnlDb29yZFN5cy5saXN0Lmxlbmd0aCkge1xuICAgIGRpc3BhdGNoQWN0aW9uKHtcbiAgICAgIHR5cGU6ICdoaWRlVGlwJ1xuICAgIH0pO1xuICAgIHJldHVybjtcbiAgfSAvLyBJbiBtb3N0IGNhc2Ugb25seSBvbmUgYXhpcyAob3IgZXZlbnQgb25lIHNlcmllcyBpcyB1c2VkKS4gSXQgaXNcbiAgLy8gY29udmVuaWVudCB0byBmZXRjaCBwYXlsb2FkLnNlcmllc0luZGV4IGFuZCBwYXlsb2FkLmRhdGFJbmRleFxuICAvLyBkaXJlY3RseS4gU28gcHV0IHRoZSBmaXJzdCBzZXJpZXNJbmRleCBhbmQgZGF0YUluZGV4IG9mIHRoZSBmaXJzdFxuICAvLyBheGlzIG9uIHRoZSBwYXlsb2FkLlxuXG5cbiAgdmFyIHNhbXBsZUl0ZW0gPSAoKGRhdGFCeUNvb3JkU3lzLmxpc3RbMF0uZGF0YUJ5QXhpc1swXSB8fCB7fSkuc2VyaWVzRGF0YUluZGljZXMgfHwgW10pWzBdIHx8IHt9O1xuICBkaXNwYXRjaEFjdGlvbih7XG4gICAgdHlwZTogJ3Nob3dUaXAnLFxuICAgIGVzY2FwZUNvbm5lY3Q6IHRydWUsXG4gICAgeDogcG9pbnRbMF0sXG4gICAgeTogcG9pbnRbMV0sXG4gICAgdG9vbHRpcE9wdGlvbjogcGF5bG9hZC50b29sdGlwT3B0aW9uLFxuICAgIHBvc2l0aW9uOiBwYXlsb2FkLnBvc2l0aW9uLFxuICAgIGRhdGFJbmRleEluc2lkZTogc2FtcGxlSXRlbS5kYXRhSW5kZXhJbnNpZGUsXG4gICAgZGF0YUluZGV4OiBzYW1wbGVJdGVtLmRhdGFJbmRleCxcbiAgICBzZXJpZXNJbmRleDogc2FtcGxlSXRlbS5zZXJpZXNJbmRleCxcbiAgICBkYXRhQnlDb29yZFN5czogZGF0YUJ5Q29vcmRTeXMubGlzdFxuICB9KTtcbn1cblxuZnVuY3Rpb24gZGlzcGF0Y2hIaWdoRG93bkFjdHVhbGx5KGF4ZXNJbmZvLCBkaXNwYXRjaEFjdGlvbiwgYXBpKSB7XG4gIC8vIEZJWE1FXG4gIC8vIGhpZ2hsaWdodCBzdGF0dXMgbW9kaWZpY2F0aW9uIHNob3VsZCBiZSBhIHN0YWdlIG9mIG1haW4gcHJvY2Vzcz9cbiAgLy8gKENvbnNpZGVyIGNvbmZpbGN0IChlLmcuLCBsZWdlbmQgYW5kIGF4aXNQb2ludGVyKSBhbmQgc2V0T3B0aW9uKVxuICB2YXIgenIgPSBhcGkuZ2V0WnIoKTtcbiAgdmFyIGhpZ2hEb3duS2V5ID0gJ2F4aXNQb2ludGVyTGFzdEhpZ2hsaWdodHMnO1xuICB2YXIgbGFzdEhpZ2hsaWdodHMgPSBpbm5lcih6cilbaGlnaERvd25LZXldIHx8IHt9O1xuICB2YXIgbmV3SGlnaGxpZ2h0cyA9IGlubmVyKHpyKVtoaWdoRG93bktleV0gPSB7fTsgLy8gVXBkYXRlIGhpZ2hsaWdodC9kb3ducGxheSBzdGF0dXMgYWNjb3JkaW5nIHRvIGF4aXNQb2ludGVyIG1vZGVsLlxuICAvLyBCdWlsZCBoYXNoIG1hcCBhbmQgcmVtb3ZlIGR1cGxpY2F0ZSBpbmNpZGVudGFsbHkuXG5cbiAgZWFjaChheGVzSW5mbywgZnVuY3Rpb24gKGF4aXNJbmZvLCBrZXkpIHtcbiAgICB2YXIgb3B0aW9uID0gYXhpc0luZm8uYXhpc1BvaW50ZXJNb2RlbC5vcHRpb247XG4gICAgb3B0aW9uLnN0YXR1cyA9PT0gJ3Nob3cnICYmIGF4aXNJbmZvLnRyaWdnZXJFbXBoYXNpcyAmJiBlYWNoKG9wdGlvbi5zZXJpZXNEYXRhSW5kaWNlcywgZnVuY3Rpb24gKGJhdGNoSXRlbSkge1xuICAgICAgdmFyIGtleSA9IGJhdGNoSXRlbS5zZXJpZXNJbmRleCArICcgfCAnICsgYmF0Y2hJdGVtLmRhdGFJbmRleDtcbiAgICAgIG5ld0hpZ2hsaWdodHNba2V5XSA9IGJhdGNoSXRlbTtcbiAgICB9KTtcbiAgfSk7IC8vIERpZmYuXG5cbiAgdmFyIHRvSGlnaGxpZ2h0ID0gW107XG4gIHZhciB0b0Rvd25wbGF5ID0gW107XG4gIGVhY2gobGFzdEhpZ2hsaWdodHMsIGZ1bmN0aW9uIChiYXRjaEl0ZW0sIGtleSkge1xuICAgICFuZXdIaWdobGlnaHRzW2tleV0gJiYgdG9Eb3ducGxheS5wdXNoKGJhdGNoSXRlbSk7XG4gIH0pO1xuICBlYWNoKG5ld0hpZ2hsaWdodHMsIGZ1bmN0aW9uIChiYXRjaEl0ZW0sIGtleSkge1xuICAgICFsYXN0SGlnaGxpZ2h0c1trZXldICYmIHRvSGlnaGxpZ2h0LnB1c2goYmF0Y2hJdGVtKTtcbiAgfSk7XG4gIHRvRG93bnBsYXkubGVuZ3RoICYmIGFwaS5kaXNwYXRjaEFjdGlvbih7XG4gICAgdHlwZTogJ2Rvd25wbGF5JyxcbiAgICBlc2NhcGVDb25uZWN0OiB0cnVlLFxuICAgIC8vIE5vdCBibHVyIG90aGVycyB3aGVuIGhpZ2hsaWdodCBpbiBheGlzUG9pbnRlci5cbiAgICBub3RCbHVyOiB0cnVlLFxuICAgIGJhdGNoOiB0b0Rvd25wbGF5XG4gIH0pO1xuICB0b0hpZ2hsaWdodC5sZW5ndGggJiYgYXBpLmRpc3BhdGNoQWN0aW9uKHtcbiAgICB0eXBlOiAnaGlnaGxpZ2h0JyxcbiAgICBlc2NhcGVDb25uZWN0OiB0cnVlLFxuICAgIC8vIE5vdCBibHVyIG90aGVycyB3aGVuIGhpZ2hsaWdodCBpbiBheGlzUG9pbnRlci5cbiAgICBub3RCbHVyOiB0cnVlLFxuICAgIGJhdGNoOiB0b0hpZ2hsaWdodFxuICB9KTtcbn1cblxuZnVuY3Rpb24gZmluZElucHV0QXhpc0luZm8oaW5wdXRBeGVzSW5mbywgYXhpc0luZm8pIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCAoaW5wdXRBeGVzSW5mbyB8fCBbXSkubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaW5wdXRBeGlzSW5mbyA9IGlucHV0QXhlc0luZm9baV07XG5cbiAgICBpZiAoYXhpc0luZm8uYXhpcy5kaW0gPT09IGlucHV0QXhpc0luZm8uYXhpc0RpbSAmJiBheGlzSW5mby5heGlzLm1vZGVsLmNvbXBvbmVudEluZGV4ID09PSBpbnB1dEF4aXNJbmZvLmF4aXNJbmRleCkge1xuICAgICAgcmV0dXJuIGlucHV0QXhpc0luZm87XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIG1ha2VNYXBwZXJQYXJhbShheGlzSW5mbykge1xuICB2YXIgYXhpc01vZGVsID0gYXhpc0luZm8uYXhpcy5tb2RlbDtcbiAgdmFyIGl0ZW0gPSB7fTtcbiAgdmFyIGRpbSA9IGl0ZW0uYXhpc0RpbSA9IGF4aXNJbmZvLmF4aXMuZGltO1xuICBpdGVtLmF4aXNJbmRleCA9IGl0ZW1bZGltICsgJ0F4aXNJbmRleCddID0gYXhpc01vZGVsLmNvbXBvbmVudEluZGV4O1xuICBpdGVtLmF4aXNOYW1lID0gaXRlbVtkaW0gKyAnQXhpc05hbWUnXSA9IGF4aXNNb2RlbC5uYW1lO1xuICBpdGVtLmF4aXNJZCA9IGl0ZW1bZGltICsgJ0F4aXNJZCddID0gYXhpc01vZGVsLmlkO1xuICByZXR1cm4gaXRlbTtcbn1cblxuZnVuY3Rpb24gaWxsZWdhbFBvaW50KHBvaW50KSB7XG4gIHJldHVybiAhcG9pbnQgfHwgcG9pbnRbMF0gPT0gbnVsbCB8fCBpc05hTihwb2ludFswXSkgfHwgcG9pbnRbMV0gPT0gbnVsbCB8fCBpc05hTihwb2ludFsxXSk7XG59IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgQXhpc1ZpZXcgZnJvbSAnLi4vYXhpcy9BeGlzVmlldy5qcyc7XG5pbXBvcnQgQ2FydGVzaWFuQXhpc1BvaW50ZXIgZnJvbSAnLi9DYXJ0ZXNpYW5BeGlzUG9pbnRlci5qcyc7XG5pbXBvcnQgQXhpc1BvaW50ZXJNb2RlbCBmcm9tICcuL0F4aXNQb2ludGVyTW9kZWwuanMnO1xuaW1wb3J0IEF4aXNQb2ludGVyVmlldyBmcm9tICcuL0F4aXNQb2ludGVyVmlldy5qcyc7XG5pbXBvcnQgeyBpc0FycmF5IH0gZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbmltcG9ydCB7IGNvbGxlY3QgfSBmcm9tICcuL21vZGVsSGVscGVyLmpzJztcbmltcG9ydCBheGlzVHJpZ2dlciBmcm9tICcuL2F4aXNUcmlnZ2VyLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsKHJlZ2lzdGVycykge1xuICAvLyBDYXJ0ZXNpYW5BeGlzUG9pbnRlciBpcyBub3Qgc3VwcG9zZWQgdG8gYmUgcmVxdWlyZWQgaGVyZS4gQnV0IGNvbnNpZGVyXG4gIC8vIGVjaGFydHMuc2ltcGxlLmpzIGFuZCBvbmxpbmUgYnVpbGQgdG9vbHRpcCwgd2hpY2ggb25seSByZXF1aXJlIGdyaWRTaW1wbGUsXG4gIC8vIENhcnRlc2lhbkF4aXNQb2ludGVyIHNob3VsZCBiZSBhYmxlIHRvIHJlcXVpcmVkIHNvbWV3aGVyZS5cbiAgQXhpc1ZpZXcucmVnaXN0ZXJBeGlzUG9pbnRlckNsYXNzKCdDYXJ0ZXNpYW5BeGlzUG9pbnRlcicsIENhcnRlc2lhbkF4aXNQb2ludGVyKTtcbiAgcmVnaXN0ZXJzLnJlZ2lzdGVyQ29tcG9uZW50TW9kZWwoQXhpc1BvaW50ZXJNb2RlbCk7XG4gIHJlZ2lzdGVycy5yZWdpc3RlckNvbXBvbmVudFZpZXcoQXhpc1BvaW50ZXJWaWV3KTtcbiAgcmVnaXN0ZXJzLnJlZ2lzdGVyUHJlcHJvY2Vzc29yKGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAvLyBBbHdheXMgaGFzIGEgZ2xvYmFsIGF4aXNQb2ludGVyTW9kZWwgZm9yIGRlZmF1bHQgc2V0dGluZy5cbiAgICBpZiAob3B0aW9uKSB7XG4gICAgICAoIW9wdGlvbi5heGlzUG9pbnRlciB8fCBvcHRpb24uYXhpc1BvaW50ZXIubGVuZ3RoID09PSAwKSAmJiAob3B0aW9uLmF4aXNQb2ludGVyID0ge30pO1xuICAgICAgdmFyIGxpbmsgPSBvcHRpb24uYXhpc1BvaW50ZXIubGluazsgLy8gTm9ybWFsaXplIHRvIGFycmF5IHRvIGF2b2lkIG9iamVjdCBtZXJnaW4uIEJ1dCBpZiBsaW5rXG4gICAgICAvLyBpcyBub3Qgc2V0LCByZW1haW4gbnVsbC91bmRlZmluZWQsIG90aGVyd2lzZSBpdCB3aWxsXG4gICAgICAvLyBvdmVycmlkZSBleGlzdGVudCBsaW5rIHNldHRpbmcuXG5cbiAgICAgIGlmIChsaW5rICYmICFpc0FycmF5KGxpbmspKSB7XG4gICAgICAgIG9wdGlvbi5heGlzUG9pbnRlci5saW5rID0gW2xpbmtdO1xuICAgICAgfVxuICAgIH1cbiAgfSk7IC8vIFRoaXMgcHJvY2VzcyBzaG91bGQgcHJvZm9ybWVkIGFmdGVyIGNvb3JkaW5hdGUgc3lzdGVtcyBjcmVhdGVkXG4gIC8vIGFuZCBzZXJpZXMgZGF0YSBwcm9jZXNzZWQuIFNvIHB1dCBpdCBvbiBzdGF0aXN0aWMgcHJvY2Vzc2luZyBzdGFnZS5cblxuICByZWdpc3RlcnMucmVnaXN0ZXJQcm9jZXNzb3IocmVnaXN0ZXJzLlBSSU9SSVRZLlBST0NFU1NPUi5TVEFUSVNUSUMsIGZ1bmN0aW9uIChlY01vZGVsLCBhcGkpIHtcbiAgICAvLyBCdWlsZCBheGlzUG9pbnRlck1vZGVsLCBtZXJnaW4gdG9vbHRpcC5heGlzUG9pbnRlciBtb2RlbCBmb3IgZWFjaCBheGlzLlxuICAgIC8vIGFsbEF4ZXNJbmZvIHNob3VsZCBiZSB1cGRhdGVkIHdoZW4gc2V0T3B0aW9uIHBlcmZvcm1lZC5cbiAgICBlY01vZGVsLmdldENvbXBvbmVudCgnYXhpc1BvaW50ZXInKS5jb29yZFN5c0F4ZXNJbmZvID0gY29sbGVjdChlY01vZGVsLCBhcGkpO1xuICB9KTsgLy8gQnJvYWRjYXN0IHRvIGFsbCB2aWV3cy5cblxuICByZWdpc3RlcnMucmVnaXN0ZXJBY3Rpb24oe1xuICAgIHR5cGU6ICd1cGRhdGVBeGlzUG9pbnRlcicsXG4gICAgZXZlbnQ6ICd1cGRhdGVBeGlzUG9pbnRlcicsXG4gICAgdXBkYXRlOiAnOnVwZGF0ZUF4aXNQb2ludGVyJ1xuICB9LCBheGlzVHJpZ2dlcik7XG59IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG4vLyBAdHMtbm9jaGVja1xuaW1wb3J0IHsgZ2V0TGF5b3V0UmVjdCwgYm94IGFzIGxheW91dEJveCwgcG9zaXRpb25FbGVtZW50IH0gZnJvbSAnLi4vLi4vdXRpbC9sYXlvdXQuanMnO1xuaW1wb3J0ICogYXMgZm9ybWF0VXRpbCBmcm9tICcuLi8uLi91dGlsL2Zvcm1hdC5qcyc7XG5pbXBvcnQgKiBhcyBncmFwaGljIGZyb20gJy4uLy4uL3V0aWwvZ3JhcGhpYy5qcyc7XG4vKipcclxuICogTGF5b3V0IGxpc3QgbGlrZSBjb21wb25lbnQuXHJcbiAqIEl0IHdpbGwgYm94IGxheW91dCBlYWNoIGl0ZW1zIGluIGdyb3VwIG9mIGNvbXBvbmVudCBhbmQgdGhlbiBwb3NpdGlvbiB0aGUgd2hvbGUgZ3JvdXAgaW4gdGhlIHZpZXdwb3J0XHJcbiAqIEBwYXJhbSB7bW9kdWxlOnpyZW5kZXIvZ3JvdXAvR3JvdXB9IGdyb3VwXHJcbiAqIEBwYXJhbSB7bW9kdWxlOmVjaGFydHMvbW9kZWwvQ29tcG9uZW50fSBjb21wb25lbnRNb2RlbFxyXG4gKiBAcGFyYW0ge21vZHVsZTplY2hhcnRzL0V4dGVuc2lvbkFQSX1cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsYXlvdXQoZ3JvdXAsIGNvbXBvbmVudE1vZGVsLCBhcGkpIHtcbiAgdmFyIGJveExheW91dFBhcmFtcyA9IGNvbXBvbmVudE1vZGVsLmdldEJveExheW91dFBhcmFtcygpO1xuICB2YXIgcGFkZGluZyA9IGNvbXBvbmVudE1vZGVsLmdldCgncGFkZGluZycpO1xuICB2YXIgdmlld3BvcnRTaXplID0ge1xuICAgIHdpZHRoOiBhcGkuZ2V0V2lkdGgoKSxcbiAgICBoZWlnaHQ6IGFwaS5nZXRIZWlnaHQoKVxuICB9O1xuICB2YXIgcmVjdCA9IGdldExheW91dFJlY3QoYm94TGF5b3V0UGFyYW1zLCB2aWV3cG9ydFNpemUsIHBhZGRpbmcpO1xuICBsYXlvdXRCb3goY29tcG9uZW50TW9kZWwuZ2V0KCdvcmllbnQnKSwgZ3JvdXAsIGNvbXBvbmVudE1vZGVsLmdldCgnaXRlbUdhcCcpLCByZWN0LndpZHRoLCByZWN0LmhlaWdodCk7XG4gIHBvc2l0aW9uRWxlbWVudChncm91cCwgYm94TGF5b3V0UGFyYW1zLCB2aWV3cG9ydFNpemUsIHBhZGRpbmcpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VCYWNrZ3JvdW5kKHJlY3QsIGNvbXBvbmVudE1vZGVsKSB7XG4gIHZhciBwYWRkaW5nID0gZm9ybWF0VXRpbC5ub3JtYWxpemVDc3NBcnJheShjb21wb25lbnRNb2RlbC5nZXQoJ3BhZGRpbmcnKSk7XG4gIHZhciBzdHlsZSA9IGNvbXBvbmVudE1vZGVsLmdldEl0ZW1TdHlsZShbJ2NvbG9yJywgJ29wYWNpdHknXSk7XG4gIHN0eWxlLmZpbGwgPSBjb21wb25lbnRNb2RlbC5nZXQoJ2JhY2tncm91bmRDb2xvcicpO1xuICByZWN0ID0gbmV3IGdyYXBoaWMuUmVjdCh7XG4gICAgc2hhcGU6IHtcbiAgICAgIHg6IHJlY3QueCAtIHBhZGRpbmdbM10sXG4gICAgICB5OiByZWN0LnkgLSBwYWRkaW5nWzBdLFxuICAgICAgd2lkdGg6IHJlY3Qud2lkdGggKyBwYWRkaW5nWzFdICsgcGFkZGluZ1szXSxcbiAgICAgIGhlaWdodDogcmVjdC5oZWlnaHQgKyBwYWRkaW5nWzBdICsgcGFkZGluZ1syXSxcbiAgICAgIHI6IGNvbXBvbmVudE1vZGVsLmdldCgnYm9yZGVyUmFkaXVzJylcbiAgICB9LFxuICAgIHN0eWxlOiBzdHlsZSxcbiAgICBzaWxlbnQ6IHRydWUsXG4gICAgejI6IC0xXG4gIH0pOyAvLyBGSVhNRVxuICAvLyBgc3ViUGl4ZWxPcHRpbWl6ZVJlY3RgIG1heSBicmluZyBzb21lIGdhcCBiZXR3ZWVuIGVkZ2Ugb2Ygdmlld3BhcnRcbiAgLy8gYW5kIGJhY2tncm91bmQgcmVjdCB3aGVuIHNldHRpbmcgbGlrZSBgbGVmdDogMGAsIGB0b3A6IDBgLlxuICAvLyBncmFwaGljLnN1YlBpeGVsT3B0aW1pemVSZWN0KHJlY3QpO1xuXG4gIHJldHVybiByZWN0O1xufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgQ29tcG9uZW50TW9kZWwgZnJvbSAnLi4vLi4vbW9kZWwvQ29tcG9uZW50LmpzJztcblxudmFyIFRvb2x0aXBNb2RlbCA9XG4vKiogQGNsYXNzICovXG5mdW5jdGlvbiAoX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhUb29sdGlwTW9kZWwsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gVG9vbHRpcE1vZGVsKCkge1xuICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuXG4gICAgX3RoaXMudHlwZSA9IFRvb2x0aXBNb2RlbC50eXBlO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIFRvb2x0aXBNb2RlbC50eXBlID0gJ3Rvb2x0aXAnO1xuICBUb29sdGlwTW9kZWwuZGVwZW5kZW5jaWVzID0gWydheGlzUG9pbnRlciddO1xuICBUb29sdGlwTW9kZWwuZGVmYXVsdE9wdGlvbiA9IHtcbiAgICAvLyB6bGV2ZWw6IDAsXG4gICAgejogNjAsXG4gICAgc2hvdzogdHJ1ZSxcbiAgICAvLyB0b29sdGlwIG1haW4gY29udGVudFxuICAgIHNob3dDb250ZW50OiB0cnVlLFxuICAgIC8vICd0cmlnZ2VyJyBvbmx5IHdvcmtzIG9uIGNvb3JkaW5hdGUgc3lzdGVtLlxuICAgIC8vICdpdGVtJyB8ICdheGlzJyB8ICdub25lJ1xuICAgIHRyaWdnZXI6ICdpdGVtJyxcbiAgICAvLyAnY2xpY2snIHwgJ21vdXNlbW92ZScgfCAnbm9uZSdcbiAgICB0cmlnZ2VyT246ICdtb3VzZW1vdmV8Y2xpY2snLFxuICAgIGFsd2F5c1Nob3dDb250ZW50OiBmYWxzZSxcbiAgICBkaXNwbGF5TW9kZTogJ3NpbmdsZScsXG4gICAgcmVuZGVyTW9kZTogJ2F1dG8nLFxuICAgIC8vIHdoZXRoZXIgcmVzdHJhaW50IGNvbnRlbnQgaW5zaWRlIHZpZXdSZWN0LlxuICAgIC8vIElmIHJlbmRlck1vZGU6ICdyaWNoVGV4dCcsIGRlZmF1bHQgdHJ1ZS5cbiAgICAvLyBJZiByZW5kZXJNb2RlOiAnaHRtbCcsIGRlZmF1dCBmYWxzZSAoZm9yIGJhY2t3YXJkIGNvbXBhdCkuXG4gICAgY29uZmluZTogbnVsbCxcbiAgICBzaG93RGVsYXk6IDAsXG4gICAgaGlkZURlbGF5OiAxMDAsXG4gICAgLy8gQW5pbWF0aW9uIHRyYW5zaXRpb24gdGltZSwgdW5pdCBpcyBzZWNvbmRcbiAgICB0cmFuc2l0aW9uRHVyYXRpb246IDAuNCxcbiAgICBlbnRlcmFibGU6IGZhbHNlLFxuICAgIGJhY2tncm91bmRDb2xvcjogJyNmZmYnLFxuICAgIC8vIGJveCBzaGFkb3dcbiAgICBzaGFkb3dCbHVyOiAxMCxcbiAgICBzaGFkb3dDb2xvcjogJ3JnYmEoMCwgMCwgMCwgLjIpJyxcbiAgICBzaGFkb3dPZmZzZXRYOiAxLFxuICAgIHNoYWRvd09mZnNldFk6IDIsXG4gICAgLy8gdG9vbHRpcCBib3JkZXIgcmFkaXVzLCB1bml0IGlzIHB4LCBkZWZhdWx0IGlzIDRcbiAgICBib3JkZXJSYWRpdXM6IDQsXG4gICAgLy8gdG9vbHRpcCBib3JkZXIgd2lkdGgsIHVuaXQgaXMgcHgsIGRlZmF1bHQgaXMgMCAobm8gYm9yZGVyKVxuICAgIGJvcmRlcldpZHRoOiAxLFxuICAgIC8vIFRvb2x0aXAgaW5zaWRlIHBhZGRpbmcsIGRlZmF1bHQgaXMgNSBmb3IgYWxsIGRpcmVjdGlvblxuICAgIC8vIEFycmF5IGlzIGFsbG93ZWQgdG8gc2V0IHVwLCByaWdodCwgYm90dG9tLCBsZWZ0LCBzYW1lIHdpdGggY3NzXG4gICAgLy8gVGhlIGRlZmF1bHQgdmFsdWU6IFNlZSBgdG9vbHRpcC90b29sdGlwTWFya3VwLnRzI2dldFBhZGRpbmdGcm9tVG9vbHRpcE1vZGVsYC5cbiAgICBwYWRkaW5nOiBudWxsLFxuICAgIC8vIEV4dHJhIGNzcyB0ZXh0XG4gICAgZXh0cmFDc3NUZXh0OiAnJyxcbiAgICAvLyBheGlzIGluZGljYXRvciwgdHJpZ2dlciBieSBheGlzXG4gICAgYXhpc1BvaW50ZXI6IHtcbiAgICAgIC8vIGRlZmF1bHQgaXMgbGluZVxuICAgICAgLy8gbGVnYWwgdmFsdWVzOiAnbGluZScgfCAnc2hhZG93JyB8ICdjcm9zcydcbiAgICAgIHR5cGU6ICdsaW5lJyxcbiAgICAgIC8vIFZhbGlkIHdoZW4gdHlwZSBpcyBsaW5lLCBhcHBvaW50IHRvb2x0aXAgbGluZSBsb2NhdGUgb24gd2hpY2ggbGluZS4gT3B0aW9uYWxcbiAgICAgIC8vIGxlZ2FsIHZhbHVlczogJ3gnIHwgJ3knIHwgJ2FuZ2xlJyB8ICdyYWRpdXMnIHwgJ2F1dG8nXG4gICAgICAvLyBkZWZhdWx0IGlzICdhdXRvJywgY2hvc2UgdGhlIGF4aXMgd2hpY2ggdHlwZSBpcyBjYXRlZ29yeS5cbiAgICAgIC8vIGZvciBtdWx0aXBseSB5IGF4aXMsIGNhcnRlc2lhbiBjb29yZCBjaG9zZSB4IGF4aXMsIHBvbGFyIGNob3NlIGFuZ2xlIGF4aXNcbiAgICAgIGF4aXM6ICdhdXRvJyxcbiAgICAgIGFuaW1hdGlvbjogJ2F1dG8nLFxuICAgICAgYW5pbWF0aW9uRHVyYXRpb25VcGRhdGU6IDIwMCxcbiAgICAgIGFuaW1hdGlvbkVhc2luZ1VwZGF0ZTogJ2V4cG9uZW50aWFsT3V0JyxcbiAgICAgIGNyb3NzU3R5bGU6IHtcbiAgICAgICAgY29sb3I6ICcjOTk5JyxcbiAgICAgICAgd2lkdGg6IDEsXG4gICAgICAgIHR5cGU6ICdkYXNoZWQnLFxuICAgICAgICAvLyBUT0RPIGZvcm1hdHRlclxuICAgICAgICB0ZXh0U3R5bGU6IHt9XG4gICAgICB9IC8vIGxpbmVTdHlsZSBhbmQgc2hhZG93U3R5bGUgc2hvdWxkIG5vdCBiZSBzcGVjaWZpZWQgaGVyZSxcbiAgICAgIC8vIG90aGVyd2lzZSBpdCB3aWxsIGFsd2F5cyBvdmVycmlkZSB0aG9zZSBzdHlsZXMgb24gb3B0aW9uLmF4aXNQb2ludGVyLlxuXG4gICAgfSxcbiAgICB0ZXh0U3R5bGU6IHtcbiAgICAgIGNvbG9yOiAnIzY2NicsXG4gICAgICBmb250U2l6ZTogMTRcbiAgICB9XG4gIH07XG4gIHJldHVybiBUb29sdGlwTW9kZWw7XG59KENvbXBvbmVudE1vZGVsKTtcblxuZXhwb3J0IGRlZmF1bHQgVG9vbHRpcE1vZGVsOyIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgdG9DYW1lbENhc2UgfSBmcm9tICcuLi8uLi91dGlsL2Zvcm1hdC5qcyc7XG5pbXBvcnQgZW52IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvZW52LmpzJztcbi8qIGdsb2JhbCBkb2N1bWVudCAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2hvdWxkVG9vbHRpcENvbmZpbmUodG9vbHRpcE1vZGVsKSB7XG4gIHZhciBjb25maW5lT3B0aW9uID0gdG9vbHRpcE1vZGVsLmdldCgnY29uZmluZScpO1xuICByZXR1cm4gY29uZmluZU9wdGlvbiAhPSBudWxsID8gISFjb25maW5lT3B0aW9uIC8vIEluIHJpY2hUZXh0IG1vZGUsIHRoZSBvdXRzaWRlIHBhcnQgY2FuIG5vdCBiZSB2aXNpYmxlLlxuICA6IHRvb2x0aXBNb2RlbC5nZXQoJ3JlbmRlck1vZGUnKSA9PT0gJ3JpY2hUZXh0Jztcbn1cblxuZnVuY3Rpb24gdGVzdFN0eWxlKHN0eWxlUHJvcHMpIHtcbiAgaWYgKCFlbnYuZG9tU3VwcG9ydGVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlO1xuXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzdHlsZVByb3BzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgaWYgKHN0eWxlUHJvcHNbaV0gaW4gc3R5bGUpIHtcbiAgICAgIHJldHVybiBzdHlsZVByb3BzW2ldO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgdmFyIFRSQU5TRk9STV9WRU5ET1IgPSB0ZXN0U3R5bGUoWyd0cmFuc2Zvcm0nLCAnd2Via2l0VHJhbnNmb3JtJywgJ09UcmFuc2Zvcm0nLCAnTW96VHJhbnNmb3JtJywgJ21zVHJhbnNmb3JtJ10pO1xuZXhwb3J0IHZhciBUUkFOU0lUSU9OX1ZFTkRPUiA9IHRlc3RTdHlsZShbJ3dlYmtpdFRyYW5zaXRpb24nLCAndHJhbnNpdGlvbicsICdPVHJhbnNpdGlvbicsICdNb3pUcmFuc2l0aW9uJywgJ21zVHJhbnNpdGlvbiddKTtcbmV4cG9ydCBmdW5jdGlvbiB0b0NTU1ZlbmRvclByZWZpeChzdHlsZVZlbmRvciwgc3R5bGVQcm9wKSB7XG4gIGlmICghc3R5bGVWZW5kb3IpIHtcbiAgICByZXR1cm4gc3R5bGVQcm9wO1xuICB9XG5cbiAgc3R5bGVQcm9wID0gdG9DYW1lbENhc2Uoc3R5bGVQcm9wLCB0cnVlKTtcbiAgdmFyIGlkeCA9IHN0eWxlVmVuZG9yLmluZGV4T2Yoc3R5bGVQcm9wKTtcbiAgc3R5bGVWZW5kb3IgPSBpZHggPT09IC0xID8gc3R5bGVQcm9wIDogXCItXCIgKyBzdHlsZVZlbmRvci5zbGljZSgwLCBpZHgpICsgXCItXCIgKyBzdHlsZVByb3A7XG4gIHJldHVybiBzdHlsZVZlbmRvci50b0xvd2VyQ2FzZSgpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbXB1dGVkU3R5bGUoZWwsIHN0eWxlKSB7XG4gIHZhciBzdGwgPSBlbC5jdXJyZW50U3R5bGUgfHwgZG9jdW1lbnQuZGVmYXVsdFZpZXcgJiYgZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShlbCk7XG4gIHJldHVybiBzdGwgPyBzdHlsZSA/IHN0bFtzdHlsZV0gOiBzdGwgOiBudWxsO1xufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgaXNTdHJpbmcsIGluZGV4T2YsIGVhY2gsIGJpbmQsIGlzQXJyYXksIGlzRG9tIH0gZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbmltcG9ydCB7IG5vcm1hbGl6ZUV2ZW50IH0gZnJvbSAnenJlbmRlci9saWIvY29yZS9ldmVudC5qcyc7XG5pbXBvcnQgeyB0cmFuc2Zvcm1Mb2NhbENvb3JkIH0gZnJvbSAnenJlbmRlci9saWIvY29yZS9kb20uanMnO1xuaW1wb3J0IGVudiBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL2Vudi5qcyc7XG5pbXBvcnQgeyBjb252ZXJ0VG9Db2xvclN0cmluZywgdG9DYW1lbENhc2UsIG5vcm1hbGl6ZUNzc0FycmF5IH0gZnJvbSAnLi4vLi4vdXRpbC9mb3JtYXQuanMnO1xuaW1wb3J0IHsgc2hvdWxkVG9vbHRpcENvbmZpbmUsIHRvQ1NTVmVuZG9yUHJlZml4LCBnZXRDb21wdXRlZFN0eWxlLCBUUkFOU0ZPUk1fVkVORE9SLCBUUkFOU0lUSU9OX1ZFTkRPUiB9IGZyb20gJy4vaGVscGVyLmpzJztcbmltcG9ydCB7IGdldFBhZGRpbmdGcm9tVG9vbHRpcE1vZGVsIH0gZnJvbSAnLi90b29sdGlwTWFya3VwLmpzJztcbi8qIGdsb2JhbCBkb2N1bWVudCwgd2luZG93ICovXG5cbnZhciBDU1NfVFJBTlNJVElPTl9WRU5ET1IgPSB0b0NTU1ZlbmRvclByZWZpeChUUkFOU0lUSU9OX1ZFTkRPUiwgJ3RyYW5zaXRpb24nKTtcbnZhciBDU1NfVFJBTlNGT1JNX1ZFTkRPUiA9IHRvQ1NTVmVuZG9yUHJlZml4KFRSQU5TRk9STV9WRU5ET1IsICd0cmFuc2Zvcm0nKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG5cbnZhciBnQ3NzVGV4dCA9IFwicG9zaXRpb246YWJzb2x1dGU7ZGlzcGxheTpibG9jaztib3JkZXItc3R5bGU6c29saWQ7d2hpdGUtc3BhY2U6bm93cmFwO3otaW5kZXg6OTk5OTk5OTtcIiArIChlbnYudHJhbnNmb3JtM2RTdXBwb3J0ZWQgPyAnd2lsbC1jaGFuZ2U6dHJhbnNmb3JtOycgOiAnJyk7XG5cbmZ1bmN0aW9uIG1pcnJvclBvcyhwb3MpIHtcbiAgcG9zID0gcG9zID09PSAnbGVmdCcgPyAncmlnaHQnIDogcG9zID09PSAncmlnaHQnID8gJ2xlZnQnIDogcG9zID09PSAndG9wJyA/ICdib3R0b20nIDogJ3RvcCc7XG4gIHJldHVybiBwb3M7XG59XG5cbmZ1bmN0aW9uIGFzc2VtYmxlQXJyb3codG9vbHRpcE1vZGVsLCBib3JkZXJDb2xvciwgYXJyb3dQb3NpdGlvbikge1xuICBpZiAoIWlzU3RyaW5nKGFycm93UG9zaXRpb24pIHx8IGFycm93UG9zaXRpb24gPT09ICdpbnNpZGUnKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgdmFyIGJhY2tncm91bmRDb2xvciA9IHRvb2x0aXBNb2RlbC5nZXQoJ2JhY2tncm91bmRDb2xvcicpO1xuICB2YXIgYm9yZGVyV2lkdGggPSB0b29sdGlwTW9kZWwuZ2V0KCdib3JkZXJXaWR0aCcpO1xuICBib3JkZXJDb2xvciA9IGNvbnZlcnRUb0NvbG9yU3RyaW5nKGJvcmRlckNvbG9yKTtcbiAgdmFyIGFycm93UG9zID0gbWlycm9yUG9zKGFycm93UG9zaXRpb24pO1xuICB2YXIgYXJyb3dTaXplID0gTWF0aC5tYXgoTWF0aC5yb3VuZChib3JkZXJXaWR0aCkgKiAxLjUsIDYpO1xuICB2YXIgcG9zaXRpb25TdHlsZSA9ICcnO1xuICB2YXIgdHJhbnNmb3JtU3R5bGUgPSBDU1NfVFJBTlNGT1JNX1ZFTkRPUiArICc6JztcbiAgdmFyIHJvdGF0ZURlZztcblxuICBpZiAoaW5kZXhPZihbJ2xlZnQnLCAncmlnaHQnXSwgYXJyb3dQb3MpID4gLTEpIHtcbiAgICBwb3NpdGlvblN0eWxlICs9ICd0b3A6NTAlJztcbiAgICB0cmFuc2Zvcm1TdHlsZSArPSBcInRyYW5zbGF0ZVkoLTUwJSkgcm90YXRlKFwiICsgKHJvdGF0ZURlZyA9IGFycm93UG9zID09PSAnbGVmdCcgPyAtMjI1IDogLTQ1KSArIFwiZGVnKVwiO1xuICB9IGVsc2Uge1xuICAgIHBvc2l0aW9uU3R5bGUgKz0gJ2xlZnQ6NTAlJztcbiAgICB0cmFuc2Zvcm1TdHlsZSArPSBcInRyYW5zbGF0ZVgoLTUwJSkgcm90YXRlKFwiICsgKHJvdGF0ZURlZyA9IGFycm93UG9zID09PSAndG9wJyA/IDIyNSA6IDQ1KSArIFwiZGVnKVwiO1xuICB9XG5cbiAgdmFyIHJvdGF0ZVJhZGlhbiA9IHJvdGF0ZURlZyAqIE1hdGguUEkgLyAxODA7XG4gIHZhciBhcnJvd1dIID0gYXJyb3dTaXplICsgYm9yZGVyV2lkdGg7XG4gIHZhciByb3RhdGVkV0ggPSBhcnJvd1dIICogTWF0aC5hYnMoTWF0aC5jb3Mocm90YXRlUmFkaWFuKSkgKyBhcnJvd1dIICogTWF0aC5hYnMoTWF0aC5zaW4ocm90YXRlUmFkaWFuKSk7XG4gIHZhciBhcnJvd09mZnNldCA9IE1hdGgucm91bmQoKChyb3RhdGVkV0ggLSBNYXRoLlNRUlQyICogYm9yZGVyV2lkdGgpIC8gMiArIE1hdGguU1FSVDIgKiBib3JkZXJXaWR0aCAtIChyb3RhdGVkV0ggLSBhcnJvd1dIKSAvIDIpICogMTAwKSAvIDEwMDtcbiAgcG9zaXRpb25TdHlsZSArPSBcIjtcIiArIGFycm93UG9zICsgXCI6LVwiICsgYXJyb3dPZmZzZXQgKyBcInB4XCI7XG4gIHZhciBib3JkZXJTdHlsZSA9IGJvcmRlckNvbG9yICsgXCIgc29saWQgXCIgKyBib3JkZXJXaWR0aCArIFwicHg7XCI7XG4gIHZhciBzdHlsZUNzcyA9IFtcInBvc2l0aW9uOmFic29sdXRlO3dpZHRoOlwiICsgYXJyb3dTaXplICsgXCJweDtoZWlnaHQ6XCIgKyBhcnJvd1NpemUgKyBcInB4O3otaW5kZXg6LTE7XCIsIHBvc2l0aW9uU3R5bGUgKyBcIjtcIiArIHRyYW5zZm9ybVN0eWxlICsgXCI7XCIsIFwiYm9yZGVyLWJvdHRvbTpcIiArIGJvcmRlclN0eWxlLCBcImJvcmRlci1yaWdodDpcIiArIGJvcmRlclN0eWxlLCBcImJhY2tncm91bmQtY29sb3I6XCIgKyBiYWNrZ3JvdW5kQ29sb3IgKyBcIjtcIl07XG4gIHJldHVybiBcIjxkaXYgc3R5bGU9XFxcIlwiICsgc3R5bGVDc3Muam9pbignJykgKyBcIlxcXCI+PC9kaXY+XCI7XG59XG5cbmZ1bmN0aW9uIGFzc2VtYmxlVHJhbnNpdGlvbihkdXJhdGlvbiwgb25seUZhZGUpIHtcbiAgdmFyIHRyYW5zaXRpb25DdXJ2ZSA9ICdjdWJpYy1iZXppZXIoMC4yMywxLDAuMzIsMSknO1xuICB2YXIgdHJhbnNpdGlvbk9wdGlvbiA9IFwiIFwiICsgZHVyYXRpb24gLyAyICsgXCJzIFwiICsgdHJhbnNpdGlvbkN1cnZlO1xuICB2YXIgdHJhbnNpdGlvblRleHQgPSBcIm9wYWNpdHlcIiArIHRyYW5zaXRpb25PcHRpb24gKyBcIix2aXNpYmlsaXR5XCIgKyB0cmFuc2l0aW9uT3B0aW9uO1xuXG4gIGlmICghb25seUZhZGUpIHtcbiAgICB0cmFuc2l0aW9uT3B0aW9uID0gXCIgXCIgKyBkdXJhdGlvbiArIFwicyBcIiArIHRyYW5zaXRpb25DdXJ2ZTtcbiAgICB0cmFuc2l0aW9uVGV4dCArPSBlbnYudHJhbnNmb3JtU3VwcG9ydGVkID8gXCIsXCIgKyBDU1NfVFJBTlNGT1JNX1ZFTkRPUiArIHRyYW5zaXRpb25PcHRpb24gOiBcIixsZWZ0XCIgKyB0cmFuc2l0aW9uT3B0aW9uICsgXCIsdG9wXCIgKyB0cmFuc2l0aW9uT3B0aW9uO1xuICB9XG5cbiAgcmV0dXJuIENTU19UUkFOU0lUSU9OX1ZFTkRPUiArICc6JyArIHRyYW5zaXRpb25UZXh0O1xufVxuXG5mdW5jdGlvbiBhc3NlbWJsZVRyYW5zZm9ybSh4LCB5LCB0b1N0cmluZykge1xuICAvLyBJZiB1c2luZyBmbG9hdCBvbiBzdHlsZSwgdGhlIGZpbmFsIHdpZHRoIG9mIHRoZSBkb20gbWlnaHRcbiAgLy8ga2VlcCBjaGFuZ2luZyBzbGlnaHRseSB3aGlsZSBtb3VzZSBtb3ZlLiBTbyBgdG9GaXhlZCgwKWAgdGhlbS5cbiAgdmFyIHgwID0geC50b0ZpeGVkKDApICsgJ3B4JztcbiAgdmFyIHkwID0geS50b0ZpeGVkKDApICsgJ3B4JzsgLy8gbm90IHN1cHBvcnQgdHJhbnNmb3JtLCB1c2UgYGxlZnRgIGFuZCBgdG9wYCBpbnN0ZWFkLlxuXG4gIGlmICghZW52LnRyYW5zZm9ybVN1cHBvcnRlZCkge1xuICAgIHJldHVybiB0b1N0cmluZyA/IFwidG9wOlwiICsgeTAgKyBcIjtsZWZ0OlwiICsgeDAgKyBcIjtcIiA6IFtbJ3RvcCcsIHkwXSwgWydsZWZ0JywgeDBdXTtcbiAgfSAvLyBzdXBwb3J0IHRyYW5zZm9ybVxuXG5cbiAgdmFyIGlzM2QgPSBlbnYudHJhbnNmb3JtM2RTdXBwb3J0ZWQ7XG4gIHZhciB0cmFuc2xhdGUgPSBcInRyYW5zbGF0ZVwiICsgKGlzM2QgPyAnM2QnIDogJycpICsgXCIoXCIgKyB4MCArIFwiLFwiICsgeTAgKyAoaXMzZCA/ICcsMCcgOiAnJykgKyBcIilcIjtcbiAgcmV0dXJuIHRvU3RyaW5nID8gJ3RvcDowO2xlZnQ6MDsnICsgQ1NTX1RSQU5TRk9STV9WRU5ET1IgKyAnOicgKyB0cmFuc2xhdGUgKyAnOycgOiBbWyd0b3AnLCAwXSwgWydsZWZ0JywgMF0sIFtUUkFOU0ZPUk1fVkVORE9SLCB0cmFuc2xhdGVdXTtcbn1cbi8qKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gdGV4dFN0eWxlXHJcbiAqIEByZXR1cm4ge3N0cmluZ31cclxuICogQGlubmVyXHJcbiAqL1xuXG5cbmZ1bmN0aW9uIGFzc2VtYmxlRm9udCh0ZXh0U3R5bGVNb2RlbCkge1xuICB2YXIgY3NzVGV4dCA9IFtdO1xuICB2YXIgZm9udFNpemUgPSB0ZXh0U3R5bGVNb2RlbC5nZXQoJ2ZvbnRTaXplJyk7XG4gIHZhciBjb2xvciA9IHRleHRTdHlsZU1vZGVsLmdldFRleHRDb2xvcigpO1xuICBjb2xvciAmJiBjc3NUZXh0LnB1c2goJ2NvbG9yOicgKyBjb2xvcik7XG4gIGNzc1RleHQucHVzaCgnZm9udDonICsgdGV4dFN0eWxlTW9kZWwuZ2V0Rm9udCgpKTtcbiAgZm9udFNpemUgLy8gQHRzLWlnbm9yZSwgbGVhdmUgaXQgdG8gdGhlIHRvb2x0aXAgcmVmYWN0b3IuXG4gICYmIGNzc1RleHQucHVzaCgnbGluZS1oZWlnaHQ6JyArIE1hdGgucm91bmQoZm9udFNpemUgKiAzIC8gMikgKyAncHgnKTtcbiAgdmFyIHNoYWRvd0NvbG9yID0gdGV4dFN0eWxlTW9kZWwuZ2V0KCd0ZXh0U2hhZG93Q29sb3InKTtcbiAgdmFyIHNoYWRvd0JsdXIgPSB0ZXh0U3R5bGVNb2RlbC5nZXQoJ3RleHRTaGFkb3dCbHVyJykgfHwgMDtcbiAgdmFyIHNoYWRvd09mZnNldFggPSB0ZXh0U3R5bGVNb2RlbC5nZXQoJ3RleHRTaGFkb3dPZmZzZXRYJykgfHwgMDtcbiAgdmFyIHNoYWRvd09mZnNldFkgPSB0ZXh0U3R5bGVNb2RlbC5nZXQoJ3RleHRTaGFkb3dPZmZzZXRZJykgfHwgMDtcbiAgc2hhZG93Q29sb3IgJiYgc2hhZG93Qmx1ciAmJiBjc3NUZXh0LnB1c2goJ3RleHQtc2hhZG93OicgKyBzaGFkb3dPZmZzZXRYICsgJ3B4ICcgKyBzaGFkb3dPZmZzZXRZICsgJ3B4ICcgKyBzaGFkb3dCbHVyICsgJ3B4ICcgKyBzaGFkb3dDb2xvcik7XG4gIGVhY2goWydkZWNvcmF0aW9uJywgJ2FsaWduJ10sIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdmFyIHZhbCA9IHRleHRTdHlsZU1vZGVsLmdldChuYW1lKTtcbiAgICB2YWwgJiYgY3NzVGV4dC5wdXNoKCd0ZXh0LScgKyBuYW1lICsgJzonICsgdmFsKTtcbiAgfSk7XG4gIHJldHVybiBjc3NUZXh0LmpvaW4oJzsnKTtcbn1cblxuZnVuY3Rpb24gYXNzZW1ibGVDc3NUZXh0KHRvb2x0aXBNb2RlbCwgZW5hYmxlVHJhbnNpdGlvbiwgb25seUZhZGUpIHtcbiAgdmFyIGNzc1RleHQgPSBbXTtcbiAgdmFyIHRyYW5zaXRpb25EdXJhdGlvbiA9IHRvb2x0aXBNb2RlbC5nZXQoJ3RyYW5zaXRpb25EdXJhdGlvbicpO1xuICB2YXIgYmFja2dyb3VuZENvbG9yID0gdG9vbHRpcE1vZGVsLmdldCgnYmFja2dyb3VuZENvbG9yJyk7XG4gIHZhciBzaGFkb3dCbHVyID0gdG9vbHRpcE1vZGVsLmdldCgnc2hhZG93Qmx1cicpO1xuICB2YXIgc2hhZG93Q29sb3IgPSB0b29sdGlwTW9kZWwuZ2V0KCdzaGFkb3dDb2xvcicpO1xuICB2YXIgc2hhZG93T2Zmc2V0WCA9IHRvb2x0aXBNb2RlbC5nZXQoJ3NoYWRvd09mZnNldFgnKTtcbiAgdmFyIHNoYWRvd09mZnNldFkgPSB0b29sdGlwTW9kZWwuZ2V0KCdzaGFkb3dPZmZzZXRZJyk7XG4gIHZhciB0ZXh0U3R5bGVNb2RlbCA9IHRvb2x0aXBNb2RlbC5nZXRNb2RlbCgndGV4dFN0eWxlJyk7XG4gIHZhciBwYWRkaW5nID0gZ2V0UGFkZGluZ0Zyb21Ub29sdGlwTW9kZWwodG9vbHRpcE1vZGVsLCAnaHRtbCcpO1xuICB2YXIgYm94U2hhZG93ID0gc2hhZG93T2Zmc2V0WCArIFwicHggXCIgKyBzaGFkb3dPZmZzZXRZICsgXCJweCBcIiArIHNoYWRvd0JsdXIgKyBcInB4IFwiICsgc2hhZG93Q29sb3I7XG4gIGNzc1RleHQucHVzaCgnYm94LXNoYWRvdzonICsgYm94U2hhZG93KTsgLy8gQW5pbWF0aW9uIHRyYW5zaXRpb24uIERvIG5vdCBhbmltYXRlIHdoZW4gdHJhbnNpdGlvbkR1cmF0aW9uIGlzIDAuXG5cbiAgZW5hYmxlVHJhbnNpdGlvbiAmJiB0cmFuc2l0aW9uRHVyYXRpb24gJiYgY3NzVGV4dC5wdXNoKGFzc2VtYmxlVHJhbnNpdGlvbih0cmFuc2l0aW9uRHVyYXRpb24sIG9ubHlGYWRlKSk7XG5cbiAgaWYgKGJhY2tncm91bmRDb2xvcikge1xuICAgIGNzc1RleHQucHVzaCgnYmFja2dyb3VuZC1jb2xvcjonICsgYmFja2dyb3VuZENvbG9yKTtcbiAgfSAvLyBCb3JkZXIgc3R5bGVcblxuXG4gIGVhY2goWyd3aWR0aCcsICdjb2xvcicsICdyYWRpdXMnXSwgZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB2YXIgYm9yZGVyTmFtZSA9ICdib3JkZXItJyArIG5hbWU7XG4gICAgdmFyIGNhbWVsQ2FzZSA9IHRvQ2FtZWxDYXNlKGJvcmRlck5hbWUpO1xuICAgIHZhciB2YWwgPSB0b29sdGlwTW9kZWwuZ2V0KGNhbWVsQ2FzZSk7XG4gICAgdmFsICE9IG51bGwgJiYgY3NzVGV4dC5wdXNoKGJvcmRlck5hbWUgKyAnOicgKyB2YWwgKyAobmFtZSA9PT0gJ2NvbG9yJyA/ICcnIDogJ3B4JykpO1xuICB9KTsgLy8gVGV4dCBzdHlsZVxuXG4gIGNzc1RleHQucHVzaChhc3NlbWJsZUZvbnQodGV4dFN0eWxlTW9kZWwpKTsgLy8gUGFkZGluZ1xuXG4gIGlmIChwYWRkaW5nICE9IG51bGwpIHtcbiAgICBjc3NUZXh0LnB1c2goJ3BhZGRpbmc6JyArIG5vcm1hbGl6ZUNzc0FycmF5KHBhZGRpbmcpLmpvaW4oJ3B4ICcpICsgJ3B4Jyk7XG4gIH1cblxuICByZXR1cm4gY3NzVGV4dC5qb2luKCc7JykgKyAnOyc7XG59IC8vIElmIG5vdCBhYmxlIHRvIG1ha2UsIGRvIG5vdCBtb2RpZnkgdGhlIGlucHV0IGBvdXRgLlxuXG5cbmZ1bmN0aW9uIG1ha2VTdHlsZUNvb3JkKG91dCwgenIsIGFwcGVuZFRvQm9keSwgenJYLCB6clkpIHtcbiAgdmFyIHpyUGFpbnRlciA9IHpyICYmIHpyLnBhaW50ZXI7XG5cbiAgaWYgKGFwcGVuZFRvQm9keSkge1xuICAgIHZhciB6clZpZXdwb3J0Um9vdCA9IHpyUGFpbnRlciAmJiB6clBhaW50ZXIuZ2V0Vmlld3BvcnRSb290KCk7XG5cbiAgICBpZiAoenJWaWV3cG9ydFJvb3QpIHtcbiAgICAgIC8vIFNvbWUgQVBQcyBtaWdodCB1c2Ugc2NhbGUgb24gYm9keSwgc28gd2Ugc3VwcG9ydCBDU1MgdHJhbnNmb3JtIGhlcmUuXG4gICAgICB0cmFuc2Zvcm1Mb2NhbENvb3JkKG91dCwgenJWaWV3cG9ydFJvb3QsIGRvY3VtZW50LmJvZHksIHpyWCwgenJZKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgb3V0WzBdID0genJYO1xuICAgIG91dFsxXSA9IHpyWTsgLy8geHkgc2hvdWxkIGJlIGJhc2VkIG9uIGNhbnZhcyByb290LiBCdXQgdG9vbHRpcENvbnRlbnQgaXNcbiAgICAvLyB0aGUgc2libGluZyBvZiBjYW52YXMgcm9vdC4gU28gcGFkZGluZyBvZiBlYyBjb250YWluZXJcbiAgICAvLyBzaG91bGQgYmUgY29uc2lkZXJlZCBoZXJlLlxuXG4gICAgdmFyIHZpZXdwb3J0Um9vdE9mZnNldCA9IHpyUGFpbnRlciAmJiB6clBhaW50ZXIuZ2V0Vmlld3BvcnRSb290T2Zmc2V0KCk7XG5cbiAgICBpZiAodmlld3BvcnRSb290T2Zmc2V0KSB7XG4gICAgICBvdXRbMF0gKz0gdmlld3BvcnRSb290T2Zmc2V0Lm9mZnNldExlZnQ7XG4gICAgICBvdXRbMV0gKz0gdmlld3BvcnRSb290T2Zmc2V0Lm9mZnNldFRvcDtcbiAgICB9XG4gIH1cblxuICBvdXRbMl0gPSBvdXRbMF0gLyB6ci5nZXRXaWR0aCgpO1xuICBvdXRbM10gPSBvdXRbMV0gLyB6ci5nZXRIZWlnaHQoKTtcbn1cblxudmFyIFRvb2x0aXBIVE1MQ29udGVudCA9XG4vKiogQGNsYXNzICovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFRvb2x0aXBIVE1MQ29udGVudChjb250YWluZXIsIGFwaSwgb3B0KSB7XG4gICAgdGhpcy5fc2hvdyA9IGZhbHNlO1xuICAgIHRoaXMuX3N0eWxlQ29vcmQgPSBbMCwgMCwgMCwgMF07XG4gICAgdGhpcy5fZW50ZXJhYmxlID0gdHJ1ZTtcbiAgICB0aGlzLl9hbHdheXNTaG93Q29udGVudCA9IGZhbHNlO1xuICAgIHRoaXMuX2ZpcnN0U2hvdyA9IHRydWU7XG4gICAgdGhpcy5fbG9uZ0hpZGUgPSB0cnVlO1xuXG4gICAgaWYgKGVudi53eGEpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOyAvLyBUT0RPOiBUWVBFXG5cbiAgICBlbC5kb21CZWxvbmdUb1pyID0gdHJ1ZTtcbiAgICB0aGlzLmVsID0gZWw7XG4gICAgdmFyIHpyID0gdGhpcy5fenIgPSBhcGkuZ2V0WnIoKTtcbiAgICB2YXIgYXBwZW5kVG9Cb2R5ID0gdGhpcy5fYXBwZW5kVG9Cb2R5ID0gb3B0ICYmIG9wdC5hcHBlbmRUb0JvZHk7XG4gICAgbWFrZVN0eWxlQ29vcmQodGhpcy5fc3R5bGVDb29yZCwgenIsIGFwcGVuZFRvQm9keSwgYXBpLmdldFdpZHRoKCkgLyAyLCBhcGkuZ2V0SGVpZ2h0KCkgLyAyKTtcblxuICAgIGlmIChhcHBlbmRUb0JvZHkpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZWwpO1xuICAgIH1cblxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjsgLy8gRklYTUVcbiAgICAvLyBJcyBpdCBuZWVkZWQgdG8gdHJpZ2dlciB6ciBldmVudCBtYW51YWxseSBpZlxuICAgIC8vIHRoZSBicm93c2VyIGRvIG5vdCBzdXBwb3J0IGBwb2ludGVyLWV2ZW50czogbm9uZWAuXG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICBlbC5vbm1vdXNlZW50ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBjbGVhciB0aGUgdGltZW91dCBpbiBoaWRlTGF0ZXIgYW5kIGtlZXAgc2hvd2luZyB0b29sdGlwXG4gICAgICBpZiAoc2VsZi5fZW50ZXJhYmxlKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChzZWxmLl9oaWRlVGltZW91dCk7XG4gICAgICAgIHNlbGYuX3Nob3cgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBzZWxmLl9pbkNvbnRlbnQgPSB0cnVlO1xuICAgIH07XG5cbiAgICBlbC5vbm1vdXNlbW92ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XG5cbiAgICAgIGlmICghc2VsZi5fZW50ZXJhYmxlKSB7XG4gICAgICAgIC8vIGBwb2ludGVyLWV2ZW50czogbm9uZWAgaXMgc2V0IHRvIHRvb2x0aXAgY29udGVudCBkaXZcbiAgICAgICAgLy8gaWYgYGVudGVyYWJsZWAgaXMgc2V0IGFzIGBmYWxzZWAsIGFuZCBgZWwub25tb3VzZW1vdmVgXG4gICAgICAgIC8vIGNhbiBub3QgYmUgdHJpZ2dlcmVkLiBCdXQgaW4gYnJvd3NlciB0aGF0IGRvIG5vdFxuICAgICAgICAvLyBzdXBwb3J0IGBwb2ludGVyLWV2ZW50c2AsIHdlIG5lZWQgdG8gZG8gdGhpczpcbiAgICAgICAgLy8gVHJ5IHRyaWdnZXIgenJlbmRlciBldmVudCB0byBhdm9pZCBtb3VzZVxuICAgICAgICAvLyBpbiBhbmQgb3V0IHNoYXBlIHRvbyBmcmVxdWVudGx5XG4gICAgICAgIHZhciBoYW5kbGVyID0genIuaGFuZGxlcjtcbiAgICAgICAgdmFyIHpyVmlld3BvcnRSb290ID0genIucGFpbnRlci5nZXRWaWV3cG9ydFJvb3QoKTtcbiAgICAgICAgbm9ybWFsaXplRXZlbnQoenJWaWV3cG9ydFJvb3QsIGUsIHRydWUpO1xuICAgICAgICBoYW5kbGVyLmRpc3BhdGNoKCdtb3VzZW1vdmUnLCBlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZWwub25tb3VzZWxlYXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgLy8gc2V0IGBfaW5Db250ZW50YCB0byBgZmFsc2VgIGJlZm9yZSBgaGlkZUxhdGVyYFxuICAgICAgc2VsZi5faW5Db250ZW50ID0gZmFsc2U7XG5cbiAgICAgIGlmIChzZWxmLl9lbnRlcmFibGUpIHtcbiAgICAgICAgaWYgKHNlbGYuX3Nob3cpIHtcbiAgICAgICAgICBzZWxmLmhpZGVMYXRlcihzZWxmLl9oaWRlRGVsYXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICAvKipcclxuICAgKiBVcGRhdGUgd2hlbiB0b29sdGlwIGlzIHJlbmRlcmVkXHJcbiAgICovXG5cblxuICBUb29sdGlwSFRNTENvbnRlbnQucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh0b29sdGlwTW9kZWwpIHtcbiAgICAvLyBGSVhNRVxuICAgIC8vIE1vdmUgdGhpcyBsb2dpYyB0byBlYyBtYWluP1xuICAgIHZhciBjb250YWluZXIgPSB0aGlzLl9jb250YWluZXI7XG4gICAgdmFyIHBvc2l0aW9uID0gZ2V0Q29tcHV0ZWRTdHlsZShjb250YWluZXIsICdwb3NpdGlvbicpO1xuICAgIHZhciBkb21TdHlsZSA9IGNvbnRhaW5lci5zdHlsZTtcblxuICAgIGlmIChkb21TdHlsZS5wb3NpdGlvbiAhPT0gJ2Fic29sdXRlJyAmJiBwb3NpdGlvbiAhPT0gJ2Fic29sdXRlJykge1xuICAgICAgZG9tU3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgIH0gLy8gbW92ZSB0b29sdGlwIGlmIGNoYXJ0IHJlc2l6ZWRcblxuXG4gICAgdmFyIGFsd2F5c1Nob3dDb250ZW50ID0gdG9vbHRpcE1vZGVsLmdldCgnYWx3YXlzU2hvd0NvbnRlbnQnKTtcbiAgICBhbHdheXNTaG93Q29udGVudCAmJiB0aGlzLl9tb3ZlSWZSZXNpemVkKCk7IC8vIHVwZGF0ZSBhbHdheXNTaG93Q29udGVudFxuXG4gICAgdGhpcy5fYWx3YXlzU2hvd0NvbnRlbnQgPSBhbHdheXNTaG93Q29udGVudDsgLy8gdXBkYXRlIGNsYXNzTmFtZVxuXG4gICAgdGhpcy5lbC5jbGFzc05hbWUgPSB0b29sdGlwTW9kZWwuZ2V0KCdjbGFzc05hbWUnKSB8fCAnJzsgLy8gSGlkZSB0aGUgdG9vbHRpcFxuICAgIC8vIFBFTkRJTkdcbiAgICAvLyB0aGlzLmhpZGUoKTtcbiAgfTtcblxuICBUb29sdGlwSFRNTENvbnRlbnQucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAodG9vbHRpcE1vZGVsLCBuZWFyUG9pbnRDb2xvcikge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLl9oaWRlVGltZW91dCk7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuX2xvbmdIaWRlVGltZW91dCk7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgc3R5bGUgPSBlbC5zdHlsZTtcbiAgICB2YXIgc3R5bGVDb29yZCA9IHRoaXMuX3N0eWxlQ29vcmQ7XG5cbiAgICBpZiAoIWVsLmlubmVySFRNTCkge1xuICAgICAgc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUuY3NzVGV4dCA9IGdDc3NUZXh0ICsgYXNzZW1ibGVDc3NUZXh0KHRvb2x0aXBNb2RlbCwgIXRoaXMuX2ZpcnN0U2hvdywgdGhpcy5fbG9uZ0hpZGUpIC8vIGluaXRpYWwgdHJhbnNmb3JtXG4gICAgICArIGFzc2VtYmxlVHJhbnNmb3JtKHN0eWxlQ29vcmRbMF0sIHN0eWxlQ29vcmRbMV0sIHRydWUpICsgKFwiYm9yZGVyLWNvbG9yOlwiICsgY29udmVydFRvQ29sb3JTdHJpbmcobmVhclBvaW50Q29sb3IpICsgXCI7XCIpICsgKHRvb2x0aXBNb2RlbC5nZXQoJ2V4dHJhQ3NzVGV4dCcpIHx8ICcnKSAvLyBJZiBtb3VzZSBvY2Nhc2lvbmFsbHkgbW92ZSBvdmVyIHRoZSB0b29sdGlwLCBhIG1vdXNlb3V0IGV2ZW50IHdpbGwgYmVcbiAgICAgIC8vIHRyaWdnZXJlZCBieSBjYW52YXMsIGFuZCBjYXVzZSBzb21lIHVuZXhwZWN0YWJsZSByZXN1bHQgbGlrZSBkcmFnZ2luZ1xuICAgICAgLy8gc3RvcCwgXCJ1bmZvY3VzQWRqYWNlbmN5XCIuIEhlcmUgYHBvaW50ZXItZXZlbnRzOiBub25lYCBpcyB1c2VkIHRvIHNvbHZlXG4gICAgICAvLyBpdC4gQWx0aG91Z2ggaXQgaXMgbm90IHN1cHBvcnRlZCBieSBJRTh+SUUxMCwgZm9ydHVuYXRlbHkgaXQgaXMgYSByYXJlXG4gICAgICAvLyBzY2VuYXJpby5cbiAgICAgICsgKFwiO3BvaW50ZXItZXZlbnRzOlwiICsgKHRoaXMuX2VudGVyYWJsZSA/ICdhdXRvJyA6ICdub25lJykpO1xuICAgIH1cblxuICAgIHRoaXMuX3Nob3cgPSB0cnVlO1xuICAgIHRoaXMuX2ZpcnN0U2hvdyA9IGZhbHNlO1xuICAgIHRoaXMuX2xvbmdIaWRlID0gZmFsc2U7XG4gIH07XG5cbiAgVG9vbHRpcEhUTUxDb250ZW50LnByb3RvdHlwZS5zZXRDb250ZW50ID0gZnVuY3Rpb24gKGNvbnRlbnQsIG1hcmtlcnMsIHRvb2x0aXBNb2RlbCwgYm9yZGVyQ29sb3IsIGFycm93UG9zaXRpb24pIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXG4gICAgaWYgKGNvbnRlbnQgPT0gbnVsbCkge1xuICAgICAgZWwuaW5uZXJIVE1MID0gJyc7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGFycm93ID0gJyc7XG5cbiAgICBpZiAoaXNTdHJpbmcoYXJyb3dQb3NpdGlvbikgJiYgdG9vbHRpcE1vZGVsLmdldCgndHJpZ2dlcicpID09PSAnaXRlbScgJiYgIXNob3VsZFRvb2x0aXBDb25maW5lKHRvb2x0aXBNb2RlbCkpIHtcbiAgICAgIGFycm93ID0gYXNzZW1ibGVBcnJvdyh0b29sdGlwTW9kZWwsIGJvcmRlckNvbG9yLCBhcnJvd1Bvc2l0aW9uKTtcbiAgICB9XG5cbiAgICBpZiAoaXNTdHJpbmcoY29udGVudCkpIHtcbiAgICAgIGVsLmlubmVySFRNTCA9IGNvbnRlbnQgKyBhcnJvdztcbiAgICB9IGVsc2UgaWYgKGNvbnRlbnQpIHtcbiAgICAgIC8vIENsZWFyIHByZXZpb3VzXG4gICAgICBlbC5pbm5lckhUTUwgPSAnJztcblxuICAgICAgaWYgKCFpc0FycmF5KGNvbnRlbnQpKSB7XG4gICAgICAgIGNvbnRlbnQgPSBbY29udGVudF07XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29udGVudC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoaXNEb20oY29udGVudFtpXSkgJiYgY29udGVudFtpXS5wYXJlbnROb2RlICE9PSBlbCkge1xuICAgICAgICAgIGVsLmFwcGVuZENoaWxkKGNvbnRlbnRbaV0pO1xuICAgICAgICB9XG4gICAgICB9IC8vIG5vIGFycm93IGlmIGVtcHR5XG5cblxuICAgICAgaWYgKGFycm93ICYmIGVsLmNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICAgIC8vIG5vIG5lZWQgdG8gY3JlYXRlIGEgbmV3IHBhcmVudCBlbGVtZW50LCBidXQgaXQncyBub3Qgc3VwcG9ydGVkIGJ5IElFIDEwIGFuZCBvbGRlci5cbiAgICAgICAgLy8gY29uc3QgYXJyb3dFbCA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGFycm93KTtcbiAgICAgICAgdmFyIGFycm93RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgYXJyb3dFbC5pbm5lckhUTUwgPSBhcnJvdztcbiAgICAgICAgZWwuYXBwZW5kQ2hpbGQoYXJyb3dFbCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIFRvb2x0aXBIVE1MQ29udGVudC5wcm90b3R5cGUuc2V0RW50ZXJhYmxlID0gZnVuY3Rpb24gKGVudGVyYWJsZSkge1xuICAgIHRoaXMuX2VudGVyYWJsZSA9IGVudGVyYWJsZTtcbiAgfTtcblxuICBUb29sdGlwSFRNTENvbnRlbnQucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICByZXR1cm4gW2VsLm9mZnNldFdpZHRoLCBlbC5vZmZzZXRIZWlnaHRdO1xuICB9O1xuXG4gIFRvb2x0aXBIVE1MQ29udGVudC5wcm90b3R5cGUubW92ZVRvID0gZnVuY3Rpb24gKHpyWCwgenJZKSB7XG4gICAgdmFyIHN0eWxlQ29vcmQgPSB0aGlzLl9zdHlsZUNvb3JkO1xuICAgIG1ha2VTdHlsZUNvb3JkKHN0eWxlQ29vcmQsIHRoaXMuX3pyLCB0aGlzLl9hcHBlbmRUb0JvZHksIHpyWCwgenJZKTtcblxuICAgIGlmIChzdHlsZUNvb3JkWzBdICE9IG51bGwgJiYgc3R5bGVDb29yZFsxXSAhPSBudWxsKSB7XG4gICAgICB2YXIgc3R5bGVfMSA9IHRoaXMuZWwuc3R5bGU7XG4gICAgICB2YXIgdHJhbnNmb3JtcyA9IGFzc2VtYmxlVHJhbnNmb3JtKHN0eWxlQ29vcmRbMF0sIHN0eWxlQ29vcmRbMV0pO1xuICAgICAgZWFjaCh0cmFuc2Zvcm1zLCBmdW5jdGlvbiAodHJhbnNmb3JtKSB7XG4gICAgICAgIHN0eWxlXzFbdHJhbnNmb3JtWzBdXSA9IHRyYW5zZm9ybVsxXTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbiAgLyoqXHJcbiAgICogd2hlbiBgYWx3YXlzU2hvd0NvbnRlbnRgIGlzIHRydWUsXHJcbiAgICogbW92ZSB0aGUgdG9vbHRpcCBhZnRlciBjaGFydCByZXNpemVkXHJcbiAgICovXG5cblxuICBUb29sdGlwSFRNTENvbnRlbnQucHJvdG90eXBlLl9tb3ZlSWZSZXNpemVkID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIFRoZSByYXRpbyBvZiBsZWZ0IHRvIHdpZHRoXG4gICAgdmFyIHJhdGlvWCA9IHRoaXMuX3N0eWxlQ29vcmRbMl07IC8vIFRoZSByYXRpbyBvZiB0b3AgdG8gaGVpZ2h0XG5cbiAgICB2YXIgcmF0aW9ZID0gdGhpcy5fc3R5bGVDb29yZFszXTtcbiAgICB0aGlzLm1vdmVUbyhyYXRpb1ggKiB0aGlzLl96ci5nZXRXaWR0aCgpLCByYXRpb1kgKiB0aGlzLl96ci5nZXRIZWlnaHQoKSk7XG4gIH07XG5cbiAgVG9vbHRpcEhUTUxDb250ZW50LnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgc3R5bGUgPSB0aGlzLmVsLnN0eWxlO1xuICAgIHN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICBzdHlsZS5vcGFjaXR5ID0gJzAnO1xuICAgIGVudi50cmFuc2Zvcm0zZFN1cHBvcnRlZCAmJiAoc3R5bGUud2lsbENoYW5nZSA9ICcnKTtcbiAgICB0aGlzLl9zaG93ID0gZmFsc2U7XG4gICAgdGhpcy5fbG9uZ0hpZGVUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX3RoaXMuX2xvbmdIaWRlID0gdHJ1ZTtcbiAgICB9LCA1MDApO1xuICB9O1xuXG4gIFRvb2x0aXBIVE1MQ29udGVudC5wcm90b3R5cGUuaGlkZUxhdGVyID0gZnVuY3Rpb24gKHRpbWUpIHtcbiAgICBpZiAodGhpcy5fc2hvdyAmJiAhKHRoaXMuX2luQ29udGVudCAmJiB0aGlzLl9lbnRlcmFibGUpICYmICF0aGlzLl9hbHdheXNTaG93Q29udGVudCkge1xuICAgICAgaWYgKHRpbWUpIHtcbiAgICAgICAgdGhpcy5faGlkZURlbGF5ID0gdGltZTsgLy8gU2V0IHNob3cgZmFsc2UgdG8gYXZvaWQgaW52b2tlIGhpZGVMYXRlciBtdWx0aXBsZSB0aW1lc1xuXG4gICAgICAgIHRoaXMuX3Nob3cgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5faGlkZVRpbWVvdXQgPSBzZXRUaW1lb3V0KGJpbmQodGhpcy5oaWRlLCB0aGlzKSwgdGltZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgVG9vbHRpcEhUTUxDb250ZW50LnByb3RvdHlwZS5pc1Nob3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Nob3c7XG4gIH07XG5cbiAgVG9vbHRpcEhUTUxDb250ZW50LnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsKTtcbiAgfTtcblxuICByZXR1cm4gVG9vbHRpcEhUTUxDb250ZW50O1xufSgpO1xuXG5leHBvcnQgZGVmYXVsdCBUb29sdGlwSFRNTENvbnRlbnQ7IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgKiBhcyB6clV0aWwgZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbmltcG9ydCBaUlRleHQgZnJvbSAnenJlbmRlci9saWIvZ3JhcGhpYy9UZXh0LmpzJztcbmltcG9ydCB7IGdldFBhZGRpbmdGcm9tVG9vbHRpcE1vZGVsIH0gZnJvbSAnLi90b29sdGlwTWFya3VwLmpzJztcbmltcG9ydCB7IHRocm93RXJyb3IgfSBmcm9tICcuLi8uLi91dGlsL2xvZy5qcyc7XG5cbnZhciBUb29sdGlwUmljaENvbnRlbnQgPVxuLyoqIEBjbGFzcyAqL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBUb29sdGlwUmljaENvbnRlbnQoYXBpKSB7XG4gICAgdGhpcy5fc2hvdyA9IGZhbHNlO1xuICAgIHRoaXMuX3N0eWxlQ29vcmQgPSBbMCwgMCwgMCwgMF07XG4gICAgdGhpcy5fYWx3YXlzU2hvd0NvbnRlbnQgPSBmYWxzZTtcbiAgICB0aGlzLl9lbnRlcmFibGUgPSB0cnVlO1xuICAgIHRoaXMuX3pyID0gYXBpLmdldFpyKCk7XG4gICAgbWFrZVN0eWxlQ29vcmQodGhpcy5fc3R5bGVDb29yZCwgdGhpcy5fenIsIGFwaS5nZXRXaWR0aCgpIC8gMiwgYXBpLmdldEhlaWdodCgpIC8gMik7XG4gIH1cbiAgLyoqXHJcbiAgICogVXBkYXRlIHdoZW4gdG9vbHRpcCBpcyByZW5kZXJlZFxyXG4gICAqL1xuXG5cbiAgVG9vbHRpcFJpY2hDb250ZW50LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAodG9vbHRpcE1vZGVsKSB7XG4gICAgdmFyIGFsd2F5c1Nob3dDb250ZW50ID0gdG9vbHRpcE1vZGVsLmdldCgnYWx3YXlzU2hvd0NvbnRlbnQnKTtcbiAgICBhbHdheXNTaG93Q29udGVudCAmJiB0aGlzLl9tb3ZlSWZSZXNpemVkKCk7IC8vIHVwZGF0ZSBhbHdheXNTaG93Q29udGVudFxuXG4gICAgdGhpcy5fYWx3YXlzU2hvd0NvbnRlbnQgPSBhbHdheXNTaG93Q29udGVudDtcbiAgfTtcblxuICBUb29sdGlwUmljaENvbnRlbnQucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX2hpZGVUaW1lb3V0KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5faGlkZVRpbWVvdXQpO1xuICAgIH1cblxuICAgIHRoaXMuZWwuc2hvdygpO1xuICAgIHRoaXMuX3Nob3cgPSB0cnVlO1xuICB9O1xuICAvKipcclxuICAgKiBTZXQgdG9vbHRpcCBjb250ZW50XHJcbiAgICovXG5cblxuICBUb29sdGlwUmljaENvbnRlbnQucHJvdG90eXBlLnNldENvbnRlbnQgPSBmdW5jdGlvbiAoY29udGVudCwgbWFya3VwU3R5bGVDcmVhdG9yLCB0b29sdGlwTW9kZWwsIGJvcmRlckNvbG9yLCBhcnJvd1Bvc2l0aW9uKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIGlmICh6clV0aWwuaXNPYmplY3QoY29udGVudCkpIHtcbiAgICAgIHRocm93RXJyb3IocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/ICdQYXNzaW5nIERPTSBub2RlcyBhcyBjb250ZW50IGlzIG5vdCBzdXBwb3J0ZWQgaW4gcmljaFRleHQgdG9vbHRpcCEnIDogJycpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmVsKSB7XG4gICAgICB0aGlzLl96ci5yZW1vdmUodGhpcy5lbCk7XG4gICAgfVxuXG4gICAgdmFyIHRleHRTdHlsZU1vZGVsID0gdG9vbHRpcE1vZGVsLmdldE1vZGVsKCd0ZXh0U3R5bGUnKTtcbiAgICB0aGlzLmVsID0gbmV3IFpSVGV4dCh7XG4gICAgICBzdHlsZToge1xuICAgICAgICByaWNoOiBtYXJrdXBTdHlsZUNyZWF0b3IucmljaFRleHRTdHlsZXMsXG4gICAgICAgIHRleHQ6IGNvbnRlbnQsXG4gICAgICAgIGxpbmVIZWlnaHQ6IDIyLFxuICAgICAgICBib3JkZXJXaWR0aDogMSxcbiAgICAgICAgYm9yZGVyQ29sb3I6IGJvcmRlckNvbG9yLFxuICAgICAgICB0ZXh0U2hhZG93Q29sb3I6IHRleHRTdHlsZU1vZGVsLmdldCgndGV4dFNoYWRvd0NvbG9yJyksXG4gICAgICAgIGZpbGw6IHRvb2x0aXBNb2RlbC5nZXQoWyd0ZXh0U3R5bGUnLCAnY29sb3InXSksXG4gICAgICAgIHBhZGRpbmc6IGdldFBhZGRpbmdGcm9tVG9vbHRpcE1vZGVsKHRvb2x0aXBNb2RlbCwgJ3JpY2hUZXh0JyksXG4gICAgICAgIHZlcnRpY2FsQWxpZ246ICd0b3AnLFxuICAgICAgICBhbGlnbjogJ2xlZnQnXG4gICAgICB9LFxuICAgICAgejogdG9vbHRpcE1vZGVsLmdldCgneicpXG4gICAgfSk7XG4gICAgenJVdGlsLmVhY2goWydiYWNrZ3JvdW5kQ29sb3InLCAnYm9yZGVyUmFkaXVzJywgJ3NoYWRvd0NvbG9yJywgJ3NoYWRvd0JsdXInLCAnc2hhZG93T2Zmc2V0WCcsICdzaGFkb3dPZmZzZXRZJ10sIGZ1bmN0aW9uIChwcm9wTmFtZSkge1xuICAgICAgX3RoaXMuZWwuc3R5bGVbcHJvcE5hbWVdID0gdG9vbHRpcE1vZGVsLmdldChwcm9wTmFtZSk7XG4gICAgfSk7XG4gICAgenJVdGlsLmVhY2goWyd0ZXh0U2hhZG93Qmx1cicsICd0ZXh0U2hhZG93T2Zmc2V0WCcsICd0ZXh0U2hhZG93T2Zmc2V0WSddLCBmdW5jdGlvbiAocHJvcE5hbWUpIHtcbiAgICAgIF90aGlzLmVsLnN0eWxlW3Byb3BOYW1lXSA9IHRleHRTdHlsZU1vZGVsLmdldChwcm9wTmFtZSkgfHwgMDtcbiAgICB9KTtcblxuICAgIHRoaXMuX3pyLmFkZCh0aGlzLmVsKTtcblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLmVsLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBjbGVhciB0aGUgdGltZW91dCBpbiBoaWRlTGF0ZXIgYW5kIGtlZXAgc2hvd2luZyB0b29sdGlwXG4gICAgICBpZiAoc2VsZi5fZW50ZXJhYmxlKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChzZWxmLl9oaWRlVGltZW91dCk7XG4gICAgICAgIHNlbGYuX3Nob3cgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBzZWxmLl9pbkNvbnRlbnQgPSB0cnVlO1xuICAgIH0pO1xuICAgIHRoaXMuZWwub24oJ21vdXNlb3V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHNlbGYuX2VudGVyYWJsZSkge1xuICAgICAgICBpZiAoc2VsZi5fc2hvdykge1xuICAgICAgICAgIHNlbGYuaGlkZUxhdGVyKHNlbGYuX2hpZGVEZWxheSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgc2VsZi5faW5Db250ZW50ID0gZmFsc2U7XG4gICAgfSk7XG4gIH07XG5cbiAgVG9vbHRpcFJpY2hDb250ZW50LnByb3RvdHlwZS5zZXRFbnRlcmFibGUgPSBmdW5jdGlvbiAoZW50ZXJhYmxlKSB7XG4gICAgdGhpcy5fZW50ZXJhYmxlID0gZW50ZXJhYmxlO1xuICB9O1xuXG4gIFRvb2x0aXBSaWNoQ29udGVudC5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciBib3VuZGluZyA9IHRoaXMuZWwuZ2V0Qm91bmRpbmdSZWN0KCk7IC8vIGJvdW5kaW5nIHJlY3QgZG9lcyBub3QgaW5jbHVkZSBzaGFkb3cuIEZvciByZW5kZXJNb2RlIHJpY2hUZXh0LFxuICAgIC8vIGlmIG92ZXJmbG93LCBpdCB3aWxsIGJlIGN1dC4gU28gY2FsY3VsYXRlIHRoZW0gYWNjdXJhdGVseS5cblxuICAgIHZhciBzaGFkb3dPdXRlclNpemUgPSBjYWxjU2hhZG93T3V0ZXJTaXplKGVsLnN0eWxlKTtcbiAgICByZXR1cm4gW2JvdW5kaW5nLndpZHRoICsgc2hhZG93T3V0ZXJTaXplLmxlZnQgKyBzaGFkb3dPdXRlclNpemUucmlnaHQsIGJvdW5kaW5nLmhlaWdodCArIHNoYWRvd091dGVyU2l6ZS50b3AgKyBzaGFkb3dPdXRlclNpemUuYm90dG9tXTtcbiAgfTtcblxuICBUb29sdGlwUmljaENvbnRlbnQucHJvdG90eXBlLm1vdmVUbyA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcblxuICAgIGlmIChlbCkge1xuICAgICAgdmFyIHN0eWxlQ29vcmQgPSB0aGlzLl9zdHlsZUNvb3JkO1xuICAgICAgbWFrZVN0eWxlQ29vcmQoc3R5bGVDb29yZCwgdGhpcy5fenIsIHgsIHkpO1xuICAgICAgeCA9IHN0eWxlQ29vcmRbMF07XG4gICAgICB5ID0gc3R5bGVDb29yZFsxXTtcbiAgICAgIHZhciBzdHlsZSA9IGVsLnN0eWxlO1xuICAgICAgdmFyIGJvcmRlcldpZHRoID0gbWF0aE1heFdpdGgwKHN0eWxlLmJvcmRlcldpZHRoIHx8IDApO1xuICAgICAgdmFyIHNoYWRvd091dGVyU2l6ZSA9IGNhbGNTaGFkb3dPdXRlclNpemUoc3R5bGUpOyAvLyByaWNoIHRleHQgeCwgeSBkbyBub3QgaW5jbHVkZSBib3JkZXIuXG5cbiAgICAgIGVsLnggPSB4ICsgYm9yZGVyV2lkdGggKyBzaGFkb3dPdXRlclNpemUubGVmdDtcbiAgICAgIGVsLnkgPSB5ICsgYm9yZGVyV2lkdGggKyBzaGFkb3dPdXRlclNpemUudG9wO1xuICAgICAgZWwubWFya1JlZHJhdygpO1xuICAgIH1cbiAgfTtcbiAgLyoqXHJcbiAgICogd2hlbiBgYWx3YXlzU2hvd0NvbnRlbnRgIGlzIHRydWUsXHJcbiAgICogbW92ZSB0aGUgdG9vbHRpcCBhZnRlciBjaGFydCByZXNpemVkXHJcbiAgICovXG5cblxuICBUb29sdGlwUmljaENvbnRlbnQucHJvdG90eXBlLl9tb3ZlSWZSZXNpemVkID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIFRoZSByYXRpbyBvZiBsZWZ0IHRvIHdpZHRoXG4gICAgdmFyIHJhdGlvWCA9IHRoaXMuX3N0eWxlQ29vcmRbMl07IC8vIFRoZSByYXRpbyBvZiB0b3AgdG8gaGVpZ2h0XG5cbiAgICB2YXIgcmF0aW9ZID0gdGhpcy5fc3R5bGVDb29yZFszXTtcbiAgICB0aGlzLm1vdmVUbyhyYXRpb1ggKiB0aGlzLl96ci5nZXRXaWR0aCgpLCByYXRpb1kgKiB0aGlzLl96ci5nZXRIZWlnaHQoKSk7XG4gIH07XG5cbiAgVG9vbHRpcFJpY2hDb250ZW50LnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLmVsKSB7XG4gICAgICB0aGlzLmVsLmhpZGUoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9zaG93ID0gZmFsc2U7XG4gIH07XG5cbiAgVG9vbHRpcFJpY2hDb250ZW50LnByb3RvdHlwZS5oaWRlTGF0ZXIgPSBmdW5jdGlvbiAodGltZSkge1xuICAgIGlmICh0aGlzLl9zaG93ICYmICEodGhpcy5faW5Db250ZW50ICYmIHRoaXMuX2VudGVyYWJsZSkgJiYgIXRoaXMuX2Fsd2F5c1Nob3dDb250ZW50KSB7XG4gICAgICBpZiAodGltZSkge1xuICAgICAgICB0aGlzLl9oaWRlRGVsYXkgPSB0aW1lOyAvLyBTZXQgc2hvdyBmYWxzZSB0byBhdm9pZCBpbnZva2UgaGlkZUxhdGVyIG11bHRpcGxlIHRpbWVzXG5cbiAgICAgICAgdGhpcy5fc2hvdyA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9oaWRlVGltZW91dCA9IHNldFRpbWVvdXQoenJVdGlsLmJpbmQodGhpcy5oaWRlLCB0aGlzKSwgdGltZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgVG9vbHRpcFJpY2hDb250ZW50LnByb3RvdHlwZS5pc1Nob3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Nob3c7XG4gIH07XG5cbiAgVG9vbHRpcFJpY2hDb250ZW50LnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX3pyLnJlbW92ZSh0aGlzLmVsKTtcbiAgfTtcblxuICByZXR1cm4gVG9vbHRpcFJpY2hDb250ZW50O1xufSgpO1xuXG5mdW5jdGlvbiBtYXRoTWF4V2l0aDAodmFsKSB7XG4gIHJldHVybiBNYXRoLm1heCgwLCB2YWwpO1xufVxuXG5mdW5jdGlvbiBjYWxjU2hhZG93T3V0ZXJTaXplKHN0eWxlKSB7XG4gIHZhciBzaGFkb3dCbHVyID0gbWF0aE1heFdpdGgwKHN0eWxlLnNoYWRvd0JsdXIgfHwgMCk7XG4gIHZhciBzaGFkb3dPZmZzZXRYID0gbWF0aE1heFdpdGgwKHN0eWxlLnNoYWRvd09mZnNldFggfHwgMCk7XG4gIHZhciBzaGFkb3dPZmZzZXRZID0gbWF0aE1heFdpdGgwKHN0eWxlLnNoYWRvd09mZnNldFkgfHwgMCk7XG4gIHJldHVybiB7XG4gICAgbGVmdDogbWF0aE1heFdpdGgwKHNoYWRvd0JsdXIgLSBzaGFkb3dPZmZzZXRYKSxcbiAgICByaWdodDogbWF0aE1heFdpdGgwKHNoYWRvd0JsdXIgKyBzaGFkb3dPZmZzZXRYKSxcbiAgICB0b3A6IG1hdGhNYXhXaXRoMChzaGFkb3dCbHVyIC0gc2hhZG93T2Zmc2V0WSksXG4gICAgYm90dG9tOiBtYXRoTWF4V2l0aDAoc2hhZG93Qmx1ciArIHNoYWRvd09mZnNldFkpXG4gIH07XG59XG5cbmZ1bmN0aW9uIG1ha2VTdHlsZUNvb3JkKG91dCwgenIsIHpyWCwgenJZKSB7XG4gIG91dFswXSA9IHpyWDtcbiAgb3V0WzFdID0genJZO1xuICBvdXRbMl0gPSBvdXRbMF0gLyB6ci5nZXRXaWR0aCgpO1xuICBvdXRbM10gPSBvdXRbMV0gLyB6ci5nZXRIZWlnaHQoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgVG9vbHRpcFJpY2hDb250ZW50OyIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG5pbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5cbmltcG9ydCB7IGJpbmQsIGVhY2gsIGNsb25lLCB0cmltLCBpc1N0cmluZywgaXNGdW5jdGlvbiwgaXNBcnJheSwgaXNPYmplY3QsIGV4dGVuZCB9IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgZW52IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvZW52LmpzJztcbmltcG9ydCBUb29sdGlwSFRNTENvbnRlbnQgZnJvbSAnLi9Ub29sdGlwSFRNTENvbnRlbnQuanMnO1xuaW1wb3J0IFRvb2x0aXBSaWNoQ29udGVudCBmcm9tICcuL1Rvb2x0aXBSaWNoQ29udGVudC5qcyc7XG5pbXBvcnQgeyBjb252ZXJ0VG9Db2xvclN0cmluZywgZm9ybWF0VHBsIH0gZnJvbSAnLi4vLi4vdXRpbC9mb3JtYXQuanMnO1xuaW1wb3J0IHsgcGFyc2VQZXJjZW50IH0gZnJvbSAnLi4vLi4vdXRpbC9udW1iZXIuanMnO1xuaW1wb3J0IHsgUmVjdCB9IGZyb20gJy4uLy4uL3V0aWwvZ3JhcGhpYy5qcyc7XG5pbXBvcnQgZmluZFBvaW50RnJvbVNlcmllcyBmcm9tICcuLi9heGlzUG9pbnRlci9maW5kUG9pbnRGcm9tU2VyaWVzLmpzJztcbmltcG9ydCB7IGdldExheW91dFJlY3QgfSBmcm9tICcuLi8uLi91dGlsL2xheW91dC5qcyc7XG5pbXBvcnQgTW9kZWwgZnJvbSAnLi4vLi4vbW9kZWwvTW9kZWwuanMnO1xuaW1wb3J0ICogYXMgZ2xvYmFsTGlzdGVuZXIgZnJvbSAnLi4vYXhpc1BvaW50ZXIvZ2xvYmFsTGlzdGVuZXIuanMnO1xuaW1wb3J0ICogYXMgYXhpc0hlbHBlciBmcm9tICcuLi8uLi9jb29yZC9heGlzSGVscGVyLmpzJztcbmltcG9ydCAqIGFzIGF4aXNQb2ludGVyVmlld0hlbHBlciBmcm9tICcuLi9heGlzUG9pbnRlci92aWV3SGVscGVyLmpzJztcbmltcG9ydCB7IGdldFRvb2x0aXBSZW5kZXJNb2RlLCBwcmVQYXJzZUZpbmRlciwgcXVlcnlSZWZlcnJpbmdDb21wb25lbnRzIH0gZnJvbSAnLi4vLi4vdXRpbC9tb2RlbC5qcyc7XG5pbXBvcnQgQ29tcG9uZW50VmlldyBmcm9tICcuLi8uLi92aWV3L0NvbXBvbmVudC5qcyc7XG5pbXBvcnQgeyBmb3JtYXQgYXMgdGltZUZvcm1hdCB9IGZyb20gJy4uLy4uL3V0aWwvdGltZS5qcyc7XG5pbXBvcnQgeyBnZXRFQ0RhdGEgfSBmcm9tICcuLi8uLi91dGlsL2lubmVyU3RvcmUuanMnO1xuaW1wb3J0IHsgc2hvdWxkVG9vbHRpcENvbmZpbmUgfSBmcm9tICcuL2hlbHBlci5qcyc7XG5pbXBvcnQgeyBub3JtYWxpemVUb29sdGlwRm9ybWF0UmVzdWx0IH0gZnJvbSAnLi4vLi4vbW9kZWwvbWl4aW4vZGF0YUZvcm1hdC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVUb29sdGlwTWFya3VwLCBidWlsZFRvb2x0aXBNYXJrdXAsIFRvb2x0aXBNYXJrdXBTdHlsZUNyZWF0b3IgfSBmcm9tICcuL3Rvb2x0aXBNYXJrdXAuanMnO1xuaW1wb3J0IHsgZmluZEV2ZW50RGlzcGF0Y2hlciB9IGZyb20gJy4uLy4uL3V0aWwvZXZlbnQuanMnO1xuaW1wb3J0IHsgY2xlYXIsIGNyZWF0ZU9yVXBkYXRlIH0gZnJvbSAnLi4vLi4vdXRpbC90aHJvdHRsZS5qcyc7XG52YXIgcHJveHlSZWN0ID0gbmV3IFJlY3Qoe1xuICBzaGFwZToge1xuICAgIHg6IC0xLFxuICAgIHk6IC0xLFxuICAgIHdpZHRoOiAyLFxuICAgIGhlaWdodDogMlxuICB9XG59KTtcblxudmFyIFRvb2x0aXBWaWV3ID1cbi8qKiBAY2xhc3MgKi9cbmZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgX19leHRlbmRzKFRvb2x0aXBWaWV3LCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIFRvb2x0aXBWaWV3KCkge1xuICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuXG4gICAgX3RoaXMudHlwZSA9IFRvb2x0aXBWaWV3LnR5cGU7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgVG9vbHRpcFZpZXcucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoZWNNb2RlbCwgYXBpKSB7XG4gICAgaWYgKGVudi5ub2RlIHx8ICFhcGkuZ2V0RG9tKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgdG9vbHRpcE1vZGVsID0gZWNNb2RlbC5nZXRDb21wb25lbnQoJ3Rvb2x0aXAnKTtcbiAgICB2YXIgcmVuZGVyTW9kZSA9IHRoaXMuX3JlbmRlck1vZGUgPSBnZXRUb29sdGlwUmVuZGVyTW9kZSh0b29sdGlwTW9kZWwuZ2V0KCdyZW5kZXJNb2RlJykpO1xuICAgIHRoaXMuX3Rvb2x0aXBDb250ZW50ID0gcmVuZGVyTW9kZSA9PT0gJ3JpY2hUZXh0JyA/IG5ldyBUb29sdGlwUmljaENvbnRlbnQoYXBpKSA6IG5ldyBUb29sdGlwSFRNTENvbnRlbnQoYXBpLmdldERvbSgpLCBhcGksIHtcbiAgICAgIGFwcGVuZFRvQm9keTogdG9vbHRpcE1vZGVsLmdldCgnYXBwZW5kVG9Cb2R5JywgdHJ1ZSlcbiAgICB9KTtcbiAgfTtcblxuICBUb29sdGlwVmlldy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKHRvb2x0aXBNb2RlbCwgZWNNb2RlbCwgYXBpKSB7XG4gICAgaWYgKGVudi5ub2RlIHx8ICFhcGkuZ2V0RG9tKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIFJlc2V0XG5cblxuICAgIHRoaXMuZ3JvdXAucmVtb3ZlQWxsKCk7XG4gICAgdGhpcy5fdG9vbHRpcE1vZGVsID0gdG9vbHRpcE1vZGVsO1xuICAgIHRoaXMuX2VjTW9kZWwgPSBlY01vZGVsO1xuICAgIHRoaXMuX2FwaSA9IGFwaTtcbiAgICB2YXIgdG9vbHRpcENvbnRlbnQgPSB0aGlzLl90b29sdGlwQ29udGVudDtcbiAgICB0b29sdGlwQ29udGVudC51cGRhdGUodG9vbHRpcE1vZGVsKTtcbiAgICB0b29sdGlwQ29udGVudC5zZXRFbnRlcmFibGUodG9vbHRpcE1vZGVsLmdldCgnZW50ZXJhYmxlJykpO1xuXG4gICAgdGhpcy5faW5pdEdsb2JhbExpc3RlbmVyKCk7XG5cbiAgICB0aGlzLl9rZWVwU2hvdygpOyAvLyBQRU5ESU5HXG4gICAgLy8gYG1vdXNlbW92ZWAgZXZlbnQgd2lsbCBiZSB0cmlnZ2VyZWQgdmVyeSBmcmVxdWVudGx5IHdoZW4gdGhlIG1vdXNlIG1vdmVzIGZhc3QsXG4gICAgLy8gd2hpY2ggY2F1c2VzIHRoYXQgdGhlIGB1cGRhdGVQb3NpdGlvbmAgZnVuY3Rpb24gd2FzIGFsc28gY2FsbGVkIGZyZXF1ZW50bHkuXG4gICAgLy8gSW4gQ2hyb21lIHdpdGggZGV2dG9vbHMgb3BlbiBhbmQgRmlyZWZveCwgdG9vbHRpcCBsb29rcyBsYWdneSBhbmQgc2hha2VzLiBTZWUgIzE0Njk1ICMxNjEwMVxuICAgIC8vIFRvIGF2b2lkIGZyZXF1ZW50IHRyaWdnZXJpbmcsXG4gICAgLy8gY29uc2lkZXIgdGhyb3R0bGluZyBpdCBpbiA1MG1zIHdoZW4gdHJhbnNpdGlvbiBpcyBlbmFibGVkXG5cblxuICAgIGlmICh0aGlzLl9yZW5kZXJNb2RlICE9PSAncmljaFRleHQnICYmIHRvb2x0aXBNb2RlbC5nZXQoJ3RyYW5zaXRpb25EdXJhdGlvbicpKSB7XG4gICAgICBjcmVhdGVPclVwZGF0ZSh0aGlzLCAnX3VwZGF0ZVBvc2l0aW9uJywgNTAsICdmaXhSYXRlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNsZWFyKHRoaXMsICdfdXBkYXRlUG9zaXRpb24nKTtcbiAgICB9XG4gIH07XG5cbiAgVG9vbHRpcFZpZXcucHJvdG90eXBlLl9pbml0R2xvYmFsTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRvb2x0aXBNb2RlbCA9IHRoaXMuX3Rvb2x0aXBNb2RlbDtcbiAgICB2YXIgdHJpZ2dlck9uID0gdG9vbHRpcE1vZGVsLmdldCgndHJpZ2dlck9uJyk7XG4gICAgZ2xvYmFsTGlzdGVuZXIucmVnaXN0ZXIoJ2l0ZW1Ub29sdGlwJywgdGhpcy5fYXBpLCBiaW5kKGZ1bmN0aW9uIChjdXJyVHJpZ2dlciwgZSwgZGlzcGF0Y2hBY3Rpb24pIHtcbiAgICAgIC8vIElmICdub25lJywgaXQgaXMgbm90IGNvbnRyb2xsZWQgYnkgbW91c2UgdG90YWxseS5cbiAgICAgIGlmICh0cmlnZ2VyT24gIT09ICdub25lJykge1xuICAgICAgICBpZiAodHJpZ2dlck9uLmluZGV4T2YoY3VyclRyaWdnZXIpID49IDApIHtcbiAgICAgICAgICB0aGlzLl90cnlTaG93KGUsIGRpc3BhdGNoQWN0aW9uKTtcbiAgICAgICAgfSBlbHNlIGlmIChjdXJyVHJpZ2dlciA9PT0gJ2xlYXZlJykge1xuICAgICAgICAgIHRoaXMuX2hpZGUoZGlzcGF0Y2hBY3Rpb24pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgdGhpcykpO1xuICB9O1xuXG4gIFRvb2x0aXBWaWV3LnByb3RvdHlwZS5fa2VlcFNob3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRvb2x0aXBNb2RlbCA9IHRoaXMuX3Rvb2x0aXBNb2RlbDtcbiAgICB2YXIgZWNNb2RlbCA9IHRoaXMuX2VjTW9kZWw7XG4gICAgdmFyIGFwaSA9IHRoaXMuX2FwaTtcbiAgICB2YXIgdHJpZ2dlck9uID0gdG9vbHRpcE1vZGVsLmdldCgndHJpZ2dlck9uJyk7IC8vIFRyeSB0byBrZWVwIHRoZSB0b29sdGlwIHNob3cgd2hlbiByZWZyZXNoaW5nXG5cbiAgICBpZiAodGhpcy5fbGFzdFggIT0gbnVsbCAmJiB0aGlzLl9sYXN0WSAhPSBudWxsIC8vIFdoZW4gdXNlciBpcyB3aWxsaW5nIHRvIGNvbnRyb2wgdG9vbHRpcCB0b3RhbGx5IHVzaW5nIEFQSSxcbiAgICAvLyBzZWxmLm1hbnVhbGx5U2hvd1RpcCh7eCwgeX0pIG1pZ2h0IGNhdXNlIHRvb2x0aXAgaGlkZSxcbiAgICAvLyB3aGljaCBpcyBub3QgZXhwZWN0ZWQuXG4gICAgJiYgdHJpZ2dlck9uICE9PSAnbm9uZScgJiYgdHJpZ2dlck9uICE9PSAnY2xpY2snKSB7XG4gICAgICB2YXIgc2VsZl8xID0gdGhpcztcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9yZWZyZXNoVXBkYXRlVGltZW91dCk7XG4gICAgICB0aGlzLl9yZWZyZXNoVXBkYXRlVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBTaG93IHRpcCBuZXh0IHRpY2sgYWZ0ZXIgb3RoZXIgY2hhcnRzIGFyZSByZW5kZXJlZFxuICAgICAgICAvLyBJbiBjYXNlIGhpZ2hsaWdodCBhY3Rpb24gaGFzIHdyb25nIHJlc3VsdFxuICAgICAgICAvLyBGSVhNRVxuICAgICAgICAhYXBpLmlzRGlzcG9zZWQoKSAmJiBzZWxmXzEubWFudWFsbHlTaG93VGlwKHRvb2x0aXBNb2RlbCwgZWNNb2RlbCwgYXBpLCB7XG4gICAgICAgICAgeDogc2VsZl8xLl9sYXN0WCxcbiAgICAgICAgICB5OiBzZWxmXzEuX2xhc3RZLFxuICAgICAgICAgIGRhdGFCeUNvb3JkU3lzOiBzZWxmXzEuX2xhc3REYXRhQnlDb29yZFN5c1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbiAgLyoqXHJcbiAgICogU2hvdyB0aXAgbWFudWFsbHkgYnlcclxuICAgKiBkaXNwYXRjaEFjdGlvbih7XHJcbiAgICogICAgIHR5cGU6ICdzaG93VGlwJyxcclxuICAgKiAgICAgeDogMTAsXHJcbiAgICogICAgIHk6IDEwXHJcbiAgICogfSk7XHJcbiAgICogT3JcclxuICAgKiBkaXNwYXRjaEFjdGlvbih7XHJcbiAgICogICAgICB0eXBlOiAnc2hvd1RpcCcsXHJcbiAgICogICAgICBzZXJpZXNJbmRleDogMCxcclxuICAgKiAgICAgIGRhdGFJbmRleCBvciBkYXRhSW5kZXhJbnNpZGUgb3IgbmFtZVxyXG4gICAqIH0pO1xyXG4gICAqXHJcbiAgICogIFRPRE8gQmF0Y2hcclxuICAgKi9cblxuXG4gIFRvb2x0aXBWaWV3LnByb3RvdHlwZS5tYW51YWxseVNob3dUaXAgPSBmdW5jdGlvbiAodG9vbHRpcE1vZGVsLCBlY01vZGVsLCBhcGksIHBheWxvYWQpIHtcbiAgICBpZiAocGF5bG9hZC5mcm9tID09PSB0aGlzLnVpZCB8fCBlbnYubm9kZSB8fCAhYXBpLmdldERvbSgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGRpc3BhdGNoQWN0aW9uID0gbWFrZURpc3BhdGNoQWN0aW9uKHBheWxvYWQsIGFwaSk7IC8vIFJlc2V0IHRpY2tldFxuXG4gICAgdGhpcy5fdGlja2V0ID0gJyc7IC8vIFdoZW4gdHJpZ2dlcmVkIGZyb20gYXhpc1BvaW50ZXIuXG5cbiAgICB2YXIgZGF0YUJ5Q29vcmRTeXMgPSBwYXlsb2FkLmRhdGFCeUNvb3JkU3lzO1xuICAgIHZhciBjbXB0UmVmID0gZmluZENvbXBvbmVudFJlZmVyZW5jZShwYXlsb2FkLCBlY01vZGVsLCBhcGkpO1xuXG4gICAgaWYgKGNtcHRSZWYpIHtcbiAgICAgIHZhciByZWN0ID0gY21wdFJlZi5lbC5nZXRCb3VuZGluZ1JlY3QoKS5jbG9uZSgpO1xuICAgICAgcmVjdC5hcHBseVRyYW5zZm9ybShjbXB0UmVmLmVsLnRyYW5zZm9ybSk7XG5cbiAgICAgIHRoaXMuX3RyeVNob3coe1xuICAgICAgICBvZmZzZXRYOiByZWN0LnggKyByZWN0LndpZHRoIC8gMixcbiAgICAgICAgb2Zmc2V0WTogcmVjdC55ICsgcmVjdC5oZWlnaHQgLyAyLFxuICAgICAgICB0YXJnZXQ6IGNtcHRSZWYuZWwsXG4gICAgICAgIHBvc2l0aW9uOiBwYXlsb2FkLnBvc2l0aW9uLFxuICAgICAgICAvLyBXaGVuIG1hbnVsbHkgdHJpZ2dlciwgdGhlIG1vdXNlIGlzIG5vdCBvbiB0aGUgZWwsIHNvIHdlJ2QgYmV0dGVyIHRvXG4gICAgICAgIC8vIHBvc2l0aW9uIHRvb2x0aXAgb24gdGhlIGJvdHRvbSBvZiB0aGUgZWwgYW5kIGRpc3BsYXkgYXJyb3cgaXMgcG9zc2libGUuXG4gICAgICAgIHBvc2l0aW9uRGVmYXVsdDogJ2JvdHRvbSdcbiAgICAgIH0sIGRpc3BhdGNoQWN0aW9uKTtcbiAgICB9IGVsc2UgaWYgKHBheWxvYWQudG9vbHRpcCAmJiBwYXlsb2FkLnggIT0gbnVsbCAmJiBwYXlsb2FkLnkgIT0gbnVsbCkge1xuICAgICAgdmFyIGVsID0gcHJveHlSZWN0O1xuICAgICAgZWwueCA9IHBheWxvYWQueDtcbiAgICAgIGVsLnkgPSBwYXlsb2FkLnk7XG4gICAgICBlbC51cGRhdGUoKTtcbiAgICAgIGdldEVDRGF0YShlbCkudG9vbHRpcENvbmZpZyA9IHtcbiAgICAgICAgbmFtZTogbnVsbCxcbiAgICAgICAgb3B0aW9uOiBwYXlsb2FkLnRvb2x0aXBcbiAgICAgIH07IC8vIE1hbnVhbGx5IHNob3cgdG9vbHRpcCB3aGlsZSB2aWV3IGlzIG5vdCB1c2luZyB6cmVuZGVyIGVsZW1lbnRzLlxuXG4gICAgICB0aGlzLl90cnlTaG93KHtcbiAgICAgICAgb2Zmc2V0WDogcGF5bG9hZC54LFxuICAgICAgICBvZmZzZXRZOiBwYXlsb2FkLnksXG4gICAgICAgIHRhcmdldDogZWxcbiAgICAgIH0sIGRpc3BhdGNoQWN0aW9uKTtcbiAgICB9IGVsc2UgaWYgKGRhdGFCeUNvb3JkU3lzKSB7XG4gICAgICB0aGlzLl90cnlTaG93KHtcbiAgICAgICAgb2Zmc2V0WDogcGF5bG9hZC54LFxuICAgICAgICBvZmZzZXRZOiBwYXlsb2FkLnksXG4gICAgICAgIHBvc2l0aW9uOiBwYXlsb2FkLnBvc2l0aW9uLFxuICAgICAgICBkYXRhQnlDb29yZFN5czogZGF0YUJ5Q29vcmRTeXMsXG4gICAgICAgIHRvb2x0aXBPcHRpb246IHBheWxvYWQudG9vbHRpcE9wdGlvblxuICAgICAgfSwgZGlzcGF0Y2hBY3Rpb24pO1xuICAgIH0gZWxzZSBpZiAocGF5bG9hZC5zZXJpZXNJbmRleCAhPSBudWxsKSB7XG4gICAgICBpZiAodGhpcy5fbWFudWFsbHlBeGlzU2hvd1RpcCh0b29sdGlwTW9kZWwsIGVjTW9kZWwsIGFwaSwgcGF5bG9hZCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgcG9pbnRJbmZvID0gZmluZFBvaW50RnJvbVNlcmllcyhwYXlsb2FkLCBlY01vZGVsKTtcbiAgICAgIHZhciBjeCA9IHBvaW50SW5mby5wb2ludFswXTtcbiAgICAgIHZhciBjeSA9IHBvaW50SW5mby5wb2ludFsxXTtcblxuICAgICAgaWYgKGN4ICE9IG51bGwgJiYgY3kgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLl90cnlTaG93KHtcbiAgICAgICAgICBvZmZzZXRYOiBjeCxcbiAgICAgICAgICBvZmZzZXRZOiBjeSxcbiAgICAgICAgICB0YXJnZXQ6IHBvaW50SW5mby5lbCxcbiAgICAgICAgICBwb3NpdGlvbjogcGF5bG9hZC5wb3NpdGlvbixcbiAgICAgICAgICAvLyBXaGVuIG1hbnVsbHkgdHJpZ2dlciwgdGhlIG1vdXNlIGlzIG5vdCBvbiB0aGUgZWwsIHNvIHdlJ2QgYmV0dGVyIHRvXG4gICAgICAgICAgLy8gcG9zaXRpb24gdG9vbHRpcCBvbiB0aGUgYm90dG9tIG9mIHRoZSBlbCBhbmQgZGlzcGxheSBhcnJvdyBpcyBwb3NzaWJsZS5cbiAgICAgICAgICBwb3NpdGlvbkRlZmF1bHQ6ICdib3R0b20nXG4gICAgICAgIH0sIGRpc3BhdGNoQWN0aW9uKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBheWxvYWQueCAhPSBudWxsICYmIHBheWxvYWQueSAhPSBudWxsKSB7XG4gICAgICAvLyBGSVhNRVxuICAgICAgLy8gc2hvdWxkIHdyYXAgZGlzcGF0Y2hBY3Rpb24gbGlrZSBgYXhpc1BvaW50ZXIvZ2xvYmFsTGlzdGVuZXJgID9cbiAgICAgIGFwaS5kaXNwYXRjaEFjdGlvbih7XG4gICAgICAgIHR5cGU6ICd1cGRhdGVBeGlzUG9pbnRlcicsXG4gICAgICAgIHg6IHBheWxvYWQueCxcbiAgICAgICAgeTogcGF5bG9hZC55XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5fdHJ5U2hvdyh7XG4gICAgICAgIG9mZnNldFg6IHBheWxvYWQueCxcbiAgICAgICAgb2Zmc2V0WTogcGF5bG9hZC55LFxuICAgICAgICBwb3NpdGlvbjogcGF5bG9hZC5wb3NpdGlvbixcbiAgICAgICAgdGFyZ2V0OiBhcGkuZ2V0WnIoKS5maW5kSG92ZXIocGF5bG9hZC54LCBwYXlsb2FkLnkpLnRhcmdldFxuICAgICAgfSwgZGlzcGF0Y2hBY3Rpb24pO1xuICAgIH1cbiAgfTtcblxuICBUb29sdGlwVmlldy5wcm90b3R5cGUubWFudWFsbHlIaWRlVGlwID0gZnVuY3Rpb24gKHRvb2x0aXBNb2RlbCwgZWNNb2RlbCwgYXBpLCBwYXlsb2FkKSB7XG4gICAgdmFyIHRvb2x0aXBDb250ZW50ID0gdGhpcy5fdG9vbHRpcENvbnRlbnQ7XG5cbiAgICBpZiAodGhpcy5fdG9vbHRpcE1vZGVsKSB7XG4gICAgICB0b29sdGlwQ29udGVudC5oaWRlTGF0ZXIodGhpcy5fdG9vbHRpcE1vZGVsLmdldCgnaGlkZURlbGF5JykpO1xuICAgIH1cblxuICAgIHRoaXMuX2xhc3RYID0gdGhpcy5fbGFzdFkgPSB0aGlzLl9sYXN0RGF0YUJ5Q29vcmRTeXMgPSBudWxsO1xuXG4gICAgaWYgKHBheWxvYWQuZnJvbSAhPT0gdGhpcy51aWQpIHtcbiAgICAgIHRoaXMuX2hpZGUobWFrZURpc3BhdGNoQWN0aW9uKHBheWxvYWQsIGFwaSkpO1xuICAgIH1cbiAgfTsgLy8gQmUgY29tcGF0aWJsZSB3aXRoIHByZXZpb3VzIGRlc2lnbiwgdGhhdCBpcywgd2hlbiB0b29sdGlwLnR5cGUgaXMgJ2F4aXMnIGFuZFxuICAvLyBkaXNwYXRjaEFjdGlvbiAnc2hvd1RpcCcgd2l0aCBzZXJpZXNJbmRleCBhbmQgZGF0YUluZGV4IHdpbGwgdHJpZ2dlciBheGlzIHBvaW50ZXJcbiAgLy8gYW5kIHRvb2x0aXAuXG5cblxuICBUb29sdGlwVmlldy5wcm90b3R5cGUuX21hbnVhbGx5QXhpc1Nob3dUaXAgPSBmdW5jdGlvbiAodG9vbHRpcE1vZGVsLCBlY01vZGVsLCBhcGksIHBheWxvYWQpIHtcbiAgICB2YXIgc2VyaWVzSW5kZXggPSBwYXlsb2FkLnNlcmllc0luZGV4O1xuICAgIHZhciBkYXRhSW5kZXggPSBwYXlsb2FkLmRhdGFJbmRleDsgLy8gQHRzLWlnbm9yZVxuXG4gICAgdmFyIGNvb3JkU3lzQXhlc0luZm8gPSBlY01vZGVsLmdldENvbXBvbmVudCgnYXhpc1BvaW50ZXInKS5jb29yZFN5c0F4ZXNJbmZvO1xuXG4gICAgaWYgKHNlcmllc0luZGV4ID09IG51bGwgfHwgZGF0YUluZGV4ID09IG51bGwgfHwgY29vcmRTeXNBeGVzSW5mbyA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHNlcmllc01vZGVsID0gZWNNb2RlbC5nZXRTZXJpZXNCeUluZGV4KHNlcmllc0luZGV4KTtcblxuICAgIGlmICghc2VyaWVzTW9kZWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZGF0YSA9IHNlcmllc01vZGVsLmdldERhdGEoKTtcbiAgICB2YXIgdG9vbHRpcENhc2NhZGVkTW9kZWwgPSBidWlsZFRvb2x0aXBNb2RlbChbZGF0YS5nZXRJdGVtTW9kZWwoZGF0YUluZGV4KSwgc2VyaWVzTW9kZWwsIChzZXJpZXNNb2RlbC5jb29yZGluYXRlU3lzdGVtIHx8IHt9KS5tb2RlbF0sIHRoaXMuX3Rvb2x0aXBNb2RlbCk7XG5cbiAgICBpZiAodG9vbHRpcENhc2NhZGVkTW9kZWwuZ2V0KCd0cmlnZ2VyJykgIT09ICdheGlzJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGFwaS5kaXNwYXRjaEFjdGlvbih7XG4gICAgICB0eXBlOiAndXBkYXRlQXhpc1BvaW50ZXInLFxuICAgICAgc2VyaWVzSW5kZXg6IHNlcmllc0luZGV4LFxuICAgICAgZGF0YUluZGV4OiBkYXRhSW5kZXgsXG4gICAgICBwb3NpdGlvbjogcGF5bG9hZC5wb3NpdGlvblxuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIFRvb2x0aXBWaWV3LnByb3RvdHlwZS5fdHJ5U2hvdyA9IGZ1bmN0aW9uIChlLCBkaXNwYXRjaEFjdGlvbikge1xuICAgIHZhciBlbCA9IGUudGFyZ2V0O1xuICAgIHZhciB0b29sdGlwTW9kZWwgPSB0aGlzLl90b29sdGlwTW9kZWw7XG5cbiAgICBpZiAoIXRvb2x0aXBNb2RlbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gU2F2ZSBtb3VzZSB4LCBtb3VzZSB5LiBTbyB3ZSBjYW4gdHJ5IHRvIGtlZXAgc2hvd2luZyB0aGUgdGlwIGlmIGNoYXJ0IGlzIHJlZnJlc2hlZFxuXG5cbiAgICB0aGlzLl9sYXN0WCA9IGUub2Zmc2V0WDtcbiAgICB0aGlzLl9sYXN0WSA9IGUub2Zmc2V0WTtcbiAgICB2YXIgZGF0YUJ5Q29vcmRTeXMgPSBlLmRhdGFCeUNvb3JkU3lzO1xuXG4gICAgaWYgKGRhdGFCeUNvb3JkU3lzICYmIGRhdGFCeUNvb3JkU3lzLmxlbmd0aCkge1xuICAgICAgdGhpcy5fc2hvd0F4aXNUb29sdGlwKGRhdGFCeUNvb3JkU3lzLCBlKTtcbiAgICB9IGVsc2UgaWYgKGVsKSB7XG4gICAgICB0aGlzLl9sYXN0RGF0YUJ5Q29vcmRTeXMgPSBudWxsO1xuICAgICAgdmFyIHNlcmllc0Rpc3BhdGNoZXJfMTtcbiAgICAgIHZhciBjbXB0RGlzcGF0Y2hlcl8xO1xuICAgICAgZmluZEV2ZW50RGlzcGF0Y2hlcihlbCwgZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAvLyBBbHdheXMgc2hvdyBpdGVtIHRvb2x0aXAgaWYgbW91c2UgaXMgb24gdGhlIGVsZW1lbnQgd2l0aCBkYXRhSW5kZXhcbiAgICAgICAgaWYgKGdldEVDRGF0YSh0YXJnZXQpLmRhdGFJbmRleCAhPSBudWxsKSB7XG4gICAgICAgICAgc2VyaWVzRGlzcGF0Y2hlcl8xID0gdGFyZ2V0O1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IC8vIFRvb2x0aXAgcHJvdmlkZWQgZGlyZWN0bHkuIExpa2UgbGVnZW5kLlxuXG5cbiAgICAgICAgaWYgKGdldEVDRGF0YSh0YXJnZXQpLnRvb2x0aXBDb25maWcgIT0gbnVsbCkge1xuICAgICAgICAgIGNtcHREaXNwYXRjaGVyXzEgPSB0YXJnZXQ7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0sIHRydWUpO1xuXG4gICAgICBpZiAoc2VyaWVzRGlzcGF0Y2hlcl8xKSB7XG4gICAgICAgIHRoaXMuX3Nob3dTZXJpZXNJdGVtVG9vbHRpcChlLCBzZXJpZXNEaXNwYXRjaGVyXzEsIGRpc3BhdGNoQWN0aW9uKTtcbiAgICAgIH0gZWxzZSBpZiAoY21wdERpc3BhdGNoZXJfMSkge1xuICAgICAgICB0aGlzLl9zaG93Q29tcG9uZW50SXRlbVRvb2x0aXAoZSwgY21wdERpc3BhdGNoZXJfMSwgZGlzcGF0Y2hBY3Rpb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5faGlkZShkaXNwYXRjaEFjdGlvbik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xhc3REYXRhQnlDb29yZFN5cyA9IG51bGw7XG5cbiAgICAgIHRoaXMuX2hpZGUoZGlzcGF0Y2hBY3Rpb24pO1xuICAgIH1cbiAgfTtcblxuICBUb29sdGlwVmlldy5wcm90b3R5cGUuX3Nob3dPck1vdmUgPSBmdW5jdGlvbiAodG9vbHRpcE1vZGVsLCBjYikge1xuICAgIC8vIHNob3dEZWxheSBpcyB1c2VkIGluIHRoaXMgY2FzZTogdG9vbHRpcC5lbnRlcmFibGUgaXMgc2V0XG4gICAgLy8gYXMgdHJ1ZS4gVXNlciBpbnRlbnQgdG8gbW92ZSBtb3VzZSBpbnRvIHRvb2x0aXAgYW5kIGNsaWNrXG4gICAgLy8gc29tZXRoaW5nLiBgc2hvd0RlbGF5YCBtYWtlcyBpdCBlYXNpZXIgdG8gZW50ZXIgdGhlIGNvbnRlbnRcbiAgICAvLyBidXQgdG9vbHRpcCBkbyBub3QgbW92ZSBpbW1lZGlhdGVseS5cbiAgICB2YXIgZGVsYXkgPSB0b29sdGlwTW9kZWwuZ2V0KCdzaG93RGVsYXknKTtcbiAgICBjYiA9IGJpbmQoY2IsIHRoaXMpO1xuICAgIGNsZWFyVGltZW91dCh0aGlzLl9zaG93VGltb3V0KTtcbiAgICBkZWxheSA+IDAgPyB0aGlzLl9zaG93VGltb3V0ID0gc2V0VGltZW91dChjYiwgZGVsYXkpIDogY2IoKTtcbiAgfTtcblxuICBUb29sdGlwVmlldy5wcm90b3R5cGUuX3Nob3dBeGlzVG9vbHRpcCA9IGZ1bmN0aW9uIChkYXRhQnlDb29yZFN5cywgZSkge1xuICAgIHZhciBlY01vZGVsID0gdGhpcy5fZWNNb2RlbDtcbiAgICB2YXIgZ2xvYmFsVG9vbHRpcE1vZGVsID0gdGhpcy5fdG9vbHRpcE1vZGVsO1xuICAgIHZhciBwb2ludCA9IFtlLm9mZnNldFgsIGUub2Zmc2V0WV07XG4gICAgdmFyIHNpbmdsZVRvb2x0aXBNb2RlbCA9IGJ1aWxkVG9vbHRpcE1vZGVsKFtlLnRvb2x0aXBPcHRpb25dLCBnbG9iYWxUb29sdGlwTW9kZWwpO1xuICAgIHZhciByZW5kZXJNb2RlID0gdGhpcy5fcmVuZGVyTW9kZTtcbiAgICB2YXIgY2JQYXJhbXNMaXN0ID0gW107XG4gICAgdmFyIGFydGljbGVNYXJrdXAgPSBjcmVhdGVUb29sdGlwTWFya3VwKCdzZWN0aW9uJywge1xuICAgICAgYmxvY2tzOiBbXSxcbiAgICAgIG5vSGVhZGVyOiB0cnVlXG4gICAgfSk7IC8vIE9ubHkgZm9yIGxlZ2FjeTogYFNlcmlzZVsnZm9ybWF0VG9vbHRpcCddYCByZXR1cm5zIGEgc3RyaW5nLlxuXG4gICAgdmFyIG1hcmt1cFRleHRBcnJMZWdhY3kgPSBbXTtcbiAgICB2YXIgbWFya3VwU3R5bGVDcmVhdG9yID0gbmV3IFRvb2x0aXBNYXJrdXBTdHlsZUNyZWF0b3IoKTtcbiAgICBlYWNoKGRhdGFCeUNvb3JkU3lzLCBmdW5jdGlvbiAoaXRlbUNvb3JkU3lzKSB7XG4gICAgICBlYWNoKGl0ZW1Db29yZFN5cy5kYXRhQnlBeGlzLCBmdW5jdGlvbiAoYXhpc0l0ZW0pIHtcbiAgICAgICAgdmFyIGF4aXNNb2RlbCA9IGVjTW9kZWwuZ2V0Q29tcG9uZW50KGF4aXNJdGVtLmF4aXNEaW0gKyAnQXhpcycsIGF4aXNJdGVtLmF4aXNJbmRleCk7XG4gICAgICAgIHZhciBheGlzVmFsdWUgPSBheGlzSXRlbS52YWx1ZTtcblxuICAgICAgICBpZiAoIWF4aXNNb2RlbCB8fCBheGlzVmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBheGlzVmFsdWVMYWJlbCA9IGF4aXNQb2ludGVyVmlld0hlbHBlci5nZXRWYWx1ZUxhYmVsKGF4aXNWYWx1ZSwgYXhpc01vZGVsLmF4aXMsIGVjTW9kZWwsIGF4aXNJdGVtLnNlcmllc0RhdGFJbmRpY2VzLCBheGlzSXRlbS52YWx1ZUxhYmVsT3B0KTtcbiAgICAgICAgdmFyIGF4aXNTZWN0aW9uTWFya3VwID0gY3JlYXRlVG9vbHRpcE1hcmt1cCgnc2VjdGlvbicsIHtcbiAgICAgICAgICBoZWFkZXI6IGF4aXNWYWx1ZUxhYmVsLFxuICAgICAgICAgIG5vSGVhZGVyOiAhdHJpbShheGlzVmFsdWVMYWJlbCksXG4gICAgICAgICAgc29ydEJsb2NrczogdHJ1ZSxcbiAgICAgICAgICBibG9ja3M6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBhcnRpY2xlTWFya3VwLmJsb2Nrcy5wdXNoKGF4aXNTZWN0aW9uTWFya3VwKTtcbiAgICAgICAgZWFjaChheGlzSXRlbS5zZXJpZXNEYXRhSW5kaWNlcywgZnVuY3Rpb24gKGlkeEl0ZW0pIHtcbiAgICAgICAgICB2YXIgc2VyaWVzID0gZWNNb2RlbC5nZXRTZXJpZXNCeUluZGV4KGlkeEl0ZW0uc2VyaWVzSW5kZXgpO1xuICAgICAgICAgIHZhciBkYXRhSW5kZXggPSBpZHhJdGVtLmRhdGFJbmRleEluc2lkZTtcbiAgICAgICAgICB2YXIgY2JQYXJhbXMgPSBzZXJpZXMuZ2V0RGF0YVBhcmFtcyhkYXRhSW5kZXgpOyAvLyBDYW4ndCBmaW5kIGRhdGEuXG5cbiAgICAgICAgICBpZiAoY2JQYXJhbXMuZGF0YUluZGV4IDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNiUGFyYW1zLmF4aXNEaW0gPSBheGlzSXRlbS5heGlzRGltO1xuICAgICAgICAgIGNiUGFyYW1zLmF4aXNJbmRleCA9IGF4aXNJdGVtLmF4aXNJbmRleDtcbiAgICAgICAgICBjYlBhcmFtcy5heGlzVHlwZSA9IGF4aXNJdGVtLmF4aXNUeXBlO1xuICAgICAgICAgIGNiUGFyYW1zLmF4aXNJZCA9IGF4aXNJdGVtLmF4aXNJZDtcbiAgICAgICAgICBjYlBhcmFtcy5heGlzVmFsdWUgPSBheGlzSGVscGVyLmdldEF4aXNSYXdWYWx1ZShheGlzTW9kZWwuYXhpcywge1xuICAgICAgICAgICAgdmFsdWU6IGF4aXNWYWx1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNiUGFyYW1zLmF4aXNWYWx1ZUxhYmVsID0gYXhpc1ZhbHVlTGFiZWw7IC8vIFByZS1jcmVhdGUgbWFya2VyIHN0eWxlIGZvciBtYWtlcnMuIFVzZXJzIGNhbiBhc3NlbWJsZSByaWNoVGV4dFxuICAgICAgICAgIC8vIHRleHQgaW4gYGZvcm1hdHRlcmAgY2FsbGJhY2sgYW5kIHVzZSB0aG9zZSBtYXJrZXJzIHN0eWxlLlxuXG4gICAgICAgICAgY2JQYXJhbXMubWFya2VyID0gbWFya3VwU3R5bGVDcmVhdG9yLm1ha2VUb29sdGlwTWFya2VyKCdpdGVtJywgY29udmVydFRvQ29sb3JTdHJpbmcoY2JQYXJhbXMuY29sb3IpLCByZW5kZXJNb2RlKTtcbiAgICAgICAgICB2YXIgc2VyaWVzVG9vbHRpcFJlc3VsdCA9IG5vcm1hbGl6ZVRvb2x0aXBGb3JtYXRSZXN1bHQoc2VyaWVzLmZvcm1hdFRvb2x0aXAoZGF0YUluZGV4LCB0cnVlLCBudWxsKSk7XG4gICAgICAgICAgdmFyIGZyYWcgPSBzZXJpZXNUb29sdGlwUmVzdWx0LmZyYWc7XG5cbiAgICAgICAgICBpZiAoZnJhZykge1xuICAgICAgICAgICAgdmFyIHZhbHVlRm9ybWF0dGVyID0gYnVpbGRUb29sdGlwTW9kZWwoW3Nlcmllc10sIGdsb2JhbFRvb2x0aXBNb2RlbCkuZ2V0KCd2YWx1ZUZvcm1hdHRlcicpO1xuICAgICAgICAgICAgYXhpc1NlY3Rpb25NYXJrdXAuYmxvY2tzLnB1c2godmFsdWVGb3JtYXR0ZXIgPyBleHRlbmQoe1xuICAgICAgICAgICAgICB2YWx1ZUZvcm1hdHRlcjogdmFsdWVGb3JtYXR0ZXJcbiAgICAgICAgICAgIH0sIGZyYWcpIDogZnJhZyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNlcmllc1Rvb2x0aXBSZXN1bHQudGV4dCkge1xuICAgICAgICAgICAgbWFya3VwVGV4dEFyckxlZ2FjeS5wdXNoKHNlcmllc1Rvb2x0aXBSZXN1bHQudGV4dCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2JQYXJhbXNMaXN0LnB1c2goY2JQYXJhbXMpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pOyAvLyBJbiBtb3N0IGNhc2VzLCB0aGUgc2Vjb25kIGF4aXMgaXMgZGlzcGxheXMgdXBwZXIgb24gdGhlIGZpcnN0IG9uZS5cbiAgICAvLyBTbyB3ZSByZXZlcnNlIGl0IHRvIGxvb2sgYmV0dGVyLlxuXG4gICAgYXJ0aWNsZU1hcmt1cC5ibG9ja3MucmV2ZXJzZSgpO1xuICAgIG1hcmt1cFRleHRBcnJMZWdhY3kucmV2ZXJzZSgpO1xuICAgIHZhciBwb3NpdGlvbkV4cHIgPSBlLnBvc2l0aW9uO1xuICAgIHZhciBvcmRlck1vZGUgPSBzaW5nbGVUb29sdGlwTW9kZWwuZ2V0KCdvcmRlcicpO1xuICAgIHZhciBidWlsdE1hcmt1cFRleHQgPSBidWlsZFRvb2x0aXBNYXJrdXAoYXJ0aWNsZU1hcmt1cCwgbWFya3VwU3R5bGVDcmVhdG9yLCByZW5kZXJNb2RlLCBvcmRlck1vZGUsIGVjTW9kZWwuZ2V0KCd1c2VVVEMnKSwgc2luZ2xlVG9vbHRpcE1vZGVsLmdldCgndGV4dFN0eWxlJykpO1xuICAgIGJ1aWx0TWFya3VwVGV4dCAmJiBtYXJrdXBUZXh0QXJyTGVnYWN5LnVuc2hpZnQoYnVpbHRNYXJrdXBUZXh0KTtcbiAgICB2YXIgYmxvY2tCcmVhayA9IHJlbmRlck1vZGUgPT09ICdyaWNoVGV4dCcgPyAnXFxuXFxuJyA6ICc8YnIvPic7XG4gICAgdmFyIGFsbE1hcmt1cFRleHQgPSBtYXJrdXBUZXh0QXJyTGVnYWN5LmpvaW4oYmxvY2tCcmVhayk7XG5cbiAgICB0aGlzLl9zaG93T3JNb3ZlKHNpbmdsZVRvb2x0aXBNb2RlbCwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMuX3VwZGF0ZUNvbnRlbnROb3RDaGFuZ2VkT25BeGlzKGRhdGFCeUNvb3JkU3lzLCBjYlBhcmFtc0xpc3QpKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVBvc2l0aW9uKHNpbmdsZVRvb2x0aXBNb2RlbCwgcG9zaXRpb25FeHByLCBwb2ludFswXSwgcG9pbnRbMV0sIHRoaXMuX3Rvb2x0aXBDb250ZW50LCBjYlBhcmFtc0xpc3QpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fc2hvd1Rvb2x0aXBDb250ZW50KHNpbmdsZVRvb2x0aXBNb2RlbCwgYWxsTWFya3VwVGV4dCwgY2JQYXJhbXNMaXN0LCBNYXRoLnJhbmRvbSgpICsgJycsIHBvaW50WzBdLCBwb2ludFsxXSwgcG9zaXRpb25FeHByLCBudWxsLCBtYXJrdXBTdHlsZUNyZWF0b3IpO1xuICAgICAgfVxuICAgIH0pOyAvLyBEbyBub3QgdHJpZ2dlciBldmVudHMgaGVyZSwgYmVjYXVzZSB0aGlzIGJyYW5jaCBvbmx5IGJlIGVudGVyZWRcbiAgICAvLyBmcm9tIGRpc3BhdGNoQWN0aW9uLlxuXG4gIH07XG5cbiAgVG9vbHRpcFZpZXcucHJvdG90eXBlLl9zaG93U2VyaWVzSXRlbVRvb2x0aXAgPSBmdW5jdGlvbiAoZSwgZGlzcGF0Y2hlciwgZGlzcGF0Y2hBY3Rpb24pIHtcbiAgICB2YXIgZWNNb2RlbCA9IHRoaXMuX2VjTW9kZWw7XG4gICAgdmFyIGVjRGF0YSA9IGdldEVDRGF0YShkaXNwYXRjaGVyKTsgLy8gVXNlIGRhdGFNb2RlbCBpbiBlbGVtZW50IGlmIHBvc3NpYmxlXG4gICAgLy8gVXNlZCB3aGVuIG1vdXNlb3ZlciBvbiBhIGVsZW1lbnQgbGlrZSBtYXJrUG9pbnQgb3IgZWRnZVxuICAgIC8vIEluIHdoaWNoIGNhc2UsIHRoZSBkYXRhIGlzIG5vdCBtYWluIGRhdGEgaW4gc2VyaWVzLlxuXG4gICAgdmFyIHNlcmllc0luZGV4ID0gZWNEYXRhLnNlcmllc0luZGV4O1xuICAgIHZhciBzZXJpZXNNb2RlbCA9IGVjTW9kZWwuZ2V0U2VyaWVzQnlJbmRleChzZXJpZXNJbmRleCk7IC8vIEZvciBleGFtcGxlLCBncmFwaCBsaW5rLlxuXG4gICAgdmFyIGRhdGFNb2RlbCA9IGVjRGF0YS5kYXRhTW9kZWwgfHwgc2VyaWVzTW9kZWw7XG4gICAgdmFyIGRhdGFJbmRleCA9IGVjRGF0YS5kYXRhSW5kZXg7XG4gICAgdmFyIGRhdGFUeXBlID0gZWNEYXRhLmRhdGFUeXBlO1xuICAgIHZhciBkYXRhID0gZGF0YU1vZGVsLmdldERhdGEoZGF0YVR5cGUpO1xuICAgIHZhciByZW5kZXJNb2RlID0gdGhpcy5fcmVuZGVyTW9kZTtcbiAgICB2YXIgcG9zaXRpb25EZWZhdWx0ID0gZS5wb3NpdGlvbkRlZmF1bHQ7XG4gICAgdmFyIHRvb2x0aXBNb2RlbCA9IGJ1aWxkVG9vbHRpcE1vZGVsKFtkYXRhLmdldEl0ZW1Nb2RlbChkYXRhSW5kZXgpLCBkYXRhTW9kZWwsIHNlcmllc01vZGVsICYmIChzZXJpZXNNb2RlbC5jb29yZGluYXRlU3lzdGVtIHx8IHt9KS5tb2RlbF0sIHRoaXMuX3Rvb2x0aXBNb2RlbCwgcG9zaXRpb25EZWZhdWx0ID8ge1xuICAgICAgcG9zaXRpb246IHBvc2l0aW9uRGVmYXVsdFxuICAgIH0gOiBudWxsKTtcbiAgICB2YXIgdG9vbHRpcFRyaWdnZXIgPSB0b29sdGlwTW9kZWwuZ2V0KCd0cmlnZ2VyJyk7XG5cbiAgICBpZiAodG9vbHRpcFRyaWdnZXIgIT0gbnVsbCAmJiB0b29sdGlwVHJpZ2dlciAhPT0gJ2l0ZW0nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHBhcmFtcyA9IGRhdGFNb2RlbC5nZXREYXRhUGFyYW1zKGRhdGFJbmRleCwgZGF0YVR5cGUpO1xuICAgIHZhciBtYXJrdXBTdHlsZUNyZWF0b3IgPSBuZXcgVG9vbHRpcE1hcmt1cFN0eWxlQ3JlYXRvcigpOyAvLyBQcmUtY3JlYXRlIG1hcmtlciBzdHlsZSBmb3IgbWFrZXJzLiBVc2VycyBjYW4gYXNzZW1ibGUgcmljaFRleHRcbiAgICAvLyB0ZXh0IGluIGBmb3JtYXR0ZXJgIGNhbGxiYWNrIGFuZCB1c2UgdGhvc2UgbWFya2VycyBzdHlsZS5cblxuICAgIHBhcmFtcy5tYXJrZXIgPSBtYXJrdXBTdHlsZUNyZWF0b3IubWFrZVRvb2x0aXBNYXJrZXIoJ2l0ZW0nLCBjb252ZXJ0VG9Db2xvclN0cmluZyhwYXJhbXMuY29sb3IpLCByZW5kZXJNb2RlKTtcbiAgICB2YXIgc2VyaWVzVG9vbHRpcFJlc3VsdCA9IG5vcm1hbGl6ZVRvb2x0aXBGb3JtYXRSZXN1bHQoZGF0YU1vZGVsLmZvcm1hdFRvb2x0aXAoZGF0YUluZGV4LCBmYWxzZSwgZGF0YVR5cGUpKTtcbiAgICB2YXIgb3JkZXJNb2RlID0gdG9vbHRpcE1vZGVsLmdldCgnb3JkZXInKTtcbiAgICB2YXIgdmFsdWVGb3JtYXR0ZXIgPSB0b29sdGlwTW9kZWwuZ2V0KCd2YWx1ZUZvcm1hdHRlcicpO1xuICAgIHZhciBmcmFnID0gc2VyaWVzVG9vbHRpcFJlc3VsdC5mcmFnO1xuICAgIHZhciBtYXJrdXBUZXh0ID0gZnJhZyA/IGJ1aWxkVG9vbHRpcE1hcmt1cCh2YWx1ZUZvcm1hdHRlciA/IGV4dGVuZCh7XG4gICAgICB2YWx1ZUZvcm1hdHRlcjogdmFsdWVGb3JtYXR0ZXJcbiAgICB9LCBmcmFnKSA6IGZyYWcsIG1hcmt1cFN0eWxlQ3JlYXRvciwgcmVuZGVyTW9kZSwgb3JkZXJNb2RlLCBlY01vZGVsLmdldCgndXNlVVRDJyksIHRvb2x0aXBNb2RlbC5nZXQoJ3RleHRTdHlsZScpKSA6IHNlcmllc1Rvb2x0aXBSZXN1bHQudGV4dDtcbiAgICB2YXIgYXN5bmNUaWNrZXQgPSAnaXRlbV8nICsgZGF0YU1vZGVsLm5hbWUgKyAnXycgKyBkYXRhSW5kZXg7XG5cbiAgICB0aGlzLl9zaG93T3JNb3ZlKHRvb2x0aXBNb2RlbCwgZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fc2hvd1Rvb2x0aXBDb250ZW50KHRvb2x0aXBNb2RlbCwgbWFya3VwVGV4dCwgcGFyYW1zLCBhc3luY1RpY2tldCwgZS5vZmZzZXRYLCBlLm9mZnNldFksIGUucG9zaXRpb24sIGUudGFyZ2V0LCBtYXJrdXBTdHlsZUNyZWF0b3IpO1xuICAgIH0pOyAvLyBGSVhNRVxuICAgIC8vIGR1cGxpY2F0ZWQgc2hvd3RpcCBpZiBtYW51YWxseVNob3dUaXAgaXMgY2FsbGVkIGZyb20gZGlzcGF0Y2hBY3Rpb24uXG5cblxuICAgIGRpc3BhdGNoQWN0aW9uKHtcbiAgICAgIHR5cGU6ICdzaG93VGlwJyxcbiAgICAgIGRhdGFJbmRleEluc2lkZTogZGF0YUluZGV4LFxuICAgICAgZGF0YUluZGV4OiBkYXRhLmdldFJhd0luZGV4KGRhdGFJbmRleCksXG4gICAgICBzZXJpZXNJbmRleDogc2VyaWVzSW5kZXgsXG4gICAgICBmcm9tOiB0aGlzLnVpZFxuICAgIH0pO1xuICB9O1xuXG4gIFRvb2x0aXBWaWV3LnByb3RvdHlwZS5fc2hvd0NvbXBvbmVudEl0ZW1Ub29sdGlwID0gZnVuY3Rpb24gKGUsIGVsLCBkaXNwYXRjaEFjdGlvbikge1xuICAgIHZhciBlY0RhdGEgPSBnZXRFQ0RhdGEoZWwpO1xuICAgIHZhciB0b29sdGlwQ29uZmlnID0gZWNEYXRhLnRvb2x0aXBDb25maWc7XG4gICAgdmFyIHRvb2x0aXBPcHQgPSB0b29sdGlwQ29uZmlnLm9wdGlvbiB8fCB7fTtcblxuICAgIGlmIChpc1N0cmluZyh0b29sdGlwT3B0KSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSB0b29sdGlwT3B0O1xuICAgICAgdG9vbHRpcE9wdCA9IHtcbiAgICAgICAgY29udGVudDogY29udGVudCxcbiAgICAgICAgLy8gRml4ZWQgZm9ybWF0dGVyXG4gICAgICAgIGZvcm1hdHRlcjogY29udGVudFxuICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgdG9vbHRpcE1vZGVsQ2FzY2FkZSA9IFt0b29sdGlwT3B0XTtcblxuICAgIHZhciBjbXB0ID0gdGhpcy5fZWNNb2RlbC5nZXRDb21wb25lbnQoZWNEYXRhLmNvbXBvbmVudE1haW5UeXBlLCBlY0RhdGEuY29tcG9uZW50SW5kZXgpO1xuXG4gICAgaWYgKGNtcHQpIHtcbiAgICAgIHRvb2x0aXBNb2RlbENhc2NhZGUucHVzaChjbXB0KTtcbiAgICB9IC8vIEluIG1vc3QgY2FzZXMsIGNvbXBvbmVudCB0b29sdGlwIGZvcm1hdHRlciBoYXMgZGlmZmVyZW50IHBhcmFtcyB3aXRoIHNlcmllcyB0b29sdGlwIGZvcm1hdHRlcixcbiAgICAvLyBzbyB0aGF0IHRoZXkgY2Fubm90IHNoYXJlIHRoZSBzYW1lIGZvcm1hdHRlci4gU2luY2UgdGhlIGdsb2JhbCB0b29sdGlwIGZvcm1hdHRlciBpcyB1c2VkIGZvciBzZXJpZXNcbiAgICAvLyBieSBjb252ZW50aW9uLCB3ZSBkbyBub3QgdXNlIGl0IGFzIHRoZSBkZWZhdWx0IGZvcm1hdHRlciBmb3IgY29tcG9uZW50LlxuXG5cbiAgICB0b29sdGlwTW9kZWxDYXNjYWRlLnB1c2goe1xuICAgICAgZm9ybWF0dGVyOiB0b29sdGlwT3B0LmNvbnRlbnRcbiAgICB9KTtcbiAgICB2YXIgcG9zaXRpb25EZWZhdWx0ID0gZS5wb3NpdGlvbkRlZmF1bHQ7XG4gICAgdmFyIHN1YlRvb2x0aXBNb2RlbCA9IGJ1aWxkVG9vbHRpcE1vZGVsKHRvb2x0aXBNb2RlbENhc2NhZGUsIHRoaXMuX3Rvb2x0aXBNb2RlbCwgcG9zaXRpb25EZWZhdWx0ID8ge1xuICAgICAgcG9zaXRpb246IHBvc2l0aW9uRGVmYXVsdFxuICAgIH0gOiBudWxsKTtcbiAgICB2YXIgZGVmYXVsdEh0bWwgPSBzdWJUb29sdGlwTW9kZWwuZ2V0KCdjb250ZW50Jyk7XG4gICAgdmFyIGFzeW5jVGlja2V0ID0gTWF0aC5yYW5kb20oKSArICcnOyAvLyBQRU5ESU5HOiB0aGlzIGNhc2UgZG8gbm90IHN1cHBvcnQgcmljaFRleHQgc3R5bGUgeWV0LlxuXG4gICAgdmFyIG1hcmt1cFN0eWxlQ3JlYXRvciA9IG5ldyBUb29sdGlwTWFya3VwU3R5bGVDcmVhdG9yKCk7IC8vIERvIG5vdCBjaGVjayB3aGV0aGVyIGB0cmlnZ2VyYCBpcyAnbm9uZScgaGVyZSwgYmVjYXVzZSBgdHJpZ2dlcmBcbiAgICAvLyBvbmx5IHdvcmtzIG9uIGNvb3JkaW5hdGUgc3lzdGVtLiBJbiBmYWN0LCB3ZSBoYXZlIG5vdCBmb3VuZCBjYXNlXG4gICAgLy8gdGhhdCByZXF1aXJlcyBzZXR0aW5nIGB0cmlnZ2VyYCBub3RoaW5nIG9uIGNvbXBvbmVudCB5ZXQuXG5cbiAgICB0aGlzLl9zaG93T3JNb3ZlKHN1YlRvb2x0aXBNb2RlbCwgZnVuY3Rpb24gKCkge1xuICAgICAgLy8gVXNlIGZvcm1hdHRlclBhcmFtcyBmcm9tIGVsZW1lbnQgZGVmaW5lZCBpbiBjb21wb25lbnRcbiAgICAgIC8vIEF2b2lkIHVzZXJzIG1vZGlmeSBpdC5cbiAgICAgIHZhciBmb3JtYXR0ZXJQYXJhbXMgPSBjbG9uZShzdWJUb29sdGlwTW9kZWwuZ2V0KCdmb3JtYXR0ZXJQYXJhbXMnKSB8fCB7fSk7XG5cbiAgICAgIHRoaXMuX3Nob3dUb29sdGlwQ29udGVudChzdWJUb29sdGlwTW9kZWwsIGRlZmF1bHRIdG1sLCBmb3JtYXR0ZXJQYXJhbXMsIGFzeW5jVGlja2V0LCBlLm9mZnNldFgsIGUub2Zmc2V0WSwgZS5wb3NpdGlvbiwgZWwsIG1hcmt1cFN0eWxlQ3JlYXRvcik7XG4gICAgfSk7IC8vIElmIG5vdCBkaXNwYXRjaCBzaG93VGlwLCB0aXAgbWF5IGJlIGhpZGUgdHJpZ2dlcmVkIGJ5IGF4aXMuXG5cblxuICAgIGRpc3BhdGNoQWN0aW9uKHtcbiAgICAgIHR5cGU6ICdzaG93VGlwJyxcbiAgICAgIGZyb206IHRoaXMudWlkXG4gICAgfSk7XG4gIH07XG5cbiAgVG9vbHRpcFZpZXcucHJvdG90eXBlLl9zaG93VG9vbHRpcENvbnRlbnQgPSBmdW5jdGlvbiAoIC8vIFVzZSBNb2RlbDxUb29sdGlwT3B0aW9uPiBpbnN0ZWFkb2YgVG9vbHRpcE1vZGVsIGJlY2F1c2UgdGhpcyBtb2RlbCBtYXkgYmUgZnJvbSBzZXJpZXMgb3Igb3RoZXIgb3B0aW9ucy5cbiAgLy8gSW5zdGVhZCBvZiB0b3AgbGV2ZWwgdG9vbHRpcC5cbiAgdG9vbHRpcE1vZGVsLCBkZWZhdWx0SHRtbCwgcGFyYW1zLCBhc3luY1RpY2tldCwgeCwgeSwgcG9zaXRpb25FeHByLCBlbCwgbWFya3VwU3R5bGVDcmVhdG9yKSB7XG4gICAgLy8gUmVzZXQgdGlja2V0XG4gICAgdGhpcy5fdGlja2V0ID0gJyc7XG5cbiAgICBpZiAoIXRvb2x0aXBNb2RlbC5nZXQoJ3Nob3dDb250ZW50JykgfHwgIXRvb2x0aXBNb2RlbC5nZXQoJ3Nob3cnKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciB0b29sdGlwQ29udGVudCA9IHRoaXMuX3Rvb2x0aXBDb250ZW50O1xuICAgIHRvb2x0aXBDb250ZW50LnNldEVudGVyYWJsZSh0b29sdGlwTW9kZWwuZ2V0KCdlbnRlcmFibGUnKSk7XG4gICAgdmFyIGZvcm1hdHRlciA9IHRvb2x0aXBNb2RlbC5nZXQoJ2Zvcm1hdHRlcicpO1xuICAgIHBvc2l0aW9uRXhwciA9IHBvc2l0aW9uRXhwciB8fCB0b29sdGlwTW9kZWwuZ2V0KCdwb3NpdGlvbicpO1xuICAgIHZhciBodG1sID0gZGVmYXVsdEh0bWw7XG5cbiAgICB2YXIgbmVhclBvaW50ID0gdGhpcy5fZ2V0TmVhcmVzdFBvaW50KFt4LCB5XSwgcGFyYW1zLCB0b29sdGlwTW9kZWwuZ2V0KCd0cmlnZ2VyJyksIHRvb2x0aXBNb2RlbC5nZXQoJ2JvcmRlckNvbG9yJykpO1xuXG4gICAgdmFyIG5lYXJQb2ludENvbG9yID0gbmVhclBvaW50LmNvbG9yO1xuXG4gICAgaWYgKGZvcm1hdHRlcikge1xuICAgICAgaWYgKGlzU3RyaW5nKGZvcm1hdHRlcikpIHtcbiAgICAgICAgdmFyIHVzZVVUQyA9IHRvb2x0aXBNb2RlbC5lY01vZGVsLmdldCgndXNlVVRDJyk7XG4gICAgICAgIHZhciBwYXJhbXMwID0gaXNBcnJheShwYXJhbXMpID8gcGFyYW1zWzBdIDogcGFyYW1zO1xuICAgICAgICB2YXIgaXNUaW1lQXhpcyA9IHBhcmFtczAgJiYgcGFyYW1zMC5heGlzVHlwZSAmJiBwYXJhbXMwLmF4aXNUeXBlLmluZGV4T2YoJ3RpbWUnKSA+PSAwO1xuICAgICAgICBodG1sID0gZm9ybWF0dGVyO1xuXG4gICAgICAgIGlmIChpc1RpbWVBeGlzKSB7XG4gICAgICAgICAgaHRtbCA9IHRpbWVGb3JtYXQocGFyYW1zMC5heGlzVmFsdWUsIGh0bWwsIHVzZVVUQyk7XG4gICAgICAgIH1cblxuICAgICAgICBodG1sID0gZm9ybWF0VHBsKGh0bWwsIHBhcmFtcywgdHJ1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24oZm9ybWF0dGVyKSkge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBiaW5kKGZ1bmN0aW9uIChjYlRpY2tldCwgaHRtbCkge1xuICAgICAgICAgIGlmIChjYlRpY2tldCA9PT0gdGhpcy5fdGlja2V0KSB7XG4gICAgICAgICAgICB0b29sdGlwQ29udGVudC5zZXRDb250ZW50KGh0bWwsIG1hcmt1cFN0eWxlQ3JlYXRvciwgdG9vbHRpcE1vZGVsLCBuZWFyUG9pbnRDb2xvciwgcG9zaXRpb25FeHByKTtcblxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlUG9zaXRpb24odG9vbHRpcE1vZGVsLCBwb3NpdGlvbkV4cHIsIHgsIHksIHRvb2x0aXBDb250ZW50LCBwYXJhbXMsIGVsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgICB0aGlzLl90aWNrZXQgPSBhc3luY1RpY2tldDtcbiAgICAgICAgaHRtbCA9IGZvcm1hdHRlcihwYXJhbXMsIGFzeW5jVGlja2V0LCBjYWxsYmFjayk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBodG1sID0gZm9ybWF0dGVyO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRvb2x0aXBDb250ZW50LnNldENvbnRlbnQoaHRtbCwgbWFya3VwU3R5bGVDcmVhdG9yLCB0b29sdGlwTW9kZWwsIG5lYXJQb2ludENvbG9yLCBwb3NpdGlvbkV4cHIpO1xuICAgIHRvb2x0aXBDb250ZW50LnNob3codG9vbHRpcE1vZGVsLCBuZWFyUG9pbnRDb2xvcik7XG5cbiAgICB0aGlzLl91cGRhdGVQb3NpdGlvbih0b29sdGlwTW9kZWwsIHBvc2l0aW9uRXhwciwgeCwgeSwgdG9vbHRpcENvbnRlbnQsIHBhcmFtcywgZWwpO1xuICB9O1xuXG4gIFRvb2x0aXBWaWV3LnByb3RvdHlwZS5fZ2V0TmVhcmVzdFBvaW50ID0gZnVuY3Rpb24gKHBvaW50LCB0b29sdGlwRGF0YVBhcmFtcywgdHJpZ2dlciwgYm9yZGVyQ29sb3IpIHtcbiAgICBpZiAodHJpZ2dlciA9PT0gJ2F4aXMnIHx8IGlzQXJyYXkodG9vbHRpcERhdGFQYXJhbXMpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjb2xvcjogYm9yZGVyQ29sb3IgfHwgKHRoaXMuX3JlbmRlck1vZGUgPT09ICdodG1sJyA/ICcjZmZmJyA6ICdub25lJylcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKCFpc0FycmF5KHRvb2x0aXBEYXRhUGFyYW1zKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29sb3I6IGJvcmRlckNvbG9yIHx8IHRvb2x0aXBEYXRhUGFyYW1zLmNvbG9yIHx8IHRvb2x0aXBEYXRhUGFyYW1zLmJvcmRlckNvbG9yXG4gICAgICB9O1xuICAgIH1cbiAgfTtcblxuICBUb29sdGlwVmlldy5wcm90b3R5cGUuX3VwZGF0ZVBvc2l0aW9uID0gZnVuY3Rpb24gKHRvb2x0aXBNb2RlbCwgcG9zaXRpb25FeHByLCB4LCAvLyBNb3VzZSB4XG4gIHksIC8vIE1vdXNlIHlcbiAgY29udGVudCwgcGFyYW1zLCBlbCkge1xuICAgIHZhciB2aWV3V2lkdGggPSB0aGlzLl9hcGkuZ2V0V2lkdGgoKTtcblxuICAgIHZhciB2aWV3SGVpZ2h0ID0gdGhpcy5fYXBpLmdldEhlaWdodCgpO1xuXG4gICAgcG9zaXRpb25FeHByID0gcG9zaXRpb25FeHByIHx8IHRvb2x0aXBNb2RlbC5nZXQoJ3Bvc2l0aW9uJyk7XG4gICAgdmFyIGNvbnRlbnRTaXplID0gY29udGVudC5nZXRTaXplKCk7XG4gICAgdmFyIGFsaWduID0gdG9vbHRpcE1vZGVsLmdldCgnYWxpZ24nKTtcbiAgICB2YXIgdkFsaWduID0gdG9vbHRpcE1vZGVsLmdldCgndmVydGljYWxBbGlnbicpO1xuICAgIHZhciByZWN0ID0gZWwgJiYgZWwuZ2V0Qm91bmRpbmdSZWN0KCkuY2xvbmUoKTtcbiAgICBlbCAmJiByZWN0LmFwcGx5VHJhbnNmb3JtKGVsLnRyYW5zZm9ybSk7XG5cbiAgICBpZiAoaXNGdW5jdGlvbihwb3NpdGlvbkV4cHIpKSB7XG4gICAgICAvLyBDYWxsYmFjayBvZiBwb3NpdGlvbiBjYW4gYmUgYW4gYXJyYXkgb3IgYSBzdHJpbmcgc3BlY2lmeSB0aGUgcG9zaXRpb25cbiAgICAgIHBvc2l0aW9uRXhwciA9IHBvc2l0aW9uRXhwcihbeCwgeV0sIHBhcmFtcywgY29udGVudC5lbCwgcmVjdCwge1xuICAgICAgICB2aWV3U2l6ZTogW3ZpZXdXaWR0aCwgdmlld0hlaWdodF0sXG4gICAgICAgIGNvbnRlbnRTaXplOiBjb250ZW50U2l6ZS5zbGljZSgpXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoaXNBcnJheShwb3NpdGlvbkV4cHIpKSB7XG4gICAgICB4ID0gcGFyc2VQZXJjZW50KHBvc2l0aW9uRXhwclswXSwgdmlld1dpZHRoKTtcbiAgICAgIHkgPSBwYXJzZVBlcmNlbnQocG9zaXRpb25FeHByWzFdLCB2aWV3SGVpZ2h0KTtcbiAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHBvc2l0aW9uRXhwcikpIHtcbiAgICAgIHZhciBib3hMYXlvdXRQb3NpdGlvbiA9IHBvc2l0aW9uRXhwcjtcbiAgICAgIGJveExheW91dFBvc2l0aW9uLndpZHRoID0gY29udGVudFNpemVbMF07XG4gICAgICBib3hMYXlvdXRQb3NpdGlvbi5oZWlnaHQgPSBjb250ZW50U2l6ZVsxXTtcbiAgICAgIHZhciBsYXlvdXRSZWN0ID0gZ2V0TGF5b3V0UmVjdChib3hMYXlvdXRQb3NpdGlvbiwge1xuICAgICAgICB3aWR0aDogdmlld1dpZHRoLFxuICAgICAgICBoZWlnaHQ6IHZpZXdIZWlnaHRcbiAgICAgIH0pO1xuICAgICAgeCA9IGxheW91dFJlY3QueDtcbiAgICAgIHkgPSBsYXlvdXRSZWN0Lnk7XG4gICAgICBhbGlnbiA9IG51bGw7IC8vIFdoZW4gcG9zaXRpb25FeHByIGlzIGxlZnQvdG9wL3JpZ2h0L2JvdHRvbSxcbiAgICAgIC8vIGFsaWduIGFuZCB2ZXJ0aWNhbEFsaWduIHdpbGwgbm90IHdvcmsuXG5cbiAgICAgIHZBbGlnbiA9IG51bGw7XG4gICAgfSAvLyBTcGVjaWZ5IHRvb2x0aXAgcG9zaXRpb24gYnkgc3RyaW5nICd0b3AnICdib3R0b20nICdsZWZ0JyAncmlnaHQnIGFyb3VuZCBncmFwaGljIGVsZW1lbnRcbiAgICBlbHNlIGlmIChpc1N0cmluZyhwb3NpdGlvbkV4cHIpICYmIGVsKSB7XG4gICAgICAgIHZhciBwb3MgPSBjYWxjVG9vbHRpcFBvc2l0aW9uKHBvc2l0aW9uRXhwciwgcmVjdCwgY29udGVudFNpemUsIHRvb2x0aXBNb2RlbC5nZXQoJ2JvcmRlcldpZHRoJykpO1xuICAgICAgICB4ID0gcG9zWzBdO1xuICAgICAgICB5ID0gcG9zWzFdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHBvcyA9IHJlZml4VG9vbHRpcFBvc2l0aW9uKHgsIHksIGNvbnRlbnQsIHZpZXdXaWR0aCwgdmlld0hlaWdodCwgYWxpZ24gPyBudWxsIDogMjAsIHZBbGlnbiA/IG51bGwgOiAyMCk7XG4gICAgICAgIHggPSBwb3NbMF07XG4gICAgICAgIHkgPSBwb3NbMV07XG4gICAgICB9XG5cbiAgICBhbGlnbiAmJiAoeCAtPSBpc0NlbnRlckFsaWduKGFsaWduKSA/IGNvbnRlbnRTaXplWzBdIC8gMiA6IGFsaWduID09PSAncmlnaHQnID8gY29udGVudFNpemVbMF0gOiAwKTtcbiAgICB2QWxpZ24gJiYgKHkgLT0gaXNDZW50ZXJBbGlnbih2QWxpZ24pID8gY29udGVudFNpemVbMV0gLyAyIDogdkFsaWduID09PSAnYm90dG9tJyA/IGNvbnRlbnRTaXplWzFdIDogMCk7XG5cbiAgICBpZiAoc2hvdWxkVG9vbHRpcENvbmZpbmUodG9vbHRpcE1vZGVsKSkge1xuICAgICAgdmFyIHBvcyA9IGNvbmZpbmVUb29sdGlwUG9zaXRpb24oeCwgeSwgY29udGVudCwgdmlld1dpZHRoLCB2aWV3SGVpZ2h0KTtcbiAgICAgIHggPSBwb3NbMF07XG4gICAgICB5ID0gcG9zWzFdO1xuICAgIH1cblxuICAgIGNvbnRlbnQubW92ZVRvKHgsIHkpO1xuICB9OyAvLyBGSVhNRVxuICAvLyBTaG91bGQgd2UgcmVtb3ZlIHRoaXMgYnV0IGxlYXZlIHRoaXMgdG8gdXNlcj9cblxuXG4gIFRvb2x0aXBWaWV3LnByb3RvdHlwZS5fdXBkYXRlQ29udGVudE5vdENoYW5nZWRPbkF4aXMgPSBmdW5jdGlvbiAoZGF0YUJ5Q29vcmRTeXMsIGNiUGFyYW1zTGlzdCkge1xuICAgIHZhciBsYXN0Q29vcmRTeXMgPSB0aGlzLl9sYXN0RGF0YUJ5Q29vcmRTeXM7XG4gICAgdmFyIGxhc3RDYlBhcmFtc0xpc3QgPSB0aGlzLl9jYlBhcmFtc0xpc3Q7XG4gICAgdmFyIGNvbnRlbnROb3RDaGFuZ2VkID0gISFsYXN0Q29vcmRTeXMgJiYgbGFzdENvb3JkU3lzLmxlbmd0aCA9PT0gZGF0YUJ5Q29vcmRTeXMubGVuZ3RoO1xuICAgIGNvbnRlbnROb3RDaGFuZ2VkICYmIGVhY2gobGFzdENvb3JkU3lzLCBmdW5jdGlvbiAobGFzdEl0ZW1Db29yZFN5cywgaW5kZXhDb29yZFN5cykge1xuICAgICAgdmFyIGxhc3REYXRhQnlBeGlzID0gbGFzdEl0ZW1Db29yZFN5cy5kYXRhQnlBeGlzIHx8IFtdO1xuICAgICAgdmFyIHRoaXNJdGVtQ29vcmRTeXMgPSBkYXRhQnlDb29yZFN5c1tpbmRleENvb3JkU3lzXSB8fCB7fTtcbiAgICAgIHZhciB0aGlzRGF0YUJ5QXhpcyA9IHRoaXNJdGVtQ29vcmRTeXMuZGF0YUJ5QXhpcyB8fCBbXTtcbiAgICAgIGNvbnRlbnROb3RDaGFuZ2VkID0gY29udGVudE5vdENoYW5nZWQgJiYgbGFzdERhdGFCeUF4aXMubGVuZ3RoID09PSB0aGlzRGF0YUJ5QXhpcy5sZW5ndGg7XG4gICAgICBjb250ZW50Tm90Q2hhbmdlZCAmJiBlYWNoKGxhc3REYXRhQnlBeGlzLCBmdW5jdGlvbiAobGFzdEl0ZW0sIGluZGV4QXhpcykge1xuICAgICAgICB2YXIgdGhpc0l0ZW0gPSB0aGlzRGF0YUJ5QXhpc1tpbmRleEF4aXNdIHx8IHt9O1xuICAgICAgICB2YXIgbGFzdEluZGljZXMgPSBsYXN0SXRlbS5zZXJpZXNEYXRhSW5kaWNlcyB8fCBbXTtcbiAgICAgICAgdmFyIG5ld0luZGljZXMgPSB0aGlzSXRlbS5zZXJpZXNEYXRhSW5kaWNlcyB8fCBbXTtcbiAgICAgICAgY29udGVudE5vdENoYW5nZWQgPSBjb250ZW50Tm90Q2hhbmdlZCAmJiBsYXN0SXRlbS52YWx1ZSA9PT0gdGhpc0l0ZW0udmFsdWUgJiYgbGFzdEl0ZW0uYXhpc1R5cGUgPT09IHRoaXNJdGVtLmF4aXNUeXBlICYmIGxhc3RJdGVtLmF4aXNJZCA9PT0gdGhpc0l0ZW0uYXhpc0lkICYmIGxhc3RJbmRpY2VzLmxlbmd0aCA9PT0gbmV3SW5kaWNlcy5sZW5ndGg7XG4gICAgICAgIGNvbnRlbnROb3RDaGFuZ2VkICYmIGVhY2gobGFzdEluZGljZXMsIGZ1bmN0aW9uIChsYXN0SWR4SXRlbSwgaikge1xuICAgICAgICAgIHZhciBuZXdJZHhJdGVtID0gbmV3SW5kaWNlc1tqXTtcbiAgICAgICAgICBjb250ZW50Tm90Q2hhbmdlZCA9IGNvbnRlbnROb3RDaGFuZ2VkICYmIGxhc3RJZHhJdGVtLnNlcmllc0luZGV4ID09PSBuZXdJZHhJdGVtLnNlcmllc0luZGV4ICYmIGxhc3RJZHhJdGVtLmRhdGFJbmRleCA9PT0gbmV3SWR4SXRlbS5kYXRhSW5kZXg7XG4gICAgICAgIH0pOyAvLyBjaGVjayBpcyBjYlBhcmFtcyBkYXRhIHZhbHVlIGNoYW5nZWRcblxuICAgICAgICBsYXN0Q2JQYXJhbXNMaXN0ICYmIGVhY2gobGFzdEl0ZW0uc2VyaWVzRGF0YUluZGljZXMsIGZ1bmN0aW9uIChpZHhJdGVtKSB7XG4gICAgICAgICAgdmFyIHNlcmllc0lkeCA9IGlkeEl0ZW0uc2VyaWVzSW5kZXg7XG4gICAgICAgICAgdmFyIGNiUGFyYW1zID0gY2JQYXJhbXNMaXN0W3Nlcmllc0lkeF07XG4gICAgICAgICAgdmFyIGxhc3RDYlBhcmFtcyA9IGxhc3RDYlBhcmFtc0xpc3Rbc2VyaWVzSWR4XTtcblxuICAgICAgICAgIGlmIChjYlBhcmFtcyAmJiBsYXN0Q2JQYXJhbXMgJiYgbGFzdENiUGFyYW1zLmRhdGEgIT09IGNiUGFyYW1zLmRhdGEpIHtcbiAgICAgICAgICAgIGNvbnRlbnROb3RDaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuX2xhc3REYXRhQnlDb29yZFN5cyA9IGRhdGFCeUNvb3JkU3lzO1xuICAgIHRoaXMuX2NiUGFyYW1zTGlzdCA9IGNiUGFyYW1zTGlzdDtcbiAgICByZXR1cm4gISFjb250ZW50Tm90Q2hhbmdlZDtcbiAgfTtcblxuICBUb29sdGlwVmlldy5wcm90b3R5cGUuX2hpZGUgPSBmdW5jdGlvbiAoZGlzcGF0Y2hBY3Rpb24pIHtcbiAgICAvLyBEbyBub3QgZGlyZWN0bHkgaGlkZUxhdGVyIGhlcmUsIGJlY2F1c2UgdGhpcyBiZWhhdmlvciBtYXkgYmUgcHJldmVudGVkXG4gICAgLy8gaW4gZGlzcGF0Y2hBY3Rpb24gd2hlbiBzaG93VGlwIGlzIGRpc3BhdGNoZWQuXG4gICAgLy8gRklYTUVcbiAgICAvLyBkdXBsaWNhdGVkIGhpZGVUaXAgaWYgbWFudWFsbHlIaWRlVGlwIGlzIGNhbGxlZCBmcm9tIGRpc3BhdGNoQWN0aW9uLlxuICAgIHRoaXMuX2xhc3REYXRhQnlDb29yZFN5cyA9IG51bGw7XG4gICAgZGlzcGF0Y2hBY3Rpb24oe1xuICAgICAgdHlwZTogJ2hpZGVUaXAnLFxuICAgICAgZnJvbTogdGhpcy51aWRcbiAgICB9KTtcbiAgfTtcblxuICBUb29sdGlwVmlldy5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uIChlY01vZGVsLCBhcGkpIHtcbiAgICBpZiAoZW52Lm5vZGUgfHwgIWFwaS5nZXREb20oKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNsZWFyKHRoaXMsICdfdXBkYXRlUG9zaXRpb24nKTtcblxuICAgIHRoaXMuX3Rvb2x0aXBDb250ZW50LmRpc3Bvc2UoKTtcblxuICAgIGdsb2JhbExpc3RlbmVyLnVucmVnaXN0ZXIoJ2l0ZW1Ub29sdGlwJywgYXBpKTtcbiAgfTtcblxuICBUb29sdGlwVmlldy50eXBlID0gJ3Rvb2x0aXAnO1xuICByZXR1cm4gVG9vbHRpcFZpZXc7XG59KENvbXBvbmVudFZpZXcpO1xuLyoqXHJcbiAqIEZyb20gdG9wIHRvIGJvdHRvbS4gKHRoZSBsYXN0IG9uZSBzaG91bGQgYmUgZ2xvYmFsVG9vbHRpcE1vZGVsKTtcclxuICovXG5cblxuZnVuY3Rpb24gYnVpbGRUb29sdGlwTW9kZWwobW9kZWxDYXNjYWRlLCBnbG9iYWxUb29sdGlwTW9kZWwsIGRlZmF1bHRUb29sdGlwT3B0aW9uKSB7XG4gIC8vIExhc3QgaXMgYWx3YXlzIHRvb2x0aXAgbW9kZWwuXG4gIHZhciBlY01vZGVsID0gZ2xvYmFsVG9vbHRpcE1vZGVsLmVjTW9kZWw7XG4gIHZhciByZXN1bHRNb2RlbDtcblxuICBpZiAoZGVmYXVsdFRvb2x0aXBPcHRpb24pIHtcbiAgICByZXN1bHRNb2RlbCA9IG5ldyBNb2RlbChkZWZhdWx0VG9vbHRpcE9wdGlvbiwgZWNNb2RlbCwgZWNNb2RlbCk7XG4gICAgcmVzdWx0TW9kZWwgPSBuZXcgTW9kZWwoZ2xvYmFsVG9vbHRpcE1vZGVsLm9wdGlvbiwgcmVzdWx0TW9kZWwsIGVjTW9kZWwpO1xuICB9IGVsc2Uge1xuICAgIHJlc3VsdE1vZGVsID0gZ2xvYmFsVG9vbHRpcE1vZGVsO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IG1vZGVsQ2FzY2FkZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIHZhciB0b29sdGlwT3B0ID0gbW9kZWxDYXNjYWRlW2ldO1xuXG4gICAgaWYgKHRvb2x0aXBPcHQpIHtcbiAgICAgIGlmICh0b29sdGlwT3B0IGluc3RhbmNlb2YgTW9kZWwpIHtcbiAgICAgICAgdG9vbHRpcE9wdCA9IHRvb2x0aXBPcHQuZ2V0KCd0b29sdGlwJywgdHJ1ZSk7XG4gICAgICB9IC8vIEluIGVhY2ggZGF0YSBpdGVtIHRvb2x0aXAgY2FuIGJlIHNpbXBseSB3cml0ZTpcbiAgICAgIC8vIHtcbiAgICAgIC8vICB2YWx1ZTogMTAsXG4gICAgICAvLyAgdG9vbHRpcDogJ1NvbWV0aGluZyB5b3UgbmVlZCB0byBrbm93J1xuICAgICAgLy8gfVxuXG5cbiAgICAgIGlmIChpc1N0cmluZyh0b29sdGlwT3B0KSkge1xuICAgICAgICB0b29sdGlwT3B0ID0ge1xuICAgICAgICAgIGZvcm1hdHRlcjogdG9vbHRpcE9wdFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBpZiAodG9vbHRpcE9wdCkge1xuICAgICAgICByZXN1bHRNb2RlbCA9IG5ldyBNb2RlbCh0b29sdGlwT3B0LCByZXN1bHRNb2RlbCwgZWNNb2RlbCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdE1vZGVsO1xufVxuXG5mdW5jdGlvbiBtYWtlRGlzcGF0Y2hBY3Rpb24ocGF5bG9hZCwgYXBpKSB7XG4gIHJldHVybiBwYXlsb2FkLmRpc3BhdGNoQWN0aW9uIHx8IGJpbmQoYXBpLmRpc3BhdGNoQWN0aW9uLCBhcGkpO1xufVxuXG5mdW5jdGlvbiByZWZpeFRvb2x0aXBQb3NpdGlvbih4LCB5LCBjb250ZW50LCB2aWV3V2lkdGgsIHZpZXdIZWlnaHQsIGdhcEgsIGdhcFYpIHtcbiAgdmFyIHNpemUgPSBjb250ZW50LmdldFNpemUoKTtcbiAgdmFyIHdpZHRoID0gc2l6ZVswXTtcbiAgdmFyIGhlaWdodCA9IHNpemVbMV07XG5cbiAgaWYgKGdhcEggIT0gbnVsbCkge1xuICAgIC8vIEFkZCBleHRyYSAyIHBpeGVscyBmb3IgdGhpcyBjYXNlOlxuICAgIC8vIEF0IHByZXNlbnQgdGhlIFwidmFsdWVzXCIgaW4gZGVmYXVsdCB0b29sdGlwIGFyZSB1c2luZyBDU1MgYGZsb2F0OiByaWdodGAuXG4gICAgLy8gV2hlbiB0aGUgcmlnaHQgZWRnZSBvZiB0aGUgdG9vbHRpcCBib3ggaXMgb24gdGhlIHJpZ2h0IHNpZGUgb2YgdGhlXG4gICAgLy8gdmlld3BvcnQsIHRoZSBgZmxvYXRgIGxheW91dCBtaWdodCBwdXNoIHRoZSBcInZhbHVlc1wiIHRvIHRoZSBzZWNvbmQgbGluZS5cbiAgICBpZiAoeCArIHdpZHRoICsgZ2FwSCArIDIgPiB2aWV3V2lkdGgpIHtcbiAgICAgIHggLT0gd2lkdGggKyBnYXBIO1xuICAgIH0gZWxzZSB7XG4gICAgICB4ICs9IGdhcEg7XG4gICAgfVxuICB9XG5cbiAgaWYgKGdhcFYgIT0gbnVsbCkge1xuICAgIGlmICh5ICsgaGVpZ2h0ICsgZ2FwViA+IHZpZXdIZWlnaHQpIHtcbiAgICAgIHkgLT0gaGVpZ2h0ICsgZ2FwVjtcbiAgICB9IGVsc2Uge1xuICAgICAgeSArPSBnYXBWO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbeCwgeV07XG59XG5cbmZ1bmN0aW9uIGNvbmZpbmVUb29sdGlwUG9zaXRpb24oeCwgeSwgY29udGVudCwgdmlld1dpZHRoLCB2aWV3SGVpZ2h0KSB7XG4gIHZhciBzaXplID0gY29udGVudC5nZXRTaXplKCk7XG4gIHZhciB3aWR0aCA9IHNpemVbMF07XG4gIHZhciBoZWlnaHQgPSBzaXplWzFdO1xuICB4ID0gTWF0aC5taW4oeCArIHdpZHRoLCB2aWV3V2lkdGgpIC0gd2lkdGg7XG4gIHkgPSBNYXRoLm1pbih5ICsgaGVpZ2h0LCB2aWV3SGVpZ2h0KSAtIGhlaWdodDtcbiAgeCA9IE1hdGgubWF4KHgsIDApO1xuICB5ID0gTWF0aC5tYXgoeSwgMCk7XG4gIHJldHVybiBbeCwgeV07XG59XG5cbmZ1bmN0aW9uIGNhbGNUb29sdGlwUG9zaXRpb24ocG9zaXRpb24sIHJlY3QsIGNvbnRlbnRTaXplLCBib3JkZXJXaWR0aCkge1xuICB2YXIgZG9tV2lkdGggPSBjb250ZW50U2l6ZVswXTtcbiAgdmFyIGRvbUhlaWdodCA9IGNvbnRlbnRTaXplWzFdO1xuICB2YXIgb2Zmc2V0ID0gTWF0aC5jZWlsKE1hdGguU1FSVDIgKiBib3JkZXJXaWR0aCkgKyA4O1xuICB2YXIgeCA9IDA7XG4gIHZhciB5ID0gMDtcbiAgdmFyIHJlY3RXaWR0aCA9IHJlY3Qud2lkdGg7XG4gIHZhciByZWN0SGVpZ2h0ID0gcmVjdC5oZWlnaHQ7XG5cbiAgc3dpdGNoIChwb3NpdGlvbikge1xuICAgIGNhc2UgJ2luc2lkZSc6XG4gICAgICB4ID0gcmVjdC54ICsgcmVjdFdpZHRoIC8gMiAtIGRvbVdpZHRoIC8gMjtcbiAgICAgIHkgPSByZWN0LnkgKyByZWN0SGVpZ2h0IC8gMiAtIGRvbUhlaWdodCAvIDI7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ3RvcCc6XG4gICAgICB4ID0gcmVjdC54ICsgcmVjdFdpZHRoIC8gMiAtIGRvbVdpZHRoIC8gMjtcbiAgICAgIHkgPSByZWN0LnkgLSBkb21IZWlnaHQgLSBvZmZzZXQ7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2JvdHRvbSc6XG4gICAgICB4ID0gcmVjdC54ICsgcmVjdFdpZHRoIC8gMiAtIGRvbVdpZHRoIC8gMjtcbiAgICAgIHkgPSByZWN0LnkgKyByZWN0SGVpZ2h0ICsgb2Zmc2V0O1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdsZWZ0JzpcbiAgICAgIHggPSByZWN0LnggLSBkb21XaWR0aCAtIG9mZnNldDtcbiAgICAgIHkgPSByZWN0LnkgKyByZWN0SGVpZ2h0IC8gMiAtIGRvbUhlaWdodCAvIDI7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgIHggPSByZWN0LnggKyByZWN0V2lkdGggKyBvZmZzZXQ7XG4gICAgICB5ID0gcmVjdC55ICsgcmVjdEhlaWdodCAvIDIgLSBkb21IZWlnaHQgLyAyO1xuICB9XG5cbiAgcmV0dXJuIFt4LCB5XTtcbn1cblxuZnVuY3Rpb24gaXNDZW50ZXJBbGlnbihhbGlnbikge1xuICByZXR1cm4gYWxpZ24gPT09ICdjZW50ZXInIHx8IGFsaWduID09PSAnbWlkZGxlJztcbn1cbi8qKlxyXG4gKiBGaW5kIHRhcmdldCBjb21wb25lbnQgYnkgcGF5bG9hZCBsaWtlOlxyXG4gKiBgYGBqc1xyXG4gKiB7IGxlZ2VuZElkOiAnc29tZV9pZCcsIG5hbWU6ICd4eHgnIH1cclxuICogeyB0b29sYm94SW5kZXg6IDEsIG5hbWU6ICd4eHgnIH1cclxuICogeyBnZW9OYW1lOiAnc29tZV9uYW1lJywgbmFtZTogJ3h4eCcgfVxyXG4gKiBgYGBcclxuICogUEVORElORzogYXQgcHJlc2VudCBvbmx5XHJcbiAqXHJcbiAqIElmIG5vdCBmb3VuZCwgcmV0dXJuIG51bGwvdW5kZWZpbmVkLlxyXG4gKi9cblxuXG5mdW5jdGlvbiBmaW5kQ29tcG9uZW50UmVmZXJlbmNlKHBheWxvYWQsIGVjTW9kZWwsIGFwaSkge1xuICB2YXIgcXVlcnlPcHRpb25NYXAgPSBwcmVQYXJzZUZpbmRlcihwYXlsb2FkKS5xdWVyeU9wdGlvbk1hcDtcbiAgdmFyIGNvbXBvbmVudE1haW5UeXBlID0gcXVlcnlPcHRpb25NYXAua2V5cygpWzBdO1xuXG4gIGlmICghY29tcG9uZW50TWFpblR5cGUgfHwgY29tcG9uZW50TWFpblR5cGUgPT09ICdzZXJpZXMnKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHF1ZXJ5UmVzdWx0ID0gcXVlcnlSZWZlcnJpbmdDb21wb25lbnRzKGVjTW9kZWwsIGNvbXBvbmVudE1haW5UeXBlLCBxdWVyeU9wdGlvbk1hcC5nZXQoY29tcG9uZW50TWFpblR5cGUpLCB7XG4gICAgdXNlRGVmYXVsdDogZmFsc2UsXG4gICAgZW5hYmxlQWxsOiBmYWxzZSxcbiAgICBlbmFibGVOb25lOiBmYWxzZVxuICB9KTtcbiAgdmFyIG1vZGVsID0gcXVlcnlSZXN1bHQubW9kZWxzWzBdO1xuXG4gIGlmICghbW9kZWwpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgdmlldyA9IGFwaS5nZXRWaWV3T2ZDb21wb25lbnRNb2RlbChtb2RlbCk7XG4gIHZhciBlbDtcbiAgdmlldy5ncm91cC50cmF2ZXJzZShmdW5jdGlvbiAoc3ViRWwpIHtcbiAgICB2YXIgdG9vbHRpcENvbmZpZyA9IGdldEVDRGF0YShzdWJFbCkudG9vbHRpcENvbmZpZztcblxuICAgIGlmICh0b29sdGlwQ29uZmlnICYmIHRvb2x0aXBDb25maWcubmFtZSA9PT0gcGF5bG9hZC5uYW1lKSB7XG4gICAgICBlbCA9IHN1YkVsO1xuICAgICAgcmV0dXJuIHRydWU7IC8vIHN0b3BcbiAgICB9XG4gIH0pO1xuXG4gIGlmIChlbCkge1xuICAgIHJldHVybiB7XG4gICAgICBjb21wb25lbnRNYWluVHlwZTogY29tcG9uZW50TWFpblR5cGUsXG4gICAgICBjb21wb25lbnRJbmRleDogbW9kZWwuY29tcG9uZW50SW5kZXgsXG4gICAgICBlbDogZWxcbiAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRvb2x0aXBWaWV3OyIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgaW5zdGFsbCBhcyBpbnN0YWxsQXhpc1BvaW50ZXIgfSBmcm9tICcuLi9heGlzUG9pbnRlci9pbnN0YWxsLmpzJztcbmltcG9ydCB7IHVzZSB9IGZyb20gJy4uLy4uL2V4dGVuc2lvbi5qcyc7XG5pbXBvcnQgVG9vbHRpcE1vZGVsIGZyb20gJy4vVG9vbHRpcE1vZGVsLmpzJztcbmltcG9ydCBUb29sdGlwVmlldyBmcm9tICcuL1Rvb2x0aXBWaWV3LmpzJztcbmltcG9ydCB7IG5vb3AgfSBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGwocmVnaXN0ZXJzKSB7XG4gIHVzZShpbnN0YWxsQXhpc1BvaW50ZXIpO1xuICByZWdpc3RlcnMucmVnaXN0ZXJDb21wb25lbnRNb2RlbChUb29sdGlwTW9kZWwpO1xuICByZWdpc3RlcnMucmVnaXN0ZXJDb21wb25lbnRWaWV3KFRvb2x0aXBWaWV3KTtcbiAgLyoqXHJcbiAgICogQGFjdGlvblxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlXHJcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IHNlcmllc0luZGV4XHJcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IGRhdGFJbmRleFxyXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbeF1cclxuICAgKiBAcHJvcGVydHkge251bWJlcn0gW3ldXHJcbiAgICovXG5cbiAgcmVnaXN0ZXJzLnJlZ2lzdGVyQWN0aW9uKHtcbiAgICB0eXBlOiAnc2hvd1RpcCcsXG4gICAgZXZlbnQ6ICdzaG93VGlwJyxcbiAgICB1cGRhdGU6ICd0b29sdGlwOm1hbnVhbGx5U2hvd1RpcCdcbiAgfSwgbm9vcCk7XG4gIHJlZ2lzdGVycy5yZWdpc3RlckFjdGlvbih7XG4gICAgdHlwZTogJ2hpZGVUaXAnLFxuICAgIGV2ZW50OiAnaGlkZVRpcCcsXG4gICAgdXBkYXRlOiAndG9vbHRpcDptYW51YWxseUhpZGVUaXAnXG4gIH0sIG5vb3ApO1xufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgKiBhcyB6clV0aWwgZnJvbSAnenJlbmRlci9saWIvY29yZS91dGlsLmpzJztcbmltcG9ydCAqIGFzIGdyYXBoaWMgZnJvbSAnLi4vLi4vdXRpbC9ncmFwaGljLmpzJztcbmltcG9ydCB7IGdldEVDRGF0YSB9IGZyb20gJy4uLy4uL3V0aWwvaW5uZXJTdG9yZS5qcyc7XG5pbXBvcnQgeyBjcmVhdGVUZXh0U3R5bGUgfSBmcm9tICcuLi8uLi9sYWJlbC9sYWJlbFN0eWxlLmpzJztcbmltcG9ydCB7IGdldExheW91dFJlY3QgfSBmcm9tICcuLi8uLi91dGlsL2xheW91dC5qcyc7XG5pbXBvcnQgQ29tcG9uZW50TW9kZWwgZnJvbSAnLi4vLi4vbW9kZWwvQ29tcG9uZW50LmpzJztcbmltcG9ydCBDb21wb25lbnRWaWV3IGZyb20gJy4uLy4uL3ZpZXcvQ29tcG9uZW50LmpzJztcbmltcG9ydCB7IHdpbmRvd09wZW4gfSBmcm9tICcuLi8uLi91dGlsL2Zvcm1hdC5qcyc7XG5cbnZhciBUaXRsZU1vZGVsID1cbi8qKiBAY2xhc3MgKi9cbmZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgX19leHRlbmRzKFRpdGxlTW9kZWwsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gVGl0bGVNb2RlbCgpIHtcbiAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcblxuICAgIF90aGlzLnR5cGUgPSBUaXRsZU1vZGVsLnR5cGU7XG4gICAgX3RoaXMubGF5b3V0TW9kZSA9IHtcbiAgICAgIHR5cGU6ICdib3gnLFxuICAgICAgaWdub3JlU2l6ZTogdHJ1ZVxuICAgIH07XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgVGl0bGVNb2RlbC50eXBlID0gJ3RpdGxlJztcbiAgVGl0bGVNb2RlbC5kZWZhdWx0T3B0aW9uID0ge1xuICAgIC8vIHpsZXZlbDogMCxcbiAgICB6OiA2LFxuICAgIHNob3c6IHRydWUsXG4gICAgdGV4dDogJycsXG4gICAgdGFyZ2V0OiAnYmxhbmsnLFxuICAgIHN1YnRleHQ6ICcnLFxuICAgIHN1YnRhcmdldDogJ2JsYW5rJyxcbiAgICBsZWZ0OiAwLFxuICAgIHRvcDogMCxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDAsMCwwLDApJyxcbiAgICBib3JkZXJDb2xvcjogJyNjY2MnLFxuICAgIGJvcmRlcldpZHRoOiAwLFxuICAgIHBhZGRpbmc6IDUsXG4gICAgaXRlbUdhcDogMTAsXG4gICAgdGV4dFN0eWxlOiB7XG4gICAgICBmb250U2l6ZTogMTgsXG4gICAgICBmb250V2VpZ2h0OiAnYm9sZCcsXG4gICAgICBjb2xvcjogJyM0NjQ2NDYnXG4gICAgfSxcbiAgICBzdWJ0ZXh0U3R5bGU6IHtcbiAgICAgIGZvbnRTaXplOiAxMixcbiAgICAgIGNvbG9yOiAnIzZFNzA3OSdcbiAgICB9XG4gIH07XG4gIHJldHVybiBUaXRsZU1vZGVsO1xufShDb21wb25lbnRNb2RlbCk7IC8vIFZpZXdcblxuXG52YXIgVGl0bGVWaWV3ID1cbi8qKiBAY2xhc3MgKi9cbmZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgX19leHRlbmRzKFRpdGxlVmlldywgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBUaXRsZVZpZXcoKSB7XG4gICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG5cbiAgICBfdGhpcy50eXBlID0gVGl0bGVWaWV3LnR5cGU7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgVGl0bGVWaWV3LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAodGl0bGVNb2RlbCwgZWNNb2RlbCwgYXBpKSB7XG4gICAgdGhpcy5ncm91cC5yZW1vdmVBbGwoKTtcblxuICAgIGlmICghdGl0bGVNb2RlbC5nZXQoJ3Nob3cnKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBncm91cCA9IHRoaXMuZ3JvdXA7XG4gICAgdmFyIHRleHRTdHlsZU1vZGVsID0gdGl0bGVNb2RlbC5nZXRNb2RlbCgndGV4dFN0eWxlJyk7XG4gICAgdmFyIHN1YnRleHRTdHlsZU1vZGVsID0gdGl0bGVNb2RlbC5nZXRNb2RlbCgnc3VidGV4dFN0eWxlJyk7XG4gICAgdmFyIHRleHRBbGlnbiA9IHRpdGxlTW9kZWwuZ2V0KCd0ZXh0QWxpZ24nKTtcbiAgICB2YXIgdGV4dFZlcnRpY2FsQWxpZ24gPSB6clV0aWwucmV0cmlldmUyKHRpdGxlTW9kZWwuZ2V0KCd0ZXh0QmFzZWxpbmUnKSwgdGl0bGVNb2RlbC5nZXQoJ3RleHRWZXJ0aWNhbEFsaWduJykpO1xuICAgIHZhciB0ZXh0RWwgPSBuZXcgZ3JhcGhpYy5UZXh0KHtcbiAgICAgIHN0eWxlOiBjcmVhdGVUZXh0U3R5bGUodGV4dFN0eWxlTW9kZWwsIHtcbiAgICAgICAgdGV4dDogdGl0bGVNb2RlbC5nZXQoJ3RleHQnKSxcbiAgICAgICAgZmlsbDogdGV4dFN0eWxlTW9kZWwuZ2V0VGV4dENvbG9yKClcbiAgICAgIH0sIHtcbiAgICAgICAgZGlzYWJsZUJveDogdHJ1ZVxuICAgICAgfSksXG4gICAgICB6MjogMTBcbiAgICB9KTtcbiAgICB2YXIgdGV4dFJlY3QgPSB0ZXh0RWwuZ2V0Qm91bmRpbmdSZWN0KCk7XG4gICAgdmFyIHN1YlRleHQgPSB0aXRsZU1vZGVsLmdldCgnc3VidGV4dCcpO1xuICAgIHZhciBzdWJUZXh0RWwgPSBuZXcgZ3JhcGhpYy5UZXh0KHtcbiAgICAgIHN0eWxlOiBjcmVhdGVUZXh0U3R5bGUoc3VidGV4dFN0eWxlTW9kZWwsIHtcbiAgICAgICAgdGV4dDogc3ViVGV4dCxcbiAgICAgICAgZmlsbDogc3VidGV4dFN0eWxlTW9kZWwuZ2V0VGV4dENvbG9yKCksXG4gICAgICAgIHk6IHRleHRSZWN0LmhlaWdodCArIHRpdGxlTW9kZWwuZ2V0KCdpdGVtR2FwJyksXG4gICAgICAgIHZlcnRpY2FsQWxpZ246ICd0b3AnXG4gICAgICB9LCB7XG4gICAgICAgIGRpc2FibGVCb3g6IHRydWVcbiAgICAgIH0pLFxuICAgICAgejI6IDEwXG4gICAgfSk7XG4gICAgdmFyIGxpbmsgPSB0aXRsZU1vZGVsLmdldCgnbGluaycpO1xuICAgIHZhciBzdWJsaW5rID0gdGl0bGVNb2RlbC5nZXQoJ3N1YmxpbmsnKTtcbiAgICB2YXIgdHJpZ2dlckV2ZW50ID0gdGl0bGVNb2RlbC5nZXQoJ3RyaWdnZXJFdmVudCcsIHRydWUpO1xuICAgIHRleHRFbC5zaWxlbnQgPSAhbGluayAmJiAhdHJpZ2dlckV2ZW50O1xuICAgIHN1YlRleHRFbC5zaWxlbnQgPSAhc3VibGluayAmJiAhdHJpZ2dlckV2ZW50O1xuXG4gICAgaWYgKGxpbmspIHtcbiAgICAgIHRleHRFbC5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdpbmRvd09wZW4obGluaywgJ18nICsgdGl0bGVNb2RlbC5nZXQoJ3RhcmdldCcpKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChzdWJsaW5rKSB7XG4gICAgICBzdWJUZXh0RWwub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW5kb3dPcGVuKHN1YmxpbmssICdfJyArIHRpdGxlTW9kZWwuZ2V0KCdzdWJ0YXJnZXQnKSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRFQ0RhdGEodGV4dEVsKS5ldmVudERhdGEgPSBnZXRFQ0RhdGEoc3ViVGV4dEVsKS5ldmVudERhdGEgPSB0cmlnZ2VyRXZlbnQgPyB7XG4gICAgICBjb21wb25lbnRUeXBlOiAndGl0bGUnLFxuICAgICAgY29tcG9uZW50SW5kZXg6IHRpdGxlTW9kZWwuY29tcG9uZW50SW5kZXhcbiAgICB9IDogbnVsbDtcbiAgICBncm91cC5hZGQodGV4dEVsKTtcbiAgICBzdWJUZXh0ICYmIGdyb3VwLmFkZChzdWJUZXh0RWwpOyAvLyBJZiBubyBzdWJUZXh0LCBidXQgYWRkIHN1YlRleHRFbCwgdGhlcmUgd2lsbCBiZSBhbiBlbXB0eSBsaW5lLlxuXG4gICAgdmFyIGdyb3VwUmVjdCA9IGdyb3VwLmdldEJvdW5kaW5nUmVjdCgpO1xuICAgIHZhciBsYXlvdXRPcHRpb24gPSB0aXRsZU1vZGVsLmdldEJveExheW91dFBhcmFtcygpO1xuICAgIGxheW91dE9wdGlvbi53aWR0aCA9IGdyb3VwUmVjdC53aWR0aDtcbiAgICBsYXlvdXRPcHRpb24uaGVpZ2h0ID0gZ3JvdXBSZWN0LmhlaWdodDtcbiAgICB2YXIgbGF5b3V0UmVjdCA9IGdldExheW91dFJlY3QobGF5b3V0T3B0aW9uLCB7XG4gICAgICB3aWR0aDogYXBpLmdldFdpZHRoKCksXG4gICAgICBoZWlnaHQ6IGFwaS5nZXRIZWlnaHQoKVxuICAgIH0sIHRpdGxlTW9kZWwuZ2V0KCdwYWRkaW5nJykpOyAvLyBBZGp1c3QgdGV4dCBhbGlnbiBiYXNlZCBvbiBwb3NpdGlvblxuXG4gICAgaWYgKCF0ZXh0QWxpZ24pIHtcbiAgICAgIC8vIEFsaWduIGxlZnQgaWYgdGl0bGUgaXMgb24gdGhlIGxlZnQuIGNlbnRlciBhbmQgcmlnaHQgaXMgc2FtZVxuICAgICAgdGV4dEFsaWduID0gdGl0bGVNb2RlbC5nZXQoJ2xlZnQnKSB8fCB0aXRsZU1vZGVsLmdldCgncmlnaHQnKTsgLy8gQHRzLWlnbm9yZVxuXG4gICAgICBpZiAodGV4dEFsaWduID09PSAnbWlkZGxlJykge1xuICAgICAgICB0ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgIH0gLy8gQWRqdXN0IGxheW91dCBieSB0ZXh0IGFsaWduXG5cblxuICAgICAgaWYgKHRleHRBbGlnbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICBsYXlvdXRSZWN0LnggKz0gbGF5b3V0UmVjdC53aWR0aDtcbiAgICAgIH0gZWxzZSBpZiAodGV4dEFsaWduID09PSAnY2VudGVyJykge1xuICAgICAgICBsYXlvdXRSZWN0LnggKz0gbGF5b3V0UmVjdC53aWR0aCAvIDI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0ZXh0VmVydGljYWxBbGlnbikge1xuICAgICAgdGV4dFZlcnRpY2FsQWxpZ24gPSB0aXRsZU1vZGVsLmdldCgndG9wJykgfHwgdGl0bGVNb2RlbC5nZXQoJ2JvdHRvbScpOyAvLyBAdHMtaWdub3JlXG5cbiAgICAgIGlmICh0ZXh0VmVydGljYWxBbGlnbiA9PT0gJ2NlbnRlcicpIHtcbiAgICAgICAgdGV4dFZlcnRpY2FsQWxpZ24gPSAnbWlkZGxlJztcbiAgICAgIH1cblxuICAgICAgaWYgKHRleHRWZXJ0aWNhbEFsaWduID09PSAnYm90dG9tJykge1xuICAgICAgICBsYXlvdXRSZWN0LnkgKz0gbGF5b3V0UmVjdC5oZWlnaHQ7XG4gICAgICB9IGVsc2UgaWYgKHRleHRWZXJ0aWNhbEFsaWduID09PSAnbWlkZGxlJykge1xuICAgICAgICBsYXlvdXRSZWN0LnkgKz0gbGF5b3V0UmVjdC5oZWlnaHQgLyAyO1xuICAgICAgfVxuXG4gICAgICB0ZXh0VmVydGljYWxBbGlnbiA9IHRleHRWZXJ0aWNhbEFsaWduIHx8ICd0b3AnO1xuICAgIH1cblxuICAgIGdyb3VwLnggPSBsYXlvdXRSZWN0Lng7XG4gICAgZ3JvdXAueSA9IGxheW91dFJlY3QueTtcbiAgICBncm91cC5tYXJrUmVkcmF3KCk7XG4gICAgdmFyIGFsaWduU3R5bGUgPSB7XG4gICAgICBhbGlnbjogdGV4dEFsaWduLFxuICAgICAgdmVydGljYWxBbGlnbjogdGV4dFZlcnRpY2FsQWxpZ25cbiAgICB9O1xuICAgIHRleHRFbC5zZXRTdHlsZShhbGlnblN0eWxlKTtcbiAgICBzdWJUZXh0RWwuc2V0U3R5bGUoYWxpZ25TdHlsZSk7IC8vIFJlbmRlciBiYWNrZ3JvdW5kXG4gICAgLy8gR2V0IGdyb3VwUmVjdCBhZ2FpbiBiZWNhdXNlIHRleHRBbGlnbiBoYXMgYmVlbiBjaGFuZ2VkXG5cbiAgICBncm91cFJlY3QgPSBncm91cC5nZXRCb3VuZGluZ1JlY3QoKTtcbiAgICB2YXIgcGFkZGluZyA9IGxheW91dFJlY3QubWFyZ2luO1xuICAgIHZhciBzdHlsZSA9IHRpdGxlTW9kZWwuZ2V0SXRlbVN0eWxlKFsnY29sb3InLCAnb3BhY2l0eSddKTtcbiAgICBzdHlsZS5maWxsID0gdGl0bGVNb2RlbC5nZXQoJ2JhY2tncm91bmRDb2xvcicpO1xuICAgIHZhciByZWN0ID0gbmV3IGdyYXBoaWMuUmVjdCh7XG4gICAgICBzaGFwZToge1xuICAgICAgICB4OiBncm91cFJlY3QueCAtIHBhZGRpbmdbM10sXG4gICAgICAgIHk6IGdyb3VwUmVjdC55IC0gcGFkZGluZ1swXSxcbiAgICAgICAgd2lkdGg6IGdyb3VwUmVjdC53aWR0aCArIHBhZGRpbmdbMV0gKyBwYWRkaW5nWzNdLFxuICAgICAgICBoZWlnaHQ6IGdyb3VwUmVjdC5oZWlnaHQgKyBwYWRkaW5nWzBdICsgcGFkZGluZ1syXSxcbiAgICAgICAgcjogdGl0bGVNb2RlbC5nZXQoJ2JvcmRlclJhZGl1cycpXG4gICAgICB9LFxuICAgICAgc3R5bGU6IHN0eWxlLFxuICAgICAgc3ViUGl4ZWxPcHRpbWl6ZTogdHJ1ZSxcbiAgICAgIHNpbGVudDogdHJ1ZVxuICAgIH0pO1xuICAgIGdyb3VwLmFkZChyZWN0KTtcbiAgfTtcblxuICBUaXRsZVZpZXcudHlwZSA9ICd0aXRsZSc7XG4gIHJldHVybiBUaXRsZVZpZXc7XG59KENvbXBvbmVudFZpZXcpO1xuXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbChyZWdpc3RlcnMpIHtcbiAgcmVnaXN0ZXJzLnJlZ2lzdGVyQ29tcG9uZW50TW9kZWwoVGl0bGVNb2RlbCk7XG4gIHJlZ2lzdGVycy5yZWdpc3RlckNvbXBvbmVudFZpZXcoVGl0bGVWaWV3KTtcbn0iLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0ICogYXMgenJVdGlsIGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5pbXBvcnQgTW9kZWwgZnJvbSAnLi4vLi4vbW9kZWwvTW9kZWwuanMnO1xuaW1wb3J0IHsgaXNOYW1lU3BlY2lmaWVkIH0gZnJvbSAnLi4vLi4vdXRpbC9tb2RlbC5qcyc7XG5pbXBvcnQgQ29tcG9uZW50TW9kZWwgZnJvbSAnLi4vLi4vbW9kZWwvQ29tcG9uZW50LmpzJztcblxudmFyIGdldERlZmF1bHRTZWxlY3Rvck9wdGlvbnMgPSBmdW5jdGlvbiAoZWNNb2RlbCwgdHlwZSkge1xuICBpZiAodHlwZSA9PT0gJ2FsbCcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ2FsbCcsXG4gICAgICB0aXRsZTogZWNNb2RlbC5nZXRMb2NhbGVNb2RlbCgpLmdldChbJ2xlZ2VuZCcsICdzZWxlY3RvcicsICdhbGwnXSlcbiAgICB9O1xuICB9IGVsc2UgaWYgKHR5cGUgPT09ICdpbnZlcnNlJykge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnaW52ZXJzZScsXG4gICAgICB0aXRsZTogZWNNb2RlbC5nZXRMb2NhbGVNb2RlbCgpLmdldChbJ2xlZ2VuZCcsICdzZWxlY3RvcicsICdpbnZlcnNlJ10pXG4gICAgfTtcbiAgfVxufTtcblxudmFyIExlZ2VuZE1vZGVsID1cbi8qKiBAY2xhc3MgKi9cbmZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgX19leHRlbmRzKExlZ2VuZE1vZGVsLCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIExlZ2VuZE1vZGVsKCkge1xuICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuXG4gICAgX3RoaXMudHlwZSA9IExlZ2VuZE1vZGVsLnR5cGU7XG4gICAgX3RoaXMubGF5b3V0TW9kZSA9IHtcbiAgICAgIHR5cGU6ICdib3gnLFxuICAgICAgLy8gbGVnZW5kLndpZHRoL2hlaWdodCBhcmUgbWF4V2lkdGgvbWF4SGVpZ2h0IGFjdHVhbGx5LFxuICAgICAgLy8gd2hlcmVhcyByZWFsIHdpZHRoL2hlaWdodCBpcyBjYWxjdWxhdGVkIGJ5IGl0cyBjb250ZW50LlxuICAgICAgLy8gKFNldHRpbmcge2xlZnQ6IDEwLCByaWdodDogMTB9IGRvZXMgbm90IG1ha2Ugc2Vuc2UpLlxuICAgICAgLy8gU28gY29uc2lkZXIgdGhlIGNhc2U6XG4gICAgICAvLyBgc2V0T3B0aW9uKHtsZWdlbmQ6IHtsZWZ0OiAxMH0pO2BcbiAgICAgIC8vIHRoZW4gYHNldE9wdGlvbih7bGVnZW5kOiB7cmlnaHQ6IDEwfSk7YFxuICAgICAgLy8gVGhlIHByZXZpb3VzIGBsZWZ0YCBzaG91bGQgYmUgY2xlYXJlZCBieSBzZXR0aW5nIGBpZ25vcmVTaXplYC5cbiAgICAgIGlnbm9yZVNpemU6IHRydWVcbiAgICB9O1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIExlZ2VuZE1vZGVsLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKG9wdGlvbiwgcGFyZW50TW9kZWwsIGVjTW9kZWwpIHtcbiAgICB0aGlzLm1lcmdlRGVmYXVsdEFuZFRoZW1lKG9wdGlvbiwgZWNNb2RlbCk7XG4gICAgb3B0aW9uLnNlbGVjdGVkID0gb3B0aW9uLnNlbGVjdGVkIHx8IHt9O1xuXG4gICAgdGhpcy5fdXBkYXRlU2VsZWN0b3Iob3B0aW9uKTtcbiAgfTtcblxuICBMZWdlbmRNb2RlbC5wcm90b3R5cGUubWVyZ2VPcHRpb24gPSBmdW5jdGlvbiAob3B0aW9uLCBlY01vZGVsKSB7XG4gICAgX3N1cGVyLnByb3RvdHlwZS5tZXJnZU9wdGlvbi5jYWxsKHRoaXMsIG9wdGlvbiwgZWNNb2RlbCk7XG5cbiAgICB0aGlzLl91cGRhdGVTZWxlY3RvcihvcHRpb24pO1xuICB9O1xuXG4gIExlZ2VuZE1vZGVsLnByb3RvdHlwZS5fdXBkYXRlU2VsZWN0b3IgPSBmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgdmFyIHNlbGVjdG9yID0gb3B0aW9uLnNlbGVjdG9yO1xuICAgIHZhciBlY01vZGVsID0gdGhpcy5lY01vZGVsO1xuXG4gICAgaWYgKHNlbGVjdG9yID09PSB0cnVlKSB7XG4gICAgICBzZWxlY3RvciA9IG9wdGlvbi5zZWxlY3RvciA9IFsnYWxsJywgJ2ludmVyc2UnXTtcbiAgICB9XG5cbiAgICBpZiAoenJVdGlsLmlzQXJyYXkoc2VsZWN0b3IpKSB7XG4gICAgICB6clV0aWwuZWFjaChzZWxlY3RvciwgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgIHpyVXRpbC5pc1N0cmluZyhpdGVtKSAmJiAoaXRlbSA9IHtcbiAgICAgICAgICB0eXBlOiBpdGVtXG4gICAgICAgIH0pO1xuICAgICAgICBzZWxlY3RvcltpbmRleF0gPSB6clV0aWwubWVyZ2UoaXRlbSwgZ2V0RGVmYXVsdFNlbGVjdG9yT3B0aW9ucyhlY01vZGVsLCBpdGVtLnR5cGUpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBMZWdlbmRNb2RlbC5wcm90b3R5cGUub3B0aW9uVXBkYXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl91cGRhdGVEYXRhKHRoaXMuZWNNb2RlbCk7XG5cbiAgICB2YXIgbGVnZW5kRGF0YSA9IHRoaXMuX2RhdGE7IC8vIElmIHNlbGVjdGVkTW9kZSBpcyBzaW5nbGUsIHRyeSB0byBzZWxlY3Qgb25lXG5cbiAgICBpZiAobGVnZW5kRGF0YVswXSAmJiB0aGlzLmdldCgnc2VsZWN0ZWRNb2RlJykgPT09ICdzaW5nbGUnKSB7XG4gICAgICB2YXIgaGFzU2VsZWN0ZWQgPSBmYWxzZTsgLy8gSWYgaGFzIGFueSBzZWxlY3RlZCBpbiBvcHRpb24uc2VsZWN0ZWRcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZWdlbmREYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBuYW1lXzEgPSBsZWdlbmREYXRhW2ldLmdldCgnbmFtZScpO1xuXG4gICAgICAgIGlmICh0aGlzLmlzU2VsZWN0ZWQobmFtZV8xKSkge1xuICAgICAgICAgIC8vIEZvcmNlIHRvIHVuc2VsZWN0IG90aGVyc1xuICAgICAgICAgIHRoaXMuc2VsZWN0KG5hbWVfMSk7XG4gICAgICAgICAgaGFzU2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9IC8vIFRyeSBzZWxlY3QgdGhlIGZpcnN0IGlmIHNlbGVjdGVkTW9kZSBpcyBzaW5nbGVcblxuXG4gICAgICAhaGFzU2VsZWN0ZWQgJiYgdGhpcy5zZWxlY3QobGVnZW5kRGF0YVswXS5nZXQoJ25hbWUnKSk7XG4gICAgfVxuICB9O1xuXG4gIExlZ2VuZE1vZGVsLnByb3RvdHlwZS5fdXBkYXRlRGF0YSA9IGZ1bmN0aW9uIChlY01vZGVsKSB7XG4gICAgdmFyIHBvdGVudGlhbERhdGEgPSBbXTtcbiAgICB2YXIgYXZhaWxhYmxlTmFtZXMgPSBbXTtcbiAgICBlY01vZGVsLmVhY2hSYXdTZXJpZXMoZnVuY3Rpb24gKHNlcmllc01vZGVsKSB7XG4gICAgICB2YXIgc2VyaWVzTmFtZSA9IHNlcmllc01vZGVsLm5hbWU7XG4gICAgICBhdmFpbGFibGVOYW1lcy5wdXNoKHNlcmllc05hbWUpO1xuICAgICAgdmFyIGlzUG90ZW50aWFsO1xuXG4gICAgICBpZiAoc2VyaWVzTW9kZWwubGVnZW5kVmlzdWFsUHJvdmlkZXIpIHtcbiAgICAgICAgdmFyIHByb3ZpZGVyID0gc2VyaWVzTW9kZWwubGVnZW5kVmlzdWFsUHJvdmlkZXI7XG4gICAgICAgIHZhciBuYW1lcyA9IHByb3ZpZGVyLmdldEFsbE5hbWVzKCk7XG5cbiAgICAgICAgaWYgKCFlY01vZGVsLmlzU2VyaWVzRmlsdGVyZWQoc2VyaWVzTW9kZWwpKSB7XG4gICAgICAgICAgYXZhaWxhYmxlTmFtZXMgPSBhdmFpbGFibGVOYW1lcy5jb25jYXQobmFtZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5hbWVzLmxlbmd0aCkge1xuICAgICAgICAgIHBvdGVudGlhbERhdGEgPSBwb3RlbnRpYWxEYXRhLmNvbmNhdChuYW1lcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXNQb3RlbnRpYWwgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpc1BvdGVudGlhbCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc1BvdGVudGlhbCAmJiBpc05hbWVTcGVjaWZpZWQoc2VyaWVzTW9kZWwpKSB7XG4gICAgICAgIHBvdGVudGlhbERhdGEucHVzaChzZXJpZXNNb2RlbC5uYW1lKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHtBcnJheS48c3RyaW5nPn1cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cblxuICAgIHRoaXMuX2F2YWlsYWJsZU5hbWVzID0gYXZhaWxhYmxlTmFtZXM7IC8vIElmIGxlZ2VuZC5kYXRhIGlzIG5vdCBzcGVjaWZpZWQgaW4gb3B0aW9uLCB1c2UgYXZhaWxhYmxlTmFtZXMgYXMgZGF0YSxcbiAgICAvLyB3aGljaCBpcyBjb252ZW5pZW50IGZvciB1c2VyIHByZXBhcmluZyBvcHRpb24uXG5cbiAgICB2YXIgcmF3RGF0YSA9IHRoaXMuZ2V0KCdkYXRhJykgfHwgcG90ZW50aWFsRGF0YTtcbiAgICB2YXIgbGVnZW5kTmFtZU1hcCA9IHpyVXRpbC5jcmVhdGVIYXNoTWFwKCk7XG4gICAgdmFyIGxlZ2VuZERhdGEgPSB6clV0aWwubWFwKHJhd0RhdGEsIGZ1bmN0aW9uIChkYXRhSXRlbSkge1xuICAgICAgLy8gQ2FuIGJlIHN0cmluZyBvciBudW1iZXJcbiAgICAgIGlmICh6clV0aWwuaXNTdHJpbmcoZGF0YUl0ZW0pIHx8IHpyVXRpbC5pc051bWJlcihkYXRhSXRlbSkpIHtcbiAgICAgICAgZGF0YUl0ZW0gPSB7XG4gICAgICAgICAgbmFtZTogZGF0YUl0ZW1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKGxlZ2VuZE5hbWVNYXAuZ2V0KGRhdGFJdGVtLm5hbWUpKSB7XG4gICAgICAgIC8vIHJlbW92ZSBsZWdlbmQgbmFtZSBkdXBsaWNhdGVcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGxlZ2VuZE5hbWVNYXAuc2V0KGRhdGFJdGVtLm5hbWUsIHRydWUpO1xuICAgICAgcmV0dXJuIG5ldyBNb2RlbChkYXRhSXRlbSwgdGhpcywgdGhpcy5lY01vZGVsKTtcbiAgICB9LCB0aGlzKTtcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHtBcnJheS48bW9kdWxlOmVjaGFydHMvbW9kZWwvTW9kZWw+fVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xuXG4gICAgdGhpcy5fZGF0YSA9IHpyVXRpbC5maWx0ZXIobGVnZW5kRGF0YSwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHJldHVybiAhIWl0ZW07XG4gICAgfSk7XG4gIH07XG5cbiAgTGVnZW5kTW9kZWwucHJvdG90eXBlLmdldERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGE7XG4gIH07XG5cbiAgTGVnZW5kTW9kZWwucHJvdG90eXBlLnNlbGVjdCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdmFyIHNlbGVjdGVkID0gdGhpcy5vcHRpb24uc2VsZWN0ZWQ7XG4gICAgdmFyIHNlbGVjdGVkTW9kZSA9IHRoaXMuZ2V0KCdzZWxlY3RlZE1vZGUnKTtcblxuICAgIGlmIChzZWxlY3RlZE1vZGUgPT09ICdzaW5nbGUnKSB7XG4gICAgICB2YXIgZGF0YSA9IHRoaXMuX2RhdGE7XG4gICAgICB6clV0aWwuZWFjaChkYXRhLCBmdW5jdGlvbiAoZGF0YUl0ZW0pIHtcbiAgICAgICAgc2VsZWN0ZWRbZGF0YUl0ZW0uZ2V0KCduYW1lJyldID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBzZWxlY3RlZFtuYW1lXSA9IHRydWU7XG4gIH07XG5cbiAgTGVnZW5kTW9kZWwucHJvdG90eXBlLnVuU2VsZWN0ID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBpZiAodGhpcy5nZXQoJ3NlbGVjdGVkTW9kZScpICE9PSAnc2luZ2xlJykge1xuICAgICAgdGhpcy5vcHRpb24uc2VsZWN0ZWRbbmFtZV0gPSBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgTGVnZW5kTW9kZWwucHJvdG90eXBlLnRvZ2dsZVNlbGVjdGVkID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB2YXIgc2VsZWN0ZWQgPSB0aGlzLm9wdGlvbi5zZWxlY3RlZDsgLy8gRGVmYXVsdCBpcyB0cnVlXG5cbiAgICBpZiAoIXNlbGVjdGVkLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICBzZWxlY3RlZFtuYW1lXSA9IHRydWU7XG4gICAgfVxuXG4gICAgdGhpc1tzZWxlY3RlZFtuYW1lXSA/ICd1blNlbGVjdCcgOiAnc2VsZWN0J10obmFtZSk7XG4gIH07XG5cbiAgTGVnZW5kTW9kZWwucHJvdG90eXBlLmFsbFNlbGVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZGF0YSA9IHRoaXMuX2RhdGE7XG4gICAgdmFyIHNlbGVjdGVkID0gdGhpcy5vcHRpb24uc2VsZWN0ZWQ7XG4gICAgenJVdGlsLmVhY2goZGF0YSwgZnVuY3Rpb24gKGRhdGFJdGVtKSB7XG4gICAgICBzZWxlY3RlZFtkYXRhSXRlbS5nZXQoJ25hbWUnLCB0cnVlKV0gPSB0cnVlO1xuICAgIH0pO1xuICB9O1xuXG4gIExlZ2VuZE1vZGVsLnByb3RvdHlwZS5pbnZlcnNlU2VsZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBkYXRhID0gdGhpcy5fZGF0YTtcbiAgICB2YXIgc2VsZWN0ZWQgPSB0aGlzLm9wdGlvbi5zZWxlY3RlZDtcbiAgICB6clV0aWwuZWFjaChkYXRhLCBmdW5jdGlvbiAoZGF0YUl0ZW0pIHtcbiAgICAgIHZhciBuYW1lID0gZGF0YUl0ZW0uZ2V0KCduYW1lJywgdHJ1ZSk7IC8vIEluaXRpYWxseSwgZGVmYXVsdCB2YWx1ZSBpcyB0cnVlXG5cbiAgICAgIGlmICghc2VsZWN0ZWQuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgc2VsZWN0ZWRbbmFtZV0gPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBzZWxlY3RlZFtuYW1lXSA9ICFzZWxlY3RlZFtuYW1lXTtcbiAgICB9KTtcbiAgfTtcblxuICBMZWdlbmRNb2RlbC5wcm90b3R5cGUuaXNTZWxlY3RlZCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdmFyIHNlbGVjdGVkID0gdGhpcy5vcHRpb24uc2VsZWN0ZWQ7XG4gICAgcmV0dXJuICEoc2VsZWN0ZWQuaGFzT3duUHJvcGVydHkobmFtZSkgJiYgIXNlbGVjdGVkW25hbWVdKSAmJiB6clV0aWwuaW5kZXhPZih0aGlzLl9hdmFpbGFibGVOYW1lcywgbmFtZSkgPj0gMDtcbiAgfTtcblxuICBMZWdlbmRNb2RlbC5wcm90b3R5cGUuZ2V0T3JpZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmdldCgnb3JpZW50JykgPT09ICd2ZXJ0aWNhbCcgPyB7XG4gICAgICBpbmRleDogMSxcbiAgICAgIG5hbWU6ICd2ZXJ0aWNhbCdcbiAgICB9IDoge1xuICAgICAgaW5kZXg6IDAsXG4gICAgICBuYW1lOiAnaG9yaXpvbnRhbCdcbiAgICB9O1xuICB9O1xuXG4gIExlZ2VuZE1vZGVsLnR5cGUgPSAnbGVnZW5kLnBsYWluJztcbiAgTGVnZW5kTW9kZWwuZGVwZW5kZW5jaWVzID0gWydzZXJpZXMnXTtcbiAgTGVnZW5kTW9kZWwuZGVmYXVsdE9wdGlvbiA9IHtcbiAgICAvLyB6bGV2ZWw6IDAsXG4gICAgejogNCxcbiAgICBzaG93OiB0cnVlLFxuICAgIG9yaWVudDogJ2hvcml6b250YWwnLFxuICAgIGxlZnQ6ICdjZW50ZXInLFxuICAgIC8vIHJpZ2h0OiAnY2VudGVyJyxcbiAgICB0b3A6IDAsXG4gICAgLy8gYm90dG9tOiBudWxsLFxuICAgIGFsaWduOiAnYXV0bycsXG4gICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgwLDAsMCwwKScsXG4gICAgYm9yZGVyQ29sb3I6ICcjY2NjJyxcbiAgICBib3JkZXJSYWRpdXM6IDAsXG4gICAgYm9yZGVyV2lkdGg6IDAsXG4gICAgcGFkZGluZzogNSxcbiAgICBpdGVtR2FwOiAxMCxcbiAgICBpdGVtV2lkdGg6IDI1LFxuICAgIGl0ZW1IZWlnaHQ6IDE0LFxuICAgIHN5bWJvbFJvdGF0ZTogJ2luaGVyaXQnLFxuICAgIHN5bWJvbEtlZXBBc3BlY3Q6IHRydWUsXG4gICAgaW5hY3RpdmVDb2xvcjogJyNjY2MnLFxuICAgIGluYWN0aXZlQm9yZGVyQ29sb3I6ICcjY2NjJyxcbiAgICBpbmFjdGl2ZUJvcmRlcldpZHRoOiAnYXV0bycsXG4gICAgaXRlbVN0eWxlOiB7XG4gICAgICBjb2xvcjogJ2luaGVyaXQnLFxuICAgICAgb3BhY2l0eTogJ2luaGVyaXQnLFxuICAgICAgYm9yZGVyQ29sb3I6ICdpbmhlcml0JyxcbiAgICAgIGJvcmRlcldpZHRoOiAnYXV0bycsXG4gICAgICBib3JkZXJDYXA6ICdpbmhlcml0JyxcbiAgICAgIGJvcmRlckpvaW46ICdpbmhlcml0JyxcbiAgICAgIGJvcmRlckRhc2hPZmZzZXQ6ICdpbmhlcml0JyxcbiAgICAgIGJvcmRlck1pdGVyTGltaXQ6ICdpbmhlcml0J1xuICAgIH0sXG4gICAgbGluZVN0eWxlOiB7XG4gICAgICB3aWR0aDogJ2F1dG8nLFxuICAgICAgY29sb3I6ICdpbmhlcml0JyxcbiAgICAgIGluYWN0aXZlQ29sb3I6ICcjY2NjJyxcbiAgICAgIGluYWN0aXZlV2lkdGg6IDIsXG4gICAgICBvcGFjaXR5OiAnaW5oZXJpdCcsXG4gICAgICB0eXBlOiAnaW5oZXJpdCcsXG4gICAgICBjYXA6ICdpbmhlcml0JyxcbiAgICAgIGpvaW46ICdpbmhlcml0JyxcbiAgICAgIGRhc2hPZmZzZXQ6ICdpbmhlcml0JyxcbiAgICAgIG1pdGVyTGltaXQ6ICdpbmhlcml0J1xuICAgIH0sXG4gICAgdGV4dFN0eWxlOiB7XG4gICAgICBjb2xvcjogJyMzMzMnXG4gICAgfSxcbiAgICBzZWxlY3RlZE1vZGU6IHRydWUsXG4gICAgc2VsZWN0b3I6IGZhbHNlLFxuICAgIHNlbGVjdG9yTGFiZWw6IHtcbiAgICAgIHNob3c6IHRydWUsXG4gICAgICBib3JkZXJSYWRpdXM6IDEwLFxuICAgICAgcGFkZGluZzogWzMsIDUsIDMsIDVdLFxuICAgICAgZm9udFNpemU6IDEyLFxuICAgICAgZm9udEZhbWlseTogJ3NhbnMtc2VyaWYnLFxuICAgICAgY29sb3I6ICcjNjY2JyxcbiAgICAgIGJvcmRlcldpZHRoOiAxLFxuICAgICAgYm9yZGVyQ29sb3I6ICcjNjY2J1xuICAgIH0sXG4gICAgZW1waGFzaXM6IHtcbiAgICAgIHNlbGVjdG9yTGFiZWw6IHtcbiAgICAgICAgc2hvdzogdHJ1ZSxcbiAgICAgICAgY29sb3I6ICcjZWVlJyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzY2NidcbiAgICAgIH1cbiAgICB9LFxuICAgIHNlbGVjdG9yUG9zaXRpb246ICdhdXRvJyxcbiAgICBzZWxlY3Rvckl0ZW1HYXA6IDcsXG4gICAgc2VsZWN0b3JCdXR0b25HYXA6IDEwLFxuICAgIHRvb2x0aXA6IHtcbiAgICAgIHNob3c6IGZhbHNlXG4gICAgfVxuICB9O1xuICByZXR1cm4gTGVnZW5kTW9kZWw7XG59KENvbXBvbmVudE1vZGVsKTtcblxuZXhwb3J0IGRlZmF1bHQgTGVnZW5kTW9kZWw7IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5pbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCAqIGFzIHpyVXRpbCBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0IHsgcGFyc2UsIHN0cmluZ2lmeSB9IGZyb20gJ3pyZW5kZXIvbGliL3Rvb2wvY29sb3IuanMnO1xuaW1wb3J0ICogYXMgZ3JhcGhpYyBmcm9tICcuLi8uLi91dGlsL2dyYXBoaWMuanMnO1xuaW1wb3J0IHsgZW5hYmxlSG92ZXJFbXBoYXNpcyB9IGZyb20gJy4uLy4uL3V0aWwvc3RhdGVzLmpzJztcbmltcG9ydCB7IHNldExhYmVsU3R5bGUsIGNyZWF0ZVRleHRTdHlsZSB9IGZyb20gJy4uLy4uL2xhYmVsL2xhYmVsU3R5bGUuanMnO1xuaW1wb3J0IHsgbWFrZUJhY2tncm91bmQgfSBmcm9tICcuLi9oZWxwZXIvbGlzdENvbXBvbmVudC5qcyc7XG5pbXBvcnQgKiBhcyBsYXlvdXRVdGlsIGZyb20gJy4uLy4uL3V0aWwvbGF5b3V0LmpzJztcbmltcG9ydCBDb21wb25lbnRWaWV3IGZyb20gJy4uLy4uL3ZpZXcvQ29tcG9uZW50LmpzJztcbmltcG9ydCB7IGNyZWF0ZVN5bWJvbCB9IGZyb20gJy4uLy4uL3V0aWwvc3ltYm9sLmpzJztcbmltcG9ydCB7IGNyZWF0ZU9yVXBkYXRlUGF0dGVybkZyb21EZWNhbCB9IGZyb20gJy4uLy4uL3V0aWwvZGVjYWwuanMnO1xudmFyIGN1cnJ5ID0genJVdGlsLmN1cnJ5O1xudmFyIGVhY2ggPSB6clV0aWwuZWFjaDtcbnZhciBHcm91cCA9IGdyYXBoaWMuR3JvdXA7XG5cbnZhciBMZWdlbmRWaWV3ID1cbi8qKiBAY2xhc3MgKi9cbmZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgX19leHRlbmRzKExlZ2VuZFZpZXcsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gTGVnZW5kVmlldygpIHtcbiAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcblxuICAgIF90aGlzLnR5cGUgPSBMZWdlbmRWaWV3LnR5cGU7XG4gICAgX3RoaXMubmV3bGluZURpc2FibGVkID0gZmFsc2U7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgTGVnZW5kVmlldy5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmdyb3VwLmFkZCh0aGlzLl9jb250ZW50R3JvdXAgPSBuZXcgR3JvdXAoKSk7XG4gICAgdGhpcy5ncm91cC5hZGQodGhpcy5fc2VsZWN0b3JHcm91cCA9IG5ldyBHcm91cCgpKTtcbiAgICB0aGlzLl9pc0ZpcnN0UmVuZGVyID0gdHJ1ZTtcbiAgfTtcbiAgLyoqXHJcbiAgICogQHByb3RlY3RlZFxyXG4gICAqL1xuXG5cbiAgTGVnZW5kVmlldy5wcm90b3R5cGUuZ2V0Q29udGVudEdyb3VwID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9jb250ZW50R3JvdXA7XG4gIH07XG4gIC8qKlxyXG4gICAqIEBwcm90ZWN0ZWRcclxuICAgKi9cblxuXG4gIExlZ2VuZFZpZXcucHJvdG90eXBlLmdldFNlbGVjdG9yR3JvdXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NlbGVjdG9yR3JvdXA7XG4gIH07XG4gIC8qKlxyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqL1xuXG5cbiAgTGVnZW5kVmlldy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGxlZ2VuZE1vZGVsLCBlY01vZGVsLCBhcGkpIHtcbiAgICB2YXIgaXNGaXJzdFJlbmRlciA9IHRoaXMuX2lzRmlyc3RSZW5kZXI7XG4gICAgdGhpcy5faXNGaXJzdFJlbmRlciA9IGZhbHNlO1xuICAgIHRoaXMucmVzZXRJbm5lcigpO1xuXG4gICAgaWYgKCFsZWdlbmRNb2RlbC5nZXQoJ3Nob3cnLCB0cnVlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBpdGVtQWxpZ24gPSBsZWdlbmRNb2RlbC5nZXQoJ2FsaWduJyk7XG4gICAgdmFyIG9yaWVudCA9IGxlZ2VuZE1vZGVsLmdldCgnb3JpZW50Jyk7XG5cbiAgICBpZiAoIWl0ZW1BbGlnbiB8fCBpdGVtQWxpZ24gPT09ICdhdXRvJykge1xuICAgICAgaXRlbUFsaWduID0gbGVnZW5kTW9kZWwuZ2V0KCdsZWZ0JykgPT09ICdyaWdodCcgJiYgb3JpZW50ID09PSAndmVydGljYWwnID8gJ3JpZ2h0JyA6ICdsZWZ0JztcbiAgICB9IC8vIHNlbGVjdG9yIGhhcyBiZWVuIG5vcm1hbGl6ZWQgdG8gYW4gYXJyYXkgaW4gbW9kZWxcblxuXG4gICAgdmFyIHNlbGVjdG9yID0gbGVnZW5kTW9kZWwuZ2V0KCdzZWxlY3RvcicsIHRydWUpO1xuICAgIHZhciBzZWxlY3RvclBvc2l0aW9uID0gbGVnZW5kTW9kZWwuZ2V0KCdzZWxlY3RvclBvc2l0aW9uJywgdHJ1ZSk7XG5cbiAgICBpZiAoc2VsZWN0b3IgJiYgKCFzZWxlY3RvclBvc2l0aW9uIHx8IHNlbGVjdG9yUG9zaXRpb24gPT09ICdhdXRvJykpIHtcbiAgICAgIHNlbGVjdG9yUG9zaXRpb24gPSBvcmllbnQgPT09ICdob3Jpem9udGFsJyA/ICdlbmQnIDogJ3N0YXJ0JztcbiAgICB9XG5cbiAgICB0aGlzLnJlbmRlcklubmVyKGl0ZW1BbGlnbiwgbGVnZW5kTW9kZWwsIGVjTW9kZWwsIGFwaSwgc2VsZWN0b3IsIG9yaWVudCwgc2VsZWN0b3JQb3NpdGlvbik7IC8vIFBlcmZvcm0gbGF5b3V0LlxuXG4gICAgdmFyIHBvc2l0aW9uSW5mbyA9IGxlZ2VuZE1vZGVsLmdldEJveExheW91dFBhcmFtcygpO1xuICAgIHZhciB2aWV3cG9ydFNpemUgPSB7XG4gICAgICB3aWR0aDogYXBpLmdldFdpZHRoKCksXG4gICAgICBoZWlnaHQ6IGFwaS5nZXRIZWlnaHQoKVxuICAgIH07XG4gICAgdmFyIHBhZGRpbmcgPSBsZWdlbmRNb2RlbC5nZXQoJ3BhZGRpbmcnKTtcbiAgICB2YXIgbWF4U2l6ZSA9IGxheW91dFV0aWwuZ2V0TGF5b3V0UmVjdChwb3NpdGlvbkluZm8sIHZpZXdwb3J0U2l6ZSwgcGFkZGluZyk7XG4gICAgdmFyIG1haW5SZWN0ID0gdGhpcy5sYXlvdXRJbm5lcihsZWdlbmRNb2RlbCwgaXRlbUFsaWduLCBtYXhTaXplLCBpc0ZpcnN0UmVuZGVyLCBzZWxlY3Rvciwgc2VsZWN0b3JQb3NpdGlvbik7IC8vIFBsYWNlIG1haW5Hcm91cCwgYmFzZWQgb24gdGhlIGNhbGN1bGF0ZWQgYG1haW5SZWN0YC5cblxuICAgIHZhciBsYXlvdXRSZWN0ID0gbGF5b3V0VXRpbC5nZXRMYXlvdXRSZWN0KHpyVXRpbC5kZWZhdWx0cyh7XG4gICAgICB3aWR0aDogbWFpblJlY3Qud2lkdGgsXG4gICAgICBoZWlnaHQ6IG1haW5SZWN0LmhlaWdodFxuICAgIH0sIHBvc2l0aW9uSW5mbyksIHZpZXdwb3J0U2l6ZSwgcGFkZGluZyk7XG4gICAgdGhpcy5ncm91cC54ID0gbGF5b3V0UmVjdC54IC0gbWFpblJlY3QueDtcbiAgICB0aGlzLmdyb3VwLnkgPSBsYXlvdXRSZWN0LnkgLSBtYWluUmVjdC55O1xuICAgIHRoaXMuZ3JvdXAubWFya1JlZHJhdygpOyAvLyBSZW5kZXIgYmFja2dyb3VuZCBhZnRlciBncm91cCBpcyBsYXlvdXQuXG5cbiAgICB0aGlzLmdyb3VwLmFkZCh0aGlzLl9iYWNrZ3JvdW5kRWwgPSBtYWtlQmFja2dyb3VuZChtYWluUmVjdCwgbGVnZW5kTW9kZWwpKTtcbiAgfTtcblxuICBMZWdlbmRWaWV3LnByb3RvdHlwZS5yZXNldElubmVyID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZ2V0Q29udGVudEdyb3VwKCkucmVtb3ZlQWxsKCk7XG4gICAgdGhpcy5fYmFja2dyb3VuZEVsICYmIHRoaXMuZ3JvdXAucmVtb3ZlKHRoaXMuX2JhY2tncm91bmRFbCk7XG4gICAgdGhpcy5nZXRTZWxlY3Rvckdyb3VwKCkucmVtb3ZlQWxsKCk7XG4gIH07XG5cbiAgTGVnZW5kVmlldy5wcm90b3R5cGUucmVuZGVySW5uZXIgPSBmdW5jdGlvbiAoaXRlbUFsaWduLCBsZWdlbmRNb2RlbCwgZWNNb2RlbCwgYXBpLCBzZWxlY3Rvciwgb3JpZW50LCBzZWxlY3RvclBvc2l0aW9uKSB7XG4gICAgdmFyIGNvbnRlbnRHcm91cCA9IHRoaXMuZ2V0Q29udGVudEdyb3VwKCk7XG4gICAgdmFyIGxlZ2VuZERyYXduTWFwID0genJVdGlsLmNyZWF0ZUhhc2hNYXAoKTtcbiAgICB2YXIgc2VsZWN0TW9kZSA9IGxlZ2VuZE1vZGVsLmdldCgnc2VsZWN0ZWRNb2RlJyk7XG4gICAgdmFyIGV4Y2x1ZGVTZXJpZXNJZCA9IFtdO1xuICAgIGVjTW9kZWwuZWFjaFJhd1NlcmllcyhmdW5jdGlvbiAoc2VyaWVzTW9kZWwpIHtcbiAgICAgICFzZXJpZXNNb2RlbC5nZXQoJ2xlZ2VuZEhvdmVyTGluaycpICYmIGV4Y2x1ZGVTZXJpZXNJZC5wdXNoKHNlcmllc01vZGVsLmlkKTtcbiAgICB9KTtcbiAgICBlYWNoKGxlZ2VuZE1vZGVsLmdldERhdGEoKSwgZnVuY3Rpb24gKGxlZ2VuZEl0ZW1Nb2RlbCwgZGF0YUluZGV4KSB7XG4gICAgICB2YXIgbmFtZSA9IGxlZ2VuZEl0ZW1Nb2RlbC5nZXQoJ25hbWUnKTsgLy8gVXNlIGVtcHR5IHN0cmluZyBvciBcXG4gYXMgYSBuZXdsaW5lIHN0cmluZ1xuXG4gICAgICBpZiAoIXRoaXMubmV3bGluZURpc2FibGVkICYmIChuYW1lID09PSAnJyB8fCBuYW1lID09PSAnXFxuJykpIHtcbiAgICAgICAgdmFyIGcgPSBuZXcgR3JvdXAoKTsgLy8gQHRzLWlnbm9yZVxuXG4gICAgICAgIGcubmV3bGluZSA9IHRydWU7XG4gICAgICAgIGNvbnRlbnRHcm91cC5hZGQoZyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gUmVwcmVzZW50aXRpdmUgc2VyaWVzLlxuXG5cbiAgICAgIHZhciBzZXJpZXNNb2RlbCA9IGVjTW9kZWwuZ2V0U2VyaWVzQnlOYW1lKG5hbWUpWzBdO1xuXG4gICAgICBpZiAobGVnZW5kRHJhd25NYXAuZ2V0KG5hbWUpKSB7XG4gICAgICAgIC8vIEhhdmUgYmVlbiBkcmF3blxuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIExlZ2VuZCB0byBjb250cm9sIHNlcmllcy5cblxuXG4gICAgICBpZiAoc2VyaWVzTW9kZWwpIHtcbiAgICAgICAgdmFyIGRhdGEgPSBzZXJpZXNNb2RlbC5nZXREYXRhKCk7XG4gICAgICAgIHZhciBsaW5lVmlzdWFsU3R5bGUgPSBkYXRhLmdldFZpc3VhbCgnbGVnZW5kTGluZVN0eWxlJykgfHwge307XG4gICAgICAgIHZhciBsZWdlbmRJY29uID0gZGF0YS5nZXRWaXN1YWwoJ2xlZ2VuZEljb24nKTtcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogYGRhdGEuZ2V0VmlzdWFsKCdzdHlsZScpYCBtYXkgYmUgdGhlIGNvbG9yIGZyb20gdGhlIHJlZ2lzdGVyXHJcbiAgICAgICAgICogaW4gc2VyaWVzLiBGb3IgZXhhbXBsZSwgZm9yIGxpbmUgc2VyaWVzLFxyXG4gICAgICAgICAqL1xuXG4gICAgICAgIHZhciBzdHlsZSA9IGRhdGEuZ2V0VmlzdWFsKCdzdHlsZScpO1xuXG4gICAgICAgIHZhciBpdGVtR3JvdXAgPSB0aGlzLl9jcmVhdGVJdGVtKHNlcmllc01vZGVsLCBuYW1lLCBkYXRhSW5kZXgsIGxlZ2VuZEl0ZW1Nb2RlbCwgbGVnZW5kTW9kZWwsIGl0ZW1BbGlnbiwgbGluZVZpc3VhbFN0eWxlLCBzdHlsZSwgbGVnZW5kSWNvbiwgc2VsZWN0TW9kZSwgYXBpKTtcblxuICAgICAgICBpdGVtR3JvdXAub24oJ2NsaWNrJywgY3VycnkoZGlzcGF0Y2hTZWxlY3RBY3Rpb24sIG5hbWUsIG51bGwsIGFwaSwgZXhjbHVkZVNlcmllc0lkKSkub24oJ21vdXNlb3ZlcicsIGN1cnJ5KGRpc3BhdGNoSGlnaGxpZ2h0QWN0aW9uLCBzZXJpZXNNb2RlbC5uYW1lLCBudWxsLCBhcGksIGV4Y2x1ZGVTZXJpZXNJZCkpLm9uKCdtb3VzZW91dCcsIGN1cnJ5KGRpc3BhdGNoRG93bnBsYXlBY3Rpb24sIHNlcmllc01vZGVsLm5hbWUsIG51bGwsIGFwaSwgZXhjbHVkZVNlcmllc0lkKSk7XG4gICAgICAgIGxlZ2VuZERyYXduTWFwLnNldChuYW1lLCB0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIExlZ2VuZCB0byBjb250cm9sIGRhdGEuIEluIHBpZSBhbmQgZnVubmVsLlxuICAgICAgICBlY01vZGVsLmVhY2hSYXdTZXJpZXMoZnVuY3Rpb24gKHNlcmllc01vZGVsKSB7XG4gICAgICAgICAgLy8gSW4gY2FzZSBtdWx0aXBsZSBzZXJpZXMgaGFzIHNhbWUgZGF0YSBuYW1lXG4gICAgICAgICAgaWYgKGxlZ2VuZERyYXduTWFwLmdldChuYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzZXJpZXNNb2RlbC5sZWdlbmRWaXN1YWxQcm92aWRlcikge1xuICAgICAgICAgICAgdmFyIHByb3ZpZGVyID0gc2VyaWVzTW9kZWwubGVnZW5kVmlzdWFsUHJvdmlkZXI7XG5cbiAgICAgICAgICAgIGlmICghcHJvdmlkZXIuY29udGFpbk5hbWUobmFtZSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgaWR4ID0gcHJvdmlkZXIuaW5kZXhPZk5hbWUobmFtZSk7XG4gICAgICAgICAgICB2YXIgc3R5bGUgPSBwcm92aWRlci5nZXRJdGVtVmlzdWFsKGlkeCwgJ3N0eWxlJyk7XG4gICAgICAgICAgICB2YXIgbGVnZW5kSWNvbiA9IHByb3ZpZGVyLmdldEl0ZW1WaXN1YWwoaWR4LCAnbGVnZW5kSWNvbicpO1xuICAgICAgICAgICAgdmFyIGNvbG9yQXJyID0gcGFyc2Uoc3R5bGUuZmlsbCk7IC8vIENvbG9yIG1heSBiZSBzZXQgdG8gdHJhbnNwYXJlbnQgaW4gdmlzdWFsTWFwIHdoZW4gZGF0YSBpcyBvdXQgb2YgcmFuZ2UuXG4gICAgICAgICAgICAvLyBEbyBub3Qgc2hvdyBub3RoaW5nLlxuXG4gICAgICAgICAgICBpZiAoY29sb3JBcnIgJiYgY29sb3JBcnJbM10gPT09IDApIHtcbiAgICAgICAgICAgICAgY29sb3JBcnJbM10gPSAwLjI7IC8vIFRPRE8gY29sb3IgaXMgc2V0IHRvIDAsIDAsIDAsIDAuIFNob3VsZCBzaG93IGNvcnJlY3QgUkdCQVxuXG4gICAgICAgICAgICAgIHN0eWxlID0genJVdGlsLmV4dGVuZCh6clV0aWwuZXh0ZW5kKHt9LCBzdHlsZSksIHtcbiAgICAgICAgICAgICAgICBmaWxsOiBzdHJpbmdpZnkoY29sb3JBcnIsICdyZ2JhJylcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBpdGVtR3JvdXAgPSB0aGlzLl9jcmVhdGVJdGVtKHNlcmllc01vZGVsLCBuYW1lLCBkYXRhSW5kZXgsIGxlZ2VuZEl0ZW1Nb2RlbCwgbGVnZW5kTW9kZWwsIGl0ZW1BbGlnbiwge30sIHN0eWxlLCBsZWdlbmRJY29uLCBzZWxlY3RNb2RlLCBhcGkpOyAvLyBGSVhNRTogY29uc2lkZXIgZGlmZmVyZW50IHNlcmllcyBoYXMgaXRlbXMgd2l0aCB0aGUgc2FtZSBuYW1lLlxuXG5cbiAgICAgICAgICAgIGl0ZW1Hcm91cC5vbignY2xpY2snLCBjdXJyeShkaXNwYXRjaFNlbGVjdEFjdGlvbiwgbnVsbCwgbmFtZSwgYXBpLCBleGNsdWRlU2VyaWVzSWQpKSAvLyBTaG91bGQgbm90IHNwZWNpZnkgdGhlIHNlcmllcyBuYW1lLCBjb25zaWRlciBsZWdlbmQgY29udHJvbHNcbiAgICAgICAgICAgIC8vIG1vcmUgdGhhbiBvbmUgcGllIHNlcmllcy5cbiAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgY3VycnkoZGlzcGF0Y2hIaWdobGlnaHRBY3Rpb24sIG51bGwsIG5hbWUsIGFwaSwgZXhjbHVkZVNlcmllc0lkKSkub24oJ21vdXNlb3V0JywgY3VycnkoZGlzcGF0Y2hEb3ducGxheUFjdGlvbiwgbnVsbCwgbmFtZSwgYXBpLCBleGNsdWRlU2VyaWVzSWQpKTtcbiAgICAgICAgICAgIGxlZ2VuZERyYXduTWFwLnNldChuYW1lLCB0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgfVxuXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBpZiAoIWxlZ2VuZERyYXduTWFwLmdldChuYW1lKSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihuYW1lICsgJyBzZXJpZXMgbm90IGV4aXN0cy4gTGVnZW5kIGRhdGEgc2hvdWxkIGJlIHNhbWUgd2l0aCBzZXJpZXMgbmFtZSBvciBkYXRhIG5hbWUuJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB0aGlzKTtcblxuICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgdGhpcy5fY3JlYXRlU2VsZWN0b3Ioc2VsZWN0b3IsIGxlZ2VuZE1vZGVsLCBhcGksIG9yaWVudCwgc2VsZWN0b3JQb3NpdGlvbik7XG4gICAgfVxuICB9O1xuXG4gIExlZ2VuZFZpZXcucHJvdG90eXBlLl9jcmVhdGVTZWxlY3RvciA9IGZ1bmN0aW9uIChzZWxlY3RvciwgbGVnZW5kTW9kZWwsIGFwaSwgb3JpZW50LCBzZWxlY3RvclBvc2l0aW9uKSB7XG4gICAgdmFyIHNlbGVjdG9yR3JvdXAgPSB0aGlzLmdldFNlbGVjdG9yR3JvdXAoKTtcbiAgICBlYWNoKHNlbGVjdG9yLCBmdW5jdGlvbiBjcmVhdGVTZWxlY3RvckJ1dHRvbihzZWxlY3Rvckl0ZW0pIHtcbiAgICAgIHZhciB0eXBlID0gc2VsZWN0b3JJdGVtLnR5cGU7XG4gICAgICB2YXIgbGFiZWxUZXh0ID0gbmV3IGdyYXBoaWMuVGV4dCh7XG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgeDogMCxcbiAgICAgICAgICB5OiAwLFxuICAgICAgICAgIGFsaWduOiAnY2VudGVyJyxcbiAgICAgICAgICB2ZXJ0aWNhbEFsaWduOiAnbWlkZGxlJ1xuICAgICAgICB9LFxuICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgYXBpLmRpc3BhdGNoQWN0aW9uKHtcbiAgICAgICAgICAgIHR5cGU6IHR5cGUgPT09ICdhbGwnID8gJ2xlZ2VuZEFsbFNlbGVjdCcgOiAnbGVnZW5kSW52ZXJzZVNlbGVjdCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBzZWxlY3Rvckdyb3VwLmFkZChsYWJlbFRleHQpO1xuICAgICAgdmFyIGxhYmVsTW9kZWwgPSBsZWdlbmRNb2RlbC5nZXRNb2RlbCgnc2VsZWN0b3JMYWJlbCcpO1xuICAgICAgdmFyIGVtcGhhc2lzTGFiZWxNb2RlbCA9IGxlZ2VuZE1vZGVsLmdldE1vZGVsKFsnZW1waGFzaXMnLCAnc2VsZWN0b3JMYWJlbCddKTtcbiAgICAgIHNldExhYmVsU3R5bGUobGFiZWxUZXh0LCB7XG4gICAgICAgIG5vcm1hbDogbGFiZWxNb2RlbCxcbiAgICAgICAgZW1waGFzaXM6IGVtcGhhc2lzTGFiZWxNb2RlbFxuICAgICAgfSwge1xuICAgICAgICBkZWZhdWx0VGV4dDogc2VsZWN0b3JJdGVtLnRpdGxlXG4gICAgICB9KTtcbiAgICAgIGVuYWJsZUhvdmVyRW1waGFzaXMobGFiZWxUZXh0KTtcbiAgICB9KTtcbiAgfTtcblxuICBMZWdlbmRWaWV3LnByb3RvdHlwZS5fY3JlYXRlSXRlbSA9IGZ1bmN0aW9uIChzZXJpZXNNb2RlbCwgbmFtZSwgZGF0YUluZGV4LCBsZWdlbmRJdGVtTW9kZWwsIGxlZ2VuZE1vZGVsLCBpdGVtQWxpZ24sIGxpbmVWaXN1YWxTdHlsZSwgaXRlbVZpc3VhbFN0eWxlLCBsZWdlbmRJY29uLCBzZWxlY3RNb2RlLCBhcGkpIHtcbiAgICB2YXIgZHJhd1R5cGUgPSBzZXJpZXNNb2RlbC52aXN1YWxEcmF3VHlwZTtcbiAgICB2YXIgaXRlbVdpZHRoID0gbGVnZW5kTW9kZWwuZ2V0KCdpdGVtV2lkdGgnKTtcbiAgICB2YXIgaXRlbUhlaWdodCA9IGxlZ2VuZE1vZGVsLmdldCgnaXRlbUhlaWdodCcpO1xuICAgIHZhciBpc1NlbGVjdGVkID0gbGVnZW5kTW9kZWwuaXNTZWxlY3RlZChuYW1lKTtcbiAgICB2YXIgaWNvblJvdGF0ZSA9IGxlZ2VuZEl0ZW1Nb2RlbC5nZXQoJ3N5bWJvbFJvdGF0ZScpO1xuICAgIHZhciBzeW1ib2xLZWVwQXNwZWN0ID0gbGVnZW5kSXRlbU1vZGVsLmdldCgnc3ltYm9sS2VlcEFzcGVjdCcpO1xuICAgIHZhciBsZWdlbmRJY29uVHlwZSA9IGxlZ2VuZEl0ZW1Nb2RlbC5nZXQoJ2ljb24nKTtcbiAgICBsZWdlbmRJY29uID0gbGVnZW5kSWNvblR5cGUgfHwgbGVnZW5kSWNvbiB8fCAncm91bmRSZWN0JztcbiAgICB2YXIgc3R5bGUgPSBnZXRMZWdlbmRTdHlsZShsZWdlbmRJY29uLCBsZWdlbmRJdGVtTW9kZWwsIGxpbmVWaXN1YWxTdHlsZSwgaXRlbVZpc3VhbFN0eWxlLCBkcmF3VHlwZSwgaXNTZWxlY3RlZCwgYXBpKTtcbiAgICB2YXIgaXRlbUdyb3VwID0gbmV3IEdyb3VwKCk7XG4gICAgdmFyIHRleHRTdHlsZU1vZGVsID0gbGVnZW5kSXRlbU1vZGVsLmdldE1vZGVsKCd0ZXh0U3R5bGUnKTtcblxuICAgIGlmICh6clV0aWwuaXNGdW5jdGlvbihzZXJpZXNNb2RlbC5nZXRMZWdlbmRJY29uKSAmJiAoIWxlZ2VuZEljb25UeXBlIHx8IGxlZ2VuZEljb25UeXBlID09PSAnaW5oZXJpdCcpKSB7XG4gICAgICAvLyBTZXJpZXMgaGFzIHNwZWNpZmljIHdheSB0byBkZWZpbmUgbGVnZW5kIGljb25cbiAgICAgIGl0ZW1Hcm91cC5hZGQoc2VyaWVzTW9kZWwuZ2V0TGVnZW5kSWNvbih7XG4gICAgICAgIGl0ZW1XaWR0aDogaXRlbVdpZHRoLFxuICAgICAgICBpdGVtSGVpZ2h0OiBpdGVtSGVpZ2h0LFxuICAgICAgICBpY29uOiBsZWdlbmRJY29uLFxuICAgICAgICBpY29uUm90YXRlOiBpY29uUm90YXRlLFxuICAgICAgICBpdGVtU3R5bGU6IHN0eWxlLml0ZW1TdHlsZSxcbiAgICAgICAgbGluZVN0eWxlOiBzdHlsZS5saW5lU3R5bGUsXG4gICAgICAgIHN5bWJvbEtlZXBBc3BlY3Q6IHN5bWJvbEtlZXBBc3BlY3RcbiAgICAgIH0pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVXNlIGRlZmF1bHQgbGVnZW5kIGljb24gcG9saWN5IGZvciBtb3N0IHNlcmllc1xuICAgICAgdmFyIHJvdGF0ZSA9IGxlZ2VuZEljb25UeXBlID09PSAnaW5oZXJpdCcgJiYgc2VyaWVzTW9kZWwuZ2V0RGF0YSgpLmdldFZpc3VhbCgnc3ltYm9sJykgPyBpY29uUm90YXRlID09PSAnaW5oZXJpdCcgPyBzZXJpZXNNb2RlbC5nZXREYXRhKCkuZ2V0VmlzdWFsKCdzeW1ib2xSb3RhdGUnKSA6IGljb25Sb3RhdGUgOiAwOyAvLyBObyByb3RhdGlvbiBmb3Igbm8gaWNvblxuXG4gICAgICBpdGVtR3JvdXAuYWRkKGdldERlZmF1bHRMZWdlbmRJY29uKHtcbiAgICAgICAgaXRlbVdpZHRoOiBpdGVtV2lkdGgsXG4gICAgICAgIGl0ZW1IZWlnaHQ6IGl0ZW1IZWlnaHQsXG4gICAgICAgIGljb246IGxlZ2VuZEljb24sXG4gICAgICAgIGljb25Sb3RhdGU6IHJvdGF0ZSxcbiAgICAgICAgaXRlbVN0eWxlOiBzdHlsZS5pdGVtU3R5bGUsXG4gICAgICAgIGxpbmVTdHlsZTogc3R5bGUubGluZVN0eWxlLFxuICAgICAgICBzeW1ib2xLZWVwQXNwZWN0OiBzeW1ib2xLZWVwQXNwZWN0XG4gICAgICB9KSk7XG4gICAgfVxuXG4gICAgdmFyIHRleHRYID0gaXRlbUFsaWduID09PSAnbGVmdCcgPyBpdGVtV2lkdGggKyA1IDogLTU7XG4gICAgdmFyIHRleHRBbGlnbiA9IGl0ZW1BbGlnbjtcbiAgICB2YXIgZm9ybWF0dGVyID0gbGVnZW5kTW9kZWwuZ2V0KCdmb3JtYXR0ZXInKTtcbiAgICB2YXIgY29udGVudCA9IG5hbWU7XG5cbiAgICBpZiAoenJVdGlsLmlzU3RyaW5nKGZvcm1hdHRlcikgJiYgZm9ybWF0dGVyKSB7XG4gICAgICBjb250ZW50ID0gZm9ybWF0dGVyLnJlcGxhY2UoJ3tuYW1lfScsIG5hbWUgIT0gbnVsbCA/IG5hbWUgOiAnJyk7XG4gICAgfSBlbHNlIGlmICh6clV0aWwuaXNGdW5jdGlvbihmb3JtYXR0ZXIpKSB7XG4gICAgICBjb250ZW50ID0gZm9ybWF0dGVyKG5hbWUpO1xuICAgIH1cblxuICAgIHZhciB0ZXh0Q29sb3IgPSBpc1NlbGVjdGVkID8gdGV4dFN0eWxlTW9kZWwuZ2V0VGV4dENvbG9yKCkgOiBsZWdlbmRJdGVtTW9kZWwuZ2V0KCdpbmFjdGl2ZUNvbG9yJyk7XG4gICAgaXRlbUdyb3VwLmFkZChuZXcgZ3JhcGhpYy5UZXh0KHtcbiAgICAgIHN0eWxlOiBjcmVhdGVUZXh0U3R5bGUodGV4dFN0eWxlTW9kZWwsIHtcbiAgICAgICAgdGV4dDogY29udGVudCxcbiAgICAgICAgeDogdGV4dFgsXG4gICAgICAgIHk6IGl0ZW1IZWlnaHQgLyAyLFxuICAgICAgICBmaWxsOiB0ZXh0Q29sb3IsXG4gICAgICAgIGFsaWduOiB0ZXh0QWxpZ24sXG4gICAgICAgIHZlcnRpY2FsQWxpZ246ICdtaWRkbGUnXG4gICAgICB9LCB7XG4gICAgICAgIGluaGVyaXRDb2xvcjogdGV4dENvbG9yXG4gICAgICB9KVxuICAgIH0pKTsgLy8gQWRkIGEgaW52aXNpYmxlIHJlY3QgdG8gaW5jcmVhc2UgdGhlIGFyZWEgb2YgbW91c2UgaG92ZXJcblxuICAgIHZhciBoaXRSZWN0ID0gbmV3IGdyYXBoaWMuUmVjdCh7XG4gICAgICBzaGFwZTogaXRlbUdyb3VwLmdldEJvdW5kaW5nUmVjdCgpLFxuICAgICAgaW52aXNpYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgdmFyIHRvb2x0aXBNb2RlbCA9IGxlZ2VuZEl0ZW1Nb2RlbC5nZXRNb2RlbCgndG9vbHRpcCcpO1xuXG4gICAgaWYgKHRvb2x0aXBNb2RlbC5nZXQoJ3Nob3cnKSkge1xuICAgICAgZ3JhcGhpYy5zZXRUb29sdGlwQ29uZmlnKHtcbiAgICAgICAgZWw6IGhpdFJlY3QsXG4gICAgICAgIGNvbXBvbmVudE1vZGVsOiBsZWdlbmRNb2RlbCxcbiAgICAgICAgaXRlbU5hbWU6IG5hbWUsXG4gICAgICAgIGl0ZW1Ub29sdGlwT3B0aW9uOiB0b29sdGlwTW9kZWwub3B0aW9uXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpdGVtR3JvdXAuYWRkKGhpdFJlY3QpO1xuICAgIGl0ZW1Hcm91cC5lYWNoQ2hpbGQoZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICBjaGlsZC5zaWxlbnQgPSB0cnVlO1xuICAgIH0pO1xuICAgIGhpdFJlY3Quc2lsZW50ID0gIXNlbGVjdE1vZGU7XG4gICAgdGhpcy5nZXRDb250ZW50R3JvdXAoKS5hZGQoaXRlbUdyb3VwKTtcbiAgICBlbmFibGVIb3ZlckVtcGhhc2lzKGl0ZW1Hcm91cCk7IC8vIEB0cy1pZ25vcmVcblxuICAgIGl0ZW1Hcm91cC5fX2xlZ2VuZERhdGFJbmRleCA9IGRhdGFJbmRleDtcbiAgICByZXR1cm4gaXRlbUdyb3VwO1xuICB9O1xuXG4gIExlZ2VuZFZpZXcucHJvdG90eXBlLmxheW91dElubmVyID0gZnVuY3Rpb24gKGxlZ2VuZE1vZGVsLCBpdGVtQWxpZ24sIG1heFNpemUsIGlzRmlyc3RSZW5kZXIsIHNlbGVjdG9yLCBzZWxlY3RvclBvc2l0aW9uKSB7XG4gICAgdmFyIGNvbnRlbnRHcm91cCA9IHRoaXMuZ2V0Q29udGVudEdyb3VwKCk7XG4gICAgdmFyIHNlbGVjdG9yR3JvdXAgPSB0aGlzLmdldFNlbGVjdG9yR3JvdXAoKTsgLy8gUGxhY2UgaXRlbXMgaW4gY29udGVudEdyb3VwLlxuXG4gICAgbGF5b3V0VXRpbC5ib3gobGVnZW5kTW9kZWwuZ2V0KCdvcmllbnQnKSwgY29udGVudEdyb3VwLCBsZWdlbmRNb2RlbC5nZXQoJ2l0ZW1HYXAnKSwgbWF4U2l6ZS53aWR0aCwgbWF4U2l6ZS5oZWlnaHQpO1xuICAgIHZhciBjb250ZW50UmVjdCA9IGNvbnRlbnRHcm91cC5nZXRCb3VuZGluZ1JlY3QoKTtcbiAgICB2YXIgY29udGVudFBvcyA9IFstY29udGVudFJlY3QueCwgLWNvbnRlbnRSZWN0LnldO1xuICAgIHNlbGVjdG9yR3JvdXAubWFya1JlZHJhdygpO1xuICAgIGNvbnRlbnRHcm91cC5tYXJrUmVkcmF3KCk7XG5cbiAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgIC8vIFBsYWNlIGJ1dHRvbnMgaW4gc2VsZWN0b3JHcm91cFxuICAgICAgbGF5b3V0VXRpbC5ib3goIC8vIEJ1dHRvbnMgaW4gc2VsZWN0b3JHcm91cCBhbHdheXMgbGF5b3V0IGhvcml6b250YWxseVxuICAgICAgJ2hvcml6b250YWwnLCBzZWxlY3Rvckdyb3VwLCBsZWdlbmRNb2RlbC5nZXQoJ3NlbGVjdG9ySXRlbUdhcCcsIHRydWUpKTtcbiAgICAgIHZhciBzZWxlY3RvclJlY3QgPSBzZWxlY3Rvckdyb3VwLmdldEJvdW5kaW5nUmVjdCgpO1xuICAgICAgdmFyIHNlbGVjdG9yUG9zID0gWy1zZWxlY3RvclJlY3QueCwgLXNlbGVjdG9yUmVjdC55XTtcbiAgICAgIHZhciBzZWxlY3RvckJ1dHRvbkdhcCA9IGxlZ2VuZE1vZGVsLmdldCgnc2VsZWN0b3JCdXR0b25HYXAnLCB0cnVlKTtcbiAgICAgIHZhciBvcmllbnRJZHggPSBsZWdlbmRNb2RlbC5nZXRPcmllbnQoKS5pbmRleDtcbiAgICAgIHZhciB3aCA9IG9yaWVudElkeCA9PT0gMCA/ICd3aWR0aCcgOiAnaGVpZ2h0JztcbiAgICAgIHZhciBodyA9IG9yaWVudElkeCA9PT0gMCA/ICdoZWlnaHQnIDogJ3dpZHRoJztcbiAgICAgIHZhciB5eCA9IG9yaWVudElkeCA9PT0gMCA/ICd5JyA6ICd4JztcblxuICAgICAgaWYgKHNlbGVjdG9yUG9zaXRpb24gPT09ICdlbmQnKSB7XG4gICAgICAgIHNlbGVjdG9yUG9zW29yaWVudElkeF0gKz0gY29udGVudFJlY3Rbd2hdICsgc2VsZWN0b3JCdXR0b25HYXA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50UG9zW29yaWVudElkeF0gKz0gc2VsZWN0b3JSZWN0W3doXSArIHNlbGVjdG9yQnV0dG9uR2FwO1xuICAgICAgfSAvLyBBbHdheXMgYWxpZ24gc2VsZWN0b3IgdG8gY29udGVudCBhcyAnbWlkZGxlJ1xuXG5cbiAgICAgIHNlbGVjdG9yUG9zWzEgLSBvcmllbnRJZHhdICs9IGNvbnRlbnRSZWN0W2h3XSAvIDIgLSBzZWxlY3RvclJlY3RbaHddIC8gMjtcbiAgICAgIHNlbGVjdG9yR3JvdXAueCA9IHNlbGVjdG9yUG9zWzBdO1xuICAgICAgc2VsZWN0b3JHcm91cC55ID0gc2VsZWN0b3JQb3NbMV07XG4gICAgICBjb250ZW50R3JvdXAueCA9IGNvbnRlbnRQb3NbMF07XG4gICAgICBjb250ZW50R3JvdXAueSA9IGNvbnRlbnRQb3NbMV07XG4gICAgICB2YXIgbWFpblJlY3QgPSB7XG4gICAgICAgIHg6IDAsXG4gICAgICAgIHk6IDBcbiAgICAgIH07XG4gICAgICBtYWluUmVjdFt3aF0gPSBjb250ZW50UmVjdFt3aF0gKyBzZWxlY3RvckJ1dHRvbkdhcCArIHNlbGVjdG9yUmVjdFt3aF07XG4gICAgICBtYWluUmVjdFtod10gPSBNYXRoLm1heChjb250ZW50UmVjdFtod10sIHNlbGVjdG9yUmVjdFtod10pO1xuICAgICAgbWFpblJlY3RbeXhdID0gTWF0aC5taW4oMCwgc2VsZWN0b3JSZWN0W3l4XSArIHNlbGVjdG9yUG9zWzEgLSBvcmllbnRJZHhdKTtcbiAgICAgIHJldHVybiBtYWluUmVjdDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGVudEdyb3VwLnggPSBjb250ZW50UG9zWzBdO1xuICAgICAgY29udGVudEdyb3VwLnkgPSBjb250ZW50UG9zWzFdO1xuICAgICAgcmV0dXJuIHRoaXMuZ3JvdXAuZ2V0Qm91bmRpbmdSZWN0KCk7XG4gICAgfVxuICB9O1xuICAvKipcclxuICAgKiBAcHJvdGVjdGVkXHJcbiAgICovXG5cblxuICBMZWdlbmRWaWV3LnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5nZXRDb250ZW50R3JvdXAoKS5yZW1vdmVBbGwoKTtcbiAgICB0aGlzLl9pc0ZpcnN0UmVuZGVyID0gdHJ1ZTtcbiAgfTtcblxuICBMZWdlbmRWaWV3LnR5cGUgPSAnbGVnZW5kLnBsYWluJztcbiAgcmV0dXJuIExlZ2VuZFZpZXc7XG59KENvbXBvbmVudFZpZXcpO1xuXG5mdW5jdGlvbiBnZXRMZWdlbmRTdHlsZShpY29uVHlwZSwgbGVnZW5kSXRlbU1vZGVsLCBsaW5lVmlzdWFsU3R5bGUsIGl0ZW1WaXN1YWxTdHlsZSwgZHJhd1R5cGUsIGlzU2VsZWN0ZWQsIGFwaSkge1xuICAvKipcclxuICAgKiBVc2Ugc2VyaWVzIHN0eWxlIGlmIGlzIGluaGVyaXQ7XHJcbiAgICogZWxzZXdpc2UsIHVzZSBsZWdlbmQgc3R5bGVcclxuICAgKi9cbiAgZnVuY3Rpb24gaGFuZGxlQ29tbW9uUHJvcHMoc3R5bGUsIHZpc3VhbFN0eWxlKSB7XG4gICAgLy8gSWYgbGluZVN0eWxlLndpZHRoIGlzICdhdXRvJywgaXQgaXMgc2V0IHRvIGJlIDIgaWYgc2VyaWVzIGhhcyBib3JkZXJcbiAgICBpZiAoc3R5bGUubGluZVdpZHRoID09PSAnYXV0bycpIHtcbiAgICAgIHN0eWxlLmxpbmVXaWR0aCA9IHZpc3VhbFN0eWxlLmxpbmVXaWR0aCA+IDAgPyAyIDogMDtcbiAgICB9XG5cbiAgICBlYWNoKHN0eWxlLCBmdW5jdGlvbiAocHJvcFZhbCwgcHJvcE5hbWUpIHtcbiAgICAgIHN0eWxlW3Byb3BOYW1lXSA9PT0gJ2luaGVyaXQnICYmIChzdHlsZVtwcm9wTmFtZV0gPSB2aXN1YWxTdHlsZVtwcm9wTmFtZV0pO1xuICAgIH0pO1xuICB9IC8vIGl0ZW1TdHlsZVxuXG5cbiAgdmFyIGl0ZW1TdHlsZU1vZGVsID0gbGVnZW5kSXRlbU1vZGVsLmdldE1vZGVsKCdpdGVtU3R5bGUnKTtcbiAgdmFyIGl0ZW1TdHlsZSA9IGl0ZW1TdHlsZU1vZGVsLmdldEl0ZW1TdHlsZSgpO1xuICB2YXIgaWNvbkJydXNoVHlwZSA9IGljb25UeXBlLmxhc3RJbmRleE9mKCdlbXB0eScsIDApID09PSAwID8gJ2ZpbGwnIDogJ3N0cm9rZSc7XG4gIHZhciBkZWNhbFN0eWxlID0gaXRlbVN0eWxlTW9kZWwuZ2V0U2hhbGxvdygnZGVjYWwnKTtcbiAgaXRlbVN0eWxlLmRlY2FsID0gIWRlY2FsU3R5bGUgfHwgZGVjYWxTdHlsZSA9PT0gJ2luaGVyaXQnID8gaXRlbVZpc3VhbFN0eWxlLmRlY2FsIDogY3JlYXRlT3JVcGRhdGVQYXR0ZXJuRnJvbURlY2FsKGRlY2FsU3R5bGUsIGFwaSk7XG5cbiAgaWYgKGl0ZW1TdHlsZS5maWxsID09PSAnaW5oZXJpdCcpIHtcbiAgICAvKipcclxuICAgICAqIFNlcmllcyB3aXRoIHZpc3VhbERyYXdUeXBlIGFzICdzdHJva2UnIHNob3VsZCBoYXZlXHJcbiAgICAgKiBzZXJpZXMgc3Ryb2tlIGFzIGxlZ2VuZCBmaWxsXHJcbiAgICAgKi9cbiAgICBpdGVtU3R5bGUuZmlsbCA9IGl0ZW1WaXN1YWxTdHlsZVtkcmF3VHlwZV07XG4gIH1cblxuICBpZiAoaXRlbVN0eWxlLnN0cm9rZSA9PT0gJ2luaGVyaXQnKSB7XG4gICAgLyoqXHJcbiAgICAgKiBpY29uIHR5cGUgd2l0aCBcImVtcHR5WFhYXCIgc2hvdWxkIHVzZSBmaWxsIGNvbG9yXHJcbiAgICAgKiBpbiB2aXN1YWwgc3R5bGVcclxuICAgICAqL1xuICAgIGl0ZW1TdHlsZS5zdHJva2UgPSBpdGVtVmlzdWFsU3R5bGVbaWNvbkJydXNoVHlwZV07XG4gIH1cblxuICBpZiAoaXRlbVN0eWxlLm9wYWNpdHkgPT09ICdpbmhlcml0Jykge1xuICAgIC8qKlxyXG4gICAgICogVXNlIGxpbmVTdHlsZS5vcGFjaXR5IGlmIGRyYXdUeXBlIGlzIHN0cm9rZVxyXG4gICAgICovXG4gICAgaXRlbVN0eWxlLm9wYWNpdHkgPSAoZHJhd1R5cGUgPT09ICdmaWxsJyA/IGl0ZW1WaXN1YWxTdHlsZSA6IGxpbmVWaXN1YWxTdHlsZSkub3BhY2l0eTtcbiAgfVxuXG4gIGhhbmRsZUNvbW1vblByb3BzKGl0ZW1TdHlsZSwgaXRlbVZpc3VhbFN0eWxlKTsgLy8gbGluZVN0eWxlXG5cbiAgdmFyIGxlZ2VuZExpbmVNb2RlbCA9IGxlZ2VuZEl0ZW1Nb2RlbC5nZXRNb2RlbCgnbGluZVN0eWxlJyk7XG4gIHZhciBsaW5lU3R5bGUgPSBsZWdlbmRMaW5lTW9kZWwuZ2V0TGluZVN0eWxlKCk7XG4gIGhhbmRsZUNvbW1vblByb3BzKGxpbmVTdHlsZSwgbGluZVZpc3VhbFN0eWxlKTsgLy8gRml4IGF1dG8gY29sb3IgdG8gcmVhbCBjb2xvclxuXG4gIGl0ZW1TdHlsZS5maWxsID09PSAnYXV0bycgJiYgKGl0ZW1TdHlsZS5maWxsID0gaXRlbVZpc3VhbFN0eWxlLmZpbGwpO1xuICBpdGVtU3R5bGUuc3Ryb2tlID09PSAnYXV0bycgJiYgKGl0ZW1TdHlsZS5zdHJva2UgPSBpdGVtVmlzdWFsU3R5bGUuZmlsbCk7XG4gIGxpbmVTdHlsZS5zdHJva2UgPT09ICdhdXRvJyAmJiAobGluZVN0eWxlLnN0cm9rZSA9IGl0ZW1WaXN1YWxTdHlsZS5maWxsKTtcblxuICBpZiAoIWlzU2VsZWN0ZWQpIHtcbiAgICB2YXIgYm9yZGVyV2lkdGggPSBsZWdlbmRJdGVtTW9kZWwuZ2V0KCdpbmFjdGl2ZUJvcmRlcldpZHRoJyk7XG4gICAgLyoqXHJcbiAgICAgKiBTaW5jZSBzdHJva2UgaXMgc2V0IHRvIGJlIGluYWN0aXZlQm9yZGVyQ29sb3IsIGl0IG1heSBvY2N1ciB0aGF0XHJcbiAgICAgKiB0aGVyZSBpcyBubyBib3JkZXIgaW4gc2VyaWVzIGJ1dCBib3JkZXIgaW4gbGVnZW5kLCBzbyB3ZSBuZWVkIHRvXHJcbiAgICAgKiB1c2UgYm9yZGVyIG9ubHkgd2hlbiBzZXJpZXMgaGFzIGJvcmRlciBpZiBpcyBzZXQgdG8gYmUgYXV0b1xyXG4gICAgICovXG5cbiAgICB2YXIgdmlzdWFsSGFzQm9yZGVyID0gaXRlbVN0eWxlW2ljb25CcnVzaFR5cGVdO1xuICAgIGl0ZW1TdHlsZS5saW5lV2lkdGggPSBib3JkZXJXaWR0aCA9PT0gJ2F1dG8nID8gaXRlbVZpc3VhbFN0eWxlLmxpbmVXaWR0aCA+IDAgJiYgdmlzdWFsSGFzQm9yZGVyID8gMiA6IDAgOiBpdGVtU3R5bGUubGluZVdpZHRoO1xuICAgIGl0ZW1TdHlsZS5maWxsID0gbGVnZW5kSXRlbU1vZGVsLmdldCgnaW5hY3RpdmVDb2xvcicpO1xuICAgIGl0ZW1TdHlsZS5zdHJva2UgPSBsZWdlbmRJdGVtTW9kZWwuZ2V0KCdpbmFjdGl2ZUJvcmRlckNvbG9yJyk7XG4gICAgbGluZVN0eWxlLnN0cm9rZSA9IGxlZ2VuZExpbmVNb2RlbC5nZXQoJ2luYWN0aXZlQ29sb3InKTtcbiAgICBsaW5lU3R5bGUubGluZVdpZHRoID0gbGVnZW5kTGluZU1vZGVsLmdldCgnaW5hY3RpdmVXaWR0aCcpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpdGVtU3R5bGU6IGl0ZW1TdHlsZSxcbiAgICBsaW5lU3R5bGU6IGxpbmVTdHlsZVxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXREZWZhdWx0TGVnZW5kSWNvbihvcHQpIHtcbiAgdmFyIHN5bWJvVHlwZSA9IG9wdC5pY29uIHx8ICdyb3VuZFJlY3QnO1xuICB2YXIgaWNvbiA9IGNyZWF0ZVN5bWJvbChzeW1ib1R5cGUsIDAsIDAsIG9wdC5pdGVtV2lkdGgsIG9wdC5pdGVtSGVpZ2h0LCBvcHQuaXRlbVN0eWxlLmZpbGwsIG9wdC5zeW1ib2xLZWVwQXNwZWN0KTtcbiAgaWNvbi5zZXRTdHlsZShvcHQuaXRlbVN0eWxlKTtcbiAgaWNvbi5yb3RhdGlvbiA9IChvcHQuaWNvblJvdGF0ZSB8fCAwKSAqIE1hdGguUEkgLyAxODA7XG4gIGljb24uc2V0T3JpZ2luKFtvcHQuaXRlbVdpZHRoIC8gMiwgb3B0Lml0ZW1IZWlnaHQgLyAyXSk7XG5cbiAgaWYgKHN5bWJvVHlwZS5pbmRleE9mKCdlbXB0eScpID4gLTEpIHtcbiAgICBpY29uLnN0eWxlLnN0cm9rZSA9IGljb24uc3R5bGUuZmlsbDtcbiAgICBpY29uLnN0eWxlLmZpbGwgPSAnI2ZmZic7XG4gICAgaWNvbi5zdHlsZS5saW5lV2lkdGggPSAyO1xuICB9XG5cbiAgcmV0dXJuIGljb247XG59XG5cbmZ1bmN0aW9uIGRpc3BhdGNoU2VsZWN0QWN0aW9uKHNlcmllc05hbWUsIGRhdGFOYW1lLCBhcGksIGV4Y2x1ZGVTZXJpZXNJZCkge1xuICAvLyBkb3ducGxheSBiZWZvcmUgdW5zZWxlY3RcbiAgZGlzcGF0Y2hEb3ducGxheUFjdGlvbihzZXJpZXNOYW1lLCBkYXRhTmFtZSwgYXBpLCBleGNsdWRlU2VyaWVzSWQpO1xuICBhcGkuZGlzcGF0Y2hBY3Rpb24oe1xuICAgIHR5cGU6ICdsZWdlbmRUb2dnbGVTZWxlY3QnLFxuICAgIG5hbWU6IHNlcmllc05hbWUgIT0gbnVsbCA/IHNlcmllc05hbWUgOiBkYXRhTmFtZVxuICB9KTsgLy8gaGlnaGxpZ2h0IGFmdGVyIHNlbGVjdFxuICAvLyBUT0RPIGhpZ2hsaWdodCBpbW1lZGlhdGVseSBtYXkgY2F1c2UgYW5pbWF0aW9uIGxvc3MuXG5cbiAgZGlzcGF0Y2hIaWdobGlnaHRBY3Rpb24oc2VyaWVzTmFtZSwgZGF0YU5hbWUsIGFwaSwgZXhjbHVkZVNlcmllc0lkKTtcbn1cblxuZnVuY3Rpb24gaXNVc2VIb3ZlckxheWVyKGFwaSkge1xuICB2YXIgbGlzdCA9IGFwaS5nZXRacigpLnN0b3JhZ2UuZ2V0RGlzcGxheUxpc3QoKTtcbiAgdmFyIGVtcGhhc2lzU3RhdGU7XG4gIHZhciBpID0gMDtcbiAgdmFyIGxlbiA9IGxpc3QubGVuZ3RoO1xuXG4gIHdoaWxlIChpIDwgbGVuICYmICEoZW1waGFzaXNTdGF0ZSA9IGxpc3RbaV0uc3RhdGVzLmVtcGhhc2lzKSkge1xuICAgIGkrKztcbiAgfVxuXG4gIHJldHVybiBlbXBoYXNpc1N0YXRlICYmIGVtcGhhc2lzU3RhdGUuaG92ZXJMYXllcjtcbn1cblxuZnVuY3Rpb24gZGlzcGF0Y2hIaWdobGlnaHRBY3Rpb24oc2VyaWVzTmFtZSwgZGF0YU5hbWUsIGFwaSwgZXhjbHVkZVNlcmllc0lkKSB7XG4gIC8vIElmIGVsZW1lbnQgaG92ZXIgd2lsbCBtb3ZlIHRvIGEgaG92ZXJMYXllci5cbiAgaWYgKCFpc1VzZUhvdmVyTGF5ZXIoYXBpKSkge1xuICAgIGFwaS5kaXNwYXRjaEFjdGlvbih7XG4gICAgICB0eXBlOiAnaGlnaGxpZ2h0JyxcbiAgICAgIHNlcmllc05hbWU6IHNlcmllc05hbWUsXG4gICAgICBuYW1lOiBkYXRhTmFtZSxcbiAgICAgIGV4Y2x1ZGVTZXJpZXNJZDogZXhjbHVkZVNlcmllc0lkXG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGlzcGF0Y2hEb3ducGxheUFjdGlvbihzZXJpZXNOYW1lLCBkYXRhTmFtZSwgYXBpLCBleGNsdWRlU2VyaWVzSWQpIHtcbiAgLy8gSWYgZWxlbWVudCBob3ZlciB3aWxsIG1vdmUgdG8gYSBob3ZlckxheWVyLlxuICBpZiAoIWlzVXNlSG92ZXJMYXllcihhcGkpKSB7XG4gICAgYXBpLmRpc3BhdGNoQWN0aW9uKHtcbiAgICAgIHR5cGU6ICdkb3ducGxheScsXG4gICAgICBzZXJpZXNOYW1lOiBzZXJpZXNOYW1lLFxuICAgICAgbmFtZTogZGF0YU5hbWUsXG4gICAgICBleGNsdWRlU2VyaWVzSWQ6IGV4Y2x1ZGVTZXJpZXNJZFxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IExlZ2VuZFZpZXc7IiwiXG4vKlxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuKiB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cblxuLyoqXG4gKiBBVVRPLUdFTkVSQVRFRCBGSUxFLiBETyBOT1QgTU9ESUZZLlxuICovXG5cbi8qXHJcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxyXG4qIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxyXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxyXG4qIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcclxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcclxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxyXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXHJcbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcclxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXHJcbiogdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBsZWdlbmRGaWx0ZXIoZWNNb2RlbCkge1xuICB2YXIgbGVnZW5kTW9kZWxzID0gZWNNb2RlbC5maW5kQ29tcG9uZW50cyh7XG4gICAgbWFpblR5cGU6ICdsZWdlbmQnXG4gIH0pO1xuXG4gIGlmIChsZWdlbmRNb2RlbHMgJiYgbGVnZW5kTW9kZWxzLmxlbmd0aCkge1xuICAgIGVjTW9kZWwuZmlsdGVyU2VyaWVzKGZ1bmN0aW9uIChzZXJpZXMpIHtcbiAgICAgIC8vIElmIGluIGFueSBsZWdlbmQgY29tcG9uZW50IHRoZSBzdGF0dXMgaXMgbm90IHNlbGVjdGVkLlxuICAgICAgLy8gQmVjYXVzZSBpbiBsZWdlbmQgc2VyaWVzIGlzIGFzc3VtZWQgc2VsZWN0ZWQgd2hlbiBpdCBpcyBub3QgaW4gdGhlIGxlZ2VuZCBkYXRhLlxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZWdlbmRNb2RlbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCFsZWdlbmRNb2RlbHNbaV0uaXNTZWxlY3RlZChzZXJpZXMubmFtZSkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG4gIH1cbn0iLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbi8vIEB0cy1ub2NoZWNrXG5pbXBvcnQgeyBjdXJyeSwgZWFjaCB9IGZyb20gJ3pyZW5kZXIvbGliL2NvcmUvdXRpbC5qcyc7XG5cbmZ1bmN0aW9uIGxlZ2VuZFNlbGVjdEFjdGlvbkhhbmRsZXIobWV0aG9kTmFtZSwgcGF5bG9hZCwgZWNNb2RlbCkge1xuICB2YXIgc2VsZWN0ZWRNYXAgPSB7fTtcbiAgdmFyIGlzVG9nZ2xlU2VsZWN0ID0gbWV0aG9kTmFtZSA9PT0gJ3RvZ2dsZVNlbGVjdGVkJztcbiAgdmFyIGlzU2VsZWN0ZWQ7IC8vIFVwZGF0ZSBhbGwgbGVnZW5kIGNvbXBvbmVudHNcblxuICBlY01vZGVsLmVhY2hDb21wb25lbnQoJ2xlZ2VuZCcsIGZ1bmN0aW9uIChsZWdlbmRNb2RlbCkge1xuICAgIGlmIChpc1RvZ2dsZVNlbGVjdCAmJiBpc1NlbGVjdGVkICE9IG51bGwpIHtcbiAgICAgIC8vIEZvcmNlIG90aGVyIGxlZ2VuZCBoYXMgc2FtZSBzZWxlY3RlZCBzdGF0dXNcbiAgICAgIC8vIE9yIHRoZSBmaXJzdCBpcyB0b2dnbGVkIHRvIHRydWUgYW5kIG90aGVyIGFyZSB0b2dnbGVkIHRvIGZhbHNlXG4gICAgICAvLyBJbiB0aGUgY2FzZSBvbmUgbGVnZW5kIGhhcyBzb21lIGl0ZW0gdW5TZWxlY3RlZCBpbiBvcHRpb24uIEFuZCBpZiBvdGhlciBsZWdlbmRcbiAgICAgIC8vIGRvZXNuJ3QgaGFzIHRoZSBpdGVtLCB0aGV5IHdpbGwgYXNzdW1lIGl0IGlzIHNlbGVjdGVkLlxuICAgICAgbGVnZW5kTW9kZWxbaXNTZWxlY3RlZCA/ICdzZWxlY3QnIDogJ3VuU2VsZWN0J10ocGF5bG9hZC5uYW1lKTtcbiAgICB9IGVsc2UgaWYgKG1ldGhvZE5hbWUgPT09ICdhbGxTZWxlY3QnIHx8IG1ldGhvZE5hbWUgPT09ICdpbnZlcnNlU2VsZWN0Jykge1xuICAgICAgbGVnZW5kTW9kZWxbbWV0aG9kTmFtZV0oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGVnZW5kTW9kZWxbbWV0aG9kTmFtZV0ocGF5bG9hZC5uYW1lKTtcbiAgICAgIGlzU2VsZWN0ZWQgPSBsZWdlbmRNb2RlbC5pc1NlbGVjdGVkKHBheWxvYWQubmFtZSk7XG4gICAgfVxuXG4gICAgdmFyIGxlZ2VuZERhdGEgPSBsZWdlbmRNb2RlbC5nZXREYXRhKCk7XG4gICAgZWFjaChsZWdlbmREYXRhLCBmdW5jdGlvbiAobW9kZWwpIHtcbiAgICAgIHZhciBuYW1lID0gbW9kZWwuZ2V0KCduYW1lJyk7IC8vIFdyYXAgZWxlbWVudFxuXG4gICAgICBpZiAobmFtZSA9PT0gJ1xcbicgfHwgbmFtZSA9PT0gJycpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgaXNJdGVtU2VsZWN0ZWQgPSBsZWdlbmRNb2RlbC5pc1NlbGVjdGVkKG5hbWUpO1xuXG4gICAgICBpZiAoc2VsZWN0ZWRNYXAuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgLy8gVW5zZWxlY3RlZCBpZiBhbnkgbGVnZW5kIGlzIHVuc2VsZWN0ZWRcbiAgICAgICAgc2VsZWN0ZWRNYXBbbmFtZV0gPSBzZWxlY3RlZE1hcFtuYW1lXSAmJiBpc0l0ZW1TZWxlY3RlZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGVjdGVkTWFwW25hbWVdID0gaXNJdGVtU2VsZWN0ZWQ7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pOyAvLyBSZXR1cm4gdGhlIGV2ZW50IGV4cGxpY2l0bHlcblxuICByZXR1cm4gbWV0aG9kTmFtZSA9PT0gJ2FsbFNlbGVjdCcgfHwgbWV0aG9kTmFtZSA9PT0gJ2ludmVyc2VTZWxlY3QnID8ge1xuICAgIHNlbGVjdGVkOiBzZWxlY3RlZE1hcFxuICB9IDoge1xuICAgIG5hbWU6IHBheWxvYWQubmFtZSxcbiAgICBzZWxlY3RlZDogc2VsZWN0ZWRNYXBcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGxMZWdlbmRBY3Rpb24ocmVnaXN0ZXJzKSB7XG4gIC8qKlxyXG4gICAqIEBldmVudCBsZWdlbmRUb2dnbGVTZWxlY3RcclxuICAgKiBAdHlwZSB7T2JqZWN0fVxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlICdsZWdlbmRUb2dnbGVTZWxlY3QnXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtmcm9tXVxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBuYW1lIFNlcmllcyBuYW1lIG9yIGRhdGEgaXRlbSBuYW1lXHJcbiAgICovXG4gIHJlZ2lzdGVycy5yZWdpc3RlckFjdGlvbignbGVnZW5kVG9nZ2xlU2VsZWN0JywgJ2xlZ2VuZHNlbGVjdGNoYW5nZWQnLCBjdXJyeShsZWdlbmRTZWxlY3RBY3Rpb25IYW5kbGVyLCAndG9nZ2xlU2VsZWN0ZWQnKSk7XG4gIHJlZ2lzdGVycy5yZWdpc3RlckFjdGlvbignbGVnZW5kQWxsU2VsZWN0JywgJ2xlZ2VuZHNlbGVjdGFsbCcsIGN1cnJ5KGxlZ2VuZFNlbGVjdEFjdGlvbkhhbmRsZXIsICdhbGxTZWxlY3QnKSk7XG4gIHJlZ2lzdGVycy5yZWdpc3RlckFjdGlvbignbGVnZW5kSW52ZXJzZVNlbGVjdCcsICdsZWdlbmRpbnZlcnNlc2VsZWN0JywgY3VycnkobGVnZW5kU2VsZWN0QWN0aW9uSGFuZGxlciwgJ2ludmVyc2VTZWxlY3QnKSk7XG4gIC8qKlxyXG4gICAqIEBldmVudCBsZWdlbmRTZWxlY3RcclxuICAgKiBAdHlwZSB7T2JqZWN0fVxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlICdsZWdlbmRTZWxlY3QnXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IG5hbWUgU2VyaWVzIG5hbWUgb3IgZGF0YSBpdGVtIG5hbWVcclxuICAgKi9cblxuICByZWdpc3RlcnMucmVnaXN0ZXJBY3Rpb24oJ2xlZ2VuZFNlbGVjdCcsICdsZWdlbmRzZWxlY3RlZCcsIGN1cnJ5KGxlZ2VuZFNlbGVjdEFjdGlvbkhhbmRsZXIsICdzZWxlY3QnKSk7XG4gIC8qKlxyXG4gICAqIEBldmVudCBsZWdlbmRVblNlbGVjdFxyXG4gICAqIEB0eXBlIHtPYmplY3R9XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IHR5cGUgJ2xlZ2VuZFVuU2VsZWN0J1xyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBuYW1lIFNlcmllcyBuYW1lIG9yIGRhdGEgaXRlbSBuYW1lXHJcbiAgICovXG5cbiAgcmVnaXN0ZXJzLnJlZ2lzdGVyQWN0aW9uKCdsZWdlbmRVblNlbGVjdCcsICdsZWdlbmR1bnNlbGVjdGVkJywgY3VycnkobGVnZW5kU2VsZWN0QWN0aW9uSGFuZGxlciwgJ3VuU2VsZWN0JykpO1xufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IExlZ2VuZE1vZGVsIGZyb20gJy4vTGVnZW5kTW9kZWwuanMnO1xuaW1wb3J0IExlZ2VuZFZpZXcgZnJvbSAnLi9MZWdlbmRWaWV3LmpzJztcbmltcG9ydCBsZWdlbmRGaWx0ZXIgZnJvbSAnLi9sZWdlbmRGaWx0ZXIuanMnO1xuaW1wb3J0IHsgaW5zdGFsbExlZ2VuZEFjdGlvbiB9IGZyb20gJy4vbGVnZW5kQWN0aW9uLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsKHJlZ2lzdGVycykge1xuICByZWdpc3RlcnMucmVnaXN0ZXJDb21wb25lbnRNb2RlbChMZWdlbmRNb2RlbCk7XG4gIHJlZ2lzdGVycy5yZWdpc3RlckNvbXBvbmVudFZpZXcoTGVnZW5kVmlldyk7XG4gIHJlZ2lzdGVycy5yZWdpc3RlclByb2Nlc3NvcihyZWdpc3RlcnMuUFJJT1JJVFkuUFJPQ0VTU09SLlNFUklFU19GSUxURVIsIGxlZ2VuZEZpbHRlcik7XG4gIHJlZ2lzdGVycy5yZWdpc3RlclN1YlR5cGVEZWZhdWx0ZXIoJ2xlZ2VuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJ3BsYWluJztcbiAgfSk7XG4gIGluc3RhbGxMZWdlbmRBY3Rpb24ocmVnaXN0ZXJzKTtcbn0iLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IExlZ2VuZE1vZGVsIGZyb20gJy4vTGVnZW5kTW9kZWwuanMnO1xuaW1wb3J0IHsgbWVyZ2VMYXlvdXRQYXJhbSwgZ2V0TGF5b3V0UGFyYW1zIH0gZnJvbSAnLi4vLi4vdXRpbC9sYXlvdXQuanMnO1xuaW1wb3J0IHsgaW5oZXJpdERlZmF1bHRPcHRpb24gfSBmcm9tICcuLi8uLi91dGlsL2NvbXBvbmVudC5qcyc7XG5cbnZhciBTY3JvbGxhYmxlTGVnZW5kTW9kZWwgPVxuLyoqIEBjbGFzcyAqL1xuZnVuY3Rpb24gKF9zdXBlcikge1xuICBfX2V4dGVuZHMoU2Nyb2xsYWJsZUxlZ2VuZE1vZGVsLCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIFNjcm9sbGFibGVMZWdlbmRNb2RlbCgpIHtcbiAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcblxuICAgIF90aGlzLnR5cGUgPSBTY3JvbGxhYmxlTGVnZW5kTW9kZWwudHlwZTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgLyoqXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNjcm9sbERhdGFJbmRleFxyXG4gICAqL1xuXG5cbiAgU2Nyb2xsYWJsZUxlZ2VuZE1vZGVsLnByb3RvdHlwZS5zZXRTY3JvbGxEYXRhSW5kZXggPSBmdW5jdGlvbiAoc2Nyb2xsRGF0YUluZGV4KSB7XG4gICAgdGhpcy5vcHRpb24uc2Nyb2xsRGF0YUluZGV4ID0gc2Nyb2xsRGF0YUluZGV4O1xuICB9O1xuXG4gIFNjcm9sbGFibGVMZWdlbmRNb2RlbC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIChvcHRpb24sIHBhcmVudE1vZGVsLCBlY01vZGVsKSB7XG4gICAgdmFyIGlucHV0UG9zaXRpb25QYXJhbXMgPSBnZXRMYXlvdXRQYXJhbXMob3B0aW9uKTtcblxuICAgIF9zdXBlci5wcm90b3R5cGUuaW5pdC5jYWxsKHRoaXMsIG9wdGlvbiwgcGFyZW50TW9kZWwsIGVjTW9kZWwpO1xuXG4gICAgbWVyZ2VBbmROb3JtYWxpemVMYXlvdXRQYXJhbXModGhpcywgb3B0aW9uLCBpbnB1dFBvc2l0aW9uUGFyYW1zKTtcbiAgfTtcbiAgLyoqXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICovXG5cblxuICBTY3JvbGxhYmxlTGVnZW5kTW9kZWwucHJvdG90eXBlLm1lcmdlT3B0aW9uID0gZnVuY3Rpb24gKG9wdGlvbiwgZWNNb2RlbCkge1xuICAgIF9zdXBlci5wcm90b3R5cGUubWVyZ2VPcHRpb24uY2FsbCh0aGlzLCBvcHRpb24sIGVjTW9kZWwpO1xuXG4gICAgbWVyZ2VBbmROb3JtYWxpemVMYXlvdXRQYXJhbXModGhpcywgdGhpcy5vcHRpb24sIG9wdGlvbik7XG4gIH07XG5cbiAgU2Nyb2xsYWJsZUxlZ2VuZE1vZGVsLnR5cGUgPSAnbGVnZW5kLnNjcm9sbCc7XG4gIFNjcm9sbGFibGVMZWdlbmRNb2RlbC5kZWZhdWx0T3B0aW9uID0gaW5oZXJpdERlZmF1bHRPcHRpb24oTGVnZW5kTW9kZWwuZGVmYXVsdE9wdGlvbiwge1xuICAgIHNjcm9sbERhdGFJbmRleDogMCxcbiAgICBwYWdlQnV0dG9uSXRlbUdhcDogNSxcbiAgICBwYWdlQnV0dG9uR2FwOiBudWxsLFxuICAgIHBhZ2VCdXR0b25Qb3NpdGlvbjogJ2VuZCcsXG4gICAgcGFnZUZvcm1hdHRlcjogJ3tjdXJyZW50fS97dG90YWx9JyxcbiAgICBwYWdlSWNvbnM6IHtcbiAgICAgIGhvcml6b250YWw6IFsnTTAsMEwxMiwtMTBMMTIsMTB6JywgJ00wLDBMLTEyLC0xMEwtMTIsMTB6J10sXG4gICAgICB2ZXJ0aWNhbDogWydNMCwwTDIwLDBMMTAsLTIweicsICdNMCwwTDIwLDBMMTAsMjB6J11cbiAgICB9LFxuICAgIHBhZ2VJY29uQ29sb3I6ICcjMmY0NTU0JyxcbiAgICBwYWdlSWNvbkluYWN0aXZlQ29sb3I6ICcjYWFhJyxcbiAgICBwYWdlSWNvblNpemU6IDE1LFxuICAgIHBhZ2VUZXh0U3R5bGU6IHtcbiAgICAgIGNvbG9yOiAnIzMzMydcbiAgICB9LFxuICAgIGFuaW1hdGlvbkR1cmF0aW9uVXBkYXRlOiA4MDBcbiAgfSk7XG4gIHJldHVybiBTY3JvbGxhYmxlTGVnZW5kTW9kZWw7XG59KExlZ2VuZE1vZGVsKTtcblxuOyAvLyBEbyBub3QgYGlnbm9yZVNpemVgIHRvIGVuYWJsZSBzZXR0aW5nIHtsZWZ0OiAxMCwgcmlnaHQ6IDEwfS5cblxuZnVuY3Rpb24gbWVyZ2VBbmROb3JtYWxpemVMYXlvdXRQYXJhbXMobGVnZW5kTW9kZWwsIHRhcmdldCwgcmF3KSB7XG4gIHZhciBvcmllbnQgPSBsZWdlbmRNb2RlbC5nZXRPcmllbnQoKTtcbiAgdmFyIGlnbm9yZVNpemUgPSBbMSwgMV07XG4gIGlnbm9yZVNpemVbb3JpZW50LmluZGV4XSA9IDA7XG4gIG1lcmdlTGF5b3V0UGFyYW0odGFyZ2V0LCByYXcsIHtcbiAgICB0eXBlOiAnYm94JyxcbiAgICBpZ25vcmVTaXplOiAhIWlnbm9yZVNpemVcbiAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNjcm9sbGFibGVMZWdlbmRNb2RlbDsiLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuLyoqXHJcbiAqIFNlcGFyYXRlIGxlZ2VuZCBhbmQgc2Nyb2xsYWJsZSBsZWdlbmQgdG8gcmVkdWNlIHBhY2thZ2Ugc2l6ZS5cclxuICovXG5cbmltcG9ydCAqIGFzIHpyVXRpbCBmcm9tICd6cmVuZGVyL2xpYi9jb3JlL3V0aWwuanMnO1xuaW1wb3J0ICogYXMgZ3JhcGhpYyBmcm9tICcuLi8uLi91dGlsL2dyYXBoaWMuanMnO1xuaW1wb3J0ICogYXMgbGF5b3V0VXRpbCBmcm9tICcuLi8uLi91dGlsL2xheW91dC5qcyc7XG5pbXBvcnQgTGVnZW5kVmlldyBmcm9tICcuL0xlZ2VuZFZpZXcuanMnO1xudmFyIEdyb3VwID0gZ3JhcGhpYy5Hcm91cDtcbnZhciBXSCA9IFsnd2lkdGgnLCAnaGVpZ2h0J107XG52YXIgWFkgPSBbJ3gnLCAneSddO1xuXG52YXIgU2Nyb2xsYWJsZUxlZ2VuZFZpZXcgPVxuLyoqIEBjbGFzcyAqL1xuZnVuY3Rpb24gKF9zdXBlcikge1xuICBfX2V4dGVuZHMoU2Nyb2xsYWJsZUxlZ2VuZFZpZXcsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gU2Nyb2xsYWJsZUxlZ2VuZFZpZXcoKSB7XG4gICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG5cbiAgICBfdGhpcy50eXBlID0gU2Nyb2xsYWJsZUxlZ2VuZFZpZXcudHlwZTtcbiAgICBfdGhpcy5uZXdsaW5lRGlzYWJsZWQgPSB0cnVlO1xuICAgIF90aGlzLl9jdXJyZW50SW5kZXggPSAwO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIFNjcm9sbGFibGVMZWdlbmRWaWV3LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIF9zdXBlci5wcm90b3R5cGUuaW5pdC5jYWxsKHRoaXMpO1xuXG4gICAgdGhpcy5ncm91cC5hZGQodGhpcy5fY29udGFpbmVyR3JvdXAgPSBuZXcgR3JvdXAoKSk7XG5cbiAgICB0aGlzLl9jb250YWluZXJHcm91cC5hZGQodGhpcy5nZXRDb250ZW50R3JvdXAoKSk7XG5cbiAgICB0aGlzLmdyb3VwLmFkZCh0aGlzLl9jb250cm9sbGVyR3JvdXAgPSBuZXcgR3JvdXAoKSk7XG4gIH07XG4gIC8qKlxyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqL1xuXG5cbiAgU2Nyb2xsYWJsZUxlZ2VuZFZpZXcucHJvdG90eXBlLnJlc2V0SW5uZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgX3N1cGVyLnByb3RvdHlwZS5yZXNldElubmVyLmNhbGwodGhpcyk7XG5cbiAgICB0aGlzLl9jb250cm9sbGVyR3JvdXAucmVtb3ZlQWxsKCk7XG5cbiAgICB0aGlzLl9jb250YWluZXJHcm91cC5yZW1vdmVDbGlwUGF0aCgpO1xuXG4gICAgdGhpcy5fY29udGFpbmVyR3JvdXAuX19yZWN0U2l6ZSA9IG51bGw7XG4gIH07XG4gIC8qKlxyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqL1xuXG5cbiAgU2Nyb2xsYWJsZUxlZ2VuZFZpZXcucHJvdG90eXBlLnJlbmRlcklubmVyID0gZnVuY3Rpb24gKGl0ZW1BbGlnbiwgbGVnZW5kTW9kZWwsIGVjTW9kZWwsIGFwaSwgc2VsZWN0b3IsIG9yaWVudCwgc2VsZWN0b3JQb3NpdGlvbikge1xuICAgIHZhciBzZWxmID0gdGhpczsgLy8gUmVuZGVyIGNvbnRlbnQgaXRlbXMuXG5cbiAgICBfc3VwZXIucHJvdG90eXBlLnJlbmRlcklubmVyLmNhbGwodGhpcywgaXRlbUFsaWduLCBsZWdlbmRNb2RlbCwgZWNNb2RlbCwgYXBpLCBzZWxlY3Rvciwgb3JpZW50LCBzZWxlY3RvclBvc2l0aW9uKTtcblxuICAgIHZhciBjb250cm9sbGVyR3JvdXAgPSB0aGlzLl9jb250cm9sbGVyR3JvdXA7IC8vIEZJWE1FOiBzdXBwb3J0IGJlICdhdXRvJyBhZGFwdCB0byBzaXplIG51bWJlciB0ZXh0IGxlbmd0aCxcbiAgICAvLyBlLmcuLCAnMy8xMjM0NScgc2hvdWxkIG5vdCBvdmVybGFwIHdpdGggdGhlIGNvbnRyb2wgYXJyb3cgYnV0dG9uLlxuXG4gICAgdmFyIHBhZ2VJY29uU2l6ZSA9IGxlZ2VuZE1vZGVsLmdldCgncGFnZUljb25TaXplJywgdHJ1ZSk7XG4gICAgdmFyIHBhZ2VJY29uU2l6ZUFyciA9IHpyVXRpbC5pc0FycmF5KHBhZ2VJY29uU2l6ZSkgPyBwYWdlSWNvblNpemUgOiBbcGFnZUljb25TaXplLCBwYWdlSWNvblNpemVdO1xuICAgIGNyZWF0ZVBhZ2VCdXR0b24oJ3BhZ2VQcmV2JywgMCk7XG4gICAgdmFyIHBhZ2VUZXh0U3R5bGVNb2RlbCA9IGxlZ2VuZE1vZGVsLmdldE1vZGVsKCdwYWdlVGV4dFN0eWxlJyk7XG4gICAgY29udHJvbGxlckdyb3VwLmFkZChuZXcgZ3JhcGhpYy5UZXh0KHtcbiAgICAgIG5hbWU6ICdwYWdlVGV4dCcsXG4gICAgICBzdHlsZToge1xuICAgICAgICAvLyBQbGFjZWhvbGRlciB0byBjYWxjdWxhdGUgYSBwcm9wZXIgbGF5b3V0LlxuICAgICAgICB0ZXh0OiAneHgveHgnLFxuICAgICAgICBmaWxsOiBwYWdlVGV4dFN0eWxlTW9kZWwuZ2V0VGV4dENvbG9yKCksXG4gICAgICAgIGZvbnQ6IHBhZ2VUZXh0U3R5bGVNb2RlbC5nZXRGb250KCksXG4gICAgICAgIHZlcnRpY2FsQWxpZ246ICdtaWRkbGUnLFxuICAgICAgICBhbGlnbjogJ2NlbnRlcidcbiAgICAgIH0sXG4gICAgICBzaWxlbnQ6IHRydWVcbiAgICB9KSk7XG4gICAgY3JlYXRlUGFnZUJ1dHRvbigncGFnZU5leHQnLCAxKTtcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVBhZ2VCdXR0b24obmFtZSwgaWNvbklkeCkge1xuICAgICAgdmFyIHBhZ2VEYXRhSW5kZXhOYW1lID0gbmFtZSArICdEYXRhSW5kZXgnO1xuICAgICAgdmFyIGljb24gPSBncmFwaGljLmNyZWF0ZUljb24obGVnZW5kTW9kZWwuZ2V0KCdwYWdlSWNvbnMnLCB0cnVlKVtsZWdlbmRNb2RlbC5nZXRPcmllbnQoKS5uYW1lXVtpY29uSWR4XSwge1xuICAgICAgICAvLyBCdXR0b25zIHdpbGwgYmUgY3JlYXRlZCBpbiBlYWNoIHJlbmRlciwgc28gd2UgZG8gbm90IG5lZWRcbiAgICAgICAgLy8gdG8gd29ycnkgYWJvdXQgYXZvaWRpbmcgdXNpbmcgbGVnZW5kTW9kZWwga2VwdCBpbiBzY29wZS5cbiAgICAgICAgb25jbGljazogenJVdGlsLmJpbmQoc2VsZi5fcGFnZUdvLCBzZWxmLCBwYWdlRGF0YUluZGV4TmFtZSwgbGVnZW5kTW9kZWwsIGFwaSlcbiAgICAgIH0sIHtcbiAgICAgICAgeDogLXBhZ2VJY29uU2l6ZUFyclswXSAvIDIsXG4gICAgICAgIHk6IC1wYWdlSWNvblNpemVBcnJbMV0gLyAyLFxuICAgICAgICB3aWR0aDogcGFnZUljb25TaXplQXJyWzBdLFxuICAgICAgICBoZWlnaHQ6IHBhZ2VJY29uU2l6ZUFyclsxXVxuICAgICAgfSk7XG4gICAgICBpY29uLm5hbWUgPSBuYW1lO1xuICAgICAgY29udHJvbGxlckdyb3VwLmFkZChpY29uKTtcbiAgICB9XG4gIH07XG4gIC8qKlxyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqL1xuXG5cbiAgU2Nyb2xsYWJsZUxlZ2VuZFZpZXcucHJvdG90eXBlLmxheW91dElubmVyID0gZnVuY3Rpb24gKGxlZ2VuZE1vZGVsLCBpdGVtQWxpZ24sIG1heFNpemUsIGlzRmlyc3RSZW5kZXIsIHNlbGVjdG9yLCBzZWxlY3RvclBvc2l0aW9uKSB7XG4gICAgdmFyIHNlbGVjdG9yR3JvdXAgPSB0aGlzLmdldFNlbGVjdG9yR3JvdXAoKTtcbiAgICB2YXIgb3JpZW50SWR4ID0gbGVnZW5kTW9kZWwuZ2V0T3JpZW50KCkuaW5kZXg7XG4gICAgdmFyIHdoID0gV0hbb3JpZW50SWR4XTtcbiAgICB2YXIgeHkgPSBYWVtvcmllbnRJZHhdO1xuICAgIHZhciBodyA9IFdIWzEgLSBvcmllbnRJZHhdO1xuICAgIHZhciB5eCA9IFhZWzEgLSBvcmllbnRJZHhdO1xuICAgIHNlbGVjdG9yICYmIGxheW91dFV0aWwuYm94KCAvLyBCdXR0b25zIGluIHNlbGVjdG9yR3JvdXAgYWx3YXlzIGxheW91dCBob3Jpem9udGFsbHlcbiAgICAnaG9yaXpvbnRhbCcsIHNlbGVjdG9yR3JvdXAsIGxlZ2VuZE1vZGVsLmdldCgnc2VsZWN0b3JJdGVtR2FwJywgdHJ1ZSkpO1xuICAgIHZhciBzZWxlY3RvckJ1dHRvbkdhcCA9IGxlZ2VuZE1vZGVsLmdldCgnc2VsZWN0b3JCdXR0b25HYXAnLCB0cnVlKTtcbiAgICB2YXIgc2VsZWN0b3JSZWN0ID0gc2VsZWN0b3JHcm91cC5nZXRCb3VuZGluZ1JlY3QoKTtcbiAgICB2YXIgc2VsZWN0b3JQb3MgPSBbLXNlbGVjdG9yUmVjdC54LCAtc2VsZWN0b3JSZWN0LnldO1xuICAgIHZhciBwcm9jZXNzTWF4U2l6ZSA9IHpyVXRpbC5jbG9uZShtYXhTaXplKTtcbiAgICBzZWxlY3RvciAmJiAocHJvY2Vzc01heFNpemVbd2hdID0gbWF4U2l6ZVt3aF0gLSBzZWxlY3RvclJlY3Rbd2hdIC0gc2VsZWN0b3JCdXR0b25HYXApO1xuXG4gICAgdmFyIG1haW5SZWN0ID0gdGhpcy5fbGF5b3V0Q29udGVudEFuZENvbnRyb2xsZXIobGVnZW5kTW9kZWwsIGlzRmlyc3RSZW5kZXIsIHByb2Nlc3NNYXhTaXplLCBvcmllbnRJZHgsIHdoLCBodywgeXgsIHh5KTtcblxuICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgaWYgKHNlbGVjdG9yUG9zaXRpb24gPT09ICdlbmQnKSB7XG4gICAgICAgIHNlbGVjdG9yUG9zW29yaWVudElkeF0gKz0gbWFpblJlY3Rbd2hdICsgc2VsZWN0b3JCdXR0b25HYXA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgb2Zmc2V0ID0gc2VsZWN0b3JSZWN0W3doXSArIHNlbGVjdG9yQnV0dG9uR2FwO1xuICAgICAgICBzZWxlY3RvclBvc1tvcmllbnRJZHhdIC09IG9mZnNldDtcbiAgICAgICAgbWFpblJlY3RbeHldIC09IG9mZnNldDtcbiAgICAgIH1cblxuICAgICAgbWFpblJlY3Rbd2hdICs9IHNlbGVjdG9yUmVjdFt3aF0gKyBzZWxlY3RvckJ1dHRvbkdhcDtcbiAgICAgIHNlbGVjdG9yUG9zWzEgLSBvcmllbnRJZHhdICs9IG1haW5SZWN0W3l4XSArIG1haW5SZWN0W2h3XSAvIDIgLSBzZWxlY3RvclJlY3RbaHddIC8gMjtcbiAgICAgIG1haW5SZWN0W2h3XSA9IE1hdGgubWF4KG1haW5SZWN0W2h3XSwgc2VsZWN0b3JSZWN0W2h3XSk7XG4gICAgICBtYWluUmVjdFt5eF0gPSBNYXRoLm1pbihtYWluUmVjdFt5eF0sIHNlbGVjdG9yUmVjdFt5eF0gKyBzZWxlY3RvclBvc1sxIC0gb3JpZW50SWR4XSk7XG4gICAgICBzZWxlY3Rvckdyb3VwLnggPSBzZWxlY3RvclBvc1swXTtcbiAgICAgIHNlbGVjdG9yR3JvdXAueSA9IHNlbGVjdG9yUG9zWzFdO1xuICAgICAgc2VsZWN0b3JHcm91cC5tYXJrUmVkcmF3KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1haW5SZWN0O1xuICB9O1xuXG4gIFNjcm9sbGFibGVMZWdlbmRWaWV3LnByb3RvdHlwZS5fbGF5b3V0Q29udGVudEFuZENvbnRyb2xsZXIgPSBmdW5jdGlvbiAobGVnZW5kTW9kZWwsIGlzRmlyc3RSZW5kZXIsIG1heFNpemUsIG9yaWVudElkeCwgd2gsIGh3LCB5eCwgeHkpIHtcbiAgICB2YXIgY29udGVudEdyb3VwID0gdGhpcy5nZXRDb250ZW50R3JvdXAoKTtcbiAgICB2YXIgY29udGFpbmVyR3JvdXAgPSB0aGlzLl9jb250YWluZXJHcm91cDtcbiAgICB2YXIgY29udHJvbGxlckdyb3VwID0gdGhpcy5fY29udHJvbGxlckdyb3VwOyAvLyBQbGFjZSBpdGVtcyBpbiBjb250ZW50R3JvdXAuXG5cbiAgICBsYXlvdXRVdGlsLmJveChsZWdlbmRNb2RlbC5nZXQoJ29yaWVudCcpLCBjb250ZW50R3JvdXAsIGxlZ2VuZE1vZGVsLmdldCgnaXRlbUdhcCcpLCAhb3JpZW50SWR4ID8gbnVsbCA6IG1heFNpemUud2lkdGgsIG9yaWVudElkeCA/IG51bGwgOiBtYXhTaXplLmhlaWdodCk7XG4gICAgbGF5b3V0VXRpbC5ib3goIC8vIEJ1dHRvbnMgaW4gY29udHJvbGxlciBhcmUgbGF5b3V0IGFsd2F5cyBob3Jpem9udGFsbHkuXG4gICAgJ2hvcml6b250YWwnLCBjb250cm9sbGVyR3JvdXAsIGxlZ2VuZE1vZGVsLmdldCgncGFnZUJ1dHRvbkl0ZW1HYXAnLCB0cnVlKSk7XG4gICAgdmFyIGNvbnRlbnRSZWN0ID0gY29udGVudEdyb3VwLmdldEJvdW5kaW5nUmVjdCgpO1xuICAgIHZhciBjb250cm9sbGVyUmVjdCA9IGNvbnRyb2xsZXJHcm91cC5nZXRCb3VuZGluZ1JlY3QoKTtcbiAgICB2YXIgc2hvd0NvbnRyb2xsZXIgPSB0aGlzLl9zaG93Q29udHJvbGxlciA9IGNvbnRlbnRSZWN0W3doXSA+IG1heFNpemVbd2hdOyAvLyBJbiBjYXNlIHRoYXQgdGhlIGlubmVyIGVsZW1lbnRzIG9mIGNvbnRlbnRHcm91cCBsYXlvdXQgZG8gbm90IGJhc2VkIG9uIFswLCAwXVxuXG4gICAgdmFyIGNvbnRlbnRQb3MgPSBbLWNvbnRlbnRSZWN0LngsIC1jb250ZW50UmVjdC55XTsgLy8gUmVtYWluIGNvbnRlbnRQb3Mgd2hlbiBzY3JvbGwgYW5pbWF0aW9uIHBlcmZyb21pbmcuXG4gICAgLy8gSWYgZmlyc3QgcmVuZGVyaW5nLCBgY29udGVudEdyb3VwLnBvc2l0aW9uYCBpcyBbMCwgMF0sIHdoaWNoXG4gICAgLy8gZG9lcyBub3QgbWFrZSBzZW5zZSBhbmQgbWF5IGNhdXNlIHVuZXhlcGN0ZWQgYW5pbWF0aW9uIGlmIGFkb3B0ZWQuXG5cbiAgICBpZiAoIWlzRmlyc3RSZW5kZXIpIHtcbiAgICAgIGNvbnRlbnRQb3Nbb3JpZW50SWR4XSA9IGNvbnRlbnRHcm91cFt4eV07XG4gICAgfSAvLyBMYXlvdXQgY29udGFpbmVyIGdyb3VwIGJhc2VkIG9uIDAuXG5cblxuICAgIHZhciBjb250YWluZXJQb3MgPSBbMCwgMF07XG4gICAgdmFyIGNvbnRyb2xsZXJQb3MgPSBbLWNvbnRyb2xsZXJSZWN0LngsIC1jb250cm9sbGVyUmVjdC55XTtcbiAgICB2YXIgcGFnZUJ1dHRvbkdhcCA9IHpyVXRpbC5yZXRyaWV2ZTIobGVnZW5kTW9kZWwuZ2V0KCdwYWdlQnV0dG9uR2FwJywgdHJ1ZSksIGxlZ2VuZE1vZGVsLmdldCgnaXRlbUdhcCcsIHRydWUpKTsgLy8gUGxhY2UgY29udGFpbmVyR3JvdXAgYW5kIGNvbnRyb2xsZXJHcm91cCBhbmQgY29udGVudEdyb3VwLlxuXG4gICAgaWYgKHNob3dDb250cm9sbGVyKSB7XG4gICAgICB2YXIgcGFnZUJ1dHRvblBvc2l0aW9uID0gbGVnZW5kTW9kZWwuZ2V0KCdwYWdlQnV0dG9uUG9zaXRpb24nLCB0cnVlKTsgLy8gY29udHJvbGxlciBpcyBvbiB0aGUgcmlnaHQgLyBib3R0b20uXG5cbiAgICAgIGlmIChwYWdlQnV0dG9uUG9zaXRpb24gPT09ICdlbmQnKSB7XG4gICAgICAgIGNvbnRyb2xsZXJQb3Nbb3JpZW50SWR4XSArPSBtYXhTaXplW3doXSAtIGNvbnRyb2xsZXJSZWN0W3doXTtcbiAgICAgIH0gLy8gY29udHJvbGxlciBpcyBvbiB0aGUgbGVmdCAvIHRvcC5cbiAgICAgIGVsc2Uge1xuICAgICAgICAgIGNvbnRhaW5lclBvc1tvcmllbnRJZHhdICs9IGNvbnRyb2xsZXJSZWN0W3doXSArIHBhZ2VCdXR0b25HYXA7XG4gICAgICAgIH1cbiAgICB9IC8vIEFsd2F5cyBhbGlnbiBjb250cm9sbGVyIHRvIGNvbnRlbnQgYXMgJ21pZGRsZScuXG5cblxuICAgIGNvbnRyb2xsZXJQb3NbMSAtIG9yaWVudElkeF0gKz0gY29udGVudFJlY3RbaHddIC8gMiAtIGNvbnRyb2xsZXJSZWN0W2h3XSAvIDI7XG4gICAgY29udGVudEdyb3VwLnNldFBvc2l0aW9uKGNvbnRlbnRQb3MpO1xuICAgIGNvbnRhaW5lckdyb3VwLnNldFBvc2l0aW9uKGNvbnRhaW5lclBvcyk7XG4gICAgY29udHJvbGxlckdyb3VwLnNldFBvc2l0aW9uKGNvbnRyb2xsZXJQb3MpOyAvLyBDYWxjdWxhdGUgYG1haW5SZWN0YCBhbmQgc2V0IGBjbGlwUGF0aGAuXG4gICAgLy8gbWFpblJlY3Qgc2hvdWxkIG5vdCBiZSBjYWxjdWxhdGVkIGJ5IGB0aGlzLmdyb3VwLmdldEJvdW5kaW5nUmVjdCgpYFxuICAgIC8vIGZvciBzYWtlIG9mIHRoZSBvdmVyZmxvdy5cblxuICAgIHZhciBtYWluUmVjdCA9IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwXG4gICAgfTsgLy8gQ29uc2lkZXIgY29udGVudCBtYXkgYmUgb3ZlcmZsb3cgKHNob3VsZCBiZSBjbGlwcGVkKS5cblxuICAgIG1haW5SZWN0W3doXSA9IHNob3dDb250cm9sbGVyID8gbWF4U2l6ZVt3aF0gOiBjb250ZW50UmVjdFt3aF07XG4gICAgbWFpblJlY3RbaHddID0gTWF0aC5tYXgoY29udGVudFJlY3RbaHddLCBjb250cm9sbGVyUmVjdFtod10pOyAvLyBgY29udGFpbmVyUmVjdFt5eF0gKyBjb250YWluZXJQb3NbMSAtIG9yaWVudElkeF1gIGlzIDAuXG5cbiAgICBtYWluUmVjdFt5eF0gPSBNYXRoLm1pbigwLCBjb250cm9sbGVyUmVjdFt5eF0gKyBjb250cm9sbGVyUG9zWzEgLSBvcmllbnRJZHhdKTtcbiAgICBjb250YWluZXJHcm91cC5fX3JlY3RTaXplID0gbWF4U2l6ZVt3aF07XG5cbiAgICBpZiAoc2hvd0NvbnRyb2xsZXIpIHtcbiAgICAgIHZhciBjbGlwU2hhcGUgPSB7XG4gICAgICAgIHg6IDAsXG4gICAgICAgIHk6IDBcbiAgICAgIH07XG4gICAgICBjbGlwU2hhcGVbd2hdID0gTWF0aC5tYXgobWF4U2l6ZVt3aF0gLSBjb250cm9sbGVyUmVjdFt3aF0gLSBwYWdlQnV0dG9uR2FwLCAwKTtcbiAgICAgIGNsaXBTaGFwZVtod10gPSBtYWluUmVjdFtod107XG4gICAgICBjb250YWluZXJHcm91cC5zZXRDbGlwUGF0aChuZXcgZ3JhcGhpYy5SZWN0KHtcbiAgICAgICAgc2hhcGU6IGNsaXBTaGFwZVxuICAgICAgfSkpOyAvLyBDb25zaWRlciBjb250ZW50IG1heSBiZSBsYXJnZXIgdGhhbiBjb250YWluZXIsIGNvbnRhaW5lciByZWN0XG4gICAgICAvLyBjYW4gbm90IGJlIG9idGFpbmVkIGZyb20gYGNvbnRhaW5lckdyb3VwLmdldEJvdW5kaW5nUmVjdCgpYC5cblxuICAgICAgY29udGFpbmVyR3JvdXAuX19yZWN0U2l6ZSA9IGNsaXBTaGFwZVt3aF07XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIERvIG5vdCByZW1vdmUgb3IgaWdub3JlIGNvbnRyb2xsZXIuIEtlZXAgdGhlbSBzZXQgYXMgcGxhY2Vob2xkZXJzLlxuICAgICAgY29udHJvbGxlckdyb3VwLmVhY2hDaGlsZChmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgY2hpbGQuYXR0cih7XG4gICAgICAgICAgaW52aXNpYmxlOiB0cnVlLFxuICAgICAgICAgIHNpbGVudDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0gLy8gQ29udGVudCB0cmFuc2xhdGUgYW5pbWF0aW9uLlxuXG5cbiAgICB2YXIgcGFnZUluZm8gPSB0aGlzLl9nZXRQYWdlSW5mbyhsZWdlbmRNb2RlbCk7XG5cbiAgICBwYWdlSW5mby5wYWdlSW5kZXggIT0gbnVsbCAmJiBncmFwaGljLnVwZGF0ZVByb3BzKGNvbnRlbnRHcm91cCwge1xuICAgICAgeDogcGFnZUluZm8uY29udGVudFBvc2l0aW9uWzBdLFxuICAgICAgeTogcGFnZUluZm8uY29udGVudFBvc2l0aW9uWzFdXG4gICAgfSwgLy8gV2hlbiBzd2l0Y2ggZnJvbSBcInNob3cgY29udHJvbGxlclwiIHRvIFwibm90IHNob3cgY29udHJvbGxlclwiLCB2aWV3IHNob3VsZCBiZVxuICAgIC8vIHVwZGF0ZWQgaW1tZWRpYXRlbHkgd2l0aG91dCBhbmltYXRpb24sIG90aGVyd2lzZSBjYXVzZXMgd2VpcmQgZWZmZWN0LlxuICAgIHNob3dDb250cm9sbGVyID8gbGVnZW5kTW9kZWwgOiBudWxsKTtcblxuICAgIHRoaXMuX3VwZGF0ZVBhZ2VJbmZvVmlldyhsZWdlbmRNb2RlbCwgcGFnZUluZm8pO1xuXG4gICAgcmV0dXJuIG1haW5SZWN0O1xuICB9O1xuXG4gIFNjcm9sbGFibGVMZWdlbmRWaWV3LnByb3RvdHlwZS5fcGFnZUdvID0gZnVuY3Rpb24gKHRvLCBsZWdlbmRNb2RlbCwgYXBpKSB7XG4gICAgdmFyIHNjcm9sbERhdGFJbmRleCA9IHRoaXMuX2dldFBhZ2VJbmZvKGxlZ2VuZE1vZGVsKVt0b107XG5cbiAgICBzY3JvbGxEYXRhSW5kZXggIT0gbnVsbCAmJiBhcGkuZGlzcGF0Y2hBY3Rpb24oe1xuICAgICAgdHlwZTogJ2xlZ2VuZFNjcm9sbCcsXG4gICAgICBzY3JvbGxEYXRhSW5kZXg6IHNjcm9sbERhdGFJbmRleCxcbiAgICAgIGxlZ2VuZElkOiBsZWdlbmRNb2RlbC5pZFxuICAgIH0pO1xuICB9O1xuXG4gIFNjcm9sbGFibGVMZWdlbmRWaWV3LnByb3RvdHlwZS5fdXBkYXRlUGFnZUluZm9WaWV3ID0gZnVuY3Rpb24gKGxlZ2VuZE1vZGVsLCBwYWdlSW5mbykge1xuICAgIHZhciBjb250cm9sbGVyR3JvdXAgPSB0aGlzLl9jb250cm9sbGVyR3JvdXA7XG4gICAgenJVdGlsLmVhY2goWydwYWdlUHJldicsICdwYWdlTmV4dCddLCBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgdmFyIGtleSA9IG5hbWUgKyAnRGF0YUluZGV4JztcbiAgICAgIHZhciBjYW5KdW1wID0gcGFnZUluZm9ba2V5XSAhPSBudWxsO1xuICAgICAgdmFyIGljb24gPSBjb250cm9sbGVyR3JvdXAuY2hpbGRPZk5hbWUobmFtZSk7XG5cbiAgICAgIGlmIChpY29uKSB7XG4gICAgICAgIGljb24uc2V0U3R5bGUoJ2ZpbGwnLCBjYW5KdW1wID8gbGVnZW5kTW9kZWwuZ2V0KCdwYWdlSWNvbkNvbG9yJywgdHJ1ZSkgOiBsZWdlbmRNb2RlbC5nZXQoJ3BhZ2VJY29uSW5hY3RpdmVDb2xvcicsIHRydWUpKTtcbiAgICAgICAgaWNvbi5jdXJzb3IgPSBjYW5KdW1wID8gJ3BvaW50ZXInIDogJ2RlZmF1bHQnO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBwYWdlVGV4dCA9IGNvbnRyb2xsZXJHcm91cC5jaGlsZE9mTmFtZSgncGFnZVRleHQnKTtcbiAgICB2YXIgcGFnZUZvcm1hdHRlciA9IGxlZ2VuZE1vZGVsLmdldCgncGFnZUZvcm1hdHRlcicpO1xuICAgIHZhciBwYWdlSW5kZXggPSBwYWdlSW5mby5wYWdlSW5kZXg7XG4gICAgdmFyIGN1cnJlbnQgPSBwYWdlSW5kZXggIT0gbnVsbCA/IHBhZ2VJbmRleCArIDEgOiAwO1xuICAgIHZhciB0b3RhbCA9IHBhZ2VJbmZvLnBhZ2VDb3VudDtcbiAgICBwYWdlVGV4dCAmJiBwYWdlRm9ybWF0dGVyICYmIHBhZ2VUZXh0LnNldFN0eWxlKCd0ZXh0JywgenJVdGlsLmlzU3RyaW5nKHBhZ2VGb3JtYXR0ZXIpID8gcGFnZUZvcm1hdHRlci5yZXBsYWNlKCd7Y3VycmVudH0nLCBjdXJyZW50ID09IG51bGwgPyAnJyA6IGN1cnJlbnQgKyAnJykucmVwbGFjZSgne3RvdGFsfScsIHRvdGFsID09IG51bGwgPyAnJyA6IHRvdGFsICsgJycpIDogcGFnZUZvcm1hdHRlcih7XG4gICAgICBjdXJyZW50OiBjdXJyZW50LFxuICAgICAgdG90YWw6IHRvdGFsXG4gICAgfSkpO1xuICB9O1xuICAvKipcclxuICAgKiAgY29udGVudFBvc2l0aW9uOiBBcnJheS48bnVtYmVyPiwgbnVsbCB3aGVuIGRhdGEgaXRlbSBub3QgZm91bmQuXHJcbiAgICogIHBhZ2VJbmRleDogbnVtYmVyLCBudWxsIHdoZW4gZGF0YSBpdGVtIG5vdCBmb3VuZC5cclxuICAgKiAgcGFnZUNvdW50OiBudW1iZXIsIGFsd2F5cyBiZSBhIG51bWJlciwgY2FuIGJlIDAuXHJcbiAgICogIHBhZ2VQcmV2RGF0YUluZGV4OiBudW1iZXIsIG51bGwgd2hlbiBubyBwcmV2aW91cyBwYWdlLlxyXG4gICAqICBwYWdlTmV4dERhdGFJbmRleDogbnVtYmVyLCBudWxsIHdoZW4gbm8gbmV4dCBwYWdlLlxyXG4gICAqIH1cclxuICAgKi9cblxuXG4gIFNjcm9sbGFibGVMZWdlbmRWaWV3LnByb3RvdHlwZS5fZ2V0UGFnZUluZm8gPSBmdW5jdGlvbiAobGVnZW5kTW9kZWwpIHtcbiAgICB2YXIgc2Nyb2xsRGF0YUluZGV4ID0gbGVnZW5kTW9kZWwuZ2V0KCdzY3JvbGxEYXRhSW5kZXgnLCB0cnVlKTtcbiAgICB2YXIgY29udGVudEdyb3VwID0gdGhpcy5nZXRDb250ZW50R3JvdXAoKTtcbiAgICB2YXIgY29udGFpbmVyUmVjdFNpemUgPSB0aGlzLl9jb250YWluZXJHcm91cC5fX3JlY3RTaXplO1xuICAgIHZhciBvcmllbnRJZHggPSBsZWdlbmRNb2RlbC5nZXRPcmllbnQoKS5pbmRleDtcbiAgICB2YXIgd2ggPSBXSFtvcmllbnRJZHhdO1xuICAgIHZhciB4eSA9IFhZW29yaWVudElkeF07XG5cbiAgICB2YXIgdGFyZ2V0SXRlbUluZGV4ID0gdGhpcy5fZmluZFRhcmdldEl0ZW1JbmRleChzY3JvbGxEYXRhSW5kZXgpO1xuXG4gICAgdmFyIGNoaWxkcmVuID0gY29udGVudEdyb3VwLmNoaWxkcmVuKCk7XG4gICAgdmFyIHRhcmdldEl0ZW0gPSBjaGlsZHJlblt0YXJnZXRJdGVtSW5kZXhdO1xuICAgIHZhciBpdGVtQ291bnQgPSBjaGlsZHJlbi5sZW5ndGg7XG4gICAgdmFyIHBDb3VudCA9ICFpdGVtQ291bnQgPyAwIDogMTtcbiAgICB2YXIgcmVzdWx0ID0ge1xuICAgICAgY29udGVudFBvc2l0aW9uOiBbY29udGVudEdyb3VwLngsIGNvbnRlbnRHcm91cC55XSxcbiAgICAgIHBhZ2VDb3VudDogcENvdW50LFxuICAgICAgcGFnZUluZGV4OiBwQ291bnQgLSAxLFxuICAgICAgcGFnZVByZXZEYXRhSW5kZXg6IG51bGwsXG4gICAgICBwYWdlTmV4dERhdGFJbmRleDogbnVsbFxuICAgIH07XG5cbiAgICBpZiAoIXRhcmdldEl0ZW0pIHtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgdmFyIHRhcmdldEl0ZW1JbmZvID0gZ2V0SXRlbUluZm8odGFyZ2V0SXRlbSk7XG4gICAgcmVzdWx0LmNvbnRlbnRQb3NpdGlvbltvcmllbnRJZHhdID0gLXRhcmdldEl0ZW1JbmZvLnM7IC8vIFN0cmF0ZWd5OlxuICAgIC8vICgxKSBBbHdheXMgYWxpZ24gYmFzZWQgb24gdGhlIGxlZnQvdG9wIG1vc3QgaXRlbS5cbiAgICAvLyAoMikgSXQgaXMgdXNlci1mcmllbmRseSB0aGF0IHRoZSBsYXN0IGl0ZW0gc2hvd24gaW4gdGhlXG4gICAgLy8gY3VycmVudCB3aW5kb3cgaXMgc2hvd24gYXQgdGhlIGJlZ2luaW5nIG9mIG5leHQgd2luZG93LlxuICAgIC8vIE90aGVyd2lzZSBpZiBoYWxmIG9mIHRoZSBsYXN0IGl0ZW0gaXMgY3V0IGJ5IHRoZSB3aW5kb3csXG4gICAgLy8gaXQgd2lsbCBoYXZlIG5vIGNoYW5jZSB0byBkaXNwbGF5IGVudGlyZWx5LlxuICAgIC8vICgzKSBDb25zaWRlciB0aGF0IGl0ZW0gc2l6ZSBwcm9iYWJseSBiZSBkaWZmZXJlbnQsIHdlXG4gICAgLy8gaGF2ZSBjYWxjdWxhdGUgcGFnZUluZGV4IGJ5IHNpemUgcmF0aGVyIHRoYW4gaXRlbSBpbmRleCxcbiAgICAvLyBhbmQgd2UgY2FuIG5vdCBnZXQgcGFnZSBpbmRleCBkaXJlY3RseSBieSBkaXZpc2lvbi5cbiAgICAvLyAoNCkgVGhlIHdpbmRvdyBpcyB0byBuYXJyb3cgdG8gY29udGFpbiBtb3JlIHRoYW5cbiAgICAvLyBvbmUgaXRlbSwgd2Ugc2hvdWxkIG1ha2Ugc3VyZSB0aGF0IHRoZSBwYWdlIGNhbiBiZSBmbGlwZWQuXG5cbiAgICBmb3IgKHZhciBpID0gdGFyZ2V0SXRlbUluZGV4ICsgMSwgd2luU3RhcnRJdGVtSW5mbyA9IHRhcmdldEl0ZW1JbmZvLCB3aW5FbmRJdGVtSW5mbyA9IHRhcmdldEl0ZW1JbmZvLCBjdXJySXRlbUluZm8gPSBudWxsOyBpIDw9IGl0ZW1Db3VudDsgKytpKSB7XG4gICAgICBjdXJySXRlbUluZm8gPSBnZXRJdGVtSW5mbyhjaGlsZHJlbltpXSk7XG5cbiAgICAgIGlmICggLy8gSGFsZiBvZiB0aGUgbGFzdCBpdGVtIGlzIG91dCBvZiB0aGUgd2luZG93LlxuICAgICAgIWN1cnJJdGVtSW5mbyAmJiB3aW5FbmRJdGVtSW5mby5lID4gd2luU3RhcnRJdGVtSW5mby5zICsgY29udGFpbmVyUmVjdFNpemUgfHwgLy8gSWYgdGhlIGN1cnJlbnQgaXRlbSBkb2VzIG5vdCBpbnRlcnNlY3Qgd2l0aCB0aGUgd2luZG93LCB0aGUgbmV3IHBhZ2VcbiAgICAgIC8vIGNhbiBiZSBzdGFydGVkIGF0IHRoZSBjdXJyZW50IGl0ZW0gb3IgdGhlIGxhc3QgaXRlbS5cbiAgICAgIGN1cnJJdGVtSW5mbyAmJiAhaW50ZXJzZWN0KGN1cnJJdGVtSW5mbywgd2luU3RhcnRJdGVtSW5mby5zKSkge1xuICAgICAgICBpZiAod2luRW5kSXRlbUluZm8uaSA+IHdpblN0YXJ0SXRlbUluZm8uaSkge1xuICAgICAgICAgIHdpblN0YXJ0SXRlbUluZm8gPSB3aW5FbmRJdGVtSW5mbztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBlLmcuLCB3aGVuIHBhZ2Ugc2l6ZSBpcyBzbWFsbGVyIHRoYW4gaXRlbSBzaXplLlxuICAgICAgICAgIHdpblN0YXJ0SXRlbUluZm8gPSBjdXJySXRlbUluZm87XG4gICAgICAgIH1cblxuICAgICAgICBpZiAod2luU3RhcnRJdGVtSW5mbykge1xuICAgICAgICAgIGlmIChyZXN1bHQucGFnZU5leHREYXRhSW5kZXggPT0gbnVsbCkge1xuICAgICAgICAgICAgcmVzdWx0LnBhZ2VOZXh0RGF0YUluZGV4ID0gd2luU3RhcnRJdGVtSW5mby5pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgICsrcmVzdWx0LnBhZ2VDb3VudDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB3aW5FbmRJdGVtSW5mbyA9IGN1cnJJdGVtSW5mbztcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gdGFyZ2V0SXRlbUluZGV4IC0gMSwgd2luU3RhcnRJdGVtSW5mbyA9IHRhcmdldEl0ZW1JbmZvLCB3aW5FbmRJdGVtSW5mbyA9IHRhcmdldEl0ZW1JbmZvLCBjdXJySXRlbUluZm8gPSBudWxsOyBpID49IC0xOyAtLWkpIHtcbiAgICAgIGN1cnJJdGVtSW5mbyA9IGdldEl0ZW1JbmZvKGNoaWxkcmVuW2ldKTtcblxuICAgICAgaWYgKCAvLyBJZiB0aGUgdGhlIGVuZCBpdGVtIGRvZXMgbm90IGludGVyc2VjdCB3aXRoIHRoZSB3aW5kb3cgc3RhcnRlZFxuICAgICAgLy8gZnJvbSB0aGUgY3VycmVudCBpdGVtLCBhIHBhZ2UgY2FuIGJlIHNldHRsZWQuXG4gICAgICAoIWN1cnJJdGVtSW5mbyB8fCAhaW50ZXJzZWN0KHdpbkVuZEl0ZW1JbmZvLCBjdXJySXRlbUluZm8ucykpICYmIC8vIGUuZy4sIHdoZW4gcGFnZSBzaXplIGlzIHNtYWxsZXIgdGhhbiBpdGVtIHNpemUuXG4gICAgICB3aW5TdGFydEl0ZW1JbmZvLmkgPCB3aW5FbmRJdGVtSW5mby5pKSB7XG4gICAgICAgIHdpbkVuZEl0ZW1JbmZvID0gd2luU3RhcnRJdGVtSW5mbztcblxuICAgICAgICBpZiAocmVzdWx0LnBhZ2VQcmV2RGF0YUluZGV4ID09IG51bGwpIHtcbiAgICAgICAgICByZXN1bHQucGFnZVByZXZEYXRhSW5kZXggPSB3aW5TdGFydEl0ZW1JbmZvLmk7XG4gICAgICAgIH1cblxuICAgICAgICArK3Jlc3VsdC5wYWdlQ291bnQ7XG4gICAgICAgICsrcmVzdWx0LnBhZ2VJbmRleDtcbiAgICAgIH1cblxuICAgICAgd2luU3RhcnRJdGVtSW5mbyA9IGN1cnJJdGVtSW5mbztcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuXG4gICAgZnVuY3Rpb24gZ2V0SXRlbUluZm8oZWwpIHtcbiAgICAgIGlmIChlbCkge1xuICAgICAgICB2YXIgaXRlbVJlY3QgPSBlbC5nZXRCb3VuZGluZ1JlY3QoKTtcbiAgICAgICAgdmFyIHN0YXJ0ID0gaXRlbVJlY3RbeHldICsgZWxbeHldO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHM6IHN0YXJ0LFxuICAgICAgICAgIGU6IHN0YXJ0ICsgaXRlbVJlY3Rbd2hdLFxuICAgICAgICAgIGk6IGVsLl9fbGVnZW5kRGF0YUluZGV4XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW50ZXJzZWN0KGl0ZW1JbmZvLCB3aW5TdGFydCkge1xuICAgICAgcmV0dXJuIGl0ZW1JbmZvLmUgPj0gd2luU3RhcnQgJiYgaXRlbUluZm8ucyA8PSB3aW5TdGFydCArIGNvbnRhaW5lclJlY3RTaXplO1xuICAgIH1cbiAgfTtcblxuICBTY3JvbGxhYmxlTGVnZW5kVmlldy5wcm90b3R5cGUuX2ZpbmRUYXJnZXRJdGVtSW5kZXggPSBmdW5jdGlvbiAodGFyZ2V0RGF0YUluZGV4KSB7XG4gICAgaWYgKCF0aGlzLl9zaG93Q29udHJvbGxlcikge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgdmFyIGluZGV4O1xuICAgIHZhciBjb250ZW50R3JvdXAgPSB0aGlzLmdldENvbnRlbnRHcm91cCgpO1xuICAgIHZhciBkZWZhdWx0SW5kZXg7XG4gICAgY29udGVudEdyb3VwLmVhY2hDaGlsZChmdW5jdGlvbiAoY2hpbGQsIGlkeCkge1xuICAgICAgdmFyIGxlZ2VuZERhdGFJZHggPSBjaGlsZC5fX2xlZ2VuZERhdGFJbmRleDsgLy8gRklYTUVcbiAgICAgIC8vIElmIHRoZSBnaXZlbiB0YXJnZXREYXRhSW5kZXggKGZyb20gbW9kZWwpIGlzIGlsbGVnYWwsXG4gICAgICAvLyB3ZSB1c2UgZGVmYXVsdEluZGV4LiBCdXQgdGhlIGluZGV4IG9uIHRoZSBsZWdlbmQgbW9kZWwgYW5kXG4gICAgICAvLyBhY3Rpb24gcGF5bG9hZCBpcyBzdGlsbCBpbGxlZ2FsLiBUaGF0IGNhc2Ugd2lsbCBub3QgYmVcbiAgICAgIC8vIGNoYW5nZWQgdW50aWwgc29tZSBzY2VuYXJpbyByZXF1aXJlcy5cblxuICAgICAgaWYgKGRlZmF1bHRJbmRleCA9PSBudWxsICYmIGxlZ2VuZERhdGFJZHggIT0gbnVsbCkge1xuICAgICAgICBkZWZhdWx0SW5kZXggPSBpZHg7XG4gICAgICB9XG5cbiAgICAgIGlmIChsZWdlbmREYXRhSWR4ID09PSB0YXJnZXREYXRhSW5kZXgpIHtcbiAgICAgICAgaW5kZXggPSBpZHg7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGluZGV4ICE9IG51bGwgPyBpbmRleCA6IGRlZmF1bHRJbmRleDtcbiAgfTtcblxuICBTY3JvbGxhYmxlTGVnZW5kVmlldy50eXBlID0gJ2xlZ2VuZC5zY3JvbGwnO1xuICByZXR1cm4gU2Nyb2xsYWJsZUxlZ2VuZFZpZXc7XG59KExlZ2VuZFZpZXcpO1xuXG5leHBvcnQgZGVmYXVsdCBTY3JvbGxhYmxlTGVnZW5kVmlldzsiLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGluc3RhbGxTY3JvbGxhYmxlTGVnZW5kQWN0aW9uKHJlZ2lzdGVycykge1xuICAvKipcclxuICAgKiBAZXZlbnQgbGVnZW5kU2Nyb2xsXHJcbiAgICogQHR5cGUge09iamVjdH1cclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gdHlwZSAnbGVnZW5kU2Nyb2xsJ1xyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBzY3JvbGxEYXRhSW5kZXhcclxuICAgKi9cbiAgcmVnaXN0ZXJzLnJlZ2lzdGVyQWN0aW9uKCdsZWdlbmRTY3JvbGwnLCAnbGVnZW5kc2Nyb2xsJywgZnVuY3Rpb24gKHBheWxvYWQsIGVjTW9kZWwpIHtcbiAgICB2YXIgc2Nyb2xsRGF0YUluZGV4ID0gcGF5bG9hZC5zY3JvbGxEYXRhSW5kZXg7XG4gICAgc2Nyb2xsRGF0YUluZGV4ICE9IG51bGwgJiYgZWNNb2RlbC5lYWNoQ29tcG9uZW50KHtcbiAgICAgIG1haW5UeXBlOiAnbGVnZW5kJyxcbiAgICAgIHN1YlR5cGU6ICdzY3JvbGwnLFxuICAgICAgcXVlcnk6IHBheWxvYWRcbiAgICB9LCBmdW5jdGlvbiAobGVnZW5kTW9kZWwpIHtcbiAgICAgIGxlZ2VuZE1vZGVsLnNldFNjcm9sbERhdGFJbmRleChzY3JvbGxEYXRhSW5kZXgpO1xuICAgIH0pO1xuICB9KTtcbn0iLCJcbi8qXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4qIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4qIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuXG4vKipcbiAqIEFVVE8tR0VORVJBVEVEIEZJTEUuIERPIE5PVCBNT0RJRlkuXG4gKi9cblxuLypcclxuKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXHJcbiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXHJcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXHJcbiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxyXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxyXG4qIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXHJcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cclxuKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG4qIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxyXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcclxuKiB1bmRlciB0aGUgTGljZW5zZS5cclxuKi9cbmltcG9ydCB7IHVzZSB9IGZyb20gJy4uLy4uL2V4dGVuc2lvbi5qcyc7XG5pbXBvcnQgeyBpbnN0YWxsIGFzIGluc3RhbGxMZWdlbmRQbGFpbiB9IGZyb20gJy4vaW5zdGFsbExlZ2VuZFBsYWluLmpzJztcbmltcG9ydCBTY3JvbGxhYmxlTGVnZW5kTW9kZWwgZnJvbSAnLi9TY3JvbGxhYmxlTGVnZW5kTW9kZWwuanMnO1xuaW1wb3J0IFNjcm9sbGFibGVMZWdlbmRWaWV3IGZyb20gJy4vU2Nyb2xsYWJsZUxlZ2VuZFZpZXcuanMnO1xuaW1wb3J0IGluc3RhbGxTY3JvbGxhYmxlTGVnZW5kQWN0aW9uIGZyb20gJy4vc2Nyb2xsYWJsZUxlZ2VuZEFjdGlvbi5qcyc7XG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbChyZWdpc3RlcnMpIHtcbiAgdXNlKGluc3RhbGxMZWdlbmRQbGFpbik7XG4gIHJlZ2lzdGVycy5yZWdpc3RlckNvbXBvbmVudE1vZGVsKFNjcm9sbGFibGVMZWdlbmRNb2RlbCk7XG4gIHJlZ2lzdGVycy5yZWdpc3RlckNvbXBvbmVudFZpZXcoU2Nyb2xsYWJsZUxlZ2VuZFZpZXcpO1xuICBpbnN0YWxsU2Nyb2xsYWJsZUxlZ2VuZEFjdGlvbihyZWdpc3RlcnMpO1xufSIsIlxuLypcbiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4qIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4qIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiogdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5cbi8qKlxuICogQVVUTy1HRU5FUkFURUQgRklMRS4gRE8gTk9UIE1PRElGWS5cbiAqL1xuXG4vKlxyXG4qIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcclxuKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcclxuKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4qIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcclxuKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXHJcbiogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXHJcbiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcclxuKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxyXG4qIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXHJcbiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xyXG4qIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qL1xuaW1wb3J0IHsgdXNlIH0gZnJvbSAnLi4vLi4vZXh0ZW5zaW9uLmpzJztcbmltcG9ydCB7IGluc3RhbGwgYXMgaW5zdGFsbExlZ2VuZFBsYWluIH0gZnJvbSAnLi9pbnN0YWxsTGVnZW5kUGxhaW4uanMnO1xuaW1wb3J0IHsgaW5zdGFsbCBhcyBpbnN0YWxsTGVnZW5kU2Nyb2xsIH0gZnJvbSAnLi9pbnN0YWxsTGVnZW5kU2Nyb2xsLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsKHJlZ2lzdGVycykge1xuICB1c2UoaW5zdGFsbExlZ2VuZFBsYWluKTtcbiAgdXNlKGluc3RhbGxMZWdlbmRTY3JvbGwpO1xufSIsInZhciByYWYgPSBudWxsO1xuZnVuY3Rpb24gcmVxdWVzdEFuaW1hdGlvbkZyYW1lIChjYWxsYmFjaykge1xuICBpZiAoIXJhZikge1xuICAgIHJhZiA9IChcbiAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcbiAgICAgIHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcbiAgICAgIHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcbiAgICAgIGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChjYWxsYmFjaywgMTYpXG4gICAgICB9XG4gICAgKS5iaW5kKHdpbmRvdyk7XG4gIH1cbiAgcmV0dXJuIHJhZihjYWxsYmFjaylcbn1cblxudmFyIGNhZiA9IG51bGw7XG5mdW5jdGlvbiBjYW5jZWxBbmltYXRpb25GcmFtZSAoaWQpIHtcbiAgaWYgKCFjYWYpIHtcbiAgICBjYWYgPSAoXG4gICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgfHxcbiAgICAgIHdpbmRvdy53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZSB8fFxuICAgICAgd2luZG93Lm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGlkKTtcbiAgICAgIH1cbiAgICApLmJpbmQod2luZG93KTtcbiAgfVxuXG4gIGNhZihpZCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlcyAoc3R5bGVUZXh0KSB7XG4gIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBzdHlsZVRleHQ7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoc3R5bGVUZXh0KSk7XG4gIH1cbiAgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWQnKSB8fCBkb2N1bWVudC5ib2R5KS5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIHJldHVybiBzdHlsZVxufVxuXG5mdW5jdGlvbiBjcmVhdGVFbGVtZW50ICh0YWdOYW1lLCBwcm9wcykge1xuICBpZiAoIHByb3BzID09PSB2b2lkIDAgKSBwcm9wcyA9IHt9O1xuXG4gIHZhciBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcbiAgT2JqZWN0LmtleXMocHJvcHMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIGVsZW1ba2V5XSA9IHByb3BzW2tleV07XG4gIH0pO1xuICByZXR1cm4gZWxlbVxufVxuXG5mdW5jdGlvbiBnZXRDb21wdXRlZFN0eWxlIChlbGVtLCBwcm9wLCBwc2V1ZG8pIHtcbiAgLy8gZm9yIG9sZGVyIHZlcnNpb25zIG9mIEZpcmVmb3gsIGBnZXRDb21wdXRlZFN0eWxlYCByZXF1aXJlZFxuICAvLyB0aGUgc2Vjb25kIGFyZ3VtZW50IGFuZCBtYXkgcmV0dXJuIGBudWxsYCBmb3Igc29tZSBlbGVtZW50c1xuICAvLyB3aGVuIGBkaXNwbGF5OiBub25lYFxuICB2YXIgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW0sIHBzZXVkbyB8fCBudWxsKSB8fCB7XG4gICAgZGlzcGxheTogJ25vbmUnXG4gIH07XG5cbiAgcmV0dXJuIGNvbXB1dGVkU3R5bGVbcHJvcF1cbn1cblxuZnVuY3Rpb24gZ2V0UmVuZGVySW5mbyAoZWxlbSkge1xuICBpZiAoIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyhlbGVtKSkge1xuICAgIHJldHVybiB7XG4gICAgICBkZXRhY2hlZDogdHJ1ZSxcbiAgICAgIHJlbmRlcmVkOiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIHZhciBjdXJyZW50ID0gZWxlbTtcbiAgd2hpbGUgKGN1cnJlbnQgIT09IGRvY3VtZW50KSB7XG4gICAgaWYgKGdldENvbXB1dGVkU3R5bGUoY3VycmVudCwgJ2Rpc3BsYXknKSA9PT0gJ25vbmUnKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkZXRhY2hlZDogZmFsc2UsXG4gICAgICAgIHJlbmRlcmVkOiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnROb2RlO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBkZXRhY2hlZDogZmFsc2UsXG4gICAgcmVuZGVyZWQ6IHRydWVcbiAgfVxufVxuXG52YXIgY3NzXzI0OHogPSBcIi5yZXNpemUtdHJpZ2dlcnN7dmlzaWJpbGl0eTpoaWRkZW47b3BhY2l0eTowO3BvaW50ZXItZXZlbnRzOm5vbmV9LnJlc2l6ZS1jb250cmFjdC10cmlnZ2VyLC5yZXNpemUtY29udHJhY3QtdHJpZ2dlcjpiZWZvcmUsLnJlc2l6ZS1leHBhbmQtdHJpZ2dlciwucmVzaXplLXRyaWdnZXJze2NvbnRlbnQ6XFxcIlxcXCI7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO2hlaWdodDoxMDAlO3dpZHRoOjEwMCU7b3ZlcmZsb3c6aGlkZGVufS5yZXNpemUtY29udHJhY3QtdHJpZ2dlciwucmVzaXplLWV4cGFuZC10cmlnZ2Vye2JhY2tncm91bmQ6I2VlZTtvdmVyZmxvdzphdXRvfS5yZXNpemUtY29udHJhY3QtdHJpZ2dlcjpiZWZvcmV7d2lkdGg6MjAwJTtoZWlnaHQ6MjAwJX1cIjtcblxudmFyIHRvdGFsID0gMDtcbnZhciBzdHlsZSA9IG51bGw7XG5cbmZ1bmN0aW9uIGFkZExpc3RlbmVyIChlbGVtLCBjYWxsYmFjaykge1xuICBpZiAoIWVsZW0uX19yZXNpemVfbXV0YXRpb25faGFuZGxlcl9fKSB7XG4gICAgZWxlbS5fX3Jlc2l6ZV9tdXRhdGlvbl9oYW5kbGVyX18gPSBoYW5kbGVNdXRhdGlvbi5iaW5kKGVsZW0pO1xuICB9XG5cbiAgdmFyIGxpc3RlbmVycyA9IGVsZW0uX19yZXNpemVfbGlzdGVuZXJzX187XG5cbiAgaWYgKCFsaXN0ZW5lcnMpIHtcbiAgICBlbGVtLl9fcmVzaXplX2xpc3RlbmVyc19fID0gW107XG4gICAgaWYgKHdpbmRvdy5SZXNpemVPYnNlcnZlcikge1xuICAgICAgdmFyIG9mZnNldFdpZHRoID0gZWxlbS5vZmZzZXRXaWR0aDtcbiAgICAgIHZhciBvZmZzZXRIZWlnaHQgPSBlbGVtLm9mZnNldEhlaWdodDtcbiAgICAgIHZhciBybyA9IG5ldyBSZXNpemVPYnNlcnZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghZWxlbS5fX3Jlc2l6ZV9vYnNlcnZlcl90cmlnZ2VyZWRfXykge1xuICAgICAgICAgIGVsZW0uX19yZXNpemVfb2JzZXJ2ZXJfdHJpZ2dlcmVkX18gPSB0cnVlO1xuICAgICAgICAgIGlmIChlbGVtLm9mZnNldFdpZHRoID09PSBvZmZzZXRXaWR0aCAmJiBlbGVtLm9mZnNldEhlaWdodCA9PT0gb2Zmc2V0SGVpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcnVuQ2FsbGJhY2tzKGVsZW0pO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIGluaXRpYWxseSBkaXNwbGF5IG5vbmUgd29uJ3QgdHJpZ2dlciBSZXNpemVPYnNlcnZlciBjYWxsYmFja1xuICAgICAgdmFyIHJlZiA9IGdldFJlbmRlckluZm8oZWxlbSk7XG4gICAgICB2YXIgZGV0YWNoZWQgPSByZWYuZGV0YWNoZWQ7XG4gICAgICB2YXIgcmVuZGVyZWQgPSByZWYucmVuZGVyZWQ7XG4gICAgICBlbGVtLl9fcmVzaXplX29ic2VydmVyX3RyaWdnZXJlZF9fID0gZGV0YWNoZWQgPT09IGZhbHNlICYmIHJlbmRlcmVkID09PSBmYWxzZTtcbiAgICAgIGVsZW0uX19yZXNpemVfb2JzZXJ2ZXJfXyA9IHJvO1xuICAgICAgcm8ub2JzZXJ2ZShlbGVtKTtcbiAgICB9IGVsc2UgaWYgKGVsZW0uYXR0YWNoRXZlbnQgJiYgZWxlbS5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAvLyB0YXJnZXRpbmcgSUU5LzEwXG4gICAgICBlbGVtLl9fcmVzaXplX2xlZ2FjeV9yZXNpemVfaGFuZGxlcl9fID0gZnVuY3Rpb24gaGFuZGxlTGVnYWN5UmVzaXplICgpIHtcbiAgICAgICAgcnVuQ2FsbGJhY2tzKGVsZW0pO1xuICAgICAgfTtcbiAgICAgIGVsZW0uYXR0YWNoRXZlbnQoJ29ucmVzaXplJywgZWxlbS5fX3Jlc2l6ZV9sZWdhY3lfcmVzaXplX2hhbmRsZXJfXyk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01TdWJ0cmVlTW9kaWZpZWQnLCBlbGVtLl9fcmVzaXplX211dGF0aW9uX2hhbmRsZXJfXyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghdG90YWwpIHtcbiAgICAgICAgc3R5bGUgPSBjcmVhdGVTdHlsZXMoY3NzXzI0OHopO1xuICAgICAgfVxuICAgICAgaW5pdFRyaWdnZXJzKGVsZW0pO1xuXG4gICAgICBlbGVtLl9fcmVzaXplX3JlbmRlcmVkX18gPSBnZXRSZW5kZXJJbmZvKGVsZW0pLnJlbmRlcmVkO1xuICAgICAgaWYgKHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyKSB7XG4gICAgICAgIHZhciBtbyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGVsZW0uX19yZXNpemVfbXV0YXRpb25faGFuZGxlcl9fKTtcbiAgICAgICAgbW8ub2JzZXJ2ZShkb2N1bWVudCwge1xuICAgICAgICAgIGF0dHJpYnV0ZXM6IHRydWUsXG4gICAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgICAgIGNoYXJhY3RlckRhdGE6IHRydWUsXG4gICAgICAgICAgc3VidHJlZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgZWxlbS5fX3Jlc2l6ZV9tdXRhdGlvbl9vYnNlcnZlcl9fID0gbW87XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZWxlbS5fX3Jlc2l6ZV9saXN0ZW5lcnNfXy5wdXNoKGNhbGxiYWNrKTtcbiAgdG90YWwrKztcbn1cblxuZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIgKGVsZW0sIGNhbGxiYWNrKSB7XG4gIHZhciBsaXN0ZW5lcnMgPSBlbGVtLl9fcmVzaXplX2xpc3RlbmVyc19fO1xuICBpZiAoIWxpc3RlbmVycykge1xuICAgIHJldHVyblxuICB9XG5cbiAgaWYgKGNhbGxiYWNrKSB7XG4gICAgbGlzdGVuZXJzLnNwbGljZShsaXN0ZW5lcnMuaW5kZXhPZihjYWxsYmFjayksIDEpO1xuICB9XG5cbiAgLy8gbm8gbGlzdGVuZXJzIGV4aXN0LCBvciByZW1vdmluZyBhbGwgbGlzdGVuZXJzXG4gIGlmICghbGlzdGVuZXJzLmxlbmd0aCB8fCAhY2FsbGJhY2spIHtcbiAgICAvLyB0YXJnZXRpbmcgSUU5LzEwXG4gICAgaWYgKGVsZW0uZGV0YWNoRXZlbnQgJiYgZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKSB7XG4gICAgICBlbGVtLmRldGFjaEV2ZW50KCdvbnJlc2l6ZScsIGVsZW0uX19yZXNpemVfbGVnYWN5X3Jlc2l6ZV9oYW5kbGVyX18pO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignRE9NU3VidHJlZU1vZGlmaWVkJywgZWxlbS5fX3Jlc2l6ZV9tdXRhdGlvbl9oYW5kbGVyX18pO1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKGVsZW0uX19yZXNpemVfb2JzZXJ2ZXJfXykge1xuICAgICAgZWxlbS5fX3Jlc2l6ZV9vYnNlcnZlcl9fLnVub2JzZXJ2ZShlbGVtKTtcbiAgICAgIGVsZW0uX19yZXNpemVfb2JzZXJ2ZXJfXy5kaXNjb25uZWN0KCk7XG4gICAgICBlbGVtLl9fcmVzaXplX29ic2VydmVyX18gPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZWxlbS5fX3Jlc2l6ZV9tdXRhdGlvbl9vYnNlcnZlcl9fKSB7XG4gICAgICAgIGVsZW0uX19yZXNpemVfbXV0YXRpb25fb2JzZXJ2ZXJfXy5kaXNjb25uZWN0KCk7XG4gICAgICAgIGVsZW0uX19yZXNpemVfbXV0YXRpb25fb2JzZXJ2ZXJfXyA9IG51bGw7XG4gICAgICB9XG4gICAgICBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGhhbmRsZVNjcm9sbCk7XG4gICAgICBlbGVtLnJlbW92ZUNoaWxkKGVsZW0uX19yZXNpemVfdHJpZ2dlcnNfXy50cmlnZ2Vycyk7XG4gICAgICBlbGVtLl9fcmVzaXplX3RyaWdnZXJzX18gPSBudWxsO1xuICAgIH1cbiAgICBlbGVtLl9fcmVzaXplX2xpc3RlbmVyc19fID0gbnVsbDtcbiAgfVxuXG4gIGlmICghLS10b3RhbCAmJiBzdHlsZSkge1xuICAgIHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldFVwZGF0ZWRTaXplIChlbGVtKSB7XG4gIHZhciByZWYgPSBlbGVtLl9fcmVzaXplX2xhc3RfXztcbiAgdmFyIHdpZHRoID0gcmVmLndpZHRoO1xuICB2YXIgaGVpZ2h0ID0gcmVmLmhlaWdodDtcbiAgdmFyIG9mZnNldFdpZHRoID0gZWxlbS5vZmZzZXRXaWR0aDtcbiAgdmFyIG9mZnNldEhlaWdodCA9IGVsZW0ub2Zmc2V0SGVpZ2h0O1xuICBpZiAob2Zmc2V0V2lkdGggIT09IHdpZHRoIHx8IG9mZnNldEhlaWdodCAhPT0gaGVpZ2h0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHdpZHRoOiBvZmZzZXRXaWR0aCxcbiAgICAgIGhlaWdodDogb2Zmc2V0SGVpZ2h0XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsXG59XG5cbmZ1bmN0aW9uIGhhbmRsZU11dGF0aW9uICgpIHtcbiAgLy8gYHRoaXNgIGRlbm90ZXMgdGhlIHNjcm9sbGluZyBlbGVtZW50XG4gIHZhciByZWYgPSBnZXRSZW5kZXJJbmZvKHRoaXMpO1xuICB2YXIgcmVuZGVyZWQgPSByZWYucmVuZGVyZWQ7XG4gIHZhciBkZXRhY2hlZCA9IHJlZi5kZXRhY2hlZDtcbiAgaWYgKHJlbmRlcmVkICE9PSB0aGlzLl9fcmVzaXplX3JlbmRlcmVkX18pIHtcbiAgICBpZiAoIWRldGFjaGVkICYmIHRoaXMuX19yZXNpemVfdHJpZ2dlcnNfXykge1xuICAgICAgcmVzZXRUcmlnZ2Vycyh0aGlzKTtcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgaGFuZGxlU2Nyb2xsLCB0cnVlKTtcbiAgICB9XG4gICAgdGhpcy5fX3Jlc2l6ZV9yZW5kZXJlZF9fID0gcmVuZGVyZWQ7XG4gICAgcnVuQ2FsbGJhY2tzKHRoaXMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVNjcm9sbCAoKSB7XG4gIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gIC8vIGB0aGlzYCBkZW5vdGVzIHRoZSBzY3JvbGxpbmcgZWxlbWVudFxuICByZXNldFRyaWdnZXJzKHRoaXMpO1xuICBpZiAodGhpcy5fX3Jlc2l6ZV9yYWZfXykge1xuICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX19yZXNpemVfcmFmX18pO1xuICB9XG4gIHRoaXMuX19yZXNpemVfcmFmX18gPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgIHZhciB1cGRhdGVkID0gZ2V0VXBkYXRlZFNpemUodGhpcyQxKTtcbiAgICBpZiAodXBkYXRlZCkge1xuICAgICAgdGhpcyQxLl9fcmVzaXplX2xhc3RfXyA9IHVwZGF0ZWQ7XG4gICAgICBydW5DYWxsYmFja3ModGhpcyQxKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBydW5DYWxsYmFja3MgKGVsZW0pIHtcbiAgaWYgKCFlbGVtIHx8ICFlbGVtLl9fcmVzaXplX2xpc3RlbmVyc19fKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgZWxlbS5fX3Jlc2l6ZV9saXN0ZW5lcnNfXy5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgIGNhbGxiYWNrLmNhbGwoZWxlbSwgZWxlbSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbml0VHJpZ2dlcnMgKGVsZW0pIHtcbiAgdmFyIHBvc2l0aW9uID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtLCAncG9zaXRpb24nKTtcbiAgaWYgKCFwb3NpdGlvbiB8fCBwb3NpdGlvbiA9PT0gJ3N0YXRpYycpIHtcbiAgICBlbGVtLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgfVxuXG4gIGVsZW0uX19yZXNpemVfb2xkX3Bvc2l0aW9uX18gPSBwb3NpdGlvbjtcbiAgZWxlbS5fX3Jlc2l6ZV9sYXN0X18gPSB7fTtcblxuICB2YXIgdHJpZ2dlcnMgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgY2xhc3NOYW1lOiAncmVzaXplLXRyaWdnZXJzJ1xuICB9KTtcbiAgdmFyIGV4cGFuZCA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICBjbGFzc05hbWU6ICdyZXNpemUtZXhwYW5kLXRyaWdnZXInXG4gIH0pO1xuICB2YXIgZXhwYW5kQ2hpbGQgPSBjcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgdmFyIGNvbnRyYWN0ID0gY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgIGNsYXNzTmFtZTogJ3Jlc2l6ZS1jb250cmFjdC10cmlnZ2VyJ1xuICB9KTtcbiAgZXhwYW5kLmFwcGVuZENoaWxkKGV4cGFuZENoaWxkKTtcbiAgdHJpZ2dlcnMuYXBwZW5kQ2hpbGQoZXhwYW5kKTtcbiAgdHJpZ2dlcnMuYXBwZW5kQ2hpbGQoY29udHJhY3QpO1xuICBlbGVtLmFwcGVuZENoaWxkKHRyaWdnZXJzKTtcblxuICBlbGVtLl9fcmVzaXplX3RyaWdnZXJzX18gPSB7XG4gICAgdHJpZ2dlcnM6IHRyaWdnZXJzLFxuICAgIGV4cGFuZDogZXhwYW5kLFxuICAgIGV4cGFuZENoaWxkOiBleHBhbmRDaGlsZCxcbiAgICBjb250cmFjdDogY29udHJhY3RcbiAgfTtcblxuICByZXNldFRyaWdnZXJzKGVsZW0pO1xuICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGhhbmRsZVNjcm9sbCwgdHJ1ZSk7XG5cbiAgZWxlbS5fX3Jlc2l6ZV9sYXN0X18gPSB7XG4gICAgd2lkdGg6IGVsZW0ub2Zmc2V0V2lkdGgsXG4gICAgaGVpZ2h0OiBlbGVtLm9mZnNldEhlaWdodFxuICB9O1xufVxuXG5mdW5jdGlvbiByZXNldFRyaWdnZXJzIChlbGVtKSB7XG4gIHZhciByZWYgPSBlbGVtLl9fcmVzaXplX3RyaWdnZXJzX187XG4gIHZhciBleHBhbmQgPSByZWYuZXhwYW5kO1xuICB2YXIgZXhwYW5kQ2hpbGQgPSByZWYuZXhwYW5kQ2hpbGQ7XG4gIHZhciBjb250cmFjdCA9IHJlZi5jb250cmFjdDtcblxuICAvLyBiYXRjaCByZWFkXG4gIHZhciBjc3cgPSBjb250cmFjdC5zY3JvbGxXaWR0aDtcbiAgdmFyIGNzaCA9IGNvbnRyYWN0LnNjcm9sbEhlaWdodDtcbiAgdmFyIGVvdyA9IGV4cGFuZC5vZmZzZXRXaWR0aDtcbiAgdmFyIGVvaCA9IGV4cGFuZC5vZmZzZXRIZWlnaHQ7XG4gIHZhciBlc3cgPSBleHBhbmQuc2Nyb2xsV2lkdGg7XG4gIHZhciBlc2ggPSBleHBhbmQuc2Nyb2xsSGVpZ2h0O1xuXG4gIC8vIGJhdGNoIHdyaXRlXG4gIGNvbnRyYWN0LnNjcm9sbExlZnQgPSBjc3c7XG4gIGNvbnRyYWN0LnNjcm9sbFRvcCA9IGNzaDtcbiAgZXhwYW5kQ2hpbGQuc3R5bGUud2lkdGggPSBlb3cgKyAxICsgJ3B4JztcbiAgZXhwYW5kQ2hpbGQuc3R5bGUuaGVpZ2h0ID0gZW9oICsgMSArICdweCc7XG4gIGV4cGFuZC5zY3JvbGxMZWZ0ID0gZXN3O1xuICBleHBhbmQuc2Nyb2xsVG9wID0gZXNoO1xufVxuXG5leHBvcnQgeyBhZGRMaXN0ZW5lciwgcmVtb3ZlTGlzdGVuZXIgfTtcbiIsImltcG9ydHt3YXRjaCBhcyBlLHVucmVmIGFzIHQsaW5qZWN0IGFzIG4sY29tcHV0ZWQgYXMgcix3YXRjaEVmZmVjdCBhcyBvLFZ1ZTIgYXMgaSxkZWZpbmVDb21wb25lbnQgYXMgYSxzaGFsbG93UmVmIGFzIHUsdG9SZWZzIGFzIHMsZ2V0Q3VycmVudEluc3RhbmNlIGFzIGMsb25Nb3VudGVkIGFzIGwsb25CZWZvcmVVbm1vdW50IGFzIGYsaCBhcyBwLG5leHRUaWNrIGFzIHZ9ZnJvbVwidnVlLWRlbWlcIjtpbXBvcnR7dGhyb3R0bGUgYXMgZCxpbml0IGFzIGh9ZnJvbVwiZWNoYXJ0cy9jb3JlXCI7aW1wb3J0e2FkZExpc3RlbmVyIGFzIGcscmVtb3ZlTGlzdGVuZXIgYXMgbX1mcm9tXCJyZXNpemUtZGV0ZWN0b3JcIjt2YXIgTz1mdW5jdGlvbigpe3JldHVybiBPPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPTEscj1hcmd1bWVudHMubGVuZ3RoO248cjtuKyspZm9yKHZhciBvIGluIHQ9YXJndW1lbnRzW25dKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG8pJiYoZVtvXT10W29dKTtyZXR1cm4gZX0sTy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O1wiZnVuY3Rpb25cIj09dHlwZW9mIFN1cHByZXNzZWRFcnJvciYmU3VwcHJlc3NlZEVycm9yO3ZhciBiPVtcImdldFdpZHRoXCIsXCJnZXRIZWlnaHRcIixcImdldERvbVwiLFwiZ2V0T3B0aW9uXCIsXCJyZXNpemVcIixcImRpc3BhdGNoQWN0aW9uXCIsXCJjb252ZXJ0VG9QaXhlbFwiLFwiY29udmVydEZyb21QaXhlbFwiLFwiY29udGFpblBpeGVsXCIsXCJnZXREYXRhVVJMXCIsXCJnZXRDb25uZWN0ZWREYXRhVVJMXCIsXCJhcHBlbmREYXRhXCIsXCJjbGVhclwiLFwiaXNEaXNwb3NlZFwiLFwiZGlzcG9zZVwiXTtmdW5jdGlvbiB5KGUpe3JldHVybiB0PU9iamVjdC5jcmVhdGUobnVsbCksYi5mb3JFYWNoKChmdW5jdGlvbihuKXt0W25dPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgbj1bXSxyPTA7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyluW3JdPWFyZ3VtZW50c1tyXTtpZighZS52YWx1ZSl0aHJvdyBuZXcgRXJyb3IoXCJFQ2hhcnRzIGlzIG5vdCBpbml0aWFsaXplZCB5ZXQuXCIpO3JldHVybiBlLnZhbHVlW3RdLmFwcGx5KGUudmFsdWUsbil9fShuKX0pKSx0O3ZhciB0fXZhciBFPXthdXRvcmVzaXplOltCb29sZWFuLE9iamVjdF19LF89L15vblteYS16XS8saj1mdW5jdGlvbihlKXtyZXR1cm4gXy50ZXN0KGUpfTtmdW5jdGlvbiB4KGUsbil7dmFyIHI9dChlKTtyZXR1cm4gciYmXCJvYmplY3RcIj09dHlwZW9mIHImJlwidmFsdWVcImluIHI/ci52YWx1ZXx8bjpyfHxufXZhciBBPVwiZWNMb2FkaW5nT3B0aW9uc1wiO3ZhciB6PXtsb2FkaW5nOkJvb2xlYW4sbG9hZGluZ09wdGlvbnM6T2JqZWN0fSx3PW51bGwsQz1cIngtdnVlLWVjaGFydHNcIjt2YXIgTD1bXSxUPVtdOyFmdW5jdGlvbihlLHQpe2lmKGUmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudCl7dmFyIG4scj0hMD09PXQucHJlcGVuZD9cInByZXBlbmRcIjpcImFwcGVuZFwiLG89ITA9PT10LnNpbmdsZVRhZyxpPVwic3RyaW5nXCI9PXR5cGVvZiB0LmNvbnRhaW5lcj9kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHQuY29udGFpbmVyKTpkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07aWYobyl7dmFyIGE9TC5pbmRleE9mKGkpOy0xPT09YSYmKGE9TC5wdXNoKGkpLTEsVFthXT17fSksbj1UW2FdJiZUW2FdW3JdP1RbYV1bcl06VFthXVtyXT11KCl9ZWxzZSBuPXUoKTs2NTI3OT09PWUuY2hhckNvZGVBdCgwKSYmKGU9ZS5zdWJzdHJpbmcoMSkpLG4uc3R5bGVTaGVldD9uLnN0eWxlU2hlZXQuY3NzVGV4dCs9ZTpuLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGUpKX1mdW5jdGlvbiB1KCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO2lmKGUuc2V0QXR0cmlidXRlKFwidHlwZVwiLFwidGV4dC9jc3NcIiksdC5hdHRyaWJ1dGVzKWZvcih2YXIgbj1PYmplY3Qua2V5cyh0LmF0dHJpYnV0ZXMpLG89MDtvPG4ubGVuZ3RoO28rKyllLnNldEF0dHJpYnV0ZShuW29dLHQuYXR0cmlidXRlc1tuW29dXSk7dmFyIGE9XCJwcmVwZW5kXCI9PT1yP1wiYWZ0ZXJiZWdpblwiOlwiYmVmb3JlZW5kXCI7cmV0dXJuIGkuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KGEsZSksZX19KFwieC12dWUtZWNoYXJ0cywuZWNoYXJ0cy1pbm5lcntkaXNwbGF5OmJsb2NrO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7bWluLXdpZHRoOjB9XFxuXCIse30pO3ZhciBTPWZ1bmN0aW9uKCl7aWYobnVsbCE9dylyZXR1cm4gdztpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgSFRNTEVsZW1lbnR8fFwidW5kZWZpbmVkXCI9PXR5cGVvZiBjdXN0b21FbGVtZW50cylyZXR1cm4gdz0hMTt0cnl7bmV3IEZ1bmN0aW9uKFwidGFnXCIsXCJjbGFzcyBFQ2hhcnRzRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcXG4gIF9fZGlzcG9zZSA9IG51bGw7XFxuXFxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcXG4gICAgaWYgKHRoaXMuX19kaXNwb3NlKSB7XFxuICAgICAgdGhpcy5fX2Rpc3Bvc2UoKTtcXG4gICAgICB0aGlzLl9fZGlzcG9zZSA9IG51bGw7XFxuICAgIH1cXG4gIH1cXG59XFxuXFxuaWYgKGN1c3RvbUVsZW1lbnRzLmdldCh0YWcpID09IG51bGwpIHtcXG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZSh0YWcsIEVDaGFydHNFbGVtZW50KTtcXG59XFxuXCIpKEMpfWNhdGNoKGUpe3JldHVybiB3PSExfXJldHVybiB3PSEwfSgpO2kmJmkuY29uZmlnLmlnbm9yZWRFbGVtZW50cy5wdXNoKEMpO3ZhciBEPVwiZWNUaGVtZVwiLFU9XCJlY0luaXRPcHRpb25zXCIsaz1cImVjVXBkYXRlT3B0aW9uc1wiLEI9YSh7bmFtZTpcImVjaGFydHNcIixwcm9wczpPKE8oe29wdGlvbjpPYmplY3QsdGhlbWU6e3R5cGU6W09iamVjdCxTdHJpbmddfSxpbml0T3B0aW9uczpPYmplY3QsdXBkYXRlT3B0aW9uczpPYmplY3QsZ3JvdXA6U3RyaW5nLG1hbnVhbFVwZGF0ZTpCb29sZWFufSxFKSx6KSxlbWl0czp7fSxpbmhlcml0QXR0cnM6ITEsc2V0dXA6ZnVuY3Rpb24odCxpKXt2YXIgYT1pLmF0dHJzLHA9dSgpLGI9dSgpLEU9dSgpLF89dSgpLHo9bihELG51bGwpLHc9bihVLG51bGwpLEM9bihrLG51bGwpLEw9cyh0KSxUPUwuYXV0b3Jlc2l6ZSxCPUwubWFudWFsVXBkYXRlLFA9TC5sb2FkaW5nLEg9TC5sb2FkaW5nT3B0aW9ucyxNPXIoKGZ1bmN0aW9uKCl7cmV0dXJuIF8udmFsdWV8fHQub3B0aW9ufHxudWxsfSkpLFI9cigoZnVuY3Rpb24oKXtyZXR1cm4gdC50aGVtZXx8eCh6LHt9KX0pKSxGPXIoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuaW5pdE9wdGlvbnN8fHgodyx7fSl9KSksTj1yKChmdW5jdGlvbigpe3JldHVybiB0LnVwZGF0ZU9wdGlvbnN8fHgoQyx7fSl9KSkscT1yKChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgdD17fTtmb3IodmFyIG4gaW4gZSlqKG4pfHwodFtuXT1lW25dKTtyZXR1cm4gdH0oYSl9KSksST1jKCkucHJveHkuJGxpc3RlbmVycztmdW5jdGlvbiBXKGUpe2lmKGIudmFsdWUpe3ZhciBuPUUudmFsdWU9aChiLnZhbHVlLFIudmFsdWUsRi52YWx1ZSk7dC5ncm91cCYmKG4uZ3JvdXA9dC5ncm91cCk7dmFyIHI9STtyfHwocj17fSxPYmplY3Qua2V5cyhhKS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiAwPT09ZS5pbmRleE9mKFwib25cIikmJmUubGVuZ3RoPjJ9KSkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jaGFyQXQoMikudG9Mb3dlckNhc2UoKStlLnNsaWNlKDMpO1wiT25jZVwiPT09dC5zdWJzdHJpbmcodC5sZW5ndGgtNCkmJih0PVwiflwiLmNvbmNhdCh0LnN1YnN0cmluZygwLHQubGVuZ3RoLTQpKSksclt0XT1hW2VdfSkpKSxPYmplY3Qua2V5cyhyKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1yW2VdO2lmKHQpe3ZhciBvPWUudG9Mb3dlckNhc2UoKTtcIn5cIj09PW8uY2hhckF0KDApJiYobz1vLnN1YnN0cmluZygxKSx0Ll9fb25jZV9fPSEwKTt2YXIgaT1uO2lmKDA9PT1vLmluZGV4T2YoXCJ6cjpcIikmJihpPW4uZ2V0WnIoKSxvPW8uc3Vic3RyaW5nKDMpKSx0Ll9fb25jZV9fKXtkZWxldGUgdC5fX29uY2VfXzt2YXIgYT10O3Q9ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sbj0wO248YXJndW1lbnRzLmxlbmd0aDtuKyspZVtuXT1hcmd1bWVudHNbbl07YS5hcHBseSh2b2lkIDAsZSksaS5vZmYobyx0KX19aS5vbihvLHQpfX0pKSxULnZhbHVlP3YoKGZ1bmN0aW9uKCl7biYmIW4uaXNEaXNwb3NlZCgpJiZuLnJlc2l6ZSgpLG8oKX0pKTpvKCl9ZnVuY3Rpb24gbygpe3ZhciB0PWV8fE0udmFsdWU7dCYmbi5zZXRPcHRpb24odCxOLnZhbHVlKX19ZnVuY3Rpb24gWigpe0UudmFsdWUmJihFLnZhbHVlLmRpc3Bvc2UoKSxFLnZhbHVlPXZvaWQgMCl9dmFyICQ9bnVsbDtlKEIsKGZ1bmN0aW9uKG4pe1wiZnVuY3Rpb25cIj09dHlwZW9mICQmJigkKCksJD1udWxsKSxufHwoJD1lKChmdW5jdGlvbigpe3JldHVybiB0Lm9wdGlvbn0pLChmdW5jdGlvbihlLHQpe2UmJihFLnZhbHVlP0UudmFsdWUuc2V0T3B0aW9uKGUsTyh7bm90TWVyZ2U6ZSE9PXR9LE4udmFsdWUpKTpXKCkpfSkse2RlZXA6ITB9KSl9KSx7aW1tZWRpYXRlOiEwfSksZShbUixGXSwoZnVuY3Rpb24oKXtaKCksVygpfSkse2RlZXA6ITB9KSxvKChmdW5jdGlvbigpe3QuZ3JvdXAmJkUudmFsdWUmJihFLnZhbHVlLmdyb3VwPXQuZ3JvdXApfSkpO3ZhciBHPXkoRSk7cmV0dXJuIGZ1bmN0aW9uKGUsdCxpKXt2YXIgYT1uKEEse30pLHU9cigoZnVuY3Rpb24oKXtyZXR1cm4gTyhPKHt9LHgoYSx7fSkpLG51bGw9PWk/dm9pZCAwOmkudmFsdWUpfSkpO28oKGZ1bmN0aW9uKCl7dmFyIG49ZS52YWx1ZTtuJiYodC52YWx1ZT9uLnNob3dMb2FkaW5nKHUudmFsdWUpOm4uaGlkZUxvYWRpbmcoKSl9KSl9KEUsUCxIKSxmdW5jdGlvbih0LG4scil7dmFyIG89bnVsbDtlKFtyLHQsbl0sKGZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1lWzBdLGk9ZVsxXSxhPWVbMl07aWYociYmaSYmYSl7dmFyIHU9ITA9PT1hP3t9OmEscz11LnRocm90dGxlLGM9dm9pZCAwPT09cz8xMDA6cyxsPXUub25SZXNpemUsZj1mdW5jdGlvbigpe2kucmVzaXplKCksbnVsbD09bHx8bCgpfTtvPWM/ZChmLGMpOmYsZyhyLG8pfW4oKGZ1bmN0aW9uKCl7ciYmbyYmbShyLG8pfSkpfSkpfShFLFQsYiksbCgoZnVuY3Rpb24oKXtXKCl9KSksZigoZnVuY3Rpb24oKXtTJiZwLnZhbHVlP3AudmFsdWUuX19kaXNwb3NlPVo6WigpfSkpLE8oe2NoYXJ0OkUscm9vdDpwLGlubmVyOmIsc2V0T3B0aW9uOmZ1bmN0aW9uKGUsbil7dC5tYW51YWxVcGRhdGUmJihfLnZhbHVlPWUpLEUudmFsdWU/RS52YWx1ZS5zZXRPcHRpb24oZSxufHx7fSk6VyhlKX0sbm9uRXZlbnRBdHRyczpxfSxHKX0scmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGU9aT97YXR0cnM6dGhpcy5ub25FdmVudEF0dHJzfTpPKHt9LHRoaXMubm9uRXZlbnRBdHRycyk7cmV0dXJuIGUucmVmPVwicm9vdFwiLGUuY2xhc3M9ZS5jbGFzcz9bXCJlY2hhcnRzXCJdLmNvbmNhdChlLmNsYXNzKTpcImVjaGFydHNcIixwKEMsZSxbcChcImRpdlwiLHtyZWY6XCJpbm5lclwiLGNsYXNzOlwiZWNoYXJ0cy1pbm5lclwifSldKX19KTtleHBvcnR7VSBhcyBJTklUX09QVElPTlNfS0VZLEEgYXMgTE9BRElOR19PUFRJT05TX0tFWSxEIGFzIFRIRU1FX0tFWSxrIGFzIFVQREFURV9PUFRJT05TX0tFWSxCIGFzIGRlZmF1bHR9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLm1pbi5qcy5tYXBcbiIsIjx0ZW1wbGF0ZT5cbiAgICA8cS1wYWdlIGNsYXNzPVwicS1wYS1zbVwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTZcIj5cbiAgICAgICAgICAgICAgICA8cS1jYXJkPlxuICAgICAgICAgICAgICAgICAgICA8cS1jYXJkLXNlY3Rpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1oNlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIExlYWRzIC8gV29jaGUgamUgUG9ydGFsXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9xLWNhcmQtc2VjdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPHEtY2FyZC1zZWN0aW9uIGNsYXNzPVwiZWNoYXJ0c1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHYtY2hhcnQgOm9wdGlvbj1cImxlYWRQb3J0YWxcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L3EtY2FyZC1zZWN0aW9uPlxuICAgICAgICAgICAgICAgIDwvcS1jYXJkPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTZcIj5cbiAgICAgICAgICAgICAgICA8cS1jYXJkPlxuICAgICAgICAgICAgICAgICAgICA8cS1jYXJkLXNlY3Rpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1oNlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIExlYWRzIC8gV29jaGUgamUgS2F0ZWdvcmllXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9xLWNhcmQtc2VjdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPHEtY2FyZC1zZWN0aW9uIGNsYXNzPVwiZWNoYXJ0c1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHYtY2hhcnQgOm9wdGlvbj1cImxlYWRDYXRlZ29yeVwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvcS1jYXJkLXNlY3Rpb24+XG4gICAgICAgICAgICAgICAgPC9xLWNhcmQ+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9xLXBhZ2U+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0IGxhbmc9XCJ0c1wiIHNldHVwPlxuaW1wb3J0IE5hdkJhciAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uL2NvbXBvbmVudHMvTmF2QmFyLnZ1ZSc7IFxuXG5pbXBvcnQgeyB1c2VEYXRhU3RvcmUgfSAgICAgICAgICAgICAgICAgZnJvbSAnc3JjL3N0b3Jlcy9kYXRhLnN0b3JlJztcblxuaW1wb3J0IHsgdXNlIH0gICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ2VjaGFydHMvY29yZSc7XG5pbXBvcnQgeyBDYW52YXNSZW5kZXJlciB9ICAgICAgICAgICAgICAgZnJvbSAnZWNoYXJ0cy9yZW5kZXJlcnMnO1xuaW1wb3J0IHsgUGllQ2hhcnQgfSAgICAgICAgICAgICAgICAgICAgIGZyb20gJ2VjaGFydHMvY2hhcnRzJztcbmltcG9ydCB7XG4gICAgVGl0bGVDb21wb25lbnQsXG4gICAgVG9vbHRpcENvbXBvbmVudCxcbiAgICBMZWdlbmRDb21wb25lbnQsXG59ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSAnZWNoYXJ0cy9jb21wb25lbnRzJztcbmltcG9ydCBWQ2hhcnQsIHsgVEhFTUVfS0VZIH0gICAgICAgICAgICBmcm9tICd2dWUtZWNoYXJ0cyc7XG5cbmltcG9ydCBtb21lbnQgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICdtb21lbnQnO1xuaW1wb3J0IF8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCBkZWJ1ZyAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICdkZWJ1Zyc7XG5jb25zdCBsb2cgICAgICAgICA9IGRlYnVnKCdhcHA6c3RhdGlzdGljcycpO1xuXG5sb2coICdzdGFydCcgKTtcblxudXNlKFtcbiAgQ2FudmFzUmVuZGVyZXIsXG4gIFBpZUNoYXJ0LFxuICBUaXRsZUNvbXBvbmVudCxcbiAgVG9vbHRpcENvbXBvbmVudCxcbiAgTGVnZW5kQ29tcG9uZW50LFxuXSk7XG5cbnByb3ZpZGUoVEhFTUVfS0VZLCAnZGFyaycpO1xuXG5jb25zdCBwb3J0YWxTdG9yZSAgICAgICAgICAgPSB1c2VEYXRhU3RvcmUoICdwb3J0YWwnLCAncG9ydGFsJyApO1xuY29uc3QgY2F0ZWdvcnlTdG9yZSAgICAgICAgID0gdXNlRGF0YVN0b3JlKCAnY2F0ZWdvcmllcycsICdjYXRlZ29yaWVzJyApO1xuXG5jb25zdCBsZWFkUG9ydGFsICAgICAgICAgPSByZWFjdGl2ZSh7XG4gICAgICAgICAgICBzZXJpZXM6ICAgICAgIFtdLFxuICAgICAgICAgICAgZ3JpZDogICAgICAgICB7XG4gICAgICAgICAgICAgICAgYm90dG9tOiAgICAgICAnMTAlJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsZWdlbmQ6ICAgICAgIHt9LFxuICAgICAgICAgICAgZGF0YXNldDogICAgICB7fSxcbiAgICAgICAgICAgIHRvb2x0aXA6ICAgICAge30sXG4gICAgICAgICAgICB4QXhpczogICAgICAgIHsgdHlwZTogJ2NhdGVnb3J5JyB9LFxuICAgICAgICAgICAgYXhpc0xhYmVsOiAgICB7fSxcbiAgICAgICAgICAgIHlBeGlzOiAgICAgICAge31cbiAgICAgICAgfSksXG4gICAgICAgIGxlYWRDYXRlZ29yeSAgICAgID0gcmVhY3RpdmUoe1xuICAgICAgICAgICAgc2VyaWVzOiAgICAgICBbXSxcbiAgICAgICAgICAgIGdyaWQ6ICAgICAgICAge1xuICAgICAgICAgICAgICAgIGJvdHRvbTogICAgICAgJzEwJScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGVnZW5kOiAgICAgICB7XG4gICAgICAgICAgICAgICAgZm9ybWF0dGVyOiAgICAobmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhdCAgICAgICA9IF8uZmluZCggY2F0ZWdvcmllcy52YWx1ZSwgaXRlbSA9PiBpdGVtLm5hbWUgPT09IG5hbWUgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhdCA/IGNhdC5kZXNjIDogbmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGF0YXNldDogICAgICB7fSxcbiAgICAgICAgICAgIHRvb2x0aXA6ICAgICAge30sXG4gICAgICAgICAgICB4QXhpczogICAgICAgIHsgdHlwZTogJ2NhdGVnb3J5JyB9LFxuICAgICAgICAgICAgYXhpc0xhYmVsOiAgICB7fSxcbiAgICAgICAgICAgIHlBeGlzOiAgICAgICAge31cbiAgICAgICAgfSksXG4gICAgICAgIGZpcnN0RGF5ICAgICAgICAgID0gbW9tZW50KCkuc3VidHJhY3QoIDE1LCAnd2Vla3MnICk7XG5cbmNvbnN0IHsgZGF0YTogcG9ydGFscyB9ICAgICA9IHN0b3JlVG9SZWZzKCBwb3J0YWxTdG9yZSApO1xuY29uc3QgeyBkYXRhOiBjYXRlZ29yaWVzIH0gID0gc3RvcmVUb1JlZnMoIGNhdGVnb3J5U3RvcmUgKTtcblxuKGFzeW5jICgpID0+IHtcbiAgICBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICBheGlvc1xuICAgICAgICAgICAgICAgIC5wb3N0KCAnL2N1c3RvbS9nZXRWaWV3L2xlYWRQb3J0YWwnLCB7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogeyAkZ3RlOiBmaXJzdERheS5mb3JtYXQoJ1lZWVktTU0tREQnKSB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGF4aW9zXG4gICAgICAgICAgICAgICAgLnBvc3QoICcvY3VzdG9tL2dldFZpZXcvbGVhZENhdGVnb3J5Jywge1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHsgJGd0ZTogZmlyc3REYXkuZm9ybWF0KCdZWVlZLU1NLUREJykgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBwb3J0YWxTdG9yZS5nZXRTdG9yZSgpLFxuICAgICAgICAgICAgY2F0ZWdvcnlTdG9yZS5nZXRTdG9yZSgpXG4gICAgICAgIF0pXG4gICAgICAgIC50aGVuKCAocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkaW1Qb3J0YWwgICAgICAgICA9IFsgJ3dlZWsnLCAuLi5fLm1hcCggcG9ydGFscy52YWx1ZSwgaXRlbSA9PiBpdGVtLm5hbWUgKSBdLFxuICAgICAgICAgICAgICAgICAgICBkaW1DYXQgICAgICAgICAgICA9IFsgJ3dlZWsnLCAuLi5fLm1hcCggY2F0ZWdvcmllcy52YWx1ZSwgaXRlbSA9PiBpdGVtLm5hbWUgKSBdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsZWFkUG9ydGFsLnNlcmllcyAgICAgICA9IF8ubWFwKCBwb3J0YWxzLnZhbHVlLCAoaXRlbTogYW55KSA9PiAoeyB0eXBlOiAnbGluZScgfSkgKTtcbiAgICAgICAgICAgIGxlYWRQb3J0YWwuZGF0YXNldCAgICAgID0ge1xuICAgICAgICAgICAgICAgIGRpbWVuc2lvbnM6ICAgICBkaW1Qb3J0YWwsXG4gICAgICAgICAgICAgICAgc291cmNlOiAgICAgICAgIF8ubWFwKCByZXN1bHRbMF0uZGF0YSwgaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3ZWVrOiAgICAgICBpdGVtLndlZWssXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5pdGVtLmRpbVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gKVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbGVhZENhdGVnb3J5LnNlcmllcyAgICAgICA9IF8ubWFwKCBjYXRlZ29yaWVzLnZhbHVlLCAoaXRlbTogYW55KSA9PiAoeyB0eXBlOiAnbGluZScgfSkgKTtcbiAgICAgICAgICAgIGxlYWRDYXRlZ29yeS5kYXRhc2V0ICAgICAgPSB7XG4gICAgICAgICAgICAgICAgZGltZW5zaW9uczogICAgIGRpbUNhdCxcbiAgICAgICAgICAgICAgICBzb3VyY2U6ICAgICAgICAgXy5tYXAoIHJlc3VsdFsxXS5kYXRhLCBpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdlZWs6ICAgICAgIGl0ZW0ud2VlayxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLml0ZW0uZGltXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSApXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICBcbn0pKCk7XG5cbjwvc2NyaXB0PlxuXG48c3R5bGUgc2NvcGVkPlxuXG4uZWNoYXJ0cyB7XG4gICAgaGVpZ2h0OiAzNTBweDtcbn1cbjwvc3R5bGU+XG4iXSwibmFtZXMiOlsiYiIsImQiLCJCcm93c2VyIiwiRW52IiwiZW52Iiwic3R5bGUiLCJtYXAiLCJjbG9uZSIsImxlbiIsImlzT2JqZWN0IiwiZWFjaCIsImJpbmQiLCJjdXJyeSIsIm5vcm1hbGl6ZUNzc0FycmF5IiwiTWFwUG9seWZpbGwiLCJIYXNoTWFwIiwia2V5cyIsImNyZWF0ZSIsIngiLCJ5Iiwib3V0Iiwic2NhbGUiLCJkaXN0IiwiYXBwbHlUcmFuc2Zvcm0iLCJtIiwibWluIiwibWF4IiwiUGFyYW0iLCJlIiwiRHJhZ2dhYmxlIiwiRXZlbnRmdWwiLCJqIiwiX2NhbGNPdXQiLCJib3giLCJHZXN0dXJlTWdyIiwiZXZlbnRVdGlsLmNsaWVudFRvTG9jYWwiLCJvdXQyIiwiUG9pbnQiLCJtYXRoTWluIiwibWF0aE1heCIsIm1pblR2IiwibWF4VHYiLCJCb3VuZGluZ1JlY3QiLCJtYXRyaXguY3JlYXRlIiwibWF0cml4LnRyYW5zbGF0ZSIsIm1hdHJpeC5zY2FsZSIsImV2ZW50VG9vbC5zdG9wIiwiRW1wdHlQcm94eSIsIkhvdmVyZWRSZXN1bHQiLCJ0bXBSZWN0IiwiSGFuZGxlciIsInV0aWwuZWFjaCIsIlBJMiIsInZlYzIuZGlzdCIsImNvbXBhcmUiLCJzdGFydCIsImsiLCJTdG9yYWdlIiwicm9vdHMiLCJ0aW1zb3J0IiwidXRpbC5pbmRleE9mIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibWF0aFNxcnQiLCJFUFNJTE9OIiwidjJDcmVhdGUiLCJpc05vdEFyb3VuZFplcm8iLCJBIiwiQiIsIkMiLCJUIiwiZXh0cmVtYSIsInYyRGlzdFNxdWFyZSIsInBvaW50cyIsIkNsaXAiLCJlYXNpbmdGdW5jcyIsIkVudHJ5IiwiTGlua2VkTGlzdCIsIkxSVSIsImgiLCJsZW4yIiwiVHJhY2siLCJjb2xvci5wYXJzZSIsInciLCJBbmltYXRvciIsInNlbGYiLCJpIiwiQW5pbWF0aW9uIiwienJVdGlsLm1hcCIsIkZha2VHbG9iYWxFdmVudCIsInpyVXRpbC5ub29wIiwienJVdGlsLmVhY2giLCJET01IYW5kbGVyU2NvcGUiLCJIYW5kbGVyRG9tUHJveHkiLCJtYXRyaXguaWRlbnRpdHkiLCJUcmFuc2Zvcm1hYmxlIiwibWF0cml4Lm11bCIsIm1hdHJpeC5jb3B5IiwibWF0cml4LmludmVydCIsInZlY3Rvci5hcHBseVRyYW5zZm9ybSIsIm1hdHJpeC5yb3RhdGUiLCJwYXJzZVBlcmNlbnQiLCJkaXN0YW5jZSIsIlBSSU1BUllfU1RBVEVTX0tFWVMiLCJFbGVtZW50IiwiYmFja2dyb3VuZENvbG9yIiwidGFyZ2V0IiwiYW5pbWF0b3IiLCJHcm91cCIsInpyVXRpbC5pbmRleE9mIiwiaW5zdGFuY2VzIiwiWlJlbmRlciIsInpyVXRpbC5rZXlzIiwienJVdGlsLnJldHJpZXZlMiIsImVuZCIsImluaXQiLCJ6clV0aWwuZ3VpZCIsInpyVXRpbC5pc1N0cmluZyIsInJvdW5kIiwienJVdGlsLnJlZHVjZSIsIl9hIiwienJVdGlsLmFzc2VydCIsInpyVXRpbC5pbmhlcml0cyIsInpyVXRpbC5leHRlbmQiLCJ6clV0aWwuaXNGdW5jdGlvbiIsIkFyZWFTdHlsZU1peGluIiwiUmljaFRleHRUb2tlbiIsIlJpY2hUZXh0TGluZSIsIlJpY2hUZXh0Q29udGVudEJsb2NrIiwibGluZSIsImxpbmVXaWR0aCIsImxpbmVIZWlnaHQiLCJpbWFnZUhlbHBlci5maW5kRXhpc3RJbWFnZSIsImltYWdlSGVscGVyLmlzSW1hZ2VSZWFkeSIsIkRpc3BsYXlhYmxlIiwibWF0aFNpbiIsIm1hdGhDb3MiLCJ2ZWMyLmNyZWF0ZSIsImN1YmljRXh0cmVtYSIsImN1cnZlLmN1YmljRXh0cmVtYSIsImN1YmljQXQiLCJjdXJ2ZS5jdWJpY0F0IiwicXVhZHJhdGljRXh0cmVtdW0iLCJjdXJ2ZS5xdWFkcmF0aWNFeHRyZW11bSIsInF1YWRyYXRpY0F0IiwiY3VydmUucXVhZHJhdGljQXQiLCJ2ZWMyLm1pbiIsInZlYzIubWF4IiwiQ01EIiwibWF0aEFicyIsIlBJIiwiUGF0aFByb3h5IiwiZHByIiwieDIiLCJ5MiIsImNvbnRhaW5TdHJva2UiLCJfYiIsImN1cnZlLmN1YmljUHJvamVjdFBvaW50IiwiZGlyIiwiY3VydmUuY3ViaWNSb290QXQiLCJjdXJ2ZS5xdWFkcmF0aWNSb290QXQiLCJsaW5lLmNvbnRhaW5TdHJva2UiLCJjdWJpYy5jb250YWluU3Ryb2tlIiwicXVhZHJhdGljLmNvbnRhaW5TdHJva2UiLCJhcmMuY29udGFpblN0cm9rZSIsIlBhdGgiLCJpc0RhcmtNb2RlIiwicGF0aENvbnRhaW4uY29udGFpblN0cm9rZSIsInBhdGhDb250YWluLmNvbnRhaW4iLCJfc3VwZXIiLCJTdWIiLCJUU3BhbiIsIlpSSW1hZ2UiLCJidWlsZFBhdGgiLCJ0b3RhbCIsInN1YlBpeGVsT3B0aW1pemVMaW5lIiwic3ViUGl4ZWxPcHRpbWl6ZSIsInN1YlBpeGVsT3B0aW1pemVSZWN0IiwiUmVjdFNoYXBlIiwic3ViUGl4ZWxPcHRpbWl6ZU91dHB1dFNoYXBlIiwiUmVjdCIsInJvdW5kUmVjdEhlbHBlci5idWlsZFBhdGgiLCJaUlRleHQiLCJjb2xvclRvb2wubGlmdCIsInN0b3AiLCJpc1NlcmllcyIsImRpc3BhdGNoZXIiLCJMIiwidjJBcHBseVRyYW5zZm9ybSIsIlNWR1BhdGgiLCJtZXJnZVBhdGgiLCJDaXJjbGVTaGFwZSIsIkNpcmNsZSIsIkVsbGlwc2VTaGFwZSIsIkVsbGlwc2UiLCJTZWN0b3JTaGFwZSIsIlNlY3RvciIsInJvdW5kU2VjdG9ySGVscGVyLmJ1aWxkUGF0aCIsIlJpbmdTaGFwZSIsIlJpbmciLCJ2Mk1pbiIsInYyTWF4IiwidjJDbG9uZSIsInYyU3ViIiwidjJTY2FsZSIsInYyRGlzdGFuY2UiLCJ2MkFkZCIsIlBvbHlnb25TaGFwZSIsIlBvbHlnb24iLCJwb2x5SGVscGVyLmJ1aWxkUGF0aCIsIlBvbHlsaW5lU2hhcGUiLCJQb2x5bGluZSIsIkxpbmVTaGFwZSIsIkxpbmUiLCJCZXppZXJDdXJ2ZVNoYXBlIiwiQmV6aWVyQ3VydmUiLCJ2ZWMyLm5vcm1hbGl6ZSIsIkFyY1NoYXBlIiwiQXJjIiwiQ29tcG91bmRQYXRoIiwiR3JhZGllbnQiLCJMaW5lYXJHcmFkaWVudCIsIlJhZGlhbEdyYWRpZW50IiwiT3JpZW50ZWRCb3VuZGluZ1JlY3QiLCJJbmNyZW1lbnRhbERpc3BsYXlhYmxlIiwiRGlzcGxheWJsZSIsInVwZGF0ZVByb3BzIiwicGF0aFRvb2wuZXh0ZW5kRnJvbVN0cmluZyIsImxheW91dCIsInBhdGhUb29sLmNyZWF0ZUZyb21TdHJpbmciLCJwYXRoVG9vbC5tZXJnZVBhdGgiLCJzdWJQaXhlbE9wdGltaXplVXRpbC5zdWJQaXhlbE9wdGltaXplTGluZSIsInN1YlBpeGVsT3B0aW1pemVVdGlsLnN1YlBpeGVsT3B0aW1pemVSZWN0Iiwic3ViUGl4ZWxPcHRpbWl6ZVV0aWwuc3ViUGl4ZWxPcHRpbWl6ZSIsImludmVydCIsImxhYmVsU3RhdGVzVGV4dHMiLCJUZXh0U3R5bGVNaXhpbiIsIkxpbmVTdHlsZU1peGluIiwiSXRlbVN0eWxlTWl4aW4iLCJNb2RlbCIsInpyVXRpbC5tZXJnZSIsIm51bWJlclV0aWwucGFyc2VEYXRlIiwiUyIsInpyVXRpbC5ub3JtYWxpemVDc3NBcnJheSIsInpyVXRpbC50cmltIiwidGltZUZvcm1hdCIsInpyVXRpbC5pc1N0cmluZ1NhZmUiLCJ6clV0aWwuaXNOdW1iZXIiLCJ6clV0aWwuaXNBcnJheSIsInpyVXRpbC5pc09iamVjdCIsInpyVXRpbC5jdXJyeSIsImZvcm1hdFV0aWwubm9ybWFsaXplQ3NzQXJyYXkiLCJtZXJnZSIsImNvcHkiLCJpbm5lciIsIkNvbXBvbmVudE1vZGVsIiwiY29tcG9uZW50VXRpbC5nZXRVSUQiLCJsYXlvdXQuZmV0Y2hMYXlvdXRNb2RlIiwibGF5b3V0LmdldExheW91dFBhcmFtcyIsImxheW91dC5tZXJnZUxheW91dFBhcmFtIiwiY29tcG9uZW50VXRpbC5lbmFibGVTdWJUeXBlRGVmYXVsdGVyIiwiY29tcG9uZW50VXRpbC5lbmFibGVUb3BvbG9naWNhbFRyYXZlbCIsImlkeFJlc3VsdCIsInZhbCIsIlBhbGV0dGVNaXhpbiIsIkdsb2JhbE1vZGVsIiwidGhlbWUiLCJvcHRpb25QcmVwcm9jZXNzb3JGdW5jcyIsIm1vZGVsVXRpbC5ub3JtYWxpemVUb0FycmF5IiwibW9kZWxVdGlsLm1hcHBpbmdUb0V4aXN0cyIsIm1vZGVsVXRpbC5zZXRDb21wb25lbnRUeXBlVG9LZXlJbmZvIiwibW9kZWxVdGlsLmlzQ29tcG9uZW50SWRJbnRlcm5hbCIsImNtcHRzIiwiY21wdCIsIm1vZGVsVXRpbC5jb252ZXJ0T3B0aW9uSWROYW1lIiwiRXh0ZW5zaW9uQVBJIiwienJVdGlsLmJpbmQiLCJDb29yZGluYXRlU3lzdGVtTWFuYWdlciIsIk9wdGlvbk1hbmFnZXIiLCJ6clV0aWwuZGVmYXVsdHMiLCJtb2RlbFV0aWwuVEVYVF9TVFlMRV9PUFRJT05TIiwienJVdGlsLmlzVHlwZWRBcnJheSIsImNvbXBhdFN0eWxlIiwic2VyaWVzVHlwZSIsIm9wdGlvbiIsIlNvdXJjZUltcGwiLCJEZWZhdWx0RGF0YVByb3ZpZGVyIiwiZXh0ZW50IiwiRGF0YUZvcm1hdE1peGluIiwiVGFzayIsIlNvcnRPcmRlckNvbXBhcmF0b3IiLCJFeHRlcm5hbFNvdXJjZSIsImVyck1zZyIsIkN0b3JJbnQzMkFycmF5IiwiRGF0YVN0b3JlIiwiZGltIiwibWluMiIsIm1heDIiLCJTb3VyY2VNYW5hZ2VyIiwiZGF0YXNldE1vZGVsIiwic3ViTWFya3VwVGV4dCIsIlRvb2x0aXBNYXJrdXBTdHlsZUNyZWF0b3IiLCJpc1ZhbHVlTXVsdGlwbGVMaW5lIiwibW9kZWxVdGlsLm1ha2VJbm5lciIsIlNlcmllc01vZGVsIiwibW9kZWxVdGlsLmRlZmF1bHRFbXBoYXNpcyIsInpyVXRpbC5jcmVhdGVIYXNoTWFwIiwidG1wQXJyIiwienJVdGlsLm1peGluIiwibW9kZWxVdGlsLmlzTmFtZVNwZWNpZmllZCIsInpyVXRpbC5jb25jYXRBcnJheSIsIkNvbXBvbmVudFZpZXciLCJjbGF6elV0aWwuZW5hYmxlQ2xhc3NFeHRlbmQiLCJjbGF6elV0aWwuZW5hYmxlQ2xhc3NNYW5hZ2VtZW50IiwiQ2hhcnRWaWV3IiwibW9kZWxVdGlsLnF1ZXJ5RGF0YUluZGV4IiwiZ2V0U3R5bGUiLCJjb2xvclBhbGV0dGUiLCJkYXRhIiwiZ3JhcGhpYy5Hcm91cCIsImdyYXBoaWMuUmVjdCIsImdyYXBoaWMuVGV4dCIsImdyYXBoaWMuQXJjIiwiU2NoZWR1bGVyIiwib3B0IiwiRUNFdmVudFByb2Nlc3NvciIsInF1ZXJ5Iiwic3ltYm9sUHJvcE5hbWUiLCJXZWFrTWFwIiwiZ3JhcGhpYy5QYXRoIiwiZ3JhcGhpYy5MaW5lIiwiZ3JhcGhpYy5DaXJjbGUiLCJpbm5lckNvbG9yIiwiZ3JhcGhpYy5tYWtlSW1hZ2UiLCJncmFwaGljLm1ha2VQYXRoIiwicGF0dGVybiIsIndpZHRoIiwiaGVpZ2h0IiwiZGVjYWwiLCJNZXNzYWdlQ2VudGVyIiwiRUNoYXJ0cyIsInpyZW5kZXIuaW5pdCIsImJhY2t3YXJkQ29tcGF0IiwiZ3JhcGhpYy5JbWFnZSIsIm1vZGVsVXRpbC5wYXJzZUZpbmRlciIsIm1vZGVsVXRpbC5zZXRBdHRyaWJ1dGUiLCJjaGFydCIsImxpZmVjeWNsZSIsInZpZXciLCJtb2RlbFV0aWwucHJlUGFyc2VGaW5kZXIiLCJ6IiwiZ3JhcGhpYy5pc0VsZW1lbnRSZW1vdmVkIiwibW9kZWxVdGlsLmdldEF0dHJpYnV0ZSIsInJlZ2lzdGVyTWFwIiwibG9hZGluZ0RlZmF1bHQiLCJEYXRhRGlmZmVyIiwiRGltZW5zaW9uVXNlck91cHV0IiwiU2VyaWVzRGltZW5zaW9uRGVmaW5lIiwiU2VyaWVzRGF0YVNjaGVtYSIsIlNlcmllc0RhdGEiLCJ6clV0aWwuaXNBcnJheUxpa2UiLCJ6clV0aWwuc2xpY2UiLCJ6clV0aWwuY2xvbmUiLCJyZXN1bHRJdGVtIiwiY29vcmREaW0iLCJyZXN1bHREaW1JZHgiLCJ2ZWN0b3IuZGlzdCIsInZlY3Rvci5sZXJwIiwiZGVsdGEiLCJpdGVtIiwicmVjdCIsIkxheWVyIiwidXRpbC5pc09iamVjdCIsInV0aWwuZGlzYWJsZVVzZXJTZWxlY3QiLCJ1dGlsLmlzR3JhZGllbnRPYmplY3QiLCJ1dGlsLmlzSW1hZ2VQYXR0ZXJuT2JqZWN0IiwiQ2FudmFzUGFpbnRlciIsInV0aWwuZXh0ZW5kIiwibGF5ZXIiLCJ1dGlsLm1lcmdlIiwidXRpbC5sb2dFcnJvciIsImluc3RhbGwiLCJSQURJQU4iLCJsYXlvdXQuZ2V0TGF5b3V0UmVjdCIsInZpZXdSZWN0IiwiY2VudGVyIiwiZHgiLCJsYWJlbCIsImxhYmVsTGluZSIsImxpbmVQb2ludHMiLCJyb3RhdGUiLCJzZWxlY3RTdGF0ZSIsIlBpZVBpZWNlIiwiZ3JhcGhpYy5pbml0UHJvcHMiLCJncmFwaGljLnVwZGF0ZVByb3BzIiwiZ3JhcGhpYy5Qb2x5bGluZSIsImdyYXBoaWMuU2VjdG9yIiwiUGllVmlldyIsImdyYXBoaWMucmVtb3ZlRWxlbWVudFdpdGhGYWRlT3V0IiwibGFiZWxMYXlvdXQiLCJMZWdlbmRWaXN1YWxQcm92aWRlciIsImdldFJhd0RhdGEiLCJQaWVTZXJpZXNNb2RlbCIsInpyVXRpbC5yZXRyaWV2ZSIsIkF4aXNCdWlsZGVyIiwicHQxIiwicHQyIiwiZ3JhcGhpYy5zdWJQaXhlbE9wdGltaXplTGluZSIsImdyYXBoaWMuc2V0VG9vbHRpcENvbmZpZyIsIm5leHRUaWNrIiwibWF0cml4VXRpbC5pZGVudGl0eSIsIm1hdHJpeFV0aWwucm90YXRlIiwibWF0cml4VXRpbC5tdWwiLCJBeGlzVmlldyIsImF4aXNQb2ludGVyTW9kZWxIZWxwZXIuZml4VmFsdWUiLCJheGlzUG9pbnRlck1vZGVsSGVscGVyLmdldEF4aXNQb2ludGVyTW9kZWwiLCJCYXNlQXhpc1BvaW50ZXIiLCJheGlzUG9pbnRlck1vZGVsSGVscGVyLmdldEF4aXNJbmZvIiwiZ3JhcGhpYy5jcmVhdGVJY29uIiwidGhyb3R0bGVVdGlsLmNyZWF0ZU9yVXBkYXRlIiwidGhyb3R0bGVVdGlsLmNsZWFyIiwidGV4dENvbnRhaW4uZ2V0Qm91bmRpbmdSZWN0IiwiYXhpc0hlbHBlci5nZXRBeGlzUmF3VmFsdWUiLCJncmFwaGljLmFwcGx5VHJhbnNmb3JtIiwiQ2FydGVzaWFuQXhpc1BvaW50ZXIiLCJ2aWV3SGVscGVyLmJ1aWxkRWxTdHlsZSIsImNhcnRlc2lhbkF4aXNIZWxwZXIubGF5b3V0Iiwidmlld0hlbHBlci5idWlsZENhcnRlc2lhblNpbmdsZUxhYmVsRWxPcHRpb24iLCJ2aWV3SGVscGVyLmdldFRyYW5zZm9ybWVkUG9zaXRpb24iLCJ2aWV3SGVscGVyLm1ha2VMaW5lU2hhcGUiLCJ2aWV3SGVscGVyLm1ha2VSZWN0U2hhcGUiLCJBeGlzUG9pbnRlck1vZGVsIiwibWFrZURpc3BhdGNoQWN0aW9uIiwiQXhpc1BvaW50ZXJWaWV3IiwiZ2xvYmFsTGlzdGVuZXIucmVnaXN0ZXIiLCJnbG9iYWxMaXN0ZW5lci51bnJlZ2lzdGVyIiwibW9kZWxIZWxwZXIubWFrZUtleSIsImtleSIsIlRvb2x0aXBNb2RlbCIsImdldENvbXB1dGVkU3R5bGUiLCJ0cmFuc2xhdGUiLCJtYWtlU3R5bGVDb29yZCIsIlRvb2x0aXBIVE1MQ29udGVudCIsIlRvb2x0aXBSaWNoQ29udGVudCIsIlRvb2x0aXBWaWV3IiwiYXhpc1BvaW50ZXJWaWV3SGVscGVyLmdldFZhbHVlTGFiZWwiLCJodG1sIiwiaW5zdGFsbEF4aXNQb2ludGVyIiwiVGl0bGVNb2RlbCIsIlRpdGxlVmlldyIsIkxlZ2VuZE1vZGVsIiwienJVdGlsLmZpbHRlciIsIkxlZ2VuZFZpZXciLCJsYXlvdXRVdGlsLmdldExheW91dFJlY3QiLCJzZXJpZXNNb2RlbCIsImxlZ2VuZEljb24iLCJpdGVtR3JvdXAiLCJsYXlvdXRVdGlsLmJveCIsIlNjcm9sbGFibGVMZWdlbmRNb2RlbCIsIlNjcm9sbGFibGVMZWdlbmRWaWV3IiwiaW50ZXJzZWN0IiwiaW5zdGFsbExlZ2VuZFBsYWluIiwiaW5zdGFsbExlZ2VuZFNjcm9sbCIsImNhbGxiYWNrIiwiaWQiLCJ0aGlzJDEiLCJ0IiwibiIsIm8iLCJhIiwidSIsIkUiLCJfIiwicyIsInIiLCJjIiwidiIsImciLCJsIiwiZiIsInAiLCJDYW52YXNSZW5kZXJlciIsIlBpZUNoYXJ0IiwiVGl0bGVDb21wb25lbnQiLCJUb29sdGlwQ29tcG9uZW50IiwiTGVnZW5kQ29tcG9uZW50IiwiVEhFTUVfS0VZIiwibW9tZW50Il0sIm1hcHBpbmdzIjoiO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWdCQSxJQUFJLGdCQUFnQixTQUFTLEdBQUdBLElBQUc7QUFDL0Isa0JBQWdCLE9BQU8sa0JBQ2xCLEVBQUUsV0FBVyxDQUFBLGVBQWdCLFNBQVMsU0FBVUMsSUFBR0QsSUFBRztBQUFFLElBQUFDLEdBQUUsWUFBWUQ7QUFBQSxFQUFFLEtBQ3pFLFNBQVVDLElBQUdELElBQUc7QUFBRSxhQUFTLEtBQUtBO0FBQUcsVUFBSSxPQUFPLFVBQVUsZUFBZSxLQUFLQSxJQUFHLENBQUM7QUFBRyxRQUFBQyxHQUFFLEtBQUtELEdBQUU7QUFBQTtBQUNoRyxTQUFPLGNBQWMsR0FBR0EsRUFBQztBQUM3QjtBQUVPLFNB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LEtBQUssSUFBSSxLQUFLLENBQUM7QUFBQSxFQUM1RCxlQUFlLENBQUMsR0FBRyxLQUFLLEtBQUssQ0FBQztBQUFBLEVBQUcsV0FBVyxDQUFDLEtBQUssS0FBSyxLQUFLLENBQUM7QUFBQSxFQUM3RCxXQUFXLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQztBQUFBLEVBQUcsY0FBYyxDQUFDLElBQUksS0FBSyxLQUFLLENBQUM7QUFBQSxFQUM3RCxhQUFhLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQztBQUFBLEVBQUcsZUFBZSxDQUFDLEtBQUssS0FBSyxLQUFLLENBQUM7QUFBQSxFQUMvRCxlQUFlLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQztBQUFBLEVBQUcsV0FBVyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7QUFBQSxFQUMzRCxhQUFhLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQztBQUFBLEVBQUcsY0FBYyxDQUFDLEtBQUssS0FBSyxLQUFLLENBQUM7QUFBQSxFQUNoRSxRQUFRLENBQUMsS0FBSyxLQUFLLEdBQUcsQ0FBQztBQUFBLEVBQUcsYUFBYSxDQUFDLEtBQUssS0FBSyxJQUFJLENBQUM7QUFBQSxFQUN2RCxRQUFRLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQztBQUFBLEVBQUcsU0FBUyxDQUFDLEdBQUcsS0FBSyxHQUFHLENBQUM7QUFBQSxFQUNsRCxlQUFlLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQztBQUFBLEVBQUcsUUFBUSxDQUFDLEtBQUssS0FBSyxLQUFLLENBQUM7QUFBQSxFQUMzRCxZQUFZLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQztBQUFBLEVBQUcsV0FBVyxDQUFDLEtBQUssS0FBSyxLQUFLLENBQUM7QUFBQSxFQUM1RCxhQUFhLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQztBQUFBLEVBQUcsVUFBVSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7QUFBQSxFQUN2RCxTQUFTLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQztBQUFBLEVBQUcsU0FBUyxDQUFDLEtBQUssS0FB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QWEsQ0FBQyxLQUFLLElBQUksR0FBRyxDQUFDO0FBQUEsRUFDdkQsVUFBVSxDQUFDLEtBQUssS0FBSyxLQUFLLENBQUM7QUFBQSxFQUFHLGlCQUFpQixDQUFDLEtBQUssS0FBSyxLQUFLLENBQUM7QUFBQSxFQUNoRSxhQUFhLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQztBQUFBLEVBQUcsaUJBQWlCLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQztBQUFBLEVBQ25FLGlCQUFpQixDQUFDLEtBQUssS0FBSyxLQUFLLENBQUM7QUFBQSxFQUFHLGNBQWMsQ0FBQyxLQUFLLEtBQUssS0FBSyxDQUFDO0FBQUEsRUFDcEUsYUFBYSxDQUFDLEtBQUssS0FBSyxLQUFLLENBQUM7QUFBQSxFQUFHLFFBQVEsQ0FBQyxLQUFLLEtBQUssSUFBSSxDQUFDO0FBQUEsRUFDekQsUUFBUSxDQUFDLEtBQUssS0FBSyxLQUFLLENBQUM7QUFBQSxFQUFHLFFBQVEsQ0FBQyxLQUFLLEtBQUssS0FBSyxDQUFDO0FBQUEsRUFDckQsY0FBYyxDQUFDLEtBQUssS0FBSyxLQUFLLENBQUM7QUFBQSxFQUFHLFVBQVUsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO0FBQUEsRUFDM0QsT0FBTyxDQUFDLEtBQUssR0FBRyxHQUFHLENBQUM7QUFBQSxFQUFHLGFBQWEsQ0FBQyxLQUFLLEtBQUssS0FBSyxDQUFDO0FBQUEsRUFDckQsYUFBYSxDQUFDLElBQUksS0FBSyxLQUFLLENBQUM7QUFBQSxFQUFHLGVBQWUsQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDO0FBQUEsRUFDOUQsVUFBVSxDQUFDLEtBQUssS0FBSyxLQUFLLENBQUM7QUFBQSxFQUFHLGNBQWMsQ0FBQyxLQUFLLEtBQUssSUFBSSxDQUFDO0FBQUEsRUFDNUQsWUFBWSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUM7QUFBQSxFQUFHLFlBQVksQ0FBQyxLQUFLLEtBQUssS0FBSyxDQUFDO0FBQUEsRUFDM0QsVUFBVSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUM7QUFBQSxFQUFHLFVBQVUs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
